var collect=function(){"use strict";var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")},n=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])}return e},t=function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):e.__proto__=r)},i=function(e,r){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!=typeof r&&"function"!=typeof r?e:r},o=void 0,s=function e(){var t=this;r(this,e),this.set=function(e,r){var n=e,i=r;if(null===i)return!1;var o="";if(n.indexOf(".")>-1){var s=n.split(".");o=s[0],n=s[1]}"os_version"===n&&(i=""+i),o?"user"===o||"header"===o?t.envInfo[o][n]=i:"headers"===o?t.envInfo.header.headers[n]=i:t.envInfo.header.headers.custom[n]=i:t.envInfo.user.hasOwnProperty(n)?(["user_type","device_id","ip_addr_id"].indexOf(n)>-1?t.envInfo.user[n]=Number(i):["user_id","web_id","user_unique_id","ssid"].indexOf(n)>-1?t.envInfo.user[n]=String(i):["user_is_auth","user_is_login"].indexOf(n)>-1&&(t.envInfo.user[n]=Boolean(i)),"user_id"===n&&(t.envInfo.user.user_unique_id=String(i))):t.envInfo.header.hasOwnProperty(n)?t.envInfo.header[n]=i:t.envInfo.header.headers.hasOwnProperty(n)?t.envInfo.header.headers[n]=i:t.envInfo.header.headers.custom[n]=i},this.get=function(){var e={user:{},header:{headers:{custom:{}}}},r=t.envInfo,i=r.user,s=Object.keys(i),a=Array.isArray(s),c=0;for(s=a?s:s[Symbol.iterator]();;){var u;if(a){if(c>=s.length)break;u=s[c++]}else{if((c=s.next()).done)break;u=c.value}var d=u;i[d]!==o&&(e.user[d]=i[d])}var f=r.header,l=Object.keys(f),p=Array.isArray(l),h=0;for(l=p?l:l[Symbol.iterator]();;){var v;if(p){if(h>=l.length)break;v=l[h++]}else{if((h=l.next()).done)break;v=h.value}var _=v;f[_]!==o&&"headers"!==_&&(e.header[_]=f[_])}var g=r.header.headers,m=Object.keys(g),y=Array.isArray(m),b=0;for(m=y?m:m[Symbol.iterator]();;){var w;if(y){if(b>=m.length)break;w=m[b++]}else{if((b=m.next()).done)break;w=b.value}var S=w;"custom"!==S&&g[S]!==o&&(e.header.headers[S]=g[S])}var O=r.header.headers.custom,k=Object.keys(O);if(k.length){var E=k,I=Array.isArray(E),q=0;for(E=I?E:E[Symbol.iterator]();;){var x;if(I){if(q>=E.length)break;x=E[q++]}else{if((q=E.next()).done)break;x=q.value}var T=x;e.header.headers.custom[T]=O[T]}}return{user:e.user,header:n({},e.header,{headers:e.header.headers})}},this.envInfo={user:{user_unique_id:o,user_type:o,user_id:o,user_is_auth:o,user_is_login:o,device_id:o,web_id:o,ip_addr_id:o,ssid:o},header:{app_id:o,app_name:o,app_install_id:o,app_package:o,app_channel:o,app_version:o,os_name:o,os_version:o,device_model:o,ab_client:o,ab_version:o,traffic_type:o,utm_source:o,utm_medium:o,utm_campaign:o,client_ip:o,device_brand:o,os_api:o,access:o,language:o,region:o,app_language:o,app_region:o,creative_id:o,ad_id:o,campaign_id:o,log_type:o,rnd:o,platform:o,sdk_version:o,browser:o,browser_version:o,province:o,city:o,tz_name:o,timezone:o,tz_offset:o,resolution:o,referrer:o,referrer_host:o,headers:{utm_term:o,utm_content:o,custom:{}}}}},a=function(e){var r=document.createElement("a");return r.href=e,r},c=screen.width||0,u=screen.height||0,d=c+" x "+u,f=navigator.appVersion,l=navigator.userAgent,p=navigator.language,h=document.referrer,v=a(h).hostname,_=function(e){var r=a(e).search,n={};return(r=r.slice(1)).split("&").forEach(function(e){var r=e.split("="),t=r[0],i=r[1];n[t]=decodeURIComponent(void 0===i?"":i)}),n}(location.href),g="",m="",y="",b=""+parseFloat(f),w=void 0,S=void 0;-1!==(w=l.indexOf("Opera"))&&(y="Opera",b=l.substring(w+6),-1!==(w=l.indexOf("Version"))&&(b=l.substring(w+8))),-1!==(w=l.indexOf("Edge"))?(y="Microsoft Edge",b=l.substring(w+5)):-1!==(w=l.indexOf("MSIE"))?(y="Microsoft Internet Explorer",b=l.substring(w+5)):-1!==(w=l.indexOf("Chrome"))?(y="Chrome",b=l.substring(w+7)):-1!==(w=l.indexOf("Safari"))?(y="Safari",b=l.substring(w+7),-1!==(w=l.indexOf("Version"))&&(b=l.substring(w+8))):-1!==(w=l.indexOf("Firefox"))&&(y="Firefox",b=l.substring(w+8)),-1!==(S=b.indexOf(";"))&&(b=b.substring(0,S)),-1!==(S=b.indexOf(" "))&&(b=b.substring(0,S)),-1!==(S=b.indexOf(")"))&&(b=b.substring(0,S));for(var O=/Mobile|htc|mini|Android|iP(ad|od|hone)/.test(f)?"wap":"web",k=[{s:"Windows 10",r:/(Windows 10.0|Windows NT 10.0)/},{s:"Windows 8.1",r:/(Windows 8.1|Windows NT 6.3)/},{s:"Windows 8",r:/(Windows 8|Windows NT 6.2)/},{s:"Windows 7",r:/(Windows 7|Windows NT 6.1)/},{s:"Android",r:/Android/},{s:"Sun OS",r:/SunOS/},{s:"Linux",r:/(Linux|X11)/},{s:"iOS",r:/(iPhone|iPad|iPod)/},{s:"Mac OS X",r:/Mac OS X/},{s:"Mac OS",r:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/}],E=0;E<k.length;E++){var I=k[E];if(I.r.test(l)){g=I.s;break}}function q(e,r){var n=e.exec(r);return n&&n[1]?n[1]:""}/Windows/.test(g)&&(m=q(/Windows (.*)/,g),g="windows");switch(g){case"Mac OS X":m=q(/Mac OS X (10[\.\_\d]+)/,l),g="mac";break;case"Android":m=function(e){var r=q(/Android ([\.\_\d]+)/,e);return r||(r=q(/Android\/([\.\_\d]+)/,e)),r}(l),g="android";break;case"iOS":m=(m=/OS (\d+)_(\d+)_?(\d+)?/.exec(f))?m[1]+"."+m[2]+"."+(0|m[3]):"",g="ios"}var x={screen_size:d,browser:y,browser_version:b,platform:O,os_name:g,os_version:m,userAgent:l,screen_width:c,screen_height:u,device_model:g,language:p,referrer:h,referrer_host:v,utm_source:_.utm_source,utm_medium:_.utm_medium,utm_campaign:_.utm_campaign,utm_term:_.utm_term,utm_content:_.utm_content},T=new function e(){r(this,e),this.get=function(e){var r="";try{var n=localStorage.getItem(e);n&&(r=n=JSON.parse(n))}catch(e){console.error(e.message)}return r},this.set=function(e,r){try{localStorage.setItem(e,r)}catch(e){console.error(e)}}},N="tea-web-sdk: ",C=new function n(){var t=this;r(this,n),this.init=function(e){t.isLog=e},this.info=function(){for(var e=arguments.length,r=Array(e),n=0;n<e;n++)r[n]=arguments[n];if(t.isLog){var i;(i=console).log.apply(i,[N].concat(r))}},this.warn=function(){for(var e=arguments.length,r=Array(e),n=0;n<e;n++)r[n]=arguments[n];if(t.isLog){var i;(i=console).warn.apply(i,[N].concat(r))}},this.error=function(){for(var e=arguments.length,r=Array(e),n=0;n<e;n++)r[n]=arguments[n];if(t.isLog){var i;(i=console).error.apply(i,[N].concat(r))}},this.logJSON=function(r){"object"===(void 0===r?"undefined":e(r))&&t.isLog},this.throw=function(e){throw t.error(N),new Error(e)},this.table=function(e){t.isLog&&console.table(e)}},P=function(e,r,n,t){var i=new XMLHttpRequest;i.open("POST",e,!0),i.setRequestHeader("Content-Type","application/json; charset=utf-8"),i.onload=function(){try{var e=JSON.parse(i.responseText);n&&n(e)}catch(e){console.error(e.message),t&&t()}},i.onerror=function(){t&&t()},i.send(JSON.stringify(r))},A="__tea_cache_",R=(new Date).getTimezoneOffset(),j=-R/60,D=60*R,J=void 0;try{J="3.1.31"}catch(e){J="2.x"}var L=new(function(e){t(n,e);function n(){r(this,n);var t=i(this,e.call(this));return t.initClientEnv=function(){t.set("os_name",x.os_name),t.set("os_version",x.os_version),t.set("device_model",x.device_model),t.set("platform",x.platform),t.set("sdk_version",J),t.set("browser",x.browser),t.set("browser_version",x.browser_version),t.set("language",x.language),t.set("timezone",j),t.set("tz_offset",D),t.set("resolution",x.screen_width+"x"+x.screen_height),t.set("screen_width",x.screen_width),t.set("screen_height",x.screen_height),t.set("referrer",x.referrer),t.set("referrer_host",x.referrer_host),t.set("utm_source",x.utm_source),t.set("utm_medium",x.utm_medium),t.set("utm_campaign",x.utm_campaign),t.set("utm_term",x.utm_term),t.set("utm_content",x.utm_content)},t.initClientEnv(),t}return n}(s)),M=new(function(){function e(){r(this,e)}return e.prototype.isString=function(e){return"String"===Object.prototype.toString.call(e).slice(8,-1)},e.prototype.isNumber=function(e){return"Number"===Object.prototype.toString.call(e).slice(8,-1)},e.prototype.isBoolean=function(e){return"Boolean"===Object.prototype.toString.call(e).slice(8,-1)},e.prototype.isFunction=function(e){return"Function"===Object.prototype.toString.call(e).slice(8,-1)},e.prototype.isNull=function(e){return"Null"===Object.prototype.toString.call(e).slice(8,-1)},e.prototype.isUndefined=function(e){return"Undefined"===Object.prototype.toString.call(e).slice(8,-1)},e.prototype.isObj=function(e){return"Object"===Object.prototype.toString.call(e).slice(8,-1)},e.prototype.isArray=function(e){return"Array"===Object.prototype.toString.call(e).slice(8,-1)},e.prototype.isFalse=function(e){return""===e||void 0===e||null===e||"null"===e||"undefined"===e||0===e||!1===e||NaN===e},e.prototype.isTrue=function(e){return!this.isFalse(e)},e.prototype.isLowIE=function(){return window.XDomainRequest},e}()),U={va:"https://maliva-mcs.byteoversea.com",sg:"https://sgali-mcs.byteoversea.com",cn:"https://mcs.snssdk.com",internal:"https://mcs.byted.org"},W=function(e){try{var r=document.cookie.match(new RegExp("(?:^|;)\\s*"+e+"=([^;]+)"));return decodeURIComponent(r?r[1]:"")}catch(e){return""}},F=function(e){t(o,e);function o(){r(this,o);var t=i(this,e.call(this));return t.init=function(e,r){if("number"!=typeof e)throw new Error("app_id 蹇呴』鏄竴涓暟瀛楋紝娉ㄦ剰妫€鏌ユ槸鍚︽槸浠string`鐨勬柟寮忎紶鍏ョ殑锛�");t.app_id=e,t.evtDataCacheKey=A+"events_"+e,t.initUrls(r),t.setEnv("app_id",e)},t.initUrls=function(e){if(!U[e])throw new Error("channel 鍙橀噺鍙兘鏄痐internal`, `cn`, `sg`,`va`");t.reportUrl=U[e]+"/v1/list",t.userTokensPrefix=""+U[e]},t.setEnv=function(e,r){if("app_id"===e&&t.checkUserToken(r),"user_unique_id"===e){if(""===String(r))return void C.error("鏃犳晥鎿嶄綔锛氳缃簡绌哄€肩殑user_unique_id銆�");t.verifyTokens(r)}t.set(e,r)},t.transferFromCookie=function(e){var r=W("tt_webid"),n=W("__tea_sdk__ssid"),t=W("__tea_sdk__user_unique_id");if(M.isLowIE()){if(r){var i={web_id:r,ssid:r,user_unique_id:r};T.set(e,JSON.stringify(i))}return!1}if(r&&n&&t){var o={web_id:r,ssid:n,user_unique_id:t};T.set(e,JSON.stringify(o))}},t.checkUserToken=function(e){var r=A+"tokens_"+e;t.tokensCacheKey=r,t.transferFromCookie(r);var n=T.get(r);return n.user_unique_id&&n.web_id&&n.ssid?(t.envInfo.user.user_unique_id=n.user_unique_id,t.envInfo.user.web_id=n.web_id,t.envInfo.user.ssid=n.ssid,C.warn("鍒濆鍖栧凡缁忔娴嬪埌浜� webid ssid user_id锛屼竴鑸儏鍐典笅涓嶉渶瑕佸啀娆￠獙璇� id 浜�"),t.unlock(),!1):t.requestWebId(e)},t.requestWebId=function(){t.isRequestWebId=!0;var e=t.userTokensPrefix+"/v1/user/webid";P(e,{app_id:t.app_id,url:location.href,user_agent:x.userAgent,referer:x.referrer,user_unique_id:""},function(e){var r=t.tokensCacheKey;if(0!==e.e)console.error("璇锋眰 webid 澶辫触~");else{t.isRequestWebId=!1,t.envInfo.user.ssid=e.ssid,t.envInfo.user.web_id=e.web_id,t.envInfo.user.user_unique_id=e.web_id;var n={web_id:e.web_id,ssid:e.ssid,user_unique_id:e.web_id};T.set(r,JSON.stringify(n)),t.waitForVerifyTokens?(t.lock(),t.verifyTokens(t.realUuid)):(t.unlock(),t.callback&&t.callback())}},function(){t.isRequestWebId=!1,C.error("鑾峰彇 webid 澶辫触锛屾暟鎹皢涓嶄細琚笂鎶�")})},t.verifyTokens=function(e){var r=t.tokensCacheKey;if(t.waitForVerifyTokens=!1,t.realUuid=""+e,t.isRequestWebId)return t.waitForVerifyTokens=!0,console.warn("姝ｅ湪璇锋眰 webid锛宺equestSsid 灏嗕細鍦ㄥ墠鑰呰姹傚畬姣曚箣鍚庤璋冪敤"),!1;var i=T.get(r);if(i.user_unique_id===t.realUuid&&i.ssid&&i.web_id)console.warn("浼犲叆鐨� user_id/user_unique_id 涓� 缂撳瓨涓殑瀹屽叏涓€鑷达紝鏃犻渶鍐嶆璇锋眰"),t.unlock();else{t.lock(),t.envInfo.user.user_unique_id=t.realUuid;var o=n({},T.get(r),{user_unique_id:t.realUuid});if(T.set(r,JSON.stringify(o)),M.isLowIE())return t.unlock(),!1;t.isSsidDisabled?(t.unlock(),t.callback&&t.callback()):t.requestSsid()}},t.requestSsid=function(){var e=t.tokensCacheKey,r=T.get(e),i=t.userTokensPrefix+"/v1/user/ssid";P(i,{app_id:t.app_id,web_id:r.web_id,user_unique_id:""+r.user_unique_id},function(i){if(t.unlock(),0!==i.e)console.error("璇锋眰 ssid 澶辫触~");else{t.envInfo.user.ssid=i.ssid;var o=n({},r,{ssid:i.ssid});T.set(e,JSON.stringify(o)),console.warn("鏍规嵁 user_unique_id 鏇存柊 ssid 鎴愬姛锛佹敞鎰忥細鍦ㄨ繖涔嬪墠涓嶅簲璇ユ湁鏁版嵁琚彂鍑哄幓"),t.callback&&t.callback()}},function(){t.unlock(),C.error("鏍规嵁 user_unique_id 鑾峰彇鏂� ssid 澶辫触")})},t.setEvtParams=function(e){var r=n({},e);Object.keys(r).forEach(function(e){t.evtParams[e]=r[e]})},t.mergeEnvToEvents=function(e){for(var r=[],i=t.evtParams;e.length;){var o={events:[],user:{},header:{},verbose:t.debugMode?1:void 0},s=e.splice(0,5);o.events=s.map(function(e){return n({},e,{params:JSON.stringify(n({},i,e.params))})});var a=t.mergeEnv();o.user=a.user,o.header=a.header,r.push(o)}return r},t.mergeEnv=function(){var e=t.get(),r=L.get(),i=n({},e.user),o=n({},r.header.headers.custom,e.header.headers.custom),s=n({},r.header.headers,e.header.headers,{custom:o}),a=n({},r.header,e.header);return{user:i,header:n({},a,{headers:JSON.stringify(s)})}},t.evtParams={},t.isSsidDisabled=!1,t.debugMode=!1,t}return o.prototype.lock=function(){this.isUserTokensReady=!1},o.prototype.unlock=function(){this.isUserTokensReady=!0},o.prototype.disableSSID=function(e){this.isSsidDisabled=e},o.prototype.enableDebugMode=function(e){this.debugMode=e},o}(s),V=new function e(){var n=this;r(this,e),this.set=function(e,r){n.cache[e]=r},this.get=function(e){var r=[],t=n.cache[e];if(t){var i=t,o=Array.isArray(i),s=0;for(i=o?i:i[Symbol.iterator]();;){var a;if(o){if(s>=i.length)break;a=i[s++]}else{if((s=i.next()).done)break;a=s.value}var c=a;r.push(c)}}else r=[];return r},this.clean=function(e){n.cache[e]=void 0},this.cache={}},X=function(e,r){try{var n=e.split("v1")[0];r.forEach(function(e){var r=function(e){var r="";for(var n in e)e.hasOwnProperty(n)&&(r+="&"+n+"="+encodeURIComponent(JSON.stringify(e[n])));return r="&"===r[0]?r.slice(1):r}(e),t=new Image(1,1);t.onload=function(){t=null},t.onerror=function(){t=null},t.src=n+"/v1/gif?"+r})}catch(e){C.error(e.message)}},K=function(e,r){if(window.XDomainRequest)return X(e,r);var n=new XMLHttpRequest;n.open("POST",e+"?rdn="+Math.random(),!0),n.onload=function(){try{var e=JSON.parse(n.responseText);C.info("report sdk event success,",e)}catch(e){C.error(e.message)}},n.onerror=function(){n.abort()},n.send(JSON.stringify(r))},z=!1,B=function(e,r,n,t){try{var i=e.split("v1")[0];i||console.error("Reported url is wrong"),r.forEach(function(e){var r=function(e){var r="";for(var n in e)e.hasOwnProperty(n)&&(r+="&"+n+"="+encodeURIComponent(JSON.stringify(e[n])));return r="&"===r[0]?r.slice(1):r}(e),o=new Image(1,1);o.onload=function(){o=null,n()},o.onerror=function(){o=null,t()},o.src=i+"/v1/gif?"+r})}catch(e){console.error(e.message)}},H=function(e){var r=e.url,n=e.data,t=e.success,i=e.fail,o=e.notSure,s=e.isUnload;if(!z){z=!0;try{var a=n[0].header,c=n[0].user;G(r,{app_id:a.app_id,app_name:a.app_name,sdk_version:JSON.parse(a.headers).sdk_version,web_id:c.web_id})}catch(e){console.error("hasOnloadReport",e.message)}}var u=n;if(window.XDomainRequest)B(r,u,t,i);else if(s){if(window.navigator&&window.navigator.sendBeacon){o();var d=window.navigator.sendBeacon(r,JSON.stringify(u));return C.info("beacon:",d),void(d?(t(),C.info("beacon: success",d)):i())}B(r,u,t,i)}else{var f=new XMLHttpRequest;f.open("POST",r+"?rdn="+Math.random(),!0),f.onload=function(){try{var e=JSON.parse(f.responseText);0!==e.e?(Q(r,u,e.e),-2===e.e&&C.warn("The field is in the wrong format. It is most likely written as an int string"),C.error("鏁版嵁涓婃姤澶辫触锛�","閿欒鐮侊細"+e.e),C.error("涓轰簡閬垮厤鍚庣画涓婃姤鏁版嵁琚樆濉烇紝sdk 灏嗕笉鍐嶉噸璇曚笂鎶ユ湰鏁版嵁锛屾暟鎹疄浣撳皢浼氫粠 localstorage 娓呴櫎")):C.warn("鏁版嵁涓婃姤鎴愬姛: ",u),t()}catch(e){C.error(e.message),i(),Q(r,u,500)}},f.onerror=function(){f.abort(),C.error("鏁版嵁涓婃姤澶辫触"),i(),Q(r,u,500)},f.send(JSON.stringify(u))}},G=function(e,r){try{var n={events:[{event:"onload",params:JSON.stringify({app_id:r.app_id,app_name:r.app_name||"",sdk_version:r.sdk_version}),local_time_ms:Date.now()}],user:{user_unique_id:r.web_id},header:{app_id:1338}};setTimeout(function(){K(e,[n])},16)}catch(e){console.error("postOnloadLog: ",e.message)}},Q=function(e,r,n){re.reportErrorCallback(r,n);try{var t=r[0].user,i=r[0].header,o=[];r.forEach(function(e){e.events.forEach(function(e){o.push(e)})});var s={events:o.map(function(e){return{event:"on_error",params:JSON.stringify({error_code:n,app_id:i.app_id,app_name:i.app_name||"",error_event:e.event,local_time_ms:e.local_time_ms,tea_event_index:Date.now(),params:e.params,header:JSON.stringify(i),user:JSON.stringify(t)}),local_time_ms:Date.now()}}),user:{user_unique_id:t.user_unique_id},header:{app_id:1338}};setTimeout(function(){K(e,[s])},16)}catch(e){console.error("postErrLog: ",e.message)}},Y=function(e){t(n,e);function n(t){var o=t.app_id,s=t.channel;r(this,n);var a=i(this,e.call(this));return a.addListener=function(){window.addEventListener("unload",function(){a.report(!0)},!1),window.addEventListener("beforeunload",function(){a.report(!0)},!1),document.addEventListener("visibilitychange",function(){"hidden"==document.visibilityState&&a.report(!0)},!1)},a.setReady=function(e){a.isReady=e,a.report()},a.event=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=V.get(a.evtDataCacheKey)||[],n=[].concat(r,e);V.set(a.evtDataCacheKey,n),n.length>=5?a.report():setTimeout(function(){a.report()},45)},a.report=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!a.isUserTokensReady)return!1;if(!a.isReady)return!1;var r=a.evtDataCacheKey,n=V.get(r);V.clean(r);var t=a.mergeEnvToEvents(n),i=T.get(r)||[],o=t.concat(i);if(!o.length)return C.info("鍐呭瓨缂撳瓨锛屼互鍙� localStorage 涓殑鍓╀綑鏁版嵁鍧囧凡涓婃姤瀹屾瘯锛岀瓑寰呬笅娆′簨浠惰Е鍙戯紒"),C.info(""),!1;if(T.set(r,JSON.stringify(o)),a.isReporting)return!1;C.info("localStorage 涓浐鍖栫殑鏁版嵁锛屽嵆灏嗚鍒嗚В涓婃姤锛�"),C.info(o);var s=0,c=null,u=a.sliceLength,d=o.length;d<=u?(s=d,c=o):(s=u,C.info("涓婅堪鍥哄寲鏁版嵁涓殑"+u+"鏉¤鎴愬姛涓婃姤锛�"),C.info(""),c=o.slice(d-u)),a.sendData(c,s,e)},a.sendData=function(e,r,n){a.isReporting=!0;var t=function(){a.isReporting=!1};H({url:a.reportUrl,data:e,success:function(){t(),a.sendDataSuccess(r)},fail:function(){t(),setTimeout(function(){a.report()},3e3)},notSure:t,isUnload:n})},a.sendDataSuccess=function(e){var r=a.evtDataCacheKey,n=T.get(r),t=n.length,i=n.slice(0,t-e);T.set(r,JSON.stringify(i)),a.report()},a.sliceLength=5,a.init(o,s),a.isReady=!1,a.addListener(),a}return n}(F),Z=/^event\./,$=window.TeaAnalyticsObject;$||($="collectEvent",window.TeaAnalyticsObject=$);var ee=window[$];ee||((ee=function(){for(var e=arguments.length,r=Array(e),n=0;n<e;n++)r[n]=arguments[n];return ee.q.push(r),ee}).q=ee.q||[],window[$]=ee);var re={reportErrorCallback:function(){}};return new(function(){function e(){var t=this;return r(this,e),this._processCache=function(){if(t.cachaCalled)return!1;!function(){var e=[].concat(ee.q),r=function(e){if(M.isFunction(t[e[0]])){var r=e[0],n=t[r],i=e.slice(1);n.apply(t,i)}else t.event.apply(t,e)};if(ee.q.push=function(e){var n=e;return n=Array.prototype.slice.call(n),r(n),ee},!e.length)return!1;t.channel&&(t.cachaCalled=!0,e.forEach(function(e){var n=e;n=Array.prototype.slice.call(n),r(n)}));var n=0;e.some(function(e,r){if("init"===e[0])return n=r,!0})&&(t.cachaCalled=!0,0===n?e.forEach(function(e){var n=e;n=Array.prototype.slice.call(n),r(n)}):e.splice(n,1).concat(e).forEach(function(e){var n=e;n=Array.prototype.slice.call(n),r(n)}))}()},this.init=function(e){if(!M.isObj(e))throw new Error("init 鐨勫弬鏁板繀椤绘槸{app_id, channel}");t.channel=new Y(e),t.channel.callback=function(){t.callbackSend&&t.start()}},this.config=function(e){M.isObj(e)||C.throw("config 鍙傛暟蹇呴』鏄� {} 鐨勬牸寮�"),e.log&&(C.init(!0),t.channel.enableDebugMode(!0),e.log=null);var r=Object.keys(e);if(!r.length)return!1;var n=r,i=Array.isArray(n),o=0;for(n=i?n:n[Symbol.iterator]();;){var s;if(i){if(o>=n.length)break;s=n[o++]}else{if((o=n.next()).done)break;s=o.value}var a=s,c=e[a];switch(a){case"evtParams":t.channel.setEvtParams(c);break;case"disable_ssid":c&&(C.warn("ssid宸茬鐢紝璁剧疆user_unique_id涓嶄細璇锋眰ssid鎺ュ彛銆�"),t.channel.disableSSID(c));break;case"disable_auto_pv":c&&(C.warn("宸茬姝㈤粯璁や笂鎶redefine_pageview浜嬩欢锛岄渶鎵嬪姩涓婃姤銆�"),t.autoSendPV=!1);break;case"_staging_flag":""+c=="1"&&C.warn("鏍规嵁_staging_flag璁剧疆锛屾暟鎹皢浼氫笂鎶ュ埌stag 琛ㄣ€�"),t.channel.setEvtParams({_staging_flag:Number(c)});break;case"reportErrorCallback":"function"==typeof c&&(re.reportErrorCallback=c);break;default:t.channel.setEnv(a,c)}}},this.send=function(){t.start()},this.start=function(){if(t.channel.isUserTokensReady){if(t.isSendFuncCalled)return;t.isSendFuncCalled=!0,C.warn("鐪嬪埌鏈彁绀猴紝鎰忓懗鐫€鐢ㄦ埛淇℃伅宸插畬鍏ㄥ氨缁紝涓婃姤閫氶亾鎵撳紑"),C.info("鐢ㄦ埛淇℃伅",JSON.stringify(t.channel.get().user,null,2)),t.channel.setReady(!0),t._processCache(),t.autoSendPV&&t.predefinePageView()}else t.callbackSend=!0},this.predefinePageView=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r={title:document.title||location.pathname,url:location.href,url_path:location.pathname},i=n({},r,e);t.event("predefine_pageview",i)},this._count=function(){var e=Date.now();return++e},this.preprocessEvent=function(e,r){Z.test(e)&&(e=e.slice(6));var n=r;M.isObj(n)||(n={}),n.event_index=t._count();return{event:e,params:n,local_time_ms:+new Date}},this.event=function(){for(var e=arguments.length,r=Array(e),n=0;n<e;n++)r[n]=arguments[n];t.checkInitExec();var i=r[0],o=[];M.isArray(i)?o=r:o[0]=r,o=o.map(function(e){return t.preprocessEvent.apply(t,e)}),t.channel.event(o)},this.cachaCalled=!1,this.isSendFuncCalled=!1,this.autoSendPV=!0,this._processCache(),ee.init=this.init,ee.config=this.config,ee.send=this.send,ee.start=this.start,ee.predefinePageView=this.predefinePageView,ee}return e.prototype.checkInitExec=function(){if(!this.channel)throw new Error("璇峰厛璋冪敤init鏂规硶锛屽垵濮嬪寲SDK銆�")},e}())}();
