!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self,e.Player=t())}(this,function(){"use strict";function createCommonjsModule(e,t){return t={exports:{}},e(t,t.exports),t.exports}function match(e,t){if(vendor)return vendor.call(e,t);for(var n=e.parentNode.querySelectorAll(t),i=0;i<n.length;++i)if(n[i]==e)return!0;return!1}function detect(){bind=window.addEventListener?"addEventListener":"attachEvent",unbind=window.removeEventListener?"removeEventListener":"detachEvent",prefix="addEventListener"!==bind?"on":""}function _createElement(e,t){var n=document.createElement(e);return n.className=t,n}function registerIconsObj(e,t){Object.keys(e).map(function(n){Object.defineProperty(t.icons,n,{get:function(){var i=t.config.icons||t.playerConfig.icons;return i&&i[n]?i[n]:e[n]}})})}function registerTextObj(e,t){Object.keys(e).map(function(n){Object.defineProperty(t.text,n,{get:function(){var i=t.playerConfig.lang||"zh";return i.indexOf("-")>0&&(i=i.split("-")[0]),e[n][i]}})})}function getDefaultConfig(){return{id:"",el:null,url:"",width:600,height:337.5,fluid:!1,fitVideoSize:"auto",volume:.6,autoplay:!1,autoplayMuted:!1,loop:!1,videoInit:!1,poster:"",defaultPlaybackRate:1,execBeforePluginsCall:null,closeVideoClick:!1,closeVideoDblclick:!1,closePlayerBlur:!1,leavePlayerTime:0,closePlayVideoFocus:!1,closeFocusVideoFocus:!1,closeControlsBlur:!1,videoAttrbutes:{},ignores:[],whitelist:[],inactive:3e3,lang:(document.documentElement.getAttribute("lang")||navigator.language||"zh-cn").toLocaleLowerCase(),controls:!0,controlsList:[],screenShot:!1,rotate:!1,pip:!1,mini:!1,cssFullscreen:!0,keyShortcut:!0}}function styleInject(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var i=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css","top"===n&&i.firstChild?i.insertBefore(r,i.firstChild):i.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}}function addAnimate(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{start:null,end:null};AnimateMap[e]&&window.clearTimeout(AnimateMap[e].id),AnimateMap[e]={},n.start&&n.start(),AnimateMap[e].id=window.setTimeout(function(){n.end&&n.end(),window.clearTimeout(AnimateMap[e].id),delete AnimateMap[e]},t)}function _createElement$1(e,t){var n=document.createElement(e);return n.className=t,n}function registerIconsObj$1(e,t){Object.keys(e).map(function(n){Object.defineProperty(t.icons,n,{get:function(){var i=t.config.icons||t.playerConfig.icons;return i&&i[n]?i[n]:e[n]}})})}function registerTextObj$1(e,t){Object.keys(e).map(function(n){Object.defineProperty(t.text,n,{get:function(){var i=t.playerConfig.lang||"zh";return i.indexOf("-")>0&&(i=i.split("-")[0]),e[n][i]}})})}var commonjsGlobal="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},_undefined=void 0,is=function(e){return void 0!==e&&null!==e},possibleTypes={object:!0,function:!0,undefined:!0},is$1=function(e){return!!is(e)&&hasOwnProperty.call(possibleTypes,typeof e)},is$2=function(e){if(!is$1(e))return!1;try{return!!e.constructor&&e.constructor.prototype===e}catch(e){return!1}},is$3=function(e){if("function"!=typeof e)return!1;if(!hasOwnProperty.call(e,"length"))return!1;try{if("number"!=typeof e.length)return!1;if("function"!=typeof e.call)return!1;if("function"!=typeof e.apply)return!1}catch(e){return!1}return!is$2(e)},classRe=/^\s*class[\s{\/}]/,functionToString=Function.prototype.toString,is$4=function(e){return!!is$3(e)&&!classRe.test(functionToString.call(e))},isImplemented=function(){var e,t=Object.assign;return"function"==typeof t&&(e={foo:"raz"},t(e,{bar:"dwa"},{trzy:"trzy"}),e.foo+e.bar+e.trzy==="razdwatrzy")},isImplemented$1=function(){try{return Object.keys("primitive"),!0}catch(e){return!1}},noop=function(){},_undefined$1=void 0,isValue=function(e){return void 0!==e&&null!==e},keys=Object.keys,shim=function(e){return keys(isValue(e)?Object(e):e)},keys$1=isImplemented$1()?Object.keys:shim,validValue=function(e){if(!isValue(e))throw new TypeError("Cannot use null or undefined");return e},max=Math.max,shim$1=function(e,t){var n,i,r,o=max(arguments.length,2);for(e=Object(validValue(e)),r=function(i){try{e[i]=t[i]}catch(e){n||(n=e)}},i=1;i<o;++i)t=arguments[i],keys$1(t).forEach(r);if(void 0!==n)throw n;return e},assign=isImplemented()?Object.assign:shim$1,forEach=Array.prototype.forEach,create=Object.create,process=function(e,t){var n;for(n in e)t[n]=e[n]},normalizeOptions=function(e){var t=create(null);return forEach.call(arguments,function(e){isValue(e)&&process(Object(e),t)}),t},str="razdwatrzy",isImplemented$2=function(){return"function"==typeof str.contains&&(!0===str.contains("dwa")&&!1===str.contains("foo"))},indexOf=String.prototype.indexOf,shim$2=function(e){return indexOf.call(this,e,arguments[1])>-1},contains=isImplemented$2()?String.prototype.contains:shim$2,d_1=createCommonjsModule(function(e){(e.exports=function(e,t){var n,i,r,o,s;return arguments.length<2||"string"!=typeof e?(o=t,t=e,e=null):o=arguments[2],is(e)?(n=contains.call(e,"c"),i=contains.call(e,"e"),r=contains.call(e,"w")):(n=r=!0,i=!1),s={value:t,configurable:n,enumerable:i,writable:r},o?assign(normalizeOptions(o),s):s}).gs=function(e,t,n){var i,r,o,s;return"string"!=typeof e?(o=n,n=t,t=e,e=null):o=arguments[3],is(t)?is$4(t)?is(n)?is$4(n)||(o=n,n=void 0):n=void 0:(o=t,t=n=void 0):t=void 0,is(e)?(i=contains.call(e,"c"),r=contains.call(e,"e")):(i=!0,r=!1),s={get:t,set:n,configurable:i,enumerable:r},o?assign(normalizeOptions(o),s):s}}),validCallable=function(e){if("function"!=typeof e)throw new TypeError(e+" is not a function");return e},eventEmitter=createCommonjsModule(function(e,t){var n,i,r,o,s,a,l,u=Function.prototype.apply,c=Function.prototype.call,h=Object.create,f=Object.defineProperty,d=Object.defineProperties,p=Object.prototype.hasOwnProperty,g={configurable:!0,enumerable:!1,writable:!0};s={on:n=function(e,t){var n;return validCallable(t),p.call(this,"__ee__")?n=this.__ee__:(n=g.value=h(null),f(this,"__ee__",g),g.value=null),n[e]?"object"==typeof n[e]?n[e].push(t):n[e]=[n[e],t]:n[e]=t,this},once:i=function(e,t){var i,o;return validCallable(t),o=this,n.call(this,e,i=function(){r.call(o,e,i),u.call(t,this,arguments)}),i.__eeOnceListener__=t,this},off:r=function(e,t){var n,i,r,o;if(validCallable(t),!p.call(this,"__ee__"))return this;if(!(n=this.__ee__)[e])return this;if("object"==typeof(i=n[e]))for(o=0;r=i[o];++o)r!==t&&r.__eeOnceListener__!==t||(2===i.length?n[e]=i[o?0:1]:i.splice(o,1));else i!==t&&i.__eeOnceListener__!==t||delete n[e];return this},emit:o=function(e){var t,n,i,r,o;if(p.call(this,"__ee__")&&(r=this.__ee__[e]))if("object"==typeof r){for(n=arguments.length,o=new Array(n-1),t=1;t<n;++t)o[t-1]=arguments[t];for(r=r.slice(),t=0;i=r[t];++t)u.call(i,this,o)}else switch(arguments.length){case 1:c.call(r,this);break;case 2:c.call(r,this,arguments[1]);break;case 3:c.call(r,this,arguments[1],arguments[2]);break;default:for(n=arguments.length,o=new Array(n-1),t=1;t<n;++t)o[t-1]=arguments[t];u.call(r,this,o)}}},a={on:d_1(n),once:d_1(i),off:d_1(r),emit:d_1(o)},l=d({},a),e.exports=t=function(e){return null==e?h(l):d(Object(e),a)},t.methods=s}),eventEmitter_1=eventEmitter.methods,map={function:!0,object:!0},isObject=function(e){return isValue(e)&&map[typeof e]||!1},validObject=function(e){if(!isObject(e))throw new TypeError(e+" is not an Object");return e},hasOwnProperty$1=Object.prototype.hasOwnProperty,allOff=function(e){var t,n=arguments[1];if(validObject(e),void 0!==n){if(!(t=hasOwnProperty$1.call(e,"__ee__")&&e.__ee__))return;return void(t[n]&&delete t[n])}hasOwnProperty$1.call(e,"__ee__")&&delete e.__ee__},_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},classCallCheck=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),defineProperty=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},get=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var s=r.get;if(void 0!==s)return s.call(i)},inherits=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},possibleConstructorReturn=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},toConsumableArray=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)},util={};util.createDom=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"div",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",r=document.createElement(e);return r.className=i,r.innerHTML=t,Object.keys(n).forEach(function(t){var i=t,o=n[t];"video"===e||"audio"===e||"mobile-video"===e?o&&r.setAttribute(i,o):r.setAttribute(i,o)}),r},util.hasClass=function(e,t){return!!e&&(e.classList?Array.prototype.some.call(e.classList,function(e){return e===t}):!!e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)")))},util.addClass=function(e,t){e&&(e.classList?t.replace(/(^\s+|\s+$)/g,"").split(/\s+/g).forEach(function(t){t&&e.classList.add(t)}):util.hasClass(e,t)||(e.className+=" "+t))},util.removeClass=function(e,t){e&&(e.classList?t.split(/\s+/g).forEach(function(t){e.classList.remove(t)}):util.hasClass(e,t)&&t.split(/\s+/g).forEach(function(t){var n=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className=e.className.replace(n," ")}))},util.toggleClass=function(e,t){e&&t.split(/\s+/g).forEach(function(t){util.hasClass(e,t)?util.removeClass(e,t):util.addClass(e,t)})},util.findDom=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,t=arguments[1],n=void 0;try{n=e.querySelector(t)}catch(i){0===t.indexOf("#")&&(n=e.getElementById(t.slice(1)))}return n},util.padStart=function(e,t,n){for(var i=String(n),r=t>>0,o=Math.ceil(r/i.length),s=[],a=String(e);o--;)s.push(i);return s.join("").substring(0,r-a.length)+a},util.format=function(e){if(window.isNaN(e))return"";var t=util.padStart(Math.floor(e/3600),2,0),n=util.padStart(Math.floor((e-3600*t)/60),2,0),i=util.padStart(Math.floor(e-3600*t-60*n),2,0);return("00"===t?[n,i]:[t,n,i]).join(":")},util.event=function(e){if(e.touches){var t=e.touches[0]||e.changedTouches[0];e.clientX=t.clientX||0,e.clientY=t.clientY||0,e.offsetX=t.pageX-t.target.offsetLeft,e.offsetY=t.pageY-t.target.offsetTop}e._target=e.target||e.srcElement},util.typeOf=function(e){return Object.prototype.toString.call(e).match(/([^\s.*]+)(?=]$)/g)[0]},util.deepCopy=function(e,t){if("Object"===util.typeOf(t)&&"Object"===util.typeOf(e))return Object.keys(t).forEach(function(n){"Object"!==util.typeOf(t[n])||t[n]instanceof Node?"Array"===util.typeOf(t[n])?e[n]="Array"===util.typeOf(e[n])?e[n].concat(t[n]):t[n]:e[n]=t[n]:void 0===e[n]?e[n]=t[n]:util.deepCopy(e[n],t[n])}),e},util.getBgImage=function(e){var t=(e.currentStyle||window.getComputedStyle(e,null)).backgroundImage;if(!t||"none"===t)return"";var n=document.createElement("a");return n.href=t.replace(/url\("|"\)/g,""),n.href},util.copyDom=function(e){if(e&&1===e.nodeType){var t=document.createElement(e.tagName);return Array.prototype.forEach.call(e.attributes,function(e){t.setAttribute(e.name,e.value)}),e.innerHTML&&(t.innerHTML=e.innerHTML),t}return""},util.setInterval=function(e,t,n,i){e._interval[t]||(e._interval[t]=setInterval(n.bind(e),i))},util.clearInterval=function(e,t){clearInterval(e._interval[t]),e._interval[t]=null},util.createImgBtn=function(e,t,n,i){var r=util.createDom("xg-"+e,"",{},"xgplayer-"+e+"-img");if(r.style.backgroundImage='url("'+t+'")',n&&i){var o=void 0,s=void 0,a=void 0;["px","rem","em","pt","dp","vw","vh","vm","%"].every(function(e){return!(n.indexOf(e)>-1&&i.indexOf(e)>-1)||(o=parseFloat(n.slice(0,n.indexOf(e)).trim()),s=parseFloat(i.slice(0,i.indexOf(e)).trim()),a=e,!1)}),r.style.width=""+o+a,r.style.height=""+s+a,r.style.backgroundSize=""+o+a+" "+s+a,r.style.margin="start"===e?"-"+s/2+a+" auto auto -"+o/2+a:"auto 5px auto 5px"}return r},util.Hex2RGBA=function(hex,alpha){var rgb=[];if(/^\#[0-9A-F]{3}$/i.test(hex)){var sixHex="#";hex.replace(/[0-9A-F]/gi,function(e){sixHex+=e+e}),hex=sixHex}return/^#[0-9A-F]{6}$/i.test(hex)?(hex.replace(/[0-9A-F]{2}/gi,function(kw){rgb.push(eval("0x"+kw))}),"rgba("+rgb.join(",")+", "+alpha+")"):"rgba(255, 255, 255, 0.1)"},util.getFullScreenEl=function(){return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement},util.checkIsFunction=function(e){return"function"==typeof e},util.checkIsObject=function(e){return null!==e&&"object"===(void 0===e?"undefined":_typeof(e))},util.hide=function(e){e.style.display="none"},util.show=function(e,t){e.style.display=t||"block"};var version="2.3.5",ErrorTypes={network:{code:1,msg:"视频下载错误",remark:"只要视频下载错误就使用此类型，无论是video本身的超时还是xhr的分段请求超时或者资源不存在"},mse:{code:2,msg:"流追加错误",remark:"追加流的时候如果类型不对、无法被正确解码则会触发此类错误"},parse:{code:3,msg:"解析错误",remark:"mp4、hls、flv我们都是使用js进行格式解析，如果解析失败则会触发此类错误"},format:{code:4,msg:"格式错误",remark:"如果浏览器不支持的格式导致播放错误"},decoder:{code:5,msg:"解码错误",remark:"浏览器解码异常会抛出此类型错误"},runtime:{code:6,msg:"语法错误",remark:"播放器语法错误"},timeout:{code:7,msg:"播放超时",remark:"播放过程中无法正常请求下一个分段导致播放中断"},other:{code:8,msg:"其他错误",remark:"不可知的错误或被忽略的错误类型"}},Errors=function e(t,n,i,r,o,s,a,l){var u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:{line:"",handle:"",msg:"",version:""},c=arguments[9],h=arguments[10];classCallCheck(this,e);var f={};if(arguments.length>1)f.playerVersion="2.3.5",f.errorType=t,f.domain=document.domain,f.duration=i,f.currentTime=n,f.networkState=r,f.readyState=o,f.currentSrc=a,f.src=s,f.ended=l,f.errd=u,f.ex=(ErrorTypes[t]||{}).msg,f.errorCode=c,f.mediaError=h;else{var d=arguments[0];Object.keys(d).map(function(e){f[e]=d[e]}),f.ex=(d.type&&ErrorTypes[d.type]||{}).msg}return f},PLAY="play",PLAYING="playing",ENDED="ended",PAUSE="pause",ERROR="error",SEEKING="seeking",SEEKED="seeked",TIME_UPDATE="timeupdate",WAITING="waiting",CANPLAY="canplay",CANPLAY_THROUGH="canplaythrough",DURATION_CHANGE="durationchange",VOLUME_CHANGE="volumechange",LOADED_DATA="loadeddata",RATE_CHANGE="rateChange",BUFFER_CHANGE="bufferedChange",PLAYER_FOCUS="focus",PLAYER_BLUR="blur",READY="ready",URL_NULL="urlNull",AUTOPLAY_STARTED="autoplay_started",AUTOPLAY_PREVENTED="autoplay_was_prevented",COMPLETE="complete",REPLAY="replay",DESTROY="destroy",URL_CHANGE="urlchange",FULLSCREEN_CHANGE="fullscreen_change",CSS_FULLSCREEN_CHANGE="cssFullscreen_change",MINI_STATE_CHANGE="mini_state_change",SEI_PARSED="SEI_PARSED",event=Object.freeze({__proto__:null,PLAY:"play",PLAYING:"playing",ENDED:"ended",PAUSE:"pause",ERROR:"error",SEEKING:"seeking",SEEKED:"seeked",TIME_UPDATE:"timeupdate",WAITING:"waiting",CANPLAY:"canplay",CANPLAY_THROUGH:"canplaythrough",DURATION_CHANGE:"durationchange",VOLUME_CHANGE:"volumechange",LOADED_DATA:"loadeddata",RATE_CHANGE:"rateChange",BUFFER_CHANGE:"bufferedChange",PLAYER_FOCUS:"focus",PLAYER_BLUR:"blur",READY:READY,URL_NULL:"urlNull",AUTOPLAY_STARTED:"autoplay_started",AUTOPLAY_PREVENTED:"autoplay_was_prevented",COMPLETE:"complete",REPLAY:"replay",DESTROY:"destroy",URL_CHANGE:"urlchange",FULLSCREEN_CHANGE:"fullscreen_change",CSS_FULLSCREEN_CHANGE:"cssFullscreen_change",MINI_STATE_CHANGE:"mini_state_change",SEI_PARSED:"SEI_PARSED"}),Proxy=function(){function e(t){var n=this;classCallCheck(this,e),this._hasStart=!1,this._currentTime=0,this._duration=0,this.videoConfig=Object.assign({},{controls:!1,autoplay:t.autoplay,playsinline:t.playsinline,"webkit-playsinline":t.playsinline,"x5-playsinline":t.playsinline,"x5-video-player-type":t["x5-video-player-type"]||t.x5VideoPlayerType,"x5-video-player-fullscreen":t["x5-video-player-fullscreen"]||t.x5VideoPlayerFullscreen,"x5-video-orientation":t["x5-video-orientation"]||t.x5VideoOrientation,airplay:t.airplay,"webkit-airplay":t.airplay,tabindex:2,mediaType:t.mediaType||"video"},t.videoConfig),t.videoAttrbutes&&Object.keys(t.videoAttrbutes).map(function(e){n.videoConfig[e]=t.videoAttrbutes[e]}),t.loop&&(this.videoConfig.loop="loop"),t.defaultPlaybackRate&&(this.videoConfig.defaultPlaybackRate=t.defaultPlaybackRate),this.video=util.createDom(this.videoConfig.mediaType,"",this.videoConfig,""),t.autoplayMuted&&(this.video.muted=!0),t.autoplay&&(this.video.autoplay=!0),eventEmitter(this),this._interval={},this._initEvents()}return createClass(e,[{key:"_initEvents",value:function(){function e(e,t){t[e]&&"function"==typeof t[e]&&t[e](t)}var t=this,n="0,0";this.ev=["play","playing","pause","ended","error","seeking","seeked","timeupdate","waiting","canplay","canplaythrough","durationchange","volumechange","loadeddata","ratechange"].map(function(e){return defineProperty({},e,"on"+e.charAt(0).toUpperCase()+e.slice(1))}),this.ev.forEach(function(i){t.evItem=Object.keys(i)[0];var r=Object.keys(i)[0],o=i[r];t.videoEventHandler=function(){"error"===r?(t.errorHandler(r),e(o,t)):(t.emit(r,t),e(o,t)),"timeupdate"===r&&(t._currentTime=t.video.currentTime),"durationchange"===r&&(t._duration=t.video.duration),t.hasOwnProperty("_interval")&&(["ended","error","timeupdate"].indexOf(r)<0?(clearInterval(t._interval.bufferedChange),util.setInterval(t,"bufferedChange",function(){for(var e=[],t=0,i=this.video.buffered.length;t<i;t++)e.push([this.video.buffered.start(t),this.video.buffered.end(t)]);e.toString()!==n&&(n=e.toString(),this.emit("bufferedChange",e))},200)):"timeupdate"!==r&&util.clearInterval(t,"bufferedChange"))},t.video.addEventListener(Object.keys(i)[0],t.videoEventHandler,!1)})}},{key:"errorHandler",value:function(e){this.video&&this.video.error&&this.emit(e,new Errors("other",this.currentTime,this.duration,this.networkState,this.readyState,this.currentSrc,this.src,this.ended,{line:162,msg:this.error,handle:"Constructor"},this.video.error.code,this.video.error))}},{key:"destroy",value:function(){var e=this;this.pause(),this.video.removeAttribute("src"),this.video.load(),this._currentTime=0,this._duration=0;for(var t in this._interval)clearInterval(this._interval[t]),this._interval[t]=null;this.emit("destroy"),this.ev.forEach(function(t){var n=Object.keys(t)[0],i=e[t[n]];i&&e.off(n,i),e.video.removeEventListener(n,e.videoEventHandler,!1)}),allOff(this)}},{key:"play",value:function(){return this.video.play()}},{key:"pause",value:function(){this.video.pause()}},{key:"canPlayType",value:function(e){return this.video.canPlayType(e)}},{key:"getBufferedRange",value:function(){var e=[0,0],t=this.video,n=t.buffered,i=t.currentTime;if(n)for(var r=0,o=n.length;r<o&&(e[0]=n.start(r),e[1]=n.end(r),!(e[0]<=i&&i<=e[1]));r++);return e[0]-i<=0&&i-e[1]<=0?e:[0,0]}},{key:"hasStart",get:function(){return this._hasStart},set:function(e){"boolean"==typeof e&&(this._hasStart=e,this.emit("hasstart"))}},{key:"autoplay",set:function(e){this.video.autoplay=e},get:function(){return this.video.autoplay}},{key:"buffered",get:function(){return this.video.buffered}},{key:"crossOrigin",get:function(){return this.video.crossOrigin},set:function(e){this.video.crossOrigin=e}},{key:"currentSrc",get:function(){return this.video.currentSrc},set:function(e){this.video.currentSrc=e}},{key:"currentTime",get:function(){return this._currentTime},set:function(e){this.video.currentTime=e}},{key:"defaultMuted",get:function(){return this.video.defaultMuted},set:function(e){this.video.defaultMuted=e}},{key:"duration",get:function(){return this._duration}},{key:"ended",get:function(){return this.video.ended}},{key:"error",get:function(){var e=this.video.error;if(!e)return null;var t=[{en:"MEDIA_ERR_ABORTED",cn:"取回过程被用户中止"},{en:"MEDIA_ERR_NETWORK",cn:"当下载时发生错误"},{en:"MEDIA_ERR_DECODE",cn:"当解码时发生错误"},{en:"MEDIA_ERR_SRC_NOT_SUPPORTED",cn:"不支持音频/视频"}];return this.lang?this.lang[t[e.code-1].en]:t[e.code-1].en}},{key:"loop",get:function(){return this.video.loop},set:function(e){this.video.loop=e}},{key:"muted",get:function(){return this.video.muted},set:function(e){this.video.muted=e}},{key:"networkState",get:function(){var e=[{en:"NETWORK_EMPTY",cn:"音频/视频尚未初始化"},{en:"NETWORK_IDLE",cn:"音频/视频是活动的且已选取资源，但并未使用网络"},{en:"NETWORK_LOADING",cn:"浏览器正在下载数据"},{en:"NETWORK_NO_SOURCE",cn:"未找到音频/视频来源"}];return this.lang?this.lang[e[this.video.networkState].en]:e[this.video.networkState].en}},{key:"paused",get:function(){return this.video.paused}},{key:"playbackRate",get:function(){return this.video.playbackRate},set:function(e){this.video.playbackRate=e}},{key:"played",get:function(){return this.video.played}},{key:"preload",get:function(){return this.video.preload},set:function(e){this.video.preload=e}},{key:"readyState",get:function(){var e=[{en:"HAVE_NOTHING",cn:"没有关于音频/视频是否就绪的信息"},{en:"HAVE_METADATA",cn:"关于音频/视频就绪的元数据"},{en:"HAVE_CURRENT_DATA",cn:"关于当前播放位置的数据是可用的，但没有足够的数据来播放下一帧/毫秒"},{en:"HAVE_FUTURE_DATA",cn:"当前及至少下一帧的数据是可用的"},{en:"HAVE_ENOUGH_DATA",cn:"可用数据足以开始播放"}];return this.lang?this.lang[e[this.video.readyState].en]:e[this.video.readyState]}},{key:"seekable",get:function(){return this.video.seekable}},{key:"seeking",get:function(){return this.video.seeking}},{key:"src",get:function(){return this.video.src},set:function(e){this.ended||this.emit("urlchange",e),this.video.pause(),this._currentTime=0,this._duration=0,this.video.src=e}},{key:"volume",get:function(){return this.video.volume},set:function(e){this.video.volume=e}}]),e}(),sniffer={get device(){return sniffer.os.isPc?"pc":"mobile"},get browser(){var e=navigator.userAgent.toLowerCase(),t={ie:/rv:([\d.]+)\) like gecko/,firfox:/firefox\/([\d.]+)/,chrome:/chrome\/([\d.]+)/,opera:/opera.([\d.]+)/,safari:/version\/([\d.]+).*safari/};return[].concat(Object.keys(t).filter(function(n){return t[n].test(e)}))[0]},get os(){var e=navigator.userAgent,t=/(?:Windows Phone)/.test(e),n=/(?:SymbianOS)/.test(e)||t,i=/(?:Android)/.test(e),r=/(?:Firefox)/.test(e),o=/(?:iPad|PlayBook)/.test(e)||i&&!/(?:Mobile)/.test(e)||r&&/(?:Tablet)/.test(e),s=/(?:iPhone)/.test(e)&&!o;return{isTablet:o,isPhone:s,isAndroid:i,isPc:!(s||i||n||o),isSymbian:n,isWindowsPhone:t,isFireFox:r}}},BasePlugin=function(){function e(t){classCallCheck(this,e),util.checkIsFunction(this.beforeCreate)&&this.beforeCreate(t),this.__args=t,this.__events={},this.config=t.config||{},this.__init(t)}return createClass(e,null,[{key:"defineGetterOrSetter",value:function(e,t){for(var n in t)Object.defineProperty(e,n,t[n])}}]),createClass(e,[{key:"onPluginsReady",value:function(){}},{key:"__init",value:function(t){var n=this;e.defineGetterOrSetter(this,{player:{get:function(){return t.player}},playerConfig:{get:function(){return t.player&&t.player.config}},pluginName:{get:function(){return t.pluginName?t.pluginName:n.constructor.pluginName}},logger:{get:function(){return t.player.logger}}})}},{key:"on",value:function(e,t){var n=this;"string"==typeof e?(this.__events[e]=t,this.player.on(e,t)):Array.isArray(e)&&e.forEach(function(e){n.__events[e]=t,n.player.on(e,t)})}},{key:"once",value:function(e,t){this.player.once(e,t)}},{key:"off",value:function(e,t){var n=this;"string"==typeof e?(this.__events[e]=void 0,this.player.off(e,t)):Array.isArray(e)&&e.forEach(function(e){n.__events[e]=void 0,n.player.off(e,t)})}},{key:"offAll",value:function(){var e=!0,t=!1,n=void 0;try{for(var i,r=Object.keys(this.__events)[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){var o=i.value;this.off(o,this.__events[o])}}catch(e){t=!0,n=e}finally{try{!e&&r.return&&r.return()}finally{if(t)throw n}}}},{key:"emit",value:function(e,t){this.player.emit(e,t)}},{key:"_destroy",value:function(){this.offAll(),util.checkIsFunction(this.destroy)&&this.destroy()}}]),e}();BasePlugin.Util=util,BasePlugin.Sniffer=sniffer,BasePlugin.Errors=Errors,BasePlugin.Events=event;var pluginsManager={init:function(e){var t=e._pluginInfoId;t||(t=(new Date).getTime(),e._pluginInfoId=t),this.pluginGroup||(this.pluginGroup={}),this.pluginGroup[t]={_player:e,_originalOptions:e.config||{}}},lazyRegister:function(e,t){var n=this,i=t.timeout||1500;return Promise.race([t.loader().then(function(t){var i=void 0;i=t&&t.__esModule?t.default:t,n.register(e,i,t.options)}),new Promise(function(e,t){setTimeout(function(){t(new Error("timeout"))},i)})])},register:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e&&t&&"function"==typeof t&&void 0!==t.prototype){var i=e._pluginInfoId;i&&this.pluginGroup&&this.pluginGroup[i]||(this.init(e),i=e._pluginInfoId),this.pluginGroup[i]._plugins||(this.pluginGroup[i]._plugins=[]);var r=this.pluginGroup[i]._plugins,o=this.pluginGroup[i]._originalOptions;n.player=this.pluginGroup[i]._player;var s=n.pluginName||t.pluginName;if(!s)throw new Error("The property pluginName is necessary");if(t.isSupported&&!t.isSupported())return void console.warn("not supported plugin ["+s+"]");n.config||(n.config={});var a=!0,l=!1,u=void 0;try{for(var c,h=Object.keys(o)[Symbol.iterator]();!(a=(c=h.next()).done);a=!0){var f=c.value;if(s.toLowerCase()===f.toLowerCase()){n.config=Object.assign({},n.config,o[f]);break}}}catch(e){l=!0,u=e}finally{try{!a&&h.return&&h.return()}finally{if(l)throw u}}t.defaultConfig&&Object.keys(t.defaultConfig).map(function(e){void 0===n.config[e]&&(n.config[e]=t.defaultConfig[e])}),n.root?"string"==typeof n.root&&(n.root=e[n.root]):n.root=e.root,n.index=n.config.index||0;try{var d=new t(n);return r[s.toLowerCase()]=d,r[s.toLowerCase()].func=t,d&&"function"==typeof d.afterCreate&&d.afterCreate(),d}catch(e){throw console.error(e),e}}},unRegister:function(e,t){try{this.pluginGroup[e]._plugins[t]._destroy(),this.pluginGroup[e]._plugins[t]=null}catch(n){this.pluginGroup[e]._plugins[t]=null}},getPlugins:function(e){var t=e._pluginInfoId;return t?this.pluginGroup[t]._plugins:{}},findPlugin:function(e,t){if(!this.pluginGroup)return null;var n=e._pluginInfoId,i=t.toLowerCase();return this.pluginGroup[n]._plugins[i]},beforeInit:function(e){function t(e){return e&&e.then?e:new Promise(function(e){e()})}var n=this;return console.log("beforeInit"),new Promise(function(i){if(n.pluginGroup){var r=e._pluginInfoId,o=n.pluginGroup[r]._plugins,s=[],a=!0,l=!1,u=void 0;try{for(var c,h=Object.keys(o)[Symbol.iterator]();!(a=(c=h.next()).done);a=!0){var f=c.value;if(o[f]&&o[f].beforePlayerInit)try{var d=o[f].beforePlayerInit();s.push(t(d))}catch(e){throw s.push(t(null)),e}}}catch(e){l=!0,u=e}finally{try{!a&&h.return&&h.return()}finally{if(l)throw u}}Promise.all(s).then(function(){i()}).catch(function(e){console.error(e),i()})}})},afterInit:function(e){var t=this;console.log("afterInit");var n=void 0;n=e._loadingPlugins&&e._loadingPlugins.length?Promise.all(e._loadingPlugins):Promise.resolve(),this.pluginGroup&&n.then(function(){var n=e._pluginInfoId,i=t.pluginGroup[n]._plugins,r=!0,o=!1,s=void 0;try{for(var a,l=Object.keys(i)[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var u=a.value;i[u]&&i[u].afterPlayerInit&&i[u].afterPlayerInit()}}catch(e){o=!0,s=e}finally{try{!r&&l.return&&l.return()}finally{if(o)throw s}}})},reRender:function(e){var t=e._pluginInfoId,n={},i=this.pluginGroup[t]._plugins,r=!0,o=!1,s=void 0;try{for(var a,l=Object.keys(i)[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var u=a.value;n[u]={plugin:i[u].func,options:i[u]._args},this.unRegister(t,u)}}catch(e){o=!0,s=e}finally{try{!r&&l.return&&l.return()}finally{if(o)throw s}}var c=!0,h=!1,f=void 0;try{for(var d,p=Object.keys(n)[Symbol.iterator]();!(c=(d=p.next()).done);c=!0){var g=d.value;this.register(t,g,n[g].plugin,n[g].options)}}catch(e){h=!0,f=e}finally{try{!c&&p.return&&p.return()}finally{if(h)throw f}}},onPluginsReady:function(e){var t=e._pluginInfoId,n=this.pluginGroup[t]._plugins;t&&n&&Object.keys(n).map(function(e){n[e].onPluginsReady&&"function"==typeof n[e].onPluginsReady&&n[e].onPluginsReady()})},destroy:function(e){var t=e._pluginInfoId,n=this.pluginGroup[t]._plugins,i=!0,r=!1,o=void 0;try{for(var s,a=Object.keys(n)[Symbol.iterator]();!(i=(s=a.next()).done);i=!0){var l=s.value;this.unRegister(t,l)}}catch(e){r=!0,o=e}finally{try{!i&&a.return&&a.return()}finally{if(r)throw o}}delete this.pluginGroup[t]}},proto=Element.prototype,vendor=proto.matchesSelector||proto.webkitMatchesSelector||proto.mozMatchesSelector||proto.msMatchesSelector||proto.oMatchesSelector,matchesSelector=match,closest=function(e,t,n){for(var i=n?e:e.parentNode;i&&i!==document;){if(matchesSelector(i,t))return i;i=i.parentNode}},bind,unbind,prefix,bind_1=function(e,t,n,i){return bind||detect(),e[bind](prefix+t,n,i||!1),n},unbind_1=function(e,t,n,i){return unbind||detect(),e[unbind](prefix+t,n,i||!1),n},componentEvent={bind:bind_1,unbind:unbind_1},forceCaptureEvents=["focus","blur"],bind$1=function(e,t,n,i,r){return-1!==forceCaptureEvents.indexOf(n)&&(r=!0),componentEvent.bind(e,n,function(n){var r=n.target||n.srcElement;n.delegateTarget=closest(r,t,!0),n.delegateTarget&&i.call(e,n)},r)},unbind$1=function(e,t,n,i){-1!==forceCaptureEvents.indexOf(t)&&(i=!0),componentEvent.unbind(e,t,n,i)},Plugin=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return classCallCheck(this,t),possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return inherits(t,e),createClass(t,null,[{key:"insert",value:function(e,t,n){var i=t.children.length,r=parseInt(n),o=e instanceof window.HTMLElement;if(void 0===n||i<=r)return o?t.appendChild(e):t.insertAdjacentHTML("beforeend",e),t.children[t.children.length-1];if(0===r)return o?t.insertBefore(e,t.children.length>0?t.children[0]:null):t.insertAdjacentHTML("afterbegin",e),t.children[0];var s=t.children[r];return s&&s.insertAdjacentHTML?(o?t.insertBefore(e,s):s.insertAdjacentHTML("beforebegin",e),t.children[r]):void 0}},{key:"defaultConfig",get:function(){return{}}}]),createClass(t,[{key:"__init",value:function(e){get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"__init",this).call(this,e);var n=e.root,i=null;this.icons={},registerIconsObj(this.registerIcons()||{},this),this.text={},registerTextObj(this.registerLangauageTexts()||{},this);var r="";try{r=this.render()}catch(e){throw new Error("Plugin:"+this.pluginName+":render:"+e.message)}if(r)i=t.insert(r,n,e.index);else{if(!e.tag)return;i=_createElement(e.tag,e.name),n.appendChild(i)}t.defineGetterOrSetter(this,{root:{get:function(){return i}},parent:{get:function(){return n}}});var o=this.config.attr||{},s=this.config.style||{};this.setAttr(o),this.setStyle(s),this.config.index&&this.root.setAttribute("data-index",this.config.index),this.__registeChildren()}},{key:"__registeChildren",value:function(){if(this.root){var e=this.children();if(e&&"object"===(void 0===e?"undefined":_typeof(e))&&(this._children||(this._children=[]),Object.keys(e).length>0)){var t=!0,n=!1,i=void 0;try{for(var r,o=Object.keys(e)[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var s=r.value,a=e[s],l={root:this.root},u=void 0,c=void 0;"function"==typeof a?(u=this.config[s]||{},c=a):"object"===(void 0===a?"undefined":_typeof(a))&&"function"==typeof a.plugin&&(u=a.options?BasePlugin.Util.deepCopy(this.config[s]||{},a.options):this.config[s]||{},c=a.plugin),l.config=u,void 0!==u.index&&(l.index=u.index),u.root&&(l.root=u.root);var h=this.registerPlugin(c,l,s);this._children.push(h)}}catch(e){n=!0,i=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw i}}}}}},{key:"plugins",value:function(){return this._children}},{key:"children",value:function(){return{}}},{key:"registerPlugin",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";t.root=t.root||this.root,n&&(t.pluginName=n);var i=pluginsManager.register(this.player,e,t);return this._children.push(i),i}},{key:"registerIcons",value:function(){return{}}},{key:"registerLangauageTexts",value:function(){return{}}},{key:"getPlugin",value:function(e){return pluginsManager.findPlugin(this.player,e)}},{key:"find",value:function(e){if(this.root)return this.root.querySelector(e)}},{key:"bind",value:function(e,t,n){var i=this;if(arguments.length<3&&"function"==typeof t)Array.isArray(e)?e.forEach(function(e){i.bindEL(e,t)}):this.bindEL(e,t);else if(3===arguments.length&&"function"==typeof n){if(!this.root)return;Array.isArray(t)?t.forEach(function(t){bind$1(i.root,e,t,n,!1)}):bind$1(this.root,e,t,n,!1)}}},{key:"unbind",value:function(e,t,n){var i=this;arguments.length<3&&"function"==typeof t?Array.isArray(e)?e.forEach(function(e){i.unbindEL(e,t)}):this.unbindEL(e,t):"function"==typeof n&&(Array.isArray(t)?t.forEach(function(t){unbind$1(i.root,e,t,n)}):unbind$1(this.root,e,t,n))}},{key:"setStyle",value:function(e,t){if(this.root){if("string"==typeof e)return this.root.style[e]=t;if("object"===(void 0===e?"undefined":_typeof(e))){var n=e,i=!0,r=!1,o=void 0;try{for(var s,a=Object.keys(n)[Symbol.iterator]();!(i=(s=a.next()).done);i=!0){var l=s.value;this.root.style[l]=n[l]}}catch(e){r=!0,o=e}finally{try{!i&&a.return&&a.return()}finally{if(r)throw o}}}}}},{key:"setAttr",value:function(e,t){if(this.root){if("string"==typeof e)return this.root.setAttribute(e,t);if("object"===(void 0===e?"undefined":_typeof(e))){var n=e,i=!0,r=!1,o=void 0;try{for(var s,a=Object.keys(n)[Symbol.iterator]();!(i=(s=a.next()).done);i=!0){var l=s.value;this.root.setAttribute(l,n[l])}}catch(e){r=!0,o=e}finally{try{!i&&a.return&&a.return()}finally{if(r)throw o}}}}}},{key:"setHtml",value:function(e,t){this.root&&(this.root.innerHtml=e,"function"==typeof t&&t())}},{key:"bindEL",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.root&&"on"+e in this.root&&"function"==typeof t&&this.root.addEventListener(e,t,n)}},{key:"unbindEL",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.root&&"on"+e in this.root&&"function"==typeof t&&this.root.removeEventListener(e,t,n)}},{key:"show",value:function(e){if(this.root)return this.root.style.display=void 0!==e?e:"block","none"===window.getComputedStyle(this.root,null).getPropertyValue("display")?this.root.style.display="block":void 0}},{key:"hide",value:function(){this.root&&(this.root.style.display="none")}},{key:"render",value:function(){return""}},{key:"_destroy",value:function(){this.offAll(),BasePlugin.Util.checkIsFunction(this.destroy)&&this.destroy(),this.root&&(this.root.hasOwnProperty("remove")?this.root.remove():this.root.parentNode&&this.root.parentNode.removeChild(this.root))}}]),t}(BasePlugin);Plugin.ROOT_TYPES={CONTROLS:"controls",ROOT:"root"},Plugin.POSITIONS={ROOT:"root",ROOT_LEFT:"rootLeft",ROOT_RIGHT:"rootRight",ROOT_TOP:"rootTop",CONTROLS_LEFT:"controlsLeft",CONTROLS_RIGTH:"controlsRight",CONTROLS_CENTER:"controlsCenter"};var STATE_CLASS={DEFAULT:"xgplayer",DEFAULT_SKIN:"xgplayer-skin-default",ENTER:"xgplayer-is-enter",PAUSED:"xgplayer-pause",PLAYING:"xgplayer-playing",ENDED:"xgplayer-ended",CANPLAY:"xgplayer-canplay",LOADING:"xgplayer-isloading",ERROR:"xgplayer-error",REPLAY:"xgplayer-replay",NO_START:"xgplayer-nostart",ACTIVE:"xgplayer-inactive",FULLSCREEN:"xgplayer-is-fullscreen",CSS_FULLSCREEN:"xgplayer-is-cssfullscreen",NO_CONTROLS:"no-controls",AUTOPLAY:"xgplayer-is-autoplay",PC:"xgplayer-pc",MOBILE:"xgplayer-mobile",MINI:"xgplayer-mini"},usePreset=function(e,t){var n,i,r=void 0,o=r=t.preset&&t.options?new t.preset(t.options,e.config):new t({},e.config),s=o.plugins,a=o.ignores,l=o.icons;e.config.plugins||(e.config.plugins=[]),e.config.ignores||(e.config.ignores=[]),(n=e.config.plugins).push.apply(n,toConsumableArray(s)),(i=e.config.ignores).push.apply(i,toConsumableArray(a)),e.config.icons=l},Events=Plugin.Events,Util=Plugin.Util,POSITIONS=Plugin.POSITIONS,Controls=function(e){function t(){return classCallCheck(this,t),possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return inherits(t,e),createClass(t,[{key:"beforeCreate",value:function(e){"boolean"==typeof e.player.config.controls&&(e.config.disable=!e.player.config.controls)}},{key:"afterCreate",value:function(){var e=this,t={height:this.config.height+"px"};Object.keys(t).map(function(n){e.root.style[n]=t[n]}),this.left=this.find("left-grid"),this.center=this.find("center"),this.right=this.find("right-grid"),this.on(Events.MINI_STATE_CHANGE,function(t){t?Util.addClass(e.root,"mini"):Util.removeClass(e.root,"mini")}),this.bind("mouseenter",function(t){e.mouseEnter(t)}),this.bind("mouseou",function(t){e.mouseOut(t)})}},{key:"mouseEnter",value:function(){console.log("mouseenter")}},{key:"mouseOut",value:function(){console.log("mouseout")}},{key:"showTips",value:function(){}},{key:"registerPlugin",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments[2];if(this.root&&!n.root){switch(n.config&&n.config.position?n.config.position:e.defaultConfig.position){case POSITIONS.CONTROLS_LEFT:n.root=this.left;break;case POSITIONS.CONTROLS_RIGTH:n.root=this.right;break;case POSITIONS.CONTROLS_CENTER:n.root=this.center;break;default:n.root=this.left}return get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"registerPlugin",this).call(this,e,n,i)}}},{key:"render",value:function(){if(!this.config.disable)return'<xg-controls class="xgplayer-controls" unselectable="on" onselectstart="return false">\n    <left-grid class="left-grid">\n    </Left-grid>\n    <center class="center"></center>\n    <right-grid class="right-grid">\n    </right-grid>\n    </xg-controls>'}}],[{key:"pluginName",get:function(){return"Controls"}},{key:"defaultConfig",get:function(){return{disable:!1}}}]),t}(Plugin),FULLSCREEN_EVENTS=["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],Player=function(e){function t(e){classCallCheck(this,t);var n=possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.config=util.deepCopy(getDefaultConfig(),e),n.config.presets=[],n.config.presets.length?n.config.presets.indexOf("default")>=0&&t.defaultPreset&&n.config.presets.push(t.defaultPreset):t.defaultPreset&&n.config.presets.push(t.defaultPreset),n.userTimer=null,n.waitTimer=null,n.isProgressMoving=!1,n.isReady=!1,n.isPlaying=!1,n.isSeeking=!1,n.isActive=!0,n.isCssfullScreen=!1,n._initDOM(),n._bindEvents(),n._registerPresets(),n._registerPlugins(),pluginsManager.onPluginsReady(n),setTimeout(function(){n.emit(READY),n.onReady&&n.onReady(),n.isReady=!0},0),(n.config.videoInit||n.config.autoplay)&&(n.hasStart||n.start()),n}return inherits(t,e),createClass(t,[{key:"_initDOM",value:function(){var e=this;if(this.root=util.findDom(document,"#"+this.config.id),!this.root){var t=this.config.el;if(!t||1!==t.nodeType)return this.emit("error",new Errors("use",this.config.vid,{line:32,handle:"Constructor",msg:"container id can't be empty"})),!1;this.root=t}this.topBar=util.createDom("xg-bar","","","xg-top-bar"),this.leftBar=util.createDom("xg-bar","","","xg-left-bar"),this.rightBar=util.createDom("xg-bar","","","xg-right-bar"),this.root.appendChild(this.topBar),this.root.appendChild(this.leftBar),this.root.appendChild(this.rightBar);var n=pluginsManager.register(this,Controls);if(this.controls=n,this.addClass(STATE_CLASS.DEFAULT+" xgplayer-"+sniffer.device+" "+STATE_CLASS.NO_START+" "+(this.config.controls?"":STATE_CLASS.NO_CONTROLS)),this.config.fluid){var i={"max-width":"100%",width:"100%",height:"0","padding-top":100*this.config.height/this.config.width+"%",position:"position",top:"0",left:"0"};Object.keys(i).map(function(t){e.root.style[t]=i[t]})}else["width","height"].map(function(t){e.config[t]&&("number"!=typeof e.config[t]?e.root.style[t]=e.config[t]:e.root.style[t]=e.config[t]+"px")})}},{key:"_bindEvents",value:function(){function e(){var t=this;n.root.removeEventListener("mousemove",n.mousemoveFunc),FULLSCREEN_EVENTS.forEach(function(e){document.removeEventListener(e,t.onFullscreenChange)}),n.off("destroy",e)}var t=this;["focus","blur"].forEach(function(e){t.on(e,t["on"+e.charAt(0).toUpperCase()+e.slice(1)])}),this.onFullscreenChange=function(){var e=util.getFullScreenEl();!e||e!==t._fullscreenEl&&"VIDEO"!==e.tagName?(t.fullscreen=!1,t._fullscreenEl=null,t.removeClass(STATE_CLASS.FULLSCREEN),t.emit("fullscreen_change",!1)):(t.fullscreen=!0,t.addClass(STATE_CLASS.FULLSCREEN),t.emit("fullscreen_change",!0))},FULLSCREEN_EVENTS.forEach(function(e){document.addEventListener(e,t.onFullscreenChange)}),this.once("loadeddata",this.getVideoSize),this.mousemoveFunc=function(){t.isActive||(t.emit("focus"),t.config.closeFocusVideoFocus||t.video.focus())},this.root.addEventListener("mousemove",this.mousemoveFunc),this.playFunc=function(){t.emit("focus"),t.config.closePlayVideoFocus||t.video.focus()},this.once("play",this.playFunc);var n=this;n.once("destroy",e)}},{key:"_startInit",value:function(e){var t=this,n=this.root,i=this;e&&""!==e||this.emit("urlNull"),this.canPlayFunc=function(){this.volume=this.config.volume,this.play(),i.off("canplay",this.canPlayFunc)},"String"===util.typeOf(e)?this.video.src=e:e.forEach(function(e){t.video.appendChild(util.createDom("source","",{src:""+e.src,type:""+(e.type||"")}))}),this.loadeddataFunc&&this.once("loadeddata",this.loadeddataFunc),this.config.autoplay&&this.once("canplay",this.canPlayFunc),n.insertBefore(this.video,n.firstChild),setTimeout(function(){t.emit("complete")},1),this.hasStart||pluginsManager.afterInit(this),this.hasStart=!0}},{key:"_registerPlugins",value:function(){var e=this;this._loadingPlugins=[];var t=this.config.ignores||[],n=this.config.plugins||[],i=t.join("||");n.map(function(t){try{if(t.pluginName&&i.indexOf(t.pluginName.toLowerCase())>-1)return null;if(t.lazy&&t.loader){var n=pluginsManager.lazyRegister(e,t);return void(t.forceBeforeInited&&(n.then(function(){e._loadingPlugins.splice(e._loadingPlugins.indexOf(n),1)}).catch(function(){e._loadingPlugins.splice(e._loadingPlugins.indexOf(n),1)}),e._loadingPlugins.push(n)))}return e.registerPlugin(t)}catch(e){return console.error(e),null}})}},{key:"_registerPresets",value:function(){var e=this;this.config.presets.forEach(function(t){usePreset(e,t)})}},{key:"registerPlugin",value:function(e){var t=null,n=null;e.plugin&&"function"==typeof e.plugin?(t=e.plugin,n=e.options):(t=e,n={});var i=n.position?n.position:t.defaultConfig&&t.defaultConfig.position,r=Plugin.POSITIONS;if(!n.root&&"string"==typeof i&&i.indexOf("controls")>-1)return this.controls.registerPlugin(t,n,t.pluginName);switch(i){case r.ROOT_RIGHT:n.root=this.rightBar;break;case r.ROOT_LEFT:n.root=this.leftBar;break;case r.ROOT_TOP:n.root=this.topBar;break;default:n.root=this.root}return pluginsManager.register(this,t,n)}},{key:"unRegistePlugin",value:function(){}},{key:"getPlugin",value:function(e){return pluginsManager.findPlugin(this,e)}},{key:"addClass",value:function(e){this.root&&(util.hasClass(this.root,e)||util.addClass(this.root,e))}},{key:"removeClass",value:function(e){this.root&&util.removeClass(this.root,e)}},{key:"start",value:function(e){var t=this;return this.hasStart?this.play():pluginsManager.beforeInit(this).then(function(){return e||(e=t.url||t.config.url),t._startInit(e)}).catch(function(e){throw e.fileName="player",e.lineNumber="236",e})}},{key:"play",value:function(){var e=this;if(!this.hasStart)return void this.start();var n=get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"play",this).call(this);return void 0!==n&&n&&n.then&&n.then(function(){e.removeClass(STATE_CLASS.AUTOPLAY),e.removeClass(STATE_CLASS.NO_START),e.addClass(STATE_CLASS.PLAYING)}).catch(function(t){throw setTimeout(function(){e.emit("autoplay_was_prevented"),e.addClass(STATE_CLASS.AUTOPLAY)},0),t}),n}},{key:"reload",value:function(){this.video.load(),this.reloadFunc=function(){this.play().catch(function(e){console.log(e)})},this.once("loadeddata",this.reloadFunc)}},{key:"destroy",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(pluginsManager.destroy(this),get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this),e){this.root.innerHTML="";var n=this.root.className.split(" ");n.length>0?this.root.className=n.filter(function(e){return e.indexOf("xgplayer")<0}).join(" "):this.root.className=""}for(var i in this)delete this[i]}},{key:"replay",value:function(){var e=this;this.removeClass(STATE_CLASS.ENDED),this.once("canplay",function(){var t=e.play();t&&t.catch&&t.catch(function(e){console.log(e)})}),this.emit("replay"),this.currentTime=0}},{key:"getFullscreen",value:function(e){var t=this;e||(e=this.root),this._fullscreenEl=e,e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen(window.Element.ALLOW_KEYBOARD_INPUT):t.video.webkitSupportsFullscreen?t.video.webkitEnterFullscreen():e.msRequestFullscreen?e.msRequestFullscreen():this.addClass(STATE_CLASS.CSS_FULLSCREEN)}},{key:"exitFullscreen",value:function(e){e&&(e=this.root),document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen(),this.removeClass(STATE_CLASS.CSS_FULLSCREEN)}},{key:"getCssFullscreen",value:function(){this.addClass(STATE_CLASS.CSS_FULLSCREEN),this.config.fluid&&(this.root.style["padding-top"]=""),this.isCssfullScreen=!0,this.emit("cssFullscreen_change",!0)}},{key:"exitCssFullscreen",value:function(){this.config.fluid&&(this.root.style.width="100%",this.root.style.height="0",this.root.style["padding-top"]=100*this.config.height/this.config.width+"%"),this.removeClass(STATE_CLASS.CSS_FULLSCREEN),this.isCssfullScreen=!1,this.emit("cssFullscreen_change",!1)}},{key:"onFocus",value:function(){this.isActive=!0;var e=this;this.removeClass(STATE_CLASS.ACTIVE),e.userTimer&&clearTimeout(e.userTimer),e.userTimer=setTimeout(function(){this.isActive=!1,e.emit("blur")},e.config.inactive)}},{key:"onBlur",value:function(){this.isActive=!1,this.paused||this.ended||this.addClass(STATE_CLASS.ACTIVE)}},{key:"onPlay",value:function(){this.addClass(STATE_CLASS.PLAYING),this.removeClass(STATE_CLASS.PAUSED),this.ended&&this.removeClass(STATE_CLASS.ENDED),this.emit("focus")}},{key:"onPause",value:function(){this.addClass(STATE_CLASS.PAUSED),this.userTimer&&clearTimeout(this.userTimer),this.emit("focus")}},{key:"onEnded",value:function(){this.addClass(STATE_CLASS.ENDED),this.removeClass(STATE_CLASS.PLAYING)}},{key:"onSeeking",value:function(){this.isSeeking=!0}},{key:"onSeeked",value:function(){this.isSeeking=!1,this.waitTimer&&clearTimeout(this.waitTimer),this.removeClass(STATE_CLASS.LOADING)}},{key:"onWaiting",value:function(){var e=this,t=this;t.waitTimer&&clearTimeout(t.waitTimer),t.waitTimer=setTimeout(function(){e.addClass(STATE_CLASS.LOADING)},500)}},{key:"onPlaying",value:function(){var e=this;this.waitTimer&&clearTimeout(this.waitTimer),[STATE_CLASS.NO_START,STATE_CLASS.PAUSED,STATE_CLASS.ENDED,STATE_CLASS.ERROR,STATE_CLASS.REPLAY,STATE_CLASS.LOADING].forEach(function(t){e.removeClass(t)}),this.addClass(STATE_CLASS.PLAYING)}},{key:"getVideoSize",value:function(){if(this.video.videoWidth&&this.video.videoHeight){var e=this.root.getBoundingClientRect();"auto"===this.config.fitVideoSize?e.width/e.height>this.video.videoWidth/this.video.videoHeight?this.root.style.height=this.video.videoHeight/this.video.videoWidth*e.width+"px":this.root.style.width=this.video.videoWidth/this.video.videoHeight*e.height+"px":"fixWidth"===this.config.fitVideoSize?this.root.style.height=this.video.videoHeight/this.video.videoWidth*e.width+"px":"fixHeight"===this.config.fitVideoSize&&(this.root.style.width=this.video.videoWidth/this.video.videoHeight*e.height+"px")}}},{key:"plugins",get:function(){return pluginsManager.getPlugins(this)}},{key:"version",get:function(){return"2.3.5"}},{key:"url",set:function(e){this.__url=e},get:function(){return this.__url||this.config.url}},{key:"poster",set:function(e){var t=util.findDom(this.root,".xgplayer-poster");t&&(t.style.backgroundImage="url("+e+")")}},{key:"fullscreen",get:function(){return this._isFullScreen},set:function(e){this._isFullScreen=e}},{key:"bullet",get:function(){return!!util.findDom(this.root,"xg-bullet")&&util.hasClass(util.findDom(this.root,"xg-bullet"),"xgplayer-has-bullet")}},{key:"textTrack",get:function(){return util.hasClass(this.root,"xgplayer-is-textTrack")}},{key:"pip",get:function(){return util.hasClass(this.root,"xgplayer-pip-active")}}],[{key:"install",value:function(e,n){t.plugins||(t.plugins={}),t.plugins[e]||(t.plugins[e]=n)}},{key:"use",value:function(e,n){t.plugins||(t.plugins={}),t.plugins[e]=n}}]),t}(Proxy);Player.Util=util,Player.Sniffer=sniffer,Player.Errors=Errors,Player.Events=event,Player.Plugin=Plugin,Player.BasePlugin=BasePlugin;var Poster=function(e){function t(){return classCallCheck(this,t),possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return inherits(t,e),createClass(t,[{key:"render",value:function(){var e=this.config.poster||this.playerConfig.poster;return e?'<xg-poster class="xgplayer-poster" style="background-image:url('+e+')">\n    </xg-poster>':""}}],[{key:"pluginName",get:function(){return"Poster"}}]),t}(Plugin),ReplaySvg='<svg class="xgplayer-replay-svg" xmlns="http://www.w3.org/2000/svg" width="78" height="78" viewbox="0 0 78 78">\n  <path d="M8.22708362,13.8757234 L11.2677371,12.6472196 C11.7798067,12.4403301 12.3626381,12.6877273 12.5695276,13.1997969 L12.9441342,14.1269807 C13.1510237,14.6390502 12.9036264,15.2218816 12.3915569,15.4287712 L6.8284538,17.6764107 L5.90126995,18.0510173 C5.38920044,18.2579068 4.80636901,18.0105096 4.5994795,17.49844 L1.97723335,11.0081531 C1.77034384,10.4960836 2.0177411,9.91325213 2.52981061,9.70636262 L3.45699446,9.33175602 C3.96906396,9.12486652 4.5518954,9.37226378 4.75878491,9.88433329 L5.67885163,12.1615783 C7.99551726,6.6766934 13.3983951,3 19.5,3 C27.7842712,3 34.5,9.71572875 34.5,18 C34.5,26.2842712 27.7842712,33 19.5,33 C15.4573596,33 11.6658607,31.3912946 8.87004692,28.5831991 C8.28554571,27.9961303 8.28762719,27.0463851 8.87469603,26.4618839 C9.46176488,25.8773827 10.4115101,25.8794641 10.9960113,26.466533 C13.2344327,28.7147875 16.263503,30 19.5,30 C26.127417,30 31.5,24.627417 31.5,18 C31.5,11.372583 26.127417,6 19.5,6 C14.4183772,6 9.94214483,9.18783811 8.22708362,13.8757234 Z"></path>\n</svg>\n',Replay=function(e){function t(){return classCallCheck(this,t),possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return inherits(t,e),createClass(t,[{key:"registerIcons",value:function(){return{replay:'<svg class="xgplayer-replay-svg" xmlns="http://www.w3.org/2000/svg" width="78" height="78" viewbox="0 0 78 78">\n  <path d="M8.22708362,13.8757234 L11.2677371,12.6472196 C11.7798067,12.4403301 12.3626381,12.6877273 12.5695276,13.1997969 L12.9441342,14.1269807 C13.1510237,14.6390502 12.9036264,15.2218816 12.3915569,15.4287712 L6.8284538,17.6764107 L5.90126995,18.0510173 C5.38920044,18.2579068 4.80636901,18.0105096 4.5994795,17.49844 L1.97723335,11.0081531 C1.77034384,10.4960836 2.0177411,9.91325213 2.52981061,9.70636262 L3.45699446,9.33175602 C3.96906396,9.12486652 4.5518954,9.37226378 4.75878491,9.88433329 L5.67885163,12.1615783 C7.99551726,6.6766934 13.3983951,3 19.5,3 C27.7842712,3 34.5,9.71572875 34.5,18 C34.5,26.2842712 27.7842712,33 19.5,33 C15.4573596,33 11.6658607,31.3912946 8.87004692,28.5831991 C8.28554571,27.9961303 8.28762719,27.0463851 8.87469603,26.4618839 C9.46176488,25.8773827 10.4115101,25.8794641 10.9960113,26.466533 C13.2344327,28.7147875 16.263503,30 19.5,30 C26.127417,30 31.5,24.627417 31.5,18 C31.5,11.372583 26.127417,6 19.5,6 C14.4183772,6 9.94214483,9.18783811 8.22708362,13.8757234 Z"></path>\n</svg>\n'}}},{key:"registerLangauageTexts",value:function(){return{replay:{jp:"日文text",en:"rePlay",zh:"重播"}}}},{key:"afterCreate",value:function(){var e=this;this.bind("svg","click",function(t){t.preventDefault(),e.player.replay(),Plugin.Util.removeClass(e.player.root,"replay")}),this.on(Plugin.Events.ENDED,function(){e.playerConfig.loop||Plugin.Util.addClass(e.player.root,"replay");var t=e.root.querySelector("path");if(t){var n=window.getComputedStyle(t).getPropertyValue("transform");if("string"==typeof n&&n.indexOf("none")>-1)return null;t.setAttribute("transform",n)}})}},{key:"render",value:function(){return'<xg-replay class="xgplayer-replay">\n      '+this.icons.replay+'\n      <xg-replay-txt class="xgplayer-replay-txt">'+this.text.replay+"</xg-replay-txt>\n    </xg-replay>"}}],[{key:"pluginName",get:function(){return"Replay"}}]),t}(Plugin),PlaySvg='<svg class="play" xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 40 40">\n  <path transform="scale(0.0320625 0.0320625)" d="M576,363L810,512L576,661zM342,214L576,363L576,661L342,810z"></path>\n</svg>\n',PauseSvg='<svg class="pause" xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 40 40">\n  <path transform="scale(0.0320625 0.0320625)" d="M598,214h170v596h-170v-596zM256 810v-596h170v596h-170z"></path>\n</svg>\n',css='.xgplayer.xgplayer-mini {\n  position: fixed;\n  width: 320px;\n  height: 180px;\n  z-index: 110; }\n  .xgplayer.xgplayer-mini:hover {\n    cursor: move; }\n    .xgplayer.xgplayer-mini:hover .xg-mini-layer {\n      display: block; }\n\n.xgplayer.xgplayer-ended .xg-mini-layer {\n  display: none; }\n\n.xgplayer .xg-mini-layer {\n  display: none;\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%; }\n  .xgplayer .xg-mini-layer .mask {\n    pointer-events: none;\n    position: absolute;\n    top: 0;\n    left: 0;\n    height: 100%;\n    width: 100%;\n    background-color: rgba(0, 0, 0, .4); }\n  .xgplayer .xg-mini-layer xg-mini-header {\n    display: -webkit-flex;\n    display: -moz-box;\n    display: flex;\n    cursor: pointer;\n    top: 0;\n    left: 0;\n    right: 40px;\n    -moz-box-sizing: border-box;\n         box-sizing: border-box;\n    padding: 10px 3px 0 8px;\n    -webkit-justify-content: space-between;\n       -moz-box-pack: justify;\n            justify-content: space-between;\n    color: #ffffff;\n    font-size: 14px;\n    position: absolute;\n    z-index: 22; }\n    .xgplayer .xg-mini-layer xg-mini-header .xgplayer-pip-disableBtn {\n      pointer-events: all; }\n    .xgplayer .xg-mini-layer xg-mini-header #disabledMini {\n      display: none;\n      position: relative; }\n    .xgplayer .xg-mini-layer xg-mini-header #disabledMini + label {\n      cursor: pointer;\n      position: relative;\n      display: -webkit-flex;\n      display: -moz-box;\n      display: flex;\n      -webkit-align-items: center;\n         -moz-box-align: center;\n              align-items: center; }\n    .xgplayer .xg-mini-layer xg-mini-header #disabledMini + label::before {\n      content: "";\n      color: #ff142b;\n      background-color: transparent;\n      border-radius: 2px;\n      border: solid 1px #cdcdcd;\n      width: 16px;\n      height: 16px;\n      display: inline-block;\n      text-align: center;\n      vertical-align: middle;\n      line-height: 16px;\n      margin-right: 7px; }\n    .xgplayer .xg-mini-layer xg-mini-header #disabledMini:checked + label {\n      color: #ff142b; }\n    .xgplayer .xg-mini-layer xg-mini-header #disabledMini:checked + label::before {\n      border-color: #ff142b; }\n    .xgplayer .xg-mini-layer xg-mini-header #disabledMini:checked + label:after {\n      content: "";\n      position: absolute;\n      width: 4px;\n      height: 8px;\n      border-color: #ff142b;\n      border-style: solid;\n      border-width: 0px 2px 2px 0px;\n      -webkit-transform: rotate(45deg);\n          -ms-transform: rotate(45deg);\n              transform: rotate(45deg);\n      left: 6px;\n      top: 5px; }\n    .xgplayer .xg-mini-layer xg-mini-header .xgplayer-mini-disableBtn xg-tips {\n      position: absolute;\n      padding: 4px 6px;\n      white-space: nowrap;\n      bottom: -30px;\n      right: 15px;\n      border-radius: 4px;\n      background-color: rgba(0, 0, 0, .54);\n      display: none; }\n    .xgplayer .xg-mini-layer xg-mini-header .xgplayer-mini-disableBtn:hover #disabledMini + label::before {\n      border-color: #ff142b; }\n    .xgplayer .xg-mini-layer xg-mini-header .xgplayer-mini-disableBtn:hover #disabledMini + label {\n      color: #ff142b; }\n    .xgplayer .xg-mini-layer xg-mini-header .xgplayer-mini-disableBtn:hover xg-tips {\n      display: block; }\n  .xgplayer .xg-mini-layer .mini-cancel-btn {\n    cursor: pointer;\n    display: block;\n    color: #fff;\n    width: 40px;\n    height: 38px;\n    position: absolute;\n    right: 0;\n    top: 0;\n    text-align: center;\n    line-height: 38px; }\n  .xgplayer .xg-mini-layer .play-icon {\n    cursor: pointer;\n    height: 48px;\n    width: 48px;\n    position: absolute;\n    background: rgba(0, 0, 0, .54);\n    border-radius: 24px;\n    top: 50%;\n    left: 50%;\n    margin: -24px 0 0 -24px; }\n    .xgplayer .xg-mini-layer .play-icon svg {\n      width: 40px;\n      height: 40px;\n      fill: #faf7f7;\n      -webkit-transform: translate(7px, 7px);\n          -ms-transform: translate(7px, 7px);\n              transform: translate(7px, 7px); }\n    .xgplayer .xg-mini-layer .play-icon.play .play {\n      display: none; }\n    .xgplayer .xg-mini-layer .play-icon.play .pause {\n      display: block; }\n    .xgplayer .xg-mini-layer .play-icon.pause .play {\n      display: block; }\n    .xgplayer .xg-mini-layer .play-icon.pause .pause {\n      display: none; }\n\n.xgplayer .xgplayer-miniicon {\n  position: relative;\n  outline: none;\n  display: block; }\n  .xgplayer .xgplayer-miniicon .name {\n    text-align: center;\n    font-family: PingFangSC-Regular;\n    font-size: 13px;\n    line-height: 20px;\n    height: 20px;\n    color: rgba(255, 255, 255, .8);\n    line-height: 40px; }\n    .xgplayer .xgplayer-miniicon .name span {\n      font-family: PingFangSC-Regular;\n      font-size: 13px;\n      width: 60px;\n      height: 20px;\n      line-height: 20px;\n      background: rgba(0, 0, 0, .38);\n      border-radius: 10px;\n      display: inline-block;\n      vertical-align: middle; }\n';styleInject('.xgplayer.xgplayer-mini {\n  position: fixed;\n  width: 320px;\n  height: 180px;\n  z-index: 110; }\n  .xgplayer.xgplayer-mini:hover {\n    cursor: move; }\n    .xgplayer.xgplayer-mini:hover .xg-mini-layer {\n      display: block; }\n\n.xgplayer.xgplayer-ended .xg-mini-layer {\n  display: none; }\n\n.xgplayer .xg-mini-layer {\n  display: none;\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%; }\n  .xgplayer .xg-mini-layer .mask {\n    pointer-events: none;\n    position: absolute;\n    top: 0;\n    left: 0;\n    height: 100%;\n    width: 100%;\n    background-color: rgba(0, 0, 0, .4); }\n  .xgplayer .xg-mini-layer xg-mini-header {\n    display: -webkit-flex;\n    display: -moz-box;\n    display: flex;\n    cursor: pointer;\n    top: 0;\n    left: 0;\n    right: 40px;\n    -moz-box-sizing: border-box;\n         box-sizing: border-box;\n    padding: 10px 3px 0 8px;\n    -webkit-justify-content: space-between;\n       -moz-box-pack: justify;\n            justify-content: space-between;\n    color: #ffffff;\n    font-size: 14px;\n    position: absolute;\n    z-index: 22; }\n    .xgplayer .xg-mini-layer xg-mini-header .xgplayer-pip-disableBtn {\n      pointer-events: all; }\n    .xgplayer .xg-mini-layer xg-mini-header #disabledMini {\n      display: none;\n      position: relative; }\n    .xgplayer .xg-mini-layer xg-mini-header #disabledMini + label {\n      cursor: pointer;\n      position: relative;\n      display: -webkit-flex;\n      display: -moz-box;\n      display: flex;\n      -webkit-align-items: center;\n         -moz-box-align: center;\n              align-items: center; }\n    .xgplayer .xg-mini-layer xg-mini-header #disabledMini + label::before {\n      content: "";\n      color: #ff142b;\n      background-color: transparent;\n      border-radius: 2px;\n      border: solid 1px #cdcdcd;\n      width: 16px;\n      height: 16px;\n      display: inline-block;\n      text-align: center;\n      vertical-align: middle;\n      line-height: 16px;\n      margin-right: 7px; }\n    .xgplayer .xg-mini-layer xg-mini-header #disabledMini:checked + label {\n      color: #ff142b; }\n    .xgplayer .xg-mini-layer xg-mini-header #disabledMini:checked + label::before {\n      border-color: #ff142b; }\n    .xgplayer .xg-mini-layer xg-mini-header #disabledMini:checked + label:after {\n      content: "";\n      position: absolute;\n      width: 4px;\n      height: 8px;\n      border-color: #ff142b;\n      border-style: solid;\n      border-width: 0px 2px 2px 0px;\n      -webkit-transform: rotate(45deg);\n          -ms-transform: rotate(45deg);\n              transform: rotate(45deg);\n      left: 6px;\n      top: 5px; }\n    .xgplayer .xg-mini-layer xg-mini-header .xgplayer-mini-disableBtn xg-tips {\n      position: absolute;\n      padding: 4px 6px;\n      white-space: nowrap;\n      bottom: -30px;\n      right: 15px;\n      border-radius: 4px;\n      background-color: rgba(0, 0, 0, .54);\n      display: none; }\n    .xgplayer .xg-mini-layer xg-mini-header .xgplayer-mini-disableBtn:hover #disabledMini + label::before {\n      border-color: #ff142b; }\n    .xgplayer .xg-mini-layer xg-mini-header .xgplayer-mini-disableBtn:hover #disabledMini + label {\n      color: #ff142b; }\n    .xgplayer .xg-mini-layer xg-mini-header .xgplayer-mini-disableBtn:hover xg-tips {\n      display: block; }\n  .xgplayer .xg-mini-layer .mini-cancel-btn {\n    cursor: pointer;\n    display: block;\n    color: #fff;\n    width: 40px;\n    height: 38px;\n    position: absolute;\n    right: 0;\n    top: 0;\n    text-align: center;\n    line-height: 38px; }\n  .xgplayer .xg-mini-layer .play-icon {\n    cursor: pointer;\n    height: 48px;\n    width: 48px;\n    position: absolute;\n    background: rgba(0, 0, 0, .54);\n    border-radius: 24px;\n    top: 50%;\n    left: 50%;\n    margin: -24px 0 0 -24px; }\n    .xgplayer .xg-mini-layer .play-icon svg {\n      width: 40px;\n      height: 40px;\n      fill: #faf7f7;\n      -webkit-transform: translate(7px, 7px);\n          -ms-transform: translate(7px, 7px);\n              transform: translate(7px, 7px); }\n    .xgplayer .xg-mini-layer .play-icon.play .play {\n      display: none; }\n    .xgplayer .xg-mini-layer .play-icon.play .pause {\n      display: block; }\n    .xgplayer .xg-mini-layer .play-icon.pause .play {\n      display: block; }\n    .xgplayer .xg-mini-layer .play-icon.pause .pause {\n      display: none; }\n\n.xgplayer .xgplayer-miniicon {\n  position: relative;\n  outline: none;\n  display: block; }\n  .xgplayer .xgplayer-miniicon .name {\n    text-align: center;\n    font-family: PingFangSC-Regular;\n    font-size: 13px;\n    line-height: 20px;\n    height: 20px;\n    color: rgba(255, 255, 255, .8);\n    line-height: 40px; }\n    .xgplayer .xgplayer-miniicon .name span {\n      font-family: PingFangSC-Regular;\n      font-size: 13px;\n      width: 60px;\n      height: 20px;\n      line-height: 20px;\n      background: rgba(0, 0, 0, .38);\n      border-radius: 10px;\n      display: inline-block;\n      vertical-align: middle; }\n');var POSITIONS$1=Plugin.POSITIONS,MiniScreenIcon=function(e){function t(){return classCallCheck(this,t),possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return inherits(t,e),createClass(t,[{key:"afterCreate",value:function(){this.getMini=this.getMini.bind(this),this.exitMini=this.exitMini.bind(this),this.bind(["click","touchend"],this.getMini)}},{key:"getMini",value:function(){this.config.onClick&&this.config.onClick()}},{key:"exitMini",value:function(){this.config.onClick&&this.config.onClick()}},{key:"destroy",value:function(){this.unbind(["click","touchend"],this.getMini)}},{key:"registerLangauageTexts",value:function(){return{miniscreen:{jp:"日文text",en:"miniscreen",zh:"小屏幕"}}}},{key:"render",value:function(){return'\n      <xg-icon class="xgplayer-miniicon">\n      <div class="xgplayer-icon btn-definition"><span class="icon-text">'+this.text.miniscreen+"</span></div>\n      </xg-icon>"}}],[{key:"pluginName",get:function(){return"miniscreenIcon"}},{key:"defaultConfig",get:function(){return{position:POSITIONS$1.CONTROLS_RIGTH,index:10}}}]),t}(Plugin),Util$1=Plugin.Util,Events$1=Plugin.Events,MiniScreen=function(e){function t(e){classCallCheck(this,t);var n=possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.isMini=!1;var i=n.config;return n.pos={left:i.left<0?window.innerWidth-i.width-20:i.left,top:i.top<0?window.innerHeight-i.height-20:i.top,height:n.config.height,width:n.config.width},n.coordinate={currentX:0,currentY:0,scrollY:window.scrollY||0},n.lastStyle=null,n.isMoveing=!1,n}return inherits(t,e),createClass(t,null,[{key:"pluginName",get:function(){return"miniscreen"}},{key:"defaultConfig",get:function(){return{disable:!1,width:320,height:180,left:-1,top:-1,isShowIcon:!1,isScrollSwitch:!1,scrollTop:0,disableDrag:!1}}}]),createClass(t,[{key:"beforeCreate",value:function(e){"boolean"==typeof e.player.config.mini&&(e.config.isShowIcon=e.player.config.mini)}},{key:"afterCreate",value:function(){var e=this;["onMousemove","onMousedown","onMouseup","onCancelClick","onCenterClick","onScroll"].map(function(t){e[t]=e[t].bind(e)}),this.on(Events$1.PAUSE,function(){var t=e.find(".play-icon");Util$1.addClass(t,"pause"),Util$1.removeClass(t,"play")}),this.on(Events$1.PLAY,function(){var t=e.find(".play-icon");Util$1.addClass(t,"play"),Util$1.removeClass(t,"pause")})}},{key:"onPluginsReady",value:function(){var e=this,t=this.player;if(!this.config.disable){if(this.config.isShowIcon){var n={config:{onClick:function(){e.getMini()}}};this.miniIcon=t.controls.registerPlugin(MiniScreenIcon,n,MiniScreenIcon.pluginName)}this.bind(".mini-cancel-btn","click",this.onCancelClick),this.bind(".play-icon","click",this.onCenterClick),this.config.disableDrag||this.bind("mousedown",this.onMousedown),this.config.isScrollSwitch&&window.addEventListener("scroll",this.onScroll)}}},{key:"onCancelClick",value:function(e){this.exitMini()}},{key:"onCenterClick",value:function(e){var t=this.player;t.paused?t.play():t.pause()}},{key:"getCss",value:function(e,t){return e.currentStyle?e.currentStyle[t]:document.defaultView.getComputedStyle(e,!1)[t]}},{key:"onScroll",value:function(e){if(!(!window.scrollY&&0!==window.scrollY||Math.abs(window.scrollY-this.coordinate.scrollY)<50)){var t=parseInt(this.getCss(this.player.root,"height"));t+=this.config.scrollTop,this.coordinate.scrollY=window.scrollY,window.scrollY>t+5&&!this.isMini?this.getMini():window.scrollY<=t&&this.isMini&&this.exitMini()}}},{key:"onMousedown",value:function(e){e.target!==this.root||this.isMoveing||(this.isMoveing=!0,this.coordinate.currentX=e.clientX,this.coordinate.currentY=e.clientY,this.bind("mouseup",this.onMouseup),this.bind("mousemove",this.onMousemove))}},{key:"onMouseup",value:function(e){if(e.target===this.root&&this.isMoveing){this.isMoveing=!1;var t=this.config.target||this.player.root;this.pos.top=parseInt(this.getCss(t,"top")),this.pos.left=parseInt(this.getCss(t,"left")),this.unbind("mousemove",this.onMousemove),this.unbind("mouseup",this.onMouseup)}}},{key:"onMousemove",value:function(e,t){e=e||window.event;var n=this.config.target||this.player.root,i=window.innerHeight-parseInt(this.getCss(n,"height")),r=window.innerWidth-parseInt(this.getCss(n,"width"));if(this.isMoveing){var o=e.clientX,s=e.clientY,a=o-this.coordinate.currentX,l=s-this.coordinate.currentY,u=parseInt(this.pos.top)+l,c=parseInt(this.pos.left)+a;return c<0?c=0:c>r&&(c=r),u<0?u=0:u>i&&(u=i),n.style.left=c+"px",n.style.top=u+"px","function"==typeof t&&t(c,u),e.preventDefault&&e.preventDefault(),!1}}},{key:"getMini",value:function(){var e=this;if(!this.isMini){var t=this.player,n=this.playerConfig,i=this.config.target||this.player.root;this.lastStyle={},Util$1.addClass(t.root,"xgplayer-mini"),Object.keys(this.pos).map(function(t){e.lastStyle[t]=i.style[t],i.style[t]=e.pos[t]+"px"}),n.fluid&&(i.style["padding-top"]=""),this.emit(Events$1.MINI_STATE_CHANGE,!0),t.isMini=this.isMini=!0}}},{key:"exitMini",value:function(){var e=this;if(!this.isMini)return!1;var t=this.player,n=this.playerConfig,i=this.config.target||this.player.root;Util$1.removeClass(t.root,"xgplayer-mini"),this.lastStyle&&Object.keys(this.lastStyle).map(function(t){i.style[t]=e.lastStyle[t]}),this.lastStyle=null,n.fluid&&(t.root.style.width="100%",t.root.style.height="0",t.root.style["padding-top"]=100*n.height/n.width+"%"),this.emit(Events$1.MINI_STATE_CHANGE,!1),this.isMini=t.isMini=!1}},{key:"destroy",value:function(){this.unbind("mousedown",this.onMousedown),window.removeEventListener("scroll",this.onScroll)}},{key:"render",value:function(){if(!this.config.disable)return'\n      <xg-mini-layer class="xg-mini-layer">\n      <div class="mask"></div>\n      <xg-mini-header class="xgplayer-mini-header">\n        <div>按住画面可移动小窗</div>\n      </xg-mini-header>\n      <div class="mini-cancel-btn">X</div>\n      <div class="play-icon play">\n        '+PauseSvg+"\n        "+PlaySvg+"\n      </div>\n      </xg-mini-layer>"}}]),t}(Plugin),Events$2=Plugin.Events,Util$2=Plugin.Util,POSITIONS$2=Plugin.POSITIONS,Controls$1=function(e){function t(){return classCallCheck(this,t),possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return inherits(t,e),createClass(t,[{key:"beforeCreate",value:function(e){"boolean"==typeof e.player.config.controls&&(e.config.disable=!e.player.config.controls)}},{key:"afterCreate",value:function(){var e=this,t={height:this.config.height+"px"};Object.keys(t).map(function(n){e.root.style[n]=t[n]}),this.left=this.find("left-grid"),this.center=this.find("center"),this.right=this.find("right-grid"),this.on(Events$2.MINI_STATE_CHANGE,function(t){t?Util$2.addClass(e.root,"mini"):Util$2.removeClass(e.root,"mini")}),this.bind("mouseenter",function(t){e.mouseEnter(t)}),this.bind("mouseou",function(t){e.mouseOut(t)})}},{key:"mouseEnter",value:function(){console.log("mouseenter")}},{key:"mouseOut",value:function(){console.log("mouseout")}},{key:"showTips",value:function(){}},{key:"registerPlugin",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments[2];if(this.root&&!n.root){switch(n.config&&n.config.position?n.config.position:e.defaultConfig.position){case POSITIONS$2.CONTROLS_LEFT:n.root=this.left;break;case POSITIONS$2.CONTROLS_RIGTH:n.root=this.right;break;case POSITIONS$2.CONTROLS_CENTER:n.root=this.center;break;default:n.root=this.left}return get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"registerPlugin",this).call(this,e,n,i)}}},{key:"render",value:function(){if(!this.config.disable)return'<xg-controls class="xgplayer-controls" unselectable="on" onselectstart="return false">\n    <left-grid class="left-grid">\n    </Left-grid>\n    <center class="center"></center>\n    <right-grid class="right-grid">\n    </right-grid>\n    </xg-controls>'}}],[{key:"pluginName",get:function(){return"Controls"}},{key:"defaultConfig",get:function(){return{disable:!1}}}]),t}(Plugin),Next='<svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 40 40">\n  <path transform="scale(0.038 0.028)" d="M800 380v768h-128v-352l-320 320v-704l320 320v-352z"></path>\n</svg>\n',POSITIONS$3=Plugin.POSITIONS,Sniffer=Plugin.Sniffer,PlayNextIcon=function(e){function t(e){classCallCheck(this,t);var n=possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.idx=-1,n}return inherits(t,e),createClass(t,null,[{key:"pluginName",get:function(){return"PlayNext"}},{key:"defaultConfig",get:function(){return{position:POSITIONS$3.CONTROLS_LEFT,index:1,url:null,urlList:[]}}}]),createClass(t,[{key:"afterCreate",value:function(){this.config.urlList&&0!==this.config.urlList.length&&this.initEvents()}},{key:"initEvents",value:function(){this.playNext=this.playNext.bind(this);var e="mobile"===Sniffer.device?"touchend":"click";this.bind(e,this.playNext),this.show()}},{key:"playNext",value:function(){var e=this.player;this.idx+1<this.config.urlList.length?(this.idx++,e.video.pause(),e.currentTime=0,e.video.autoplay=!0,e.src=this.config.urlList[this.idx],e.emit("playerNext",this.idx+1)):e.emit("urlList last")}},{key:"registerIcons",value:function(){return{playNext:'<svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 40 40">\n  <path transform="scale(0.038 0.028)" d="M800 380v768h-128v-352l-320 320v-704l320 320v-352z"></path>\n</svg>\n'}}},{key:"registerLangauageTexts",value:function(){return{playNext:{jp:"play",en:"play",zh:"播放"}}}},{key:"destroy",value:function(){this.unbind(["touchend","click"],this.playNext)}},{key:"render",value:function(){if(this.config.urlList&&0!==this.config.urlList.length)return'\n     <xg-icon class="xgplayer-playnext">\n      <div class="xgplayer-icon">\n        '+this.icons.playNext+'\n      </div>\n      <div class="xg-tips">'+this.text.playNext+"</div>\n     </xg-icon>\n    "}}]),t}(Plugin),Events$3=BasePlugin.Events,Util$3=BasePlugin.Util,PCPlugin=function(e){function t(){return classCallCheck(this,t),possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return inherits(t,e),createClass(t,[{key:"afterCreate",value:function(){var e=this;["onVideoClick","onVideoDblClick","onMouseEnter","onMouseLeave","onControlMouseEnter","onControlMouseLeave","onContextmenu"].map(function(t){e[t]&&(e[t]=e[t].bind(e))}),this.initEvents(),this.playerConfig.autoplay&&this.onEnter()}},{key:"initEvents",value:function(){var e=this,t=this.player;t.video.addEventListener("click",this.onVideoClick,!1),t.video.addEventListener("dblclick",this.onVideoDblClick,!1),t.root.addEventListener("contextmenu",this.onContextmenu,!1),this.once(Events$3.CANPLAY,this.onEntered.bind(this)),this.once(Events$3.AUTOPLAY_PREVENTED,function(){e.onAutoPlayPrevented()}),t.root.addEventListener("mouseenter",this.onMouseEnter),t.root.addEventListener("mouseleave",this.onMouseLeave)}},{key:"onContextmenu",value:function(e){(e=e||window.event).preventDefault&&e.preventDefault(),e.stopPropagation?e.stopPropagation():(e.returnValue=!1,e.cancelBubble=!0)}},{key:"onEnter",value:function(){var e=this.player;Util$3.addClass(e.root,"xgplayer-is-enter")}},{key:"onEntered",value:function(){var e=this.player;Util$3.removeClass(e.root,"xgplayer-is-enter")}},{key:"onAutoPlayPrevented",value:function(){var e=this,t=this.player;Util$3.removeClass(t.root,"xgplayer-is-enter"),this.once(Events$3.PLAY,function(){Util$3.addClass(t.root,"xgplayer-is-enter"),e.once(Events$3.TIME_UPDATE,function(){Util$3.removeClass(t.root,"xgplayer-is-enter")})})}},{key:"onVideoClick",value:function(e){e.preventDefault(),this.config.closeVideoStopPropagation||e.stopPropagation();var t=this.player,n=0,i=void 0;t.config.closeVideoClick||(n++,i&&clearTimeout(i),1===n?i=setTimeout(function(){if(Util$3.hasClass(t.root,"xgplayer-nostart"))return!1;t.ended||(t.paused?t.play():t.pause()),n=0},200):n=0)}},{key:"onVideoDblClick",value:function(e){e.preventDefault(),e.stopPropagation();var t=this.player;t.config.closeVideoDblclick||(t.fullscreen?t.exitFullscreen():t.getFullscreen())}},{key:"onMouseEnter",value:function(){var e=this.player;clearTimeout(e.leavePlayerTimer),e.emit("focus",e)}},{key:"onMouseLeave",value:function(){var e=this.player;e.config.closePlayerBlur||(e.leavePlayerTimer=setTimeout(function(){e.emit("blur",e)},e.config.leavePlayerTime||1500))}},{key:"onControlMouseEnter",value:function(){var e=this.player;e.userTimer&&clearTimeout(e.userTimer)}},{key:"onControlMouseLeave",value:function(){var e=this.player;e.config.closeControlsBlur||e.emit("focus",e)}},{key:"destroy",value:function(){var e=this.player;e.root.removeEventListener("mouseenter",this.onMouseEnter),e.root.removeEventListener("mouseleave",this.onMouseLeave),e.off("ready",this.onReady)}}],[{key:"pluginName",get:function(){return"pc"}}]),t}(BasePlugin),MobilePlugin=function(e){function t(e){classCallCheck(this,t);var n=possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.isTouchMove=!1,n}return inherits(t,e),createClass(t,null,[{key:"pluginName",get:function(){return"mobile"}},{key:"defaultConfig",get:function(){return{index:0}}}]),createClass(t,[{key:"afterCreate",value:function(){var e=this,t=this.player;t.video.addEventListener("touchend",function(t){e.onTouchEnd(t)},!1),t.video.addEventListener("touchstart",function(){e.isTouchMove=!1}),t.video.addEventListener("touchmove",function(){e.isTouchMove=!0})}},{key:"onTouchEnd",value:function(e){e.preventDefault();var t=Plugin.Util;e.stopPropagation();var n=this.player,i=this.playerConfig;if(t.hasClass(n.root,"xgplayer-inactive")?n.emit("focus"):n.emit("blur"),!i.closeVideoTouch&&!n.isTouchMove){if(t.hasClass(n.root,"xgplayer-nostart"))return!1;if(!n.ended)if(n.paused){var r=n.play();void 0!==r&&r&&r.catch(function(e){})}else n.pause()}}},{key:"render",value:function(){return"\n     <xg-trigger></xg-trigger>\n    "}}]),t}(Plugin),PlaceHolderPlugin=function(e){function t(){return classCallCheck(this,t),possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return inherits(t,e),createClass(t,[{key:"render",value:function(){return'<xg-placeholder class="xgplayer-placeholder">\n    </xg-placeholder>'}}],[{key:"pluginName",get:function(){return"placeholder"}}]),t}(BasePlugin),AnimateMap={},Util$4=Plugin.Util,Events$4=Plugin.Events,Start=function(e){function t(){return classCallCheck(this,t),possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return inherits(t,e),createClass(t,[{key:"afterCreate",value:function(){var e=this,t=this.player,n=this.root,i=this.playerConfig;this.once(Events$4.READY,function(){i&&(i.lang&&"en"===i.lang?Util$4.addClass(n,"lang-is-en"):"jp"===i.lang&&Util$4.addClass(n,"lang-is-jp"))}),t.config.autoplay||this.show(),this.bind("click",function(n){if(n.preventDefault(),n.stopPropagation(),t.isReady){var i=e.player.paused;e.player.hasStart?i?e.player.play():e.player.pause():(e.player.start(),e.player.once("complete",function(){e.player.play()}))}}),this.on([Events$4.PLAY,Events$4.PAUSE],function(){e.animate()}),this.on(Events$4.AUTOPLAY_PREVENTED,function(){e.show("inline-block"),e.animate(!0)})}},{key:"registerIcons",value:function(){return{play:PlaySvg,pause:PauseSvg}}},{key:"animate",value:function(e){var t=this;if(this.config.isShowPause&&(e||this.player.paused))return this.show(),void(this.root.innerHTML=this.icons.play);addAnimate("pauseplay",400,{start:function(){Util$4.addClass(t.root,"interact"),t.show(),t.root.innerHTML=t.player.paused?t.icons.pause:t.icons.play},end:function(){Util$4.removeClass(t.root,"interact"),t.config.isShowPause&&(t.player.paused||e)||t.hide()}})}},{key:"render",value:function(){return'\n    <xg-start class="xgplayer-start" >\n      <div class="play">\n      '+this.icons.play+"\n      </div>\n    </xg-start>"}}],[{key:"pluginName",get:function(){return"start"}},{key:"defaultConfig",get:function(){return{isShowPause:!1}}}]),t}(Plugin),TextTrackPlugin=function(e){function t(){return classCallCheck(this,t),possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return inherits(t,e),createClass(t,[{key:"afterCreate",value:function(){var e=this.config,t=this.player,n=e,i="";if(n.textTrack&&Array.isArray(n.textTrack)&&(navigator.userAgent.indexOf("Chrome")>-1||navigator.userAgent.indexOf("Firefox")>-1)&&(n.textTrack.some(function(e){if(e.src&&e.label&&e.default)return i+='<track src="'+e.src+'" ',e.kind&&(i+='kind="'+e.kind+'" '),i+='label="'+e.label+'" ',e.srclang&&(i+='srclang="'+e.srclang+'" '),i+=(e.default?"default":"")+">",!0}),this.videoConfig.crossorigin="anonymous"),n.textTrackStyle){var r=document.createElement("style");this.textTrackStyle=r,document.head.appendChild(r);var o="";for(var s in n.textTrackStyle)o+=s+": "+n.textTrackStyle[s]+";";var a=n.id?"#"+n.id:n.el.id?"#"+n.el.id:"."+n.el.className;r.sheet.insertRule?r.sheet.insertRule(a+" video::cue { "+o+" }",0):r.sheet.addRule&&r.sheet.addRule(a+" video::cue",o)}t.video&&t.video.insertAdjacentHTML("afterbegin",i)}}],[{key:"pluginName",get:function(){return"textTrack"}}]),t}(BasePlugin),BasePlugin$1=function(){function e(t){classCallCheck(this,e),util.checkIsFunction(this.beforeCreate)&&this.beforeCreate(t),this.__args=t,this.__events={},this.config=t.config||{},this.__init(t)}return createClass(e,null,[{key:"defineGetterOrSetter",value:function(e,t){for(var n in t)Object.defineProperty(e,n,t[n])}}]),createClass(e,[{key:"onPluginsReady",value:function(){}},{key:"__init",value:function(t){var n=this;e.defineGetterOrSetter(this,{player:{get:function(){return t.player}},playerConfig:{get:function(){return t.player&&t.player.config}},pluginName:{get:function(){return t.pluginName?t.pluginName:n.constructor.pluginName}},logger:{get:function(){return t.player.logger}}})}},{key:"on",value:function(e,t){var n=this;"string"==typeof e?(this.__events[e]=t,this.player.on(e,t)):Array.isArray(e)&&e.forEach(function(e){n.__events[e]=t,n.player.on(e,t)})}},{key:"once",value:function(e,t){this.player.once(e,t)}},{key:"off",value:function(e,t){var n=this;"string"==typeof e?(this.__events[e]=void 0,this.player.off(e,t)):Array.isArray(e)&&e.forEach(function(e){n.__events[e]=void 0,n.player.off(e,t)})}},{key:"offAll",value:function(){var e=!0,t=!1,n=void 0;try{for(var i,r=Object.keys(this.__events)[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){var o=i.value;this.off(o,this.__events[o])}}catch(e){t=!0,n=e}finally{try{!e&&r.return&&r.return()}finally{if(t)throw n}}}},{key:"emit",value:function(e,t){this.player.emit(e,t)}},{key:"_destroy",value:function(){this.offAll(),util.checkIsFunction(this.destroy)&&this.destroy()}}]),e}();BasePlugin$1.Util=util,BasePlugin$1.Sniffer=sniffer,BasePlugin$1.Errors=Errors,BasePlugin$1.Events=event;var pluginsManager$1={init:function(e){var t=e._pluginInfoId;t||(t=(new Date).getTime(),e._pluginInfoId=t),this.pluginGroup||(this.pluginGroup={}),this.pluginGroup[t]={_player:e,_originalOptions:e.config||{}}},lazyRegister:function(e,t){var n=this,i=t.timeout||1500;return Promise.race([t.loader().then(function(t){var i=void 0;i=t&&t.__esModule?t.default:t,n.register(e,i,t.options)}),new Promise(function(e,t){setTimeout(function(){t(new Error("timeout"))},i)})])},register:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e&&t&&"function"==typeof t&&void 0!==t.prototype){var i=e._pluginInfoId;i&&this.pluginGroup&&this.pluginGroup[i]||(this.init(e),i=e._pluginInfoId),this.pluginGroup[i]._plugins||(this.pluginGroup[i]._plugins=[]);var r=this.pluginGroup[i]._plugins,o=this.pluginGroup[i]._originalOptions;n.player=this.pluginGroup[i]._player;var s=n.pluginName||t.pluginName;if(!s)throw new Error("The property pluginName is necessary");if(t.isSupported&&!t.isSupported())return void console.warn("not supported plugin ["+s+"]");n.config||(n.config={});var a=!0,l=!1,u=void 0;try{for(var c,h=Object.keys(o)[Symbol.iterator]();!(a=(c=h.next()).done);a=!0){var f=c.value;if(s.toLowerCase()===f.toLowerCase()){n.config=Object.assign({},n.config,o[f]);break}}}catch(e){l=!0,u=e}finally{try{!a&&h.return&&h.return()}finally{if(l)throw u}}t.defaultConfig&&Object.keys(t.defaultConfig).map(function(e){void 0===n.config[e]&&(n.config[e]=t.defaultConfig[e])}),n.root?"string"==typeof n.root&&(n.root=e[n.root]):n.root=e.root,n.index=n.config.index||0;try{var d=new t(n);return r[s.toLowerCase()]=d,r[s.toLowerCase()].func=t,d&&"function"==typeof d.afterCreate&&d.afterCreate(),d}catch(e){throw console.error(e),e}}},unRegister:function(e,t){try{this.pluginGroup[e]._plugins[t]._destroy(),this.pluginGroup[e]._plugins[t]=null}catch(n){this.pluginGroup[e]._plugins[t]=null}},getPlugins:function(e){var t=e._pluginInfoId;return t?this.pluginGroup[t]._plugins:{}},findPlugin:function(e,t){if(!this.pluginGroup)return null;var n=e._pluginInfoId,i=t.toLowerCase();return this.pluginGroup[n]._plugins[i]},beforeInit:function(e){function t(e){return e&&e.then?e:new Promise(function(e){e()})}var n=this;return console.log("beforeInit"),new Promise(function(i){if(n.pluginGroup){var r=e._pluginInfoId,o=n.pluginGroup[r]._plugins,s=[],a=!0,l=!1,u=void 0;try{for(var c,h=Object.keys(o)[Symbol.iterator]();!(a=(c=h.next()).done);a=!0){var f=c.value;if(o[f]&&o[f].beforePlayerInit)try{var d=o[f].beforePlayerInit();s.push(t(d))}catch(e){throw s.push(t(null)),e}}}catch(e){l=!0,u=e}finally{try{!a&&h.return&&h.return()}finally{if(l)throw u}}Promise.all(s).then(function(){i()}).catch(function(e){console.error(e),i()})}})},afterInit:function(e){var t=this;console.log("afterInit");var n=void 0;n=e._loadingPlugins&&e._loadingPlugins.length?Promise.all(e._loadingPlugins):Promise.resolve(),this.pluginGroup&&n.then(function(){var n=e._pluginInfoId,i=t.pluginGroup[n]._plugins,r=!0,o=!1,s=void 0;try{for(var a,l=Object.keys(i)[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var u=a.value;i[u]&&i[u].afterPlayerInit&&i[u].afterPlayerInit()}}catch(e){o=!0,s=e}finally{try{!r&&l.return&&l.return()}finally{if(o)throw s}}})},reRender:function(e){var t=e._pluginInfoId,n={},i=this.pluginGroup[t]._plugins,r=!0,o=!1,s=void 0;try{for(var a,l=Object.keys(i)[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var u=a.value;n[u]={plugin:i[u].func,options:i[u]._args},this.unRegister(t,u)}}catch(e){o=!0,s=e}finally{try{!r&&l.return&&l.return()}finally{if(o)throw s}}var c=!0,h=!1,f=void 0;try{for(var d,p=Object.keys(n)[Symbol.iterator]();!(c=(d=p.next()).done);c=!0){var g=d.value;this.register(t,g,n[g].plugin,n[g].options)}}catch(e){h=!0,f=e}finally{try{!c&&p.return&&p.return()}finally{if(h)throw f}}},onPluginsReady:function(e){var t=e._pluginInfoId,n=this.pluginGroup[t]._plugins;t&&n&&Object.keys(n).map(function(e){n[e].onPluginsReady&&"function"==typeof n[e].onPluginsReady&&n[e].onPluginsReady()})},destroy:function(e){var t=e._pluginInfoId,n=this.pluginGroup[t]._plugins,i=!0,r=!1,o=void 0;try{for(var s,a=Object.keys(n)[Symbol.iterator]();!(i=(s=a.next()).done);i=!0){var l=s.value;this.unRegister(t,l)}}catch(e){r=!0,o=e}finally{try{!i&&a.return&&a.return()}finally{if(r)throw o}}delete this.pluginGroup[t]}},Plugin$1=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return classCallCheck(this,t),possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return inherits(t,e),createClass(t,null,[{key:"insert",value:function(e,t,n){var i=t.children.length,r=parseInt(n),o=e instanceof window.HTMLElement;if(void 0===n||i<=r)return o?t.appendChild(e):t.insertAdjacentHTML("beforeend",e),t.children[t.children.length-1];if(0===r)return o?t.insertBefore(e,t.children.length>0?t.children[0]:null):t.insertAdjacentHTML("afterbegin",e),t.children[0];var s=t.children[r];return s&&s.insertAdjacentHTML?(o?t.insertBefore(e,s):s.insertAdjacentHTML("beforebegin",e),t.children[r]):void 0}},{key:"defaultConfig",get:function(){return{}}}]),createClass(t,[{key:"__init",value:function(e){get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"__init",this).call(this,e);var n=e.root,i=null;this.icons={},registerIconsObj$1(this.registerIcons()||{},this),this.text={},registerTextObj$1(this.registerLangauageTexts()||{},this);var r="";try{r=this.render()}catch(e){throw new Error("Plugin:"+this.pluginName+":render:"+e.message)}if(r)i=t.insert(r,n,e.index);else{if(!e.tag)return;i=_createElement$1(e.tag,e.name),n.appendChild(i)}t.defineGetterOrSetter(this,{root:{get:function(){return i}},parent:{get:function(){return n}}});var o=this.config.attr||{},s=this.config.style||{};this.setAttr(o),this.setStyle(s),this.config.index&&this.root.setAttribute("data-index",this.config.index),this.__registeChildren()}},{key:"__registeChildren",value:function(){if(this.root){var e=this.children();if(e&&"object"===(void 0===e?"undefined":_typeof(e))&&(this._children||(this._children=[]),Object.keys(e).length>0)){var t=!0,n=!1,i=void 0;try{for(var r,o=Object.keys(e)[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var s=r.value,a=e[s],l={root:this.root},u=void 0,c=void 0;"function"==typeof a?(u=this.config[s]||{},c=a):"object"===(void 0===a?"undefined":_typeof(a))&&"function"==typeof a.plugin&&(u=a.options?BasePlugin$1.Util.deepCopy(this.config[s]||{},a.options):this.config[s]||{},c=a.plugin),l.config=u,void 0!==u.index&&(l.index=u.index),u.root&&(l.root=u.root);var h=this.registerPlugin(c,l,s);this._children.push(h)}}catch(e){n=!0,i=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw i}}}}}},{key:"plugins",value:function(){return this._children}},{key:"children",value:function(){return{}}},{key:"registerPlugin",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";t.root=t.root||this.root,n&&(t.pluginName=n);var i=pluginsManager$1.register(this.player,e,t);return this._children.push(i),i}},{key:"registerIcons",value:function(){return{}}},{key:"registerLangauageTexts",value:function(){return{}}},{key:"getPlugin",value:function(e){return pluginsManager$1.findPlugin(this.player,e)}},{key:"find",value:function(e){if(this.root)return this.root.querySelector(e)}},{key:"bind",value:function(e,t,n){var i=this;if(arguments.length<3&&"function"==typeof t)Array.isArray(e)?e.forEach(function(e){i.bindEL(e,t)}):this.bindEL(e,t);else if(3===arguments.length&&"function"==typeof n){if(!this.root)return;Array.isArray(t)?t.forEach(function(t){bind$1(i.root,e,t,n,!1)}):bind$1(this.root,e,t,n,!1)}}},{key:"unbind",value:function(e,t,n){var i=this;arguments.length<3&&"function"==typeof t?Array.isArray(e)?e.forEach(function(e){i.unbindEL(e,t)}):this.unbindEL(e,t):"function"==typeof n&&(Array.isArray(t)?t.forEach(function(t){unbind$1(i.root,e,t,n)}):unbind$1(this.root,e,t,n))}},{key:"setStyle",value:function(e,t){if(this.root){if("string"==typeof e)return this.root.style[e]=t;if("object"===(void 0===e?"undefined":_typeof(e))){var n=e,i=!0,r=!1,o=void 0;try{for(var s,a=Object.keys(n)[Symbol.iterator]();!(i=(s=a.next()).done);i=!0){var l=s.value;this.root.style[l]=n[l]}}catch(e){r=!0,o=e}finally{try{!i&&a.return&&a.return()}finally{if(r)throw o}}}}}},{key:"setAttr",value:function(e,t){if(this.root){if("string"==typeof e)return this.root.setAttribute(e,t);if("object"===(void 0===e?"undefined":_typeof(e))){var n=e,i=!0,r=!1,o=void 0;try{for(var s,a=Object.keys(n)[Symbol.iterator]();!(i=(s=a.next()).done);i=!0){var l=s.value;this.root.setAttribute(l,n[l])}}catch(e){r=!0,o=e}finally{try{!i&&a.return&&a.return()}finally{if(r)throw o}}}}}},{key:"setHtml",value:function(e,t){this.root&&(this.root.innerHtml=e,"function"==typeof t&&t())}},{key:"bindEL",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.root&&"on"+e in this.root&&"function"==typeof t&&this.root.addEventListener(e,t,n)}},{key:"unbindEL",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.root&&"on"+e in this.root&&"function"==typeof t&&this.root.removeEventListener(e,t,n)}},{key:"show",value:function(e){if(this.root)return this.root.style.display=void 0!==e?e:"block","none"===window.getComputedStyle(this.root,null).getPropertyValue("display")?this.root.style.display="block":void 0}},{key:"hide",value:function(){this.root&&(this.root.style.display="none")}},{key:"render",value:function(){return""}},{key:"_destroy",value:function(){this.offAll(),BasePlugin$1.Util.checkIsFunction(this.destroy)&&this.destroy(),this.root&&(this.root.hasOwnProperty("remove")?this.root.remove():this.root.parentNode&&this.root.parentNode.removeChild(this.root))}}]),t}(BasePlugin$1);Plugin$1.ROOT_TYPES={CONTROLS:"controls",ROOT:"root"},Plugin$1.POSITIONS={ROOT:"root",ROOT_LEFT:"rootLeft",ROOT_RIGHT:"rootRight",ROOT_TOP:"rootTop",CONTROLS_LEFT:"controlsLeft",CONTROLS_RIGTH:"controlsRight",CONTROLS_CENTER:"controlsCenter"};var ErrorPlugin=function(e){function t(){return classCallCheck(this,t),possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return inherits(t,e),createClass(t,[{key:"afterCreate",value:function(){var e=this;this.bind(".xgplayer-error-refresh","click",function(t){t.preventDefault(),e.player.replay(),Plugin$1.Util.removeClass(e.player.root,"replay")}),this.on(Player.Events.CANPLAY,this.handleCanPlay.bind(this)),this.on(Player.Events.ERROR,this.handleError.bind(this))}},{key:"handleCanPlay",value:function(){Plugin$1.Util.removeClass(this.player.root,"xgplayer-is-error")}},{key:"handleError",value:function(){var e=this.player,t=this.find(".xgplayer-error-text");e.error?t.innerHTML=e.error:e.config.lang&&"zh-cn"===e.config.lang?t.innerHTML=e.lang.ERROR:this.root.innerHTML=e.lang.ERROR+'，please try to <span class="xgplayer-error-refresh">refresh</span>'}},{key:"render",value:function(){return'<xg-error class="xgplayer-error">\n      <em class="xgplayer-error-text"></em>请<span class="xgplayer-error-refresh">刷新</span>试试\n    </xg-error>'}}],[{key:"pluginName",get:function(){return"error"}}]),t}(Plugin$1),EnterPlugin=function(e){function t(){return classCallCheck(this,t),possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return inherits(t,e),createClass(t,[{key:"render",value:function(){for(var e="",t=1;t<=12;t++)e+='<div class="xgplayer-enter-bar'+t+'"></div>';return'<xg-enter class="xgplayer-enter"><div class="xgplayer-enter-spinner">\n      '+e+"\n    </div></xg-enter>"}}],[{key:"pluginName",get:function(){return"index.scss"}}]),t}(Plugin),Keyboard=function(e){function t(){return classCallCheck(this,t),possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return inherits(t,e),createClass(t,[{key:"mergekeyCodeMap",value:function(){var e=this,t=this.config.keyCodeMap;t&&Object.keys(t).map(function(n){e.keyCodeMap[n]?["keyCode","action","disable","isBodyTarget"].map(function(i){t[n][i]&&(e.keyCodeMap[n][i]=t[n][i])}):e.keyCodeMap[n]=t[n]})}},{key:"afterCreate",value:function(){this.config.disable=!this.playerConfig.keyShortcut,this.seekStep=10,this.keyCodeMap={space:{keyCode:32,action:"playPause",disable:!1,noBodyTarget:!1},up:{keyCode:38,action:"upVolume",disable:!1},down:{keyCode:40,action:"downVolume",disable:!1},left:{keyCode:37,action:"seekBack",disable:!1},right:{keyCode:39,action:"seek",disable:!1},esc:{keyCode:27,action:"exitFullscreen",disable:!1}},this.mergekeyCodeMap(),this.onKeydown=this.onKeydown.bind(this),this.onBodyKeyDown=this.onBodyKeyDown.bind(this),this.player.root.addEventListener("keydown",this.onKeydown),document.addEventListener("keydown",this.onBodyKeyDown)}},{key:"afterPlayerInit",value:function(){var e="function"==typeof this.config.seekStep?this.config.seekStep(this.player):this.config.seekStep;e&&"number"==typeof e||(this.seekStep=e)}},{key:"checkCode",value:function(e,t){var n=this,i=!1;return Object.keys(this.keyCodeMap).map(function(r){n.keyCodeMap[r]&&e===n.keyCodeMap[r].keyCode&&(i=!t||t&&!n.keyCodeMap[r].noBodyTarget)}),i}},{key:"downVolume",value:function(){var e=this.player;e.volume-.1>=0?e.volume=parseFloat((e.volume-.1).toFixed(1)):e.volume=0}},{key:"upVolume",value:function(){var e=this.player;e.volume+.1<=1?e.volume=parseFloat((e.volume+.1).toFixed(1)):e.volume=1}},{key:"seek",value:function(){var e=this.player;e.currentTime+this.seekStep<=e.duration?e.currentTime+=this.seekStep:e.currentTime=e.duration-1}},{key:"seekBack",value:function(){var e=this.player;e.currentTime-this.seekStep>=0?e.currentTime-=this.seekStep:e.currentTime=0}},{key:"playPause",value:function(){var e=this.player;e.paused?e.play().catch(function(e){}):e.pause()}},{key:"exitFullscreen",value:function(){var e=this.player;e.fullscreen&&e.exitFullscreen(),e.isCssfullScreen&&e.exitCssFullscreen()}},{key:"onBodyKeyDown",value:function(e){if(!this.config.disable){var t=e||window.event,n=t.keyCode;return!(t.target!==document.body||!this.checkCode(n,!0))&&(t.preventDefault(),t.cancelBubble=!0,t.returnValue=!1,this.handleKeyCode(n),!1)}}},{key:"onKeydown",value:function(e){if(!this.config.disable){var t=this.player,n=e||window.event;if(!n||37!==n.keyCode&&!this.checkCode(n.keyCode)||n.target!==this.player.root&&n.target!==this.player.video&&n.target!==this.player.controls.el)return!0;t.emit("focus"),n.preventDefault(),n.cancelBubble=!0,n.returnValue=!1,this.handleKeyCode(n.keyCode)}}},{key:"handleKeyCode",value:function(e){var t=this,n=this.player;40!==e&&38!==e||n.controls,Object.keys(this.keyCodeMap).map(function(n){if(t.keyCodeMap[n].keyCode===e&&!t.keyCodeMap[n].disable)if("function"==typeof t.keyCodeMap[n].action)t.keyCodeMap[n].action();else if("string"==typeof t.keyCodeMap[n].action){var i=t.keyCodeMap[n].action;"function"==typeof t[i]&&t[i]()}})}},{key:"destroy",value:function(){this.player.root.removeEventListener("keydown",this.onKeydown),document.removeEventListener("keydown",this.onBodyKeyDown)}}],[{key:"pluginName",get:function(){return"Keyboard"}},{key:"defaultConfig",get:function(){return{seekStep:10,keyCodeMap:{},disable:!1}}}]),t}(BasePlugin),Plugins=Object.freeze({__proto__:null,Poster:Poster,Replay:Replay,Miniscreen:MiniScreen,Keyboard:Keyboard,Rotate:Controls$1,PlayNext:PlayNextIcon,PC:PCPlugin,Mobile:MobilePlugin,PlaceHolder:PlaceHolderPlugin,Start:Start,track:TextTrackPlugin,Error:ErrorPlugin,Enter:EnterPlugin}),loadingIcon='<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewbox="0 0 100 100">\n  <path d="M100,50A50,50,0,1,1,50,0"></path>\n</svg>\n',Loading=function(e){function t(){return classCallCheck(this,t),possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return inherits(t,e),createClass(t,[{key:"registerIcons",value:function(){return{loadingIcon:'<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewbox="0 0 100 100">\n  <path d="M100,50A50,50,0,1,1,50,0"></path>\n</svg>\n'}}},{key:"render",value:function(){return'\n    <xg-loading class="xgplayer-loading">\n      '+this.icons.loadingIcon+"\n    </xg-loading>"}}],[{key:"pluginName",get:function(){return"loading"}}]),t}(Plugin),defaultDot={time:10,text:"",duration:1,style:{},color:"#fff"},Util$5=Plugin.Util,Events$5=Plugin.Events,ProgressDot=function(e){function t(e){classCallCheck(this,t);var n=possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.dotsList={},n}return inherits(t,e),createClass(t,null,[{key:"pluginName",get:function(){return"ProgressDots"}},{key:"defaultConfig",get:function(){return{dots:[]}}}]),createClass(t,[{key:"afterCreate",value:function(){var e=this;this.once(Events$5.CANPLAY,function(){var t=e.config.dots;t&&Array.isArray(t)&&(t.map(function(t){e.createDotDom(t)}),e.initEvents())})}},{key:"initEvents",value:function(){}},{key:"addDot",value:function(e,t,n){var i=null;i=1===arguments.length&&"object"===(void 0===e?"undefined":_typeof(e))?arguments[0]:{time:e,text:t,duration:n},i=Util$5.deepCopy(arguments[0],defaultDot),this.createDotDom(i)}},{key:"removeDot",value:function(e){var t=this.player;if(e>=0&&e<=t.duration&&this.dotsList[e]){var n=this.dotsList[e];n.parentNode.removeChild(n),n=null,this.dotsList[e]=null}}},{key:"removeAllProgressDots",value:function(){var e=this;Object.keys(this.dotsList).forEach(function(t){if(e.dotsList[t]){var n=e.dotsList[t];n.parentNode.removeChild(n),n=null,e.dotsList[t]=null}})}},{key:"createDotDom",value:function(e){var t=this.player,n=Util$5.createDom("xg-progress-dot",e.text?'<span class="xgplayer-progress-tip">'+e.text+"</span>":"",{},"xgplayer-progress-dot"),i=e.style||{};i.left=e.time/t.duration*100+"%",i.width=Math.min(e.duration,t.duration-e.time)/t.duration*100+"%",Object.keys(i).map(function(e){n.style[e]=i[e]}),this.dotsList[e.time]=n,this.root.appendChild(n)}},{key:"render",value:function(){return"<xg-dots></xg-dots>"}},{key:"destroy",value:function(){}}]),t}(Plugin),Events$6=Plugin.Events,Util$6=Plugin.Util,POSITIONS$4=Plugin.POSITIONS,Sniffer$1=Plugin.Sniffer,defaultThumbnailConfig={isShow:!1,urls:[],pic_num:0,row:0,col:0,height:160,width:90,scale:1},Progress=function(e){function t(e){classCallCheck(this,t);var n=possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.useable=!1,n.isProgressMoving=!1,n.playerConfig.thumbnail&&"mobile"!==Sniffer$1.device&&(n.config.thumbnail=n.playerConfig.thumbnail),n}return inherits(t,e),createClass(t,null,[{key:"pluginName",get:function(){return"Progress"}},{key:"defaultConfig",get:function(){return{position:POSITIONS$4.CONTROLS_CENTER,index:0,progressDot:[],thumbnail:null}}}]),createClass(t,[{key:"changeState",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.useable=e}},{key:"afterCreate",value:function(){var e=this;this.playedBar=this.find(".xgplayer-progress-played"),this.cachedBar=this.find(".xgplayer-progress-cache"),this.pointTip=this.find(".xgplayer-progress-point"),this.progressBtn=this.find(".xgplayer-progress-btn"),this.thumbnailDom=this.find("xg-thumbnail"),this.initThumbnail(),this.on(Events$6.TIME_UPDATE,function(){e.onTimeupdate(),e.onCacheUpdate()}),this.on(Events$6.SEEKING,function(){e.onTimeupdate(),e.onCacheUpdate()}),this.on([Events$6.BUFFER_CHANGE,Events$6.ENDED],function(){e.onCacheUpdate()}),this.bindDomEvents()}},{key:"children",value:function(){return{ProgressDots:{plugin:ProgressDot,options:{root:this.find("xg-outer"),dots:this.playerConfig.progressDot}}}}},{key:"initThumbnail",value:function(){var e=this;if(this.config.thumbnail){var t=this.config.thumbnail;this.thumbnailConfig={},Object.keys(defaultThumbnailConfig).map(function(n){void 0===t[n]?e.thumbnailConfig[n]=defaultThumbnailConfig[n]:e.thumbnailConfig[n]=t[n]});var n=this.thumbnailConfig,i=n.width,r=n.height,o=n.scale;this.thumbnailDom.style.width=i*o+"px",this.thumbnailDom.style.height=r*o+"px"}}},{key:"bindDomEvents",value:function(){var e=this;this.mouseDown=this.mouseDown.bind(this),this.mouseMove=this.mouseMove.bind(this),this.mouseEnter=this.mouseEnter.bind(this),this.mouseLeave=this.mouseLeave.bind(this),["touchstart","mousedown"].forEach(function(t){e.root.addEventListener(t,e.mouseDown)}),this.root.addEventListener("mouseenter",this.mouseEnter,!1)}},{key:"mouseDown",value:function(e){var t=this.player;if(!t.isMini){var n=this;if(e.stopPropagation(),Util$6.event(e),e.target===this.pointTip||!t.config.allowSeekAfterEnded&&t.ended)return!0;this.root.focus();var i=this.root.getBoundingClientRect().width,r=this.playedBar.getBoundingClientRect().left,o=function(e){e.preventDefault(),e.stopPropagation(),Util$6.event(e),n.isProgressMoving=!0;var o=e.clientX-r;o>i&&(o=i);var s=o/i*t.duration;n.playedBar.style.width=100*o/i+"%","video"!==t.videoConfig.mediaType||t.dash||t.config.closeMoveSeek?n.updateTime(s):t.currentTime=Number(s).toFixed(1),t.emit("focus")},s=function e(s){if(s.stopPropagation(),Util$6.event(s),window.removeEventListener("mousemove",o),window.removeEventListener("touchmove",o,{passive:!1}),window.removeEventListener("mouseup",e),window.removeEventListener("touchend",e),n.root.blur(),!n.isProgressMoving||"audio"===t.videoConfig.mediaType||t.dash||t.config.closeMoveSeek){var a=s.clientX-r;a>i&&(a=i);var l=a/i*t.duration;n.playedBar.style.width=100*a/i+"%",t.currentTime=Number(l).toFixed(1)}t.emit("focus"),n.isProgressMoving=!1};return window.addEventListener("mousemove",o),window.addEventListener("touchmove",o,{passive:!1}),window.addEventListener("mouseup",s),window.addEventListener("touchend",s),!0}}},{key:"mouseEnter",value:function(e){var t=this.player;if(!t.isMini){if(!t.config.allowSeekAfterEnded&&t.ended)return!0;this.root.addEventListener("mousemove",this.mouseMove,!1),this.root.addEventListener("mouseleave",this.mouseLeave,!1)}}},{key:"mouseLeave",value:function(e){this.player.isMini||(this.pointTip.style.display="none",this.thumbnailDom.style.display="none",this.root.removeEventListener("mousemove",this.mouseMove,!1),this.root.removeEventListener("mouseleave",this.mouseLeave,!1))}},{key:"mouseMove",value:function(e){var t=this.player,n=this.root.getBoundingClientRect().left,i=this.root.getBoundingClientRect().width,r=(e.clientX-n)/i*t.duration;r=r<0?0:r,this.pointTip.textContent=Util$6.format(r);var o=this.pointTip.getBoundingClientRect().width,s=e.clientX-n-o/2;s=(s=s>0?s:0)>i-o?i-o:s,this.pointTip.style.left=s+"px",e.target&&"xgplayer-progress-dot"===e.target.className?this.pointTip.style.display="none":this.pointTip.style.display="block",this.updateThumbnailPosition(e,r,i)}},{key:"updateThumbnailPosition",value:function(e,t,n){var i=this;if(this.config.thumbnail){var r=this.thumbnailConfig;if(r&&0!==!r.pic_num&&0!==r.urls.length){this.interval=this.player.duration/r.pic_num;var o=Math.floor(t/this.interval),s=r.urls,a=r.row,l=r.col,u=r.height,c=r.width,h=r.scale,f=o+1-l*a*(Math.ceil((o+1)/(l*a))-1),d=Math.ceil(f/a)-1,p=f-d*a-1,g=e.clientX-c*h/2;g=(g=g>0?g:0)<n-c*h?g:n-c*h;var y={backgroundImage:"url("+s[Math.ceil((o+1)/(l*a))-1]+")","background-position":"-"+p*c+"px -"+d*u+"px",left:g+"px",top:-10-u*h+"px",display:"block"};Object.keys(y).map(function(e){i.thumbnailDom.style[e]=y[e]})}}}},{key:"updateTime",value:function(e){var t=this.player.plugins.time;e&&t.updateTime(e)}},{key:"compute",value:function(e){var t=this.root.getBoundingClientRect().left,n=this.root.getBoundingClientRect().width,i=this.pointTip.getBoundingClientRect().width,r=e.clientX-t-i/2;r=(r=r>0?r:0)>n-i?n-i:r,this.pointTip.style.left=r+"px"}},{key:"onTimeupdate",value:function(){var e=this.player;e.isSeeking||"audio"===e.videoConfig.mediaType&&this.isProgressMoving&&e.dash||(this.playedBar.style.width=100*e.currentTime/e.duration+"%")}},{key:"onCacheUpdate",value:function(){var e=this.player,t=e.buffered;if(t&&t.length>0){for(var n=t.end(t.length-1),i=0,r=t.length;i<r;i++)if(e.currentTime>=t.start(i)&&e.currentTime<=t.end(i)){n=t.end(i);for(var o=i+1;o<t.length;o++)if(t.start(o)-t.end(o-1)>=2){n=t.end(o-1);break}break}this.cachedBar.style.width=n/e.duration*100+"%"}}},{key:"destroy",value:function(){var e=this;["touchstart","mousedown"].forEach(function(t){e.root.removeEventListener(t,e.mouseDown)}),this.root.removeEventListener("mouseenter",this.mouseEnter,!1)}},{key:"render",value:function(){return'\n      <xg-progress class="xgplayer-progress">\n        <xg-outer class="xgplayer-progress-outer">\n          <xg-cache class="xgplayer-progress-cache" style="width:0">\n          </xg-cache>\n          <xg-played class="xgplayer-progress-played" style="width:0">\n            <xg-progress-btn class="xgplayer-progress-btn"></xg-progress-btn>\n            <xg-point class="xgplayer-progress-point xg-tips">00:00</xg-point>\n            <xg-thumbnail class="xgplayer-progress-thumbnail xg-tips"></xg-thumbnail>\n          </xg-played>\n        </xg-outer>\n      </xg-progress>\n    '}}]),t}(Plugin),Events$7=Plugin.Events,POSITIONS$5=Plugin.POSITIONS,Sniffer$2=Plugin.Sniffer,Play=function(e){function t(){return classCallCheck(this,t),possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return inherits(t,e),createClass(t,[{key:"afterCreate",value:function(){var e=this,t=this.player;if(!this.config.disable){this.btnClick=this.btnClick.bind(this);var n="mobile"===Sniffer$2.device?"touchend":"click";this.bind(n,this.btnClick),this.on(Events$7.PAUSE,function(){e.animate(t.paused)}),this.on(Events$7.PLAY,function(){e.animate(t.paused)})}}},{key:"btnClick",value:function(e){var t=this.player;t.paused?t.play():t.pause()}},{key:"registerLangauageTexts",value:function(){return{play:{jp:"play",en:"play",zh:"播放"},pause:{jp:"pause",en:"pause",zh:"暂停"}}}},{key:"registerIcons",value:function(){return{play:PlaySvg,pause:PauseSvg}}},{key:"animate",value:function(e){e?(this.find(".xgplayer-icon").innerHTML=this.icons.play,this.find(".xg-tips").innerHTML=this.text.play):(this.find(".xgplayer-icon").innerHTML=this.icons.pause,this.find(".xg-tips").innerHTML=this.text.pause)}},{key:"destroy",value:function(){this.unbind(["touchend","click"],this.btnClick)}},{key:"render",value:function(){if(!this.config.disable)return'<xg-icon class="xgplayer-play">\n    <div class="xgplayer-icon">\n    '+this.icons.play+'\n    </div>\n    <div class="xg-tips">'+(this.player.paused?this.text.play:this.text.pause)+"</div>\n    </xg-icon>"}}],[{key:"pluginName",get:function(){return"Play"}},{key:"defaultConfig",get:function(){return{position:POSITIONS$5.CONTROLS_LEFT,index:0,disable:!1}}}]),t}(Plugin),FullScreenChangeSvg='<svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 40 40">\n  <defs>\n  <path class="path_full" transform="scale(0.0320625 0.0320625)" d="M598 214h212v212h-84v-128h-128v-84zM726 726v-128h84v212h-212v-84h128zM214 426v-212h212v84h-128v128h-84zM298 598v128h128v84h-212v-212h84z"></path>\n  <path class="path_exitfull" transform="scale(0.0320625 0.0320625)" d="M682 342h128v84h-212v-212h84v128zM598 810v-212h212v84h-128v128h-84zM342 342v-128h84v212h-212v-84h128zM214 682v-84h212v212h-84v-128h-128z"></path>\n  </defs>\n  <path class="path" transform="scale(0.0320625 0.0320625)" d="M598 214h212v212h-84v-128h-128v-84zM726 726v-128h84v212h-212v-84h128zM214 426v-212h212v84h-128v128h-84zM298 598v128h128v84h-212v-212h84z"></path>\n</svg>',Events$8=Plugin.Events,POSITIONS$6=Plugin.POSITIONS,Fullscreen=function(e){function t(){return classCallCheck(this,t),possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return inherits(t,e),createClass(t,[{key:"afterCreate",value:function(){var e=this;this.isFullScreen=this.player.isFullScreen,this.btnClick=this.btnClick.bind(this),this.bind(["click","touchend"],this.btnClick),this.on(Events$8.FULLSCREEN_CHANGE,function(t){e.find(".xg-tips").innerHTML=t?e.text.exitFullscreen:e.text.fullscreen,e.animate(t)})}},{key:"btnClick",value:function(e){var t=this.player,n=this.config,i=!1;if((!0===n.useCssFullscreen||"function"==typeof n.useCssFullscreen&&n.useCssFullscreen())&&(i=!0),i)t.fullscreen?(t.getCssFullscreen(),t.fullscreen=!0,this.emit(Events$8.FULLSCREEN_CHANGE,!0)):(t.exitCssFullscreen(),t.fullscreen=!1,this.emit(Events$8.FULLSCREEN_CHANGE,!1));else{if(n.switchCallback&&"function"==typeof n.switchCallback)return n.switchFullScreen(this.isFullScreen),void(this.isFullScreen=!this.isFullScreen);t.fullscreen?t.exitFullscreen(n.target):t.getFullscreen(n.target)}}},{key:"animate",value:function(e){var t=this.find(".path"),n=this.find(".path_full").getAttribute("d"),i=this.find(".path_exitfull").getAttribute("d");e?t.setAttribute("d",i):t.setAttribute("d",n)}},{key:"registerLangauageTexts",value:function(){return{fullscreen:{jp:"フルスクリーン",en:"Fullscreen",zh:"进入全屏"},exitFullscreen:{jp:"フルスクリーン",en:"Exit fullscreen",zh:"退出全屏"}}}},{key:"registerIcons",value:function(){return{fullscreenChange:'<svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 40 40">\n  <defs>\n  <path class="path_full" transform="scale(0.0320625 0.0320625)" d="M598 214h212v212h-84v-128h-128v-84zM726 726v-128h84v212h-212v-84h128zM214 426v-212h212v84h-128v128h-84zM298 598v128h128v84h-212v-212h84z"></path>\n  <path class="path_exitfull" transform="scale(0.0320625 0.0320625)" d="M682 342h128v84h-212v-212h84v128zM598 810v-212h212v84h-128v128h-84zM342 342v-128h84v212h-212v-84h128zM214 682v-84h212v212h-84v-128h-128z"></path>\n  </defs>\n  <path class="path" transform="scale(0.0320625 0.0320625)" d="M598 214h212v212h-84v-128h-128v-84zM726 726v-128h84v212h-212v-84h128zM214 426v-212h212v84h-128v128h-84zM298 598v128h128v84h-212v-212h84z"></path>\n</svg>'}}},{key:"destroy",value:function(){this.unbind(["click","touchend"],this.btnClick)}},{key:"render",value:function(){return'<xg-icon class="xgplayer-fullscreen">\n    <div class="xgplayer-icon">\n    '+this.icons.fullscreenChange+'\n    </div>\n    <div class="xg-tips">'+(this.player.isFullScreen?this.text.exitFullscreen:this.text.fullscreen)+"</div>\n    </xg-icon>"}}],[{key:"pluginName",get:function(){return"fullscreen"}},{key:"defaultConfig",get:function(){return{position:POSITIONS$6.CONTROLS_RIGTH,index:0,useCssFullscreen:!1,switchCallback:null,target:null}}}]),t}(Plugin),Util$7=Plugin.Util,Events$9=Plugin.Events,POSITIONS$7=Plugin.POSITIONS,Time=function(e){function t(){return classCallCheck(this,t),possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return inherits(t,e),createClass(t,[{key:"afterCreate",value:function(){var e=this;this.config.disable||(this.durationDom=this.find(".time-duration"),this.timeDom=this.find(".time-current"),this.on(Events$9.DURATION_CHANGE,function(){e.onTimeUpdate()}),this.on(Events$9.TIME_UPDATE,function(){e.onTimeUpdate()}))}},{key:"onTimeUpdate",value:function(){var e=this.player;if(!this.config.disable){var t=e.currentTime;this.timeDom.innerHTML=Util$7.format(t),e.duration!==1/0&&(this.durationDom.innerHTML=Util$7.format(e.duration))}}},{key:"afterPlayerInit",value:function(){var e=this.player,t=this.config;if(e.duration===1/0||this.playerConfig.isLive?(Util$7.hide(this.durationDom),Util$7.hide(this.timeDom),Util$7.hide(this.find(".time-separator")),Util$7.show(this.find(".time-live-tag"))):Util$7.hide(this.find(".time-live-tag")),t.hide)return void this.hide();this.show()}},{key:"changeLiveState",value:function(e){e?(Util$7.hide(this.durationDom),Util$7.hide(this.timeDom),Util$7.hide(this.find(".time-separator")),Util$7.show(this.find(".time-live-tag"))):(Util$7.hide(this.find(".time-live-tag")),Util$7.show(this.find(".time-separator")),Util$7.show(this.durationDom),Util$7.show(this.timeDom))}},{key:"updateTime",value:function(e){var t=this.player;!e&&0!==e||e>t.duration||(this.timeDom.innerHTML=Util$7.format(e))}},{key:"render",value:function(){if(!this.config.disable)return'<xg-icon class="xgplayer-time" style="display:none">\n    <span class="time-current">00:00</span>\n    <span class="time-separator">/</span>\n    <span class="time-duration">00:00</span>\n    <span class="time-live-tag">直播</span>\n    </xg-icon>'}}],[{key:"pluginName",get:function(){return"time"}},{key:"defaultConfig",get:function(){return{position:POSITIONS$7.CONTROLS_LEFT,index:2,disable:!1}}}]),t}(Plugin),volumeChange='<svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 28 28">\n  <path transform="scale(0.0220625 0.0220625)" d="M358.4 358.4h-204.8v307.2h204.8l256 256v-819.2l-256 256z"></path>\n  <defs>\n  <path class="path_large" transform="scale(0.0220625 0.0220625)" d="M940.632 837.632l-72.192-72.192c65.114-64.745 105.412-154.386 105.412-253.44s-40.299-188.695-105.396-253.424l-0.016-0.016 72.192-72.192c83.639 83.197 135.401 198.37 135.401 325.632s-51.762 242.434-135.381 325.612l-0.020 0.020zM795.648 693.248l-72.704-72.704c27.756-27.789 44.921-66.162 44.921-108.544s-17.165-80.755-44.922-108.546l0.002 0.002 72.704-72.704c46.713 46.235 75.639 110.363 75.639 181.248s-28.926 135.013-75.617 181.227l-0.021 0.021z"></path>\n  \x3c!--muted--\x3e\n  <path class="path_muted" transform="scale(0.0220625 0.0220625)" d="M920.4 439.808l-108.544-109.056-72.704 72.704 109.568 108.544-109.056 108.544 72.704 72.704 108.032-109.568 108.544 109.056 72.704-72.704-109.568-108.032 109.056-108.544-72.704-72.704-108.032 109.568z"></path>\n  \x3c!--small--\x3e\n  <path class="path_small" transform="scale(0.0220625 0.0220625)" d="M795.648 693.248l-72.704-72.704c27.756-27.789 44.921-66.162 44.921-108.544s-17.165-80.755-44.922-108.546l0.002 0.002 72.704-72.704c46.713 46.235 75.639 110.363 75.639 181.248s-28.926 135.013-75.617 181.227l-0.021 0.021zM795.648 693.248l-72.704-72.704c27.756-27.789 44.921-66.162 44.921-108.544s-17.165-80.755-44.922-108.546l0.002 0.002 72.704-72.704c46.713 46.235 75.639 110.363 75.639 181.248s-28.926 135.013-75.617 181.227l-0.021 0.021z"></path>\n  </defs>\n  <path class="path" transform="scale(0.0220625 0.0220625)" d="M940.632 837.632l-72.192-72.192c65.114-64.745 105.412-154.386 105.412-253.44s-40.299-188.695-105.396-253.424l-0.016-0.016 72.192-72.192c83.639 83.197 135.401 198.37 135.401 325.632s-51.762 242.434-135.381 325.612l-0.020 0.020zM795.648 693.248l-72.704-72.704c27.756-27.789 44.921-66.162 44.921-108.544s-17.165-80.755-44.922-108.546l0.002 0.002 72.704-72.704c46.713 46.235 75.639 110.363 75.639 181.248s-28.926 135.013-75.617 181.227l-0.021 0.021z"></path>\n</svg>',Util$8=Plugin.Util,Events$a=Plugin.Events,POSITIONS$8=Plugin.POSITIONS,Volume=function(e){function t(){return classCallCheck(this,t),possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return inherits(t,e),createClass(t,[{key:"registerIcons",value:function(){return{volumeChange:'<svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 28 28">\n  <path transform="scale(0.0220625 0.0220625)" d="M358.4 358.4h-204.8v307.2h204.8l256 256v-819.2l-256 256z"></path>\n  <defs>\n  <path class="path_large" transform="scale(0.0220625 0.0220625)" d="M940.632 837.632l-72.192-72.192c65.114-64.745 105.412-154.386 105.412-253.44s-40.299-188.695-105.396-253.424l-0.016-0.016 72.192-72.192c83.639 83.197 135.401 198.37 135.401 325.632s-51.762 242.434-135.381 325.612l-0.020 0.020zM795.648 693.248l-72.704-72.704c27.756-27.789 44.921-66.162 44.921-108.544s-17.165-80.755-44.922-108.546l0.002 0.002 72.704-72.704c46.713 46.235 75.639 110.363 75.639 181.248s-28.926 135.013-75.617 181.227l-0.021 0.021z"></path>\n  \x3c!--muted--\x3e\n  <path class="path_muted" transform="scale(0.0220625 0.0220625)" d="M920.4 439.808l-108.544-109.056-72.704 72.704 109.568 108.544-109.056 108.544 72.704 72.704 108.032-109.568 108.544 109.056 72.704-72.704-109.568-108.032 109.056-108.544-72.704-72.704-108.032 109.568z"></path>\n  \x3c!--small--\x3e\n  <path class="path_small" transform="scale(0.0220625 0.0220625)" d="M795.648 693.248l-72.704-72.704c27.756-27.789 44.921-66.162 44.921-108.544s-17.165-80.755-44.922-108.546l0.002 0.002 72.704-72.704c46.713 46.235 75.639 110.363 75.639 181.248s-28.926 135.013-75.617 181.227l-0.021 0.021zM795.648 693.248l-72.704-72.704c27.756-27.789 44.921-66.162 44.921-108.544s-17.165-80.755-44.922-108.546l0.002 0.002 72.704-72.704c46.713 46.235 75.639 110.363 75.639 181.248s-28.926 135.013-75.617 181.227l-0.021 0.021z"></path>\n  </defs>\n  <path class="path" transform="scale(0.0220625 0.0220625)" d="M940.632 837.632l-72.192-72.192c65.114-64.745 105.412-154.386 105.412-253.44s-40.299-188.695-105.396-253.424l-0.016-0.016 72.192-72.192c83.639 83.197 135.401 198.37 135.401 325.632s-51.762 242.434-135.381 325.612l-0.020 0.020zM795.648 693.248l-72.704-72.704c27.756-27.789 44.921-66.162 44.921-108.544s-17.165-80.755-44.922-108.546l0.002 0.002 72.704-72.704c46.713 46.235 75.639 110.363 75.639 181.248s-28.926 135.013-75.617 181.227l-0.021 0.021z"></path>\n</svg>'}}},{key:"afterCreate",value:function(){this.config.disable||(this.bar=this.find(".xgplayer-bar"),this.drag=this.find(".xgplayer-drag"),this.changeMuted=this.changeMuted.bind(this),this.onBarMousedown=this.onBarMousedown.bind(this),this.onMouseenter=this.onMouseenter.bind(this),this.onMouseleave=this.onMouseleave.bind(this),this.bind("mouseenter",this.onMouseenter),this.bind(["blur","mouseleave"],this.onMouseleave),this.bind(".xgplayer-bar","mousedown",this.onBarMousedown),this.bind(".xgplayer-icon",["click","touched"],this.changeMuted),this.on(Events$a.VOLUME_CHANGE,this.onVolumeChange.bind(this)))}},{key:"onBarMousedown",value:function(e){var t=this.player;t.video.muted=!1;var n=this.drag,i=this.find(".xgplayer-slider");i.focus(),Util$8.event(e);var r=this.bar.getBoundingClientRect(),o={x:e.clientX,y:e.clientY},s=n.getBoundingClientRect().height,a=!1,l=function(e){e.preventDefault(),e.stopPropagation(),Util$8.event(e),a=!0;var i=s-e.clientY+o.y,l=i/r.height;n.style.height=i+"px",t.volume=Math.max(Math.min(l,1),0)},u=function e(o){if(o.preventDefault(),o.stopPropagation(),Util$8.event(o),window.removeEventListener("mousemove",l),window.removeEventListener("touchmove",l),window.removeEventListener("mouseup",e),window.removeEventListener("touchend",e),!a){var s=r.height-(o.clientY-r.top),u=s/r.height;n.style.height=s+"px",u<=0&&(t.volume>0?n.volume=t.video.volume:u=n.volume),t.volume=Math.max(Math.min(u,1),0)}i.volume=t.volume,a=!1};return window.addEventListener("mousemove",l),window.addEventListener("touchmove",l),window.addEventListener("mouseup",u),window.addEventListener("touchend",u),!1}},{key:"onMouseenter",value:function(e){e.preventDefault(),e.stopPropagation(),Util$8.addClass(this.root,"slide-show")}},{key:"onMouseleave",value:function(e){console.log("mouseleave"),e.preventDefault(),e.stopPropagation(),Util$8.removeClass(this.root,"slide-show")}},{key:"changeMuted",value:function(){var e=this.player;e.muted=!e.muted}},{key:"onVolumeChange",value:function(){var e=this.player,t=e.muted,n=e.volume;this.find(".xgplayer-drag").style.height=t||0===n?"0px":100*n+"%",this.animate(t,n)}},{key:"animate",value:function(e,t){var n=this.find(".path"),i=this.find(".path_large").getAttribute("d"),r=this.find(".path_small").getAttribute("d"),o=this.find(".path_muted").getAttribute("d");e||0===t?n.setAttribute("d",o):t>=.5?n.setAttribute("d",i):n.setAttribute("d",r)}},{key:"render",value:function(){if(!this.config.disable){var e=this.player.volume;return'\n    <xg-icon class="xgplayer-volume">\n      <div class="xgplayer-icon">\n      '+this.icons.volumeChange+'\n      </div>\n      <xg-slider class="xgplayer-slider">\n        <xg-bar class="xgplayer-bar">\n          <xg-drag class="xgplayer-drag" style="height: '+100*e+'%"></xg-drag>\n        </xg-bar>\n      </xg-slider>\n    </xg-icon>'}}}],[{key:"pluginName",get:function(){return"Volume"}},{key:"defaultConfig",get:function(){return{position:POSITIONS$8.CONTROLS_RIGTH,index:1,disable:!1}}}]),t}(Plugin),RotateSvg='<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 40 40" fill="none">\n  <g clip-path="url(#clip0)">\n    <path transform="scale(1.5 1.5)" d="M11.6665 9.16663H4.1665C2.78579 9.16663 1.6665 10.2859 1.6665 11.6666V15.8333C1.6665 17.214 2.78579 18.3333 4.1665 18.3333H11.6665C13.0472 18.3333 14.1665 17.214 14.1665 15.8333V11.6666C14.1665 10.2859 13.0472 9.16663 11.6665 9.16663Z" fill="white"/>\n    <path transform="scale(1.5 1.5)" fill-rule="evenodd" clip-rule="evenodd" d="M3.88148 4.06298C3.75371 4.21005 3.67667 4.40231 3.67749 4.61242C3.67847 4.87253 3.79852 5.10435 3.98581 5.25646L6.99111 8.05895C7.32771 8.37283 7.85502 8.35443 8.16891 8.01782C8.48279 7.68122 8.46437 7.15391 8.12778 6.84003L6.62061 5.43457L9.8198 5.4224C9.82848 5.42239 9.8372 5.42221 9.84591 5.4219C10.9714 5.38233 12.0885 5.6285 13.0931 6.13744C14.0976 6.64635 14.957 7.40148 15.5908 8.33234C16.2246 9.2632 16.6122 10.3394 16.7177 11.4606C16.823 12.5819 16.6427 13.7115 16.1934 14.7442C16.0098 15.1661 16.203 15.6571 16.6251 15.8408C17.0471 16.0243 17.5381 15.8311 17.7216 15.4091C18.2833 14.1183 18.5087 12.7063 18.3771 11.3047C18.2453 9.90318 17.7607 8.55792 16.9684 7.39433C16.1761 6.23073 15.1021 5.28683 13.8463 4.65065C12.5946 4.01651 11.203 3.70872 9.80072 3.75583L6.43415 3.76862L7.96326 2.12885C8.27715 1.79225 8.25872 1.26494 7.92213 0.951061C7.58553 0.63718 7.05822 0.655585 6.74433 0.99219L3.90268 4.0395C3.89545 4.04724 3.88841 4.05509 3.88154 4.06303L3.88148 4.06298Z" fill="white"/>\n  </g>\n  <defs>\n    <clipPath id="clip0">\n      <rect width="40" height="40" fill="white"/>\n    </clipPath>\n  </defs>\n</svg>\n',POSITIONS$9=Plugin.POSITIONS,Rotate=function(e){function t(e){classCallCheck(this,t);var n=possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.rotateDeg=n.config.rotateDeg||0,n}return inherits(t,e),createClass(t,null,[{key:"pluginName",get:function(){return"rotate"}},{key:"defaultConfig",get:function(){return{position:POSITIONS$9.CONTROLS_RIGTH,index:6,innerRotate:!1,clockwise:!1,rotateDeg:0,disable:!1}}}]),createClass(t,[{key:"beforeCreate",value:function(e){"boolean"==typeof e.player.config.rotate&&(e.config.disable=!e.player.config.rotate)}},{key:"afterCreate",value:function(){this.config.disable||(this.onBtnClick=this.onBtnClick.bind(this),this.bind(".xgplayer-icon",["click","touchend"],this.onBtnClick))}},{key:"destroy",value:function(){this.unbind(".xgplayer-icon",["click","touchend"],this.onBtnClick)}},{key:"onBtnClick",value:function(e){this.rotate(this.config.clockwise,this.config.innerRotate,1)}},{key:"updateRotateDeg",value:function(){var e=this.player;this.rotateDeg||(this.rotateDeg=0);var t=e.root.offsetWidth,n=e.root.offsetHeight,i=e.video.videoWidth,r=e.video.videoHeight;this.config.innerRotate;var o=void 0;if(.25===this.rotateDeg||.75===this.rotateDeg){if(this.config.innerRotate)if(i/r>n/t){o=n/(r/i>n/t?n*i/r:t)}else{o=t/(r/i>n/t?n:t*r/i)}else o=t>=n?t/n:n/t;o=parseFloat(o.toFixed(5))}else o=1;this.config.innerRotate?(e.video.style.transformOrigin="center center",e.video.style.transform="rotate("+this.rotateDeg+"turn) scale("+o+")",e.video.style.webKitTransform="rotate("+this.rotateDeg+"turn) scale("+o+")"):(e.root.style.transformOrigin="center center",e.root.style.transform="rotate("+this.rotateDeg+"turn) scale(1)",e.root.style.webKitTransform="rotate("+this.rotateDeg+"turn) scale(1)")}},{key:"rotate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=this.player;this.rotateDeg||(this.rotateDeg=0);var i=e?1:-1;this.rotateDeg=(this.rotateDeg+1+.25*i*t)%1,this.updateRotateDeg(),n.emit("rotate",360*this.rotateDeg)}},{key:"registerIcons",value:function(){return{rotate:'<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 40 40" fill="none">\n  <g clip-path="url(#clip0)">\n    <path transform="scale(1.5 1.5)" d="M11.6665 9.16663H4.1665C2.78579 9.16663 1.6665 10.2859 1.6665 11.6666V15.8333C1.6665 17.214 2.78579 18.3333 4.1665 18.3333H11.6665C13.0472 18.3333 14.1665 17.214 14.1665 15.8333V11.6666C14.1665 10.2859 13.0472 9.16663 11.6665 9.16663Z" fill="white"/>\n    <path transform="scale(1.5 1.5)" fill-rule="evenodd" clip-rule="evenodd" d="M3.88148 4.06298C3.75371 4.21005 3.67667 4.40231 3.67749 4.61242C3.67847 4.87253 3.79852 5.10435 3.98581 5.25646L6.99111 8.05895C7.32771 8.37283 7.85502 8.35443 8.16891 8.01782C8.48279 7.68122 8.46437 7.15391 8.12778 6.84003L6.62061 5.43457L9.8198 5.4224C9.82848 5.42239 9.8372 5.42221 9.84591 5.4219C10.9714 5.38233 12.0885 5.6285 13.0931 6.13744C14.0976 6.64635 14.957 7.40148 15.5908 8.33234C16.2246 9.2632 16.6122 10.3394 16.7177 11.4606C16.823 12.5819 16.6427 13.7115 16.1934 14.7442C16.0098 15.1661 16.203 15.6571 16.6251 15.8408C17.0471 16.0243 17.5381 15.8311 17.7216 15.4091C18.2833 14.1183 18.5087 12.7063 18.3771 11.3047C18.2453 9.90318 17.7607 8.55792 16.9684 7.39433C16.1761 6.23073 15.1021 5.28683 13.8463 4.65065C12.5946 4.01651 11.203 3.70872 9.80072 3.75583L6.43415 3.76862L7.96326 2.12885C8.27715 1.79225 8.25872 1.26494 7.92213 0.951061C7.58553 0.63718 7.05822 0.655585 6.74433 0.99219L3.90268 4.0395C3.89545 4.04724 3.88841 4.05509 3.88154 4.06303L3.88148 4.06298Z" fill="white"/>\n  </g>\n  <defs>\n    <clipPath id="clip0">\n      <rect width="40" height="40" fill="white"/>\n    </clipPath>\n  </defs>\n</svg>\n'}}},{key:"registerLangauageTexts",value:function(){return{rotate:{jp:"日文text",en:"rotate",zh:"旋转屏幕"}}}},{key:"render",value:function(){if(!this.config.disable)return'\n    <xg-icon class="xgplayer-rotate">\n      <div class="xgplayer-icon">\n        '+this.icons.rotate+'\n      </div>\n      <div class="xg-tips">\n      '+this.text.rotate+"\n      </div>\n    </xg-icon>"}}]),t}(Plugin),Events$b=Plugin.Events,POSITIONS$a=Plugin.POSITIONS,PIP=function(e){function t(){return classCallCheck(this,t),possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return inherits(t,e),createClass(t,[{key:"beforeCreate",value:function(e){"boolean"==typeof e.player.config.pip&&(e.config.showIcon=e.player.config.pip)}},{key:"afterCreate",value:function(){var e=this;this.once(Events$b.COMPLETE,function(){e.config.showIcon&&e.isPIPAvailable()&&(e.show(),e.switchPIP=e.switchPIP.bind(e),e.bind("click",e.switchPIP)),e.initPipEvents()})}},{key:"initPipEvents",value:function(){var e=this.player;this.leavePIPCallback=function(){var t=e.paused;setTimeout(function(){!t&&e.play()},0),e.emit("pip_change",!1)},this.enterPIPCallback=function(){e.emit("pip_change",!0)},e.video&&(e.video.addEventListener("enterpictureinpicture",this.enterPIPCallback),e.video.addEventListener("leavepictureinpicture",this.leavePIPCallback))}},{key:"switchPIP",value:function(){var e=this.player,t=this.playerConfig;if(this.isPIPAvailable())return!1;try{return document.pictureInPictureElement&&document.pictureInPictureElement===e.video?document.exitPictureInPicture():(t.poster&&(e.video.poster=t.poster),e.video&&e.video.requestPictureInPicture()),!0}catch(e){return console.error("switchPIP",e),!1}}},{key:"isPIPAvailable",value:function(){var e=this.player;return document.pictureInPictureEnabled||!(e.video&&e.video.disablePictureInPicture)}},{key:"registerLangauageTexts",value:function(){return{pipicon:{jp:"picture-in-picture",en:"picture-in-picture",zh:"画中画"}}}},{key:"destroy",value:function(){var e=this.player;e.video.removeEventListener("enterpictureinpicture",this.enterPIPCallback),e.video.removeEventListener("leavepictureinpicture",this.leavePIPCallback),this.unbind("click",this.switchPIP)}},{key:"render",value:function(){return'<xg-icon class="xgplayer-pip">\n      <div class="xgplayer-icon btn-definition">\n      '+(this.icons.pipicon?this.icons.pipicon:"<span>"+this.text.pipicon+"</span>")+"\n      </div>\n      "+(this.icons.pipicon?'<div class="xg-tips">'+this.text.pipicon+"</div>":"")+"\n    </xg-icon>"}},{key:"isPip",get:function(){var e=this.player;return document.pictureInPictureElement===e.video}}],[{key:"pluginName",get:function(){return"Pip"}},{key:"defaultConfig",get:function(){return{position:POSITIONS$a.CONTROLS_RIGTH,index:6,showIcon:!1}}}]),t}(Plugin),download=createCommonjsModule(function(e,t){!function(t,n){e.exports=function(){return function e(t,n,i){function r(e){var t=e.split(/[:;,]/),n=t[1],i=("base64"==t[2]?atob:decodeURIComponent)(t.pop()),r=i.length,o=0,s=new Uint8Array(r);for(o;o<r;++o)s[o]=i.charCodeAt(o);return new g([s],{type:n})}function o(e,t){if("download"in d)return d.href=e,d.setAttribute("download",y),d.className="download-js-link",d.innerHTML="downloading...",d.style.display="none",document.body.appendChild(d),setTimeout(function(){d.click(),document.body.removeChild(d),!0===t&&setTimeout(function(){l.URL.revokeObjectURL(d.href)},250)},66),!0;if(/(Version)\/(\d+)\.(\d+)(?:\.(\d+))?.*Safari\//.test(navigator.userAgent))return/^data:/.test(e)&&(e="data:"+e.replace(/^data:([\w\/\-\+]+)/,u)),window.open(e)||confirm("Displaying New Document\n\nUse Save As... to download, then click back to return to this page.")&&(location.href=e),!0;var n=document.createElement("iframe");document.body.appendChild(n),!t&&/^data:/.test(e)&&(e="data:"+e.replace(/^data:([\w\/\-\+]+)/,u)),n.src=e,setTimeout(function(){document.body.removeChild(n)},333)}var s,a,l=window,u="application/octet-stream",c=i||u,h=t,f=!n&&!i&&h,d=document.createElement("a"),p=function(e){return String(e)},g=l.Blob||l.MozBlob||l.WebKitBlob||p,y=n||"download";if(g=g.call?g.bind(l):Blob,"true"===String(this)&&(c=(h=[h,c])[0],h=h[1]),f&&f.length<2048&&(y=f.split("/").pop().split("?")[0],d.href=f,-1!==d.href.indexOf(f))){var v=new XMLHttpRequest;return v.open("GET",f,!0),v.responseType="blob",v.onload=function(t){e(t.target.response,y,u)},setTimeout(function(){v.send()},0),v}if(/^data:([\w+-]+\/[\w+.-]+)?[,;]/.test(h)){if(!(h.length>2096103.424&&g!==p))return navigator.msSaveBlob?navigator.msSaveBlob(r(h),y):o(h);c=(h=r(h)).type||u}else if(/([\x80-\xff])/.test(h)){var m=0,b=new Uint8Array(h.length),x=b.length;for(m;m<x;++m)b[m]=h.charCodeAt(m);h=new g([b],{type:c})}if(s=h instanceof g?h:new g([h],{type:c}),navigator.msSaveBlob)return navigator.msSaveBlob(s,y);if(l.URL)o(l.URL.createObjectURL(s),!0);else{if("string"==typeof s||s.constructor===p)try{return o("data:"+c+";base64,"+l.btoa(s))}catch(e){return o("data:"+c+","+encodeURIComponent(s))}(a=new FileReader).onload=function(e){o(this.result)},a.readAsDataURL(s)}return!0}}()}()}),DownloadSvg='<svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" viewBox="0 0 24 24">\n  <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n    <g transform="translate(-488.000000, -340.000000)" fill="#FFFFFF">\n      <g id="Group-2">\n        <g id="volme_big-copy" transform="translate(488.000000, 340.000000)">\n          <rect id="Rectangle-18" x="11" y="4" width="2" height="12" rx="1"></rect>\n          <rect id="Rectangle-2" x="3" y="18" width="18" height="2" rx="1"></rect>\n          <rect id="Rectangle-2" transform="translate(4.000000, 17.500000) rotate(90.000000) translate(-4.000000, -17.500000) " x="1.5" y="16.5" width="5" height="2" rx="1"></rect><rect id="Rectangle-2-Copy-3" transform="translate(20.000000, 17.500000) rotate(90.000000) translate(-20.000000, -17.500000) " x="17.5" y="16.5" width="5" height="2" rx="1"></rect>\n          <path d="M9.48791171,8.26502656 L9.48791171,14.2650266 C9.48791171,14.8173113 9.04019646,15.2650266 8.48791171,15.2650266 C7.93562696,15.2650266 7.48791171,14.8173113 7.48791171,14.2650266 L7.48791171,7.26502656 C7.48791171,6.71274181 7.93562696,6.26502656 8.48791171,6.26502656 L15.4879117,6.26502656 C16.0401965,6.26502656 16.4879117,6.71274181 16.4879117,7.26502656 C16.4879117,7.81731131 16.0401965,8.26502656 15.4879117,8.26502656 L9.48791171,8.26502656 Z" id="Combined-Shape" transform="translate(11.987912, 10.765027) scale(1, -1) rotate(45.000000) translate(-11.987912, -10.765027) "></path>\n        </g>\n      </g>\n    </g>\n  </g>\n</svg>\n',POSITIONS$b=Plugin.POSITIONS,Download=function(e){function t(e){classCallCheck(this,t);var n=possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.timer=null,n.isLock=!1,n}return inherits(t,e),createClass(t,null,[{key:"pluginName",get:function(){return"DownloadIcon"}},{key:"defaultConfig",get:function(){return{position:POSITIONS$b.CONTROLS_RIGTH,index:3,disable:!1}}}]),createClass(t,[{key:"beforeCreate",value:function(e){"boolean"==typeof e.player.config.download&&(e.config.disable=!e.player.config.download)}},{key:"afterCreate",value:function(){this.config.download&&(this.download=this.download.bind(this),this.bind(["click","touchend"],this.download))}},{key:"registerLangauageTexts",value:function(){return{download:{jp:"フルスクリーン",en:"download",zh:"下载"}}}},{key:"registerIcons",value:function(){return{download:'<svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" viewBox="0 0 24 24">\n  <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n    <g transform="translate(-488.000000, -340.000000)" fill="#FFFFFF">\n      <g id="Group-2">\n        <g id="volme_big-copy" transform="translate(488.000000, 340.000000)">\n          <rect id="Rectangle-18" x="11" y="4" width="2" height="12" rx="1"></rect>\n          <rect id="Rectangle-2" x="3" y="18" width="18" height="2" rx="1"></rect>\n          <rect id="Rectangle-2" transform="translate(4.000000, 17.500000) rotate(90.000000) translate(-4.000000, -17.500000) " x="1.5" y="16.5" width="5" height="2" rx="1"></rect><rect id="Rectangle-2-Copy-3" transform="translate(20.000000, 17.500000) rotate(90.000000) translate(-20.000000, -17.500000) " x="17.5" y="16.5" width="5" height="2" rx="1"></rect>\n          <path d="M9.48791171,8.26502656 L9.48791171,14.2650266 C9.48791171,14.8173113 9.04019646,15.2650266 8.48791171,15.2650266 C7.93562696,15.2650266 7.48791171,14.8173113 7.48791171,14.2650266 L7.48791171,7.26502656 C7.48791171,6.71274181 7.93562696,6.26502656 8.48791171,6.26502656 L15.4879117,6.26502656 C16.0401965,6.26502656 16.4879117,6.71274181 16.4879117,7.26502656 C16.4879117,7.81731131 16.0401965,8.26502656 15.4879117,8.26502656 L9.48791171,8.26502656 Z" id="Combined-Shape" transform="translate(11.987912, 10.765027) scale(1, -1) rotate(45.000000) translate(-11.987912, -10.765027) "></path>\n        </g>\n      </g>\n    </g>\n  </g>\n</svg>\n'}}},{key:"download",value:function(){var e=this;if(this.isLock){var t=this.getAbsoluteURL(this.player.src);download(t),this.isLock=!0,this.timer=window.setTimeout(function(){e.isLock=!1,window.clearTimeout(e.timer),e.timer=null},300)}}},{key:"getAbsoluteURL",value:function(e){if(!e.match(/^https?:\/\//)){var t=document.createElement("div");t.innerHTML='<a href="'+e+'">x</a>',e=t.firstChild.href}return e}},{key:"destroy",value:function(){this.unbind(["click","touchend"],this.download),window.clearTimeout(this.timer),this.timer=null}},{key:"render",value:function(){if(this.config.download)return'<xg-icon class="xgplayer-download">\n      <div class="xgplayer-icon">\n      '+this.icons.download+'\n      </div>\n      <div class="xg-tips">'+this.text.download+"</div>\n    </xg-icon>"}}]),t}(Plugin),POSITIONS$c=Plugin.POSITIONS,ScreenShot=function(e){function t(){return classCallCheck(this,t),possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return inherits(t,e),createClass(t,[{key:"beforeCreate",value:function(e){"boolean"==typeof e.player.config.screenShot&&(e.config.disable=!e.player.config.screenShot)}},{key:"onPluginsReady",value:function(){this.show(),this.onClickBtn=this.onClickBtn.bind(this),this.bind(["click","touchend"],this.onClickBtn)}},{key:"saveScreenShot",value:function(e,t){var n=document.createElement("a");n.href=e,n.download=t;var i=document.createEvent("MouseEvents");i.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),n.dispatchEvent(i)}},{key:"createCanvans",value:function(){var e=document.createElement("canvas");this.canvasCtx=e.getContext("2d"),this.canvas=e,e.width=this.config.width||600,e.height=this.config.height||337.5}},{key:"onClickBtn",value:function(e){e.preventDefault(),e.stopPropagation(),this.canvas||this.createCanvans();var t=new window.Image;this.canvasCtx.drawImage(this.player.video,0,0,this.canvas.width,this.canvas.height);var n=this.config.quality,i=this.config.type,r=this.config.format;t.setAttribute("crossOrigin","anonymous"),t.src=this.canvas.toDataURL(i,n).replace(i,"image/octet-stream");var o=t.src.replace(/^data:image\/[^;]+/,"data:application/octet-stream");this.emit("screenShot",o),this.saveScreenShot(o,"截图"+r),t.onload=function(){console.log("img.onload"),t=null}}},{key:"registerLangauageTexts",value:function(){return{screenshot:{jp:"play",en:"play",zh:"截图"}}}},{key:"registerIcons",value:function(){return{screenshotIcon:null}}},{key:"destroy",value:function(){this.bind(["click","touchend"],this.onClickBtn)}},{key:"render",value:function(){if(!this.config.disable)return'\n      <xg-icon class="xgplayer-shot">\n      <div class="'+(this.icons.screenshotIcon?"xgplayer-icon":"xgplayer-icon btn-definition")+'">\n      '+(this.icons.screenshotIcon?""+this.icons.screenshotIcon:"<span>"+this.text.screenshot+"</span>")+" \n      </div>\n    </xg-icon>"}}],[{key:"pluginName",get:function(){return"screenShot"}},{key:"defaultConfig",get:function(){return{position:POSITIONS$c.CONTROLS_RIGTH,index:5,quality:.92,type:"image/png",format:".png",width:600,height:337,disable:!1}}}]),t}(Plugin),Events$c=Plugin.Events,Util$9=Plugin.Util,Sniffer$3=Plugin.Sniffer,POSITIONS$d=Plugin.POSITIONS,DefinitionIcon=function(e){function t(e){classCallCheck(this,t);var n=possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.curTime=0,n.isPaused=!0,n}return inherits(t,e),createClass(t,null,[{key:"pluginName",get:function(){return"Definition"}},{key:"defaultConfig",get:function(){return{position:POSITIONS$d.CONTROLS_RIGTH,index:3,list:null,disable:!1}}}]),createClass(t,[{key:"afterCreate",value:function(){var e=this;this.once(Events$c.CANPLAY,function(){e.config.list&&e.config.list.length>0&&(e.renderItemList(),e.show())}),this.once("resourceReady",function(t){e.changeDefinitionList(t)}),"mobile"===Sniffer$3.device?this.activeEvent="click":this.activeEvent="mouseenter",this.onToggle=this.onToggle.bind(this),this.onItemClick=this.onItemClick.bind(this),this.bind(this.activeEvent,this.onToggle),this.bind("mouseleave",this.onToggle),this.bind(".icon-list li",["touched","click"],this.onItemClick)}},{key:"renderItemList",value:function(){var e=this.player,t=this.config.list,n=e.config.url,i=document.createElement("a");e.switchURL?this.switchUrl():n=e.currentSrc||e.src,e.hls&&(i.href=e.hls.url,n=i.href);var r=t.map(function(t){return i.href=t.url,'<li class="'+(e.dash?t.selected?"selected":"":i.href===n?"selected":"")+'" cname="'+t.name+'" url="'+t.url+'">'+t.name+"</li>"}),o=t.filter(function(t){return i.href=t.url,e.dash?!0===t.selected:i.href===n});this.find(".icon-text").innerHTML=(o[0]||{name:"清晰度"}).name,this.find(".icon-list").innerHTML=r.join("")}},{key:"onCanplayChangeDefinition",value:function(){var e=this.player;if(e.currentTime=this.curTime,!this.isPaused){var t=e.play();void 0!==t&&t&&t.catch(function(e){})}e.emit("afterdefinitionChange")}},{key:"onToggle",value:function(e){e.preventDefault(),e.stopPropagation(),Util$9.hasClass(this.root,"list-show")?Util$9.removeClass(this.root,"list-show"):Util$9.addClass(this.root,"list-show")}},{key:"switchUrl",value:function(e){var t=this.player,n=document.createElement("a");["mp4","hls","__flv__","dash"].every(function(e){return!t[e]||(t[e].url&&(n.href=t[e].url),"__flv__"===e&&(t[e]._options?n.href=t[e]._options.url:n.href=t[e]._mediaDataSource.url),!1)}),e&&n.href!==e.href&&!t.ended&&t.switchURL(e.href)}},{key:"changeDefinitionList",value:function(e){this.config.list=e,this.renderItemList(),this.show()}},{key:"onItemClick",value:function(e){var t=this,n=this.player,i=this.config.list;if(e.preventDefault(),e.stopPropagation(),e.target&&"selected"===e.target.className)return!1;var r=document.createElement("a");n.emit("beforeDefinitionChange",r.href),n.dash&&i.forEach(function(t){t.selected=!1,t.name===e.target.innerHTML&&(t.selected=!0)});var o=this.find(".selected");Util$9.addClass(e.target,"selected"),o&&Util$9.removeClass(o,"selected");var s=o?o.getAttribute("cname"):"",a=e.target.getAttribute("cname");r.href=e.target.getAttribute("url"),this.curTime=n.currentTime,this.isPaused=n.paused,n.switchURL?this.switchUrl(r):r.href!==n.currentSrc&&(n.ended||(n.src=r.href,this.once("canplay",function(){t.onCanplayChangeDefinition()}))),this.find(".icon-text").innerHTML=a,n.emit("definitionChange",{from:s,to:a}),"mobile"===Sniffer$3.device&&Util$9.removeClass(this.root,"list-show")}},{key:"render",value:function(){return'<xg-icon class="xgplayer-playbackrate" style="display: none;">\n    <div class="xgplayer-icon btn-definition"><span class="icon-text">清晰度</span></div>\n    <ul class="icon-list">\n    </ul>\n   </xg-icon>'}}]),t}(Plugin),Events$d=Plugin.Events,Util$a=Plugin.Util,Sniffer$4=Plugin.Sniffer,POSITIONS$e=Plugin.POSITIONS,PlaybackRate=function(e){function t(e){classCallCheck(this,t);var n=possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.curRate=1,n}return inherits(t,e),createClass(t,null,[{key:"pluginName",get:function(){return"PlaybackRate"}},{key:"defaultConfig",get:function(){return{position:POSITIONS$e.CONTROLS_RIGTH,index:4,list:[.5,.75,{rate:1,iconText:"倍速"},1.5,2]}}}]),createClass(t,[{key:"afterCreate",value:function(){var e=this,t=this.playerConfig,n=this.config;Array.isArray(t.playbackRate)&&(n.list=t.playbackRate),this.once(Events$d.CANPLAY,function(){e.show()}),"mobile"===Sniffer$4.device?this.activeEvent="click":this.activeEvent="mouseenter",this.renderItemList(),this.onMouseenter=this.onMouseenter.bind(this),this.onItemClick=this.onItemClick.bind(this),this.bind(this.activeEvent,this.onMouseenter),this.bind("mouseleave",this.onMouseenter),this.bind(".icon-list li",["touched","click"],this.onItemClick)}},{key:"show",value:function(){this.config.list&&0!==this.config.list.length&&get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"show",this).call(this)}},{key:"onMouseenter",value:function(e){e.preventDefault(),e.stopPropagation(),Util$a.hasClass(this.root,"list-show")?Util$a.removeClass(this.root,"list-show"):Util$a.addClass(this.root,"list-show")}},{key:"onItemClick",value:function(e){var t=e.target,n=t.getAttribute("cname");if(Number(n)===this.curRate)return!1;Util$a.removeClass(this.find(".selected"),"selected"),Util$a.addClass(t,"selected"),this.curRate=Number(n),this.player.playbackRate=Number(n),this.find(".icon-text").innerHTML=t.getAttribute("ctext")}},{key:"destroy",value:function(){this.unbind(this.activeEvent,this.onMouseenter),this.unbind("mouseleave",this.onMouseenter),this.unbind(".icon-list li",["touched","click"],this.onItemClick)}},{key:"renderItemList",value:function(){var e=this.player.playbackRate||1;this.curRate=e;var t="",n=this.config.list.map(function(n){var i="object"===(void 0===n?"undefined":_typeof(n))?n:{rate:n};return!i.text&&(i.text=i.rate+"x"),i.rate===e&&(i.isCurrent=!0,t=n.iconText||i.text),'<li cname="'+i.rate+'" ctext="'+(n.iconText||i.text)+'" class="'+(i.isCurrent?"selected":"")+'">'+i.text+"</li>"});this.find(".icon-list").innerHTML=n.join(""),this.find(".icon-text").innerHTML=t,this.show()}},{key:"render",value:function(){return'<xg-icon class="xgplayer-playbackrate">\n    <div class="xgplayer-icon btn-definition">\n    <span class="icon-text"></span>\n    </div>\n    <ul class="icon-list">\n    </ul>\n   </xg-icon>'}}]),t}(Plugin),CssFullscreenChange='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" transform="scale(1.3)">\n  <defs>\n  <path class=\'path_exitfull\' d="M9,10V9a.9.9,0,0,1,1-1,.9.9,0,0,1,1,1v2a.9.9,0,0,1-1,1H8a.9.9,0,0,1-1-1,.9.9,0,0,1,1-1Zm6,4v1a1,1,0,0,1-2,0V13a.9.9,0,0,1,1-1h2a1,1,0,0,1,0,2Zm3-7H6V17H18Zm2,0V17a2,2,0,0,1-2,2H6a2,2,0,0,1-2-2V7A2,2,0,0,1,6,5H18A2,2,0,0,1,20,7Z"></path>\n  <path class=\'path_full\' d="M9,10v1a.9.9,0,0,1-1,1,.9.9,0,0,1-1-1V9A.9.9,0,0,1,8,8h2a.9.9,0,0,1,1,1,.9.9,0,0,1-1,1Zm6,4V13a1,1,0,0,1,2,0v2a.9.9,0,0,1-1,1H14a1,1,0,0,1,0-2Zm3-7H6V17H18Zm2,0V17a2,2,0,0,1-2,2H6a2,2,0,0,1-2-2V7A2,2,0,0,1,6,5H18A2,2,0,0,1,20,7Z"></path>\n </defs>\n  <path class="path" d="M9,10v1a.9.9,0,0,1-1,1,.9.9,0,0,1-1-1V9A.9.9,0,0,1,8,8h2a.9.9,0,0,1,1,1,.9.9,0,0,1-1,1Zm6,4V13a1,1,0,0,1,2,0v2a.9.9,0,0,1-1,1H14a1,1,0,0,1,0-2Zm3-7H6V17H18Zm2,0V17a2,2,0,0,1-2,2H6a2,2,0,0,1-2-2V7A2,2,0,0,1,6,5H18A2,2,0,0,1,20,7Z"></path>\n</svg>\n',Events$e=Plugin.Events,POSITIONS$f=Plugin.POSITIONS,CssFullScreen=function(e){function t(){return classCallCheck(this,t),possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return inherits(t,e),createClass(t,[{key:"beforeCreate",value:function(e){"boolean"==typeof e.player.config.cssFullscreen&&(e.config.disable=!e.player.config.cssFullscreen)}},{key:"afterCreate",value:function(){var e=this;this.on(Events$e.CSS_FULLSCREEN_CHANGE,function(t){e.animate(t)}),this.on(Events$e.FULLSCREEN_CHANGE,function(t){!t&&e.animate(t)})}},{key:"afterPlayerInit",value:function(){this.btnClick=this.btnClick.bind(this),this.bind(["click","touchend"],this.btnClick)}},{key:"btnClick",value:function(e){e.preventDefault(),e.stopPropagation(),this.player.isCssfullScreen?this.player.exitCssFullscreen():this.player.getCssFullscreen()}},{key:"animate",value:function(e){if(this.root){var t=this.find(".path"),n=this.find(".path_full").getAttribute("d"),i=this.find(".path_exitfull").getAttribute("d");e?t.setAttribute("d",i):t.setAttribute("d",n)}}},{key:"switchTips",value:function(){this.find(".xg-tips").innerHTML=this.isCssfullScreen?this.text.exitCssFullscreen:this.text.cssFullscreen}},{key:"registerIcons",value:function(){return{cssFullscreen:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" transform="scale(1.3)">\n  <defs>\n  <path class=\'path_exitfull\' d="M9,10V9a.9.9,0,0,1,1-1,.9.9,0,0,1,1,1v2a.9.9,0,0,1-1,1H8a.9.9,0,0,1-1-1,.9.9,0,0,1,1-1Zm6,4v1a1,1,0,0,1-2,0V13a.9.9,0,0,1,1-1h2a1,1,0,0,1,0,2Zm3-7H6V17H18Zm2,0V17a2,2,0,0,1-2,2H6a2,2,0,0,1-2-2V7A2,2,0,0,1,6,5H18A2,2,0,0,1,20,7Z"></path>\n  <path class=\'path_full\' d="M9,10v1a.9.9,0,0,1-1,1,.9.9,0,0,1-1-1V9A.9.9,0,0,1,8,8h2a.9.9,0,0,1,1,1,.9.9,0,0,1-1,1Zm6,4V13a1,1,0,0,1,2,0v2a.9.9,0,0,1-1,1H14a1,1,0,0,1,0-2Zm3-7H6V17H18Zm2,0V17a2,2,0,0,1-2,2H6a2,2,0,0,1-2-2V7A2,2,0,0,1,6,5H18A2,2,0,0,1,20,7Z"></path>\n </defs>\n  <path class="path" d="M9,10v1a.9.9,0,0,1-1,1,.9.9,0,0,1-1-1V9A.9.9,0,0,1,8,8h2a.9.9,0,0,1,1,1,.9.9,0,0,1-1,1Zm6,4V13a1,1,0,0,1,2,0v2a.9.9,0,0,1-1,1H14a1,1,0,0,1,0-2Zm3-7H6V17H18Zm2,0V17a2,2,0,0,1-2,2H6a2,2,0,0,1-2-2V7A2,2,0,0,1,6,5H18A2,2,0,0,1,20,7Z"></path>\n</svg>\n'}}},{key:"registerLangauageTexts",value:function(){return{cssFullscreen:{jp:"Cssfullscreen",en:"Cssfullscreen",zh:"进入样式全屏"},exitCssFullscreen:{jp:"Exit cssfullscreen",en:"Exit cssfullscreen",zh:"退出样式全屏"}}}},{key:"destroy",value:function(){this.unbind(["click","touchend"],this.btnClick)}},{key:"render",value:function(){if(this.playerConfig.cssFullscreen)return"<xg-icon class='xgplayer-cssfullscreen'>\n    <div class=\"xgplayer-icon\">\n    "+this.icons.cssFullscreen+'\n    </div>\n    <div class="xg-tips">'+(this.isCssfullScreen?this.text.exitCssFullscreen:this.text.cssFullscreen)+"</div>\n    </xg-icon>"}}],[{key:"pluginName",get:function(){return"cssFullscreen"}},{key:"defaultConfig",get:function(){return{position:POSITIONS$f.CONTROLS_RIGTH,index:1,disable:!1}}}]),t}(Plugin),DefaultPreset=function e(){var t,n;classCallCheck(this,e);var i=[Progress,Play,Fullscreen,Time,Volume,Rotate,PlayNextIcon,DefinitionIcon,PlaybackRate,CssFullScreen,Download,ScreenShot],r=[{plugin:PIP,options:{index:0,position:PIP.POSITIONS.ROOT_RIGHT}}],o=[Replay,Poster,Start,Loading,EnterPlugin,MiniScreen];switch(this.plugins=[].concat(i,o,r),sniffer.device){case"pc":(t=this.plugins).push.apply(t,[Keyboard,PCPlugin]);break;case"mobile":this.plugins.push(MobilePlugin);break;default:(n=this.plugins).push.apply(n,[Keyboard,PCPlugin])}this.ignores=[]};return Player.defaultPreset=DefaultPreset,Player.defaultPlugins=Plugins,Player});
//# sourceMappingURL=index.min.js.map
