!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self,e.Player=t())}(this,function(){"use strict";function createCommonjsModule(e,t){return t={exports:{}},e(t,t.exports),t.exports}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _classCallCheck$1(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck$2(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function match(e,t){if(vendor)return vendor.call(e,t);for(var n=e.parentNode.querySelectorAll(t),i=0;i<n.length;++i)if(n[i]==e)return!0;return!1}function detect(){bind=window.addEventListener?"addEventListener":"attachEvent",unbind=window.removeEventListener?"removeEventListener":"detachEvent",prefix="addEventListener"!==bind?"on":""}function _classCallCheck$3(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _createElement(e,t){var n=document.createElement(e);return n.name=t,n}function registerIconsObj(e,t){Object.keys(e).map(function(n){Object.defineProperty(t.icons,n,{get:function(){var i=t.config.icons||t.playerConfig.icons;return i&&i[n]?i[n]:e[n]}})})}function registerTextObj(e,t){Object.keys(e).map(function(n){Object.defineProperty(t.text,n,{get:function(){var i=t.playerConfig.lang||"zh";return i.indexOf("-")>0&&(i=i.split("-")[0]),e[n][i]}})})}function _classCallCheck$4(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn$1(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits$1(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck$5(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn$2(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits$2(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck$6(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn$3(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits$3(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck$7(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn$4(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits$4(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck$8(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn$5(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits$5(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck$9(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn$6(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits$6(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck$a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn$7(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits$7(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck$b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn$8(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits$8(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck$c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function getDefaultConfig(){return{id:"",el:null,url:"",width:600,height:337.5,fluid:!1,fitVideoSize:"auto",volume:.6,autoplay:!1,autoplayMuted:!1,loop:!1,videoInit:!1,poster:"",defaultPlaybackRate:0,playbackRate:[],execBeforePluginsCall:null,closeVideoClick:!1,closeVideoDblclick:!1,closePlayerBlur:!1,leavePlayerTime:0,closePlayVideoFocus:!1,closeFocusVideoFocus:!1,closeControlsBlur:!1,videoAttrbutes:{},ignores:[],whitelist:[],inactive:3e3,lang:(document.documentElement.getAttribute("lang")||navigator.language||"zh-cn").toLocaleLowerCase(),controls:!0,controlsList:[]}}function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function _classCallCheck$d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn$9(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits$9(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck$e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn$a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits$a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck$f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn$b(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits$b(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck$g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn$c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits$c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck$h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn$d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits$d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck$i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn$e(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits$e(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck$j(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn$f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits$f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck$k(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn$g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits$g(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck$l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn$h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits$h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck$m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn$i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits$i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck$n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn$j(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits$j(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck$o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn$k(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits$k(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck$p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn$l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits$l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck$q(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn$m(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits$m(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck$r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn$n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits$n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var commonjsGlobal="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},_undefined=void 0,is=function(e){return void 0!==e&&null!==e},possibleTypes={object:!0,function:!0,undefined:!0},is$1=function(e){return!!is(e)&&hasOwnProperty.call(possibleTypes,typeof e)},is$2=function(e){if(!is$1(e))return!1;try{return!!e.constructor&&e.constructor.prototype===e}catch(e){return!1}},is$3=function(e){if("function"!=typeof e)return!1;if(!hasOwnProperty.call(e,"length"))return!1;try{if("number"!=typeof e.length)return!1;if("function"!=typeof e.call)return!1;if("function"!=typeof e.apply)return!1}catch(e){return!1}return!is$2(e)},classRe=/^\s*class[\s{\/}]/,functionToString=Function.prototype.toString,is$4=function(e){return!!is$3(e)&&!classRe.test(functionToString.call(e))},isImplemented=function(){var e,t=Object.assign;return"function"==typeof t&&(e={foo:"raz"},t(e,{bar:"dwa"},{trzy:"trzy"}),e.foo+e.bar+e.trzy==="razdwatrzy")},isImplemented$1=function(){try{return Object.keys("primitive"),!0}catch(e){return!1}},noop=function(){},_undefined$1=void 0,isValue=function(e){return void 0!==e&&null!==e},keys=Object.keys,shim=function(e){return keys(isValue(e)?Object(e):e)},keys$1=isImplemented$1()?Object.keys:shim,validValue=function(e){if(!isValue(e))throw new TypeError("Cannot use null or undefined");return e},max=Math.max,shim$1=function(e,t){var n,i,r,o=max(arguments.length,2);for(e=Object(validValue(e)),r=function(i){try{e[i]=t[i]}catch(e){n||(n=e)}},i=1;i<o;++i)t=arguments[i],keys$1(t).forEach(r);if(void 0!==n)throw n;return e},assign=isImplemented()?Object.assign:shim$1,forEach=Array.prototype.forEach,create=Object.create,process=function(e,t){var n;for(n in e)t[n]=e[n]},normalizeOptions=function(e){var t=create(null);return forEach.call(arguments,function(e){isValue(e)&&process(Object(e),t)}),t},str="razdwatrzy",isImplemented$2=function(){return"function"==typeof str.contains&&(!0===str.contains("dwa")&&!1===str.contains("foo"))},indexOf=String.prototype.indexOf,shim$2=function(e){return indexOf.call(this,e,arguments[1])>-1},contains=isImplemented$2()?String.prototype.contains:shim$2,d_1=createCommonjsModule(function(e){(e.exports=function(e,t){var n,i,r,o,s;return arguments.length<2||"string"!=typeof e?(o=t,t=e,e=null):o=arguments[2],is(e)?(n=contains.call(e,"c"),i=contains.call(e,"e"),r=contains.call(e,"w")):(n=r=!0,i=!1),s={value:t,configurable:n,enumerable:i,writable:r},o?assign(normalizeOptions(o),s):s}).gs=function(e,t,n){var i,r,o,s;return"string"!=typeof e?(o=n,n=t,t=e,e=null):o=arguments[3],is(t)?is$4(t)?is(n)?is$4(n)||(o=n,n=void 0):n=void 0:(o=t,t=n=void 0):t=void 0,is(e)?(i=contains.call(e,"c"),r=contains.call(e,"e")):(i=!0,r=!1),s={get:t,set:n,configurable:i,enumerable:r},o?assign(normalizeOptions(o),s):s}}),validCallable=function(e){if("function"!=typeof e)throw new TypeError(e+" is not a function");return e},eventEmitter=createCommonjsModule(function(e,t){var n,i,r,o,s,a,l,u=Function.prototype.apply,c=Function.prototype.call,h=Object.create,f=Object.defineProperty,p=Object.defineProperties,d=Object.prototype.hasOwnProperty,y={configurable:!0,enumerable:!1,writable:!0};s={on:n=function(e,t){var n;return validCallable(t),d.call(this,"__ee__")?n=this.__ee__:(n=y.value=h(null),f(this,"__ee__",y),y.value=null),n[e]?"object"==typeof n[e]?n[e].push(t):n[e]=[n[e],t]:n[e]=t,this},once:i=function(e,t){var i,o;return validCallable(t),o=this,n.call(this,e,i=function(){r.call(o,e,i),u.call(t,this,arguments)}),i.__eeOnceListener__=t,this},off:r=function(e,t){var n,i,r,o;if(validCallable(t),!d.call(this,"__ee__"))return this;if(!(n=this.__ee__)[e])return this;if("object"==typeof(i=n[e]))for(o=0;r=i[o];++o)r!==t&&r.__eeOnceListener__!==t||(2===i.length?n[e]=i[o?0:1]:i.splice(o,1));else i!==t&&i.__eeOnceListener__!==t||delete n[e];return this},emit:o=function(e){var t,n,i,r,o;if(d.call(this,"__ee__")&&(r=this.__ee__[e]))if("object"==typeof r){for(n=arguments.length,o=new Array(n-1),t=1;t<n;++t)o[t-1]=arguments[t];for(r=r.slice(),t=0;i=r[t];++t)u.call(i,this,o)}else switch(arguments.length){case 1:c.call(r,this);break;case 2:c.call(r,this,arguments[1]);break;case 3:c.call(r,this,arguments[1],arguments[2]);break;default:for(n=arguments.length,o=new Array(n-1),t=1;t<n;++t)o[t-1]=arguments[t];u.call(r,this,o)}}},a={on:d_1(n),once:d_1(i),off:d_1(r),emit:d_1(o)},l=p({},a),e.exports=t=function(e){return null==e?h(l):p(Object(e),a)},t.methods=s}),eventEmitter_1=eventEmitter.methods,map={function:!0,object:!0},isObject=function(e){return isValue(e)&&map[typeof e]||!1},validObject=function(e){if(!isObject(e))throw new TypeError(e+" is not an Object");return e},hasOwnProperty$1=Object.prototype.hasOwnProperty,allOff=function(e){var t,n=arguments[1];if(validObject(e),void 0!==n){if(!(t=hasOwnProperty$1.call(e,"__ee__")&&e.__ee__))return;return void(t[n]&&delete t[n])}hasOwnProperty$1.call(e,"__ee__")&&delete e.__ee__},_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},util={};util.createDom=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"div",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",r=document.createElement(e);return r.className=i,r.innerHTML=t,Object.keys(n).forEach(function(t){var i=t,o=n[t];"video"===e||"audio"===e||"mobile-video"===e?o&&r.setAttribute(i,o):r.setAttribute(i,o)}),r},util.hasClass=function(e,t){return!!e&&(e.classList?Array.prototype.some.call(e.classList,function(e){return e===t}):!!e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)")))},util.addClass=function(e,t){e&&(e.classList?t.replace(/(^\s+|\s+$)/g,"").split(/\s+/g).forEach(function(t){t&&e.classList.add(t)}):util.hasClass(e,t)||(e.className+=" "+t))},util.removeClass=function(e,t){e&&(e.classList?t.split(/\s+/g).forEach(function(t){e.classList.remove(t)}):util.hasClass(e,t)&&t.split(/\s+/g).forEach(function(t){var n=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className=e.className.replace(n," ")}))},util.toggleClass=function(e,t){e&&t.split(/\s+/g).forEach(function(t){util.hasClass(e,t)?util.removeClass(e,t):util.addClass(e,t)})},util.findDom=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,t=arguments[1],n=void 0;try{n=e.querySelector(t)}catch(i){0===t.indexOf("#")&&(n=e.getElementById(t.slice(1)))}return n},util.padStart=function(e,t,n){for(var i=String(n),r=t>>0,o=Math.ceil(r/i.length),s=[],a=String(e);o--;)s.push(i);return s.join("").substring(0,r-a.length)+a},util.format=function(e){if(window.isNaN(e))return"";var t=util.padStart(Math.floor(e/3600),2,0),n=util.padStart(Math.floor((e-3600*t)/60),2,0),i=util.padStart(Math.floor(e-3600*t-60*n),2,0);return("00"===t?[n,i]:[t,n,i]).join(":")},util.event=function(e){if(e.touches){var t=e.touches[0]||e.changedTouches[0];e.clientX=t.clientX||0,e.clientY=t.clientY||0,e.offsetX=t.pageX-t.target.offsetLeft,e.offsetY=t.pageY-t.target.offsetTop}e._target=e.target||e.srcElement},util.typeOf=function(e){return Object.prototype.toString.call(e).match(/([^\s.*]+)(?=]$)/g)[0]},util.deepCopy=function(e,t){if("Object"===util.typeOf(t)&&"Object"===util.typeOf(e))return Object.keys(t).forEach(function(n){"Object"!==util.typeOf(t[n])||t[n]instanceof Node?"Array"===util.typeOf(t[n])?e[n]="Array"===util.typeOf(e[n])?e[n].concat(t[n]):t[n]:e[n]=t[n]:void 0===e[n]?e[n]=t[n]:util.deepCopy(e[n],t[n])}),e},util.getBgImage=function(e){var t=(e.currentStyle||window.getComputedStyle(e,null)).backgroundImage;if(!t||"none"===t)return"";var n=document.createElement("a");return n.href=t.replace(/url\("|"\)/g,""),n.href},util.copyDom=function(e){if(e&&1===e.nodeType){var t=document.createElement(e.tagName);return Array.prototype.forEach.call(e.attributes,function(e){t.setAttribute(e.name,e.value)}),e.innerHTML&&(t.innerHTML=e.innerHTML),t}return""},util.setInterval=function(e,t,n,i){e._interval[t]||(e._interval[t]=setInterval(n.bind(e),i))},util.clearInterval=function(e,t){clearInterval(e._interval[t]),e._interval[t]=null},util.createImgBtn=function(e,t,n,i){var r=util.createDom("xg-"+e,"",{},"xgplayer-"+e+"-img");if(r.style.backgroundImage='url("'+t+'")',n&&i){var o=void 0,s=void 0,a=void 0;["px","rem","em","pt","dp","vw","vh","vm","%"].every(function(e){return!(n.indexOf(e)>-1&&i.indexOf(e)>-1)||(o=parseFloat(n.slice(0,n.indexOf(e)).trim()),s=parseFloat(i.slice(0,i.indexOf(e)).trim()),a=e,!1)}),r.style.width=""+o+a,r.style.height=""+s+a,r.style.backgroundSize=""+o+a+" "+s+a,r.style.margin="start"===e?"-"+s/2+a+" auto auto -"+o/2+a:"auto 5px auto 5px"}return r},util.Hex2RGBA=function(hex,alpha){var rgb=[];if(/^\#[0-9A-F]{3}$/i.test(hex)){var sixHex="#";hex.replace(/[0-9A-F]/gi,function(e){sixHex+=e+e}),hex=sixHex}return/^#[0-9A-F]{6}$/i.test(hex)?(hex.replace(/[0-9A-F]{2}/gi,function(kw){rgb.push(eval("0x"+kw))}),"rgba("+rgb.join(",")+", "+alpha+")"):"rgba(255, 255, 255, 0.1)"},util.getFullScreenEl=function(){return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement},util.checkIsFunction=function(e){return"function"==typeof e},util.checkIsObject=function(e){return null!==e&&"object"===(void 0===e?"undefined":_typeof(e))},util.hide=function(e){e.style.display="none"},util.show=function(e,t){e.style.display=t||"block"};var version="2.3.5",ErrorTypes={network:{code:1,msg:"视频下载错误",remark:"只要视频下载错误就使用此类型，无论是video本身的超时还是xhr的分段请求超时或者资源不存在"},mse:{code:2,msg:"流追加错误",remark:"追加流的时候如果类型不对、无法被正确解码则会触发此类错误"},parse:{code:3,msg:"解析错误",remark:"mp4、hls、flv我们都是使用js进行格式解析，如果解析失败则会触发此类错误"},format:{code:4,msg:"格式错误",remark:"如果浏览器不支持的格式导致播放错误"},decoder:{code:5,msg:"解码错误",remark:"浏览器解码异常会抛出此类型错误"},runtime:{code:6,msg:"语法错误",remark:"播放器语法错误"},timeout:{code:7,msg:"播放超时",remark:"播放过程中无法正常请求下一个分段导致播放中断"},other:{code:8,msg:"其他错误",remark:"不可知的错误或被忽略的错误类型"}},Errors=function e(t,n,i,r,o,s,a,l){var u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:{line:"",handle:"",msg:"",version:""},c=arguments[9],h=arguments[10];_classCallCheck(this,e);var f={};if(arguments.length>1)f.playerVersion="2.3.5",f.errorType=t,f.domain=document.domain,f.duration=i,f.currentTime=n,f.networkState=r,f.readyState=o,f.currentSrc=a,f.src=s,f.ended=l,f.errd=u,f.ex=(ErrorTypes[t]||{}).msg,f.errorCode=c,f.mediaError=h;else{var p=arguments[0];Object.keys(p).map(function(e){f[e]=p[e]}),f.ex=(p.type&&ErrorTypes[p.type]||{}).msg}return f},PLAY="play",PLAYING="playing",ENDED="ended",PAUSE="pause",ERROR="error",SEEKING="seeking",SEEKED="seeked",TIME_UPDATE="timeupdate",WAITING="waiting",CANPLAY="canplay",CANPLAY_THROUGH="canplaythrough",DURATION_CHANGE="durationchange",VOLUME_CHANGE="volumechange",LOADED_DATA="loadeddata",BUFFER_CHANGE="bufferedChange",PLAYER_FOCUS="focus",PLAYER_BLUR="blur",READY="ready",URL_NULL="urlNull",AUTOPLAY_STARTED="autoplay_started",AUTOPLAY_PREVENTED="autoplay_was_prevented",COMPLETE="complete",REPLAY="replay",DESTROY="destroy",URL_CHANGE="urlchange",FULLSCREEN_CHANGE="fullscreen_change",CSS_FULLSCREEN_CHANGE="cssFullscreen_change",Events=Object.freeze({__proto__:null,PLAY:"play",PLAYING:"playing",ENDED:"ended",PAUSE:"pause",ERROR:"error",SEEKING:"seeking",SEEKED:"seeked",TIME_UPDATE:"timeupdate",WAITING:"waiting",CANPLAY:"canplay",CANPLAY_THROUGH:"canplaythrough",DURATION_CHANGE:"durationchange",VOLUME_CHANGE:"volumechange",LOADED_DATA:"loadeddata",BUFFER_CHANGE:"bufferedChange",PLAYER_FOCUS:"focus",PLAYER_BLUR:"blur",READY:READY,URL_NULL:"urlNull",AUTOPLAY_STARTED:"autoplay_started",AUTOPLAY_PREVENTED:"autoplay_was_prevented",COMPLETE:"complete",REPLAY:"replay",DESTROY:"destroy",URL_CHANGE:"urlchange",FULLSCREEN_CHANGE:"fullscreen_change",CSS_FULLSCREEN_CHANGE:"cssFullscreen_change"}),_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),Proxy=function(){function e(t){var n=this;_classCallCheck$1(this,e),this._hasStart=!1,this._currentTime=0,this._duration=0,this.videoConfig={controls:!1,autoplay:t.autoplay,playsinline:t.playsinline,"webkit-playsinline":t.playsinline,"x5-playsinline":t.playsinline,"x5-video-player-type":t["x5-video-player-type"]||t.x5VideoPlayerType,"x5-video-player-fullscreen":t["x5-video-player-fullscreen"]||t.x5VideoPlayerFullscreen,"x5-video-orientation":t["x5-video-orientation"]||t.x5VideoOrientation,airplay:t.airplay,"webkit-airplay":t.airplay,tabindex:2,mediaType:t.mediaType||"video"},t.videoAttrbutes&&Object.keys(t.videoAttrbutes).map(function(e){n.videoConfig[e]=t.videoAttrbutes[e]}),t.loop&&(this.videoConfig.loop="loop"),console.log("this.videoConfig",this.videoConfig),t.defaultPlaybackRate&&(this.videoConfig.defaultPlaybackRate=t.defaultPlaybackRate),this.video=util.createDom(this.videoConfig.mediaType,"",this.videoConfig,""),t.autoplayMuted&&(this.video.muted=!0),t.autoplay&&(this.video.autoplay=!0),eventEmitter(this),this._interval={},this._initEvents()}return _createClass(e,[{key:"_initEvents",value:function(){function e(e,t){t[e]&&"function"==typeof t[e]&&t[e](t)}var t=this,n="0,0";this.ev=["play","playing","pause","ended","error","seeking","seeked","timeupdate","waiting","canplay","canplaythrough","durationchange","volumechange","loadeddata"].map(function(e){return _defineProperty({},e,"on"+e.charAt(0).toUpperCase()+e.slice(1))}),this.ev.forEach(function(i){t.evItem=Object.keys(i)[0];var r=Object.keys(i)[0],o=i[r];t.video.addEventListener(Object.keys(i)[0],function(){"error"===r?(t.errorHandler(r),e(o,t)):(t.emit(r,t),e(o,t)),"timeupdate"===r&&(t._currentTime=t.video.currentTime),"durationchange"===r&&(t._duration=t.video.duration),t.hasOwnProperty("_interval")&&(["ended","error","timeupdate"].indexOf(r)<0?(clearInterval(t._interval.bufferedChange),util.setInterval(t,"bufferedChange",function(){for(var e=[],t=0,i=this.video.buffered.length;t<i;t++)e.push([this.video.buffered.start(t),this.video.buffered.end(t)]);e.toString()!==n&&(n=e.toString(),this.emit("bufferedChange",e))},200)):"timeupdate"!==r&&util.clearInterval(t,"bufferedChange"))},!1)})}},{key:"errorHandler",value:function(e){this.video&&this.video.error&&this.emit(e,new Errors("other",this.currentTime,this.duration,this.networkState,this.readyState,this.currentSrc,this.src,this.ended,{line:162,msg:this.error,handle:"Constructor"},this.video.error.code,this.video.error))}},{key:"destroy",value:function(){var e=this;this.pause(),this.video.removeAttribute("src"),this.video.load(),this._currentTime=0,this._duration=0;for(var t in this._interval)clearInterval(this._interval[t]),this._interval[t]=null;this.emit("destroy"),this.ev.forEach(function(t){var n=Object.keys(t)[0],i=e[t[n]];i&&e.off(n,i)}),allOff(this)}},{key:"play",value:function(){return this.video.play()}},{key:"pause",value:function(){this.video.pause()}},{key:"canPlayType",value:function(e){return this.video.canPlayType(e)}},{key:"getBufferedRange",value:function(){var e=[0,0],t=this.video,n=t.buffered,i=t.currentTime;if(n)for(var r=0,o=n.length;r<o&&(e[0]=n.start(r),e[1]=n.end(r),!(e[0]<=i&&i<=e[1]));r++);return e[0]-i<=0&&i-e[1]<=0?e:[0,0]}},{key:"hasStart",get:function(){return this._hasStart},set:function(e){"boolean"==typeof e&&(this._hasStart=e,this.emit("hasstart"))}},{key:"autoplay",set:function(e){this.video.autoplay=e},get:function(){return this.video.autoplay}},{key:"buffered",get:function(){return this.video.buffered}},{key:"crossOrigin",get:function(){return this.video.crossOrigin},set:function(e){this.video.crossOrigin=e}},{key:"currentSrc",get:function(){return this.video.currentSrc},set:function(e){this.video.currentSrc=e}},{key:"currentTime",get:function(){return this._currentTime},set:function(e){this.video.currentTime=e}},{key:"defaultMuted",get:function(){return this.video.defaultMuted},set:function(e){this.video.defaultMuted=e}},{key:"duration",get:function(){return this._duration}},{key:"ended",get:function(){return this.video.ended}},{key:"error",get:function(){var e=this.video.error;if(!e)return null;var t=[{en:"MEDIA_ERR_ABORTED",cn:"取回过程被用户中止"},{en:"MEDIA_ERR_NETWORK",cn:"当下载时发生错误"},{en:"MEDIA_ERR_DECODE",cn:"当解码时发生错误"},{en:"MEDIA_ERR_SRC_NOT_SUPPORTED",cn:"不支持音频/视频"}];return this.lang?this.lang[t[e.code-1].en]:t[e.code-1].en}},{key:"loop",get:function(){return this.video.loop},set:function(e){this.video.loop=e}},{key:"muted",get:function(){return this.video.muted},set:function(e){this.video.muted=e}},{key:"networkState",get:function(){var e=[{en:"NETWORK_EMPTY",cn:"音频/视频尚未初始化"},{en:"NETWORK_IDLE",cn:"音频/视频是活动的且已选取资源，但并未使用网络"},{en:"NETWORK_LOADING",cn:"浏览器正在下载数据"},{en:"NETWORK_NO_SOURCE",cn:"未找到音频/视频来源"}];return this.lang?this.lang[e[this.video.networkState].en]:e[this.video.networkState].en}},{key:"paused",get:function(){return this.video.paused}},{key:"playbackRate",get:function(){return this.video.playbackRate},set:function(e){this.video.playbackRate=e}},{key:"played",get:function(){return this.video.played}},{key:"preload",get:function(){return this.video.preload},set:function(e){this.video.preload=e}},{key:"readyState",get:function(){var e=[{en:"HAVE_NOTHING",cn:"没有关于音频/视频是否就绪的信息"},{en:"HAVE_METADATA",cn:"关于音频/视频就绪的元数据"},{en:"HAVE_CURRENT_DATA",cn:"关于当前播放位置的数据是可用的，但没有足够的数据来播放下一帧/毫秒"},{en:"HAVE_FUTURE_DATA",cn:"当前及至少下一帧的数据是可用的"},{en:"HAVE_ENOUGH_DATA",cn:"可用数据足以开始播放"}];return this.lang?this.lang[e[this.video.readyState].en]:e[this.video.readyState]}},{key:"seekable",get:function(){return this.video.seekable}},{key:"seeking",get:function(){return this.video.seeking}},{key:"src",get:function(){return this.video.src},set:function(e){this.ended||this.emit("urlchange",e),this.video.pause(),this._currentTime=0,this._duration=0,this.video.src=e}},{key:"volume",get:function(){return this.video.volume},set:function(e){this.video.volume=e}}]),e}(),sniffer={get device(){return sniffer.os.isPc?"pc":"mobile"},get browser(){var e=navigator.userAgent.toLowerCase(),t={ie:/rv:([\d.]+)\) like gecko/,firfox:/firefox\/([\d.]+)/,chrome:/chrome\/([\d.]+)/,opera:/opera.([\d.]+)/,safari:/version\/([\d.]+).*safari/};return[].concat(Object.keys(t).filter(function(n){return t[n].test(e)}))[0]},get os(){var e=navigator.userAgent,t=/(?:Windows Phone)/.test(e),n=/(?:SymbianOS)/.test(e)||t,i=/(?:Android)/.test(e),r=/(?:Firefox)/.test(e),o=/(?:iPad|PlayBook)/.test(e)||i&&!/(?:Mobile)/.test(e)||r&&/(?:Tablet)/.test(e),s=/(?:iPhone)/.test(e)&&!o;return{isTablet:o,isPhone:s,isAndroid:i,isPc:!(s||i||n||o),isSymbian:n,isWindowsPhone:t,isFireFox:r}}},_createClass$1=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),BasePlugin=function(){function e(t){_classCallCheck$2(this,e),this.__args=t,this.__events={},this.config=t.config||{},util.checkIsFunction(this.beforeCreate)&&this.beforeCreate(),this.__init(t),util.checkIsFunction(this.afterCreate)&&this.afterCreate()}return _createClass$1(e,null,[{key:"defineGetterOrSetter",value:function(e,t){for(var n in t)Object.defineProperty(e,n,t[n])}}]),_createClass$1(e,[{key:"__init",value:function(t){var n=this;e.defineGetterOrSetter(this,{player:{get:function(){return t.player}},playerConfig:{get:function(){return t.player&&t.player.config}},pluginName:{get:function(){return t.pluginName?t.pluginName:n.constructor.pluginName}},root:{get:function(){return t.player.root}},logger:{get:function(){return t.player.logger}}})}},{key:"on",value:function(e,t){var n=this;"string"==typeof e?(this.__events[e]=t,this.player.on(e,t)):Array.isArray(e)&&e.forEach(function(e){n.__events[e]=t,n.player.on(e,t)})}},{key:"once",value:function(e,t){this.player.once(e,t)}},{key:"off",value:function(e,t){var n=this;"string"==typeof e?(this.__events[e]=void 0,this.player.off(e,t)):Array.isArray(e)&&e.forEach(function(e){n.__events[e]=void 0,n.player.off(e,t)})}},{key:"offAll",value:function(){var e=!0,t=!1,n=void 0;try{for(var i,r=Object.keys(this.__events)[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){var o=i.value;this.off(o,this.__events[o])}}catch(e){t=!0,n=e}finally{try{!e&&r.return&&r.return()}finally{if(t)throw n}}}},{key:"emit",value:function(e,t){this.player.emit(e,t)}},{key:"_destroy",value:function(){this.offAll(),util.checkIsFunction(this.destroy)&&this.destroy()}}]),e}();BasePlugin.Util=util,BasePlugin.Sniffer=sniffer,BasePlugin.Errors=Errors,BasePlugin.Events=Events;var pluginsManager={init:function(e){var t=e._pluginInfoId;t||(t=(new Date).getTime(),e._pluginInfoId=t),this.pluginGroup||(this.pluginGroup={}),this.pluginGroup[t]={_player:e,_originalOptions:e.config||{}}},register:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e&&t&&"function"==typeof t&&void 0!==t.prototype){var i=e._pluginInfoId;i&&this.pluginGroup&&this.pluginGroup[i]||(this.init(e),i=e._pluginInfoId),this.pluginGroup[i]._plugins||(this.pluginGroup[i]._plugins=[]);var r=this.pluginGroup[i]._plugins,o=this.pluginGroup[i]._originalOptions;n.player=this.pluginGroup[i]._player;var s=n.pluginName||t.pluginName;if(!s)throw new Error("The property pluginName is necessary");n.config||(n.config={});var a=!0,l=!1,u=void 0;try{for(var c,h=Object.keys(o)[Symbol.iterator]();!(a=(c=h.next()).done);a=!0){var f=c.value;if(s.toLowerCase()===f.toLowerCase()){n.config=Object.assign({},n.config,o[f]);break}}}catch(e){l=!0,u=e}finally{try{!a&&h.return&&h.return()}finally{if(l)throw u}}n.root?"string"==typeof n.root&&(n.root=e[n.root]):n.root=e.root,t.defaultConfig&&Object.keys(t.defaultConfig).map(function(e){void 0===n.config[e]&&(n.config[e]=t.defaultConfig[e])});try{var p=new t(n);return r[s.toLowerCase()]=p,r[s.toLowerCase()].func=t,p}catch(e){throw console.error(e),e}}},unRegister:function(e,t){try{this.pluginGroup[e]._plugins[t]._destroy(),this.pluginGroup[e]._plugins[t]=null}catch(n){this.pluginGroup[e]._plugins[t]=null}},getPlugins:function(e){var t=e._pluginInfoId;return t?this.pluginGroup[t]._plugins:{}},findPlugin:function(e,t){if(!this.pluginGroup)return null;var n=e._pluginInfoId,i=t.toLowerCase();return this.pluginGroup[n]._plugins[i]},beforeInit:function(e){function t(e){return e&&e.then?e:new Promise(function(e){e()})}var n=this;return new Promise(function(i){if(n.pluginGroup){var r=e._pluginInfoId,o=n.pluginGroup[r]._plugins,s=[],a=!0,l=!1,u=void 0;try{for(var c,h=Object.keys(o)[Symbol.iterator]();!(a=(c=h.next()).done);a=!0){var f=c.value;if(o[f]&&o[f].beforePlayerInit)try{var p=o[f].beforePlayerInit();s.push(t(p))}catch(e){throw s.push(t(null)),e}}}catch(e){l=!0,u=e}finally{try{!a&&h.return&&h.return()}finally{if(l)throw u}}Promise.all(s).then(function(){i()}).catch(function(e){console.error(e),i()})}})},afterInit:function(e){if(this.pluginGroup){var t=e._pluginInfoId,n=this.pluginGroup[t]._plugins,i=!0,r=!1,o=void 0;try{for(var s,a=Object.keys(n)[Symbol.iterator]();!(i=(s=a.next()).done);i=!0){var l=s.value;n[l]&&n[l].afterPlayerInit&&n[l].afterPlayerInit()}}catch(e){r=!0,o=e}finally{try{!i&&a.return&&a.return()}finally{if(r)throw o}}}},reRender:function(e){var t=e._pluginInfoId,n={},i=this.pluginGroup[t]._plugins,r=!0,o=!1,s=void 0;try{for(var a,l=Object.keys(i)[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var u=a.value;n[u]={plugin:i[u].func,options:i[u]._args},this.unRegister(t,u)}}catch(e){o=!0,s=e}finally{try{!r&&l.return&&l.return()}finally{if(o)throw s}}var c=!0,h=!1,f=void 0;try{for(var p,d=Object.keys(n)[Symbol.iterator]();!(c=(p=d.next()).done);c=!0){var y=p.value;this.register(t,y,n[y].plugin,n[y].options)}}catch(e){h=!0,f=e}finally{try{!c&&d.return&&d.return()}finally{if(h)throw f}}},destroy:function(e){var t=e._pluginInfoId,n=this.pluginGroup[t]._plugins,i=!0,r=!1,o=void 0;try{for(var s,a=Object.keys(n)[Symbol.iterator]();!(i=(s=a.next()).done);i=!0){var l=s.value;this.unRegister(t,l)}}catch(e){r=!0,o=e}finally{try{!i&&a.return&&a.return()}finally{if(r)throw o}}delete this.pluginGroup[t]}},proto=Element.prototype,vendor=proto.matchesSelector||proto.webkitMatchesSelector||proto.mozMatchesSelector||proto.msMatchesSelector||proto.oMatchesSelector,matchesSelector=match,closest=function(e,t,n){for(var i=n?e:e.parentNode;i&&i!==document;){if(matchesSelector(i,t))return i;i=i.parentNode}},bind,unbind,prefix,bind_1=function(e,t,n,i){return bind||detect(),e[bind](prefix+t,n,i||!1),n},unbind_1=function(e,t,n,i){return unbind||detect(),e[unbind](prefix+t,n,i||!1),n},componentEvent={bind:bind_1,unbind:unbind_1},forceCaptureEvents=["focus","blur"],bind$1=function(e,t,n,i,r){return-1!==forceCaptureEvents.indexOf(n)&&(r=!0),componentEvent.bind(e,n,function(n){var r=n.target||n.srcElement;n.delegateTarget=closest(r,t,!0),n.delegateTarget&&i.call(e,n)},r)},unbind$1=function(e,t,n,i){-1!==forceCaptureEvents.indexOf(t)&&(i=!0),componentEvent.unbind(e,t,n,i)},_typeof$1="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_get=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var s=r.get;if(void 0!==s)return s.call(i)},_createClass$2=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),Plugin=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck$3(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return _inherits(t,e),_createClass$2(t,null,[{key:"insert",value:function(e,t,n){var i=t.children.length,r=parseInt(n),o=e instanceof window.HTMLElement;if(void 0===n||i<=r)return o?t.appendChild(e):t.insertAdjacentHTML("beforeend",e),t.children[t.children.length-1];if(0===r)return o?t.insertBefore(e,t.children.length>0?t.children[0]:null):t.insertAdjacentHTML("afterbegin",e),t.children[0];var s=t.children[r];return s&&s.insertAdjacentHTML?(o?t.insertBefore(e,s):s.insertAdjacentHTML("beforebegin",e),t.children[r]):void 0}}]),_createClass$2(t,[{key:"__init",value:function(e){_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"__init",this).call(this,e);var n=e.root,i=null;this.icons={},registerIconsObj(this.registerIcons()||{},this),this.text={},registerTextObj(this.registerLangauageTexts()||{},this);var r="";try{r=this.render()}catch(e){throw new Error("Plugin:"+this.pluginName+":render:"+e.message)}r?i=t.insert(r,n,e.index):e.tag&&(i=_createElement(e.tag,e.name),n.appendChild(i)),t.defineGetterOrSetter(this,{el:{get:function(){return i}},parent:{get:function(){return n}}});var o=this.config.attr||{},s=this.config.style||{};this.setAttr(o),this.setStyle(s),this.__registeChildren()}},{key:"__registeChildren",value:function(){var e=this.children();if(e&&"object"===(void 0===e?"undefined":_typeof$1(e))&&(this._children||(this._children=[]),Object.keys(e).length>0)){var t=!0,n=!1,i=void 0;try{for(var r,o=Object.keys(e)[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var s=r.value,a=e[s],l={root:this.el},u=void 0,c=void 0;"function"==typeof a?(u=this.config[s]||{},c=a):"object"===(void 0===a?"undefined":_typeof$1(a))&&"function"==typeof a.plugin&&(u=a.options?BasePlugin.Util.deepCopy(this.config[s]||{},a.options):this.config[s]||{},c=a.plugin),l.config=u,u.index&&(l.index=u.index),u.root&&(l.root=u.root);var h=this.registerPlugin(s,c,l);this._children.push(h)}}catch(e){n=!0,i=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw i}}}}},{key:"plugins",value:function(){return this._children}},{key:"children",value:function(){return{}}},{key:"registerPlugin",value:function(e,t,n){var i="object"===(void 0===n?"undefined":_typeof$1(n))?n:{};return i.root=n.root||this.el,i.pluginName=e,pluginsManager.register(this.player,t,i)}},{key:"registerIcons",value:function(){return{}}},{key:"registerLangauageTexts",value:function(){return{}}},{key:"getPlugin",value:function(e){return pluginsManager.findPlugin(this.player,e)}},{key:"find",value:function(e){return this.el.querySelector(e)}},{key:"bind",value:function(e,t,n){var i=this;arguments.length<3&&"function"==typeof t?Array.isArray(e)?e.forEach(function(e){i.bindEL(e,t)}):this.bindEL(e,t):3===arguments.length&&"function"==typeof n&&(Array.isArray(t)?t.forEach(function(t){bind$1(i.el,e,t,n,!1)}):bind$1(this.el,e,t,n,!1))}},{key:"unbind",value:function(e,t,n){var i=this;arguments.length<3&&"function"==typeof t?Array.isArray(e)?e.forEach(function(e){i.unbindEL(e,t)}):this.unbindEL(e,t):"function"==typeof n&&(Array.isArray(t)?t.forEach(function(t){unbind$1(i.el,e,t,n)}):unbind$1(this.el,e,t,n))}},{key:"setStyle",value:function(e,t){if("string"==typeof e)return this.style[e]=t,this.el.style[e]=t;if("object"===(void 0===e?"undefined":_typeof$1(e))){var n=e,i=!0,r=!1,o=void 0;try{for(var s,a=Object.keys(n)[Symbol.iterator]();!(i=(s=a.next()).done);i=!0){var l=s.value;this.el.style[l]=n[l]}}catch(e){r=!0,o=e}finally{try{!i&&a.return&&a.return()}finally{if(r)throw o}}}}},{key:"setAttr",value:function(e,t){if("string"==typeof e)return this.el.setAttribute(e,t);if("object"===(void 0===e?"undefined":_typeof$1(e))){var n=e,i=!0,r=!1,o=void 0;try{for(var s,a=Object.keys(n)[Symbol.iterator]();!(i=(s=a.next()).done);i=!0){var l=s.value;this.el.setAttribute(l,n[l])}}catch(e){r=!0,o=e}finally{try{!i&&a.return&&a.return()}finally{if(r)throw o}}}}},{key:"setHtml",value:function(e,t){this.el.innerHtml=e,"function"==typeof t&&t()}},{key:"bindEL",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];"on"+e in this.el&&"function"==typeof t&&this.el.addEventListener(e,t,n)}},{key:"unbindEL",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];"on"+e in this.el&&"function"==typeof t&&this.el.removeEventListener(e,t,n)}},{key:"show",value:function(e){if(this.el.style.display=void 0!==e?e:"block","none"===window.getComputedStyle(this.el,null).getPropertyValue("display"))return this.el.style.display="block"}},{key:"hide",value:function(){this.el.style.display="none"}},{key:"render",value:function(){return""}},{key:"_destroy",value:function(){this.offAll(),BasePlugin.Util.checkIsFunction(this.destroy)&&this.destroy(),this.el&&(this.el.hasOwnProperty("remove")?this.el.remove():this.el.parentNode&&this.el.parentNode.removeChild(this.el))}}]),t}(BasePlugin);Plugin.Util=BasePlugin.Util,Plugin.Sniffer=BasePlugin.Sniffer,Plugin.Errors=BasePlugin.Errors,Plugin.Event=BasePlugin.Event;var STATE_CLASS={DEFAULT:"xgplayer",DEFAULT_SKIN:"xgplayer-skin-default",ENTER:"xgplayer-is-enter",PAUSED:"xgplayer-pause",PLAYING:"xgplayer-playing",ENDED:"xgplayer-ended",CANPLAY:"xgplayer-canplay",LOADING:"xgplayer-isloading",ERROR:"xgplayer-error",REPLAY:"xgplayer-replay",NO_START:"xgplayer-nostart",ACTIVE:"xgplayer-inactive",FULLSCREEN:"xgplayer-is-fullscreen",CSS_FULLSCREEN:"xgplayer-is-cssfullscreen",NO_CONTROLS:"no-controls",AUTOPLAY:"xgplayer-is-autoplay",PC:"xgplayer-pc",MOBILE:"xgplayer-mobile"},ReplayIcon='<svg class="xgplayer-replay-svg" xmlns="http://www.w3.org/2000/svg" width="78" height="78" viewbox="0 0 78 78">\n  <path d="M8.22708362,13.8757234 L11.2677371,12.6472196 C11.7798067,12.4403301 12.3626381,12.6877273 12.5695276,13.1997969 L12.9441342,14.1269807 C13.1510237,14.6390502 12.9036264,15.2218816 12.3915569,15.4287712 L6.8284538,17.6764107 L5.90126995,18.0510173 C5.38920044,18.2579068 4.80636901,18.0105096 4.5994795,17.49844 L1.97723335,11.0081531 C1.77034384,10.4960836 2.0177411,9.91325213 2.52981061,9.70636262 L3.45699446,9.33175602 C3.96906396,9.12486652 4.5518954,9.37226378 4.75878491,9.88433329 L5.67885163,12.1615783 C7.99551726,6.6766934 13.3983951,3 19.5,3 C27.7842712,3 34.5,9.71572875 34.5,18 C34.5,26.2842712 27.7842712,33 19.5,33 C15.4573596,33 11.6658607,31.3912946 8.87004692,28.5831991 C8.28554571,27.9961303 8.28762719,27.0463851 8.87469603,26.4618839 C9.46176488,25.8773827 10.4115101,25.8794641 10.9960113,26.466533 C13.2344327,28.7147875 16.263503,30 19.5,30 C26.127417,30 31.5,24.627417 31.5,18 C31.5,11.372583 26.127417,6 19.5,6 C14.4183772,6 9.94214483,9.18783811 8.22708362,13.8757234 Z"></path>\n</svg>\n',_createClass$3=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),Replay=function(e){function t(){return _classCallCheck$4(this,t),_possibleConstructorReturn$1(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits$1(t,e),_createClass$3(t,[{key:"registerIcons",value:function(){return{replay:'<svg class="xgplayer-replay-svg" xmlns="http://www.w3.org/2000/svg" width="78" height="78" viewbox="0 0 78 78">\n  <path d="M8.22708362,13.8757234 L11.2677371,12.6472196 C11.7798067,12.4403301 12.3626381,12.6877273 12.5695276,13.1997969 L12.9441342,14.1269807 C13.1510237,14.6390502 12.9036264,15.2218816 12.3915569,15.4287712 L6.8284538,17.6764107 L5.90126995,18.0510173 C5.38920044,18.2579068 4.80636901,18.0105096 4.5994795,17.49844 L1.97723335,11.0081531 C1.77034384,10.4960836 2.0177411,9.91325213 2.52981061,9.70636262 L3.45699446,9.33175602 C3.96906396,9.12486652 4.5518954,9.37226378 4.75878491,9.88433329 L5.67885163,12.1615783 C7.99551726,6.6766934 13.3983951,3 19.5,3 C27.7842712,3 34.5,9.71572875 34.5,18 C34.5,26.2842712 27.7842712,33 19.5,33 C15.4573596,33 11.6658607,31.3912946 8.87004692,28.5831991 C8.28554571,27.9961303 8.28762719,27.0463851 8.87469603,26.4618839 C9.46176488,25.8773827 10.4115101,25.8794641 10.9960113,26.466533 C13.2344327,28.7147875 16.263503,30 19.5,30 C26.127417,30 31.5,24.627417 31.5,18 C31.5,11.372583 26.127417,6 19.5,6 C14.4183772,6 9.94214483,9.18783811 8.22708362,13.8757234 Z"></path>\n</svg>\n'}}},{key:"registerLangauageTexts",value:function(){return{replay:{jp:"日文text",en:"rePlay",zh:"重播"}}}},{key:"afterCreate",value:function(){var e=this;this.bind("svg","click",function(t){t.preventDefault(),e.player.replay(),Plugin.Util.removeClass(e.player.root,"replay")}),this.on(Plugin.Events.ENDED,function(){e.playerConfig.loop||Plugin.Util.addClass(e.player.root,"replay");var t=e.el.querySelector("path");if(t){var n=window.getComputedStyle(t).getPropertyValue("transform");if("string"==typeof n&&n.indexOf("none")>-1)return null;t.setAttribute("transform",n)}})}},{key:"render",value:function(){return'<xg-replay class="xgplayer-replay">\n      '+this.icons.replay+'\n      <xg-replay-txt class="xgplayer-replay-txt">'+this.text.replay+"</xg-replay-txt>\n    </xg-replay>"}}],[{key:"pluginName",get:function(){return"Replay"}}]),t}(Plugin),_createClass$4=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),Poster=function(e){function t(){return _classCallCheck$5(this,t),_possibleConstructorReturn$2(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits$2(t,e),_createClass$4(t,[{key:"render",value:function(){var e=this.config.poster||this.playerConfig.poster;return e?'<xg-poster class="xgplayer-poster" style="background-image:url('+e+')">\n    </xg-poster>':""}}],[{key:"pluginName",get:function(){return"Poster"}}]),t}(Plugin),pasition=createCommonjsModule(function(e,t){!function(t,n){e.exports=function(){function e(e){var n=[];return e.replace(C,function(e,i,r){var o=i.toLowerCase();for(r=t(r),"m"==o&&r.length>2&&(n.push([i].concat(r.splice(0,2))),o="l",i="m"==i?"l":"L");;){if(r.length==_[o])return r.unshift(i),n.push(r);if(r.length<_[o])throw new Error("malformed path data");n.push([i].concat(r.splice(0,_[o])))}}),n}function t(e){var t=e.match(w);return t?t.map(Number):[]}function n(e){var t=e[0][0],n=e[0][1],i=t,r=n;return e.forEach(function(e){var o=e[0],s=e[2],a=e[4],l=e[6],u=e[1],c=e[3],h=e[5],f=e[7];t=Math.min(t,o,s,a,l),n=Math.min(n,u,c,h,f),i=Math.max(i,o,s,a,l),r=Math.max(r,u,c,h,f)}),[t,n,i,r]}function i(e,t){return Math.sqrt(Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2))+Math.sqrt(Math.pow(e[2]-t[2],2)+Math.pow(e[3]-t[3],2))}function r(e,t){var n=e[0],i=e[2],r=e[4],o=e[6],s=e[1],a=e[3],l=e[5],u=e[7],c=t[0],h=t[2],f=t[4],p=t[6],d=t[1],y=t[3],v=t[5],g=t[7];return Math.sqrt(Math.pow(c-n,2)+Math.pow(d-s,2))+Math.sqrt(Math.pow(h-i,2)+Math.pow(y-a,2))+Math.sqrt(Math.pow(f-r,2)+Math.pow(v-l,2))+Math.sqrt(Math.pow(p-o,2)+Math.pow(g-u,2))}function o(e,t){var n=[];a(e.length).forEach(function(i){var o=0,s=0;i.forEach(function(n){o+=r(e[n],t[s++])}),n.push({index:i,distance:o})}),n.sort(function(e,t){return e.distance-t.distance});var i=[];return n[0].index.forEach(function(t){i.push(e[t])}),i}function s(e,t){var r=[];l(e.length).forEach(function(o){var s=0;o.forEach(function(r){s+=i(n(e[r]),n(t[r]))}),r.push({index:o,distance:s})}),r.sort(function(e,t){return e.distance-t.distance});var o=[];return r[0].index.forEach(function(t){o.push(e[t])}),o}function a(e){for(var t=[],n=0;n<e;n++){for(var i=[],r=0;r<e;r++){var o=r+n;o>e-1&&(o-=e),i[o]=r}t.push(i)}return t}function l(e){for(var t=[],n=0;n<e;n++)t.push(n);return u(t)}function u(e){function t(e){var r,o;for(r=0;r<e.length;r++)o=e.splice(r,1)[0],i.push(o),0==e.length&&n.push(i.slice()),t(e),e.splice(r,0,o),i.pop();return n}var n=[],i=[];return t(e)}function c(e,t,n,i,r,o,s,a,l){return{left:h(e,t,n,i,r,o,s,a,l),right:h(s,a,r,o,n,i,e,t,1-l,!0)}}function h(e,t,n,i,r,o,s,a,l,u){var c=(n-e)*l+e,h=(i-t)*l+t,f=(r-n)*l+n,p=(o-i)*l+i,d=(f-c)*l+c,y=(p-h)*l+h,v=(((s-r)*l+r-f)*l+f-d)*l+d,g=(((a-o)*l+o-p)*l+p-y)*l+y;return u?[v,g,d,y,c,h,e,t]:[e,t,c,h,d,y,v,g]}function f(e,t){for(var n=0;n<t;n++)!function(t){var n=[];e[e.length-1].forEach(function(e){n.push(e.slice(0))}),e.push(n)}()}var p=function(){function e(e,t){var n=[],i=!0,r=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);i=!0);}catch(e){r=!0,o=e}finally{try{!i&&a.return&&a.return()}finally{if(r)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),d=2*Math.PI,y=function(e,t,n,i,r,o,s){var a=e.x,l=e.y;return{x:i*(a*=t)-r*(l*=n)+o,y:r*a+i*l+s}},v=function(e,t){var n=4/3*Math.tan(t/4),i=Math.cos(e),r=Math.sin(e),o=Math.cos(e+t),s=Math.sin(e+t);return[{x:i-r*n,y:r+i*n},{x:o+s*n,y:s-o*n},{x:o,y:s}]},g=function(e,t,n,i){var r=e*i-t*n<0?-1:1,o=(e*n+t*i)/(Math.sqrt(e*e+t*t)*Math.sqrt(e*e+t*t));return o>1&&(o=1),o<-1&&(o=-1),r*Math.acos(o)},m=function(e,t,n,i,r,o,s,a,l,u,c,h){var f=Math.pow(r,2),p=Math.pow(o,2),y=Math.pow(c,2),v=Math.pow(h,2),m=f*p-f*v-p*y;m<0&&(m=0),m/=f*v+p*y;var b=(m=Math.sqrt(m)*(s===a?-1:1))*r/o*h,_=m*-o/r*c,C=u*b-l*_+(e+n)/2,w=l*b+u*_+(t+i)/2,E=(c-b)/r,k=(h-_)/o,x=(-c-b)/r,P=(-h-_)/o,L=g(1,0,E,k),O=g(E,k,x,P);return 0===a&&O>0&&(O-=d),1===a&&O<0&&(O+=d),[C,w,L,O]},b=function(e){var t=e.px,n=e.py,i=e.cx,r=e.cy,o=e.rx,s=e.ry,a=e.xAxisRotation,l=void 0===a?0:a,u=e.largeArcFlag,c=void 0===u?0:u,h=e.sweepFlag,f=void 0===h?0:h,g=[];if(0===o||0===s)return[];var b=Math.sin(l*d/360),_=Math.cos(l*d/360),C=_*(t-i)/2+b*(n-r)/2,w=-b*(t-i)/2+_*(n-r)/2;if(0===C&&0===w)return[];o=Math.abs(o),s=Math.abs(s);var E=Math.pow(C,2)/Math.pow(o,2)+Math.pow(w,2)/Math.pow(s,2);E>1&&(o*=Math.sqrt(E),s*=Math.sqrt(E));var k=m(t,n,i,r,o,s,c,f,b,_,C,w),x=p(k,4),P=x[0],L=x[1],O=x[2],T=x[3],S=Math.max(Math.ceil(Math.abs(T)/(d/4)),1);T/=S;for(var $=0;$<S;$++)g.push(v(O,T)),O+=T;return g.map(function(e){var t=y(e[0],o,s,_,b,P,L),n=t.x,i=t.y,r=y(e[1],o,s,_,b,P,L),a=r.x,l=r.y,u=y(e[2],o,s,_,b,P,L);return{x1:n,y1:i,x2:a,y2:l,x:u.x,y:u.y}})},_={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},C=/([astvzqmhlc])([^astvzqmhlc]*)/gi,w=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/gi,E={};return E.parser=e,E.lerpCurve=function(e,t,n){return E.lerpPoints(e[0],e[1],t[0],t[1],n).concat(E.lerpPoints(e[2],e[3],t[2],t[3],n)).concat(E.lerpPoints(e[4],e[5],t[4],t[5],n)).concat(E.lerpPoints(e[6],e[7],t[6],t[7],n))},E.lerpPoints=function(e,t,n,i,r){return[e+(n-e)*r,t+(i-t)*r]},E.q2b=function(e,t,n,i,r,o){return[e,t,(e+2*n)/3,(t+2*i)/3,(r+2*n)/3,(o+2*i)/3,r,o]},E.path2shapes=function(e){for(var t=E.parser(e),n=0,i=0,r=0,o=t.length,s=[],a=null,l=void 0,u=void 0,c=void 0,h=void 0,f=void 0,p=void 0,d=void 0;r<o;r++){var y=t[r],v=y[0],g=t[r-1];switch(v){case"m":s[f=s.length]=[],a=s[f],n+=y[1],i+=y[2];break;case"M":s[f=s.length]=[],a=s[f],n=y[1],i=y[2];break;case"l":a.push([n,i,n,i,n,i,n+y[1],i+y[2]]),n+=y[1],i+=y[2];break;case"L":a.push([n,i,y[1],y[2],y[1],y[2],y[1],y[2]]),n=y[1],i=y[2];break;case"h":a.push([n,i,n,i,n,i,n+y[1],i]),n+=y[1];break;case"H":a.push([n,i,y[1],i,y[1],i,y[1],i]),n=y[1];break;case"v":a.push([n,i,n,i,n,i,n,i+y[1]]),i+=y[1];break;case"V":a.push([n,i,n,y[1],n,y[1],n,y[1]]),i=y[1];break;case"C":a.push([n,i,y[1],y[2],y[3],y[4],y[5],y[6]]),n=y[5],i=y[6];break;case"S":"C"===g[0]||"c"===g[0]?a.push([n,i,n+g[5]-g[3],i+g[6]-g[4],y[1],y[2],y[3],y[4]]):"S"!==g[0]&&"s"!==g[0]||a.push([n,i,n+g[3]-g[1],i+g[4]-g[2],y[1],y[2],y[3],y[4]]),n=y[3],i=y[4];break;case"c":a.push([n,i,n+y[1],i+y[2],n+y[3],i+y[4],n+y[5],i+y[6]]),n+=y[5],i+=y[6];break;case"s":"C"===g[0]||"c"===g[0]?a.push([n,i,n+g[5]-g[3],i+g[6]-g[4],n+y[1],i+y[2],n+y[3],i+y[4]]):"S"!==g[0]&&"s"!==g[0]||a.push([n,i,n+g[3]-g[1],i+g[4]-g[2],n+y[1],i+y[2],n+y[3],i+y[4]]),n+=y[3],i+=y[4];break;case"a":d=(p=b({rx:y[1],ry:y[2],px:n,py:i,xAxisRotation:y[3],largeArcFlag:y[4],sweepFlag:y[5],cx:n+y[6],cy:i+y[7]}))[p.length-1],p.forEach(function(e,t){0===t?a.push([n,i,e.x1,e.y1,e.x2,e.y2,e.x,e.y]):a.push([p[t-1].x,p[t-1].y,e.x1,e.y1,e.x2,e.y2,e.x,e.y])}),n=d.x,i=d.y;break;case"A":d=(p=b({rx:y[1],ry:y[2],px:n,py:i,xAxisRotation:y[3],largeArcFlag:y[4],sweepFlag:y[5],cx:y[6],cy:y[7]}))[p.length-1],p.forEach(function(e,t){0===t?a.push([n,i,e.x1,e.y1,e.x2,e.y2,e.x,e.y]):a.push([p[t-1].x,p[t-1].y,e.x1,e.y1,e.x2,e.y2,e.x,e.y])}),n=d.x,i=d.y;break;case"Q":a.push(E.q2b(n,i,y[1],y[2],y[3],y[4])),n=y[3],i=y[4];break;case"q":a.push(E.q2b(n,i,n+y[1],i+y[2],y[3]+n,y[4]+i)),n+=y[3],i+=y[4];break;case"T":"Q"===g[0]||"q"===g[0]?(c=n+g[3]-g[1],h=i+g[4]-g[2],a.push(E.q2b(n,i,c,h,y[1],y[2]))):"T"!==g[0]&&"t"!==g[0]||(a.push(E.q2b(n,i,n+n-c,i+i-h,y[1],y[2])),c=n+n-c,h=i+i-h),n=y[1],i=y[2];break;case"t":"Q"===g[0]||"q"===g[0]?(c=n+g[3]-g[1],h=i+g[4]-g[2],a.push(E.q2b(n,i,c,h,n+y[1],i+y[2]))):"T"!==g[0]&&"t"!==g[0]||(a.push(E.q2b(n,i,n+n-c,i+i-h,n+y[1],i+y[2])),c=n+n-c,h=i+i-h),n+=y[1],i+=y[2];break;case"Z":case"z":l=a[0][0],u=a[0][1],a.push([n,i,l,u,l,u,l,u])}}return s},E._upCurves=function(e,t){for(var n=0,i=0,r=e.length;n<t;n++)e.push(e[i].slice(0)),++i>r-1&&(i-=r)},E._splitCurves=function(e,t){for(var n=0,i=0;n<t;n++){var r=e[i],o=c(r[0],r[1],r[2],r[3],r[4],r[5],r[6],r[7],.5);e.splice(i,1),e.splice(i,0,o.left,o.right),(i+=2)>=e.length-1&&(i=0)}},E.lerp=function(e,t,n){return E._lerp(E.path2shapes(e),E.path2shapes(t),n)},E.MIM_CURVES_COUNT=100,E._preprocessing=function(e,t){var n=e.length,i=t.length,r=JSON.parse(JSON.stringify(e)),a=JSON.parse(JSON.stringify(t));return n>i?f(a,n-i):n<i&&f(r,i-n),(r=s(r,a)).forEach(function(e,t){var n=e.length,i=a[t].length;n>i?n<E.MIM_CURVES_COUNT?(E._splitCurves(e,E.MIM_CURVES_COUNT-n),E._splitCurves(a[t],E.MIM_CURVES_COUNT-i)):E._splitCurves(a[t],n-i):n<i&&(i<E.MIM_CURVES_COUNT?(E._splitCurves(e,E.MIM_CURVES_COUNT-n),E._splitCurves(a[t],E.MIM_CURVES_COUNT-i)):E._splitCurves(e,i-n))}),r.forEach(function(e,t){r[t]=o(e,a[t])}),[r,a]},E._lerp=function(e,t,n){var i=[];return e.forEach(function(e,r){var o=[];e.forEach(function(e,i){o.push(E.lerpCurve(e,t[r][i],n))}),i.push(o)}),i},E.animate=function(e){var t=E.path2shapes(e.from),n=E.path2shapes(e.to),i=E._preprocessing(t,n),r=new Date,o=e.end||function(){},s=e.progress||function(){},a=e.begin||function(){},l=e.easing||function(e){return e},u=null,c=null,h=e.time;a(t);!function e(){var t=new Date-r;if(t>=h)return c=n,s(c,1),o(c),void cancelAnimationFrame(u);var a=l(t/h);c=E._lerp(i[0],i[1],a),s(c,a),u=requestAnimationFrame(e)}()},E}()}()}),StartIcon='<svg xmlns="http://www.w3.org/2000/svg" width="70" height="70" viewBox="0 0 70 70">\n<defs>\n  <path class="path_play" transform="scale(0.04,0.04)" d="M576,363L810,512L576,661zM342,214L576,363L576,661L342,810z"></path>\n  <path class="path_pause" transform="scale(0.04 0.04)" d="M598,214h170v596h-170v-596zM256 810v-596h170v596h-170z"></path>\n</defs>\n<path class="path" transform="scale(0.04 0.04)" d="M576,363L810,512L576,661zM342,214L576,363L576,661L342,810z"></path>\n</svg>\n',_createClass$5=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),Util=Plugin.Util,Events$1=Plugin.Events,Start=function(e){function t(){return _classCallCheck$6(this,t),_possibleConstructorReturn$3(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits$3(t,e),_createClass$5(t,[{key:"afterCreate",value:function(){var e=this,t=this.player,n=this.root,i=this.playerConfig;this.once(Events$1.READY,function(){i&&(i.lang&&"en"===i.lang?Util.addClass(n,"lang-is-en"):"jp"===i.lang&&Util.addClass(n,"lang-is-jp"))}),t.config.autoplay||this.show(),this.bind("click",function(n){if(n.preventDefault(),n.stopPropagation(),t.isReady){var i=e.player.paused;e.player.hasStart?i?e.player.play():e.player.pause():(e.player.start(),e.player.once("complete",function(){e.player.play()}))}}),this.on([Events$1.PLAY,Events$1.PAUSE],function(){e.animate()}),this.on(Events$1.AUTOPLAY_PREVENTED,function(){e.show("inline-block"),e.animate(!0)})}},{key:"registerIcons",value:function(){return{start:'<svg xmlns="http://www.w3.org/2000/svg" width="70" height="70" viewBox="0 0 70 70">\n<defs>\n  <path class="path_play" transform="scale(0.04,0.04)" d="M576,363L810,512L576,661zM342,214L576,363L576,661L342,810z"></path>\n  <path class="path_pause" transform="scale(0.04 0.04)" d="M598,214h170v596h-170v-596zM256 810v-596h170v596h-170z"></path>\n</defs>\n<path class="path" transform="scale(0.04 0.04)" d="M576,363L810,512L576,661zM342,214L576,363L576,661L342,810z"></path>\n</svg>\n'}}},{key:"animate",value:function(e){var t=this,n=this.find(".path"),i=this.find(".path_play").getAttribute("d"),r=this.find(".path_pause").getAttribute("d"),o=this.player.paused;pasition.animate({from:n.getAttribute("d"),to:o?r:i,time:400,begin:function(e){t.show(),Util.addClass(t.el,"interact")},end:function(o){Util.removeClass(t.el,"interact"),t.player.paused?(!t.config.isShowPause&&!e&&t.hide(),n.setAttribute("d",i)):(t.hide(),n.setAttribute("d",r))}})}},{key:"render",value:function(){return'\n    <xg-start class="xgplayer-start" >\n      '+this.icons.start+"\n    </xg-start>"}}],[{key:"pluginName",get:function(){return"startplugin"}}]),t}(Plugin),_createClass$6=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),EnterPlugin=function(e){function t(){return _classCallCheck$7(this,t),_possibleConstructorReturn$4(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits$4(t,e),_createClass$6(t,[{key:"render",value:function(){for(var e="",t=1;t<=12;t++)e+='<div class="xgplayer-enter-bar'+t+'"></div>';return'<xg-enter class="xgplayer-enter"><div class="xgplayer-enter-spinner">\n      '+e+"\n    </div></xg-enter>"}}],[{key:"pluginName",get:function(){return"index.scss"}}]),t}(Plugin),_createClass$7=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),PCPlugin=function(e){function t(){return _classCallCheck$8(this,t),_possibleConstructorReturn$5(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits$5(t,e),_createClass$7(t,[{key:"afterCreate",value:function(){this.onVideoClick=this.onVideoClick.bind(this),this.onVideoDblClick=this.onVideoDblClick.bind(this),this.onMouseEnter=this.onMouseEnter.bind(this),this.onMouseLeave=this.onMouseLeave.bind(this),this.onControlMouseEnter=this.onControlMouseEnter.bind(this),this.onControlMouseLeave=this.onControlMouseLeave.bind(this),this.onReady=this.onReady.bind(this),this.onDestroy=this.onDestroy.bind(this),this.initEvents()}},{key:"initEvents",value:function(){var e=this.player;e.video.addEventListener("click",this.onVideoClick,!1),e.video.addEventListener("dblclick",this.onVideoDblClick,!1),this.once(Player.Events.WAITING,this.onEnter.bind(this)),this.once(Player.Events.CANPLAY,this.onEntered.bind(this)),e.root.addEventListener("mouseenter",this.onMouseEnter),e.root.addEventListener("mouseleave",this.onMouseLeave),e.controls.addEventListener("mouseenter",this.onControlMouseEnter,!1),e.controls.addEventListener("mouseleave",this.onControlMouseLeave,!1)}},{key:"onEnter",value:function(){var e=this.player;BasePlugin.Util.addClass(e.root,"xgplayer-is-enter")}},{key:"onEntered",value:function(){var e=this.player;BasePlugin.Util.removeClass(e.root,"xgplayer-is-enter")}},{key:"onVideoClick",value:function(e){e.preventDefault(),e.stopPropagation();var t=this.player,n=0,i=void 0;t.config.closeVideoClick||(n++,i&&clearTimeout(i),1===n?i=setTimeout(function(){if(BasePlugin.Util.hasClass(t.root,"xgplayer-nostart"))return!1;if(!t.ended)if(t.paused){var e=t.play();void 0!==e&&e&&e.catch(function(e){})}else t.pause();n=0},200):n=0)}},{key:"onVideoDblClick",value:function(e){e.preventDefault(),e.stopPropagation();var t=this.player;if(!t.config.closeVideoDblclick){var n=t.controls.querySelector(".xgplayer-fullscreen");if(n){var i=void 0;document.createEvent?(i=document.createEvent("Event")).initEvent("click",!0,!0):i=new Event("click"),n.dispatchEvent(i)}}}},{key:"onMouseEnter",value:function(){var e=this.player;clearTimeout(e.leavePlayerTimer),e.emit("focus",e)}},{key:"onMouseLeave",value:function(){var e=this.player;e.config.closePlayerBlur||(e.leavePlayerTimer=setTimeout(function(){e.emit("blur",e)},e.config.leavePlayerTime||1500))}},{key:"onControlMouseEnter",value:function(){var e=this.player;e.userTimer&&clearTimeout(e.userTimer)}},{key:"onControlMouseLeave",value:function(){var e=this.player;e.config.closeControlsBlur||e.emit("focus",e)}},{key:"onReady",value:function(){var e=this.player;e.config.autoplay&&e.start()}},{key:"onDestroy",value:function(){var e=this.player;e.root.removeEventListener("mouseenter",this.onMouseEnter),e.root.removeEventListener("mouseleave",this.onMouseLeave),e.off("ready",this.onReady),e.off("destroy",this.onDestroy)}}],[{key:"pluginName",get:function(){return"pc"}}]),t}(BasePlugin),_createClass$8=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),MobilePlugin=function(e){function t(e){_classCallCheck$9(this,t);var n=_possibleConstructorReturn$6(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.isTouchMove=!1,n}return _inherits$6(t,e),_createClass$8(t,null,[{key:"pluginName",get:function(){return"mobile"}}]),_createClass$8(t,[{key:"afterCreate",value:function(){var e=this,t=this.player;t.video.addEventListener("touchend",function(t){e.onTouchEnd(t)},!1),t.video.addEventListener("touchstart",function(){e.isTouchMove=!1}),t.video.addEventListener("touchmove",function(){e.isTouchMove=!0})}},{key:"onTouchEnd",value:function(e){e.preventDefault();var t=BasePlugin.Util;e.stopPropagation();var n=this.player,i=this.playerConfig;if(t.hasClass(n.root,"xgplayer-inactive")?n.emit("focus"):n.emit("blur"),!i.closeVideoTouch&&!n.isTouchMove){if(t.hasClass(n.root,"xgplayer-nostart"))return!1;if(!n.ended)if(n.paused){var r=n.play();void 0!==r&&r&&r.catch(function(e){})}else n.pause()}}}]),t}(BasePlugin),_createClass$9=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),_get$1=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var s=r.get;if(void 0!==s)return s.call(i)},Keyboard=function(e){function t(){return _classCallCheck$a(this,t),_possibleConstructorReturn$7(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits$7(t,e),_createClass$9(t,[{key:"afterCreate",value:function(){this.onKeydown=this.onKeydown.bind(this),this.player.root.addEventListener("keydown",this.onKeydown)}},{key:"onKeydown",value:function(e){var t=this.player,n=BasePlugin.Util,i=e||window.event;if(!i||37!==i.keyCode&&38!==i.keyCode&&39!==i.keyCode&&40!==i.keyCode&&32!==i.keyCode||t.emit("focus"),!i||40!==i.keyCode&&38!==i.keyCode)i&&39===i.keyCode?t.currentTime+10<=t.duration?t.currentTime+=10:t.currentTime=t.duration-1:i&&37===i.keyCode?t.currentTime-10>=0?t.currentTime-=10:t.currentTime=0:i&&32===i.keyCode&&(t.paused?t.play().catch(function(e){}):t.pause());else{if(t.controls){var r=t.controls.querySelector(".xgplayer-slider");r&&(n.hasClass(r,"xgplayer-none")&&n.removeClass(r,"xgplayer-none"),t.sliderTimer&&clearTimeout(t.sliderTimer),t.sliderTimer=setTimeout(function(){n.addClass(r,"xgplayer-none")},t.config.inactive))}i&&40===i.keyCode?t.volume-.1>=0?t.volume=parseFloat((t.volume-.1).toFixed(1)):t.volume=0:i&&38===i.keyCode&&(t.volume+.1<=1?t.volume=parseFloat((t.volume+.1).toFixed(1)):t.volume=1)}}},{key:"_destroy",value:function(){_get$1(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_destroy",this).call(this),this.player.root.removeEventListener("keydown",this.onKeydown)}}],[{key:"pluginName",get:function(){return"Keyboard"}}]),t}(BasePlugin),loadingIcon='<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewbox="0 0 100 100">\n  <path d="M100,50A50,50,0,1,1,50,0"></path>\n</svg>\n',_createClass$a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),Loading=function(e){function t(){return _classCallCheck$b(this,t),_possibleConstructorReturn$8(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits$8(t,e),_createClass$a(t,[{key:"registerIcons",value:function(){return{loadingIcon:'<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewbox="0 0 100 100">\n  <path d="M100,50A50,50,0,1,1,50,0"></path>\n</svg>\n'}}},{key:"render",value:function(){return'\n    <xg-loading class="xgplayer-loading">\n      '+this.icons.loadingIcon+"\n    </xg-loading>"}}]),t}(Plugin),DefaultPreset=function e(){var t,n;switch(_classCallCheck$c(this,e),this.plugins=[Replay,Poster,Start,Loading,EnterPlugin],sniffer.device){case"pc":(t=this.plugins).push.apply(t,[Keyboard,PCPlugin]);break;case"mobile":this.plugins.push(MobilePlugin);break;default:(n=this.plugins).push.apply(n,[Keyboard,PCPlugin])}this.ignores=[]},usePreset=function(e,t){var n,i,r=void 0,o=r=t.preset&&t.options?new t.preset(t.options):new t,s=o.plugins,a=o.ignores;e.config.plugins||(e.config.plugins=[]),e.config.ignores||(e.config.ignores=[]),(n=e.config.plugins).push.apply(n,_toConsumableArray(s)),(i=e.config.ignores).push.apply(i,_toConsumableArray(a))},_typeof$2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_createClass$b=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),defaultDot={time:10,text:"",duration:1,style:{},color:"#fff"},Util$1=Plugin.Util,Events$2=Plugin.Events,ProgressDot=function(e){function t(e){_classCallCheck$d(this,t);var n=_possibleConstructorReturn$9(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.dotsList={},n}return _inherits$9(t,e),_createClass$b(t,null,[{key:"pluginName",get:function(){return"ProgressDots"}},{key:"defaultConfig",get:function(){return{dots:[]}}}]),_createClass$b(t,[{key:"afterCreate",value:function(){var e=this;this.once(Events$2.CANPLAY,function(){var t=e.config.dots;t&&Array.isArray(t)&&(t.map(function(t){e.createDotDom(t)}),e.initEvents())})}},{key:"initEvents",value:function(){}},{key:"addDot",value:function(e,t,n){var i=null;i=1===arguments.length&&"object"===(void 0===e?"undefined":_typeof$2(e))?arguments[0]:{time:e,text:t,duration:n},i=Util$1.deepCopy(arguments[0],defaultDot),this.createDotDom(i)}},{key:"removeDot",value:function(e){var t=this.player;if(e>=0&&e<=t.duration&&this.dotsList[e]){var n=this.dotsList[e];n.parentNode.removeChild(n),n=null,this.dotsList[e]=null}}},{key:"removeAllProgressDots",value:function(){var e=this;Object.keys(this.dotsList).forEach(function(t){if(e.dotsList[t]){var n=e.dotsList[t];n.parentNode.removeChild(n),n=null,e.dotsList[t]=null}})}},{key:"createDotDom",value:function(e){var t=this.player,n=Util$1.createDom("xg-progress-dot",e.text?'<span class="xgplayer-progress-tip">'+e.text+"</span>":"",{},"xgplayer-progress-dot"),i=e.style||{};i.left=e.time/t.duration*100+"%",i.width=Math.min(e.duration,t.duration-e.time)/t.duration*100+"%",Object.keys(i).map(function(e){n.style[e]=i[e]}),this.dotsList[e.time]=n,this.el.appendChild(n)}},{key:"render",value:function(){return"<xg-dots></xg-dots>"}},{key:"destroy",value:function(){}}]),t}(Plugin),_createClass$c=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),Events$3=Plugin.Events,Util$2=Plugin.Util,defaultThumbnailConfig={isShow:!1,urls:[],pic_num:0,row:0,col:0,height:160,width:90,scale:1},Progress=function(e){function t(e){_classCallCheck$e(this,t);var n=_possibleConstructorReturn$a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.useable=!1,n.isProgressMoving=!1,n}return _inherits$a(t,e),_createClass$c(t,null,[{key:"pluginName",get:function(){return"Progress"}},{key:"defaultConfig",get:function(){return{progressDot:[]}}}]),_createClass$c(t,[{key:"changeState",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.useable=e}},{key:"afterCreate",value:function(){var e=this;this.playedBar=this.find(".xgplayer-progress-played"),this.cachedBar=this.find(".xgplayer-progress-cache"),this.pointTip=this.find(".xgplayer-progress-point"),this.progressBtn=this.find(".xgplayer-progress-btn"),this.thumbnailDom=this.find("xg-thumbnail"),this.initThumbnail(),this.on(Events$3.TIME_UPDATE,function(){e.onTimeupdate(),e.onCacheUpdate()}),this.on([Events$3.BUFFER_CHANGE,Events$3.ENDED],function(){e.onCacheUpdate()}),this.bindDomEvents()}},{key:"children",value:function(){return{ProgressDots:{plugin:ProgressDot,options:{root:this.find("xg-outer"),dots:this.playerConfig.progressDot}}}}},{key:"initThumbnail",value:function(){var e=this;if(this.playerConfig.thumbnail){var t=this.playerConfig.thumbnail;this.thumbnailConfig={},Object.keys(defaultThumbnailConfig).map(function(n){void 0===t[n]?e.thumbnailConfig[n]=defaultThumbnailConfig[n]:e.thumbnailConfig[n]=t[n]});var n=this.thumbnailConfig,i=n.width,r=n.height,o=n.scale;this.thumbnailDom.style.width=i*o+"px",this.thumbnailDom.style.height=r*o+"px"}}},{key:"bindDomEvents",value:function(){var e=this;this.mouseDown=this.mouseDown.bind(this),this.mouseMove=this.mouseMove.bind(this),this.mouseEnter=this.mouseEnter.bind(this),this.mouseLeave=this.mouseLeave.bind(this),["touchstart","mousedown"].forEach(function(t){e.el.addEventListener(t,e.mouseDown)}),this.el.addEventListener("mouseenter",this.mouseEnter,!1)}},{key:"mouseDown",value:function(e){var t=this.player,n=this;if(e.stopPropagation(),Util$2.event(e),e.target===this.pointTip||!t.config.allowSeekAfterEnded&&t.ended)return!0;this.el.focus();var i=this.el.getBoundingClientRect().width,r=this.playedBar.getBoundingClientRect().left,o=function(e){e.preventDefault(),e.stopPropagation(),Util$2.event(e),n.isProgressMoving=!0;var o=e.clientX-r;o>i&&(o=i);var s=o/i*t.duration;n.playedBar.style.width=100*o/i+"%","video"!==t.videoConfig.mediaType||t.dash||t.config.closeMoveSeek?n.updateTime(s):t.currentTime=Number(s).toFixed(1),t.emit("focus")},s=function e(s){if(s.stopPropagation(),Util$2.event(s),window.removeEventListener("mousemove",o),window.removeEventListener("touchmove",o,{passive:!1}),window.removeEventListener("mouseup",e),window.removeEventListener("touchend",e),n.el.blur(),!n.isProgressMoving||"audio"===t.videoConfig.mediaType||t.dash||t.config.closeMoveSeek){var a=s.clientX-r;a>i&&(a=i);var l=a/i*t.duration;n.playedBar.style.width=100*a/i+"%",t.currentTime=Number(l).toFixed(1)}t.emit("focus"),n.isProgressMoving=!1};return window.addEventListener("mousemove",o),window.addEventListener("touchmove",o,{passive:!1}),window.addEventListener("mouseup",s),window.addEventListener("touchend",s),!0}},{key:"mouseEnter",value:function(e){var t=this.player;if(!t.config.allowSeekAfterEnded&&t.ended)return!0;this.el.addEventListener("mousemove",this.mouseMove,!1),this.el.addEventListener("mouseleave",this.mouseLeave,!1)}},{key:"mouseLeave",value:function(e){this.pointTip.style.display="none",this.thumbnailDom.style.display="none",this.el.removeEventListener("mousemove",this.mouseMove,!1),this.el.removeEventListener("mouseleave",this.mouseLeave,!1)}},{key:"mouseMove",value:function(e){var t=this.player,n=this.el.getBoundingClientRect().left,i=this.el.getBoundingClientRect().width,r=(e.clientX-n)/i*t.duration;r=r<0?0:r,this.pointTip.textContent=Util$2.format(r);var o=this.pointTip.getBoundingClientRect().width,s=e.clientX-n-o/2;s=(s=s>0?s:0)>i-o?i-o:s,this.pointTip.style.left=s+"px",e.target&&"xgplayer-progress-dot"===e.target.className?this.pointTip.style.display="none":this.pointTip.style.display="block",this.updateThumbnailPosition(e,r,i)}},{key:"updateThumbnailPosition",value:function(e,t,n){var i=this,r=this.thumbnailConfig;if(0!==!r.pic_num&&0!==r.urls.length){this.interval=this.player.duration/r.pic_num;var o=Math.floor(t/this.interval),s=r.urls,a=r.row,l=r.col,u=r.height,c=r.width,h=r.scale,f=o+1-l*a*(Math.ceil((o+1)/(l*a))-1),p=Math.ceil(f/a)-1,d=f-p*a-1,y=e.clientX-c*h/2;y=(y=y>0?y:0)<n-c*h?y:n-c*h;var v={backgroundImage:"url("+s[Math.ceil((o+1)/(l*a))-1]+")","background-position":"-"+d*c+"px -"+p*u+"px",left:y+"px",top:-10-u*h+"px",display:"block"};Object.keys(v).map(function(e){i.thumbnailDom.style[e]=v[e]})}}},{key:"updateTime",value:function(e){var t=this.player.plugins.timeicon;t&&t.updateTime(e)}},{key:"compute",value:function(e){var t=this.el.getBoundingClientRect().left,n=this.el.getBoundingClientRect().width,i=this.pointTip.getBoundingClientRect().width,r=e.clientX-t-i/2;r=(r=r>0?r:0)>n-i?n-i:r,this.pointTip.style.left=r+"px"}},{key:"onTimeupdate",value:function(){var e=this.player;e.isSeeking||"audio"===e.videoConfig.mediaType&&this.isProgressMoving&&e.dash||(this.playedBar.style.width=100*e.currentTime/e.duration+"%")}},{key:"onCacheUpdate",value:function(){var e=this.player,t=e.buffered;if(t&&t.length>0){for(var n=t.end(t.length-1),i=0,r=t.length;i<r;i++)if(e.currentTime>=t.start(i)&&e.currentTime<=t.end(i)){n=t.end(i);for(var o=i+1;o<t.length;o++)if(t.start(o)-t.end(o-1)>=2){n=t.end(o-1);break}break}this.cachedBar.style.width=n/e.duration*100+"%"}}},{key:"destroy",value:function(){var e=this;["touchstart","mousedown"].forEach(function(t){e.el.removeEventListener(t,e.mouseDown)}),this.el.removeEventListener("mouseenter",this.mouseEnter,!1)}},{key:"render",value:function(){return'\n      <xg-progress class="xgplayer-progress">\n        <xg-outer class="xgplayer-progress-outer">\n          <xg-cache class="xgplayer-progress-cache" style="width:0">\n          </xg-cache>\n          <xg-played class="xgplayer-progress-played" style="width:0">\n            <xg-progress-btn class="xgplayer-progress-btn"></xg-progress-btn>\n            <xg-point class="xgplayer-progress-point xg-tips">00:00</xg-point>\n            <xg-thumbnail class="xgplayer-progress-thumbnail xg-tips"></xg-thumbnail>\n          </xg-played>\n        </xg-outer>\n      </xg-progress>\n    '}}]),t}(Plugin),PlayPauseSvg='<svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 40 40">\n  <defs>\n  <path class="path_play" transform="scale(0.0320625 0.0320625)" d="M576,363L810,512L576,661zM342,214L576,363L576,661L342,810z"></path>\n  <path class="path_pause" transform="scale(0.0320625 0.0320625)" d="M598,214h170v596h-170v-596zM256 810v-596h170v596h-170z"></path>\n  </defs>\n  <path class="path" transform="scale(0.0320625 0.0320625)" d="M576,363L810,512L576,661zM342,214L576,363L576,661L342,810z"></path>\n</svg>\n',_createClass$d=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),Events$4=Plugin.Events,PlayIcon=function(e){function t(){return _classCallCheck$f(this,t),_possibleConstructorReturn$b(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits$b(t,e),_createClass$d(t,[{key:"afterCreate",value:function(){var e=this,t=this.player;this.btnClick=this.btnClick.bind(this),this.bind(["touchend","click"],this.btnClick),this.on(Events$4.PAUSE,function(){e.find(".xg-tips").innerHTML=e.text.play,e.animate(t.paused)}),this.on(Events$4.PLAY,function(){e.find(".xg-tips").innerHTML=e.text.pause,e.animate(t.paused)})}},{key:"btnClick",value:function(e){var t=this.player;t.paused?t.play():t.pause()}},{key:"registerLangauageTexts",value:function(){return{play:{jp:"play",en:"play",zh:"播放"},pause:{jp:"pause",en:"pause",zh:"暂停"}}}},{key:"registerIcons",value:function(){return{playIcon:'<svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 40 40">\n  <defs>\n  <path class="path_play" transform="scale(0.0320625 0.0320625)" d="M576,363L810,512L576,661zM342,214L576,363L576,661L342,810z"></path>\n  <path class="path_pause" transform="scale(0.0320625 0.0320625)" d="M598,214h170v596h-170v-596zM256 810v-596h170v596h-170z"></path>\n  </defs>\n  <path class="path" transform="scale(0.0320625 0.0320625)" d="M576,363L810,512L576,661zM342,214L576,363L576,661L342,810z"></path>\n</svg>\n'}}},{key:"animate",value:function(e){var t=this.find(".path"),n=this.find(".path_play").getAttribute("d"),i=this.find(".path_pause").getAttribute("d");e?t.setAttribute("d",n):t.setAttribute("d",i)}},{key:"destroy",value:function(){this.unbind(["touchend","click"],this.btnClick)}},{key:"render",value:function(){return'<xg-icon class="xgplayer-play">\n    <div class="xgplayer-icon">\n    '+this.icons.playIcon+'\n    </div>\n    <div class="xg-tips">'+(this.player.paused?this.text.play:this.text.pause)+"</div>\n    </xg-icon>"}}],[{key:"pluginName",get:function(){return"PlayIcon"}}]),t}(Plugin),FullScreenChangeSvg='<svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 40 40">\n  <defs>\n  <path class="path_full" transform="scale(0.0320625 0.0320625)" d="M598 214h212v212h-84v-128h-128v-84zM726 726v-128h84v212h-212v-84h128zM214 426v-212h212v84h-128v128h-84zM298 598v128h128v84h-212v-212h84z"></path>\n  <path class="path_exitfull" transform="scale(0.0320625 0.0320625)" d="M682 342h128v84h-212v-212h84v128zM598 810v-212h212v84h-128v128h-84zM342 342v-128h84v212h-212v-84h128zM214 682v-84h212v212h-84v-128h-128z"></path>\n  </defs>\n  <path class="path" transform="scale(0.0320625 0.0320625)" d="M598 214h212v212h-84v-128h-128v-84zM726 726v-128h84v212h-212v-84h128zM214 426v-212h212v84h-128v128h-84zM298 598v128h128v84h-212v-212h84z"></path>\n</svg>\n',_createClass$e=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),Events$5=Plugin.Events,Fullscreen=function(e){function t(){return _classCallCheck$g(this,t),_possibleConstructorReturn$c(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits$c(t,e),_createClass$e(t,[{key:"afterCreate",value:function(){var e=this;this.btnClick=this.btnClick.bind(this),this.bind(["click","touchend"],this.btnClick),this.on(Events$5.FULLSCREEN_CHANGE,function(t){e.find(".xg-tips").innerHTML=t?e.text.exitFullscreen:e.text.fullscreen,e.animate(t)})}},{key:"btnClick",value:function(e){var t=this.player;t.fullscreen?t.exitFullscreen():t.getFullscreen()}},{key:"animate",value:function(e){var t=this.find(".path"),n=this.find(".path_full").getAttribute("d"),i=this.find(".path_exitfull").getAttribute("d");e?t.setAttribute("d",i):t.setAttribute("d",n)}},{key:"registerLangauageTexts",value:function(){return{fullscreen:{jp:"フルスクリーン",en:"Fullscreen",zh:"进入全屏"},exitFullscreen:{jp:"フルスクリーン",en:"Exit fullscreen",zh:"退出全屏"}}}},{key:"registerIcons",value:function(){return{fullscreenChange:'<svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 40 40">\n  <defs>\n  <path class="path_full" transform="scale(0.0320625 0.0320625)" d="M598 214h212v212h-84v-128h-128v-84zM726 726v-128h84v212h-212v-84h128zM214 426v-212h212v84h-128v128h-84zM298 598v128h128v84h-212v-212h84z"></path>\n  <path class="path_exitfull" transform="scale(0.0320625 0.0320625)" d="M682 342h128v84h-212v-212h84v128zM598 810v-212h212v84h-128v128h-84zM342 342v-128h84v212h-212v-84h128zM214 682v-84h212v212h-84v-128h-128z"></path>\n  </defs>\n  <path class="path" transform="scale(0.0320625 0.0320625)" d="M598 214h212v212h-84v-128h-128v-84zM726 726v-128h84v212h-212v-84h128zM214 426v-212h212v84h-128v128h-84zM298 598v128h128v84h-212v-212h84z"></path>\n</svg>\n'}}},{key:"destroy",value:function(){this.unbind(["click","touchend"],this.btnClick)}},{key:"render",value:function(){return'<xg-icon class="xgplayer-fullscreen">\n    <div class="xgplayer-icon">\n    '+this.icons.fullscreenChange+'\n    </div>\n    <div class="xg-tips">'+(this.player.isFullScreen?this.text.exitFullscreen:this.text.fullscreen)+"</div>\n    </xg-icon>"}}],[{key:"pluginName",get:function(){return"fullscreen"}}]),t}(Plugin),_createClass$f=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),Util$3=Plugin.Util,Events$6=Plugin.Events,TimeIcon=function(e){function t(){return _classCallCheck$h(this,t),_possibleConstructorReturn$d(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits$d(t,e),_createClass$f(t,[{key:"onTimeUpdate",value:function(){var e=this.player,t=e.currentTime;this.timeDom.innerHTML=Util$3.format(t),e.duration!==1/0&&(this.durationDom.innerHTML=Util$3.format(e.duration))}},{key:"afterCreate",value:function(){var e=this,t=this.player;this.durationDom=this.find(".time-duration"),this.timeDom=this.find(".time-current"),this.once(Events$6.READY,function(){t.duration===1/0||e.playerConfig.isLive?(Util$3.hide(e.durationDom),Util$3.hide(e.timeDom),Util$3.hide(e.find(".time-separator")),Util$3.show(e.find(".time-live-tag"))):Util$3.hide(e.find(".time-live-tag")),e.show()}),this.on(Events$6.DURATION_CHANGE,function(){e.onTimeUpdate()}),this.on(Events$6.TIME_UPDATE,function(){e.onTimeUpdate()})}},{key:"changeLiveState",value:function(e){e?(Util$3.hide(this.durationDom),Util$3.hide(this.timeDom),Util$3.hide(this.find(".time-separator")),Util$3.show(this.find(".time-live-tag"))):(Util$3.hide(this.find(".time-live-tag")),Util$3.show(this.find(".time-separator")),Util$3.show(this.durationDom),Util$3.show(this.timeDom))}},{key:"updateTime",value:function(e){var t=this.player;!e&&0!==e||e>t.duration||(this.timeDom.innerHTML=Util$3.format(e))}},{key:"render",value:function(){return'<xg-icon class="xgplayer-time" style="display:none">\n    <span class="time-current">00:00</span>\n    <span class="time-separator">/</span>\n    <span class="time-duration">00:00</span>\n    <span class="time-live-tag">直播</span>\n    </xg-icon>'}}],[{key:"pluginName",get:function(){return"TimeIcon"}}]),t}(Plugin),volumeChange='<svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 28 28">\n  <path transform="scale(0.0220625 0.0220625)" d="M358.4 358.4h-204.8v307.2h204.8l256 256v-819.2l-256 256z"></path>\n  <defs>\n  <path class="path_large" transform="scale(0.0220625 0.0220625)" d="M940.632 837.632l-72.192-72.192c65.114-64.745 105.412-154.386 105.412-253.44s-40.299-188.695-105.396-253.424l-0.016-0.016 72.192-72.192c83.639 83.197 135.401 198.37 135.401 325.632s-51.762 242.434-135.381 325.612l-0.020 0.020zM795.648 693.248l-72.704-72.704c27.756-27.789 44.921-66.162 44.921-108.544s-17.165-80.755-44.922-108.546l0.002 0.002 72.704-72.704c46.713 46.235 75.639 110.363 75.639 181.248s-28.926 135.013-75.617 181.227l-0.021 0.021z"></path>\n  \x3c!--muted--\x3e\n  <path class="path_muted" transform="scale(0.0220625 0.0220625)" d="M920.4 439.808l-108.544-109.056-72.704 72.704 109.568 108.544-109.056 108.544 72.704 72.704 108.032-109.568 108.544 109.056 72.704-72.704-109.568-108.032 109.056-108.544-72.704-72.704-108.032 109.568z"></path>\n  \x3c!--small--\x3e\n  <path class="path_small" transform="scale(0.0220625 0.0220625)" d="M795.648 693.248l-72.704-72.704c27.756-27.789 44.921-66.162 44.921-108.544s-17.165-80.755-44.922-108.546l0.002 0.002 72.704-72.704c46.713 46.235 75.639 110.363 75.639 181.248s-28.926 135.013-75.617 181.227l-0.021 0.021zM795.648 693.248l-72.704-72.704c27.756-27.789 44.921-66.162 44.921-108.544s-17.165-80.755-44.922-108.546l0.002 0.002 72.704-72.704c46.713 46.235 75.639 110.363 75.639 181.248s-28.926 135.013-75.617 181.227l-0.021 0.021z"></path>\n  </defs>\n  <path class="path" transform="scale(0.0220625 0.0220625)" d="M940.632 837.632l-72.192-72.192c65.114-64.745 105.412-154.386 105.412-253.44s-40.299-188.695-105.396-253.424l-0.016-0.016 72.192-72.192c83.639 83.197 135.401 198.37 135.401 325.632s-51.762 242.434-135.381 325.612l-0.020 0.020zM795.648 693.248l-72.704-72.704c27.756-27.789 44.921-66.162 44.921-108.544s-17.165-80.755-44.922-108.546l0.002 0.002 72.704-72.704c46.713 46.235 75.639 110.363 75.639 181.248s-28.926 135.013-75.617 181.227l-0.021 0.021z"></path>\n</svg>\n',_createClass$g=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),Util$4=Plugin.Util,Events$7=Plugin.Events,VolumeIcon=function(e){function t(){return _classCallCheck$i(this,t),_possibleConstructorReturn$e(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits$e(t,e),_createClass$g(t,[{key:"registerIcons",value:function(){return{volumeChange:'<svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 28 28">\n  <path transform="scale(0.0220625 0.0220625)" d="M358.4 358.4h-204.8v307.2h204.8l256 256v-819.2l-256 256z"></path>\n  <defs>\n  <path class="path_large" transform="scale(0.0220625 0.0220625)" d="M940.632 837.632l-72.192-72.192c65.114-64.745 105.412-154.386 105.412-253.44s-40.299-188.695-105.396-253.424l-0.016-0.016 72.192-72.192c83.639 83.197 135.401 198.37 135.401 325.632s-51.762 242.434-135.381 325.612l-0.020 0.020zM795.648 693.248l-72.704-72.704c27.756-27.789 44.921-66.162 44.921-108.544s-17.165-80.755-44.922-108.546l0.002 0.002 72.704-72.704c46.713 46.235 75.639 110.363 75.639 181.248s-28.926 135.013-75.617 181.227l-0.021 0.021z"></path>\n  \x3c!--muted--\x3e\n  <path class="path_muted" transform="scale(0.0220625 0.0220625)" d="M920.4 439.808l-108.544-109.056-72.704 72.704 109.568 108.544-109.056 108.544 72.704 72.704 108.032-109.568 108.544 109.056 72.704-72.704-109.568-108.032 109.056-108.544-72.704-72.704-108.032 109.568z"></path>\n  \x3c!--small--\x3e\n  <path class="path_small" transform="scale(0.0220625 0.0220625)" d="M795.648 693.248l-72.704-72.704c27.756-27.789 44.921-66.162 44.921-108.544s-17.165-80.755-44.922-108.546l0.002 0.002 72.704-72.704c46.713 46.235 75.639 110.363 75.639 181.248s-28.926 135.013-75.617 181.227l-0.021 0.021zM795.648 693.248l-72.704-72.704c27.756-27.789 44.921-66.162 44.921-108.544s-17.165-80.755-44.922-108.546l0.002 0.002 72.704-72.704c46.713 46.235 75.639 110.363 75.639 181.248s-28.926 135.013-75.617 181.227l-0.021 0.021z"></path>\n  </defs>\n  <path class="path" transform="scale(0.0220625 0.0220625)" d="M940.632 837.632l-72.192-72.192c65.114-64.745 105.412-154.386 105.412-253.44s-40.299-188.695-105.396-253.424l-0.016-0.016 72.192-72.192c83.639 83.197 135.401 198.37 135.401 325.632s-51.762 242.434-135.381 325.612l-0.020 0.020zM795.648 693.248l-72.704-72.704c27.756-27.789 44.921-66.162 44.921-108.544s-17.165-80.755-44.922-108.546l0.002 0.002 72.704-72.704c46.713 46.235 75.639 110.363 75.639 181.248s-28.926 135.013-75.617 181.227l-0.021 0.021z"></path>\n</svg>\n'}}},{key:"afterCreate",value:function(){this.bar=this.find(".xgplayer-bar"),this.drag=this.find(".xgplayer-drag"),this.changeMuted=this.changeMuted.bind(this),this.onBarMousedown=this.onBarMousedown.bind(this),this.onMouseenter=this.onMouseenter.bind(this),this.onMouseleave=this.onMouseleave.bind(this),this.bind("mouseenter",this.onMouseenter),this.bind(["blur","mouseleave"],this.onMouseleave),this.bind(".xgplayer-bar","mousedown",this.onBarMousedown),this.bind(".xgplayer-icon",["click","touched"],this.changeMuted),this.on(Events$7.VOLUME_CHANGE,this.onVolumeChange.bind(this))}},{key:"onBarMousedown",value:function(e){var t=this.player;t.video.muted=!1;var n=this.drag,i=this.find(".xgplayer-slider");i.focus(),Util$4.event(e);var r=this.bar.getBoundingClientRect(),o={x:e.clientX,y:e.clientY},s=n.getBoundingClientRect().height,a=!1,l=function(e){e.preventDefault(),e.stopPropagation(),Util$4.event(e),a=!0;var i=s-e.clientY+o.y,l=i/r.height;n.style.height=i+"px",t.volume=Math.max(Math.min(l,1),0)},u=function e(o){if(o.preventDefault(),o.stopPropagation(),Util$4.event(o),window.removeEventListener("mousemove",l),window.removeEventListener("touchmove",l),window.removeEventListener("mouseup",e),window.removeEventListener("touchend",e),!a){var s=r.height-(o.clientY-r.top),u=s/r.height;n.style.height=s+"px",u<=0&&(t.volume>0?n.volume=t.video.volume:u=n.volume),t.volume=Math.max(Math.min(u,1),0)}i.volume=t.volume,a=!1};return window.addEventListener("mousemove",l),window.addEventListener("touchmove",l),window.addEventListener("mouseup",u),window.addEventListener("touchend",u),!1}},{key:"onMouseenter",value:function(e){e.preventDefault(),e.stopPropagation(),Util$4.addClass(this.el,"slide-show")}},{key:"onMouseleave",value:function(e){console.log("mouseleave"),e.preventDefault(),e.stopPropagation(),Util$4.removeClass(this.el,"slide-show")}},{key:"changeMuted",value:function(){var e=this.player;e.muted=!e.muted}},{key:"onVolumeChange",value:function(){var e=this.player,t=e.muted,n=e.volume;this.find(".xgplayer-drag").style.height=t||0===n?"0px":100*n+"%",this.animate(t,n)}},{key:"animate",value:function(e,t){var n=this.find(".path"),i=this.find(".path_large").getAttribute("d"),r=this.find(".path_small").getAttribute("d"),o=this.find(".path_muted").getAttribute("d");e||0===t?n.setAttribute("d",o):t>=.5?n.setAttribute("d",i):n.setAttribute("d",r)}},{key:"render",value:function(){var e=this.player.volume;return'\n    <xg-icon class="xgplayer-volume">\n      <div class="xgplayer-icon">\n      '+this.icons.volumeChange+'\n      </div>\n      <xg-slider class="xgplayer-slider">\n        <xg-bar class="xgplayer-bar">\n          <xg-drag class="xgplayer-drag" style="height: '+100*e+'%"></xg-drag>\n        </xg-bar>\n      </xg-slider>\n    </xg-icon>'}}],[{key:"pluginName",get:function(){return"VolumeIcon"}}]),t}(Plugin),RotateIcon='<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 40 40" fill="none">\n  <g clip-path="url(#clip0)">\n    <path transform="scale(1.5 1.5)" d="M11.6665 9.16663H4.1665C2.78579 9.16663 1.6665 10.2859 1.6665 11.6666V15.8333C1.6665 17.214 2.78579 18.3333 4.1665 18.3333H11.6665C13.0472 18.3333 14.1665 17.214 14.1665 15.8333V11.6666C14.1665 10.2859 13.0472 9.16663 11.6665 9.16663Z" fill="white"/>\n    <path transform="scale(1.5 1.5)" fill-rule="evenodd" clip-rule="evenodd" d="M3.88148 4.06298C3.75371 4.21005 3.67667 4.40231 3.67749 4.61242C3.67847 4.87253 3.79852 5.10435 3.98581 5.25646L6.99111 8.05895C7.32771 8.37283 7.85502 8.35443 8.16891 8.01782C8.48279 7.68122 8.46437 7.15391 8.12778 6.84003L6.62061 5.43457L9.8198 5.4224C9.82848 5.42239 9.8372 5.42221 9.84591 5.4219C10.9714 5.38233 12.0885 5.6285 13.0931 6.13744C14.0976 6.64635 14.957 7.40148 15.5908 8.33234C16.2246 9.2632 16.6122 10.3394 16.7177 11.4606C16.823 12.5819 16.6427 13.7115 16.1934 14.7442C16.0098 15.1661 16.203 15.6571 16.6251 15.8408C17.0471 16.0243 17.5381 15.8311 17.7216 15.4091C18.2833 14.1183 18.5087 12.7063 18.3771 11.3047C18.2453 9.90318 17.7607 8.55792 16.9684 7.39433C16.1761 6.23073 15.1021 5.28683 13.8463 4.65065C12.5946 4.01651 11.203 3.70872 9.80072 3.75583L6.43415 3.76862L7.96326 2.12885C8.27715 1.79225 8.25872 1.26494 7.92213 0.951061C7.58553 0.63718 7.05822 0.655585 6.74433 0.99219L3.90268 4.0395C3.89545 4.04724 3.88841 4.05509 3.88154 4.06303L3.88148 4.06298Z" fill="white"/>\n  </g>\n  <defs>\n    <clipPath id="clip0">\n      <rect width="40" height="40" fill="white"/>\n    </clipPath>\n  </defs>\n</svg>\n',_createClass$h=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),Rotate=function(e){function t(){return _classCallCheck$j(this,t),_possibleConstructorReturn$f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits$f(t,e),_createClass$h(t,[{key:"afterCreate",value:function(){this.updateRotateDeg=this.updateRotateDeg.bind(this),this.rotate=this.rotate.bind(this),this.bind(".xgplayer-icon",["click","touchend"],this.rotate)}},{key:"destroy",value:function(){this.unbind(".xgplayer-icon",["click","touchend"],this.rotate)}},{key:"updateRotateDeg",value:function(){var e=this.player;e.rotateDeg||(e.rotateDeg=0);var t=e.root.offsetWidth,n=e.root.offsetHeight,i=e.video.videoWidth,r=e.video.videoHeight;this.config.innerRotate;var o=void 0;if(.25===e.rotateDeg||.75===e.rotateDeg){if(this.config.innerRotate)if(i/r>n/t){o=n/(r/i>n/t?n*i/r:t)}else{o=t/(r/i>n/t?n:t*r/i)}else o=t>=n?t/n:n/t;o=parseFloat(o.toFixed(5))}else o=1;this.config.innerRotate?(e.video.style.transformOrigin="center center",e.video.style.transform="rotate("+e.rotateDeg+"turn) scale("+o+")",e.video.style.webKitTransform="rotate("+e.rotateDeg+"turn) scale("+o+")"):(e.root.style.transformOrigin="center center",e.root.style.transform="rotate("+e.rotateDeg+"turn) scale(1)",e.root.style.webKitTransform="rotate("+e.rotateDeg+"turn) scale(1)")}},{key:"rotate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=this.player;n.rotateDeg||(n.rotateDeg=0);var i=e?1:-1;n.rotateDeg=(n.rotateDeg+1+.25*i*t)%1,this.updateRotateDeg(),n.emit("rotate",360*n.rotateDeg)}},{key:"registerIcons",value:function(){return{rotate:RotateIcon}}},{key:"registerLangauageTexts",value:function(){return{rotate:{jp:"日文text",en:"rotate",zh:"旋转屏幕"}}}},{key:"render",value:function(){return'\n    <xg-icon class="xgplayer-rotate">\n      <div class="xgplayer-icon">\n        '+RotateIcon+'\n      </div>\n      <div class="xg-tips">\n      '+this.text.rotate+"\n      </div>\n    </xg-icon>"}}],[{key:"pluginName",get:function(){return"rotate"}}]),t}(Plugin),_createClass$i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),Util$5=Plugin.Util,MiniScreen=function(e){function t(){return _classCallCheck$k(this,t),_possibleConstructorReturn$g(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits$g(t,e),_createClass$i(t,[{key:"afterCreate",value:function(){this.getMini=this.getMini.bind(this),this.exitMini=this.exitMini.bind(this),this.bind(["click","touchend"],this.getMini)}},{key:"getMini",value:function(){var e=this,t=this.player,n=Util$5.createDom("xg-pip-lay","<div></div>",{},"xgplayer-pip-lay");t.root.appendChild(n);var i=Util$5.createDom("xg-pip-drag",'<div class="drag-handle"><span>点击按住可拖动视频</span></div>',{tabindex:9},"xgplayer-pip-drag");t.root.appendChild(i),Util$5.addClass(this.root,"xgplayer-pip-active"),t.root.style.right=0,t.root.style.bottom="200px",t.root.style.top="",t.root.style.left="",t.root.style.width="320px",t.root.style.height="180px",t.config.pipConfig&&(void 0!==t.config.pipConfig.top&&(t.root.style.top=t.config.pipConfig.top+"px",t.root.style.bottom=""),void 0!==t.config.pipConfig.bottom&&(t.root.style.bottom=t.config.pipConfig.bottom+"px"),void 0!==t.config.pipConfig.left&&(t.root.style.left=t.config.pipConfig.left+"px",t.root.style.right=""),void 0!==t.config.pipConfig.right&&(t.root.style.right=t.config.pipConfig.right+"px"),void 0!==t.config.pipConfig.width&&(t.root.style.width=t.config.pipConfig.width+"px"),void 0!==t.config.pipConfig.height&&(t.root.style.height=t.config.pipConfig.height+"px")),t.config.fluid&&(t.root.style["padding-top"]=""),["click","touchend"].forEach(function(t){n.addEventListener(t,function(t){t.preventDefault(),t.stopPropagation(),e.exitMini()})})}},{key:"exitMini",value:function(){var e=this.player;Util$5.removeClass(this.root,"xgplayer-pip-active"),e.root.style.right="",e.root.style.bottom="",e.root.style.top="",e.root.style.left="",e.config.fluid?(e.root.style.width="100%",e.root.style.height="0",e.root.style["padding-top"]=100*this.config.height/this.config.width+"%"):(e.config.width&&("number"!=typeof this.config.width?e.root.style.width=e.config.width:e.root.style.width=e.config.width+"px"),e.config.height&&("number"!=typeof e.config.height?e.root.style.height=e.config.height:e.root.style.height=e.config.height+"px"));var t=Util$5.findDom(e.root,".xgplayer-pip-lay");t&&t.parentNode&&t.parentNode.removeChild(t);var n=Util$5.findDom(e.root,".xgplayer-pip-drag");n&&n.parentNode&&n.parentNode.removeChild(n)}},{key:"destroy",value:function(){this.unbind(["click","touchend"],this.getMini)}},{key:"registerLangauageTexts",value:function(){return{miniscreen:{jp:"日文text",en:"miniscreen",zh:"小屏幕"}}}},{key:"render",value:function(){return'\n      <xg-icon class="xgplayer-mini">\n       <p class="name"><span>'+this.text.miniscreen+"</span></p>\n      </xg-icon>"}}],[{key:"pluginName",get:function(){return"miniscreen"}}]),t}(Plugin),_createClass$j=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),Events$8=Plugin.Events,PIPIcon=function(e){function t(){return _classCallCheck$l(this,t),_possibleConstructorReturn$h(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits$h(t,e),_createClass$j(t,[{key:"afterCreate",value:function(){var e=this;this.once(Events$8.COMPLETE,function(){e.isPIPAvailable()&&(e.show(),e.switchPIP=e.switchPIP.bind(e),e.bind("click",e.switchPIP)),e.initPipEvents()})}},{key:"initPipEvents",value:function(){var e=this.player;this.leavePIPCallback=function(){var t=e.paused;setTimeout(function(){!t&&e.play()},0),e.emit("pip_change",!1)},this.enterPIPCallback=function(){e.emit("pip_change",!0)},e.video&&(e.video.addEventListener("enterpictureinpicture",this.enterPIPCallback),e.video.addEventListener("leavepictureinpicture",this.leavePIPCallback))}},{key:"switchPIP",value:function(){var e=this.player;try{document.pictureInPictureElement?document.exitPictureInPicture():e.video&&e.video.requestPictureInPicture()}catch(e){console.error("switchPIP",e)}}},{key:"isPIPAvailable",value:function(){var e=this.player;return document.pictureInPictureEnabled||!(e.video&&e.video.disablePictureInPicture)}},{key:"registerLangauageTexts",value:function(){return{pipicon:{jp:"picture-in-picture",en:"picture-in-picture",zh:"画中画"}}}},{key:"destroy",value:function(){var e=this.player;e.video.removeEventListener("enterpictureinpicture",this.enterPIPCallback),e.video.removeEventListener("leavepictureinpicture",this.leavePIPCallback),this.unbind("click",this.switchPIP)}},{key:"render",value:function(){return'<xg-icon class="xgplayer-pip">\n      <div class="xgplayer-icon btn-definition">\n      '+(this.icons.pipicon?this.icons.pipicon:"<span>"+this.text.pipicon+"</span>")+"\n      </div>\n      "+(this.icons.pipicon?'<div class="xg-tips">'+this.text.pipicon+"</div>":"")+"\n    </xg-icon>"}}],[{key:"pluginName",get:function(){return"PipIcon"}}]),t}(Plugin),Next='<svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 40 40">\n  <path transform="scale(0.038 0.028)" d="M800 380v768h-128v-352l-320 320v-704l320 320v-352z"></path>\n</svg>\n',_createClass$k=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),PlayNextIcon=function(e){function t(){return _classCallCheck$m(this,t),_possibleConstructorReturn$i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits$i(t,e),_createClass$k(t,[{key:"afterCreate",value:function(){var e=this.playerConfig;console.log("playerConfig",e),this.config.url||this.initEvents()}},{key:"initEvents",value:function(){this.playNext=this.playNext.bind(this),this.bind(["touchend","click"],this.playNext),this.show()}},{key:"playNext",value:function(){this.emit("playNext")}},{key:"registerIcons",value:function(){return{playNext:'<svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 40 40">\n  <path transform="scale(0.038 0.028)" d="M800 380v768h-128v-352l-320 320v-704l320 320v-352z"></path>\n</svg>\n'}}},{key:"registerLangauageTexts",value:function(){return{play:{jp:"play",en:"play",zh:"播放"},pause:{jp:"pause",en:"pause",zh:"暂停"}}}},{key:"destroy",value:function(){this.unbind(["touchend","click"],this.playNext)}},{key:"render",value:function(){return'\n     <xg-icon class="xgplayer-playnext">\n      <div class="xgplayer-icon">\n        '+this.icons.playNext+'\n      </div>\n      <div class="xg-tips"></div>\n     </xg-icon>\n    '}}],[{key:"pluginName",get:function(){return"PlayNextIcon"}}]),t}(Plugin),_createClass$l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),Events$9=Plugin.Events,Util$6=Plugin.Util,Sniffer=Plugin.Sniffer,DefinitionIcon=function(e){function t(e){_classCallCheck$n(this,t);var n=_possibleConstructorReturn$j(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.curTime=0,n.isPaused=!0,n}return _inherits$j(t,e),_createClass$l(t,null,[{key:"pluginName",get:function(){return"DefinitionIcon"}},{key:"defaultConfig",get:function(){return{position:"left",index:2,itemList:null}}}]),_createClass$l(t,[{key:"afterCreate",value:function(){var e=this;this.once(Events$9.CANPLAY,function(){e.config.itemList&&e.config.itemList.length>0&&(e.renderItemList(),e.show())}),this.once("resourceReady",function(t){e.config.itemList=t,e.renderItemList(),e.show()}),"mobile"===Sniffer.device?this.activeEvent="click":this.activeEvent="mouseenter",this.onMouseenter=this.onMouseenter.bind(this),this.onItemClick=this.onItemClick.bind(this),this.bind(this.activeEvent,this.onMouseenter),this.bind("mouseleave",this.onMouseenter),this.bind(".icon-list li",["touched","click"],this.onItemClick)}},{key:"renderItemList",value:function(){var e=this.player,t=this.config.itemList,n=e.config.url,i=document.createElement("a");e.switchURL?this.switchUrl():n=e.currentSrc||e.src,e.hls&&(i.href=e.hls.url,n=i.href);var r=t.map(function(t){return i.href=t.url,'<li class="'+(e.dash?t.selected?"selected":"":i.href===n?"selected":"")+'" cname="'+t.name+'" url="'+t.url+'">'+t.name+"</li>"}),o=t.filter(function(t){return i.href=t.url,e.dash?!0===t.selected:i.href===n});this.find(".icon-text").innerHTML=(o[0]||{name:""}).name,this.find(".icon-list").innerHTML=r.join("")}},{key:"onCanplayChangeDefinition",value:function(){var e=this.player;if(e.currentTime=this.curTime,!this.isPaused){var t=e.play();void 0!==t&&t&&t.catch(function(e){})}}},{key:"onMouseenter",value:function(e){e.preventDefault(),e.stopPropagation(),Util$6.hasClass(this.el,"list-show")?Util$6.removeClass(this.el,"list-show"):Util$6.addClass(this.el,"list-show")}},{key:"switchUrl",value:function(e){var t=this.player,n=document.createElement("a");["mp4","hls","__flv__","dash"].every(function(e){return!t[e]||(t[e].url&&(n.href=t[e].url),"__flv__"===e&&(t[e]._options?n.href=t[e]._options.url:n.href=t[e]._mediaDataSource.url),!1)}),e&&n.href!==e.href&&!t.ended&&t.switchURL(e.href)}},{key:"onItemClick",value:function(e){var t=this,n=this.player,i=this.config.itemList;if(e.preventDefault(),e.stopPropagation(),e.target&&"selected"===e.target.className)return!1;var r=document.createElement("a");n.emit("beforeDefinitionChange",r.href),n.dash&&i.forEach(function(t){t.selected=!1,t.name===e.target.innerHTML&&(t.selected=!0)});var o=this.find(".selected");Util$6.addClass(e.target,"selected"),o&&Util$6.removeClass(o,"selected");var s=o?o.getAttribute("cname"):"",a=e.target.getAttribute("cname");r.href=e.target.getAttribute("url"),this.curTime=n.currentTime,this.isPaused=n.paused,n.switchURL?this.switchUrl(r):r.href!==n.currentSrc&&(n.ended||(n.src=r.href,this.once("canplay",function(){t.onCanplayChangeDefinition()}))),this.find(".icon-text").innerHTML=a,n.emit("definitionChange",{from:s,to:a}),"mobile"===Sniffer.device&&Util$6.removeClass(this.el,"list-show")}},{key:"render",value:function(){return'<xg-icon class="xgplayer-playbackrate" style="display: none;">\n    <div class="xgplayer-icon btn-definition"><span class="icon-text">清晰度</span></div>\n    <ul class="icon-list">\n    </ul>\n   </xg-icon>'}}]),t}(Plugin),_typeof$3="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_createClass$m=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),Events$a=Plugin.Events,Util$7=Plugin.Util,Sniffer$1=Plugin.Sniffer,PlaybackRateIcon=function(e){function t(e){_classCallCheck$o(this,t);var n=_possibleConstructorReturn$k(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.curRate=1,n}return _inherits$k(t,e),_createClass$m(t,null,[{key:"pluginName",get:function(){return"PlaybackRateIcon"}},{key:"defaultConfig",get:function(){return{position:"left",index:2,rateList:[.5,.75,{rate:1,iconText:"倍速"},1.5,2]}}}]),_createClass$m(t,[{key:"afterCreate",value:function(){var e=this;this.once(Events$a.CANPLAY,function(){e.show()}),"mobile"===Sniffer$1.device?this.activeEvent="click":this.activeEvent="mouseenter",this.onMouseenter=this.onMouseenter.bind(this),this.onItemClick=this.onItemClick.bind(this),this.bind(this.activeEvent,this.onMouseenter),this.bind("mouseleave",this.onMouseenter),this.bind(".icon-list li",["touched","click"],this.onItemClick)}},{key:"onMouseenter",value:function(e){e.preventDefault(),e.stopPropagation(),Util$7.hasClass(this.el,"list-show")?Util$7.removeClass(this.el,"list-show"):Util$7.addClass(this.el,"list-show")}},{key:"onItemClick",value:function(e){var t=e.target,n=t.getAttribute("cname");if(Number(n)===this.curRate)return!1;Util$7.removeClass(this.find(".selected"),"selected"),Util$7.addClass(t,"selected"),this.curRate=Number(n),this.player.playbackRate=Number(n),this.find(".icon-text").innerHTML=t.getAttribute("ctext")}},{key:"destroy",value:function(){this.unbind(this.activeEvent,this.onMouseenter),this.unbind("mouseleave",this.onMouseenter),this.unbind(".icon-list li",["touched","click"],this.onItemClick)}},{key:"render",value:function(){var e=this.player.playbackRate||1;this.curRate=e;var t="",n=this.config.rateList.map(function(n){var i="object"===(void 0===n?"undefined":_typeof$3(n))?n:{rate:n};return!i.text&&(i.text=i.rate+"x"),i.rate===e&&(i.isCurrent=!0,t=n.iconText||i.text),'<li cname="'+i.rate+'" ctext="'+(n.iconText||i.text)+'" class="'+(i.isCurrent?"selected":"")+'">'+i.text+"</li>"});return'<xg-icon class="xgplayer-playbackrate">\n    <div class="xgplayer-icon btn-definition"><span class="icon-text">'+t+'</span></div>\n    <ul class="icon-list">\n      '+n.join("")+"\n    </ul>\n   </xg-icon>"}}]),t}(Plugin),CssFullscreenChange='<svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 40 40">\n  <defs>\n  <path class=\'path_full\' transform="scale(0.028 0.028)" d="M843.617212 67.898413 175.411567 67.898413c-61.502749 0-111.367437 49.856501-111.367437 111.367437l0 668.205645c0 61.510936 49.864688 111.367437 111.367437 111.367437L843.617212 958.838931c61.510936 0 111.367437-49.856501 111.367437-111.367437L954.984648 179.26585C954.984648 117.754914 905.12917 67.898413 843.617212 67.898413zM398.146441 736.104057c15.380292 0 27.842115 12.461823 27.842115 27.842115 0 15.379269-12.461823 27.841092-27.842115 27.841092L259.725858 791.787264c-7.785314 0-14.781658-3.217275-19.838837-8.365528-5.383614-4.577249-8.791224-11.228739-8.791224-19.475564L231.095797 624.736621c0-15.371082 12.471033-27.842115 27.842115-27.842115 15.380292 0 27.842115 12.471033 27.842115 27.842115l-0.61603 71.426773 133.036969-133.037992 39.378869 39.378869L324.962651 736.113267 398.146441 736.104057zM419.199942 463.611943 286.162974 330.565764l0.61603 71.435982c0 15.380292-12.461823 27.842115-27.842115 27.842115-15.371082 0-27.842115-12.461823-27.842115-27.842115L231.094774 262.791172c0-8.256034 3.40761-14.908548 8.791224-19.476587 5.057179-5.148253 12.053524-8.374738 19.838837-8.374738l138.420583 0.00921c15.380292 0 27.842115 12.461823 27.842115 27.842115s-12.461823 27.842115-27.842115 27.842115l-73.175603-0.00921 133.607974 133.607974L419.199942 463.611943zM787.932981 763.946172c0 8.247848-3.40761 14.899338-8.791224 19.475564-5.057179 5.148253-12.053524 8.365528-19.839861 8.365528L620.881314 791.787264c-15.379269 0-27.841092-12.461823-27.841092-27.841092 0-15.380292 12.461823-27.842115 27.841092-27.842115l73.185836 0.00921L560.449967 602.50427l39.378869-39.378869L732.875015 696.163393l-0.62524-71.426773c0-15.371082 12.462846-27.842115 27.842115-27.842115 15.380292 0 27.842115 12.471033 27.842115 27.842115L787.934005 763.946172zM787.932981 402.000724c0 15.380292-12.461823 27.842115-27.842115 27.842115-15.379269 0-27.842115-12.461823-27.842115-27.842115l0.62524-71.435982L599.828836 463.611943l-39.378869-39.378869 133.617184-133.607974-73.185836 0.00921c-15.379269 0-27.841092-12.461823-27.841092-27.842115s12.461823-27.842115 27.841092-27.842115l138.421606-0.00921c7.785314 0 14.781658 3.226484 19.839861 8.374738 5.383614 4.568039 8.791224 11.219529 8.791224 19.476587L787.934005 402.000724z"></path>\n  <path class=\'path_exitfull\'transform="scale(0.028 0.028)" d="M834.56 81.92H189.44c-59.392 0-107.52 48.128-107.52 107.52v645.12c0 59.392 48.128 107.52 107.52 107.52h645.12c59.392 0 107.52-48.128 107.52-107.52V189.44c0-59.392-48.128-107.52-107.52-107.52zM458.24 727.04c0 14.848-12.288 26.624-26.624 26.624S404.48 741.888 404.48 727.04v-69.632L289.28 773.12c-10.752 10.24-27.648 10.24-37.888 0-10.24-10.752-10.24-27.648 0-37.888L366.592 619.52H296.96c-14.848 0-26.624-12.288-26.624-26.624s12.288-26.624 26.624-26.624h134.144c14.848 0 26.624 12.288 26.624 26.624V727.04z m0-295.936c0 14.848-12.288 26.624-26.624 26.624H296.96c-14.848 0-26.624-12.288-26.624-26.624S282.112 404.48 296.96 404.48h69.632L251.392 289.28c-10.24-10.752-10.24-27.648 0-37.888 5.12-5.12 12.288-7.68 18.944-7.68 6.656 0 13.824 2.56 18.944 7.68L404.48 366.592V296.96c0-14.848 12.288-26.624 26.624-26.624s26.624 12.288 26.624 26.624v134.144zM773.12 773.12c-10.752 10.24-27.648 10.24-37.888 0L619.52 657.408V727.04c0 14.848-12.288 26.624-26.624 26.624s-26.624-11.776-26.624-26.624v-134.144c0-14.848 12.288-26.624 26.624-26.624H727.04c14.848 0 26.624 12.288 26.624 26.624s-12.288 26.624-26.624 26.624h-69.632l115.2 115.2c10.752 10.752 10.752 27.648 0.512 38.4z m0-483.84L657.408 404.48H727.04c14.848 0 26.624 12.288 26.624 26.624 0 14.848-12.288 26.624-26.624 26.624h-134.144c-14.848 0-26.624-12.288-26.624-26.624V296.96c0-14.848 12.288-26.624 26.624-26.624s26.624 12.288 26.624 26.624v69.632L734.72 250.88c5.12-5.12 12.288-7.68 18.944-7.68s13.824 2.56 18.944 7.68c10.752 10.752 10.752 27.648 0.512 38.4z"></path>\n  </defs>\n  <path class="path" transform="scale(0.028 0.028)" d="M843.617212 67.898413 175.411567 67.898413c-61.502749 0-111.367437 49.856501-111.367437 111.367437l0 668.205645c0 61.510936 49.864688 111.367437 111.367437 111.367437L843.617212 958.838931c61.510936 0 111.367437-49.856501 111.367437-111.367437L954.984648 179.26585C954.984648 117.754914 905.12917 67.898413 843.617212 67.898413zM398.146441 736.104057c15.380292 0 27.842115 12.461823 27.842115 27.842115 0 15.379269-12.461823 27.841092-27.842115 27.841092L259.725858 791.787264c-7.785314 0-14.781658-3.217275-19.838837-8.365528-5.383614-4.577249-8.791224-11.228739-8.791224-19.475564L231.095797 624.736621c0-15.371082 12.471033-27.842115 27.842115-27.842115 15.380292 0 27.842115 12.471033 27.842115 27.842115l-0.61603 71.426773 133.036969-133.037992 39.378869 39.378869L324.962651 736.113267 398.146441 736.104057zM419.199942 463.611943 286.162974 330.565764l0.61603 71.435982c0 15.380292-12.461823 27.842115-27.842115 27.842115-15.371082 0-27.842115-12.461823-27.842115-27.842115L231.094774 262.791172c0-8.256034 3.40761-14.908548 8.791224-19.476587 5.057179-5.148253 12.053524-8.374738 19.838837-8.374738l138.420583 0.00921c15.380292 0 27.842115 12.461823 27.842115 27.842115s-12.461823 27.842115-27.842115 27.842115l-73.175603-0.00921 133.607974 133.607974L419.199942 463.611943zM787.932981 763.946172c0 8.247848-3.40761 14.899338-8.791224 19.475564-5.057179 5.148253-12.053524 8.365528-19.839861 8.365528L620.881314 791.787264c-15.379269 0-27.841092-12.461823-27.841092-27.841092 0-15.380292 12.461823-27.842115 27.841092-27.842115l73.185836 0.00921L560.449967 602.50427l39.378869-39.378869L732.875015 696.163393l-0.62524-71.426773c0-15.371082 12.462846-27.842115 27.842115-27.842115 15.380292 0 27.842115 12.471033 27.842115 27.842115L787.934005 763.946172zM787.932981 402.000724c0 15.380292-12.461823 27.842115-27.842115 27.842115-15.379269 0-27.842115-12.461823-27.842115-27.842115l0.62524-71.435982L599.828836 463.611943l-39.378869-39.378869 133.617184-133.607974-73.185836 0.00921c-15.379269 0-27.841092-12.461823-27.841092-27.842115s12.461823-27.842115 27.841092-27.842115l138.421606-0.00921c7.785314 0 14.781658 3.226484 19.839861 8.374738 5.383614 4.568039 8.791224 11.219529 8.791224 19.476587L787.934005 402.000724z"></path>\n</svg>\n',_createClass$n=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),Events$b=Plugin.Events,Util$8=Plugin.Util,CssFullScreen=function(e){function t(e){_classCallCheck$p(this,t);var n=_possibleConstructorReturn$l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.isCssfullScreen=!1,n}return _inherits$l(t,e),_createClass$n(t,null,[{key:"pluginName",get:function(){return"cssFullscreen"}}]),_createClass$n(t,[{key:"afterCreate",value:function(){var e=this;this.on(Events$b.READY,function(){e.btnClick=e.btnClick.bind(e),e.bind(["click","touchend"],e.btnClick)})}},{key:"btnClick",value:function(e){e.preventDefault(),e.stopPropagation(),this.isCssfullScreen?this.exitCssFullscreen():this.getCssFullscreen(),this.animate(this.isCssfullScreen),this.emit(Events$b.CSS_FULLSCREEN_CHANGE,this.isCssfullScreen)}},{key:"animate",value:function(e){var t=this.find(".path"),n=this.find(".path_full").getAttribute("d"),i=this.find(".path_exitfull").getAttribute("d");e?t.setAttribute("d",i):t.setAttribute("d",n)}},{key:"getCssFullscreen",value:function(){var e=this.player;e.config.fluid&&(e.root.style["padding-top"]=""),Util$8.addClass(e.root,"xgplayer-is-cssfullscreen"),this.isCssfullScreen=!0,e.emit("cssFullscreen_change",this.isCssfullScreen)}},{key:"exitCssFullscreen",value:function(){var e=this.player;e.config.fluid&&(e.root.style.width="100%",e.root.style.height="0",e.root.style["padding-top"]=100*e.config.height/e.config.width+"%"),Util$8.removeClass(e.root,"xgplayer-is-cssfullscreen"),this.isCssfullScreen=!1,e.emit("cssFullscreen_change",this.isCssfullScreen)}},{key:"registerIcons",value:function(){return{cssFullscreen:'<svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 40 40">\n  <defs>\n  <path class=\'path_full\' transform="scale(0.028 0.028)" d="M843.617212 67.898413 175.411567 67.898413c-61.502749 0-111.367437 49.856501-111.367437 111.367437l0 668.205645c0 61.510936 49.864688 111.367437 111.367437 111.367437L843.617212 958.838931c61.510936 0 111.367437-49.856501 111.367437-111.367437L954.984648 179.26585C954.984648 117.754914 905.12917 67.898413 843.617212 67.898413zM398.146441 736.104057c15.380292 0 27.842115 12.461823 27.842115 27.842115 0 15.379269-12.461823 27.841092-27.842115 27.841092L259.725858 791.787264c-7.785314 0-14.781658-3.217275-19.838837-8.365528-5.383614-4.577249-8.791224-11.228739-8.791224-19.475564L231.095797 624.736621c0-15.371082 12.471033-27.842115 27.842115-27.842115 15.380292 0 27.842115 12.471033 27.842115 27.842115l-0.61603 71.426773 133.036969-133.037992 39.378869 39.378869L324.962651 736.113267 398.146441 736.104057zM419.199942 463.611943 286.162974 330.565764l0.61603 71.435982c0 15.380292-12.461823 27.842115-27.842115 27.842115-15.371082 0-27.842115-12.461823-27.842115-27.842115L231.094774 262.791172c0-8.256034 3.40761-14.908548 8.791224-19.476587 5.057179-5.148253 12.053524-8.374738 19.838837-8.374738l138.420583 0.00921c15.380292 0 27.842115 12.461823 27.842115 27.842115s-12.461823 27.842115-27.842115 27.842115l-73.175603-0.00921 133.607974 133.607974L419.199942 463.611943zM787.932981 763.946172c0 8.247848-3.40761 14.899338-8.791224 19.475564-5.057179 5.148253-12.053524 8.365528-19.839861 8.365528L620.881314 791.787264c-15.379269 0-27.841092-12.461823-27.841092-27.841092 0-15.380292 12.461823-27.842115 27.841092-27.842115l73.185836 0.00921L560.449967 602.50427l39.378869-39.378869L732.875015 696.163393l-0.62524-71.426773c0-15.371082 12.462846-27.842115 27.842115-27.842115 15.380292 0 27.842115 12.471033 27.842115 27.842115L787.934005 763.946172zM787.932981 402.000724c0 15.380292-12.461823 27.842115-27.842115 27.842115-15.379269 0-27.842115-12.461823-27.842115-27.842115l0.62524-71.435982L599.828836 463.611943l-39.378869-39.378869 133.617184-133.607974-73.185836 0.00921c-15.379269 0-27.841092-12.461823-27.841092-27.842115s12.461823-27.842115 27.841092-27.842115l138.421606-0.00921c7.785314 0 14.781658 3.226484 19.839861 8.374738 5.383614 4.568039 8.791224 11.219529 8.791224 19.476587L787.934005 402.000724z"></path>\n  <path class=\'path_exitfull\'transform="scale(0.028 0.028)" d="M834.56 81.92H189.44c-59.392 0-107.52 48.128-107.52 107.52v645.12c0 59.392 48.128 107.52 107.52 107.52h645.12c59.392 0 107.52-48.128 107.52-107.52V189.44c0-59.392-48.128-107.52-107.52-107.52zM458.24 727.04c0 14.848-12.288 26.624-26.624 26.624S404.48 741.888 404.48 727.04v-69.632L289.28 773.12c-10.752 10.24-27.648 10.24-37.888 0-10.24-10.752-10.24-27.648 0-37.888L366.592 619.52H296.96c-14.848 0-26.624-12.288-26.624-26.624s12.288-26.624 26.624-26.624h134.144c14.848 0 26.624 12.288 26.624 26.624V727.04z m0-295.936c0 14.848-12.288 26.624-26.624 26.624H296.96c-14.848 0-26.624-12.288-26.624-26.624S282.112 404.48 296.96 404.48h69.632L251.392 289.28c-10.24-10.752-10.24-27.648 0-37.888 5.12-5.12 12.288-7.68 18.944-7.68 6.656 0 13.824 2.56 18.944 7.68L404.48 366.592V296.96c0-14.848 12.288-26.624 26.624-26.624s26.624 12.288 26.624 26.624v134.144zM773.12 773.12c-10.752 10.24-27.648 10.24-37.888 0L619.52 657.408V727.04c0 14.848-12.288 26.624-26.624 26.624s-26.624-11.776-26.624-26.624v-134.144c0-14.848 12.288-26.624 26.624-26.624H727.04c14.848 0 26.624 12.288 26.624 26.624s-12.288 26.624-26.624 26.624h-69.632l115.2 115.2c10.752 10.752 10.752 27.648 0.512 38.4z m0-483.84L657.408 404.48H727.04c14.848 0 26.624 12.288 26.624 26.624 0 14.848-12.288 26.624-26.624 26.624h-134.144c-14.848 0-26.624-12.288-26.624-26.624V296.96c0-14.848 12.288-26.624 26.624-26.624s26.624 12.288 26.624 26.624v69.632L734.72 250.88c5.12-5.12 12.288-7.68 18.944-7.68s13.824 2.56 18.944 7.68c10.752 10.752 10.752 27.648 0.512 38.4z"></path>\n  </defs>\n  <path class="path" transform="scale(0.028 0.028)" d="M843.617212 67.898413 175.411567 67.898413c-61.502749 0-111.367437 49.856501-111.367437 111.367437l0 668.205645c0 61.510936 49.864688 111.367437 111.367437 111.367437L843.617212 958.838931c61.510936 0 111.367437-49.856501 111.367437-111.367437L954.984648 179.26585C954.984648 117.754914 905.12917 67.898413 843.617212 67.898413zM398.146441 736.104057c15.380292 0 27.842115 12.461823 27.842115 27.842115 0 15.379269-12.461823 27.841092-27.842115 27.841092L259.725858 791.787264c-7.785314 0-14.781658-3.217275-19.838837-8.365528-5.383614-4.577249-8.791224-11.228739-8.791224-19.475564L231.095797 624.736621c0-15.371082 12.471033-27.842115 27.842115-27.842115 15.380292 0 27.842115 12.471033 27.842115 27.842115l-0.61603 71.426773 133.036969-133.037992 39.378869 39.378869L324.962651 736.113267 398.146441 736.104057zM419.199942 463.611943 286.162974 330.565764l0.61603 71.435982c0 15.380292-12.461823 27.842115-27.842115 27.842115-15.371082 0-27.842115-12.461823-27.842115-27.842115L231.094774 262.791172c0-8.256034 3.40761-14.908548 8.791224-19.476587 5.057179-5.148253 12.053524-8.374738 19.838837-8.374738l138.420583 0.00921c15.380292 0 27.842115 12.461823 27.842115 27.842115s-12.461823 27.842115-27.842115 27.842115l-73.175603-0.00921 133.607974 133.607974L419.199942 463.611943zM787.932981 763.946172c0 8.247848-3.40761 14.899338-8.791224 19.475564-5.057179 5.148253-12.053524 8.365528-19.839861 8.365528L620.881314 791.787264c-15.379269 0-27.841092-12.461823-27.841092-27.841092 0-15.380292 12.461823-27.842115 27.841092-27.842115l73.185836 0.00921L560.449967 602.50427l39.378869-39.378869L732.875015 696.163393l-0.62524-71.426773c0-15.371082 12.462846-27.842115 27.842115-27.842115 15.380292 0 27.842115 12.471033 27.842115 27.842115L787.934005 763.946172zM787.932981 402.000724c0 15.380292-12.461823 27.842115-27.842115 27.842115-15.379269 0-27.842115-12.461823-27.842115-27.842115l0.62524-71.435982L599.828836 463.611943l-39.378869-39.378869 133.617184-133.607974-73.185836 0.00921c-15.379269 0-27.841092-12.461823-27.841092-27.842115s12.461823-27.842115 27.841092-27.842115l138.421606-0.00921c7.785314 0 14.781658 3.226484 19.839861 8.374738 5.383614 4.568039 8.791224 11.219529 8.791224 19.476587L787.934005 402.000724z"></path>\n</svg>\n'}}},{key:"registerLangauageTexts",value:function(){return{cssFullscreen:{jp:"Cssfullscreen",en:"Cssfullscreen",zh:"进入样式全屏"},exitCssFullscreen:{jp:"Exit cssfullscreen",en:"Exit cssfullscreen",zh:"退出样式全屏"}}}},{key:"destroy",value:function(){this.unbind(["click","touchend"],this.btnClick)}},{key:"render",value:function(){return"<xg-icon class='xgplayer-cssfullscreen'>\n    <div class=\"xgplayer-icon\">\n    "+this.icons.cssFullscreen+'\n    </div>\n    <div class="xg-tips">'+(this.isCssfullScreen?this.text.exitCssFullscreen:this.text.cssFullscreen)+"</div>\n    </xg-icon>"}}]),t}(Plugin),_createClass$o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),Controls=function(e){function t(){return _classCallCheck$q(this,t),_possibleConstructorReturn$m(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits$m(t,e),_createClass$o(t,[{key:"afterCreate",value:function(){}},{key:"children",value:function(){return this.left=this.find("left-grid"),this.center=this.find("center"),this.right=this.find("right-grid"),{TimeIcon:{plugin:TimeIcon,options:{index:3,root:this.left}},PlayIcon:{plugin:PlayIcon,options:{index:0,root:this.left}},playNextIcon:{plugin:PlayNextIcon,options:{index:1,root:this.left}},FullScreen:{plugin:Fullscreen,options:{index:0,root:this.right}},VolumeIcon:{plugin:VolumeIcon,options:{index:1,root:this.right}},RotateIcon:{plugin:DefinitionIcon,options:{index:2,root:this.right}},DefinitionIcon:{plugin:Rotate,options:{index:3,root:this.right}},PlaybackRateIcon:{plugin:PlaybackRateIcon,options:{index:4,root:this.right}},CssFullScreen:{plugin:CssFullScreen,options:{index:1,root:this.right}},Progress:{plugin:Progress,options:{root:this.center}}}}},{key:"render",value:function(){return'<xg-controls class="xgplayer-controls" unselectable="on" onselectstart="return false">\n    <left-grid class="left-grid">\n    </Left-grid>\n    <center class="center"></center>\n    <right-grid class="right-grid">\n    </right-grid>\n    </xg-controls>'}}],[{key:"pluginName",get:function(){return"Controls"}}]),t}(Plugin),_createClass$p=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),_get$2=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var s=r.get;if(void 0!==s)return s.call(i)},FULLSCREEN_EVENTS=["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],Player=function(e){function t(e){_classCallCheck$r(this,t);var n=_possibleConstructorReturn$n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.config=util.deepCopy(getDefaultConfig(),e),n.config.plugins=[Controls].concat(n.config.plugins),console.log("this.config.plugins",n.config.plugins),n.config.presets=[DefaultPreset],n.userTimer=null,n.waitTimer=null,n.isProgressMoving=!1,n.isReady=!1,n.isPlaying=!1,n.isSeeking=!1,n.isActive=!0,n._initDOM(),n._bindEvents(),n._registerPresets(),n._registerPlugins(),setTimeout(function(){n.emit(READY),n.isReady=!0},0),(n.config.videoInit||n.config.autoplay)&&(n.hasStart||n.start()),n}return _inherits$n(t,e),_createClass$p(t,[{key:"_initDOM",value:function(){if(this.root=util.findDom(document,"#"+this.config.id),this.controls=util.createDom("xg-controls","",{unselectable:"on",onselectstart:"return false"},"xgplayer-controls"),!this.root){var e=this.config.el;if(!e||1!==e.nodeType)return this.emit("error",new Errors("use",this.config.vid,{line:32,handle:"Constructor",msg:"container id can't be empty"})),!1;this.root=e}this.addClass(STATE_CLASS.DEFAULT+" xgplayer-"+sniffer.device+" "+STATE_CLASS.NO_START+" "+(this.config.controls?"":STATE_CLASS.NO_CONTROLS)),this.root.appendChild(this.controls),this.config.fluid?(this.root.style["max-width"]="100%",this.root.style.width="100%",this.root.style.height="0",this.root.style["padding-top"]=100*this.config.height/this.config.width+"%",this.video.style.position="absolute",this.video.style.top="0",this.video.style.left="0"):(this.config.width&&("number"!=typeof this.config.width?this.root.style.width=this.config.width:this.root.style.width=this.config.width+"px"),this.config.height&&("number"!=typeof this.config.height?this.root.style.height=this.config.height:this.root.style.height=this.config.height+"px"))}},{key:"_bindEvents",value:function(){function e(){var t=this;n.root.removeEventListener("mousemove",n.mousemoveFunc),FULLSCREEN_EVENTS.forEach(function(e){document.removeEventListener(e,t.onFullscreenChange)}),n.off("destroy",e)}var t=this;["focus","blur"].forEach(function(e){t.on(e,t["on"+e.charAt(0).toUpperCase()+e.slice(1)])}),this.onFullscreenChange=function(){var e=util.getFullScreenEl();!e||e!==t._fullscreenEl&&"VIDEO"!==e.tagName?(t.fullscreen=!1,t._fullscreenEl=null,t.removeClass(STATE_CLASS.FULLSCREEN),t.emit("fullscreen_change",!1)):(t.fullscreen=!0,t.addClass(STATE_CLASS.FULLSCREEN),t.emit("fullscreen_change",!0))},FULLSCREEN_EVENTS.forEach(function(e){document.addEventListener(e,t.onFullscreenChange)}),this.once("loadeddata",this.getVideoSize),this.mousemoveFunc=function(){t.emit("focus"),t.config.closeFocusVideoFocus||t.video.focus()},this.root.addEventListener("mousemove",this.mousemoveFunc),this.playFunc=function(){t.emit("focus"),t.config.closePlayVideoFocus||t.video.focus()},this.once("play",this.playFunc);var n=this;n.once("destroy",e)}},{key:"_startInit",value:function(e){var t=this,n=this.root,i=this;e&&""!==e||this.emit("urlNull"),this.canPlayFunc=function(){this.volume=this.config.volume,this.play(),i.off("canplay",this.canPlayFunc)},"String"===util.typeOf(e)?this.video.src=e:e.forEach(function(e){t.video.appendChild(util.createDom("source","",{src:""+e.src,type:""+(e.type||"")}))}),this.loadeddataFunc&&this.once("loadeddata",this.loadeddataFunc),this.config.autoplay&&this.once("canplay",this.canPlayFunc),n.insertBefore(this.video,n.firstChild),setTimeout(function(){t.emit("complete")},1),this.hasStart=!0,pluginsManager.afterInit(this)}},{key:"_registerPlugins",value:function(){var e=this,t=this.config.ignores||[],n=this.config.plugins||[],i=t.join("||");n.map(function(t){try{return t.pluginName&&i.indexOf(t.pluginName.toLowerCase())>-1?null:t.options?pluginsManager.register(e,t.plugin,t.options):pluginsManager.register(e,t)}catch(e){return null}})}},{key:"_registerPresets",value:function(){var e=this;this.config.presets.forEach(function(t){usePreset(e,t)})}},{key:"registerPlugin",value:function(){}},{key:"unRegistePlugin",value:function(){}},{key:"getPlugin",value:function(e){return pluginsManager.findPlugin(this,e)}},{key:"addClass",value:function(e){this.root&&(util.hasClass(this.root,e)||util.addClass(this.root,e))}},{key:"removeClass",value:function(e){this.root&&util.removeClass(this.root,e)}},{key:"start",value:function(e){var t=this;return this.hasStart?this.play():pluginsManager.beforeInit(this).then(function(){return e||(e=t.url||t.config.url),t._startInit(e)}).catch(function(e){throw e.fileName="player",e.lineNumber="236",e})}},{key:"play",value:function(){var e=this;if(!this.hasStart)return void this.start();var n=_get$2(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"play",this).call(this);return void 0!==n&&n&&n.then&&n.then(function(){e.removeClass(STATE_CLASS.AUTOPLAY),e.removeClass(STATE_CLASS.NO_START),e.addClass(STATE_CLASS.PLAYING)}).catch(function(t){throw setTimeout(function(){e.emit("autoplay_was_prevented"),e.addClass(STATE_CLASS.AUTOPLAY)},0),t}),n}},{key:"reload",value:function(){this.video.load(),this.reloadFunc=function(){this.play().catch(function(e){console.log(e)})},this.once("loadeddata",this.reloadFunc)}},{key:"destroy",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(pluginsManager.destroy(this),_get$2(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this),e){this.root.innerHTML="";var n=this.root.className.split(" ");n.length>0?this.root.className=n.filter(function(e){return e.indexOf("xgplayer")<0}).join(" "):this.root.className=""}for(var i in this)delete this[i]}},{key:"replay",value:function(){var e=this;this.removeClass(STATE_CLASS.ENDED),this.once("canplay",function(){var t=e.play();t&&t.catch&&t.catch(function(e){console.log(e)})}),this.emit("replay"),this.currentTime=0}},{key:"getFullscreen",value:function(e){var t=this;e||(e=this.root),this._fullscreenEl=e,e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen(window.Element.ALLOW_KEYBOARD_INPUT):t.video.webkitSupportsFullscreen?t.video.webkitEnterFullscreen():e.msRequestFullscreen?e.msRequestFullscreen():this.addClass(STATE_CLASS.CSS_FULLSCREEN)}},{key:"exitFullscreen",value:function(e){e&&(e=this.root),document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen(),this.removeClass(STATE_CLASS.CSS_FULLSCREEN)}},{key:"getCssFullscreen",value:function(){var e=this;this.addClass(STATE_CLASS.CSS_FULLSCREEN),e.emit("requestCssFullscreen")}},{key:"exitCssFullscreen",value:function(){var e=this;this.removeClass(STATE_CLASS.CSS_FULLSCREEN),e.emit("exitCssFullscreen")}},{key:"onFocus",value:function(){this.isActive=!0;var e=this;this.addClass(STATE_CLASS.ACTIVE),e.userTimer&&clearTimeout(e.userTimer),e.userTimer=setTimeout(function(){this.isActive=!1,e.emit("blur")},e.config.inactive)}},{key:"onBlur",value:function(){this.paused||this.ended||this.removeClass(STATE_CLASS.ACTIVE)}},{key:"onPlay",value:function(){this.addClass(STATE_CLASS.PLAYING),this.removeClass(STATE_CLASS.PAUSED),this.ended&&this.removeClass(STATE_CLASS.ENDED),this.emit("focus")}},{key:"onPause",value:function(){this.addClass(STATE_CLASS.PAUSED),this.userTimer&&clearTimeout(this.userTimer),this.emit("focus")}},{key:"onEnded",value:function(){this.addClass(STATE_CLASS.ENDED),this.removeClass(STATE_CLASS.PLAYING)}},{key:"onSeeking",value:function(){this.isSeeking=!0}},{key:"onSeeked",value:function(){this.isSeeking=!1,this.waitTimer&&clearTimeout(this.waitTimer),this.removeClass(STATE_CLASS.LOADING)}},{key:"onWaiting",value:function(){var e=this,t=this;t.waitTimer&&clearTimeout(t.waitTimer),t.waitTimer=setTimeout(function(){e.addClass(STATE_CLASS.LOADING)},500)}},{key:"onPlaying",value:function(){var e=this;this.waitTimer&&clearTimeout(this.waitTimer),[STATE_CLASS.NO_START,STATE_CLASS.PAUSED,STATE_CLASS.ENDED,STATE_CLASS.ERROR,STATE_CLASS.REPLAY,STATE_CLASS.LOADING].forEach(function(t){e.removeClass(t)}),this.addClass(STATE_CLASS.PLAYING)}},{key:"getVideoSize",value:function(){if(this.video.videoWidth&&this.video.videoHeight){var e=this.root.getBoundingClientRect();"auto"===this.config.fitVideoSize?e.width/e.height>this.video.videoWidth/this.video.videoHeight?this.root.style.height=this.video.videoHeight/this.video.videoWidth*e.width+"px":this.root.style.width=this.video.videoWidth/this.video.videoHeight*e.height+"px":"fixWidth"===this.config.fitVideoSize?this.root.style.height=this.video.videoHeight/this.video.videoWidth*e.width+"px":"fixHeight"===this.config.fitVideoSize&&(this.root.style.width=this.video.videoWidth/this.video.videoHeight*e.height+"px")}}},{key:"plugins",get:function(){return pluginsManager.getPlugins(this)}},{key:"version",get:function(){return"2.3.5"}},{key:"url",set:function(e){this.__url=e},get:function(){return this.__url||this.config.url}},{key:"poster",set:function(e){var t=util.findDom(this.root,".xgplayer-poster");t&&(t.style.backgroundImage="url("+e+")")}},{key:"fullscreen",get:function(){return this._isFullScreen},set:function(e){this._isFullScreen=e}},{key:"bullet",get:function(){return!!util.findDom(this.root,"xg-bullet")&&util.hasClass(util.findDom(this.root,"xg-bullet"),"xgplayer-has-bullet")}},{key:"textTrack",get:function(){return util.hasClass(this.root,"xgplayer-is-textTrack")}},{key:"pip",get:function(){return util.hasClass(this.root,"xgplayer-pip-active")}}],[{key:"install",value:function(e,n){t.plugins||(t.plugins={}),t.plugins[e]||(t.plugins[e]=n)}},{key:"use",value:function(e,n){t.plugins||(t.plugins={}),t.plugins[e]=n}}]),t}(Proxy);return Player.util=util,Player.sniffer=sniffer,Player.Errors=Errors,Player.Events=Events,Player.Plugin=Plugin,Player.BasePlugin=BasePlugin,Player.BasePlugin=BasePlugin,Player.Plugin=Plugin,Player.pluginsManager=pluginsManager,Player});
//# sourceMappingURL=index.min.js.map
