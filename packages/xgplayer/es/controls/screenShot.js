!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.screenShot=t():(e.xgplayer=e.xgplayer||{},e.xgplayer.PlayerControls=e.xgplayer.PlayerControls||{},e.xgplayer.PlayerControls.screenShot=t())}(window,(function(){return function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=4)}([function(e,t,n){var o=n(1),r=n(3),i="string"==typeof o?[[e.i,o,""]]:o;(t=e.exports=o.locals||{})._getContent=function(){return i},t._getCss=function(){return""+o},t._insertCss=function(e){return r(i,e)}},function(e,t,n){(e.exports=n(2)(!1)).push([e.i,".xgplayer-skin-default .xgplayer-screenshot{-webkit-order:11;-moz-box-ordinal-group:12;order:11;position:relative;outline:none;display:block;cursor:pointer;height:20px;top:10px}.xgplayer-skin-default .xgplayer-screenshot .name{text-align:center;font-family:PingFangSC-Regular;font-size:13px;line-height:20px;height:20px;color:hsla(0,0%,100%,.8)}.xgplayer-skin-default .xgplayer-screenshot .name span{width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;padding:0 10px;height:20px;line-height:20px;background:rgba(0,0,0,.38);border-radius:10px;display:inline-block;vertical-align:middle}.xgplayer-lang-is-en .xgplayer-screenshot .name span,.xgplayer-lang-is-jp .xgplayer-screenshot .name span{width:75px;height:20px}",""])},function(e,t){e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=function(e,t){var n=e[1]||"",o=e[3];if(!o)return n;if(t&&"function"==typeof btoa){var r=(a=o,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(a))))+" */"),i=o.sources.map((function(e){return"/*# sourceURL="+o.sourceRoot+e+" */"}));return[n].concat(i).concat([r]).join("\n")}var a;return[n].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+n+"}":n})).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var o={},r=0;r<this.length;r++){var i=this[r][0];"number"==typeof i&&(o[i]=!0)}for(r=0;r<e.length;r++){var a=e[r];"number"==typeof a[0]&&o[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),t.push(a))}},t}},function(e,t,n){"use strict";
/*! Isomorphic Style Loader | MIT License | https://github.com/kriasoft/isomorphic-style-loader */var o={};function r(e){e.forEach((function(e){if(--o[e]<=0){var t=document.getElementById(e);t&&t.parentNode.removeChild(t)}}))}e.exports=function(e,t){for(var n,i=void 0===t?{}:t,a=i.replace,c=void 0!==a&&a,s=i.prepend,u=void 0!==s&&s,l=i.prefix,d=void 0===l?"s":l,p=[],f=0;f<e.length;f++){var h=e[f],g=h[0],m=h[1],y=h[2],v=h[3],x=""+d+g+"-"+f;if(p.push(x),!o[x]||c){o[x]=1;var b=document.getElementById(x),S=!1;b||(S=!0,(b=document.createElement("style")).setAttribute("type","text/css"),b.id=x,y&&b.setAttribute("media",y));var C=m;v&&"function"==typeof btoa&&(C+="\n/*# sourceMappingURL=data:application/json;base64,"+(n=JSON.stringify(v),btoa(encodeURIComponent(n).replace(/%([0-9A-F]{2})/g,(function(e,t){return String.fromCharCode("0x"+t)})))+"*/"),C+="\n/*# sourceURL="+v.file+"?"+x+"*/"),"textContent"in b?b.textContent=C:b.styleSheet.cssText=C,S&&(u?document.head.insertBefore(b,document.head.childNodes[0]):document.head.appendChild(b))}else o[x]++}return r.bind(null,p)}},function(e,t,n){"use strict";n.r(t);var o={name:"screenShot",method:function(){let e=this,t=e.config.screenShot;if(!t)return;e.video.setAttribute("crossOrigin","anonymous");let n=.92;(t.quality||0===t.quality)&&(n=t.quality);let o=void 0===t.type?"image/png":t.type,r=void 0===t.format?".png":t.format,i=document.createElement("canvas"),a=i.getContext("2d"),c=new Image;i.width=this.config.width||600,i.height=this.config.height||337.5;e.screenShot=function(s=!0){s=void 0===t.saveImg?s:t.saveImg,i.width=e.video.videoWidth||600,i.height=e.video.videoHeight||337.5,c.onload=function(){a.drawImage(e.video,0,0,i.width,i.height),c.src=i.toDataURL(o,n).replace(o,"image/octet-stream");let t=c.src.replace(/^data:image\/[^;]+/,"data:application/octet-stream");e.emit("screenShot",t),s&&function(e,t){let n=document.createElement("a");n.href=e,n.download=t;let o=document.createEvent("MouseEvents");o.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),n.dispatchEvent(o)}(t,"截图"+r)}()},e.on("screenShotBtnClick",e.screenShot),e.once("destroy",(function t(){e.off("screenShotBtnClick",e.screenShot),e.off("destroy",t)}))}};function r(e="div",t="",n={},o=""){let r=document.createElement(e);return r.className=o,r.innerHTML=t,Object.keys(n).forEach(t=>{let o=t,i=n[t];"video"===e||"audio"===e?i&&r.setAttribute(o,i):r.setAttribute(o,i)}),r}n(0);var i={name:"s_screenShot",method:function(){let e=this;if(!e.config.screenShot||e.config.screenShot.hideButton)return;let t=e.lang.SCREENSHOT,n=r("xg-screenshot",`<p class="name"><span>${e.config.screenShot.iconText||t}</span></p>`,{tabindex:11},"xgplayer-screenshot");e.once("ready",()=>{e.controls.appendChild(n)}),["click","touchend"].forEach(t=>{n.addEventListener(t,t=>{t.preventDefault(),t.stopPropagation(),e.userGestureTrigEvent("screenShotBtnClick")})})}};t.default={name:"screenShot",method:function(){o.method.call(this),i.method.call(this)}}}])}));