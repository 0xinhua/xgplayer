{"version":3,"file":"index.min.js","sources":["../../../node_modules/style-inject/dist/style-inject.es.js","../src/util.js","../src/lyric.js","../src/analyze.js","../node_modules/type/value/is.js","../node_modules/type/object/is.js","../node_modules/type/prototype/is.js","../node_modules/type/function/is.js","../node_modules/type/plain-function/is.js","../node_modules/es5-ext/object/assign/is-implemented.js","../node_modules/es5-ext/object/keys/is-implemented.js","../node_modules/es5-ext/function/noop.js","../node_modules/es5-ext/object/is-value.js","../node_modules/es5-ext/object/keys/shim.js","../node_modules/es5-ext/object/keys/index.js","../node_modules/es5-ext/object/valid-value.js","../node_modules/es5-ext/object/assign/shim.js","../node_modules/es5-ext/object/assign/index.js","../node_modules/es5-ext/object/normalize-options.js","../node_modules/es5-ext/string/#/contains/is-implemented.js","../node_modules/es5-ext/string/#/contains/shim.js","../node_modules/es5-ext/string/#/contains/index.js","../node_modules/d/index.js","../node_modules/es5-ext/object/valid-callable.js","../node_modules/event-emitter/index.js","../src/xhr.js","../src/music.js","../src/controls/backward.js","../src/controls/cover.js","../src/controls/forward.js","../src/controls/meta.js","../src/controls/next.js","../src/controls/prev.js"],"sourcesContent":["function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","// @filename https://gist.github.com/chaping/88813f56e75b0fd43f8c\nlet lastTime = 0\nconst prefixes = 'webkit moz ms o'.split(' ') // 各浏览器前缀\n\nlet requestAnimationFrame = window.requestAnimationFrame\nlet cancelAnimationFrame = window.cancelAnimationFrame\n\nvar prefix\n// 通过遍历各浏览器前缀，来得到requestAnimationFrame和cancelAnimationFrame在当前浏览器的实现形式\nfor (var i = 0; i < prefixes.length; i++) {\n  if (requestAnimationFrame && cancelAnimationFrame) {\n    break\n  }\n  prefix = prefixes[i]\n  requestAnimationFrame = requestAnimationFrame || window[prefix + 'RequestAnimationFrame']\n  cancelAnimationFrame = cancelAnimationFrame || window[prefix + 'CancelAnimationFrame'] || window[prefix + 'CancelRequestAnimationFrame']\n}\n\n// 如果当前浏览器不支持requestAnimationFrame和cancelAnimationFrame，则会退到setTimeout\nif (!requestAnimationFrame || !cancelAnimationFrame) {\n  requestAnimationFrame = function (callback, element) {\n    var currTime = new Date().getTime()\n    // 为了使setTimteout的尽可能的接近每秒60帧的效果\n    var timeToCall = Math.max(0, 16 - (currTime - lastTime))\n    var id = window.setTimeout(function () {\n      callback.call(currTime + timeToCall)\n    }, timeToCall)\n    lastTime = currTime + timeToCall\n    return id\n  }\n\n  cancelAnimationFrame = function (id) {\n    window.clearTimeout(id)\n  }\n}\n\nlet isSqrt = function (num, base) {\n  if (num !== 1) {\n    while (num !== 1) {\n      if (num % base === 0) {\n        num = num / base\n      } else {\n        return false\n      }\n    }\n    return true\n  } else {\n    return true\n  }\n}\n\nclass Color {\n  constructor (color, opacity = 1) {\n    this.color = Color.Valid.test(color) ? color : '#ffffff'\n    this.opacity = opacity\n  }\n  toArray () {\n    let color = this.color.slice(1)\n    let rgb = []\n    if (color.length === 6) {\n      color = color.match(/\\d{2}/g)\n      rgb = color.map((item) => {\n        return Number(`0x${item}`)\n      })\n    }\n    return rgb\n  }\n  toRGB () {\n    let rgb = this.toArray()\n    return rgb.length === 3 ? `rgb(${rgb[0]},${rgb[1]},${rgb[2]})` : ''\n  }\n  toGRBA () {\n    let rgb = this.toArray()\n    return rgb.length === 3 ? `rgba(${rgb[0]},${rgb[1]},${rgb[2]},${this.opacity})` : ''\n  }\n  static get Valid () {\n    return /^#[0-9A-F]{6}$|^#[0-9A-F]{3}$/i\n  }\n}\n\nexport default {\n  requestAnimationFrame,\n  cancelAnimationFrame,\n  isSqrt,\n  Color\n}\n","import Player from 'xgplayer'\n\nclass LyricTime {\n  constructor (timeTxt) {\n    this.regRule = /(\\d{2}(?=:)):(\\d{2}(?=\\.))\\.(\\d{2,3})/g\n    if (this.regRule.test(timeTxt)) {\n      this.time = RegExp.$1 * 60 + RegExp.$2 * 1 + ('0.' + RegExp.$3) * 1\n    } else {\n      this.time = -1\n    }\n  }\n}\n\nexport {LyricTime}\n\nclass Lyric {\n  constructor (txts, dom) {\n    this.rawTxts = txts\n    this.txts = txts.map((item) => { return item.replace(/^[\\r\\n]|[\\r\\n]$/g, '').match(/(\\[.*\\])[^[]+/g) })\n    this.isDynamics = txts.map((item, idx) => {\n      return [].concat(item.match(/\\[\\d{2}:\\d{2}\\.\\d{2,3}\\]/g)).length === this.txts[idx].length && this.txts[idx].length === this.txts[0].length && this.txts[idx].length > 1\n    })\n    this.isDynamic = this.isDynamics.some((item) => {\n      return item\n    })\n    this.__ainimateInterval__ = 0\n    this.__offset__ = 0\n    this.__offsetScale__ = 0.5\n    this.dom = dom\n    this.lists = []\n    this.isDynamics.map((item, idx) => {\n      if (item) {\n        this.lists.push(\n          this.txts[idx].map((txt, index) => {\n            const reg = /(\\[[\\d:\\S]+\\])([^[]+)/g.test(txt)\n            const time = RegExp.$1\n            const lyric = RegExp.$2\n            return {\n              time: reg ? new LyricTime(time).time : -1,\n              lyric,\n              idx: index\n            }\n          })\n        )\n      }\n    })\n    this.list = this.lists.reduce((pre, cur) => {\n      return pre.map((item, idx) => {\n        return {\n          time: item.time,\n          lyric: item.lyric === '\\n' ? `${item.lyric}${cur[idx].lyric}` : `${item.lyric}<br/>${cur[idx].lyric}`,\n          idx\n        }\n      })\n    })\n    this.line = 0\n  }\n  set interval (val) {\n    this.__ainimateInterval__ = val\n  }\n  get interval () {\n    return this.__ainimateInterval__\n  }\n  set offset (val) {\n    this.__offset__ = val\n  }\n  get offset () {\n    return this.__offset__\n  }\n  set offsetScale (val) {\n    this.__offsetScale__ = val\n  }\n  get offsetScale () {\n    return this.__offsetScale__\n  }\n  adjust () {\n    let list = this.list\n    for (let i = 0, j, k, len = list.length; i < len; i++) {\n      for (j = i + 1; j < len; j++) {\n        if (list[j].time > list[i].time) {\n          break\n        }\n      }\n      if (j < len) {\n        let sep = (list[j].time - list[i].time) / (j - i)\n        for (k = i + 1; k < j; k++) {\n          list[k].time = list[k - 1].time + sep\n        }\n      }\n    }\n  }\n  find (curTime) {\n    const list = this.list\n    const interval = this.__ainimateInterval__\n    const offset = this.__offset__\n    curTime = curTime + offset > 0 ? curTime + offset : 0\n    return list.filter(({time}, idx) => {\n      let idxy = idx + 1\n      return curTime >= time && ((list[idxy] && curTime * 1 + interval * 1 <= list[idxy].time) || (idxy >= list.length))\n    })\n  }\n  bind (player) {\n    let self = this\n    this.__player__ = player\n    if (self.isDynamic) {\n      self.__handle__ = (() => {\n        const f = this.find(player.currentTime)[0]\n        if (f && f.idx !== this.line) {\n          this.line = f.idx\n          player.emit('lyricUpdate', f)\n        }\n      }).bind(self, player)\n      player.on('timeupdate', self.__handle__)\n\n      self.__startHandle__ = (() => {\n        player.emit('lyricUpdate', self.list[0])\n      }).bind(self, player)\n      player.once('playing', self.__startHandle__)\n      //\n      // self.__endHandle__ = (() => {\n      //   player.emit('lyricUpdate', self.list[self.list.length - 1])\n      // }).bind(self, player)\n      // player.on('ended', self.__endHandle__)\n      return true\n    } else {\n      return false\n    }\n  }\n  unbind (player) {\n    delete this.__player__\n    if (this.__handle__) {\n      player.off('lyricUpdate', this.__handle__)\n      delete this.__handle__\n    }\n  }\n  show () {\n    let dom = this.dom\n    let lyrbicTxts = []\n    let self = this\n    const ev = ['click', 'touchstart']\n    if (dom && dom.nodeType === 1) {\n      const lrcWrap = Player.util.createDom('div', `<div></div>`, {}, 'xgplayer-lrcWrap')\n      dom.appendChild(lrcWrap)\n      this.list.forEach(item => {\n        lyrbicTxts.push(`<xg-lyric-item class=\"xgplayer-lyric-item\" data-idx=\"${item.idx}\">${item.lyric.replace(/[\\r\\n]/g, '')}</xg-lyric-item>`)\n      })\n      lrcWrap.innerHTML = lyrbicTxts.join('')\n      const lrcForward = Player.util.createDom('xg-lrcForward', `<div></div>`, {}, 'xgplayer-lrcForward')\n      dom.appendChild(lrcForward)\n      ev.forEach(item => {\n        lrcForward.addEventListener(item, function (e) {\n          e.preventDefault()\n          e.stopPropagation()\n          self.offset -= self.offsetScale\n          console.log(`lyric go forward ${self.offsetScale}s`)\n        }, false)\n      })\n\n      const lrcBack = Player.util.createDom('xg-lrcBack', `<div></div>`, {}, 'xgplayer-lrcBack')\n      dom.appendChild(lrcBack)\n      ev.forEach(item => {\n        lrcBack.addEventListener(item, function (e) {\n          e.preventDefault()\n          e.stopPropagation()\n          self.offset += self.offsetScale\n          console.log(`lyric go back ${self.offsetScale}s`)\n        }, false)\n      })\n      this.__updateHandle__ = (item) => {\n        let domWrap = this.dom.querySelector('.xgplayer-lrcWrap')\n        let activeDom = domWrap.querySelector('.xgplayer-lyric-item-active')\n        let offsetHeight = domWrap.offsetHeight\n        let activeTop\n        if (activeDom) {\n          activeDom.className = 'xgplayer-lyric-item'\n        }\n        activeDom = domWrap.querySelector(`.xgplayer-lyric-item[data-idx=\"${item.idx}\"]`)\n        if (activeDom) {\n          activeDom.className = 'xgplayer-lyric-item xgplayer-lyric-item-active'\n          activeTop = (activeDom.getBoundingClientRect().top - domWrap.getBoundingClientRect().top + domWrap.scrollTop - offsetHeight / 2)\n          if (activeTop) {\n            domWrap.scrollTop = activeTop\n          }\n        }\n      }\n      this.__player__.on('lyricUpdate', this.__updateHandle__)\n    } else {\n      this.__player__.emit('error', 'lyric container can not be empty')\n    }\n  }\n  hide () {\n    this.__updateHandle__.off('lyricUpdate', this.__updateHandle__)\n  }\n}\n\nexport default Lyric\n","import util from './util'\nconst {\n  requestAnimationFrame: req, cancelAnimationFrame: cancel, isSqrt, Color\n} = util\n\nclass Analyze {\n  constructor (player, canvas) {\n    this.canvas = canvas\n    this.player = player\n    if (!Analyze.AudioCtx) {\n      return\n    }\n    const audioCtx = new Analyze.AudioCtx()\n    let analyser = audioCtx.createAnalyser()\n    let gainNode = audioCtx.createGain()\n    analyser.minDecibels = -90\n    analyser.maxDecibels = -10\n    analyser.smoothingTimeConstant = 0.85\n    gainNode.gain.setValueAtTime(player.volume, player.currentTime)\n    this.er = audioCtx.createMediaElementSource(player.video)\n    this.analyser = analyser\n    this.ctx = canvas.getContext('2d')\n    this.er.connect(analyser)\n    analyser.connect(gainNode)\n    gainNode.connect(audioCtx.destination)\n\n    this.style = {\n      bgColor: '#c8c8c8',\n      color: '#643232'\n    }\n    this.__type__ = 'bars'\n    this.__size__ = 256\n    this.__status__ = {\n      switch: 'on'\n    };\n    ['play', 'playing', 'seeked'].forEach(name => {\n      player.on(name, () => {\n        this[`__${this.__type__}__`]()\n      })\n    });\n    ['seeking', 'waiting', 'pause', 'ended'].forEach(name => {\n      cancel(this.__status__[this.__type__])\n    })\n    player.on('volumechange', () => {\n      gainNode.gain.setValueAtTime(player.volume, player.currentTime)\n    })\n    player.on('destroy', () => {\n      audioCtx.close()\n    })\n  }\n\n  __wave__ () {\n    cancel(this.__status__['wave'])\n    cancel(this.__status__['bars'])\n    if (this.__status__.switch === 'off') {\n      return\n    }\n    let analyser = this.analyser\n    let canvas = this.canvas\n    let ctx = this.ctx\n    let bufferLen = analyser.frequencyBinCount\n    let dataArray = new Uint8Array(bufferLen)\n    const WIDTH = canvas.width\n    const HEIGHT = canvas.height\n    const color = new Color(this.style.color).toRGB()\n    const bgColor = new Color(this.style.color).toRGB()\n    analyser.fftSize = this.__size__\n    const draw = () => {\n      this.__status__['wave'] = req(draw)\n      analyser.getByteTimeDomainData(dataArray)\n      ctx.clearRect(0, 0, WIDTH, HEIGHT)\n      ctx.fillStyle = bgColor\n      ctx.lineWidth = 2\n      ctx.strokeStyle = color\n      ctx.beginPath()\n      const sliceWidth = WIDTH * 1.0 / bufferLen\n      let x = 0\n      for (let i = 0; i < bufferLen; i++) {\n        let v = dataArray[i] / 128.0\n        let y = v * HEIGHT / 2\n        if (i === 0) {\n          ctx.moveTo(x, y)\n        } else {\n          ctx.lineTo(x, y)\n        }\n        x += sliceWidth\n      }\n      ctx.lineTo(canvas.width, canvas.height / 2)\n      ctx.stroke()\n    }\n    draw()\n  }\n  __bars__ () {\n    cancel(this.__status__['wave'])\n    cancel(this.__status__['bars'])\n    if (this.__status__.switch === 'off') {\n      return\n    }\n    let analyser = this.analyser\n    let canvas = this.canvas\n    let ctx = this.ctx\n    let bufferLen = analyser.frequencyBinCount\n    let dataArray = new Uint8Array(bufferLen)\n    const WIDTH = canvas.width\n    const HEIGHT = canvas.height\n    const color = new Color(this.style.color).toArray()\n    const bgColor = new Color(this.style.color).toRGB()\n    analyser.fftSize = this.__size__\n\n    const draw = () => {\n      this.__status__['bars'] = req(draw)\n      analyser.getByteFrequencyData(dataArray)\n      ctx.clearRect(0, 0, WIDTH, HEIGHT)\n      ctx.fillStyle = bgColor\n      ctx.fillRect(0, 0, WIDTH, HEIGHT)\n      const barWidth = (WIDTH / bufferLen) * 2.5\n      let barHeight\n      let x = 0\n      for (var i = 0; i < bufferLen; i++) {\n        barHeight = dataArray[i]\n        ctx.fillStyle = `rgb(${barHeight + color[0]},${color[1]},${color[2]})`\n        ctx.fillRect(x, HEIGHT - barHeight / 2, barWidth, barHeight / 2)\n        x += barWidth + 1\n      }\n    }\n    draw()\n  }\n  on () {\n    this.__status__.switch = 'on'\n    this[`__${this.__type__}__`]()\n  }\n  off () {\n    this.__status__.switch = 'off'\n    cancel(this.__status__['wave'])\n    cancel(this.__status__['bars'])\n  }\n  set mode (mode) {\n    if (Analyze.Mode.filter(item => item === mode).length) {\n      this.__type__ = mode\n      if (this.__status__.switch === 'on') {\n        this[`__${mode}__`]()\n      }\n    }\n  }\n  get mode () {\n    return this.__type__\n  }\n  set size (num) {\n    if (num < 65536 && isSqrt(num, 2)) {\n      this.__size__ = num\n      this.analyser.fftSize = num\n      this[`__${this.__type__}__`]()\n    }\n  }\n  get size () {\n    return this.__size__\n  }\n  get status () {\n    return this.__status__.switch\n  }\n  static get AudioCtx () {\n    return window.AudioContext || window.webkitAudioContext\n  }\n  static get Mode () {\n    return ['wave', 'bars']\n  }\n}\n\nexport default Analyze\n","\"use strict\";\n\n// ES3 safe\nvar _undefined = void 0;\n\nmodule.exports = function (value) { return value !== _undefined && value !== null; };\n","\"use strict\";\n\nvar isValue = require(\"../value/is\");\n\n// prettier-ignore\nvar possibleTypes = { \"object\": true, \"function\": true, \"undefined\": true /* document.all */ };\n\nmodule.exports = function (value) {\n\tif (!isValue(value)) return false;\n\treturn hasOwnProperty.call(possibleTypes, typeof value);\n};\n","\"use strict\";\n\nvar isObject = require(\"../object/is\");\n\nmodule.exports = function (value) {\n\tif (!isObject(value)) return false;\n\ttry {\n\t\tif (!value.constructor) return false;\n\t\treturn value.constructor.prototype === value;\n\t} catch (error) {\n\t\treturn false;\n\t}\n};\n","\"use strict\";\n\nvar isPrototype = require(\"../prototype/is\");\n\nmodule.exports = function (value) {\n\tif (typeof value !== \"function\") return false;\n\n\tif (!hasOwnProperty.call(value, \"length\")) return false;\n\n\ttry {\n\t\tif (typeof value.length !== \"number\") return false;\n\t\tif (typeof value.call !== \"function\") return false;\n\t\tif (typeof value.apply !== \"function\") return false;\n\t} catch (error) {\n\t\treturn false;\n\t}\n\n\treturn !isPrototype(value);\n};\n","\"use strict\";\n\nvar isFunction = require(\"../function/is\");\n\nvar classRe = /^\\s*class[\\s{/}]/, functionToString = Function.prototype.toString;\n\nmodule.exports = function (value) {\n\tif (!isFunction(value)) return false;\n\tif (classRe.test(functionToString.call(value))) return false;\n\treturn true;\n};\n","\"use strict\";\n\nmodule.exports = function () {\n\tvar assign = Object.assign, obj;\n\tif (typeof assign !== \"function\") return false;\n\tobj = { foo: \"raz\" };\n\tassign(obj, { bar: \"dwa\" }, { trzy: \"trzy\" });\n\treturn obj.foo + obj.bar + obj.trzy === \"razdwatrzy\";\n};\n","\"use strict\";\n\nmodule.exports = function () {\n\ttry {\n\t\tObject.keys(\"primitive\");\n\t\treturn true;\n\t} catch (e) {\n\t\treturn false;\n\t}\n};\n","\"use strict\";\n\n// eslint-disable-next-line no-empty-function\nmodule.exports = function () {};\n","\"use strict\";\n\nvar _undefined = require(\"../function/noop\")(); // Support ES3 engines\n\nmodule.exports = function (val) { return val !== _undefined && val !== null; };\n","\"use strict\";\n\nvar isValue = require(\"../is-value\");\n\nvar keys = Object.keys;\n\nmodule.exports = function (object) { return keys(isValue(object) ? Object(object) : object); };\n","\"use strict\";\n\nmodule.exports = require(\"./is-implemented\")() ? Object.keys : require(\"./shim\");\n","\"use strict\";\n\nvar isValue = require(\"./is-value\");\n\nmodule.exports = function (value) {\n\tif (!isValue(value)) throw new TypeError(\"Cannot use null or undefined\");\n\treturn value;\n};\n","\"use strict\";\n\nvar keys  = require(\"../keys\")\n  , value = require(\"../valid-value\")\n  , max   = Math.max;\n\nmodule.exports = function (dest, src/*, …srcn*/) {\n\tvar error, i, length = max(arguments.length, 2), assign;\n\tdest = Object(value(dest));\n\tassign = function (key) {\n\t\ttry {\n\t\t\tdest[key] = src[key];\n\t\t} catch (e) {\n\t\t\tif (!error) error = e;\n\t\t}\n\t};\n\tfor (i = 1; i < length; ++i) {\n\t\tsrc = arguments[i];\n\t\tkeys(src).forEach(assign);\n\t}\n\tif (error !== undefined) throw error;\n\treturn dest;\n};\n","\"use strict\";\n\nmodule.exports = require(\"./is-implemented\")() ? Object.assign : require(\"./shim\");\n","\"use strict\";\n\nvar isValue = require(\"./is-value\");\n\nvar forEach = Array.prototype.forEach, create = Object.create;\n\nvar process = function (src, obj) {\n\tvar key;\n\tfor (key in src) obj[key] = src[key];\n};\n\n// eslint-disable-next-line no-unused-vars\nmodule.exports = function (opts1/*, …options*/) {\n\tvar result = create(null);\n\tforEach.call(arguments, function (options) {\n\t\tif (!isValue(options)) return;\n\t\tprocess(Object(options), result);\n\t});\n\treturn result;\n};\n","\"use strict\";\n\nvar str = \"razdwatrzy\";\n\nmodule.exports = function () {\n\tif (typeof str.contains !== \"function\") return false;\n\treturn str.contains(\"dwa\") === true && str.contains(\"foo\") === false;\n};\n","\"use strict\";\n\nvar indexOf = String.prototype.indexOf;\n\nmodule.exports = function (searchString/*, position*/) {\n\treturn indexOf.call(this, searchString, arguments[1]) > -1;\n};\n","\"use strict\";\n\nmodule.exports = require(\"./is-implemented\")() ? String.prototype.contains : require(\"./shim\");\n","\"use strict\";\n\nvar isValue         = require(\"type/value/is\")\n  , isPlainFunction = require(\"type/plain-function/is\")\n  , assign          = require(\"es5-ext/object/assign\")\n  , normalizeOpts   = require(\"es5-ext/object/normalize-options\")\n  , contains        = require(\"es5-ext/string/#/contains\");\n\nvar d = (module.exports = function (dscr, value/*, options*/) {\n\tvar c, e, w, options, desc;\n\tif (arguments.length < 2 || typeof dscr !== \"string\") {\n\t\toptions = value;\n\t\tvalue = dscr;\n\t\tdscr = null;\n\t} else {\n\t\toptions = arguments[2];\n\t}\n\tif (isValue(dscr)) {\n\t\tc = contains.call(dscr, \"c\");\n\t\te = contains.call(dscr, \"e\");\n\t\tw = contains.call(dscr, \"w\");\n\t} else {\n\t\tc = w = true;\n\t\te = false;\n\t}\n\n\tdesc = { value: value, configurable: c, enumerable: e, writable: w };\n\treturn !options ? desc : assign(normalizeOpts(options), desc);\n});\n\nd.gs = function (dscr, get, set/*, options*/) {\n\tvar c, e, options, desc;\n\tif (typeof dscr !== \"string\") {\n\t\toptions = set;\n\t\tset = get;\n\t\tget = dscr;\n\t\tdscr = null;\n\t} else {\n\t\toptions = arguments[3];\n\t}\n\tif (!isValue(get)) {\n\t\tget = undefined;\n\t} else if (!isPlainFunction(get)) {\n\t\toptions = get;\n\t\tget = set = undefined;\n\t} else if (!isValue(set)) {\n\t\tset = undefined;\n\t} else if (!isPlainFunction(set)) {\n\t\toptions = set;\n\t\tset = undefined;\n\t}\n\tif (isValue(dscr)) {\n\t\tc = contains.call(dscr, \"c\");\n\t\te = contains.call(dscr, \"e\");\n\t} else {\n\t\tc = true;\n\t\te = false;\n\t}\n\n\tdesc = { get: get, set: set, configurable: c, enumerable: e };\n\treturn !options ? desc : assign(normalizeOpts(options), desc);\n};\n","\"use strict\";\n\nmodule.exports = function (fn) {\n\tif (typeof fn !== \"function\") throw new TypeError(fn + \" is not a function\");\n\treturn fn;\n};\n","'use strict';\n\nvar d        = require('d')\n  , callable = require('es5-ext/object/valid-callable')\n\n  , apply = Function.prototype.apply, call = Function.prototype.call\n  , create = Object.create, defineProperty = Object.defineProperty\n  , defineProperties = Object.defineProperties\n  , hasOwnProperty = Object.prototype.hasOwnProperty\n  , descriptor = { configurable: true, enumerable: false, writable: true }\n\n  , on, once, off, emit, methods, descriptors, base;\n\non = function (type, listener) {\n\tvar data;\n\n\tcallable(listener);\n\n\tif (!hasOwnProperty.call(this, '__ee__')) {\n\t\tdata = descriptor.value = create(null);\n\t\tdefineProperty(this, '__ee__', descriptor);\n\t\tdescriptor.value = null;\n\t} else {\n\t\tdata = this.__ee__;\n\t}\n\tif (!data[type]) data[type] = listener;\n\telse if (typeof data[type] === 'object') data[type].push(listener);\n\telse data[type] = [data[type], listener];\n\n\treturn this;\n};\n\nonce = function (type, listener) {\n\tvar once, self;\n\n\tcallable(listener);\n\tself = this;\n\ton.call(this, type, once = function () {\n\t\toff.call(self, type, once);\n\t\tapply.call(listener, this, arguments);\n\t});\n\n\tonce.__eeOnceListener__ = listener;\n\treturn this;\n};\n\noff = function (type, listener) {\n\tvar data, listeners, candidate, i;\n\n\tcallable(listener);\n\n\tif (!hasOwnProperty.call(this, '__ee__')) return this;\n\tdata = this.__ee__;\n\tif (!data[type]) return this;\n\tlisteners = data[type];\n\n\tif (typeof listeners === 'object') {\n\t\tfor (i = 0; (candidate = listeners[i]); ++i) {\n\t\t\tif ((candidate === listener) ||\n\t\t\t\t\t(candidate.__eeOnceListener__ === listener)) {\n\t\t\t\tif (listeners.length === 2) data[type] = listeners[i ? 0 : 1];\n\t\t\t\telse listeners.splice(i, 1);\n\t\t\t}\n\t\t}\n\t} else {\n\t\tif ((listeners === listener) ||\n\t\t\t\t(listeners.__eeOnceListener__ === listener)) {\n\t\t\tdelete data[type];\n\t\t}\n\t}\n\n\treturn this;\n};\n\nemit = function (type) {\n\tvar i, l, listener, listeners, args;\n\n\tif (!hasOwnProperty.call(this, '__ee__')) return;\n\tlisteners = this.__ee__[type];\n\tif (!listeners) return;\n\n\tif (typeof listeners === 'object') {\n\t\tl = arguments.length;\n\t\targs = new Array(l - 1);\n\t\tfor (i = 1; i < l; ++i) args[i - 1] = arguments[i];\n\n\t\tlisteners = listeners.slice();\n\t\tfor (i = 0; (listener = listeners[i]); ++i) {\n\t\t\tapply.call(listener, this, args);\n\t\t}\n\t} else {\n\t\tswitch (arguments.length) {\n\t\tcase 1:\n\t\t\tcall.call(listeners, this);\n\t\t\tbreak;\n\t\tcase 2:\n\t\t\tcall.call(listeners, this, arguments[1]);\n\t\t\tbreak;\n\t\tcase 3:\n\t\t\tcall.call(listeners, this, arguments[1], arguments[2]);\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tl = arguments.length;\n\t\t\targs = new Array(l - 1);\n\t\t\tfor (i = 1; i < l; ++i) {\n\t\t\t\targs[i - 1] = arguments[i];\n\t\t\t}\n\t\t\tapply.call(listeners, this, args);\n\t\t}\n\t}\n};\n\nmethods = {\n\ton: on,\n\tonce: once,\n\toff: off,\n\temit: emit\n};\n\ndescriptors = {\n\ton: d(on),\n\tonce: d(once),\n\toff: d(off),\n\temit: d(emit)\n};\n\nbase = defineProperties({}, descriptors);\n\nmodule.exports = exports = function (o) {\n\treturn (o == null) ? create(base) : defineProperties(Object(o), descriptors);\n};\nexports.methods = methods;\n","import EventEmitter from 'event-emitter'\n\nclass Xhr {\n  constructor (url, callback) {\n    EventEmitter(this)\n    this.url = url\n    let xhr = new window.XMLHttpRequest()\n    xhr.target = this\n    xhr.responseType = 'arraybuffer'\n    xhr.open('get', url)\n    xhr.onload = function () {\n      if (xhr.status === 200 || xhr.status === 206) {\n        if (callback && callback instanceof Function) {\n          callback(xhr.response)\n        }\n      }\n    }\n    xhr.onerror = function (e) {\n      xhr.target.emit('error' + e.message)\n    }\n    this.xhr = xhr\n    this.run()\n  }\n  cancel () {\n    this.xhr.abort()\n  }\n\n  run () {\n    if (this.xhr.readyState === 1) {\n      this.xhr.send()\n    }\n  }\n}\n\nexport default Xhr\n","import Player from 'xgplayer'\nimport Lyric from './lyric'\nimport Analyze from './analyze'\nimport Xhr from './xhr'\nlet mode\nlet timeScale = 15\n\nconst util = Player.util\n\nclass Music extends Player {\n  constructor (options) {\n    let opts = util.deepCopy({\n      controls: true,\n      mediaType: 'audio',\n      ignores: ['fullscreen', 'start', 'definition', 'makeBullet', 'textTrack', 'loading', 'pc', 'mobile', 'playbackRate', 'replay', 'error', 'poster']\n    }, options)\n    if (!opts.volumeShow) {\n      opts.ignores.push('volume')\n    }\n    super(opts)\n    let player = this\n    this.rawConfig = options\n    this.list = util.typeOf(opts.url) === 'Array' ? opts.url : [{\n      src: opts.url,\n      name: opts.name,\n      vid: opts.vid,\n      poster: opts.poster\n    }]\n    this.name = this.list[0].name\n    this.vid = this.list[0].vid\n    this.poster = this.list[0].poster\n    this.nextIndex = 1\n    this.prevIndex = this.list.length - 1\n    this.halfPass = false\n    this.history = []\n    this.index = 0\n    if (!opts.controls) {\n      this.root.style.display = 'none'\n      return\n    }\n\n    util.addClass(this.root, 'xgplayer-music')\n    if (!opts.width) {\n      this.config.width = '100%'\n      this.root.style.width = '100%'\n    }\n    if (!opts.height) {\n      this.config.height = '50px'\n      this.root.style.height = '50px'\n    }\n    Object.defineProperty(this, 'src', {\n      get () {\n        return this.video.currentSrc\n      },\n      set (v) {\n        let cur = util.typeOf(v) === 'String' ? {src: v, name: ''} : v\n        this.history.push(cur)\n        this.video.src = cur.src\n      },\n      configurable: true\n    })\n    if (this.config.autoplayMuted) {\n      this.config.volume = this.config.autoplay ? 0 : this.config.volume\n    }\n    player.once('ready', () => {\n      util.addClass(player.root, 'xgplayer-skin-default')\n      if(player.config.lang && player.config.lang === 'en') {\n        util.addClass(player.root, 'lang-is-en')\n      } else if(player.config.lang === 'jp') {\n        util.addClass(player.root, 'lang-is-jp')\n      }\n    })\n    this.once('canplay', function () {\n      if (this.config.autoplay && this.config.autoplayMuted) {\n        this.volume = 0\n      } else {\n        this.volume = this.config.volume\n      }\n    })\n    this.on('timeupdate', () => {\n      if (!this.halfPass && this.currentTime > this.duration / 2) {\n        this.confirmOrder()\n      }\n    })\n    this.on('ended', () => {\n      if (this.mode === 'order' && this.index + 1 >= this.list.length) {\n        this.pause()\n        this.currentTime = 0\n        return\n      }\n      switch (this.mode) {\n        case 'sloop':\n          this.change()\n          break\n        case 'order':\n        case 'loop':\n        default:\n          this.next()\n          break\n      }\n    })\n    if (!this.config.segPlay) {\n      this.checkOffline(player.list[0].src, player.list[0].vid || player.list[0].name).then(url => {\n        player.config.url = url\n        player.start(url)\n      })\n    }\n  }\n  lyric (lyricTxts, Dom) {\n    if (this.__lyric__) {\n      this.__lyric__.unbind(this)\n    }\n    if (Player.util.typeOf(lyricTxts) !== 'Array') {\n      lyricTxts = [].concat(lyricTxts)\n    }\n    this.__lyric__ = new Lyric(lyricTxts, Dom)\n    this.__lyric__.bind(this)\n    return this.__lyric__\n  }\n  confirmOrder () {\n    let player = this\n    this.halfPass = true\n    this.nextComput()\n    this.prevComput()\n    if (this.config.preloadNext) {\n      this.checkOffline(this.list[this.nextIndex].src, this.list[this.nextIndex].vid || this.list[this.nextIndex].name).then(url => {\n        if (url.indexOf('blob:') < 0) {\n          let offlineVid = player.list[player.nextIndex].vid || player.list[player.nextIndex].name\n          let xhr = new Xhr(player.list[player.nextIndex].src, res => {\n            player.database.openDB(() => {\n              player.database.addData(player.database.myDB.ojstore.name, [{vid: offlineVid, blob: new Blob([res], {type: 'audio/mp4; codecs=\"mp4a.40.5\"'})}])\n              setTimeout(() => {\n                player.database.closeDB()\n              }, 5000)\n            })\n          })\n        }\n      })\n    }\n  }\n\n  get mode () {\n    return mode || Music.ModeType[2]\n  }\n  set mode (idx) {\n    switch (idx) {\n      case 0:\n      case 1:\n      case 2:\n      case 3:\n        mode = Music.ModeType[idx]\n    }\n    this.confirmOrder()\n  }\n\n  nextComput () {\n    switch (this.mode) {\n      case 'sloop':\n      case 'order':\n      case 'loop':\n        if (this.index + 1 < this.list.length) {\n          this.nextIndex = this.index + 1\n        } else {\n          this.nextIndex = 0\n        }\n        break\n      default:\n        this.nextIndex = Math.ceil(Math.random() * this.list.length)\n        break\n    }\n  }\n  prevComput () {\n    switch (this.mode) {\n      case 'sloop':\n      case 'order':\n      case 'loop':\n        if (this.index - 1 >= 0) {\n          this.prevIndev = this.index - 1\n        } else {\n          this.prevIndev = this.list.length - 1\n        }\n        break\n      default:\n        this.prevIndev = Math.ceil(Math.random() * this.list.length)\n        break\n    }\n  }\n  get timeScale () {\n    return timeScale || 15\n  }\n  set timeScale (scale) {\n    timeScale = scale\n  }\n\n  add (meta) {\n    this.list.push({\n      src: meta.src,\n      name: meta.name,\n      vid: meta.vid,\n      poster: meta.poster\n    })\n  }\n  remove (url) {\n    let idx = -1\n    this.list.every((item, index) => {\n      if (item.src === url || item.name === url || item.vid === url) {\n        idx = index\n        return false\n      } else {\n        return true\n      }\n    })\n    if (idx > -1) {\n      this.list.splice(idx, 1)\n    }\n  }\n  change () {\n    let self = this\n    let offlineVid = self.list[self.index].vid || self.list[self.index].name\n    this.halfPass = false\n    this.checkOffline(self.list[self.index].src, offlineVid).then(url => {\n      if (Player.m4a) {\n        self.video.load()\n        self.name = self.list[self.index].name\n        self.vid = self.list[self.index].vid\n        self.poster = self.list[self.index].poster\n        self.emit('change', {src: url, name: self.name, vid: self.vid, poster: self.poster})\n      } else {\n        self.video.pause()\n        self.currentTime = 0\n        self.src = url\n        self.name = self.list[self.index].name\n        self.vid = self.list[self.index].vid\n        self.poster = self.list[self.index].poster\n        setTimeout(() => {\n          self.video.play().then(() => {\n            self.emit('change', {src: url, name: self.name, vid: self.vid, poster: self.poster})\n          })\n        }, 60)\n      }\n    })\n  }\n  checkOffline (url, offlineVid) {\n    let self = this\n    return new Promise((resolve) => {\n      if (!self.config.offline) {\n        resolve(url)\n      }\n      self.database.openDB(() => {\n        self.database.getDataByKey(self.database.myDB.ojstore.name, offlineVid, result => {\n          setTimeout(() => {\n            self.database.closeDB()\n          }, 5000)\n          if (result) {\n            resolve(URL.createObjectURL(result.blob))\n          } else {\n            resolve(url)\n          }\n        })\n      })\n    })\n  }\n  next () {\n    if (!this.halfPass) {\n      this.halfPass = true\n      this.nextComput()\n    }\n    this.index = this.nextIndex\n    this.change()\n  }\n  prev () {\n    if (!this.halfPass) {\n      this.halfPass = true\n      this.prevComput()\n    }\n    this.index = this.prevIndex\n    this.change()\n  }\n  forward () {\n    // console.log(`music go forward ${timeScale}s`)\n    this.currentTime = this.currentTime + timeScale < this.duration ? this.currentTime + timeScale : this.duration - 0.1\n  }\n  backward () {\n    // console.log(`music go backward ${timeScale}s`)\n    this.currentTime = this.currentTime - timeScale > 0 ? this.currentTime - timeScale : 0\n  }\n  analyze (canvas) {\n    return new Analyze(this, canvas)\n  }\n  static get AudioCtx () {\n    return window.AudioContext || window.webkitAudioContext\n  }\n  static get ModeType () {\n    return ['order', 'random', 'loop', 'sloop']\n  }\n}\n\nexport default Music\nexport {\n  Lyric,\n  Analyze\n}\n","import Player from '../music'\n\nconst backward = (player) => {\n  const util = Player.util\n  const controlEl = player.controls\n  const ev = ['click', 'touchstart']\n  let backwardBtn = player.config.backwardBtn ? player.config.backwardBtn : {}\n  let backward\n  if (backwardBtn.type === 'img') {\n    backward = Player.util.createImgBtn('backward', backwardBtn.url, backwardBtn.width, backwardBtn.height)\n  } else {\n    backward = util.createDom('xg-backward', `<xg-icon class=\"xgplayer-icon\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1024\" height=\"1024\" viewBox=\"0 0 1024 1024\">\n              <path transform = \"scale(1.5 1.5) translate(8 4.5)\"\n              d=\"m 14,2.99996 0,10 -7,-5 7,-5 z m -7,5 0,5 -7,-5 7,-5 0,5 z m -7,0 0,0 z\"></path>\n          </svg></xg-icon>`, {}, 'xgplayer-backward')\n  }\n  controlEl.appendChild(backward)\n  ev.forEach(item => {\n    backward.addEventListener(item, function (e) {\n      e.preventDefault()\n      e.stopPropagation()\n      player.backward()\n    }, false)\n  })\n}\n\nPlayer.install('backward', backward)\n","import Player from '../music'\n\nconst cover = (player) => {\n  const util = Player.util\n  const controlEl = player.controls\n  const poster = util.createDom('xg-cover', `<img src=\"${player.config.poster || player.config.url[0].poster}\">`, {}, 'xgplayer-cover')\n  controlEl.appendChild(poster)\n  player.on('change', item => {\n    poster.innerHTML = `<img src=\"${item.poster}\">`\n  })\n}\n\nPlayer.install('cover', cover)\n","import Player from '../music'\n\nconst forward = (player) => {\n  const util = Player.util\n  const controlEl = player.controls\n  const ev = ['click', 'touchstart']\n  let forwardBtn = player.config.forwardBtn ? player.config.forwardBtn : {}\n  let forward\n  if (forwardBtn.type === 'img') {\n    forward = Player.util.createImgBtn('forward', forwardBtn.url, forwardBtn.width, forwardBtn.height)\n  } else {\n    forward = util.createDom('xg-forward', `<xg-icon class=\"xgplayer-icon\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1024\" height=\"1024\" viewBox=\"0 0 1024 1024\">\n              <path transform = \"scale(1.5 1.5) translate(-2 4.5)\"\n              d=\"m 2,2.99996 0,10 7,-5 -7,-5 z m 7,5 0,5 7,-5 -7,-5 0,5 z m 7,0 0,0 z\"></path>\n          </svg></xg-icon>`, {}, 'xgplayer-forward')\n  }\n  controlEl.appendChild(forward)\n  ev.forEach(item => {\n    forward.addEventListener(item, function (e) {\n      e.preventDefault()\n      e.stopPropagation()\n      player.forward()\n    }, false)\n  })\n}\n\nPlayer.install('forward', forward)\n","import Player from '../music'\n\nconst meta = (player) => {\n  const util = Player.util\n  const progressEl = player.controls.querySelector('.xgplayer-progress')\n  const name = util.createDom('xg-name', `${player.config.name || player.config.url[0].name}`, {}, 'xgplayer-name')\n  progressEl.appendChild(name)\n  player.on('change', item => {\n    name.innerHTML = `${item.name}`\n  })\n}\n\nPlayer.install('meta', meta)\n","import Player from '../music'\n\nconst next = (player) => {\n  const util = Player.util\n  const controlEl = player.controls\n  const ev = ['click', 'touchstart']\n  let nextBtn = player.config.nextBtn ? player.config.nextBtn : {}\n  let next\n  if (nextBtn.type === 'img') {\n    next = Player.util.createImgBtn('next', nextBtn.url, nextBtn.width, nextBtn.height)\n  } else {\n    next = util.createDom('xg-next', `<xg-icon class=\"xgplayer-icon\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1024\" height=\"1024\" viewBox=\"0 0 1024 1024\">\n              <path transform=\"scale(0.025 0.025)\"\n              d=\"M800 380v768h-128v-352l-320 320v-704l320 320v-352z\"></path>\n          </svg></xg-icon>`, {}, 'xgplayer-next')\n  }\n  controlEl.appendChild(next)\n  ev.forEach(item => {\n    next.addEventListener(item, function (e) {\n      e.preventDefault()\n      e.stopPropagation()\n      player.next()\n    }, false)\n  })\n}\n\nPlayer.install('next', next)\n","import Player from '../music'\n\nconst prev = (player) => {\n  const util = Player.util\n  const controlEl = player.controls\n  const ev = ['click', 'touchstart']\n  let prevBtn = player.config.prevBtn ? player.config.prevBtn : {}\n  let prev\n  if (prevBtn.type === 'img') {\n    prev = Player.util.createImgBtn('prev', prevBtn.url, prevBtn.width, prevBtn.height)\n  } else {\n    prev = util.createDom('xg-prev', `<xg-icon class=\"xgplayer-icon\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1024\" height=\"1024\" viewBox=\"0 0 1024 1024\">\n              <path transform = \"scale(0.025 0.025)\"\n              d=\"M600 1140v-768h128v352l320-320v704l-320-320v352zz\"></path>\n          </svg></xg-icon>`, {}, 'xgplayer-prev')\n  }\n  controlEl.appendChild(prev)\n\n  ev.forEach(item => {\n    prev.addEventListener(item, function (e) {\n      e.preventDefault()\n      e.stopPropagation()\n      player.prev()\n    }, false)\n  })\n}\n\nPlayer.install('prev', prev)\n"],"names":["styleInject","css","ref","insertAt","document","head","getElementsByTagName","style","createElement","type","firstChild","insertBefore","appendChild","styleSheet","cssText","createTextNode","LyricTime","timeTxt","regRule","this","test","time","RegExp","$1","$2","$3","Lyric","txts","dom","rawTxts","map","item","replace","match","isDynamics","idx","concat","length","_this","isDynamic","some","__ainimateInterval__","__offset__","__offsetScale__","lists","push","txt","index","reg","lyric","list","reduce","pre","cur","line","j","k","i","len","sep","curTime","interval","offset","filter","idxy","player","self","__player__","__handle__","f","_this2","find","currentTime","emit","bind","on","__startHandle__","once","off","lyrbicTxts","ev","nodeType","lrcWrap","Player","util","createDom","forEach","innerHTML","join","lrcForward","addEventListener","e","preventDefault","stopPropagation","offsetScale","log","lrcBack","__updateHandle__","domWrap","_this3","querySelector","activeDom","offsetHeight","activeTop","className","getBoundingClientRect","top","scrollTop","val","lastTime","prefixes","split","requestAnimationFrame","window","cancelAnimationFrame","prefix","callback","element","currTime","Date","getTime","timeToCall","Math","max","id","setTimeout","call","clearTimeout","isSqrt","num","base","Color","color","opacity","Valid","slice","rgb","Number","toArray","req","cancel","Analyze","canvas","AudioCtx","audioCtx","analyser","createAnalyser","gainNode","createGain","minDecibels","maxDecibels","smoothingTimeConstant","gain","setValueAtTime","volume","er","createMediaElementSource","video","ctx","getContext","connect","destination","__type__","__size__","__status__","name","close","switch","bufferLen","frequencyBinCount","dataArray","Uint8Array","WIDTH","width","HEIGHT","height","toRGB","bgColor","fftSize","draw","getByteTimeDomainData","clearRect","fillStyle","lineWidth","strokeStyle","beginPath","sliceWidth","x","y","moveTo","lineTo","stroke","getByteFrequencyData","fillRect","barWidth","barHeight","mode","Mode","AudioContext","webkitAudioContext","_undefined","value","possibleTypes","object","function","undefined","isValue","hasOwnProperty","isObject","constructor","prototype","error","apply","isPrototype","classRe","functionToString","Function","toString","isFunction","obj","assign","Object","foo","bar","trzy","keys","require$$0","require$$1","TypeError","dest","src","arguments","key","Array","create","process","opts1","result","options","str","contains","indexOf","String","searchString","module","dscr","c","w","desc","configurable","enumerable","writable","normalizeOpts","gs","get","set","isPlainFunction","fn","methods","descriptors","defineProperty","defineProperties","descriptor","listener","data","callable","__ee__","__eeOnceListener__","listeners","candidate","splice","l","args","d","exports","o","Xhr","url","xhr","XMLHttpRequest","target","responseType","open","onload","status","response","onerror","message","run","abort","readyState","send","timeScale","Music","opts","deepCopy","volumeShow","ignores","rawConfig","typeOf","vid","poster","nextIndex","prevIndex","halfPass","history","controls","addClass","root","config","currentSrc","v","autoplayMuted","autoplay","lang","duration","confirmOrder","pause","change","next","segPlay","checkOffline","then","start","display","lyricTxts","Dom","__lyric__","unbind","nextComput","prevComput","preloadNext","offlineVid","database","openDB","addData","myDB","ojstore","blob","Blob","res","closeDB","ceil","random","prevIndev","meta","every","m4a","load","play","Promise","resolve","offline","getDataByKey","URL","createObjectURL","ModeType","scale","backward","controlEl","backwardBtn","createImgBtn","install","cover","forward","forwardBtn","progressEl","nextBtn","prev","prevBtn"],"mappings":"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"}