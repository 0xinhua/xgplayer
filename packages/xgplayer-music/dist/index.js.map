{"version":3,"file":"index.js","sources":["../../../node_modules/style-inject/dist/style-inject.es.js","../src/lyric.js","../src/util.js","../src/analyze.js","../../../node_modules/type/value/is.js","../../../node_modules/type/object/is.js","../../../node_modules/type/prototype/is.js","../../../node_modules/type/function/is.js","../../../node_modules/type/plain-function/is.js","../../../node_modules/es5-ext/object/assign/is-implemented.js","../../../node_modules/es5-ext/object/keys/is-implemented.js","../../../node_modules/es5-ext/function/noop.js","../../../node_modules/es5-ext/object/is-value.js","../../../node_modules/es5-ext/object/keys/shim.js","../../../node_modules/es5-ext/object/keys/index.js","../../../node_modules/es5-ext/object/valid-value.js","../../../node_modules/es5-ext/object/assign/shim.js","../../../node_modules/es5-ext/object/assign/index.js","../../../node_modules/es5-ext/object/normalize-options.js","../../../node_modules/es5-ext/string/#/contains/is-implemented.js","../../../node_modules/es5-ext/string/#/contains/shim.js","../../../node_modules/es5-ext/string/#/contains/index.js","../../../node_modules/d/index.js","../../../node_modules/es5-ext/object/valid-callable.js","../../../node_modules/event-emitter/index.js","../src/xhr.js","../src/music.js","../src/controls/backward.js","../src/controls/cover.js","../src/controls/forward.js","../src/controls/meta.js","../src/controls/next.js","../src/controls/prev.js"],"sourcesContent":["function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","import Player from 'xgplayer'\n\nclass LyricTime {\n  constructor (timeTxt) {\n    this.regRule = /(\\d{2}(?=:)):(\\d{2}(?=\\.))\\.(\\d{2,3})/g\n    if (this.regRule.test(timeTxt)) {\n      this.time = RegExp.$1 * 60 + RegExp.$2 * 1 + ('0.' + RegExp.$3) * 1\n    } else {\n      this.time = -1\n    }\n  }\n}\n\nexport {LyricTime}\n\nclass Lyric {\n  constructor (txts, dom) {\n    this.rawTxts = txts\n    this.txts = txts.map((item) => { return item.replace(/^[\\r\\n]|[\\r\\n]$/g, '').match(/(\\[.*\\])[^[]+/g) })\n    this.isDynamics = txts.map((item, idx) => {\n      return [].concat(item.match(/\\[\\d{2}:\\d{2}\\.\\d{2,3}\\]/g)).length === this.txts[idx].length && this.txts[idx].length === this.txts[0].length && this.txts[idx].length > 1\n    })\n    this.isDynamic = this.isDynamics.some((item) => {\n      return item\n    })\n    this.__ainimateInterval__ = 0\n    this.__offset__ = 0\n    this.__offsetScale__ = 0.5\n    this.dom = dom\n    this.lists = []\n    this.isDynamics.map((item, idx) => {\n      if (item) {\n        this.lists.push(\n          this.txts[idx].map((txt, index) => {\n            const reg = /(\\[[\\d:\\S]+\\])([^[]+)/g.test(txt)\n            const time = RegExp.$1\n            const lyric = RegExp.$2\n            return {\n              time: reg ? new LyricTime(time).time : -1,\n              lyric,\n              idx: index\n            }\n          })\n        )\n      }\n    })\n    this.list = this.lists.reduce((pre, cur) => {\n      return pre.map((item, idx) => {\n        return {\n          time: item.time,\n          lyric: item.lyric === '\\n' ? `${item.lyric}${cur[idx].lyric}` : `${item.lyric}<br/>${cur[idx].lyric}`,\n          idx\n        }\n      })\n    })\n    this.line = 0\n  }\n  set interval (val) {\n    this.__ainimateInterval__ = val\n  }\n  get interval () {\n    return this.__ainimateInterval__\n  }\n  set offset (val) {\n    this.__offset__ = val\n  }\n  get offset () {\n    return this.__offset__\n  }\n  set offsetScale (val) {\n    this.__offsetScale__ = val\n  }\n  get offsetScale () {\n    return this.__offsetScale__\n  }\n  adjust () {\n    let list = this.list\n    for (let i = 0, j, k, len = list.length; i < len; i++) {\n      for (j = i + 1; j < len; j++) {\n        if (list[j].time > list[i].time) {\n          break\n        }\n      }\n      if (j < len) {\n        let sep = (list[j].time - list[i].time) / (j - i)\n        for (k = i + 1; k < j; k++) {\n          list[k].time = list[k - 1].time + sep\n        }\n      }\n    }\n  }\n  find (curTime) {\n    const list = this.list\n    const interval = this.__ainimateInterval__\n    const offset = this.__offset__\n    curTime = curTime + offset > 0 ? curTime + offset : 0\n    return list.filter(({time}, idx) => {\n      let idxy = idx + 1\n      return curTime >= time && ((list[idxy] && curTime * 1 + interval * 1 <= list[idxy].time) || (idxy >= list.length))\n    })\n  }\n  bind (player) {\n    let self = this\n    this.__player__ = player\n    if (self.isDynamic) {\n      self.__handle__ = (() => {\n        const f = this.find(player.currentTime)[0]\n        if (f && f.idx !== this.line) {\n          this.line = f.idx\n          player.emit('lyricUpdate', f)\n        }\n      }).bind(self, player)\n      player.on('timeupdate', self.__handle__)\n\n      self.__startHandle__ = (() => {\n        player.emit('lyricUpdate', self.list[0])\n      }).bind(self, player)\n      player.once('playing', self.__startHandle__)\n      //\n      // self.__endHandle__ = (() => {\n      //   player.emit('lyricUpdate', self.list[self.list.length - 1])\n      // }).bind(self, player)\n      // player.on('ended', self.__endHandle__)\n      return true\n    } else {\n      return false\n    }\n  }\n  unbind (player) {\n    delete this.__player__\n    if (this.__handle__) {\n      player.off('lyricUpdate', this.__handle__)\n      delete this.__handle__\n    }\n  }\n  show () {\n    let dom = this.dom\n    let lyrbicTxts = []\n    let self = this\n    const ev = ['click', 'touchstart']\n    if (dom && dom.nodeType === 1) {\n      const lrcWrap = Player.util.createDom('div', `<div></div>`, {}, 'xgplayer-lrcWrap')\n      dom.appendChild(lrcWrap)\n      this.list.forEach(item => {\n        lyrbicTxts.push(`<xg-lyric-item class=\"xgplayer-lyric-item\" data-idx=\"${item.idx}\">${item.lyric.replace(/[\\r\\n]/g, '')}</xg-lyric-item>`)\n      })\n      lrcWrap.innerHTML = lyrbicTxts.join('')\n      const lrcForward = Player.util.createDom('xg-lrcForward', `<div></div>`, {}, 'xgplayer-lrcForward')\n      dom.appendChild(lrcForward)\n      ev.forEach(item => {\n        lrcForward.addEventListener(item, function (e) {\n          e.preventDefault()\n          e.stopPropagation()\n          self.offset -= self.offsetScale\n          console.log(`lyric go forward ${self.offsetScale}s`)\n        }, false)\n      })\n\n      const lrcBack = Player.util.createDom('xg-lrcBack', `<div></div>`, {}, 'xgplayer-lrcBack')\n      dom.appendChild(lrcBack)\n      ev.forEach(item => {\n        lrcBack.addEventListener(item, function (e) {\n          e.preventDefault()\n          e.stopPropagation()\n          self.offset += self.offsetScale\n          console.log(`lyric go back ${self.offsetScale}s`)\n        }, false)\n      })\n      this.__updateHandle__ = (item) => {\n        let domWrap = this.dom.querySelector('.xgplayer-lrcWrap')\n        let activeDom = domWrap.querySelector('.xgplayer-lyric-item-active')\n        let offsetHeight = domWrap.offsetHeight\n        let activeTop\n        if (activeDom) {\n          activeDom.className = 'xgplayer-lyric-item'\n        }\n        activeDom = domWrap.querySelector(`.xgplayer-lyric-item[data-idx=\"${item.idx}\"]`)\n        if (activeDom) {\n          activeDom.className = 'xgplayer-lyric-item xgplayer-lyric-item-active'\n          activeTop = (activeDom.getBoundingClientRect().top - domWrap.getBoundingClientRect().top + domWrap.scrollTop - offsetHeight / 2)\n          if (activeTop) {\n            domWrap.scrollTop = activeTop\n          }\n        }\n      }\n      this.__player__.on('lyricUpdate', this.__updateHandle__)\n    } else {\n      this.__player__.emit('error', 'lyric container can not be empty')\n    }\n  }\n  hide () {\n    this.__updateHandle__.off('lyricUpdate', this.__updateHandle__)\n  }\n}\n\nexport default Lyric\n","// @filename https://gist.github.com/chaping/88813f56e75b0fd43f8c\nlet lastTime = 0\nconst prefixes = 'webkit moz ms o'.split(' ') // 各浏览器前缀\n\nlet requestAnimationFrame = window.requestAnimationFrame\nlet cancelAnimationFrame = window.cancelAnimationFrame\n\nvar prefix\n// 通过遍历各浏览器前缀，来得到requestAnimationFrame和cancelAnimationFrame在当前浏览器的实现形式\nfor (var i = 0; i < prefixes.length; i++) {\n  if (requestAnimationFrame && cancelAnimationFrame) {\n    break\n  }\n  prefix = prefixes[i]\n  requestAnimationFrame = requestAnimationFrame || window[prefix + 'RequestAnimationFrame']\n  cancelAnimationFrame = cancelAnimationFrame || window[prefix + 'CancelAnimationFrame'] || window[prefix + 'CancelRequestAnimationFrame']\n}\n\n// 如果当前浏览器不支持requestAnimationFrame和cancelAnimationFrame，则会退到setTimeout\nif (!requestAnimationFrame || !cancelAnimationFrame) {\n  requestAnimationFrame = function (callback, element) {\n    var currTime = new Date().getTime()\n    // 为了使setTimteout的尽可能的接近每秒60帧的效果\n    var timeToCall = Math.max(0, 16 - (currTime - lastTime))\n    var id = window.setTimeout(function () {\n      callback.call(currTime + timeToCall)\n    }, timeToCall)\n    lastTime = currTime + timeToCall\n    return id\n  }\n\n  cancelAnimationFrame = function (id) {\n    window.clearTimeout(id)\n  }\n}\n\nlet isSqrt = function (num, base) {\n  if (num !== 1) {\n    while (num !== 1) {\n      if (num % base === 0) {\n        num = num / base\n      } else {\n        return false\n      }\n    }\n    return true\n  } else {\n    return true\n  }\n}\n\nclass Color {\n  constructor (color, opacity = 1) {\n    this.color = Color.Valid.test(color) ? color : '#ffffff'\n    this.opacity = opacity\n  }\n  toArray () {\n    let color = this.color.slice(1)\n    let rgb = []\n    if (color.length === 6) {\n      color = color.match(/\\d{2}/g)\n      rgb = color.map((item) => {\n        return Number(`0x${item}`)\n      })\n    }\n    return rgb\n  }\n  toRGB () {\n    let rgb = this.toArray()\n    return rgb.length === 3 ? `rgb(${rgb[0]},${rgb[1]},${rgb[2]})` : ''\n  }\n  toGRBA () {\n    let rgb = this.toArray()\n    return rgb.length === 3 ? `rgba(${rgb[0]},${rgb[1]},${rgb[2]},${this.opacity})` : ''\n  }\n  static get Valid () {\n    return /^#[0-9A-F]{6}$|^#[0-9A-F]{3}$/i\n  }\n}\n\nexport default {\n  requestAnimationFrame,\n  cancelAnimationFrame,\n  isSqrt,\n  Color\n}\n","import util from './util'\nconst {\n  requestAnimationFrame: req, cancelAnimationFrame: cancel, isSqrt, Color\n} = util\n\nclass Analyze {\n  constructor (player, canvas) {\n    this.canvas = canvas\n    this.player = player\n    if (!Analyze.AudioCtx) {\n      return\n    }\n    const audioCtx = new Analyze.AudioCtx()\n    let analyser = audioCtx.createAnalyser()\n    let gainNode = audioCtx.createGain()\n    analyser.minDecibels = -90\n    analyser.maxDecibels = -10\n    analyser.smoothingTimeConstant = 0.85\n    gainNode.gain.setValueAtTime(player.volume, player.currentTime)\n    this.er = audioCtx.createMediaElementSource(player.video)\n    this.analyser = analyser\n    this.ctx = canvas.getContext('2d')\n    this.er.connect(analyser)\n    analyser.connect(gainNode)\n    gainNode.connect(audioCtx.destination)\n\n    this.style = {\n      bgColor: '#c8c8c8',\n      color: '#643232'\n    }\n    this.__type__ = 'bars'\n    this.__size__ = 256\n    this.__status__ = {\n      switch: 'on'\n    };\n    ['play', 'playing', 'seeked'].forEach(name => {\n      player.on(name, () => {\n        this[`__${this.__type__}__`]()\n      })\n    });\n    ['seeking', 'waiting', 'pause', 'ended'].forEach(name => {\n      cancel(this.__status__[this.__type__])\n    })\n    player.on('volumechange', () => {\n      gainNode.gain.setValueAtTime(player.volume, player.currentTime)\n    })\n    player.on('destroy', () => {\n      audioCtx.close()\n    })\n  }\n\n  __wave__ () {\n    cancel(this.__status__['wave'])\n    cancel(this.__status__['bars'])\n    if (this.__status__.switch === 'off') {\n      return\n    }\n    let analyser = this.analyser\n    let canvas = this.canvas\n    let ctx = this.ctx\n    let bufferLen = analyser.frequencyBinCount\n    let dataArray = new Uint8Array(bufferLen)\n    const WIDTH = canvas.width\n    const HEIGHT = canvas.height\n    const color = new Color(this.style.color).toRGB()\n    const bgColor = new Color(this.style.color).toRGB()\n    analyser.fftSize = this.__size__\n    const draw = () => {\n      this.__status__['wave'] = req(draw)\n      analyser.getByteTimeDomainData(dataArray)\n      ctx.clearRect(0, 0, WIDTH, HEIGHT)\n      ctx.fillStyle = bgColor\n      ctx.lineWidth = 2\n      ctx.strokeStyle = color\n      ctx.beginPath()\n      const sliceWidth = WIDTH * 1.0 / bufferLen\n      let x = 0\n      for (let i = 0; i < bufferLen; i++) {\n        let v = dataArray[i] / 128.0\n        let y = v * HEIGHT / 2\n        if (i === 0) {\n          ctx.moveTo(x, y)\n        } else {\n          ctx.lineTo(x, y)\n        }\n        x += sliceWidth\n      }\n      ctx.lineTo(canvas.width, canvas.height / 2)\n      ctx.stroke()\n    }\n    draw()\n  }\n  __bars__ () {\n    cancel(this.__status__['wave'])\n    cancel(this.__status__['bars'])\n    if (this.__status__.switch === 'off') {\n      return\n    }\n    let analyser = this.analyser\n    let canvas = this.canvas\n    let ctx = this.ctx\n    let bufferLen = analyser.frequencyBinCount\n    let dataArray = new Uint8Array(bufferLen)\n    const WIDTH = canvas.width\n    const HEIGHT = canvas.height\n    const color = new Color(this.style.color).toArray()\n    const bgColor = new Color(this.style.color).toRGB()\n    analyser.fftSize = this.__size__\n\n    const draw = () => {\n      this.__status__['bars'] = req(draw)\n      analyser.getByteFrequencyData(dataArray)\n      ctx.clearRect(0, 0, WIDTH, HEIGHT)\n      ctx.fillStyle = bgColor\n      ctx.fillRect(0, 0, WIDTH, HEIGHT)\n      const barWidth = (WIDTH / bufferLen) * 2.5\n      let barHeight\n      let x = 0\n      for (var i = 0; i < bufferLen; i++) {\n        barHeight = dataArray[i]\n        ctx.fillStyle = `rgb(${barHeight + color[0]},${color[1]},${color[2]})`\n        ctx.fillRect(x, HEIGHT - barHeight / 2, barWidth, barHeight / 2)\n        x += barWidth + 1\n      }\n    }\n    draw()\n  }\n  on () {\n    this.__status__.switch = 'on'\n    this[`__${this.__type__}__`]()\n  }\n  off () {\n    this.__status__.switch = 'off'\n    cancel(this.__status__['wave'])\n    cancel(this.__status__['bars'])\n  }\n  set mode (mode) {\n    if (Analyze.Mode.filter(item => item === mode).length) {\n      this.__type__ = mode\n      if (this.__status__.switch === 'on') {\n        this[`__${mode}__`]()\n      }\n    }\n  }\n  get mode () {\n    return this.__type__\n  }\n  set size (num) {\n    if (num < 65536 && isSqrt(num, 2)) {\n      this.__size__ = num\n      this.analyser.fftSize = num\n      this[`__${this.__type__}__`]()\n    }\n  }\n  get size () {\n    return this.__size__\n  }\n  get status () {\n    return this.__status__.switch\n  }\n  static get AudioCtx () {\n    return window.AudioContext || window.webkitAudioContext\n  }\n  static get Mode () {\n    return ['wave', 'bars']\n  }\n}\n\nexport default Analyze\n","\"use strict\";\n\n// ES3 safe\nvar _undefined = void 0;\n\nmodule.exports = function (value) { return value !== _undefined && value !== null; };\n","\"use strict\";\n\nvar isValue = require(\"../value/is\");\n\n// prettier-ignore\nvar possibleTypes = { \"object\": true, \"function\": true, \"undefined\": true /* document.all */ };\n\nmodule.exports = function (value) {\n\tif (!isValue(value)) return false;\n\treturn hasOwnProperty.call(possibleTypes, typeof value);\n};\n","\"use strict\";\n\nvar isObject = require(\"../object/is\");\n\nmodule.exports = function (value) {\n\tif (!isObject(value)) return false;\n\ttry {\n\t\tif (!value.constructor) return false;\n\t\treturn value.constructor.prototype === value;\n\t} catch (error) {\n\t\treturn false;\n\t}\n};\n","\"use strict\";\n\nvar isPrototype = require(\"../prototype/is\");\n\nmodule.exports = function (value) {\n\tif (typeof value !== \"function\") return false;\n\n\tif (!hasOwnProperty.call(value, \"length\")) return false;\n\n\ttry {\n\t\tif (typeof value.length !== \"number\") return false;\n\t\tif (typeof value.call !== \"function\") return false;\n\t\tif (typeof value.apply !== \"function\") return false;\n\t} catch (error) {\n\t\treturn false;\n\t}\n\n\treturn !isPrototype(value);\n};\n","\"use strict\";\n\nvar isFunction = require(\"../function/is\");\n\nvar classRe = /^\\s*class[\\s{/}]/, functionToString = Function.prototype.toString;\n\nmodule.exports = function (value) {\n\tif (!isFunction(value)) return false;\n\tif (classRe.test(functionToString.call(value))) return false;\n\treturn true;\n};\n","\"use strict\";\n\nmodule.exports = function () {\n\tvar assign = Object.assign, obj;\n\tif (typeof assign !== \"function\") return false;\n\tobj = { foo: \"raz\" };\n\tassign(obj, { bar: \"dwa\" }, { trzy: \"trzy\" });\n\treturn obj.foo + obj.bar + obj.trzy === \"razdwatrzy\";\n};\n","\"use strict\";\n\nmodule.exports = function () {\n\ttry {\n\t\tObject.keys(\"primitive\");\n\t\treturn true;\n\t} catch (e) {\n\t\treturn false;\n\t}\n};\n","\"use strict\";\n\n// eslint-disable-next-line no-empty-function\nmodule.exports = function () {};\n","\"use strict\";\n\nvar _undefined = require(\"../function/noop\")(); // Support ES3 engines\n\nmodule.exports = function (val) { return val !== _undefined && val !== null; };\n","\"use strict\";\n\nvar isValue = require(\"../is-value\");\n\nvar keys = Object.keys;\n\nmodule.exports = function (object) { return keys(isValue(object) ? Object(object) : object); };\n","\"use strict\";\n\nmodule.exports = require(\"./is-implemented\")() ? Object.keys : require(\"./shim\");\n","\"use strict\";\n\nvar isValue = require(\"./is-value\");\n\nmodule.exports = function (value) {\n\tif (!isValue(value)) throw new TypeError(\"Cannot use null or undefined\");\n\treturn value;\n};\n","\"use strict\";\n\nvar keys  = require(\"../keys\")\n  , value = require(\"../valid-value\")\n  , max   = Math.max;\n\nmodule.exports = function (dest, src/*, …srcn*/) {\n\tvar error, i, length = max(arguments.length, 2), assign;\n\tdest = Object(value(dest));\n\tassign = function (key) {\n\t\ttry {\n\t\t\tdest[key] = src[key];\n\t\t} catch (e) {\n\t\t\tif (!error) error = e;\n\t\t}\n\t};\n\tfor (i = 1; i < length; ++i) {\n\t\tsrc = arguments[i];\n\t\tkeys(src).forEach(assign);\n\t}\n\tif (error !== undefined) throw error;\n\treturn dest;\n};\n","\"use strict\";\n\nmodule.exports = require(\"./is-implemented\")() ? Object.assign : require(\"./shim\");\n","\"use strict\";\n\nvar isValue = require(\"./is-value\");\n\nvar forEach = Array.prototype.forEach, create = Object.create;\n\nvar process = function (src, obj) {\n\tvar key;\n\tfor (key in src) obj[key] = src[key];\n};\n\n// eslint-disable-next-line no-unused-vars\nmodule.exports = function (opts1/*, …options*/) {\n\tvar result = create(null);\n\tforEach.call(arguments, function (options) {\n\t\tif (!isValue(options)) return;\n\t\tprocess(Object(options), result);\n\t});\n\treturn result;\n};\n","\"use strict\";\n\nvar str = \"razdwatrzy\";\n\nmodule.exports = function () {\n\tif (typeof str.contains !== \"function\") return false;\n\treturn str.contains(\"dwa\") === true && str.contains(\"foo\") === false;\n};\n","\"use strict\";\n\nvar indexOf = String.prototype.indexOf;\n\nmodule.exports = function (searchString/*, position*/) {\n\treturn indexOf.call(this, searchString, arguments[1]) > -1;\n};\n","\"use strict\";\n\nmodule.exports = require(\"./is-implemented\")() ? String.prototype.contains : require(\"./shim\");\n","\"use strict\";\n\nvar isValue         = require(\"type/value/is\")\n  , isPlainFunction = require(\"type/plain-function/is\")\n  , assign          = require(\"es5-ext/object/assign\")\n  , normalizeOpts   = require(\"es5-ext/object/normalize-options\")\n  , contains        = require(\"es5-ext/string/#/contains\");\n\nvar d = (module.exports = function (dscr, value/*, options*/) {\n\tvar c, e, w, options, desc;\n\tif (arguments.length < 2 || typeof dscr !== \"string\") {\n\t\toptions = value;\n\t\tvalue = dscr;\n\t\tdscr = null;\n\t} else {\n\t\toptions = arguments[2];\n\t}\n\tif (isValue(dscr)) {\n\t\tc = contains.call(dscr, \"c\");\n\t\te = contains.call(dscr, \"e\");\n\t\tw = contains.call(dscr, \"w\");\n\t} else {\n\t\tc = w = true;\n\t\te = false;\n\t}\n\n\tdesc = { value: value, configurable: c, enumerable: e, writable: w };\n\treturn !options ? desc : assign(normalizeOpts(options), desc);\n});\n\nd.gs = function (dscr, get, set/*, options*/) {\n\tvar c, e, options, desc;\n\tif (typeof dscr !== \"string\") {\n\t\toptions = set;\n\t\tset = get;\n\t\tget = dscr;\n\t\tdscr = null;\n\t} else {\n\t\toptions = arguments[3];\n\t}\n\tif (!isValue(get)) {\n\t\tget = undefined;\n\t} else if (!isPlainFunction(get)) {\n\t\toptions = get;\n\t\tget = set = undefined;\n\t} else if (!isValue(set)) {\n\t\tset = undefined;\n\t} else if (!isPlainFunction(set)) {\n\t\toptions = set;\n\t\tset = undefined;\n\t}\n\tif (isValue(dscr)) {\n\t\tc = contains.call(dscr, \"c\");\n\t\te = contains.call(dscr, \"e\");\n\t} else {\n\t\tc = true;\n\t\te = false;\n\t}\n\n\tdesc = { get: get, set: set, configurable: c, enumerable: e };\n\treturn !options ? desc : assign(normalizeOpts(options), desc);\n};\n","\"use strict\";\n\nmodule.exports = function (fn) {\n\tif (typeof fn !== \"function\") throw new TypeError(fn + \" is not a function\");\n\treturn fn;\n};\n","'use strict';\n\nvar d        = require('d')\n  , callable = require('es5-ext/object/valid-callable')\n\n  , apply = Function.prototype.apply, call = Function.prototype.call\n  , create = Object.create, defineProperty = Object.defineProperty\n  , defineProperties = Object.defineProperties\n  , hasOwnProperty = Object.prototype.hasOwnProperty\n  , descriptor = { configurable: true, enumerable: false, writable: true }\n\n  , on, once, off, emit, methods, descriptors, base;\n\non = function (type, listener) {\n\tvar data;\n\n\tcallable(listener);\n\n\tif (!hasOwnProperty.call(this, '__ee__')) {\n\t\tdata = descriptor.value = create(null);\n\t\tdefineProperty(this, '__ee__', descriptor);\n\t\tdescriptor.value = null;\n\t} else {\n\t\tdata = this.__ee__;\n\t}\n\tif (!data[type]) data[type] = listener;\n\telse if (typeof data[type] === 'object') data[type].push(listener);\n\telse data[type] = [data[type], listener];\n\n\treturn this;\n};\n\nonce = function (type, listener) {\n\tvar once, self;\n\n\tcallable(listener);\n\tself = this;\n\ton.call(this, type, once = function () {\n\t\toff.call(self, type, once);\n\t\tapply.call(listener, this, arguments);\n\t});\n\n\tonce.__eeOnceListener__ = listener;\n\treturn this;\n};\n\noff = function (type, listener) {\n\tvar data, listeners, candidate, i;\n\n\tcallable(listener);\n\n\tif (!hasOwnProperty.call(this, '__ee__')) return this;\n\tdata = this.__ee__;\n\tif (!data[type]) return this;\n\tlisteners = data[type];\n\n\tif (typeof listeners === 'object') {\n\t\tfor (i = 0; (candidate = listeners[i]); ++i) {\n\t\t\tif ((candidate === listener) ||\n\t\t\t\t\t(candidate.__eeOnceListener__ === listener)) {\n\t\t\t\tif (listeners.length === 2) data[type] = listeners[i ? 0 : 1];\n\t\t\t\telse listeners.splice(i, 1);\n\t\t\t}\n\t\t}\n\t} else {\n\t\tif ((listeners === listener) ||\n\t\t\t\t(listeners.__eeOnceListener__ === listener)) {\n\t\t\tdelete data[type];\n\t\t}\n\t}\n\n\treturn this;\n};\n\nemit = function (type) {\n\tvar i, l, listener, listeners, args;\n\n\tif (!hasOwnProperty.call(this, '__ee__')) return;\n\tlisteners = this.__ee__[type];\n\tif (!listeners) return;\n\n\tif (typeof listeners === 'object') {\n\t\tl = arguments.length;\n\t\targs = new Array(l - 1);\n\t\tfor (i = 1; i < l; ++i) args[i - 1] = arguments[i];\n\n\t\tlisteners = listeners.slice();\n\t\tfor (i = 0; (listener = listeners[i]); ++i) {\n\t\t\tapply.call(listener, this, args);\n\t\t}\n\t} else {\n\t\tswitch (arguments.length) {\n\t\tcase 1:\n\t\t\tcall.call(listeners, this);\n\t\t\tbreak;\n\t\tcase 2:\n\t\t\tcall.call(listeners, this, arguments[1]);\n\t\t\tbreak;\n\t\tcase 3:\n\t\t\tcall.call(listeners, this, arguments[1], arguments[2]);\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tl = arguments.length;\n\t\t\targs = new Array(l - 1);\n\t\t\tfor (i = 1; i < l; ++i) {\n\t\t\t\targs[i - 1] = arguments[i];\n\t\t\t}\n\t\t\tapply.call(listeners, this, args);\n\t\t}\n\t}\n};\n\nmethods = {\n\ton: on,\n\tonce: once,\n\toff: off,\n\temit: emit\n};\n\ndescriptors = {\n\ton: d(on),\n\tonce: d(once),\n\toff: d(off),\n\temit: d(emit)\n};\n\nbase = defineProperties({}, descriptors);\n\nmodule.exports = exports = function (o) {\n\treturn (o == null) ? create(base) : defineProperties(Object(o), descriptors);\n};\nexports.methods = methods;\n","import EventEmitter from 'event-emitter'\n\nclass Xhr {\n  constructor (url, callback) {\n    EventEmitter(this)\n    this.url = url\n    let xhr = new window.XMLHttpRequest()\n    xhr.target = this\n    xhr.responseType = 'arraybuffer'\n    xhr.open('get', url)\n    xhr.onload = function () {\n      if (xhr.status === 200 || xhr.status === 206) {\n        if (callback && callback instanceof Function) {\n          callback(xhr.response)\n        }\n      }\n    }\n    xhr.onerror = function (e) {\n      xhr.target.emit('error' + e.message)\n    }\n    this.xhr = xhr\n    this.run()\n  }\n  cancel () {\n    this.xhr.abort()\n  }\n\n  run () {\n    if (this.xhr.readyState === 1) {\n      this.xhr.send()\n    }\n  }\n}\n\nexport default Xhr\n","import Player from 'xgplayer'\nimport Lyric from './lyric'\nimport Analyze from './analyze'\nimport Xhr from './xhr'\nlet mode\nlet timeScale = 15\n\nconst util = Player.util\n\nclass Music extends Player {\n  constructor (options) {\n    let opts = util.deepCopy({\n      controls: true,\n      mediaType: 'audio',\n      ignores: ['fullscreen', 'start', 'definition', 'makeBullet', 'textTrack', 'loading', 'pc', 'mobile', 'playbackRate', 'replay', 'error', 'poster']\n    }, options)\n    if (!opts.volumeShow) {\n      opts.ignores.push('volume')\n    }\n    super(opts)\n    let player = this\n    this.rawConfig = options\n    this.list = util.typeOf(opts.url) === 'Array' ? opts.url : [{\n      src: opts.url,\n      name: opts.name,\n      vid: opts.vid,\n      poster: opts.poster\n    }]\n    this.name = this.list[0].name\n    this.vid = this.list[0].vid\n    this.poster = this.list[0].poster\n    this.nextIndex = 1\n    this.prevIndex = this.list.length - 1\n    this.halfPass = false\n    this.history = []\n    this.index = 0\n    if (!opts.controls) {\n      this.root.style.display = 'none'\n      return\n    }\n\n    util.addClass(this.root, 'xgplayer-music')\n    if (!opts.width) {\n      this.config.width = '100%'\n      this.root.style.width = '100%'\n    }\n    if (!opts.height) {\n      this.config.height = '50px'\n      this.root.style.height = '50px'\n    }\n    Object.defineProperty(this, 'src', {\n      get () {\n        return this.video.currentSrc\n      },\n      set (v) {\n        let cur = util.typeOf(v) === 'String' ? {src: v, name: ''} : v\n        this.history.push(cur)\n        this.video.src = cur.src\n      },\n      configurable: true\n    })\n    if (this.config.autoplayMuted) {\n      this.config.volume = this.config.autoplay ? 0 : this.config.volume\n    }\n    player.once('ready', () => {\n      util.addClass(player.root, 'xgplayer-skin-default')\n      if(player.config.lang && player.config.lang === 'en') {\n        util.addClass(player.root, 'lang-is-en')\n      } else if(player.config.lang === 'jp') {\n        util.addClass(player.root, 'lang-is-jp')\n      }\n    })\n    this.once('canplay', function () {\n      if (this.config.autoplay && this.config.autoplayMuted) {\n        this.volume = 0\n      } else {\n        this.volume = this.config.volume\n      }\n    })\n    this.on('timeupdate', () => {\n      if (!this.halfPass && this.currentTime > this.duration / 2) {\n        this.confirmOrder()\n      }\n    })\n    this.on('ended', () => {\n      if (this.mode === 'order' && this.index + 1 >= this.list.length) {\n        this.pause()\n        this.currentTime = 0\n        return\n      }\n      switch (this.mode) {\n        case 'sloop':\n          this.change()\n          break\n        case 'order':\n        case 'loop':\n        default:\n          this.next()\n          break\n      }\n    })\n    if (!this.config.segPlay) {\n      this.checkOffline(player.list[0].src, player.list[0].vid || player.list[0].name).then(url => {\n        player.config.url = url\n        player.start(url)\n      })\n    }\n  }\n  lyric (lyricTxts, Dom) {\n    if (this.__lyric__) {\n      this.__lyric__.unbind(this)\n    }\n    if (Player.util.typeOf(lyricTxts) !== 'Array') {\n      lyricTxts = [].concat(lyricTxts)\n    }\n    this.__lyric__ = new Lyric(lyricTxts, Dom)\n    this.__lyric__.bind(this)\n    return this.__lyric__\n  }\n  confirmOrder () {\n    let player = this\n    this.halfPass = true\n    this.nextComput()\n    this.prevComput()\n    if (this.config.preloadNext) {\n      this.checkOffline(this.list[this.nextIndex].src, this.list[this.nextIndex].vid || this.list[this.nextIndex].name).then(url => {\n        if (url.indexOf('blob:') < 0) {\n          let offlineVid = player.list[player.nextIndex].vid || player.list[player.nextIndex].name\n          let xhr = new Xhr(player.list[player.nextIndex].src, res => {\n            player.database.openDB(() => {\n              player.database.addData(player.database.myDB.ojstore.name, [{vid: offlineVid, blob: new Blob([res], {type: 'audio/mp4; codecs=\"mp4a.40.5\"'})}])\n              setTimeout(() => {\n                player.database.closeDB()\n              }, 5000)\n            })\n          })\n        }\n      })\n    }\n  }\n\n  get mode () {\n    return mode || Music.ModeType[2]\n  }\n  set mode (idx) {\n    switch (idx) {\n      case 0:\n      case 1:\n      case 2:\n      case 3:\n        mode = Music.ModeType[idx]\n    }\n    this.confirmOrder()\n  }\n\n  nextComput () {\n    switch (this.mode) {\n      case 'sloop':\n      case 'order':\n      case 'loop':\n        if (this.index + 1 < this.list.length) {\n          this.nextIndex = this.index + 1\n        } else {\n          this.nextIndex = 0\n        }\n        break\n      default:\n        this.nextIndex = Math.ceil(Math.random() * this.list.length)\n        break\n    }\n  }\n  prevComput () {\n    switch (this.mode) {\n      case 'sloop':\n      case 'order':\n      case 'loop':\n        if (this.index - 1 >= 0) {\n          this.prevIndev = this.index - 1\n        } else {\n          this.prevIndev = this.list.length - 1\n        }\n        break\n      default:\n        this.prevIndev = Math.ceil(Math.random() * this.list.length)\n        break\n    }\n  }\n  get timeScale () {\n    return timeScale || 15\n  }\n  set timeScale (scale) {\n    timeScale = scale\n  }\n\n  add (meta) {\n    this.list.push({\n      src: meta.src,\n      name: meta.name,\n      vid: meta.vid,\n      poster: meta.poster\n    })\n  }\n  remove (url) {\n    let idx = -1\n    this.list.every((item, index) => {\n      if (item.src === url || item.name === url || item.vid === url) {\n        idx = index\n        return false\n      } else {\n        return true\n      }\n    })\n    if (idx > -1) {\n      this.list.splice(idx, 1)\n    }\n  }\n  change () {\n    let self = this\n    let offlineVid = self.list[self.index].vid || self.list[self.index].name\n    this.halfPass = false\n    this.checkOffline(self.list[self.index].src, offlineVid).then(url => {\n      if (Player.m4a) {\n        self.video.load()\n        self.name = self.list[self.index].name\n        self.vid = self.list[self.index].vid\n        self.poster = self.list[self.index].poster\n        self.emit('change', {src: url, name: self.name, vid: self.vid, poster: self.poster})\n      } else {\n        self.video.pause()\n        self.currentTime = 0\n        self.src = url\n        self.name = self.list[self.index].name\n        self.vid = self.list[self.index].vid\n        self.poster = self.list[self.index].poster\n        setTimeout(() => {\n          self.video.play().then(() => {\n            self.emit('change', {src: url, name: self.name, vid: self.vid, poster: self.poster})\n          })\n        }, 60)\n      }\n    })\n  }\n  checkOffline (url, offlineVid) {\n    let self = this\n    return new Promise((resolve) => {\n      if (!self.config.offline) {\n        resolve(url)\n      }\n      self.database.openDB(() => {\n        self.database.getDataByKey(self.database.myDB.ojstore.name, offlineVid, result => {\n          setTimeout(() => {\n            self.database.closeDB()\n          }, 5000)\n          if (result) {\n            resolve(URL.createObjectURL(result.blob))\n          } else {\n            resolve(url)\n          }\n        })\n      })\n    })\n  }\n  next () {\n    if (!this.halfPass) {\n      this.halfPass = true\n      this.nextComput()\n    }\n    this.index = this.nextIndex\n    this.change()\n  }\n  prev () {\n    if (!this.halfPass) {\n      this.halfPass = true\n      this.prevComput()\n    }\n    this.index = this.prevIndex\n    this.change()\n  }\n  forward () {\n    // console.log(`music go forward ${timeScale}s`)\n    this.currentTime = this.currentTime + timeScale < this.duration ? this.currentTime + timeScale : this.duration - 0.1\n  }\n  backward () {\n    // console.log(`music go backward ${timeScale}s`)\n    this.currentTime = this.currentTime - timeScale > 0 ? this.currentTime - timeScale : 0\n  }\n  analyze (canvas) {\n    return new Analyze(this, canvas)\n  }\n  static get AudioCtx () {\n    return window.AudioContext || window.webkitAudioContext\n  }\n  static get ModeType () {\n    return ['order', 'random', 'loop', 'sloop']\n  }\n}\n\nexport default Music\nexport {\n  Lyric,\n  Analyze\n}\n","import Player from '../music'\n\nconst backward = (player) => {\n  const util = Player.util\n  const controlEl = player.controls\n  const ev = ['click', 'touchstart']\n  let backwardBtn = player.config.backwardBtn ? player.config.backwardBtn : {}\n  let backward\n  if (backwardBtn.type === 'img') {\n    backward = Player.util.createImgBtn('backward', backwardBtn.url, backwardBtn.width, backwardBtn.height)\n  } else {\n    backward = util.createDom('xg-backward', `<xg-icon class=\"xgplayer-icon\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1024\" height=\"1024\" viewBox=\"0 0 1024 1024\">\n              <path transform = \"scale(1.5 1.5) translate(8 4.5)\"\n              d=\"m 14,2.99996 0,10 -7,-5 7,-5 z m -7,5 0,5 -7,-5 7,-5 0,5 z m -7,0 0,0 z\"></path>\n          </svg></xg-icon>`, {}, 'xgplayer-backward')\n  }\n  controlEl.appendChild(backward)\n  ev.forEach(item => {\n    backward.addEventListener(item, function (e) {\n      e.preventDefault()\n      e.stopPropagation()\n      player.backward()\n    }, false)\n  })\n}\n\nPlayer.install('backward', backward)\n","import Player from '../music'\n\nconst cover = (player) => {\n  const util = Player.util\n  const controlEl = player.controls\n  const poster = util.createDom('xg-cover', `<img src=\"${player.config.poster || player.config.url[0].poster}\">`, {}, 'xgplayer-cover')\n  controlEl.appendChild(poster)\n  player.on('change', item => {\n    poster.innerHTML = `<img src=\"${item.poster}\">`\n  })\n}\n\nPlayer.install('cover', cover)\n","import Player from '../music'\n\nconst forward = (player) => {\n  const util = Player.util\n  const controlEl = player.controls\n  const ev = ['click', 'touchstart']\n  let forwardBtn = player.config.forwardBtn ? player.config.forwardBtn : {}\n  let forward\n  if (forwardBtn.type === 'img') {\n    forward = Player.util.createImgBtn('forward', forwardBtn.url, forwardBtn.width, forwardBtn.height)\n  } else {\n    forward = util.createDom('xg-forward', `<xg-icon class=\"xgplayer-icon\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1024\" height=\"1024\" viewBox=\"0 0 1024 1024\">\n              <path transform = \"scale(1.5 1.5) translate(-2 4.5)\"\n              d=\"m 2,2.99996 0,10 7,-5 -7,-5 z m 7,5 0,5 7,-5 -7,-5 0,5 z m 7,0 0,0 z\"></path>\n          </svg></xg-icon>`, {}, 'xgplayer-forward')\n  }\n  controlEl.appendChild(forward)\n  ev.forEach(item => {\n    forward.addEventListener(item, function (e) {\n      e.preventDefault()\n      e.stopPropagation()\n      player.forward()\n    }, false)\n  })\n}\n\nPlayer.install('forward', forward)\n","import Player from '../music'\n\nconst meta = (player) => {\n  const util = Player.util\n  const progressEl = player.controls.querySelector('.xgplayer-progress')\n  const name = util.createDom('xg-name', `${player.config.name || player.config.url[0].name}`, {}, 'xgplayer-name')\n  progressEl.appendChild(name)\n  player.on('change', item => {\n    name.innerHTML = `${item.name}`\n  })\n}\n\nPlayer.install('meta', meta)\n","import Player from '../music'\n\nconst next = (player) => {\n  const util = Player.util\n  const controlEl = player.controls\n  const ev = ['click', 'touchstart']\n  let nextBtn = player.config.nextBtn ? player.config.nextBtn : {}\n  let next\n  if (nextBtn.type === 'img') {\n    next = Player.util.createImgBtn('next', nextBtn.url, nextBtn.width, nextBtn.height)\n  } else {\n    next = util.createDom('xg-next', `<xg-icon class=\"xgplayer-icon\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1024\" height=\"1024\" viewBox=\"0 0 1024 1024\">\n              <path transform=\"scale(0.025 0.025)\"\n              d=\"M800 380v768h-128v-352l-320 320v-704l320 320v-352z\"></path>\n          </svg></xg-icon>`, {}, 'xgplayer-next')\n  }\n  controlEl.appendChild(next)\n  ev.forEach(item => {\n    next.addEventListener(item, function (e) {\n      e.preventDefault()\n      e.stopPropagation()\n      player.next()\n    }, false)\n  })\n}\n\nPlayer.install('next', next)\n","import Player from '../music'\n\nconst prev = (player) => {\n  const util = Player.util\n  const controlEl = player.controls\n  const ev = ['click', 'touchstart']\n  let prevBtn = player.config.prevBtn ? player.config.prevBtn : {}\n  let prev\n  if (prevBtn.type === 'img') {\n    prev = Player.util.createImgBtn('prev', prevBtn.url, prevBtn.width, prevBtn.height)\n  } else {\n    prev = util.createDom('xg-prev', `<xg-icon class=\"xgplayer-icon\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1024\" height=\"1024\" viewBox=\"0 0 1024 1024\">\n              <path transform = \"scale(0.025 0.025)\"\n              d=\"M600 1140v-768h128v352l320-320v704l-320-320v352zz\"></path>\n          </svg></xg-icon>`, {}, 'xgplayer-prev')\n  }\n  controlEl.appendChild(prev)\n\n  ev.forEach(item => {\n    prev.addEventListener(item, function (e) {\n      e.preventDefault()\n      e.stopPropagation()\n      player.prev()\n    }, false)\n  })\n}\n\nPlayer.install('prev', prev)\n"],"names":["styleInject","css","ref","insertAt","document","head","getElementsByTagName","style","createElement","type","firstChild","insertBefore","appendChild","styleSheet","cssText","createTextNode","LyricTime","timeTxt","regRule","test","time","RegExp","$1","$2","$3","Lyric","txts","dom","rawTxts","map","item","replace","match","isDynamics","idx","concat","length","isDynamic","some","__ainimateInterval__","__offset__","__offsetScale__","lists","push","txt","index","reg","lyric","list","reduce","pre","cur","line","i","j","k","len","sep","curTime","interval","offset","filter","idxy","player","self","__player__","__handle__","f","find","currentTime","emit","bind","on","__startHandle__","once","off","lyrbicTxts","ev","nodeType","lrcWrap","Player","util","createDom","forEach","innerHTML","join","lrcForward","addEventListener","e","preventDefault","stopPropagation","offsetScale","console","log","lrcBack","__updateHandle__","domWrap","querySelector","activeDom","offsetHeight","activeTop","className","getBoundingClientRect","top","scrollTop","val","lastTime","prefixes","split","requestAnimationFrame","window","cancelAnimationFrame","prefix","callback","element","currTime","Date","getTime","timeToCall","Math","max","id","setTimeout","call","clearTimeout","isSqrt","num","base","Color","color","opacity","Valid","slice","rgb","Number","toArray","req","cancel","Analyze","canvas","AudioCtx","audioCtx","analyser","createAnalyser","gainNode","createGain","minDecibels","maxDecibels","smoothingTimeConstant","gain","setValueAtTime","volume","er","createMediaElementSource","video","ctx","getContext","connect","destination","bgColor","__type__","__size__","__status__","switch","name","close","bufferLen","frequencyBinCount","dataArray","Uint8Array","WIDTH","width","HEIGHT","height","toRGB","fftSize","draw","getByteTimeDomainData","clearRect","fillStyle","lineWidth","strokeStyle","beginPath","sliceWidth","x","v","y","moveTo","lineTo","stroke","getByteFrequencyData","fillRect","barWidth","barHeight","mode","Mode","AudioContext","webkitAudioContext","_undefined","module","value","possibleTypes","isValue","hasOwnProperty","isObject","constructor","prototype","error","apply","isPrototype","classRe","functionToString","Function","toString","isFunction","assign","Object","obj","foo","bar","trzy","keys","require","object","TypeError","dest","src","arguments","key","undefined","Array","create","process","opts1","result","options","str","contains","indexOf","String","searchString","d","dscr","c","w","desc","configurable","enumerable","writable","normalizeOpts","gs","get","set","isPlainFunction","fn","defineProperty","defineProperties","descriptor","methods","descriptors","listener","data","callable","__ee__","__eeOnceListener__","listeners","candidate","splice","l","args","exports","o","Xhr","url","EventEmitter","xhr","XMLHttpRequest","target","responseType","open","onload","status","response","onerror","message","run","abort","readyState","send","timeScale","Music","opts","deepCopy","controls","mediaType","ignores","volumeShow","rawConfig","typeOf","vid","poster","nextIndex","prevIndex","halfPass","history","root","display","addClass","config","currentSrc","autoplayMuted","autoplay","lang","duration","confirmOrder","pause","change","next","segPlay","checkOffline","then","start","lyricTxts","Dom","__lyric__","unbind","nextComput","prevComput","preloadNext","offlineVid","database","openDB","addData","myDB","ojstore","blob","Blob","res","closeDB","ceil","random","prevIndev","meta","every","m4a","load","play","Promise","resolve","offline","getDataByKey","URL","createObjectURL","ModeType","scale","backward","controlEl","backwardBtn","createImgBtn","install","cover","forward","forwardBtn","progressEl","nextBtn","prev","prevBtn"],"mappings":"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"}