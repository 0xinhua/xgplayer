!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("xgplayer")):"function"==typeof define&&define.amd?define(["xgplayer"],t):"object"==typeof exports?exports["xgplayer-music.js"]=t(require("xgplayer")):e["xgplayer-music.js"]=t(e.xgplayer)}(window,function(e){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},r.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=14)}([function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=s(r(12)),o=s(r(11)),a=s(r(15));function s(e){return e&&e.__esModule?e:{default:e}}var l=void 0,c=i.default.util,u=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=i.default.util,n=r.deepCopy({controls:!0,mediaType:"audio",ignores:["fullscreen","start","definition","makeBullet","textTrack","loading","pc","mobile","playbackRate","replay","volume","error","poster"]},e),a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,n));return a.rawConfig=e,a.list="Array"===r.typeOf(n.url)?n.url:[{src:n.url,name:n.name}],a.history=[],a.index=0,n.lyric&&(a.__lyric__=new o.default(n.lyric,n.animateInterval),a.__lyric__.bind(a)),r.addClass(a.root,"xgplayer-music"),Object.defineProperty(a,"src",{get:function(){return this.video.currentSrc},set:function(e){var t="String"===r.typeOf(e)?{src:e,name:""}:e;this.history.push(t),this.video.src=t.src},configurable:!0}),a.once("canplay",function(){n.autoplay?this.volume=0:this.volume=n.volume}),a.start(),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default),n(t,[{key:"add",value:function(e){this.list.push({src:e.src,name:e.name})}},{key:"remove",value:function(e){var t=this.list.findIndex(function(t){return t.src===e||t.name===e});t>-1&&this.list.splice(t,1)}},{key:"random",value:function(){var e=this.list.length;return this.index=Math.ceil(Math.random()*e),this.list[this.index]}},{key:"next",value:function(){switch(this.mode){case"order":case"loop":this.index+1<this.list.length&&(this.index++,this.emit("change",this.list[this.index]),this.src=this.list[this.index].src);break;default:var e=this.random();e&&(this.emit("change",e),this.src=e.src)}}},{key:"prev",value:function(){switch(this.mode){case"order":case"loop":this.index-1>-1&&this.list.length>0&&(this.index--,this.emit("change",this.list[this.index]),this.src=this.list[this.index].src);break;default:var e=this.random();e&&(this.emit("change",e),this.src=e.src)}}},{key:"analyze",value:function(e){return new a.default(this,e)}},{key:"lyric",set:function(e){"Array"===c.typeOf(e)?(this.__lyric__&&this.__lyric__.unbind(this),this.__lyric__=new o.default(e[0],e[1]),this.__lyric__.bind(this)):"String"===c.typeOf(e)&&(this.__lyric__&&this.__lyric__.unbind(this),this.__lyric__=new o.default(e),this.__lyric__.bind(this))},get:function(){return this.__lyric__?this.__lyric__.rawTxt:""}},{key:"lyricLine",get:function(){return this.__lyric__?this.__lyric__.line:-1}},{key:"lyricList",get:function(){return this.__lyric__?this.__lyric__.list:[]}},{key:"mode",get:function(){return l||t.ModeType[0]},set:function(e){switch(e){case 0:case 1:case 2:l=t.ModeType[e]}}}],[{key:"AudioCtx",get:function(){return window.AudioContext||window.webkitAudioContext}},{key:"ModeType",get:function(){return["order","random","loop"]}}]),t}();t.default=u,e.exports=t.default},function(e,t,r){var n,i,o={},a=(n=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===i&&(i=n.apply(this,arguments)),i}),s=function(e){var t={};return function(e){if("function"==typeof e)return e();if(void 0===t[e]){var r=function(e){return document.querySelector(e)}.call(this,e);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(e){r=null}t[e]=r}return t[e]}}(),l=null,c=0,u=[],p=r(6);function f(e,t){for(var r=0;r<e.length;r++){var n=e[r],i=o[n.id];if(i){i.refs++;for(var a=0;a<i.parts.length;a++)i.parts[a](n.parts[a]);for(;a<n.parts.length;a++)i.parts.push(m(n.parts[a],t))}else{var s=[];for(a=0;a<n.parts.length;a++)s.push(m(n.parts[a],t));o[n.id]={id:n.id,refs:1,parts:s}}}}function d(e,t){for(var r=[],n={},i=0;i<e.length;i++){var o=e[i],a=t.base?o[0]+t.base:o[0],s={css:o[1],media:o[2],sourceMap:o[3]};n[a]?n[a].parts.push(s):r.push(n[a]={id:a,parts:[s]})}return r}function h(e,t){var r=s(e.insertInto);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var n=u[u.length-1];if("top"===e.insertAt)n?n.nextSibling?r.insertBefore(t,n.nextSibling):r.appendChild(t):r.insertBefore(t,r.firstChild),u.push(t);else if("bottom"===e.insertAt)r.appendChild(t);else{if("object"!=typeof e.insertAt||!e.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var i=s(e.insertInto+" "+e.insertAt.before);r.insertBefore(t,i)}}function y(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=u.indexOf(e);t>=0&&u.splice(t,1)}function x(e){var t=document.createElement("style");return void 0===e.attrs.type&&(e.attrs.type="text/css"),g(t,e.attrs),h(e,t),t}function g(e,t){Object.keys(t).forEach(function(r){e.setAttribute(r,t[r])})}function m(e,t){var r,n,i,o;if(t.transform&&e.css){if(!(o=t.transform(e.css)))return function(){};e.css=o}if(t.singleton){var a=c++;r=l||(l=x(t)),n=b.bind(null,r,a,!1),i=b.bind(null,r,a,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(r=function(e){var t=document.createElement("link");return void 0===e.attrs.type&&(e.attrs.type="text/css"),e.attrs.rel="stylesheet",g(t,e.attrs),h(e,t),t}(t),n=function(e,t,r){var n=r.css,i=r.sourceMap,o=void 0===t.convertToAbsoluteUrls&&i;(t.convertToAbsoluteUrls||o)&&(n=p(n));i&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var a=new Blob([n],{type:"text/css"}),s=e.href;e.href=URL.createObjectURL(a),s&&URL.revokeObjectURL(s)}.bind(null,r,t),i=function(){y(r),r.href&&URL.revokeObjectURL(r.href)}):(r=x(t),n=function(e,t){var r=t.css,n=t.media;n&&e.setAttribute("media",n);if(e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}.bind(null,r),i=function(){y(r)});return n(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;n(e=t)}else i()}}e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(t=t||{}).attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||"boolean"==typeof t.singleton||(t.singleton=a()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var r=d(e,t);return f(r,t),function(e){for(var n=[],i=0;i<r.length;i++){var a=r[i];(s=o[a.id]).refs--,n.push(s)}e&&f(d(e,t),t);for(i=0;i<n.length;i++){var s;if(0===(s=n[i]).refs){for(var l=0;l<s.parts.length;l++)s.parts[l]();delete o[s.id]}}}};var _,v=(_=[],function(e,t){return _[e]=t,_.filter(Boolean).join("\n")});function b(e,t,r,n){var i=r?"":n.css;if(e.styleSheet)e.styleSheet.cssText=v(t,i);else{var o=document.createTextNode(i),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(o,a[t]):e.appendChild(o)}}},function(e,t){e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var r=function(e,t){var r=e[1]||"",n=e[3];if(!n)return r;if(t&&"function"==typeof btoa){var i=(a=n,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(a))))+" */"),o=n.sources.map(function(e){return"/*# sourceURL="+n.sourceRoot+e+" */"});return[r].concat(o).concat([i]).join("\n")}var a;return[r].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+r+"}":r}).join("")},t.i=function(e,r){"string"==typeof e&&(e=[[null,e,""]]);for(var n={},i=0;i<this.length;i++){var o=this[i][0];"number"==typeof o&&(n[o]=!0)}for(i=0;i<e.length;i++){var a=e[i];"number"==typeof a[0]&&n[a[0]]||(r&&!a[2]?a[2]=r:r&&(a[2]="("+a[2]+") and ("+r+")"),t.push(a))}},t}},function(e,t,r){(e.exports=r(2)(!1)).push([e.i,'.xgplayer-music .xgplayer-controls{display:-webkit-box;display:-ms-flexbox;display:flex;height:50px;cursor:default}.xgplayer-music .xgplayer-controls .xgplayer-prev{-webkit-box-ordinal-group:1;-ms-flex-order:0;order:0;cursor:pointer}.xgplayer-music .xgplayer-controls .xgplayer-play{-webkit-box-ordinal-group:2;-ms-flex-order:1;order:1}.xgplayer-music .xgplayer-controls .xgplayer-play .xgplayer-tips{display:none}.xgplayer-music .xgplayer-controls .xgplayer-next{-webkit-box-ordinal-group:3;-ms-flex-order:2;order:2;cursor:pointer}.xgplayer-music .xgplayer-controls .xgplayer-poster{position:static;-webkit-box-ordinal-group:4;-ms-flex-order:3;order:3;width:40px;height:40px;text-align:center;vertical-align:middle;position:relative;top:50%;margin-top:-17px}.xgplayer-music .xgplayer-controls .xgplayer-poster img{max-width:100%;max-height:100%}.xgplayer-music .xgplayer-controls .xgplayer-progress{position:relative;-webkit-box-ordinal-group:5;-ms-flex-order:4;order:4;top:70%;left:20px;margin-top:-11px;-webkit-box-flex:99;-ms-flex:99;flex:99}.xgplayer-music .xgplayer-controls .xgplayer-progress>*{height:3px;margin-top:8.5px}.xgplayer-music .xgplayer-controls .xgplayer-progress .xgplayer-progress-played:after{top:-4px;width:10px;height:10px;content:" ";display:block}.xgplayer-music .xgplayer-controls .xgplayer-progress .xgplayer-tips{display:none!important}.xgplayer-music .xgplayer-controls .xgplayer-time{-webkit-box-ordinal-group:6;-ms-flex-order:5;order:5;margin-left:30px;line-height:1;position:relative;top:55%}.xgplayer-music .xgplayer-controls .xgplayer-placeholder{-webkit-box-ordinal-group:1000;-ms-flex-order:999;order:999;width:0}.xgplayer-music .xgplayer-controls .xgplayer-icon{padding-top:5px}.xgplayer-music .xgplayer-controls .xgplayer-name{position:absolute;left:175px;bottom:50%;font-size:12px;color:#ddd}.xgplayer-music.xgplayer-ended .xgplayer-controls{display:-webkit-box;display:-ms-flexbox;display:flex}.xgplayer-music{font-size:14px}',""])},function(e,t,r){var n=r(3);"string"==typeof n&&(n=[[e.i,n,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};r(1)(n,i);n.locals&&(e.exports=n.locals)},function(e,t,r){"use strict";var n,i=r(0),o=(n=i)&&n.__esModule?n:{default:n};r(4);o.default.install("theme-lyric",function(e){e.config.theme})},function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var r=t.protocol+"//"+t.host,n=r+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(e,t){var i,o=t.trim().replace(/^"(.*)"$/,function(e,t){return t}).replace(/^'(.*)'$/,function(e,t){return t});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(o)?e:(i=0===o.indexOf("//")?o:0===o.indexOf("/")?r+o:n+o.replace(/^\.\//,""),"url("+JSON.stringify(i)+")")})}},function(e,t,r){(e.exports=r(2)(!1)).push([e.i,'.xgplayer-music .xgplayer-controls{display:-webkit-box;display:-ms-flexbox;display:flex;height:50px;cursor:default}.xgplayer-music .xgplayer-controls .xgplayer-prev{-webkit-box-ordinal-group:1;-ms-flex-order:0;order:0;cursor:pointer}.xgplayer-music .xgplayer-controls .xgplayer-play{-webkit-box-ordinal-group:2;-ms-flex-order:1;order:1}.xgplayer-music .xgplayer-controls .xgplayer-play .xgplayer-tips{display:none}.xgplayer-music .xgplayer-controls .xgplayer-next{-webkit-box-ordinal-group:3;-ms-flex-order:2;order:2;cursor:pointer}.xgplayer-music .xgplayer-controls .xgplayer-poster{position:static;-webkit-box-ordinal-group:4;-ms-flex-order:3;order:3;width:40px;height:40px;text-align:center;vertical-align:middle;position:relative;top:50%;margin-top:-17px}.xgplayer-music .xgplayer-controls .xgplayer-poster img{max-width:100%;max-height:100%}.xgplayer-music .xgplayer-controls .xgplayer-progress{position:relative;-webkit-box-ordinal-group:5;-ms-flex-order:4;order:4;top:70%;left:20px;margin-top:-11px;-webkit-box-flex:99;-ms-flex:99;flex:99}.xgplayer-music .xgplayer-controls .xgplayer-progress>*{height:3px;margin-top:8.5px}.xgplayer-music .xgplayer-controls .xgplayer-progress .xgplayer-progress-played:after{top:-4px;width:10px;height:10px;content:" ";display:block}.xgplayer-music .xgplayer-controls .xgplayer-progress .xgplayer-tips{display:none!important}.xgplayer-music .xgplayer-controls .xgplayer-time{-webkit-box-ordinal-group:6;-ms-flex-order:5;order:5;margin-left:30px;line-height:1;position:relative;top:55%}.xgplayer-music .xgplayer-controls .xgplayer-placeholder{-webkit-box-ordinal-group:1000;-ms-flex-order:999;order:999;width:0}.xgplayer-music .xgplayer-controls .xgplayer-icon{padding-top:5px}.xgplayer-music .xgplayer-controls .xgplayer-name{position:absolute;left:175px;bottom:50%;font-size:12px;color:#ddd}.xgplayer-music.xgplayer-ended .xgplayer-controls{display:-webkit-box;display:-ms-flexbox;display:flex}',""])},function(e,t,r){var n=r(7);"string"==typeof n&&(n=[[e.i,n,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};r(1)(n,i);n.locals&&(e.exports=n.locals)},function(e,t,r){"use strict";var n,i=r(0),o=(n=i)&&n.__esModule?n:{default:n};r(8);o.default.install("theme-default",function(e){var t=e.config,r=e.constructor.util,n=e.controls;if(t.controls){r.addClass(e.root,"xgplayer-music-default"),t.theme&&"default"!==t.theme||(t.width||(e.config.width="100%",e.root.style.width="100%"),t.height||(e.config.height="50px",e.root.style.height="50px"));var i=r.createDom("xg-prev",'<xg-icon class="xgplayer-icon"><svg xmlns="http://www.w3.org/2000/svg" width="1024" height="1024" viewBox="0 0 1024 1024">\n            <path transform = "scale(0.025 0.025)"\n            d="M600 1140v-768h128v352l320-320v704l-320-320v352zz"></path>\n        </svg></xg-icon>',{},"xgplayer-prev");n.appendChild(i);var o=["click","touchstart"];o.forEach(function(t){i.addEventListener(t,function(t){t.preventDefault(),t.stopPropagation(),e.prev()},!1)});var a=r.createDom("xg-next",'<xg-icon class="xgplayer-icon"><svg xmlns="http://www.w3.org/2000/svg" width="1024" height="1024" viewBox="0 0 1024 1024">\n            <path transform="scale(0.025 0.025)"\n            d="M800 380v768h-128v-352l-320 320v-704l320 320v-352z"></path>\n        </svg></xg-icon>',{},"xgplayer-next");n.appendChild(a),o.forEach(function(t){a.addEventListener(t,function(t){t.preventDefault(),t.stopPropagation(),e.next()},!1)});var s=r.createDom("xg-name",""+e.config.name,{},"xgplayer-name");n.appendChild(s);var l=r.createDom("xg-poster",'<img src="'+e.config.poster+'">',{},"xgplayer-poster");n.appendChild(l)}else e.root.style.display="none"})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});for(var n,i=0,o="webkit moz ms o".split(" "),a=window.requestAnimationFrame,s=window.cancelAnimationFrame,l=0;l<o.length&&(!a||!s);l++)n=o[l],a=a||window[n+"RequestAnimationFrame"],s=s||window[n+"CancelAnimationFrame"]||window[n+"CancelRequestAnimationFrame"];a&&s||(a=function(e,t){var r=(new Date).getTime(),n=Math.max(0,16-(r-i)),o=window.setTimeout(function(){e.call(r+n)},n);return i=r+n,o},s=function(e){window.clearTimeout(e)});t.default={requestAnimationFrame:a,cancelAnimationFrame:s,isSqrt:function(e,t){if(1!==e){for(;1!==e;){if(e%t!=0)return!1;e/=t}return!0}return!0}},e.exports=t.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function e(t){i(this,e),this.regRule=/(\d{2}(?=:)):(\d{2}(?=\.))\.(\d{2,3})/g,this.regRule.test(t)?this.time=60*RegExp.$1+1*RegExp.$2+1*("0."+RegExp.$3):this.time=-1};t.LyricTime=o;var a=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;i(this,e),this.rawTxt=t,this.txt=t.replace(/^[\r\n]|[\r\n]$/g,"").match(/(\[.*\])[^[]+/g),this.isDynamic=[].concat(t.match(/\[\d{2}:\d{2}\.\d{2,3}\]/g)).length===this.txt.length&&this.txt.length>1,this.animateInterval=r,this.list=this.txt.map(function(e,t){var r=/(\[[\d:\S]+\])([^[]+)/g.test(e),n=RegExp.$1,i=RegExp.$2;return{time:r?new o(n).time:-1,lyric:i,idx:t}}),this.line=0}return n(e,[{key:"adjust",value:function(){for(var e,t,r=this.list,n=0,i=r.length;n<i;n++){for(e=n+1;e<i&&!(r[e].time>r[n].time);e++);if(e<i){var o=(r[e].time-r[n].time)/(e-n);for(t=n+1;t<e;t++)r[t].time=r[t-1].time+o}}}},{key:"find",value:function(e){var t=this.list,r=this.animateInterval;return t.filter(function(n,i){var o=n.time,a=i+1;return e>=o&&t[a]&&1*e+1*r<=t[a].time})}},{key:"bind",value:function(e){var t=this;return!!this.isDynamic&&(this.__handle__=function(){var r=t.find(e.currentTime)[0];r&&r.idx!==t.line&&(t.line=r.idx,e.emit("lyricUpdate",r))}.bind(this,e),e.on("timeupdate",this.__handle__),!0)}},{key:"unbind",value:function(e){this.__handle__&&(e.off("lybricUpdate",this.__handle__),delete this.__handle__)}}]),e}();t.default=a},function(t,r){t.exports=e},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=r(0),o=(n=i)&&n.__esModule?n:{default:n};r(9),r(5),t.default=o.default,e.exports=t.default},function(e,t,r){e.exports=r(13)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=r(10);var o=function(){function e(t,r){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.canvas=r,this.player=t;var o=new e.AudioCtx,a=o.createAnalyser(),s=o.createGain();a.minDecibels=-90,a.maxDecibels=-10,a.smoothingTimeConstant=.85,s.gain.setValueAtTime(t.volume,t.currentTime),this.er=o.createMediaElementSource(t.video),this.analyser=a,this.ctx=r.getContext("2d"),this.er.connect(a),a.connect(s),s.connect(o.destination),this.style={bgColor:"#c8c8c8",color:"#643232"},this.__type__="bars",this.__size__=256,this.__status__={switch:"on"},["play","playing","seeked"].forEach(function(e){t.on(e,function(){n[n.__type__]()})}),["seeking","waiting","pause","ended"].forEach(function(e){(0,i.cancelAnimationFrame)(n.__status__[n.__type__])}),t.on("volumechange",function(){s.gain.setValueAtTime(t.volume,t.currentTime)})}return n(e,[{key:"wave",value:function(){if((0,i.cancelAnimationFrame)(this.__status__.wave),(0,i.cancelAnimationFrame)(this.__status__.bars),"off"!==this.__status__.switch){this.__status__.wave=(0,i.requestAnimationFrame)(function(){})}}},{key:"bars",value:function(){var e=this;if((0,i.cancelAnimationFrame)(this.__status__.wave),(0,i.cancelAnimationFrame)(this.__status__.bars),"off"!==this.__status__.switch){var t=this.analyser,r=this.canvas,n=this.ctx,o=t.frequencyBinCount,a=new Uint8Array(o),s=r.width,l=r.height;t.fftSize=this.__size__,console.log(t.fftSize,this.__size__);!function r(){e.__status__.bars=(0,i.requestAnimationFrame)(r),t.getByteFrequencyData(a),n.clearRect(0,0,s,l),n.fillStyle="rgb(0, 0, 0)",n.fillRect(0,0,s,l);for(var c=s/o*2.5,u=void 0,p=0,f=0;f<o;f++)u=a[f],n.fillStyle="rgb("+(u+100)+",50,50)",n.fillRect(p,l-u/2,c,u/2),p+=c+1}()}}},{key:"on",value:function(){this.__status__.switch="on",this[this.__type__]()}},{key:"off",value:function(){this.__status__.switch="off",(0,i.cancelAnimationFrame)(this.__status__.wave),(0,i.cancelAnimationFrame)(this.__status__.bars)}},{key:"mode",set:function(t){e.Mode.find(function(e){return e===t})&&(this.__type__=t,"on"===this.__status__.switch&&this[t]())},get:function(){return this.__type__}},{key:"size",set:function(e){(0,i.isSqrt)(e,2)&&(this.__size__=e,this.analyser.fftSize=e,this[this.__type__]())},get:function(){return this.__size__}},{key:"status",get:function(){return this.__status__.switch}}],[{key:"Mode",value:function(){return["wave","bars"]}},{key:"AudioCtx",get:function(){return window.AudioContext||window.webkitAudioContext}}]),e}();t.default=o,e.exports=t.default}])});