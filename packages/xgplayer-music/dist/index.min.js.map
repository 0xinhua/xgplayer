{"version":3,"file":"index.min.js","sources":["../../../node_modules/style-inject/dist/style-inject.es.js","../src/util.js","../src/lyric.js","../src/analyze.js","../node_modules/type/value/is.js","../node_modules/type/object/is.js","../node_modules/type/prototype/is.js","../node_modules/type/function/is.js","../node_modules/type/plain-function/is.js","../node_modules/es5-ext/object/is-value.js","../node_modules/es5-ext/object/keys/shim.js","../node_modules/es5-ext/object/keys/is-implemented.js","../node_modules/es5-ext/object/keys/index.js","../node_modules/es5-ext/object/valid-value.js","../node_modules/es5-ext/object/assign/shim.js","../node_modules/es5-ext/object/assign/is-implemented.js","../node_modules/es5-ext/object/assign/index.js","../node_modules/es5-ext/object/normalize-options.js","../node_modules/es5-ext/string/#/contains/is-implemented.js","../node_modules/es5-ext/string/#/contains/shim.js","../node_modules/es5-ext/string/#/contains/index.js","../node_modules/d/index.js","../node_modules/es5-ext/object/valid-callable.js","../node_modules/event-emitter/index.js","../src/xhr.js","../src/music.js","../src/controls/backward.js","../src/controls/cover.js","../src/controls/forward.js","../src/controls/meta.js","../src/controls/next.js","../src/controls/prev.js"],"sourcesContent":["function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","// @filename https://gist.github.com/chaping/88813f56e75b0fd43f8c\nlet lastTime = 0\nconst prefixes = 'webkit moz ms o'.split(' ') // 各浏览器前缀\n\nlet requestAnimationFrame = window.requestAnimationFrame\nlet cancelAnimationFrame = window.cancelAnimationFrame\n\nvar prefix\n// 通过遍历各浏览器前缀，来得到requestAnimationFrame和cancelAnimationFrame在当前浏览器的实现形式\nfor (var i = 0; i < prefixes.length; i++) {\n  if (requestAnimationFrame && cancelAnimationFrame) {\n    break\n  }\n  prefix = prefixes[i]\n  requestAnimationFrame = requestAnimationFrame || window[prefix + 'RequestAnimationFrame']\n  cancelAnimationFrame = cancelAnimationFrame || window[prefix + 'CancelAnimationFrame'] || window[prefix + 'CancelRequestAnimationFrame']\n}\n\n// 如果当前浏览器不支持requestAnimationFrame和cancelAnimationFrame，则会退到setTimeout\nif (!requestAnimationFrame || !cancelAnimationFrame) {\n  requestAnimationFrame = function (callback, element) {\n    var currTime = new Date().getTime()\n    // 为了使setTimteout的尽可能的接近每秒60帧的效果\n    var timeToCall = Math.max(0, 16 - (currTime - lastTime))\n    var id = window.setTimeout(function () {\n      callback.call(currTime + timeToCall)\n    }, timeToCall)\n    lastTime = currTime + timeToCall\n    return id\n  }\n\n  cancelAnimationFrame = function (id) {\n    window.clearTimeout(id)\n  }\n}\n\nlet isSqrt = function (num, base) {\n  if (num !== 1) {\n    while (num !== 1) {\n      if (num % base === 0) {\n        num = num / base\n      } else {\n        return false\n      }\n    }\n    return true\n  } else {\n    return true\n  }\n}\n\nclass Color {\n  constructor (color, opacity = 1) {\n    this.color = Color.Valid.test(color) ? color : '#ffffff'\n    this.opacity = opacity\n  }\n  toArray () {\n    let color = this.color.slice(1)\n    let rgb = []\n    if (color.length === 6) {\n      color = color.match(/\\d{2}/g)\n      rgb = color.map((item) => {\n        return Number(`0x${item}`)\n      })\n    }\n    return rgb\n  }\n  toRGB () {\n    let rgb = this.toArray()\n    return rgb.length === 3 ? `rgb(${rgb[0]},${rgb[1]},${rgb[2]})` : ''\n  }\n  toGRBA () {\n    let rgb = this.toArray()\n    return rgb.length === 3 ? `rgba(${rgb[0]},${rgb[1]},${rgb[2]},${this.opacity})` : ''\n  }\n  static get Valid () {\n    return /^#[0-9A-F]{6}$|^#[0-9A-F]{3}$/i\n  }\n}\n\nexport default {\n  requestAnimationFrame,\n  cancelAnimationFrame,\n  isSqrt,\n  Color\n}\n","import Player from 'xgplayer'\n\nclass LyricTime {\n  constructor (timeTxt) {\n    this.regRule = /(\\d{2}(?=:)):(\\d{2}(?=\\.))\\.(\\d{2,3})/g\n    if (this.regRule.test(timeTxt)) {\n      this.time = RegExp.$1 * 60 + RegExp.$2 * 1 + ('0.' + RegExp.$3) * 1\n    } else {\n      this.time = -1\n    }\n  }\n}\n\nexport {LyricTime}\n\nclass Lyric {\n  constructor (txts, dom) {\n    this.rawTxts = txts\n    this.txts = txts.map((item) => { return item.replace(/^[\\r\\n]|[\\r\\n]$/g, '').match(/(\\[.*\\])[^[]+/g) })\n    this.isDynamics = txts.map((item, idx) => {\n      return [].concat(item.match(/\\[\\d{2}:\\d{2}\\.\\d{2,3}\\]/g)).length === this.txts[idx].length && this.txts[idx].length === this.txts[0].length && this.txts[idx].length > 1\n    })\n    this.isDynamic = this.isDynamics.some((item) => {\n      return item\n    })\n    this.__ainimateInterval__ = 0\n    this.__offset__ = 0\n    this.__offsetScale__ = 0.5\n    this.dom = dom\n    this.lists = []\n    this.isDynamics.map((item, idx) => {\n      if (item) {\n        this.lists.push(\n          this.txts[idx].map((txt, index) => {\n            const reg = /(\\[[\\d:\\S]+\\])([^[]+)/g.test(txt)\n            const time = RegExp.$1\n            const lyric = RegExp.$2\n            return {\n              time: reg ? new LyricTime(time).time : -1,\n              lyric,\n              idx: index\n            }\n          })\n        )\n      }\n    })\n    this.list = this.lists.reduce((pre, cur) => {\n      return pre.map((item, idx) => {\n        return {\n          time: item.time,\n          lyric: item.lyric === '\\n' ? `${item.lyric}${cur[idx].lyric}` : `${item.lyric}<br/>${cur[idx].lyric}`,\n          idx\n        }\n      })\n    })\n    this.line = 0\n  }\n  set interval (val) {\n    this.__ainimateInterval__ = val\n  }\n  get interval () {\n    return this.__ainimateInterval__\n  }\n  set offset (val) {\n    this.__offset__ = val\n  }\n  get offset () {\n    return this.__offset__\n  }\n  set offsetScale (val) {\n    this.__offsetScale__ = val\n  }\n  get offsetScale () {\n    return this.__offsetScale__\n  }\n  adjust () {\n    let list = this.list\n    for (let i = 0, j, k, len = list.length; i < len; i++) {\n      for (j = i + 1; j < len; j++) {\n        if (list[j].time > list[i].time) {\n          break\n        }\n      }\n      if (j < len) {\n        let sep = (list[j].time - list[i].time) / (j - i)\n        for (k = i + 1; k < j; k++) {\n          list[k].time = list[k - 1].time + sep\n        }\n      }\n    }\n  }\n  find (curTime) {\n    const list = this.list\n    const interval = this.__ainimateInterval__\n    const offset = this.__offset__\n    curTime = curTime + offset > 0 ? curTime + offset : 0\n    return list.filter(({time}, idx) => {\n      let idxy = idx + 1\n      return curTime >= time && ((list[idxy] && curTime * 1 + interval * 1 <= list[idxy].time) || (idxy >= list.length))\n    })\n  }\n  bind (player) {\n    let self = this\n    this.__player__ = player\n    if (self.isDynamic) {\n      self.__handle__ = (() => {\n        const f = this.find(player.currentTime)[0]\n        if (f && f.idx !== this.line) {\n          this.line = f.idx\n          player.emit('lyricUpdate', f)\n        }\n      }).bind(self, player)\n      player.on('timeupdate', self.__handle__)\n\n      self.__startHandle__ = (() => {\n        player.emit('lyricUpdate', self.list[0])\n      }).bind(self, player)\n      player.once('playing', self.__startHandle__)\n      //\n      // self.__endHandle__ = (() => {\n      //   player.emit('lyricUpdate', self.list[self.list.length - 1])\n      // }).bind(self, player)\n      // player.on('ended', self.__endHandle__)\n      return true\n    } else {\n      return false\n    }\n  }\n  unbind (player) {\n    delete this.__player__\n    if (this.__handle__) {\n      player.off('lyricUpdate', this.__handle__)\n      delete this.__handle__\n    }\n  }\n  show () {\n    let dom = this.dom\n    let lyrbicTxts = []\n    let self = this\n    const ev = ['click', 'touchstart']\n    if (dom && dom.nodeType === 1) {\n      const lrcWrap = Player.util.createDom('div', `<div></div>`, {}, 'xgplayer-lrcWrap')\n      dom.appendChild(lrcWrap)\n      this.list.forEach(item => {\n        lyrbicTxts.push(`<xg-lyric-item class=\"xgplayer-lyric-item\" data-idx=\"${item.idx}\">${item.lyric.replace(/[\\r\\n]/g, '')}</xg-lyric-item>`)\n      })\n      lrcWrap.innerHTML = lyrbicTxts.join('')\n      const lrcForward = Player.util.createDom('xg-lrcForward', `<div></div>`, {}, 'xgplayer-lrcForward')\n      dom.appendChild(lrcForward)\n      ev.forEach(item => {\n        lrcForward.addEventListener(item, function (e) {\n          e.preventDefault()\n          e.stopPropagation()\n          self.offset -= self.offsetScale\n          console.log(`lyric go forward ${self.offsetScale}s`)\n        }, false)\n      })\n\n      const lrcBack = Player.util.createDom('xg-lrcBack', `<div></div>`, {}, 'xgplayer-lrcBack')\n      dom.appendChild(lrcBack)\n      ev.forEach(item => {\n        lrcBack.addEventListener(item, function (e) {\n          e.preventDefault()\n          e.stopPropagation()\n          self.offset += self.offsetScale\n          console.log(`lyric go back ${self.offsetScale}s`)\n        }, false)\n      })\n      this.__updateHandle__ = (item) => {\n        let domWrap = this.dom.querySelector('.xgplayer-lrcWrap')\n        let activeDom = domWrap.querySelector('.xgplayer-lyric-item-active')\n        let offsetHeight = domWrap.offsetHeight\n        let activeTop\n        if (activeDom) {\n          activeDom.className = 'xgplayer-lyric-item'\n        }\n        activeDom = domWrap.querySelector(`.xgplayer-lyric-item[data-idx=\"${item.idx}\"]`)\n        if (activeDom) {\n          activeDom.className = 'xgplayer-lyric-item xgplayer-lyric-item-active'\n          activeTop = (activeDom.getBoundingClientRect().top - domWrap.getBoundingClientRect().top + domWrap.scrollTop - offsetHeight / 2)\n          if (activeTop) {\n            domWrap.scrollTop = activeTop\n          }\n        }\n      }\n      this.__player__.on('lyricUpdate', this.__updateHandle__)\n    } else {\n      this.__player__.emit('error', 'lyric container can not be empty')\n    }\n  }\n  hide () {\n    this.__updateHandle__.off('lyricUpdate', this.__updateHandle__)\n  }\n}\n\nexport default Lyric\n","import util from './util'\nconst {\n  requestAnimationFrame: req, cancelAnimationFrame: cancel, isSqrt, Color\n} = util\n\nclass Analyze {\n  constructor (player, canvas) {\n    this.canvas = canvas\n    this.player = player\n    if (!Analyze.AudioCtx) {\n      return\n    }\n    const audioCtx = new Analyze.AudioCtx()\n    let analyser = audioCtx.createAnalyser()\n    let gainNode = audioCtx.createGain()\n    analyser.minDecibels = -90\n    analyser.maxDecibels = -10\n    analyser.smoothingTimeConstant = 0.85\n    gainNode.gain.setValueAtTime(player.volume, player.currentTime)\n    this.er = audioCtx.createMediaElementSource(player.video)\n    this.analyser = analyser\n    this.ctx = canvas.getContext('2d')\n    this.er.connect(analyser)\n    analyser.connect(gainNode)\n    gainNode.connect(audioCtx.destination)\n\n    this.style = {\n      bgColor: '#c8c8c8',\n      color: '#643232'\n    }\n    this.__type__ = 'bars'\n    this.__size__ = 256\n    this.__status__ = {\n      switch: 'on'\n    };\n    ['play', 'playing', 'seeked'].forEach(name => {\n      player.on(name, () => {\n        this[`__${this.__type__}__`]()\n      })\n    });\n    ['seeking', 'waiting', 'pause', 'ended'].forEach(name => {\n      cancel(this.__status__[this.__type__])\n    })\n    player.on('volumechange', () => {\n      gainNode.gain.setValueAtTime(player.volume, player.currentTime)\n    })\n    player.on('destroy', () => {\n      audioCtx.close()\n    })\n  }\n\n  __wave__ () {\n    cancel(this.__status__['wave'])\n    cancel(this.__status__['bars'])\n    if (this.__status__.switch === 'off') {\n      return\n    }\n    let analyser = this.analyser\n    let canvas = this.canvas\n    let ctx = this.ctx\n    let bufferLen = analyser.frequencyBinCount\n    let dataArray = new Uint8Array(bufferLen)\n    const WIDTH = canvas.width\n    const HEIGHT = canvas.height\n    const color = new Color(this.style.color).toRGB()\n    const bgColor = new Color(this.style.color).toRGB()\n    analyser.fftSize = this.__size__\n    const draw = () => {\n      this.__status__['wave'] = req(draw)\n      analyser.getByteTimeDomainData(dataArray)\n      ctx.clearRect(0, 0, WIDTH, HEIGHT)\n      ctx.fillStyle = bgColor\n      ctx.lineWidth = 2\n      ctx.strokeStyle = color\n      ctx.beginPath()\n      const sliceWidth = WIDTH * 1.0 / bufferLen\n      let x = 0\n      for (let i = 0; i < bufferLen; i++) {\n        let v = dataArray[i] / 128.0\n        let y = v * HEIGHT / 2\n        if (i === 0) {\n          ctx.moveTo(x, y)\n        } else {\n          ctx.lineTo(x, y)\n        }\n        x += sliceWidth\n      }\n      ctx.lineTo(canvas.width, canvas.height / 2)\n      ctx.stroke()\n    }\n    draw()\n  }\n  __bars__ () {\n    cancel(this.__status__['wave'])\n    cancel(this.__status__['bars'])\n    if (this.__status__.switch === 'off') {\n      return\n    }\n    let analyser = this.analyser\n    let canvas = this.canvas\n    let ctx = this.ctx\n    let bufferLen = analyser.frequencyBinCount\n    let dataArray = new Uint8Array(bufferLen)\n    const WIDTH = canvas.width\n    const HEIGHT = canvas.height\n    const color = new Color(this.style.color).toArray()\n    const bgColor = new Color(this.style.color).toRGB()\n    analyser.fftSize = this.__size__\n\n    const draw = () => {\n      this.__status__['bars'] = req(draw)\n      analyser.getByteFrequencyData(dataArray)\n      ctx.clearRect(0, 0, WIDTH, HEIGHT)\n      ctx.fillStyle = bgColor\n      ctx.fillRect(0, 0, WIDTH, HEIGHT)\n      const barWidth = (WIDTH / bufferLen) * 2.5\n      let barHeight\n      let x = 0\n      for (var i = 0; i < bufferLen; i++) {\n        barHeight = dataArray[i]\n        ctx.fillStyle = `rgb(${barHeight + color[0]},${color[1]},${color[2]})`\n        ctx.fillRect(x, HEIGHT - barHeight / 2, barWidth, barHeight / 2)\n        x += barWidth + 1\n      }\n    }\n    draw()\n  }\n  on () {\n    this.__status__.switch = 'on'\n    this[`__${this.__type__}__`]()\n  }\n  off () {\n    this.__status__.switch = 'off'\n    cancel(this.__status__['wave'])\n    cancel(this.__status__['bars'])\n  }\n  set mode (mode) {\n    if (Analyze.Mode.filter(item => item === mode).length) {\n      this.__type__ = mode\n      if (this.__status__.switch === 'on') {\n        this[`__${mode}__`]()\n      }\n    }\n  }\n  get mode () {\n    return this.__type__\n  }\n  set size (num) {\n    if (num < 65536 && isSqrt(num, 2)) {\n      this.__size__ = num\n      this.analyser.fftSize = num\n      this[`__${this.__type__}__`]()\n    }\n  }\n  get size () {\n    return this.__size__\n  }\n  get status () {\n    return this.__status__.switch\n  }\n  static get AudioCtx () {\n    return window.AudioContext || window.webkitAudioContext\n  }\n  static get Mode () {\n    return ['wave', 'bars']\n  }\n}\n\nexport default Analyze\n","\"use strict\";\n\n// ES3 safe\nvar _undefined = void 0;\n\nmodule.exports = function (value) { return value !== _undefined && value !== null; };\n","\"use strict\";\n\nvar isValue = require(\"../value/is\");\n\n// prettier-ignore\nvar possibleTypes = { \"object\": true, \"function\": true, \"undefined\": true /* document.all */ };\n\nmodule.exports = function (value) {\n\tif (!isValue(value)) return false;\n\treturn hasOwnProperty.call(possibleTypes, typeof value);\n};\n","\"use strict\";\n\nvar isObject = require(\"../object/is\");\n\nmodule.exports = function (value) {\n\tif (!isObject(value)) return false;\n\ttry {\n\t\tif (!value.constructor) return false;\n\t\treturn value.constructor.prototype === value;\n\t} catch (error) {\n\t\treturn false;\n\t}\n};\n","\"use strict\";\n\nvar isPrototype = require(\"../prototype/is\");\n\nmodule.exports = function (value) {\n\tif (typeof value !== \"function\") return false;\n\n\tif (!hasOwnProperty.call(value, \"length\")) return false;\n\n\ttry {\n\t\tif (typeof value.length !== \"number\") return false;\n\t\tif (typeof value.call !== \"function\") return false;\n\t\tif (typeof value.apply !== \"function\") return false;\n\t} catch (error) {\n\t\treturn false;\n\t}\n\n\treturn !isPrototype(value);\n};\n","\"use strict\";\n\nvar isFunction = require(\"../function/is\");\n\nvar classRe = /^\\s*class[\\s{/}]/, functionToString = Function.prototype.toString;\n\nmodule.exports = function (value) {\n\tif (!isFunction(value)) return false;\n\tif (classRe.test(functionToString.call(value))) return false;\n\treturn true;\n};\n","\"use strict\";\n\nvar _undefined = require(\"../function/noop\")(); // Support ES3 engines\n\nmodule.exports = function (val) { return val !== _undefined && val !== null; };\n","\"use strict\";\n\nvar isValue = require(\"../is-value\");\n\nvar keys = Object.keys;\n\nmodule.exports = function (object) { return keys(isValue(object) ? Object(object) : object); };\n","\"use strict\";\n\nmodule.exports = function () {\n\ttry {\n\t\tObject.keys(\"primitive\");\n\t\treturn true;\n\t} catch (e) {\n\t\treturn false;\n\t}\n};\n","\"use strict\";\n\nmodule.exports = require(\"./is-implemented\")() ? Object.keys : require(\"./shim\");\n","\"use strict\";\n\nvar isValue = require(\"./is-value\");\n\nmodule.exports = function (value) {\n\tif (!isValue(value)) throw new TypeError(\"Cannot use null or undefined\");\n\treturn value;\n};\n","\"use strict\";\n\nvar keys  = require(\"../keys\")\n  , value = require(\"../valid-value\")\n  , max   = Math.max;\n\nmodule.exports = function (dest, src/*, …srcn*/) {\n\tvar error, i, length = max(arguments.length, 2), assign;\n\tdest = Object(value(dest));\n\tassign = function (key) {\n\t\ttry {\n\t\t\tdest[key] = src[key];\n\t\t} catch (e) {\n\t\t\tif (!error) error = e;\n\t\t}\n\t};\n\tfor (i = 1; i < length; ++i) {\n\t\tsrc = arguments[i];\n\t\tkeys(src).forEach(assign);\n\t}\n\tif (error !== undefined) throw error;\n\treturn dest;\n};\n","\"use strict\";\n\nmodule.exports = function () {\n\tvar assign = Object.assign, obj;\n\tif (typeof assign !== \"function\") return false;\n\tobj = { foo: \"raz\" };\n\tassign(obj, { bar: \"dwa\" }, { trzy: \"trzy\" });\n\treturn obj.foo + obj.bar + obj.trzy === \"razdwatrzy\";\n};\n","\"use strict\";\n\nmodule.exports = require(\"./is-implemented\")() ? Object.assign : require(\"./shim\");\n","\"use strict\";\n\nvar isValue = require(\"./is-value\");\n\nvar forEach = Array.prototype.forEach, create = Object.create;\n\nvar process = function (src, obj) {\n\tvar key;\n\tfor (key in src) obj[key] = src[key];\n};\n\n// eslint-disable-next-line no-unused-vars\nmodule.exports = function (opts1/*, …options*/) {\n\tvar result = create(null);\n\tforEach.call(arguments, function (options) {\n\t\tif (!isValue(options)) return;\n\t\tprocess(Object(options), result);\n\t});\n\treturn result;\n};\n","\"use strict\";\n\nvar str = \"razdwatrzy\";\n\nmodule.exports = function () {\n\tif (typeof str.contains !== \"function\") return false;\n\treturn str.contains(\"dwa\") === true && str.contains(\"foo\") === false;\n};\n","\"use strict\";\n\nvar indexOf = String.prototype.indexOf;\n\nmodule.exports = function (searchString/*, position*/) {\n\treturn indexOf.call(this, searchString, arguments[1]) > -1;\n};\n","\"use strict\";\n\nmodule.exports = require(\"./is-implemented\")() ? String.prototype.contains : require(\"./shim\");\n","\"use strict\";\n\nvar isValue         = require(\"type/value/is\")\n  , isPlainFunction = require(\"type/plain-function/is\")\n  , assign          = require(\"es5-ext/object/assign\")\n  , normalizeOpts   = require(\"es5-ext/object/normalize-options\")\n  , contains        = require(\"es5-ext/string/#/contains\");\n\nvar d = (module.exports = function (dscr, value/*, options*/) {\n\tvar c, e, w, options, desc;\n\tif (arguments.length < 2 || typeof dscr !== \"string\") {\n\t\toptions = value;\n\t\tvalue = dscr;\n\t\tdscr = null;\n\t} else {\n\t\toptions = arguments[2];\n\t}\n\tif (isValue(dscr)) {\n\t\tc = contains.call(dscr, \"c\");\n\t\te = contains.call(dscr, \"e\");\n\t\tw = contains.call(dscr, \"w\");\n\t} else {\n\t\tc = w = true;\n\t\te = false;\n\t}\n\n\tdesc = { value: value, configurable: c, enumerable: e, writable: w };\n\treturn !options ? desc : assign(normalizeOpts(options), desc);\n});\n\nd.gs = function (dscr, get, set/*, options*/) {\n\tvar c, e, options, desc;\n\tif (typeof dscr !== \"string\") {\n\t\toptions = set;\n\t\tset = get;\n\t\tget = dscr;\n\t\tdscr = null;\n\t} else {\n\t\toptions = arguments[3];\n\t}\n\tif (!isValue(get)) {\n\t\tget = undefined;\n\t} else if (!isPlainFunction(get)) {\n\t\toptions = get;\n\t\tget = set = undefined;\n\t} else if (!isValue(set)) {\n\t\tset = undefined;\n\t} else if (!isPlainFunction(set)) {\n\t\toptions = set;\n\t\tset = undefined;\n\t}\n\tif (isValue(dscr)) {\n\t\tc = contains.call(dscr, \"c\");\n\t\te = contains.call(dscr, \"e\");\n\t} else {\n\t\tc = true;\n\t\te = false;\n\t}\n\n\tdesc = { get: get, set: set, configurable: c, enumerable: e };\n\treturn !options ? desc : assign(normalizeOpts(options), desc);\n};\n","\"use strict\";\n\nmodule.exports = function (fn) {\n\tif (typeof fn !== \"function\") throw new TypeError(fn + \" is not a function\");\n\treturn fn;\n};\n","'use strict';\n\nvar d        = require('d')\n  , callable = require('es5-ext/object/valid-callable')\n\n  , apply = Function.prototype.apply, call = Function.prototype.call\n  , create = Object.create, defineProperty = Object.defineProperty\n  , defineProperties = Object.defineProperties\n  , hasOwnProperty = Object.prototype.hasOwnProperty\n  , descriptor = { configurable: true, enumerable: false, writable: true }\n\n  , on, once, off, emit, methods, descriptors, base;\n\non = function (type, listener) {\n\tvar data;\n\n\tcallable(listener);\n\n\tif (!hasOwnProperty.call(this, '__ee__')) {\n\t\tdata = descriptor.value = create(null);\n\t\tdefineProperty(this, '__ee__', descriptor);\n\t\tdescriptor.value = null;\n\t} else {\n\t\tdata = this.__ee__;\n\t}\n\tif (!data[type]) data[type] = listener;\n\telse if (typeof data[type] === 'object') data[type].push(listener);\n\telse data[type] = [data[type], listener];\n\n\treturn this;\n};\n\nonce = function (type, listener) {\n\tvar once, self;\n\n\tcallable(listener);\n\tself = this;\n\ton.call(this, type, once = function () {\n\t\toff.call(self, type, once);\n\t\tapply.call(listener, this, arguments);\n\t});\n\n\tonce.__eeOnceListener__ = listener;\n\treturn this;\n};\n\noff = function (type, listener) {\n\tvar data, listeners, candidate, i;\n\n\tcallable(listener);\n\n\tif (!hasOwnProperty.call(this, '__ee__')) return this;\n\tdata = this.__ee__;\n\tif (!data[type]) return this;\n\tlisteners = data[type];\n\n\tif (typeof listeners === 'object') {\n\t\tfor (i = 0; (candidate = listeners[i]); ++i) {\n\t\t\tif ((candidate === listener) ||\n\t\t\t\t\t(candidate.__eeOnceListener__ === listener)) {\n\t\t\t\tif (listeners.length === 2) data[type] = listeners[i ? 0 : 1];\n\t\t\t\telse listeners.splice(i, 1);\n\t\t\t}\n\t\t}\n\t} else {\n\t\tif ((listeners === listener) ||\n\t\t\t\t(listeners.__eeOnceListener__ === listener)) {\n\t\t\tdelete data[type];\n\t\t}\n\t}\n\n\treturn this;\n};\n\nemit = function (type) {\n\tvar i, l, listener, listeners, args;\n\n\tif (!hasOwnProperty.call(this, '__ee__')) return;\n\tlisteners = this.__ee__[type];\n\tif (!listeners) return;\n\n\tif (typeof listeners === 'object') {\n\t\tl = arguments.length;\n\t\targs = new Array(l - 1);\n\t\tfor (i = 1; i < l; ++i) args[i - 1] = arguments[i];\n\n\t\tlisteners = listeners.slice();\n\t\tfor (i = 0; (listener = listeners[i]); ++i) {\n\t\t\tapply.call(listener, this, args);\n\t\t}\n\t} else {\n\t\tswitch (arguments.length) {\n\t\tcase 1:\n\t\t\tcall.call(listeners, this);\n\t\t\tbreak;\n\t\tcase 2:\n\t\t\tcall.call(listeners, this, arguments[1]);\n\t\t\tbreak;\n\t\tcase 3:\n\t\t\tcall.call(listeners, this, arguments[1], arguments[2]);\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tl = arguments.length;\n\t\t\targs = new Array(l - 1);\n\t\t\tfor (i = 1; i < l; ++i) {\n\t\t\t\targs[i - 1] = arguments[i];\n\t\t\t}\n\t\t\tapply.call(listeners, this, args);\n\t\t}\n\t}\n};\n\nmethods = {\n\ton: on,\n\tonce: once,\n\toff: off,\n\temit: emit\n};\n\ndescriptors = {\n\ton: d(on),\n\tonce: d(once),\n\toff: d(off),\n\temit: d(emit)\n};\n\nbase = defineProperties({}, descriptors);\n\nmodule.exports = exports = function (o) {\n\treturn (o == null) ? create(base) : defineProperties(Object(o), descriptors);\n};\nexports.methods = methods;\n","import EventEmitter from 'event-emitter'\n\nclass Xhr {\n  constructor (url, callback) {\n    EventEmitter(this)\n    this.url = url\n    let xhr = new window.XMLHttpRequest()\n    xhr.target = this\n    xhr.responseType = 'arraybuffer'\n    xhr.open('get', url)\n    xhr.onload = function () {\n      if (xhr.status === 200 || xhr.status === 206) {\n        if (callback && callback instanceof Function) {\n          callback(xhr.response)\n        }\n      }\n    }\n    xhr.onerror = function (e) {\n      xhr.target.emit('error' + e.message)\n    }\n    this.xhr = xhr\n    this.run()\n  }\n  cancel () {\n    this.xhr.abort()\n  }\n\n  run () {\n    if (this.xhr.readyState === 1) {\n      this.xhr.send()\n    }\n  }\n}\n\nexport default Xhr\n","import Player from 'xgplayer'\nimport Lyric from './lyric'\nimport Analyze from './analyze'\nimport Xhr from './xhr'\nlet mode\nlet timeScale = 15\n\nconst util = Player.util\n\nclass Music extends Player {\n  constructor (options) {\n    let opts = util.deepCopy({\n      controls: true,\n      mediaType: 'audio',\n      ignores: ['fullscreen', 'start', 'definition', 'makeBullet', 'textTrack', 'loading', 'pc', 'mobile', 'playbackRate', 'replay', 'error', 'poster']\n    }, options)\n    if (!opts.volumeShow) {\n      opts.ignores.push('volume')\n    }\n    super(opts)\n    let player = this\n    this.rawConfig = options\n    this.list = util.typeOf(opts.url) === 'Array' ? opts.url : [{\n      src: opts.url,\n      name: opts.name,\n      vid: opts.vid,\n      poster: opts.poster\n    }]\n    this.name = this.list[0].name\n    this.vid = this.list[0].vid\n    this.poster = this.list[0].poster\n    this.nextIndex = 1\n    this.prevIndex = this.list.length - 1\n    this.halfPass = false\n    this.history = []\n    this.index = 0\n    if (!opts.controls) {\n      this.root.style.display = 'none'\n      return\n    }\n\n    util.addClass(this.root, 'xgplayer-music')\n    if (!opts.width) {\n      this.config.width = '100%'\n      this.root.style.width = '100%'\n    }\n    if (!opts.height) {\n      this.config.height = '50px'\n      this.root.style.height = '50px'\n    }\n    Object.defineProperty(this, 'src', {\n      get () {\n        return this.video.currentSrc\n      },\n      set (v) {\n        let cur = util.typeOf(v) === 'String' ? {src: v, name: ''} : v\n        this.history.push(cur)\n        this.video.src = cur.src\n      },\n      configurable: true\n    })\n    if (this.config.autoplayMuted) {\n      this.config.volume = this.config.autoplay ? 0 : this.config.volume\n    }\n    player.once('ready', () => {\n      util.addClass(player.root, 'xgplayer-skin-default')\n      if(player.config.lang && player.config.lang === 'en') {\n        util.addClass(player.root, 'lang-is-en')\n      } else if(player.config.lang === 'jp') {\n        util.addClass(player.root, 'lang-is-jp')\n      }\n    })\n    this.once('canplay', function () {\n      if (this.config.autoplay && this.config.autoplayMuted) {\n        this.volume = 0\n      } else {\n        this.volume = this.config.volume\n      }\n    })\n    this.on('timeupdate', () => {\n      if (!this.halfPass && this.currentTime > this.duration / 2) {\n        this.confirmOrder()\n      }\n    })\n    this.on('ended', () => {\n      if (this.mode === 'order' && this.index + 1 >= this.list.length) {\n        this.pause()\n        this.currentTime = 0\n        return\n      }\n      switch (this.mode) {\n        case 'sloop':\n          this.change()\n          break\n        case 'order':\n        case 'loop':\n        default:\n          this.next()\n          break\n      }\n    })\n    if (!this.config.segPlay) {\n      this.checkOffline(player.list[0].src, player.list[0].vid || player.list[0].name).then(url => {\n        player.config.url = url\n        player.start(url)\n      })\n    }\n  }\n  lyric (lyricTxts, Dom) {\n    if (this.__lyric__) {\n      this.__lyric__.unbind(this)\n    }\n    if (Player.util.typeOf(lyricTxts) !== 'Array') {\n      lyricTxts = [].concat(lyricTxts)\n    }\n    this.__lyric__ = new Lyric(lyricTxts, Dom)\n    this.__lyric__.bind(this)\n    return this.__lyric__\n  }\n  confirmOrder () {\n    let player = this\n    this.halfPass = true\n    this.nextComput()\n    this.prevComput()\n    if (this.config.preloadNext) {\n      this.checkOffline(this.list[this.nextIndex].src, this.list[this.nextIndex].vid || this.list[this.nextIndex].name).then(url => {\n        if (url.indexOf('blob:') < 0) {\n          let offlineVid = player.list[player.nextIndex].vid || player.list[player.nextIndex].name\n          let xhr = new Xhr(player.list[player.nextIndex].src, res => {\n            player.database.openDB(() => {\n              player.database.addData(player.database.myDB.ojstore.name, [{vid: offlineVid, blob: new Blob([res], {type: 'audio/mp4; codecs=\"mp4a.40.5\"'})}])\n              setTimeout(() => {\n                player.database.closeDB()\n              }, 5000)\n            })\n          })\n        }\n      })\n    }\n  }\n\n  get mode () {\n    return mode || Music.ModeType[2]\n  }\n  set mode (idx) {\n    switch (idx) {\n      case 0:\n      case 1:\n      case 2:\n      case 3:\n        mode = Music.ModeType[idx]\n    }\n    this.confirmOrder()\n  }\n\n  nextComput () {\n    switch (this.mode) {\n      case 'sloop':\n      case 'order':\n      case 'loop':\n        if (this.index + 1 < this.list.length) {\n          this.nextIndex = this.index + 1\n        } else {\n          this.nextIndex = 0\n        }\n        break\n      default:\n        this.nextIndex = Math.ceil(Math.random() * this.list.length)\n        break\n    }\n  }\n  prevComput () {\n    switch (this.mode) {\n      case 'sloop':\n      case 'order':\n      case 'loop':\n        if (this.index - 1 >= 0) {\n          this.prevIndev = this.index - 1\n        } else {\n          this.prevIndev = this.list.length - 1\n        }\n        break\n      default:\n        this.prevIndev = Math.ceil(Math.random() * this.list.length)\n        break\n    }\n  }\n  get timeScale () {\n    return timeScale || 15\n  }\n  set timeScale (scale) {\n    timeScale = scale\n  }\n\n  add (meta) {\n    this.list.push({\n      src: meta.src,\n      name: meta.name,\n      vid: meta.vid,\n      poster: meta.poster\n    })\n  }\n  remove (url) {\n    let idx = -1\n    this.list.every((item, index) => {\n      if (item.src === url || item.name === url || item.vid === url) {\n        idx = index\n        return false\n      } else {\n        return true\n      }\n    })\n    if (idx > -1) {\n      this.list.splice(idx, 1)\n    }\n  }\n  change () {\n    let self = this\n    let offlineVid = self.list[self.index].vid || self.list[self.index].name\n    this.halfPass = false\n    this.checkOffline(self.list[self.index].src, offlineVid).then(url => {\n      if (Player.m4a) {\n        self.video.load()\n        self.name = self.list[self.index].name\n        self.vid = self.list[self.index].vid\n        self.poster = self.list[self.index].poster\n        self.emit('change', {src: url, name: self.name, vid: self.vid, poster: self.poster})\n      } else {\n        self.video.pause()\n        self.currentTime = 0\n        self.src = url\n        self.name = self.list[self.index].name\n        self.vid = self.list[self.index].vid\n        self.poster = self.list[self.index].poster\n        setTimeout(() => {\n          self.video.play().then(() => {\n            self.emit('change', {src: url, name: self.name, vid: self.vid, poster: self.poster})\n          })\n        }, 60)\n      }\n    })\n  }\n  checkOffline (url, offlineVid) {\n    let self = this\n    return new Promise((resolve) => {\n      if (!self.config.offline) {\n        resolve(url)\n      }\n      self.database.openDB(() => {\n        self.database.getDataByKey(self.database.myDB.ojstore.name, offlineVid, result => {\n          setTimeout(() => {\n            self.database.closeDB()\n          }, 5000)\n          if (result) {\n            resolve(URL.createObjectURL(result.blob))\n          } else {\n            resolve(url)\n          }\n        })\n      })\n    })\n  }\n  next () {\n    if (!this.halfPass) {\n      this.halfPass = true\n      this.nextComput()\n    }\n    this.index = this.nextIndex\n    this.change()\n  }\n  prev () {\n    if (!this.halfPass) {\n      this.halfPass = true\n      this.prevComput()\n    }\n    this.index = this.prevIndex\n    this.change()\n  }\n  forward () {\n    // console.log(`music go forward ${timeScale}s`)\n    this.currentTime = this.currentTime + timeScale < this.duration ? this.currentTime + timeScale : this.duration - 0.1\n  }\n  backward () {\n    // console.log(`music go backward ${timeScale}s`)\n    this.currentTime = this.currentTime - timeScale > 0 ? this.currentTime - timeScale : 0\n  }\n  analyze (canvas) {\n    return new Analyze(this, canvas)\n  }\n  static get AudioCtx () {\n    return window.AudioContext || window.webkitAudioContext\n  }\n  static get ModeType () {\n    return ['order', 'random', 'loop', 'sloop']\n  }\n}\n\nexport default Music\nexport {\n  Lyric,\n  Analyze\n}\n","import Player from '../music'\n\nconst backward = (player) => {\n  const util = Player.util\n  const controlEl = player.controls\n  const ev = ['click', 'touchstart']\n  let backwardBtn = player.config.backwardBtn ? player.config.backwardBtn : {}\n  let backward\n  if (backwardBtn.type === 'img') {\n    backward = Player.util.createImgBtn('backward', backwardBtn.url, backwardBtn.width, backwardBtn.height)\n  } else {\n    backward = util.createDom('xg-backward', `<xg-icon class=\"xgplayer-icon\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1024\" height=\"1024\" viewBox=\"0 0 1024 1024\">\n              <path transform = \"scale(1.5 1.5) translate(8 4.5)\"\n              d=\"m 14,2.99996 0,10 -7,-5 7,-5 z m -7,5 0,5 -7,-5 7,-5 0,5 z m -7,0 0,0 z\"></path>\n          </svg></xg-icon>`, {}, 'xgplayer-backward')\n  }\n  controlEl.appendChild(backward)\n  ev.forEach(item => {\n    backward.addEventListener(item, function (e) {\n      e.preventDefault()\n      e.stopPropagation()\n      player.backward()\n    }, false)\n  })\n}\n\nPlayer.install('backward', backward)\n","import Player from '../music'\n\nconst cover = (player) => {\n  const util = Player.util\n  const controlEl = player.controls\n  const poster = util.createDom('xg-cover', `<img src=\"${player.config.poster || player.config.url[0].poster}\">`, {}, 'xgplayer-cover')\n  controlEl.appendChild(poster)\n  player.on('change', item => {\n    poster.innerHTML = `<img src=\"${item.poster}\">`\n  })\n}\n\nPlayer.install('cover', cover)\n","import Player from '../music'\n\nconst forward = (player) => {\n  const util = Player.util\n  const controlEl = player.controls\n  const ev = ['click', 'touchstart']\n  let forwardBtn = player.config.forwardBtn ? player.config.forwardBtn : {}\n  let forward\n  if (forwardBtn.type === 'img') {\n    forward = Player.util.createImgBtn('forward', forwardBtn.url, forwardBtn.width, forwardBtn.height)\n  } else {\n    forward = util.createDom('xg-forward', `<xg-icon class=\"xgplayer-icon\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1024\" height=\"1024\" viewBox=\"0 0 1024 1024\">\n              <path transform = \"scale(1.5 1.5) translate(-2 4.5)\"\n              d=\"m 2,2.99996 0,10 7,-5 -7,-5 z m 7,5 0,5 7,-5 -7,-5 0,5 z m 7,0 0,0 z\"></path>\n          </svg></xg-icon>`, {}, 'xgplayer-forward')\n  }\n  controlEl.appendChild(forward)\n  ev.forEach(item => {\n    forward.addEventListener(item, function (e) {\n      e.preventDefault()\n      e.stopPropagation()\n      player.forward()\n    }, false)\n  })\n}\n\nPlayer.install('forward', forward)\n","import Player from '../music'\n\nconst meta = (player) => {\n  const util = Player.util\n  const progressEl = player.controls.querySelector('.xgplayer-progress')\n  const name = util.createDom('xg-name', `${player.config.name || player.config.url[0].name}`, {}, 'xgplayer-name')\n  progressEl.appendChild(name)\n  player.on('change', item => {\n    name.innerHTML = `${item.name}`\n  })\n}\n\nPlayer.install('meta', meta)\n","import Player from '../music'\n\nconst next = (player) => {\n  const util = Player.util\n  const controlEl = player.controls\n  const ev = ['click', 'touchstart']\n  let nextBtn = player.config.nextBtn ? player.config.nextBtn : {}\n  let next\n  if (nextBtn.type === 'img') {\n    next = Player.util.createImgBtn('next', nextBtn.url, nextBtn.width, nextBtn.height)\n  } else {\n    next = util.createDom('xg-next', `<xg-icon class=\"xgplayer-icon\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1024\" height=\"1024\" viewBox=\"0 0 1024 1024\">\n              <path transform=\"scale(0.025 0.025)\"\n              d=\"M800 380v768h-128v-352l-320 320v-704l320 320v-352z\"></path>\n          </svg></xg-icon>`, {}, 'xgplayer-next')\n  }\n  controlEl.appendChild(next)\n  ev.forEach(item => {\n    next.addEventListener(item, function (e) {\n      e.preventDefault()\n      e.stopPropagation()\n      player.next()\n    }, false)\n  })\n}\n\nPlayer.install('next', next)\n","import Player from '../music'\n\nconst prev = (player) => {\n  const util = Player.util\n  const controlEl = player.controls\n  const ev = ['click', 'touchstart']\n  let prevBtn = player.config.prevBtn ? player.config.prevBtn : {}\n  let prev\n  if (prevBtn.type === 'img') {\n    prev = Player.util.createImgBtn('prev', prevBtn.url, prevBtn.width, prevBtn.height)\n  } else {\n    prev = util.createDom('xg-prev', `<xg-icon class=\"xgplayer-icon\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1024\" height=\"1024\" viewBox=\"0 0 1024 1024\">\n              <path transform = \"scale(0.025 0.025)\"\n              d=\"M600 1140v-768h128v352l320-320v704l-320-320v352zz\"></path>\n          </svg></xg-icon>`, {}, 'xgplayer-prev')\n  }\n  controlEl.appendChild(prev)\n\n  ev.forEach(item => {\n    prev.addEventListener(item, function (e) {\n      e.preventDefault()\n      e.stopPropagation()\n      player.prev()\n    }, false)\n  })\n}\n\nPlayer.install('prev', prev)\n"],"names":["css","ref","insertAt","document","head","getElementsByTagName","style","createElement","type","firstChild","insertBefore","appendChild","styleSheet","cssText","createTextNode","prefix","LyricTime","timeTxt","regRule","this","test","time","RegExp","$1","$2","$3","Lyric","txts","dom","rawTxts","map","item","replace","match","isDynamics","idx","concat","length","_this","isDynamic","some","__ainimateInterval__","__offset__","__offsetScale__","lists","push","txt","index","reg","lyric","list","reduce","pre","cur","line","j","k","i","len","sep","curTime","interval","offset","filter","idxy","player","self","__player__","__handle__","f","_this2","find","currentTime","emit","bind","on","__startHandle__","once","off","lyrbicTxts","ev","nodeType","lrcWrap","Player","util","createDom","forEach","innerHTML","join","lrcForward","addEventListener","e","preventDefault","stopPropagation","offsetScale","log","lrcBack","__updateHandle__","domWrap","_this3","querySelector","activeDom","offsetHeight","activeTop","className","getBoundingClientRect","top","scrollTop","val","lastTime","prefixes","split","requestAnimationFrame","window","cancelAnimationFrame","callback","element","currTime","Date","getTime","timeToCall","Math","max","id","setTimeout","call","clearTimeout","num","base","color","opacity","Color","Valid","slice","rgb","Number","toArray","req","cancel","isSqrt","Analyze","canvas","AudioCtx","audioCtx","analyser","createAnalyser","gainNode","createGain","minDecibels","maxDecibels","smoothingTimeConstant","gain","setValueAtTime","volume","er","createMediaElementSource","video","ctx","getContext","connect","destination","__type__","__size__","__status__","name","close","switch","bufferLen","frequencyBinCount","dataArray","Uint8Array","WIDTH","width","HEIGHT","height","toRGB","bgColor","fftSize","draw","getByteTimeDomainData","clearRect","fillStyle","lineWidth","strokeStyle","beginPath","sliceWidth","x","y","moveTo","lineTo","stroke","getByteFrequencyData","fillRect","barWidth","barHeight","mode","Mode","AudioContext","webkitAudioContext","value","possibleTypes","object","function","undefined","isValue","hasOwnProperty","isObject","constructor","prototype","error","apply","isPrototype","classRe","functionToString","Function","toString","isFunction","require$$0","keys","Object","require$$1","TypeError","dest","src","assign","arguments","key","obj","foo","bar","trzy","Array","create","process","opts1","result","options","str","indexOf","String","searchString","contains","module","dscr","c","w","desc","configurable","enumerable","writable","normalizeOpts","gs","get","set","isPlainFunction","fn","methods","descriptors","defineProperty","defineProperties","descriptor","listener","data","callable","__ee__","__eeOnceListener__","listeners","candidate","splice","l","args","d","exports","o","Xhr","url","xhr","XMLHttpRequest","target","responseType","open","onload","status","response","onerror","message","run","abort","readyState","send","timeScale","Music","opts","deepCopy","volumeShow","ignores","rawConfig","typeOf","vid","poster","nextIndex","prevIndex","halfPass","history","controls","addClass","root","config","currentSrc","v","autoplayMuted","autoplay","lang","duration","confirmOrder","pause","change","next","segPlay","checkOffline","then","start","display","lyricTxts","Dom","__lyric__","unbind","nextComput","prevComput","preloadNext","offlineVid","database","openDB","addData","myDB","ojstore","blob","Blob","res","closeDB","ceil","random","prevIndev","meta","every","m4a","load","play","Promise","resolve","offline","getDataByKey","URL","createObjectURL","ModeType","scale","backward","controlEl","backwardBtn","createImgBtn","install","cover","forward","forwardBtn","progressEl","nextBtn","prev","prevBtn"],"mappings":"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"}