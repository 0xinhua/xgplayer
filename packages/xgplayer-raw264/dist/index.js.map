{"version":3,"file":"index.js","sources":["../../xgplayer-helper-codec/es/aac/index.js","../../xgplayer-helper-codec/es/aac/adts.js","../../xgplayer-helper-codec/es/avc/golomb.js","../../xgplayer-helper-codec/es/avc/sps.js","../../xgplayer-helper-codec/es/avc/rbsp.js","../../xgplayer-helper-codec/es/avc/sei.js","../../xgplayer-helper-codec/es/avc/nalunit.js","../../xgplayer-helper-codec/es/avc/index.js","../../xgplayer-helper-codec/es/hevc/golomb.js","../../xgplayer-helper-codec/es/hevc/sps.js","../../xgplayer-helper-codec/es/hevc/rbsp.js","../../xgplayer-helper-codec/es/hevc/sei.js","../../xgplayer-helper-codec/es/hevc/nalunit.js","../../xgplayer-helper-utils/es/common/func/buffer-dump.js","../../xgplayer-helper-utils/es/common/func/debounce.js","../../xgplayer-helper-utils/es/common/func/caculate.js","../../xgplayer-helper-utils/es/common/index.js","../../xgplayer-helper-utils/es/events/index.js","../../xgplayer-helper-models/es/playlist.js","../../xgplayer-helper-models/es/presource.js","../../xgplayer-helper-models/es/stream.js","../../xgplayer-helper-models/es/track.js","../../xgplayer-helper-models/es/u8a-buffer.js","../../xgplayer-helper-models/es/track-meta.js","../../xgplayer-helper-models/es/track-sample.js","../../xgplayer-helper-models/es/media-info.js","../../xgplayer-helper-models/es/index.js","../../../node_modules/rollup-plugin-node-builtins/src/es6/events.js","../../xgplayer-helper-utils/es/context/index.js","../../xgplayer-helper-utils/es/crypto/index.js","../../xgplayer-helper-utils/es/eme/index.js","../../xgplayer-helper-utils/es/mse/index.js","../../xgplayer-helper-utils/es/sniffer/page-visibility.js","../../xgplayer-helper-utils/es/sniffer/index.js","../../xgplayer-helper-utils/es/loader-fetch/index.js","../../xgplayer-helper-utils/es/common/dev-logger.js","../../xgplayer-helper-utils/es/index.js","../../xgplayer-helper-codec/es/compat/index.js","../../xgplayer-helper-codec/es/utf8/index.js","../../xgplayer-helper-codec/es/index.js","../src/raw-264.js","../../xgplayer-mobilevideo/es/helper/nosleep.js","../../xgplayer-mobilevideo/es/polyfills/custom-elements.min.js","../../xgplayer-mobilevideo/es/polyfills/native-element.js","../../xgplayer-mobilevideo/es/events.js","../../xgplayer-mobilevideo/es/render/AudioTimeRange.js","../../xgplayer-mobilevideo/es/helper/audio-helper.js","../../xgplayer-mobilevideo/es/render/AudioRender.js","../../../node_modules/rollup-plugin-bundle-worker/src/workerhelper.js","../../xgplayer-mobilevideo/es/decoder/hevc-worker.js","../../xgplayer-mobilevideo/es/decoder/worker.js","../../xgplayer-mobilevideo/es/render/VideoTimeRange.js","../../xgplayer-mobilevideo/es/render/FrameRender.js","../../xgplayer-mobilevideo/es/render/DecodeEstimate.js","../../xgplayer-mobilevideo/es/config.js","../../xgplayer-mobilevideo/es/render/VideoRender.js","../../xgplayer-mobilevideo/es/TimeLine.js","../../xgplayer-mobilevideo/es/index.js","../src/index.js"],"sourcesContent":["var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar AAC = function () {\n  function AAC() {\n    _classCallCheck(this, AAC);\n  }\n\n  _createClass(AAC, null, [{\n    key: 'getSilentFrame',\n    value: function getSilentFrame(codec, channelCount) {\n      if (codec === 'mp4a.40.2') {\n        // handle LC-AAC\n        if (channelCount === 1) {\n          return new Uint8Array([0x00, 0xc8, 0x00, 0x80, 0x23, 0x80]);\n        } else if (channelCount === 2) {\n          return new Uint8Array([0x21, 0x00, 0x49, 0x90, 0x02, 0x19, 0x00, 0x23, 0x80]);\n        } else if (channelCount === 3) {\n          return new Uint8Array([0x00, 0xc8, 0x00, 0x80, 0x20, 0x84, 0x01, 0x26, 0x40, 0x08, 0x64, 0x00, 0x8e]);\n        } else if (channelCount === 4) {\n          return new Uint8Array([0x00, 0xc8, 0x00, 0x80, 0x20, 0x84, 0x01, 0x26, 0x40, 0x08, 0x64, 0x00, 0x80, 0x2c, 0x80, 0x08, 0x02, 0x38]);\n        } else if (channelCount === 5) {\n          return new Uint8Array([0x00, 0xc8, 0x00, 0x80, 0x20, 0x84, 0x01, 0x26, 0x40, 0x08, 0x64, 0x00, 0x82, 0x30, 0x04, 0x99, 0x00, 0x21, 0x90, 0x02, 0x38]);\n        } else if (channelCount === 6) {\n          return new Uint8Array([0x00, 0xc8, 0x00, 0x80, 0x20, 0x84, 0x01, 0x26, 0x40, 0x08, 0x64, 0x00, 0x82, 0x30, 0x04, 0x99, 0x00, 0x21, 0x90, 0x02, 0x00, 0xb2, 0x00, 0x20, 0x08, 0xe0]);\n        }\n      } else {\n        // handle HE-AAC (mp4a.40.5 / mp4a.40.29)\n        if (channelCount === 1) {\n          // ffmpeg -y -f lavfi -i \"aevalsrc=0:d=0.05\" -c:a libfdk_aac -profile:a aac_he -b:a 4k output.aac && hexdump -v -e '16/1 \"0x%x,\" \"\\n\"' -v output.aac\n          return new Uint8Array([0x1, 0x40, 0x22, 0x80, 0xa3, 0x4e, 0xe6, 0x80, 0xba, 0x8, 0x0, 0x0, 0x0, 0x1c, 0x6, 0xf1, 0xc1, 0xa, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5e]);\n        } else if (channelCount === 2) {\n          // ffmpeg -y -f lavfi -i \"aevalsrc=0|0:d=0.05\" -c:a libfdk_aac -profile:a aac_he_v2 -b:a 4k output.aac && hexdump -v -e '16/1 \"0x%x,\" \"\\n\"' -v output.aac\n          return new Uint8Array([0x1, 0x40, 0x22, 0x80, 0xa3, 0x5e, 0xe6, 0x80, 0xba, 0x8, 0x0, 0x0, 0x0, 0x0, 0x95, 0x0, 0x6, 0xf1, 0xa1, 0xa, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5e]);\n        } else if (channelCount === 3) {\n          // ffmpeg -y -f lavfi -i \"aevalsrc=0|0|0:d=0.05\" -c:a libfdk_aac -profile:a aac_he_v2 -b:a 4k output.aac && hexdump -v -e '16/1 \"0x%x,\" \"\\n\"' -v output.aac\n          return new Uint8Array([0x1, 0x40, 0x22, 0x80, 0xa3, 0x5e, 0xe6, 0x80, 0xba, 0x8, 0x0, 0x0, 0x0, 0x0, 0x95, 0x0, 0x6, 0xf1, 0xa1, 0xa, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5e]);\n        }\n      }\n      return null;\n    }\n  }]);\n\n  return AAC;\n}();\n\nexport default AAC;","var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar ADTS = function () {\n  function ADTS() {\n    _classCallCheck(this, ADTS);\n  }\n\n  _createClass(ADTS, null, [{\n    key: \"isHeader\",\n    value: function isHeader(data, offset) {\n      // Look for ADTS header | 1111 1111 | 1111 X00X | where X can be either 0 or 1\n      // Layer bits (position 14 and 15) in header should be always 0 for ADTS\n      // More info https://wiki.multimedia.cx/index.php?title=ADTS\n      if (offset + 1 < data.length && ADTS.isHeaderPattern(data, offset)) {\n        return true;\n      }\n\n      return false;\n    }\n  }, {\n    key: \"getFrameDuration\",\n    value: function getFrameDuration(samplerate) {\n      return 1024 * 90000 / samplerate;\n    }\n  }, {\n    key: \"isHeaderPattern\",\n    value: function isHeaderPattern(data, offset) {\n      return data[offset] === 0xff && (data[offset + 1] & 0xf6) === 0xf0;\n    }\n  }, {\n    key: \"getHeaderLength\",\n    value: function getHeaderLength(data, offset) {\n      return data[offset + 1] & 0x01 ? 7 : 9;\n    }\n  }, {\n    key: \"getFullFrameLength\",\n    value: function getFullFrameLength(data, offset) {\n      return (data[offset + 3] & 0x03) << 11 | data[offset + 4] << 3 | (data[offset + 5] & 0xE0) >>> 5;\n    }\n  }, {\n    key: \"parseFrameHeader\",\n    value: function parseFrameHeader(data, offset, pts, frameIndex, frameDuration) {\n      var headerLength = void 0,\n          frameLength = void 0,\n          stamp = void 0;\n      var length = data.length;\n\n      // The protection skip bit tells us if we have 2 bytes of CRC data at the end of the ADTS header\n      headerLength = ADTS.getHeaderLength(data, offset);\n      // retrieve frame size\n      frameLength = ADTS.getFullFrameLength(data, offset);\n      frameLength -= headerLength;\n\n      if (frameLength > 0 && offset + headerLength + frameLength <= length) {\n        stamp = pts + frameIndex * frameDuration;\n        // logger.log(`AAC frame, offset/length/total/pts:${offset+headerLength}/${frameLength}/${data.byteLength}/${(stamp/90).toFixed(0)}`);\n        return { headerLength: headerLength, frameLength: frameLength, stamp: stamp };\n      }\n\n      return undefined;\n    }\n  }, {\n    key: \"appendFrame\",\n    value: function appendFrame(track, data, offset, pts, frameIndex) {\n      var frameDuration = ADTS.getFrameDuration(track.meta.sampleRate);\n      var header = ADTS.parseFrameHeader(data, offset, pts, frameIndex, frameDuration);\n      if (header) {\n        var stamp = header.stamp;\n        var headerLength = header.headerLength;\n        var frameLength = header.frameLength;\n\n        // logger.log(`AAC frame, offset/length/total/pts:${offset+headerLength}/${frameLength}/${data.byteLength}/${(stamp/90).toFixed(0)}`);\n        var aacSample = {\n          unit: data.subarray(offset + headerLength, offset + headerLength + frameLength),\n          pts: stamp,\n          dts: stamp\n        };\n\n        return { sample: aacSample, length: frameLength + headerLength };\n      }\n\n      return undefined;\n    }\n  }]);\n\n  return ADTS;\n}();\n\nexport default ADTS;","var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Golomb = function () {\n  function Golomb(uint8array) {\n    _classCallCheck(this, Golomb);\n\n    this.TAG = 'Golomb';\n    this._buffer = uint8array;\n    this._bufferIndex = 0;\n    this._totalBytes = uint8array.byteLength;\n    this._totalBits = uint8array.byteLength * 8;\n    this._currentWord = 0;\n    this._currentWordBitsLeft = 0;\n  }\n\n  _createClass(Golomb, [{\n    key: 'destroy',\n    value: function destroy() {\n      this._buffer = null;\n    }\n  }, {\n    key: '_fillCurrentWord',\n    value: function _fillCurrentWord() {\n      var bufferBytesLeft = this._totalBytes - this._bufferIndex;\n      if (bufferBytesLeft <= 0) {\n        // TODO 异常处理\n      }\n\n      var bytesRead = Math.min(4, bufferBytesLeft);\n      var word = new Uint8Array(4);\n      word.set(this._buffer.subarray(this._bufferIndex, this._bufferIndex + bytesRead));\n      this._currentWord = new DataView(word.buffer).getUint32(0);\n\n      this._bufferIndex += bytesRead;\n      this._currentWordBitsLeft = bytesRead * 8;\n    }\n  }, {\n    key: 'readBits',\n    value: function readBits(size) {\n      var bits = Math.min(this._currentWordBitsLeft, size); // :uint\n      var valu = this._currentWord >>> 32 - bits;\n      if (size > 32) {\n        throw new Error('Cannot read more than 32 bits at a time');\n      }\n      this._currentWordBitsLeft -= bits;\n      if (this._currentWordBitsLeft > 0) {\n        this._currentWord <<= bits;\n      } else if (this._totalBytes - this._bufferIndex > 0) {\n        this._fillCurrentWord();\n      }\n\n      bits = size - bits;\n      if (bits > 0 && this._currentWordBitsLeft) {\n        return valu << bits | this.readBits(bits);\n      } else {\n        return valu;\n      }\n    }\n  }, {\n    key: 'readBool',\n    value: function readBool() {\n      return this.readBits(1) === 1;\n    }\n  }, {\n    key: 'readByte',\n    value: function readByte() {\n      return this.readBits(8);\n    }\n  }, {\n    key: '_skipLeadingZero',\n    value: function _skipLeadingZero() {\n      var zeroCount = void 0;\n      for (zeroCount = 0; zeroCount < this._currentWordBitsLeft; zeroCount++) {\n        if ((this._currentWord & 0x80000000 >>> zeroCount) !== 0) {\n          this._currentWord <<= zeroCount;\n          this._currentWordBitsLeft -= zeroCount;\n          return zeroCount;\n        }\n      }\n      this._fillCurrentWord();\n      return zeroCount + this._skipLeadingZero();\n    }\n  }, {\n    key: 'readUEG',\n    value: function readUEG() {\n      // unsigned exponential golomb\n      var leadingZeros = this._skipLeadingZero();\n      return this.readBits(leadingZeros + 1) - 1;\n    }\n  }, {\n    key: 'readSEG',\n    value: function readSEG() {\n      // signed exponential golomb\n      var value = this.readUEG();\n      if (value & 0x01) {\n        return value + 1 >>> 1;\n      } else {\n        return -1 * (value >>> 1);\n      }\n    }\n  }]);\n\n  return Golomb;\n}();\n\nexport default Golomb;","var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nimport Golomb from './golomb';\n\nvar SPSParser = function () {\n  function SPSParser() {\n    _classCallCheck(this, SPSParser);\n  }\n\n  _createClass(SPSParser, null, [{\n    key: '_ebsp2rbsp',\n\n\n    /**\n     * 0x00000300  -> 0x000000\n     * 0x00000301  -> 0x000001\n     * 0x00000302  -> 0x000002\n     * 0x00000303  -> 0x000003\n     */\n    value: function _ebsp2rbsp(uint8array) {\n      var src = uint8array;\n      var srcLength = src.byteLength;\n      var dst = new Uint8Array(srcLength);\n      var dstIdx = 0;\n\n      for (var i = 0; i < srcLength; i++) {\n        if (i >= 2) {\n          if (src[i] === 0x03 && src[i - 1] === 0x00 && src[i - 2] === 0x00) {\n            continue;\n          }\n        }\n        dst[dstIdx] = src[i];\n        dstIdx++;\n      }\n\n      return new Uint8Array(dst.buffer, 0, dstIdx);\n    }\n  }, {\n    key: 'parseSPS',\n    value: function parseSPS(uint8array) {\n      var rbsp = SPSParser._ebsp2rbsp(uint8array);\n      var gb = new Golomb(rbsp);\n\n      gb.readByte();\n      var profileIdc = gb.readByte();\n      gb.readByte();\n      var levelIdc = gb.readByte();\n      gb.readUEG();\n\n      var profile_string = SPSParser.getProfileString(profileIdc);\n      var level_string = SPSParser.getLevelString(levelIdc);\n      var chroma_format_idc = 1;\n      var chroma_format = 420;\n      var chroma_format_table = [0, 420, 422, 444];\n      var bit_depth = 8;\n\n      if (profileIdc === 100 || profileIdc === 110 || profileIdc === 122 || profileIdc === 244 || profileIdc === 44 || profileIdc === 83 || profileIdc === 86 || profileIdc === 118 || profileIdc === 128 || profileIdc === 138 || profileIdc === 144) {\n        chroma_format_idc = gb.readUEG();\n        if (chroma_format_idc === 3) {\n          gb.readBits(1);\n        }\n        if (chroma_format_idc <= 3) {\n          chroma_format = chroma_format_table[chroma_format_idc];\n        }\n\n        bit_depth = gb.readUEG() + 8;\n        gb.readUEG();\n        gb.readBits(1);\n        if (gb.readBool()) {\n          var scaling_list_count = chroma_format_idc !== 3 ? 8 : 12;\n          for (var i = 0; i < scaling_list_count; i++) {\n            if (gb.readBool()) {\n              if (i < 6) {\n                SPSParser._skipScalingList(gb, 16);\n              } else {\n                SPSParser._skipScalingList(gb, 64);\n              }\n            }\n          }\n        }\n      }\n      gb.readUEG();\n      var pic_order_cnt_type = gb.readUEG();\n      if (pic_order_cnt_type === 0) {\n        gb.readUEG();\n      } else if (pic_order_cnt_type === 1) {\n        gb.readBits(1);\n        gb.readSEG();\n        gb.readSEG();\n        var num_ref_frames_in_pic_order_cnt_cycle = gb.readUEG();\n        for (var _i = 0; _i < num_ref_frames_in_pic_order_cnt_cycle; _i++) {\n          gb.readSEG();\n        }\n      }\n      gb.readUEG();\n      gb.readBits(1);\n\n      var pic_width_in_mbs_minus1 = gb.readUEG();\n      var pic_height_in_map_units_minus1 = gb.readUEG();\n\n      var frame_mbs_only_flag = gb.readBits(1);\n      if (frame_mbs_only_flag === 0) {\n        gb.readBits(1);\n      }\n      gb.readBits(1);\n\n      var frame_crop_left_offset = 0;\n      var frame_crop_right_offset = 0;\n      var frame_crop_top_offset = 0;\n      var frame_crop_bottom_offset = 0;\n\n      var frame_cropping_flag = gb.readBool();\n      if (frame_cropping_flag) {\n        frame_crop_left_offset = gb.readUEG();\n        frame_crop_right_offset = gb.readUEG();\n        frame_crop_top_offset = gb.readUEG();\n        frame_crop_bottom_offset = gb.readUEG();\n      }\n\n      var par_width = 1,\n          par_height = 1;\n      var fps = 0,\n          fps_fixed = true,\n          fps_num = 0,\n          fps_den = 0;\n\n      var vui_parameters_present_flag = gb.readBool();\n      if (vui_parameters_present_flag) {\n        if (gb.readBool()) {\n          // aspect_ratio_info_present_flag\n          var aspect_ratio_idc = gb.readByte();\n          var par_w_table = [1, 12, 10, 16, 40, 24, 20, 32, 80, 18, 15, 64, 160, 4, 3, 2];\n          var par_h_table = [1, 11, 11, 11, 33, 11, 11, 11, 33, 11, 11, 33, 99, 3, 2, 1];\n\n          if (aspect_ratio_idc > 0 && aspect_ratio_idc < 16) {\n            par_width = par_w_table[aspect_ratio_idc - 1];\n            par_height = par_h_table[aspect_ratio_idc - 1];\n          } else if (aspect_ratio_idc === 255) {\n            par_width = gb.readByte() << 8 | gb.readByte();\n            par_height = gb.readByte() << 8 | gb.readByte();\n          }\n        }\n\n        if (gb.readBool()) {\n          gb.readBool();\n        }\n        if (gb.readBool()) {\n          gb.readBits(4);\n          if (gb.readBool()) {\n            gb.readBits(24);\n          }\n        }\n        if (gb.readBool()) {\n          gb.readUEG();\n          gb.readUEG();\n        }\n        if (gb.readBool()) {\n          var num_units_in_tick = gb.readBits(32);\n          var time_scale = gb.readBits(32);\n          fps_fixed = gb.readBool();\n\n          fps_num = time_scale;\n          fps_den = num_units_in_tick * 2;\n          fps = fps_num / fps_den;\n        }\n      }\n\n      var parScale = 1;\n      if (par_width !== 1 || par_height !== 1) {\n        parScale = par_width / par_height;\n      }\n\n      var crop_unit_x = 0,\n          crop_unit_y = 0;\n      if (chroma_format_idc === 0) {\n        crop_unit_x = 1;\n        crop_unit_y = 2 - frame_mbs_only_flag;\n      } else {\n        var sub_wc = chroma_format_idc === 3 ? 1 : 2;\n        var sub_hc = chroma_format_idc === 1 ? 2 : 1;\n        crop_unit_x = sub_wc;\n        crop_unit_y = sub_hc * (2 - frame_mbs_only_flag);\n      }\n\n      var codec_width = (pic_width_in_mbs_minus1 + 1) * 16;\n      var codec_height = (2 - frame_mbs_only_flag) * ((pic_height_in_map_units_minus1 + 1) * 16);\n\n      codec_width -= (frame_crop_left_offset + frame_crop_right_offset) * crop_unit_x;\n      codec_height -= (frame_crop_top_offset + frame_crop_bottom_offset) * crop_unit_y;\n\n      var present_width = Math.ceil(codec_width * parScale);\n\n      gb.destroy();\n      gb = null;\n\n      return {\n        profile_string: profile_string,\n        level_string: level_string,\n        bit_depth: bit_depth,\n        chroma_format: chroma_format,\n        chroma_format_string: SPSParser.getChromaFormatString(chroma_format),\n\n        frame_rate: {\n          fixed: fps_fixed,\n          fps: fps,\n          fps_den: fps_den,\n          fps_num: fps_num\n        },\n\n        par_ratio: {\n          width: par_width,\n          height: par_height\n        },\n\n        codec_size: {\n          width: codec_width,\n          height: codec_height\n        },\n\n        present_size: {\n          width: present_width,\n          height: codec_height\n        }\n      };\n    }\n  }, {\n    key: '_skipScalingList',\n    value: function _skipScalingList(gb, count) {\n      var lastScale = 8;\n      var nextScale = 8;\n      var deltaScale = 0;\n      for (var i = 0; i < count; i++) {\n        if (nextScale !== 0) {\n          deltaScale = gb.readSEG();\n          nextScale = (lastScale + deltaScale + 256) % 256;\n        }\n        lastScale = nextScale === 0 ? lastScale : nextScale;\n      }\n    }\n  }, {\n    key: 'getProfileString',\n    value: function getProfileString(profileIdc) {\n      switch (profileIdc) {\n        case 66:\n          return 'Baseline';\n        case 77:\n          return 'Main';\n        case 88:\n          return 'Extended';\n        case 100:\n          return 'High';\n        case 110:\n          return 'High10';\n        case 122:\n          return 'High422';\n        case 244:\n          return 'High444';\n        default:\n          return 'Unknown';\n      }\n    }\n  }, {\n    key: 'getLevelString',\n    value: function getLevelString(levelIdc) {\n      return (levelIdc / 10).toFixed(1);\n    }\n  }, {\n    key: 'getChromaFormatString',\n    value: function getChromaFormatString(chroma) {\n      switch (chroma) {\n        case 420:\n          return '4:2:0';\n        case 422:\n          return '4:2:2';\n        case 444:\n          return '4:4:4';\n        default:\n          return 'Unknown';\n      }\n    }\n  }, {\n    key: 'toVideoMeta',\n    value: function toVideoMeta(spsConfig) {\n      var meta = {};\n      if (spsConfig && spsConfig.codec_size) {\n        meta.codecWidth = spsConfig.codec_size.width;\n        meta.codecHeight = spsConfig.codec_size.height;\n        meta.presentWidth = spsConfig.present_size.width;\n        meta.presentHeight = spsConfig.present_size.height;\n      }\n\n      meta.profile = spsConfig.profile_string;\n      meta.level = spsConfig.level_string;\n      meta.bitDepth = spsConfig.bit_depth;\n      meta.chromaFormat = spsConfig.chroma_format;\n\n      meta.parRatio = {\n        width: spsConfig.par_ratio.width,\n        height: spsConfig.par_ratio.height\n      };\n\n      meta.frameRate = spsConfig.frame_rate;\n\n      var fpsDen = meta.frameRate.fps_den;\n      var fpsNum = meta.frameRate.fps_num;\n      meta.refSampleDuration = Math.floor(meta.timescale * (fpsDen / fpsNum));\n      return meta;\n    }\n  }]);\n\n  return SPSParser;\n}();\n\nexport default SPSParser;","var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar RBSP = function () {\n  function RBSP() {\n    _classCallCheck(this, RBSP);\n  }\n\n  _createClass(RBSP, null, [{\n    key: \"EBSP2RBSP\",\n\n    /**\n     * convert EBSP to RBSP\n     * @param data {Uint8Array}\n     * @returns {Uint8Array}\n     * @constructor\n     */\n    value: function EBSP2RBSP(data) {\n      return data.filter(function (el, idx) {\n        if (idx < 2) {\n          return true;\n        } else {\n          return !(data[idx - 2] === 0 && data[idx - 1] === 0 && el === 3);\n        }\n      });\n    }\n\n    /**\n     * EBSP = SODB + '10000000'\n     * @param data {Uint8Array}\n     * @constructor\n     */\n\n  }, {\n    key: \"EBSP2SODB\",\n    value: function EBSP2SODB(data) {\n      var lastByte = data[data.byteLength - 1];\n      if (lastByte && lastByte === 128) {\n        return data.slice(0, data.byteLength - 1);\n      }\n\n      return data;\n    }\n  }]);\n\n  return RBSP;\n}();\n\nexport default RBSP;","var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nimport RBSP from './rbsp';\n\nvar u8aToString = function u8aToString(data) {\n  var result = '';\n  for (var i = 0; i < data.byteLength; i++) {\n    result += String.fromCharCode(data[i]);\n  }\n  return result;\n};\n\nvar SEIParser = function () {\n  function SEIParser() {\n    _classCallCheck(this, SEIParser);\n  }\n\n  _createClass(SEIParser, null, [{\n    key: '_resolveNalu',\n    value: function _resolveNalu(data) {\n      if (data.length >= 1) {\n        return RBSP.EBSP2SODB(RBSP.EBSP2RBSP(data.slice(1)));\n      }\n      return null;\n    }\n    /**\n     *\n     * @param data {Uint8Array}\n     */\n\n  }, {\n    key: 'parse',\n    value: function parse(data) {\n      var sodb = SEIParser._resolveNalu(data);\n\n      var _SEIParser$switchPayl = SEIParser.switchPayloadType(sodb),\n          payloadType = _SEIParser$switchPayl.payloadType,\n          offset = _SEIParser$switchPayl.offset;\n\n      var content = sodb.slice(offset);\n\n      switch (payloadType) {\n        case 5:\n          return SEIParser.user_data_unregistered(content);\n        default:\n          return {\n            code: payloadType,\n            content: content\n          };\n      }\n    }\n\n    /**\n     *\n     * @param data\n     * @returns {{payloadType: number, offset: number}}\n     */\n\n  }, {\n    key: 'switchPayloadType',\n    value: function switchPayloadType(data) {\n      var dv = new DataView(data.buffer);\n      var payloadType = 0;\n      var offset = 0;\n      while (dv.getUint8(offset) === 255) {\n        offset++;\n        payloadType += 255;\n      }\n      payloadType += dv.getUint8(offset++);\n\n      return {\n        payloadType: payloadType,\n        offset: offset\n      };\n    }\n\n    /**\n     *\n     * @param data {Uint8Array}\n     * @return {{ payloadLength: number, offset: number }}\n     */\n\n  }, {\n    key: 'getPayloadLength',\n    value: function getPayloadLength(data) {\n      var dv = new DataView(data.buffer);\n\n      var payloadLength = 0;\n      var offset = 0;\n      while (dv.getUint8(offset) === 255) {\n        offset++;\n        payloadLength += 255;\n      }\n      payloadLength += dv.getUint8(offset++);\n\n      return {\n        payloadLength: payloadLength,\n        offset: offset\n      };\n    }\n\n    /**\n     * resolve 0x05 user data unregistered\n     * @param data {Uint8Array}\n     */\n    // eslint-disable-next-line camelcase\n\n  }, {\n    key: 'user_data_unregistered',\n    value: function user_data_unregistered(data) {\n      var _SEIParser$getPayload = SEIParser.getPayloadLength(data),\n          payloadLength = _SEIParser$getPayload.payloadLength,\n          offset = _SEIParser$getPayload.offset;\n\n      if (payloadLength < 16) {\n        return {\n          uuid: '',\n          content: null\n        };\n      }\n      var payload = data.slice(offset);\n\n      var uuid = u8aToString(payload.slice(0, 16));\n      var content = u8aToString(payload.slice(16, payloadLength));\n\n      return {\n        code: 5, // for user data unregistered\n        uuid: uuid,\n        content: content\n      };\n    }\n  }]);\n\n  return SEIParser;\n}();\n\nexport default SEIParser;","var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nimport SpsParser from './sps';\nimport SEIParser from './sei';\nimport RBSP from './rbsp';\n\nvar Nalunit = function () {\n  function Nalunit() {\n    _classCallCheck(this, Nalunit);\n  }\n\n  _createClass(Nalunit, null, [{\n    key: 'getNalunits',\n\n\n    // https://en.wikipedia.org/wiki/Network_Abstraction_Layer\n    value: function getNalunits(buffer) {\n      if (buffer.length - buffer.position < 4) {\n        return [];\n      }\n\n      var buf = buffer.dataview;\n      var position = buffer.position;\n      if (buf.getInt32(position) === 1 || buf.getInt16(position) === 0 && buf.getInt8(position + 3) === 1) {\n        return Nalunit.getAnnexbNals(buffer);\n      } else {\n        return Nalunit.getAvccNals(buffer);\n      }\n    }\n  }, {\n    key: 'getAnnexbNals',\n    value: function getAnnexbNals(buffer) {\n      var nals = [];\n      var position = Nalunit.getHeaderPositionAnnexB(buffer);\n      var start = position.pos;\n      var end = start;\n      while (start < buffer.length - 4) {\n        var header = buffer.buffer.slice(start, start + position.headerLength);\n        if (position.pos === buffer.position) {\n          buffer.skip(position.headerLength);\n        }\n        position = Nalunit.getHeaderPositionAnnexB(buffer);\n        end = position.pos;\n        var body = new Uint8Array(buffer.buffer.slice(start + header.byteLength, end));\n        var unit = { header: header, body: body };\n        Nalunit.analyseNal(unit);\n        if (unit.type <= 9 && unit.type !== 0) {\n          nals.push(unit);\n        }\n        buffer.skip(end - buffer.position);\n        start = end;\n      }\n      return nals;\n    }\n  }, {\n    key: 'getAvccNals',\n    value: function getAvccNals(buffer) {\n      // buffer.buffer = RBSP.EBSP2RBSP(new Uint8Array(buffer.buffer)).buffer;\n      // buffer.dataview = new DataView(buffer.buffer)\n      // buffer.dataview.position = 0;\n      var nals = [];\n      while (buffer.position < buffer.length - 4) {\n        var length = buffer.dataview.getInt32(buffer.dataview.position);\n        if (buffer.length - buffer.position >= length) {\n          var header = buffer.buffer.slice(buffer.position, buffer.position + 4);\n          buffer.skip(4);\n          var body = new Uint8Array(buffer.buffer.slice(buffer.position, buffer.position + length));\n          buffer.skip(length);\n          var unit = { header: header, body: body };\n          Nalunit.analyseNal(unit);\n          if (unit.type <= 9 && unit.type !== 0) {\n            nals.push(unit);\n          }\n        } else {\n          break;\n        }\n      }\n      return nals;\n    }\n\n    // * ISO-14496-10 7.3.1\n    // *  forbidden_zero_bit  1bit\n    // *  nal_ref_idc  2bit\n    // *  nal_unit_type 5bit\n\n  }, {\n    key: 'analyseNal',\n    value: function analyseNal(unit) {\n      var type = unit.body[0] & 0x1f;\n      unit.type = type;\n      switch (type) {\n        case 1:\n          // NDR\n          unit.ndr = true;\n          break;\n        case 5:\n          // IDR\n          unit.idr = true;\n          break;\n        case 6:\n          // SEI\n          unit.sei = SEIParser.parse(unit.body);\n          break;\n        case 7:\n          // SPS\n          unit.sps = SpsParser.parseSPS(unit.body);\n          break;\n        case 8:\n          // PPS\n          unit.pps = true;\n          break;\n        case 9:\n          // AUD\n          break;\n        default:\n          break;\n      }\n    }\n  }, {\n    key: 'getHeaderPositionAnnexB',\n    value: function getHeaderPositionAnnexB(buffer) {\n      // seperate\n      var pos = buffer.position;\n      var headerLength = 0;\n      var bufferLen = buffer.length;\n      while (headerLength !== 3 && headerLength !== 4 && pos < bufferLen - 4) {\n        if (buffer.dataview.getInt16(pos) === 0) {\n          if (buffer.dataview.getInt16(pos + 2) === 1) {\n            // 0x000001\n            headerLength = 4;\n          } else if (buffer.dataview.getInt8(pos + 2) === 1) {\n            headerLength = 3;\n          } else {\n            pos++;\n          }\n        } else {\n          pos++;\n        }\n      }\n\n      if (pos === bufferLen - 4) {\n        if (buffer.dataview.getInt16(pos) === 0) {\n          if (buffer.dataview.getInt16(pos + 2) === 1) {\n            // 0x000001\n            headerLength = 4;\n          }\n        } else {\n          pos++;\n          if (buffer.dataview.getInt16(pos) === 0 && buffer.dataview.getInt8(pos) === 1) {\n            // 0x0000001\n            headerLength = 3;\n          } else {\n            pos = bufferLen;\n          }\n        }\n      }\n      return { pos: pos, headerLength: headerLength };\n    }\n\n    // 组装AvcDecoderConfigurationRecord\n    // *  configurationVerison = 1  uint(8)\n    // *  avcProfileIndication      uint(8)\n    // *  profile_compatibility     uint(8)\n    // *  avcLevelIndication        uint(8)\n    // *  reserved   `111111`       bit(6)\n    // *  lengthSizeMinusOne        uint(2)\n    // *  reserved   `111`          bit(3)\n    // *  numOfSPS                  uint(5)\n    // *  for(numOfSPS)\n    // *    spsLength               uint(16)\n    // *    spsNALUnit              spsLength个字节\n    // *  numOfPPS                  uint(8)\n    // *  for(numOfPPS)\n    // *     ppsLength              uint(16)\n    // *     ppsNALUnit             ppsLength个字节\n\n  }, {\n    key: 'getAvcc',\n    value: function getAvcc(sps, pps) {\n      var ret = new Uint8Array(sps.byteLength + pps.byteLength + 11);\n      ret[0] = 0x01;\n      ret[1] = sps[1];\n      ret[2] = sps[2];\n      ret[3] = sps[3];\n      ret[4] = 255;\n      ret[5] = 225; // 11100001\n\n      var offset = 6;\n\n      ret.set(new Uint8Array([sps.byteLength >>> 8 & 0xff, sps.byteLength & 0xff]), offset);\n      offset += 2;\n      ret.set(sps, offset);\n      offset += sps.byteLength;\n\n      ret[offset] = 1;\n      offset++;\n\n      ret.set(new Uint8Array([pps.byteLength >>> 8 & 0xff, pps.byteLength & 0xff]), offset);\n      offset += 2;\n      ret.set(pps, offset);\n      return ret;\n    }\n  }]);\n\n  return Nalunit;\n}();\n\nexport default Nalunit;","import _SpsParser from './sps';\nimport _NalUnit from './nalunit';\nimport _SEIParser from './sei';\nimport _Golomb from './golomb';\nexport var SpsParser = _SpsParser;\nexport var NalUnit = _NalUnit;\nexport var SEIParser = _SEIParser;\nexport var Golomb = _Golomb;","var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Golomb = function () {\n  function Golomb(uint8array) {\n    _classCallCheck(this, Golomb);\n\n    this.TAG = 'Golomb';\n    this._buffer = uint8array;\n    this._bufferIndex = 0;\n    this._totalBytes = uint8array.byteLength;\n    this._totalBits = uint8array.byteLength * 8;\n    this._currentWord = 0;\n    this._currentWordBitsLeft = 0;\n  }\n\n  _createClass(Golomb, [{\n    key: 'destroy',\n    value: function destroy() {\n      this._buffer = null;\n    }\n  }, {\n    key: '_fillCurrentWord',\n    value: function _fillCurrentWord() {\n      var bufferBytesLeft = this._totalBytes - this._bufferIndex;\n      if (bufferBytesLeft <= 0) {\n        // TODO 异常处理\n      }\n\n      var bytesRead = Math.min(4, bufferBytesLeft);\n      var word = new Uint8Array(4);\n      word.set(this._buffer.subarray(this._bufferIndex, this._bufferIndex + bytesRead));\n      this._currentWord = new DataView(word.buffer).getUint32(0);\n\n      this._bufferIndex += bytesRead;\n      this._currentWordBitsLeft = bytesRead * 8;\n    }\n  }, {\n    key: 'readBits',\n    value: function readBits(size) {\n      var bits = Math.min(this._currentWordBitsLeft, size); // :uint\n      var valu = this._currentWord >>> 32 - bits;\n      if (size > 32) {\n        throw new Error('Cannot read more than 32 bits at a time');\n      }\n      this._currentWordBitsLeft -= bits;\n      if (this._currentWordBitsLeft > 0) {\n        this._currentWord <<= bits;\n      } else if (this._totalBytes - this._bufferIndex > 0) {\n        this._fillCurrentWord();\n      }\n\n      bits = size - bits;\n      if (bits > 0 && this._currentWordBitsLeft) {\n        return valu << bits | this.readBits(bits);\n      } else {\n        return valu;\n      }\n    }\n  }, {\n    key: 'readBool',\n    value: function readBool() {\n      return this.readBits(1) === 1;\n    }\n  }, {\n    key: 'readByte',\n    value: function readByte() {\n      return this.readBits(8);\n    }\n  }, {\n    key: '_skipLeadingZero',\n    value: function _skipLeadingZero() {\n      if (this._currentWordBitsLeft === 0) {\n        return 0;\n      }\n      var zeroCount = void 0;\n      for (zeroCount = 0; zeroCount < this._currentWordBitsLeft; zeroCount++) {\n        if ((this._currentWord & 0x80000000 >>> zeroCount) !== 0) {\n          this._currentWord <<= zeroCount;\n          this._currentWordBitsLeft -= zeroCount;\n          return zeroCount;\n        }\n      }\n      this._fillCurrentWord();\n      return zeroCount + this._skipLeadingZero();\n    }\n  }, {\n    key: 'readUEG',\n    value: function readUEG() {\n      // unsigned exponential golomb\n      var leadingZeros = this._skipLeadingZero();\n      return this.readBits(leadingZeros + 1) - 1;\n    }\n  }, {\n    key: 'readSEG',\n    value: function readSEG() {\n      // signed exponential golomb\n      var value = this.readUEG();\n      if (value & 0x01) {\n        return value + 1 >>> 1;\n      } else {\n        return -1 * (value >>> 1);\n      }\n    }\n  }]);\n\n  return Golomb;\n}();\n\nexport default Golomb;","var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nimport Golomb from './golomb';\n\nvar SPSParser = function () {\n  function SPSParser() {\n    _classCallCheck(this, SPSParser);\n  }\n\n  _createClass(SPSParser, null, [{\n    key: '_ebsp2rbsp',\n    value: function _ebsp2rbsp(uint8array) {\n      var src = uint8array;\n      var srcLength = src.byteLength;\n      var dst = new Uint8Array(srcLength);\n      var dstIdx = 0;\n\n      for (var i = 0; i < srcLength; i++) {\n        if (i >= 2) {\n          if (src[i] === 0x03 && src[i - 1] === 0x00 && src[i - 2] === 0x00) {\n            continue;\n          }\n        }\n        dst[dstIdx] = src[i];\n        dstIdx++;\n      }\n\n      return new Uint8Array(dst.buffer, 0, dstIdx);\n    }\n  }, {\n    key: 'parseSPS',\n    value: function parseSPS(uint8array) {\n      var rbsp = SPSParser._ebsp2rbsp(uint8array);\n      var gb = new Golomb(rbsp);\n\n      var vpsId = 0,\n          maxSubLayersMinus1 = 0,\n          tINf = 0,\n          spsId = 0,\n          separate_colour_plane_flag = 0,\n          chromaFormatIdc = 0,\n          width = 0,\n          height = 0,\n          conf_win_left_offset = 0,\n          conf_win_right_offset = 0,\n          conf_win_top_offset = 0,\n          conf_win_bottom_offset = 0,\n          conformanceWindowFlag = 0,\n          bitDepthLumaMinus8 = 0,\n          bitDepthChromaMinus8 = 0,\n          sub_width_c = 0,\n          sub_height_c = 0,\n          profileTierLevel = {};\n\n      gb.readByte(); // NAL header\n      gb.readByte();\n\n      vpsId = gb.readBits(4); // vps_id\n      maxSubLayersMinus1 = gb.readBits(3); // max_sub_layers_minus1\n      tINf = gb.readBits(1); // temporal_id_nesting_flag\n\n      profileTierLevel = SPSParser._readProfileTierLevel(gb, maxSubLayersMinus1);\n\n      spsId = gb.readUEG(); // sps id\n      chromaFormatIdc = gb.readUEG();\n      if (chromaFormatIdc === 3) {\n        separate_colour_plane_flag = gb.readBits(1); // separate_colour_plane_flag\n      }\n\n      width = gb.readUEG(); // pic_width_in_luma_samples\n      height = gb.readUEG(); // pic_height_in_luma_samples\n\n      conformanceWindowFlag = gb.readBits(1);\n      if (conformanceWindowFlag === 1) {\n        conf_win_left_offset = gb.readUEG(); // conf_win_left_offset\n        conf_win_right_offset = gb.readUEG(); // conf_win_right_offset\n        conf_win_top_offset = gb.readUEG(); // conf_win_top_offset\n        conf_win_bottom_offset = gb.readUEG(); // conf_win_bottom_offset\n      }\n\n      bitDepthLumaMinus8 = gb.readUEG(); // bit_depth_luma_minus8\n      bitDepthChromaMinus8 = gb.readUEG(); // bit_depth_chroma_minus8\n\n      if (conformanceWindowFlag === 1) {\n        sub_width_c = (1 === chromaFormatIdc || 2 === chromaFormatIdc) && 0 === separate_colour_plane_flag ? 2 : 1;\n        sub_height_c = 1 === chromaFormatIdc && 0 === separate_colour_plane_flag ? 2 : 1;\n        width -= sub_width_c * conf_win_right_offset + sub_width_c * conf_win_left_offset;\n        height -= sub_height_c * conf_win_bottom_offset + sub_height_c * conf_win_top_offset;\n      }\n\n      gb.destroy();\n      gb = null;\n\n      return { width: width, height: height,\n        general_profile_space: profileTierLevel.general_profile_space,\n        general_tier_flag: profileTierLevel.general_tier_flag,\n        general_profile_idc: profileTierLevel.general_profile_idc,\n        general_level_idc: profileTierLevel.general_level_idc,\n        chromaFormatIdc: chromaFormatIdc,\n        bitDepthLumaMinus8: bitDepthLumaMinus8,\n        bitDepthChromaMinus8: bitDepthChromaMinus8 };\n    }\n\n    // static parseSPS (uint8array) {\n    //   let rbsp = SPSParser._ebsp2rbsp(uint8array)\n    //   let gb = new Golomb(rbsp)\n    //\n    //   gb.readByte()\n    //   let profileIdc = gb.readByte()\n    //   gb.readByte()\n    //   let levelIdc = gb.readByte()\n    //   gb.readUEG()\n    //\n    //   let profile_string = SPSParser.getProfileString(profileIdc)\n    //   let level_string = SPSParser.getLevelString(levelIdc)\n    //   let chroma_format_idc = 1\n    //   let chroma_format = 420\n    //   let chroma_format_table = [0, 420, 422, 444]\n    //   let bit_depth = 8\n    //\n    //   if (profileIdc === 100 || profileIdc === 110 || profileIdc === 122 ||\n    //     profileIdc === 244 || profileIdc === 44 || profileIdc === 83 ||\n    //     profileIdc === 86 || profileIdc === 118 || profileIdc === 128 ||\n    //     profileIdc === 138 || profileIdc === 144) {\n    //     chroma_format_idc = gb.readUEG()\n    //     if (chroma_format_idc === 3) {\n    //       gb.readBits(1)\n    //     }\n    //     if (chroma_format_idc <= 3) {\n    //       chroma_format = chroma_format_table[chroma_format_idc]\n    //     }\n    //\n    //     bit_depth = gb.readUEG() + 8\n    //     gb.readUEG()\n    //     gb.readBits(1)\n    //     if (gb.readBool()) {\n    //       let scaling_list_count = (chroma_format_idc !== 3) ? 8 : 12\n    //       for (let i = 0; i < scaling_list_count; i++) {\n    //         if (gb.readBool()) {\n    //           if (i < 6) {\n    //             SPSParser._skipScalingList(gb, 16)\n    //           } else {\n    //             SPSParser._skipScalingList(gb, 64)\n    //           }\n    //         }\n    //       }\n    //     }\n    //   }\n    //   gb.readUEG()\n    //   let pic_order_cnt_type = gb.readUEG()\n    //   if (pic_order_cnt_type === 0) {\n    //     gb.readUEG()\n    //   } else if (pic_order_cnt_type === 1) {\n    //     gb.readBits(1)\n    //     gb.readSEG()\n    //     gb.readSEG()\n    //     let num_ref_frames_in_pic_order_cnt_cycle = gb.readUEG()\n    //     for (let i = 0; i < num_ref_frames_in_pic_order_cnt_cycle; i++) {\n    //       gb.readSEG()\n    //     }\n    //   }\n    //   gb.readUEG()\n    //   gb.readBits(1)\n    //\n    //   let pic_width_in_mbs_minus1 = gb.readUEG()\n    //   let pic_height_in_map_units_minus1 = gb.readUEG()\n    //\n    //   let frame_mbs_only_flag = gb.readBits(1)\n    //   if (frame_mbs_only_flag === 0) {\n    //     gb.readBits(1)\n    //   }\n    //   gb.readBits(1)\n    //\n    //   let frame_crop_left_offset = 0\n    //   let frame_crop_right_offset = 0\n    //   let frame_crop_top_offset = 0\n    //   let frame_crop_bottom_offset = 0\n    //\n    //   let frame_cropping_flag = gb.readBool()\n    //   if (frame_cropping_flag) {\n    //     frame_crop_left_offset = gb.readUEG()\n    //     frame_crop_right_offset = gb.readUEG()\n    //     frame_crop_top_offset = gb.readUEG()\n    //     frame_crop_bottom_offset = gb.readUEG()\n    //   }\n    //\n    //   let par_width = 1, par_height = 1\n    //   let fps = 0, fps_fixed = true, fps_num = 0, fps_den = 0\n    //\n    //   let vui_parameters_present_flag = gb.readBool()\n    //   if (vui_parameters_present_flag) {\n    //     if (gb.readBool()) { // aspect_ratio_info_present_flag\n    //       let aspect_ratio_idc = gb.readByte()\n    //       let par_w_table = [1, 12, 10, 16, 40, 24, 20, 32, 80, 18, 15, 64, 160, 4, 3, 2]\n    //       let par_h_table = [1, 11, 11, 11, 33, 11, 11, 11, 33, 11, 11, 33, 99, 3, 2, 1]\n    //\n    //       if (aspect_ratio_idc > 0 && aspect_ratio_idc < 16) {\n    //         par_width = par_w_table[aspect_ratio_idc - 1]\n    //         par_height = par_h_table[aspect_ratio_idc - 1]\n    //       } else if (aspect_ratio_idc === 255) {\n    //         par_width = gb.readByte() << 8 | gb.readByte()\n    //         par_height = gb.readByte() << 8 | gb.readByte()\n    //       }\n    //     }\n    //\n    //     if (gb.readBool()) {\n    //       gb.readBool()\n    //     }\n    //     if (gb.readBool()) {\n    //       gb.readBits(4)\n    //       if (gb.readBool()) {\n    //         gb.readBits(24)\n    //       }\n    //     }\n    //     if (gb.readBool()) {\n    //       gb.readUEG()\n    //       gb.readUEG()\n    //     }\n    //     if (gb.readBool()) {\n    //       let num_units_in_tick = gb.readBits(32)\n    //       let time_scale = gb.readBits(32)\n    //       fps_fixed = gb.readBool()\n    //\n    //       fps_num = time_scale\n    //       fps_den = num_units_in_tick * 2\n    //       fps = fps_num / fps_den\n    //     }\n    //   }\n    //\n    //   let parScale = 1\n    //   if (par_width !== 1 || par_height !== 1) {\n    //     parScale = par_width / par_height\n    //   }\n    //\n    //   let crop_unit_x = 0, crop_unit_y = 0\n    //   if (chroma_format_idc === 0) {\n    //     crop_unit_x = 1\n    //     crop_unit_y = 2 - frame_mbs_only_flag\n    //   } else {\n    //     let sub_wc = (chroma_format_idc === 3) ? 1 : 2\n    //     let sub_hc = (chroma_format_idc === 1) ? 2 : 1\n    //     crop_unit_x = sub_wc\n    //     crop_unit_y = sub_hc * (2 - frame_mbs_only_flag)\n    //   }\n    //\n    //   let codec_width = (pic_width_in_mbs_minus1 + 1) * 16\n    //   let codec_height = (2 - frame_mbs_only_flag) * ((pic_height_in_map_units_minus1 + 1) * 16)\n    //\n    //   codec_width -= (frame_crop_left_offset + frame_crop_right_offset) * crop_unit_x\n    //   codec_height -= (frame_crop_top_offset + frame_crop_bottom_offset) * crop_unit_y\n    //\n    //   let present_width = Math.ceil(codec_width * parScale)\n    //\n    //   gb.destroy()\n    //   gb = null\n    //\n    //   return {\n    //     profile_string: profile_string,\n    //     level_string: level_string,\n    //     bit_depth: bit_depth,\n    //     chroma_format: chroma_format,\n    //     chroma_format_string: SPSParser.getChromaFormatString(chroma_format),\n    //\n    //     frame_rate: {\n    //       fixed: fps_fixed,\n    //       fps: fps,\n    //       fps_den: fps_den,\n    //       fps_num: fps_num\n    //     },\n    //\n    //     par_ratio: {\n    //       width: par_width,\n    //       height: par_height\n    //     },\n    //\n    //     codec_size: {\n    //       width: codec_width,\n    //       height: codec_height\n    //     },\n    //\n    //     present_size: {\n    //       width: present_width,\n    //       height: codec_height\n    //     }\n    //   }\n    // }\n\n  }, {\n    key: '_readProfileTierLevel',\n    value: function _readProfileTierLevel(gb, maxSubLayersMinus1) {\n      var general_profile_space = 0;\n      var general_tier_flag = 0;\n      var general_profile_idc = 0;\n      var general_level_idc = 0;\n      general_profile_space = gb.readBits(2) || 0; // profile_space\n      general_tier_flag = gb.readBits(1) || 0; // tierFlag\n      general_profile_idc = gb.readBits(5) || 0; // profileIdc\n\n      gb.readBits(16); // some 32bits\n      gb.readBits(16);\n\n      gb.readBits(1); // progressiveSourceFlag\n      gb.readBits(1); // interlacedSourceFlag\n      gb.readBits(1); // nonPackedConstraintFlag\n      gb.readBits(1); // frameOnlyConstraintFlag\n\n\n      gb.readBits(16); // reserved zero bits\n      gb.readBits(16);\n      gb.readBits(12);\n\n      general_level_idc = gb.readBits(8) || 0; // level_idc\n\n      var subLayerProfilePresentFlag = [];\n      var subLayerLevelPresentFlag = [];\n      for (var j = 0; j < maxSubLayersMinus1; j++) {\n        subLayerProfilePresentFlag[j] = gb.readBits(1);\n        subLayerLevelPresentFlag[j] = gb.readBits(1);\n      }\n\n      if (maxSubLayersMinus1 > 0) {\n        gb.readBits((8 - maxSubLayersMinus1) * 2);\n      }\n\n      for (var i = 0; i < maxSubLayersMinus1; i++) {\n        if (subLayerProfilePresentFlag[i] !== 0) {\n          gb.readBits(2);\n          gb.readBits(1);\n          gb.readBits(5);\n\n          gb.readBits(16);\n          gb.readBits(16);\n\n          gb.readBits(4);\n\n          gb.readBits(16);\n          gb.readBits(16);\n          gb.readBits(12);\n        }\n        if (subLayerLevelPresentFlag[i] !== 0) {\n          gb.readBits(8);\n        }\n      }\n\n      return {\n        general_profile_space: general_profile_space,\n        general_tier_flag: general_tier_flag,\n        general_profile_idc: general_profile_idc,\n        general_level_idc: general_level_idc\n      };\n    }\n  }, {\n    key: '_skipScalingList',\n    value: function _skipScalingList(gb, count) {\n      var lastScale = 8;\n      var nextScale = 8;\n      var deltaScale = 0;\n      for (var i = 0; i < count; i++) {\n        if (nextScale !== 0) {\n          deltaScale = gb.readSEG();\n          nextScale = (lastScale + deltaScale + 256) % 256;\n        }\n        lastScale = nextScale === 0 ? lastScale : nextScale;\n      }\n    }\n  }, {\n    key: 'getProfileString',\n    value: function getProfileString(profileIdc) {\n      switch (profileIdc) {\n        case 66:\n          return 'Baseline';\n        case 77:\n          return 'Main';\n        case 88:\n          return 'Extended';\n        case 100:\n          return 'High';\n        case 110:\n          return 'High10';\n        case 122:\n          return 'High422';\n        case 244:\n          return 'High444';\n        default:\n          return 'Unknown';\n      }\n    }\n  }, {\n    key: 'getLevelString',\n    value: function getLevelString(levelIdc) {\n      return (levelIdc / 10).toFixed(1);\n    }\n  }, {\n    key: 'getChromaFormatString',\n    value: function getChromaFormatString(chroma) {\n      switch (chroma) {\n        case 420:\n          return '4:2:0';\n        case 422:\n          return '4:2:2';\n        case 444:\n          return '4:4:4';\n        default:\n          return 'Unknown';\n      }\n    }\n  }, {\n    key: 'toVideoMeta',\n    value: function toVideoMeta(spsConfig) {\n      var meta = {};\n      if (spsConfig && spsConfig.codec_size) {\n        meta.codecWidth = spsConfig.codec_size.width;\n        meta.codecHeight = spsConfig.codec_size.height;\n        meta.presentWidth = spsConfig.present_size.width;\n        meta.presentHeight = spsConfig.present_size.height;\n      } else if (spsConfig.width && spsConfig.height) {\n        meta.codecWidth = spsConfig.width;\n        meta.codecHeight = spsConfig.height;\n        meta.presentWidth = spsConfig.width;\n        meta.presentHeight = spsConfig.height;\n      }\n\n      meta.profile = spsConfig.profile_string;\n      meta.level = spsConfig.level_string;\n      meta.bitDepth = spsConfig.bit_depth;\n      meta.chromaFormat = spsConfig.chroma_format;\n\n      // meta.parRatio = {\n      //   width: spsConfig.par_ratio.width,\n      //   height: spsConfig.par_ratio.height\n      // }\n\n      // meta.frameRate = spsConfig.frame_rate\n\n      // let fpsDen = meta.frameRate.fps_den\n      // let fpsNum = meta.frameRate.fps_num\n      // meta.refSampleDuration = Math.floor(meta.timescale * (fpsDen / fpsNum))\n      return meta;\n    }\n  }]);\n\n  return SPSParser;\n}();\n\nexport default SPSParser;","var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar RBSP = function () {\n  function RBSP() {\n    _classCallCheck(this, RBSP);\n  }\n\n  _createClass(RBSP, null, [{\n    key: \"EBSP2RBSP\",\n\n    /**\n     * convert EBSP to RBSP\n     * @param data {Uint8Array}\n     * @returns {Uint8Array}\n     * @constructor\n     */\n    value: function EBSP2RBSP(data) {\n      return data.filter(function (el, idx) {\n        if (idx < 2) {\n          return true;\n        } else {\n          return !(data[idx - 2] === 0 && data[idx - 1] === 0 && el === 3);\n        }\n      });\n    }\n\n    /**\n     * @param data {Uint8Array}\n     * @constructor\n     */\n\n  }, {\n    key: \"EBSP2SODB\",\n    value: function EBSP2SODB(data) {\n      var lastByte = data[data.byteLength - 1];\n      if (lastByte && lastByte === 128) {\n        return data.slice(0, data.byteLength - 1);\n      }\n\n      return data;\n    }\n  }]);\n\n  return RBSP;\n}();\n\nexport default RBSP;","var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nimport RBSP from './rbsp';\n\nvar u8aToString = function u8aToString(data) {\n  var result = '';\n  for (var i = 0; i < data.byteLength; i++) {\n    result += String.fromCharCode(data[i]);\n  }\n  return result;\n};\n\nvar SEIParser = function () {\n  function SEIParser() {\n    _classCallCheck(this, SEIParser);\n  }\n\n  _createClass(SEIParser, null, [{\n    key: '_resolveNalu',\n    value: function _resolveNalu(data) {\n      if (data.length >= 1) {\n        return RBSP.EBSP2SODB(RBSP.EBSP2RBSP(data.slice(1)));\n      }\n      return null;\n    }\n    /**\n     *\n     * @param data {Uint8Array}\n     */\n\n  }, {\n    key: 'parse',\n    value: function parse(data) {\n      var sodb = SEIParser._resolveNalu(data);\n\n      var _SEIParser$switchPayl = SEIParser.switchPayloadType(sodb),\n          payloadType = _SEIParser$switchPayl.payloadType,\n          offset = _SEIParser$switchPayl.offset;\n\n      var content = sodb.slice(offset);\n\n      switch (payloadType) {\n        case 5:\n          return SEIParser.user_data_unregistered(content);\n        default:\n          return {\n            code: payloadType,\n            content: content\n          };\n      }\n    }\n\n    /**\n     *\n     * @param data\n     * @returns {{payloadType: number, offset: number}}\n     */\n\n  }, {\n    key: 'switchPayloadType',\n    value: function switchPayloadType(data) {\n      var dv = new DataView(data.buffer);\n      var payloadType = 0;\n      var offset = 0;\n      while (dv.getUint8(offset) === 255) {\n        offset++;\n        payloadType += 255;\n      }\n      payloadType += dv.getUint8(offset++);\n\n      return {\n        payloadType: payloadType,\n        offset: offset\n      };\n    }\n\n    /**\n     *\n     * @param data {Uint8Array}\n     * @return {{ payloadLength: number, offset: number }}\n     */\n\n  }, {\n    key: 'getPayloadLength',\n    value: function getPayloadLength(data) {\n      var dv = new DataView(data.buffer);\n\n      var payloadLength = 0;\n      var offset = 0;\n      while (dv.getUint8(offset) === 255) {\n        offset++;\n        payloadLength += 255;\n      }\n      payloadLength += dv.getUint8(offset++);\n\n      return {\n        payloadLength: payloadLength,\n        offset: offset\n      };\n    }\n\n    /**\n     * resolve 0x05 user data unregistered\n     * @param data {Uint8Array}\n     */\n    // eslint-disable-next-line camelcase\n\n  }, {\n    key: 'user_data_unregistered',\n    value: function user_data_unregistered(data) {\n      var _SEIParser$getPayload = SEIParser.getPayloadLength(data),\n          payloadLength = _SEIParser$getPayload.payloadLength,\n          offset = _SEIParser$getPayload.offset;\n\n      if (payloadLength < 16) {\n        return {\n          uuid: '',\n          content: null\n        };\n      }\n      var payload = data.slice(offset);\n\n      var uuid = u8aToString(payload.slice(0, 16));\n      var content = u8aToString(payload.slice(16, payloadLength));\n\n      return {\n        code: 5, // for user data unregistered\n        uuid: uuid,\n        content: content\n      };\n    }\n  }]);\n\n  return SEIParser;\n}();\n\nexport default SEIParser;","var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nimport SpsParser from './sps';\nimport SEIParser from './sei';\n\nvar Nalunit = function () {\n  function Nalunit() {\n    _classCallCheck(this, Nalunit);\n  }\n\n  _createClass(Nalunit, null, [{\n    key: 'getNalunits',\n    value: function getNalunits(buffer) {\n      if (buffer.length - buffer.position < 4) {\n        return [];\n      }\n\n      var buf = buffer.dataview;\n      var position = buffer.position;\n      // console.log('getNalunits')\n      // console.log('buf: ', buf)\n      // console.log(buf.getInt8(position))\n      // console.log(buf.getInt8(position+1))\n      // console.log(buf.getInt8(position+2))\n      // console.log(buf.getInt8(position+3))\n      if (buf.getInt32(position) === 1 || buf.getInt16(position) === 0 && buf.getInt8(position + 2) === 1) {\n        return Nalunit.getAnnexbNals(buffer);\n      } else {\n        return Nalunit.getHvccNals(buffer);\n      }\n    }\n  }, {\n    key: 'getAnnexbNals',\n    value: function getAnnexbNals(buffer) {\n      // console.log('getAnnexbNals')\n      // console.log('buffer: ', buffer)\n      var nals = [];\n      var position = Nalunit.getHeaderPositionAnnexB(buffer);\n      var start = position.pos;\n      var end = start;\n      while (start < buffer.length - 4) {\n        var header = buffer.buffer.slice(start, start + position.headerLength);\n        if (position.pos === buffer.position) {\n          buffer.skip(position.headerLength);\n        }\n        position = Nalunit.getHeaderPositionAnnexB(buffer);\n        end = position.pos;\n        var body = new Uint8Array(buffer.buffer.slice(start + header.byteLength, end));\n        var unit = { header: header, body: body };\n        Nalunit.analyseNal(unit);\n        if (unit.type <= 40) {\n          nals.push(unit);\n        }\n        buffer.skip(end - buffer.position);\n        start = end;\n      }\n      return nals;\n    }\n\n    // |四字节 nalSize| nalUnit |\n\n  }, {\n    key: 'getHvccNals',\n    value: function getHvccNals(buffer) {\n      // console.log('getHvccNals')\n      var nals = [];\n      while (buffer.position < buffer.length - 4) {\n        // console.log('buffer')\n        // console.log(buffer)\n        // console.log(buffer.position)\n        // console.log(buffer.length)\n        // console.log(buffer.dataview)\n        // let length = buffer.dataview.getInt32();\n        var length = buffer.dataview.getInt32(buffer.dataview.position);\n        if (buffer.length - buffer.position >= length) {\n          var header = buffer.buffer.slice(buffer.position, buffer.position + 4);\n          buffer.skip(4);\n          var body = new Uint8Array(buffer.buffer.slice(buffer.position, buffer.position + length));\n          buffer.skip(length);\n          var unit = { header: header, body: body };\n          try {\n            Nalunit.analyseNal(unit);\n          } catch (e) {\n            continue;\n          }\n          if (unit.type <= 40) {\n            nals.push(unit);\n          }\n        } else {\n          break;\n        }\n      }\n      return nals;\n    }\n  }, {\n    key: 'analyseNal',\n    value: function analyseNal(unit) {\n      // console.log('analyseNal')\n      // console.log('unit: ', unit)\n      // console.log(unit.body[0] >>> 1)\n      var type = unit.body[0] >>> 1 & 0x3f;\n      // console.log('type: ', type)\n      unit.type = type;\n      switch (type) {\n        case 0:\n          // SLICE_TRAIL_N\n          unit.slice_trail_n = true;\n          break;\n        case 1:\n          // SLICE_TRAIL_R\n          unit.slice_trail_r = true;\n          unit.key = true;\n          break;\n        case 2:\n          // SLICE_TSA_N\n          unit.slice_tsa_n = true;\n          break;\n        case 3:\n          // SLICE_TSA_R\n          unit.slice_tsa_r = true;\n          unit.key = true;\n          break;\n        case 4:\n          // SLICE_STSA_N\n          unit.slice_stsa_n = true;\n          break;\n        case 5:\n          // SLICE_STSA_R\n          unit.slice_stsa_r = true;\n          unit.key = true;\n          break;\n        case 6:\n          // SLICE_RADL_N\n          unit.slice_radl_n = true;\n          break;\n        case 7:\n          // SLICE_RADL_R\n          unit.slice_radl_r = true;\n          unit.key = true;\n          break;\n        case 8:\n          // SLICE_RASL_N\n          unit.slice_rasl_n = true;\n          break;\n        case 9:\n          // SLICE_RASL_R\n          unit.slice_rasl_r = true;\n          unit.key = true;\n          break;\n        case 16:\n          // SLICE_BLA_W_LP\n          unit.slice_bla_w_lp = true;\n          break;\n        case 17:\n          // SLICE_BLA_W_RADL\n          unit.slice_bla_w_radl = true;\n          break;\n        case 18:\n          // SLICE_BLA_N_LP\n          unit.slice_bla_n_lp = true;\n          break;\n        case 19:\n          // SLICE_IDR_W_RADL\n          unit.slice_idl_w_radl = true;\n          unit.key = true;\n          break;\n        case 20:\n          // SLICE_IDR_N_LP\n          unit.slice_idr_n_lp = true;\n          unit.key = true;\n          break;\n        case 21:\n          // SLICE_CRA_NUT\n          unit.slice_cra_nut = true;\n          unit.key = true;\n          break;\n        case 32:\n          // VPS\n          unit.vps = true;\n          break;\n        case 33:\n          // SPS\n          unit.sps = SpsParser.parseSPS(unit.body);\n          break;\n        case 34:\n          // PPS\n          unit.pps = true;\n          break;\n        case 35:\n          // AUD\n          break;\n        case 36:\n          // EOS\n          unit.aud = true;\n          break;\n        case 37:\n          // EOB\n          unit.eob = true;\n          break;\n        case 38:\n          // FD\n          unit.fd = true;\n          break;\n        case 39:\n          // PREFIX_SEI\n          // unit.prefix_sei = true;\n          unit.sei = SEIParser.parse(unit.body.slice(1));\n          break;\n        case 40:\n          // SUFFIX_SEI\n          unit.sei = SEIParser.parse(unit.body.slice(1));\n          break;\n        default:\n          break;\n        // case 1:\n        //   // NDR\n        //   unit.ndr = true;\n        //   break;\n        // case 5:\n        //   // IDR\n        //   unit.idr = true;\n        //   break;\n        // case 6:\n        //   // SEI\n        //   break;\n        // case 7:\n        //   // SPS\n        //   unit.sps = SpsParser.parseSPS(unit.body);\n        //   break;\n        // case 8:\n        //   // PPS\n        //   unit.pps = true;\n        //   break;\n        // case 9:\n        //   // AUD\n        //   break;\n        // default:\n        //   break;\n      }\n    }\n  }, {\n    key: 'getHeaderPositionAnnexB',\n    value: function getHeaderPositionAnnexB(buffer) {\n      // seperate\n      var pos = buffer.position;\n      var headerLength = 0;\n      var bufferLen = buffer.length;\n      while (headerLength !== 3 && headerLength !== 4 && pos < bufferLen - 4) {\n        if (buffer.dataview.getInt16(pos) === 0) {\n          if (buffer.dataview.getInt16(pos + 2) === 1) {\n            // 0x00000001\n            headerLength = 4;\n          } else if (buffer.dataview.getInt8(pos + 2) === 1) {\n            headerLength = 3;\n          } else {\n            pos++;\n          }\n        } else {\n          pos++;\n        }\n      }\n\n      if (pos === bufferLen - 4) {\n        if (buffer.dataview.getInt16(pos) === 0) {\n          if (buffer.dataview.getInt16(pos + 2) === 1) {\n            // 0x00000001\n            headerLength = 4;\n          }\n        } else {\n          pos++;\n          if (buffer.dataview.getInt16(pos) === 0 && buffer.dataview.getInt8(pos) === 1) {\n            // 0x000001\n            headerLength = 3;\n          } else {\n            pos = bufferLen;\n          }\n        }\n      }\n      return { pos: pos, headerLength: headerLength };\n    }\n\n    // static getAvcc (sps, pps) {\n    //   let ret = new Uint8Array(sps.byteLength + pps.byteLength + 11);\n    //   ret[0] = 0x01;\n    //   ret[1] = sps[1];\n    //   ret[2] = sps[2];\n    //   ret[3] = sps[3];\n    //   ret[4] = 255;\n    //   ret[5] = 225;\n    //\n    //   let offset = 6;\n    //\n    //   ret.set(new Uint8Array([(sps.byteLength >>> 8) & 0xff, sps.byteLength & 0xff]), offset);\n    //   offset += 2;\n    //   ret.set(sps, offset);\n    //   offset += sps.byteLength;\n    //\n    //   ret[offset] = 1;\n    //   offset++;\n    //\n    //   ret.set(new Uint8Array([(pps.byteLength >>> 8) & 0xff, pps.byteLength & 0xff]), offset);\n    //   offset += 2;\n    //   ret.set(pps, offset);\n    //   return ret;\n    // }\n\n  }]);\n\n  return Nalunit;\n}();\n\nexport default Nalunit;","TimeRanges.prototype.dump = function () {\n    var len = this.length;\n    var ret = '';\n\n    for (var i = 0; i < len; i++) {\n        ret += this.start(i) + '~' + this.end(i) + ' ';\n    };\n    console.log(ret);\n};","export default (function (fn, wait) {\n  var lastTime = Date.now();\n  var timer = null;\n  var isFirstTime = true;\n\n  return function () {\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    var now = Date.now();\n    if (isFirstTime) {\n      lastTime = Date.now();\n      isFirstTime = false;\n      fn.apply(undefined, args);\n    }\n    if (now - lastTime > wait) {\n      lastTime = now;\n      fn.apply(undefined, args);\n    } else {\n      if (timer) {\n        window.clearTimeout(timer);\n      }\n      timer = setTimeout(function () {\n        fn.apply(undefined, args);\n      }, wait);\n    }\n  };\n});","var fixedFloat = function fixedFloat(num, fixed) {\n  return Number.parseFloat(Number(num).toFixed(fixed));\n};\nexport default {\n  fixedFloat: fixedFloat\n};","import \"./func/buffer-dump\";\nimport _debounce from './func/debounce';\nimport _caculate from './func/caculate';\n\nexport var debounce = _debounce;\nexport var caculate = _caculate;","var BROWSER_EVENTS = {\n  VISIBILITY_CHANGE: 'VISIBILITY_CHANGE'\n};\nvar PLAYER_EVENTS = {\n  SEEK: 'SEEK'\n};\n\nvar LOADER_EVENTS = {\n  LADER_START: 'LOADER_START',\n  LOADER_DATALOADED: 'LOADER_DATALOADED',\n  LOADER_COMPLETE: 'LOADER_COMPLETE',\n  LOADER_RESPONSE_HEADERS: 'LOADER_RESPONSE_HEADERS',\n  LOADER_ERROR: 'LOADER_ERROR'\n};\n\nvar DEMUX_EVENTS = {\n  DEMUX_START: 'DEMUX_START',\n  DEMUX_COMPLETE: 'DEMUX_COMPLETE',\n  DEMUX_ERROR: 'DEMUX_ERROR',\n  METADATA_PARSED: 'METADATA_PARSED',\n  SEI_PARSED: 'SEI_PARSED',\n  VIDEO_METADATA_CHANGE: 'VIDEO_METADATA_CHANGE',\n  AUDIO_METADATA_CHANGE: 'AUDIO_METADATA_CHANGE',\n  MEDIA_INFO: 'MEDIA_INFO'\n};\n\nvar REMUX_EVENTS = {\n  REMUX_METADATA: 'REMUX_METADATA',\n  REMUX_MEDIA: 'REMUX_MEDIA',\n  MEDIA_SEGMENT: 'MEDIA_SEGMENT',\n  REMUX_ERROR: 'REMUX_ERROR',\n  INIT_SEGMENT: 'INIT_SEGMENT',\n  DETECT_CHANGE_STREAM: 'DETECT_CHANGE_STREAM',\n  DETECT_CHANGE_STREAM_DISCONTINUE: 'DETECT_CHANGE_STREAM_DISCONTINUE',\n  DETECT_AUDIO_GAP: 'DETECT_AUDIO_GAP',\n  DETECT_AUDIO_OVERLAP: 'DETECT_AUDIO_OVERLAP',\n  RANDOM_ACCESS_POINT: 'RANDOM_ACCESS_POINT'\n};\n\nvar MSE_EVENTS = {\n  SOURCE_UPDATE_END: 'SOURCE_UPDATE_END',\n  MSE_ERROR: 'MSE_ERROR'\n\n  // hls专有events\n};var HLS_EVENTS = {\n  RETRY_TIME_EXCEEDED: 'RETRY_TIME_EXCEEDED'\n};\n\nvar CRYTO_EVENTS = {\n  START_DECRYPT: 'START_DECRYPT',\n  DECRYPTED: 'DECRYPTED'\n};\nvar ALLEVENTS = Object.assign({}, LOADER_EVENTS, DEMUX_EVENTS, REMUX_EVENTS, MSE_EVENTS, HLS_EVENTS, PLAYER_EVENTS, BROWSER_EVENTS);\n\nvar FlvAllowedEvents = [];\nvar HlsAllowedEvents = [];\n\nfor (var key in ALLEVENTS) {\n  if (ALLEVENTS.hasOwnProperty(key)) {\n    FlvAllowedEvents.push(ALLEVENTS[key]);\n  }\n}\n\nfor (var _key in ALLEVENTS) {\n  if (ALLEVENTS.hasOwnProperty(_key)) {\n    HlsAllowedEvents.push(ALLEVENTS[_key]);\n  }\n}\n\nexport default {\n  ALLEVENTS: ALLEVENTS,\n  HLS_EVENTS: HLS_EVENTS,\n  REMUX_EVENTS: REMUX_EVENTS,\n  DEMUX_EVENTS: DEMUX_EVENTS,\n  MSE_EVENTS: MSE_EVENTS,\n  LOADER_EVENTS: LOADER_EVENTS,\n  FlvAllowedEvents: FlvAllowedEvents,\n  HlsAllowedEvents: HlsAllowedEvents,\n  CRYTO_EVENTS: CRYTO_EVENTS,\n  PLAYER_EVENTS: PLAYER_EVENTS,\n  BROWSER_EVENTS: BROWSER_EVENTS\n};","var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Playlist = function () {\n  function Playlist(configs) {\n    _classCallCheck(this, Playlist);\n\n    this._baseURL = '';\n    this._list = {};\n    this._ts = {};\n    this.version = 0;\n    this.sequence = -1;\n    this.targetduration = 0;\n    this.duration = 0;\n    this.fragLength = 0;\n    this._lastget = undefined;\n    this._audoclear = configs.autoclear || false;\n    this.downloadedUrls = [];\n  }\n\n  _createClass(Playlist, [{\n    key: 'push',\n    value: function push(ts, duration, discontinue, id) {\n      if (!this._ts[ts]) {\n        this._ts[ts] = { duration: duration,\n          downloaded: false,\n          downloading: false,\n          start: this.duration,\n          discontinue: !!discontinue,\n          id: id\n        };\n        this._list[this.duration] = ts;\n        this.duration += duration;\n        this.fragLength += 1;\n      }\n    }\n  }, {\n    key: 'deleteFrag',\n    value: function deleteFrag(url) {\n      if (this._ts[url]) {\n        if (this._ts[url].start > this._lastget.time) {\n          this._lastget = {\n            duration: this._ts[url].duration,\n            time: this._ts[url].start,\n            downloaded: false,\n            downloading: false,\n            url: url,\n            id: this._ts[url].id\n          };\n        }\n        delete this._list[this._ts[url].start];\n        delete this._ts[url];\n        this.fragLength -= 1;\n      }\n    }\n  }, {\n    key: 'pushM3U8',\n    value: function pushM3U8(data, deletepre) {\n      // 常规信息替换\n      if (!data) {\n        throw new Error('No m3u8 data received.');\n      }\n      this.version = data.version;\n      this.targetduration = data.targetduration;\n      if (data.encrypt && !this.encrypt) {\n        this.encrypt = data.encrypt;\n      }\n\n      if (!data.sequence) {\n        data.sequence = 0;\n      }\n\n      // 新分片信息\n      if (data.sequence > this.sequence) {\n        this.sequence = data.sequence;\n        var newfraglist = [];\n        for (var i = 0; i < data.frags.length; i++) {\n          var frag = data.frags[i];\n          if (!this._ts[frag.url] && this.downloadedUrls.indexOf(frag.url) < 0) {\n            newfraglist.push(frag.url);\n            this.push(frag.url, frag.duration, frag.discontinue, frag.id);\n          }\n        }\n\n        if (newfraglist.length < 1) {\n          throw new Error('Can not read ts file list.');\n        }\n\n        if (deletepre) {\n          var tslist = this.getTsList();\n          for (var _i = 0; _i < tslist.length; _i++) {\n            if (newfraglist.indexOf(tslist[_i]) < 0) {\n              this.deleteFrag(tslist[_i]);\n            }\n          }\n        }\n      } else {\n        throw new Error('Old m3u8 file received, ' + data.sequence + ' , ' + this.sequence);\n      }\n    }\n  }, {\n    key: 'getTsList',\n    value: function getTsList() {\n      return Object.keys(this._ts);\n    }\n  }, {\n    key: 'downloaded',\n    value: function downloaded(tsname, isloaded) {\n      var ts = this._ts[tsname];\n      if (ts) {\n        ts.downloaded = isloaded;\n      }\n    }\n  }, {\n    key: 'downloading',\n    value: function downloading(tsname, loading) {\n      var ts = this._ts[tsname];\n      if (ts) {\n        ts.downloading = loading;\n      }\n    }\n  }, {\n    key: 'getTsByName',\n    value: function getTsByName(name) {\n      return this._ts[name];\n    }\n  }, {\n    key: 'getTs',\n    value: function getTs(time) {\n      var timelist = Object.keys(this._list);\n      var ts = void 0;\n\n      if (time === undefined) {\n        if (this._lastget) {\n          time = this._lastget.time + this._lastget.duration;\n        } else {\n          time = 0;\n        }\n      }\n\n      if (timelist.length < 1 || time >= this.duration) {\n        return undefined;\n      }\n      timelist = timelist.sort(function (a, b) {\n        return parseFloat(a) - parseFloat(b);\n      });\n      for (var i = 0; i < timelist.length; i++) {\n        if (time >= parseInt(timelist[i])) {\n          var url = this._list[timelist[i]];\n          var downloaded = this._ts[url].downloaded;\n          var downloading = this._ts[url].downloading;\n          ts = {\n            url: url,\n            downloaded: downloaded,\n            downloading: downloading,\n            time: parseInt(timelist[i]),\n            duration: parseInt(this._ts[url].duration),\n            id: this._ts[url].id\n          };\n          if (this.autoclear) {\n            delete this._ts[this._lastget.url];\n            delete this._list[this._lastget.time];\n          }\n          this._lastget = ts;\n        } else {\n          break;\n        }\n      }\n      if (ts) {\n        this.downloadedUrls.push(ts.url);\n      }\n      return ts;\n    }\n  }, {\n    key: 'getLastDownloadedTs',\n    value: function getLastDownloadedTs() {\n      var timelist = Object.keys(this._list);\n      var found = void 0;\n      for (var i = 0; i < timelist.length; i++) {\n        var url = this._list[timelist[i]];\n        var downloaded = this._ts[url].downloaded;\n        var downloading = this._ts[url].downloading;\n        if (downloaded) {\n          found = { url: url, downloaded: downloaded, downloading: downloading, time: parseInt(timelist[i]), duration: parseInt(this._ts[url].duration) };\n        } else {\n          break;\n        }\n      }\n\n      return found;\n    }\n  }, {\n    key: 'clear',\n    value: function clear() {\n      this._baseURL = '';\n      this._list = {};\n      this._ts = {};\n      this.version = 0;\n      this.sequence = -1;\n      this.targetduration = 0;\n      this.duration = 0;\n      this._lastget = undefined;\n    }\n  }, {\n    key: 'clearDownloaded',\n    value: function clearDownloaded() {\n      for (var i = 0, l = Object.keys(this._ts).length; i < l; i++) {\n        var ts = this._ts[Object.keys(this._ts)[i]];\n        ts.downloaded = false;\n        ts.downloading = false;\n      }\n    }\n  }, {\n    key: 'destroy',\n    value: function destroy() {\n      this._baseURL = '';\n      this._list = {};\n      this._ts = {};\n      this.version = 0;\n      this.sequence = -1;\n      this.targetduration = 0;\n      this.duration = 0;\n      this.fragLength = 0;\n      this._lastget = undefined;\n      this._audoclear = false;\n    }\n  }, {\n    key: 'list',\n    get: function get() {\n      return this._list;\n    }\n  }, {\n    key: 'baseURL',\n    set: function set(baseURL) {\n      if (this.baseURL !== baseURL) {\n        this.clear();\n        this._baseURL = baseURL;\n      }\n    },\n    get: function get() {\n      return this._baseURL;\n    }\n  }]);\n\n  return Playlist;\n}();\n\nexport default Playlist;","var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Presource = function Presource() {\n  _classCallCheck(this, Presource);\n\n  this.mimetype = '';\n  this.init = null;\n  this.data = [];\n};\n\nvar PreSource = function () {\n  function PreSource() {\n    _classCallCheck(this, PreSource);\n\n    this.sources = {};\n  }\n\n  _createClass(PreSource, [{\n    key: 'getSource',\n    value: function getSource(source) {\n      return this.sources[source];\n    }\n  }, {\n    key: 'createSource',\n    value: function createSource(name) {\n      this.sources[name] = new Presource();\n      return this.sources[name];\n    }\n  }, {\n    key: 'clear',\n    value: function clear() {\n      this.sources = {};\n    }\n  }, {\n    key: 'destroy',\n    value: function destroy() {\n      this.sources = {};\n    }\n  }]);\n\n  return PreSource;\n}();\n\nexport default PreSource;","var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Stream = function () {\n  function Stream(buffer) {\n    _classCallCheck(this, Stream);\n\n    if (buffer instanceof ArrayBuffer) {\n      this.buffer = buffer;\n      this.dataview = new DataView(buffer);\n      this.dataview.position = 0;\n    } else {\n      throw new Error('data is invalid');\n    }\n  }\n\n  _createClass(Stream, [{\n    key: 'back',\n    value: function back(count) {\n      this.position -= count;\n    }\n  }, {\n    key: 'skip',\n    value: function skip(count) {\n      var loop = Math.floor(count / 4);\n      var last = count % 4;\n      for (var i = 0; i < loop; i++) {\n        Stream.readByte(this.dataview, 4);\n      }\n      if (last > 0) {\n        Stream.readByte(this.dataview, last);\n      }\n    }\n\n    /**\n     * [readByte 从DataView中读取数据]\n     * @param  {DataView} buffer [DataView实例]\n     * @param  {Number} size   [读取字节数]\n     * @return {Number}        [整数]\n     */\n\n  }, {\n    key: 'readUint8',\n    value: function readUint8() {\n      return Stream.readByte(this.dataview, 1);\n    }\n  }, {\n    key: 'readUint16',\n    value: function readUint16() {\n      return Stream.readByte(this.dataview, 2);\n    }\n  }, {\n    key: 'readUint24',\n    value: function readUint24() {\n      return Stream.readByte(this.dataview, 3);\n    }\n  }, {\n    key: 'readUint32',\n    value: function readUint32() {\n      return Stream.readByte(this.dataview, 4);\n    }\n  }, {\n    key: 'readUint64',\n    value: function readUint64() {\n      return Stream.readByte(this.dataview, 8);\n    }\n  }, {\n    key: 'readInt8',\n    value: function readInt8() {\n      return Stream.readByte(this.dataview, 1, true);\n    }\n  }, {\n    key: 'readInt16',\n    value: function readInt16() {\n      return Stream.readByte(this.dataview, 2, true);\n    }\n  }, {\n    key: 'readInt32',\n    value: function readInt32() {\n      return Stream.readByte(this.dataview, 4, true);\n    }\n  }, {\n    key: 'writeUint32',\n    value: function writeUint32(value) {\n      return new Uint8Array([value >>> 24 & 0xff, value >>> 16 & 0xff, value >>> 8 & 0xff, value & 0xff]);\n    }\n  }, {\n    key: 'length',\n    get: function get() {\n      return this.buffer.byteLength;\n    }\n  }, {\n    key: 'position',\n    set: function set(value) {\n      this.dataview.position = value;\n    },\n    get: function get() {\n      return this.dataview.position;\n    }\n  }], [{\n    key: 'readByte',\n    value: function readByte(buffer, size, sign) {\n      var res = void 0;\n      switch (size) {\n        case 1:\n          if (sign) {\n            res = buffer.getInt8(buffer.position);\n          } else {\n            res = buffer.getUint8(buffer.position);\n          }\n          break;\n        case 2:\n          if (sign) {\n            res = buffer.getInt16(buffer.position);\n          } else {\n            res = buffer.getUint16(buffer.position);\n          }\n          break;\n        case 3:\n          if (sign) {\n            throw new Error('not supported for readByte 3');\n          } else {\n            res = buffer.getUint8(buffer.position) << 16;\n            res |= buffer.getUint8(buffer.position + 1) << 8;\n            res |= buffer.getUint8(buffer.position + 2);\n          }\n          break;\n        case 4:\n          if (sign) {\n            res = buffer.getInt32(buffer.position);\n          } else {\n            res = buffer.getUint32(buffer.position);\n          }\n          break;\n        case 8:\n          if (sign) {\n            throw new Error('not supported for readBody 8');\n          } else {\n            res = buffer.getUint32(buffer.position) << 32;\n            res |= buffer.getUint32(buffer.position + 4);\n          }\n          break;\n        default:\n          res = '';\n      }\n      buffer.position += size;\n      return res;\n    }\n  }]);\n\n  return Stream;\n}();\n\nexport default Stream;","var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Track = function () {\n  /**\n   * The constructor.\n   */\n  function Track() {\n    _classCallCheck(this, Track);\n\n    this.id = -1;\n    this.sequenceNumber = 0;\n    this.samples = [];\n    this.droppedSamples = [];\n    this.length = 0;\n  }\n\n  /**\n   * Reset the track.\n   */\n\n\n  _createClass(Track, [{\n    key: 'reset',\n    value: function reset() {\n      this.sequenceNumber = 0;\n      this.samples = [];\n      this.length = 0;\n    }\n    /**\n     * destroy the track.\n     */\n\n  }, {\n    key: 'distroy',\n    value: function distroy() {\n      this.reset();\n      this.id = -1;\n    }\n  }]);\n\n  return Track;\n}();\n\nexport default Track;\n\n\nexport var AudioTrack = function (_Track) {\n  _inherits(AudioTrack, _Track);\n\n  /**\n   * The constructor for audio track.\n   */\n  function AudioTrack() {\n    _classCallCheck(this, AudioTrack);\n\n    var _this = _possibleConstructorReturn(this, (AudioTrack.__proto__ || Object.getPrototypeOf(AudioTrack)).call(this));\n\n    _this.TAG = 'AudioTrack';\n    _this.type = 'audio';\n    return _this;\n  }\n\n  return AudioTrack;\n}(Track);\n\nexport var VideoTrack = function (_Track2) {\n  _inherits(VideoTrack, _Track2);\n\n  /**\n   * The constructor for video track.\n   */\n  function VideoTrack() {\n    _classCallCheck(this, VideoTrack);\n\n    var _this2 = _possibleConstructorReturn(this, (VideoTrack.__proto__ || Object.getPrototypeOf(VideoTrack)).call(this));\n\n    _this2.TAG = 'VideoTrack';\n    _this2.type = 'video';\n    _this2.dropped = 0;\n    return _this2;\n  }\n  /**\n   * reset the video track.\n   */\n\n\n  _createClass(VideoTrack, [{\n    key: 'reset',\n    value: function reset() {\n      this.sequenceNumber = 0;\n      this.samples = [];\n      this.length = 0;\n      this.dropped = 0;\n    }\n  }]);\n\n  return VideoTrack;\n}(Track);\n\nexport var Tracks = function () {\n  function Tracks() {\n    _classCallCheck(this, Tracks);\n\n    this.audioTrack = null;\n    this.videoTrack = null;\n  }\n\n  _createClass(Tracks, [{\n    key: 'destroy',\n    value: function destroy() {\n      this.audioTrack = null;\n      this.videoTrack = null;\n    }\n  }]);\n\n  return Tracks;\n}();","var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar XgBuffer = function () {\n  /**\n   * A buffer to store loaded data.\n   *\n   * @class LoaderBuffer\n   * @param {number} length - Optional the buffer size\n   */\n  function XgBuffer(length) {\n    _classCallCheck(this, XgBuffer);\n\n    this.length = length || 0;\n    this.historyLen = length || 0;\n    this.array = [];\n    this.offset = 0;\n  }\n\n  /**\n   * The function to push data.\n   *\n   * @param {Uint8Array} data - The data to push into the buffer\n   */\n\n\n  _createClass(XgBuffer, [{\n    key: \"push\",\n    value: function push(data) {\n      this.array.push(data);\n      this.length += data.byteLength;\n      this.historyLen += data.byteLength;\n    }\n\n    /**\n     * The function to shift data.\n     *\n     * @param {number} length - The size of shift.\n     */\n\n  }, {\n    key: \"shift\",\n    value: function shift(length) {\n      if (this.array.length < 1) {\n        return new Uint8Array(0);\n      }\n\n      if (length === undefined) {\n        return this._shiftBuffer();\n      }\n      if (this.offset + length === this.array[0].length) {\n        var _ret = this.array[0].slice(this.offset, this.offset + length);\n        this.offset = 0;\n        this.array.shift();\n        this.length -= length;\n        return _ret;\n      }\n\n      if (this.offset + length < this.array[0].length) {\n        var _ret2 = this.array[0].slice(this.offset, this.offset + length);\n        this.offset += length;\n        this.length -= length;\n        return _ret2;\n      }\n\n      var ret = new Uint8Array(length);\n      var tmpoff = 0;\n      while (this.array.length > 0 && length > 0) {\n        if (this.offset + length < this.array[0].length) {\n          var tmp = this.array[0].slice(this.offset, this.offset + length);\n          ret.set(tmp, tmpoff);\n          this.offset += length;\n          this.length -= length;\n          length = 0;\n          break;\n        } else {\n          // console.log('mark1')\n          var templength = this.array[0].length - this.offset;\n          ret.set(this.array[0].slice(this.offset, this.array[0].length), tmpoff);\n          this.array.shift();\n          this.offset = 0;\n          tmpoff += templength;\n          this.length -= templength;\n          length -= templength;\n        }\n      }\n      return ret;\n    }\n\n    /**\n     * Function to clear the buffer.\n     */\n\n  }, {\n    key: \"clear\",\n    value: function clear() {\n      this.array = [];\n      this.length = 0;\n      this.offset = 0;\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      this.clear();\n      this.historyLen = 0;\n    }\n\n    /**\n     * Function to shift one unit8Array.\n     */\n\n  }, {\n    key: \"_shiftBuffer\",\n    value: function _shiftBuffer() {\n      this.length -= this.array[0].length;\n      this.offset = 0;\n      return this.array.shift();\n    }\n\n    /**\n     * Convert uint8 data to number.\n     *\n     * @param {number} start - the start postion.\n     * @param {number} length - the length of data.\n     */\n\n  }, {\n    key: \"toInt\",\n    value: function toInt(start, length) {\n      var retInt = 0;\n      var i = this.offset + start;\n      while (i < this.offset + length + start) {\n        if (i < this.array[0].length) {\n          retInt = retInt * 256 + this.array[0][i];\n        } else if (this.array[1]) {\n          retInt = retInt * 256 + this.array[1][i - this.array[0].length];\n        }\n\n        i++;\n      }\n      return retInt;\n    }\n  }]);\n\n  return XgBuffer;\n}();\n\nexport default XgBuffer;","var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nexport var AudioTrackMeta = function () {\n  function AudioTrackMeta(meta) {\n    _classCallCheck(this, AudioTrackMeta);\n\n    var _default = {\n      sampleRate: 48000,\n      channelCount: 2,\n      codec: 'mp4a.40.2',\n      config: [41, 401, 136, 0],\n      duration: 0,\n      id: 2,\n      refSampleDuration: 21,\n      sampleRateIndex: 3,\n      timescale: 1000,\n      type: 'audio'\n    };\n    if (meta) {\n      return Object.assign({}, _default, meta);\n    }\n    return _default;\n  }\n\n  _createClass(AudioTrackMeta, [{\n    key: 'destroy',\n    value: function destroy() {\n      this.init = null;\n    }\n  }]);\n\n  return AudioTrackMeta;\n}();\n\nexport var VideoTrackMeta = function () {\n  function VideoTrackMeta(meta) {\n    _classCallCheck(this, VideoTrackMeta);\n\n    var _default = {\n      avcc: null,\n      sps: new Uint8Array(0),\n      pps: new Uint8Array(0),\n      chromaFormat: 420,\n      codec: 'avc1.640020',\n      codecHeight: 720,\n      codecWidth: 1280,\n      duration: 0,\n      frameRate: {\n        fixed: true,\n        fps: 25,\n        fps_num: 25000,\n        fps_den: 1000\n      },\n      id: 1,\n      level: '3.2',\n      presentHeight: 720,\n      presentWidth: 1280,\n      profile: 'High',\n      refSampleDuration: 40,\n      parRatio: {\n        height: 1,\n        width: 1\n      },\n      timescale: 1000,\n      type: 'video'\n    };\n\n    if (meta) {\n      return Object.assign({}, _default, meta);\n    }\n    return _default;\n  }\n\n  _createClass(VideoTrackMeta, [{\n    key: 'destroy',\n    value: function destroy() {\n      this.init = null;\n      this.sps = null;\n      this.pps = null;\n    }\n  }]);\n\n  return VideoTrackMeta;\n}();","var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nexport var AudioTrackSample = function () {\n  function AudioTrackSample(info) {\n    _classCallCheck(this, AudioTrackSample);\n\n    var _default = AudioTrackSample.getDefault();\n    if (!info) {\n      return _default;\n    }\n    var sample = Object.assign({}, _default, info);\n\n    return sample;\n  }\n\n  _createClass(AudioTrackSample, null, [{\n    key: \"getDefault\",\n    value: function getDefault() {\n      return {\n        dts: null,\n        pts: null,\n        data: new Uint8Array()\n      };\n    }\n  }]);\n\n  return AudioTrackSample;\n}();\n\nexport var VideoTrackSample = function () {\n  function VideoTrackSample(info) {\n    _classCallCheck(this, VideoTrackSample);\n\n    var _default = VideoTrackSample.getDefault();\n\n    if (!info) {\n      return _default;\n    }\n    var sample = Object.assign({}, _default, info);\n\n    return sample;\n  }\n\n  _createClass(VideoTrackSample, null, [{\n    key: \"getDefault\",\n    value: function getDefault() {\n      return {\n        dts: null,\n        pts: null,\n        isKeyframe: false, // is Random access point\n        originDts: null,\n        data: new Uint8Array()\n      };\n    }\n  }]);\n\n  return VideoTrackSample;\n}();","var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar isObjectFilled = function isObjectFilled(obj) {\n  for (var key in obj) {\n    if (obj.hasOwnProperty(key)) {\n      if (obj[key] === null) {\n        return false;\n      }\n    }\n  }\n  return true;\n};\n\nvar MediaInfo = function () {\n  function MediaInfo() {\n    _classCallCheck(this, MediaInfo);\n\n    this.mimeType = null;\n    this.duration = null;\n\n    this.hasVideo = null;\n    this.video = {\n      codec: null,\n      width: null,\n      height: null,\n      profile: null,\n      level: null,\n      frameRate: {\n        fixed: true,\n        fps: 25,\n        fps_num: 25000,\n        fps_den: 1000\n      },\n      chromaFormat: null,\n      parRatio: {\n        width: 1,\n        height: 1\n      }\n    };\n\n    this.hasAudio = null;\n\n    this.audio = {\n      codec: null,\n      sampleRate: null,\n      sampleRateIndex: null,\n      channelCount: null\n    };\n  }\n\n  _createClass(MediaInfo, [{\n    key: \"isComplete\",\n    value: function isComplete() {\n      return MediaInfo.isBaseInfoReady(this) && MediaInfo.isVideoReady(this) && MediaInfo.isAudioReady(this);\n    }\n  }], [{\n    key: \"isBaseInfoReady\",\n    value: function isBaseInfoReady(mediaInfo) {\n      return isObjectFilled(mediaInfo);\n    }\n  }, {\n    key: \"isVideoReady\",\n    value: function isVideoReady(mediaInfo) {\n      if (!mediaInfo.hasVideo) {\n        return true;\n      }\n\n      return isObjectFilled(mediaInfo.video);\n    }\n  }, {\n    key: \"isAudioReady\",\n    value: function isAudioReady(mediaInfo) {\n      if (!mediaInfo.hasAudio) {\n        return true;\n      }\n\n      return isObjectFilled(mediaInfo.video);\n    }\n  }]);\n\n  return MediaInfo;\n}();\n\nexport default MediaInfo;","import _Playlist from './playlist';\nimport _PreSource from './presource';\nimport _Stream from './stream';\nimport _Tracks, { AudioTrack as _AudioTrack, VideoTrack as _VideoTrack } from './track';\nimport _Buffer from './u8a-buffer';\nimport { AudioTrackMeta as _AudioTrackMeta, VideoTrackMeta as _VideoTrackMeta } from './track-meta';\nimport { AudioTrackSample as _AudioTrackSample, VideoTrackSample as _VideoTrackSample } from './track-sample';\nimport _MediaInfo from './media-info';\n\nexport var Playlist = _Playlist;\nexport var PreSource = _PreSource;\nexport var Stream = _Stream;\nexport var Tracks = _Tracks;\nexport var Buffer = _Buffer;\nexport var AudioTrack = _AudioTrack;\nexport var MediaInfo = _MediaInfo;\nexport var VideoTrack = _VideoTrack;\nexport var AudioTrackMeta = _AudioTrackMeta;\nexport var VideoTrackMeta = _VideoTrackMeta;\nexport var AudioTrackSample = _AudioTrackSample;\nexport var VideoTrackSample = _VideoTrackSample;","'use strict';\n\nvar domain;\n\n// This constructor is used to store event handlers. Instantiating this is\n// faster than explicitly calling `Object.create(null)` to get a \"clean\" empty\n// object (tested with v8 v4.9).\nfunction EventHandlers() {}\nEventHandlers.prototype = Object.create(null);\n\nfunction EventEmitter() {\n  EventEmitter.init.call(this);\n}\nexport default EventEmitter;\nexport {EventEmitter};\n\n// nodejs oddity\n// require('events') === require('events').EventEmitter\nEventEmitter.EventEmitter = EventEmitter\n\nEventEmitter.usingDomains = false;\n\nEventEmitter.prototype.domain = undefined;\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nEventEmitter.defaultMaxListeners = 10;\n\nEventEmitter.init = function() {\n  this.domain = null;\n  if (EventEmitter.usingDomains) {\n    // if there is an active domain, then attach to it.\n    if (domain.active && !(this instanceof domain.Domain)) {\n      this.domain = domain.active;\n    }\n  }\n\n  if (!this._events || this._events === Object.getPrototypeOf(this)._events) {\n    this._events = new EventHandlers();\n    this._eventsCount = 0;\n  }\n\n  this._maxListeners = this._maxListeners || undefined;\n};\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function setMaxListeners(n) {\n  if (typeof n !== 'number' || n < 0 || isNaN(n))\n    throw new TypeError('\"n\" argument must be a positive number');\n  this._maxListeners = n;\n  return this;\n};\n\nfunction $getMaxListeners(that) {\n  if (that._maxListeners === undefined)\n    return EventEmitter.defaultMaxListeners;\n  return that._maxListeners;\n}\n\nEventEmitter.prototype.getMaxListeners = function getMaxListeners() {\n  return $getMaxListeners(this);\n};\n\n// These standalone emit* functions are used to optimize calling of event\n// handlers for fast cases because emit() itself often has a variable number of\n// arguments and can be deoptimized because of that. These functions always have\n// the same number of arguments and thus do not get deoptimized, so the code\n// inside them can execute faster.\nfunction emitNone(handler, isFn, self) {\n  if (isFn)\n    handler.call(self);\n  else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      listeners[i].call(self);\n  }\n}\nfunction emitOne(handler, isFn, self, arg1) {\n  if (isFn)\n    handler.call(self, arg1);\n  else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      listeners[i].call(self, arg1);\n  }\n}\nfunction emitTwo(handler, isFn, self, arg1, arg2) {\n  if (isFn)\n    handler.call(self, arg1, arg2);\n  else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      listeners[i].call(self, arg1, arg2);\n  }\n}\nfunction emitThree(handler, isFn, self, arg1, arg2, arg3) {\n  if (isFn)\n    handler.call(self, arg1, arg2, arg3);\n  else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      listeners[i].call(self, arg1, arg2, arg3);\n  }\n}\n\nfunction emitMany(handler, isFn, self, args) {\n  if (isFn)\n    handler.apply(self, args);\n  else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      listeners[i].apply(self, args);\n  }\n}\n\nEventEmitter.prototype.emit = function emit(type) {\n  var er, handler, len, args, i, events, domain;\n  var needDomainExit = false;\n  var doError = (type === 'error');\n\n  events = this._events;\n  if (events)\n    doError = (doError && events.error == null);\n  else if (!doError)\n    return false;\n\n  domain = this.domain;\n\n  // If there is no 'error' event listener then throw.\n  if (doError) {\n    er = arguments[1];\n    if (domain) {\n      if (!er)\n        er = new Error('Uncaught, unspecified \"error\" event');\n      er.domainEmitter = this;\n      er.domain = domain;\n      er.domainThrown = false;\n      domain.emit('error', er);\n    } else if (er instanceof Error) {\n      throw er; // Unhandled 'error' event\n    } else {\n      // At least give some kind of context to the user\n      var err = new Error('Uncaught, unspecified \"error\" event. (' + er + ')');\n      err.context = er;\n      throw err;\n    }\n    return false;\n  }\n\n  handler = events[type];\n\n  if (!handler)\n    return false;\n\n  var isFn = typeof handler === 'function';\n  len = arguments.length;\n  switch (len) {\n    // fast cases\n    case 1:\n      emitNone(handler, isFn, this);\n      break;\n    case 2:\n      emitOne(handler, isFn, this, arguments[1]);\n      break;\n    case 3:\n      emitTwo(handler, isFn, this, arguments[1], arguments[2]);\n      break;\n    case 4:\n      emitThree(handler, isFn, this, arguments[1], arguments[2], arguments[3]);\n      break;\n    // slower\n    default:\n      args = new Array(len - 1);\n      for (i = 1; i < len; i++)\n        args[i - 1] = arguments[i];\n      emitMany(handler, isFn, this, args);\n  }\n\n  if (needDomainExit)\n    domain.exit();\n\n  return true;\n};\n\nfunction _addListener(target, type, listener, prepend) {\n  var m;\n  var events;\n  var existing;\n\n  if (typeof listener !== 'function')\n    throw new TypeError('\"listener\" argument must be a function');\n\n  events = target._events;\n  if (!events) {\n    events = target._events = new EventHandlers();\n    target._eventsCount = 0;\n  } else {\n    // To avoid recursion in the case that type === \"newListener\"! Before\n    // adding it to the listeners, first emit \"newListener\".\n    if (events.newListener) {\n      target.emit('newListener', type,\n                  listener.listener ? listener.listener : listener);\n\n      // Re-assign `events` because a newListener handler could have caused the\n      // this._events to be assigned to a new object\n      events = target._events;\n    }\n    existing = events[type];\n  }\n\n  if (!existing) {\n    // Optimize the case of one listener. Don't need the extra array object.\n    existing = events[type] = listener;\n    ++target._eventsCount;\n  } else {\n    if (typeof existing === 'function') {\n      // Adding the second element, need to change to array.\n      existing = events[type] = prepend ? [listener, existing] :\n                                          [existing, listener];\n    } else {\n      // If we've already got an array, just append.\n      if (prepend) {\n        existing.unshift(listener);\n      } else {\n        existing.push(listener);\n      }\n    }\n\n    // Check for listener leak\n    if (!existing.warned) {\n      m = $getMaxListeners(target);\n      if (m && m > 0 && existing.length > m) {\n        existing.warned = true;\n        var w = new Error('Possible EventEmitter memory leak detected. ' +\n                            existing.length + ' ' + type + ' listeners added. ' +\n                            'Use emitter.setMaxListeners() to increase limit');\n        w.name = 'MaxListenersExceededWarning';\n        w.emitter = target;\n        w.type = type;\n        w.count = existing.length;\n        emitWarning(w);\n      }\n    }\n  }\n\n  return target;\n}\nfunction emitWarning(e) {\n  typeof console.warn === 'function' ? console.warn(e) : console.log(e);\n}\nEventEmitter.prototype.addListener = function addListener(type, listener) {\n  return _addListener(this, type, listener, false);\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.prependListener =\n    function prependListener(type, listener) {\n      return _addListener(this, type, listener, true);\n    };\n\nfunction _onceWrap(target, type, listener) {\n  var fired = false;\n  function g() {\n    target.removeListener(type, g);\n    if (!fired) {\n      fired = true;\n      listener.apply(target, arguments);\n    }\n  }\n  g.listener = listener;\n  return g;\n}\n\nEventEmitter.prototype.once = function once(type, listener) {\n  if (typeof listener !== 'function')\n    throw new TypeError('\"listener\" argument must be a function');\n  this.on(type, _onceWrap(this, type, listener));\n  return this;\n};\n\nEventEmitter.prototype.prependOnceListener =\n    function prependOnceListener(type, listener) {\n      if (typeof listener !== 'function')\n        throw new TypeError('\"listener\" argument must be a function');\n      this.prependListener(type, _onceWrap(this, type, listener));\n      return this;\n    };\n\n// emits a 'removeListener' event iff the listener was removed\nEventEmitter.prototype.removeListener =\n    function removeListener(type, listener) {\n      var list, events, position, i, originalListener;\n\n      if (typeof listener !== 'function')\n        throw new TypeError('\"listener\" argument must be a function');\n\n      events = this._events;\n      if (!events)\n        return this;\n\n      list = events[type];\n      if (!list)\n        return this;\n\n      if (list === listener || (list.listener && list.listener === listener)) {\n        if (--this._eventsCount === 0)\n          this._events = new EventHandlers();\n        else {\n          delete events[type];\n          if (events.removeListener)\n            this.emit('removeListener', type, list.listener || listener);\n        }\n      } else if (typeof list !== 'function') {\n        position = -1;\n\n        for (i = list.length; i-- > 0;) {\n          if (list[i] === listener ||\n              (list[i].listener && list[i].listener === listener)) {\n            originalListener = list[i].listener;\n            position = i;\n            break;\n          }\n        }\n\n        if (position < 0)\n          return this;\n\n        if (list.length === 1) {\n          list[0] = undefined;\n          if (--this._eventsCount === 0) {\n            this._events = new EventHandlers();\n            return this;\n          } else {\n            delete events[type];\n          }\n        } else {\n          spliceOne(list, position);\n        }\n\n        if (events.removeListener)\n          this.emit('removeListener', type, originalListener || listener);\n      }\n\n      return this;\n    };\n\nEventEmitter.prototype.removeAllListeners =\n    function removeAllListeners(type) {\n      var listeners, events;\n\n      events = this._events;\n      if (!events)\n        return this;\n\n      // not listening for removeListener, no need to emit\n      if (!events.removeListener) {\n        if (arguments.length === 0) {\n          this._events = new EventHandlers();\n          this._eventsCount = 0;\n        } else if (events[type]) {\n          if (--this._eventsCount === 0)\n            this._events = new EventHandlers();\n          else\n            delete events[type];\n        }\n        return this;\n      }\n\n      // emit removeListener for all listeners on all events\n      if (arguments.length === 0) {\n        var keys = Object.keys(events);\n        for (var i = 0, key; i < keys.length; ++i) {\n          key = keys[i];\n          if (key === 'removeListener') continue;\n          this.removeAllListeners(key);\n        }\n        this.removeAllListeners('removeListener');\n        this._events = new EventHandlers();\n        this._eventsCount = 0;\n        return this;\n      }\n\n      listeners = events[type];\n\n      if (typeof listeners === 'function') {\n        this.removeListener(type, listeners);\n      } else if (listeners) {\n        // LIFO order\n        do {\n          this.removeListener(type, listeners[listeners.length - 1]);\n        } while (listeners[0]);\n      }\n\n      return this;\n    };\n\nEventEmitter.prototype.listeners = function listeners(type) {\n  var evlistener;\n  var ret;\n  var events = this._events;\n\n  if (!events)\n    ret = [];\n  else {\n    evlistener = events[type];\n    if (!evlistener)\n      ret = [];\n    else if (typeof evlistener === 'function')\n      ret = [evlistener.listener || evlistener];\n    else\n      ret = unwrapListeners(evlistener);\n  }\n\n  return ret;\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  if (typeof emitter.listenerCount === 'function') {\n    return emitter.listenerCount(type);\n  } else {\n    return listenerCount.call(emitter, type);\n  }\n};\n\nEventEmitter.prototype.listenerCount = listenerCount;\nfunction listenerCount(type) {\n  var events = this._events;\n\n  if (events) {\n    var evlistener = events[type];\n\n    if (typeof evlistener === 'function') {\n      return 1;\n    } else if (evlistener) {\n      return evlistener.length;\n    }\n  }\n\n  return 0;\n}\n\nEventEmitter.prototype.eventNames = function eventNames() {\n  return this._eventsCount > 0 ? Reflect.ownKeys(this._events) : [];\n};\n\n// About 1.5x faster than the two-arg version of Array#splice().\nfunction spliceOne(list, index) {\n  for (var i = index, k = i + 1, n = list.length; k < n; i += 1, k += 1)\n    list[i] = list[k];\n  list.pop();\n}\n\nfunction arrayClone(arr, i) {\n  var copy = new Array(i);\n  while (i--)\n    copy[i] = arr[i];\n  return copy;\n}\n\nfunction unwrapListeners(arr) {\n  var ret = new Array(arr.length);\n  for (var i = 0; i < ret.length; ++i) {\n    ret[i] = arr[i].listener || arr[i];\n  }\n  return ret;\n}\n","var _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nimport EVENTS from '../events';\nimport { MediaInfo } from 'xgplayer-helper-models';\nimport { EventEmitter } from 'events';\n\nvar DIRECT_EMIT_FLAG = '__TO__';\n\nvar Context = function () {\n  function Context() {\n    var allowedEvents = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n\n    _classCallCheck(this, Context);\n\n    this._emitter = new EventEmitter();\n    if (!this._emitter.off) {\n      this._emitter.off = this._emitter.removeListener;\n    }\n\n    this.mediaInfo = new MediaInfo();\n    this._instanceMap = {}; // 所有的解码流程实例\n    this._clsMap = {}; // 构造函数的map\n    this._inited = false;\n    this.allowedEvents = allowedEvents;\n    this._hooks = {}; // 注册在事件前/后的钩子，例如 before('DEMUX_COMPLETE')\n  }\n\n  /**\n   * 从上下文中获取解码流程实例，如果没有实例，构造一个\n   * @param tag\n   * @param args\n   * @returns {*}\n   */\n\n\n  _createClass(Context, [{\n    key: 'getInstance',\n    value: function getInstance(tag) {\n      var instance = this._instanceMap[tag];\n      if (instance) {\n        return instance;\n      } else {\n        // throw new Error(`${tag}实例尚未初始化`)\n        return null;\n      }\n    }\n\n    /**\n     * 初始化具体实例\n     * @param tag\n     * @param args\n     */\n\n  }, {\n    key: 'initInstance',\n    value: function initInstance(tag) {\n      for (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        args[_key - 1] = arguments[_key];\n      }\n\n      var a = args[0],\n          b = args[1],\n          c = args[2],\n          d = args[3];\n\n      if (this._clsMap[tag]) {\n        var newInstance = new this._clsMap[tag](a, b, c, d);\n        this._instanceMap[tag] = newInstance;\n        if (newInstance.init) {\n          newInstance.init(); // TODO: lifecircle\n        }\n        return newInstance;\n      } else {\n        throw new Error(tag + '\\u672A\\u5728context\\u4E2D\\u6CE8\\u518C');\n      }\n    }\n\n    /**\n     * 避免大量的initInstance调用，初始化所有的组件\n     * @param config\n     */\n\n  }, {\n    key: 'init',\n    value: function init(config) {\n      if (this._inited) {\n        return;\n      }\n      for (var tag in this._clsMap) {\n        // if not inited, init an instance\n        if (this._clsMap.hasOwnProperty(tag) && !this._instanceMap[tag]) {\n          this.initInstance(tag, config);\n        }\n      }\n      this._inited = true;\n    }\n\n    /**\n     * 注册一个上下文流程，提供安全的事件发送机制\n     * @param tag\n     * @param cls\n     */\n\n  }, {\n    key: 'registry',\n    value: function registry(tag, cls) {\n      var _this2 = this;\n\n      var emitter = this._emitter;\n      var checkMessageName = this._isMessageNameValid.bind(this);\n      var self = this;\n      var enhanced = function (_cls) {\n        _inherits(enhanced, _cls);\n\n        function enhanced(a, b, c) {\n          _classCallCheck(this, enhanced);\n\n          var _this = _possibleConstructorReturn(this, (enhanced.__proto__ || Object.getPrototypeOf(enhanced)).call(this, a, b, c));\n\n          _this.listeners = {};\n          _this.onceListeners = {};\n          _this.TAG = tag;\n          _this._context = self;\n          return _this;\n        }\n\n        _createClass(enhanced, [{\n          key: 'on',\n          value: function on(messageName, callback) {\n            checkMessageName(messageName);\n\n            if (this.listeners[messageName]) {\n              this.listeners[messageName].push(callback);\n            } else {\n              this.listeners[messageName] = [callback];\n            }\n\n            emitter.on('' + messageName + DIRECT_EMIT_FLAG + tag, callback); // 建立定向通信监听\n            return emitter.on(messageName, callback);\n          }\n\n          /**\n           * 在某个事件触发前执行\n           * @param messageName\n           * @param callback\n           */\n\n        }, {\n          key: 'before',\n          value: function before(messageName, callback) {\n            checkMessageName(messageName);\n            if (self._hooks[messageName]) {\n              self._hooks[messageName].push(callback);\n            } else {\n              self._hooks[messageName] = [callback];\n            }\n          }\n        }, {\n          key: 'once',\n          value: function once(messageName, callback) {\n            checkMessageName(messageName);\n\n            if (this.onceListeners[messageName]) {\n              this.onceListeners[messageName].push(callback);\n            } else {\n              this.onceListeners[messageName] = [callback];\n            }\n\n            emitter.once('' + messageName + DIRECT_EMIT_FLAG + tag, callback);\n            return emitter.once(messageName, callback);\n          }\n        }, {\n          key: 'emit',\n          value: function emit(messageName) {\n            checkMessageName(messageName);\n            // console.log('emit ', messageName);\n\n            var beforeList = self._hooks ? self._hooks[messageName] : null;\n\n            if (beforeList) {\n              for (var i = 0, len = beforeList.length; i < len; i++) {\n                var callback = beforeList[i];\n                callback();\n              }\n            }\n\n            for (var _len2 = arguments.length, args = Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n              args[_key2 - 1] = arguments[_key2];\n            }\n\n            return emitter.emit.apply(emitter, [messageName].concat(args));\n          }\n\n          /**\n           * 定向发送给某个组件单例的消息\n           * @param messageName\n           * @param args\n           */\n\n        }, {\n          key: 'emitTo',\n          value: function emitTo(tag, messageName) {\n            checkMessageName(messageName);\n\n            for (var _len3 = arguments.length, args = Array(_len3 > 2 ? _len3 - 2 : 0), _key3 = 2; _key3 < _len3; _key3++) {\n              args[_key3 - 2] = arguments[_key3];\n            }\n\n            return emitter.emit.apply(emitter, ['' + messageName + DIRECT_EMIT_FLAG + tag].concat(args));\n          }\n        }, {\n          key: 'off',\n          value: function off(messageName, callback) {\n            checkMessageName(messageName);\n            return emitter.off(messageName, callback);\n          }\n        }, {\n          key: 'removeListeners',\n          value: function removeListeners() {\n            var hasOwn = Object.prototype.hasOwnProperty.bind(this.listeners);\n\n            for (var messageName in this.listeners) {\n              if (hasOwn(messageName)) {\n                var callbacks = this.listeners[messageName] || [];\n                for (var i = 0; i < callbacks.length; i++) {\n                  var callback = callbacks[i];\n                  emitter.off(messageName, callback);\n                  emitter.off('' + messageName + DIRECT_EMIT_FLAG + tag, callback);\n                }\n              }\n            }\n\n            for (var _messageName in this.onceListeners) {\n              if (hasOwn(_messageName)) {\n                var _callbacks = this.onceListeners[_messageName] || [];\n                for (var _i = 0; _i < _callbacks.length; _i++) {\n                  var _callback = _callbacks[_i];\n                  emitter.off(_messageName, _callback);\n                  emitter.off('' + _messageName + DIRECT_EMIT_FLAG + tag, _callback);\n                }\n              }\n            }\n          }\n\n          /**\n           * 在组件销毁时，默认将它注册的事件全部卸载，确保不会造成内存泄漏\n           */\n\n        }, {\n          key: 'destroy',\n          value: function destroy() {\n            // step1 unlisten events\n            this.removeListeners();\n            this.listeners = {};\n\n            // step2 release from context\n            delete self._instanceMap[tag];\n            if (_get(enhanced.prototype.__proto__ || Object.getPrototypeOf(enhanced.prototype), 'destroy', this)) {\n              return _get(enhanced.prototype.__proto__ || Object.getPrototypeOf(enhanced.prototype), 'destroy', this).call(this);\n            }\n          }\n        }]);\n\n        return enhanced;\n      }(cls);\n      this._clsMap[tag] = enhanced;\n\n      /**\n       * get instance immediately\n       * e.g const instance = context.registry(tag, Cls)(config)\n       * */\n      return function () {\n        for (var _len4 = arguments.length, args = Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n          args[_key4] = arguments[_key4];\n        }\n\n        return _this2.initInstance.apply(_this2, [tag].concat(args));\n      };\n    }\n\n    /**\n     * 各个模块处理seek\n     * @param time\n     */\n\n  }, {\n    key: 'seek',\n    value: function seek(time) {\n      this._emitter.emit(EVENTS.PLAYER_EVENTS.SEEK, time);\n    }\n\n    /**\n     * 对存在的实例进行\n     */\n\n  }, {\n    key: 'destroyInstances',\n    value: function destroyInstances() {\n      var _this3 = this;\n\n      Object.keys(this._instanceMap).forEach(function (tag) {\n        if (_this3._instanceMap[tag].destroy) {\n          _this3._instanceMap[tag].destroy();\n        }\n      });\n    }\n\n    /**\n     * 编解码流程无需关注事件的解绑\n     */\n\n  }, {\n    key: 'destroy',\n    value: function destroy() {\n      this._emitter = null;\n      this.allowedEvents = [];\n      this._clsMap = null;\n      this._context = null;\n      this._hooks = null;\n      this.destroyInstances();\n    }\n\n    /**\n     * 对信道进行收拢\n     * @param messageName\n     * @private\n     */\n\n  }, {\n    key: '_isMessageNameValid',\n    value: function _isMessageNameValid(messageName) {\n      if (!this.allowedEvents.indexOf(messageName) < 0) {\n        throw new Error('unregistered message name: ' + messageName);\n      }\n    }\n  }]);\n\n  return Context;\n}();\n\nexport default Context;","var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nimport EVENTS from '../events';\n\nvar CRYTO_EVENTS = EVENTS.CRYTO_EVENTS;\n\nvar Crypto = function () {\n  function Crypto(config) {\n    _classCallCheck(this, Crypto);\n\n    this.inputBuffer = config.inputbuffer;\n    this.outputBuffer = config.outputbuffer;\n    this.key = config.key;\n    this.iv = config.iv;\n    this.method = config.method;\n\n    this.crypto = window.crypto || window.msCrypto;\n  }\n\n  _createClass(Crypto, [{\n    key: 'init',\n    value: function init() {\n      this.on(CRYTO_EVENTS.START_DECRYPT, this.decript.bind(this));\n    }\n  }, {\n    key: 'decript',\n    value: function decript() {\n      var _this = this;\n\n      if (!this.aeskey) {\n        var sbkey = this.crypto.subtle.importKey('raw', this.key.buffer, { name: 'AES-CBC' }, false, ['encrypt', 'decrypt']);\n        sbkey.then(function (key) {\n          _this.aeskey = key;\n          _this.decriptData();\n        });\n      } else {\n        this.decriptData();\n      }\n    }\n  }, {\n    key: 'decriptData',\n    value: function decriptData() {\n      var _this2 = this;\n\n      var inputbuffer = this._context.getInstance(this.inputBuffer);\n      var outputbuffer = this._context.getInstance(this.outputBuffer);\n      var data = inputbuffer.shift();\n      if (data) {\n        this.crypto.subtle.decrypt({ name: 'AES-CBC', iv: this.iv.buffer }, this.aeskey, data).then(function (res) {\n          outputbuffer.push(new Uint8Array(res));\n          _this2.emit(CRYTO_EVENTS.DECRYPTED);\n          _this2.decriptData(data);\n        });\n      }\n    }\n  }]);\n\n  return Crypto;\n}();\n\nexport default Crypto;","var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar KeySystems = {\n  WIDEVINE: 'com.widevine.alpha',\n  PLAYREADY: 'com.microsoft.playready'\n};\n\nvar MAX_LICENSE_REQUEST_FAILURES = 3;\n\nvar EME = function () {\n  function EME(_ref) {\n    var config = _ref.config,\n        player = _ref.player;\n\n    _classCallCheck(this, EME);\n\n    this.licenseUrl = config.licenseUrl;\n    this.mediaKeySystemConfigs = config.mediaKeySystemConfigs;\n    this.keySystem = config.keySystem || KeySystems.WIDEVINE;\n    this.video = player.video;\n    this.mediaKeysList = [];\n    this.requestLicenseFailureCount = 0;\n  }\n\n  _createClass(EME, [{\n    key: 'init',\n    value: function init() {\n      this.on('ManifestParsed', this.onManifestParsed.bind(this));\n    }\n  }, {\n    key: 'onManifestParsed',\n    value: function onManifestParsed(data) {\n      var _this = this;\n\n      var mediaKeySystemConfigs = this.mediaKeySystemConfigs || this.createWidevineMediaKeySystemConfigurations(data.audioCodecs, data.videoCodecs);\n\n      navigator.requestMediaKeySystemAccess(this.keySystem, mediaKeySystemConfigs).then(function (keySystemAccess) {\n        return keySystemAccess.createMediaKeys();\n      }).then(function (mediaKeys) {\n        _this.video.setMediaKeys(mediaKeys);\n      });\n\n      this.video.addEventListener('encrypted', this.onMediaEncrypted.bind(this));\n    }\n  }, {\n    key: 'onKeySessionMessage',\n    value: function onKeySessionMessage(keySession, message) {\n      this.requestLicense(message, function (data) {\n        keySession.update(data);\n      });\n    }\n  }, {\n    key: 'requestLicense',\n    value: function requestLicense(keyMessage, callback) {\n      try {\n        var url = this.licenseUrl;\n        var xhr = this.createLicenseXhr(url, keyMessage, callback);\n        xhr.send(keyMessage);\n      } catch (e) {}\n    }\n  }, {\n    key: 'createLicenseXhr',\n    value: function createLicenseXhr(url, keyMessage, callback) {\n      var xhr = new window.XMLHttpRequest();\n\n      xhr.open('POST', url, true);\n\n      xhr.responseType = 'arraybuffer';\n      xhr.onreadystatechange = this.onLicenseRequestReadyStageChange.bind(this, xhr, url, keyMessage, callback);\n      return xhr;\n    }\n  }, {\n    key: 'onLicenseRequestReadyStageChange',\n    value: function onLicenseRequestReadyStageChange(xhr, url, keyMessage, callback) {\n      switch (xhr.readyState) {\n        case 4:\n          if (xhr.status === 200) {\n            this.requestLicenseFailureCount = 0;\n            callback(xhr.response);\n          } else {\n            this.requestLicenseFailureCount++;\n\n            if (this.requestLicenseFailureCount > MAX_LICENSE_REQUEST_FAILURES) {\n              return;\n            }\n            this.requestLicense(keyMessage, callback);\n          }\n          break;\n      }\n    }\n  }, {\n    key: 'onMediaEncrypted',\n    value: function onMediaEncrypted(e) {\n      var _this2 = this;\n\n      var keySession = this.video.mediaKeys.createSession();\n      keySession.addEventListener('message', function (event) {\n        _this2.onKeySessionMessage(keySession, event.message);\n      }, false);\n      keySession.generateRequest(e.initDataType, e.initData);\n    }\n  }, {\n    key: 'createWidevineMediaKeySystemConfigurations',\n    value: function createWidevineMediaKeySystemConfigurations(audioCodecs, videoCodecs) {\n      return [{\n        videoCapabilities: videoCodecs.map(function (codec) {\n          return {\n            contentType: 'video/mp4; codecs=\"' + codec + '\"'\n          };\n        })\n      }];\n    }\n  }], [{\n    key: 'isSupported',\n    value: function isSupported() {\n      var checkIsIncompatibleBrowser = function checkIsIncompatibleBrowser() {\n        var ua = navigator.userAgent;\n        var isSafari = /^((?!chrome|android).)*safari/i.test(ua);\n        var isMSBrowser = ua.indexOf('MSIE ') > 0 || ua.indexOf('Trident/') > 0;\n        var isFirefox = ua.indexOf('Firefox') > 0;\n        var isEdge = ua.indexOf('Edge') > 0;\n        return isSafari || isMSBrowser || isFirefox || isEdge;\n      };\n      return !!navigator.requestMediaKeySystemAccess && !checkIsIncompatibleBrowser();\n    }\n  }]);\n\n  return EME;\n}();\n\nexport default EME;","var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nimport EVENTS from '../events';\n\nvar MSE_EVENTS = EVENTS.MSE_EVENTS;\n\nvar MSE = function () {\n  function MSE(configs, context) {\n    _classCallCheck(this, MSE);\n\n    if (context) {\n      this._context = context;\n      this.emit = context._emitter.emit.bind(context._emitter);\n    }\n\n    this.TAG = 'MSE';\n\n    this.configs = Object.assign({}, configs);\n    this.container = this.configs.container;\n    this.mediaSource = null;\n    this.sourceBuffers = {};\n    this.preloadTime = this.configs.preloadTime || 1;\n    this.onSourceOpen = this.onSourceOpen.bind(this);\n    this.onTimeUpdate = this.onTimeUpdate.bind(this);\n    this.onUpdateEnd = this.onUpdateEnd.bind(this);\n    this.onWaiting = this.onWaiting.bind(this);\n    this.opened = false;\n  }\n\n  _createClass(MSE, [{\n    key: 'init',\n    value: function init() {\n      // eslint-disable-next-line no-undef\n      this.mediaSource = new self.MediaSource();\n      this.mediaSource.addEventListener('sourceopen', this.onSourceOpen);\n      this._url = null;\n      this.container.addEventListener('timeupdate', this.onTimeUpdate);\n      this.container.addEventListener('waiting', this.onWaiting);\n    }\n  }, {\n    key: 'resetContext',\n    value: function resetContext(newCtx) {\n      this._context = newCtx;\n      this.emit = newCtx._emitter.emit.bind(newCtx._emitter);\n      for (var i = 0; i < Object.keys(this.sourceBuffers).length; i++) {\n        var buffer = this.sourceBuffers[Object.keys(this.sourceBuffers)[i]];\n        if (!buffer.updating) {\n          MSE.clearBuffer(buffer);\n        }\n      }\n    }\n  }, {\n    key: 'onTimeUpdate',\n    value: function onTimeUpdate() {\n      this.emit('TIME_UPDATE', this.container);\n    }\n  }, {\n    key: 'onWaiting',\n    value: function onWaiting() {\n      this.emit('WAITING', this.container);\n    }\n  }, {\n    key: 'onSourceOpen',\n    value: function onSourceOpen() {\n      this.opened = true;\n      this.addSourceBuffers();\n    }\n  }, {\n    key: 'onUpdateEnd',\n    value: function onUpdateEnd() {\n      this.emit(MSE_EVENTS.SOURCE_UPDATE_END);\n      this.doAppend();\n    }\n  }, {\n    key: 'addSourceBuffers',\n    value: function addSourceBuffers() {\n      if (this.mediaSource.readyState !== 'open' || !this.opened) {\n        return;\n      }\n      var sources = this._context.getInstance('PRE_SOURCE_BUFFER');\n      var tracks = this._context.getInstance('TRACKS');\n      var track = void 0;\n      if (!sources || !tracks) {\n        return;\n      }\n\n      sources = sources.sources;\n      var add = false;\n      for (var i = 0, k = Object.keys(sources).length; i < k; i++) {\n        var type = Object.keys(sources)[i];\n        add = false;\n        if (type === 'audio') {\n          track = tracks.audioTrack;\n        } else if (type === 'video') {\n          track = tracks.videoTrack;\n          // return;\n        }\n        if (track && sources[type].init !== null && sources[type].data.length) {\n          add = true;\n        }\n      }\n\n      if (add) {\n        if (Object.keys(this.sourceBuffers).length > 1) {\n          return;\n        }\n        for (var _i = 0, _k = Object.keys(sources).length; _i < _k; _i++) {\n          var _type = Object.keys(sources)[_i];\n          if (this.sourceBuffers[_type]) {\n            continue;\n          }\n          var source = sources[_type];\n          var mime = _type === 'video' ? 'video/mp4;codecs=' + source.mimetype : 'audio/mp4;codecs=' + source.mimetype;\n\n          try {\n            var sourceBuffer = this.mediaSource.addSourceBuffer(mime);\n            this.sourceBuffers[_type] = sourceBuffer;\n            sourceBuffer.addEventListener('updateend', this.onUpdateEnd);\n          } catch (e) {\n            this.emit(MSE_EVENTS.MSE_ERROR, this.TAG, new Error(e.message));\n          }\n        }\n        if (Object.keys(this.sourceBuffers).length === 2) {\n          this.doAppend();\n        }\n      }\n    }\n  }, {\n    key: 'doAppend',\n    value: function doAppend() {\n      if (Object.keys(this.sourceBuffers).length < 2) {\n        return;\n      }\n      var sources = this._context.getInstance('PRE_SOURCE_BUFFER');\n      if (sources) {\n        for (var i = 0; i < Object.keys(this.sourceBuffers).length; i++) {\n          var type = Object.keys(this.sourceBuffers)[i];\n          var sourceBuffer = this.sourceBuffers[type];\n          var source = sources.sources[type];\n          if (source && !source.inited) {\n            try {\n              // console.log('append buffser init: ', type, source.init)\n              sourceBuffer.appendBuffer(source.init.buffer.buffer);\n              source.inited = true;\n            } catch (e) {\n              // DO NOTHING\n            }\n          } else if (source) {\n            var data = source.data.shift();\n            if (data) {\n              try {\n                sourceBuffer.appendBuffer(data.buffer.buffer);\n              } catch (e) {\n                source.data.unshift(data);\n              }\n            }\n          }\n        }\n      }\n    }\n  }, {\n    key: 'endOfStream',\n    value: function endOfStream() {\n      var readyState = this.mediaSource.readyState;\n\n      if (readyState === 'open') {\n        try {\n          this.mediaSource.endOfStream();\n        } catch (e) {\n          // log\n        }\n      }\n    }\n  }, {\n    key: 'remove',\n    value: function remove(end) {\n      var start = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n\n      for (var i = 0; i < Object.keys(this.sourceBuffers).length; i++) {\n        var buffer = this.sourceBuffers[Object.keys(this.sourceBuffers)[i]];\n        if (!buffer.updating) {\n          // console.log('remove', start, end)\n          buffer.remove(start, end);\n        }\n      }\n    }\n  }, {\n    key: 'cleanBuffers',\n    value: function cleanBuffers() {\n      var _this = this;\n\n      var taskList = [];\n\n      var _loop = function _loop(i) {\n        var buffer = _this.sourceBuffers[Object.keys(_this.sourceBuffers)[i]];\n\n        var task = void 0;\n        if (buffer.updating) {\n          task = new Promise(function (resolve) {\n            var doCleanBuffer = function doCleanBuffer() {\n              var retryTime = 3;\n\n              var clean = function clean() {\n                if (!buffer.updating) {\n                  MSE.clearBuffer(buffer);\n                  buffer.addEventListener('updateend', function () {\n                    resolve();\n                  });\n                } else if (retryTime > 0) {\n                  setTimeout(clean, 200);\n                  retryTime--;\n                } else {\n                  resolve();\n                }\n              };\n\n              setTimeout(clean, 200);\n              buffer.removeEventListener('updateend', doCleanBuffer);\n            };\n            buffer.addEventListener('updateend', doCleanBuffer);\n          });\n        } else {\n          task = new Promise(function (resolve) {\n            MSE.clearBuffer(buffer);\n            buffer.addEventListener('updateend', function () {\n              resolve();\n            });\n          });\n\n          // task = Promise.resolve()\n        }\n\n        taskList.push(task);\n      };\n\n      for (var i = 0; i < Object.keys(this.sourceBuffers).length; i++) {\n        _loop(i);\n      }\n\n      return Promise.all(taskList);\n    }\n  }, {\n    key: 'removeBuffers',\n    value: function removeBuffers() {\n      var _this2 = this;\n\n      var taskList = [];\n\n      var _loop2 = function _loop2(i) {\n        var buffer = _this2.sourceBuffers[Object.keys(_this2.sourceBuffers)[i]];\n        buffer.removeEventListener('updateend', _this2.onUpdateEnd);\n\n        var task = void 0;\n        if (buffer.updating) {\n          task = new Promise(function (resolve) {\n            var doCleanBuffer = function doCleanBuffer() {\n              var retryTime = 3;\n\n              var clean = function clean() {\n                if (!buffer.updating) {\n                  MSE.clearBuffer(buffer);\n                  buffer.addEventListener('updateend', function () {\n                    resolve();\n                  });\n                } else if (retryTime > 0) {\n                  setTimeout(clean, 200);\n                  retryTime--;\n                } else {\n                  resolve();\n                }\n              };\n\n              setTimeout(clean, 200);\n              buffer.removeEventListener('updateend', doCleanBuffer);\n            };\n            buffer.addEventListener('updateend', doCleanBuffer);\n          });\n        } else {\n          task = new Promise(function (resolve) {\n            MSE.clearBuffer(buffer);\n            buffer.addEventListener('updateend', function () {\n              resolve();\n            });\n          });\n\n          // task = Promise.resolve()\n        }\n\n        taskList.push(task);\n      };\n\n      for (var i = 0; i < Object.keys(this.sourceBuffers).length; i++) {\n        _loop2(i);\n      }\n\n      return Promise.all(taskList);\n    }\n  }, {\n    key: 'destroy',\n    value: function destroy() {\n      var _this3 = this;\n\n      this.container.removeEventListener('timeupdate', this.onTimeUpdate);\n      this.container.removeEventListener('waiting', this.onWaiting);\n      this.mediaSource.removeEventListener('sourceopen', this.onSourceOpen);\n      return this.removeBuffers().then(function () {\n        for (var i = 0; i < Object.keys(_this3.sourceBuffers).length; i++) {\n          var _buffer = _this3.sourceBuffers[Object.keys(_this3.sourceBuffers)[i]];\n          _this3.mediaSource.removeSourceBuffer(_buffer);\n          delete _this3.sourceBuffers[Object.keys(_this3.sourceBuffers)[i]];\n        }\n\n        _this3.endOfStream();\n        window.URL.revokeObjectURL(_this3.url);\n\n        _this3.url = null;\n        _this3.configs = {};\n        _this3.container = null;\n        _this3.mediaSource = null;\n        _this3.sourceBuffers = {};\n        _this3.preloadTime = 1;\n\n        _this3.onSourceOpen = null;\n        _this3.onTimeUpdate = null;\n        _this3.onUpdateEnd = null;\n        _this3.onWaiting = null;\n      });\n    }\n  }, {\n    key: 'url',\n    set: function set(val) {\n      this._url = val;\n    },\n    get: function get() {\n      if (!this._url) {\n        this._url = window.URL.createObjectURL(this.mediaSource);\n      }\n      return this._url;\n    }\n  }], [{\n    key: 'clearBuffer',\n    value: function clearBuffer(buffer) {\n      try {\n        var buffered = buffer.buffered;\n        var bEnd = 0.1;\n        for (var i = 0, len = buffered.length; i < len; i++) {\n          bEnd = buffered.end(i);\n        }\n        buffer.remove(0, bEnd);\n      } catch (e) {\n        // DO NOTHING\n      }\n    }\n  }]);\n\n  return MSE;\n}();\n\nexport default MSE;","var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nimport EVENTS from '../events';\n\nvar BROWSER_EVENTS = EVENTS.BROWSER_EVENTS;\nvar hidden = void 0;\nvar visibilityChange = void 0;\n\nif (typeof document.hidden !== 'undefined') {\n  // Opera 12.10 and Firefox 18 and later support\n  hidden = 'hidden';\n  visibilityChange = 'visibilitychange';\n} else if (typeof document.msHidden !== 'undefined') {\n  hidden = 'msHidden';\n  visibilityChange = 'msvisibilitychange';\n} else if (typeof document.webkitHidden !== 'undefined') {\n  hidden = 'webkitHidden';\n  visibilityChange = 'webkitvisibilitychange';\n}\n\nvar PageVisibility = function () {\n  function PageVisibility() {\n    _classCallCheck(this, PageVisibility);\n\n    this.callbacks = {\n      onShow: [],\n      onHidden: []\n    };\n    this.handleVisibilityChange = this.handleVisibilityChange.bind(this);\n    this.init();\n  }\n\n  _createClass(PageVisibility, [{\n    key: 'init',\n    value: function init() {\n      document.addEventListener(visibilityChange, this.handleVisibilityChange, false);\n    }\n  }, {\n    key: 'handleVisibilityChange',\n    value: function handleVisibilityChange() {\n      this.emit(BROWSER_EVENTS.VISIBILITY_CHANGE, document[hidden]);\n    }\n  }, {\n    key: 'destroy',\n    value: function destroy() {\n      document.removeEventListener(visibilityChange, this.handleVisibilityChange);\n    }\n  }]);\n\n  return PageVisibility;\n}();\n\nexport default PageVisibility;","import _PageVisibility from './page-visibility';\n\nvar le = function () {\n  var buf = new ArrayBuffer(2);\n  new DataView(buf).setInt16(0, 256, true); // little-endian write\n  return new Int16Array(buf)[0] === 256; // platform-spec read, if equal then LE\n}();\n\nvar sniffer = {\n  get device() {\n    var r = sniffer.os;\n    return r.isPc ? 'pc' : r.isTablet ? 'tablet' : 'mobile';\n  },\n  get browser() {\n    var ua = navigator.userAgent.toLowerCase();\n    var reg = {\n      ie: /rv:([\\d.]+)\\) like gecko/,\n      firfox: /firefox\\/([\\d.]+)/,\n      chrome: /chrome\\/([\\d.]+)/,\n      opera: /opera.([\\d.]+)/,\n      safari: /version\\/([\\d.]+).*safari/\n    };\n    return [].concat(Object.keys(reg).filter(function (key) {\n      return reg[key].test(ua);\n    }))[0];\n  },\n  get os() {\n    var ua = navigator.userAgent;\n    var isWindowsPhone = /(?:Windows Phone)/.test(ua);\n    var isSymbian = /(?:SymbianOS)/.test(ua) || isWindowsPhone;\n    var isAndroid = /(?:Android)/.test(ua);\n    var isFireFox = /(?:Firefox)/.test(ua);\n    var isTablet = /(?:iPad|PlayBook)/.test(ua) || isAndroid && !/(?:Mobile)/.test(ua) || isFireFox && /(?:Tablet)/.test(ua);\n    var isPhone = /(?:iPhone)/.test(ua) && !isTablet;\n    var isPc = !isPhone && !isAndroid && !isSymbian;\n    return {\n      isTablet: isTablet,\n      isPhone: isPhone,\n      isAndroid: isAndroid,\n      isPc: isPc,\n      isSymbian: isSymbian,\n      isWindowsPhone: isWindowsPhone,\n      isFireFox: isFireFox\n    };\n  },\n\n  get isLe() {\n    return le;\n  }\n};\n\nexport var PageVisibility = _PageVisibility;\nexport default sniffer;","var _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nimport EVENTS from '../events';\n\nvar LOADER_EVENTS = EVENTS.LOADER_EVENTS;\nvar READ_STREAM = 0;\nvar READ_TEXT = 1;\nvar READ_JSON = 2;\nvar READ_BUFFER = 3;\n\nvar FetchLoader = function () {\n  function FetchLoader(configs) {\n    _classCallCheck(this, FetchLoader);\n\n    this.configs = Object.assign({}, configs);\n    this.url = null;\n    this.status = 0;\n    this.error = null;\n    this._reader = null;\n    this._canceled = false;\n    this._destroyed = false;\n    this.readtype = this.configs.readtype;\n    this.buffer = this.configs.buffer || 'LOADER_BUFFER';\n    this._loaderTaskNo = 0;\n  }\n\n  _createClass(FetchLoader, [{\n    key: 'init',\n    value: function init() {\n      this.on(LOADER_EVENTS.LADER_START, this.load.bind(this));\n    }\n  }, {\n    key: 'fetch',\n    value: function (_fetch) {\n      function fetch(_x, _x2) {\n        return _fetch.apply(this, arguments);\n      }\n\n      fetch.toString = function () {\n        return _fetch.toString();\n      };\n\n      return fetch;\n    }(function (url, params) {\n      var timer = null;\n      return Promise.race([fetch(url, params), new Promise(function (resolve, reject) {\n        timer = setTimeout(function () {\n          reject(new Error('fetch timeout'));\n        }, 1e4); // 10s\n      })]).then(function (response) {\n        if (timer) {\n          clearTimeout(timer);\n          timer = null;\n        }\n        return response;\n      });\n    })\n  }, {\n    key: 'internalLoad',\n    value: function internalLoad(url, params, retryTimes) {\n      var _this2 = this;\n\n      return this.fetch(this.url, params).then(function (response) {\n        _this2.emit(LOADER_EVENTS.LOADER_RESPONSE_HEADERS, _this2.TAG, response.headers);\n\n        if (response.ok) {\n          _this2.status = response.status;\n          Promise.resolve().then(function () {\n            _this2._onFetchResponse(response);\n          });\n\n          return Promise.resolve(response);\n        }\n\n        if (retryTimes-- > 0) {\n          return _this2.internalLoad(url, params, retryTimes);\n        } else {\n          _this2.loading = false;\n          _this2.emit(LOADER_EVENTS.LOADER_ERROR, _this2.TAG, new Error(response.status + ' (' + response.statusText + ')'));\n        }\n      }).catch(function (error) {\n        _this2.loading = false;\n        if (retryTimes-- > 0) {\n          return _this2.internalLoad(url, params, retryTimes);\n        } else {\n          _this2.emit(LOADER_EVENTS.LOADER_ERROR, _this2.TAG, error);\n          throw error;\n        }\n      });\n    }\n  }, {\n    key: 'load',\n    value: function load(url) {\n      var opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var retryTimes = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 3;\n\n      this.url = url;\n\n      this._canceled = false;\n\n      // TODO: Add Ranges\n      var params = this.getParams(opts);\n      this.loading = true;\n      return this.internalLoad(url, params, retryTimes);\n    }\n  }, {\n    key: '_onFetchResponse',\n    value: function _onFetchResponse(response) {\n      var _this = this;\n      var buffer = this._context.getInstance(this.buffer);\n      this._loaderTaskNo++;\n      var taskno = this._loaderTaskNo;\n      if (response.ok === true) {\n        switch (this.readtype) {\n          case READ_JSON:\n            response.json().then(function (data) {\n              _this.loading = false;\n              if (!_this._canceled && !_this._destroyed) {\n                if (buffer) {\n                  buffer.push(data);\n                  _this.emit(LOADER_EVENTS.LOADER_COMPLETE, buffer);\n                } else {\n                  _this.emit(LOADER_EVENTS.LOADER_COMPLETE, data);\n                }\n              }\n            });\n            break;\n          case READ_TEXT:\n            response.text().then(function (data) {\n              _this.loading = false;\n              if (!_this._canceled && !_this._destroyed) {\n                if (buffer) {\n                  buffer.push(data);\n                  _this.emit(LOADER_EVENTS.LOADER_COMPLETE, buffer);\n                } else {\n                  _this.emit(LOADER_EVENTS.LOADER_COMPLETE, data);\n                }\n              }\n            });\n            break;\n          case READ_BUFFER:\n            response.arrayBuffer().then(function (data) {\n              _this.loading = false;\n              if (!_this._canceled && !_this._destroyed) {\n                if (buffer) {\n                  buffer.push(new Uint8Array(data));\n                  _this.emit(LOADER_EVENTS.LOADER_COMPLETE, buffer);\n                } else {\n                  _this.emit(LOADER_EVENTS.LOADER_COMPLETE, data);\n                }\n              }\n            });\n            break;\n          case READ_STREAM:\n          default:\n            return this._onReader(response.body.getReader(), taskno);\n        }\n      }\n    }\n  }, {\n    key: '_onReader',\n    value: function _onReader(reader, taskno) {\n      var _this3 = this;\n\n      var buffer = this._context.getInstance(this.buffer);\n      if (!buffer && this._reader || this._destroyed) {\n        try {\n          this._reader.cancel();\n        } catch (e) {\n          // DO NOTHING\n        }\n      }\n\n      this._reader = reader;\n      if (this.loading === false) {\n        return;\n      }\n\n      // reader read function returns a Promise. get data when callback and has value.done when disconnected.\n      // read方法返回一个Promise. 回调中可以获取到数据。当value.done存在时，说明链接断开。\n      this._reader && this._reader.read().then(function (val) {\n        if (_this3._canceled || _this3._destroyed) {\n          if (_this3._reader) {\n            try {\n              _this3._reader.cancel();\n            } catch (e) {\n              // DO NOTHING\n            }\n          }\n          return;\n        }\n        if (val.done) {\n          _this3.loading = false;\n          _this3.status = 0;\n          Promise.resolve().then(function () {\n            _this3.emit(LOADER_EVENTS.LOADER_COMPLETE, buffer);\n          });\n          return;\n        }\n\n        buffer.push(val.value);\n        Promise.resolve().then(function () {\n          _this3.emit(LOADER_EVENTS.LOADER_DATALOADED, buffer);\n        });\n        return _this3._onReader(reader, taskno);\n      }).catch(function (error) {\n        _this3.loading = false;\n        _this3.emit(LOADER_EVENTS.LOADER_ERROR, _this3.TAG, error);\n        throw error;\n      });\n    }\n  }, {\n    key: 'getParams',\n    value: function getParams(opts) {\n      var options = Object.assign({}, opts);\n      var headers = new Headers();\n\n      var params = {\n        method: 'GET',\n        headers: headers,\n        mode: 'cors',\n        cache: 'default'\n\n        // add custmor headers\n        // 添加自定义头\n      };if (_typeof(this.configs.headers) === 'object') {\n        var configHeaders = this.configs.headers;\n        for (var key in configHeaders) {\n          if (configHeaders.hasOwnProperty(key)) {\n            headers.append(key, configHeaders[key]);\n          }\n        }\n      }\n\n      if (_typeof(options.headers) === 'object') {\n        var optHeaders = options.headers;\n        for (var _key in optHeaders) {\n          if (optHeaders.hasOwnProperty(_key)) {\n            headers.append(_key, optHeaders[_key]);\n          }\n        }\n      }\n\n      if (options.cors === false) {\n        params.mode = 'same-origin';\n      }\n\n      // withCredentials is disabled by default\n      // withCredentials 在默认情况下不被使用。\n      if (options.withCredentials) {\n        params.credentials = 'include';\n      }\n\n      // TODO: Add ranges;\n      return params;\n    }\n  }, {\n    key: 'cancel',\n    value: function cancel() {\n      if (this._reader) {\n        try {\n          this._reader.cancel();\n        } catch (e) {\n          // 防止failed: 200错误被打印到控制台上\n        }\n        this._reader = null;\n        this.loading = false;\n      }\n      this._canceled = true;\n    }\n  }, {\n    key: 'destroy',\n    value: function destroy() {\n      this._destroyed = true;\n      this.cancel();\n    }\n  }], [{\n    key: 'type',\n    get: function get() {\n      return 'loader';\n    }\n  }]);\n\n  return FetchLoader;\n}();\n\nexport default FetchLoader;","var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar DevLogger = function () {\n  function DevLogger() {\n    var _this = this;\n\n    _classCallCheck(this, DevLogger);\n\n    try {\n\n      var matched = /xgd=(\\d)/.exec(document.cookie);\n      this._status = !!matched;\n      this._level = matched && matched[1];\n    } catch (e) {\n      this._status = false;\n    }\n\n    [\"group\", \"groupEnd\", \"log\", \"warn\", \"error\"].forEach(function (funName) {\n      _this[funName] = function (arg1, arg2, arg3, arg4, arg5, arg6, arg7, arg8, arg9, arg10) {\n        var _console;\n\n        if (!_this._status) return;\n        var tagName = arg1;\n        var args = [arg2, arg3, arg4, arg5, arg6, arg7, arg8, arg9, arg10].filter(function (x) {\n          return x !== undefined;\n        });\n        (_console = console)[funName].apply(_console, [\"[\" + tagName + \"]:\"].concat(_toConsumableArray(args)));\n      };\n    });\n  }\n\n  _createClass(DevLogger, [{\n    key: \"enable\",\n    get: function get() {\n      return this._status;\n    }\n\n    // more detailed log output\n\n  }, {\n    key: \"long\",\n    get: function get() {\n      return this._level === '2';\n    }\n  }]);\n\n  return DevLogger;\n}();\n\nexport default new DevLogger();","import * as _common from './common';\nimport _Context from './context';\nimport _crypto from './crypto';\nimport _Eme from './eme';\nimport _Mse from './mse';\nimport _sniffer from './sniffer';\nimport _PageVisibility from './sniffer/page-visibility';\nimport _EVENTS from './events';\nimport _FetchLoader from './loader-fetch';\nimport _devLogger from './common/dev-logger';\n\nexport var common = _common;\nexport var Context = _Context;\nexport var Crypto = _crypto;\nexport var Eme = _Eme;\nexport var Mse = _Mse;\nexport var Sniffer = _sniffer;\nexport var PageVisibility = _PageVisibility;\nexport var EVENTS = _EVENTS;\nexport var FetchLoader = _FetchLoader;\nexport var logger = _devLogger;","var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nimport { EVENTS, Sniffer, common, logger } from 'xgplayer-helper-utils';\nimport AAC from '../aac';\n\nvar isSafari = Sniffer.browser === 'safari';\n\nvar REMUX_EVENTS = EVENTS.REMUX_EVENTS;\nvar caculate = common.caculate;\n\nvar Compatibility = function () {\n  function Compatibility() {\n    _classCallCheck(this, Compatibility);\n\n    this.TAG = 'Compatibility';\n    this.nextAudioDts = 0; // 模拟下一段音频数据的dts\n    this.nextVideoDts = 0; // 模拟下一段视频数据的dts\n\n    this.lastAudioSamplesLen = 0; // 上一段音频数据的长度\n    this.lastVideoSamplesLen = 0; // 上一段视频数据的长度\n\n    this.lastVideoDts = undefined; // 上一段音频数据的长度\n    this.lastAudioDts = undefined; // 上一段视频数据的长度\n\n    this.allAudioSamplesCount = 0; // 音频总数据量(原始帧)\n    this.allVideoSamplesCount = 0; // 视频总数据量(原始帧)\n\n    this._firstAudioSample = null;\n    this._firstVideoSample = null;\n\n    this.filledAudioSamples = []; // 补充音频帧（）\n    this.filledVideoSamples = []; // 补充视频帧（）\n\n    this._lastSegmentId = 0;\n    this._currentSegmentId = 0;\n    this._format = '';\n    this.videoLastSample = null;\n    this.audioLastSample = null; // stash last sample for duration compat\n\n    this._videoLargeGap = 0;\n    this._audioLargeGap = 0;\n\n    this.audioUnsyncTime = 0;\n  }\n\n  _createClass(Compatibility, [{\n    key: 'init',\n    value: function init() {\n      this.before(REMUX_EVENTS.REMUX_MEDIA, this.doFix.bind(this));\n    }\n  }, {\n    key: 'reset',\n    value: function reset() {\n      this.nextAudioDts = null; // 估算下一段音频数据的dts\n      this.nextVideoDts = null; // 估算下一段视频数据的dts\n\n      this.lastAudioSamplesLen = 0; // 上一段音频数据的长度\n      this.lastVideoSamplesLen = 0; // 上一段视频数据的长度\n\n      this.lastVideoDts = undefined; // 上一段音频数据的dts\n      this.lastAudioDts = undefined; // 上一段视频数据的dts\n\n      // this.allAudioSamplesCount = 0 // 音频总数据量(原始帧)\n      // this.allVideoSamplesCount = 0 // 视频总数据量(原始帧)\n\n      this._audioLargeGap = 0;\n      this._videoLargeGap = 0;\n\n      // this._firstAudioSample = null\n      // this._firstVideoSample = null\n      // this._firstAudioSample = null\n      // this._firstVideoSample = null\n      this.videoLastSample = null;\n      this.audioLastSample = null;\n\n      this.filledAudioSamples = []; // 补充音频帧（）\n      this.filledVideoSamples = []; // 补充视频帧（）\n\n      this.audioUnsyncTime = 0;\n    }\n  }, {\n    key: '_isSegmentsContinuous',\n    value: function _isSegmentsContinuous() {\n      return this._format === 'ts' && this._currentSegmentId - this._lastSegmentId === 1;\n    }\n  }, {\n    key: 'doFix',\n    value: function doFix(format) {\n      this._format = format;\n      var ops = void 0;\n      var vSamp0 = void 0;\n      var aSamp0 = void 0;\n\n      if (this.videoTrack.samples.length) {\n        vSamp0 = this.videoTrack.samples[0];\n        ops = vSamp0.options;\n        if (logger.long) {\n          logger.log(this.TAG, this.videoTrack.samples.slice());\n        }\n      }\n\n      if (this.audioTrack.samples.length) {\n        aSamp0 = this.audioTrack.samples[0];\n        if (logger.long) {\n          logger.log(this.TAG, this.audioTrack.samples.slice());\n        }\n      }\n\n      if (format === 'ts') {\n        // eslint-disable-next-line no-mixed-operators\n        this._currentSegmentId = ops && ops.id || this._currentSegmentId + 1;\n      }\n\n      logger.log(this.TAG, 'lastSeg:' + this._lastSegmentId + ' , currentSeg:' + this._currentSegmentId + ', discontinue:' + (ops && ops.discontinue) + ' vSamp0:' + (vSamp0 && vSamp0.dts) + ' aSamp0:' + (aSamp0 && aSamp0.dts));\n\n      var _getFirstSample = this.getFirstSample(),\n          isFirstAudioSamples = _getFirstSample.isFirstAudioSamples,\n          isFirstVideoSamples = _getFirstSample.isFirstVideoSamples;\n\n      this.recordSamplesCount();\n\n      if (this._firstVideoSample) {\n        this.fixVideoRefSampleDuration(this.videoTrack.meta, this.videoTrack.samples);\n      }\n\n      var _Compatibility$detect = Compatibility.detectChangeStream(this.videoTrack.samples, isFirstVideoSamples),\n          videoChanged = _Compatibility$detect.changed,\n          videoChangedIdxes = _Compatibility$detect.changedIdxes;\n\n      if (videoChanged) {\n        var disContinue = false;\n        for (var i = 0; i < videoChangedIdxes.length; i++) {\n          if (this.fixChangeStreamVideo(videoChangedIdxes[i], isFirstVideoSamples)) {\n            disContinue = true;\n          }\n        }\n        if (!disContinue) {\n          this.doFixVideo(isFirstVideoSamples);\n        }\n      } else {\n        if (!this._isSegmentsContinuous() && ops && ops.start !== undefined) {\n          logger.log(this.TAG, 'fix video for _isSegmentsContinuous()');\n          this.videoLastSample = null;\n          this.doFixVideo(isFirstVideoSamples, ops.start);\n          this.emit(REMUX_EVENTS.DETECT_FRAG_ID_DISCONTINUE, ops.start / 1000);\n        } else {\n          this.doFixVideo(isFirstVideoSamples);\n        }\n      }\n\n      var _Compatibility$detect2 = Compatibility.detectChangeStream(this.audioTrack.samples, isFirstAudioSamples),\n          audioChanged = _Compatibility$detect2.changed,\n          audioChangedIdxes = _Compatibility$detect2.changedIdxes;\n\n      if (audioChanged) {\n        var _disContinue = false;\n        for (var _i = 0; _i < audioChangedIdxes.length; _i++) {\n          if (this.fixChangeStreamAudio(audioChangedIdxes[_i], isFirstAudioSamples)) {\n            _disContinue = true;\n          }\n        }\n        if (!_disContinue) {\n          this.doFixAudio(isFirstAudioSamples);\n        } else {\n          return;\n        }\n      } else {\n        if (!this._isSegmentsContinuous() && ops && ops.start !== undefined) {\n          logger.log(this.TAG, 'fix audio for _isSegmentsContinuous()');\n          this.nextAudioDts = null;\n          this.doFixAudio(isFirstAudioSamples, ops.start);\n          this.emit(REMUX_EVENTS.DETECT_FRAG_ID_DISCONTINUE, ops.start / 1000);\n        } else {\n          this.doFixAudio(isFirstAudioSamples);\n        }\n      }\n\n      this.removeInvalidSamples();\n\n      this._lastSegmentId = this._currentSegmentId;\n    }\n  }, {\n    key: 'doFixVideo',\n    value: function doFixVideo(first, streamChangeStart) {\n      var _videoTrack = this.videoTrack,\n          videoSamples = _videoTrack.samples,\n          meta = _videoTrack.meta;\n\n      var len = videoSamples.length;\n\n      for (var i = 0; i < len; i++) {\n        var sample = videoSamples[i];\n        sample.originDts = sample.dts;\n        sample.originPts = sample.pts;\n      }\n\n      if (!videoSamples || !len || !this._firstVideoSample) {\n        return;\n      }\n\n      var firstSample = videoSamples[0];\n\n      logger.log(this.TAG, 'doFixVideo:: _videoLargeGap: ' + this._videoLargeGap + ' ,streamChangeStart:' + streamChangeStart + ', lastVideoSample:[dts=' + (this.videoLastSample && this.videoLastSample.dts) + ' , pts=' + (this.videoLastSample && this.videoLastSample.pts) + '] ,  firstDTS:' + firstSample.dts + ' ,firstPTS:' + firstSample.pts + ' ,lastDTS:' + videoSamples[len - 1].dts + ' , lastPTS: ' + videoSamples[len - 1].pts);\n\n      // !first: 非首次加载的分片\n      if (!first && this.videoLastSample === null && firstSample.options && firstSample.options.start) {\n        if (streamChangeStart !== undefined) {\n          streamChangeStart = firstSample.options.start;\n        }\n      }\n      if (!first && streamChangeStart === undefined && this.videoLastSample && Compatibility.detectLargeGap(this.videoLastSample ? this.videoLastSample.dts : 0, firstSample.dts + this._videoLargeGap)) {\n        // large gap 不准确，出现了非换流场景的时间戳跳变\n        this._videoLargeGap = this.videoLastSample.dts + meta.refSampleDuration - firstSample.dts;\n      }\n      // step0.修复hls流出现巨大gap，需要强制重定位的问题。\n      if (this._videoLargeGap !== 0) {\n        Compatibility.doFixLargeGap(videoSamples, this._videoLargeGap);\n      }\n\n      if (!first && streamChangeStart !== undefined) {\n        this._videoLargeGap = streamChangeStart - firstSample.dts;\n        Compatibility.doFixLargeGap(videoSamples, this._videoLargeGap);\n      }\n\n      // step1. 修复与audio首帧差距太大的问题\n      if (first && this._firstAudioSample) {\n        var videoFirstDts = this._firstVideoSample.originDts;\n        var audioFirstDts = this._firstAudioSample.originDts || this._firstAudioSample.dts;\n        var gap = videoFirstDts - audioFirstDts;\n        if (gap > 2 * meta.refSampleDuration && gap < 10 * meta.refSampleDuration) {\n          var fillCount = Math.floor(gap / meta.refSampleDuration);\n\n          for (var _i2 = 0; _i2 < fillCount; _i2++) {\n            var clonedFirstSample = Object.assign({}, firstSample); // 视频头部帧缺失需要复制第一帧\n            // 重新计算sample的dts和pts\n            clonedFirstSample.dts = videoFirstDts - (_i2 + 1) * meta.refSampleDuration;\n            clonedFirstSample.pts = clonedFirstSample.dts + clonedFirstSample.cts;\n\n            videoSamples.unshift(clonedFirstSample);\n\n            this.filledVideoSamples.push({\n              dts: clonedFirstSample.dts,\n              size: clonedFirstSample.data.byteLength\n            });\n          }\n          this._firstVideoSample = this.filledVideoSamples[0] || this._firstVideoSample;\n        } else if (Math.abs(gap) > 2 * meta.refSampleDuration && !this._videoLargeGap) {\n          this._videoLargeGap = -1 * gap;\n          Compatibility.doFixLargeGap(videoSamples, -1 * gap);\n        }\n      }\n\n      var curLastSample = videoSamples.pop();\n      if (videoSamples.length) {\n        videoSamples[videoSamples.length - 1].duration = curLastSample.dts - videoSamples[videoSamples.length - 1].dts;\n      }\n\n      if (this.videoLastSample) {\n        var videoLastSample = this.videoLastSample;\n        videoLastSample.duration = firstSample.dts - videoLastSample.dts;\n        videoSamples.unshift(this.videoLastSample);\n      }\n\n      // videoSamples.forEach((sample, idx) => {\n      //   if (idx !== 0 && idx !== videoSamples.length - 1) {\n      //     const pre = videoSamples[idx - 1];\n      //     const next = videoSamples[idx + 1];\n      //     if (sample.dts - pre.dts < 5) {\n      //       sample.dts = (pre.dts + next.dts) / 2\n      //       sample.pts = (pre.pts + next.pts) / 2\n      //     }\n      //   }\n      // })\n\n      this.videoLastSample = curLastSample;\n\n      this.videoTrack.samples = videoSamples;\n    }\n  }, {\n    key: 'doFixAudio',\n    value: function doFixAudio(first, streamChangeStart) {\n      var _this = this;\n\n      var _audioTrack = this.audioTrack,\n          audioSamples = _audioTrack.samples,\n          meta = _audioTrack.meta;\n\n\n      if (!audioSamples || !audioSamples.length) {\n        return;\n      }\n\n      this.fixAudioRefSampleDuration(meta);\n\n      for (var i = 0, len = audioSamples.length; i < len; i++) {\n        var sample = audioSamples[i];\n        sample.originDts = sample.dts;\n      }\n\n      // console.log(`audio lastSample, ${audioSamples[audioSamples.length - 1].dts}`)\n\n      var samplesLen = audioSamples.length;\n      var silentFrame = AAC.getSilentFrame(meta.codec, meta.channelCount);\n      var iRefSampleDuration = Math.floor(meta.refSampleDuration);\n\n      var firstSample = this._firstAudioSample;\n\n      var _firstSample = audioSamples[0];\n\n      logger.log(this.TAG, 'doFixAudio::  _audioLargeGap: ' + this._audioLargeGap + ', streamChangeStart:' + streamChangeStart + ' ,  nextAudioDts:' + this.nextAudioDts + ',  audio: firstDTS:' + _firstSample.dts + ' ,firstPTS:' + _firstSample.pts + ' ,lastDTS:' + audioSamples[samplesLen - 1].dts + ' , lastPTS: ' + audioSamples[samplesLen - 1].pts);\n\n      if (!first && this.nextAudioDts === null && _firstSample.options && _firstSample.options.start) {\n        if (streamChangeStart !== undefined) {\n          streamChangeStart = _firstSample.options.start;\n        }\n      }\n\n      if (!first && streamChangeStart === undefined && this.nextAudioDts && Compatibility.detectLargeGap(this.nextAudioDts || 0, _firstSample.dts + this._audioLargeGap)) {\n        // large gap 不准确，出现了非换流场景的时间戳跳变\n        this._audioLargeGap = this.nextAudioDts + meta.refSampleDuration - _firstSample.dts;\n      }\n\n      // 对audioSamples按照dts做排序\n      if (this._audioLargeGap !== 0) {\n        Compatibility.doFixLargeGap(audioSamples, this._audioLargeGap);\n      } else if (!first && (streamChangeStart !== undefined || Compatibility.detectLargeGap(this.nextAudioDts, _firstSample.dts))) {\n        if (streamChangeStart !== undefined) {\n          this.nextAudioDts = streamChangeStart; // FIX: Hls中途切codec，在如果直接seek到后面的点会导致largeGap计算失败\n        }\n        this._audioLargeGap = this.nextAudioDts - _firstSample.dts;\n\n        Compatibility.doFixLargeGap(audioSamples, this._audioLargeGap);\n      }\n      // step0. 首帧与video首帧间距大的问题\n      if (this._firstVideoSample && first) {\n        var videoFirstPts = this._firstVideoSample.originDts || this._firstVideoSample.dts;\n        var _gap = firstSample.dts - videoFirstPts;\n\n        if (_gap === this._videoLargeGap) {\n          // already fixed by doFixVideo\\\n        } else if (_gap > meta.refSampleDuration && _gap < 10 * meta.refSampleDuration) {\n          var silentSampleCount = Math.floor((firstSample.dts - videoFirstPts) / meta.refSampleDuration);\n\n          for (var _i3 = 0; _i3 < silentSampleCount; _i3++) {\n            var silentSample = {\n              data: silentFrame,\n              datasize: silentFrame.byteLength,\n              dts: firstSample.dts - (_i3 + 1) * meta.refSampleDuration,\n              filtered: 0\n            };\n\n            audioSamples.unshift(silentSample);\n\n            this.filledAudioSamples.push({\n              dts: silentSample.dts,\n              size: silentSample.data.byteLength\n            });\n          }\n          this._firstAudioSample = this.filledAudioSamples[0] || this._firstAudioSample;\n        } else if (_gap < -1 * meta.refSampleDuration) {\n          this._audioLargeGap = -1 * _gap;\n          Compatibility.doFixLargeGap(audioSamples, -1 * _gap);\n        }\n      }\n\n      var gap = void 0;\n      var firstDts = audioSamples[0].dts;\n\n      if (this.nextAudioDts) {\n        // step1. 处理samples段之间的丢帧情况\n        // 当发现duration差距大于1帧时进行补帧\n        gap = firstDts - this.nextAudioDts;\n        var absGap = Math.abs(gap);\n\n        if (gap >= iRefSampleDuration && gap < 100 * iRefSampleDuration) {\n          var silentFrameCount = Math.ceil(gap / iRefSampleDuration);\n\n          for (var _i4 = 0; _i4 < silentFrameCount; _i4++) {\n            var computed = firstDts - (_i4 + 1) * iRefSampleDuration;\n            var _silentSample = {\n              dts: computed > this.nextAudioDts ? computed : this.nextAudioDts,\n              pts: computed > this.nextAudioDts ? computed : this.nextAudioDts,\n              datasize: silentFrame.byteLength,\n              filtered: 0,\n              data: silentFrame\n            };\n\n            this.filledAudioSamples.push({\n              dts: _silentSample.dts,\n              size: _silentSample.data.byteLength\n            });\n            this.audioTrack.samples.unshift(_silentSample);\n            _firstSample = _silentSample;\n          }\n          this.emit(REMUX_EVENTS.DETECT_AUDIO_GAP, gap, silentFrameCount);\n        } else if (absGap < meta.refSampleDuration && absGap > 0) {\n          // 当差距比较小的时候将音频帧重定位\n          // console.log('重定位音频帧dts', audioSamples[0].dts, this.nextAudioDts)\n          _firstSample.dts = this.nextAudioDts;\n          _firstSample.pts = this.nextAudioDts;\n        } else if (gap < 0 && absGap < iRefSampleDuration) {\n          Compatibility.doFixLargeGap(audioSamples, -1 * gap);\n          this.emit(REMUX_EVENTS.DETECT_AUDIO_OVERLAP, gap);\n        }\n      }\n\n      var unSyncDuration = meta.refSampleDuration - iRefSampleDuration;\n      audioSamples.forEach(function (sample, idx) {\n        if (idx !== 0) {\n          var _lastSample = audioSamples[idx - 1];\n          sample.dts = sample.pts = _lastSample.dts + _lastSample.duration;\n        }\n        sample.duration = iRefSampleDuration;\n        _this.audioUnsyncTime = caculate.fixedFloat(_this.audioUnsyncTime + unSyncDuration, 2);\n        if (_this.audioUnsyncTime >= 1) {\n          sample.duration += 1;\n          _this.audioUnsyncTime -= 1;\n        }\n      });\n      var lastSample = audioSamples[audioSamples.length - 1];\n      var lastDts = lastSample.dts;\n      var lastDuration = lastSample.duration;\n      // const lastSampleDuration = audioSamples.length >= 2 ? lastOriginDts - audioSamples[audioSamples.length - 2].originDts : meta.refSampleDuration\n\n      this.lastAudioSamplesLen = samplesLen;\n      this.nextAudioDts = lastDts + (lastDuration || iRefSampleDuration);\n\n      this.audioTrack.samples = Compatibility.sortAudioSamples(audioSamples);\n    }\n  }, {\n    key: 'fixChangeStreamVideo',\n    value: function fixChangeStreamVideo(changeIdx) {\n      var samples = this.videoTrack.samples;\n\n      var prevDts = changeIdx === 0 ? this.videoLastSample ? this.videoLastSample.dts : this.getStreamChangeStart(samples[0]) : samples[changeIdx - 1].dts;\n      var curDts = samples[changeIdx].dts;\n      var isContinue = Math.abs(prevDts - curDts) <= 100;\n\n      if (isContinue) {\n        if (!samples[changeIdx].options) {\n          samples[changeIdx].options = {\n            isContinue: true\n          };\n        } else {\n          samples[changeIdx].options.isContinue = true;\n        }\n        return false;\n      }\n\n      this.emit(REMUX_EVENTS.DETECT_CHANGE_STREAM_DISCONTINUE);\n\n      var firstPartSamples = samples.slice(0, changeIdx);\n      var secondPartSamples = samples.slice(changeIdx);\n      var changeSample = samples[changeIdx];\n\n      var streamChangeStart = void 0;\n\n      this._videoLargeGap = 0;\n      this.videoLastSample = null;\n      if (changeSample.options && changeSample.options.start !== undefined) {\n        streamChangeStart = changeSample.options.start;\n      } else {\n        streamChangeStart = prevDts - this.videoDtsBase;\n      }\n\n      this.videoTrack.samples = samples.slice(0, changeIdx);\n\n      this.doFixVideo(false);\n\n      this.videoTrack.samples = samples.slice(changeIdx);\n\n      this.doFixVideo(false, streamChangeStart);\n\n      this.videoTrack.samples = firstPartSamples.concat(secondPartSamples);\n\n      return true;\n    }\n  }, {\n    key: 'fixChangeStreamAudio',\n    value: function fixChangeStreamAudio(changeIdx) {\n      var samples = this.audioTrack.samples;\n\n\n      var prevDts = changeIdx === 0 ? this.lastAudioDts : samples[changeIdx - 1].dts;\n      var curDts = samples[changeIdx].dts;\n      var isContinue = Math.abs(prevDts - curDts) <= 1000;\n\n      if (isContinue) {\n        if (!samples[changeIdx].options) {\n          samples[changeIdx].options = {\n            isContinue: true\n          };\n        } else {\n          samples[changeIdx].options.isContinue = true;\n        }\n        return false;\n      }\n      this.emit(REMUX_EVENTS.DETECT_CHANGE_STREAM_DISCONTINUE);\n      this._audioLargeGap = 0;\n      var cacheNextAudioDts = this.nextAudioDts;\n      this.nextAudioDts = null;\n      var firstPartSamples = samples.slice(0, changeIdx);\n      var secondPartSamples = samples.slice(changeIdx);\n      var changeSample = samples[changeIdx];\n\n      var streamChangeStart = void 0;\n      if (changeSample.options && changeSample.options.start !== undefined) {\n        streamChangeStart = changeSample.options.start;\n      } else {\n        streamChangeStart = cacheNextAudioDts;\n        changeSample.options.isContinue = true;\n      }\n\n      this.audioTrack.samples = firstPartSamples;\n\n      this.doFixAudio(false);\n\n      this.audioTrack.samples = secondPartSamples;\n\n      this.doFixAudio(false, streamChangeStart);\n\n      this.audioTrack.samples = firstPartSamples.concat(secondPartSamples);\n\n      return true;\n    }\n  }, {\n    key: 'getFirstSample',\n    value: function getFirstSample() {\n      // 获取video和audio的首帧数据\n      var videoSamples = this.videoTrack.samples;\n      var audioSamples = this.audioTrack.samples;\n\n\n      var isFirstVideoSamples = false;\n      var isFirstAudioSamples = false;\n\n      if (!this._firstVideoSample && videoSamples.length) {\n        this._firstVideoSample = Compatibility.findFirstVideoSample(videoSamples);\n        this.removeInvalidSamples();\n        isFirstVideoSamples = true;\n      }\n\n      if (!this._firstAudioSample && audioSamples.length) {\n        this._firstAudioSample = Compatibility.findFirstAudioSample(audioSamples); // 寻找dts最小的帧作为首个音频帧\n        this.removeInvalidSamples();\n        isFirstAudioSamples = true;\n      }\n\n      return {\n        isFirstVideoSamples: isFirstVideoSamples,\n        isFirstAudioSamples: isFirstAudioSamples\n      };\n    }\n\n    /**\n     * 在没有refSampleDuration的问题流中，\n     */\n\n  }, {\n    key: 'fixVideoRefSampleDuration',\n    value: function fixVideoRefSampleDuration(meta, samples) {\n      if (!meta) {\n        return;\n      }\n      var allSamplesCount = this.allVideoSamplesCount;\n      var firstDts = this._firstVideoSample.dts;\n      var filledSamplesCount = this.filledVideoSamples.length;\n      if (!Compatibility.isRefSampleDurationValid(meta.refSampleDuration)) {\n        if (samples.length >= 1) {\n          var lastDts = samples[samples.length - 1].dts;\n\n          var fixed = Math.floor((lastDts - firstDts) / (allSamplesCount + filledSamplesCount - 1)); // 将refSampleDuration重置为计算后的平均值\n\n          if (Compatibility.isRefSampleDurationValid(fixed)) {\n            meta.refSampleDuration = fixed;\n          }\n        }\n      } else if (meta.refSampleDuration) {\n        if (samples.length >= 5) {\n          var _lastDts = samples[samples.length - 1].dts;\n          var _firstDts = samples[0].dts;\n          var durationAvg = (_lastDts - _firstDts) / (samples.length - 1);\n          if (durationAvg > 0 && durationAvg < 1000) {\n            var _fixed = Math.floor(Math.abs(meta.refSampleDuration - durationAvg) <= 5 ? meta.refSampleDuration : durationAvg); // 将refSampleDuration重置为计算后的平均值\n            if (Compatibility.isRefSampleDurationValid(_fixed)) {\n              meta.refSampleDuration = _fixed;\n            }\n          }\n        }\n      }\n\n      if (!Compatibility.isRefSampleDurationValid(meta.refSampleDuration)) {\n        meta.refSampleDuration = 66;\n      }\n    }\n  }, {\n    key: 'fixAudioRefSampleDuration',\n    value: function fixAudioRefSampleDuration(meta) {\n      if (!meta) {\n        return;\n      }\n      meta.refSampleDuration = caculate.fixedFloat(meta.timescale * 1024 / meta.sampleRate, isSafari ? 0 : 2);\n    }\n\n    /**\n     * 记录截止目前一共播放了多少帧\n     */\n\n  }, {\n    key: 'recordSamplesCount',\n    value: function recordSamplesCount() {\n      var audioTrack = this.audioTrack,\n          videoTrack = this.videoTrack;\n\n\n      this.allAudioSamplesCount += audioTrack.samples.length;\n      this.allVideoSamplesCount += videoTrack.samples.length;\n    }\n\n    /**\n     * 去除不合法的帧（倒退、重复帧）\n     */\n\n  }, {\n    key: 'removeInvalidSamples',\n    value: function removeInvalidSamples() {\n      var firstAudioSample = this.audioTrack.samples[0];\n      var firstVideoSample = this.videoTrack.samples[0];\n      // const { _firstVideoSample, _firstAudioSample } = this\n\n      if (firstAudioSample) {\n        this.audioTrack.samples = this.audioTrack.samples.filter(function (sample, index) {\n          if (sample === firstAudioSample) {\n            return true;\n          }\n          return sample.dts >= firstAudioSample.dts;\n        });\n      }\n\n      if (firstVideoSample) {\n        this.videoTrack.samples = this.videoTrack.samples.filter(function (sample, index) {\n          if (sample === firstVideoSample) {\n            return true;\n          }\n          return sample.dts >= firstVideoSample.dts;\n        });\n      }\n    }\n  }, {\n    key: 'getStreamChangeStart',\n    value: function getStreamChangeStart(sample) {\n      if (sample.options && sample.options.start) {\n        return sample.options.start - this.dtsBase;\n      }\n      return Infinity;\n    }\n  }, {\n    key: 'tracks',\n    get: function get() {\n      return this._context.getInstance('TRACKS');\n    }\n  }, {\n    key: 'audioTrack',\n    get: function get() {\n      if (this.tracks && this.tracks.audioTrack) {\n        return this.tracks.audioTrack;\n      }\n      return {\n        samples: [],\n        meta: {}\n      };\n    }\n  }, {\n    key: 'videoTrack',\n    get: function get() {\n      if (this.tracks && this.tracks.videoTrack) {\n        return this.tracks.videoTrack;\n      }\n      return {\n        samples: [],\n        meta: {}\n      };\n    }\n  }, {\n    key: 'dtsBase',\n    get: function get() {\n      var remuxer = this._context.getInstance('MP4_REMUXER');\n      if (remuxer) {\n        return remuxer._dtsBase;\n      }\n      return 0;\n    }\n  }, {\n    key: 'audioDtsBase',\n    get: function get() {\n      var remuxer = this._context.getInstance('MP4_REMUXER');\n      if (remuxer && remuxer._audioDtsBase !== null) {\n        return remuxer._audioDtsBase;\n      }\n\n      return this.dtsBase;\n    }\n  }, {\n    key: 'videoDtsBase',\n    get: function get() {\n      var remuxer = this._context.getInstance('MP4_REMUXER');\n      if (remuxer && remuxer._videoDtsBase !== null) {\n        return remuxer._videoDtsBase;\n      }\n\n      return this.dtsBase;\n    }\n  }], [{\n    key: 'sortAudioSamples',\n    value: function sortAudioSamples(samples) {\n      if (samples.length === 1) {\n        return samples;\n      }\n\n      return [].concat(_toConsumableArray(samples)).sort(function (a, b) {\n        return a.dts - b.dts;\n      });\n    }\n  }, {\n    key: 'isRefSampleDurationValid',\n    value: function isRefSampleDurationValid(refSampleDuration) {\n      return refSampleDuration && refSampleDuration > 0 && !Number.isNaN(refSampleDuration);\n    }\n    /**\n     * 寻找dts最小的sample\n     * @param samples\n     */\n\n  }, {\n    key: 'findFirstAudioSample',\n    value: function findFirstAudioSample(samples) {\n      if (!samples || samples.length === 0) {\n        return null;\n      }\n\n      return Compatibility.sortAudioSamples(samples)[0];\n    }\n  }, {\n    key: 'findFirstVideoSample',\n    value: function findFirstVideoSample(samples) {\n      if (!samples.length) {\n        return null;\n      }\n\n      var sorted = [].concat(_toConsumableArray(samples)).sort(function (a, b) {\n        return a.dts - b.dts;\n      });\n\n      for (var i = 0, len = sorted.length; i < len; i++) {\n        if (sorted[i].isKeyframe) {\n          return sorted[i];\n        }\n      }\n    }\n  }, {\n    key: 'detectLargeGap',\n    value: function detectLargeGap(nextDts, firstSampleDts) {\n      if (nextDts === null) {\n        return;\n      }\n      return nextDts - firstSampleDts >= 1000 || firstSampleDts - nextDts >= 1000; // fix hls流出现大量流dts间距问题\n    }\n  }, {\n    key: 'doFixLargeGap',\n    value: function doFixLargeGap(samples, gap) {\n      // console.log('fix large gap...... ', gap)\n      for (var i = 0, len = samples.length; i < len; i++) {\n        var sample = samples[i];\n        sample.dts += gap;\n        if (sample.pts) {\n          sample.pts += gap;\n        }\n      }\n    }\n\n    /**\n     * 中途换流\n     *         |-------------------frag2---------------|\n     * | frag1 | -----sample 0~n -------sample n+1 ~ m |\n     *\n     * 换流可能开始于新分片的第一帧 或者分片中间\n     *\n     */\n\n  }, {\n    key: 'detectChangeStream',\n    value: function detectChangeStream(samples, isFirst) {\n      var changed = false;\n      var changedIdxes = [];\n      for (var i = 0, len = samples.length; i < len; i++) {\n        var sample = samples[i];\n        if (sample.options && sample.options.meta && !(isFirst && i === 0)) {\n          changed = true;\n          changedIdxes.push(i);\n          // break;\n        }\n      }\n\n      return {\n        changed: changed,\n        changedIdxes: changedIdxes\n      };\n    }\n  }]);\n\n  return Compatibility;\n}();\n\nexport default Compatibility;","var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar UTF8 = function () {\n  function UTF8() {\n    _classCallCheck(this, UTF8);\n  }\n\n  _createClass(UTF8, null, [{\n    key: 'decode',\n    value: function decode(uint8array) {\n      var out = [];\n      var input = uint8array;\n      var i = 0;\n      var length = uint8array.length;\n\n      while (i < length) {\n        if (input[i] < 0x80) {\n          out.push(String.fromCharCode(input[i]));\n          ++i;\n          continue;\n        } else if (input[i] < 0xC0) {\n          // fallthrough\n        } else if (input[i] < 0xE0) {\n          if (UTF8._checkContinuation(input, i, 1)) {\n            var ucs4 = (input[i] & 0x1F) << 6 | input[i + 1] & 0x3F;\n            if (ucs4 >= 0x80) {\n              out.push(String.fromCharCode(ucs4 & 0xFFFF));\n              i += 2;\n              continue;\n            }\n          }\n        } else if (input[i] < 0xF0) {\n          if (UTF8._checkContinuation(input, i, 2)) {\n            var _ucs = (input[i] & 0xF) << 12 | (input[i + 1] & 0x3F) << 6 | input[i + 2] & 0x3F;\n            if (_ucs >= 0x800 && (_ucs & 0xF800) !== 0xD800) {\n              out.push(String.fromCharCode(_ucs & 0xFFFF));\n              i += 3;\n              continue;\n            }\n          }\n        } else if (input[i] < 0xF8) {\n          if (UTF8._checkContinuation(input, i, 3)) {\n            var _ucs2 = (input[i] & 0x7) << 18 | (input[i + 1] & 0x3F) << 12 | (input[i + 2] & 0x3F) << 6 | input[i + 3] & 0x3F;\n            if (_ucs2 > 0x10000 && _ucs2 < 0x110000) {\n              _ucs2 -= 0x10000;\n              out.push(String.fromCharCode(_ucs2 >>> 10 | 0xD800));\n              out.push(String.fromCharCode(_ucs2 & 0x3FF | 0xDC00));\n              i += 4;\n              continue;\n            }\n          }\n        }\n        out.push(String.fromCharCode(0xFFFD));\n        ++i;\n      }\n\n      return out.join('');\n    }\n  }, {\n    key: '_checkContinuation',\n    value: function _checkContinuation(uint8array, start, checkLength) {\n      var array = uint8array;\n      if (start + checkLength < array.length) {\n        while (checkLength--) {\n          if ((array[++start] & 0xC0) !== 0x80) {\n            return false;\n          }\n        }\n        return true;\n      } else {\n        return false;\n      }\n    }\n  }]);\n\n  return UTF8;\n}();\n\nexport default UTF8;","import _AAC from './aac';\nimport _ADTS from './aac/adts';\nimport * as _avc from './avc';\nimport * as _hevc from './hevc';\nimport _Compat from './compat';\nimport _UTF8 from './utf8';\n\nexport var AAC = _AAC;\nexport var ADTS = _ADTS;\nexport var avc = _avc;\nexport var hevc = _hevc;\nexport var Compat = _Compat;\nexport var UTF8 = _UTF8;","import { avc } from 'xgplayer-helper-codec';\nimport { Stream as XgStream, VideoTrackMeta } from 'xgplayer-helper-models'\nimport { EVENTS as Events } from 'xgplayer-helper-utils'\n\nconst { NalUnit, Golomb } = avc;\nclass H264Demuxer {\n  constructor (options = {}) {\n    this._player = options.player;\n\n    this.videoMeta = new VideoTrackMeta()\n    this.videoTrack = {\n      samples: []\n    }\n    this.unusedUnits = [];\n    this.fps = options.fps || 30\n    this.currentSampleIdx = 0;\n    this.duration = 0;\n    this.sps = null;\n    this.pps = null;\n\n    this.dataLoadedTimer = null;\n  }\n\n  init () {\n    this.initEvents()\n  }\n\n  initEvents () {\n    this.on(Events.LOADER_EVENTS.LOADER_DATALOADED, this.handleDataLoaded.bind(this))\n    this.on(Events.LOADER_EVENTS.LOADER_COMPLETE, this.handleDataLoaded.bind(this))\n  }\n\n  load (url) {\n    this.emit(Events.LOADER_EVENTS.LADER_START, url);\n  }\n\n  handleDataLoaded () {\n    const buffer = this.buffer;\n\n    if (!buffer) {\n      return;\n    }\n    if (this.dataLoadedTimer) {\n      clearTimeout(this.dataLoadedTimer);\n      this.dataLoadedTimer = null;\n    }\n\n    const data = buffer.shift(buffer.length);\n    buffer.clear();\n    const stream = new XgStream(data.buffer);\n\n    const units = this.unusedUnits.concat(NalUnit.getNalunits(stream))\n\n    if (!this._player.config.isLive) {\n      if (units.length > 1) {\n        const lastUnit = units.pop();\n        const pushBackData = new Uint8Array(lastUnit.body.byteLength + 4)\n        pushBackData.set(new Uint8Array(lastUnit.header), 0);\n        pushBackData.set(lastUnit.body, 4);\n        buffer.push(pushBackData)\n\n        this.pushToMobileVideo(units);\n        if (this.buffer.length) {\n          this.dataLoadedTimer = setTimeout(() => {\n            this.handleDataLoaded();\n          }, 500)\n        }\n      } else if (units.length === 1){\n        buffer.push(new Uint8Array(data))\n        this.dataLoadedTimer = setTimeout(() => {\n          this.handleDataLoaded();\n        }, 500)\n      }\n    } else {\n      this.pushToMobileVideo(units);\n    }\n  }\n\n  pushToMobileVideo (units) {\n\n    const { samples, unused } = H264Demuxer.unitsToSamples(units);\n\n    this.unusedUnits = unused;\n\n    samples.forEach((sample) => {\n      const ts = Math.floor(1000 * this.currentSampleIdx++ / this.fps)\n      sample.dts = sample.pts = ts;\n      if (sample.sps) {\n        this.sps = true;\n        this.videoMeta.sps = sample.data.slice(4)\n        this.videoMeta.presentHeight = sample.sps.present_size.height;\n        this.videoMeta.presentWidth = sample.sps.present_size.width;\n      } else if (sample.pps) {\n        this.pps = true;\n        this.videoMeta.pps = sample.data.slice(4)\n      } else {\n        this.videoTrack.samples.push(sample);\n      }\n\n    })\n\n    if (this.sps && this.pps) {\n      this._player.video.setVideoMeta(this.videoMeta);\n      this.sps = null;\n      this.pps = null;\n    }\n    if (!this.intervalId && !this._player.config.isLive) {\n      this.intervalId = setInterval(() => {\n        this.handleDataLoaded()\n      }, 500)\n    } else {\n      this._player.video.onDemuxComplete(this.videoTrack);\n    }\n    this.duration = Math.round(Math.floor(this.currentSampleIdx / this.fps))\n    this._player.emit('durationchange')\n  }\n\n  destroy () {\n    this._player = null;\n    this.videoMeta = null\n    this.videoTrack = {\n      samples: []\n    }\n    this.fps = null\n    this.currentSampleIdx = null;\n    if (this.intervalId) {\n      window.clearInterval(this.intervalId);\n      this.intervalId = null;\n    }\n  }\n\n  static unitsToSamples (units) {\n    let temp = [];\n    const samples = []\n    units.forEach((unit) => {\n      const golomb = new Golomb(new Uint8Array(unit.body));\n      golomb.readByte();\n      if (!golomb.readUEG() || unit.sps || unit.pps) { // first_mb_slice\n        if (temp.length) {\n          samples.push(H264Demuxer.combineUnits(temp))\n        }\n        temp = [unit];\n      } else {\n        temp.push(unit)\n      }\n    })\n\n    return {\n      samples,\n      unused: temp\n    }\n  }\n\n  static combineUnits (units) {\n    let sps, pps;\n    const dataSize = units.reduce((result, unit) => {\n      if (unit.sps) {\n        sps = unit.sps;\n      } else if (unit.pps) {\n        pps = unit.pps;\n      }\n      return result + unit.header.byteLength + unit.body.byteLength;\n    }, 0)\n\n    const data = new Uint8Array(dataSize);\n    let offset = 0;\n    let isKeyframe;\n    units.forEach((unit) => {\n      data.set(new Uint8Array(unit.header), offset);\n      offset += unit.header.byteLength;\n      data.set(unit.body, offset);\n      offset += unit.body.byteLength;\n      if (unit.idr) {\n        isKeyframe = true\n      }\n    })\n\n    return {\n      data,\n      sps,\n      pps,\n      isKeyframe\n    }\n  }\n\n  get buffer () {\n    return this._context.getInstance('LOADER_BUFFER')\n  }\n}\n\nexport default H264Demuxer;\n","var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar mp4 = 'data:video/mp4;base64, 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';\n\n// Detect iOS browsers < version 10\nvar oldIOS = typeof navigator !== 'undefined' && parseFloat(('' + (/CPU.*OS ([0-9_]{3,4})[0-9_]{0,1}|(CPU like).*AppleWebKit.*Mobile/i.exec(navigator.userAgent) || [0, ''])[1]).replace('undefined', '3_2').replace('_', '.').replace('_', '')) < 10 && !window.MSStream;\n\n// Detect native Wake Lock API support\nvar nativeWakeLock = 'wakeLock' in navigator;\n\nvar NoSleep = function () {\n  function NoSleep() {\n    var _this = this;\n\n    _classCallCheck(this, NoSleep);\n\n    if (nativeWakeLock) {\n      this._wakeLock = null;\n      var handleVisibilityChange = function handleVisibilityChange() {\n        if (_this._wakeLock !== null && document.visibilityState === 'visible') {\n          _this.enable();\n        }\n      };\n      document.addEventListener('visibilitychange', handleVisibilityChange);\n      document.addEventListener('fullscreenchange', handleVisibilityChange);\n    } else if (oldIOS) {\n      this.noSleepTimer = null;\n    } else {\n      // Set up no sleep video element\n      this.noSleepVideo = document.createElement('video');\n\n      this.noSleepVideo.setAttribute('title', 'No Sleep');\n      this.noSleepVideo.setAttribute('playsinline', '');\n\n      this._addSourceToVideo(this.noSleepVideo, 'mp4', mp4);\n\n      this.noSleepVideo.addEventListener('loadedmetadata', function () {\n        _this.noSleepVideo.setAttribute('loop', '');\n      });\n    }\n  }\n\n  _createClass(NoSleep, [{\n    key: '_addSourceToVideo',\n    value: function _addSourceToVideo(element, type, dataURI) {\n      var source = document.createElement('source');\n      source.src = dataURI;\n      source.type = 'video/' + type;\n      element.appendChild(source);\n    }\n  }, {\n    key: 'enable',\n    value: function enable() {\n      var _this2 = this;\n\n      if (nativeWakeLock) {\n        navigator.wakeLock.request('screen').then(function (wakeLock) {\n          _this2._wakeLock = wakeLock;\n          console.log('Wake Lock active.');\n          _this2._wakeLock.addEventListener('release', function () {\n            // ToDo: Potentially emit an event for the page to observe since\n            // Wake Lock releases happen when page visibility changes.\n            // (https://web.dev/wakelock/#wake-lock-lifecycle)\n            console.log('Wake Lock released.');\n          });\n        }).catch(function (err) {\n          console.error(err.name + ', ' + err.message);\n        });\n      } else if (oldIOS) {\n        this.disable();\n        console.warn('\\n        NoSleep enabled for older iOS devices. This can interrupt\\n        active or long-running network requests from completing successfully.\\n        See https://github.com/richtr/NoSleep.js/issues/15 for more details.\\n      ');\n        this.noSleepTimer = window.setInterval(function () {\n          if (!document.hidden) {\n            window.location.href = window.location.href.split('#')[0];\n            window.setTimeout(window.stop, 0);\n          }\n        }, 15000);\n      } else if (this.noSleepVideo) {\n        this.noSleepVideo.play();\n      }\n    }\n  }, {\n    key: 'disable',\n    value: function disable() {\n      if (nativeWakeLock) {\n        this._wakeLock.release();\n        this._wakeLock = null;\n      } else if (oldIOS) {\n        if (this.noSleepTimer) {\n          console.warn('\\n          NoSleep now disabled for older iOS devices.\\n        ');\n          window.clearInterval(this.noSleepTimer);\n          this.noSleepTimer = null;\n        }\n      } else {\n        this.noSleepVideo.pause();\n      }\n    }\n  }]);\n\n  return NoSleep;\n}();\n\nexport default NoSleep;","(function () {\n  /*\n    Copyright (c) 2016 The Polymer Project Authors. All rights reserved.\n   This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\n   The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\n   The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\n   Code distributed by Google as part of the polymer project is also\n   subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n  */\n  'use strict';\n  var n = window.Document.prototype.createElement,\n      p = window.Document.prototype.createElementNS,\n      aa = window.Document.prototype.importNode,\n      ba = window.Document.prototype.prepend,\n      ca = window.Document.prototype.append,\n      da = window.DocumentFragment.prototype.prepend,\n      ea = window.DocumentFragment.prototype.append,\n      q = window.Node.prototype.cloneNode,\n      r = window.Node.prototype.appendChild,\n      t = window.Node.prototype.insertBefore,\n      u = window.Node.prototype.removeChild,\n      v = window.Node.prototype.replaceChild,\n      x = Object.getOwnPropertyDescriptor(window.Node.prototype, \"textContent\"),\n      y = window.Element.prototype.attachShadow,\n      z = Object.getOwnPropertyDescriptor(window.Element.prototype, \"innerHTML\"),\n      A = window.Element.prototype.getAttribute,\n      B = window.Element.prototype.setAttribute,\n      C = window.Element.prototype.removeAttribute,\n      D = window.Element.prototype.getAttributeNS,\n      E = window.Element.prototype.setAttributeNS,\n      F = window.Element.prototype.removeAttributeNS,\n      G = window.Element.prototype.insertAdjacentElement,\n      fa = window.Element.prototype.insertAdjacentHTML,\n      ha = window.Element.prototype.prepend,\n      ia = window.Element.prototype.append,\n      ja = window.Element.prototype.before,\n      ka = window.Element.prototype.after,\n      la = window.Element.prototype.replaceWith,\n      ma = window.Element.prototype.remove,\n      na = window.HTMLElement,\n      H = Object.getOwnPropertyDescriptor(window.HTMLElement.prototype, \"innerHTML\"),\n      oa = window.HTMLElement.prototype.insertAdjacentElement,\n      pa = window.HTMLElement.prototype.insertAdjacentHTML;var qa = new Set();\"annotation-xml color-profile font-face font-face-src font-face-uri font-face-format font-face-name missing-glyph\".split(\" \").forEach(function (a) {\n    return qa.add(a);\n  });function ra(a) {\n    var b = qa.has(a);a = /^[a-z][.0-9_a-z]*-[\\-.0-9_a-z]*$/.test(a);return !b && a;\n  }var sa = document.contains ? document.contains.bind(document) : document.documentElement.contains.bind(document.documentElement);\n  function I(a) {\n    var b = a.isConnected;if (void 0 !== b) return b;if (sa(a)) return !0;for (; a && !(a.__CE_isImportDocument || a instanceof Document);) {\n      a = a.parentNode || (window.ShadowRoot && a instanceof ShadowRoot ? a.host : void 0);\n    }return !(!a || !(a.__CE_isImportDocument || a instanceof Document));\n  }function J(a) {\n    var b = a.children;if (b) return Array.prototype.slice.call(b);b = [];for (a = a.firstChild; a; a = a.nextSibling) {\n      a.nodeType === Node.ELEMENT_NODE && b.push(a);\n    }return b;\n  }\n  function K(a, b) {\n    for (; b && b !== a && !b.nextSibling;) {\n      b = b.parentNode;\n    }return b && b !== a ? b.nextSibling : null;\n  }\n  function L(a, b, c) {\n    for (var f = a; f;) {\n      if (f.nodeType === Node.ELEMENT_NODE) {\n        var d = f;b(d);var e = d.localName;if (\"link\" === e && \"import\" === d.getAttribute(\"rel\")) {\n          f = d.import;void 0 === c && (c = new Set());if (f instanceof Node && !c.has(f)) for (c.add(f), f = f.firstChild; f; f = f.nextSibling) {\n            L(f, b, c);\n          }f = K(a, d);continue;\n        } else if (\"template\" === e) {\n          f = K(a, d);continue;\n        }if (d = d.__CE_shadowRoot) for (d = d.firstChild; d; d = d.nextSibling) {\n          L(d, b, c);\n        }\n      }f = f.firstChild ? f.firstChild : K(a, f);\n    }\n  }function M(a, b, c) {\n    a[b] = c;\n  };function ta(a) {\n    var b = document;this.c = a;this.a = b;this.b = void 0;N(this.c, this.a);\"loading\" === this.a.readyState && (this.b = new MutationObserver(this.f.bind(this)), this.b.observe(this.a, { childList: !0, subtree: !0 }));\n  }function ua(a) {\n    a.b && a.b.disconnect();\n  }ta.prototype.f = function (a) {\n    var b = this.a.readyState;\"interactive\" !== b && \"complete\" !== b || ua(this);for (b = 0; b < a.length; b++) {\n      for (var c = a[b].addedNodes, f = 0; f < c.length; f++) {\n        N(this.c, c[f]);\n      }\n    }\n  };function va() {\n    var a = this;this.b = this.a = void 0;this.c = new Promise(function (b) {\n      a.b = b;a.a && b(a.a);\n    });\n  }function wa(a) {\n    if (a.a) throw Error(\"Already resolved.\");a.a = void 0;a.b && a.b(void 0);\n  };function O(a) {\n    this.f = new Map();this.g = new Map();this.l = new Map();this.i = !1;this.b = a;this.j = new Map();this.c = function (b) {\n      return b();\n    };this.a = !1;this.h = [];this.m = a.f ? new ta(a) : void 0;\n  }O.prototype.o = function (a, b) {\n    var c = this;if (!(b instanceof Function)) throw new TypeError(\"Custom element constructor getters must be functions.\");xa(this, a);this.f.set(a, b);this.h.push(a);this.a || (this.a = !0, this.c(function () {\n      return ya(c);\n    }));\n  };\n  O.prototype.define = function (a, b) {\n    var c = this;if (!(b instanceof Function)) throw new TypeError(\"Custom element constructors must be functions.\");xa(this, a);za(this, a, b);this.h.push(a);this.a || (this.a = !0, this.c(function () {\n      return ya(c);\n    }));\n  };function xa(a, b) {\n    if (!ra(b)) throw new SyntaxError(\"The element name '\" + b + \"' is not valid.\");if (P(a, b)) throw Error(\"A custom element with name '\" + b + \"' has already been defined.\");if (a.i) throw Error(\"A custom element is already being defined.\");\n  }\n  function za(a, b, c) {\n    a.i = !0;var f;try {\n      var d = function d(m) {\n        var w = e[m];if (void 0 !== w && !(w instanceof Function)) throw Error(\"The '\" + m + \"' callback must be a function.\");return w;\n      },\n          e = c.prototype;if (!(e instanceof Object)) throw new TypeError(\"The custom element constructor's prototype is not an object.\");var g = d(\"connectedCallback\");var h = d(\"disconnectedCallback\");var k = d(\"adoptedCallback\");var l = (f = d(\"attributeChangedCallback\")) && c.observedAttributes || [];\n    } catch (m) {\n      throw m;\n    } finally {\n      a.i = !1;\n    }c = { localName: b, constructorFunction: c,\n      connectedCallback: g, disconnectedCallback: h, adoptedCallback: k, attributeChangedCallback: f, observedAttributes: l, constructionStack: [] };a.g.set(b, c);a.l.set(c.constructorFunction, c);return c;\n  }O.prototype.upgrade = function (a) {\n    N(this.b, a);\n  };\n  function ya(a) {\n    if (!1 !== a.a) {\n      a.a = !1;for (var b = [], c = a.h, f = new Map(), d = 0; d < c.length; d++) {\n        f.set(c[d], []);\n      }N(a.b, document, { upgrade: function upgrade(k) {\n          if (void 0 === k.__CE_state) {\n            var l = k.localName,\n                m = f.get(l);m ? m.push(k) : a.g.has(l) && b.push(k);\n          }\n        } });for (d = 0; d < b.length; d++) {\n        Q(a.b, b[d]);\n      }for (d = 0; d < c.length; d++) {\n        for (var e = c[d], g = f.get(e), h = 0; h < g.length; h++) {\n          Q(a.b, g[h]);\n        }(e = a.j.get(e)) && wa(e);\n      }c.length = 0;\n    }\n  }O.prototype.get = function (a) {\n    if (a = P(this, a)) return a.constructorFunction;\n  };\n  O.prototype.whenDefined = function (a) {\n    if (!ra(a)) return Promise.reject(new SyntaxError(\"'\" + a + \"' is not a valid custom element name.\"));var b = this.j.get(a);if (b) return b.c;b = new va();this.j.set(a, b);var c = this.g.has(a) || this.f.has(a);a = -1 === this.h.indexOf(a);c && a && wa(b);return b.c;\n  };O.prototype.polyfillWrapFlushCallback = function (a) {\n    this.m && ua(this.m);var b = this.c;this.c = function (c) {\n      return a(function () {\n        return b(c);\n      });\n    };\n  };\n  function P(a, b) {\n    var c = a.g.get(b);if (c) return c;if (c = a.f.get(b)) {\n      a.f.delete(b);try {\n        return za(a, b, c());\n      } catch (f) {\n        R(f);\n      }\n    }\n  }window.CustomElementRegistry = O;O.prototype.define = O.prototype.define;O.prototype.upgrade = O.prototype.upgrade;O.prototype.get = O.prototype.get;O.prototype.whenDefined = O.prototype.whenDefined;O.prototype.polyfillDefineLazy = O.prototype.o;O.prototype.polyfillWrapFlushCallback = O.prototype.polyfillWrapFlushCallback;function S() {\n    var a = T && T.noDocumentConstructionObserver,\n        b = T && T.shadyDomFastWalk;this.b = [];this.c = [];this.a = !1;this.shadyDomFastWalk = b;this.f = !a;\n  }function U(a, b, c, f) {\n    var d = window.ShadyDOM;if (a.shadyDomFastWalk && d && d.inUse) {\n      if (b.nodeType === Node.ELEMENT_NODE && c(b), b.querySelectorAll) for (a = d.nativeMethods.querySelectorAll.call(b, \"*\"), b = 0; b < a.length; b++) {\n        c(a[b]);\n      }\n    } else L(b, c, f);\n  }function Aa(a, b) {\n    a.a = !0;a.b.push(b);\n  }function Ba(a, b) {\n    a.a = !0;a.c.push(b);\n  }function V(a, b) {\n    a.a && U(a, b, function (c) {\n      return W(a, c);\n    });\n  }\n  function W(a, b) {\n    if (a.a && !b.__CE_patched) {\n      b.__CE_patched = !0;for (var c = 0; c < a.b.length; c++) {\n        a.b[c](b);\n      }for (c = 0; c < a.c.length; c++) {\n        a.c[c](b);\n      }\n    }\n  }function X(a, b) {\n    var c = [];U(a, b, function (d) {\n      return c.push(d);\n    });for (b = 0; b < c.length; b++) {\n      var f = c[b];1 === f.__CE_state ? a.connectedCallback(f) : Q(a, f);\n    }\n  }function Y(a, b) {\n    var c = [];U(a, b, function (d) {\n      return c.push(d);\n    });for (b = 0; b < c.length; b++) {\n      var f = c[b];1 === f.__CE_state && a.disconnectedCallback(f);\n    }\n  }\n  function N(a, b, c) {\n    c = void 0 === c ? {} : c;var f = c.s,\n        d = c.upgrade || function (g) {\n      return Q(a, g);\n    },\n        e = [];U(a, b, function (g) {\n      a.a && W(a, g);if (\"link\" === g.localName && \"import\" === g.getAttribute(\"rel\")) {\n        var h = g.import;h instanceof Node && (h.__CE_isImportDocument = !0, h.__CE_registry = document.__CE_registry);h && \"complete\" === h.readyState ? h.__CE_documentLoadHandled = !0 : g.addEventListener(\"load\", function () {\n          var k = g.import;if (!k.__CE_documentLoadHandled) {\n            k.__CE_documentLoadHandled = !0;var l = new Set();f && (f.forEach(function (m) {\n              return l.add(m);\n            }), l.delete(k));N(a, k, { s: l, upgrade: d });\n          }\n        });\n      } else e.push(g);\n    }, f);for (b = 0; b < e.length; b++) {\n      d(e[b]);\n    }\n  }\n  function Q(a, b) {\n    try {\n      var c = b.ownerDocument,\n          f = c.__CE_registry;var d = f && (c.defaultView || c.__CE_isImportDocument) ? P(f, b.localName) : void 0;if (d && void 0 === b.__CE_state) {\n        d.constructionStack.push(b);try {\n          try {\n            if (new d.constructorFunction() !== b) throw Error(\"The custom element constructor did not produce the element being upgraded.\");\n          } finally {\n            d.constructionStack.pop();\n          }\n        } catch (k) {\n          throw b.__CE_state = 2, k;\n        }b.__CE_state = 1;b.__CE_definition = d;if (d.attributeChangedCallback && b.hasAttributes()) {\n          var e = d.observedAttributes;\n          for (d = 0; d < e.length; d++) {\n            var g = e[d],\n                h = b.getAttribute(g);null !== h && a.attributeChangedCallback(b, g, null, h, null);\n          }\n        }I(b) && a.connectedCallback(b);\n      }\n    } catch (k) {\n      R(k);\n    }\n  }S.prototype.connectedCallback = function (a) {\n    var b = a.__CE_definition;if (b.connectedCallback) try {\n      b.connectedCallback.call(a);\n    } catch (c) {\n      R(c);\n    }\n  };S.prototype.disconnectedCallback = function (a) {\n    var b = a.__CE_definition;if (b.disconnectedCallback) try {\n      b.disconnectedCallback.call(a);\n    } catch (c) {\n      R(c);\n    }\n  };\n  S.prototype.attributeChangedCallback = function (a, b, c, f, d) {\n    var e = a.__CE_definition;if (e.attributeChangedCallback && -1 < e.observedAttributes.indexOf(b)) try {\n      e.attributeChangedCallback.call(a, b, c, f, d);\n    } catch (g) {\n      R(g);\n    }\n  };\n  function Ca(a, b, c, f) {\n    var d = b.__CE_registry;if (d && (null === f || \"http://www.w3.org/1999/xhtml\" === f) && (d = P(d, c))) try {\n      var e = new d.constructorFunction();if (void 0 === e.__CE_state || void 0 === e.__CE_definition) throw Error(\"Failed to construct '\" + c + \"': The returned value was not constructed with the HTMLElement constructor.\");if (\"http://www.w3.org/1999/xhtml\" !== e.namespaceURI) throw Error(\"Failed to construct '\" + c + \"': The constructed element's namespace must be the HTML namespace.\");if (e.hasAttributes()) throw Error(\"Failed to construct '\" + c + \"': The constructed element must not have any attributes.\");if (null !== e.firstChild) throw Error(\"Failed to construct '\" + c + \"': The constructed element must not have any children.\");if (null !== e.parentNode) throw Error(\"Failed to construct '\" + c + \"': The constructed element must not have a parent node.\");if (e.ownerDocument !== b) throw Error(\"Failed to construct '\" + c + \"': The constructed element's owner document is incorrect.\");if (e.localName !== c) throw Error(\"Failed to construct '\" + c + \"': The constructed element's local name is incorrect.\");\n      return e;\n    } catch (g) {\n      return R(g), b = null === f ? n.call(b, c) : p.call(b, f, c), Object.setPrototypeOf(b, HTMLUnknownElement.prototype), b.__CE_state = 2, b.__CE_definition = void 0, W(a, b), b;\n    }b = null === f ? n.call(b, c) : p.call(b, f, c);W(a, b);return b;\n  }\n  function R(a) {\n    var b = a.message,\n        c = a.sourceURL || a.fileName || \"\",\n        f = a.line || a.lineNumber || 0,\n        d = a.column || a.columnNumber || 0,\n        e = void 0;void 0 === ErrorEvent.prototype.initErrorEvent ? e = new ErrorEvent(\"error\", { cancelable: !0, message: b, filename: c, lineno: f, colno: d, error: a }) : (e = document.createEvent(\"ErrorEvent\"), e.initErrorEvent(\"error\", !1, !0, b, c, f), e.preventDefault = function () {\n      Object.defineProperty(this, \"defaultPrevented\", { configurable: !0, get: function get() {\n          return !0;\n        } });\n    });void 0 === e.error && Object.defineProperty(e, \"error\", { configurable: !0, enumerable: !0, get: function get() {\n        return a;\n      } });window.dispatchEvent(e);e.defaultPrevented || console.error(a);\n  };var Da = new function () {}();function Ea(a) {\n    window.HTMLElement = function () {\n      function b() {\n        var c = this.constructor;var f = document.__CE_registry.l.get(c);if (!f) throw Error(\"Failed to construct a custom element: The constructor was not registered with `customElements`.\");var d = f.constructionStack;if (0 === d.length) return d = n.call(document, f.localName), Object.setPrototypeOf(d, c.prototype), d.__CE_state = 1, d.__CE_definition = f, W(a, d), d;var e = d.length - 1,\n            g = d[e];if (g === Da) throw Error(\"Failed to construct '\" + f.localName + \"': This element was already constructed.\");\n        d[e] = Da;Object.setPrototypeOf(g, c.prototype);W(a, g);return g;\n      }b.prototype = na.prototype;Object.defineProperty(b.prototype, \"constructor\", { writable: !0, configurable: !0, enumerable: !1, value: b });return b;\n    }();\n  };function Z(a, b, c) {\n    function f(d) {\n      return function (e) {\n        for (var g = [], h = 0; h < arguments.length; ++h) {\n          g[h] = arguments[h];\n        }h = [];for (var k = [], l = 0; l < g.length; l++) {\n          var m = g[l];m instanceof Element && I(m) && k.push(m);if (m instanceof DocumentFragment) for (m = m.firstChild; m; m = m.nextSibling) {\n            h.push(m);\n          } else h.push(m);\n        }d.apply(this, g);for (g = 0; g < k.length; g++) {\n          Y(a, k[g]);\n        }if (I(this)) for (g = 0; g < h.length; g++) {\n          k = h[g], k instanceof Element && X(a, k);\n        }\n      };\n    }void 0 !== c.prepend && M(b, \"prepend\", f(c.prepend));void 0 !== c.append && M(b, \"append\", f(c.append));\n  }\n  ;function Fa(a) {\n    M(Document.prototype, \"createElement\", function (b) {\n      return Ca(a, this, b, null);\n    });M(Document.prototype, \"importNode\", function (b, c) {\n      b = aa.call(this, b, !!c);this.__CE_registry ? N(a, b) : V(a, b);return b;\n    });M(Document.prototype, \"createElementNS\", function (b, c) {\n      return Ca(a, this, c, b);\n    });Z(a, Document.prototype, { prepend: ba, append: ca });\n  };function Ga(a) {\n    function b(c, f) {\n      Object.defineProperty(c, \"textContent\", { enumerable: f.enumerable, configurable: !0, get: f.get, set: function set(d) {\n          if (this.nodeType === Node.TEXT_NODE) f.set.call(this, d);else {\n            var e = void 0;if (this.firstChild) {\n              var g = this.childNodes,\n                  h = g.length;if (0 < h && I(this)) {\n                e = Array(h);for (var k = 0; k < h; k++) {\n                  e[k] = g[k];\n                }\n              }\n            }f.set.call(this, d);if (e) for (d = 0; d < e.length; d++) {\n              Y(a, e[d]);\n            }\n          }\n        } });\n    }M(Node.prototype, \"insertBefore\", function (c, f) {\n      if (c instanceof DocumentFragment) {\n        var d = J(c);c = t.call(this, c, f);if (I(this)) for (f = 0; f < d.length; f++) {\n          X(a, d[f]);\n        }return c;\n      }d = c instanceof Element && I(c);f = t.call(this, c, f);d && Y(a, c);I(this) && X(a, c);return f;\n    });M(Node.prototype, \"appendChild\", function (c) {\n      if (c instanceof DocumentFragment) {\n        var f = J(c);c = r.call(this, c);if (I(this)) for (var d = 0; d < f.length; d++) {\n          X(a, f[d]);\n        }return c;\n      }f = c instanceof Element && I(c);d = r.call(this, c);f && Y(a, c);I(this) && X(a, c);return d;\n    });M(Node.prototype, \"cloneNode\", function (c) {\n      c = q.call(this, !!c);this.ownerDocument.__CE_registry ? N(a, c) : V(a, c);return c;\n    });M(Node.prototype, \"removeChild\", function (c) {\n      var f = c instanceof Element && I(c),\n          d = u.call(this, c);f && Y(a, c);return d;\n    });M(Node.prototype, \"replaceChild\", function (c, f) {\n      if (c instanceof DocumentFragment) {\n        var d = J(c);c = v.call(this, c, f);if (I(this)) for (Y(a, f), f = 0; f < d.length; f++) {\n          X(a, d[f]);\n        }return c;\n      }d = c instanceof Element && I(c);var e = v.call(this, c, f),\n          g = I(this);g && Y(a, f);d && Y(a, c);g && X(a, c);return e;\n    });x && x.get ? b(Node.prototype, x) : Aa(a, function (c) {\n      b(c, { enumerable: !0, configurable: !0, get: function get() {\n          for (var f = [], d = this.firstChild; d; d = d.nextSibling) {\n            d.nodeType !== Node.COMMENT_NODE && f.push(d.textContent);\n          }return f.join(\"\");\n        }, set: function set(f) {\n          for (; this.firstChild;) {\n            u.call(this, this.firstChild);\n          }null != f && \"\" !== f && r.call(this, document.createTextNode(f));\n        } });\n    });\n  };function Ha(a) {\n    function b(f) {\n      return function (d) {\n        for (var e = [], g = 0; g < arguments.length; ++g) {\n          e[g] = arguments[g];\n        }g = [];for (var h = [], k = 0; k < e.length; k++) {\n          var l = e[k];l instanceof Element && I(l) && h.push(l);if (l instanceof DocumentFragment) for (l = l.firstChild; l; l = l.nextSibling) {\n            g.push(l);\n          } else g.push(l);\n        }f.apply(this, e);for (e = 0; e < h.length; e++) {\n          Y(a, h[e]);\n        }if (I(this)) for (e = 0; e < g.length; e++) {\n          h = g[e], h instanceof Element && X(a, h);\n        }\n      };\n    }var c = Element.prototype;void 0 !== ja && M(c, \"before\", b(ja));void 0 !== ka && M(c, \"after\", b(ka));void 0 !== la && M(c, \"replaceWith\", function (f) {\n      for (var d = [], e = 0; e < arguments.length; ++e) {\n        d[e] = arguments[e];\n      }e = [];for (var g = [], h = 0; h < d.length; h++) {\n        var k = d[h];k instanceof Element && I(k) && g.push(k);if (k instanceof DocumentFragment) for (k = k.firstChild; k; k = k.nextSibling) {\n          e.push(k);\n        } else e.push(k);\n      }h = I(this);la.apply(this, d);for (d = 0; d < g.length; d++) {\n        Y(a, g[d]);\n      }if (h) for (Y(a, this), d = 0; d < e.length; d++) {\n        g = e[d], g instanceof Element && X(a, g);\n      }\n    });void 0 !== ma && M(c, \"remove\", function () {\n      var f = I(this);ma.call(this);f && Y(a, this);\n    });\n  };function Ia(a) {\n    function b(d, e) {\n      Object.defineProperty(d, \"innerHTML\", { enumerable: e.enumerable, configurable: !0, get: e.get, set: function set(g) {\n          var h = this,\n              k = void 0;I(this) && (k = [], U(a, this, function (w) {\n            w !== h && k.push(w);\n          }));e.set.call(this, g);if (k) for (var l = 0; l < k.length; l++) {\n            var m = k[l];1 === m.__CE_state && a.disconnectedCallback(m);\n          }this.ownerDocument.__CE_registry ? N(a, this) : V(a, this);return g;\n        } });\n    }function c(d, e) {\n      M(d, \"insertAdjacentElement\", function (g, h) {\n        var k = I(h);g = e.call(this, g, h);k && Y(a, h);I(g) && X(a, h);return g;\n      });\n    }\n    function f(d, e) {\n      function g(h, k) {\n        for (var l = []; h !== k; h = h.nextSibling) {\n          l.push(h);\n        }for (k = 0; k < l.length; k++) {\n          N(a, l[k]);\n        }\n      }M(d, \"insertAdjacentHTML\", function (h, k) {\n        h = h.toLowerCase();if (\"beforebegin\" === h) {\n          var l = this.previousSibling;e.call(this, h, k);g(l || this.parentNode.firstChild, this);\n        } else if (\"afterbegin\" === h) l = this.firstChild, e.call(this, h, k), g(this.firstChild, l);else if (\"beforeend\" === h) l = this.lastChild, e.call(this, h, k), g(l || this.firstChild, null);else if (\"afterend\" === h) l = this.nextSibling, e.call(this, h, k), g(this.nextSibling, l);else throw new SyntaxError(\"The value provided (\" + String(h) + \") is not one of 'beforebegin', 'afterbegin', 'beforeend', or 'afterend'.\");\n      });\n    }y && M(Element.prototype, \"attachShadow\", function (d) {\n      d = y.call(this, d);if (a.a && !d.__CE_patched) {\n        d.__CE_patched = !0;for (var e = 0; e < a.b.length; e++) {\n          a.b[e](d);\n        }\n      }return this.__CE_shadowRoot = d;\n    });z && z.get ? b(Element.prototype, z) : H && H.get ? b(HTMLElement.prototype, H) : Ba(a, function (d) {\n      b(d, { enumerable: !0, configurable: !0, get: function get() {\n          return q.call(this, !0).innerHTML;\n        }, set: function set(e) {\n          var g = \"template\" === this.localName,\n              h = g ? this.content : this,\n              k = p.call(document, this.namespaceURI, this.localName);for (k.innerHTML = e; 0 < h.childNodes.length;) {\n            u.call(h, h.childNodes[0]);\n          }for (e = g ? k.content : k; 0 < e.childNodes.length;) {\n            r.call(h, e.childNodes[0]);\n          }\n        } });\n    });M(Element.prototype, \"setAttribute\", function (d, e) {\n      if (1 !== this.__CE_state) return B.call(this, d, e);var g = A.call(this, d);B.call(this, d, e);e = A.call(this, d);a.attributeChangedCallback(this, d, g, e, null);\n    });M(Element.prototype, \"setAttributeNS\", function (d, e, g) {\n      if (1 !== this.__CE_state) return E.call(this, d, e, g);var h = D.call(this, d, e);E.call(this, d, e, g);g = D.call(this, d, e);a.attributeChangedCallback(this, e, h, g, d);\n    });M(Element.prototype, \"removeAttribute\", function (d) {\n      if (1 !== this.__CE_state) return C.call(this, d);var e = A.call(this, d);C.call(this, d);null !== e && a.attributeChangedCallback(this, d, e, null, null);\n    });M(Element.prototype, \"removeAttributeNS\", function (d, e) {\n      if (1 !== this.__CE_state) return F.call(this, d, e);var g = D.call(this, d, e);F.call(this, d, e);var h = D.call(this, d, e);g !== h && a.attributeChangedCallback(this, e, g, h, d);\n    });oa ? c(HTMLElement.prototype, oa) : G && c(Element.prototype, G);pa ? f(HTMLElement.prototype, pa) : fa && f(Element.prototype, fa);Z(a, Element.prototype, { prepend: ha, append: ia });Ha(a);\n  };var T = window.customElements;function Ja() {\n    var a = new S();Ea(a);Fa(a);Z(a, DocumentFragment.prototype, { prepend: da, append: ea });Ga(a);Ia(a);a = new O(a);document.__CE_registry = a;Object.defineProperty(window, \"customElements\", { configurable: !0, enumerable: !0, value: a });\n  }T && !T.forcePolyfill && \"function\" == typeof T.define && \"function\" == typeof T.get || Ja();window.__CE_installPolyfill = Ja;\n}).call(self);\n\n//# sourceMappingURL=custom-elements.min.js.map","/**\n * @license\n * Copyright (c) 2016 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n */\n\n/**\n * This shim allows elements written in, or compiled to, ES5 to work on native\n * implementations of Custom Elements v1. It sets new.target to the value of\n * this.constructor so that the native HTMLElement constructor can access the\n * current under-construction element's definition.\n */\n(function () {\n  if (\n  // No Reflect, no classes, no need for shim because native custom elements\n  // require ES2015 classes or Reflect.\n  window.Reflect === undefined || window.customElements === undefined ||\n  // The webcomponentsjs custom elements polyfill doesn't require\n  // ES2015-compatible construction (`super()` or `Reflect.construct`).\n  window.customElements.polyfillWrapFlushCallback) {\n    return;\n  }\n  var BuiltInHTMLElement = HTMLElement;\n  /**\n   * With jscompiler's RECOMMENDED_FLAGS the function name will be optimized away.\n   * However, if we declare the function as a property on an object literal, and\n   * use quotes for the property name, then closure will leave that much intact,\n   * which is enough for the JS VM to correctly set Function.prototype.name.\n   */\n  var wrapperForTheName = {\n    'HTMLElement': /** @this {!Object} */function HTMLElement() {\n      return Reflect.construct(BuiltInHTMLElement, [], /** @type {!Function} */this.constructor);\n    }\n  };\n  window.HTMLElement = wrapperForTheName['HTMLElement'];\n  HTMLElement.prototype = BuiltInHTMLElement.prototype;\n  HTMLElement.prototype.constructor = HTMLElement;\n  Object.setPrototypeOf(HTMLElement, BuiltInHTMLElement);\n})();","\nexport default {\n  AUDIO: {\n    AUDIO_READY: 'audio_ready',\n    AUDIO_WAITING: 'audio_waiting'\n  },\n  VIDEO: {\n    VIDEO_DECODER_INIT: 'video_decode_init',\n    VIDEO_READY: 'video_ready',\n    VIDEO_WAITING: 'video_waiting',\n    AUTO_RUN: 'auto_run',\n    DECODE_LOW_FPS: 'decode_low_fps'\n  },\n  TIMELINE: {\n    PLAY_EVENT: 'play_event',\n    SET_METADATA: 'set_metadata',\n    APPEND_CHUNKS: 'append_chunks',\n    START_RENDER: 'start_render',\n    DO_PAUSE: 'do_pause',\n    SYNC_DTS: 'sync_dts',\n    UPDATE_VOLUME: 'update_volume',\n    UPDATE_PRELOAD_TIME: 'update_preloadtime',\n    NO_AUDIO: 'no_audio',\n    DESTROY: 'destroy',\n    READY: 'ready'\n  },\n  VIDEO_EVENTS: {\n    WAITING: 'waiting',\n    CANPLAY: 'canplay',\n    PLAY: 'play',\n    PLAYING: 'playing',\n    PAUSE: 'pause',\n    LOADEDDATA: 'loadeddata',\n    TIMEUPDATE: 'timeupdate',\n    DURATION_CHANGE: 'durationchange',\n    VOLUME_CHANGE: 'volumechange',\n    ERROR: 'error',\n    // 自定义\n    DECODE_FPS: 'decodefps',\n    LOW_DECODE: 'lowdecode'\n  }\n};","var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar AudioTimeRange = function () {\n  function AudioTimeRange() {\n    _classCallCheck(this, AudioTimeRange);\n\n    this._buffers = [];\n    this._duration = 0;\n  }\n\n  _createClass(AudioTimeRange, [{\n    key: \"append\",\n    value: function append(source, duration, startDts) {\n      this._buffers.push({\n        start: this._duration,\n        end: this._duration + duration,\n        startDts: startDts,\n        source: source\n      });\n      this._duration += duration;\n    }\n  }, {\n    key: \"shift\",\n    value: function shift() {\n      return this._buffers.shift();\n    }\n  }, {\n    key: \"duration\",\n    get: function get() {\n      return this._duration;\n    }\n  }, {\n    key: \"buffered\",\n    get: function get() {\n      var _this = this;\n\n      return {\n        length: 1,\n        start: function start() {\n          return 0;\n        },\n        end: function end() {\n          return _this._duration;\n        }\n      };\n    }\n  }]);\n\n  return AudioTimeRange;\n}();\n\nexport default AudioTimeRange;","/**\n *\n * ios  WebAudio 在系统静音下 播放没有声音\n * hack: 创建背景Audio元素,静音且循环播放，用户交互后取消静音。\n * 在 ios safari、飞书webview、chrome下WebAudio可正常\n */\n\nfunction initBgSilenceAudio() {\n  if (document.querySelector('#hackAudioPP')) return;\n\n  var silenceMp3 = 'data:audio/mpeg;base64,//uQxAAAAAAAAAAAAAAAAAAAAAAAWGluZwAAAA8AAAACAAACcQCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA//////////////////////////////////////////////////////////////////8AAABhTEFNRTMuMTAwA8MAAAAAAAAAABQgJAUHQQAB9AAAAnGMHkkIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA//sQxAADgnABGiAAQBCqgCRMAAgEAH///////////////7+n/9FTuQsQH//////2NG0jWUGlio5gLQTOtIoeR2WX////X4s9Atb/JRVCbBUpeRUq//////////////////9RUi0f2jn/+xDECgPCjAEQAABN4AAANIAAAAQVTEFNRTMuMTAwVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVQ==';\n  var tmp = document.createElement('div');\n  tmp.innerHTML = '<audio id=\\'hackAudioPP\\'></audio>';\n  document.body.appendChild(tmp);\n  var audio = tmp.children.item(0);\n  audio.controls = false;\n  audio.preload = 'auto';\n  audio.src = silenceMp3;\n  // audio.src = 'http://10.1.9.110:8887/_media/1.mp3';\n  audio.muted = true;\n  audio.loop = true;\n  audio.load();\n  audio.play().catch(function (e) {});\n}\n\nvar ele = void 0;\n\nfunction playSlienceAudio() {\n  var audio = ele || (ele = document.querySelector('#hackAudioPP'));\n  if (!audio) {\n    initBgSilenceAudio();\n    return;\n  }\n  if (audio.muted) {\n    audio.muted = false;\n    audio.play().catch(function (e) {});\n  }\n}\n\nexport { initBgSilenceAudio, playSlienceAudio };","var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nimport EventEmitter from 'events';\nimport { logger } from 'xgplayer-helper-utils';\nimport Events from '../events';\nimport AudioTimeRange from './AudioTimeRange';\nimport { initBgSilenceAudio, playSlienceAudio } from '../helper/audio-helper';\n\nvar AudioContext = window.AudioContext || window.webkitAudioContext;\n\nvar MEDIA_ERR_DECODE = 3;\n\nvar ERROR_MSG = {\n  INIT_AUDIO_ERR: 'create new AudioContext error',\n  DECODE_ERR: 'audio data decode error'\n};\n\nvar AudioRender = function (_EventEmitter) {\n  _inherits(AudioRender, _EventEmitter);\n\n  function AudioRender(config, parent) {\n    _classCallCheck(this, AudioRender);\n\n    var _this = _possibleConstructorReturn(this, (AudioRender.__proto__ || Object.getPrototypeOf(AudioRender)).call(this));\n\n    _this.TAG = 'AudioRender';\n    _this._config = config;\n    _this._parent = parent;\n    _this._timeRange = new AudioTimeRange();\n    _this._sampleQueue = [];\n    _this._ready = false;\n    _this._meta = null;\n    _this._noAudio = false;\n    _this._source = null;\n    _this._onSourceBufferEnded = _this._onSourceBufferEnded.bind(_this);\n    _this._initAudioCtx(config.volume || 0.6);\n    _this._bindEvents();\n    return _this;\n  }\n\n  _createClass(AudioRender, [{\n    key: 'resume',\n    value: function resume() {\n      return this._audioCtx.resume();\n    }\n  }, {\n    key: '_assembleErr',\n    value: function _assembleErr(msg) {\n      var err = new Error(msg);\n      err.code = MEDIA_ERR_DECODE;\n      return err;\n    }\n  }, {\n    key: '_initAudioCtx',\n    value: function _initAudioCtx(volume) {\n      var _this2 = this;\n\n      this._audioCtx = new AudioContext();\n      if (!this._audioCtx) {\n        logger.warn(this.TAG, 'create webaudio error!');\n        // AudioRender在Timeline constructor中实例化,timeline error handler还未绑定,异步触发\n        setTimeout(function () {\n          _this2._emitTimelineEvents(Events.TIMELINE.PLAY_EVENT, 'error', _this2._assembleErr(ERROR_MSG.INIT_AUDIO_ERR));\n        });\n        return;\n      }\n      this._gainNode = this._audioCtx.createGain();\n      this._gainNode.gain.value = volume;\n      this._gainNode.connect(this._audioCtx.destination);\n      this._audioCtx.suspend();\n      initBgSilenceAudio();\n    }\n  }, {\n    key: '_emitTimelineEvents',\n    value: function _emitTimelineEvents(e, v, d) {\n      this._parent.emit(e, v, d);\n    }\n  }, {\n    key: '_bindEvents',\n    value: function _bindEvents() {\n      var _this3 = this;\n\n      this._audioCtx.addEventListener('statechange', function () {\n        if (!_this3._audioCtx) return;\n        if (_this3._audioCtx.state === 'running' && _this3._ready) {\n          _this3._emitTimelineEvents(Events.TIMELINE.PLAY_EVENT, Events.VIDEO_EVENTS.PLAYING);\n        }\n      });\n\n      this._parent.on(Events.TIMELINE.SET_METADATA, function (type, meta) {\n        if (type === 'video') return;\n        if (_this3._noAudio) return;\n        logger.warn(_this3.TAG, 'audio set metadata');\n        _this3._meta = meta;\n      });\n\n      this._parent.on(Events.TIMELINE.APPEND_CHUNKS, this._appendChunk.bind(this));\n\n      this._parent.on(Events.TIMELINE.START_RENDER, this._startRender.bind(this));\n\n      this._parent.on(Events.TIMELINE.DO_PAUSE, function () {\n        if (_this3._noAudio) {\n          return;\n        }\n        _this3._audioCtx.suspend();\n      });\n\n      this._parent.on(Events.TIMELINE.UPDATE_VOLUME, function (v) {\n        if (!_this3._gainNode) return;\n        _this3._gainNode.gain.value = v;\n        _this3._emitTimelineEvents(Events.TIMELINE.PLAY_EVENT, Events.VIDEO_EVENTS.VOLUME_CHANGE);\n      });\n\n      // this._parent.on(Events.TIMELINE.UPDATE_PRELOAD_TIME, (v) => {\n      //   this._config.preloadTime = v;\n      // });\n\n      this._parent.on(Events.TIMELINE.DESTROY, function () {\n        _this3._destroy();\n      });\n\n      this._parent.on(Events.TIMELINE.NO_AUDIO, function () {\n        _this3._noAudio = true;\n      });\n    }\n\n    // receive new compressed samples\n\n  }, {\n    key: '_appendChunk',\n    value: function _appendChunk(_, audioTrack) {\n      if (this._noAudio || !this._meta) return;\n\n      var samples = audioTrack.samples,\n          meta = audioTrack.meta;\n\n\n      if (meta && samples.length) {\n        this._sampleQueue = this._sampleQueue.concat(samples);\n        audioTrack.samples = [];\n        this._assembleAAC();\n      }\n    }\n  }, {\n    key: '_checkMetaChange',\n    value: function _checkMetaChange(sampleQueue, len) {\n      var index = -1;\n      for (var i = 0; i < len; i++) {\n        var op = sampleQueue[i].options;\n        if (op && op.meta) {\n          index = i;\n          logger.warn(this.TAG, 'detect metadata! index=' + i + ' ,dts=' + sampleQueue[i].dts);\n          break;\n        }\n      }\n      return index;\n    }\n  }, {\n    key: '_assembleAAC',\n    value: function _assembleAAC() {\n      var _this4 = this;\n\n      var len = this._sampleQueue.length;\n      var samp0 = this._sampleQueue[0];\n      var sampLast = this._sampleQueue[len - 1];\n      var metaChangeIndex = this._checkMetaChange(this._sampleQueue, len);\n\n      if (metaChangeIndex === -1) {\n        if ((sampLast.dts - samp0.dts) / this.timescale < this.preloadTime) {\n          return;\n        }\n      }\n\n      var toDecode = void 0;\n\n      if (metaChangeIndex === -1) {\n        toDecode = this._sampleQueue;\n        this._sampleQueue = [];\n      } else {\n        // 采样队列中间换流,前后部分分开\n        toDecode = this._sampleQueue.splice(0, metaChangeIndex || len);\n      }\n\n      if (!toDecode.length) return;\n\n      var adtss = toDecode.map(function (sample, index) {\n        if (index === metaChangeIndex) {\n          _this4._meta = sample.options.meta;\n        }\n        return AudioRender.getAACData(_this4._meta, sample);\n      });\n\n      var chunkBuffer = AudioRender.combileData(adtss);\n\n      this._audioCtx.decodeAudioData(chunkBuffer.buffer, function (uncompress) {\n        var _source = _this4._audioCtx.createBufferSource();\n        _source.buffer = uncompress;\n        _source.loop = false;\n        _this4._timeRange.append(_source, uncompress.duration, metaChangeIndex === -1 ? samp0.dts : 0);\n\n        if (!_this4._ready) {\n          // init background Audio ele\n          _this4._ready = true;\n          _this4.emit(Events.AUDIO.AUDIO_READY);\n        }\n        _this4._emitTimelineEvents(Events.TIMELINE.PLAY_EVENT, Events.VIDEO_EVENTS.DURATION_CHANGE);\n      }, function () {\n        _this4._emitTimelineEvents(Events.TIMELINE.PLAY_EVENT, 'error', _this4._assembleErr(ERROR_MSG.DECODE_ERR));\n      });\n    }\n  }, {\n    key: '_onSourceBufferEnded',\n    value: function _onSourceBufferEnded() {\n      if (logger.long) {\n        logger.log(this.TAG, 'source play end! currentTime:' + this.currentTime + ' , duration:' + this.duration);\n      }\n      this._startRender();\n    }\n  }, {\n    key: '_startRender',\n    value: function _startRender() {\n      if (this._noAudio) return;\n\n      if (this._audioCtx.state === 'suspended') {\n        this._audioCtx.resume();\n        playSlienceAudio();\n      }\n      var buffer = this._timeRange.shift();\n      if (!buffer) {\n        this._ready = false;\n        this._audioCtx.suspend();\n        this.emit(Events.AUDIO.AUDIO_WAITING);\n        return;\n      }\n\n      this._source = null;\n\n      var _source = buffer.source;\n      // 保存引用,移动浏览器下,对source的回收机制有差异，不保存引用会提前回收,导致ended事件不触发\n      this._source = _source;\n      _source.addEventListener('ended', this._onSourceBufferEnded);\n      _source.connect(this._gainNode);\n      _source.start();\n\n      if (buffer.startDts) {\n        this._emitTimelineEvents(Events.TIMELINE.SYNC_DTS, buffer.startDts);\n      }\n    }\n  }, {\n    key: '_destroy',\n    value: function _destroy() {\n      logger.log(this.TAG, 'destroy audio...');\n      this._audioCtx.close();\n      this._audioCtx = null;\n      this._sampleQueue = null;\n      this._timeRange = null;\n    }\n  }, {\n    key: 'currentTime',\n    get: function get() {\n      if (!this._audioCtx) return 0;\n      return this._audioCtx.currentTime;\n    }\n  }, {\n    key: 'duration',\n    get: function get() {\n      return this._timeRange.duration;\n    }\n  }, {\n    key: 'preloadTime',\n    get: function get() {\n      return 2;\n    }\n  }, {\n    key: 'timescale',\n    get: function get() {\n      if (!this._meta) return 1000;\n      return this._meta.timescale || 1000;\n    }\n  }, {\n    key: 'buffered',\n    get: function get() {\n      return this._timeRange.buffered;\n    }\n  }, {\n    key: 'ctxState',\n    get: function get() {\n      return this._audioCtx.state;\n    }\n  }], [{\n    key: 'getAACData',\n    value: function getAACData(meta, sample) {\n      var buffer = new Uint8Array(sample.data.byteLength + 7);\n      var adts = AudioRender.getAdts(meta, sample.data);\n      buffer.set(adts);\n      buffer.set(sample.data, 7);\n      return buffer;\n    }\n  }, {\n    key: 'combileData',\n    value: function combileData(samples) {\n      // get length\n      var length = 0;\n      for (var i = 0, k = samples.length; i < k; i++) {\n        length += samples[i].byteLength;\n      }\n\n      var ret = new Uint8Array(length);\n      var offset = 0;\n      // combile data;\n      for (var _i = 0, _k = samples.length; _i < _k; _i++) {\n        ret.set(samples[_i], offset);\n        offset += samples[_i].byteLength;\n      }\n      return ret;\n    }\n  }, {\n    key: 'getAdts',\n    value: function getAdts(meta, data) {\n      var adts = new Uint8Array(7);\n\n      // 设置同步位 0xfff 12bit\n      adts[0] = 0xff;\n      adts[1] = 0xf0;\n\n      // Object data (没什么人用MPEG-2了，HLS和FLV也全是MPEG-4，这里直接0)  1bit\n      // Level always 00 2bit\n      // CRC always 1 1bit\n      adts[1] = adts[1] | 0x01;\n\n      // profile 2bit\n      adts[2] = 0xc0 & meta.originObjectType - 1 << 6;\n\n      // sampleFrequencyIndex\n      adts[2] = adts[2] | 0x3c & meta.sampleRateIndex << 2;\n\n      // private bit 0 1bit\n      // chanel configuration 3bit\n      adts[2] = adts[2] | 0x01 & meta.channelCount >> 2;\n      adts[3] = 0xc0 & meta.channelCount << 6;\n\n      // original_copy: 0 1bit\n      // home: 0 1bit\n\n      // adts_variable_header()\n      // copyrighted_id_bit 0 1bit\n      // copyrighted_id_start 0 1bit\n\n      // aac_frame_length 13bit;\n      var aacframelength = data.byteLength + 7;\n\n      adts[3] = adts[3] | 0x03 & aacframelength >> 11;\n      adts[4] = 0xff & aacframelength >> 3;\n      adts[5] = 0xe0 & aacframelength << 5;\n\n      // adts_buffer_fullness 0x7ff 11bit\n      adts[5] = adts[5] | 0x1f;\n      adts[6] = 0xfc;\n\n      // number_of_raw_data_blocks_in_frame 0 2bit;\n      return adts;\n    }\n  }]);\n\n  return AudioRender;\n}(EventEmitter);\n\nexport default AudioRender;","var TARGET = typeof Symbol === 'undefined' ? '__target' : Symbol(),\n    SCRIPT_TYPE = 'application/javascript',\n    BlobBuilder = window.BlobBuilder || window.WebKitBlobBuilder || window.MozBlobBuilder || window.MSBlobBuilder,\n    URL = window.URL || window.webkitURL,\n    Worker = window.Worker;\n\n/**\n * Returns a wrapper around Web Worker code that is constructible.\n *\n * @function shimWorker\n *\n * @param { String }    filename    The name of the file\n * @param { Function }  fn          Function wrapping the code of the worker\n */\nexport default function shimWorker (filename, fn) {\n    return function ShimWorker (forceFallback) {\n        var o = this;\n\n        if (!fn) {\n            return new Worker(filename);\n        }\n        else if (Worker && !forceFallback) {\n            // Convert the function's inner code to a string to construct the worker\n            var source = `${ fn }`.replace(/^function.+?{/, '').slice(0, -1),\n                objURL = createSourceObject(source);\n\n            this[TARGET] = new Worker(objURL);\n            URL.revokeObjectURL(objURL);\n            return this[TARGET];\n        }\n        else {\n            var selfShim = {\n                    postMessage: m => {\n                        if (o.onmessage) {\n                            setTimeout(() => o.onmessage({ data: m, target: selfShim }));\n                        }\n                    }\n                };\n\n            fn.call(selfShim);\n            this.postMessage = m => {\n                setTimeout(() => selfShim.onmessage({ data: m, target: o }));\n            };\n            this.isThisThread = true;\n        }\n    };\n};\n\n// Test Worker capabilities\nif (Worker) {\n    var testWorker,\n        objURL = createSourceObject('self.onmessage = function () {}'),\n        testArray = new Uint8Array(1);\n\n    try {\n        // No workers via blobs in Edge 12 and IE 11 and lower :(\n        if (/(?:Trident|Edge)\\/(?:[567]|12)/i.test(navigator.userAgent)) {\n            throw new Error('Not available');\n        }\n        testWorker = new Worker(objURL);\n\n        // Native browser on some Samsung devices throws for transferables, let's detect it\n        testWorker.postMessage(testArray, [testArray.buffer]);\n    }\n    catch (e) {\n        Worker = null;\n    }\n    finally {\n        URL.revokeObjectURL(objURL);\n        if (testWorker) {\n            testWorker.terminate();\n        }\n    }\n}\n\nfunction createSourceObject(str) {\n    try {\n        return URL.createObjectURL(new Blob([str], { type: SCRIPT_TYPE }));\n    }\n    catch (e) {\n        var blob = new BlobBuilder();\n        blob.append(str);\n        return URL.createObjectURL(blob.getBlob(type));\n    }\n}\n","import shimWorker from 'rollup-plugin-bundle-worker';\nexport default new shimWorker(\"../decoder/hevc-worker.js\", function (window, document) {\nvar self = this;\n// 目前仅支持yuv420\n\n// const H265_DECODER_URL =\n//   \"https://sf1-vcloudcdn.pstatp.com/obj/media-fe/decoder/h265/decoder_1592202936266.js\";\n\nfunction shimImportScripts(src) {\n  return fetch(src).then(function (res) {\n    return res.text();\n  }).then(function (text) {\n    eval(text);\n    self.Module = Module;\n    self.addOnPostRun = addOnPostRun;\n  });\n}\n\nvar MAX_STREAM_BUFFER_LENGTH = 1024 * 1024;\nvar Decoder = function Decoder(self) {\n  this.inited = false;\n  this.infoId = 0;\n  this.self = self;\n  this.meta = this.self.meta;\n  this.ts = 0;\n  this.infolist = [];\n  self.par_broadwayOnBroadwayInited = this.broadwayOnBroadwayInited.bind(this);\n  self.par_broadwayOnPictureDecoded = this.broadwayOnPictureDecoded.bind(this);\n};\n\nDecoder.prototype.toU8Array = function (ptr, length) {\n  return Module.HEAPU8.subarray(ptr, ptr + length);\n};\n\nDecoder.prototype.init = function () {\n  Module._broadwayInit();\n  this.offset = Module._broadwayCreateStream(MAX_STREAM_BUFFER_LENGTH);\n};\n\nDecoder.prototype.broadwayOnPictureDecoded = function (offset, width, height, infoid, sliceType) {\n  if (this.infolist[0] && this.infolist[0].isGop && sliceType !== 2) {\n    this.self.postMessage({\n      msg: 'LOG',\n      log: 'drop sample'\n    });\n    return;\n  }\n\n  var info = this.infolist.shift();\n  var yRowcount = height;\n  var uvRowcount = height / 2;\n  var yLinesize = width;\n  var uvLinesize = width / 2;\n  if (this.meta && (this.meta.chromaFormat === 444 || this.meta.chromaFormat === 422)) {\n    uvRowcount = height;\n  }\n  var data = this.toU8Array(offset, yLinesize * yRowcount + 2 * (uvLinesize * uvRowcount));\n  // this.infolist[infoid] = null;\n  var datetemp = new Uint8Array(data.length);\n  datetemp.set(data);\n  var buffer = datetemp.buffer;\n\n  this.self.postMessage({\n    msg: 'DECODED',\n    width: width,\n    height: height,\n    yLinesize: yLinesize,\n    uvLinesize: uvLinesize,\n    info: info,\n    buffer: buffer\n  }, [buffer]);\n};\n\nDecoder.prototype.broadwayOnBroadwayInited = function () {\n  if (this.inited) {\n    return;\n  }\n  this.inited = true;\n  this.self.postMessage({\n    msg: 'LOG',\n    log: 'decoder inited'\n  });\n  this.self.postMessage({ msg: 'DECODER_READY' });\n};\n\nDecoder.prototype.decode = function (data, info) {\n  var time = parseInt(new Date().getTime());\n  var infoid = time - Math.floor(time / 10e8) * 10e8;\n  this.infolist.push(info);\n  if (info && info.isGop) {\n    this.infolist = [info];\n    Module._broadwayFlushStream(infoid);\n  }\n  Module.HEAPU8.set(data, this.offset);\n  Module._broadwayPlayStream(data.length, this.infoId);\n};\n\nDecoder.prototype.destroy = function () {\n  Module._broadwayExit();\n};\n\nDecoder.prototype.updateMeta = function (meta) {\n  this.meta = meta;\n};\n\nvar decoder;\n\nfunction onPostRun() {\n  self.postMessage({\n    msg: 'LOG',\n    log: 'do post run'\n  });\n  decoder = new Decoder(this);\n  decoder.init();\n}\n\nfunction init(url) {\n  if (!decoder) {\n    var task = void 0;\n\n    if (!self.importScripts) {\n      task = shimImportScripts(url);\n    } else {\n      task = new Promise(function (resolve, reject) {\n        if (!self.console) {\n          self.console = {\n            log: function log() {},\n            warn: function warn() {},\n            info: function info() {},\n            error: function error() {}\n          };\n        }\n        try {\n          self.importScripts(url);\n          resolve();\n        } catch (e) {\n          reject(e);\n        }\n      });\n    }\n\n    task.then(function () {\n      addOnPostRun(onPostRun.bind(self));\n      setTimeout(function () {\n        if (!decoder || !decoder.inited) {\n          console.log('auto instance Decoder!');\n          onPostRun.call(self);\n        }\n      }, 5000);\n    }).catch(function (e) {\n      self.postMessage({\n        msg: 'INIT_FAILED',\n        log: e.message\n      });\n    });\n  }\n}\n\nself.onmessage = function (e) {\n  var data = e.data;\n  if (!data.msg) {\n    self.postMessage({\n      msg: 'ERROR:invalid message'\n    });\n  } else {\n    switch (data.msg) {\n      case 'init':\n        self.meta = data.meta;\n        self.postMessage({\n          msg: 'LOG',\n          log: 'worker inited'\n        });\n        init(data.url);\n        break;\n      case 'updatemeta':\n        self.meta = data.meta;\n        decoder.updateMeta(data.meta);\n        break;\n      case 'decode':\n        decoder.decode(data.data, data.info);\n        self.postMessage({\n          msg: 'DECODE_FINISH',\n          dts: data.info ? data.info.dts : 0\n        });\n        break;\n      case 'destory':\n        decoder.destroy();\n        break;\n      default:\n        break;\n    }\n  }\n};\n\n});","import shimWorker from 'rollup-plugin-bundle-worker';\nexport default new shimWorker(\"../decoder/worker.js\", function (window, document) {\nvar self = this;\n// const H264_DECODER_URL =\n//   \"https://sf1-vcloudcdn.pstatp.com/obj/ttfe/media/decoder/h264/decoder_1583333072684.js\";\n\nfunction shimImportScripts(src) {\n  return fetch(src).then(function (res) {\n    return res.text();\n  }).then(function (text) {\n    eval(text);\n    self.Module = Module;\n    self.addOnPostRun = addOnPostRun;\n  });\n}\n\nvar MAX_STREAM_BUFFER_LENGTH = 1024 * 1024;\n\nvar Decoder = function Decoder(self) {\n  this.inited = false;\n  this.self = self;\n  this.meta = this.self.meta;\n  this.infolist = {};\n  self.par_broadwayOnBroadwayInited = this.broadwayOnBroadwayInited.bind(this);\n  self.par_broadwayOnPictureDecoded = this.broadwayOnPictureDecoded.bind(this);\n};\n\nDecoder.prototype.toU8Array = function (ptr, length) {\n  return Module.HEAPU8.subarray(ptr, ptr + length);\n};\n\nDecoder.prototype.init = function () {\n  Module._broadwayInit();\n  this.broadwayOnBroadwayInited();\n  this.streamBuffer = this.toU8Array(Module._broadwayCreateStream(MAX_STREAM_BUFFER_LENGTH), MAX_STREAM_BUFFER_LENGTH);\n};\n\nDecoder.prototype.broadwayOnPictureDecoded = function (offset, width, height, yLinesize, uvLinesize, infoid) {\n  var info = Object.assign({}, this.infolist[infoid]);\n  var yRowcount = height;\n  var uvRowcount = height / 2;\n  if (this.meta && (this.meta.chromaFormat === 444 || this.meta.chromaFormat === 422)) {\n    uvRowcount = height;\n  }\n  var data = this.toU8Array(offset, yLinesize * yRowcount + 2 * (uvLinesize * uvRowcount));\n  this.infolist[infoid] = null;\n  var datetemp = new Uint8Array(data.length);\n  datetemp.set(data);\n  var buffer = datetemp.buffer;\n\n  this.self.postMessage({\n    msg: 'DECODED',\n    width: width,\n    height: height,\n    yLinesize: yLinesize,\n    uvLinesize: uvLinesize,\n    info: info,\n    buffer: buffer\n  }, [buffer]);\n};\n\nDecoder.prototype.broadwayOnBroadwayInited = function () {\n  this.inited = true;\n  this.self.postMessage({\n    msg: 'LOG',\n    log: 'decoder inited'\n  });\n  this.self.postMessage({ msg: 'DECODER_READY' });\n};\n\nDecoder.prototype.decode = function (data, info) {\n  var time = parseInt(new Date().getTime());\n  var infoid = time - Math.floor(time / 10e8) * 10e8;\n  this.infolist[infoid] = info;\n  this.streamBuffer.set(data);\n  Module._broadwayPlayStream(data.length, infoid);\n};\n\nDecoder.prototype.destroy = function () {\n  Module._broadwayExit();\n};\n\nDecoder.prototype.updateMeta = function (meta) {\n  this.meta = meta;\n};\n\nvar decoder;\n\nfunction onPostRun() {\n  self.postMessage({\n    msg: 'LOG',\n    log: 'do post run'\n  });\n\n  decoder = new Decoder(this);\n  decoder.init();\n}\n\nfunction init(url) {\n  if (!decoder) {\n    var task = void 0;\n    if (!self.importScripts) {\n      task = shimImportScripts(url);\n    } else {\n      task = new Promise(function (resolve, reject) {\n        if (!self.console) {\n          self.console = {\n            log: function log() {},\n            warn: function warn() {},\n            info: function info() {},\n            error: function error() {}\n          };\n        }\n        try {\n          self.importScripts(url);\n          resolve();\n        } catch (e) {\n          reject(e);\n        }\n      });\n    }\n\n    task.then(function () {\n      addOnPostRun(onPostRun.bind(self));\n\n      setTimeout(function () {\n        if (!decoder || !decoder.inited) {\n          console.log('auto instance Decoder!');\n          onPostRun.call(self);\n        }\n      }, 5000);\n    }).catch(function (e) {\n      self.postMessage({\n        msg: 'INIT_FAILED',\n        log: e.message\n      });\n    });\n  }\n}\n\nself.onmessage = function (e) {\n  var data = e.data;\n  if (!data.msg) {\n    self.postMessage({\n      msg: 'ERROR:invalid message'\n    });\n  } else {\n    switch (data.msg) {\n      case 'init':\n        self.meta = data.meta;\n        self.postMessage({\n          msg: 'LOG',\n          log: 'worker inited'\n        });\n        init(data.url);\n        break;\n      case 'updatemeta':\n        self.meta = data.meta;\n        decoder.updateMeta(data.meta);\n        break;\n      case 'decode':\n        decoder.decode(data.data, data.info);\n        self.postMessage({\n          msg: 'DECODE_FINISH',\n          dts: data.info ? data.info.dts : 0\n        });\n        break;\n      case 'destory':\n        decoder.destroy();\n        break;\n      default:\n        break;\n    }\n  }\n};\n\n});","var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nimport { logger } from 'xgplayer-helper-utils';\n\nvar VideoTimeRange = function () {\n  function VideoTimeRange() {\n    _classCallCheck(this, VideoTimeRange);\n\n    this.TAG = 'VideoTimeRange';\n    this._baseDts = -1;\n    this._lastDuration = 0;\n    this._duration = 0;\n    this._bitrate = 0;\n    this._compressFrame = [];\n  }\n\n  _createClass(VideoTimeRange, [{\n    key: '_caclBaseDts',\n    value: function _caclBaseDts(frame) {\n      if (this._baseDts !== -1) return;\n      if (!frame) return;\n      this._baseDts = frame.dts;\n      logger.log(this.TAG, 'set baseDts: ', this._baseDts, 'frame len:', this._compressFrame.length);\n    }\n  }, {\n    key: '_updateDuration',\n    value: function _updateDuration(frames) {\n      var len = frames.length;\n      var last = frames[len - 1];\n\n      for (var i = 0; i < len; i++) {\n        var f = frames[i];\n        if (f && f.options && f.options.meta) {\n          var pre = frames[i - 1] || this._compressFrame[this._compressFrame.length - 1];\n          if (pre) {\n            this._lastDuration += (pre.dts - this._baseDts) / 1000;\n          } else {\n            this._lastDuration = this._duration;\n          }\n          logger.log(this.TAG, 'updateBaseDts,record lastDuration:', this._lastDuration);\n          this._baseDts = f.dts;\n          break;\n        }\n      }\n\n      if (last) {\n        this._duration = (last.dts - this._baseDts) / 1000 + this._lastDuration;\n      }\n    }\n  }, {\n    key: '_estimateBitRate',\n    value: function _estimateBitRate(frames) {\n      var len = frames.length;\n      if (len <= 1) return;\n      var sum = 0;\n      for (var i = 0; i < len; i++) {\n        sum += frames[i].data.length;\n      }\n      var delta = frames[len - 1].dts - frames[0].dts;\n\n      var bitrate = sum / delta; // KB/s\n      this._bitrate = parseInt(bitrate * 8000); // bps\n    }\n  }, {\n    key: 'append',\n    value: function append(frames, upDuration) {\n      this._caclBaseDts(frames[0]);\n\n      if (upDuration) {\n        this._updateDuration(frames);\n      }\n      this._estimateBitRate(frames);\n      this._compressFrame = this._compressFrame.concat(frames);\n    }\n  }, {\n    key: 'deletePassed',\n    value: function deletePassed(dts) {\n      var len = this._compressFrame.length;\n      this._compressFrame = this._compressFrame.filter(function (x) {\n        return x.dts > dts;\n      });\n      return len - this._compressFrame.length;\n    }\n  }, {\n    key: 'shift',\n    value: function shift() {\n      var f = this._compressFrame.shift();\n      return f;\n    }\n  }, {\n    key: 'baseDts',\n    get: function get() {\n      return this._baseDts;\n    }\n  }, {\n    key: 'duartion',\n    get: function get() {\n      return this._duration;\n    }\n  }, {\n    key: 'buffered',\n    get: function get() {\n      var _this = this;\n\n      return {\n        length: 1,\n        start: function start() {\n          return 0;\n        },\n        end: function end() {\n          return _this._duration;\n        }\n      };\n    }\n  }, {\n    key: 'bitrate',\n    get: function get() {\n      return this._bitrate;\n    }\n  }, {\n    key: 'lastDuration',\n    get: function get() {\n      return this._lastDuration;\n    }\n  }]);\n\n  return VideoTimeRange;\n}();\n\nexport default VideoTimeRange;","var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nimport { logger } from \"xgplayer-helper-utils\";\n\nvar YUVCanvas = function () {\n  function YUVCanvas(configs) {\n    _classCallCheck(this, YUVCanvas);\n\n    this.configs = Object.assign({}, configs);\n    this.canvas = this.configs.canvas;\n    this.meta = Object.assign({}, this.configs.meta);\n    this._initMeta();\n    // this.canvas.style.width = configs.style.width;\n    // this.canvas.style.height = configs.style.height;\n    this._initContextGL();\n    if (this.contextGL) {\n      this._initProgram();\n      this._initBuffers();\n      this._initTextures();\n    };\n  }\n\n  _createClass(YUVCanvas, [{\n    key: '_initMeta',\n    value: function _initMeta() {\n      this.chroma = this.meta.chromaFormat;\n      this.height = this.meta.presentHeight;\n      this.width = this.meta.presentWidth;\n      this.canvas.width = this.meta.presentWidth;\n      this.canvas.height = this.meta.presentHeight;\n    }\n  }, {\n    key: '_initContextGL',\n    value: function _initContextGL() {\n      var canvas = this.canvas;\n      var gl = null;\n\n      var validContextNames = ['webgl', 'experimental-webgl', 'moz-webgl', 'webkit-3d'];\n      var nameIndex = 0;\n\n      while (!gl && nameIndex < validContextNames.length) {\n        var contextName = validContextNames[nameIndex];\n\n        try {\n          if (this.contextOptions) {\n            gl = canvas.getContext(contextName, this.contextOptions);\n          } else {\n            gl = canvas.getContext(contextName);\n          };\n          logger.log('YUVCanvas', 'use=', contextName);\n          break;\n        } catch (e) {\n          gl = null;\n        }\n\n        if (!gl || typeof gl.getParameter !== 'function') {\n          gl = null;\n        }\n\n        ++nameIndex;\n      };\n\n      this.contextGL = gl;\n    }\n  }, {\n    key: '_initProgram',\n    value: function _initProgram() {\n      var gl = this.contextGL;\n\n      // vertex shader is the same for all types\n      var vertexShaderScript;\n      var fragmentShaderScript;\n      vertexShaderScript = ['attribute vec4 vertexPos;', 'attribute vec4 texturePos;', 'attribute vec4 uTexturePos;', 'attribute vec4 vTexturePos;', 'varying vec2 textureCoord;', 'varying vec2 uTextureCoord;', 'varying vec2 vTextureCoord;', 'void main()', '{', '  gl_Position = vertexPos;', '  textureCoord = texturePos.xy;', '  uTextureCoord = uTexturePos.xy;', '  vTextureCoord = vTexturePos.xy;', '}'].join('\\n');\n\n      fragmentShaderScript = ['precision highp float;', 'varying highp vec2 textureCoord;', 'varying highp vec2 uTextureCoord;', 'varying highp vec2 vTextureCoord;', 'uniform sampler2D ySampler;', 'uniform sampler2D uSampler;', 'uniform sampler2D vSampler;', 'uniform mat4 YUV2RGB;', 'void main(void) {', '  highp float y = texture2D(ySampler,  textureCoord).r;', '  highp float u = texture2D(uSampler,  uTextureCoord).r;', '  highp float v = texture2D(vSampler,  vTextureCoord).r;', '  gl_FragColor = vec4(y, u, v, 1) * YUV2RGB;', '}'].join('\\n');\n\n      var YUV2RGB = [1.16438, 0.00000, 1.59603, -0.87079, 1.16438, -0.39176, -0.81297, 0.52959, 1.16438, 2.01723, 0.00000, -1.08139, 0, 0, 0, 1];\n      var vertexShader = gl.createShader(gl.VERTEX_SHADER);\n      gl.shaderSource(vertexShader, vertexShaderScript);\n      gl.compileShader(vertexShader);\n      if (!gl.getShaderParameter(vertexShader, gl.COMPILE_STATUS)) {\n        console.log('Vertex shader failed to compile: ' + gl.getShaderInfoLog(vertexShader));\n      }\n\n      var fragmentShader = gl.createShader(gl.FRAGMENT_SHADER);\n      gl.shaderSource(fragmentShader, fragmentShaderScript);\n      gl.compileShader(fragmentShader);\n      if (!gl.getShaderParameter(fragmentShader, gl.COMPILE_STATUS)) {\n        console.log('Fragment shader failed to compile: ' + gl.getShaderInfoLog(fragmentShader));\n      }\n\n      var program = gl.createProgram();\n      gl.attachShader(program, vertexShader);\n      gl.attachShader(program, fragmentShader);\n      gl.linkProgram(program);\n      if (!gl.getProgramParameter(program, gl.LINK_STATUS)) {\n        console.log('Program failed to compile: ' + gl.getProgramInfoLog(program));\n      }\n\n      gl.useProgram(program);\n\n      var YUV2RGBRef = gl.getUniformLocation(program, 'YUV2RGB');\n      gl.uniformMatrix4fv(YUV2RGBRef, false, YUV2RGB);\n\n      this.shaderProgram = program;\n    }\n  }, {\n    key: '_initBuffers',\n    value: function _initBuffers() {\n      var gl = this.contextGL;\n      var program = this.shaderProgram;\n\n      var vertexPosBuffer = gl.createBuffer();\n      gl.bindBuffer(gl.ARRAY_BUFFER, vertexPosBuffer);\n      gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([1, 1, -1, 1, 1, -1, -1, -1]), gl.STATIC_DRAW);\n\n      var vertexPosRef = gl.getAttribLocation(program, 'vertexPos');\n      gl.enableVertexAttribArray(vertexPosRef);\n      gl.vertexAttribPointer(vertexPosRef, 2, gl.FLOAT, false, 0, 0);\n\n      var texturePosBuffer = gl.createBuffer();\n      gl.bindBuffer(gl.ARRAY_BUFFER, texturePosBuffer);\n      gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([1, 0, 0, 0, 1, 1, 0, 1]), gl.STATIC_DRAW);\n\n      var texturePosRef = gl.getAttribLocation(program, 'texturePos');\n      gl.enableVertexAttribArray(texturePosRef);\n      gl.vertexAttribPointer(texturePosRef, 2, gl.FLOAT, false, 0, 0);\n\n      this.texturePosBuffer = texturePosBuffer;\n\n      var uTexturePosBuffer = gl.createBuffer();\n      gl.bindBuffer(gl.ARRAY_BUFFER, uTexturePosBuffer);\n      gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([1, 0, 0, 0, 1, 1, 0, 1]), gl.STATIC_DRAW);\n\n      var uTexturePosRef = gl.getAttribLocation(program, 'uTexturePos');\n      gl.enableVertexAttribArray(uTexturePosRef);\n      gl.vertexAttribPointer(uTexturePosRef, 2, gl.FLOAT, false, 0, 0);\n\n      this.uTexturePosBuffer = uTexturePosBuffer;\n\n      var vTexturePosBuffer = gl.createBuffer();\n      gl.bindBuffer(gl.ARRAY_BUFFER, vTexturePosBuffer);\n      gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([1, 0, 0, 0, 1, 1, 0, 1]), gl.STATIC_DRAW);\n\n      var vTexturePosRef = gl.getAttribLocation(program, 'vTexturePos');\n      gl.enableVertexAttribArray(vTexturePosRef);\n      gl.vertexAttribPointer(vTexturePosRef, 2, gl.FLOAT, false, 0, 0);\n\n      this.vTexturePosBuffer = vTexturePosBuffer;\n    }\n  }, {\n    key: '_initTextures',\n    value: function _initTextures() {\n      var gl = this.contextGL;\n      var program = this.shaderProgram;\n      var yTextureRef = this._initTexture();\n      var ySamplerRef = gl.getUniformLocation(program, 'ySampler');\n      gl.uniform1i(ySamplerRef, 0);\n      this.yTextureRef = yTextureRef;\n\n      var uTextureRef = this._initTexture();\n      var uSamplerRef = gl.getUniformLocation(program, 'uSampler');\n      gl.uniform1i(uSamplerRef, 1);\n      this.uTextureRef = uTextureRef;\n\n      var vTextureRef = this._initTexture();\n      var vSamplerRef = gl.getUniformLocation(program, 'vSampler');\n      gl.uniform1i(vSamplerRef, 2);\n      this.vTextureRef = vTextureRef;\n    }\n  }, {\n    key: '_initTexture',\n    value: function _initTexture() {\n      var gl = this.contextGL;\n\n      var textureRef = gl.createTexture();\n      gl.bindTexture(gl.TEXTURE_2D, textureRef);\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n      gl.bindTexture(gl.TEXTURE_2D, null);\n\n      return textureRef;\n    }\n  }, {\n    key: '_drawPictureGL',\n    value: function _drawPictureGL(data, width, height, yLinesize, uvLinesize) {\n      var ylen = yLinesize * height;\n      var uvlen = uvLinesize * height / 2;\n      if (this.chroma === 444 || this.chroma === 422) {\n        uvlen *= 2;\n      }\n      data = new Uint8Array(data);\n      var renderData = {\n        yData: data.subarray(0, ylen),\n        uData: data.subarray(ylen, ylen + uvlen),\n        vData: data.subarray(ylen + uvlen, ylen + uvlen + uvlen)\n      };\n      this._drawPictureGL420(renderData, width, height, yLinesize, uvLinesize);\n    }\n  }, {\n    key: '_drawPictureGL420',\n    value: function _drawPictureGL420(data, width, height, yLinesize, uvLinesize) {\n      var gl = this.contextGL;\n      var texturePosBuffer = this.texturePosBuffer;\n      var uTexturePosBuffer = this.uTexturePosBuffer;\n      var vTexturePosBuffer = this.vTexturePosBuffer;\n\n      var yTextureRef = this.yTextureRef;\n      var uTextureRef = this.uTextureRef;\n      var vTextureRef = this.vTextureRef;\n\n      var yData = data.yData;\n      var uData = data.uData;\n      var vData = data.vData;\n\n      var yDataPerRow = yLinesize;\n      var yRowCnt = height;\n\n      var uDataPerRow = uvLinesize;\n      var uRowCnt = height / 2;\n\n      if (this.chroma === 422 || this.chroma === 444) {\n        uRowCnt = height;\n      }\n\n      var vDataPerRow = uvLinesize;\n      var vRowCnt = uRowCnt;\n\n      var ratiow = this.canvas.width / this.width;\n      var ratioh = this.canvas.height / this.height;\n      var left = 0;\n      var top = 0;\n      var w = this.canvas.width;\n      var h = this.canvas.height;\n      if (ratiow < ratioh) {\n        h = this.height * this.canvas.width / this.width;\n        top = parseInt((this.canvas.height - this.height * this.canvas.width / this.width) / 2);\n      } else {\n        w = this.width * this.canvas.height / this.height;\n        left = parseInt((this.canvas.width - this.width * this.canvas.height / this.height) / 2);\n      }\n      gl.viewport(left, top, w, h);\n\n      var texturePosValues = new Float32Array([1, 0, 0, 0, 1, 1, 0, 1]);\n      gl.bindBuffer(gl.ARRAY_BUFFER, texturePosBuffer);\n      gl.bufferData(gl.ARRAY_BUFFER, texturePosValues, gl.DYNAMIC_DRAW);\n\n      var uTexturePosValues = new Float32Array([1, 0, 0, 0, 1, 1, 0, 1]);\n      gl.bindBuffer(gl.ARRAY_BUFFER, uTexturePosBuffer);\n      gl.bufferData(gl.ARRAY_BUFFER, uTexturePosValues, gl.DYNAMIC_DRAW);\n\n      var vTexturePosValues = new Float32Array([1, 0, 0, 0, 1, 1, 0, 1]);\n      gl.bindBuffer(gl.ARRAY_BUFFER, vTexturePosBuffer);\n      gl.bufferData(gl.ARRAY_BUFFER, vTexturePosValues, gl.DYNAMIC_DRAW);\n\n      gl.activeTexture(gl.TEXTURE0);\n      gl.bindTexture(gl.TEXTURE_2D, yTextureRef);\n      gl.texImage2D(gl.TEXTURE_2D, 0, gl.LUMINANCE, yDataPerRow, yRowCnt, 0, gl.LUMINANCE, gl.UNSIGNED_BYTE, yData);\n\n      gl.activeTexture(gl.TEXTURE1);\n      gl.bindTexture(gl.TEXTURE_2D, uTextureRef);\n      gl.texImage2D(gl.TEXTURE_2D, 0, gl.LUMINANCE, uDataPerRow, uRowCnt, 0, gl.LUMINANCE, gl.UNSIGNED_BYTE, uData);\n\n      gl.activeTexture(gl.TEXTURE2);\n      gl.bindTexture(gl.TEXTURE_2D, vTextureRef);\n      gl.texImage2D(gl.TEXTURE_2D, 0, gl.LUMINANCE, vDataPerRow, vRowCnt, 0, gl.LUMINANCE, gl.UNSIGNED_BYTE, vData);\n\n      gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);\n    }\n  }, {\n    key: '_drawPictureRGB',\n    value: function _drawPictureRGB(data) {}\n  }, {\n    key: 'render',\n    value: function render(data, width, height, yLinesize, uvLinesize) {\n      var gl = this.contextGL;\n      // console.log(data, width, height, yLinesize, uvLinesize)\n      if (gl) {\n        this._drawPictureGL(data, width, height, yLinesize, uvLinesize);\n      } else {\n        this._drawPictureRGB(data);\n      }\n    }\n  }, {\n    key: 'resetMeta',\n    value: function resetMeta(meta) {\n      this.meta = Object.assign({}, meta);\n      this._initMeta();\n    }\n  }]);\n\n  return YUVCanvas;\n}();\n\nexport default YUVCanvas;","var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nimport { logger } from 'xgplayer-helper-utils';\nimport Events from '../events';\n\nvar MAX_QUEUE_LENGTH = 10;\nvar MAX_LOW_FPS_RECORD = 20;\n\nvar DecodeEstimate = function () {\n  function DecodeEstimate(parent) {\n    _classCallCheck(this, DecodeEstimate);\n\n    this.TAG = 'DecodeEstimate';\n    this._needEstimate = true;\n    this._parent = parent;\n    this._lastDecodeDot = 0;\n    this._lastDecodeCost = 0;\n    this._lastFrameDts = 0;\n    this._dtsDeltas = [];\n    this._decodeCosts = [];\n    this._lowDecodeQueue = [];\n    this._fps = 0;\n    this._decodeFps = 0;\n  }\n\n  _createClass(DecodeEstimate, [{\n    key: 'needEstimateFps',\n    value: function needEstimateFps() {\n      this._needEstimate = true;\n    }\n  }, {\n    key: 'addDecodeInfo',\n    value: function addDecodeInfo() {\n      var frameInfo = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : { dts: 0 };\n\n      this._estimateDecodeFps();\n      this._estimateFps(frameInfo);\n    }\n  }, {\n    key: 'resetDecodeDot',\n    value: function resetDecodeDot() {\n      this._lastDecodeDot = 0;\n    }\n  }, {\n    key: '_estimateFps',\n    value: function _estimateFps(frameInfo) {\n      if (!this._needEstimate) return;\n\n      if (!this._lastFrameDts) {\n        this._lastFrameDts = frameInfo.dts;\n        return;\n      }\n\n      var delta = frameInfo.dts - this._lastFrameDts;\n      this._lastFrameDts = frameInfo.dts;\n\n      if (Math.abs(delta) > 100) return;\n\n      this._dtsDeltas.push(delta);\n\n      var len = this._dtsDeltas.length;\n\n      if (len < MAX_QUEUE_LENGTH) return;\n\n      this._fps = Math.ceil(1000 / this._avg(this._dtsDeltas, len));\n      logger.log(this.TAG, 'estimate fps:', this._fps);\n      this._needEstimate = false;\n    }\n  }, {\n    key: '_estimateDecodeFps',\n    value: function _estimateDecodeFps() {\n      if (!this._lastDecodeDot) {\n        this._lastDecodeDot = performance.now();\n        return;\n      }\n\n      var now = performance.now();\n      var cost = now - this._lastDecodeDot;\n      this._lastDecodeDot = now;\n\n      if (cost < 0.5) return;\n\n      this._lastDecodeCost = cost;\n      this._decodeCosts.push(cost);\n      var len = this._decodeCosts.length;\n\n      if (len < MAX_QUEUE_LENGTH) return;\n\n      var avg = this._avg(this._decodeCosts, len);\n      this._decodeFps = Math.floor(1000 / avg);\n      this._decodeCosts = [];\n      this._lowDecodeDetect();\n    }\n  }, {\n    key: '_avg',\n    value: function _avg(list, len) {\n      var sum = list.reduce(function (all, c) {\n        all += c;\n        return all;\n      }, 0);\n      return Math.floor(sum / len) || 1;\n    }\n\n    // 低延迟检测逻辑\n\n  }, {\n    key: '_lowDecodeDetect',\n    value: function _lowDecodeDetect() {\n      if (this._decodeFps < this._fps) {\n        this._lowDecodeQueue.push(this._decodeFps);\n      } else {\n        this._lowDecodeQueue.pop();\n      }\n      if (this._lowDecodeQueue.length > MAX_LOW_FPS_RECORD) {\n        // 大约连续的 20 * 10 = 200帧 解码效率比较低时\n        this._lowDecodeQueue = [];\n        logger.log(this.TAG, '解码效率过低,应该降级');\n        this._parent.emit(Events.VIDEO.DECODE_LOW_FPS);\n      }\n    }\n  }, {\n    key: 'fps',\n    get: function get() {\n      return this._fps;\n    }\n  }, {\n    key: 'decodeFps',\n    get: function get() {\n      return this._decodeFps;\n    }\n  }, {\n    key: 'decodeCost',\n    get: function get() {\n      return this._lastDecodeCost;\n    }\n  }]);\n\n  return DecodeEstimate;\n}();\n\nexport default DecodeEstimate;","var H264_DECODER_URL = 'https://sf1-vcloudcdn.pstatp.com/obj/ttfe/media/decoder/h264/decoder_1583333072684.js';\n\nvar ASM_H264_DECODER_URL = 'https://sf1-vcloudcdn.pstatp.com/obj/media-fe/decoder/h264/decoder_asm_1589261792455.js';\n\nvar H265_DECODER_URL = 'https://sf1-vcloudcdn.pstatp.com/obj/media-fe/decoder/h265/decoder_1592202936266.js';\n\nvar ASM_H265_DECODER_URL = 'https://sf1-vcloudcdn.pstatp.com/obj/media-fe/decoder/h265/decoder_asm_1594191692633.js';\n\nexport { H264_DECODER_URL, H265_DECODER_URL, ASM_H264_DECODER_URL, ASM_H265_DECODER_URL };","var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nimport EventEmitter from 'events';\nimport HevcWorker from 'worker!../decoder/hevc-worker.js';\nimport AvcWorker from 'worker!../decoder/worker.js';\nimport { logger } from 'xgplayer-helper-utils';\nimport VideoTimeRange from './VideoTimeRange';\nimport FrameRender from './FrameRender';\nimport DecodeEstimate from './DecodeEstimate';\nimport Events from '../events';\nimport { H264_DECODER_URL, H265_DECODER_URL, ASM_H264_DECODER_URL, ASM_H265_DECODER_URL } from '../config';\n\nvar HAVE_NOTHING = 0;\nvar HAVE_METADATA = 1;\nvar HAVE_CURRENT_DATA = 2;\nvar HAVE_FUTURE_DATA = 3;\nvar HAVE_ENOUGH_DATA = 4;\n\nvar MEDIA_ERR_DECODE = 3;\n\nvar VideoRender = function (_EventEmitter) {\n  _inherits(VideoRender, _EventEmitter);\n\n  function VideoRender(config, parent) {\n    _classCallCheck(this, VideoRender);\n\n    var _this = _possibleConstructorReturn(this, (VideoRender.__proto__ || Object.getPrototypeOf(VideoRender)).call(this));\n\n    _this.TAG = 'VideoRender';\n    _this._config = config;\n    _this._parent = parent;\n    _this._timeRange = new VideoTimeRange();\n    _this._decodeEstimate = new DecodeEstimate(_this);\n    _this._frameQueue = []; // the queue of uncompressed frame\n    _this._canvas = config.canvas || document.createElement('canvas');\n    _this._meta = null;\n    _this._decoder = null; //  decoder worker instance\n    _this._frameRender = null; // FrameRender instance\n    _this._ready = false; // 初始解码ready,可播\n    _this._noAudio = false;\n    _this._wasmReady = false;\n    _this._clearId = -1;\n    _this._degrade = false;\n    _this._avccpushed = false;\n    _this._lastTimeupdate = 0;\n    _this._inDecoding = false;\n    _this._lastDecodingDts = 0;\n    _this._startRender = _this._startRender.bind(_this);\n    _this._initCanvas();\n    _this._bindEvents();\n    return _this;\n  }\n\n  _createClass(VideoRender, [{\n    key: 'updateReady',\n    value: function updateReady() {\n      this._whenReady();\n    }\n  }, {\n    key: '_assembleErr',\n    value: function _assembleErr(msg) {\n      var err = new Error(msg);\n      err.code = MEDIA_ERR_DECODE;\n      return err;\n    }\n  }, {\n    key: '_emitTimelineEvents',\n    value: function _emitTimelineEvents(e, v, d) {\n      this._parent.emit(e, v, d);\n    }\n  }, {\n    key: '_initCanvas',\n    value: function _initCanvas() {\n      this._canvas.style.maxWidth = '100%';\n      this._canvas.style.maxHeight = '100%';\n      this._canvas.style.top = 0;\n      this._canvas.style.bottom = 0;\n      this._canvas.style.left = 0;\n      this._canvas.style.right = 0;\n      this._canvas.style.margin = 'auto';\n      this._canvas.style.position = 'absolute';\n    }\n  }, {\n    key: '_bindEvents',\n    value: function _bindEvents() {\n      var _this2 = this;\n\n      this._parent.on(Events.TIMELINE.SET_METADATA, function (type, meta) {\n        if (type === 'audio') return;\n        logger.warn(_this2.TAG, 'video set metadata');\n        _this2._setMetadata(meta);\n      });\n\n      this._parent.on(Events.TIMELINE.APPEND_CHUNKS, this._appendChunk.bind(this));\n\n      this._parent.on(Events.TIMELINE.START_RENDER, this._startRender);\n\n      // 同步时机\n      // 1. 音频一小段buffer起播时\n      // 2. 对noAudio的场景 1. 视频变流时,dts发生变化 2. 卡顿waiting后,_parent.timelinePosition已不准确\n      this._parent.on(Events.TIMELINE.SYNC_DTS, function (dts) {\n        var nextFrame = _this2._frameQueue[0];\n        _this2.lastTimelinePosition = _this2.timelinePosition;\n        if (_this2._noAudio) {\n          dts = dts || nextFrame && nextFrame.info.dts || 0;\n        }\n        _this2.audioSyncDts = dts;\n        if (logger.long) {\n          logger.log(_this2.TAG, 'audio current buffer play finish,dts=', dts, 'currentTime:', _this2._parent.currentTime, 'next video frame dts:', nextFrame && nextFrame.info.dts);\n        }\n\n        // 1. 换流 音频播完,视频还存在几帧之前的流没播完时\n        // 2. 暂时的 a > v\n        while (nextFrame) {\n          var delta = nextFrame.info.dts - dts;\n          if (delta > 10000 || delta < -100) {\n            logger.warn(_this2.TAG, 'detect a-v sync problem,delete nextFrame');\n            _this2._frameQueue.shift();\n            nextFrame = _this2._frameQueue[0];\n            continue;\n          }\n          break;\n        }\n      });\n\n      this._parent.on(Events.TIMELINE.DO_PAUSE, function () {\n        clearTimeout(_this2._clearId);\n        _this2._clearId = 0;\n      });\n\n      this._parent.on(Events.TIMELINE.DESTROY, function () {\n        _this2._destroy();\n      });\n\n      this._parent.on(Events.TIMELINE.NO_AUDIO, function () {\n        _this2._noAudio = true;\n      });\n\n      this.on(Events.VIDEO.AUTO_RUN, this._startRender.bind(this));\n    }\n  }, {\n    key: '_bindWorkerEvent',\n    value: function _bindWorkerEvent(decoder) {\n      var _this3 = this;\n\n      decoder.addEventListener('message', function (e) {\n        var msg = e.data.msg;\n\n        switch (msg) {\n          case 'DECODER_READY':\n            logger.log(_this3.TAG, 'wasm worker ready ', performance.now());\n            _this3._wasmReady = true;\n            _this3.emit(Events.VIDEO.VIDEO_DECODER_INIT);\n            if (!_this3._avccpushed) {\n              _this3._pushAvcc(_this3._decoder, _this3._meta);\n            }\n            _this3._startDecode();\n            break;\n          case 'DECODED':\n            _this3._frameQueue.push(e.data);\n            _this3._decodeEstimate.addDecodeInfo(e.data.info);\n            _this3._checkToDecode();\n            break;\n          case 'DECODE_FINISH':\n            if (_this3._lastDecodingDts === e.data.dts) {\n              _this3._inDecoding = false;\n              _this3._decodeEstimate.resetDecodeDot();\n            }\n            break;\n          case 'LOG':\n            // console.log('video decoder worker: LOG:',msg,e.data.log, performance.now());\n            break;\n          case 'INIT_FAILED':\n            if (_this3._degrade) {\n              _this3._emitTimelineEvents(Events.TIMELINE.PLAY_EVENT, 'error', _this3._assembleErr(e.data.log));\n            } else {\n              _this3._degrade = true;\n              _this3._destroyWorker();\n              _this3._initWorker();\n            }\n\n            break;\n          default:\n            console.error('invalid messaeg', e);\n        }\n      });\n\n      decoder.addEventListener('error', function (e) {\n        _this3._emitTimelineEvents(Events.TIMELINE.PLAY_EVENT, 'error', _this3._assembleErr(e.message));\n      });\n    }\n  }, {\n    key: '_setMetadata',\n    value: function _setMetadata(meta) {\n      this._meta = meta;\n      var fps = meta && meta.frameRate && meta.frameRate.fps;\n      if (fps) {\n        logger.log(this.TAG, 'detect fps:', fps);\n      } else {\n        logger.warn(this.TAG, 'no detect fps,start estimate');\n      }\n      if (!this._decoder) {\n        this._initWorker();\n      } else if (this._wasmReady) {\n        this._pushAvcc(this._decoder, meta);\n      }\n    }\n  }, {\n    key: '_selectWorker',\n    value: function _selectWorker() {\n      logger.log(this.TAG, 'start init worker:', performance.now(), 'hevc:', this.isHevc, 'degrade:', this._degrade);\n      if (this.isHevc) {\n        return {\n          decoder: new HevcWorker(),\n          url: this._degrade ? ASM_H265_DECODER_URL : H265_DECODER_URL\n        };\n      }\n      return {\n        decoder: new AvcWorker(),\n        url: this._degrade ? ASM_H264_DECODER_URL : H264_DECODER_URL\n      };\n    }\n  }, {\n    key: '_initWorker',\n    value: function _initWorker() {\n      var _selectWorker2 = this._selectWorker(),\n          decoder = _selectWorker2.decoder,\n          url = _selectWorker2.url;\n\n      this._decoder = decoder;\n      this._bindWorkerEvent(this._decoder);\n      this._decoder.postMessage({\n        msg: 'init',\n        meta: this._meta,\n        url: url\n      });\n    }\n  }, {\n    key: '_pushAvcc',\n    value: function _pushAvcc(worker, meta) {\n      logger.log(this.TAG, 'push metadata, init codec context');\n      this._avccpushed = true;\n      worker.postMessage({\n        msg: 'updatemeta',\n        meta: meta\n      });\n      var vps = meta.rawVps || meta.vps;\n      var sps = meta.rawSps || meta.sps;\n      var pps = meta.rawPps || meta.pps;\n      if (vps) {\n        var _data = new Uint8Array(vps.byteLength + 4);\n        _data.set([0, 0, 0, 1]);\n        _data.set(vps, 4);\n        worker.postMessage({\n          msg: 'decode',\n          data: _data\n        });\n      }\n\n      var data = new Uint8Array(sps.byteLength + 4);\n      data.set([0, 0, 0, 1]);\n      data.set(sps, 4);\n      worker.postMessage({\n        msg: 'decode',\n        data: data\n      });\n\n      data = new Uint8Array(pps.byteLength + 4);\n      data.set([0, 0, 0, 1]);\n      data.set(pps, 4);\n      worker.postMessage({\n        msg: 'decode',\n        data: data\n      });\n\n      if (!this._frameRender) {\n        var config = Object.assign({ meta: meta, canvas: this._canvas }, this.config);\n        this._frameRender = new FrameRender(config);\n      } else {\n        this._frameRender.resetMeta(meta);\n      }\n    }\n  }, {\n    key: '_appendChunk',\n    value: function _appendChunk(videoTrack) {\n      this._timeRange.append(videoTrack.samples, this._noAudio);\n      videoTrack.samples = [];\n      if (!this._ready && this._wasmReady && this._noAudio) {\n        this._startDecode();\n      }\n      if (this._noAudio) {\n        this._emitTimelineEvents(Events.TIMELINE.PLAY_EVENT, Events.VIDEO_EVENTS.DURATION_CHANGE);\n      }\n    }\n\n    // 1. decoder初始化预解码几帧\n    // 2. render 过程,帧数过少时解码新帧\n\n  }, {\n    key: '_startDecode',\n    value: function _startDecode() {\n      var len = 15;\n      while (len >= 0) {\n        var sample = this._timeRange && this._timeRange.shift();\n        if (!sample) break;\n        this._decodeSample(sample);\n        len--;\n      }\n    }\n  }, {\n    key: '_whenReady',\n    value: function _whenReady() {\n      this._ready = true;\n      this.emit(Events.VIDEO.VIDEO_READY);\n      this._emitTimelineEvents(Events.TIMELINE.PLAY_EVENT, Events.VIDEO_EVENTS.LOADEDDATA);\n      if (this._noAudio) {\n        this._emitTimelineEvents(Events.TIMELINE.PLAY_EVENT, Events.VIDEO_EVENTS.PLAYING);\n      }\n    }\n\n    // 检测需要解码的时机\n    // 1. 解码worker初始化完成,提前解几帧\n    // 2. 渲染ticker中\n\n  }, {\n    key: '_checkToDecode',\n    value: function _checkToDecode() {\n      if (!this._ready) {\n        if (this.readyState >= HAVE_FUTURE_DATA) {\n          this._whenReady();\n        }\n        return;\n      }\n      if (!this._inDecoding && this.readyState < HAVE_FUTURE_DATA) {\n        this._startDecode();\n      }\n    }\n  }, {\n    key: '_startRender',\n    value: function _startRender() {\n      if (this._clearId) {\n        clearTimeout(this._clearId);\n      }\n\n      var frame = this._frameQueue && this._frameQueue[0];\n      if (!frame || !this._timeRange) {\n        logger.log(this.TAG, 'lack frame');\n        this._checkToDecode();\n        this._clearId = setTimeout(this._startRender, this.interval);\n        // waiting\n        if (this._noAudio) {\n          this._ready = false;\n          this.emit(Events.VIDEO.VIDEO_WAITING);\n        }\n        return;\n      }\n\n      var info = frame.info;\n\n\n      if (!info) {\n        this._frameQueue.shift();\n        this._clearId = setTimeout(this._startRender, this.interval);\n        return;\n      }\n\n      var _renderDelay = info.dts - this.preciseVideoDts;\n\n      if (_renderDelay > this.interval) {\n        this._clearId = setTimeout(this._startRender, this.interval);\n        return;\n      }\n\n      this._frameQueue.shift();\n\n      if (Math.abs(this._lastTimeupdate - info.dts) > 250) {\n        this._emitTimelineEvents(Events.TIMELINE.PLAY_EVENT, Events.VIDEO_EVENTS.TIMEUPDATE);\n        this._lastTimeupdate = info.dts;\n      }\n\n      if (logger.long) {\n        logger.log(this.TAG, 'render delay:' + _renderDelay + ' , timelinePosition:' + this.preciseVideoDts + ' , dts:' + info.dts + ' , rest:' + this._frameQueue.length);\n      }\n\n      this._frameRender.render(frame.buffer, frame.width, frame.height, frame.yLinesize, frame.uvLinesize);\n      this._checkToDecode();\n      this._clearId = setTimeout(this._startRender, 25);\n    }\n  }, {\n    key: '_decodeSample',\n    value: function _decodeSample(sample) {\n      if (sample.options && sample.options.meta) {\n        this._meta = sample.options.meta;\n        logger.warn(this.TAG, 'detect metadata! flush decoder');\n        this._pushAvcc(this._decoder, sample.options.meta);\n        // 换流更新\n        if (this._noAudio) {\n          this._emitTimelineEvents(Events.TIMELINE.SYNC_DTS, sample.dts);\n        }\n      }\n\n      var gopId = 0;\n      if (sample.gopId) {\n        gopId = sample.gopId - 1;\n      }\n      // const worker = this.wasmworkers[gopId % MAX_WORKER_NUM];\n      this._inDecoding = true;\n      this._lastDecodingDts = sample.dts;\n      this._decoder.postMessage({\n        msg: 'decode',\n        data: sample.data,\n        info: {\n          dts: sample.dts,\n          pts: sample.pts || sample.dts + sample.cts,\n          key: sample.isKeyframe,\n          gopId: gopId,\n          isGop: sample.isGop || false\n        }\n      });\n    }\n  }, {\n    key: '_destroyWorker',\n    value: function _destroyWorker() {\n      if (this._decoder) {\n        logger.log(this.TAG, 'destroy worker...');\n        this._decoder.postMessage({ msg: 'destroy' });\n        this._decoder.terminate();\n      }\n    }\n  }, {\n    key: '_destroy',\n    value: function _destroy() {\n      this._destroyWorker();\n      this._canvas = null;\n      this._timeRange = null;\n      this._frameQueue = null;\n      this._decodeEstimate = null;\n      this._frameRender = null;\n      clearTimeout(this._clearId);\n    }\n  }, {\n    key: 'canvas',\n    get: function get() {\n      return this._canvas;\n    }\n  }, {\n    key: 'isHevc',\n    get: function get() {\n      return (this._meta || {}).codec === 'hev1.1.6.L93.B0';\n    }\n  }, {\n    key: 'timescale',\n    get: function get() {\n      if (!this._meta) return 1000;\n      return this._meta.timescale || 1000;\n    }\n  }, {\n    key: 'fps',\n    get: function get() {\n      return this._meta && this._meta.frameRate && this._meta.frameRate.fps || this._decodeEstimate.fps || 24;\n    }\n  }, {\n    key: 'decodeFps',\n    get: function get() {\n      return this._decodeEstimate.decodeFps;\n    }\n  }, {\n    key: 'decodeCost',\n    get: function get() {\n      return this._decodeEstimate.decodeCost;\n    }\n  }, {\n    key: 'bitrate',\n    get: function get() {\n      return this._timeRange.bitrate;\n    }\n  }, {\n    key: 'duration',\n    get: function get() {\n      return this._timeRange.duartion;\n    }\n  }, {\n    key: 'buffered',\n    get: function get() {\n      return this._timeRange.buffered;\n    }\n  }, {\n    key: 'interval',\n    get: function get() {\n      return Math.floor(1000 / this.fps);\n    }\n  }, {\n    key: 'running',\n    get: function get() {\n      return this._clearId !== 0;\n    }\n\n    // video first frame dts\n\n  }, {\n    key: 'baseDts',\n    get: function get() {\n      return this._timeRange.baseDts;\n    }\n\n    // noAudio时使用\n\n  }, {\n    key: 'currentTime',\n    get: function get() {\n      return this._timeRange.lastDuration + (this.preciseVideoDts - this.baseDts) / 1000;\n    }\n  }, {\n    key: 'timelinePosition',\n    get: function get() {\n      return this._parent.timelinePosition;\n    }\n  }, {\n    key: 'lastTimelinePosition',\n    set: function set(ts) {\n      this._lastTimelinePosition = ts;\n    }\n\n    // the startTime on timeline of the buffer audioCtx current playing\n    // noAudio: the time record by perforamce.now() when play start or restart after waiting or stream changed\n    ,\n    get: function get() {\n      return this._lastTimelinePosition || 0;\n    }\n  }, {\n    key: 'audioSyncDts',\n    set: function set(dts) {\n      this._audioDts = dts;\n    }\n\n    // the first sample's dts of the buffer audioCtx current playing\n    ,\n    get: function get() {\n      return this._audioDts || this.baseDts;\n    }\n\n    // the precise video dts sync to timeline time\n\n  }, {\n    key: 'preciseVideoDts',\n    get: function get() {\n      return this.audioSyncDts + (this.timelinePosition - this.lastTimelinePosition) * 1000;\n    }\n  }, {\n    key: 'readyState',\n    get: function get() {\n      var len = this._frameQueue && this._frameQueue.length;\n      if (!len) return HAVE_NOTHING;\n      if (len >= 8) return HAVE_ENOUGH_DATA;\n      if (len >= 4) return HAVE_FUTURE_DATA;\n      if (len >= 2) return HAVE_CURRENT_DATA;\n      return HAVE_METADATA;\n    }\n  }]);\n\n  return VideoRender;\n}(EventEmitter);\n\nexport default VideoRender;","var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nimport EventEmitter from 'events';\nimport { logger } from 'xgplayer-helper-utils';\nimport AudioRender from './render/AudioRender';\nimport VideoRender from './render/VideoRender';\nimport Events from './events';\n\nvar TimeLine = function (_EventEmitter) {\n  _inherits(TimeLine, _EventEmitter);\n\n  function TimeLine(config, parent) {\n    _classCallCheck(this, TimeLine);\n\n    var _this = _possibleConstructorReturn(this, (TimeLine.__proto__ || Object.getPrototypeOf(TimeLine)).call(this));\n\n    _this.TAG = 'TimeLine';\n    _this._parent = parent;\n    _this.videoRender = new VideoRender(config, _this);\n    _this.audioRender = new AudioRender(config, _this);\n    _this._readyStatus = {\n      audio: false,\n      video: false\n    };\n    _this._paused = true;\n    _this._noAudio = false;\n    _this._bindEvent();\n    return _this;\n  }\n\n  _createClass(TimeLine, [{\n    key: '_bindEvent',\n    value: function _bindEvent() {\n      var _this2 = this;\n\n      this.audioRender.on(Events.AUDIO.AUDIO_READY, function () {\n        logger.log(_this2.TAG, 'audio ready!');\n        _this2._readyStatus.audio = true;\n        if (_this2._readyStatus.video) {\n          _this2._startRender();\n        }\n      });\n\n      this.audioRender.on(Events.AUDIO.AUDIO_WAITING, function () {\n        if (_this2._noAudio) return;\n        logger.warn(_this2.TAG, 'lack data, audio waiting,currentTime:', _this2.currentTime);\n        _this2.emit(Events.TIMELINE.PLAY_EVENT, Events.VIDEO_EVENTS.WAITING);\n        _this2.emit(Events.TIMELINE.PLAY_EVENT, Events.VIDEO_EVENTS.TIMEUPDATE);\n        _this2.emit(Events.TIMELINE.DO_PAUSE);\n        _this2._readyStatus.audio = false;\n      });\n\n      // only used for no audio exist\n      this.videoRender.on(Events.VIDEO.VIDEO_WAITING, function () {\n        logger.warn(_this2.TAG, 'lack data, video waiting');\n        _this2.emit(Events.TIMELINE.PLAY_EVENT, Events.VIDEO_EVENTS.WAITING);\n        _this2.emit(Events.TIMELINE.DO_PAUSE);\n        _this2._readyStatus.video = false;\n      });\n\n      this.videoRender.on(Events.VIDEO.VIDEO_DECODER_INIT, function () {\n        logger.log(_this2.TAG, 'video decoder init!');\n        setTimeout(function () {\n          if (!_this2._readyStatus.video) {\n            logger.warn(_this2.TAG, 'video 首次解码无解码帧返回! auto ready!');\n            _this2.videoRender.updateReady();\n          }\n        }, 1000);\n      });\n\n      this.onVideoReady = function () {\n        logger.log(_this2.TAG, 'video ready!');\n        _this2._readyStatus.video = true;\n        if (_this2._readyStatus.audio) {\n          _this2._startRender();\n        }\n      };\n\n      this.videoRender.on(Events.VIDEO.VIDEO_READY, this.onVideoReady);\n\n      this.videoRender.on(Events.VIDEO.DECODE_LOW_FPS, function () {\n        if (_this2.currentTime < 20) return;\n        if (_this2._paused) return;\n        _this2.pause();\n        _this2.emit(Events.TIMELINE.PLAY_EVENT, Events.VIDEO_EVENTS.LOW_DECODE);\n      });\n\n      this.on(Events.TIMELINE.NO_AUDIO, function () {\n        _this2._noAudio = true;\n        _this2._readyStatus.audio = true;\n      });\n    }\n  }, {\n    key: '_startRender',\n    value: function _startRender() {\n      if (this._parent.error) return;\n      if (this._noAudio) {\n        this.emit(Events.TIMELINE.SYNC_DTS, 0);\n      }\n      logger.log(this.TAG, 'startRender: time=', this.currentTime);\n      this.emit(Events.TIMELINE.PLAY_EVENT, Events.VIDEO_EVENTS.CANPLAY);\n      this.emit(Events.TIMELINE.START_RENDER);\n      this.emit(Events.TIMELINE.READY);\n    }\n  }, {\n    key: 'resetReadyStatus',\n    value: function resetReadyStatus() {\n      this._readyStatus = {\n        audio: false,\n        video: false\n      };\n    }\n  }, {\n    key: 'play',\n    value: function play() {\n      var _this3 = this;\n\n      return new Promise(function (resolve, reject) {\n        var resumed = false;\n\n        if (_this3._noAudio) {\n          resumed = true;\n        } else {\n          _this3.audioRender.resume().then(function () {\n            logger.log(_this3.TAG, 'audioCtx 开始播放');\n            resumed = true;\n          });\n        }\n\n        setTimeout(function () {\n          _this3.emit(Events.TIMELINE.PLAY_EVENT, Events.VIDEO_EVENTS.TIMEUPDATE);\n          if (!resumed) {\n            logger.log(_this3.TAG, 'audioCtx 不能自动播放');\n            reject();\n            return;\n          }\n          _this3._paused = false;\n          _this3.emit(Events.TIMELINE.PLAY_EVENT, Events.VIDEO_EVENTS.PLAY);\n          resolve();\n        }, 30);\n      });\n    }\n  }, {\n    key: 'pause',\n    value: function pause() {\n      var _this4 = this;\n\n      if (this._paused) return;\n      this.emit(Events.TIMELINE.DO_PAUSE);\n      setTimeout(function () {\n        _this4._paused = true;\n        _this4.emit(Events.TIMELINE.PLAY_EVENT, Events.VIDEO_EVENTS.PAUSE);\n      }, 10);\n    }\n  }, {\n    key: 'seek',\n    value: function seek() {\n      this._paused = true;\n    }\n  }, {\n    key: 'ready',\n    get: function get() {\n      return this._readyStatus.video && this._readyStatus.audio;\n    }\n  }, {\n    key: 'played',\n    get: function get() {\n      var _this5 = this;\n\n      return {\n        length: this.currentTime ? 1 : 0,\n        start: function start() {\n          return 0;\n        },\n        end: function end() {\n          return _this5.currentTime;\n        }\n      };\n    }\n  }, {\n    key: 'decodeFps',\n    get: function get() {\n      return this.videoRender.decodeFps;\n    }\n  }, {\n    key: 'decodeCost',\n    get: function get() {\n      return this.videoRender.decodeCost;\n    }\n  }, {\n    key: 'fps',\n    get: function get() {\n      return this.videoRender.fps;\n    }\n  }, {\n    key: 'bitrate',\n    get: function get() {\n      return this.videoRender.bitrate;\n    }\n  }, {\n    key: 'currentTime',\n    get: function get() {\n      if (this._noAudio) return this.videoRender.currentTime;\n      return this.audioRender.currentTime;\n    }\n  }, {\n    key: 'timelinePosition',\n    get: function get() {\n      if (this._noAudio) return performance.now() / 1000; // s\n      return this.audioRender.currentTime;\n    }\n  }, {\n    key: 'canvas',\n    get: function get() {\n      return this.videoRender.canvas;\n    }\n  }, {\n    key: 'readyState',\n    get: function get() {\n      return this.videoRender.readyState;\n    }\n  }, {\n    key: 'buffered',\n    get: function get() {\n      if (this._noAudio) return this.videoRender.buffered;\n      return this.audioRender.buffered;\n    }\n  }, {\n    key: 'duration',\n    get: function get() {\n      if (this._noAudio) return this.videoRender.duration;\n      return this.audioRender.duration;\n    }\n  }, {\n    key: 'paused',\n    get: function get() {\n      return this._paused;\n    }\n  }]);\n\n  return TimeLine;\n}(EventEmitter);\n\nexport default TimeLine;","var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nfunction _CustomElement() {\n  return Reflect.construct(HTMLElement, [], this.__proto__.constructor);\n}\n\n;\nObject.setPrototypeOf(_CustomElement.prototype, HTMLElement.prototype);\nObject.setPrototypeOf(_CustomElement, HTMLElement);\nimport NoSleep from './helper/nosleep';\nimport './polyfills/custom-elements.min';\nimport './polyfills/native-element';\nimport { logger } from 'xgplayer-helper-utils';\nimport TimeLine from './TimeLine';\nimport Events from './events';\n\nvar MVideo = function (_CustomElement2) {\n  _inherits(MVideo, _CustomElement2);\n\n  function MVideo() {\n    _classCallCheck(this, MVideo);\n\n    var _this = _possibleConstructorReturn(this, (MVideo.__proto__ || Object.getPrototypeOf(MVideo)).call(this));\n\n    _this.TAG = 'MVideo';\n    _this._init();\n    return _this;\n  }\n\n  _createClass(MVideo, [{\n    key: '_init',\n    value: function _init() {\n      var _this2 = this;\n\n      this.timeline = new TimeLine({\n        preloadTime: this.preloadTime,\n        volume: this.volume,\n        canvas: this.querySelector('canvas')\n      }, this);\n      this._noSleep = new NoSleep();\n      this._logFirstFrame = false;\n      this._playRequest = null;\n      this._bindEvents();\n      setTimeout(function () {\n        if (_this2.noAudio) {\n          _this2.setNoAudio();\n        }\n      });\n    }\n  }, {\n    key: '_bindEvents',\n    value: function _bindEvents() {\n      var _this3 = this;\n\n      this.timeline.on(Events.TIMELINE.PLAY_EVENT, function (status, data) {\n        if (status === 'canplay') {\n          if (!_this3.querySelector('canvas')) {\n            _this3.appendChild(_this3.canvas);\n          }\n        }\n        if (status === 'error') {\n          _this3._err = data;\n          logger.warn(_this3.TAG, 'detect error:', data.message);\n          _this3.pause();\n        }\n        if (status === 'ended') {\n          _this3.pause();\n        }\n        _this3._innerDispatchEvent(status);\n      });\n    }\n  }, {\n    key: 'disconnectedCallback',\n    value: function disconnectedCallback() {\n      logger.log(this.TAG, 'video disconnected');\n      this.destroy();\n    }\n  }, {\n    key: 'connectedCallback',\n    value: function connectedCallback() {\n      logger.log(this.TAG, 'video connected to document');\n      if (!this.timeline) {\n        this._init();\n      }\n    }\n  }, {\n    key: 'handleMediaInfo',\n    value: function handleMediaInfo() {\n      this._logFirstFrame = false;\n    }\n  }, {\n    key: 'play',\n    value: function play() {\n      var _this4 = this;\n\n      logger.log(this.TAG, 'mvideo called play(),to reset video:', this.timeline.ready, this.timeline.paused);\n\n      // 暂停后起播\n      // 初始化后不能自动播放,手动播放\n      if (this.timeline.ready && this.timeline.paused) {\n        this.destroy();\n        this._init();\n        this.timeline.resetReadyStatus();\n        this._playRequest = null;\n      }\n\n      this._playRequest = this._playRequest || new Promise(function (resolve, reject) {\n        _this4._innerDispatchEvent('timeupdate');\n        _this4._innerDispatchEvent('play');\n        _this4._innerDispatchEvent('waiting');\n        _this4._noSleep.enable();\n        _this4.timeline.once('ready', function () {\n          _this4._playRequest = null;\n          _this4.timeline.play().then(resolve).catch(reject);\n        });\n      });\n\n      return this._playRequest;\n    }\n  }, {\n    key: 'pause',\n    value: function pause() {\n      this._playRequest = null;\n      this.timeline.pause();\n      this._noSleep.disable();\n    }\n  }, {\n    key: 'load',\n    value: function load() {}\n  }, {\n    key: 'onDemuxComplete',\n    value: function onDemuxComplete(videoTrack, audioTrack) {\n      if (this.error || !this.timeline) return;\n      if (!this._logFirstFrame) {\n        var vSam0 = videoTrack.samples[0];\n        var aSam0 = this.noAudio ? null : audioTrack.samples[0];\n        if (vSam0 && aSam0 || vSam0 && this.noAudio) {\n          logger.log(this.TAG, 'video firstDts:' + vSam0.dts + ' , audio firstDts:' + (this.noAudio ? 0 : aSam0.dts));\n          this._logFirstFrame = true;\n        }\n      }\n      this.timeline.emit(Events.TIMELINE.APPEND_CHUNKS, videoTrack, audioTrack);\n    }\n  }, {\n    key: 'setNoAudio',\n    value: function setNoAudio() {\n      logger.log(this.TAG, 'video set noAudio!');\n      this.timeline.emit(Events.TIMELINE.NO_AUDIO);\n      this.noAudio = true;\n    }\n  }, {\n    key: 'setAudioMeta',\n    value: function setAudioMeta(meta) {\n      this.timeline.emit(Events.TIMELINE.SET_METADATA, 'audio', meta);\n    }\n  }, {\n    key: 'setVideoMeta',\n    value: function setVideoMeta(meta) {\n      this.timeline.emit(Events.TIMELINE.SET_METADATA, 'video', meta);\n    }\n  }, {\n    key: 'handleEnded',\n    value: function handleEnded() {\n      this.timeline.emit(Events.TIMELINE.PLAY_EVENT, 'ended');\n    }\n  }, {\n    key: 'handleErr',\n    value: function handleErr(code, message) {\n      this._err = {};\n      this._err.code = code;\n      this._err.message = message;\n      this.timeline.emit(Events.TIMELINE.PLAY_EVENT, 'error');\n    }\n  }, {\n    key: '_innerDispatchEvent',\n    value: function _innerDispatchEvent(type) {\n      this.dispatchEvent(new Event(type));\n    }\n  }, {\n    key: 'destroy',\n    value: function destroy() {\n      logger.log(this.TAG, 'call destroy');\n      this.timeline.emit(Events.TIMELINE.DESTROY);\n      this.timeline = null;\n      this._err = null;\n      this._noSleep = null;\n    }\n  }, {\n    key: 'noAudio',\n    get: function get() {\n      return this.getAttribute('noaudio') === 'true';\n    },\n    set: function set(val) {\n      this.setAttribute('noaudio', val);\n    }\n  }, {\n    key: 'canvas',\n    get: function get() {\n      return this.timeline.canvas;\n    }\n  }, {\n    key: 'width',\n    get: function get() {\n      return this.getAttribute('width') || this.videoWidth;\n    },\n    set: function set(val) {\n      this.style.display = 'inline-block';\n      var pxVal = typeof val === 'number' ? val + 'px' : val;\n      this.setAttribute('width', pxVal);\n      this.style.width = pxVal;\n      this.canvas.width = val;\n    }\n  }, {\n    key: 'height',\n    get: function get() {\n      return this.getAttribute('height');\n    },\n    set: function set(val) {\n      this.style.display = 'inline-block';\n      var pxVal = typeof val === 'number' ? val + 'px' : val;\n      this.setAttribute('height', pxVal);\n      this.style.height = pxVal;\n      this.canvas.height = val;\n    }\n  }, {\n    key: 'videoWidth',\n    get: function get() {\n      return this.canvas.width;\n    }\n  }, {\n    key: 'videoHeight',\n    get: function get() {\n      return this.canvas.height;\n    }\n  }, {\n    key: 'volume',\n    get: function get() {\n      return Number(this.getAttribute('volume'));\n    },\n    set: function set(v) {\n      if (v <= 0) {\n        v = 0;\n      }\n      if (v >= 1) {\n        v = 1;\n      }\n      this.setAttribute('volume', v);\n      this.timeline.emit(Events.TIMELINE.UPDATE_VOLUME, v);\n    }\n  }, {\n    key: 'muted',\n    get: function get() {\n      return this.getAttribute('muted') === 'true' || this.volume == 0;\n    },\n    set: function set(v) {\n      this.setAttribute('muted', v);\n      this.timeline.emit(Events.TIMELINE.UPDATE_VOLUME, v ? 0 : this.volume);\n    }\n  }, {\n    key: 'currentTime',\n    get: function get() {\n      var c = this.timeline.currentTime;\n      var d = this.timeline.duration;\n      return c > d ? d : c;\n    },\n    set: function set(v) {\n      this.timeline.seek(v);\n    }\n  }, {\n    key: 'duration',\n    get: function get() {\n      return this.timeline.duration;\n    }\n  }, {\n    key: 'seeking',\n    get: function get() {\n      return false;\n    }\n  }, {\n    key: 'paused',\n    get: function get() {\n      return this.timeline.paused;\n    }\n  }, {\n    key: 'fps',\n    get: function get() {\n      return this.timeline.fps;\n    }\n  }, {\n    key: 'decodeFps',\n    get: function get() {\n      return this.timeline.decodeFps;\n    }\n  }, {\n    key: 'decodeCost',\n    get: function get() {\n      return parseInt(this.timeline.decodeCost);\n    }\n  }, {\n    key: 'bitrate',\n    get: function get() {\n      return this.timeline.bitrate;\n    }\n  }, {\n    key: 'readyState',\n    get: function get() {\n      return this.timeline.readyState;\n    }\n  }, {\n    key: 'buffered',\n    get: function get() {\n      return this.timeline.buffered;\n    }\n  }, {\n    key: 'src',\n    get: function get() {\n      return this.getAttribute('src');\n    },\n    set: function set(val) {\n      this.setAttribute('src', val);\n    }\n  }, {\n    key: 'playbackRate',\n    set: function set(v) {},\n    get: function get() {\n      return 1;\n    }\n  }, {\n    key: 'networkState',\n    get: function get() {\n      return 0;\n    }\n  }, {\n    key: 'preloadTime',\n    get: function get() {\n      var attrPreloadTime = this.getAttribute('preloadtime');\n      if (attrPreloadTime) {\n        var preloadTime = Number.parseFloat(attrPreloadTime);\n        if (preloadTime > 0 && !Number.isNaN(preloadTime)) {\n          return preloadTime;\n        }\n      }\n      return Infinity;\n    },\n    set: function set(val) {\n      if (val && Number(val) > 0) {\n        this.setAttribute('preloadtime', val);\n      }\n    }\n  }, {\n    key: 'error',\n    get: function get() {\n      return this._err;\n    }\n  }]);\n\n  return MVideo;\n}(_CustomElement);\n\ncustomElements.define('mobile-video', MVideo);","import Player from 'xgplayer';\nimport Core from './raw-264';\nimport { Buffer as LoaderBuffer } from 'xgplayer-helper-models';\nimport { FetchLoader, Context, EVENTS as Events } from 'xgplayer-helper-utils';\nimport 'xgplayer-mobilevideo';\n\nconst asmSupported = () => {\n  try {\n    (function MyAsmModule () {\n      'use asm';\n    })();\n    return true;\n  } catch (err) {\n    // will never show...\n    return false;\n  }\n};\n\nclass Raw264Player extends Player {\n  static isSupported () {\n    const wasmSupported = 'WebAssembly' in window;\n\n    const WebComponentSupported = 'customElements' in window && window.customElements.define;\n    let isComponentDefined;\n    if (WebComponentSupported) {\n      isComponentDefined = window.customElements.get('mobile-video');\n    }\n    return (wasmSupported || asmSupported) && isComponentDefined;\n  }\n\n  constructor (props) {\n    if (!props.mediaType) {\n      props.mediaType = 'mobile-video';\n      if (props.videoConfig) {\n        props.videoConfig.preloadtime = props.preloadTime || 5;\n      } else {\n        props.videoConfig = {\n          preloadtime: props.preloadTime || 5\n        };\n      }\n    }\n    super(props);\n    this.video.setAttribute('noaudio', true);\n    this.handleTimeupdate = this.handleTimeupdate.bind(this);\n    this.hasPlayed = false;\n    this.hasStart = false;\n  }\n\n  start () {\n    if (this.hasStart) {\n      return;\n    } else {\n      this.hasStart = true;\n    }\n    this.context = new Context(Events.HlsAllowedEvents);\n    this.context.registry('LOADER_BUFFER', LoaderBuffer);\n    this.core = this.context.registry('RAW_264_CONTROLLER', Core)({player: this, fps: this.config.fps});\n    this.context.registry('FETCH_LOADER', FetchLoader);\n    this.context.init();\n    if (!this.config.isLive) {\n      this.core.load(this.config.url);\n    }\n\n    super.start();\n    this.video.preloadTime = this.config.preloadTime;\n    this.video.addEventListener('timeupdate', this.handleTimeupdate, false);\n  }\n\n  replay () {\n    this.video._cleanBuffer();\n    this.currentTime = 0;\n    this.start();\n    this.play();\n  }\n\n  handleTimeupdate () {\n    if (!this.config.isLive && this.currentTime >= this.duration) {\n      this.video._cleanBuffer();\n      this.pause();\n      this.emit('ended');\n    } else if (this.config.isLive && this.buffered.end(0) - this.currentTime > 0.1) {\n      this.currentTime = this.buffered.end(0) - 0.1;\n    }\n  }\n\n  destroy (isDelDom) {\n    super.destroy(isDelDom);\n    this.core.destroy();\n    this.context.destroy();\n    this.core = null;\n    this.context = null;\n  }\n\n  pushBuffer (arr) {\n    if (!this.hasStart) {\n      return this.start();\n    }\n    if (this.buffer) {\n      this.buffer.push(arr);\n      this.core.handleDataLoaded();\n    }\n  }\n\n  get buffer () {\n    return this.context.getInstance('LOADER_BUFFER');\n  }\n\n  set currentTime (time) {\n    const oldTime = super.currentTime;\n    const buffered = this.getBufferedRange();\n    if (buffered[0] <= time && buffered[1] >= time) {\n      this.video.currentTime = time;\n    } else {\n      this.video.currentTime = oldTime;\n    }\n  }\n\n  get currentTime () {\n    return super.currentTime;\n  }\n\n  get duration () {\n    if (this.core && this.core.duration) {\n      return this.core.duration;\n    }\n    return this.video.duration;\n  }\n}\n\nexport default Raw264Player;\n"],"names":["_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","Constructor","protoProps","staticProps","prototype","_classCallCheck","instance","TypeError","AAC","value","getSilentFrame","codec","channelCount","Uint8Array","ADTS","isHeader","data","offset","isHeaderPattern","getFrameDuration","samplerate","getHeaderLength","getFullFrameLength","parseFrameHeader","pts","frameIndex","frameDuration","headerLength","frameLength","stamp","undefined","appendFrame","track","meta","sampleRate","header","aacSample","unit","subarray","dts","sample","Golomb","uint8array","TAG","_buffer","_bufferIndex","_totalBytes","byteLength","_totalBits","_currentWord","_currentWordBitsLeft","destroy","_fillCurrentWord","bufferBytesLeft","bytesRead","Math","min","word","set","DataView","buffer","getUint32","readBits","size","bits","valu","Error","readBool","readByte","_skipLeadingZero","zeroCount","readUEG","leadingZeros","readSEG","SPSParser","_ebsp2rbsp","src","srcLength","dst","dstIdx","parseSPS","rbsp","gb","profileIdc","levelIdc","profile_string","getProfileString","level_string","getLevelString","chroma_format_idc","chroma_format","chroma_format_table","bit_depth","scaling_list_count","_skipScalingList","pic_order_cnt_type","num_ref_frames_in_pic_order_cnt_cycle","_i","pic_width_in_mbs_minus1","pic_height_in_map_units_minus1","frame_mbs_only_flag","frame_crop_left_offset","frame_crop_right_offset","frame_crop_top_offset","frame_crop_bottom_offset","frame_cropping_flag","par_width","par_height","fps","fps_fixed","fps_num","fps_den","vui_parameters_present_flag","aspect_ratio_idc","par_w_table","par_h_table","num_units_in_tick","time_scale","parScale","crop_unit_x","crop_unit_y","sub_wc","sub_hc","codec_width","codec_height","present_width","ceil","chroma_format_string","getChromaFormatString","frame_rate","fixed","par_ratio","width","height","codec_size","present_size","count","lastScale","nextScale","deltaScale","toFixed","chroma","toVideoMeta","spsConfig","codecWidth","codecHeight","presentWidth","presentHeight","profile","level","bitDepth","chromaFormat","parRatio","frameRate","fpsDen","fpsNum","refSampleDuration","floor","timescale","RBSP","EBSP2RBSP","filter","el","idx","EBSP2SODB","lastByte","slice","u8aToString","result","String","fromCharCode","SEIParser","_resolveNalu","parse","sodb","_SEIParser$switchPayl","switchPayloadType","payloadType","content","user_data_unregistered","code","dv","getUint8","getPayloadLength","payloadLength","_SEIParser$getPayload","uuid","payload","Nalunit","getNalunits","position","buf","dataview","getInt32","getInt16","getInt8","getAnnexbNals","getAvccNals","nals","getHeaderPositionAnnexB","start","pos","end","skip","body","analyseNal","type","push","ndr","idr","sei","sps","SpsParser","pps","bufferLen","getAvcc","ret","_SpsParser","NalUnit","_NalUnit","_SEIParser","_Golomb","vpsId","maxSubLayersMinus1","tINf","spsId","separate_colour_plane_flag","chromaFormatIdc","conf_win_left_offset","conf_win_right_offset","conf_win_top_offset","conf_win_bottom_offset","conformanceWindowFlag","bitDepthLumaMinus8","bitDepthChromaMinus8","sub_width_c","sub_height_c","profileTierLevel","_readProfileTierLevel","general_profile_space","general_tier_flag","general_profile_idc","general_level_idc","subLayerProfilePresentFlag","subLayerLevelPresentFlag","j","getHvccNals","e","slice_trail_n","slice_trail_r","slice_tsa_n","slice_tsa_r","slice_stsa_n","slice_stsa_r","slice_radl_n","slice_radl_r","slice_rasl_n","slice_rasl_r","slice_bla_w_lp","slice_bla_w_radl","slice_bla_n_lp","slice_idl_w_radl","slice_idr_n_lp","slice_cra_nut","vps","aud","eob","fd","TimeRanges","dump","len","console","log","fn","wait","lastTime","Date","now","timer","isFirstTime","_len","arguments","args","Array","_key","apply","window","clearTimeout","setTimeout","fixedFloat","num","Number","parseFloat","debounce","_debounce","caculate","_caculate","BROWSER_EVENTS","VISIBILITY_CHANGE","PLAYER_EVENTS","SEEK","LOADER_EVENTS","LADER_START","LOADER_DATALOADED","LOADER_COMPLETE","LOADER_RESPONSE_HEADERS","LOADER_ERROR","DEMUX_EVENTS","DEMUX_START","DEMUX_COMPLETE","DEMUX_ERROR","METADATA_PARSED","SEI_PARSED","VIDEO_METADATA_CHANGE","AUDIO_METADATA_CHANGE","MEDIA_INFO","REMUX_EVENTS","REMUX_METADATA","REMUX_MEDIA","MEDIA_SEGMENT","REMUX_ERROR","INIT_SEGMENT","DETECT_CHANGE_STREAM","DETECT_CHANGE_STREAM_DISCONTINUE","DETECT_AUDIO_GAP","DETECT_AUDIO_OVERLAP","RANDOM_ACCESS_POINT","MSE_EVENTS","SOURCE_UPDATE_END","MSE_ERROR","HLS_EVENTS","RETRY_TIME_EXCEEDED","CRYTO_EVENTS","START_DECRYPT","DECRYPTED","ALLEVENTS","assign","FlvAllowedEvents","HlsAllowedEvents","hasOwnProperty","Playlist","configs","_baseURL","_list","_ts","version","sequence","targetduration","duration","fragLength","_lastget","_audoclear","autoclear","downloadedUrls","ts","discontinue","id","downloaded","downloading","deleteFrag","url","time","pushM3U8","deletepre","encrypt","newfraglist","frags","frag","indexOf","tslist","getTsList","keys","tsname","isloaded","loading","getTsByName","name","getTs","timelist","sort","a","b","parseInt","getLastDownloadedTs","found","clear","clearDownloaded","l","get","baseURL","Presource","mimetype","init","PreSource","sources","getSource","source","createSource","Stream","ArrayBuffer","back","loop","last","readUint8","readUint16","readUint24","readUint32","readUint64","readInt8","readInt16","readInt32","writeUint32","sign","res","getUint16","_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","create","constructor","setPrototypeOf","__proto__","Track","sequenceNumber","samples","droppedSamples","reset","distroy","AudioTrack","_Track","_this","getPrototypeOf","VideoTrack","_Track2","_this2","dropped","Tracks","audioTrack","videoTrack","XgBuffer","historyLen","array","shift","_shiftBuffer","_ret","_ret2","tmpoff","tmp","templength","toInt","retInt","AudioTrackMeta","_default","config","sampleRateIndex","VideoTrackMeta","avcc","AudioTrackSample","info","getDefault","VideoTrackSample","isKeyframe","originDts","isObjectFilled","obj","MediaInfo","mimeType","hasVideo","video","hasAudio","audio","isComplete","isBaseInfoReady","isVideoReady","isAudioReady","mediaInfo","_Stream","Buffer","_Buffer","_MediaInfo","_VideoTrackMeta","domain","EventHandlers","EventEmitter","usingDomains","_events","_maxListeners","defaultMaxListeners","active","_eventsCount","setMaxListeners","n","isNaN","$getMaxListeners","that","getMaxListeners","emitNone","handler","isFn","listeners","arrayClone","emitOne","arg1","emitTwo","arg2","emitThree","arg3","emitMany","emit","er","events","doError","error","domainEmitter","domainThrown","err","context","_addListener","listener","prepend","m","existing","newListener","unshift","warned","w","emitter","emitWarning","warn","addListener","on","prependListener","_onceWrap","fired","g","removeListener","once","prependOnceListener","list","originalListener","spliceOne","removeAllListeners","evlistener","unwrapListeners","listenerCount","eventNames","Reflect","ownKeys","index","k","pop","arr","copy","_get","object","property","receiver","Function","desc","getOwnPropertyDescriptor","parent","getter","DIRECT_EMIT_FLAG","Context","allowedEvents","_emitter","off","_instanceMap","_clsMap","_inited","_hooks","getInstance","tag","initInstance","c","d","newInstance","registry","cls","checkMessageName","_isMessageNameValid","bind","enhanced","_cls","onceListeners","_context","messageName","callback","before","beforeList","_len2","_key2","concat","emitTo","_len3","_key3","removeListeners","hasOwn","callbacks","_messageName","_callbacks","_callback","_len4","_key4","seek","EVENTS","destroyInstances","_this3","forEach","Crypto","inputBuffer","inputbuffer","outputBuffer","outputbuffer","iv","method","crypto","msCrypto","decript","aeskey","sbkey","subtle","importKey","then","decriptData","decrypt","KeySystems","WIDEVINE","PLAYREADY","MAX_LICENSE_REQUEST_FAILURES","EME","_ref","player","licenseUrl","mediaKeySystemConfigs","keySystem","mediaKeysList","requestLicenseFailureCount","onManifestParsed","createWidevineMediaKeySystemConfigurations","audioCodecs","videoCodecs","navigator","requestMediaKeySystemAccess","keySystemAccess","createMediaKeys","mediaKeys","setMediaKeys","addEventListener","onMediaEncrypted","onKeySessionMessage","keySession","message","requestLicense","update","keyMessage","xhr","createLicenseXhr","send","XMLHttpRequest","open","responseType","onreadystatechange","onLicenseRequestReadyStageChange","readyState","status","response","createSession","event","generateRequest","initDataType","initData","videoCapabilities","map","contentType","isSupported","checkIsIncompatibleBrowser","ua","userAgent","isSafari","test","isMSBrowser","isFirefox","isEdge","MSE","container","mediaSource","sourceBuffers","preloadTime","onSourceOpen","onTimeUpdate","onUpdateEnd","onWaiting","opened","MediaSource","_url","resetContext","newCtx","updating","clearBuffer","addSourceBuffers","doAppend","tracks","add","_k","_type","mime","sourceBuffer","addSourceBuffer","inited","appendBuffer","endOfStream","remove","cleanBuffers","taskList","_loop","task","Promise","resolve","doCleanBuffer","retryTime","clean","removeEventListener","all","removeBuffers","_loop2","removeSourceBuffer","URL","revokeObjectURL","val","createObjectURL","buffered","bEnd","hidden","visibilityChange","document","msHidden","webkitHidden","PageVisibility","onShow","onHidden","handleVisibilityChange","le","setInt16","Int16Array","sniffer","device","r","os","isPc","isTablet","browser","toLowerCase","reg","ie","firfox","chrome","opera","safari","isWindowsPhone","isSymbian","isAndroid","isFireFox","isPhone","isLe","_typeof","Symbol","iterator","READ_STREAM","READ_TEXT","READ_JSON","READ_BUFFER","FetchLoader","_reader","_canceled","_destroyed","readtype","_loaderTaskNo","load","_fetch","fetch","_x","_x2","toString","params","race","reject","internalLoad","retryTimes","headers","ok","_onFetchResponse","statusText","catch","opts","getParams","taskno","json","text","arrayBuffer","_onReader","getReader","reader","cancel","read","done","options","Headers","mode","cache","configHeaders","append","optHeaders","cors","withCredentials","credentials","_toConsumableArray","isArray","arr2","from","DevLogger","matched","exec","cookie","_status","_level","funName","arg4","arg5","arg6","arg7","arg8","arg9","arg10","_console","tagName","x","common","_common","_Context","Sniffer","_sniffer","_EVENTS","_FetchLoader","logger","_devLogger","Compatibility","nextAudioDts","nextVideoDts","lastAudioSamplesLen","lastVideoSamplesLen","lastVideoDts","lastAudioDts","allAudioSamplesCount","allVideoSamplesCount","_firstAudioSample","_firstVideoSample","filledAudioSamples","filledVideoSamples","_lastSegmentId","_currentSegmentId","_format","videoLastSample","audioLastSample","_videoLargeGap","_audioLargeGap","audioUnsyncTime","doFix","_isSegmentsContinuous","format","ops","vSamp0","aSamp0","long","_getFirstSample","getFirstSample","isFirstAudioSamples","isFirstVideoSamples","recordSamplesCount","fixVideoRefSampleDuration","_Compatibility$detect","detectChangeStream","videoChanged","changed","videoChangedIdxes","changedIdxes","disContinue","fixChangeStreamVideo","doFixVideo","DETECT_FRAG_ID_DISCONTINUE","_Compatibility$detect2","audioChanged","audioChangedIdxes","_disContinue","fixChangeStreamAudio","doFixAudio","removeInvalidSamples","first","streamChangeStart","_videoTrack","videoSamples","originPts","firstSample","detectLargeGap","doFixLargeGap","videoFirstDts","audioFirstDts","gap","fillCount","_i2","clonedFirstSample","cts","abs","curLastSample","_audioTrack","audioSamples","fixAudioRefSampleDuration","samplesLen","silentFrame","iRefSampleDuration","_firstSample","videoFirstPts","_gap","silentSampleCount","_i3","silentSample","datasize","filtered","firstDts","absGap","silentFrameCount","_i4","computed","_silentSample","unSyncDuration","_lastSample","lastSample","lastDts","lastDuration","sortAudioSamples","changeIdx","prevDts","getStreamChangeStart","curDts","isContinue","firstPartSamples","secondPartSamples","changeSample","videoDtsBase","cacheNextAudioDts","findFirstVideoSample","findFirstAudioSample","allSamplesCount","filledSamplesCount","isRefSampleDurationValid","_lastDts","_firstDts","durationAvg","_fixed","firstAudioSample","firstVideoSample","dtsBase","Infinity","remuxer","_dtsBase","_audioDtsBase","_videoDtsBase","sorted","nextDts","firstSampleDts","isFirst","UTF8","decode","out","input","_checkContinuation","ucs4","_ucs","_ucs2","join","checkLength","avc","_avc","H264Demuxer","_player","videoMeta","unusedUnits","currentSampleIdx","dataLoadedTimer","initEvents","Events","handleDataLoaded","stream","XgStream","units","isLive","lastUnit","pushBackData","pushToMobileVideo","unitsToSamples","unused","setVideoMeta","intervalId","setInterval","onDemuxComplete","round","clearInterval","temp","golomb","combineUnits","dataSize","reduce","mp4","oldIOS","replace","MSStream","nativeWakeLock","NoSleep","_wakeLock","visibilityState","enable","noSleepTimer","noSleepVideo","createElement","setAttribute","_addSourceToVideo","element","dataURI","appendChild","wakeLock","request","disable","location","href","split","stop","play","release","pause","Document","p","createElementNS","aa","importNode","ba","ca","da","DocumentFragment","ea","q","Node","cloneNode","t","insertBefore","u","removeChild","v","replaceChild","y","Element","attachShadow","z","A","getAttribute","B","C","removeAttribute","D","getAttributeNS","E","setAttributeNS","F","removeAttributeNS","G","insertAdjacentElement","fa","insertAdjacentHTML","ha","ia","ja","ka","after","la","replaceWith","ma","na","HTMLElement","H","oa","pa","qa","Set","ra","has","sa","contains","documentElement","I","isConnected","__CE_isImportDocument","parentNode","ShadowRoot","host","J","children","firstChild","nextSibling","nodeType","ELEMENT_NODE","K","L","f","localName","import","__CE_shadowRoot","M","ta","N","MutationObserver","observe","childList","subtree","disconnect","addedNodes","va","wa","O","Map","h","o","xa","ya","define","za","SyntaxError","P","observedAttributes","constructorFunction","connectedCallback","disconnectedCallback","adoptedCallback","attributeChangedCallback","constructionStack","upgrade","__CE_state","Q","whenDefined","polyfillWrapFlushCallback","delete","R","CustomElementRegistry","polyfillDefineLazy","S","T","noDocumentConstructionObserver","shadyDomFastWalk","U","ShadyDOM","inUse","querySelectorAll","nativeMethods","Aa","Ba","V","W","__CE_patched","X","Y","s","__CE_registry","__CE_documentLoadHandled","ownerDocument","defaultView","__CE_definition","hasAttributes","Ca","namespaceURI","HTMLUnknownElement","sourceURL","fileName","line","lineNumber","column","columnNumber","ErrorEvent","initErrorEvent","cancelable","filename","lineno","colno","createEvent","preventDefault","dispatchEvent","defaultPrevented","Da","Ea","Z","Fa","Ga","TEXT_NODE","childNodes","COMMENT_NODE","textContent","createTextNode","Ha","Ia","previousSibling","lastChild","innerHTML","customElements","Ja","forcePolyfill","__CE_installPolyfill","BuiltInHTMLElement","wrapperForTheName","construct","AUDIO","AUDIO_READY","AUDIO_WAITING","VIDEO","VIDEO_DECODER_INIT","VIDEO_READY","VIDEO_WAITING","AUTO_RUN","DECODE_LOW_FPS","TIMELINE","PLAY_EVENT","SET_METADATA","APPEND_CHUNKS","START_RENDER","DO_PAUSE","SYNC_DTS","UPDATE_VOLUME","UPDATE_PRELOAD_TIME","NO_AUDIO","DESTROY","READY","VIDEO_EVENTS","WAITING","CANPLAY","PLAY","PLAYING","PAUSE","LOADEDDATA","TIMEUPDATE","DURATION_CHANGE","VOLUME_CHANGE","ERROR","DECODE_FPS","LOW_DECODE","AudioTimeRange","_buffers","_duration","startDts","initBgSilenceAudio","querySelector","silenceMp3","item","controls","preload","muted","ele","playSlienceAudio","AudioContext","webkitAudioContext","MEDIA_ERR_DECODE","ERROR_MSG","INIT_AUDIO_ERR","DECODE_ERR","AudioRender","_EventEmitter","_config","_parent","_timeRange","_sampleQueue","_ready","_meta","_noAudio","_source","_onSourceBufferEnded","_initAudioCtx","volume","_bindEvents","resume","_audioCtx","_assembleErr","msg","_emitTimelineEvents","_gainNode","createGain","gain","connect","destination","suspend","state","_appendChunk","_startRender","_destroy","_","_assembleAAC","_checkMetaChange","sampleQueue","op","_this4","samp0","sampLast","metaChangeIndex","toDecode","splice","adtss","getAACData","chunkBuffer","combileData","decodeAudioData","uncompress","createBufferSource","currentTime","close","adts","getAdts","originObjectType","aacframelength","TARGET","SCRIPT_TYPE","BlobBuilder","WebKitBlobBuilder","MozBlobBuilder","MSBlobBuilder","webkitURL","Worker","shimWorker","ShimWorker","forceFallback","objURL","createSourceObject","selfShim","postMessage","onmessage","isThisThread","testWorker","testArray","terminate","str","Blob","blob","getBlob","shimImportScripts","eval","Module","addOnPostRun","MAX_STREAM_BUFFER_LENGTH","Decoder","infoId","infolist","par_broadwayOnBroadwayInited","broadwayOnBroadwayInited","par_broadwayOnPictureDecoded","broadwayOnPictureDecoded","toU8Array","ptr","HEAPU8","_broadwayInit","_broadwayCreateStream","infoid","sliceType","isGop","yRowcount","uvRowcount","yLinesize","uvLinesize","datetemp","getTime","_broadwayFlushStream","_broadwayPlayStream","_broadwayExit","updateMeta","decoder","onPostRun","importScripts","streamBuffer","VideoTimeRange","_baseDts","_lastDuration","_bitrate","_compressFrame","_caclBaseDts","frame","_updateDuration","frames","pre","_estimateBitRate","sum","delta","bitrate","upDuration","deletePassed","YUVCanvas","canvas","_initMeta","_initContextGL","contextGL","_initProgram","_initBuffers","_initTextures","gl","validContextNames","nameIndex","contextName","contextOptions","getContext","getParameter","vertexShaderScript","fragmentShaderScript","YUV2RGB","vertexShader","createShader","VERTEX_SHADER","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","getShaderInfoLog","fragmentShader","FRAGMENT_SHADER","program","createProgram","attachShader","linkProgram","getProgramParameter","LINK_STATUS","getProgramInfoLog","useProgram","YUV2RGBRef","getUniformLocation","uniformMatrix4fv","shaderProgram","vertexPosBuffer","createBuffer","bindBuffer","ARRAY_BUFFER","bufferData","Float32Array","STATIC_DRAW","vertexPosRef","getAttribLocation","enableVertexAttribArray","vertexAttribPointer","FLOAT","texturePosBuffer","texturePosRef","uTexturePosBuffer","uTexturePosRef","vTexturePosBuffer","vTexturePosRef","yTextureRef","_initTexture","ySamplerRef","uniform1i","uTextureRef","uSamplerRef","vTextureRef","vSamplerRef","textureRef","createTexture","bindTexture","TEXTURE_2D","texParameteri","TEXTURE_MAG_FILTER","NEAREST","TEXTURE_MIN_FILTER","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","_drawPictureGL","ylen","uvlen","renderData","yData","uData","vData","_drawPictureGL420","yDataPerRow","yRowCnt","uDataPerRow","uRowCnt","vDataPerRow","vRowCnt","ratiow","ratioh","left","top","viewport","texturePosValues","DYNAMIC_DRAW","uTexturePosValues","vTexturePosValues","activeTexture","TEXTURE0","texImage2D","LUMINANCE","UNSIGNED_BYTE","TEXTURE1","TEXTURE2","drawArrays","TRIANGLE_STRIP","_drawPictureRGB","render","resetMeta","MAX_QUEUE_LENGTH","MAX_LOW_FPS_RECORD","DecodeEstimate","_needEstimate","_lastDecodeDot","_lastDecodeCost","_lastFrameDts","_dtsDeltas","_decodeCosts","_lowDecodeQueue","_fps","_decodeFps","needEstimateFps","addDecodeInfo","frameInfo","_estimateDecodeFps","_estimateFps","resetDecodeDot","_avg","performance","cost","avg","_lowDecodeDetect","H264_DECODER_URL","ASM_H264_DECODER_URL","H265_DECODER_URL","ASM_H265_DECODER_URL","HAVE_NOTHING","HAVE_METADATA","HAVE_CURRENT_DATA","HAVE_FUTURE_DATA","HAVE_ENOUGH_DATA","VideoRender","_decodeEstimate","_frameQueue","_canvas","_decoder","_frameRender","_wasmReady","_clearId","_degrade","_avccpushed","_lastTimeupdate","_inDecoding","_lastDecodingDts","_initCanvas","updateReady","_whenReady","style","maxWidth","maxHeight","bottom","right","margin","_setMetadata","nextFrame","lastTimelinePosition","timelinePosition","audioSyncDts","_bindWorkerEvent","_pushAvcc","_startDecode","_checkToDecode","_destroyWorker","_initWorker","_selectWorker","isHevc","HevcWorker","AvcWorker","_selectWorker2","worker","rawVps","rawSps","rawPps","_data","FrameRender","_decodeSample","interval","_renderDelay","preciseVideoDts","gopId","decodeFps","decodeCost","duartion","baseDts","_lastTimelinePosition","_audioDts","TimeLine","videoRender","audioRender","_readyStatus","_paused","_bindEvent","onVideoReady","resetReadyStatus","resumed","_this5","_CustomElement","MVideo","_CustomElement2","_init","timeline","_noSleep","_logFirstFrame","_playRequest","noAudio","setNoAudio","_err","_innerDispatchEvent","handleMediaInfo","ready","paused","vSam0","aSam0","setAudioMeta","handleEnded","handleErr","Event","videoWidth","display","pxVal","attrPreloadTime","asmSupported","MyAsmModule","Raw264Player","wasmSupported","WebComponentSupported","isComponentDefined","mediaType","videoConfig","preloadtime","handleTimeupdate","hasPlayed","hasStart","LoaderBuffer","core","Core","_cleanBuffer","isDelDom","oldTime","getBufferedRange","Player"],"mappings":"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"}