{"version":3,"file":"index.js","sources":["../src/raw-264.js","../../xgplayer-mobilevideo/es/polyfills/custom-elements.min.js","../../xgplayer-mobilevideo/es/polyfills/native-element.js","../../xgplayer-helper-utils/es/common/func/buffer-dump.js","../../xgplayer-helper-utils/es/events/index.js","../../xgplayer-helper-models/es/playlist.js","../../xgplayer-helper-models/es/presource.js","../../xgplayer-helper-models/es/stream.js","../../xgplayer-helper-models/es/track.js","../../xgplayer-helper-models/es/u8a-buffer.js","../../xgplayer-helper-models/es/track-meta.js","../../xgplayer-helper-models/es/track-sample.js","../../xgplayer-helper-models/es/media-info.js","../../xgplayer-helper-models/es/index.js","../../../node_modules/rollup-plugin-node-builtins/src/es6/events.js","../../xgplayer-helper-utils/es/context/index.js","../../xgplayer-helper-utils/es/crypto/index.js","../../xgplayer-helper-utils/es/eme/index.js","../../xgplayer-helper-utils/es/mse/index.js","../../xgplayer-helper-utils/es/sniffer/page-visibility.js","../../xgplayer-helper-utils/es/sniffer/index.js","../../xgplayer-helper-utils/es/loader-fetch/index.js","../../xgplayer-helper-utils/es/common/dev-logger.js","../../xgplayer-helper-utils/es/index.js","../../xgplayer-mobilevideo/es/events.js","../../xgplayer-mobilevideo/es/render/AudioTimeRange.js","../../xgplayer-mobilevideo/es/render/audio-helper.js","../../xgplayer-mobilevideo/es/render/AudioRender.js","../../../node_modules/rollup-plugin-bundle-worker/src/workerhelper.js","../../xgplayer-mobilevideo/es/decoder/hevc-worker.js","../../xgplayer-mobilevideo/es/decoder/worker.js","../../xgplayer-mobilevideo/es/render/VideoTimeRange.js","../../xgplayer-mobilevideo/es/render/FrameRender.js","../../xgplayer-mobilevideo/es/render/VideoRender.js","../../xgplayer-mobilevideo/es/TimeLine.js","../../xgplayer-mobilevideo/es/index.js","../src/index.js"],"sourcesContent":["import { NalUnit, SpsParser, SEIParser, Golomb } from 'xgplayer-transmuxer-codec-avc'\nimport XgStream from 'xgplayer-transmuxer-buffer-stream'\nimport { VideoTrackMeta } from 'xgplayer-transmuxer-model-trackmeta';\nimport Events from 'xgplayer-transmuxer-constant-events'\n\nclass H264Demuxer {\n  constructor (options = {}) {\n    this._player = options.player;\n\n    this.videoMeta = new VideoTrackMeta()\n    this.videoTrack = {\n      samples: []\n    }\n    this.unusedUnits = [];\n    this.fps = options.fps || 30\n    this.currentSampleIdx = 0;\n    this.duration = 0;\n    this.sps = null;\n    this.pps = null;\n\n    this.dataLoadedTimer = null;\n  }\n\n  init () {\n    this.initEvents()\n  }\n\n  initEvents () {\n    this.on(Events.LOADER_EVENTS.LOADER_DATALOADED, this.handleDataLoaded.bind(this))\n    this.on(Events.LOADER_EVENTS.LOADER_COMPLETE, this.handleDataLoaded.bind(this))\n  }\n\n  load (url) {\n    this.emit(Events.LOADER_EVENTS.LADER_START, url);\n  }\n\n  handleDataLoaded () {\n    const buffer = this.buffer;\n\n    if (!buffer) {\n      return;\n    }\n    if (this.dataLoadedTimer) {\n      clearTimeout(this.dataLoadedTimer);\n      this.dataLoadedTimer = null;\n    }\n\n    const data = buffer.shift(buffer.length);\n    buffer.clear();\n    const stream = new XgStream(data.buffer);\n\n    const units = this.unusedUnits.concat(NalUnit.getNalunits(stream))\n\n    if (!this._player.config.isLive) {\n      if (units.length > 1) {\n        const lastUnit = units.pop();\n        const pushBackData = new Uint8Array(lastUnit.body.byteLength + 4)\n        pushBackData.set(new Uint8Array(lastUnit.header), 0);\n        pushBackData.set(lastUnit.body, 4);\n        buffer.push(pushBackData)\n\n        this.pushToMobileVideo(units);\n        if (this.buffer.length) {\n          this.dataLoadedTimer = setTimeout(() => {\n            this.handleDataLoaded();\n          }, 500)\n        }\n      } else if (units.length === 1){\n        buffer.push(new Uint8Array(data))\n        this.dataLoadedTimer = setTimeout(() => {\n          this.handleDataLoaded();\n        }, 500)\n      }\n    } else {\n      this.pushToMobileVideo(units);\n    }\n  }\n\n  pushToMobileVideo (units) {\n\n    const { samples, unused } = H264Demuxer.unitsToSamples(units);\n\n    this.unusedUnits = unused;\n\n    samples.forEach((sample) => {\n      const ts = Math.floor(1000 * this.currentSampleIdx++ / this.fps)\n      sample.dts = sample.pts = ts;\n      if (sample.sps) {\n        this.sps = true;\n        this.videoMeta.sps = sample.data.slice(4)\n        this.videoMeta.presentHeight = sample.sps.present_size.height;\n        this.videoMeta.presentWidth = sample.sps.present_size.width;\n      } else if (sample.pps) {\n        this.pps = true;\n        this.videoMeta.pps = sample.data.slice(4)\n      } else {\n        this.videoTrack.samples.push(sample);\n      }\n\n    })\n\n    if (this.sps && this.pps) {\n      this._player.video.setVideoMeta(this.videoMeta);\n      this.sps = null;\n      this.pps = null;\n    }\n    if (!this.intervalId && !this._player.config.isLive) {\n      this.intervalId = setInterval(() => {\n        this.handleDataLoaded()\n      }, 500)\n    } else {\n      this._player.video.onDemuxComplete(this.videoTrack);\n    }\n    this.duration = Math.round(Math.floor(this.currentSampleIdx / this.fps))\n    this._player.emit('durationchange')\n  }\n\n  destroy () {\n    this._player = null;\n    this.videoMeta = null\n    this.videoTrack = {\n      samples: []\n    }\n    this.fps = null\n    this.currentSampleIdx = null;\n    if (this.intervalId) {\n      window.clearInterval(this.intervalId);\n      this.intervalId = null;\n    }\n  }\n\n  static unitsToSamples (units) {\n    let temp = [];\n    const samples = []\n    units.forEach((unit) => {\n      const golomb = new Golomb(new Uint8Array(unit.body));\n      golomb.readByte();\n      if (!golomb.readUEG() || unit.sps || unit.pps) { // first_mb_slice\n        if (temp.length) {\n          samples.push(H264Demuxer.combineUnits(temp))\n        }\n        temp = [unit];\n      } else {\n        temp.push(unit)\n      }\n    })\n\n    return {\n      samples,\n      unused: temp\n    }\n  }\n\n  static combineUnits (units) {\n    let sps, pps;\n    const dataSize = units.reduce((result, unit) => {\n      if (unit.sps) {\n        sps = unit.sps;\n      } else if (unit.pps) {\n        pps = unit.pps;\n      }\n      return result + unit.header.byteLength + unit.body.byteLength;\n    }, 0)\n\n    const data = new Uint8Array(dataSize);\n    let offset = 0;\n    let isKeyframe;\n    units.forEach((unit) => {\n      data.set(new Uint8Array(unit.header), offset);\n      offset += unit.header.byteLength;\n      data.set(unit.body, offset);\n      offset += unit.body.byteLength;\n      if (unit.idr) {\n        isKeyframe = true\n      }\n    })\n\n    return {\n      data,\n      sps,\n      pps,\n      isKeyframe\n    }\n  }\n\n  get buffer () {\n    return this._context.getInstance('LOADER_BUFFER')\n  }\n}\n\nexport default H264Demuxer;\n","(function () {\n  /*\n    Copyright (c) 2016 The Polymer Project Authors. All rights reserved.\n   This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\n   The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\n   The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\n   Code distributed by Google as part of the polymer project is also\n   subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n  */\n  'use strict';\n  var n = window.Document.prototype.createElement,\n      p = window.Document.prototype.createElementNS,\n      aa = window.Document.prototype.importNode,\n      ba = window.Document.prototype.prepend,\n      ca = window.Document.prototype.append,\n      da = window.DocumentFragment.prototype.prepend,\n      ea = window.DocumentFragment.prototype.append,\n      q = window.Node.prototype.cloneNode,\n      r = window.Node.prototype.appendChild,\n      t = window.Node.prototype.insertBefore,\n      u = window.Node.prototype.removeChild,\n      v = window.Node.prototype.replaceChild,\n      x = Object.getOwnPropertyDescriptor(window.Node.prototype, \"textContent\"),\n      y = window.Element.prototype.attachShadow,\n      z = Object.getOwnPropertyDescriptor(window.Element.prototype, \"innerHTML\"),\n      A = window.Element.prototype.getAttribute,\n      B = window.Element.prototype.setAttribute,\n      C = window.Element.prototype.removeAttribute,\n      D = window.Element.prototype.getAttributeNS,\n      E = window.Element.prototype.setAttributeNS,\n      F = window.Element.prototype.removeAttributeNS,\n      G = window.Element.prototype.insertAdjacentElement,\n      fa = window.Element.prototype.insertAdjacentHTML,\n      ha = window.Element.prototype.prepend,\n      ia = window.Element.prototype.append,\n      ja = window.Element.prototype.before,\n      ka = window.Element.prototype.after,\n      la = window.Element.prototype.replaceWith,\n      ma = window.Element.prototype.remove,\n      na = window.HTMLElement,\n      H = Object.getOwnPropertyDescriptor(window.HTMLElement.prototype, \"innerHTML\"),\n      oa = window.HTMLElement.prototype.insertAdjacentElement,\n      pa = window.HTMLElement.prototype.insertAdjacentHTML;var qa = new Set();\"annotation-xml color-profile font-face font-face-src font-face-uri font-face-format font-face-name missing-glyph\".split(\" \").forEach(function (a) {\n    return qa.add(a);\n  });function ra(a) {\n    var b = qa.has(a);a = /^[a-z][.0-9_a-z]*-[\\-.0-9_a-z]*$/.test(a);return !b && a;\n  }var sa = document.contains ? document.contains.bind(document) : document.documentElement.contains.bind(document.documentElement);\n  function I(a) {\n    var b = a.isConnected;if (void 0 !== b) return b;if (sa(a)) return !0;for (; a && !(a.__CE_isImportDocument || a instanceof Document);) {\n      a = a.parentNode || (window.ShadowRoot && a instanceof ShadowRoot ? a.host : void 0);\n    }return !(!a || !(a.__CE_isImportDocument || a instanceof Document));\n  }function J(a) {\n    var b = a.children;if (b) return Array.prototype.slice.call(b);b = [];for (a = a.firstChild; a; a = a.nextSibling) {\n      a.nodeType === Node.ELEMENT_NODE && b.push(a);\n    }return b;\n  }\n  function K(a, b) {\n    for (; b && b !== a && !b.nextSibling;) {\n      b = b.parentNode;\n    }return b && b !== a ? b.nextSibling : null;\n  }\n  function L(a, b, c) {\n    for (var f = a; f;) {\n      if (f.nodeType === Node.ELEMENT_NODE) {\n        var d = f;b(d);var e = d.localName;if (\"link\" === e && \"import\" === d.getAttribute(\"rel\")) {\n          f = d.import;void 0 === c && (c = new Set());if (f instanceof Node && !c.has(f)) for (c.add(f), f = f.firstChild; f; f = f.nextSibling) {\n            L(f, b, c);\n          }f = K(a, d);continue;\n        } else if (\"template\" === e) {\n          f = K(a, d);continue;\n        }if (d = d.__CE_shadowRoot) for (d = d.firstChild; d; d = d.nextSibling) {\n          L(d, b, c);\n        }\n      }f = f.firstChild ? f.firstChild : K(a, f);\n    }\n  }function M(a, b, c) {\n    a[b] = c;\n  };function ta(a) {\n    var b = document;this.c = a;this.a = b;this.b = void 0;N(this.c, this.a);\"loading\" === this.a.readyState && (this.b = new MutationObserver(this.f.bind(this)), this.b.observe(this.a, { childList: !0, subtree: !0 }));\n  }function ua(a) {\n    a.b && a.b.disconnect();\n  }ta.prototype.f = function (a) {\n    var b = this.a.readyState;\"interactive\" !== b && \"complete\" !== b || ua(this);for (b = 0; b < a.length; b++) {\n      for (var c = a[b].addedNodes, f = 0; f < c.length; f++) {\n        N(this.c, c[f]);\n      }\n    }\n  };function va() {\n    var a = this;this.b = this.a = void 0;this.c = new Promise(function (b) {\n      a.b = b;a.a && b(a.a);\n    });\n  }function wa(a) {\n    if (a.a) throw Error(\"Already resolved.\");a.a = void 0;a.b && a.b(void 0);\n  };function O(a) {\n    this.f = new Map();this.g = new Map();this.l = new Map();this.i = !1;this.b = a;this.j = new Map();this.c = function (b) {\n      return b();\n    };this.a = !1;this.h = [];this.m = a.f ? new ta(a) : void 0;\n  }O.prototype.o = function (a, b) {\n    var c = this;if (!(b instanceof Function)) throw new TypeError(\"Custom element constructor getters must be functions.\");xa(this, a);this.f.set(a, b);this.h.push(a);this.a || (this.a = !0, this.c(function () {\n      return ya(c);\n    }));\n  };\n  O.prototype.define = function (a, b) {\n    var c = this;if (!(b instanceof Function)) throw new TypeError(\"Custom element constructors must be functions.\");xa(this, a);za(this, a, b);this.h.push(a);this.a || (this.a = !0, this.c(function () {\n      return ya(c);\n    }));\n  };function xa(a, b) {\n    if (!ra(b)) throw new SyntaxError(\"The element name '\" + b + \"' is not valid.\");if (P(a, b)) throw Error(\"A custom element with name '\" + b + \"' has already been defined.\");if (a.i) throw Error(\"A custom element is already being defined.\");\n  }\n  function za(a, b, c) {\n    a.i = !0;var f;try {\n      var d = function d(m) {\n        var w = e[m];if (void 0 !== w && !(w instanceof Function)) throw Error(\"The '\" + m + \"' callback must be a function.\");return w;\n      },\n          e = c.prototype;if (!(e instanceof Object)) throw new TypeError(\"The custom element constructor's prototype is not an object.\");var g = d(\"connectedCallback\");var h = d(\"disconnectedCallback\");var k = d(\"adoptedCallback\");var l = (f = d(\"attributeChangedCallback\")) && c.observedAttributes || [];\n    } catch (m) {\n      throw m;\n    } finally {\n      a.i = !1;\n    }c = { localName: b, constructorFunction: c,\n      connectedCallback: g, disconnectedCallback: h, adoptedCallback: k, attributeChangedCallback: f, observedAttributes: l, constructionStack: [] };a.g.set(b, c);a.l.set(c.constructorFunction, c);return c;\n  }O.prototype.upgrade = function (a) {\n    N(this.b, a);\n  };\n  function ya(a) {\n    if (!1 !== a.a) {\n      a.a = !1;for (var b = [], c = a.h, f = new Map(), d = 0; d < c.length; d++) {\n        f.set(c[d], []);\n      }N(a.b, document, { upgrade: function upgrade(k) {\n          if (void 0 === k.__CE_state) {\n            var l = k.localName,\n                m = f.get(l);m ? m.push(k) : a.g.has(l) && b.push(k);\n          }\n        } });for (d = 0; d < b.length; d++) {\n        Q(a.b, b[d]);\n      }for (d = 0; d < c.length; d++) {\n        for (var e = c[d], g = f.get(e), h = 0; h < g.length; h++) {\n          Q(a.b, g[h]);\n        }(e = a.j.get(e)) && wa(e);\n      }c.length = 0;\n    }\n  }O.prototype.get = function (a) {\n    if (a = P(this, a)) return a.constructorFunction;\n  };\n  O.prototype.whenDefined = function (a) {\n    if (!ra(a)) return Promise.reject(new SyntaxError(\"'\" + a + \"' is not a valid custom element name.\"));var b = this.j.get(a);if (b) return b.c;b = new va();this.j.set(a, b);var c = this.g.has(a) || this.f.has(a);a = -1 === this.h.indexOf(a);c && a && wa(b);return b.c;\n  };O.prototype.polyfillWrapFlushCallback = function (a) {\n    this.m && ua(this.m);var b = this.c;this.c = function (c) {\n      return a(function () {\n        return b(c);\n      });\n    };\n  };\n  function P(a, b) {\n    var c = a.g.get(b);if (c) return c;if (c = a.f.get(b)) {\n      a.f.delete(b);try {\n        return za(a, b, c());\n      } catch (f) {\n        R(f);\n      }\n    }\n  }window.CustomElementRegistry = O;O.prototype.define = O.prototype.define;O.prototype.upgrade = O.prototype.upgrade;O.prototype.get = O.prototype.get;O.prototype.whenDefined = O.prototype.whenDefined;O.prototype.polyfillDefineLazy = O.prototype.o;O.prototype.polyfillWrapFlushCallback = O.prototype.polyfillWrapFlushCallback;function S() {\n    var a = T && T.noDocumentConstructionObserver,\n        b = T && T.shadyDomFastWalk;this.b = [];this.c = [];this.a = !1;this.shadyDomFastWalk = b;this.f = !a;\n  }function U(a, b, c, f) {\n    var d = window.ShadyDOM;if (a.shadyDomFastWalk && d && d.inUse) {\n      if (b.nodeType === Node.ELEMENT_NODE && c(b), b.querySelectorAll) for (a = d.nativeMethods.querySelectorAll.call(b, \"*\"), b = 0; b < a.length; b++) {\n        c(a[b]);\n      }\n    } else L(b, c, f);\n  }function Aa(a, b) {\n    a.a = !0;a.b.push(b);\n  }function Ba(a, b) {\n    a.a = !0;a.c.push(b);\n  }function V(a, b) {\n    a.a && U(a, b, function (c) {\n      return W(a, c);\n    });\n  }\n  function W(a, b) {\n    if (a.a && !b.__CE_patched) {\n      b.__CE_patched = !0;for (var c = 0; c < a.b.length; c++) {\n        a.b[c](b);\n      }for (c = 0; c < a.c.length; c++) {\n        a.c[c](b);\n      }\n    }\n  }function X(a, b) {\n    var c = [];U(a, b, function (d) {\n      return c.push(d);\n    });for (b = 0; b < c.length; b++) {\n      var f = c[b];1 === f.__CE_state ? a.connectedCallback(f) : Q(a, f);\n    }\n  }function Y(a, b) {\n    var c = [];U(a, b, function (d) {\n      return c.push(d);\n    });for (b = 0; b < c.length; b++) {\n      var f = c[b];1 === f.__CE_state && a.disconnectedCallback(f);\n    }\n  }\n  function N(a, b, c) {\n    c = void 0 === c ? {} : c;var f = c.s,\n        d = c.upgrade || function (g) {\n      return Q(a, g);\n    },\n        e = [];U(a, b, function (g) {\n      a.a && W(a, g);if (\"link\" === g.localName && \"import\" === g.getAttribute(\"rel\")) {\n        var h = g.import;h instanceof Node && (h.__CE_isImportDocument = !0, h.__CE_registry = document.__CE_registry);h && \"complete\" === h.readyState ? h.__CE_documentLoadHandled = !0 : g.addEventListener(\"load\", function () {\n          var k = g.import;if (!k.__CE_documentLoadHandled) {\n            k.__CE_documentLoadHandled = !0;var l = new Set();f && (f.forEach(function (m) {\n              return l.add(m);\n            }), l.delete(k));N(a, k, { s: l, upgrade: d });\n          }\n        });\n      } else e.push(g);\n    }, f);for (b = 0; b < e.length; b++) {\n      d(e[b]);\n    }\n  }\n  function Q(a, b) {\n    try {\n      var c = b.ownerDocument,\n          f = c.__CE_registry;var d = f && (c.defaultView || c.__CE_isImportDocument) ? P(f, b.localName) : void 0;if (d && void 0 === b.__CE_state) {\n        d.constructionStack.push(b);try {\n          try {\n            if (new d.constructorFunction() !== b) throw Error(\"The custom element constructor did not produce the element being upgraded.\");\n          } finally {\n            d.constructionStack.pop();\n          }\n        } catch (k) {\n          throw b.__CE_state = 2, k;\n        }b.__CE_state = 1;b.__CE_definition = d;if (d.attributeChangedCallback && b.hasAttributes()) {\n          var e = d.observedAttributes;\n          for (d = 0; d < e.length; d++) {\n            var g = e[d],\n                h = b.getAttribute(g);null !== h && a.attributeChangedCallback(b, g, null, h, null);\n          }\n        }I(b) && a.connectedCallback(b);\n      }\n    } catch (k) {\n      R(k);\n    }\n  }S.prototype.connectedCallback = function (a) {\n    var b = a.__CE_definition;if (b.connectedCallback) try {\n      b.connectedCallback.call(a);\n    } catch (c) {\n      R(c);\n    }\n  };S.prototype.disconnectedCallback = function (a) {\n    var b = a.__CE_definition;if (b.disconnectedCallback) try {\n      b.disconnectedCallback.call(a);\n    } catch (c) {\n      R(c);\n    }\n  };\n  S.prototype.attributeChangedCallback = function (a, b, c, f, d) {\n    var e = a.__CE_definition;if (e.attributeChangedCallback && -1 < e.observedAttributes.indexOf(b)) try {\n      e.attributeChangedCallback.call(a, b, c, f, d);\n    } catch (g) {\n      R(g);\n    }\n  };\n  function Ca(a, b, c, f) {\n    var d = b.__CE_registry;if (d && (null === f || \"http://www.w3.org/1999/xhtml\" === f) && (d = P(d, c))) try {\n      var e = new d.constructorFunction();if (void 0 === e.__CE_state || void 0 === e.__CE_definition) throw Error(\"Failed to construct '\" + c + \"': The returned value was not constructed with the HTMLElement constructor.\");if (\"http://www.w3.org/1999/xhtml\" !== e.namespaceURI) throw Error(\"Failed to construct '\" + c + \"': The constructed element's namespace must be the HTML namespace.\");if (e.hasAttributes()) throw Error(\"Failed to construct '\" + c + \"': The constructed element must not have any attributes.\");if (null !== e.firstChild) throw Error(\"Failed to construct '\" + c + \"': The constructed element must not have any children.\");if (null !== e.parentNode) throw Error(\"Failed to construct '\" + c + \"': The constructed element must not have a parent node.\");if (e.ownerDocument !== b) throw Error(\"Failed to construct '\" + c + \"': The constructed element's owner document is incorrect.\");if (e.localName !== c) throw Error(\"Failed to construct '\" + c + \"': The constructed element's local name is incorrect.\");\n      return e;\n    } catch (g) {\n      return R(g), b = null === f ? n.call(b, c) : p.call(b, f, c), Object.setPrototypeOf(b, HTMLUnknownElement.prototype), b.__CE_state = 2, b.__CE_definition = void 0, W(a, b), b;\n    }b = null === f ? n.call(b, c) : p.call(b, f, c);W(a, b);return b;\n  }\n  function R(a) {\n    var b = a.message,\n        c = a.sourceURL || a.fileName || \"\",\n        f = a.line || a.lineNumber || 0,\n        d = a.column || a.columnNumber || 0,\n        e = void 0;void 0 === ErrorEvent.prototype.initErrorEvent ? e = new ErrorEvent(\"error\", { cancelable: !0, message: b, filename: c, lineno: f, colno: d, error: a }) : (e = document.createEvent(\"ErrorEvent\"), e.initErrorEvent(\"error\", !1, !0, b, c, f), e.preventDefault = function () {\n      Object.defineProperty(this, \"defaultPrevented\", { configurable: !0, get: function get() {\n          return !0;\n        } });\n    });void 0 === e.error && Object.defineProperty(e, \"error\", { configurable: !0, enumerable: !0, get: function get() {\n        return a;\n      } });window.dispatchEvent(e);e.defaultPrevented || console.error(a);\n  };var Da = new function () {}();function Ea(a) {\n    window.HTMLElement = function () {\n      function b() {\n        var c = this.constructor;var f = document.__CE_registry.l.get(c);if (!f) throw Error(\"Failed to construct a custom element: The constructor was not registered with `customElements`.\");var d = f.constructionStack;if (0 === d.length) return d = n.call(document, f.localName), Object.setPrototypeOf(d, c.prototype), d.__CE_state = 1, d.__CE_definition = f, W(a, d), d;var e = d.length - 1,\n            g = d[e];if (g === Da) throw Error(\"Failed to construct '\" + f.localName + \"': This element was already constructed.\");\n        d[e] = Da;Object.setPrototypeOf(g, c.prototype);W(a, g);return g;\n      }b.prototype = na.prototype;Object.defineProperty(b.prototype, \"constructor\", { writable: !0, configurable: !0, enumerable: !1, value: b });return b;\n    }();\n  };function Z(a, b, c) {\n    function f(d) {\n      return function (e) {\n        for (var g = [], h = 0; h < arguments.length; ++h) {\n          g[h] = arguments[h];\n        }h = [];for (var k = [], l = 0; l < g.length; l++) {\n          var m = g[l];m instanceof Element && I(m) && k.push(m);if (m instanceof DocumentFragment) for (m = m.firstChild; m; m = m.nextSibling) {\n            h.push(m);\n          } else h.push(m);\n        }d.apply(this, g);for (g = 0; g < k.length; g++) {\n          Y(a, k[g]);\n        }if (I(this)) for (g = 0; g < h.length; g++) {\n          k = h[g], k instanceof Element && X(a, k);\n        }\n      };\n    }void 0 !== c.prepend && M(b, \"prepend\", f(c.prepend));void 0 !== c.append && M(b, \"append\", f(c.append));\n  }\n  ;function Fa(a) {\n    M(Document.prototype, \"createElement\", function (b) {\n      return Ca(a, this, b, null);\n    });M(Document.prototype, \"importNode\", function (b, c) {\n      b = aa.call(this, b, !!c);this.__CE_registry ? N(a, b) : V(a, b);return b;\n    });M(Document.prototype, \"createElementNS\", function (b, c) {\n      return Ca(a, this, c, b);\n    });Z(a, Document.prototype, { prepend: ba, append: ca });\n  };function Ga(a) {\n    function b(c, f) {\n      Object.defineProperty(c, \"textContent\", { enumerable: f.enumerable, configurable: !0, get: f.get, set: function set(d) {\n          if (this.nodeType === Node.TEXT_NODE) f.set.call(this, d);else {\n            var e = void 0;if (this.firstChild) {\n              var g = this.childNodes,\n                  h = g.length;if (0 < h && I(this)) {\n                e = Array(h);for (var k = 0; k < h; k++) {\n                  e[k] = g[k];\n                }\n              }\n            }f.set.call(this, d);if (e) for (d = 0; d < e.length; d++) {\n              Y(a, e[d]);\n            }\n          }\n        } });\n    }M(Node.prototype, \"insertBefore\", function (c, f) {\n      if (c instanceof DocumentFragment) {\n        var d = J(c);c = t.call(this, c, f);if (I(this)) for (f = 0; f < d.length; f++) {\n          X(a, d[f]);\n        }return c;\n      }d = c instanceof Element && I(c);f = t.call(this, c, f);d && Y(a, c);I(this) && X(a, c);return f;\n    });M(Node.prototype, \"appendChild\", function (c) {\n      if (c instanceof DocumentFragment) {\n        var f = J(c);c = r.call(this, c);if (I(this)) for (var d = 0; d < f.length; d++) {\n          X(a, f[d]);\n        }return c;\n      }f = c instanceof Element && I(c);d = r.call(this, c);f && Y(a, c);I(this) && X(a, c);return d;\n    });M(Node.prototype, \"cloneNode\", function (c) {\n      c = q.call(this, !!c);this.ownerDocument.__CE_registry ? N(a, c) : V(a, c);return c;\n    });M(Node.prototype, \"removeChild\", function (c) {\n      var f = c instanceof Element && I(c),\n          d = u.call(this, c);f && Y(a, c);return d;\n    });M(Node.prototype, \"replaceChild\", function (c, f) {\n      if (c instanceof DocumentFragment) {\n        var d = J(c);c = v.call(this, c, f);if (I(this)) for (Y(a, f), f = 0; f < d.length; f++) {\n          X(a, d[f]);\n        }return c;\n      }d = c instanceof Element && I(c);var e = v.call(this, c, f),\n          g = I(this);g && Y(a, f);d && Y(a, c);g && X(a, c);return e;\n    });x && x.get ? b(Node.prototype, x) : Aa(a, function (c) {\n      b(c, { enumerable: !0, configurable: !0, get: function get() {\n          for (var f = [], d = this.firstChild; d; d = d.nextSibling) {\n            d.nodeType !== Node.COMMENT_NODE && f.push(d.textContent);\n          }return f.join(\"\");\n        }, set: function set(f) {\n          for (; this.firstChild;) {\n            u.call(this, this.firstChild);\n          }null != f && \"\" !== f && r.call(this, document.createTextNode(f));\n        } });\n    });\n  };function Ha(a) {\n    function b(f) {\n      return function (d) {\n        for (var e = [], g = 0; g < arguments.length; ++g) {\n          e[g] = arguments[g];\n        }g = [];for (var h = [], k = 0; k < e.length; k++) {\n          var l = e[k];l instanceof Element && I(l) && h.push(l);if (l instanceof DocumentFragment) for (l = l.firstChild; l; l = l.nextSibling) {\n            g.push(l);\n          } else g.push(l);\n        }f.apply(this, e);for (e = 0; e < h.length; e++) {\n          Y(a, h[e]);\n        }if (I(this)) for (e = 0; e < g.length; e++) {\n          h = g[e], h instanceof Element && X(a, h);\n        }\n      };\n    }var c = Element.prototype;void 0 !== ja && M(c, \"before\", b(ja));void 0 !== ka && M(c, \"after\", b(ka));void 0 !== la && M(c, \"replaceWith\", function (f) {\n      for (var d = [], e = 0; e < arguments.length; ++e) {\n        d[e] = arguments[e];\n      }e = [];for (var g = [], h = 0; h < d.length; h++) {\n        var k = d[h];k instanceof Element && I(k) && g.push(k);if (k instanceof DocumentFragment) for (k = k.firstChild; k; k = k.nextSibling) {\n          e.push(k);\n        } else e.push(k);\n      }h = I(this);la.apply(this, d);for (d = 0; d < g.length; d++) {\n        Y(a, g[d]);\n      }if (h) for (Y(a, this), d = 0; d < e.length; d++) {\n        g = e[d], g instanceof Element && X(a, g);\n      }\n    });void 0 !== ma && M(c, \"remove\", function () {\n      var f = I(this);ma.call(this);f && Y(a, this);\n    });\n  };function Ia(a) {\n    function b(d, e) {\n      Object.defineProperty(d, \"innerHTML\", { enumerable: e.enumerable, configurable: !0, get: e.get, set: function set(g) {\n          var h = this,\n              k = void 0;I(this) && (k = [], U(a, this, function (w) {\n            w !== h && k.push(w);\n          }));e.set.call(this, g);if (k) for (var l = 0; l < k.length; l++) {\n            var m = k[l];1 === m.__CE_state && a.disconnectedCallback(m);\n          }this.ownerDocument.__CE_registry ? N(a, this) : V(a, this);return g;\n        } });\n    }function c(d, e) {\n      M(d, \"insertAdjacentElement\", function (g, h) {\n        var k = I(h);g = e.call(this, g, h);k && Y(a, h);I(g) && X(a, h);return g;\n      });\n    }\n    function f(d, e) {\n      function g(h, k) {\n        for (var l = []; h !== k; h = h.nextSibling) {\n          l.push(h);\n        }for (k = 0; k < l.length; k++) {\n          N(a, l[k]);\n        }\n      }M(d, \"insertAdjacentHTML\", function (h, k) {\n        h = h.toLowerCase();if (\"beforebegin\" === h) {\n          var l = this.previousSibling;e.call(this, h, k);g(l || this.parentNode.firstChild, this);\n        } else if (\"afterbegin\" === h) l = this.firstChild, e.call(this, h, k), g(this.firstChild, l);else if (\"beforeend\" === h) l = this.lastChild, e.call(this, h, k), g(l || this.firstChild, null);else if (\"afterend\" === h) l = this.nextSibling, e.call(this, h, k), g(this.nextSibling, l);else throw new SyntaxError(\"The value provided (\" + String(h) + \") is not one of 'beforebegin', 'afterbegin', 'beforeend', or 'afterend'.\");\n      });\n    }y && M(Element.prototype, \"attachShadow\", function (d) {\n      d = y.call(this, d);if (a.a && !d.__CE_patched) {\n        d.__CE_patched = !0;for (var e = 0; e < a.b.length; e++) {\n          a.b[e](d);\n        }\n      }return this.__CE_shadowRoot = d;\n    });z && z.get ? b(Element.prototype, z) : H && H.get ? b(HTMLElement.prototype, H) : Ba(a, function (d) {\n      b(d, { enumerable: !0, configurable: !0, get: function get() {\n          return q.call(this, !0).innerHTML;\n        }, set: function set(e) {\n          var g = \"template\" === this.localName,\n              h = g ? this.content : this,\n              k = p.call(document, this.namespaceURI, this.localName);for (k.innerHTML = e; 0 < h.childNodes.length;) {\n            u.call(h, h.childNodes[0]);\n          }for (e = g ? k.content : k; 0 < e.childNodes.length;) {\n            r.call(h, e.childNodes[0]);\n          }\n        } });\n    });M(Element.prototype, \"setAttribute\", function (d, e) {\n      if (1 !== this.__CE_state) return B.call(this, d, e);var g = A.call(this, d);B.call(this, d, e);e = A.call(this, d);a.attributeChangedCallback(this, d, g, e, null);\n    });M(Element.prototype, \"setAttributeNS\", function (d, e, g) {\n      if (1 !== this.__CE_state) return E.call(this, d, e, g);var h = D.call(this, d, e);E.call(this, d, e, g);g = D.call(this, d, e);a.attributeChangedCallback(this, e, h, g, d);\n    });M(Element.prototype, \"removeAttribute\", function (d) {\n      if (1 !== this.__CE_state) return C.call(this, d);var e = A.call(this, d);C.call(this, d);null !== e && a.attributeChangedCallback(this, d, e, null, null);\n    });M(Element.prototype, \"removeAttributeNS\", function (d, e) {\n      if (1 !== this.__CE_state) return F.call(this, d, e);var g = D.call(this, d, e);F.call(this, d, e);var h = D.call(this, d, e);g !== h && a.attributeChangedCallback(this, e, g, h, d);\n    });oa ? c(HTMLElement.prototype, oa) : G && c(Element.prototype, G);pa ? f(HTMLElement.prototype, pa) : fa && f(Element.prototype, fa);Z(a, Element.prototype, { prepend: ha, append: ia });Ha(a);\n  };var T = window.customElements;function Ja() {\n    var a = new S();Ea(a);Fa(a);Z(a, DocumentFragment.prototype, { prepend: da, append: ea });Ga(a);Ia(a);a = new O(a);document.__CE_registry = a;Object.defineProperty(window, \"customElements\", { configurable: !0, enumerable: !0, value: a });\n  }T && !T.forcePolyfill && \"function\" == typeof T.define && \"function\" == typeof T.get || Ja();window.__CE_installPolyfill = Ja;\n}).call(self);\n\n//# sourceMappingURL=custom-elements.min.js.map","/**\n * @license\n * Copyright (c) 2016 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n */\n\n/**\n * This shim allows elements written in, or compiled to, ES5 to work on native\n * implementations of Custom Elements v1. It sets new.target to the value of\n * this.constructor so that the native HTMLElement constructor can access the\n * current under-construction element's definition.\n */\n(function () {\n  if (\n  // No Reflect, no classes, no need for shim because native custom elements\n  // require ES2015 classes or Reflect.\n  window.Reflect === undefined || window.customElements === undefined ||\n  // The webcomponentsjs custom elements polyfill doesn't require\n  // ES2015-compatible construction (`super()` or `Reflect.construct`).\n  window.customElements.polyfillWrapFlushCallback) {\n    return;\n  }\n  var BuiltInHTMLElement = HTMLElement;\n  /**\n   * With jscompiler's RECOMMENDED_FLAGS the function name will be optimized away.\n   * However, if we declare the function as a property on an object literal, and\n   * use quotes for the property name, then closure will leave that much intact,\n   * which is enough for the JS VM to correctly set Function.prototype.name.\n   */\n  var wrapperForTheName = {\n    'HTMLElement': /** @this {!Object} */function HTMLElement() {\n      return Reflect.construct(BuiltInHTMLElement, [], /** @type {!Function} */this.constructor);\n    }\n  };\n  window.HTMLElement = wrapperForTheName['HTMLElement'];\n  HTMLElement.prototype = BuiltInHTMLElement.prototype;\n  HTMLElement.prototype.constructor = HTMLElement;\n  Object.setPrototypeOf(HTMLElement, BuiltInHTMLElement);\n})();","TimeRanges.prototype.dump = function () {\n    var len = this.length;\n    var ret = '';\n\n    for (var i = 0; i < len; i++) {\n        ret += this.start(i) + '~' + this.end(i) + ' ';\n    };\n    console.log(ret);\n};","var BROWSER_EVENTS = {\n  VISIBILITY_CHANGE: 'VISIBILITY_CHANGE'\n};\nvar PLAYER_EVENTS = {\n  SEEK: 'SEEK'\n};\n\nvar LOADER_EVENTS = {\n  LADER_START: 'LOADER_START',\n  LOADER_DATALOADED: 'LOADER_DATALOADED',\n  LOADER_COMPLETE: 'LOADER_COMPLETE',\n  LOADER_RESPONSE_HEADERS: 'LOADER_RESPONSE_HEADERS',\n  LOADER_ERROR: 'LOADER_ERROR'\n};\n\nvar DEMUX_EVENTS = {\n  DEMUX_START: 'DEMUX_START',\n  DEMUX_COMPLETE: 'DEMUX_COMPLETE',\n  DEMUX_ERROR: 'DEMUX_ERROR',\n  METADATA_PARSED: 'METADATA_PARSED',\n  SEI_PARSED: 'SEI_PARSED',\n  VIDEO_METADATA_CHANGE: 'VIDEO_METADATA_CHANGE',\n  AUDIO_METADATA_CHANGE: 'AUDIO_METADATA_CHANGE',\n  MEDIA_INFO: 'MEDIA_INFO'\n};\n\nvar REMUX_EVENTS = {\n  REMUX_METADATA: 'REMUX_METADATA',\n  REMUX_MEDIA: 'REMUX_MEDIA',\n  MEDIA_SEGMENT: 'MEDIA_SEGMENT',\n  REMUX_ERROR: 'REMUX_ERROR',\n  INIT_SEGMENT: 'INIT_SEGMENT',\n  DETECT_CHANGE_STREAM: 'DETECT_CHANGE_STREAM',\n  DETECT_CHANGE_STREAM_DISCONTINUE: 'DETECT_CHANGE_STREAM_DISCONTINUE',\n  DETECT_AUDIO_GAP: 'DETECT_AUDIO_GAP',\n  DETECT_AUDIO_OVERLAP: 'DETECT_AUDIO_OVERLAP',\n  RANDOM_ACCESS_POINT: 'RANDOM_ACCESS_POINT'\n};\n\nvar MSE_EVENTS = {\n  SOURCE_UPDATE_END: 'SOURCE_UPDATE_END',\n  MSE_ERROR: 'MSE_ERROR'\n\n  // hls专有events\n};var HLS_EVENTS = {\n  RETRY_TIME_EXCEEDED: 'RETRY_TIME_EXCEEDED'\n};\n\nvar CRYTO_EVENTS = {\n  START_DECRYPT: 'START_DECRYPT',\n  DECRYPTED: 'DECRYPTED'\n};\nvar ALLEVENTS = Object.assign({}, LOADER_EVENTS, DEMUX_EVENTS, REMUX_EVENTS, MSE_EVENTS, HLS_EVENTS, PLAYER_EVENTS, BROWSER_EVENTS);\n\nvar FlvAllowedEvents = [];\nvar HlsAllowedEvents = [];\n\nfor (var key in ALLEVENTS) {\n  if (ALLEVENTS.hasOwnProperty(key)) {\n    FlvAllowedEvents.push(ALLEVENTS[key]);\n  }\n}\n\nfor (var _key in ALLEVENTS) {\n  if (ALLEVENTS.hasOwnProperty(_key)) {\n    HlsAllowedEvents.push(ALLEVENTS[_key]);\n  }\n}\n\nexport default {\n  ALLEVENTS: ALLEVENTS,\n  HLS_EVENTS: HLS_EVENTS,\n  REMUX_EVENTS: REMUX_EVENTS,\n  DEMUX_EVENTS: DEMUX_EVENTS,\n  MSE_EVENTS: MSE_EVENTS,\n  LOADER_EVENTS: LOADER_EVENTS,\n  FlvAllowedEvents: FlvAllowedEvents,\n  HlsAllowedEvents: HlsAllowedEvents,\n  CRYTO_EVENTS: CRYTO_EVENTS,\n  PLAYER_EVENTS: PLAYER_EVENTS,\n  BROWSER_EVENTS: BROWSER_EVENTS\n};","var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Playlist = function () {\n  function Playlist(configs) {\n    _classCallCheck(this, Playlist);\n\n    this._baseURL = '';\n    this._list = {};\n    this._ts = {};\n    this.version = 0;\n    this.sequence = -1;\n    this.targetduration = 0;\n    this.duration = 0;\n    this.fragLength = 0;\n    this._lastget = undefined;\n    this._audoclear = configs.autoclear || false;\n    this.downloadedUrls = [];\n  }\n\n  _createClass(Playlist, [{\n    key: 'push',\n    value: function push(ts, duration, discontinue, id) {\n      if (!this._ts[ts]) {\n        this._ts[ts] = { duration: duration,\n          downloaded: false,\n          downloading: false,\n          start: this.duration,\n          discontinue: !!discontinue,\n          id: id\n        };\n        this._list[this.duration] = ts;\n        this.duration += duration;\n        this.fragLength += 1;\n      }\n    }\n  }, {\n    key: 'deleteFrag',\n    value: function deleteFrag(url) {\n      if (this._ts[url]) {\n        if (this._ts[url].start > this._lastget.time) {\n          this._lastget = {\n            duration: this._ts[url].duration,\n            time: this._ts[url].start,\n            downloaded: false,\n            downloading: false,\n            url: url,\n            id: this._ts[url].id\n          };\n        }\n        delete this._list[this._ts[url].start];\n        delete this._ts[url];\n        this.fragLength -= 1;\n      }\n    }\n  }, {\n    key: 'pushM3U8',\n    value: function pushM3U8(data, deletepre) {\n      // 常规信息替换\n      if (!data) {\n        throw new Error('No m3u8 data received.');\n      }\n      this.version = data.version;\n      this.targetduration = data.targetduration;\n      if (data.encrypt && !this.encrypt) {\n        this.encrypt = data.encrypt;\n      }\n\n      if (!data.sequence) {\n        data.sequence = 0;\n      }\n\n      // 新分片信息\n      if (data.sequence > this.sequence) {\n        this.sequence = data.sequence;\n        var newfraglist = [];\n        for (var i = 0; i < data.frags.length; i++) {\n          var frag = data.frags[i];\n          if (!this._ts[frag.url] && this.downloadedUrls.indexOf(frag.url) < 0) {\n            newfraglist.push(frag.url);\n            this.push(frag.url, frag.duration, frag.discontinue, frag.id);\n          }\n        }\n\n        if (newfraglist.length < 1) {\n          throw new Error('Can not read ts file list.');\n        }\n\n        if (deletepre) {\n          var tslist = this.getTsList();\n          for (var _i = 0; _i < tslist.length; _i++) {\n            if (newfraglist.indexOf(tslist[_i]) < 0) {\n              this.deleteFrag(tslist[_i]);\n            }\n          }\n        }\n      } else {\n        throw new Error('Old m3u8 file received, ' + data.sequence);\n      }\n    }\n  }, {\n    key: 'getTsList',\n    value: function getTsList() {\n      return Object.keys(this._ts);\n    }\n  }, {\n    key: 'downloaded',\n    value: function downloaded(tsname, isloaded) {\n      var ts = this._ts[tsname];\n      if (ts) {\n        ts.downloaded = isloaded;\n      }\n    }\n  }, {\n    key: 'downloading',\n    value: function downloading(tsname, loading) {\n      var ts = this._ts[tsname];\n      if (ts) {\n        ts.downloading = loading;\n      }\n    }\n  }, {\n    key: 'getTsByName',\n    value: function getTsByName(name) {\n      return this._ts[name];\n    }\n  }, {\n    key: 'getTs',\n    value: function getTs(time) {\n      var timelist = Object.keys(this._list);\n      var ts = void 0;\n\n      if (time === undefined) {\n        if (this._lastget) {\n          time = this._lastget.time + this._lastget.duration;\n        } else {\n          time = 0;\n        }\n      }\n\n      if (timelist.length < 1 || time >= this.duration) {\n        return undefined;\n      }\n      timelist = timelist.sort(function (a, b) {\n        return parseFloat(a) - parseFloat(b);\n      });\n      for (var i = 0; i < timelist.length; i++) {\n        if (time >= parseInt(timelist[i])) {\n          var url = this._list[timelist[i]];\n          var downloaded = this._ts[url].downloaded;\n          var downloading = this._ts[url].downloading;\n          ts = {\n            url: url,\n            downloaded: downloaded,\n            downloading: downloading,\n            time: parseInt(timelist[i]),\n            duration: parseInt(this._ts[url].duration),\n            id: this._ts[url].id\n          };\n          if (this.autoclear) {\n            delete this._ts[this._lastget.url];\n            delete this._list[this._lastget.time];\n          }\n          this._lastget = ts;\n        } else {\n          break;\n        }\n      }\n      if (ts) {\n        this.downloadedUrls.push(ts.url);\n      }\n      return ts;\n    }\n  }, {\n    key: 'getLastDownloadedTs',\n    value: function getLastDownloadedTs() {\n      var timelist = Object.keys(this._list);\n      var found = void 0;\n      for (var i = 0; i < timelist.length; i++) {\n        var url = this._list[timelist[i]];\n        var downloaded = this._ts[url].downloaded;\n        var downloading = this._ts[url].downloading;\n        if (downloaded) {\n          found = { url: url, downloaded: downloaded, downloading: downloading, time: parseInt(timelist[i]), duration: parseInt(this._ts[url].duration) };\n        } else {\n          break;\n        }\n      }\n\n      return found;\n    }\n  }, {\n    key: 'clear',\n    value: function clear() {\n      this._baseURL = '';\n      this._list = {};\n      this._ts = {};\n      this.version = 0;\n      this.sequence = -1;\n      this.targetduration = 0;\n      this.duration = 0;\n    }\n  }, {\n    key: 'clearDownloaded',\n    value: function clearDownloaded() {\n      for (var i = 0, l = Object.keys(this._ts).length; i < l; i++) {\n        var ts = this._ts[Object.keys(this._ts)[i]];\n        ts.downloaded = false;\n        ts.downloading = false;\n      }\n    }\n  }, {\n    key: 'destroy',\n    value: function destroy() {\n      this._baseURL = '';\n      this._list = {};\n      this._ts = {};\n      this.version = 0;\n      this.sequence = -1;\n      this.targetduration = 0;\n      this.duration = 0;\n      this.fragLength = 0;\n      this._lastget = undefined;\n      this._audoclear = false;\n    }\n  }, {\n    key: 'list',\n    get: function get() {\n      return this._list;\n    }\n  }, {\n    key: 'baseURL',\n    set: function set(baseURL) {\n      if (this.baseURL !== baseURL) {\n        this.clear();\n        this._baseURL = baseURL;\n      }\n    },\n    get: function get() {\n      return this._baseURL;\n    }\n  }]);\n\n  return Playlist;\n}();\n\nexport default Playlist;","var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Presource = function Presource() {\n  _classCallCheck(this, Presource);\n\n  this.mimetype = '';\n  this.init = null;\n  this.data = [];\n};\n\nvar PreSource = function () {\n  function PreSource() {\n    _classCallCheck(this, PreSource);\n\n    this.sources = {};\n  }\n\n  _createClass(PreSource, [{\n    key: 'getSource',\n    value: function getSource(source) {\n      return this.sources[source];\n    }\n  }, {\n    key: 'createSource',\n    value: function createSource(name) {\n      this.sources[name] = new Presource();\n      return this.sources[name];\n    }\n  }, {\n    key: 'clear',\n    value: function clear() {\n      this.sources = {};\n    }\n  }, {\n    key: 'destroy',\n    value: function destroy() {\n      this.sources = {};\n    }\n  }]);\n\n  return PreSource;\n}();\n\nexport default PreSource;","var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Stream = function () {\n  function Stream(buffer) {\n    _classCallCheck(this, Stream);\n\n    if (buffer instanceof ArrayBuffer) {\n      this.buffer = buffer;\n      this.dataview = new DataView(buffer);\n      this.dataview.position = 0;\n    } else {\n      throw new Error('data is invalid');\n    }\n  }\n\n  _createClass(Stream, [{\n    key: 'back',\n    value: function back(count) {\n      this.position -= count;\n    }\n  }, {\n    key: 'skip',\n    value: function skip(count) {\n      var loop = Math.floor(count / 4);\n      var last = count % 4;\n      for (var i = 0; i < loop; i++) {\n        Stream.readByte(this.dataview, 4);\n      }\n      if (last > 0) {\n        Stream.readByte(this.dataview, last);\n      }\n    }\n\n    /**\n     * [readByte 从DataView中读取数据]\n     * @param  {DataView} buffer [DataView实例]\n     * @param  {Number} size   [读取字节数]\n     * @return {Number}        [整数]\n     */\n\n  }, {\n    key: 'readUint8',\n    value: function readUint8() {\n      return Stream.readByte(this.dataview, 1);\n    }\n  }, {\n    key: 'readUint16',\n    value: function readUint16() {\n      return Stream.readByte(this.dataview, 2);\n    }\n  }, {\n    key: 'readUint24',\n    value: function readUint24() {\n      return Stream.readByte(this.dataview, 3);\n    }\n  }, {\n    key: 'readUint32',\n    value: function readUint32() {\n      return Stream.readByte(this.dataview, 4);\n    }\n  }, {\n    key: 'readUint64',\n    value: function readUint64() {\n      return Stream.readByte(this.dataview, 8);\n    }\n  }, {\n    key: 'readInt8',\n    value: function readInt8() {\n      return Stream.readByte(this.dataview, 1, true);\n    }\n  }, {\n    key: 'readInt16',\n    value: function readInt16() {\n      return Stream.readByte(this.dataview, 2, true);\n    }\n  }, {\n    key: 'readInt32',\n    value: function readInt32() {\n      return Stream.readByte(this.dataview, 4, true);\n    }\n  }, {\n    key: 'writeUint32',\n    value: function writeUint32(value) {\n      return new Uint8Array([value >>> 24 & 0xff, value >>> 16 & 0xff, value >>> 8 & 0xff, value & 0xff]);\n    }\n  }, {\n    key: 'length',\n    get: function get() {\n      return this.buffer.byteLength;\n    }\n  }, {\n    key: 'position',\n    set: function set(value) {\n      this.dataview.position = value;\n    },\n    get: function get() {\n      return this.dataview.position;\n    }\n  }], [{\n    key: 'readByte',\n    value: function readByte(buffer, size, sign) {\n      var res = void 0;\n      switch (size) {\n        case 1:\n          if (sign) {\n            res = buffer.getInt8(buffer.position);\n          } else {\n            res = buffer.getUint8(buffer.position);\n          }\n          break;\n        case 2:\n          if (sign) {\n            res = buffer.getInt16(buffer.position);\n          } else {\n            res = buffer.getUint16(buffer.position);\n          }\n          break;\n        case 3:\n          if (sign) {\n            throw new Error('not supported for readByte 3');\n          } else {\n            res = buffer.getUint8(buffer.position) << 16;\n            res |= buffer.getUint8(buffer.position + 1) << 8;\n            res |= buffer.getUint8(buffer.position + 2);\n          }\n          break;\n        case 4:\n          if (sign) {\n            res = buffer.getInt32(buffer.position);\n          } else {\n            res = buffer.getUint32(buffer.position);\n          }\n          break;\n        case 8:\n          if (sign) {\n            throw new Error('not supported for readBody 8');\n          } else {\n            res = buffer.getUint32(buffer.position) << 32;\n            res |= buffer.getUint32(buffer.position + 4);\n          }\n          break;\n        default:\n          res = '';\n      }\n      buffer.position += size;\n      return res;\n    }\n  }]);\n\n  return Stream;\n}();\n\nexport default Stream;","var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Track = function () {\n  /**\n   * The constructor.\n   */\n  function Track() {\n    _classCallCheck(this, Track);\n\n    this.id = -1;\n    this.sequenceNumber = 0;\n    this.samples = [];\n    this.droppedSamples = [];\n    this.length = 0;\n  }\n\n  /**\n   * Reset the track.\n   */\n\n\n  _createClass(Track, [{\n    key: 'reset',\n    value: function reset() {\n      this.sequenceNumber = 0;\n      this.samples = [];\n      this.length = 0;\n    }\n    /**\n     * destroy the track.\n     */\n\n  }, {\n    key: 'distroy',\n    value: function distroy() {\n      this.reset();\n      this.id = -1;\n    }\n  }]);\n\n  return Track;\n}();\n\nexport default Track;\n\n\nexport var AudioTrack = function (_Track) {\n  _inherits(AudioTrack, _Track);\n\n  /**\n   * The constructor for audio track.\n   */\n  function AudioTrack() {\n    _classCallCheck(this, AudioTrack);\n\n    var _this = _possibleConstructorReturn(this, (AudioTrack.__proto__ || Object.getPrototypeOf(AudioTrack)).call(this));\n\n    _this.TAG = 'AudioTrack';\n    _this.type = 'audio';\n    return _this;\n  }\n\n  return AudioTrack;\n}(Track);\n\nexport var VideoTrack = function (_Track2) {\n  _inherits(VideoTrack, _Track2);\n\n  /**\n   * The constructor for video track.\n   */\n  function VideoTrack() {\n    _classCallCheck(this, VideoTrack);\n\n    var _this2 = _possibleConstructorReturn(this, (VideoTrack.__proto__ || Object.getPrototypeOf(VideoTrack)).call(this));\n\n    _this2.TAG = 'VideoTrack';\n    _this2.type = 'video';\n    _this2.dropped = 0;\n    return _this2;\n  }\n  /**\n   * reset the video track.\n   */\n\n\n  _createClass(VideoTrack, [{\n    key: 'reset',\n    value: function reset() {\n      this.sequenceNumber = 0;\n      this.samples = [];\n      this.length = 0;\n      this.dropped = 0;\n    }\n  }]);\n\n  return VideoTrack;\n}(Track);\n\nexport var Tracks = function () {\n  function Tracks() {\n    _classCallCheck(this, Tracks);\n\n    this.audioTrack = null;\n    this.videoTrack = null;\n  }\n\n  _createClass(Tracks, [{\n    key: 'destroy',\n    value: function destroy() {\n      this.audioTrack = null;\n      this.videoTrack = null;\n    }\n  }]);\n\n  return Tracks;\n}();","var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar XgBuffer = function () {\n  /**\n   * A buffer to store loaded data.\n   *\n   * @class LoaderBuffer\n   * @param {number} length - Optional the buffer size\n   */\n  function XgBuffer(length) {\n    _classCallCheck(this, XgBuffer);\n\n    this.length = length || 0;\n    this.historyLen = length || 0;\n    this.array = [];\n    this.offset = 0;\n  }\n\n  /**\n   * The function to push data.\n   *\n   * @param {Uint8Array} data - The data to push into the buffer\n   */\n\n\n  _createClass(XgBuffer, [{\n    key: \"push\",\n    value: function push(data) {\n      this.array.push(data);\n      this.length += data.byteLength;\n      this.historyLen += data.byteLength;\n    }\n\n    /**\n     * The function to shift data.\n     *\n     * @param {number} length - The size of shift.\n     */\n\n  }, {\n    key: \"shift\",\n    value: function shift(length) {\n      if (this.array.length < 1) {\n        return new Uint8Array(0);\n      }\n\n      if (length === undefined) {\n        return this._shiftBuffer();\n      }\n      if (this.offset + length === this.array[0].length) {\n        var _ret = this.array[0].slice(this.offset, this.offset + length);\n        this.offset = 0;\n        this.array.shift();\n        this.length -= length;\n        return _ret;\n      }\n\n      if (this.offset + length < this.array[0].length) {\n        var _ret2 = this.array[0].slice(this.offset, this.offset + length);\n        this.offset += length;\n        this.length -= length;\n        return _ret2;\n      }\n\n      var ret = new Uint8Array(length);\n      var tmpoff = 0;\n      while (this.array.length > 0 && length > 0) {\n        if (this.offset + length < this.array[0].length) {\n          var tmp = this.array[0].slice(this.offset, this.offset + length);\n          ret.set(tmp, tmpoff);\n          this.offset += length;\n          this.length -= length;\n          length = 0;\n          break;\n        } else {\n          // console.log('mark1')\n          var templength = this.array[0].length - this.offset;\n          ret.set(this.array[0].slice(this.offset, this.array[0].length), tmpoff);\n          this.array.shift();\n          this.offset = 0;\n          tmpoff += templength;\n          this.length -= templength;\n          length -= templength;\n        }\n      }\n      return ret;\n    }\n\n    /**\n     * Function to clear the buffer.\n     */\n\n  }, {\n    key: \"clear\",\n    value: function clear() {\n      this.array = [];\n      this.length = 0;\n      this.offset = 0;\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      this.clear();\n      this.historyLen = 0;\n    }\n\n    /**\n     * Function to shift one unit8Array.\n     */\n\n  }, {\n    key: \"_shiftBuffer\",\n    value: function _shiftBuffer() {\n      this.length -= this.array[0].length;\n      this.offset = 0;\n      return this.array.shift();\n    }\n\n    /**\n     * Convert uint8 data to number.\n     *\n     * @param {number} start - the start postion.\n     * @param {number} length - the length of data.\n     */\n\n  }, {\n    key: \"toInt\",\n    value: function toInt(start, length) {\n      var retInt = 0;\n      var i = this.offset + start;\n      while (i < this.offset + length + start) {\n        if (i < this.array[0].length) {\n          retInt = retInt * 256 + this.array[0][i];\n        } else if (this.array[1]) {\n          retInt = retInt * 256 + this.array[1][i - this.array[0].length];\n        }\n\n        i++;\n      }\n      return retInt;\n    }\n  }]);\n\n  return XgBuffer;\n}();\n\nexport default XgBuffer;","var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nexport var AudioTrackMeta = function () {\n  function AudioTrackMeta(meta) {\n    _classCallCheck(this, AudioTrackMeta);\n\n    var _default = {\n      sampleRate: 48000,\n      channelCount: 2,\n      codec: 'mp4a.40.2',\n      config: [41, 401, 136, 0],\n      duration: 0,\n      id: 2,\n      refSampleDuration: 21,\n      sampleRateIndex: 3,\n      timescale: 1000,\n      type: 'audio'\n    };\n    if (meta) {\n      return Object.assign({}, _default, meta);\n    }\n    return _default;\n  }\n\n  _createClass(AudioTrackMeta, [{\n    key: 'destroy',\n    value: function destroy() {\n      this.init = null;\n    }\n  }]);\n\n  return AudioTrackMeta;\n}();\n\nexport var VideoTrackMeta = function () {\n  function VideoTrackMeta(meta) {\n    _classCallCheck(this, VideoTrackMeta);\n\n    var _default = {\n      avcc: null,\n      sps: new Uint8Array(0),\n      pps: new Uint8Array(0),\n      chromaFormat: 420,\n      codec: 'avc1.640020',\n      codecHeight: 720,\n      codecWidth: 1280,\n      duration: 0,\n      frameRate: {\n        fixed: true,\n        fps: 25,\n        fps_num: 25000,\n        fps_den: 1000\n      },\n      id: 1,\n      level: '3.2',\n      presentHeight: 720,\n      presentWidth: 1280,\n      profile: 'High',\n      refSampleDuration: 40,\n      parRatio: {\n        height: 1,\n        width: 1\n      },\n      timescale: 1000,\n      type: 'video'\n    };\n\n    if (meta) {\n      return Object.assign({}, _default, meta);\n    }\n    return _default;\n  }\n\n  _createClass(VideoTrackMeta, [{\n    key: 'destroy',\n    value: function destroy() {\n      this.init = null;\n      this.sps = null;\n      this.pps = null;\n    }\n  }]);\n\n  return VideoTrackMeta;\n}();","var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nexport var AudioTrackSample = function () {\n  function AudioTrackSample(info) {\n    _classCallCheck(this, AudioTrackSample);\n\n    var _default = AudioTrackSample.getDefault();\n    if (!info) {\n      return _default;\n    }\n    var sample = Object.assign({}, _default, info);\n\n    return sample;\n  }\n\n  _createClass(AudioTrackSample, null, [{\n    key: \"getDefault\",\n    value: function getDefault() {\n      return {\n        dts: null,\n        pts: null,\n        data: new Uint8Array()\n      };\n    }\n  }]);\n\n  return AudioTrackSample;\n}();\n\nexport var VideoTrackSample = function () {\n  function VideoTrackSample(info) {\n    _classCallCheck(this, VideoTrackSample);\n\n    var _default = VideoTrackSample.getDefault();\n\n    if (!info) {\n      return _default;\n    }\n    var sample = Object.assign({}, _default, info);\n\n    return sample;\n  }\n\n  _createClass(VideoTrackSample, null, [{\n    key: \"getDefault\",\n    value: function getDefault() {\n      return {\n        dts: null,\n        pts: null,\n        isKeyframe: false, // is Random access point\n        originDts: null,\n        data: new Uint8Array()\n      };\n    }\n  }]);\n\n  return VideoTrackSample;\n}();","var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar isObjectFilled = function isObjectFilled(obj) {\n  for (var key in obj) {\n    if (obj.hasOwnProperty(key)) {\n      if (obj[key] === null) {\n        return false;\n      }\n    }\n  }\n  return true;\n};\n\nvar MediaInfo = function () {\n  function MediaInfo() {\n    _classCallCheck(this, MediaInfo);\n\n    this.mimeType = null;\n    this.duration = null;\n\n    this.hasVideo = null;\n    this.video = {\n      codec: null,\n      width: null,\n      height: null,\n      profile: null,\n      level: null,\n      frameRate: {\n        fixed: true,\n        fps: 25,\n        fps_num: 25000,\n        fps_den: 1000\n      },\n      chromaFormat: null,\n      parRatio: {\n        width: 1,\n        height: 1\n      }\n    };\n\n    this.hasAudio = null;\n\n    this.audio = {\n      codec: null,\n      sampleRate: null,\n      sampleRateIndex: null,\n      channelCount: null\n    };\n  }\n\n  _createClass(MediaInfo, [{\n    key: \"isComplete\",\n    value: function isComplete() {\n      return MediaInfo.isBaseInfoReady(this) && MediaInfo.isVideoReady(this) && MediaInfo.isAudioReady(this);\n    }\n  }], [{\n    key: \"isBaseInfoReady\",\n    value: function isBaseInfoReady(mediaInfo) {\n      return isObjectFilled(mediaInfo);\n    }\n  }, {\n    key: \"isVideoReady\",\n    value: function isVideoReady(mediaInfo) {\n      if (!mediaInfo.hasVideo) {\n        return true;\n      }\n\n      return isObjectFilled(mediaInfo.video);\n    }\n  }, {\n    key: \"isAudioReady\",\n    value: function isAudioReady(mediaInfo) {\n      if (!mediaInfo.hasAudio) {\n        return true;\n      }\n\n      return isObjectFilled(mediaInfo.video);\n    }\n  }]);\n\n  return MediaInfo;\n}();\n\nexport default MediaInfo;","import _Playlist from './playlist';\nimport _PreSource from './presource';\nimport _Stream from './stream';\nimport _Tracks, { AudioTrack as _AudioTrack, VideoTrack as _VideoTrack } from './track';\nimport _Buffer from './u8a-buffer';\nimport { AudioTrackMeta as _AudioTrackMeta, VideoTrackMeta as _VideoTrackMeta } from './track-meta';\nimport { AudioTrackSample as _AudioTrackSample, VideoTrackSample as _VideoTrackSample } from './track-sample';\nimport _MediaInfo from './media-info';\n\nexport var Playlist = _Playlist;\nexport var PreSource = _PreSource;\nexport var Stream = _Stream;\nexport var Tracks = _Tracks;\nexport var Buffer = _Buffer;\nexport var AudioTrack = _AudioTrack;\nexport var MediaInfo = _MediaInfo;\nexport var VideoTrack = _VideoTrack;\nexport var AudioTrackMeta = _AudioTrackMeta;\nexport var VideoTrackMeta = _VideoTrackMeta;\nexport var AudioTrackSample = _AudioTrackSample;\nexport var VideoTrackSample = _VideoTrackSample;","'use strict';\n\nvar domain;\n\n// This constructor is used to store event handlers. Instantiating this is\n// faster than explicitly calling `Object.create(null)` to get a \"clean\" empty\n// object (tested with v8 v4.9).\nfunction EventHandlers() {}\nEventHandlers.prototype = Object.create(null);\n\nfunction EventEmitter() {\n  EventEmitter.init.call(this);\n}\nexport default EventEmitter;\nexport {EventEmitter};\n\n// nodejs oddity\n// require('events') === require('events').EventEmitter\nEventEmitter.EventEmitter = EventEmitter\n\nEventEmitter.usingDomains = false;\n\nEventEmitter.prototype.domain = undefined;\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nEventEmitter.defaultMaxListeners = 10;\n\nEventEmitter.init = function() {\n  this.domain = null;\n  if (EventEmitter.usingDomains) {\n    // if there is an active domain, then attach to it.\n    if (domain.active && !(this instanceof domain.Domain)) {\n      this.domain = domain.active;\n    }\n  }\n\n  if (!this._events || this._events === Object.getPrototypeOf(this)._events) {\n    this._events = new EventHandlers();\n    this._eventsCount = 0;\n  }\n\n  this._maxListeners = this._maxListeners || undefined;\n};\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function setMaxListeners(n) {\n  if (typeof n !== 'number' || n < 0 || isNaN(n))\n    throw new TypeError('\"n\" argument must be a positive number');\n  this._maxListeners = n;\n  return this;\n};\n\nfunction $getMaxListeners(that) {\n  if (that._maxListeners === undefined)\n    return EventEmitter.defaultMaxListeners;\n  return that._maxListeners;\n}\n\nEventEmitter.prototype.getMaxListeners = function getMaxListeners() {\n  return $getMaxListeners(this);\n};\n\n// These standalone emit* functions are used to optimize calling of event\n// handlers for fast cases because emit() itself often has a variable number of\n// arguments and can be deoptimized because of that. These functions always have\n// the same number of arguments and thus do not get deoptimized, so the code\n// inside them can execute faster.\nfunction emitNone(handler, isFn, self) {\n  if (isFn)\n    handler.call(self);\n  else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      listeners[i].call(self);\n  }\n}\nfunction emitOne(handler, isFn, self, arg1) {\n  if (isFn)\n    handler.call(self, arg1);\n  else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      listeners[i].call(self, arg1);\n  }\n}\nfunction emitTwo(handler, isFn, self, arg1, arg2) {\n  if (isFn)\n    handler.call(self, arg1, arg2);\n  else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      listeners[i].call(self, arg1, arg2);\n  }\n}\nfunction emitThree(handler, isFn, self, arg1, arg2, arg3) {\n  if (isFn)\n    handler.call(self, arg1, arg2, arg3);\n  else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      listeners[i].call(self, arg1, arg2, arg3);\n  }\n}\n\nfunction emitMany(handler, isFn, self, args) {\n  if (isFn)\n    handler.apply(self, args);\n  else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      listeners[i].apply(self, args);\n  }\n}\n\nEventEmitter.prototype.emit = function emit(type) {\n  var er, handler, len, args, i, events, domain;\n  var needDomainExit = false;\n  var doError = (type === 'error');\n\n  events = this._events;\n  if (events)\n    doError = (doError && events.error == null);\n  else if (!doError)\n    return false;\n\n  domain = this.domain;\n\n  // If there is no 'error' event listener then throw.\n  if (doError) {\n    er = arguments[1];\n    if (domain) {\n      if (!er)\n        er = new Error('Uncaught, unspecified \"error\" event');\n      er.domainEmitter = this;\n      er.domain = domain;\n      er.domainThrown = false;\n      domain.emit('error', er);\n    } else if (er instanceof Error) {\n      throw er; // Unhandled 'error' event\n    } else {\n      // At least give some kind of context to the user\n      var err = new Error('Uncaught, unspecified \"error\" event. (' + er + ')');\n      err.context = er;\n      throw err;\n    }\n    return false;\n  }\n\n  handler = events[type];\n\n  if (!handler)\n    return false;\n\n  var isFn = typeof handler === 'function';\n  len = arguments.length;\n  switch (len) {\n    // fast cases\n    case 1:\n      emitNone(handler, isFn, this);\n      break;\n    case 2:\n      emitOne(handler, isFn, this, arguments[1]);\n      break;\n    case 3:\n      emitTwo(handler, isFn, this, arguments[1], arguments[2]);\n      break;\n    case 4:\n      emitThree(handler, isFn, this, arguments[1], arguments[2], arguments[3]);\n      break;\n    // slower\n    default:\n      args = new Array(len - 1);\n      for (i = 1; i < len; i++)\n        args[i - 1] = arguments[i];\n      emitMany(handler, isFn, this, args);\n  }\n\n  if (needDomainExit)\n    domain.exit();\n\n  return true;\n};\n\nfunction _addListener(target, type, listener, prepend) {\n  var m;\n  var events;\n  var existing;\n\n  if (typeof listener !== 'function')\n    throw new TypeError('\"listener\" argument must be a function');\n\n  events = target._events;\n  if (!events) {\n    events = target._events = new EventHandlers();\n    target._eventsCount = 0;\n  } else {\n    // To avoid recursion in the case that type === \"newListener\"! Before\n    // adding it to the listeners, first emit \"newListener\".\n    if (events.newListener) {\n      target.emit('newListener', type,\n                  listener.listener ? listener.listener : listener);\n\n      // Re-assign `events` because a newListener handler could have caused the\n      // this._events to be assigned to a new object\n      events = target._events;\n    }\n    existing = events[type];\n  }\n\n  if (!existing) {\n    // Optimize the case of one listener. Don't need the extra array object.\n    existing = events[type] = listener;\n    ++target._eventsCount;\n  } else {\n    if (typeof existing === 'function') {\n      // Adding the second element, need to change to array.\n      existing = events[type] = prepend ? [listener, existing] :\n                                          [existing, listener];\n    } else {\n      // If we've already got an array, just append.\n      if (prepend) {\n        existing.unshift(listener);\n      } else {\n        existing.push(listener);\n      }\n    }\n\n    // Check for listener leak\n    if (!existing.warned) {\n      m = $getMaxListeners(target);\n      if (m && m > 0 && existing.length > m) {\n        existing.warned = true;\n        var w = new Error('Possible EventEmitter memory leak detected. ' +\n                            existing.length + ' ' + type + ' listeners added. ' +\n                            'Use emitter.setMaxListeners() to increase limit');\n        w.name = 'MaxListenersExceededWarning';\n        w.emitter = target;\n        w.type = type;\n        w.count = existing.length;\n        emitWarning(w);\n      }\n    }\n  }\n\n  return target;\n}\nfunction emitWarning(e) {\n  typeof console.warn === 'function' ? console.warn(e) : console.log(e);\n}\nEventEmitter.prototype.addListener = function addListener(type, listener) {\n  return _addListener(this, type, listener, false);\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.prependListener =\n    function prependListener(type, listener) {\n      return _addListener(this, type, listener, true);\n    };\n\nfunction _onceWrap(target, type, listener) {\n  var fired = false;\n  function g() {\n    target.removeListener(type, g);\n    if (!fired) {\n      fired = true;\n      listener.apply(target, arguments);\n    }\n  }\n  g.listener = listener;\n  return g;\n}\n\nEventEmitter.prototype.once = function once(type, listener) {\n  if (typeof listener !== 'function')\n    throw new TypeError('\"listener\" argument must be a function');\n  this.on(type, _onceWrap(this, type, listener));\n  return this;\n};\n\nEventEmitter.prototype.prependOnceListener =\n    function prependOnceListener(type, listener) {\n      if (typeof listener !== 'function')\n        throw new TypeError('\"listener\" argument must be a function');\n      this.prependListener(type, _onceWrap(this, type, listener));\n      return this;\n    };\n\n// emits a 'removeListener' event iff the listener was removed\nEventEmitter.prototype.removeListener =\n    function removeListener(type, listener) {\n      var list, events, position, i, originalListener;\n\n      if (typeof listener !== 'function')\n        throw new TypeError('\"listener\" argument must be a function');\n\n      events = this._events;\n      if (!events)\n        return this;\n\n      list = events[type];\n      if (!list)\n        return this;\n\n      if (list === listener || (list.listener && list.listener === listener)) {\n        if (--this._eventsCount === 0)\n          this._events = new EventHandlers();\n        else {\n          delete events[type];\n          if (events.removeListener)\n            this.emit('removeListener', type, list.listener || listener);\n        }\n      } else if (typeof list !== 'function') {\n        position = -1;\n\n        for (i = list.length; i-- > 0;) {\n          if (list[i] === listener ||\n              (list[i].listener && list[i].listener === listener)) {\n            originalListener = list[i].listener;\n            position = i;\n            break;\n          }\n        }\n\n        if (position < 0)\n          return this;\n\n        if (list.length === 1) {\n          list[0] = undefined;\n          if (--this._eventsCount === 0) {\n            this._events = new EventHandlers();\n            return this;\n          } else {\n            delete events[type];\n          }\n        } else {\n          spliceOne(list, position);\n        }\n\n        if (events.removeListener)\n          this.emit('removeListener', type, originalListener || listener);\n      }\n\n      return this;\n    };\n\nEventEmitter.prototype.removeAllListeners =\n    function removeAllListeners(type) {\n      var listeners, events;\n\n      events = this._events;\n      if (!events)\n        return this;\n\n      // not listening for removeListener, no need to emit\n      if (!events.removeListener) {\n        if (arguments.length === 0) {\n          this._events = new EventHandlers();\n          this._eventsCount = 0;\n        } else if (events[type]) {\n          if (--this._eventsCount === 0)\n            this._events = new EventHandlers();\n          else\n            delete events[type];\n        }\n        return this;\n      }\n\n      // emit removeListener for all listeners on all events\n      if (arguments.length === 0) {\n        var keys = Object.keys(events);\n        for (var i = 0, key; i < keys.length; ++i) {\n          key = keys[i];\n          if (key === 'removeListener') continue;\n          this.removeAllListeners(key);\n        }\n        this.removeAllListeners('removeListener');\n        this._events = new EventHandlers();\n        this._eventsCount = 0;\n        return this;\n      }\n\n      listeners = events[type];\n\n      if (typeof listeners === 'function') {\n        this.removeListener(type, listeners);\n      } else if (listeners) {\n        // LIFO order\n        do {\n          this.removeListener(type, listeners[listeners.length - 1]);\n        } while (listeners[0]);\n      }\n\n      return this;\n    };\n\nEventEmitter.prototype.listeners = function listeners(type) {\n  var evlistener;\n  var ret;\n  var events = this._events;\n\n  if (!events)\n    ret = [];\n  else {\n    evlistener = events[type];\n    if (!evlistener)\n      ret = [];\n    else if (typeof evlistener === 'function')\n      ret = [evlistener.listener || evlistener];\n    else\n      ret = unwrapListeners(evlistener);\n  }\n\n  return ret;\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  if (typeof emitter.listenerCount === 'function') {\n    return emitter.listenerCount(type);\n  } else {\n    return listenerCount.call(emitter, type);\n  }\n};\n\nEventEmitter.prototype.listenerCount = listenerCount;\nfunction listenerCount(type) {\n  var events = this._events;\n\n  if (events) {\n    var evlistener = events[type];\n\n    if (typeof evlistener === 'function') {\n      return 1;\n    } else if (evlistener) {\n      return evlistener.length;\n    }\n  }\n\n  return 0;\n}\n\nEventEmitter.prototype.eventNames = function eventNames() {\n  return this._eventsCount > 0 ? Reflect.ownKeys(this._events) : [];\n};\n\n// About 1.5x faster than the two-arg version of Array#splice().\nfunction spliceOne(list, index) {\n  for (var i = index, k = i + 1, n = list.length; k < n; i += 1, k += 1)\n    list[i] = list[k];\n  list.pop();\n}\n\nfunction arrayClone(arr, i) {\n  var copy = new Array(i);\n  while (i--)\n    copy[i] = arr[i];\n  return copy;\n}\n\nfunction unwrapListeners(arr) {\n  var ret = new Array(arr.length);\n  for (var i = 0; i < ret.length; ++i) {\n    ret[i] = arr[i].listener || arr[i];\n  }\n  return ret;\n}\n","var _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nimport EVENTS from '../events';\nimport { MediaInfo } from 'xgplayer-helper-models';\nimport { EventEmitter } from 'events';\n\nvar DIRECT_EMIT_FLAG = '__TO__';\n\nvar Context = function () {\n  function Context() {\n    var allowedEvents = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n\n    _classCallCheck(this, Context);\n\n    this._emitter = new EventEmitter();\n    if (!this._emitter.off) {\n      this._emitter.off = this._emitter.removeListener;\n    }\n\n    this.mediaInfo = new MediaInfo();\n    this._instanceMap = {}; // 所有的解码流程实例\n    this._clsMap = {}; // 构造函数的map\n    this._inited = false;\n    this.allowedEvents = allowedEvents;\n    this._hooks = {}; // 注册在事件前/后的钩子，例如 before('DEMUX_COMPLETE')\n  }\n\n  /**\n   * 从上下文中获取解码流程实例，如果没有实例，构造一个\n   * @param tag\n   * @param args\n   * @returns {*}\n   */\n\n\n  _createClass(Context, [{\n    key: 'getInstance',\n    value: function getInstance(tag) {\n      var instance = this._instanceMap[tag];\n      if (instance) {\n        return instance;\n      } else {\n        // throw new Error(`${tag}实例尚未初始化`)\n        return null;\n      }\n    }\n\n    /**\n     * 初始化具体实例\n     * @param tag\n     * @param args\n     */\n\n  }, {\n    key: 'initInstance',\n    value: function initInstance(tag) {\n      for (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        args[_key - 1] = arguments[_key];\n      }\n\n      var a = args[0],\n          b = args[1],\n          c = args[2],\n          d = args[3];\n\n      if (this._clsMap[tag]) {\n        var newInstance = new this._clsMap[tag](a, b, c, d);\n        this._instanceMap[tag] = newInstance;\n        if (newInstance.init) {\n          newInstance.init(); // TODO: lifecircle\n        }\n        return newInstance;\n      } else {\n        throw new Error(tag + '\\u672A\\u5728context\\u4E2D\\u6CE8\\u518C');\n      }\n    }\n\n    /**\n     * 避免大量的initInstance调用，初始化所有的组件\n     * @param config\n     */\n\n  }, {\n    key: 'init',\n    value: function init(config) {\n      if (this._inited) {\n        return;\n      }\n      for (var tag in this._clsMap) {\n        // if not inited, init an instance\n        if (this._clsMap.hasOwnProperty(tag) && !this._instanceMap[tag]) {\n          this.initInstance(tag, config);\n        }\n      }\n      this._inited = true;\n    }\n\n    /**\n     * 注册一个上下文流程，提供安全的事件发送机制\n     * @param tag\n     * @param cls\n     */\n\n  }, {\n    key: 'registry',\n    value: function registry(tag, cls) {\n      var _this2 = this;\n\n      var emitter = this._emitter;\n      var checkMessageName = this._isMessageNameValid.bind(this);\n      var self = this;\n      var enhanced = function (_cls) {\n        _inherits(enhanced, _cls);\n\n        function enhanced(a, b, c) {\n          _classCallCheck(this, enhanced);\n\n          var _this = _possibleConstructorReturn(this, (enhanced.__proto__ || Object.getPrototypeOf(enhanced)).call(this, a, b, c));\n\n          _this.listeners = {};\n          _this.onceListeners = {};\n          _this.TAG = tag;\n          _this._context = self;\n          return _this;\n        }\n\n        _createClass(enhanced, [{\n          key: 'on',\n          value: function on(messageName, callback) {\n            checkMessageName(messageName);\n\n            if (this.listeners[messageName]) {\n              this.listeners[messageName].push(callback);\n            } else {\n              this.listeners[messageName] = [callback];\n            }\n\n            emitter.on('' + messageName + DIRECT_EMIT_FLAG + tag, callback); // 建立定向通信监听\n            return emitter.on(messageName, callback);\n          }\n\n          /**\n           * 在某个事件触发前执行\n           * @param messageName\n           * @param callback\n           */\n\n        }, {\n          key: 'before',\n          value: function before(messageName, callback) {\n            checkMessageName(messageName);\n            if (self._hooks[messageName]) {\n              self._hooks[messageName].push(callback);\n            } else {\n              self._hooks[messageName] = [callback];\n            }\n          }\n        }, {\n          key: 'once',\n          value: function once(messageName, callback) {\n            checkMessageName(messageName);\n\n            if (this.onceListeners[messageName]) {\n              this.onceListeners[messageName].push(callback);\n            } else {\n              this.onceListeners[messageName] = [callback];\n            }\n\n            emitter.once('' + messageName + DIRECT_EMIT_FLAG + tag, callback);\n            return emitter.once(messageName, callback);\n          }\n        }, {\n          key: 'emit',\n          value: function emit(messageName) {\n            checkMessageName(messageName);\n            // console.log('emit ', messageName);\n\n            var beforeList = self._hooks ? self._hooks[messageName] : null;\n\n            if (beforeList) {\n              for (var i = 0, len = beforeList.length; i < len; i++) {\n                var callback = beforeList[i];\n                callback();\n              }\n            }\n\n            for (var _len2 = arguments.length, args = Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n              args[_key2 - 1] = arguments[_key2];\n            }\n\n            return emitter.emit.apply(emitter, [messageName].concat(args));\n          }\n\n          /**\n           * 定向发送给某个组件单例的消息\n           * @param messageName\n           * @param args\n           */\n\n        }, {\n          key: 'emitTo',\n          value: function emitTo(tag, messageName) {\n            checkMessageName(messageName);\n\n            for (var _len3 = arguments.length, args = Array(_len3 > 2 ? _len3 - 2 : 0), _key3 = 2; _key3 < _len3; _key3++) {\n              args[_key3 - 2] = arguments[_key3];\n            }\n\n            return emitter.emit.apply(emitter, ['' + messageName + DIRECT_EMIT_FLAG + tag].concat(args));\n          }\n        }, {\n          key: 'off',\n          value: function off(messageName, callback) {\n            checkMessageName(messageName);\n            return emitter.off(messageName, callback);\n          }\n        }, {\n          key: 'removeListeners',\n          value: function removeListeners() {\n            var hasOwn = Object.prototype.hasOwnProperty.bind(this.listeners);\n\n            for (var messageName in this.listeners) {\n              if (hasOwn(messageName)) {\n                var callbacks = this.listeners[messageName] || [];\n                for (var i = 0; i < callbacks.length; i++) {\n                  var callback = callbacks[i];\n                  emitter.off(messageName, callback);\n                  emitter.off('' + messageName + DIRECT_EMIT_FLAG + tag, callback);\n                }\n              }\n            }\n\n            for (var _messageName in this.onceListeners) {\n              if (hasOwn(_messageName)) {\n                var _callbacks = this.onceListeners[_messageName] || [];\n                for (var _i = 0; _i < _callbacks.length; _i++) {\n                  var _callback = _callbacks[_i];\n                  emitter.off(_messageName, _callback);\n                  emitter.off('' + _messageName + DIRECT_EMIT_FLAG + tag, _callback);\n                }\n              }\n            }\n          }\n\n          /**\n           * 在组件销毁时，默认将它注册的事件全部卸载，确保不会造成内存泄漏\n           */\n\n        }, {\n          key: 'destroy',\n          value: function destroy() {\n            // step1 unlisten events\n            this.removeListeners();\n            this.listeners = {};\n\n            // step2 release from context\n            delete self._instanceMap[tag];\n            if (_get(enhanced.prototype.__proto__ || Object.getPrototypeOf(enhanced.prototype), 'destroy', this)) {\n              return _get(enhanced.prototype.__proto__ || Object.getPrototypeOf(enhanced.prototype), 'destroy', this).call(this);\n            }\n          }\n        }]);\n\n        return enhanced;\n      }(cls);\n      this._clsMap[tag] = enhanced;\n\n      /**\n       * get instance immediately\n       * e.g const instance = context.registry(tag, Cls)(config)\n       * */\n      return function () {\n        for (var _len4 = arguments.length, args = Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n          args[_key4] = arguments[_key4];\n        }\n\n        return _this2.initInstance.apply(_this2, [tag].concat(args));\n      };\n    }\n\n    /**\n     * 各个模块处理seek\n     * @param time\n     */\n\n  }, {\n    key: 'seek',\n    value: function seek(time) {\n      this._emitter.emit(EVENTS.PLAYER_EVENTS.SEEK, time);\n    }\n\n    /**\n     * 对存在的实例进行\n     */\n\n  }, {\n    key: 'destroyInstances',\n    value: function destroyInstances() {\n      var _this3 = this;\n\n      Object.keys(this._instanceMap).forEach(function (tag) {\n        if (_this3._instanceMap[tag].destroy) {\n          _this3._instanceMap[tag].destroy();\n        }\n      });\n    }\n\n    /**\n     * 编解码流程无需关注事件的解绑\n     */\n\n  }, {\n    key: 'destroy',\n    value: function destroy() {\n      this._emitter = null;\n      this.allowedEvents = [];\n      this._clsMap = null;\n      this._context = null;\n      this._hooks = null;\n      this.destroyInstances();\n    }\n\n    /**\n     * 对信道进行收拢\n     * @param messageName\n     * @private\n     */\n\n  }, {\n    key: '_isMessageNameValid',\n    value: function _isMessageNameValid(messageName) {\n      if (!this.allowedEvents.indexOf(messageName) < 0) {\n        throw new Error('unregistered message name: ' + messageName);\n      }\n    }\n  }]);\n\n  return Context;\n}();\n\nexport default Context;","var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nimport EVENTS from '../events';\n\nvar CRYTO_EVENTS = EVENTS.CRYTO_EVENTS;\n\nvar Crypto = function () {\n  function Crypto(config) {\n    _classCallCheck(this, Crypto);\n\n    this.inputBuffer = config.inputbuffer;\n    this.outputBuffer = config.outputbuffer;\n    this.key = config.key;\n    this.iv = config.iv;\n    this.method = config.method;\n\n    this.crypto = window.crypto || window.msCrypto;\n  }\n\n  _createClass(Crypto, [{\n    key: 'init',\n    value: function init() {\n      this.on(CRYTO_EVENTS.START_DECRYPT, this.decript.bind(this));\n    }\n  }, {\n    key: 'decript',\n    value: function decript() {\n      var _this = this;\n\n      if (!this.aeskey) {\n        var sbkey = this.crypto.subtle.importKey('raw', this.key.buffer, { name: 'AES-CBC' }, false, ['encrypt', 'decrypt']);\n        sbkey.then(function (key) {\n          _this.aeskey = key;\n          _this.decriptData();\n        });\n      } else {\n        this.decriptData();\n      }\n    }\n  }, {\n    key: 'decriptData',\n    value: function decriptData() {\n      var _this2 = this;\n\n      var inputbuffer = this._context.getInstance(this.inputBuffer);\n      var outputbuffer = this._context.getInstance(this.outputBuffer);\n      var data = inputbuffer.shift();\n      if (data) {\n        this.crypto.subtle.decrypt({ name: 'AES-CBC', iv: this.iv.buffer }, this.aeskey, data).then(function (res) {\n          outputbuffer.push(new Uint8Array(res));\n          _this2.emit(CRYTO_EVENTS.DECRYPTED);\n          _this2.decriptData(data);\n        });\n      }\n    }\n  }]);\n\n  return Crypto;\n}();\n\nexport default Crypto;","var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar KeySystems = {\n  WIDEVINE: 'com.widevine.alpha',\n  PLAYREADY: 'com.microsoft.playready'\n};\n\nvar MAX_LICENSE_REQUEST_FAILURES = 3;\n\nvar EME = function () {\n  function EME(_ref) {\n    var config = _ref.config,\n        player = _ref.player;\n\n    _classCallCheck(this, EME);\n\n    this.licenseUrl = config.licenseUrl;\n    this.mediaKeySystemConfigs = config.mediaKeySystemConfigs;\n    this.keySystem = config.keySystem || KeySystems.WIDEVINE;\n    this.video = player.video;\n    this.mediaKeysList = [];\n    this.requestLicenseFailureCount = 0;\n  }\n\n  _createClass(EME, [{\n    key: 'init',\n    value: function init() {\n      this.on('ManifestParsed', this.onManifestParsed.bind(this));\n    }\n  }, {\n    key: 'onManifestParsed',\n    value: function onManifestParsed(data) {\n      var _this = this;\n\n      var mediaKeySystemConfigs = this.mediaKeySystemConfigs || this.createWidevineMediaKeySystemConfigurations(data.audioCodecs, data.videoCodecs);\n\n      navigator.requestMediaKeySystemAccess(this.keySystem, mediaKeySystemConfigs).then(function (keySystemAccess) {\n        return keySystemAccess.createMediaKeys();\n      }).then(function (mediaKeys) {\n        _this.video.setMediaKeys(mediaKeys);\n      });\n\n      this.video.addEventListener('encrypted', this.onMediaEncrypted.bind(this));\n    }\n  }, {\n    key: 'onKeySessionMessage',\n    value: function onKeySessionMessage(keySession, message) {\n      this.requestLicense(message, function (data) {\n        keySession.update(data);\n      });\n    }\n  }, {\n    key: 'requestLicense',\n    value: function requestLicense(keyMessage, callback) {\n      try {\n        var url = this.licenseUrl;\n        var xhr = this.createLicenseXhr(url, keyMessage, callback);\n        xhr.send(keyMessage);\n      } catch (e) {}\n    }\n  }, {\n    key: 'createLicenseXhr',\n    value: function createLicenseXhr(url, keyMessage, callback) {\n      var xhr = new window.XMLHttpRequest();\n\n      xhr.open('POST', url, true);\n\n      xhr.responseType = 'arraybuffer';\n      xhr.onreadystatechange = this.onLicenseRequestReadyStageChange.bind(this, xhr, url, keyMessage, callback);\n      return xhr;\n    }\n  }, {\n    key: 'onLicenseRequestReadyStageChange',\n    value: function onLicenseRequestReadyStageChange(xhr, url, keyMessage, callback) {\n      switch (xhr.readyState) {\n        case 4:\n          if (xhr.status === 200) {\n            this.requestLicenseFailureCount = 0;\n            callback(xhr.response);\n          } else {\n            this.requestLicenseFailureCount++;\n\n            if (this.requestLicenseFailureCount > MAX_LICENSE_REQUEST_FAILURES) {\n              return;\n            }\n            this.requestLicense(keyMessage, callback);\n          }\n          break;\n      }\n    }\n  }, {\n    key: 'onMediaEncrypted',\n    value: function onMediaEncrypted(e) {\n      var _this2 = this;\n\n      var keySession = this.video.mediaKeys.createSession();\n      keySession.addEventListener('message', function (event) {\n        _this2.onKeySessionMessage(keySession, event.message);\n      }, false);\n      keySession.generateRequest(e.initDataType, e.initData);\n    }\n  }, {\n    key: 'createWidevineMediaKeySystemConfigurations',\n    value: function createWidevineMediaKeySystemConfigurations(audioCodecs, videoCodecs) {\n      return [{\n        videoCapabilities: videoCodecs.map(function (codec) {\n          return {\n            contentType: 'video/mp4; codecs=\"' + codec + '\"'\n          };\n        })\n      }];\n    }\n  }], [{\n    key: 'isSupported',\n    value: function isSupported() {\n      var checkIsIncompatibleBrowser = function checkIsIncompatibleBrowser() {\n        var ua = navigator.userAgent;\n        var isSafari = /^((?!chrome|android).)*safari/i.test(ua);\n        var isMSBrowser = ua.indexOf('MSIE ') > 0 || ua.indexOf('Trident/') > 0;\n        var isFirefox = ua.indexOf('Firefox') > 0;\n        var isEdge = ua.indexOf('Edge') > 0;\n        return isSafari || isMSBrowser || isFirefox || isEdge;\n      };\n      return !!navigator.requestMediaKeySystemAccess && !checkIsIncompatibleBrowser();\n    }\n  }]);\n\n  return EME;\n}();\n\nexport default EME;","var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nimport EVENTS from '../events';\n\nvar MSE_EVENTS = EVENTS.MSE_EVENTS;\n\nvar MSE = function () {\n  function MSE(configs, context) {\n    _classCallCheck(this, MSE);\n\n    if (context) {\n      this._context = context;\n      this.emit = context._emitter.emit.bind(context._emitter);\n    }\n\n    this.TAG = 'MSE';\n\n    this.configs = Object.assign({}, configs);\n    this.container = this.configs.container;\n    this.mediaSource = null;\n    this.sourceBuffers = {};\n    this.preloadTime = this.configs.preloadTime || 1;\n    this.onSourceOpen = this.onSourceOpen.bind(this);\n    this.onTimeUpdate = this.onTimeUpdate.bind(this);\n    this.onUpdateEnd = this.onUpdateEnd.bind(this);\n    this.onWaiting = this.onWaiting.bind(this);\n    this.opened = false;\n  }\n\n  _createClass(MSE, [{\n    key: 'init',\n    value: function init() {\n      // eslint-disable-next-line no-undef\n      this.mediaSource = new self.MediaSource();\n      this.mediaSource.addEventListener('sourceopen', this.onSourceOpen);\n      this._url = null;\n      this.container.addEventListener('timeupdate', this.onTimeUpdate);\n      this.container.addEventListener('waiting', this.onWaiting);\n    }\n  }, {\n    key: 'resetContext',\n    value: function resetContext(newCtx) {\n      this._context = newCtx;\n      this.emit = newCtx._emitter.emit.bind(newCtx._emitter);\n      for (var i = 0; i < Object.keys(this.sourceBuffers).length; i++) {\n        var buffer = this.sourceBuffers[Object.keys(this.sourceBuffers)[i]];\n        if (!buffer.updating) {\n          MSE.clearBuffer(buffer);\n        }\n      }\n    }\n  }, {\n    key: 'onTimeUpdate',\n    value: function onTimeUpdate() {\n      this.emit('TIME_UPDATE', this.container);\n    }\n  }, {\n    key: 'onWaiting',\n    value: function onWaiting() {\n      this.emit('WAITING', this.container);\n    }\n  }, {\n    key: 'onSourceOpen',\n    value: function onSourceOpen() {\n      this.opened = true;\n      this.addSourceBuffers();\n    }\n  }, {\n    key: 'onUpdateEnd',\n    value: function onUpdateEnd() {\n      this.emit(MSE_EVENTS.SOURCE_UPDATE_END);\n      this.doAppend();\n    }\n  }, {\n    key: 'addSourceBuffers',\n    value: function addSourceBuffers() {\n      if (this.mediaSource.readyState !== 'open' || !this.opened) {\n        return;\n      }\n      var sources = this._context.getInstance('PRE_SOURCE_BUFFER');\n      var tracks = this._context.getInstance('TRACKS');\n      var track = void 0;\n      if (!sources || !tracks) {\n        return;\n      }\n\n      sources = sources.sources;\n      var add = false;\n      for (var i = 0, k = Object.keys(sources).length; i < k; i++) {\n        var type = Object.keys(sources)[i];\n        add = false;\n        if (type === 'audio') {\n          track = tracks.audioTrack;\n        } else if (type === 'video') {\n          track = tracks.videoTrack;\n          // return;\n        }\n        if (track && sources[type].init !== null && sources[type].data.length) {\n          add = true;\n        }\n      }\n\n      if (add) {\n        if (Object.keys(this.sourceBuffers).length > 1) {\n          return;\n        }\n        for (var _i = 0, _k = Object.keys(sources).length; _i < _k; _i++) {\n          var _type = Object.keys(sources)[_i];\n          if (this.sourceBuffers[_type]) {\n            continue;\n          }\n          var source = sources[_type];\n          var mime = _type === 'video' ? 'video/mp4;codecs=' + source.mimetype : 'audio/mp4;codecs=' + source.mimetype;\n\n          try {\n            var sourceBuffer = this.mediaSource.addSourceBuffer(mime);\n            this.sourceBuffers[_type] = sourceBuffer;\n            sourceBuffer.addEventListener('updateend', this.onUpdateEnd);\n          } catch (e) {\n            this.emit(MSE_EVENTS.MSE_ERROR, this.TAG, new Error(e.message));\n          }\n        }\n        if (Object.keys(this.sourceBuffers).length === 2) {\n          this.doAppend();\n        }\n      }\n    }\n  }, {\n    key: 'doAppend',\n    value: function doAppend() {\n      if (Object.keys(this.sourceBuffers).length < 2) {\n        return;\n      }\n      var sources = this._context.getInstance('PRE_SOURCE_BUFFER');\n      if (sources) {\n        for (var i = 0; i < Object.keys(this.sourceBuffers).length; i++) {\n          var type = Object.keys(this.sourceBuffers)[i];\n          var sourceBuffer = this.sourceBuffers[type];\n          var source = sources.sources[type];\n          if (source && !source.inited) {\n            try {\n              // console.log('append buffser init: ', type, source.init)\n              sourceBuffer.appendBuffer(source.init.buffer.buffer);\n              source.inited = true;\n            } catch (e) {\n              // DO NOTHING\n            }\n          } else if (source) {\n            var data = source.data.shift();\n            if (data) {\n              try {\n                sourceBuffer.appendBuffer(data.buffer.buffer);\n              } catch (e) {\n                source.data.unshift(data);\n              }\n            }\n          }\n        }\n      }\n    }\n  }, {\n    key: 'endOfStream',\n    value: function endOfStream() {\n      var readyState = this.mediaSource.readyState;\n\n      if (readyState === 'open') {\n        try {\n          this.mediaSource.endOfStream();\n        } catch (e) {\n          // log\n        }\n      }\n    }\n  }, {\n    key: 'remove',\n    value: function remove(end) {\n      var start = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n\n      for (var i = 0; i < Object.keys(this.sourceBuffers).length; i++) {\n        var buffer = this.sourceBuffers[Object.keys(this.sourceBuffers)[i]];\n        if (!buffer.updating) {\n          // console.log('remove', start, end)\n          buffer.remove(start, end);\n        }\n      }\n    }\n  }, {\n    key: 'cleanBuffers',\n    value: function cleanBuffers() {\n      var _this = this;\n\n      var taskList = [];\n\n      var _loop = function _loop(i) {\n        var buffer = _this.sourceBuffers[Object.keys(_this.sourceBuffers)[i]];\n\n        var task = void 0;\n        if (buffer.updating) {\n          task = new Promise(function (resolve) {\n            var doCleanBuffer = function doCleanBuffer() {\n              var retryTime = 3;\n\n              var clean = function clean() {\n                if (!buffer.updating) {\n                  MSE.clearBuffer(buffer);\n                  buffer.addEventListener('updateend', function () {\n                    resolve();\n                  });\n                } else if (retryTime > 0) {\n                  setTimeout(clean, 200);\n                  retryTime--;\n                } else {\n                  resolve();\n                }\n              };\n\n              setTimeout(clean, 200);\n              buffer.removeEventListener('updateend', doCleanBuffer);\n            };\n            buffer.addEventListener('updateend', doCleanBuffer);\n          });\n        } else {\n          task = new Promise(function (resolve) {\n            MSE.clearBuffer(buffer);\n            buffer.addEventListener('updateend', function () {\n              resolve();\n            });\n          });\n\n          // task = Promise.resolve()\n        }\n\n        taskList.push(task);\n      };\n\n      for (var i = 0; i < Object.keys(this.sourceBuffers).length; i++) {\n        _loop(i);\n      }\n\n      return Promise.all(taskList);\n    }\n  }, {\n    key: 'removeBuffers',\n    value: function removeBuffers() {\n      var _this2 = this;\n\n      var taskList = [];\n\n      var _loop2 = function _loop2(i) {\n        var buffer = _this2.sourceBuffers[Object.keys(_this2.sourceBuffers)[i]];\n        buffer.removeEventListener('updateend', _this2.onUpdateEnd);\n\n        var task = void 0;\n        if (buffer.updating) {\n          task = new Promise(function (resolve) {\n            var doCleanBuffer = function doCleanBuffer() {\n              var retryTime = 3;\n\n              var clean = function clean() {\n                if (!buffer.updating) {\n                  MSE.clearBuffer(buffer);\n                  buffer.addEventListener('updateend', function () {\n                    resolve();\n                  });\n                } else if (retryTime > 0) {\n                  setTimeout(clean, 200);\n                  retryTime--;\n                } else {\n                  resolve();\n                }\n              };\n\n              setTimeout(clean, 200);\n              buffer.removeEventListener('updateend', doCleanBuffer);\n            };\n            buffer.addEventListener('updateend', doCleanBuffer);\n          });\n        } else {\n          task = new Promise(function (resolve) {\n            MSE.clearBuffer(buffer);\n            buffer.addEventListener('updateend', function () {\n              resolve();\n            });\n          });\n\n          // task = Promise.resolve()\n        }\n\n        taskList.push(task);\n      };\n\n      for (var i = 0; i < Object.keys(this.sourceBuffers).length; i++) {\n        _loop2(i);\n      }\n\n      return Promise.all(taskList);\n    }\n  }, {\n    key: 'destroy',\n    value: function destroy() {\n      var _this3 = this;\n\n      this.container.removeEventListener('timeupdate', this.onTimeUpdate);\n      this.container.removeEventListener('waiting', this.onWaiting);\n      this.mediaSource.removeEventListener('sourceopen', this.onSourceOpen);\n      return this.removeBuffers().then(function () {\n        for (var i = 0; i < Object.keys(_this3.sourceBuffers).length; i++) {\n          var _buffer = _this3.sourceBuffers[Object.keys(_this3.sourceBuffers)[i]];\n          _this3.mediaSource.removeSourceBuffer(_buffer);\n          delete _this3.sourceBuffers[Object.keys(_this3.sourceBuffers)[i]];\n        }\n\n        _this3.endOfStream();\n        window.URL.revokeObjectURL(_this3.url);\n\n        _this3.url = null;\n        _this3.configs = {};\n        _this3.container = null;\n        _this3.mediaSource = null;\n        _this3.sourceBuffers = {};\n        _this3.preloadTime = 1;\n\n        _this3.onSourceOpen = null;\n        _this3.onTimeUpdate = null;\n        _this3.onUpdateEnd = null;\n        _this3.onWaiting = null;\n      });\n    }\n  }, {\n    key: 'url',\n    set: function set(val) {\n      this._url = val;\n    },\n    get: function get() {\n      if (!this._url) {\n        this._url = window.URL.createObjectURL(this.mediaSource);\n      }\n      return this._url;\n    }\n  }], [{\n    key: 'clearBuffer',\n    value: function clearBuffer(buffer) {\n      try {\n        var buffered = buffer.buffered;\n        var bEnd = 0.1;\n        for (var i = 0, len = buffered.length; i < len; i++) {\n          bEnd = buffered.end(i);\n        }\n        buffer.remove(0, bEnd);\n      } catch (e) {\n        // DO NOTHING\n      }\n    }\n  }]);\n\n  return MSE;\n}();\n\nexport default MSE;","var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nimport EVENTS from '../events';\n\nvar BROWSER_EVENTS = EVENTS.BROWSER_EVENTS;\nvar hidden = void 0;\nvar visibilityChange = void 0;\n\nif (typeof document.hidden !== 'undefined') {\n  // Opera 12.10 and Firefox 18 and later support\n  hidden = 'hidden';\n  visibilityChange = 'visibilitychange';\n} else if (typeof document.msHidden !== 'undefined') {\n  hidden = 'msHidden';\n  visibilityChange = 'msvisibilitychange';\n} else if (typeof document.webkitHidden !== 'undefined') {\n  hidden = 'webkitHidden';\n  visibilityChange = 'webkitvisibilitychange';\n}\n\nvar PageVisibility = function () {\n  function PageVisibility() {\n    _classCallCheck(this, PageVisibility);\n\n    this.callbacks = {\n      onShow: [],\n      onHidden: []\n    };\n    this.handleVisibilityChange = this.handleVisibilityChange.bind(this);\n    this.init();\n  }\n\n  _createClass(PageVisibility, [{\n    key: 'init',\n    value: function init() {\n      document.addEventListener(visibilityChange, this.handleVisibilityChange, false);\n    }\n  }, {\n    key: 'handleVisibilityChange',\n    value: function handleVisibilityChange() {\n      this.emit(BROWSER_EVENTS.VISIBILITY_CHANGE, document[hidden]);\n    }\n  }, {\n    key: 'destroy',\n    value: function destroy() {\n      document.removeEventListener(visibilityChange, this.handleVisibilityChange);\n    }\n  }]);\n\n  return PageVisibility;\n}();\n\nexport default PageVisibility;","import _PageVisibility from './page-visibility';\n\nvar le = function () {\n  var buf = new ArrayBuffer(2);\n  new DataView(buf).setInt16(0, 256, true); // little-endian write\n  return new Int16Array(buf)[0] === 256; // platform-spec read, if equal then LE\n}();\n\nvar sniffer = {\n  get device() {\n    var r = sniffer.os;\n    return r.isPc ? 'pc' : r.isTablet ? 'tablet' : 'mobile';\n  },\n  get browser() {\n    var ua = navigator.userAgent.toLowerCase();\n    var reg = {\n      ie: /rv:([\\d.]+)\\) like gecko/,\n      firfox: /firefox\\/([\\d.]+)/,\n      chrome: /chrome\\/([\\d.]+)/,\n      opera: /opera.([\\d.]+)/,\n      safari: /version\\/([\\d.]+).*safari/\n    };\n    return [].concat(Object.keys(reg).filter(function (key) {\n      return reg[key].test(ua);\n    }))[0];\n  },\n  get os() {\n    var ua = navigator.userAgent;\n    var isWindowsPhone = /(?:Windows Phone)/.test(ua);\n    var isSymbian = /(?:SymbianOS)/.test(ua) || isWindowsPhone;\n    var isAndroid = /(?:Android)/.test(ua);\n    var isFireFox = /(?:Firefox)/.test(ua);\n    var isTablet = /(?:iPad|PlayBook)/.test(ua) || isAndroid && !/(?:Mobile)/.test(ua) || isFireFox && /(?:Tablet)/.test(ua);\n    var isPhone = /(?:iPhone)/.test(ua) && !isTablet;\n    var isPc = !isPhone && !isAndroid && !isSymbian;\n    return {\n      isTablet: isTablet,\n      isPhone: isPhone,\n      isAndroid: isAndroid,\n      isPc: isPc,\n      isSymbian: isSymbian,\n      isWindowsPhone: isWindowsPhone,\n      isFireFox: isFireFox\n    };\n  },\n\n  get isLe() {\n    return le;\n  }\n};\n\nexport var PageVisibility = _PageVisibility;\nexport default sniffer;","var _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nimport EVENTS from '../events';\n\nvar LOADER_EVENTS = EVENTS.LOADER_EVENTS;\nvar READ_STREAM = 0;\nvar READ_TEXT = 1;\nvar READ_JSON = 2;\nvar READ_BUFFER = 3;\n\nvar FetchLoader = function () {\n  function FetchLoader(configs) {\n    _classCallCheck(this, FetchLoader);\n\n    this.configs = Object.assign({}, configs);\n    this.url = null;\n    this.status = 0;\n    this.error = null;\n    this._reader = null;\n    this._canceled = false;\n    this._destroyed = false;\n    this.readtype = this.configs.readtype;\n    this.buffer = this.configs.buffer || 'LOADER_BUFFER';\n    this._loaderTaskNo = 0;\n  }\n\n  _createClass(FetchLoader, [{\n    key: 'init',\n    value: function init() {\n      this.on(LOADER_EVENTS.LADER_START, this.load.bind(this));\n    }\n  }, {\n    key: 'fetch',\n    value: function (_fetch) {\n      function fetch(_x, _x2) {\n        return _fetch.apply(this, arguments);\n      }\n\n      fetch.toString = function () {\n        return _fetch.toString();\n      };\n\n      return fetch;\n    }(function (url, params) {\n      var timer = null;\n      return Promise.race([fetch(url, params), new Promise(function (resolve, reject) {\n        timer = setTimeout(function () {\n          reject(new Error('fetch timeout'));\n        }, 1e4); // 10s\n      })]).then(function (response) {\n        if (timer) {\n          clearTimeout(timer);\n          timer = null;\n        }\n        return response;\n      });\n    })\n  }, {\n    key: 'internalLoad',\n    value: function internalLoad(url, params, retryTimes) {\n      var _this2 = this;\n\n      return this.fetch(this.url, params).then(function (response) {\n        _this2.emit(LOADER_EVENTS.LOADER_RESPONSE_HEADERS, _this2.TAG, response.headers);\n\n        if (response.ok) {\n          _this2.status = response.status;\n          Promise.resolve().then(function () {\n            _this2._onFetchResponse(response);\n          });\n\n          return Promise.resolve(response);\n        }\n\n        if (retryTimes-- > 0) {\n          return _this2.internalLoad(url, params, retryTimes);\n        } else {\n          _this2.loading = false;\n          _this2.emit(LOADER_EVENTS.LOADER_ERROR, _this2.TAG, new Error(response.status + ' (' + response.statusText + ')'));\n        }\n      }).catch(function (error) {\n        _this2.loading = false;\n        if (retryTimes-- > 0) {\n          return _this2.internalLoad(url, params, retryTimes);\n        } else {\n          _this2.emit(LOADER_EVENTS.LOADER_ERROR, _this2.TAG, error);\n          throw error;\n        }\n      });\n    }\n  }, {\n    key: 'load',\n    value: function load(url) {\n      var opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var retryTimes = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 3;\n\n      this.url = url;\n\n      this._canceled = false;\n\n      // TODO: Add Ranges\n      var params = this.getParams(opts);\n      this.loading = true;\n      return this.internalLoad(url, params, retryTimes);\n    }\n  }, {\n    key: '_onFetchResponse',\n    value: function _onFetchResponse(response) {\n      var _this = this;\n      var buffer = this._context.getInstance(this.buffer);\n      this._loaderTaskNo++;\n      var taskno = this._loaderTaskNo;\n      if (response.ok === true) {\n        switch (this.readtype) {\n          case READ_JSON:\n            response.json().then(function (data) {\n              _this.loading = false;\n              if (!_this._canceled && !_this._destroyed) {\n                if (buffer) {\n                  buffer.push(data);\n                  _this.emit(LOADER_EVENTS.LOADER_COMPLETE, buffer);\n                } else {\n                  _this.emit(LOADER_EVENTS.LOADER_COMPLETE, data);\n                }\n              }\n            });\n            break;\n          case READ_TEXT:\n            response.text().then(function (data) {\n              _this.loading = false;\n              if (!_this._canceled && !_this._destroyed) {\n                if (buffer) {\n                  buffer.push(data);\n                  _this.emit(LOADER_EVENTS.LOADER_COMPLETE, buffer);\n                } else {\n                  _this.emit(LOADER_EVENTS.LOADER_COMPLETE, data);\n                }\n              }\n            });\n            break;\n          case READ_BUFFER:\n            response.arrayBuffer().then(function (data) {\n              _this.loading = false;\n              if (!_this._canceled && !_this._destroyed) {\n                if (buffer) {\n                  buffer.push(new Uint8Array(data));\n                  _this.emit(LOADER_EVENTS.LOADER_COMPLETE, buffer);\n                } else {\n                  _this.emit(LOADER_EVENTS.LOADER_COMPLETE, data);\n                }\n              }\n            });\n            break;\n          case READ_STREAM:\n          default:\n            return this._onReader(response.body.getReader(), taskno);\n        }\n      }\n    }\n  }, {\n    key: '_onReader',\n    value: function _onReader(reader, taskno) {\n      var _this3 = this;\n\n      var buffer = this._context.getInstance(this.buffer);\n      if (!buffer && this._reader || this._destroyed) {\n        try {\n          this._reader.cancel();\n        } catch (e) {\n          // DO NOTHING\n        }\n      }\n\n      this._reader = reader;\n      if (this.loading === false) {\n        return;\n      }\n\n      // reader read function returns a Promise. get data when callback and has value.done when disconnected.\n      // read方法返回一个Promise. 回调中可以获取到数据。当value.done存在时，说明链接断开。\n      this._reader && this._reader.read().then(function (val) {\n        if (_this3._canceled || _this3._destroyed) {\n          if (_this3._reader) {\n            try {\n              _this3._reader.cancel();\n            } catch (e) {\n              // DO NOTHING\n            }\n          }\n          return;\n        }\n        if (val.done) {\n          _this3.loading = false;\n          _this3.status = 0;\n          Promise.resolve().then(function () {\n            _this3.emit(LOADER_EVENTS.LOADER_COMPLETE, buffer);\n          });\n          return;\n        }\n\n        buffer.push(val.value);\n        Promise.resolve().then(function () {\n          _this3.emit(LOADER_EVENTS.LOADER_DATALOADED, buffer);\n        });\n        return _this3._onReader(reader, taskno);\n      }).catch(function (error) {\n        _this3.loading = false;\n        _this3.emit(LOADER_EVENTS.LOADER_ERROR, _this3.TAG, error);\n        throw error;\n      });\n    }\n  }, {\n    key: 'getParams',\n    value: function getParams(opts) {\n      var options = Object.assign({}, opts);\n      var headers = new Headers();\n\n      var params = {\n        method: 'GET',\n        headers: headers,\n        mode: 'cors',\n        cache: 'default'\n\n        // add custmor headers\n        // 添加自定义头\n      };if (_typeof(this.configs.headers) === 'object') {\n        var configHeaders = this.configs.headers;\n        for (var key in configHeaders) {\n          if (configHeaders.hasOwnProperty(key)) {\n            headers.append(key, configHeaders[key]);\n          }\n        }\n      }\n\n      if (_typeof(options.headers) === 'object') {\n        var optHeaders = options.headers;\n        for (var _key in optHeaders) {\n          if (optHeaders.hasOwnProperty(_key)) {\n            headers.append(_key, optHeaders[_key]);\n          }\n        }\n      }\n\n      if (options.cors === false) {\n        params.mode = 'same-origin';\n      }\n\n      // withCredentials is disabled by default\n      // withCredentials 在默认情况下不被使用。\n      if (options.withCredentials) {\n        params.credentials = 'include';\n      }\n\n      // TODO: Add ranges;\n      return params;\n    }\n  }, {\n    key: 'cancel',\n    value: function cancel() {\n      if (this._reader) {\n        try {\n          this._reader.cancel();\n        } catch (e) {\n          // 防止failed: 200错误被打印到控制台上\n        }\n        this._reader = null;\n        this.loading = false;\n      }\n      this._canceled = true;\n    }\n  }, {\n    key: 'destroy',\n    value: function destroy() {\n      this._destroyed = true;\n      this.cancel();\n    }\n  }], [{\n    key: 'type',\n    get: function get() {\n      return 'loader';\n    }\n  }]);\n\n  return FetchLoader;\n}();\n\nexport default FetchLoader;","var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar DevLogger = function () {\n  function DevLogger() {\n    var _this = this;\n\n    _classCallCheck(this, DevLogger);\n\n    try {\n\n      var matched = /xgd=(\\d)/.exec(document.cookie);\n      this._status = !!matched;\n      this._level = matched && matched[1];\n    } catch (e) {\n      this._status = false;\n    }\n\n    [\"group\", \"groupEnd\", \"log\", \"warn\", \"error\"].forEach(function (funName) {\n      _this[funName] = function (arg1, arg2, arg3, arg4, arg5, arg6, arg7, arg8, arg9, arg10) {\n        var _console;\n\n        if (!_this._status) return;\n        var tagName = arg1;\n        var args = [arg2, arg3, arg4, arg5, arg6, arg7, arg8, arg9, arg10].filter(function (x) {\n          return x !== undefined;\n        });\n        (_console = console)[funName].apply(_console, [\"[\" + tagName + \"]:\"].concat(_toConsumableArray(args)));\n      };\n    });\n  }\n\n  _createClass(DevLogger, [{\n    key: \"enable\",\n    get: function get() {\n      return this._status;\n    }\n\n    // more detailed log output\n\n  }, {\n    key: \"long\",\n    get: function get() {\n      return this._level === '2';\n    }\n  }]);\n\n  return DevLogger;\n}();\n\nexport default new DevLogger();","import * as _common from './common';\nimport _Context from './context';\nimport _crypto from './crypto';\nimport _Eme from './eme';\nimport _Mse from './mse';\nimport _sniffer from './sniffer';\nimport _PageVisibility from './sniffer/page-visibility';\nimport _EVENTS from './events';\nimport _FetchLoader from './loader-fetch';\nimport _devLogger from './common/dev-logger';\n\nexport var common = _common;\nexport var Context = _Context;\nexport var Crypto = _crypto;\nexport var Eme = _Eme;\nexport var Mse = _Mse;\nexport var Sniffer = _sniffer;\nexport var PageVisibility = _PageVisibility;\nexport var EVENTS = _EVENTS;\nexport var FetchLoader = _FetchLoader;\nexport var logger = _devLogger;","\nexport default {\n  AUDIO: {\n    AUDIO_READY: 'audio_ready',\n    AUDIO_WAITING: 'audio_waiting'\n  },\n  VIDEO: {\n    VIDEO_DECODER_INIT: 'video_decode_init',\n    VIDEO_READY: 'video_ready',\n    VIDEO_WAITING: 'video_waiting'\n  },\n  TIMELINE: {\n    PLAY_EVENT: 'play_event',\n    SET_METADATA: 'set_metadata',\n    APPEND_CHUNKS: 'append_chunks',\n    START_RENDER: 'start_render',\n    DO_PAUSE: 'do_pause',\n    SYNC_DTS: 'sync_dts',\n    UPDATE_VOLUME: 'update_volume',\n    UPDATE_PRELOAD_TIME: 'update_preloadtime',\n    NO_AUDIO: 'no_audio',\n    DESTROY: 'destroy',\n    READY: 'ready'\n  },\n  VIDEO_EVENTS: {\n    WAITING: 'waiting',\n    CANPLAY: 'canplay',\n    PLAY: 'play',\n    PLAYING: 'playing',\n    PAUSE: 'pause',\n    LOADEDDATA: 'loadeddata',\n    TIMEUPDATE: 'timeupdate',\n    DURATION_CHANGE: 'durationchange',\n    VOLUME_CHANGE: 'volumechange',\n    ERROR: 'error',\n    // 自定义\n    DECODE_FPS: 'decodefps',\n    LOW_DECODE: 'lowdecode'\n  }\n};","var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar AudioTimeRange = function () {\n    function AudioTimeRange() {\n        _classCallCheck(this, AudioTimeRange);\n\n        this._buffers = [];\n        this._duration = 0;\n    }\n\n    _createClass(AudioTimeRange, [{\n        key: \"append\",\n        value: function append(audioBuffer, startDts) {\n            this._buffers.push({\n                start: this._duration,\n                end: this._duration + audioBuffer.duration,\n                startDts: startDts,\n                buffer: audioBuffer\n            });\n            this._duration += audioBuffer.duration;\n        }\n    }, {\n        key: \"shift\",\n        value: function shift() {\n            return this._buffers.shift();\n        }\n    }, {\n        key: \"duration\",\n        get: function get() {\n            return this._duration;\n        }\n    }, {\n        key: \"buffered\",\n        get: function get() {\n            var _this = this;\n\n            return {\n                length: 1,\n                start: function start() {\n                    return 0;\n                },\n                end: function end() {\n                    return _this._duration;\n                }\n            };\n        }\n    }]);\n\n    return AudioTimeRange;\n}();\n\nexport default AudioTimeRange;","\n/**\n * \n * ios  WebAudio 在系统静音下 播放没有声音\n * hack: 创建背景Audio元素,静音且循环播放，用户交互后取消静音。\n * 在 ios safari、飞书webview、chrome下WebAudio可正常\n */\n\nfunction initBgSilenceAudio() {\n    if (document.querySelector(\"#hackAudioPP\")) return;\n\n    var silenceMp3 = \"data:audio/mpeg;base64,//uQxAAAAAAAAAAAAAAAAAAAAAAAWGluZwAAAA8AAAACAAACcQCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA//////////////////////////////////////////////////////////////////8AAABhTEFNRTMuMTAwA8MAAAAAAAAAABQgJAUHQQAB9AAAAnGMHkkIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA//sQxAADgnABGiAAQBCqgCRMAAgEAH///////////////7+n/9FTuQsQH//////2NG0jWUGlio5gLQTOtIoeR2WX////X4s9Atb/JRVCbBUpeRUq//////////////////9RUi0f2jn/+xDECgPCjAEQAABN4AAANIAAAAQVTEFNRTMuMTAwVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVQ==\";\n    var tmp = document.createElement(\"div\");\n    tmp.innerHTML = \"<audio id='hackAudioPP'></audio>\";\n    document.body.appendChild(tmp);\n    var audio = tmp.children.item(0);\n    audio.controls = false;\n    audio.preload = \"auto\";\n    audio.src = silenceMp3;\n    // audio.src = 'http://10.1.9.110:8887/_media/1.mp3';\n    audio.muted = true;\n    audio.loop = true;\n    audio.load();\n    audio.play().catch(function (e) {});\n}\n\nfunction playSlienceAudio() {\n    var audio = document.querySelector(\"#hackAudioPP\");\n    if (!audio) {\n        initBgSilenceAudio();\n        return;\n    };\n    if (audio.muted) {\n        audio.muted = false;\n        audio.play().catch(function (e) {});\n    }\n}\n\nexport { initBgSilenceAudio, playSlienceAudio };","var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nimport EventEmitter from \"events\";\nimport { logger } from \"xgplayer-helper-utils\";\nimport Events from \"../events\";\nimport AudioTimeRange from \"./AudioTimeRange\";\nimport { initBgSilenceAudio, playSlienceAudio } from \"./audio-helper\";\n\nvar AudioContext = window.AudioContext || window.webkitAudioContext;\n\nvar MEDIA_ERR_DECODE = 3;\n\nvar ERROR_MSG = {\n  INIT_AUDIO_ERR: \"create new AudioContext error\",\n  DECODE_ERR: \"audio data decode error\"\n};\n\nvar AudioRender = function (_EventEmitter) {\n  _inherits(AudioRender, _EventEmitter);\n\n  function AudioRender(config, parent) {\n    _classCallCheck(this, AudioRender);\n\n    var _this = _possibleConstructorReturn(this, (AudioRender.__proto__ || Object.getPrototypeOf(AudioRender)).call(this));\n\n    _this.TAG = \"AudioRender\";\n    _this._config = config;\n    _this._parent = parent;\n    _this._timeRange = new AudioTimeRange();\n    _this._sampleQueue = [];\n    _this._ready = false;\n    _this._meta = null;\n    _this._noAudio = false;\n    _this._source = null;\n    _this._onSourceBufferEnded = _this._onSourceBufferEnded.bind(_this);\n    _this._initAudioCtx(config.volume || 0.6);\n    _this._bindEvents();\n    return _this;\n  }\n\n  _createClass(AudioRender, [{\n    key: \"resume\",\n    value: function resume() {\n      return this._audioCtx.resume();\n    }\n  }, {\n    key: \"_assembleErr\",\n    value: function _assembleErr(msg) {\n      var err = new Error(msg);\n      err.code = MEDIA_ERR_DECODE;\n      return err;\n    }\n  }, {\n    key: \"_initAudioCtx\",\n    value: function _initAudioCtx(volume) {\n      var _this2 = this;\n\n      this._audioCtx = new AudioContext();\n      if (!this._audioCtx) {\n        logger.warn(this.TAG, \"create webaudio error!\");\n        //AudioRender在Timeline constructor中实例化,timeline error handler还未绑定,异步触发\n        setTimeout(function () {\n          _this2._emitTimelineEvents(Events.TIMELINE.PLAY_EVENT, \"error\", _this2._assembleErr(ERROR_MSG.INIT_AUDIO_ERR));\n        });\n        return;\n      }\n      this._gainNode = this._audioCtx.createGain();\n      this._gainNode.gain.value = volume;\n      this._gainNode.connect(this._audioCtx.destination);\n      this._audioCtx.suspend();\n    }\n  }, {\n    key: \"_emitTimelineEvents\",\n    value: function _emitTimelineEvents(e, v, d) {\n      this._parent.emit(e, v, d);\n    }\n  }, {\n    key: \"_bindEvents\",\n    value: function _bindEvents() {\n      var _this3 = this;\n\n      this._audioCtx.addEventListener(\"statechange\", function () {\n        if (!_this3._audioCtx) return;\n        if (_this3._audioCtx.state === \"running\") {\n          _this3._emitTimelineEvents(Events.TIMELINE.PLAY_EVENT, Events.VIDEO_EVENTS.PLAY);\n          _this3._emitTimelineEvents(Events.TIMELINE.PLAY_EVENT, Events.VIDEO_EVENTS.PLAYING);\n          return;\n        }\n      });\n\n      this._parent.on(Events.TIMELINE.SET_METADATA, function (type, meta) {\n        if (type == \"video\") return;\n        if (_this3._noAudio) return;\n        logger.warn(_this3.TAG, \"audio set metadata\");\n        _this3._meta = meta;\n      });\n\n      this._parent.on(Events.TIMELINE.APPEND_CHUNKS, this._appendChunk.bind(this));\n\n      this._parent.on(Events.TIMELINE.START_RENDER, this._startRender.bind(this));\n\n      this._parent.on(Events.TIMELINE.DO_PAUSE, function () {\n        _this3._audioCtx.suspend();\n      });\n\n      this._parent.on(Events.TIMELINE.UPDATE_VOLUME, function (v) {\n        if (!_this3._gainNode) return;\n        _this3._gainNode.gain.value = v;\n        _this3._emitTimelineEvents(Events.TIMELINE.PLAY_EVENT, Events.VIDEO_EVENTS.VOLUME_CHANGE);\n      });\n\n      this._parent.on(Events.TIMELINE.UPDATE_PRELOAD_TIME, function (v) {\n        _this3._config.preloadTime = v;\n      });\n\n      this._parent.on(Events.TIMELINE.DESTROY, function () {\n        _this3._destroy();\n      });\n\n      this._parent.on(Events.TIMELINE.NO_AUDIO, function () {\n        _this3._noAudio = true;\n      });\n    }\n\n    // receive new compressed samples\n\n  }, {\n    key: \"_appendChunk\",\n    value: function _appendChunk(_, audioTrack) {\n      if (this._noAudio) return;\n\n      var samples = audioTrack.samples,\n          meta = audioTrack.meta;\n\n\n      if (meta && samples.length) {\n        this._sampleQueue = this._sampleQueue.concat(samples);\n        audioTrack.samples = [];\n        this._assembleAAC();\n      }\n    }\n  }, {\n    key: \"_checkMetaChange\",\n    value: function _checkMetaChange(sampleQueue, len) {\n      var index = -1;\n      for (var i = 0; i < len; i++) {\n        var op = sampleQueue[i].options;\n        if (op && op.meta) {\n          index = i;\n          logger.warn(this.TAG, \"detect metadata! index=\" + i + \" ,dts=\" + sampleQueue[i].dts);\n          break;\n        }\n      }\n      return index;\n    }\n  }, {\n    key: \"_assembleAAC\",\n    value: function _assembleAAC() {\n      var _this4 = this;\n\n      var len = this._sampleQueue.length;\n      var samp0 = this._sampleQueue[0];\n      var sampLast = this._sampleQueue[len - 1];\n      var metaChangeIndex = this._checkMetaChange(this._sampleQueue, len);\n\n      if (metaChangeIndex == -1) {\n        if ((sampLast.dts - samp0.dts) / this.timescale < this.preloadTime) return;\n      }\n\n      var toDecode = void 0;\n\n      if (metaChangeIndex == -1) {\n        toDecode = this._sampleQueue;\n        this._sampleQueue = [];\n      } else {\n        // 采样队列中间换流,前后部分分开\n        toDecode = this._sampleQueue.splice(0, metaChangeIndex || len);\n      }\n\n      if (!toDecode.length) return;\n\n      var adtss = toDecode.map(function (sample, index) {\n        if (index === metaChangeIndex) {\n          _this4._meta = sample.options.meta;\n        }\n        return AudioRender.getAACData(_this4._meta, sample);\n      });\n\n      var chunkBuffer = AudioRender.combileData(adtss);\n\n      this._audioCtx.decodeAudioData(chunkBuffer.buffer, function (uncompress) {\n        _this4._timeRange.append(uncompress, metaChangeIndex == -1 ? samp0.dts : 0);\n        if (!_this4._ready) {\n          // init background Audio ele\n          initBgSilenceAudio();\n          _this4._ready = true;\n          _this4.emit(Events.AUDIO.AUDIO_READY);\n        }\n        _this4._emitTimelineEvents(Events.TIMELINE.PLAY_EVENT, Events.VIDEO_EVENTS.DURATION_CHANGE);\n      }, function () {\n        _this4._emitTimelineEvents(Events.TIMELINE.PLAY_EVENT, \"error\", _this4._assembleErr(ERROR_MSG.DECODE_ERR));\n      });\n    }\n  }, {\n    key: \"_onSourceBufferEnded\",\n    value: function _onSourceBufferEnded() {\n      if (logger.long) {\n        logger.log(this.TAG, \"source play end! currentTime:\" + this.currentTime + \" , duration:\" + this.duration);\n      }\n      this._startRender();\n    }\n  }, {\n    key: \"_startRender\",\n    value: function _startRender() {\n      if (this._noAudio) return;\n\n      playSlienceAudio();\n      this._audioCtx.resume();\n      var buffer = this._timeRange.shift();\n      if (!buffer) {\n        this._ready = false;\n        this._audioCtx.suspend();\n        this.emit(Events.AUDIO.AUDIO_WAITING);\n        return;\n      }\n      if (buffer.startDts) {\n        this._emitTimelineEvents(Events.TIMELINE.SYNC_DTS, buffer.startDts);\n      }\n      var _source = this._audioCtx.createBufferSource();\n      // 保存引用,移动浏览器下,对source的回收机制有差异，不保存引用会提前回收,导致ended事件不触发\n      this._source = _source;\n      _source.buffer = buffer.buffer;\n      _source.loop = false;\n      _source.addEventListener(\"ended\", this._onSourceBufferEnded);\n      _source.connect(this._gainNode);\n      _source.start(0);\n    }\n  }, {\n    key: \"_destroy\",\n    value: function _destroy() {\n      logger.log(this.TAG, \"destroy audio...\");\n      this._audioCtx.close();\n      this._audioCtx = null;\n      this._sampleQueue = null;\n      this._timeRange = null;\n    }\n  }, {\n    key: \"currentTime\",\n    get: function get() {\n      if (!this._audioCtx) return 0;\n      return this._audioCtx.currentTime;\n    }\n  }, {\n    key: \"duration\",\n    get: function get() {\n      return this._timeRange.duration;\n    }\n  }, {\n    key: \"preloadTime\",\n    get: function get() {\n      return this._config.preloadTime === Infinity ? 3 : this._config.preloadTime;\n    }\n  }, {\n    key: \"timescale\",\n    get: function get() {\n      if (!this._meta) return 1000;\n      return this._meta.timescale || 1000;\n    }\n  }, {\n    key: \"buffered\",\n    get: function get() {\n      return this._timeRange.buffered;\n    }\n  }, {\n    key: \"ctxState\",\n    get: function get() {\n      return this._audioCtx.state;\n    }\n  }], [{\n    key: \"getAACData\",\n    value: function getAACData(meta, sample) {\n      var buffer = new Uint8Array(sample.data.byteLength + 7);\n      var adts = AudioRender.getAdts(meta, sample.data);\n      buffer.set(adts);\n      buffer.set(sample.data, 7);\n      return buffer;\n    }\n  }, {\n    key: \"combileData\",\n    value: function combileData(samples) {\n      // get length\n      var length = 0;\n      for (var i = 0, k = samples.length; i < k; i++) {\n        length += samples[i].byteLength;\n      }\n\n      var ret = new Uint8Array(length);\n      var offset = 0;\n      // combile data;\n      for (var _i = 0, _k = samples.length; _i < _k; _i++) {\n        ret.set(samples[_i], offset);\n        offset += samples[_i].byteLength;\n      }\n      return ret;\n    }\n  }, {\n    key: \"getAdts\",\n    value: function getAdts(meta, data) {\n      var adts = new Uint8Array(7);\n\n      // 设置同步位 0xfff 12bit\n      adts[0] = 0xff;\n      adts[1] = 0xf0;\n\n      // Object data (没什么人用MPEG-2了，HLS和FLV也全是MPEG-4，这里直接0)  1bit\n      // Level always 00 2bit\n      // CRC always 1 1bit\n      adts[1] = adts[1] | 0x01;\n\n      // profile 2bit\n      adts[2] = 0xc0 & meta.originObjectType - 1 << 6;\n\n      // sampleFrequencyIndex\n      adts[2] = adts[2] | 0x3c & meta.sampleRateIndex << 2;\n\n      // private bit 0 1bit\n      // chanel configuration 3bit\n      adts[2] = adts[2] | 0x01 & meta.channelCount >> 2;\n      adts[3] = 0xc0 & meta.channelCount << 6;\n\n      // original_copy: 0 1bit\n      // home: 0 1bit\n\n      // adts_variable_header()\n      // copyrighted_id_bit 0 1bit\n      // copyrighted_id_start 0 1bit\n\n      // aac_frame_length 13bit;\n      var aacframelength = data.byteLength + 7;\n\n      adts[3] = adts[3] | 0x03 & aacframelength >> 11;\n      adts[4] = 0xff & aacframelength >> 3;\n      adts[5] = 0xe0 & aacframelength << 5;\n\n      // adts_buffer_fullness 0x7ff 11bit\n      adts[5] = adts[5] | 0x1f;\n      adts[6] = 0xfc;\n\n      // number_of_raw_data_blocks_in_frame 0 2bit;\n      return adts;\n    }\n  }]);\n\n  return AudioRender;\n}(EventEmitter);\n\nexport default AudioRender;","var TARGET = typeof Symbol === 'undefined' ? '__target' : Symbol(),\n    SCRIPT_TYPE = 'application/javascript',\n    BlobBuilder = window.BlobBuilder || window.WebKitBlobBuilder || window.MozBlobBuilder || window.MSBlobBuilder,\n    URL = window.URL || window.webkitURL,\n    Worker = window.Worker;\n\n/**\n * Returns a wrapper around Web Worker code that is constructible.\n *\n * @function shimWorker\n *\n * @param { String }    filename    The name of the file\n * @param { Function }  fn          Function wrapping the code of the worker\n */\nexport default function shimWorker (filename, fn) {\n    return function ShimWorker (forceFallback) {\n        var o = this;\n\n        if (!fn) {\n            return new Worker(filename);\n        }\n        else if (Worker && !forceFallback) {\n            // Convert the function's inner code to a string to construct the worker\n            var source = `${ fn }`.replace(/^function.+?{/, '').slice(0, -1),\n                objURL = createSourceObject(source);\n\n            this[TARGET] = new Worker(objURL);\n            URL.revokeObjectURL(objURL);\n            return this[TARGET];\n        }\n        else {\n            var selfShim = {\n                    postMessage: m => {\n                        if (o.onmessage) {\n                            setTimeout(() => o.onmessage({ data: m, target: selfShim }));\n                        }\n                    }\n                };\n\n            fn.call(selfShim);\n            this.postMessage = m => {\n                setTimeout(() => selfShim.onmessage({ data: m, target: o }));\n            };\n            this.isThisThread = true;\n        }\n    };\n};\n\n// Test Worker capabilities\nif (Worker) {\n    var testWorker,\n        objURL = createSourceObject('self.onmessage = function () {}'),\n        testArray = new Uint8Array(1);\n\n    try {\n        // No workers via blobs in Edge 12 and IE 11 and lower :(\n        if (/(?:Trident|Edge)\\/(?:[567]|12)/i.test(navigator.userAgent)) {\n            throw new Error('Not available');\n        }\n        testWorker = new Worker(objURL);\n\n        // Native browser on some Samsung devices throws for transferables, let's detect it\n        testWorker.postMessage(testArray, [testArray.buffer]);\n    }\n    catch (e) {\n        Worker = null;\n    }\n    finally {\n        URL.revokeObjectURL(objURL);\n        if (testWorker) {\n            testWorker.terminate();\n        }\n    }\n}\n\nfunction createSourceObject(str) {\n    try {\n        return URL.createObjectURL(new Blob([str], { type: SCRIPT_TYPE }));\n    }\n    catch (e) {\n        var blob = new BlobBuilder();\n        blob.append(str);\n        return URL.createObjectURL(blob.getBlob(type));\n    }\n}\n","import shimWorker from 'rollup-plugin-bundle-worker';\nexport default new shimWorker(\"../decoder/hevc-worker.js\", function (window, document) {\nvar self = this;\n// 目前仅支持yuv420\n\nvar H265_DECODER_URL = \"https://sf1-vcloudcdn.pstatp.com/obj/media-fe/decoder/h265/decoder_1592202936266.js\";\n\nfunction shimImportScripts(src) {\n  return fetch(src).then(function (res) {\n    return res.text();\n  }).then(function (text) {\n    eval(text);\n    self.Module = Module;\n    self.addOnPostRun = addOnPostRun;\n  });\n}\n\nvar MAX_STREAM_BUFFER_LENGTH = 1024 * 1024;\nvar Decoder = function Decoder(self) {\n  this.inited = false;\n  this.infoId = 0;\n  this.self = self;\n  this.meta = this.self.meta;\n  this.ts = 0;\n  this.infolist = [];\n  self.par_broadwayOnBroadwayInited = this.broadwayOnBroadwayInited.bind(this);\n  self.par_broadwayOnPictureDecoded = this.broadwayOnPictureDecoded.bind(this);\n};\n\nDecoder.prototype.dot = function () {\n  this.ts = performance.now();\n};\n\nDecoder.prototype.elapse = function () {\n  return performance.now() - this.ts;\n};\n\nDecoder.prototype.toU8Array = function (ptr, length) {\n  return Module.HEAPU8.subarray(ptr, ptr + length);\n};\n\nDecoder.prototype.init = function () {\n  Module._broadwayInit();\n  this.offset = Module._broadwayCreateStream(MAX_STREAM_BUFFER_LENGTH);\n};\n\nDecoder.prototype.broadwayOnPictureDecoded = function (offset, width, height, infoid, sliceType) {\n  // this.self.postMessage({\n  //   msg: 'LOG',\n  //   log: `[decoded] info ${infoid}`\n  // })\n  if (this.infolist[0] && this.infolist[0].isGop && sliceType !== 2) {\n    this.self.postMessage({\n      msg: \"LOG\",\n      log: \"drop sample\"\n    });\n    return;\n  }\n\n  var info = this.infolist.shift();\n  var yRowcount = height;\n  var uvRowcount = height / 2;\n  var yLinesize = width;\n  var uvLinesize = width / 2;\n  if (this.meta && (this.meta.chromaFormat === 444 || this.meta.chromaFormat === 422)) {\n    uvRowcount = height;\n  }\n  var data = this.toU8Array(offset, yLinesize * yRowcount + 2 * (uvLinesize * uvRowcount));\n  // this.infolist[infoid] = null;\n  var datetemp = new Uint8Array(data.length);\n  datetemp.set(data);\n  var buffer = datetemp.buffer;\n  if (info) {\n    var now = Date.now();\n    this.self.postMessage({\n      msg: \"LOG\",\n      log: \"[decoded] sample \" + info.dts + \", isGop: \" + info.isGop + \" gopId: \" + info.gopId + \" startAt \" + info.decodeTime + \" endAt: \" + now + \" cost \" + (now - info.decodeTime)\n    });\n  }\n\n  this.self.postMessage({\n    msg: \"DECODED\",\n    width: width,\n    height: height,\n    yLinesize: yLinesize,\n    uvLinesize: uvLinesize,\n    info: info,\n    buffer: buffer,\n    elapse: this.elapse()\n  }, [buffer]);\n};\n\nDecoder.prototype.broadwayOnBroadwayInited = function () {\n  if (this.inited) {\n    return;\n  }\n  this.inited = true;\n  this.self.postMessage({\n    msg: \"LOG\",\n    log: \"decoder inited\"\n  });\n  this.self.postMessage({ msg: \"DECODER_READY\" });\n};\n\nDecoder.prototype.decode = function (data, info) {\n  var time = parseInt(new Date().getTime());\n  var infoid = time - Math.floor(time / 10e8) * 10e8;\n  this.infolist.push(info);\n  if (info && info.isGop) {\n    this.infolist = [info];\n    Module._broadwayFlushStream(infoid);\n  }\n  Module.HEAPU8.set(data, this.offset);\n  // if (info) {\n  //   self.postMessage({\n  //     msg: \"LOG\",\n  //     log: `[decode] infoid ${infoid} sample ${info.dts},isGop: ${info.isGop} gopId: ${info.gopId} startAt${info.decodeTime}`,\n  //   });\n  // }\n  Module._broadwayPlayStream(data.length, this.infoId);\n};\n\nDecoder.prototype.destroy = function () {\n  Module._broadwayExit();\n};\n\nDecoder.prototype.updateMeta = function (meta) {\n  this.meta = meta;\n};\n\nvar decoder;\n\nfunction onPostRun() {\n  self.postMessage({\n    msg: \"LOG\",\n    log: \"do post run\"\n  });\n  decoder = new Decoder(this);\n  decoder.init();\n}\n\nfunction init(meta) {\n  if (!decoder) {\n    var task = void 0;\n\n    if (!self.importScripts) {\n      task = shimImportScripts(H265_DECODER_URL);\n    } else {\n      task = new Promise(function (resolve, reject) {\n        if (!self.console) {\n          self.console = {\n            log: function log() {},\n            warn: function warn() {},\n            info: function info() {},\n            error: function error() {}\n          };\n        }\n        try {\n          self.importScripts(H265_DECODER_URL);\n          resolve();\n        } catch (e) {\n          reject(e);\n        }\n      });\n    }\n\n    task.then(function () {\n      addOnPostRun(onPostRun.bind(self));\n      setTimeout(function () {\n        if (!decoder || !decoder.inited) {\n          console.log(\"auto instance Decoder!\");\n          onPostRun.call(self);\n        }\n      }, 5000);\n    }).catch(function (e) {\n      self.postMessage({\n        msg: \"INIT_FAILED\",\n        log: e.message\n      });\n    });\n  }\n}\n\nself.onmessage = function (e) {\n  var data = e.data;\n  if (!data.msg) {\n    self.postMessage({\n      msg: \"ERROR:invalid message\"\n    });\n  } else {\n    switch (data.msg) {\n      case \"init\":\n        self.meta = data.meta;\n        self.postMessage({\n          msg: \"LOG\",\n          log: \"worker inited\"\n        });\n        init();\n        break;\n      case \"updatemeta\":\n        self.meta = data.meta;\n        decoder.updateMeta(data.meta);\n        break;\n      case \"decode\":\n        decoder.dot();\n        decoder.decode(data.data, data.info);\n        break;\n      case \"destory\":\n        decoder.destroy();\n        break;\n      default:\n        break;\n    }\n  }\n};\n\n});","import shimWorker from 'rollup-plugin-bundle-worker';\nexport default new shimWorker(\"../decoder/worker.js\", function (window, document) {\nvar self = this;\nvar H264_DECODER_URL = \"https://sf1-vcloudcdn.pstatp.com/obj/ttfe/media/decoder/h264/decoder_1583333072684.js\";\n\nfunction shimImportScripts(src) {\n  return fetch(src).then(function (res) {\n    return res.text();\n  }).then(function (text) {\n    eval(text);\n    self.Module = Module;\n    self.addOnPostRun = addOnPostRun;\n  });\n}\n\nvar MAX_STREAM_BUFFER_LENGTH = 1024 * 1024;\n\nvar Decoder = function Decoder(self) {\n  this.inited = false;\n  this.self = self;\n  this.meta = this.self.meta;\n  this.infolist = {};\n  self.par_broadwayOnBroadwayInited = this.broadwayOnBroadwayInited.bind(this);\n  self.par_broadwayOnPictureDecoded = this.broadwayOnPictureDecoded.bind(this);\n};\n\nDecoder.prototype.toU8Array = function (ptr, length) {\n  return Module.HEAPU8.subarray(ptr, ptr + length);\n};\n\nDecoder.prototype.init = function () {\n  Module._broadwayInit();\n  this.broadwayOnBroadwayInited();\n  this.streamBuffer = this.toU8Array(Module._broadwayCreateStream(MAX_STREAM_BUFFER_LENGTH), MAX_STREAM_BUFFER_LENGTH);\n};\n\nDecoder.prototype.broadwayOnPictureDecoded = function (offset, width, height, yLinesize, uvLinesize, infoid) {\n  var info = Object.assign({}, this.infolist[infoid]);\n  var yRowcount = height;\n  var uvRowcount = height / 2;\n  if (this.meta && (this.meta.chromaFormat === 444 || this.meta.chromaFormat === 422)) {\n    uvRowcount = height;\n  }\n  var data = this.toU8Array(offset, yLinesize * yRowcount + 2 * (uvLinesize * uvRowcount));\n  this.infolist[infoid] = null;\n  var datetemp = new Uint8Array(data.length);\n  datetemp.set(data);\n  var buffer = datetemp.buffer;\n\n  // if (info) {\n  //   this.self.postMessage({\n  //     msg: \"LOG\",\n  //     log: `sample ${info.dts} decoded startAt${info.decodeTime} cost: ${\n  //       Date.now() - info.decodeTime\n  //     }`,\n  //   });\n  // }\n\n  this.self.postMessage({\n    msg: \"DECODED\",\n    width: width,\n    height: height,\n    yLinesize: yLinesize,\n    uvLinesize: uvLinesize,\n    info: info,\n    buffer: buffer\n  }, [buffer]);\n};\n\nDecoder.prototype.broadwayOnBroadwayInited = function () {\n  this.inited = true;\n  this.self.postMessage({\n    msg: \"LOG\",\n    log: \"decoder inited\"\n  });\n  this.self.postMessage({ msg: \"DECODER_READY\" });\n};\n\nDecoder.prototype.decode = function (data, info) {\n  var time = parseInt(new Date().getTime());\n  var infoid = time - Math.floor(time / 10e8) * 10e8;\n  this.infolist[infoid] = info;\n  this.streamBuffer.set(data);\n  Module._broadwayPlayStream(data.length, infoid);\n};\n\nDecoder.prototype.destroy = function () {\n  Module._broadwayExit();\n};\n\nDecoder.prototype.updateMeta = function (meta) {\n  this.meta = meta;\n};\n\nvar decoder;\n\nfunction onPostRun() {\n  self.postMessage({\n    msg: \"LOG\",\n    log: \"do post run\"\n  });\n\n  decoder = new Decoder(this);\n  decoder.init();\n}\n\nfunction init(meta) {\n  if (!decoder) {\n    var task = void 0;\n    if (!self.importScripts) {\n      task = shimImportScripts(H264_DECODER_URL);\n    } else {\n      task = new Promise(function (resolve, reject) {\n        if (!self.console) {\n          self.console = {\n            log: function log() {},\n            warn: function warn() {},\n            info: function info() {},\n            error: function error() {}\n          };\n        }\n        try {\n          self.importScripts(H264_DECODER_URL);\n          resolve();\n        } catch (e) {\n          reject(e);\n        }\n      });\n    }\n\n    task.then(function () {\n      addOnPostRun(onPostRun.bind(self));\n\n      setTimeout(function () {\n        if (!decoder || !decoder.inited) {\n          console.log(\"auto instance Decoder!\");\n          onPostRun.call(self);\n        }\n      }, 5000);\n    }).catch(function (e) {\n      self.postMessage({\n        msg: \"INIT_FAILED\",\n        log: e.message\n      });\n    });\n  }\n}\n\nself.onmessage = function (e) {\n  var data = e.data;\n  if (!data.msg) {\n    self.postMessage({\n      msg: \"ERROR:invalid message\"\n    });\n  } else {\n    switch (data.msg) {\n      case \"init\":\n        self.meta = data.meta;\n        self.postMessage({\n          msg: \"LOG\",\n          log: \"worker inited\"\n        });\n        init();\n        break;\n      case \"updatemeta\":\n        self.meta = data.meta;\n        decoder.updateMeta(data.meta);\n        break;\n      case \"decode\":\n        decoder.decode(data.data, data.info);\n        break;\n      case \"destory\":\n        decoder.destroy();\n        break;\n      default:\n        break;\n    }\n  }\n};\n\n});","var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nimport { logger } from \"xgplayer-helper-utils\";\n\nvar VideoTimeRange = function () {\n  function VideoTimeRange() {\n    _classCallCheck(this, VideoTimeRange);\n\n    this.TAG = \"VideoTimeRange\";\n    this._baseDts = -1;\n    this._lastDuration = 0;\n    this._duration = 0;\n    this._compressFrame = [];\n  }\n\n  _createClass(VideoTimeRange, [{\n    key: \"_caclBaseDts\",\n    value: function _caclBaseDts(frame) {\n      if (this._baseDts !== -1) return;\n      if (!frame) return;\n      this._baseDts = frame.dts;\n      logger.log(this.TAG, \"set baseDts: \", this._baseDts);\n    }\n  }, {\n    key: \"_updateDuration\",\n    value: function _updateDuration(frames) {\n      var len = frames.length;\n      var last = frames[len - 1];\n\n      for (var i = 0; i < len; i++) {\n        var f = frames[i];\n        if (f && f.options && f.options.meta) {\n          var pre = frames[i - 1] || this._compressFrame[this._compressFrame.length - 1];\n          if (pre) {\n            this._lastDuration += (pre.dts - this._baseDts) / 1000;\n          } else {\n            this._lastDuration = this._duration;\n          }\n          logger.log(this.TAG, \"updateBaseDts,record lastDuration:\", this._lastDuration);\n          this._baseDts = f.dts;\n          break;\n        }\n      }\n\n      if (last) {\n        this._duration = (last.dts - this._baseDts) / 1000 + this._lastDuration;\n      }\n    }\n  }, {\n    key: \"append\",\n    value: function append(frames, upDuration) {\n      this._caclBaseDts(frames[0]);\n\n      if (upDuration) {\n        this._updateDuration(frames);\n      }\n      this._compressFrame = this._compressFrame.concat(frames);\n    }\n  }, {\n    key: \"deletePassed\",\n    value: function deletePassed(dts) {\n      var len = this._compressFrame.length;\n      this._compressFrame = this._compressFrame.filter(function (x) {\n        return x.dts > dts;\n      });\n      return len - this._compressFrame.length;\n    }\n  }, {\n    key: \"shift\",\n    value: function shift() {\n      var f = this._compressFrame.shift();\n      return f;\n    }\n  }, {\n    key: \"baseDts\",\n    get: function get() {\n      return this._baseDts;\n    }\n  }, {\n    key: \"duartion\",\n    get: function get() {\n      return this._duration;\n    }\n  }, {\n    key: \"buffered\",\n    get: function get() {\n      var _this = this;\n\n      return {\n        length: 1,\n        start: function start() {\n          return 0;\n        },\n        end: function end() {\n          return _this._duration;\n        }\n      };\n    }\n  }, {\n    key: \"lastDuration\",\n    get: function get() {\n      return this._lastDuration;\n    }\n  }]);\n\n  return VideoTimeRange;\n}();\n\nexport default VideoTimeRange;","var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nimport { logger } from \"xgplayer-helper-utils\";\n\nvar YUVCanvas = function () {\n  function YUVCanvas(configs) {\n    _classCallCheck(this, YUVCanvas);\n\n    this.configs = Object.assign({}, configs);\n    this.canvas = this.configs.canvas;\n    this.meta = Object.assign({}, this.configs.meta);\n    this._initMeta();\n    // this.canvas.style.width = configs.style.width;\n    // this.canvas.style.height = configs.style.height;\n    this._initContextGL();\n    if (this.contextGL) {\n      this._initProgram();\n      this._initBuffers();\n      this._initTextures();\n    };\n  }\n\n  _createClass(YUVCanvas, [{\n    key: '_initMeta',\n    value: function _initMeta() {\n      this.chroma = this.meta.chromaFormat;\n      this.height = this.meta.presentHeight;\n      this.width = this.meta.presentWidth;\n      this.canvas.width = this.meta.presentWidth;\n      this.canvas.height = this.meta.presentHeight;\n    }\n  }, {\n    key: '_initContextGL',\n    value: function _initContextGL() {\n      var canvas = this.canvas;\n      var gl = null;\n\n      var validContextNames = ['webgl', 'webgl', 'experimental-webgl', 'moz-webgl', 'webkit-3d'];\n      var nameIndex = 0;\n\n      while (!gl && nameIndex < validContextNames.length) {\n        var contextName = validContextNames[nameIndex];\n\n        try {\n          if (this.contextOptions) {\n            gl = canvas.getContext(contextName, this.contextOptions);\n          } else {\n            gl = canvas.getContext(contextName);\n          };\n          logger.log('YUVCanvas', 'use=', contextName);\n          break;\n        } catch (e) {\n          gl = null;\n        }\n\n        if (!gl || typeof gl.getParameter !== 'function') {\n          gl = null;\n        }\n\n        ++nameIndex;\n      };\n\n      this.contextGL = gl;\n    }\n  }, {\n    key: '_initProgram',\n    value: function _initProgram() {\n      var gl = this.contextGL;\n\n      // vertex shader is the same for all types\n      var vertexShaderScript;\n      var fragmentShaderScript;\n      vertexShaderScript = ['attribute vec4 vertexPos;', 'attribute vec4 texturePos;', 'attribute vec4 uTexturePos;', 'attribute vec4 vTexturePos;', 'varying vec2 textureCoord;', 'varying vec2 uTextureCoord;', 'varying vec2 vTextureCoord;', 'void main()', '{', '  gl_Position = vertexPos;', '  textureCoord = texturePos.xy;', '  uTextureCoord = uTexturePos.xy;', '  vTextureCoord = vTexturePos.xy;', '}'].join('\\n');\n\n      fragmentShaderScript = ['precision highp float;', 'varying highp vec2 textureCoord;', 'varying highp vec2 uTextureCoord;', 'varying highp vec2 vTextureCoord;', 'uniform sampler2D ySampler;', 'uniform sampler2D uSampler;', 'uniform sampler2D vSampler;', 'uniform mat4 YUV2RGB;', 'void main(void) {', '  highp float y = texture2D(ySampler,  textureCoord).r;', '  highp float u = texture2D(uSampler,  uTextureCoord).r;', '  highp float v = texture2D(vSampler,  vTextureCoord).r;', '  gl_FragColor = vec4(y, u, v, 1) * YUV2RGB;', '}'].join('\\n');\n\n      var YUV2RGB = [1.16438, 0.00000, 1.59603, -0.87079, 1.16438, -0.39176, -0.81297, 0.52959, 1.16438, 2.01723, 0.00000, -1.08139, 0, 0, 0, 1];\n      var vertexShader = gl.createShader(gl.VERTEX_SHADER);\n      gl.shaderSource(vertexShader, vertexShaderScript);\n      gl.compileShader(vertexShader);\n      if (!gl.getShaderParameter(vertexShader, gl.COMPILE_STATUS)) {\n        console.log('Vertex shader failed to compile: ' + gl.getShaderInfoLog(vertexShader));\n      }\n\n      var fragmentShader = gl.createShader(gl.FRAGMENT_SHADER);\n      gl.shaderSource(fragmentShader, fragmentShaderScript);\n      gl.compileShader(fragmentShader);\n      if (!gl.getShaderParameter(fragmentShader, gl.COMPILE_STATUS)) {\n        console.log('Fragment shader failed to compile: ' + gl.getShaderInfoLog(fragmentShader));\n      }\n\n      var program = gl.createProgram();\n      gl.attachShader(program, vertexShader);\n      gl.attachShader(program, fragmentShader);\n      gl.linkProgram(program);\n      if (!gl.getProgramParameter(program, gl.LINK_STATUS)) {\n        console.log('Program failed to compile: ' + gl.getProgramInfoLog(program));\n      }\n\n      gl.useProgram(program);\n\n      var YUV2RGBRef = gl.getUniformLocation(program, 'YUV2RGB');\n      gl.uniformMatrix4fv(YUV2RGBRef, false, YUV2RGB);\n\n      this.shaderProgram = program;\n    }\n  }, {\n    key: '_initBuffers',\n    value: function _initBuffers() {\n      var gl = this.contextGL;\n      var program = this.shaderProgram;\n\n      var vertexPosBuffer = gl.createBuffer();\n      gl.bindBuffer(gl.ARRAY_BUFFER, vertexPosBuffer);\n      gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([1, 1, -1, 1, 1, -1, -1, -1]), gl.STATIC_DRAW);\n\n      var vertexPosRef = gl.getAttribLocation(program, 'vertexPos');\n      gl.enableVertexAttribArray(vertexPosRef);\n      gl.vertexAttribPointer(vertexPosRef, 2, gl.FLOAT, false, 0, 0);\n\n      var texturePosBuffer = gl.createBuffer();\n      gl.bindBuffer(gl.ARRAY_BUFFER, texturePosBuffer);\n      gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([1, 0, 0, 0, 1, 1, 0, 1]), gl.STATIC_DRAW);\n\n      var texturePosRef = gl.getAttribLocation(program, 'texturePos');\n      gl.enableVertexAttribArray(texturePosRef);\n      gl.vertexAttribPointer(texturePosRef, 2, gl.FLOAT, false, 0, 0);\n\n      this.texturePosBuffer = texturePosBuffer;\n\n      var uTexturePosBuffer = gl.createBuffer();\n      gl.bindBuffer(gl.ARRAY_BUFFER, uTexturePosBuffer);\n      gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([1, 0, 0, 0, 1, 1, 0, 1]), gl.STATIC_DRAW);\n\n      var uTexturePosRef = gl.getAttribLocation(program, 'uTexturePos');\n      gl.enableVertexAttribArray(uTexturePosRef);\n      gl.vertexAttribPointer(uTexturePosRef, 2, gl.FLOAT, false, 0, 0);\n\n      this.uTexturePosBuffer = uTexturePosBuffer;\n\n      var vTexturePosBuffer = gl.createBuffer();\n      gl.bindBuffer(gl.ARRAY_BUFFER, vTexturePosBuffer);\n      gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([1, 0, 0, 0, 1, 1, 0, 1]), gl.STATIC_DRAW);\n\n      var vTexturePosRef = gl.getAttribLocation(program, 'vTexturePos');\n      gl.enableVertexAttribArray(vTexturePosRef);\n      gl.vertexAttribPointer(vTexturePosRef, 2, gl.FLOAT, false, 0, 0);\n\n      this.vTexturePosBuffer = vTexturePosBuffer;\n    }\n  }, {\n    key: '_initTextures',\n    value: function _initTextures() {\n      var gl = this.contextGL;\n      var program = this.shaderProgram;\n      var yTextureRef = this._initTexture();\n      var ySamplerRef = gl.getUniformLocation(program, 'ySampler');\n      gl.uniform1i(ySamplerRef, 0);\n      this.yTextureRef = yTextureRef;\n\n      var uTextureRef = this._initTexture();\n      var uSamplerRef = gl.getUniformLocation(program, 'uSampler');\n      gl.uniform1i(uSamplerRef, 1);\n      this.uTextureRef = uTextureRef;\n\n      var vTextureRef = this._initTexture();\n      var vSamplerRef = gl.getUniformLocation(program, 'vSampler');\n      gl.uniform1i(vSamplerRef, 2);\n      this.vTextureRef = vTextureRef;\n    }\n  }, {\n    key: '_initTexture',\n    value: function _initTexture() {\n      var gl = this.contextGL;\n\n      var textureRef = gl.createTexture();\n      gl.bindTexture(gl.TEXTURE_2D, textureRef);\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n      gl.bindTexture(gl.TEXTURE_2D, null);\n\n      return textureRef;\n    }\n  }, {\n    key: '_drawPictureGL',\n    value: function _drawPictureGL(data, width, height, yLinesize, uvLinesize) {\n      var ylen = yLinesize * height;\n      var uvlen = uvLinesize * height / 2;\n      if (this.chroma === 444 || this.chroma === 422) {\n        uvlen *= 2;\n      }\n      data = new Uint8Array(data);\n      var renderData = {\n        yData: data.subarray(0, ylen),\n        uData: data.subarray(ylen, ylen + uvlen),\n        vData: data.subarray(ylen + uvlen, ylen + uvlen + uvlen)\n      };\n      this._drawPictureGL420(renderData, width, height, yLinesize, uvLinesize);\n    }\n  }, {\n    key: '_drawPictureGL420',\n    value: function _drawPictureGL420(data, width, height, yLinesize, uvLinesize) {\n      var gl = this.contextGL;\n      var texturePosBuffer = this.texturePosBuffer;\n      var uTexturePosBuffer = this.uTexturePosBuffer;\n      var vTexturePosBuffer = this.vTexturePosBuffer;\n\n      var yTextureRef = this.yTextureRef;\n      var uTextureRef = this.uTextureRef;\n      var vTextureRef = this.vTextureRef;\n\n      var yData = data.yData;\n      var uData = data.uData;\n      var vData = data.vData;\n\n      var yDataPerRow = yLinesize;\n      var yRowCnt = height;\n\n      var uDataPerRow = uvLinesize;\n      var uRowCnt = height / 2;\n\n      if (this.chroma === 422 || this.chroma === 444) {\n        uRowCnt = height;\n      }\n\n      var vDataPerRow = uvLinesize;\n      var vRowCnt = uRowCnt;\n\n      var ratiow = this.canvas.width / this.width;\n      var ratioh = this.canvas.height / this.height;\n      var left = 0;\n      var top = 0;\n      var w = this.canvas.width;\n      var h = this.canvas.height;\n      if (ratiow < ratioh) {\n        h = this.height * this.canvas.width / this.width;\n        top = parseInt((this.canvas.height - this.height * this.canvas.width / this.width) / 2);\n      } else {\n        w = this.width * this.canvas.height / this.height;\n        left = parseInt((this.canvas.width - this.width * this.canvas.height / this.height) / 2);\n      }\n      gl.viewport(left, top, w, h);\n\n      var texturePosValues = new Float32Array([1, 0, 0, 0, 1, 1, 0, 1]);\n      gl.bindBuffer(gl.ARRAY_BUFFER, texturePosBuffer);\n      gl.bufferData(gl.ARRAY_BUFFER, texturePosValues, gl.DYNAMIC_DRAW);\n\n      var uTexturePosValues = new Float32Array([1, 0, 0, 0, 1, 1, 0, 1]);\n      gl.bindBuffer(gl.ARRAY_BUFFER, uTexturePosBuffer);\n      gl.bufferData(gl.ARRAY_BUFFER, uTexturePosValues, gl.DYNAMIC_DRAW);\n\n      var vTexturePosValues = new Float32Array([1, 0, 0, 0, 1, 1, 0, 1]);\n      gl.bindBuffer(gl.ARRAY_BUFFER, vTexturePosBuffer);\n      gl.bufferData(gl.ARRAY_BUFFER, vTexturePosValues, gl.DYNAMIC_DRAW);\n\n      gl.activeTexture(gl.TEXTURE0);\n      gl.bindTexture(gl.TEXTURE_2D, yTextureRef);\n      gl.texImage2D(gl.TEXTURE_2D, 0, gl.LUMINANCE, yDataPerRow, yRowCnt, 0, gl.LUMINANCE, gl.UNSIGNED_BYTE, yData);\n\n      gl.activeTexture(gl.TEXTURE1);\n      gl.bindTexture(gl.TEXTURE_2D, uTextureRef);\n      gl.texImage2D(gl.TEXTURE_2D, 0, gl.LUMINANCE, uDataPerRow, uRowCnt, 0, gl.LUMINANCE, gl.UNSIGNED_BYTE, uData);\n\n      gl.activeTexture(gl.TEXTURE2);\n      gl.bindTexture(gl.TEXTURE_2D, vTextureRef);\n      gl.texImage2D(gl.TEXTURE_2D, 0, gl.LUMINANCE, vDataPerRow, vRowCnt, 0, gl.LUMINANCE, gl.UNSIGNED_BYTE, vData);\n\n      gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);\n    }\n  }, {\n    key: '_drawPictureRGB',\n    value: function _drawPictureRGB(data) {}\n  }, {\n    key: 'render',\n    value: function render(data, width, height, yLinesize, uvLinesize) {\n      var gl = this.contextGL;\n      // console.log(data, width, height, yLinesize, uvLinesize)\n      if (gl) {\n        this._drawPictureGL(data, width, height, yLinesize, uvLinesize);\n      } else {\n        this._drawPictureRGB(data);\n      }\n    }\n  }, {\n    key: 'resetMeta',\n    value: function resetMeta(meta) {\n      this.meta = Object.assign({}, meta);\n      this._initMeta();\n    }\n  }]);\n\n  return YUVCanvas;\n}();\n\nexport default YUVCanvas;","var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nimport EventEmitter from \"events\";\nimport HevcWorker from \"worker!../decoder/hevc-worker.js\";\nimport AvcWorker from \"worker!../decoder/worker.js\";\nimport { logger } from \"xgplayer-helper-utils\";\nimport VideoTimeRange from \"./VideoTimeRange\";\nimport FrameRender from \"./FrameRender\";\nimport Events from \"../events\";\n\nvar HAVE_NOTHING = 0;\nvar HAVE_METADATA = 1;\nvar HAVE_CURRENT_DATA = 2;\nvar HAVE_FUTURE_DATA = 3;\nvar HAVE_ENOUGH_DATA = 4;\n\nvar MEDIA_ERR_DECODE = 3;\n\nvar VideoRender = function (_EventEmitter) {\n  _inherits(VideoRender, _EventEmitter);\n\n  function VideoRender(config, parent) {\n    _classCallCheck(this, VideoRender);\n\n    var _this = _possibleConstructorReturn(this, (VideoRender.__proto__ || Object.getPrototypeOf(VideoRender)).call(this));\n\n    _this.TAG = \"VideoRender\";\n    _this._config = config;\n    _this._parent = parent;\n    _this._timeRange = new VideoTimeRange();\n    _this._frameQueue = []; // the queue of uncompressed frame\n    _this._canvas = config.canvas || document.createElement(\"canvas\");\n    _this._meta = null;\n    _this._decoder = null; //  decoder worker instance\n    _this._frameRender = null; // FrameRender instance\n    _this._ready = false;\n    _this._noAudio = false;\n    _this._wasmReady = false;\n    _this._clearId = -1;\n    _this._lastTimeupdate = 0;\n    _this._startRender = _this._startRender.bind(_this);\n    _this._initCanvas();\n    _this._bindEvents();\n    return _this;\n  }\n\n  _createClass(VideoRender, [{\n    key: \"updateReady\",\n    value: function updateReady() {\n      this._ready = true;\n    }\n  }, {\n    key: \"_assembleErr\",\n    value: function _assembleErr(msg) {\n      var err = new Error(msg);\n      err.code = MEDIA_ERR_DECODE;\n      return err;\n    }\n  }, {\n    key: \"_emitTimelineEvents\",\n    value: function _emitTimelineEvents(e, v, d) {\n      this._parent.emit(e, v, d);\n    }\n  }, {\n    key: \"_initCanvas\",\n    value: function _initCanvas() {\n      this._canvas.style.maxWidth = \"100%\";\n      this._canvas.style.maxHeight = \"100%\";\n      this._canvas.style.top = 0;\n      this._canvas.style.bottom = 0;\n      this._canvas.style.left = 0;\n      this._canvas.style.right = 0;\n      this._canvas.style.margin = \"auto\";\n      this._canvas.style.position = \"absolute\";\n    }\n  }, {\n    key: \"_bindEvents\",\n    value: function _bindEvents() {\n      var _this2 = this;\n\n      this._parent.on(Events.TIMELINE.SET_METADATA, function (type, meta) {\n        if (type == \"audio\") return;\n        logger.warn(_this2.TAG, \"video set metadata\");\n        _this2._setMetadata(meta);\n      });\n\n      this._parent.on(Events.TIMELINE.APPEND_CHUNKS, this._appendChunk.bind(this));\n\n      this._parent.on(Events.TIMELINE.START_RENDER, this._startRender);\n\n      // 同步时机\n      // 1. 音频一小段buffer起播时\n      // 2. 对noAudio的场景 1. 视频变流时,dts发生变化 2. 卡顿waiting后,_parent.timelinePosition已不准确\n      this._parent.on(Events.TIMELINE.SYNC_DTS, function (dts) {\n        var nextFrame = _this2._frameQueue[0];\n        _this2.lastTimelinePosition = _this2.timelinePosition;\n        if (_this2._noAudio) {\n          dts = dts || nextFrame && nextFrame.info.dts || 0;\n        }\n        _this2.audioSyncDts = dts;\n        if (logger.long) {\n          logger.log(_this2.TAG, \"audio current buffer play finish,dts=\", dts, \"currentTime:\", _this2._parent.currentTime, \"next video frame dts:\", nextFrame && nextFrame.info.dts);\n        }\n\n        // 1. 换流 音频播完,视频还存在几帧之前的流没播完时\n        // 2. 暂时的 a > v\n        while (nextFrame) {\n          var delta = nextFrame.info.dts - dts;\n          if (delta > 10000 || delta < -100) {\n            logger.warn(_this2.TAG, \"detect a-v sync problem,delete nextFrame\");\n            _this2._frameQueue.shift();\n            nextFrame = _this2._frameQueue[0];\n            continue;\n          }\n          break;\n        }\n      });\n\n      this._parent.on(Events.TIMELINE.DO_PAUSE, function () {\n        clearTimeout(_this2._clearId);\n      });\n\n      this._parent.on(Events.TIMELINE.DESTROY, function () {\n        _this2._destroy();\n      });\n\n      this._parent.on(Events.TIMELINE.NO_AUDIO, function () {\n        _this2._noAudio = true;\n      });\n    }\n  }, {\n    key: \"_setMetadata\",\n    value: function _setMetadata(meta) {\n      this._meta = meta;\n      var fps = meta && meta.frameRate && meta.frameRate.fps;\n      if (fps) {\n        logger.log(this.TAG, \"detect fps:\", fps);\n      } else {\n        logger.warn(this.TAG, \"no detect fps,set to 24\");\n      }\n      if (!this._decoder) {\n        this._initWorker();\n      }\n    }\n  }, {\n    key: \"_selectWorker\",\n    value: function _selectWorker() {\n      if (this.isHevc) {\n        return new HevcWorker();\n      }\n      return new AvcWorker();\n    }\n  }, {\n    key: \"_initWorker\",\n    value: function _initWorker() {\n      logger.log(this.TAG, \"start init worker:\", performance.now());\n      this._decoder = this._selectWorker();\n      this._bindWorkerEvent(this._decoder);\n      this._decoder.postMessage({\n        msg: \"init\",\n        meta: this._meta\n      });\n    }\n  }, {\n    key: \"_bindWorkerEvent\",\n    value: function _bindWorkerEvent(decoder) {\n      var _this3 = this;\n\n      decoder.addEventListener(\"message\", function (e) {\n        var msg = e.data.msg;\n\n        switch (msg) {\n          case \"DECODER_READY\":\n            logger.log(_this3.TAG, \"wasm worker ready \", performance.now());\n            _this3._wasmReady = true;\n            _this3.emit(Events.VIDEO.VIDEO_DECODER_INIT);\n            _this3._startDecode();\n            break;\n          case \"DECODED\":\n            _this3._frameQueue.push(e.data);\n            _this3._checkToDecode();\n            break;\n          case \"LOG\":\n            // console.log('video decoder worker: LOG:',msg,e.data.log, performance.now());\n            break;\n          case \"INIT_FAILED\":\n            _this3._emitTimelineEvents(Events.TIMELINE.PLAY_EVENT, \"error\", _this3._assembleErr(e.data.log));\n            break;\n          default:\n            console.error(\"invalid messaeg\", e);\n        }\n      });\n\n      decoder.addEventListener(\"error\", function (e) {\n        _this3._emitTimelineEvents(Events.TIMELINE.PLAY_EVENT, \"error\", _this3._assembleErr(e.message));\n      });\n    }\n  }, {\n    key: \"_pushAvcc\",\n    value: function _pushAvcc(worker, meta) {\n      logger.log(this.TAG, \"push metadata, init codec context\");\n      this._avccpushed = true;\n      worker.postMessage({\n        msg: \"updatemeta\",\n        meta: meta\n      });\n      var vps = meta.rawVps || meta.vps;\n      var sps = meta.rawSps || meta.sps;\n      var pps = meta.rawPps || meta.pps;\n      if (vps) {\n        var _data = new Uint8Array(vps.byteLength + 4);\n        _data.set([0, 0, 0, 1]);\n        _data.set(vps, 4);\n        worker.postMessage({\n          msg: \"decode\",\n          data: _data\n        });\n      }\n\n      var data = new Uint8Array(sps.byteLength + 4);\n      data.set([0, 0, 0, 1]);\n      data.set(sps, 4);\n      worker.postMessage({\n        msg: \"decode\",\n        data: data\n      });\n\n      data = new Uint8Array(pps.byteLength + 4);\n      data.set([0, 0, 0, 1]);\n      data.set(pps, 4);\n      worker.postMessage({\n        msg: \"decode\",\n        data: data\n      });\n\n      if (!this._frameRender) {\n        var config = Object.assign({ meta: meta, canvas: this._canvas }, this.config);\n        this._frameRender = new FrameRender(config);\n      } else {\n        this._frameRender.resetMeta(meta);\n      }\n    }\n  }, {\n    key: \"_appendChunk\",\n    value: function _appendChunk(videoTrack) {\n      this._timeRange.append(videoTrack.samples, this._noAudio);\n      videoTrack.samples = [];\n      if (!this._ready && this._wasmReady && this._noAudio) {\n        this._startDecode();\n      }\n      if (this._noAudio) {\n        this._emitTimelineEvents(Events.TIMELINE.PLAY_EVENT, Events.VIDEO_EVENTS.DURATION_CHANGE);\n      }\n    }\n\n    // 1. decoder初始化预解码几帧\n    // 2. render 过程,帧数过少时解码新帧\n\n  }, {\n    key: \"_startDecode\",\n    value: function _startDecode() {\n      var len = 10;\n      while (len >= 0) {\n        var sample = this._timeRange.shift();\n        if (!sample) break;\n        this._decodeSample(sample);\n        len--;\n      }\n    }\n\n    // 检测需要解码的时机\n    // 1. 解码worker初始化完成,提前解几帧\n    // 2. 渲染ticker中\n\n  }, {\n    key: \"_checkToDecode\",\n    value: function _checkToDecode() {\n      if (!this._ready) {\n        if (this.readyState >= HAVE_FUTURE_DATA) {\n          this._ready = true;\n          this.emit(Events.VIDEO.VIDEO_READY);\n          this._emitTimelineEvents(Events.TIMELINE.PLAY_EVENT, Events.VIDEO_EVENTS.LOADEDDATA);\n          if (this._noAudio) {\n            this._emitTimelineEvents(Events.TIMELINE.PLAY_EVENT, Events.VIDEO_EVENTS.PLAY);\n            this._emitTimelineEvents(Events.TIMELINE.PLAY_EVENT, Events.VIDEO_EVENTS.PLAYING);\n          }\n        }\n        return;\n      }\n      if (this.readyState < HAVE_ENOUGH_DATA) {\n        this._startDecode();\n        return;\n      }\n    }\n  }, {\n    key: \"_startRender\",\n    value: function _startRender() {\n      if (this._clearId) {\n        clearTimeout(this._clearId);\n      }\n\n      var frame = this._frameQueue[0];\n      if (!frame) {\n        logger.log(\"lack frame\");\n        this._checkToDecode();\n        this._clearId = setTimeout(this._startRender, this.interval);\n        // waiting\n        if (this._noAudio) {\n          this._ready = false;\n          this.emit(Events.VIDEO.VIDEO_WAITING);\n        }\n        return;\n      }\n\n      var info = frame.info;\n\n      var _renderDelay = info.dts - this.preciseVideoDts;\n\n      if (_renderDelay > this.interval) {\n        this._clearId = setTimeout(this._startRender, this.interval);\n        return;\n      }\n\n      this._frameQueue.shift();\n\n      if (Math.abs(this._lastTimeupdate - info.dts) > 250) {\n        this._emitTimelineEvents(Events.TIMELINE.PLAY_EVENT, Events.VIDEO_EVENTS.TIMEUPDATE);\n        this._lastTimeupdate = info.dts;\n      }\n\n      if (logger.long) {\n        logger.log(this.TAG, \"render delay:\", _renderDelay, \"timelinePosition:\", this.preciseVideoDts, \"dts:\", info.dts, \"rest frame:\", this._frameQueue.length);\n      }\n\n      this._frameRender.render(frame.buffer, frame.width, frame.height, frame.yLinesize, frame.uvLinesize);\n      this._checkToDecode();\n      this._clearId = setTimeout(this._startRender, 25);\n    }\n  }, {\n    key: \"_decodeSample\",\n    value: function _decodeSample(sample) {\n      if (sample.options && sample.options.meta) {\n        this._meta = sample.options.meta;\n        logger.warn(this.TAG, \"detect metadata! flush decoder\");\n        this._pushAvcc(this._decoder, sample.options.meta);\n        // 换流更新\n        if (this._noAudio) {\n          this._emitTimelineEvents(Events.TIMELINE.SYNC_DTS, sample.dts);\n        }\n      }\n\n      var gopId = 0;\n      if (sample.gopId) {\n        gopId = sample.gopId - 1;\n      }\n      // const worker = this.wasmworkers[gopId % MAX_WORKER_NUM];\n      this._decoder.postMessage({\n        msg: \"decode\",\n        data: sample.data,\n        info: {\n          decodeTime: Date.now(),\n          dts: sample.dts,\n          pts: sample.pts || sample.dts + sample.cts,\n          key: sample.isKeyframe,\n          gopId: gopId,\n          isGop: sample.isGop || false\n        }\n      });\n    }\n  }, {\n    key: \"_destroy\",\n    value: function _destroy() {\n      logger.log(this.TAG, \"destroy video...\");\n      if (this._decoder) {\n        this._decoder.postMessage({ msg: \"destroy\" });\n        this._decoder.terminate();\n      }\n      this._canvas = null;\n      this._timeRange = null;\n      this._frameQueue = null;\n      this._frameRender = null;\n      clearTimeout(this._clearId);\n    }\n  }, {\n    key: \"canvas\",\n    get: function get() {\n      return this._canvas;\n    }\n  }, {\n    key: \"isHevc\",\n    get: function get() {\n      return (this._meta || {}).codec === \"hev1.1.6.L93.B0\";\n    }\n  }, {\n    key: \"timescale\",\n    get: function get() {\n      if (!this._meta) return 1000;\n      return this._meta.timescale || 1000;\n    }\n  }, {\n    key: \"fps\",\n    get: function get() {\n      return this._meta && this._meta.frameRate && this._meta.frameRate.fps || 24;\n    }\n  }, {\n    key: \"duration\",\n    get: function get() {\n      return this._timeRange.duartion;\n    }\n  }, {\n    key: \"buffered\",\n    get: function get() {\n      return this._timeRange.buffered;\n    }\n  }, {\n    key: \"interval\",\n    get: function get() {\n      return Math.floor(1000 / this.fps);\n    }\n\n    // video first frame dts\n\n  }, {\n    key: \"baseDts\",\n    get: function get() {\n      return this._timeRange.baseDts;\n    }\n\n    // noAudio时使用\n\n  }, {\n    key: \"currentTime\",\n    get: function get() {\n      return this._timeRange.lastDuration + (this.preciseVideoDts - this.baseDts) / 1000;\n    }\n  }, {\n    key: \"timelinePosition\",\n    get: function get() {\n      return this._parent.timelinePosition;\n    }\n  }, {\n    key: \"lastTimelinePosition\",\n    set: function set(ts) {\n      this._lastTimelinePosition = ts;\n    }\n\n    // the startTime on timeline of the buffer audioCtx current playing\n    // noAudio: the time record by perforamce.now() when play start or restart after waiting or stream changed\n    ,\n    get: function get() {\n      return this._lastTimelinePosition || 0;\n    }\n  }, {\n    key: \"audioSyncDts\",\n    set: function set(dts) {\n      this._audioDts = dts;\n    }\n\n    // the first sample's dts of the buffer audioCtx current playing\n    ,\n    get: function get() {\n      return this._audioDts || this.baseDts;\n    }\n\n    // the precise video dts sync to timeline time\n\n  }, {\n    key: \"preciseVideoDts\",\n    get: function get() {\n      return this.audioSyncDts + (this.timelinePosition - this.lastTimelinePosition) * 1000;\n    }\n  }, {\n    key: \"readyState\",\n    get: function get() {\n      var len = this._frameQueue.length;\n      if (!len) return HAVE_NOTHING;\n      if (len >= 8) return HAVE_ENOUGH_DATA;\n      if (len >= 4) return HAVE_FUTURE_DATA;\n      if (len >= 2) return HAVE_CURRENT_DATA;\n      return HAVE_METADATA;\n    }\n  }]);\n\n  return VideoRender;\n}(EventEmitter);\n\nexport default VideoRender;","var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nimport EventEmitter from \"events\";\nimport { logger } from \"xgplayer-helper-utils\";\nimport AudioRender from \"./render/AudioRender\";\nimport VideoRender from \"./render/VideoRender\";\nimport Events from \"./events\";\n\nvar TimeLine = function (_EventEmitter) {\n  _inherits(TimeLine, _EventEmitter);\n\n  function TimeLine(config) {\n    _classCallCheck(this, TimeLine);\n\n    var _this = _possibleConstructorReturn(this, (TimeLine.__proto__ || Object.getPrototypeOf(TimeLine)).call(this));\n\n    _this.TAG = \"TimeLine\";\n    _this.videoRender = new VideoRender({}, _this);\n    _this.audioRender = new AudioRender(config, _this);\n    _this._readyStatus = {\n      audio: false,\n      video: false\n    };\n    _this._reset = false; // 控制下次调play,是否需要销毁实例\n    _this._paused = true;\n    _this._noAudio = false;\n    _this._bindEvent();\n    return _this;\n  }\n\n  _createClass(TimeLine, [{\n    key: \"_bindEvent\",\n    value: function _bindEvent() {\n      var _this2 = this;\n\n      this.audioRender.on(Events.AUDIO.AUDIO_READY, function () {\n        logger.log(_this2.TAG, \"audio ready!\");\n        _this2._readyStatus.audio = true;\n        if (_this2._readyStatus.video) {\n          _this2._startRender();\n        }\n      });\n\n      this.audioRender.on(Events.AUDIO.AUDIO_WAITING, function () {\n        if (_this2._noAudio) return;\n        logger.warn(_this2.TAG, \"lack data, audio waiting\");\n        _this2.emit(Events.TIMELINE.PLAY_EVENT, Events.VIDEO_EVENTS.WAITING);\n        _this2.emit(Events.TIMELINE.DO_PAUSE);\n        _this2._readyStatus.audio = false;\n      });\n\n      // only used for no audio exist\n      this.videoRender.on(Events.VIDEO.VIDEO_WAITING, function () {\n        logger.warn(_this2.TAG, \"lack data, video waiting\");\n        _this2.emit(Events.TIMELINE.PLAY_EVENT, Events.VIDEO_EVENTS.WAITING);\n        _this2.emit(Events.TIMELINE.DO_PAUSE);\n        _this2._readyStatus.video = false;\n      });\n\n      this.videoRender.on(Events.VIDEO.VIDEO_DECODER_INIT, function () {\n        logger.log(_this2.TAG, \"video decoder init!\");\n        setTimeout(function () {\n          if (!_this2._readyStatus.video) {\n            logger.warn(_this2.TAG, \"video 首次解码无解码帧返回! auto ready!\");\n            _this2.videoRender.updateReady();\n            _this2.onVideoReady();\n          }\n        }, 1000);\n      });\n\n      this.onVideoReady = function () {\n        logger.log(_this2.TAG, \"video ready!\");\n        _this2._readyStatus.video = true;\n        if (_this2._readyStatus.audio) {\n          _this2._startRender();\n        }\n      };\n\n      this.videoRender.on(Events.VIDEO.VIDEO_READY, this.onVideoReady);\n\n      this.on(Events.TIMELINE.PLAY_EVENT, function (status) {\n        if (status === \"play\") {\n          _this2._paused = false;\n        }\n        if (status === \"error\") {\n          _this2._reset = true;\n        }\n      });\n\n      this.on(Events.TIMELINE.NO_AUDIO, function () {\n        _this2._noAudio = true;\n        _this2._readyStatus.audio = true;\n      });\n    }\n  }, {\n    key: \"_startRender\",\n    value: function _startRender() {\n      this.emit(Events.READY);\n      if (this._noAudio) {\n        this.emit(Events.TIMELINE.SYNC_DTS, 0);\n      }\n      logger.log(this.TAG, \"startRender: time=\", this.currentTime);\n      this.emit(Events.TIMELINE.PLAY_EVENT, Events.VIDEO_EVENTS.CANPLAY);\n      this.emit(Events.TIMELINE.START_RENDER);\n    }\n  }, {\n    key: \"play\",\n    value: function play() {\n      var _this3 = this;\n\n      return new Promise(function (resolve, reject) {\n        var resumed = false;\n\n        if (_this3._noAudio) {\n          resumed = true;\n        } else {\n          _this3.audioRender.resume().then(function () {\n            resumed = true;\n          });\n        }\n\n        setTimeout(function () {\n          if (!resumed) {\n            _this3._reset = true; // 不能自动播放\n            reject();\n            return;\n          }\n          resolve();\n        }, 10);\n      });\n    }\n  }, {\n    key: \"pause\",\n    value: function pause() {\n      var _this4 = this;\n\n      if (this._paused) return;\n      this._paused = true;\n      this._reset = true;\n      this.emit(Events.TIMELINE.DO_PAUSE);\n      setTimeout(function () {\n        _this4.emit(Events.TIMELINE.PLAY_EVENT, Events.VIDEO_EVENTS.PAUSE);\n      });\n    }\n  }, {\n    key: \"seek\",\n    value: function seek() {}\n  }, {\n    key: \"ready\",\n    get: function get() {\n      return this._readyStatus.video && this._readyStatus.audio;\n    }\n  }, {\n    key: \"currentTime\",\n    get: function get() {\n      if (this._noAudio) return this.videoRender.currentTime;\n      return this.audioRender.currentTime;\n    }\n  }, {\n    key: \"timelinePosition\",\n    get: function get() {\n      if (this._noAudio) return performance.now() / 1000; // s\n      return this.audioRender.currentTime;\n    }\n  }, {\n    key: \"canvas\",\n    get: function get() {\n      return this.videoRender.canvas;\n    }\n  }, {\n    key: \"readyState\",\n    get: function get() {\n      return this.videoRender.readyState;\n    }\n  }, {\n    key: \"fps\",\n    get: function get() {\n      return this.videoRender.fps;\n    }\n  }, {\n    key: \"buffered\",\n    get: function get() {\n      if (this._noAudio) return this.videoRender.buffered;\n      return this.audioRender.buffered;\n    }\n  }, {\n    key: \"duration\",\n    get: function get() {\n      if (this._noAudio) return this.videoRender.duration;\n      return this.audioRender.duration;\n    }\n  }, {\n    key: \"paused\",\n    get: function get() {\n      return this._paused;\n    }\n  }, {\n    key: \"needReset\",\n    get: function get() {\n      return this._reset;\n    }\n  }]);\n\n  return TimeLine;\n}(EventEmitter);\n\nexport default TimeLine;","var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nimport './polyfills/custom-elements.min';\nimport './polyfills/native-element';\nimport { logger } from 'xgplayer-helper-utils';\nimport TimeLine from './TimeLine';\nimport Events from './events';\n\nvar MVideo = function (_HTMLElement) {\n  _inherits(MVideo, _HTMLElement);\n\n  function MVideo() {\n    _classCallCheck(this, MVideo);\n\n    var _this = _possibleConstructorReturn(this, (MVideo.__proto__ || Object.getPrototypeOf(MVideo)).call(this));\n\n    _this.TAG = 'MVideo';\n    _this._init();\n    return _this;\n  }\n\n  _createClass(MVideo, [{\n    key: '_init',\n    value: function _init() {\n      var _this2 = this;\n\n      this.timeline = new TimeLine({\n        preloadTime: this.preloadTime,\n        volume: this.volume\n      });\n      this._logFirstFrame = false;\n      this._bindEvents();\n      setTimeout(function () {\n        if (_this2.noAudio) {\n          _this2.setNoAudio();\n        }\n      });\n    }\n  }, {\n    key: '_bindEvents',\n    value: function _bindEvents() {\n      var _this3 = this;\n\n      this.timeline.on(Events.TIMELINE.PLAY_EVENT, function (status, data) {\n        if (status === 'canplay') {\n          if (!_this3.contains(_this3.canvas)) {\n            _this3.appendChild(_this3.canvas);\n          }\n        }\n        if (status === 'error') {\n          _this3._err = data;\n          _this3.pause();\n        }\n        _this3._innerDispatchEvent(status);\n      });\n    }\n  }, {\n    key: 'disconnectedCallback',\n    value: function disconnectedCallback() {\n      logger.log(this.TAG, 'video disconnected');\n      this.destroy();\n    }\n  }, {\n    key: 'connectedCallback',\n    value: function connectedCallback() {\n      logger.log(this.TAG, 'video connected to document');\n      if (!this.timeline) {\n        this._init();\n      }\n    }\n  }, {\n    key: 'handleMediaInfo',\n    value: function handleMediaInfo() {\n      this._logFirstFrame = false;\n    }\n  }, {\n    key: 'play',\n    value: function play() {\n      var _this4 = this;\n\n      if (!this.timeline || !this.timeline.ready) {\n        return new Promise(function (resolve) {\n          _this4.timeline.once('READY', resolve);\n        });\n      }\n\n      logger.log(this.TAG, 'mvideo called play(),to reset video:', this.timeline.needReset);\n\n      // 暂停后起播\n      // 初始化后不能自动播放,手动播放\n      if (this.timeline.needReset) {\n        this.destroy();\n        this._init();\n        this._innerDispatchEvent('waiting');\n        this._innerDispatchEvent('play');\n        return Promise.resolve();\n      }\n      return this.timeline.play();\n    }\n  }, {\n    key: 'pause',\n    value: function pause() {\n      this.timeline.pause();\n    }\n  }, {\n    key: 'load',\n    value: function load() {}\n  }, {\n    key: 'onDemuxComplete',\n    value: function onDemuxComplete(videoTrack, audioTrack) {\n      if (this.error) return;\n      if (!this.timeline) return;\n      if (!this._logFirstFrame) {\n        var vSam0 = videoTrack.samples[0];\n        var aSam0 = audioTrack.samples[0];\n        if (vSam0 && aSam0) {\n          logger.log(this.TAG, 'video firstDts:' + vSam0.dts + ' , audio firstDts:' + aSam0.dts);\n          this._logFirstFrame = true;\n        }\n      }\n      this.timeline.emit(Events.TIMELINE.APPEND_CHUNKS, videoTrack, audioTrack);\n    }\n  }, {\n    key: 'setNoAudio',\n    value: function setNoAudio() {\n      logger.log(this.TAG, 'video set noAudio!');\n      this.timeline.emit(Events.TIMELINE.NO_AUDIO);\n      this.noAudio = true;\n    }\n  }, {\n    key: 'setAudioMeta',\n    value: function setAudioMeta(meta) {\n      this.timeline.emit(Events.TIMELINE.SET_METADATA, 'audio', meta);\n    }\n  }, {\n    key: 'setVideoMeta',\n    value: function setVideoMeta(meta) {\n      this.timeline.emit(Events.TIMELINE.SET_METADATA, 'video', meta);\n    }\n  }, {\n    key: 'handleEnded',\n    value: function handleEnded() {\n      this._innerDispatchEvent('ended');\n    }\n  }, {\n    key: 'handleErr',\n    value: function handleErr(code, message) {\n      this._err = {};\n      this._err.code = code;\n      this._err.message = message;\n      this._innerDispatchEvent('error');\n    }\n  }, {\n    key: '_innerDispatchEvent',\n    value: function _innerDispatchEvent(type) {\n      this.dispatchEvent(new Event(type));\n    }\n  }, {\n    key: 'destroy',\n    value: function destroy() {\n      logger.log(this.TAG, 'call destroy');\n      this.timeline.emit(Events.TIMELINE.DESTROY);\n      this.timeline = null;\n    }\n  }, {\n    key: 'noAudio',\n    get: function get() {\n      return this.getAttribute('noaudio') === 'true';\n    },\n    set: function set(val) {\n      this.setAttribute('noaudio', val);\n    }\n  }, {\n    key: 'canvas',\n    get: function get() {\n      return this.timeline.canvas;\n    }\n  }, {\n    key: 'width',\n    get: function get() {\n      return this.getAttribute('width') || this.videoWidth;\n    },\n    set: function set(val) {\n      this.style.display = 'inline-block';\n      var pxVal = typeof val === 'number' ? val + 'px' : val;\n      this.setAttribute('width', pxVal);\n      this.style.width = pxVal;\n      this.canvas.width = val;\n    }\n  }, {\n    key: 'height',\n    get: function get() {\n      return this.getAttribute('height');\n    },\n    set: function set(val) {\n      this.style.display = 'inline-block';\n      var pxVal = typeof val === 'number' ? val + 'px' : val;\n      this.setAttribute('height', pxVal);\n      this.style.height = pxVal;\n      this.canvas.height = val;\n    }\n  }, {\n    key: 'videoWidth',\n    get: function get() {\n      return this.canvas.width;\n    }\n  }, {\n    key: 'videoHeight',\n    get: function get() {\n      return this.canvas.height;\n    }\n  }, {\n    key: 'volume',\n    get: function get() {\n      return Number(this.getAttribute('volume'));\n    },\n    set: function set(v) {\n      if (v <= 0) {\n        v = 0;\n      }\n      if (v >= 1) {\n        v = 1;\n      }\n      this.setAttribute('volume', v);\n      this.timeline.emit(Events.TIMELINE.UPDATE_VOLUME, v);\n    }\n  }, {\n    key: 'muted',\n    get: function get() {\n      return this.getAttribute('muted') === 'true' || this.volume == 0;\n    },\n    set: function set(v) {\n      this.setAttribute('muted', v);\n      this.timeline.emit(Events.TIMELINE.UPDATE_VOLUME, v ? 0 : this.volume);\n    }\n  }, {\n    key: 'currentTime',\n    get: function get() {\n      return this.timeline.currentTime;\n    },\n    set: function set(v) {\n      this.timeline.seek(v);\n    }\n  }, {\n    key: 'duration',\n    get: function get() {\n      return this.timeline.duration;\n    }\n  }, {\n    key: 'seeking',\n    get: function get() {\n      return false;\n    }\n  }, {\n    key: 'paused',\n    get: function get() {\n      return this.timeline.paused;\n    }\n  }, {\n    key: 'fps',\n    get: function get() {\n      return this.timeline.fps;\n    }\n  }, {\n    key: 'readyState',\n    get: function get() {\n      return this.timeline.readyState;\n    }\n  }, {\n    key: 'buffered',\n    get: function get() {\n      return this.timeline.buffered;\n    }\n  }, {\n    key: 'src',\n    get: function get() {\n      return this.getAttribute('src');\n    },\n    set: function set(val) {\n      this.setAttribute('src', val);\n    }\n  }, {\n    key: 'playbackRate',\n    set: function set(v) {},\n    get: function get() {\n      return 1;\n    }\n  }, {\n    key: 'networkState',\n    get: function get() {\n      return 0;\n    }\n  }, {\n    key: 'preloadTime',\n    get: function get() {\n      var attrPreloadTime = this.getAttribute('preloadtime');\n      if (attrPreloadTime) {\n        var preloadTime = Number.parseFloat(attrPreloadTime);\n        if (preloadTime > 0 && !Number.isNaN(preloadTime)) {\n          return preloadTime;\n        }\n      }\n      return Infinity;\n    },\n    set: function set(val) {\n      if (val && Number(val) > 0) {\n        this.setAttribute('preloadtime', val);\n      }\n    }\n  }, {\n    key: 'error',\n    get: function get() {\n      return this._err;\n    }\n  }]);\n\n  return MVideo;\n}(HTMLElement);\n\ncustomElements.define('mobile-video', MVideo);","import Player from 'xgplayer';\nimport Context from 'xgplayer-transmuxer-context';\nimport Core from './raw-264';\nimport Events from 'xgplayer-transmuxer-constant-events';\nimport LoaderBuffer from 'xgplayer-transmuxer-buffer-xgbuffer';\nimport FetchLoader from 'xgplayer-transmuxer-loader-fetch';\nimport 'xgplayer-mobilevideo';\n\nconst asmSupported = () => {\n  try {\n    (function MyAsmModule () {\n      'use asm';\n    })();\n    return true;\n  } catch (err) {\n    // will never show...\n    return false;\n  }\n};\n\nclass Raw264Player extends Player {\n  static isSupported () {\n    const wasmSupported = 'WebAssembly' in window;\n\n    const WebComponentSupported = 'customElements' in window && window.customElements.define;\n    let isComponentDefined;\n    if (WebComponentSupported) {\n      isComponentDefined = window.customElements.get('mobile-video');\n    }\n    return (wasmSupported || asmSupported) && isComponentDefined;\n  }\n\n  constructor (props) {\n    if (!props.mediaType) {\n      props.mediaType = 'mobile-video';\n      if (props.videoConfig) {\n        props.videoConfig.preloadtime = props.preloadTime || 5;\n      } else {\n        props.videoConfig = {\n          preloadtime: props.preloadTime || 5\n        };\n      }\n    }\n    super(props);\n    this.video.setAttribute('noaudio', true);\n    this.handleTimeupdate = this.handleTimeupdate.bind(this);\n    this.hasPlayed = false;\n    this.hasStart = false;\n  }\n\n  start () {\n    if (this.hasStart) {\n      return;\n    } else {\n      this.hasStart = true;\n    }\n    this.context = new Context(Events.HlsAllowedEvents);\n    this.context.registry('LOADER_BUFFER', LoaderBuffer);\n    this.core = this.context.registry('RAW_264_CONTROLLER', Core)({player: this, fps: this.config.fps});\n    this.context.registry('FETCH_LOADER', FetchLoader);\n    this.context.init();\n    if (!this.config.isLive) {\n      this.core.load(this.config.url);\n    }\n\n    super.start();\n    this.video.preloadTime = this.config.preloadTime;\n    this.video.addEventListener('timeupdate', this.handleTimeupdate, false);\n  }\n\n  replay () {\n    this.video._cleanBuffer();\n    this.currentTime = 0;\n    this.start();\n    this.play();\n  }\n\n  handleTimeupdate () {\n    if (!this.config.isLive && this.currentTime >= this.duration) {\n      this.video._cleanBuffer();\n      this.pause();\n      this.emit('ended');\n    } else if (this.config.isLive && this.buffered.end(0) - this.currentTime > 0.1) {\n      this.currentTime = this.buffered.end(0) - 0.1;\n    }\n  }\n\n  destroy (isDelDom) {\n    super.destroy(isDelDom);\n    this.core.destroy();\n    this.context.destroy();\n    this.core = null;\n    this.context = null;\n  }\n\n  pushBuffer (arr) {\n    if (!this.hasStart) {\n      return this.start();\n    }\n    if (this.buffer) {\n      this.buffer.push(arr);\n      this.core.handleDataLoaded();\n    }\n  }\n\n  get buffer () {\n    return this.context.getInstance('LOADER_BUFFER');\n  }\n\n  set currentTime (time) {\n    const oldTime = super.currentTime;\n    const buffered = this.getBufferedRange();\n    if (buffered[0] <= time && buffered[1] >= time) {\n      this.video.currentTime = time;\n    } else {\n      this.video.currentTime = oldTime;\n    }\n  }\n\n  get currentTime () {\n    return super.currentTime;\n  }\n\n  get duration () {\n    if (this.core && this.core.duration) {\n      return this.core.duration;\n    }\n    return this.video.duration;\n  }\n}\n\nexport default Raw264Player;\n"],"names":["H264Demuxer","options","_player","player","videoMeta","VideoTrackMeta","videoTrack","samples","unusedUnits","fps","currentSampleIdx","duration","sps","pps","dataLoadedTimer","initEvents","on","Events","LOADER_EVENTS","LOADER_DATALOADED","handleDataLoaded","bind","LOADER_COMPLETE","url","emit","LADER_START","buffer","clearTimeout","data","shift","length","clear","stream","XgStream","units","concat","NalUnit","getNalunits","config","isLive","lastUnit","pop","pushBackData","Uint8Array","body","byteLength","set","header","push","pushToMobileVideo","setTimeout","unitsToSamples","unused","forEach","sample","ts","Math","floor","dts","pts","slice","presentHeight","present_size","height","presentWidth","width","video","setVideoMeta","intervalId","setInterval","onDemuxComplete","round","window","clearInterval","_context","getInstance","temp","unit","golomb","Golomb","readByte","readUEG","combineUnits","dataSize","reduce","result","offset","isKeyframe","idr","n","Document","prototype","createElement","p","createElementNS","aa","importNode","ba","prepend","ca","append","da","DocumentFragment","ea","q","Node","cloneNode","r","appendChild","t","insertBefore","u","removeChild","v","replaceChild","x","Object","getOwnPropertyDescriptor","y","Element","attachShadow","z","A","getAttribute","B","setAttribute","C","removeAttribute","D","getAttributeNS","E","setAttributeNS","F","removeAttributeNS","G","insertAdjacentElement","fa","insertAdjacentHTML","ha","ia","ja","before","ka","after","la","replaceWith","ma","remove","na","HTMLElement","H","oa","pa","qa","Set","split","a","add","ra","b","has","test","sa","document","contains","documentElement","I","isConnected","__CE_isImportDocument","parentNode","ShadowRoot","host","J","children","Array","call","firstChild","nextSibling","nodeType","ELEMENT_NODE","K","L","c","f","d","e","localName","import","__CE_shadowRoot","M","ta","N","readyState","MutationObserver","observe","childList","subtree","ua","disconnect","addedNodes","va","Promise","wa","Error","O","Map","g","l","i","j","h","m","o","Function","TypeError","xa","ya","define","za","SyntaxError","P","w","k","observedAttributes","constructorFunction","connectedCallback","disconnectedCallback","adoptedCallback","attributeChangedCallback","constructionStack","upgrade","__CE_state","get","Q","whenDefined","reject","indexOf","polyfillWrapFlushCallback","delete","R","CustomElementRegistry","polyfillDefineLazy","S","T","noDocumentConstructionObserver","shadyDomFastWalk","U","ShadyDOM","inUse","querySelectorAll","nativeMethods","Aa","Ba","V","W","__CE_patched","X","Y","s","__CE_registry","__CE_documentLoadHandled","addEventListener","ownerDocument","defaultView","__CE_definition","hasAttributes","Ca","namespaceURI","setPrototypeOf","HTMLUnknownElement","message","sourceURL","fileName","line","lineNumber","column","columnNumber","ErrorEvent","initErrorEvent","cancelable","filename","lineno","colno","error","createEvent","preventDefault","defineProperty","configurable","enumerable","dispatchEvent","defaultPrevented","console","Da","Ea","constructor","writable","value","Z","arguments","apply","Fa","Ga","TEXT_NODE","childNodes","COMMENT_NODE","textContent","join","createTextNode","Ha","Ia","toLowerCase","previousSibling","lastChild","String","innerHTML","content","customElements","Ja","forcePolyfill","__CE_installPolyfill","self","Reflect","undefined","BuiltInHTMLElement","wrapperForTheName","construct","TimeRanges","dump","len","ret","start","end","log","BROWSER_EVENTS","VISIBILITY_CHANGE","PLAYER_EVENTS","SEEK","LOADER_RESPONSE_HEADERS","LOADER_ERROR","DEMUX_EVENTS","DEMUX_START","DEMUX_COMPLETE","DEMUX_ERROR","METADATA_PARSED","SEI_PARSED","VIDEO_METADATA_CHANGE","AUDIO_METADATA_CHANGE","MEDIA_INFO","REMUX_EVENTS","REMUX_METADATA","REMUX_MEDIA","MEDIA_SEGMENT","REMUX_ERROR","INIT_SEGMENT","DETECT_CHANGE_STREAM","DETECT_CHANGE_STREAM_DISCONTINUE","DETECT_AUDIO_GAP","DETECT_AUDIO_OVERLAP","RANDOM_ACCESS_POINT","MSE_EVENTS","SOURCE_UPDATE_END","MSE_ERROR","HLS_EVENTS","RETRY_TIME_EXCEEDED","CRYTO_EVENTS","START_DECRYPT","DECRYPTED","ALLEVENTS","assign","FlvAllowedEvents","HlsAllowedEvents","key","hasOwnProperty","_key","_createClass","defineProperties","target","props","descriptor","Constructor","protoProps","staticProps","_classCallCheck","instance","Playlist","configs","_baseURL","_list","_ts","version","sequence","targetduration","fragLength","_lastget","_audoclear","autoclear","downloadedUrls","discontinue","id","downloaded","downloading","deleteFrag","time","pushM3U8","deletepre","encrypt","newfraglist","frags","frag","tslist","getTsList","_i","keys","tsname","isloaded","loading","getTsByName","name","getTs","timelist","sort","parseFloat","parseInt","getLastDownloadedTs","found","clearDownloaded","destroy","baseURL","Presource","mimetype","init","PreSource","sources","getSource","source","createSource","Stream","ArrayBuffer","dataview","DataView","position","back","count","skip","loop","last","readUint8","readUint16","readUint24","readUint32","readUint64","readInt8","readInt16","readInt32","writeUint32","size","sign","res","getInt8","getUint8","getInt16","getUint16","getInt32","getUint32","_possibleConstructorReturn","ReferenceError","_inherits","subClass","superClass","create","__proto__","Track","sequenceNumber","droppedSamples","reset","distroy","AudioTrack","_Track","_this","getPrototypeOf","TAG","type","VideoTrack","_Track2","_this2","dropped","Tracks","audioTrack","XgBuffer","historyLen","array","_shiftBuffer","_ret","_ret2","tmpoff","tmp","templength","toInt","retInt","AudioTrackMeta","meta","_default","sampleRate","channelCount","codec","refSampleDuration","sampleRateIndex","timescale","avcc","chromaFormat","codecHeight","codecWidth","frameRate","fixed","fps_num","fps_den","level","profile","parRatio","AudioTrackSample","info","getDefault","VideoTrackSample","originDts","isObjectFilled","obj","MediaInfo","mimeType","hasVideo","hasAudio","audio","isComplete","isBaseInfoReady","isVideoReady","isAudioReady","mediaInfo","_MediaInfo","domain","EventHandlers","EventEmitter","usingDomains","_events","_maxListeners","defaultMaxListeners","active","_eventsCount","setMaxListeners","isNaN","$getMaxListeners","that","getMaxListeners","emitNone","handler","isFn","listeners","arrayClone","emitOne","arg1","emitTwo","arg2","emitThree","arg3","emitMany","args","er","events","doError","domainEmitter","domainThrown","err","context","_addListener","listener","existing","newListener","unshift","warned","emitter","emitWarning","warn","addListener","prependListener","_onceWrap","fired","removeListener","once","prependOnceListener","list","originalListener","spliceOne","removeAllListeners","evlistener","unwrapListeners","listenerCount","eventNames","ownKeys","index","arr","copy","_get","object","property","receiver","desc","parent","getter","DIRECT_EMIT_FLAG","Context","allowedEvents","_emitter","off","_instanceMap","_clsMap","_inited","_hooks","tag","initInstance","_len","newInstance","registry","cls","checkMessageName","_isMessageNameValid","enhanced","_cls","onceListeners","messageName","callback","beforeList","_len2","_key2","emitTo","_len3","_key3","removeListeners","hasOwn","callbacks","_messageName","_callbacks","_callback","_len4","_key4","seek","EVENTS","destroyInstances","_this3","Crypto","inputBuffer","inputbuffer","outputBuffer","outputbuffer","iv","method","crypto","msCrypto","decript","aeskey","sbkey","subtle","importKey","then","decriptData","decrypt","KeySystems","WIDEVINE","PLAYREADY","MAX_LICENSE_REQUEST_FAILURES","EME","_ref","licenseUrl","mediaKeySystemConfigs","keySystem","mediaKeysList","requestLicenseFailureCount","onManifestParsed","createWidevineMediaKeySystemConfigurations","audioCodecs","videoCodecs","navigator","requestMediaKeySystemAccess","keySystemAccess","createMediaKeys","mediaKeys","setMediaKeys","onMediaEncrypted","onKeySessionMessage","keySession","requestLicense","update","keyMessage","xhr","createLicenseXhr","send","XMLHttpRequest","open","responseType","onreadystatechange","onLicenseRequestReadyStageChange","status","response","createSession","event","generateRequest","initDataType","initData","videoCapabilities","map","contentType","isSupported","checkIsIncompatibleBrowser","userAgent","isSafari","isMSBrowser","isFirefox","isEdge","MSE","container","mediaSource","sourceBuffers","preloadTime","onSourceOpen","onTimeUpdate","onUpdateEnd","onWaiting","opened","MediaSource","_url","resetContext","newCtx","updating","clearBuffer","addSourceBuffers","doAppend","tracks","track","_k","_type","mime","sourceBuffer","addSourceBuffer","inited","appendBuffer","endOfStream","cleanBuffers","taskList","_loop","task","resolve","doCleanBuffer","retryTime","clean","removeEventListener","all","removeBuffers","_loop2","_buffer","removeSourceBuffer","URL","revokeObjectURL","val","createObjectURL","buffered","bEnd","hidden","visibilityChange","msHidden","webkitHidden","PageVisibility","onShow","onHidden","handleVisibilityChange","le","buf","setInt16","Int16Array","_typeof","Symbol","iterator","READ_STREAM","READ_TEXT","READ_JSON","READ_BUFFER","FetchLoader","_reader","_canceled","_destroyed","readtype","_loaderTaskNo","load","_fetch","fetch","_x","_x2","toString","params","timer","race","internalLoad","retryTimes","headers","ok","_onFetchResponse","statusText","catch","opts","getParams","taskno","json","text","arrayBuffer","_onReader","getReader","reader","cancel","read","done","Headers","mode","cache","configHeaders","optHeaders","cors","withCredentials","credentials","_toConsumableArray","isArray","arr2","from","DevLogger","matched","exec","cookie","_status","_level","funName","arg4","arg5","arg6","arg7","arg8","arg9","arg10","_console","tagName","filter","logger","_devLogger","AUDIO","AUDIO_READY","AUDIO_WAITING","VIDEO","VIDEO_DECODER_INIT","VIDEO_READY","VIDEO_WAITING","TIMELINE","PLAY_EVENT","SET_METADATA","APPEND_CHUNKS","START_RENDER","DO_PAUSE","SYNC_DTS","UPDATE_VOLUME","UPDATE_PRELOAD_TIME","NO_AUDIO","DESTROY","READY","VIDEO_EVENTS","WAITING","CANPLAY","PLAY","PLAYING","PAUSE","LOADEDDATA","TIMEUPDATE","DURATION_CHANGE","VOLUME_CHANGE","ERROR","DECODE_FPS","LOW_DECODE","AudioTimeRange","_buffers","_duration","audioBuffer","startDts","initBgSilenceAudio","querySelector","silenceMp3","item","controls","preload","src","muted","play","playSlienceAudio","AudioContext","webkitAudioContext","MEDIA_ERR_DECODE","ERROR_MSG","INIT_AUDIO_ERR","DECODE_ERR","AudioRender","_EventEmitter","_config","_parent","_timeRange","_sampleQueue","_ready","_meta","_noAudio","_source","_onSourceBufferEnded","_initAudioCtx","volume","_bindEvents","resume","_audioCtx","_assembleErr","msg","code","_emitTimelineEvents","_gainNode","createGain","gain","connect","destination","suspend","state","_appendChunk","_startRender","_destroy","_","_assembleAAC","_checkMetaChange","sampleQueue","op","_this4","samp0","sampLast","metaChangeIndex","toDecode","splice","adtss","getAACData","chunkBuffer","combileData","decodeAudioData","uncompress","long","currentTime","createBufferSource","close","Infinity","adts","getAdts","originObjectType","aacframelength","TARGET","SCRIPT_TYPE","BlobBuilder","WebKitBlobBuilder","MozBlobBuilder","MSBlobBuilder","webkitURL","Worker","shimWorker","fn","ShimWorker","forceFallback","replace","objURL","createSourceObject","selfShim","postMessage","onmessage","isThisThread","testWorker","testArray","terminate","str","Blob","blob","getBlob","H265_DECODER_URL","shimImportScripts","eval","Module","addOnPostRun","MAX_STREAM_BUFFER_LENGTH","Decoder","infoId","infolist","par_broadwayOnBroadwayInited","broadwayOnBroadwayInited","par_broadwayOnPictureDecoded","broadwayOnPictureDecoded","dot","performance","now","elapse","toU8Array","ptr","HEAPU8","subarray","_broadwayInit","_broadwayCreateStream","infoid","sliceType","isGop","yRowcount","uvRowcount","yLinesize","uvLinesize","datetemp","Date","gopId","decodeTime","decode","getTime","_broadwayFlushStream","_broadwayPlayStream","_broadwayExit","updateMeta","decoder","onPostRun","importScripts","H264_DECODER_URL","streamBuffer","VideoTimeRange","_baseDts","_lastDuration","_compressFrame","_caclBaseDts","frame","_updateDuration","frames","pre","upDuration","deletePassed","YUVCanvas","canvas","_initMeta","_initContextGL","contextGL","_initProgram","_initBuffers","_initTextures","chroma","gl","validContextNames","nameIndex","contextName","contextOptions","getContext","getParameter","vertexShaderScript","fragmentShaderScript","YUV2RGB","vertexShader","createShader","VERTEX_SHADER","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","getShaderInfoLog","fragmentShader","FRAGMENT_SHADER","program","createProgram","attachShader","linkProgram","getProgramParameter","LINK_STATUS","getProgramInfoLog","useProgram","YUV2RGBRef","getUniformLocation","uniformMatrix4fv","shaderProgram","vertexPosBuffer","createBuffer","bindBuffer","ARRAY_BUFFER","bufferData","Float32Array","STATIC_DRAW","vertexPosRef","getAttribLocation","enableVertexAttribArray","vertexAttribPointer","FLOAT","texturePosBuffer","texturePosRef","uTexturePosBuffer","uTexturePosRef","vTexturePosBuffer","vTexturePosRef","yTextureRef","_initTexture","ySamplerRef","uniform1i","uTextureRef","uSamplerRef","vTextureRef","vSamplerRef","textureRef","createTexture","bindTexture","TEXTURE_2D","texParameteri","TEXTURE_MAG_FILTER","NEAREST","TEXTURE_MIN_FILTER","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","_drawPictureGL","ylen","uvlen","renderData","yData","uData","vData","_drawPictureGL420","yDataPerRow","yRowCnt","uDataPerRow","uRowCnt","vDataPerRow","vRowCnt","ratiow","ratioh","left","top","viewport","texturePosValues","DYNAMIC_DRAW","uTexturePosValues","vTexturePosValues","activeTexture","TEXTURE0","texImage2D","LUMINANCE","UNSIGNED_BYTE","TEXTURE1","TEXTURE2","drawArrays","TRIANGLE_STRIP","_drawPictureRGB","render","resetMeta","HAVE_NOTHING","HAVE_METADATA","HAVE_CURRENT_DATA","HAVE_FUTURE_DATA","HAVE_ENOUGH_DATA","VideoRender","_frameQueue","_canvas","_decoder","_frameRender","_wasmReady","_clearId","_lastTimeupdate","_initCanvas","updateReady","style","maxWidth","maxHeight","bottom","right","margin","_setMetadata","nextFrame","lastTimelinePosition","timelinePosition","audioSyncDts","delta","_initWorker","_selectWorker","isHevc","HevcWorker","AvcWorker","_bindWorkerEvent","_startDecode","_checkToDecode","_pushAvcc","worker","_avccpushed","vps","rawVps","rawSps","rawPps","_data","FrameRender","_decodeSample","interval","_renderDelay","preciseVideoDts","abs","cts","duartion","baseDts","lastDuration","_lastTimelinePosition","_audioDts","TimeLine","videoRender","audioRender","_readyStatus","_reset","_paused","_bindEvent","onVideoReady","resumed","pause","MVideo","_HTMLElement","_init","timeline","_logFirstFrame","noAudio","setNoAudio","_err","_innerDispatchEvent","handleMediaInfo","ready","needReset","vSam0","aSam0","setAudioMeta","handleEnded","handleErr","Event","videoWidth","display","pxVal","Number","paused","attrPreloadTime","asmSupported","MyAsmModule","Raw264Player","wasmSupported","WebComponentSupported","isComponentDefined","mediaType","videoConfig","preloadtime","handleTimeupdate","hasPlayed","hasStart","LoaderBuffer","core","Core","_cleanBuffer","isDelDom","oldTime","getBufferedRange","Player"],"mappings":"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"}