{"version":3,"file":"index.js","sources":["../../../node_modules/xgplayer-transmuxer-codec-avc/es/golomb.js","../../../node_modules/xgplayer-transmuxer-codec-avc/es/sps.js","../../../node_modules/xgplayer-transmuxer-codec-avc/es/rbsp.js","../../../node_modules/xgplayer-transmuxer-codec-avc/es/sei.js","../../../node_modules/xgplayer-transmuxer-codec-avc/es/nalunit.js","../../../node_modules/xgplayer-transmuxer-codec-avc/es/index.js","../src/raw-264.js","../../xgplayer-mobilevideo/es/nosleep/index.js","../../xgplayer-mobilevideo/es/polyfills/custom-elements.min.js","../../xgplayer-mobilevideo/es/polyfills/native-element.js","../../xgplayer-helper-utils/es/common/func/buffer-dump.js","../../xgplayer-helper-utils/es/events/index.js","../../xgplayer-helper-models/es/playlist.js","../../xgplayer-helper-models/es/presource.js","../../xgplayer-helper-models/es/stream.js","../../xgplayer-helper-models/es/track.js","../../xgplayer-helper-models/es/u8a-buffer.js","../../xgplayer-helper-models/es/track-meta.js","../../xgplayer-helper-models/es/track-sample.js","../../xgplayer-helper-models/es/media-info.js","../../xgplayer-helper-models/es/index.js","../../../node_modules/rollup-plugin-node-builtins/src/es6/events.js","../../xgplayer-helper-utils/es/context/index.js","../../xgplayer-helper-utils/es/crypto/index.js","../../xgplayer-helper-utils/es/eme/index.js","../../xgplayer-helper-utils/es/mse/index.js","../../xgplayer-helper-utils/es/sniffer/page-visibility.js","../../xgplayer-helper-utils/es/sniffer/index.js","../../xgplayer-helper-utils/es/loader-fetch/index.js","../../xgplayer-helper-utils/es/common/dev-logger.js","../../xgplayer-helper-utils/es/index.js","../../xgplayer-mobilevideo/es/events.js","../../xgplayer-mobilevideo/es/render/AudioTimeRange.js","../../xgplayer-mobilevideo/es/render/audio-helper.js","../../xgplayer-mobilevideo/es/render/AudioRender.js","../../../node_modules/rollup-plugin-bundle-worker/src/workerhelper.js","../../xgplayer-mobilevideo/es/decoder/hevc-worker.js","../../xgplayer-mobilevideo/es/decoder/worker.js","../../xgplayer-mobilevideo/es/render/VideoTimeRange.js","../../xgplayer-mobilevideo/es/render/FrameRender.js","../../xgplayer-mobilevideo/es/render/DecodeEstimate.js","../../xgplayer-mobilevideo/es/config.js","../../xgplayer-mobilevideo/es/render/VideoRender.js","../../xgplayer-mobilevideo/es/TimeLine.js","../../xgplayer-mobilevideo/es/index.js","../src/index.js"],"sourcesContent":["var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Golomb = function () {\n  function Golomb(uint8array) {\n    _classCallCheck(this, Golomb);\n\n    this.TAG = 'Golomb';\n    this._buffer = uint8array;\n    this._bufferIndex = 0;\n    this._totalBytes = uint8array.byteLength;\n    this._totalBits = uint8array.byteLength * 8;\n    this._currentWord = 0;\n    this._currentWordBitsLeft = 0;\n  }\n\n  _createClass(Golomb, [{\n    key: 'destroy',\n    value: function destroy() {\n      this._buffer = null;\n    }\n  }, {\n    key: '_fillCurrentWord',\n    value: function _fillCurrentWord() {\n      var bufferBytesLeft = this._totalBytes - this._bufferIndex;\n      if (bufferBytesLeft <= 0) {\n        // TODO 异常处理\n      }\n\n      var bytesRead = Math.min(4, bufferBytesLeft);\n      var word = new Uint8Array(4);\n      word.set(this._buffer.subarray(this._bufferIndex, this._bufferIndex + bytesRead));\n      this._currentWord = new DataView(word.buffer).getUint32(0);\n\n      this._bufferIndex += bytesRead;\n      this._currentWordBitsLeft = bytesRead * 8;\n    }\n  }, {\n    key: 'readBits',\n    value: function readBits(size) {\n      var bits = Math.min(this._currentWordBitsLeft, size); // :uint\n      var valu = this._currentWord >>> 32 - bits;\n      if (size > 32) {\n        throw new Error('Cannot read more than 32 bits at a time');\n      }\n      this._currentWordBitsLeft -= bits;\n      if (this._currentWordBitsLeft > 0) {\n        this._currentWord <<= bits;\n      } else if (this._totalBytes - this._bufferIndex > 0) {\n        this._fillCurrentWord();\n      }\n\n      bits = size - bits;\n      if (bits > 0 && this._currentWordBitsLeft) {\n        return valu << bits | this.readBits(bits);\n      } else {\n        return valu;\n      }\n    }\n  }, {\n    key: 'readBool',\n    value: function readBool() {\n      return this.readBits(1) === 1;\n    }\n  }, {\n    key: 'readByte',\n    value: function readByte() {\n      return this.readBits(8);\n    }\n  }, {\n    key: '_skipLeadingZero',\n    value: function _skipLeadingZero() {\n      var zeroCount = void 0;\n      for (zeroCount = 0; zeroCount < this._currentWordBitsLeft; zeroCount++) {\n        if ((this._currentWord & 0x80000000 >>> zeroCount) !== 0) {\n          this._currentWord <<= zeroCount;\n          this._currentWordBitsLeft -= zeroCount;\n          return zeroCount;\n        }\n      }\n      this._fillCurrentWord();\n      return zeroCount + this._skipLeadingZero();\n    }\n  }, {\n    key: 'readUEG',\n    value: function readUEG() {\n      // unsigned exponential golomb\n      var leadingZeros = this._skipLeadingZero();\n      return this.readBits(leadingZeros + 1) - 1;\n    }\n  }, {\n    key: 'readSEG',\n    value: function readSEG() {\n      // signed exponential golomb\n      var value = this.readUEG();\n      if (value & 0x01) {\n        return value + 1 >>> 1;\n      } else {\n        return -1 * (value >>> 1);\n      }\n    }\n  }]);\n\n  return Golomb;\n}();\n\nexport default Golomb;","var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nimport Golomb from './golomb';\n\nvar SPSParser = function () {\n  function SPSParser() {\n    _classCallCheck(this, SPSParser);\n  }\n\n  _createClass(SPSParser, null, [{\n    key: '_ebsp2rbsp',\n    value: function _ebsp2rbsp(uint8array) {\n      var src = uint8array;\n      var srcLength = src.byteLength;\n      var dst = new Uint8Array(srcLength);\n      var dstIdx = 0;\n\n      for (var i = 0; i < srcLength; i++) {\n        if (i >= 2) {\n          if (src[i] === 0x03 && src[i - 1] === 0x00 && src[i - 2] === 0x00) {\n            continue;\n          }\n        }\n        dst[dstIdx] = src[i];\n        dstIdx++;\n      }\n\n      return new Uint8Array(dst.buffer, 0, dstIdx);\n    }\n  }, {\n    key: 'parseSPS',\n    value: function parseSPS(uint8array) {\n      var rbsp = SPSParser._ebsp2rbsp(uint8array);\n      var gb = new Golomb(rbsp);\n\n      gb.readByte();\n      var profileIdc = gb.readByte();\n      gb.readByte();\n      var levelIdc = gb.readByte();\n      gb.readUEG();\n\n      var profile_string = SPSParser.getProfileString(profileIdc);\n      var level_string = SPSParser.getLevelString(levelIdc);\n      var chroma_format_idc = 1;\n      var chroma_format = 420;\n      var chroma_format_table = [0, 420, 422, 444];\n      var bit_depth = 8;\n\n      if (profileIdc === 100 || profileIdc === 110 || profileIdc === 122 || profileIdc === 244 || profileIdc === 44 || profileIdc === 83 || profileIdc === 86 || profileIdc === 118 || profileIdc === 128 || profileIdc === 138 || profileIdc === 144) {\n        chroma_format_idc = gb.readUEG();\n        if (chroma_format_idc === 3) {\n          gb.readBits(1);\n        }\n        if (chroma_format_idc <= 3) {\n          chroma_format = chroma_format_table[chroma_format_idc];\n        }\n\n        bit_depth = gb.readUEG() + 8;\n        gb.readUEG();\n        gb.readBits(1);\n        if (gb.readBool()) {\n          var scaling_list_count = chroma_format_idc !== 3 ? 8 : 12;\n          for (var i = 0; i < scaling_list_count; i++) {\n            if (gb.readBool()) {\n              if (i < 6) {\n                SPSParser._skipScalingList(gb, 16);\n              } else {\n                SPSParser._skipScalingList(gb, 64);\n              }\n            }\n          }\n        }\n      }\n      gb.readUEG();\n      var pic_order_cnt_type = gb.readUEG();\n      if (pic_order_cnt_type === 0) {\n        gb.readUEG();\n      } else if (pic_order_cnt_type === 1) {\n        gb.readBits(1);\n        gb.readSEG();\n        gb.readSEG();\n        var num_ref_frames_in_pic_order_cnt_cycle = gb.readUEG();\n        for (var _i = 0; _i < num_ref_frames_in_pic_order_cnt_cycle; _i++) {\n          gb.readSEG();\n        }\n      }\n      gb.readUEG();\n      gb.readBits(1);\n\n      var pic_width_in_mbs_minus1 = gb.readUEG();\n      var pic_height_in_map_units_minus1 = gb.readUEG();\n\n      var frame_mbs_only_flag = gb.readBits(1);\n      if (frame_mbs_only_flag === 0) {\n        gb.readBits(1);\n      }\n      gb.readBits(1);\n\n      var frame_crop_left_offset = 0;\n      var frame_crop_right_offset = 0;\n      var frame_crop_top_offset = 0;\n      var frame_crop_bottom_offset = 0;\n\n      var frame_cropping_flag = gb.readBool();\n      if (frame_cropping_flag) {\n        frame_crop_left_offset = gb.readUEG();\n        frame_crop_right_offset = gb.readUEG();\n        frame_crop_top_offset = gb.readUEG();\n        frame_crop_bottom_offset = gb.readUEG();\n      }\n\n      var par_width = 1,\n          par_height = 1;\n      var fps = 0,\n          fps_fixed = true,\n          fps_num = 0,\n          fps_den = 0;\n\n      var vui_parameters_present_flag = gb.readBool();\n      if (vui_parameters_present_flag) {\n        if (gb.readBool()) {\n          // aspect_ratio_info_present_flag\n          var aspect_ratio_idc = gb.readByte();\n          var par_w_table = [1, 12, 10, 16, 40, 24, 20, 32, 80, 18, 15, 64, 160, 4, 3, 2];\n          var par_h_table = [1, 11, 11, 11, 33, 11, 11, 11, 33, 11, 11, 33, 99, 3, 2, 1];\n\n          if (aspect_ratio_idc > 0 && aspect_ratio_idc < 16) {\n            par_width = par_w_table[aspect_ratio_idc - 1];\n            par_height = par_h_table[aspect_ratio_idc - 1];\n          } else if (aspect_ratio_idc === 255) {\n            par_width = gb.readByte() << 8 | gb.readByte();\n            par_height = gb.readByte() << 8 | gb.readByte();\n          }\n        }\n\n        if (gb.readBool()) {\n          gb.readBool();\n        }\n        if (gb.readBool()) {\n          gb.readBits(4);\n          if (gb.readBool()) {\n            gb.readBits(24);\n          }\n        }\n        if (gb.readBool()) {\n          gb.readUEG();\n          gb.readUEG();\n        }\n        if (gb.readBool()) {\n          var num_units_in_tick = gb.readBits(32);\n          var time_scale = gb.readBits(32);\n          fps_fixed = gb.readBool();\n\n          fps_num = time_scale;\n          fps_den = num_units_in_tick * 2;\n          fps = fps_num / fps_den;\n        }\n      }\n\n      var parScale = 1;\n      if (par_width !== 1 || par_height !== 1) {\n        parScale = par_width / par_height;\n      }\n\n      var crop_unit_x = 0,\n          crop_unit_y = 0;\n      if (chroma_format_idc === 0) {\n        crop_unit_x = 1;\n        crop_unit_y = 2 - frame_mbs_only_flag;\n      } else {\n        var sub_wc = chroma_format_idc === 3 ? 1 : 2;\n        var sub_hc = chroma_format_idc === 1 ? 2 : 1;\n        crop_unit_x = sub_wc;\n        crop_unit_y = sub_hc * (2 - frame_mbs_only_flag);\n      }\n\n      var codec_width = (pic_width_in_mbs_minus1 + 1) * 16;\n      var codec_height = (2 - frame_mbs_only_flag) * ((pic_height_in_map_units_minus1 + 1) * 16);\n\n      codec_width -= (frame_crop_left_offset + frame_crop_right_offset) * crop_unit_x;\n      codec_height -= (frame_crop_top_offset + frame_crop_bottom_offset) * crop_unit_y;\n\n      var present_width = Math.ceil(codec_width * parScale);\n\n      gb.destroy();\n      gb = null;\n\n      return {\n        profile_string: profile_string,\n        level_string: level_string,\n        bit_depth: bit_depth,\n        chroma_format: chroma_format,\n        chroma_format_string: SPSParser.getChromaFormatString(chroma_format),\n\n        frame_rate: {\n          fixed: fps_fixed,\n          fps: fps,\n          fps_den: fps_den,\n          fps_num: fps_num\n        },\n\n        par_ratio: {\n          width: par_width,\n          height: par_height\n        },\n\n        codec_size: {\n          width: codec_width,\n          height: codec_height\n        },\n\n        present_size: {\n          width: present_width,\n          height: codec_height\n        }\n      };\n    }\n  }, {\n    key: '_skipScalingList',\n    value: function _skipScalingList(gb, count) {\n      var lastScale = 8;\n      var nextScale = 8;\n      var deltaScale = 0;\n      for (var i = 0; i < count; i++) {\n        if (nextScale !== 0) {\n          deltaScale = gb.readSEG();\n          nextScale = (lastScale + deltaScale + 256) % 256;\n        }\n        lastScale = nextScale === 0 ? lastScale : nextScale;\n      }\n    }\n  }, {\n    key: 'getProfileString',\n    value: function getProfileString(profileIdc) {\n      switch (profileIdc) {\n        case 66:\n          return 'Baseline';\n        case 77:\n          return 'Main';\n        case 88:\n          return 'Extended';\n        case 100:\n          return 'High';\n        case 110:\n          return 'High10';\n        case 122:\n          return 'High422';\n        case 244:\n          return 'High444';\n        default:\n          return 'Unknown';\n      }\n    }\n  }, {\n    key: 'getLevelString',\n    value: function getLevelString(levelIdc) {\n      return (levelIdc / 10).toFixed(1);\n    }\n  }, {\n    key: 'getChromaFormatString',\n    value: function getChromaFormatString(chroma) {\n      switch (chroma) {\n        case 420:\n          return '4:2:0';\n        case 422:\n          return '4:2:2';\n        case 444:\n          return '4:4:4';\n        default:\n          return 'Unknown';\n      }\n    }\n  }, {\n    key: 'toVideoMeta',\n    value: function toVideoMeta(spsConfig) {\n      var meta = {};\n      if (spsConfig && spsConfig.codec_size) {\n        meta.codecWidth = spsConfig.codec_size.width;\n        meta.codecHeight = spsConfig.codec_size.height;\n        meta.presentWidth = spsConfig.present_size.width;\n        meta.presentHeight = spsConfig.present_size.height;\n      }\n\n      meta.profile = spsConfig.profile_string;\n      meta.level = spsConfig.level_string;\n      meta.bitDepth = spsConfig.bit_depth;\n      meta.chromaFormat = spsConfig.chroma_format;\n\n      meta.parRatio = {\n        width: spsConfig.par_ratio.width,\n        height: spsConfig.par_ratio.height\n      };\n\n      meta.frameRate = spsConfig.frame_rate;\n\n      var fpsDen = meta.frameRate.fps_den;\n      var fpsNum = meta.frameRate.fps_num;\n      meta.refSampleDuration = Math.floor(meta.timescale * (fpsDen / fpsNum));\n      return meta;\n    }\n  }]);\n\n  return SPSParser;\n}();\n\nexport default SPSParser;","var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar RBSP = function () {\n  function RBSP() {\n    _classCallCheck(this, RBSP);\n  }\n\n  _createClass(RBSP, null, [{\n    key: \"EBSP2RBSP\",\n\n    /**\n     * convert EBSP to RBSP\n     * @param data {Uint8Array}\n     * @returns {Uint8Array}\n     * @constructor\n     */\n    value: function EBSP2RBSP(data) {\n      return data.filter(function (el, idx) {\n        if (idx < 2) {\n          return true;\n        } else {\n          return !(data[idx - 2] === 0 && data[idx - 1] === 0 && el === 3);\n        }\n      });\n    }\n\n    /**\n     * @param data {Uint8Array}\n     * @constructor\n     */\n\n  }, {\n    key: \"EBSP2SODB\",\n    value: function EBSP2SODB(data) {\n      var lastByte = data[data.byteLength - 1];\n      if (lastByte && lastByte === 128) {\n        return data.slice(0, data.byteLength - 1);\n      }\n\n      return data;\n    }\n  }]);\n\n  return RBSP;\n}();\n\nexport default RBSP;","var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nimport RBSP from './rbsp';\n\nvar u8aToString = function u8aToString(data) {\n  var result = '';\n  for (var i = 0; i < data.byteLength; i++) {\n    result += String.fromCharCode(data[i]);\n  }\n  return result;\n};\n\nvar SEIParser = function () {\n  function SEIParser() {\n    _classCallCheck(this, SEIParser);\n  }\n\n  _createClass(SEIParser, null, [{\n    key: '_resolveNalu',\n    value: function _resolveNalu(data) {\n      if (data.length >= 1) {\n        return RBSP.EBSP2SODB(RBSP.EBSP2RBSP(data.slice(1)));\n      }\n      return null;\n    }\n    /**\n     *\n     * @param data {Uint8Array}\n     */\n\n  }, {\n    key: 'parse',\n    value: function parse(data) {\n      var sodb = SEIParser._resolveNalu(data);\n\n      var _SEIParser$switchPayl = SEIParser.switchPayloadType(sodb),\n          payloadType = _SEIParser$switchPayl.payloadType,\n          offset = _SEIParser$switchPayl.offset;\n\n      var content = sodb.slice(offset);\n\n      switch (payloadType) {\n        case 5:\n          return SEIParser.user_data_unregistered(content);\n        default:\n          return {\n            code: payloadType,\n            content: content\n          };\n      }\n    }\n\n    /**\n     *\n     * @param data\n     * @returns {{payloadType: number, offset: number}}\n     */\n\n  }, {\n    key: 'switchPayloadType',\n    value: function switchPayloadType(data) {\n      var dv = new DataView(data.buffer);\n      var payloadType = 0;\n      var offset = 0;\n      while (dv.getUint8(offset) === 255) {\n        offset++;\n        payloadType += 255;\n      }\n      payloadType += dv.getUint8(offset++);\n\n      return {\n        payloadType: payloadType,\n        offset: offset\n      };\n    }\n\n    /**\n     *\n     * @param data {Uint8Array}\n     * @return {{ payloadLength: number, offset: number }}\n     */\n\n  }, {\n    key: 'getPayloadLength',\n    value: function getPayloadLength(data) {\n      var dv = new DataView(data.buffer);\n\n      var payloadLength = 0;\n      var offset = 0;\n      while (dv.getUint8(offset) === 255) {\n        offset++;\n        payloadLength += 255;\n      }\n      payloadLength += dv.getUint8(offset++);\n\n      return {\n        payloadLength: payloadLength,\n        offset: offset\n      };\n    }\n\n    /**\n     * resolve 0x05 user data unregistered\n     * @param data {Uint8Array}\n     */\n    // eslint-disable-next-line camelcase\n\n  }, {\n    key: 'user_data_unregistered',\n    value: function user_data_unregistered(data) {\n      var _SEIParser$getPayload = SEIParser.getPayloadLength(data),\n          payloadLength = _SEIParser$getPayload.payloadLength,\n          offset = _SEIParser$getPayload.offset;\n\n      if (payloadLength < 16) {\n        return {\n          uuid: '',\n          content: null\n        };\n      }\n      var payload = data.slice(offset);\n\n      var uuid = u8aToString(payload.slice(0, 16));\n      var content = u8aToString(payload.slice(16, payloadLength));\n\n      return {\n        code: 5, // for user data unregistered\n        uuid: uuid,\n        content: content\n      };\n    }\n  }]);\n\n  return SEIParser;\n}();\n\nexport default SEIParser;","var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nimport SpsParser from './sps';\nimport SEIParser from './sei';\nimport RBSP from './rbsp';\n\nvar Nalunit = function () {\n  function Nalunit() {\n    _classCallCheck(this, Nalunit);\n  }\n\n  _createClass(Nalunit, null, [{\n    key: 'getNalunits',\n    value: function getNalunits(buffer) {\n      if (buffer.length - buffer.position < 4) {\n        return [];\n      }\n\n      var buf = buffer.dataview;\n      var position = buffer.position;\n      if (buf.getInt32(position) === 1 || buf.getInt16(position) === 0 && buf.getInt8(position + 3) === 1) {\n        return Nalunit.getAnnexbNals(buffer);\n      } else {\n        return Nalunit.getAvccNals(buffer);\n      }\n    }\n  }, {\n    key: 'getAnnexbNals',\n    value: function getAnnexbNals(buffer) {\n      var nals = [];\n      var position = Nalunit.getHeaderPositionAnnexB(buffer);\n      var start = position.pos;\n      var end = start;\n      while (start < buffer.length - 4) {\n        var header = buffer.buffer.slice(start, start + position.headerLength);\n        if (position.pos === buffer.position) {\n          buffer.skip(position.headerLength);\n        }\n        position = Nalunit.getHeaderPositionAnnexB(buffer);\n        end = position.pos;\n        var body = new Uint8Array(buffer.buffer.slice(start + header.byteLength, end));\n        var unit = { header: header, body: body };\n        Nalunit.analyseNal(unit);\n        if (unit.type <= 9 && unit.type !== 0) {\n          nals.push(unit);\n        }\n        buffer.skip(end - buffer.position);\n        start = end;\n      }\n      return nals;\n    }\n  }, {\n    key: 'getAvccNals',\n    value: function getAvccNals(buffer) {\n      // buffer.buffer = RBSP.EBSP2RBSP(new Uint8Array(buffer.buffer)).buffer;\n      // buffer.dataview = new DataView(buffer.buffer)\n      // buffer.dataview.position = 0;\n      var nals = [];\n      while (buffer.position < buffer.length - 4) {\n        var length = buffer.dataview.getInt32(buffer.dataview.position);\n        if (buffer.length - buffer.position >= length) {\n          var header = buffer.buffer.slice(buffer.position, buffer.position + 4);\n          buffer.skip(4);\n          var body = new Uint8Array(buffer.buffer.slice(buffer.position, buffer.position + length));\n          buffer.skip(length);\n          var unit = { header: header, body: body };\n          Nalunit.analyseNal(unit);\n          if (unit.type <= 9 && unit.type !== 0) {\n            nals.push(unit);\n          }\n        } else {\n          break;\n        }\n      }\n      return nals;\n    }\n  }, {\n    key: 'analyseNal',\n    value: function analyseNal(unit) {\n      var type = unit.body[0] & 0x1f;\n      unit.type = type;\n      switch (type) {\n        case 1:\n          // NDR\n          unit.ndr = true;\n          break;\n        case 5:\n          // IDR\n          unit.idr = true;\n          break;\n        case 6:\n          // SEI\n          unit.sei = SEIParser.parse(unit.body);\n          break;\n        case 7:\n          // SPS\n          unit.sps = SpsParser.parseSPS(unit.body);\n          break;\n        case 8:\n          // PPS\n          unit.pps = true;\n          break;\n        case 9:\n          // AUD\n          break;\n        default:\n          break;\n      }\n    }\n  }, {\n    key: 'getHeaderPositionAnnexB',\n    value: function getHeaderPositionAnnexB(buffer) {\n      // seperate\n      var pos = buffer.position;\n      var headerLength = 0;\n      var bufferLen = buffer.length;\n      while (headerLength !== 3 && headerLength !== 4 && pos < bufferLen - 4) {\n        if (buffer.dataview.getInt16(pos) === 0) {\n          if (buffer.dataview.getInt16(pos + 2) === 1) {\n            // 0x000001\n            headerLength = 4;\n          } else if (buffer.dataview.getInt8(pos + 2) === 1) {\n            headerLength = 3;\n          } else {\n            pos++;\n          }\n        } else {\n          pos++;\n        }\n      }\n\n      if (pos === bufferLen - 4) {\n        if (buffer.dataview.getInt16(pos) === 0) {\n          if (buffer.dataview.getInt16(pos + 2) === 1) {\n            // 0x000001\n            headerLength = 4;\n          }\n        } else {\n          pos++;\n          if (buffer.dataview.getInt16(pos) === 0 && buffer.dataview.getInt8(pos) === 1) {\n            // 0x0000001\n            headerLength = 3;\n          } else {\n            pos = bufferLen;\n          }\n        }\n      }\n      return { pos: pos, headerLength: headerLength };\n    }\n  }, {\n    key: 'getAvcc',\n    value: function getAvcc(sps, pps) {\n      var ret = new Uint8Array(sps.byteLength + pps.byteLength + 11);\n      ret[0] = 0x01;\n      ret[1] = sps[1];\n      ret[2] = sps[2];\n      ret[3] = sps[3];\n      ret[4] = 255;\n      ret[5] = 225;\n\n      var offset = 6;\n\n      ret.set(new Uint8Array([sps.byteLength >>> 8 & 0xff, sps.byteLength & 0xff]), offset);\n      offset += 2;\n      ret.set(sps, offset);\n      offset += sps.byteLength;\n\n      ret[offset] = 1;\n      offset++;\n\n      ret.set(new Uint8Array([pps.byteLength >>> 8 & 0xff, pps.byteLength & 0xff]), offset);\n      offset += 2;\n      ret.set(pps, offset);\n      return ret;\n    }\n  }]);\n\n  return Nalunit;\n}();\n\nexport default Nalunit;","import _SpsParser from './sps';\nimport _NalUnit from './nalunit';\nimport _SEIParser from './sei';\nimport _Golomb from './golomb';\nexport var SpsParser = _SpsParser;\nexport var NalUnit = _NalUnit;\nexport var SEIParser = _SEIParser;\nexport var Golomb = _Golomb;","import { NalUnit, SpsParser, SEIParser, Golomb } from 'xgplayer-transmuxer-codec-avc'\nimport XgStream from 'xgplayer-transmuxer-buffer-stream'\nimport { VideoTrackMeta } from 'xgplayer-transmuxer-model-trackmeta';\nimport Events from 'xgplayer-transmuxer-constant-events'\n\nclass H264Demuxer {\n  constructor (options = {}) {\n    this._player = options.player;\n\n    this.videoMeta = new VideoTrackMeta()\n    this.videoTrack = {\n      samples: []\n    }\n    this.unusedUnits = [];\n    this.fps = options.fps || 30\n    this.currentSampleIdx = 0;\n    this.duration = 0;\n    this.sps = null;\n    this.pps = null;\n\n    this.dataLoadedTimer = null;\n  }\n\n  init () {\n    this.initEvents()\n  }\n\n  initEvents () {\n    this.on(Events.LOADER_EVENTS.LOADER_DATALOADED, this.handleDataLoaded.bind(this))\n    this.on(Events.LOADER_EVENTS.LOADER_COMPLETE, this.handleDataLoaded.bind(this))\n  }\n\n  load (url) {\n    this.emit(Events.LOADER_EVENTS.LADER_START, url);\n  }\n\n  handleDataLoaded () {\n    const buffer = this.buffer;\n\n    if (!buffer) {\n      return;\n    }\n    if (this.dataLoadedTimer) {\n      clearTimeout(this.dataLoadedTimer);\n      this.dataLoadedTimer = null;\n    }\n\n    const data = buffer.shift(buffer.length);\n    buffer.clear();\n    const stream = new XgStream(data.buffer);\n\n    const units = this.unusedUnits.concat(NalUnit.getNalunits(stream))\n\n    if (!this._player.config.isLive) {\n      if (units.length > 1) {\n        const lastUnit = units.pop();\n        const pushBackData = new Uint8Array(lastUnit.body.byteLength + 4)\n        pushBackData.set(new Uint8Array(lastUnit.header), 0);\n        pushBackData.set(lastUnit.body, 4);\n        buffer.push(pushBackData)\n\n        this.pushToMobileVideo(units);\n        if (this.buffer.length) {\n          this.dataLoadedTimer = setTimeout(() => {\n            this.handleDataLoaded();\n          }, 500)\n        }\n      } else if (units.length === 1){\n        buffer.push(new Uint8Array(data))\n        this.dataLoadedTimer = setTimeout(() => {\n          this.handleDataLoaded();\n        }, 500)\n      }\n    } else {\n      this.pushToMobileVideo(units);\n    }\n  }\n\n  pushToMobileVideo (units) {\n\n    const { samples, unused } = H264Demuxer.unitsToSamples(units);\n\n    this.unusedUnits = unused;\n\n    samples.forEach((sample) => {\n      const ts = Math.floor(1000 * this.currentSampleIdx++ / this.fps)\n      sample.dts = sample.pts = ts;\n      if (sample.sps) {\n        this.sps = true;\n        this.videoMeta.sps = sample.data.slice(4)\n        this.videoMeta.presentHeight = sample.sps.present_size.height;\n        this.videoMeta.presentWidth = sample.sps.present_size.width;\n      } else if (sample.pps) {\n        this.pps = true;\n        this.videoMeta.pps = sample.data.slice(4)\n      } else {\n        this.videoTrack.samples.push(sample);\n      }\n\n    })\n\n    if (this.sps && this.pps) {\n      this._player.video.setVideoMeta(this.videoMeta);\n      this.sps = null;\n      this.pps = null;\n    }\n    if (!this.intervalId && !this._player.config.isLive) {\n      this.intervalId = setInterval(() => {\n        this.handleDataLoaded()\n      }, 500)\n    } else {\n      this._player.video.onDemuxComplete(this.videoTrack);\n    }\n    this.duration = Math.round(Math.floor(this.currentSampleIdx / this.fps))\n    this._player.emit('durationchange')\n  }\n\n  destroy () {\n    this._player = null;\n    this.videoMeta = null\n    this.videoTrack = {\n      samples: []\n    }\n    this.fps = null\n    this.currentSampleIdx = null;\n    if (this.intervalId) {\n      window.clearInterval(this.intervalId);\n      this.intervalId = null;\n    }\n  }\n\n  static unitsToSamples (units) {\n    let temp = [];\n    const samples = []\n    units.forEach((unit) => {\n      const golomb = new Golomb(new Uint8Array(unit.body));\n      golomb.readByte();\n      if (!golomb.readUEG() || unit.sps || unit.pps) { // first_mb_slice\n        if (temp.length) {\n          samples.push(H264Demuxer.combineUnits(temp))\n        }\n        temp = [unit];\n      } else {\n        temp.push(unit)\n      }\n    })\n\n    return {\n      samples,\n      unused: temp\n    }\n  }\n\n  static combineUnits (units) {\n    let sps, pps;\n    const dataSize = units.reduce((result, unit) => {\n      if (unit.sps) {\n        sps = unit.sps;\n      } else if (unit.pps) {\n        pps = unit.pps;\n      }\n      return result + unit.header.byteLength + unit.body.byteLength;\n    }, 0)\n\n    const data = new Uint8Array(dataSize);\n    let offset = 0;\n    let isKeyframe;\n    units.forEach((unit) => {\n      data.set(new Uint8Array(unit.header), offset);\n      offset += unit.header.byteLength;\n      data.set(unit.body, offset);\n      offset += unit.body.byteLength;\n      if (unit.idr) {\n        isKeyframe = true\n      }\n    })\n\n    return {\n      data,\n      sps,\n      pps,\n      isKeyframe\n    }\n  }\n\n  get buffer () {\n    return this._context.getInstance('LOADER_BUFFER')\n  }\n}\n\nexport default H264Demuxer;\n","var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar mp4 = 'data:video/mp4;base64, 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';\n\n// Detect iOS browsers < version 10\nvar oldIOS = typeof navigator !== 'undefined' && parseFloat(('' + (/CPU.*OS ([0-9_]{3,4})[0-9_]{0,1}|(CPU like).*AppleWebKit.*Mobile/i.exec(navigator.userAgent) || [0, ''])[1]).replace('undefined', '3_2').replace('_', '.').replace('_', '')) < 10 && !window.MSStream;\n\n// Detect native Wake Lock API support\n// const nativeWakeLock = 'wakeLock' in navigator;\nvar nativeWakeLock = false;\nconsole.log('nativeWakeLock', nativeWakeLock);\n\nvar NoSleep = function () {\n  function NoSleep() {\n    var _this = this;\n\n    _classCallCheck(this, NoSleep);\n\n    if (nativeWakeLock) {\n      this._wakeLock = null;\n      var handleVisibilityChange = function handleVisibilityChange() {\n        if (_this._wakeLock !== null && document.visibilityState === 'visible') {\n          _this.enable();\n        }\n      };\n      document.addEventListener('visibilitychange', handleVisibilityChange);\n      document.addEventListener('fullscreenchange', handleVisibilityChange);\n    } else if (oldIOS) {\n      this.noSleepTimer = null;\n    } else {\n      // Set up no sleep video element\n      this.noSleepVideo = document.createElement('video');\n\n      this.noSleepVideo.setAttribute('title', 'No Sleep');\n      this.noSleepVideo.setAttribute('playsinline', '');\n\n      this._addSourceToVideo(this.noSleepVideo, 'mp4', mp4);\n\n      this.noSleepVideo.addEventListener('loadedmetadata', function () {\n        _this.noSleepVideo.setAttribute('loop', '');\n      });\n    }\n  }\n\n  _createClass(NoSleep, [{\n    key: '_addSourceToVideo',\n    value: function _addSourceToVideo(element, type, dataURI) {\n      var source = document.createElement('source');\n      source.src = dataURI;\n      source.type = 'video/' + type;\n      element.appendChild(source);\n    }\n  }, {\n    key: 'enable',\n    value: function enable() {\n      var _this2 = this;\n\n      if (nativeWakeLock) {\n        navigator.wakeLock.request('screen').then(function (wakeLock) {\n          _this2._wakeLock = wakeLock;\n          console.log('Wake Lock active.');\n          _this2._wakeLock.addEventListener('release', function () {\n            // ToDo: Potentially emit an event for the page to observe since\n            // Wake Lock releases happen when page visibility changes.\n            // (https://web.dev/wakelock/#wake-lock-lifecycle)\n            console.log('Wake Lock released.');\n          });\n        }).catch(function (err) {\n          console.error(err.name + ', ' + err.message);\n        });\n      } else if (oldIOS) {\n        this.disable();\n        console.warn('\\n        NoSleep enabled for older iOS devices. This can interrupt\\n        active or long-running network requests from completing successfully.\\n        See https://github.com/richtr/NoSleep.js/issues/15 for more details.\\n      ');\n        this.noSleepTimer = window.setInterval(function () {\n          if (!document.hidden) {\n            window.location.href = window.location.href.split('#')[0];\n            window.setTimeout(window.stop, 0);\n          }\n        }, 15000);\n      } else {\n        this.noSleepVideo.play().catch(function (e) {});\n      }\n    }\n  }, {\n    key: 'disable',\n    value: function disable() {\n      if (nativeWakeLock) {\n        this._wakeLock.release();\n        this._wakeLock = null;\n      } else if (oldIOS) {\n        if (this.noSleepTimer) {\n          console.warn('\\n          NoSleep now disabled for older iOS devices.\\n        ');\n          window.clearInterval(this.noSleepTimer);\n          this.noSleepTimer = null;\n        }\n      } else {\n        this.noSleepVideo.pause();\n      }\n    }\n  }]);\n\n  return NoSleep;\n}();\n\nexport default NoSleep;","(function () {\n  /*\n    Copyright (c) 2016 The Polymer Project Authors. All rights reserved.\n   This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\n   The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\n   The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\n   Code distributed by Google as part of the polymer project is also\n   subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n  */\n  'use strict';\n  var n = window.Document.prototype.createElement,\n      p = window.Document.prototype.createElementNS,\n      aa = window.Document.prototype.importNode,\n      ba = window.Document.prototype.prepend,\n      ca = window.Document.prototype.append,\n      da = window.DocumentFragment.prototype.prepend,\n      ea = window.DocumentFragment.prototype.append,\n      q = window.Node.prototype.cloneNode,\n      r = window.Node.prototype.appendChild,\n      t = window.Node.prototype.insertBefore,\n      u = window.Node.prototype.removeChild,\n      v = window.Node.prototype.replaceChild,\n      x = Object.getOwnPropertyDescriptor(window.Node.prototype, \"textContent\"),\n      y = window.Element.prototype.attachShadow,\n      z = Object.getOwnPropertyDescriptor(window.Element.prototype, \"innerHTML\"),\n      A = window.Element.prototype.getAttribute,\n      B = window.Element.prototype.setAttribute,\n      C = window.Element.prototype.removeAttribute,\n      D = window.Element.prototype.getAttributeNS,\n      E = window.Element.prototype.setAttributeNS,\n      F = window.Element.prototype.removeAttributeNS,\n      G = window.Element.prototype.insertAdjacentElement,\n      fa = window.Element.prototype.insertAdjacentHTML,\n      ha = window.Element.prototype.prepend,\n      ia = window.Element.prototype.append,\n      ja = window.Element.prototype.before,\n      ka = window.Element.prototype.after,\n      la = window.Element.prototype.replaceWith,\n      ma = window.Element.prototype.remove,\n      na = window.HTMLElement,\n      H = Object.getOwnPropertyDescriptor(window.HTMLElement.prototype, \"innerHTML\"),\n      oa = window.HTMLElement.prototype.insertAdjacentElement,\n      pa = window.HTMLElement.prototype.insertAdjacentHTML;var qa = new Set();\"annotation-xml color-profile font-face font-face-src font-face-uri font-face-format font-face-name missing-glyph\".split(\" \").forEach(function (a) {\n    return qa.add(a);\n  });function ra(a) {\n    var b = qa.has(a);a = /^[a-z][.0-9_a-z]*-[\\-.0-9_a-z]*$/.test(a);return !b && a;\n  }var sa = document.contains ? document.contains.bind(document) : document.documentElement.contains.bind(document.documentElement);\n  function I(a) {\n    var b = a.isConnected;if (void 0 !== b) return b;if (sa(a)) return !0;for (; a && !(a.__CE_isImportDocument || a instanceof Document);) {\n      a = a.parentNode || (window.ShadowRoot && a instanceof ShadowRoot ? a.host : void 0);\n    }return !(!a || !(a.__CE_isImportDocument || a instanceof Document));\n  }function J(a) {\n    var b = a.children;if (b) return Array.prototype.slice.call(b);b = [];for (a = a.firstChild; a; a = a.nextSibling) {\n      a.nodeType === Node.ELEMENT_NODE && b.push(a);\n    }return b;\n  }\n  function K(a, b) {\n    for (; b && b !== a && !b.nextSibling;) {\n      b = b.parentNode;\n    }return b && b !== a ? b.nextSibling : null;\n  }\n  function L(a, b, c) {\n    for (var f = a; f;) {\n      if (f.nodeType === Node.ELEMENT_NODE) {\n        var d = f;b(d);var e = d.localName;if (\"link\" === e && \"import\" === d.getAttribute(\"rel\")) {\n          f = d.import;void 0 === c && (c = new Set());if (f instanceof Node && !c.has(f)) for (c.add(f), f = f.firstChild; f; f = f.nextSibling) {\n            L(f, b, c);\n          }f = K(a, d);continue;\n        } else if (\"template\" === e) {\n          f = K(a, d);continue;\n        }if (d = d.__CE_shadowRoot) for (d = d.firstChild; d; d = d.nextSibling) {\n          L(d, b, c);\n        }\n      }f = f.firstChild ? f.firstChild : K(a, f);\n    }\n  }function M(a, b, c) {\n    a[b] = c;\n  };function ta(a) {\n    var b = document;this.c = a;this.a = b;this.b = void 0;N(this.c, this.a);\"loading\" === this.a.readyState && (this.b = new MutationObserver(this.f.bind(this)), this.b.observe(this.a, { childList: !0, subtree: !0 }));\n  }function ua(a) {\n    a.b && a.b.disconnect();\n  }ta.prototype.f = function (a) {\n    var b = this.a.readyState;\"interactive\" !== b && \"complete\" !== b || ua(this);for (b = 0; b < a.length; b++) {\n      for (var c = a[b].addedNodes, f = 0; f < c.length; f++) {\n        N(this.c, c[f]);\n      }\n    }\n  };function va() {\n    var a = this;this.b = this.a = void 0;this.c = new Promise(function (b) {\n      a.b = b;a.a && b(a.a);\n    });\n  }function wa(a) {\n    if (a.a) throw Error(\"Already resolved.\");a.a = void 0;a.b && a.b(void 0);\n  };function O(a) {\n    this.f = new Map();this.g = new Map();this.l = new Map();this.i = !1;this.b = a;this.j = new Map();this.c = function (b) {\n      return b();\n    };this.a = !1;this.h = [];this.m = a.f ? new ta(a) : void 0;\n  }O.prototype.o = function (a, b) {\n    var c = this;if (!(b instanceof Function)) throw new TypeError(\"Custom element constructor getters must be functions.\");xa(this, a);this.f.set(a, b);this.h.push(a);this.a || (this.a = !0, this.c(function () {\n      return ya(c);\n    }));\n  };\n  O.prototype.define = function (a, b) {\n    var c = this;if (!(b instanceof Function)) throw new TypeError(\"Custom element constructors must be functions.\");xa(this, a);za(this, a, b);this.h.push(a);this.a || (this.a = !0, this.c(function () {\n      return ya(c);\n    }));\n  };function xa(a, b) {\n    if (!ra(b)) throw new SyntaxError(\"The element name '\" + b + \"' is not valid.\");if (P(a, b)) throw Error(\"A custom element with name '\" + b + \"' has already been defined.\");if (a.i) throw Error(\"A custom element is already being defined.\");\n  }\n  function za(a, b, c) {\n    a.i = !0;var f;try {\n      var d = function d(m) {\n        var w = e[m];if (void 0 !== w && !(w instanceof Function)) throw Error(\"The '\" + m + \"' callback must be a function.\");return w;\n      },\n          e = c.prototype;if (!(e instanceof Object)) throw new TypeError(\"The custom element constructor's prototype is not an object.\");var g = d(\"connectedCallback\");var h = d(\"disconnectedCallback\");var k = d(\"adoptedCallback\");var l = (f = d(\"attributeChangedCallback\")) && c.observedAttributes || [];\n    } catch (m) {\n      throw m;\n    } finally {\n      a.i = !1;\n    }c = { localName: b, constructorFunction: c,\n      connectedCallback: g, disconnectedCallback: h, adoptedCallback: k, attributeChangedCallback: f, observedAttributes: l, constructionStack: [] };a.g.set(b, c);a.l.set(c.constructorFunction, c);return c;\n  }O.prototype.upgrade = function (a) {\n    N(this.b, a);\n  };\n  function ya(a) {\n    if (!1 !== a.a) {\n      a.a = !1;for (var b = [], c = a.h, f = new Map(), d = 0; d < c.length; d++) {\n        f.set(c[d], []);\n      }N(a.b, document, { upgrade: function upgrade(k) {\n          if (void 0 === k.__CE_state) {\n            var l = k.localName,\n                m = f.get(l);m ? m.push(k) : a.g.has(l) && b.push(k);\n          }\n        } });for (d = 0; d < b.length; d++) {\n        Q(a.b, b[d]);\n      }for (d = 0; d < c.length; d++) {\n        for (var e = c[d], g = f.get(e), h = 0; h < g.length; h++) {\n          Q(a.b, g[h]);\n        }(e = a.j.get(e)) && wa(e);\n      }c.length = 0;\n    }\n  }O.prototype.get = function (a) {\n    if (a = P(this, a)) return a.constructorFunction;\n  };\n  O.prototype.whenDefined = function (a) {\n    if (!ra(a)) return Promise.reject(new SyntaxError(\"'\" + a + \"' is not a valid custom element name.\"));var b = this.j.get(a);if (b) return b.c;b = new va();this.j.set(a, b);var c = this.g.has(a) || this.f.has(a);a = -1 === this.h.indexOf(a);c && a && wa(b);return b.c;\n  };O.prototype.polyfillWrapFlushCallback = function (a) {\n    this.m && ua(this.m);var b = this.c;this.c = function (c) {\n      return a(function () {\n        return b(c);\n      });\n    };\n  };\n  function P(a, b) {\n    var c = a.g.get(b);if (c) return c;if (c = a.f.get(b)) {\n      a.f.delete(b);try {\n        return za(a, b, c());\n      } catch (f) {\n        R(f);\n      }\n    }\n  }window.CustomElementRegistry = O;O.prototype.define = O.prototype.define;O.prototype.upgrade = O.prototype.upgrade;O.prototype.get = O.prototype.get;O.prototype.whenDefined = O.prototype.whenDefined;O.prototype.polyfillDefineLazy = O.prototype.o;O.prototype.polyfillWrapFlushCallback = O.prototype.polyfillWrapFlushCallback;function S() {\n    var a = T && T.noDocumentConstructionObserver,\n        b = T && T.shadyDomFastWalk;this.b = [];this.c = [];this.a = !1;this.shadyDomFastWalk = b;this.f = !a;\n  }function U(a, b, c, f) {\n    var d = window.ShadyDOM;if (a.shadyDomFastWalk && d && d.inUse) {\n      if (b.nodeType === Node.ELEMENT_NODE && c(b), b.querySelectorAll) for (a = d.nativeMethods.querySelectorAll.call(b, \"*\"), b = 0; b < a.length; b++) {\n        c(a[b]);\n      }\n    } else L(b, c, f);\n  }function Aa(a, b) {\n    a.a = !0;a.b.push(b);\n  }function Ba(a, b) {\n    a.a = !0;a.c.push(b);\n  }function V(a, b) {\n    a.a && U(a, b, function (c) {\n      return W(a, c);\n    });\n  }\n  function W(a, b) {\n    if (a.a && !b.__CE_patched) {\n      b.__CE_patched = !0;for (var c = 0; c < a.b.length; c++) {\n        a.b[c](b);\n      }for (c = 0; c < a.c.length; c++) {\n        a.c[c](b);\n      }\n    }\n  }function X(a, b) {\n    var c = [];U(a, b, function (d) {\n      return c.push(d);\n    });for (b = 0; b < c.length; b++) {\n      var f = c[b];1 === f.__CE_state ? a.connectedCallback(f) : Q(a, f);\n    }\n  }function Y(a, b) {\n    var c = [];U(a, b, function (d) {\n      return c.push(d);\n    });for (b = 0; b < c.length; b++) {\n      var f = c[b];1 === f.__CE_state && a.disconnectedCallback(f);\n    }\n  }\n  function N(a, b, c) {\n    c = void 0 === c ? {} : c;var f = c.s,\n        d = c.upgrade || function (g) {\n      return Q(a, g);\n    },\n        e = [];U(a, b, function (g) {\n      a.a && W(a, g);if (\"link\" === g.localName && \"import\" === g.getAttribute(\"rel\")) {\n        var h = g.import;h instanceof Node && (h.__CE_isImportDocument = !0, h.__CE_registry = document.__CE_registry);h && \"complete\" === h.readyState ? h.__CE_documentLoadHandled = !0 : g.addEventListener(\"load\", function () {\n          var k = g.import;if (!k.__CE_documentLoadHandled) {\n            k.__CE_documentLoadHandled = !0;var l = new Set();f && (f.forEach(function (m) {\n              return l.add(m);\n            }), l.delete(k));N(a, k, { s: l, upgrade: d });\n          }\n        });\n      } else e.push(g);\n    }, f);for (b = 0; b < e.length; b++) {\n      d(e[b]);\n    }\n  }\n  function Q(a, b) {\n    try {\n      var c = b.ownerDocument,\n          f = c.__CE_registry;var d = f && (c.defaultView || c.__CE_isImportDocument) ? P(f, b.localName) : void 0;if (d && void 0 === b.__CE_state) {\n        d.constructionStack.push(b);try {\n          try {\n            if (new d.constructorFunction() !== b) throw Error(\"The custom element constructor did not produce the element being upgraded.\");\n          } finally {\n            d.constructionStack.pop();\n          }\n        } catch (k) {\n          throw b.__CE_state = 2, k;\n        }b.__CE_state = 1;b.__CE_definition = d;if (d.attributeChangedCallback && b.hasAttributes()) {\n          var e = d.observedAttributes;\n          for (d = 0; d < e.length; d++) {\n            var g = e[d],\n                h = b.getAttribute(g);null !== h && a.attributeChangedCallback(b, g, null, h, null);\n          }\n        }I(b) && a.connectedCallback(b);\n      }\n    } catch (k) {\n      R(k);\n    }\n  }S.prototype.connectedCallback = function (a) {\n    var b = a.__CE_definition;if (b.connectedCallback) try {\n      b.connectedCallback.call(a);\n    } catch (c) {\n      R(c);\n    }\n  };S.prototype.disconnectedCallback = function (a) {\n    var b = a.__CE_definition;if (b.disconnectedCallback) try {\n      b.disconnectedCallback.call(a);\n    } catch (c) {\n      R(c);\n    }\n  };\n  S.prototype.attributeChangedCallback = function (a, b, c, f, d) {\n    var e = a.__CE_definition;if (e.attributeChangedCallback && -1 < e.observedAttributes.indexOf(b)) try {\n      e.attributeChangedCallback.call(a, b, c, f, d);\n    } catch (g) {\n      R(g);\n    }\n  };\n  function Ca(a, b, c, f) {\n    var d = b.__CE_registry;if (d && (null === f || \"http://www.w3.org/1999/xhtml\" === f) && (d = P(d, c))) try {\n      var e = new d.constructorFunction();if (void 0 === e.__CE_state || void 0 === e.__CE_definition) throw Error(\"Failed to construct '\" + c + \"': The returned value was not constructed with the HTMLElement constructor.\");if (\"http://www.w3.org/1999/xhtml\" !== e.namespaceURI) throw Error(\"Failed to construct '\" + c + \"': The constructed element's namespace must be the HTML namespace.\");if (e.hasAttributes()) throw Error(\"Failed to construct '\" + c + \"': The constructed element must not have any attributes.\");if (null !== e.firstChild) throw Error(\"Failed to construct '\" + c + \"': The constructed element must not have any children.\");if (null !== e.parentNode) throw Error(\"Failed to construct '\" + c + \"': The constructed element must not have a parent node.\");if (e.ownerDocument !== b) throw Error(\"Failed to construct '\" + c + \"': The constructed element's owner document is incorrect.\");if (e.localName !== c) throw Error(\"Failed to construct '\" + c + \"': The constructed element's local name is incorrect.\");\n      return e;\n    } catch (g) {\n      return R(g), b = null === f ? n.call(b, c) : p.call(b, f, c), Object.setPrototypeOf(b, HTMLUnknownElement.prototype), b.__CE_state = 2, b.__CE_definition = void 0, W(a, b), b;\n    }b = null === f ? n.call(b, c) : p.call(b, f, c);W(a, b);return b;\n  }\n  function R(a) {\n    var b = a.message,\n        c = a.sourceURL || a.fileName || \"\",\n        f = a.line || a.lineNumber || 0,\n        d = a.column || a.columnNumber || 0,\n        e = void 0;void 0 === ErrorEvent.prototype.initErrorEvent ? e = new ErrorEvent(\"error\", { cancelable: !0, message: b, filename: c, lineno: f, colno: d, error: a }) : (e = document.createEvent(\"ErrorEvent\"), e.initErrorEvent(\"error\", !1, !0, b, c, f), e.preventDefault = function () {\n      Object.defineProperty(this, \"defaultPrevented\", { configurable: !0, get: function get() {\n          return !0;\n        } });\n    });void 0 === e.error && Object.defineProperty(e, \"error\", { configurable: !0, enumerable: !0, get: function get() {\n        return a;\n      } });window.dispatchEvent(e);e.defaultPrevented || console.error(a);\n  };var Da = new function () {}();function Ea(a) {\n    window.HTMLElement = function () {\n      function b() {\n        var c = this.constructor;var f = document.__CE_registry.l.get(c);if (!f) throw Error(\"Failed to construct a custom element: The constructor was not registered with `customElements`.\");var d = f.constructionStack;if (0 === d.length) return d = n.call(document, f.localName), Object.setPrototypeOf(d, c.prototype), d.__CE_state = 1, d.__CE_definition = f, W(a, d), d;var e = d.length - 1,\n            g = d[e];if (g === Da) throw Error(\"Failed to construct '\" + f.localName + \"': This element was already constructed.\");\n        d[e] = Da;Object.setPrototypeOf(g, c.prototype);W(a, g);return g;\n      }b.prototype = na.prototype;Object.defineProperty(b.prototype, \"constructor\", { writable: !0, configurable: !0, enumerable: !1, value: b });return b;\n    }();\n  };function Z(a, b, c) {\n    function f(d) {\n      return function (e) {\n        for (var g = [], h = 0; h < arguments.length; ++h) {\n          g[h] = arguments[h];\n        }h = [];for (var k = [], l = 0; l < g.length; l++) {\n          var m = g[l];m instanceof Element && I(m) && k.push(m);if (m instanceof DocumentFragment) for (m = m.firstChild; m; m = m.nextSibling) {\n            h.push(m);\n          } else h.push(m);\n        }d.apply(this, g);for (g = 0; g < k.length; g++) {\n          Y(a, k[g]);\n        }if (I(this)) for (g = 0; g < h.length; g++) {\n          k = h[g], k instanceof Element && X(a, k);\n        }\n      };\n    }void 0 !== c.prepend && M(b, \"prepend\", f(c.prepend));void 0 !== c.append && M(b, \"append\", f(c.append));\n  }\n  ;function Fa(a) {\n    M(Document.prototype, \"createElement\", function (b) {\n      return Ca(a, this, b, null);\n    });M(Document.prototype, \"importNode\", function (b, c) {\n      b = aa.call(this, b, !!c);this.__CE_registry ? N(a, b) : V(a, b);return b;\n    });M(Document.prototype, \"createElementNS\", function (b, c) {\n      return Ca(a, this, c, b);\n    });Z(a, Document.prototype, { prepend: ba, append: ca });\n  };function Ga(a) {\n    function b(c, f) {\n      Object.defineProperty(c, \"textContent\", { enumerable: f.enumerable, configurable: !0, get: f.get, set: function set(d) {\n          if (this.nodeType === Node.TEXT_NODE) f.set.call(this, d);else {\n            var e = void 0;if (this.firstChild) {\n              var g = this.childNodes,\n                  h = g.length;if (0 < h && I(this)) {\n                e = Array(h);for (var k = 0; k < h; k++) {\n                  e[k] = g[k];\n                }\n              }\n            }f.set.call(this, d);if (e) for (d = 0; d < e.length; d++) {\n              Y(a, e[d]);\n            }\n          }\n        } });\n    }M(Node.prototype, \"insertBefore\", function (c, f) {\n      if (c instanceof DocumentFragment) {\n        var d = J(c);c = t.call(this, c, f);if (I(this)) for (f = 0; f < d.length; f++) {\n          X(a, d[f]);\n        }return c;\n      }d = c instanceof Element && I(c);f = t.call(this, c, f);d && Y(a, c);I(this) && X(a, c);return f;\n    });M(Node.prototype, \"appendChild\", function (c) {\n      if (c instanceof DocumentFragment) {\n        var f = J(c);c = r.call(this, c);if (I(this)) for (var d = 0; d < f.length; d++) {\n          X(a, f[d]);\n        }return c;\n      }f = c instanceof Element && I(c);d = r.call(this, c);f && Y(a, c);I(this) && X(a, c);return d;\n    });M(Node.prototype, \"cloneNode\", function (c) {\n      c = q.call(this, !!c);this.ownerDocument.__CE_registry ? N(a, c) : V(a, c);return c;\n    });M(Node.prototype, \"removeChild\", function (c) {\n      var f = c instanceof Element && I(c),\n          d = u.call(this, c);f && Y(a, c);return d;\n    });M(Node.prototype, \"replaceChild\", function (c, f) {\n      if (c instanceof DocumentFragment) {\n        var d = J(c);c = v.call(this, c, f);if (I(this)) for (Y(a, f), f = 0; f < d.length; f++) {\n          X(a, d[f]);\n        }return c;\n      }d = c instanceof Element && I(c);var e = v.call(this, c, f),\n          g = I(this);g && Y(a, f);d && Y(a, c);g && X(a, c);return e;\n    });x && x.get ? b(Node.prototype, x) : Aa(a, function (c) {\n      b(c, { enumerable: !0, configurable: !0, get: function get() {\n          for (var f = [], d = this.firstChild; d; d = d.nextSibling) {\n            d.nodeType !== Node.COMMENT_NODE && f.push(d.textContent);\n          }return f.join(\"\");\n        }, set: function set(f) {\n          for (; this.firstChild;) {\n            u.call(this, this.firstChild);\n          }null != f && \"\" !== f && r.call(this, document.createTextNode(f));\n        } });\n    });\n  };function Ha(a) {\n    function b(f) {\n      return function (d) {\n        for (var e = [], g = 0; g < arguments.length; ++g) {\n          e[g] = arguments[g];\n        }g = [];for (var h = [], k = 0; k < e.length; k++) {\n          var l = e[k];l instanceof Element && I(l) && h.push(l);if (l instanceof DocumentFragment) for (l = l.firstChild; l; l = l.nextSibling) {\n            g.push(l);\n          } else g.push(l);\n        }f.apply(this, e);for (e = 0; e < h.length; e++) {\n          Y(a, h[e]);\n        }if (I(this)) for (e = 0; e < g.length; e++) {\n          h = g[e], h instanceof Element && X(a, h);\n        }\n      };\n    }var c = Element.prototype;void 0 !== ja && M(c, \"before\", b(ja));void 0 !== ka && M(c, \"after\", b(ka));void 0 !== la && M(c, \"replaceWith\", function (f) {\n      for (var d = [], e = 0; e < arguments.length; ++e) {\n        d[e] = arguments[e];\n      }e = [];for (var g = [], h = 0; h < d.length; h++) {\n        var k = d[h];k instanceof Element && I(k) && g.push(k);if (k instanceof DocumentFragment) for (k = k.firstChild; k; k = k.nextSibling) {\n          e.push(k);\n        } else e.push(k);\n      }h = I(this);la.apply(this, d);for (d = 0; d < g.length; d++) {\n        Y(a, g[d]);\n      }if (h) for (Y(a, this), d = 0; d < e.length; d++) {\n        g = e[d], g instanceof Element && X(a, g);\n      }\n    });void 0 !== ma && M(c, \"remove\", function () {\n      var f = I(this);ma.call(this);f && Y(a, this);\n    });\n  };function Ia(a) {\n    function b(d, e) {\n      Object.defineProperty(d, \"innerHTML\", { enumerable: e.enumerable, configurable: !0, get: e.get, set: function set(g) {\n          var h = this,\n              k = void 0;I(this) && (k = [], U(a, this, function (w) {\n            w !== h && k.push(w);\n          }));e.set.call(this, g);if (k) for (var l = 0; l < k.length; l++) {\n            var m = k[l];1 === m.__CE_state && a.disconnectedCallback(m);\n          }this.ownerDocument.__CE_registry ? N(a, this) : V(a, this);return g;\n        } });\n    }function c(d, e) {\n      M(d, \"insertAdjacentElement\", function (g, h) {\n        var k = I(h);g = e.call(this, g, h);k && Y(a, h);I(g) && X(a, h);return g;\n      });\n    }\n    function f(d, e) {\n      function g(h, k) {\n        for (var l = []; h !== k; h = h.nextSibling) {\n          l.push(h);\n        }for (k = 0; k < l.length; k++) {\n          N(a, l[k]);\n        }\n      }M(d, \"insertAdjacentHTML\", function (h, k) {\n        h = h.toLowerCase();if (\"beforebegin\" === h) {\n          var l = this.previousSibling;e.call(this, h, k);g(l || this.parentNode.firstChild, this);\n        } else if (\"afterbegin\" === h) l = this.firstChild, e.call(this, h, k), g(this.firstChild, l);else if (\"beforeend\" === h) l = this.lastChild, e.call(this, h, k), g(l || this.firstChild, null);else if (\"afterend\" === h) l = this.nextSibling, e.call(this, h, k), g(this.nextSibling, l);else throw new SyntaxError(\"The value provided (\" + String(h) + \") is not one of 'beforebegin', 'afterbegin', 'beforeend', or 'afterend'.\");\n      });\n    }y && M(Element.prototype, \"attachShadow\", function (d) {\n      d = y.call(this, d);if (a.a && !d.__CE_patched) {\n        d.__CE_patched = !0;for (var e = 0; e < a.b.length; e++) {\n          a.b[e](d);\n        }\n      }return this.__CE_shadowRoot = d;\n    });z && z.get ? b(Element.prototype, z) : H && H.get ? b(HTMLElement.prototype, H) : Ba(a, function (d) {\n      b(d, { enumerable: !0, configurable: !0, get: function get() {\n          return q.call(this, !0).innerHTML;\n        }, set: function set(e) {\n          var g = \"template\" === this.localName,\n              h = g ? this.content : this,\n              k = p.call(document, this.namespaceURI, this.localName);for (k.innerHTML = e; 0 < h.childNodes.length;) {\n            u.call(h, h.childNodes[0]);\n          }for (e = g ? k.content : k; 0 < e.childNodes.length;) {\n            r.call(h, e.childNodes[0]);\n          }\n        } });\n    });M(Element.prototype, \"setAttribute\", function (d, e) {\n      if (1 !== this.__CE_state) return B.call(this, d, e);var g = A.call(this, d);B.call(this, d, e);e = A.call(this, d);a.attributeChangedCallback(this, d, g, e, null);\n    });M(Element.prototype, \"setAttributeNS\", function (d, e, g) {\n      if (1 !== this.__CE_state) return E.call(this, d, e, g);var h = D.call(this, d, e);E.call(this, d, e, g);g = D.call(this, d, e);a.attributeChangedCallback(this, e, h, g, d);\n    });M(Element.prototype, \"removeAttribute\", function (d) {\n      if (1 !== this.__CE_state) return C.call(this, d);var e = A.call(this, d);C.call(this, d);null !== e && a.attributeChangedCallback(this, d, e, null, null);\n    });M(Element.prototype, \"removeAttributeNS\", function (d, e) {\n      if (1 !== this.__CE_state) return F.call(this, d, e);var g = D.call(this, d, e);F.call(this, d, e);var h = D.call(this, d, e);g !== h && a.attributeChangedCallback(this, e, g, h, d);\n    });oa ? c(HTMLElement.prototype, oa) : G && c(Element.prototype, G);pa ? f(HTMLElement.prototype, pa) : fa && f(Element.prototype, fa);Z(a, Element.prototype, { prepend: ha, append: ia });Ha(a);\n  };var T = window.customElements;function Ja() {\n    var a = new S();Ea(a);Fa(a);Z(a, DocumentFragment.prototype, { prepend: da, append: ea });Ga(a);Ia(a);a = new O(a);document.__CE_registry = a;Object.defineProperty(window, \"customElements\", { configurable: !0, enumerable: !0, value: a });\n  }T && !T.forcePolyfill && \"function\" == typeof T.define && \"function\" == typeof T.get || Ja();window.__CE_installPolyfill = Ja;\n}).call(self);\n\n//# sourceMappingURL=custom-elements.min.js.map","/**\n * @license\n * Copyright (c) 2016 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n */\n\n/**\n * This shim allows elements written in, or compiled to, ES5 to work on native\n * implementations of Custom Elements v1. It sets new.target to the value of\n * this.constructor so that the native HTMLElement constructor can access the\n * current under-construction element's definition.\n */\n(function () {\n  if (\n  // No Reflect, no classes, no need for shim because native custom elements\n  // require ES2015 classes or Reflect.\n  window.Reflect === undefined || window.customElements === undefined ||\n  // The webcomponentsjs custom elements polyfill doesn't require\n  // ES2015-compatible construction (`super()` or `Reflect.construct`).\n  window.customElements.polyfillWrapFlushCallback) {\n    return;\n  }\n  var BuiltInHTMLElement = HTMLElement;\n  /**\n   * With jscompiler's RECOMMENDED_FLAGS the function name will be optimized away.\n   * However, if we declare the function as a property on an object literal, and\n   * use quotes for the property name, then closure will leave that much intact,\n   * which is enough for the JS VM to correctly set Function.prototype.name.\n   */\n  var wrapperForTheName = {\n    'HTMLElement': /** @this {!Object} */function HTMLElement() {\n      return Reflect.construct(BuiltInHTMLElement, [], /** @type {!Function} */this.constructor);\n    }\n  };\n  window.HTMLElement = wrapperForTheName['HTMLElement'];\n  HTMLElement.prototype = BuiltInHTMLElement.prototype;\n  HTMLElement.prototype.constructor = HTMLElement;\n  Object.setPrototypeOf(HTMLElement, BuiltInHTMLElement);\n})();","TimeRanges.prototype.dump = function () {\n    var len = this.length;\n    var ret = '';\n\n    for (var i = 0; i < len; i++) {\n        ret += this.start(i) + '~' + this.end(i) + ' ';\n    };\n    console.log(ret);\n};","var BROWSER_EVENTS = {\n  VISIBILITY_CHANGE: 'VISIBILITY_CHANGE'\n};\nvar PLAYER_EVENTS = {\n  SEEK: 'SEEK'\n};\n\nvar LOADER_EVENTS = {\n  LADER_START: 'LOADER_START',\n  LOADER_DATALOADED: 'LOADER_DATALOADED',\n  LOADER_COMPLETE: 'LOADER_COMPLETE',\n  LOADER_RESPONSE_HEADERS: 'LOADER_RESPONSE_HEADERS',\n  LOADER_ERROR: 'LOADER_ERROR'\n};\n\nvar DEMUX_EVENTS = {\n  DEMUX_START: 'DEMUX_START',\n  DEMUX_COMPLETE: 'DEMUX_COMPLETE',\n  DEMUX_ERROR: 'DEMUX_ERROR',\n  METADATA_PARSED: 'METADATA_PARSED',\n  SEI_PARSED: 'SEI_PARSED',\n  VIDEO_METADATA_CHANGE: 'VIDEO_METADATA_CHANGE',\n  AUDIO_METADATA_CHANGE: 'AUDIO_METADATA_CHANGE',\n  MEDIA_INFO: 'MEDIA_INFO'\n};\n\nvar REMUX_EVENTS = {\n  REMUX_METADATA: 'REMUX_METADATA',\n  REMUX_MEDIA: 'REMUX_MEDIA',\n  MEDIA_SEGMENT: 'MEDIA_SEGMENT',\n  REMUX_ERROR: 'REMUX_ERROR',\n  INIT_SEGMENT: 'INIT_SEGMENT',\n  DETECT_CHANGE_STREAM: 'DETECT_CHANGE_STREAM',\n  DETECT_CHANGE_STREAM_DISCONTINUE: 'DETECT_CHANGE_STREAM_DISCONTINUE',\n  DETECT_AUDIO_GAP: 'DETECT_AUDIO_GAP',\n  DETECT_AUDIO_OVERLAP: 'DETECT_AUDIO_OVERLAP',\n  RANDOM_ACCESS_POINT: 'RANDOM_ACCESS_POINT'\n};\n\nvar MSE_EVENTS = {\n  SOURCE_UPDATE_END: 'SOURCE_UPDATE_END',\n  MSE_ERROR: 'MSE_ERROR'\n\n  // hls专有events\n};var HLS_EVENTS = {\n  RETRY_TIME_EXCEEDED: 'RETRY_TIME_EXCEEDED'\n};\n\nvar CRYTO_EVENTS = {\n  START_DECRYPT: 'START_DECRYPT',\n  DECRYPTED: 'DECRYPTED'\n};\nvar ALLEVENTS = Object.assign({}, LOADER_EVENTS, DEMUX_EVENTS, REMUX_EVENTS, MSE_EVENTS, HLS_EVENTS, PLAYER_EVENTS, BROWSER_EVENTS);\n\nvar FlvAllowedEvents = [];\nvar HlsAllowedEvents = [];\n\nfor (var key in ALLEVENTS) {\n  if (ALLEVENTS.hasOwnProperty(key)) {\n    FlvAllowedEvents.push(ALLEVENTS[key]);\n  }\n}\n\nfor (var _key in ALLEVENTS) {\n  if (ALLEVENTS.hasOwnProperty(_key)) {\n    HlsAllowedEvents.push(ALLEVENTS[_key]);\n  }\n}\n\nexport default {\n  ALLEVENTS: ALLEVENTS,\n  HLS_EVENTS: HLS_EVENTS,\n  REMUX_EVENTS: REMUX_EVENTS,\n  DEMUX_EVENTS: DEMUX_EVENTS,\n  MSE_EVENTS: MSE_EVENTS,\n  LOADER_EVENTS: LOADER_EVENTS,\n  FlvAllowedEvents: FlvAllowedEvents,\n  HlsAllowedEvents: HlsAllowedEvents,\n  CRYTO_EVENTS: CRYTO_EVENTS,\n  PLAYER_EVENTS: PLAYER_EVENTS,\n  BROWSER_EVENTS: BROWSER_EVENTS\n};","var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Playlist = function () {\n  function Playlist(configs) {\n    _classCallCheck(this, Playlist);\n\n    this._baseURL = '';\n    this._list = {};\n    this._ts = {};\n    this.version = 0;\n    this.sequence = -1;\n    this.targetduration = 0;\n    this.duration = 0;\n    this.fragLength = 0;\n    this._lastget = undefined;\n    this._audoclear = configs.autoclear || false;\n    this.downloadedUrls = [];\n  }\n\n  _createClass(Playlist, [{\n    key: 'push',\n    value: function push(ts, duration, discontinue, id) {\n      if (!this._ts[ts]) {\n        this._ts[ts] = { duration: duration,\n          downloaded: false,\n          downloading: false,\n          start: this.duration,\n          discontinue: !!discontinue,\n          id: id\n        };\n        this._list[this.duration] = ts;\n        this.duration += duration;\n        this.fragLength += 1;\n      }\n    }\n  }, {\n    key: 'deleteFrag',\n    value: function deleteFrag(url) {\n      if (this._ts[url]) {\n        if (this._ts[url].start > this._lastget.time) {\n          this._lastget = {\n            duration: this._ts[url].duration,\n            time: this._ts[url].start,\n            downloaded: false,\n            downloading: false,\n            url: url,\n            id: this._ts[url].id\n          };\n        }\n        delete this._list[this._ts[url].start];\n        delete this._ts[url];\n        this.fragLength -= 1;\n      }\n    }\n  }, {\n    key: 'pushM3U8',\n    value: function pushM3U8(data, deletepre) {\n      // 常规信息替换\n      if (!data) {\n        throw new Error('No m3u8 data received.');\n      }\n      this.version = data.version;\n      this.targetduration = data.targetduration;\n      if (data.encrypt && !this.encrypt) {\n        this.encrypt = data.encrypt;\n      }\n\n      if (!data.sequence) {\n        data.sequence = 0;\n      }\n\n      // 新分片信息\n      if (data.sequence > this.sequence) {\n        this.sequence = data.sequence;\n        var newfraglist = [];\n        for (var i = 0; i < data.frags.length; i++) {\n          var frag = data.frags[i];\n          if (!this._ts[frag.url] && this.downloadedUrls.indexOf(frag.url) < 0) {\n            newfraglist.push(frag.url);\n            this.push(frag.url, frag.duration, frag.discontinue, frag.id);\n          }\n        }\n\n        if (newfraglist.length < 1) {\n          throw new Error('Can not read ts file list.');\n        }\n\n        if (deletepre) {\n          var tslist = this.getTsList();\n          for (var _i = 0; _i < tslist.length; _i++) {\n            if (newfraglist.indexOf(tslist[_i]) < 0) {\n              this.deleteFrag(tslist[_i]);\n            }\n          }\n        }\n      } else {\n        throw new Error('Old m3u8 file received, ' + data.sequence + ' , ' + this.sequence);\n      }\n    }\n  }, {\n    key: 'getTsList',\n    value: function getTsList() {\n      return Object.keys(this._ts);\n    }\n  }, {\n    key: 'downloaded',\n    value: function downloaded(tsname, isloaded) {\n      var ts = this._ts[tsname];\n      if (ts) {\n        ts.downloaded = isloaded;\n      }\n    }\n  }, {\n    key: 'downloading',\n    value: function downloading(tsname, loading) {\n      var ts = this._ts[tsname];\n      if (ts) {\n        ts.downloading = loading;\n      }\n    }\n  }, {\n    key: 'getTsByName',\n    value: function getTsByName(name) {\n      return this._ts[name];\n    }\n  }, {\n    key: 'getTs',\n    value: function getTs(time) {\n      var timelist = Object.keys(this._list);\n      var ts = void 0;\n\n      if (time === undefined) {\n        if (this._lastget) {\n          time = this._lastget.time + this._lastget.duration;\n        } else {\n          time = 0;\n        }\n      }\n\n      if (timelist.length < 1 || time >= this.duration) {\n        return undefined;\n      }\n      timelist = timelist.sort(function (a, b) {\n        return parseFloat(a) - parseFloat(b);\n      });\n      for (var i = 0; i < timelist.length; i++) {\n        if (time >= parseInt(timelist[i])) {\n          var url = this._list[timelist[i]];\n          var downloaded = this._ts[url].downloaded;\n          var downloading = this._ts[url].downloading;\n          ts = {\n            url: url,\n            downloaded: downloaded,\n            downloading: downloading,\n            time: parseInt(timelist[i]),\n            duration: parseInt(this._ts[url].duration),\n            id: this._ts[url].id\n          };\n          if (this.autoclear) {\n            delete this._ts[this._lastget.url];\n            delete this._list[this._lastget.time];\n          }\n          this._lastget = ts;\n        } else {\n          break;\n        }\n      }\n      if (ts) {\n        this.downloadedUrls.push(ts.url);\n      }\n      return ts;\n    }\n  }, {\n    key: 'getLastDownloadedTs',\n    value: function getLastDownloadedTs() {\n      var timelist = Object.keys(this._list);\n      var found = void 0;\n      for (var i = 0; i < timelist.length; i++) {\n        var url = this._list[timelist[i]];\n        var downloaded = this._ts[url].downloaded;\n        var downloading = this._ts[url].downloading;\n        if (downloaded) {\n          found = { url: url, downloaded: downloaded, downloading: downloading, time: parseInt(timelist[i]), duration: parseInt(this._ts[url].duration) };\n        } else {\n          break;\n        }\n      }\n\n      return found;\n    }\n  }, {\n    key: 'clear',\n    value: function clear() {\n      this._baseURL = '';\n      this._list = {};\n      this._ts = {};\n      this.version = 0;\n      this.sequence = -1;\n      this.targetduration = 0;\n      this.duration = 0;\n      this._lastget = undefined;\n    }\n  }, {\n    key: 'clearDownloaded',\n    value: function clearDownloaded() {\n      for (var i = 0, l = Object.keys(this._ts).length; i < l; i++) {\n        var ts = this._ts[Object.keys(this._ts)[i]];\n        ts.downloaded = false;\n        ts.downloading = false;\n      }\n    }\n  }, {\n    key: 'destroy',\n    value: function destroy() {\n      this._baseURL = '';\n      this._list = {};\n      this._ts = {};\n      this.version = 0;\n      this.sequence = -1;\n      this.targetduration = 0;\n      this.duration = 0;\n      this.fragLength = 0;\n      this._lastget = undefined;\n      this._audoclear = false;\n    }\n  }, {\n    key: 'list',\n    get: function get() {\n      return this._list;\n    }\n  }, {\n    key: 'baseURL',\n    set: function set(baseURL) {\n      if (this.baseURL !== baseURL) {\n        this.clear();\n        this._baseURL = baseURL;\n      }\n    },\n    get: function get() {\n      return this._baseURL;\n    }\n  }]);\n\n  return Playlist;\n}();\n\nexport default Playlist;","var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Presource = function Presource() {\n  _classCallCheck(this, Presource);\n\n  this.mimetype = '';\n  this.init = null;\n  this.data = [];\n};\n\nvar PreSource = function () {\n  function PreSource() {\n    _classCallCheck(this, PreSource);\n\n    this.sources = {};\n  }\n\n  _createClass(PreSource, [{\n    key: 'getSource',\n    value: function getSource(source) {\n      return this.sources[source];\n    }\n  }, {\n    key: 'createSource',\n    value: function createSource(name) {\n      this.sources[name] = new Presource();\n      return this.sources[name];\n    }\n  }, {\n    key: 'clear',\n    value: function clear() {\n      this.sources = {};\n    }\n  }, {\n    key: 'destroy',\n    value: function destroy() {\n      this.sources = {};\n    }\n  }]);\n\n  return PreSource;\n}();\n\nexport default PreSource;","var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Stream = function () {\n  function Stream(buffer) {\n    _classCallCheck(this, Stream);\n\n    if (buffer instanceof ArrayBuffer) {\n      this.buffer = buffer;\n      this.dataview = new DataView(buffer);\n      this.dataview.position = 0;\n    } else {\n      throw new Error('data is invalid');\n    }\n  }\n\n  _createClass(Stream, [{\n    key: 'back',\n    value: function back(count) {\n      this.position -= count;\n    }\n  }, {\n    key: 'skip',\n    value: function skip(count) {\n      var loop = Math.floor(count / 4);\n      var last = count % 4;\n      for (var i = 0; i < loop; i++) {\n        Stream.readByte(this.dataview, 4);\n      }\n      if (last > 0) {\n        Stream.readByte(this.dataview, last);\n      }\n    }\n\n    /**\n     * [readByte 从DataView中读取数据]\n     * @param  {DataView} buffer [DataView实例]\n     * @param  {Number} size   [读取字节数]\n     * @return {Number}        [整数]\n     */\n\n  }, {\n    key: 'readUint8',\n    value: function readUint8() {\n      return Stream.readByte(this.dataview, 1);\n    }\n  }, {\n    key: 'readUint16',\n    value: function readUint16() {\n      return Stream.readByte(this.dataview, 2);\n    }\n  }, {\n    key: 'readUint24',\n    value: function readUint24() {\n      return Stream.readByte(this.dataview, 3);\n    }\n  }, {\n    key: 'readUint32',\n    value: function readUint32() {\n      return Stream.readByte(this.dataview, 4);\n    }\n  }, {\n    key: 'readUint64',\n    value: function readUint64() {\n      return Stream.readByte(this.dataview, 8);\n    }\n  }, {\n    key: 'readInt8',\n    value: function readInt8() {\n      return Stream.readByte(this.dataview, 1, true);\n    }\n  }, {\n    key: 'readInt16',\n    value: function readInt16() {\n      return Stream.readByte(this.dataview, 2, true);\n    }\n  }, {\n    key: 'readInt32',\n    value: function readInt32() {\n      return Stream.readByte(this.dataview, 4, true);\n    }\n  }, {\n    key: 'writeUint32',\n    value: function writeUint32(value) {\n      return new Uint8Array([value >>> 24 & 0xff, value >>> 16 & 0xff, value >>> 8 & 0xff, value & 0xff]);\n    }\n  }, {\n    key: 'length',\n    get: function get() {\n      return this.buffer.byteLength;\n    }\n  }, {\n    key: 'position',\n    set: function set(value) {\n      this.dataview.position = value;\n    },\n    get: function get() {\n      return this.dataview.position;\n    }\n  }], [{\n    key: 'readByte',\n    value: function readByte(buffer, size, sign) {\n      var res = void 0;\n      switch (size) {\n        case 1:\n          if (sign) {\n            res = buffer.getInt8(buffer.position);\n          } else {\n            res = buffer.getUint8(buffer.position);\n          }\n          break;\n        case 2:\n          if (sign) {\n            res = buffer.getInt16(buffer.position);\n          } else {\n            res = buffer.getUint16(buffer.position);\n          }\n          break;\n        case 3:\n          if (sign) {\n            throw new Error('not supported for readByte 3');\n          } else {\n            res = buffer.getUint8(buffer.position) << 16;\n            res |= buffer.getUint8(buffer.position + 1) << 8;\n            res |= buffer.getUint8(buffer.position + 2);\n          }\n          break;\n        case 4:\n          if (sign) {\n            res = buffer.getInt32(buffer.position);\n          } else {\n            res = buffer.getUint32(buffer.position);\n          }\n          break;\n        case 8:\n          if (sign) {\n            throw new Error('not supported for readBody 8');\n          } else {\n            res = buffer.getUint32(buffer.position) << 32;\n            res |= buffer.getUint32(buffer.position + 4);\n          }\n          break;\n        default:\n          res = '';\n      }\n      buffer.position += size;\n      return res;\n    }\n  }]);\n\n  return Stream;\n}();\n\nexport default Stream;","var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Track = function () {\n  /**\n   * The constructor.\n   */\n  function Track() {\n    _classCallCheck(this, Track);\n\n    this.id = -1;\n    this.sequenceNumber = 0;\n    this.samples = [];\n    this.droppedSamples = [];\n    this.length = 0;\n  }\n\n  /**\n   * Reset the track.\n   */\n\n\n  _createClass(Track, [{\n    key: 'reset',\n    value: function reset() {\n      this.sequenceNumber = 0;\n      this.samples = [];\n      this.length = 0;\n    }\n    /**\n     * destroy the track.\n     */\n\n  }, {\n    key: 'distroy',\n    value: function distroy() {\n      this.reset();\n      this.id = -1;\n    }\n  }]);\n\n  return Track;\n}();\n\nexport default Track;\n\n\nexport var AudioTrack = function (_Track) {\n  _inherits(AudioTrack, _Track);\n\n  /**\n   * The constructor for audio track.\n   */\n  function AudioTrack() {\n    _classCallCheck(this, AudioTrack);\n\n    var _this = _possibleConstructorReturn(this, (AudioTrack.__proto__ || Object.getPrototypeOf(AudioTrack)).call(this));\n\n    _this.TAG = 'AudioTrack';\n    _this.type = 'audio';\n    return _this;\n  }\n\n  return AudioTrack;\n}(Track);\n\nexport var VideoTrack = function (_Track2) {\n  _inherits(VideoTrack, _Track2);\n\n  /**\n   * The constructor for video track.\n   */\n  function VideoTrack() {\n    _classCallCheck(this, VideoTrack);\n\n    var _this2 = _possibleConstructorReturn(this, (VideoTrack.__proto__ || Object.getPrototypeOf(VideoTrack)).call(this));\n\n    _this2.TAG = 'VideoTrack';\n    _this2.type = 'video';\n    _this2.dropped = 0;\n    return _this2;\n  }\n  /**\n   * reset the video track.\n   */\n\n\n  _createClass(VideoTrack, [{\n    key: 'reset',\n    value: function reset() {\n      this.sequenceNumber = 0;\n      this.samples = [];\n      this.length = 0;\n      this.dropped = 0;\n    }\n  }]);\n\n  return VideoTrack;\n}(Track);\n\nexport var Tracks = function () {\n  function Tracks() {\n    _classCallCheck(this, Tracks);\n\n    this.audioTrack = null;\n    this.videoTrack = null;\n  }\n\n  _createClass(Tracks, [{\n    key: 'destroy',\n    value: function destroy() {\n      this.audioTrack = null;\n      this.videoTrack = null;\n    }\n  }]);\n\n  return Tracks;\n}();","var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar XgBuffer = function () {\n  /**\n   * A buffer to store loaded data.\n   *\n   * @class LoaderBuffer\n   * @param {number} length - Optional the buffer size\n   */\n  function XgBuffer(length) {\n    _classCallCheck(this, XgBuffer);\n\n    this.length = length || 0;\n    this.historyLen = length || 0;\n    this.array = [];\n    this.offset = 0;\n  }\n\n  /**\n   * The function to push data.\n   *\n   * @param {Uint8Array} data - The data to push into the buffer\n   */\n\n\n  _createClass(XgBuffer, [{\n    key: \"push\",\n    value: function push(data) {\n      this.array.push(data);\n      this.length += data.byteLength;\n      this.historyLen += data.byteLength;\n    }\n\n    /**\n     * The function to shift data.\n     *\n     * @param {number} length - The size of shift.\n     */\n\n  }, {\n    key: \"shift\",\n    value: function shift(length) {\n      if (this.array.length < 1) {\n        return new Uint8Array(0);\n      }\n\n      if (length === undefined) {\n        return this._shiftBuffer();\n      }\n      if (this.offset + length === this.array[0].length) {\n        var _ret = this.array[0].slice(this.offset, this.offset + length);\n        this.offset = 0;\n        this.array.shift();\n        this.length -= length;\n        return _ret;\n      }\n\n      if (this.offset + length < this.array[0].length) {\n        var _ret2 = this.array[0].slice(this.offset, this.offset + length);\n        this.offset += length;\n        this.length -= length;\n        return _ret2;\n      }\n\n      var ret = new Uint8Array(length);\n      var tmpoff = 0;\n      while (this.array.length > 0 && length > 0) {\n        if (this.offset + length < this.array[0].length) {\n          var tmp = this.array[0].slice(this.offset, this.offset + length);\n          ret.set(tmp, tmpoff);\n          this.offset += length;\n          this.length -= length;\n          length = 0;\n          break;\n        } else {\n          // console.log('mark1')\n          var templength = this.array[0].length - this.offset;\n          ret.set(this.array[0].slice(this.offset, this.array[0].length), tmpoff);\n          this.array.shift();\n          this.offset = 0;\n          tmpoff += templength;\n          this.length -= templength;\n          length -= templength;\n        }\n      }\n      return ret;\n    }\n\n    /**\n     * Function to clear the buffer.\n     */\n\n  }, {\n    key: \"clear\",\n    value: function clear() {\n      this.array = [];\n      this.length = 0;\n      this.offset = 0;\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      this.clear();\n      this.historyLen = 0;\n    }\n\n    /**\n     * Function to shift one unit8Array.\n     */\n\n  }, {\n    key: \"_shiftBuffer\",\n    value: function _shiftBuffer() {\n      this.length -= this.array[0].length;\n      this.offset = 0;\n      return this.array.shift();\n    }\n\n    /**\n     * Convert uint8 data to number.\n     *\n     * @param {number} start - the start postion.\n     * @param {number} length - the length of data.\n     */\n\n  }, {\n    key: \"toInt\",\n    value: function toInt(start, length) {\n      var retInt = 0;\n      var i = this.offset + start;\n      while (i < this.offset + length + start) {\n        if (i < this.array[0].length) {\n          retInt = retInt * 256 + this.array[0][i];\n        } else if (this.array[1]) {\n          retInt = retInt * 256 + this.array[1][i - this.array[0].length];\n        }\n\n        i++;\n      }\n      return retInt;\n    }\n  }]);\n\n  return XgBuffer;\n}();\n\nexport default XgBuffer;","var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nexport var AudioTrackMeta = function () {\n  function AudioTrackMeta(meta) {\n    _classCallCheck(this, AudioTrackMeta);\n\n    var _default = {\n      sampleRate: 48000,\n      channelCount: 2,\n      codec: 'mp4a.40.2',\n      config: [41, 401, 136, 0],\n      duration: 0,\n      id: 2,\n      refSampleDuration: 21,\n      sampleRateIndex: 3,\n      timescale: 1000,\n      type: 'audio'\n    };\n    if (meta) {\n      return Object.assign({}, _default, meta);\n    }\n    return _default;\n  }\n\n  _createClass(AudioTrackMeta, [{\n    key: 'destroy',\n    value: function destroy() {\n      this.init = null;\n    }\n  }]);\n\n  return AudioTrackMeta;\n}();\n\nexport var VideoTrackMeta = function () {\n  function VideoTrackMeta(meta) {\n    _classCallCheck(this, VideoTrackMeta);\n\n    var _default = {\n      avcc: null,\n      sps: new Uint8Array(0),\n      pps: new Uint8Array(0),\n      chromaFormat: 420,\n      codec: 'avc1.640020',\n      codecHeight: 720,\n      codecWidth: 1280,\n      duration: 0,\n      frameRate: {\n        fixed: true,\n        fps: 25,\n        fps_num: 25000,\n        fps_den: 1000\n      },\n      id: 1,\n      level: '3.2',\n      presentHeight: 720,\n      presentWidth: 1280,\n      profile: 'High',\n      refSampleDuration: 40,\n      parRatio: {\n        height: 1,\n        width: 1\n      },\n      timescale: 1000,\n      type: 'video'\n    };\n\n    if (meta) {\n      return Object.assign({}, _default, meta);\n    }\n    return _default;\n  }\n\n  _createClass(VideoTrackMeta, [{\n    key: 'destroy',\n    value: function destroy() {\n      this.init = null;\n      this.sps = null;\n      this.pps = null;\n    }\n  }]);\n\n  return VideoTrackMeta;\n}();","var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nexport var AudioTrackSample = function () {\n  function AudioTrackSample(info) {\n    _classCallCheck(this, AudioTrackSample);\n\n    var _default = AudioTrackSample.getDefault();\n    if (!info) {\n      return _default;\n    }\n    var sample = Object.assign({}, _default, info);\n\n    return sample;\n  }\n\n  _createClass(AudioTrackSample, null, [{\n    key: \"getDefault\",\n    value: function getDefault() {\n      return {\n        dts: null,\n        pts: null,\n        data: new Uint8Array()\n      };\n    }\n  }]);\n\n  return AudioTrackSample;\n}();\n\nexport var VideoTrackSample = function () {\n  function VideoTrackSample(info) {\n    _classCallCheck(this, VideoTrackSample);\n\n    var _default = VideoTrackSample.getDefault();\n\n    if (!info) {\n      return _default;\n    }\n    var sample = Object.assign({}, _default, info);\n\n    return sample;\n  }\n\n  _createClass(VideoTrackSample, null, [{\n    key: \"getDefault\",\n    value: function getDefault() {\n      return {\n        dts: null,\n        pts: null,\n        isKeyframe: false, // is Random access point\n        originDts: null,\n        data: new Uint8Array()\n      };\n    }\n  }]);\n\n  return VideoTrackSample;\n}();","var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar isObjectFilled = function isObjectFilled(obj) {\n  for (var key in obj) {\n    if (obj.hasOwnProperty(key)) {\n      if (obj[key] === null) {\n        return false;\n      }\n    }\n  }\n  return true;\n};\n\nvar MediaInfo = function () {\n  function MediaInfo() {\n    _classCallCheck(this, MediaInfo);\n\n    this.mimeType = null;\n    this.duration = null;\n\n    this.hasVideo = null;\n    this.video = {\n      codec: null,\n      width: null,\n      height: null,\n      profile: null,\n      level: null,\n      frameRate: {\n        fixed: true,\n        fps: 25,\n        fps_num: 25000,\n        fps_den: 1000\n      },\n      chromaFormat: null,\n      parRatio: {\n        width: 1,\n        height: 1\n      }\n    };\n\n    this.hasAudio = null;\n\n    this.audio = {\n      codec: null,\n      sampleRate: null,\n      sampleRateIndex: null,\n      channelCount: null\n    };\n  }\n\n  _createClass(MediaInfo, [{\n    key: \"isComplete\",\n    value: function isComplete() {\n      return MediaInfo.isBaseInfoReady(this) && MediaInfo.isVideoReady(this) && MediaInfo.isAudioReady(this);\n    }\n  }], [{\n    key: \"isBaseInfoReady\",\n    value: function isBaseInfoReady(mediaInfo) {\n      return isObjectFilled(mediaInfo);\n    }\n  }, {\n    key: \"isVideoReady\",\n    value: function isVideoReady(mediaInfo) {\n      if (!mediaInfo.hasVideo) {\n        return true;\n      }\n\n      return isObjectFilled(mediaInfo.video);\n    }\n  }, {\n    key: \"isAudioReady\",\n    value: function isAudioReady(mediaInfo) {\n      if (!mediaInfo.hasAudio) {\n        return true;\n      }\n\n      return isObjectFilled(mediaInfo.video);\n    }\n  }]);\n\n  return MediaInfo;\n}();\n\nexport default MediaInfo;","import _Playlist from './playlist';\nimport _PreSource from './presource';\nimport _Stream from './stream';\nimport _Tracks, { AudioTrack as _AudioTrack, VideoTrack as _VideoTrack } from './track';\nimport _Buffer from './u8a-buffer';\nimport { AudioTrackMeta as _AudioTrackMeta, VideoTrackMeta as _VideoTrackMeta } from './track-meta';\nimport { AudioTrackSample as _AudioTrackSample, VideoTrackSample as _VideoTrackSample } from './track-sample';\nimport _MediaInfo from './media-info';\n\nexport var Playlist = _Playlist;\nexport var PreSource = _PreSource;\nexport var Stream = _Stream;\nexport var Tracks = _Tracks;\nexport var Buffer = _Buffer;\nexport var AudioTrack = _AudioTrack;\nexport var MediaInfo = _MediaInfo;\nexport var VideoTrack = _VideoTrack;\nexport var AudioTrackMeta = _AudioTrackMeta;\nexport var VideoTrackMeta = _VideoTrackMeta;\nexport var AudioTrackSample = _AudioTrackSample;\nexport var VideoTrackSample = _VideoTrackSample;","'use strict';\n\nvar domain;\n\n// This constructor is used to store event handlers. Instantiating this is\n// faster than explicitly calling `Object.create(null)` to get a \"clean\" empty\n// object (tested with v8 v4.9).\nfunction EventHandlers() {}\nEventHandlers.prototype = Object.create(null);\n\nfunction EventEmitter() {\n  EventEmitter.init.call(this);\n}\nexport default EventEmitter;\nexport {EventEmitter};\n\n// nodejs oddity\n// require('events') === require('events').EventEmitter\nEventEmitter.EventEmitter = EventEmitter\n\nEventEmitter.usingDomains = false;\n\nEventEmitter.prototype.domain = undefined;\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nEventEmitter.defaultMaxListeners = 10;\n\nEventEmitter.init = function() {\n  this.domain = null;\n  if (EventEmitter.usingDomains) {\n    // if there is an active domain, then attach to it.\n    if (domain.active && !(this instanceof domain.Domain)) {\n      this.domain = domain.active;\n    }\n  }\n\n  if (!this._events || this._events === Object.getPrototypeOf(this)._events) {\n    this._events = new EventHandlers();\n    this._eventsCount = 0;\n  }\n\n  this._maxListeners = this._maxListeners || undefined;\n};\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function setMaxListeners(n) {\n  if (typeof n !== 'number' || n < 0 || isNaN(n))\n    throw new TypeError('\"n\" argument must be a positive number');\n  this._maxListeners = n;\n  return this;\n};\n\nfunction $getMaxListeners(that) {\n  if (that._maxListeners === undefined)\n    return EventEmitter.defaultMaxListeners;\n  return that._maxListeners;\n}\n\nEventEmitter.prototype.getMaxListeners = function getMaxListeners() {\n  return $getMaxListeners(this);\n};\n\n// These standalone emit* functions are used to optimize calling of event\n// handlers for fast cases because emit() itself often has a variable number of\n// arguments and can be deoptimized because of that. These functions always have\n// the same number of arguments and thus do not get deoptimized, so the code\n// inside them can execute faster.\nfunction emitNone(handler, isFn, self) {\n  if (isFn)\n    handler.call(self);\n  else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      listeners[i].call(self);\n  }\n}\nfunction emitOne(handler, isFn, self, arg1) {\n  if (isFn)\n    handler.call(self, arg1);\n  else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      listeners[i].call(self, arg1);\n  }\n}\nfunction emitTwo(handler, isFn, self, arg1, arg2) {\n  if (isFn)\n    handler.call(self, arg1, arg2);\n  else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      listeners[i].call(self, arg1, arg2);\n  }\n}\nfunction emitThree(handler, isFn, self, arg1, arg2, arg3) {\n  if (isFn)\n    handler.call(self, arg1, arg2, arg3);\n  else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      listeners[i].call(self, arg1, arg2, arg3);\n  }\n}\n\nfunction emitMany(handler, isFn, self, args) {\n  if (isFn)\n    handler.apply(self, args);\n  else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      listeners[i].apply(self, args);\n  }\n}\n\nEventEmitter.prototype.emit = function emit(type) {\n  var er, handler, len, args, i, events, domain;\n  var needDomainExit = false;\n  var doError = (type === 'error');\n\n  events = this._events;\n  if (events)\n    doError = (doError && events.error == null);\n  else if (!doError)\n    return false;\n\n  domain = this.domain;\n\n  // If there is no 'error' event listener then throw.\n  if (doError) {\n    er = arguments[1];\n    if (domain) {\n      if (!er)\n        er = new Error('Uncaught, unspecified \"error\" event');\n      er.domainEmitter = this;\n      er.domain = domain;\n      er.domainThrown = false;\n      domain.emit('error', er);\n    } else if (er instanceof Error) {\n      throw er; // Unhandled 'error' event\n    } else {\n      // At least give some kind of context to the user\n      var err = new Error('Uncaught, unspecified \"error\" event. (' + er + ')');\n      err.context = er;\n      throw err;\n    }\n    return false;\n  }\n\n  handler = events[type];\n\n  if (!handler)\n    return false;\n\n  var isFn = typeof handler === 'function';\n  len = arguments.length;\n  switch (len) {\n    // fast cases\n    case 1:\n      emitNone(handler, isFn, this);\n      break;\n    case 2:\n      emitOne(handler, isFn, this, arguments[1]);\n      break;\n    case 3:\n      emitTwo(handler, isFn, this, arguments[1], arguments[2]);\n      break;\n    case 4:\n      emitThree(handler, isFn, this, arguments[1], arguments[2], arguments[3]);\n      break;\n    // slower\n    default:\n      args = new Array(len - 1);\n      for (i = 1; i < len; i++)\n        args[i - 1] = arguments[i];\n      emitMany(handler, isFn, this, args);\n  }\n\n  if (needDomainExit)\n    domain.exit();\n\n  return true;\n};\n\nfunction _addListener(target, type, listener, prepend) {\n  var m;\n  var events;\n  var existing;\n\n  if (typeof listener !== 'function')\n    throw new TypeError('\"listener\" argument must be a function');\n\n  events = target._events;\n  if (!events) {\n    events = target._events = new EventHandlers();\n    target._eventsCount = 0;\n  } else {\n    // To avoid recursion in the case that type === \"newListener\"! Before\n    // adding it to the listeners, first emit \"newListener\".\n    if (events.newListener) {\n      target.emit('newListener', type,\n                  listener.listener ? listener.listener : listener);\n\n      // Re-assign `events` because a newListener handler could have caused the\n      // this._events to be assigned to a new object\n      events = target._events;\n    }\n    existing = events[type];\n  }\n\n  if (!existing) {\n    // Optimize the case of one listener. Don't need the extra array object.\n    existing = events[type] = listener;\n    ++target._eventsCount;\n  } else {\n    if (typeof existing === 'function') {\n      // Adding the second element, need to change to array.\n      existing = events[type] = prepend ? [listener, existing] :\n                                          [existing, listener];\n    } else {\n      // If we've already got an array, just append.\n      if (prepend) {\n        existing.unshift(listener);\n      } else {\n        existing.push(listener);\n      }\n    }\n\n    // Check for listener leak\n    if (!existing.warned) {\n      m = $getMaxListeners(target);\n      if (m && m > 0 && existing.length > m) {\n        existing.warned = true;\n        var w = new Error('Possible EventEmitter memory leak detected. ' +\n                            existing.length + ' ' + type + ' listeners added. ' +\n                            'Use emitter.setMaxListeners() to increase limit');\n        w.name = 'MaxListenersExceededWarning';\n        w.emitter = target;\n        w.type = type;\n        w.count = existing.length;\n        emitWarning(w);\n      }\n    }\n  }\n\n  return target;\n}\nfunction emitWarning(e) {\n  typeof console.warn === 'function' ? console.warn(e) : console.log(e);\n}\nEventEmitter.prototype.addListener = function addListener(type, listener) {\n  return _addListener(this, type, listener, false);\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.prependListener =\n    function prependListener(type, listener) {\n      return _addListener(this, type, listener, true);\n    };\n\nfunction _onceWrap(target, type, listener) {\n  var fired = false;\n  function g() {\n    target.removeListener(type, g);\n    if (!fired) {\n      fired = true;\n      listener.apply(target, arguments);\n    }\n  }\n  g.listener = listener;\n  return g;\n}\n\nEventEmitter.prototype.once = function once(type, listener) {\n  if (typeof listener !== 'function')\n    throw new TypeError('\"listener\" argument must be a function');\n  this.on(type, _onceWrap(this, type, listener));\n  return this;\n};\n\nEventEmitter.prototype.prependOnceListener =\n    function prependOnceListener(type, listener) {\n      if (typeof listener !== 'function')\n        throw new TypeError('\"listener\" argument must be a function');\n      this.prependListener(type, _onceWrap(this, type, listener));\n      return this;\n    };\n\n// emits a 'removeListener' event iff the listener was removed\nEventEmitter.prototype.removeListener =\n    function removeListener(type, listener) {\n      var list, events, position, i, originalListener;\n\n      if (typeof listener !== 'function')\n        throw new TypeError('\"listener\" argument must be a function');\n\n      events = this._events;\n      if (!events)\n        return this;\n\n      list = events[type];\n      if (!list)\n        return this;\n\n      if (list === listener || (list.listener && list.listener === listener)) {\n        if (--this._eventsCount === 0)\n          this._events = new EventHandlers();\n        else {\n          delete events[type];\n          if (events.removeListener)\n            this.emit('removeListener', type, list.listener || listener);\n        }\n      } else if (typeof list !== 'function') {\n        position = -1;\n\n        for (i = list.length; i-- > 0;) {\n          if (list[i] === listener ||\n              (list[i].listener && list[i].listener === listener)) {\n            originalListener = list[i].listener;\n            position = i;\n            break;\n          }\n        }\n\n        if (position < 0)\n          return this;\n\n        if (list.length === 1) {\n          list[0] = undefined;\n          if (--this._eventsCount === 0) {\n            this._events = new EventHandlers();\n            return this;\n          } else {\n            delete events[type];\n          }\n        } else {\n          spliceOne(list, position);\n        }\n\n        if (events.removeListener)\n          this.emit('removeListener', type, originalListener || listener);\n      }\n\n      return this;\n    };\n\nEventEmitter.prototype.removeAllListeners =\n    function removeAllListeners(type) {\n      var listeners, events;\n\n      events = this._events;\n      if (!events)\n        return this;\n\n      // not listening for removeListener, no need to emit\n      if (!events.removeListener) {\n        if (arguments.length === 0) {\n          this._events = new EventHandlers();\n          this._eventsCount = 0;\n        } else if (events[type]) {\n          if (--this._eventsCount === 0)\n            this._events = new EventHandlers();\n          else\n            delete events[type];\n        }\n        return this;\n      }\n\n      // emit removeListener for all listeners on all events\n      if (arguments.length === 0) {\n        var keys = Object.keys(events);\n        for (var i = 0, key; i < keys.length; ++i) {\n          key = keys[i];\n          if (key === 'removeListener') continue;\n          this.removeAllListeners(key);\n        }\n        this.removeAllListeners('removeListener');\n        this._events = new EventHandlers();\n        this._eventsCount = 0;\n        return this;\n      }\n\n      listeners = events[type];\n\n      if (typeof listeners === 'function') {\n        this.removeListener(type, listeners);\n      } else if (listeners) {\n        // LIFO order\n        do {\n          this.removeListener(type, listeners[listeners.length - 1]);\n        } while (listeners[0]);\n      }\n\n      return this;\n    };\n\nEventEmitter.prototype.listeners = function listeners(type) {\n  var evlistener;\n  var ret;\n  var events = this._events;\n\n  if (!events)\n    ret = [];\n  else {\n    evlistener = events[type];\n    if (!evlistener)\n      ret = [];\n    else if (typeof evlistener === 'function')\n      ret = [evlistener.listener || evlistener];\n    else\n      ret = unwrapListeners(evlistener);\n  }\n\n  return ret;\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  if (typeof emitter.listenerCount === 'function') {\n    return emitter.listenerCount(type);\n  } else {\n    return listenerCount.call(emitter, type);\n  }\n};\n\nEventEmitter.prototype.listenerCount = listenerCount;\nfunction listenerCount(type) {\n  var events = this._events;\n\n  if (events) {\n    var evlistener = events[type];\n\n    if (typeof evlistener === 'function') {\n      return 1;\n    } else if (evlistener) {\n      return evlistener.length;\n    }\n  }\n\n  return 0;\n}\n\nEventEmitter.prototype.eventNames = function eventNames() {\n  return this._eventsCount > 0 ? Reflect.ownKeys(this._events) : [];\n};\n\n// About 1.5x faster than the two-arg version of Array#splice().\nfunction spliceOne(list, index) {\n  for (var i = index, k = i + 1, n = list.length; k < n; i += 1, k += 1)\n    list[i] = list[k];\n  list.pop();\n}\n\nfunction arrayClone(arr, i) {\n  var copy = new Array(i);\n  while (i--)\n    copy[i] = arr[i];\n  return copy;\n}\n\nfunction unwrapListeners(arr) {\n  var ret = new Array(arr.length);\n  for (var i = 0; i < ret.length; ++i) {\n    ret[i] = arr[i].listener || arr[i];\n  }\n  return ret;\n}\n","var _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nimport EVENTS from '../events';\nimport { MediaInfo } from 'xgplayer-helper-models';\nimport { EventEmitter } from 'events';\n\nvar DIRECT_EMIT_FLAG = '__TO__';\n\nvar Context = function () {\n  function Context() {\n    var allowedEvents = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n\n    _classCallCheck(this, Context);\n\n    this._emitter = new EventEmitter();\n    if (!this._emitter.off) {\n      this._emitter.off = this._emitter.removeListener;\n    }\n\n    this.mediaInfo = new MediaInfo();\n    this._instanceMap = {}; // 所有的解码流程实例\n    this._clsMap = {}; // 构造函数的map\n    this._inited = false;\n    this.allowedEvents = allowedEvents;\n    this._hooks = {}; // 注册在事件前/后的钩子，例如 before('DEMUX_COMPLETE')\n  }\n\n  /**\n   * 从上下文中获取解码流程实例，如果没有实例，构造一个\n   * @param tag\n   * @param args\n   * @returns {*}\n   */\n\n\n  _createClass(Context, [{\n    key: 'getInstance',\n    value: function getInstance(tag) {\n      var instance = this._instanceMap[tag];\n      if (instance) {\n        return instance;\n      } else {\n        // throw new Error(`${tag}实例尚未初始化`)\n        return null;\n      }\n    }\n\n    /**\n     * 初始化具体实例\n     * @param tag\n     * @param args\n     */\n\n  }, {\n    key: 'initInstance',\n    value: function initInstance(tag) {\n      for (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        args[_key - 1] = arguments[_key];\n      }\n\n      var a = args[0],\n          b = args[1],\n          c = args[2],\n          d = args[3];\n\n      if (this._clsMap[tag]) {\n        var newInstance = new this._clsMap[tag](a, b, c, d);\n        this._instanceMap[tag] = newInstance;\n        if (newInstance.init) {\n          newInstance.init(); // TODO: lifecircle\n        }\n        return newInstance;\n      } else {\n        throw new Error(tag + '\\u672A\\u5728context\\u4E2D\\u6CE8\\u518C');\n      }\n    }\n\n    /**\n     * 避免大量的initInstance调用，初始化所有的组件\n     * @param config\n     */\n\n  }, {\n    key: 'init',\n    value: function init(config) {\n      if (this._inited) {\n        return;\n      }\n      for (var tag in this._clsMap) {\n        // if not inited, init an instance\n        if (this._clsMap.hasOwnProperty(tag) && !this._instanceMap[tag]) {\n          this.initInstance(tag, config);\n        }\n      }\n      this._inited = true;\n    }\n\n    /**\n     * 注册一个上下文流程，提供安全的事件发送机制\n     * @param tag\n     * @param cls\n     */\n\n  }, {\n    key: 'registry',\n    value: function registry(tag, cls) {\n      var _this2 = this;\n\n      var emitter = this._emitter;\n      var checkMessageName = this._isMessageNameValid.bind(this);\n      var self = this;\n      var enhanced = function (_cls) {\n        _inherits(enhanced, _cls);\n\n        function enhanced(a, b, c) {\n          _classCallCheck(this, enhanced);\n\n          var _this = _possibleConstructorReturn(this, (enhanced.__proto__ || Object.getPrototypeOf(enhanced)).call(this, a, b, c));\n\n          _this.listeners = {};\n          _this.onceListeners = {};\n          _this.TAG = tag;\n          _this._context = self;\n          return _this;\n        }\n\n        _createClass(enhanced, [{\n          key: 'on',\n          value: function on(messageName, callback) {\n            checkMessageName(messageName);\n\n            if (this.listeners[messageName]) {\n              this.listeners[messageName].push(callback);\n            } else {\n              this.listeners[messageName] = [callback];\n            }\n\n            emitter.on('' + messageName + DIRECT_EMIT_FLAG + tag, callback); // 建立定向通信监听\n            return emitter.on(messageName, callback);\n          }\n\n          /**\n           * 在某个事件触发前执行\n           * @param messageName\n           * @param callback\n           */\n\n        }, {\n          key: 'before',\n          value: function before(messageName, callback) {\n            checkMessageName(messageName);\n            if (self._hooks[messageName]) {\n              self._hooks[messageName].push(callback);\n            } else {\n              self._hooks[messageName] = [callback];\n            }\n          }\n        }, {\n          key: 'once',\n          value: function once(messageName, callback) {\n            checkMessageName(messageName);\n\n            if (this.onceListeners[messageName]) {\n              this.onceListeners[messageName].push(callback);\n            } else {\n              this.onceListeners[messageName] = [callback];\n            }\n\n            emitter.once('' + messageName + DIRECT_EMIT_FLAG + tag, callback);\n            return emitter.once(messageName, callback);\n          }\n        }, {\n          key: 'emit',\n          value: function emit(messageName) {\n            checkMessageName(messageName);\n            // console.log('emit ', messageName);\n\n            var beforeList = self._hooks ? self._hooks[messageName] : null;\n\n            if (beforeList) {\n              for (var i = 0, len = beforeList.length; i < len; i++) {\n                var callback = beforeList[i];\n                callback();\n              }\n            }\n\n            for (var _len2 = arguments.length, args = Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n              args[_key2 - 1] = arguments[_key2];\n            }\n\n            return emitter.emit.apply(emitter, [messageName].concat(args));\n          }\n\n          /**\n           * 定向发送给某个组件单例的消息\n           * @param messageName\n           * @param args\n           */\n\n        }, {\n          key: 'emitTo',\n          value: function emitTo(tag, messageName) {\n            checkMessageName(messageName);\n\n            for (var _len3 = arguments.length, args = Array(_len3 > 2 ? _len3 - 2 : 0), _key3 = 2; _key3 < _len3; _key3++) {\n              args[_key3 - 2] = arguments[_key3];\n            }\n\n            return emitter.emit.apply(emitter, ['' + messageName + DIRECT_EMIT_FLAG + tag].concat(args));\n          }\n        }, {\n          key: 'off',\n          value: function off(messageName, callback) {\n            checkMessageName(messageName);\n            return emitter.off(messageName, callback);\n          }\n        }, {\n          key: 'removeListeners',\n          value: function removeListeners() {\n            var hasOwn = Object.prototype.hasOwnProperty.bind(this.listeners);\n\n            for (var messageName in this.listeners) {\n              if (hasOwn(messageName)) {\n                var callbacks = this.listeners[messageName] || [];\n                for (var i = 0; i < callbacks.length; i++) {\n                  var callback = callbacks[i];\n                  emitter.off(messageName, callback);\n                  emitter.off('' + messageName + DIRECT_EMIT_FLAG + tag, callback);\n                }\n              }\n            }\n\n            for (var _messageName in this.onceListeners) {\n              if (hasOwn(_messageName)) {\n                var _callbacks = this.onceListeners[_messageName] || [];\n                for (var _i = 0; _i < _callbacks.length; _i++) {\n                  var _callback = _callbacks[_i];\n                  emitter.off(_messageName, _callback);\n                  emitter.off('' + _messageName + DIRECT_EMIT_FLAG + tag, _callback);\n                }\n              }\n            }\n          }\n\n          /**\n           * 在组件销毁时，默认将它注册的事件全部卸载，确保不会造成内存泄漏\n           */\n\n        }, {\n          key: 'destroy',\n          value: function destroy() {\n            // step1 unlisten events\n            this.removeListeners();\n            this.listeners = {};\n\n            // step2 release from context\n            delete self._instanceMap[tag];\n            if (_get(enhanced.prototype.__proto__ || Object.getPrototypeOf(enhanced.prototype), 'destroy', this)) {\n              return _get(enhanced.prototype.__proto__ || Object.getPrototypeOf(enhanced.prototype), 'destroy', this).call(this);\n            }\n          }\n        }]);\n\n        return enhanced;\n      }(cls);\n      this._clsMap[tag] = enhanced;\n\n      /**\n       * get instance immediately\n       * e.g const instance = context.registry(tag, Cls)(config)\n       * */\n      return function () {\n        for (var _len4 = arguments.length, args = Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n          args[_key4] = arguments[_key4];\n        }\n\n        return _this2.initInstance.apply(_this2, [tag].concat(args));\n      };\n    }\n\n    /**\n     * 各个模块处理seek\n     * @param time\n     */\n\n  }, {\n    key: 'seek',\n    value: function seek(time) {\n      this._emitter.emit(EVENTS.PLAYER_EVENTS.SEEK, time);\n    }\n\n    /**\n     * 对存在的实例进行\n     */\n\n  }, {\n    key: 'destroyInstances',\n    value: function destroyInstances() {\n      var _this3 = this;\n\n      Object.keys(this._instanceMap).forEach(function (tag) {\n        if (_this3._instanceMap[tag].destroy) {\n          _this3._instanceMap[tag].destroy();\n        }\n      });\n    }\n\n    /**\n     * 编解码流程无需关注事件的解绑\n     */\n\n  }, {\n    key: 'destroy',\n    value: function destroy() {\n      this._emitter = null;\n      this.allowedEvents = [];\n      this._clsMap = null;\n      this._context = null;\n      this._hooks = null;\n      this.destroyInstances();\n    }\n\n    /**\n     * 对信道进行收拢\n     * @param messageName\n     * @private\n     */\n\n  }, {\n    key: '_isMessageNameValid',\n    value: function _isMessageNameValid(messageName) {\n      if (!this.allowedEvents.indexOf(messageName) < 0) {\n        throw new Error('unregistered message name: ' + messageName);\n      }\n    }\n  }]);\n\n  return Context;\n}();\n\nexport default Context;","var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nimport EVENTS from '../events';\n\nvar CRYTO_EVENTS = EVENTS.CRYTO_EVENTS;\n\nvar Crypto = function () {\n  function Crypto(config) {\n    _classCallCheck(this, Crypto);\n\n    this.inputBuffer = config.inputbuffer;\n    this.outputBuffer = config.outputbuffer;\n    this.key = config.key;\n    this.iv = config.iv;\n    this.method = config.method;\n\n    this.crypto = window.crypto || window.msCrypto;\n  }\n\n  _createClass(Crypto, [{\n    key: 'init',\n    value: function init() {\n      this.on(CRYTO_EVENTS.START_DECRYPT, this.decript.bind(this));\n    }\n  }, {\n    key: 'decript',\n    value: function decript() {\n      var _this = this;\n\n      if (!this.aeskey) {\n        var sbkey = this.crypto.subtle.importKey('raw', this.key.buffer, { name: 'AES-CBC' }, false, ['encrypt', 'decrypt']);\n        sbkey.then(function (key) {\n          _this.aeskey = key;\n          _this.decriptData();\n        });\n      } else {\n        this.decriptData();\n      }\n    }\n  }, {\n    key: 'decriptData',\n    value: function decriptData() {\n      var _this2 = this;\n\n      var inputbuffer = this._context.getInstance(this.inputBuffer);\n      var outputbuffer = this._context.getInstance(this.outputBuffer);\n      var data = inputbuffer.shift();\n      if (data) {\n        this.crypto.subtle.decrypt({ name: 'AES-CBC', iv: this.iv.buffer }, this.aeskey, data).then(function (res) {\n          outputbuffer.push(new Uint8Array(res));\n          _this2.emit(CRYTO_EVENTS.DECRYPTED);\n          _this2.decriptData(data);\n        });\n      }\n    }\n  }]);\n\n  return Crypto;\n}();\n\nexport default Crypto;","var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar KeySystems = {\n  WIDEVINE: 'com.widevine.alpha',\n  PLAYREADY: 'com.microsoft.playready'\n};\n\nvar MAX_LICENSE_REQUEST_FAILURES = 3;\n\nvar EME = function () {\n  function EME(_ref) {\n    var config = _ref.config,\n        player = _ref.player;\n\n    _classCallCheck(this, EME);\n\n    this.licenseUrl = config.licenseUrl;\n    this.mediaKeySystemConfigs = config.mediaKeySystemConfigs;\n    this.keySystem = config.keySystem || KeySystems.WIDEVINE;\n    this.video = player.video;\n    this.mediaKeysList = [];\n    this.requestLicenseFailureCount = 0;\n  }\n\n  _createClass(EME, [{\n    key: 'init',\n    value: function init() {\n      this.on('ManifestParsed', this.onManifestParsed.bind(this));\n    }\n  }, {\n    key: 'onManifestParsed',\n    value: function onManifestParsed(data) {\n      var _this = this;\n\n      var mediaKeySystemConfigs = this.mediaKeySystemConfigs || this.createWidevineMediaKeySystemConfigurations(data.audioCodecs, data.videoCodecs);\n\n      navigator.requestMediaKeySystemAccess(this.keySystem, mediaKeySystemConfigs).then(function (keySystemAccess) {\n        return keySystemAccess.createMediaKeys();\n      }).then(function (mediaKeys) {\n        _this.video.setMediaKeys(mediaKeys);\n      });\n\n      this.video.addEventListener('encrypted', this.onMediaEncrypted.bind(this));\n    }\n  }, {\n    key: 'onKeySessionMessage',\n    value: function onKeySessionMessage(keySession, message) {\n      this.requestLicense(message, function (data) {\n        keySession.update(data);\n      });\n    }\n  }, {\n    key: 'requestLicense',\n    value: function requestLicense(keyMessage, callback) {\n      try {\n        var url = this.licenseUrl;\n        var xhr = this.createLicenseXhr(url, keyMessage, callback);\n        xhr.send(keyMessage);\n      } catch (e) {}\n    }\n  }, {\n    key: 'createLicenseXhr',\n    value: function createLicenseXhr(url, keyMessage, callback) {\n      var xhr = new window.XMLHttpRequest();\n\n      xhr.open('POST', url, true);\n\n      xhr.responseType = 'arraybuffer';\n      xhr.onreadystatechange = this.onLicenseRequestReadyStageChange.bind(this, xhr, url, keyMessage, callback);\n      return xhr;\n    }\n  }, {\n    key: 'onLicenseRequestReadyStageChange',\n    value: function onLicenseRequestReadyStageChange(xhr, url, keyMessage, callback) {\n      switch (xhr.readyState) {\n        case 4:\n          if (xhr.status === 200) {\n            this.requestLicenseFailureCount = 0;\n            callback(xhr.response);\n          } else {\n            this.requestLicenseFailureCount++;\n\n            if (this.requestLicenseFailureCount > MAX_LICENSE_REQUEST_FAILURES) {\n              return;\n            }\n            this.requestLicense(keyMessage, callback);\n          }\n          break;\n      }\n    }\n  }, {\n    key: 'onMediaEncrypted',\n    value: function onMediaEncrypted(e) {\n      var _this2 = this;\n\n      var keySession = this.video.mediaKeys.createSession();\n      keySession.addEventListener('message', function (event) {\n        _this2.onKeySessionMessage(keySession, event.message);\n      }, false);\n      keySession.generateRequest(e.initDataType, e.initData);\n    }\n  }, {\n    key: 'createWidevineMediaKeySystemConfigurations',\n    value: function createWidevineMediaKeySystemConfigurations(audioCodecs, videoCodecs) {\n      return [{\n        videoCapabilities: videoCodecs.map(function (codec) {\n          return {\n            contentType: 'video/mp4; codecs=\"' + codec + '\"'\n          };\n        })\n      }];\n    }\n  }], [{\n    key: 'isSupported',\n    value: function isSupported() {\n      var checkIsIncompatibleBrowser = function checkIsIncompatibleBrowser() {\n        var ua = navigator.userAgent;\n        var isSafari = /^((?!chrome|android).)*safari/i.test(ua);\n        var isMSBrowser = ua.indexOf('MSIE ') > 0 || ua.indexOf('Trident/') > 0;\n        var isFirefox = ua.indexOf('Firefox') > 0;\n        var isEdge = ua.indexOf('Edge') > 0;\n        return isSafari || isMSBrowser || isFirefox || isEdge;\n      };\n      return !!navigator.requestMediaKeySystemAccess && !checkIsIncompatibleBrowser();\n    }\n  }]);\n\n  return EME;\n}();\n\nexport default EME;","var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nimport EVENTS from '../events';\n\nvar MSE_EVENTS = EVENTS.MSE_EVENTS;\n\nvar MSE = function () {\n  function MSE(configs, context) {\n    _classCallCheck(this, MSE);\n\n    if (context) {\n      this._context = context;\n      this.emit = context._emitter.emit.bind(context._emitter);\n    }\n\n    this.TAG = 'MSE';\n\n    this.configs = Object.assign({}, configs);\n    this.container = this.configs.container;\n    this.mediaSource = null;\n    this.sourceBuffers = {};\n    this.preloadTime = this.configs.preloadTime || 1;\n    this.onSourceOpen = this.onSourceOpen.bind(this);\n    this.onTimeUpdate = this.onTimeUpdate.bind(this);\n    this.onUpdateEnd = this.onUpdateEnd.bind(this);\n    this.onWaiting = this.onWaiting.bind(this);\n    this.opened = false;\n  }\n\n  _createClass(MSE, [{\n    key: 'init',\n    value: function init() {\n      // eslint-disable-next-line no-undef\n      this.mediaSource = new self.MediaSource();\n      this.mediaSource.addEventListener('sourceopen', this.onSourceOpen);\n      this._url = null;\n      this.container.addEventListener('timeupdate', this.onTimeUpdate);\n      this.container.addEventListener('waiting', this.onWaiting);\n    }\n  }, {\n    key: 'resetContext',\n    value: function resetContext(newCtx) {\n      this._context = newCtx;\n      this.emit = newCtx._emitter.emit.bind(newCtx._emitter);\n      for (var i = 0; i < Object.keys(this.sourceBuffers).length; i++) {\n        var buffer = this.sourceBuffers[Object.keys(this.sourceBuffers)[i]];\n        if (!buffer.updating) {\n          MSE.clearBuffer(buffer);\n        }\n      }\n    }\n  }, {\n    key: 'onTimeUpdate',\n    value: function onTimeUpdate() {\n      this.emit('TIME_UPDATE', this.container);\n    }\n  }, {\n    key: 'onWaiting',\n    value: function onWaiting() {\n      this.emit('WAITING', this.container);\n    }\n  }, {\n    key: 'onSourceOpen',\n    value: function onSourceOpen() {\n      this.opened = true;\n      this.addSourceBuffers();\n    }\n  }, {\n    key: 'onUpdateEnd',\n    value: function onUpdateEnd() {\n      this.emit(MSE_EVENTS.SOURCE_UPDATE_END);\n      this.doAppend();\n    }\n  }, {\n    key: 'addSourceBuffers',\n    value: function addSourceBuffers() {\n      if (this.mediaSource.readyState !== 'open' || !this.opened) {\n        return;\n      }\n      var sources = this._context.getInstance('PRE_SOURCE_BUFFER');\n      var tracks = this._context.getInstance('TRACKS');\n      var track = void 0;\n      if (!sources || !tracks) {\n        return;\n      }\n\n      sources = sources.sources;\n      var add = false;\n      for (var i = 0, k = Object.keys(sources).length; i < k; i++) {\n        var type = Object.keys(sources)[i];\n        add = false;\n        if (type === 'audio') {\n          track = tracks.audioTrack;\n        } else if (type === 'video') {\n          track = tracks.videoTrack;\n          // return;\n        }\n        if (track && sources[type].init !== null && sources[type].data.length) {\n          add = true;\n        }\n      }\n\n      if (add) {\n        if (Object.keys(this.sourceBuffers).length > 1) {\n          return;\n        }\n        for (var _i = 0, _k = Object.keys(sources).length; _i < _k; _i++) {\n          var _type = Object.keys(sources)[_i];\n          if (this.sourceBuffers[_type]) {\n            continue;\n          }\n          var source = sources[_type];\n          var mime = _type === 'video' ? 'video/mp4;codecs=' + source.mimetype : 'audio/mp4;codecs=' + source.mimetype;\n\n          try {\n            var sourceBuffer = this.mediaSource.addSourceBuffer(mime);\n            this.sourceBuffers[_type] = sourceBuffer;\n            sourceBuffer.addEventListener('updateend', this.onUpdateEnd);\n          } catch (e) {\n            this.emit(MSE_EVENTS.MSE_ERROR, this.TAG, new Error(e.message));\n          }\n        }\n        if (Object.keys(this.sourceBuffers).length === 2) {\n          this.doAppend();\n        }\n      }\n    }\n  }, {\n    key: 'doAppend',\n    value: function doAppend() {\n      if (Object.keys(this.sourceBuffers).length < 2) {\n        return;\n      }\n      var sources = this._context.getInstance('PRE_SOURCE_BUFFER');\n      if (sources) {\n        for (var i = 0; i < Object.keys(this.sourceBuffers).length; i++) {\n          var type = Object.keys(this.sourceBuffers)[i];\n          var sourceBuffer = this.sourceBuffers[type];\n          var source = sources.sources[type];\n          if (source && !source.inited) {\n            try {\n              // console.log('append buffser init: ', type, source.init)\n              sourceBuffer.appendBuffer(source.init.buffer.buffer);\n              source.inited = true;\n            } catch (e) {\n              // DO NOTHING\n            }\n          } else if (source) {\n            var data = source.data.shift();\n            if (data) {\n              try {\n                sourceBuffer.appendBuffer(data.buffer.buffer);\n              } catch (e) {\n                source.data.unshift(data);\n              }\n            }\n          }\n        }\n      }\n    }\n  }, {\n    key: 'endOfStream',\n    value: function endOfStream() {\n      var readyState = this.mediaSource.readyState;\n\n      if (readyState === 'open') {\n        try {\n          this.mediaSource.endOfStream();\n        } catch (e) {\n          // log\n        }\n      }\n    }\n  }, {\n    key: 'remove',\n    value: function remove(end) {\n      var start = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n\n      for (var i = 0; i < Object.keys(this.sourceBuffers).length; i++) {\n        var buffer = this.sourceBuffers[Object.keys(this.sourceBuffers)[i]];\n        if (!buffer.updating) {\n          // console.log('remove', start, end)\n          buffer.remove(start, end);\n        }\n      }\n    }\n  }, {\n    key: 'cleanBuffers',\n    value: function cleanBuffers() {\n      var _this = this;\n\n      var taskList = [];\n\n      var _loop = function _loop(i) {\n        var buffer = _this.sourceBuffers[Object.keys(_this.sourceBuffers)[i]];\n\n        var task = void 0;\n        if (buffer.updating) {\n          task = new Promise(function (resolve) {\n            var doCleanBuffer = function doCleanBuffer() {\n              var retryTime = 3;\n\n              var clean = function clean() {\n                if (!buffer.updating) {\n                  MSE.clearBuffer(buffer);\n                  buffer.addEventListener('updateend', function () {\n                    resolve();\n                  });\n                } else if (retryTime > 0) {\n                  setTimeout(clean, 200);\n                  retryTime--;\n                } else {\n                  resolve();\n                }\n              };\n\n              setTimeout(clean, 200);\n              buffer.removeEventListener('updateend', doCleanBuffer);\n            };\n            buffer.addEventListener('updateend', doCleanBuffer);\n          });\n        } else {\n          task = new Promise(function (resolve) {\n            MSE.clearBuffer(buffer);\n            buffer.addEventListener('updateend', function () {\n              resolve();\n            });\n          });\n\n          // task = Promise.resolve()\n        }\n\n        taskList.push(task);\n      };\n\n      for (var i = 0; i < Object.keys(this.sourceBuffers).length; i++) {\n        _loop(i);\n      }\n\n      return Promise.all(taskList);\n    }\n  }, {\n    key: 'removeBuffers',\n    value: function removeBuffers() {\n      var _this2 = this;\n\n      var taskList = [];\n\n      var _loop2 = function _loop2(i) {\n        var buffer = _this2.sourceBuffers[Object.keys(_this2.sourceBuffers)[i]];\n        buffer.removeEventListener('updateend', _this2.onUpdateEnd);\n\n        var task = void 0;\n        if (buffer.updating) {\n          task = new Promise(function (resolve) {\n            var doCleanBuffer = function doCleanBuffer() {\n              var retryTime = 3;\n\n              var clean = function clean() {\n                if (!buffer.updating) {\n                  MSE.clearBuffer(buffer);\n                  buffer.addEventListener('updateend', function () {\n                    resolve();\n                  });\n                } else if (retryTime > 0) {\n                  setTimeout(clean, 200);\n                  retryTime--;\n                } else {\n                  resolve();\n                }\n              };\n\n              setTimeout(clean, 200);\n              buffer.removeEventListener('updateend', doCleanBuffer);\n            };\n            buffer.addEventListener('updateend', doCleanBuffer);\n          });\n        } else {\n          task = new Promise(function (resolve) {\n            MSE.clearBuffer(buffer);\n            buffer.addEventListener('updateend', function () {\n              resolve();\n            });\n          });\n\n          // task = Promise.resolve()\n        }\n\n        taskList.push(task);\n      };\n\n      for (var i = 0; i < Object.keys(this.sourceBuffers).length; i++) {\n        _loop2(i);\n      }\n\n      return Promise.all(taskList);\n    }\n  }, {\n    key: 'destroy',\n    value: function destroy() {\n      var _this3 = this;\n\n      this.container.removeEventListener('timeupdate', this.onTimeUpdate);\n      this.container.removeEventListener('waiting', this.onWaiting);\n      this.mediaSource.removeEventListener('sourceopen', this.onSourceOpen);\n      return this.removeBuffers().then(function () {\n        for (var i = 0; i < Object.keys(_this3.sourceBuffers).length; i++) {\n          var _buffer = _this3.sourceBuffers[Object.keys(_this3.sourceBuffers)[i]];\n          _this3.mediaSource.removeSourceBuffer(_buffer);\n          delete _this3.sourceBuffers[Object.keys(_this3.sourceBuffers)[i]];\n        }\n\n        _this3.endOfStream();\n        window.URL.revokeObjectURL(_this3.url);\n\n        _this3.url = null;\n        _this3.configs = {};\n        _this3.container = null;\n        _this3.mediaSource = null;\n        _this3.sourceBuffers = {};\n        _this3.preloadTime = 1;\n\n        _this3.onSourceOpen = null;\n        _this3.onTimeUpdate = null;\n        _this3.onUpdateEnd = null;\n        _this3.onWaiting = null;\n      });\n    }\n  }, {\n    key: 'url',\n    set: function set(val) {\n      this._url = val;\n    },\n    get: function get() {\n      if (!this._url) {\n        this._url = window.URL.createObjectURL(this.mediaSource);\n      }\n      return this._url;\n    }\n  }], [{\n    key: 'clearBuffer',\n    value: function clearBuffer(buffer) {\n      try {\n        var buffered = buffer.buffered;\n        var bEnd = 0.1;\n        for (var i = 0, len = buffered.length; i < len; i++) {\n          bEnd = buffered.end(i);\n        }\n        buffer.remove(0, bEnd);\n      } catch (e) {\n        // DO NOTHING\n      }\n    }\n  }]);\n\n  return MSE;\n}();\n\nexport default MSE;","var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nimport EVENTS from '../events';\n\nvar BROWSER_EVENTS = EVENTS.BROWSER_EVENTS;\nvar hidden = void 0;\nvar visibilityChange = void 0;\n\nif (typeof document.hidden !== 'undefined') {\n  // Opera 12.10 and Firefox 18 and later support\n  hidden = 'hidden';\n  visibilityChange = 'visibilitychange';\n} else if (typeof document.msHidden !== 'undefined') {\n  hidden = 'msHidden';\n  visibilityChange = 'msvisibilitychange';\n} else if (typeof document.webkitHidden !== 'undefined') {\n  hidden = 'webkitHidden';\n  visibilityChange = 'webkitvisibilitychange';\n}\n\nvar PageVisibility = function () {\n  function PageVisibility() {\n    _classCallCheck(this, PageVisibility);\n\n    this.callbacks = {\n      onShow: [],\n      onHidden: []\n    };\n    this.handleVisibilityChange = this.handleVisibilityChange.bind(this);\n    this.init();\n  }\n\n  _createClass(PageVisibility, [{\n    key: 'init',\n    value: function init() {\n      document.addEventListener(visibilityChange, this.handleVisibilityChange, false);\n    }\n  }, {\n    key: 'handleVisibilityChange',\n    value: function handleVisibilityChange() {\n      this.emit(BROWSER_EVENTS.VISIBILITY_CHANGE, document[hidden]);\n    }\n  }, {\n    key: 'destroy',\n    value: function destroy() {\n      document.removeEventListener(visibilityChange, this.handleVisibilityChange);\n    }\n  }]);\n\n  return PageVisibility;\n}();\n\nexport default PageVisibility;","import _PageVisibility from './page-visibility';\n\nvar le = function () {\n  var buf = new ArrayBuffer(2);\n  new DataView(buf).setInt16(0, 256, true); // little-endian write\n  return new Int16Array(buf)[0] === 256; // platform-spec read, if equal then LE\n}();\n\nvar sniffer = {\n  get device() {\n    var r = sniffer.os;\n    return r.isPc ? 'pc' : r.isTablet ? 'tablet' : 'mobile';\n  },\n  get browser() {\n    var ua = navigator.userAgent.toLowerCase();\n    var reg = {\n      ie: /rv:([\\d.]+)\\) like gecko/,\n      firfox: /firefox\\/([\\d.]+)/,\n      chrome: /chrome\\/([\\d.]+)/,\n      opera: /opera.([\\d.]+)/,\n      safari: /version\\/([\\d.]+).*safari/\n    };\n    return [].concat(Object.keys(reg).filter(function (key) {\n      return reg[key].test(ua);\n    }))[0];\n  },\n  get os() {\n    var ua = navigator.userAgent;\n    var isWindowsPhone = /(?:Windows Phone)/.test(ua);\n    var isSymbian = /(?:SymbianOS)/.test(ua) || isWindowsPhone;\n    var isAndroid = /(?:Android)/.test(ua);\n    var isFireFox = /(?:Firefox)/.test(ua);\n    var isTablet = /(?:iPad|PlayBook)/.test(ua) || isAndroid && !/(?:Mobile)/.test(ua) || isFireFox && /(?:Tablet)/.test(ua);\n    var isPhone = /(?:iPhone)/.test(ua) && !isTablet;\n    var isPc = !isPhone && !isAndroid && !isSymbian;\n    return {\n      isTablet: isTablet,\n      isPhone: isPhone,\n      isAndroid: isAndroid,\n      isPc: isPc,\n      isSymbian: isSymbian,\n      isWindowsPhone: isWindowsPhone,\n      isFireFox: isFireFox\n    };\n  },\n\n  get isLe() {\n    return le;\n  }\n};\n\nexport var PageVisibility = _PageVisibility;\nexport default sniffer;","var _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nimport EVENTS from '../events';\n\nvar LOADER_EVENTS = EVENTS.LOADER_EVENTS;\nvar READ_STREAM = 0;\nvar READ_TEXT = 1;\nvar READ_JSON = 2;\nvar READ_BUFFER = 3;\n\nvar FetchLoader = function () {\n  function FetchLoader(configs) {\n    _classCallCheck(this, FetchLoader);\n\n    this.configs = Object.assign({}, configs);\n    this.url = null;\n    this.status = 0;\n    this.error = null;\n    this._reader = null;\n    this._canceled = false;\n    this._destroyed = false;\n    this.readtype = this.configs.readtype;\n    this.buffer = this.configs.buffer || 'LOADER_BUFFER';\n    this._loaderTaskNo = 0;\n  }\n\n  _createClass(FetchLoader, [{\n    key: 'init',\n    value: function init() {\n      this.on(LOADER_EVENTS.LADER_START, this.load.bind(this));\n    }\n  }, {\n    key: 'fetch',\n    value: function (_fetch) {\n      function fetch(_x, _x2) {\n        return _fetch.apply(this, arguments);\n      }\n\n      fetch.toString = function () {\n        return _fetch.toString();\n      };\n\n      return fetch;\n    }(function (url, params) {\n      var timer = null;\n      return Promise.race([fetch(url, params), new Promise(function (resolve, reject) {\n        timer = setTimeout(function () {\n          reject(new Error('fetch timeout'));\n        }, 1e4); // 10s\n      })]).then(function (response) {\n        if (timer) {\n          clearTimeout(timer);\n          timer = null;\n        }\n        return response;\n      });\n    })\n  }, {\n    key: 'internalLoad',\n    value: function internalLoad(url, params, retryTimes) {\n      var _this2 = this;\n\n      return this.fetch(this.url, params).then(function (response) {\n        _this2.emit(LOADER_EVENTS.LOADER_RESPONSE_HEADERS, _this2.TAG, response.headers);\n\n        if (response.ok) {\n          _this2.status = response.status;\n          Promise.resolve().then(function () {\n            _this2._onFetchResponse(response);\n          });\n\n          return Promise.resolve(response);\n        }\n\n        if (retryTimes-- > 0) {\n          return _this2.internalLoad(url, params, retryTimes);\n        } else {\n          _this2.loading = false;\n          _this2.emit(LOADER_EVENTS.LOADER_ERROR, _this2.TAG, new Error(response.status + ' (' + response.statusText + ')'));\n        }\n      }).catch(function (error) {\n        _this2.loading = false;\n        if (retryTimes-- > 0) {\n          return _this2.internalLoad(url, params, retryTimes);\n        } else {\n          _this2.emit(LOADER_EVENTS.LOADER_ERROR, _this2.TAG, error);\n          throw error;\n        }\n      });\n    }\n  }, {\n    key: 'load',\n    value: function load(url) {\n      var opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var retryTimes = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 3;\n\n      this.url = url;\n\n      this._canceled = false;\n\n      // TODO: Add Ranges\n      var params = this.getParams(opts);\n      this.loading = true;\n      return this.internalLoad(url, params, retryTimes);\n    }\n  }, {\n    key: '_onFetchResponse',\n    value: function _onFetchResponse(response) {\n      var _this = this;\n      var buffer = this._context.getInstance(this.buffer);\n      this._loaderTaskNo++;\n      var taskno = this._loaderTaskNo;\n      if (response.ok === true) {\n        switch (this.readtype) {\n          case READ_JSON:\n            response.json().then(function (data) {\n              _this.loading = false;\n              if (!_this._canceled && !_this._destroyed) {\n                if (buffer) {\n                  buffer.push(data);\n                  _this.emit(LOADER_EVENTS.LOADER_COMPLETE, buffer);\n                } else {\n                  _this.emit(LOADER_EVENTS.LOADER_COMPLETE, data);\n                }\n              }\n            });\n            break;\n          case READ_TEXT:\n            response.text().then(function (data) {\n              _this.loading = false;\n              if (!_this._canceled && !_this._destroyed) {\n                if (buffer) {\n                  buffer.push(data);\n                  _this.emit(LOADER_EVENTS.LOADER_COMPLETE, buffer);\n                } else {\n                  _this.emit(LOADER_EVENTS.LOADER_COMPLETE, data);\n                }\n              }\n            });\n            break;\n          case READ_BUFFER:\n            response.arrayBuffer().then(function (data) {\n              _this.loading = false;\n              if (!_this._canceled && !_this._destroyed) {\n                if (buffer) {\n                  buffer.push(new Uint8Array(data));\n                  _this.emit(LOADER_EVENTS.LOADER_COMPLETE, buffer);\n                } else {\n                  _this.emit(LOADER_EVENTS.LOADER_COMPLETE, data);\n                }\n              }\n            });\n            break;\n          case READ_STREAM:\n          default:\n            return this._onReader(response.body.getReader(), taskno);\n        }\n      }\n    }\n  }, {\n    key: '_onReader',\n    value: function _onReader(reader, taskno) {\n      var _this3 = this;\n\n      var buffer = this._context.getInstance(this.buffer);\n      if (!buffer && this._reader || this._destroyed) {\n        try {\n          this._reader.cancel();\n        } catch (e) {\n          // DO NOTHING\n        }\n      }\n\n      this._reader = reader;\n      if (this.loading === false) {\n        return;\n      }\n\n      // reader read function returns a Promise. get data when callback and has value.done when disconnected.\n      // read方法返回一个Promise. 回调中可以获取到数据。当value.done存在时，说明链接断开。\n      this._reader && this._reader.read().then(function (val) {\n        if (_this3._canceled || _this3._destroyed) {\n          if (_this3._reader) {\n            try {\n              _this3._reader.cancel();\n            } catch (e) {\n              // DO NOTHING\n            }\n          }\n          return;\n        }\n        if (val.done) {\n          _this3.loading = false;\n          _this3.status = 0;\n          Promise.resolve().then(function () {\n            _this3.emit(LOADER_EVENTS.LOADER_COMPLETE, buffer);\n          });\n          return;\n        }\n\n        buffer.push(val.value);\n        Promise.resolve().then(function () {\n          _this3.emit(LOADER_EVENTS.LOADER_DATALOADED, buffer);\n        });\n        return _this3._onReader(reader, taskno);\n      }).catch(function (error) {\n        _this3.loading = false;\n        _this3.emit(LOADER_EVENTS.LOADER_ERROR, _this3.TAG, error);\n        throw error;\n      });\n    }\n  }, {\n    key: 'getParams',\n    value: function getParams(opts) {\n      var options = Object.assign({}, opts);\n      var headers = new Headers();\n\n      var params = {\n        method: 'GET',\n        headers: headers,\n        mode: 'cors',\n        cache: 'default'\n\n        // add custmor headers\n        // 添加自定义头\n      };if (_typeof(this.configs.headers) === 'object') {\n        var configHeaders = this.configs.headers;\n        for (var key in configHeaders) {\n          if (configHeaders.hasOwnProperty(key)) {\n            headers.append(key, configHeaders[key]);\n          }\n        }\n      }\n\n      if (_typeof(options.headers) === 'object') {\n        var optHeaders = options.headers;\n        for (var _key in optHeaders) {\n          if (optHeaders.hasOwnProperty(_key)) {\n            headers.append(_key, optHeaders[_key]);\n          }\n        }\n      }\n\n      if (options.cors === false) {\n        params.mode = 'same-origin';\n      }\n\n      // withCredentials is disabled by default\n      // withCredentials 在默认情况下不被使用。\n      if (options.withCredentials) {\n        params.credentials = 'include';\n      }\n\n      // TODO: Add ranges;\n      return params;\n    }\n  }, {\n    key: 'cancel',\n    value: function cancel() {\n      if (this._reader) {\n        try {\n          this._reader.cancel();\n        } catch (e) {\n          // 防止failed: 200错误被打印到控制台上\n        }\n        this._reader = null;\n        this.loading = false;\n      }\n      this._canceled = true;\n    }\n  }, {\n    key: 'destroy',\n    value: function destroy() {\n      this._destroyed = true;\n      this.cancel();\n    }\n  }], [{\n    key: 'type',\n    get: function get() {\n      return 'loader';\n    }\n  }]);\n\n  return FetchLoader;\n}();\n\nexport default FetchLoader;","var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar DevLogger = function () {\n  function DevLogger() {\n    var _this = this;\n\n    _classCallCheck(this, DevLogger);\n\n    try {\n\n      var matched = /xgd=(\\d)/.exec(document.cookie);\n      this._status = !!matched;\n      this._level = matched && matched[1];\n    } catch (e) {\n      this._status = false;\n    }\n\n    [\"group\", \"groupEnd\", \"log\", \"warn\", \"error\"].forEach(function (funName) {\n      _this[funName] = function (arg1, arg2, arg3, arg4, arg5, arg6, arg7, arg8, arg9, arg10) {\n        var _console;\n\n        if (!_this._status) return;\n        var tagName = arg1;\n        var args = [arg2, arg3, arg4, arg5, arg6, arg7, arg8, arg9, arg10].filter(function (x) {\n          return x !== undefined;\n        });\n        (_console = console)[funName].apply(_console, [\"[\" + tagName + \"]:\"].concat(_toConsumableArray(args)));\n      };\n    });\n  }\n\n  _createClass(DevLogger, [{\n    key: \"enable\",\n    get: function get() {\n      return this._status;\n    }\n\n    // more detailed log output\n\n  }, {\n    key: \"long\",\n    get: function get() {\n      return this._level === '2';\n    }\n  }]);\n\n  return DevLogger;\n}();\n\nexport default new DevLogger();","import * as _common from './common';\nimport _Context from './context';\nimport _crypto from './crypto';\nimport _Eme from './eme';\nimport _Mse from './mse';\nimport _sniffer from './sniffer';\nimport _PageVisibility from './sniffer/page-visibility';\nimport _EVENTS from './events';\nimport _FetchLoader from './loader-fetch';\nimport _devLogger from './common/dev-logger';\n\nexport var common = _common;\nexport var Context = _Context;\nexport var Crypto = _crypto;\nexport var Eme = _Eme;\nexport var Mse = _Mse;\nexport var Sniffer = _sniffer;\nexport var PageVisibility = _PageVisibility;\nexport var EVENTS = _EVENTS;\nexport var FetchLoader = _FetchLoader;\nexport var logger = _devLogger;","\nexport default {\n  AUDIO: {\n    AUDIO_READY: 'audio_ready',\n    AUDIO_WAITING: 'audio_waiting'\n  },\n  VIDEO: {\n    VIDEO_DECODER_INIT: 'video_decode_init',\n    VIDEO_READY: 'video_ready',\n    VIDEO_WAITING: 'video_waiting',\n    AUTO_RUN: 'auto_run',\n    DECODE_LOW_FPS: 'decode_low_fps'\n  },\n  TIMELINE: {\n    PLAY_EVENT: 'play_event',\n    SET_METADATA: 'set_metadata',\n    APPEND_CHUNKS: 'append_chunks',\n    START_RENDER: 'start_render',\n    DO_PAUSE: 'do_pause',\n    SYNC_DTS: 'sync_dts',\n    UPDATE_VOLUME: 'update_volume',\n    UPDATE_PRELOAD_TIME: 'update_preloadtime',\n    NO_AUDIO: 'no_audio',\n    DESTROY: 'destroy',\n    READY: 'ready'\n  },\n  VIDEO_EVENTS: {\n    WAITING: 'waiting',\n    CANPLAY: 'canplay',\n    PLAY: 'play',\n    PLAYING: 'playing',\n    PAUSE: 'pause',\n    LOADEDDATA: 'loadeddata',\n    TIMEUPDATE: 'timeupdate',\n    DURATION_CHANGE: 'durationchange',\n    VOLUME_CHANGE: 'volumechange',\n    ERROR: 'error',\n    // 自定义\n    DECODE_FPS: 'decodefps',\n    LOW_DECODE: 'lowdecode'\n  }\n};","var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar AudioTimeRange = function () {\n  function AudioTimeRange() {\n    _classCallCheck(this, AudioTimeRange);\n\n    this._buffers = [];\n    this._duration = 0;\n  }\n\n  _createClass(AudioTimeRange, [{\n    key: \"append\",\n    value: function append(source, duration, startDts) {\n      this._buffers.push({\n        start: this._duration,\n        end: this._duration + duration,\n        startDts: startDts,\n        source: source\n      });\n      this._duration += duration;\n    }\n  }, {\n    key: \"shift\",\n    value: function shift() {\n      return this._buffers.shift();\n    }\n  }, {\n    key: \"duration\",\n    get: function get() {\n      return this._duration;\n    }\n  }, {\n    key: \"buffered\",\n    get: function get() {\n      var _this = this;\n\n      return {\n        length: 1,\n        start: function start() {\n          return 0;\n        },\n        end: function end() {\n          return _this._duration;\n        }\n      };\n    }\n  }]);\n\n  return AudioTimeRange;\n}();\n\nexport default AudioTimeRange;","/**\n *\n * ios  WebAudio 在系统静音下 播放没有声音\n * hack: 创建背景Audio元素,静音且循环播放，用户交互后取消静音。\n * 在 ios safari、飞书webview、chrome下WebAudio可正常\n */\n\nfunction initBgSilenceAudio() {\n  if (document.querySelector('#hackAudioPP')) return;\n\n  var silenceMp3 = 'data:audio/mpeg;base64,//uQxAAAAAAAAAAAAAAAAAAAAAAAWGluZwAAAA8AAAACAAACcQCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA//////////////////////////////////////////////////////////////////8AAABhTEFNRTMuMTAwA8MAAAAAAAAAABQgJAUHQQAB9AAAAnGMHkkIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA//sQxAADgnABGiAAQBCqgCRMAAgEAH///////////////7+n/9FTuQsQH//////2NG0jWUGlio5gLQTOtIoeR2WX////X4s9Atb/JRVCbBUpeRUq//////////////////9RUi0f2jn/+xDECgPCjAEQAABN4AAANIAAAAQVTEFNRTMuMTAwVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVQ==';\n  var tmp = document.createElement('div');\n  tmp.innerHTML = '<audio id=\\'hackAudioPP\\'></audio>';\n  document.body.appendChild(tmp);\n  var audio = tmp.children.item(0);\n  audio.controls = false;\n  audio.preload = 'auto';\n  audio.src = silenceMp3;\n  // audio.src = 'http://10.1.9.110:8887/_media/1.mp3';\n  audio.muted = true;\n  audio.loop = true;\n  audio.load();\n  audio.play().catch(function (e) {});\n}\n\nvar ele = void 0;\n\nfunction playSlienceAudio() {\n  var audio = ele || (ele = document.querySelector('#hackAudioPP'));\n  if (!audio) {\n    initBgSilenceAudio();\n    return;\n  }\n  if (audio.muted) {\n    audio.muted = false;\n    audio.play().catch(function (e) {});\n  }\n}\n\nexport { initBgSilenceAudio, playSlienceAudio };","var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nimport EventEmitter from 'events';\nimport { logger } from 'xgplayer-helper-utils';\nimport Events from '../events';\nimport AudioTimeRange from './AudioTimeRange';\nimport { initBgSilenceAudio, playSlienceAudio, setAudioMuted } from './audio-helper';\n\nvar AudioContext = window.AudioContext || window.webkitAudioContext;\n\nvar MEDIA_ERR_DECODE = 3;\n\nvar ERROR_MSG = {\n  INIT_AUDIO_ERR: 'create new AudioContext error',\n  DECODE_ERR: 'audio data decode error'\n};\n\nvar AudioRender = function (_EventEmitter) {\n  _inherits(AudioRender, _EventEmitter);\n\n  function AudioRender(config, parent) {\n    _classCallCheck(this, AudioRender);\n\n    var _this = _possibleConstructorReturn(this, (AudioRender.__proto__ || Object.getPrototypeOf(AudioRender)).call(this));\n\n    _this.TAG = 'AudioRender';\n    _this._config = config;\n    _this._parent = parent;\n    _this._timeRange = new AudioTimeRange();\n    _this._sampleQueue = [];\n    _this._ready = false;\n    _this._meta = null;\n    _this._noAudio = false;\n    _this._source = null;\n    _this._onSourceBufferEnded = _this._onSourceBufferEnded.bind(_this);\n    _this._initAudioCtx(config.volume || 0.6);\n    _this._bindEvents();\n    return _this;\n  }\n\n  _createClass(AudioRender, [{\n    key: 'resume',\n    value: function resume() {\n      return this._audioCtx.resume();\n    }\n  }, {\n    key: '_assembleErr',\n    value: function _assembleErr(msg) {\n      var err = new Error(msg);\n      err.code = MEDIA_ERR_DECODE;\n      return err;\n    }\n  }, {\n    key: '_initAudioCtx',\n    value: function _initAudioCtx(volume) {\n      var _this2 = this;\n\n      this._audioCtx = new AudioContext();\n      if (!this._audioCtx) {\n        logger.warn(this.TAG, 'create webaudio error!');\n        // AudioRender在Timeline constructor中实例化,timeline error handler还未绑定,异步触发\n        setTimeout(function () {\n          _this2._emitTimelineEvents(Events.TIMELINE.PLAY_EVENT, 'error', _this2._assembleErr(ERROR_MSG.INIT_AUDIO_ERR));\n        });\n        return;\n      }\n      this._gainNode = this._audioCtx.createGain();\n      this._gainNode.gain.value = volume;\n      this._gainNode.connect(this._audioCtx.destination);\n      this._audioCtx.suspend();\n      initBgSilenceAudio();\n    }\n  }, {\n    key: '_emitTimelineEvents',\n    value: function _emitTimelineEvents(e, v, d) {\n      this._parent.emit(e, v, d);\n    }\n  }, {\n    key: '_bindEvents',\n    value: function _bindEvents() {\n      var _this3 = this;\n\n      this._audioCtx.addEventListener('statechange', function () {\n        if (!_this3._audioCtx) return;\n        if (_this3._audioCtx.state === 'running' && _this3._ready) {\n          _this3._emitTimelineEvents(Events.TIMELINE.PLAY_EVENT, Events.VIDEO_EVENTS.PLAYING);\n        }\n      });\n\n      this._parent.on(Events.TIMELINE.SET_METADATA, function (type, meta) {\n        if (type === 'video') return;\n        if (_this3._noAudio) return;\n        logger.warn(_this3.TAG, 'audio set metadata');\n        _this3._meta = meta;\n      });\n\n      this._parent.on(Events.TIMELINE.APPEND_CHUNKS, this._appendChunk.bind(this));\n\n      this._parent.on(Events.TIMELINE.START_RENDER, this._startRender.bind(this));\n\n      this._parent.on(Events.TIMELINE.DO_PAUSE, function () {\n        _this3._audioCtx.suspend();\n      });\n\n      this._parent.on(Events.TIMELINE.UPDATE_VOLUME, function (v) {\n        if (!_this3._gainNode) return;\n        _this3._gainNode.gain.value = v;\n        _this3._emitTimelineEvents(Events.TIMELINE.PLAY_EVENT, Events.VIDEO_EVENTS.VOLUME_CHANGE);\n      });\n\n      // this._parent.on(Events.TIMELINE.UPDATE_PRELOAD_TIME, (v) => {\n      //   this._config.preloadTime = v;\n      // });\n\n      this._parent.on(Events.TIMELINE.DESTROY, function () {\n        _this3._destroy();\n      });\n\n      this._parent.on(Events.TIMELINE.NO_AUDIO, function () {\n        _this3._noAudio = true;\n      });\n    }\n\n    // receive new compressed samples\n\n  }, {\n    key: '_appendChunk',\n    value: function _appendChunk(_, audioTrack) {\n      if (this._noAudio) return;\n\n      var samples = audioTrack.samples,\n          meta = audioTrack.meta;\n\n\n      if (meta && samples.length) {\n        this._sampleQueue = this._sampleQueue.concat(samples);\n        audioTrack.samples = [];\n        this._assembleAAC();\n      }\n    }\n  }, {\n    key: '_checkMetaChange',\n    value: function _checkMetaChange(sampleQueue, len) {\n      var index = -1;\n      for (var i = 0; i < len; i++) {\n        var op = sampleQueue[i].options;\n        if (op && op.meta) {\n          index = i;\n          logger.warn(this.TAG, 'detect metadata! index=' + i + ' ,dts=' + sampleQueue[i].dts);\n          break;\n        }\n      }\n      return index;\n    }\n  }, {\n    key: '_assembleAAC',\n    value: function _assembleAAC() {\n      var _this4 = this;\n\n      var len = this._sampleQueue.length;\n      var samp0 = this._sampleQueue[0];\n      var sampLast = this._sampleQueue[len - 1];\n      var metaChangeIndex = this._checkMetaChange(this._sampleQueue, len);\n\n      if (metaChangeIndex === -1) {\n        if ((sampLast.dts - samp0.dts) / this.timescale < this.preloadTime) {\n          return;\n        }\n      }\n\n      var toDecode = void 0;\n\n      if (metaChangeIndex === -1) {\n        toDecode = this._sampleQueue;\n        this._sampleQueue = [];\n      } else {\n        // 采样队列中间换流,前后部分分开\n        toDecode = this._sampleQueue.splice(0, metaChangeIndex || len);\n      }\n\n      if (!toDecode.length) return;\n\n      var adtss = toDecode.map(function (sample, index) {\n        if (index === metaChangeIndex) {\n          _this4._meta = sample.options.meta;\n        }\n        return AudioRender.getAACData(_this4._meta, sample);\n      });\n\n      var chunkBuffer = AudioRender.combileData(adtss);\n\n      this._audioCtx.decodeAudioData(chunkBuffer.buffer, function (uncompress) {\n        var _source = _this4._audioCtx.createBufferSource();\n        _source.buffer = uncompress;\n        _source.loop = false;\n        _this4._timeRange.append(_source, uncompress.duration, metaChangeIndex === -1 ? samp0.dts : 0);\n\n        if (!_this4._ready) {\n          // init background Audio ele\n          _this4._ready = true;\n          _this4.emit(Events.AUDIO.AUDIO_READY);\n        }\n        _this4._emitTimelineEvents(Events.TIMELINE.PLAY_EVENT, Events.VIDEO_EVENTS.DURATION_CHANGE);\n      }, function () {\n        _this4._emitTimelineEvents(Events.TIMELINE.PLAY_EVENT, 'error', _this4._assembleErr(ERROR_MSG.DECODE_ERR));\n      });\n    }\n  }, {\n    key: '_onSourceBufferEnded',\n    value: function _onSourceBufferEnded() {\n      if (logger.long) {\n        logger.log(this.TAG, 'source play end! currentTime:' + this.currentTime + ' , duration:' + this.duration);\n      }\n      this._startRender();\n    }\n  }, {\n    key: '_startRender',\n    value: function _startRender() {\n      if (this._noAudio) return;\n\n      if (this._audioCtx.state === 'suspended') {\n        this._audioCtx.resume();\n        playSlienceAudio();\n      }\n      var buffer = this._timeRange.shift();\n      if (!buffer) {\n        this._ready = false;\n        this._audioCtx.suspend();\n        this.emit(Events.AUDIO.AUDIO_WAITING);\n        return;\n      }\n\n      this._source = null;\n\n      var _source = buffer.source;\n      // 保存引用,移动浏览器下,对source的回收机制有差异，不保存引用会提前回收,导致ended事件不触发\n      this._source = _source;\n      _source.addEventListener('ended', this._onSourceBufferEnded);\n      _source.connect(this._gainNode);\n      _source.start();\n\n      if (buffer.startDts) {\n        this._emitTimelineEvents(Events.TIMELINE.SYNC_DTS, buffer.startDts);\n      }\n    }\n  }, {\n    key: '_destroy',\n    value: function _destroy() {\n      logger.log(this.TAG, 'destroy audio...');\n      this._audioCtx.close();\n      this._audioCtx = null;\n      this._sampleQueue = null;\n      this._timeRange = null;\n    }\n  }, {\n    key: 'currentTime',\n    get: function get() {\n      if (!this._audioCtx) return 0;\n      return this._audioCtx.currentTime;\n    }\n  }, {\n    key: 'duration',\n    get: function get() {\n      return this._timeRange.duration;\n    }\n  }, {\n    key: 'preloadTime',\n    get: function get() {\n      return 2;\n    }\n  }, {\n    key: 'timescale',\n    get: function get() {\n      if (!this._meta) return 1000;\n      return this._meta.timescale || 1000;\n    }\n  }, {\n    key: 'buffered',\n    get: function get() {\n      return this._timeRange.buffered;\n    }\n  }, {\n    key: 'ctxState',\n    get: function get() {\n      return this._audioCtx.state;\n    }\n  }], [{\n    key: 'getAACData',\n    value: function getAACData(meta, sample) {\n      var buffer = new Uint8Array(sample.data.byteLength + 7);\n      var adts = AudioRender.getAdts(meta, sample.data);\n      buffer.set(adts);\n      buffer.set(sample.data, 7);\n      return buffer;\n    }\n  }, {\n    key: 'combileData',\n    value: function combileData(samples) {\n      // get length\n      var length = 0;\n      for (var i = 0, k = samples.length; i < k; i++) {\n        length += samples[i].byteLength;\n      }\n\n      var ret = new Uint8Array(length);\n      var offset = 0;\n      // combile data;\n      for (var _i = 0, _k = samples.length; _i < _k; _i++) {\n        ret.set(samples[_i], offset);\n        offset += samples[_i].byteLength;\n      }\n      return ret;\n    }\n  }, {\n    key: 'getAdts',\n    value: function getAdts(meta, data) {\n      var adts = new Uint8Array(7);\n\n      // 设置同步位 0xfff 12bit\n      adts[0] = 0xff;\n      adts[1] = 0xf0;\n\n      // Object data (没什么人用MPEG-2了，HLS和FLV也全是MPEG-4，这里直接0)  1bit\n      // Level always 00 2bit\n      // CRC always 1 1bit\n      adts[1] = adts[1] | 0x01;\n\n      // profile 2bit\n      adts[2] = 0xc0 & meta.originObjectType - 1 << 6;\n\n      // sampleFrequencyIndex\n      adts[2] = adts[2] | 0x3c & meta.sampleRateIndex << 2;\n\n      // private bit 0 1bit\n      // chanel configuration 3bit\n      adts[2] = adts[2] | 0x01 & meta.channelCount >> 2;\n      adts[3] = 0xc0 & meta.channelCount << 6;\n\n      // original_copy: 0 1bit\n      // home: 0 1bit\n\n      // adts_variable_header()\n      // copyrighted_id_bit 0 1bit\n      // copyrighted_id_start 0 1bit\n\n      // aac_frame_length 13bit;\n      var aacframelength = data.byteLength + 7;\n\n      adts[3] = adts[3] | 0x03 & aacframelength >> 11;\n      adts[4] = 0xff & aacframelength >> 3;\n      adts[5] = 0xe0 & aacframelength << 5;\n\n      // adts_buffer_fullness 0x7ff 11bit\n      adts[5] = adts[5] | 0x1f;\n      adts[6] = 0xfc;\n\n      // number_of_raw_data_blocks_in_frame 0 2bit;\n      return adts;\n    }\n  }]);\n\n  return AudioRender;\n}(EventEmitter);\n\nexport default AudioRender;","var TARGET = typeof Symbol === 'undefined' ? '__target' : Symbol(),\n    SCRIPT_TYPE = 'application/javascript',\n    BlobBuilder = window.BlobBuilder || window.WebKitBlobBuilder || window.MozBlobBuilder || window.MSBlobBuilder,\n    URL = window.URL || window.webkitURL,\n    Worker = window.Worker;\n\n/**\n * Returns a wrapper around Web Worker code that is constructible.\n *\n * @function shimWorker\n *\n * @param { String }    filename    The name of the file\n * @param { Function }  fn          Function wrapping the code of the worker\n */\nexport default function shimWorker (filename, fn) {\n    return function ShimWorker (forceFallback) {\n        var o = this;\n\n        if (!fn) {\n            return new Worker(filename);\n        }\n        else if (Worker && !forceFallback) {\n            // Convert the function's inner code to a string to construct the worker\n            var source = `${ fn }`.replace(/^function.+?{/, '').slice(0, -1),\n                objURL = createSourceObject(source);\n\n            this[TARGET] = new Worker(objURL);\n            URL.revokeObjectURL(objURL);\n            return this[TARGET];\n        }\n        else {\n            var selfShim = {\n                    postMessage: m => {\n                        if (o.onmessage) {\n                            setTimeout(() => o.onmessage({ data: m, target: selfShim }));\n                        }\n                    }\n                };\n\n            fn.call(selfShim);\n            this.postMessage = m => {\n                setTimeout(() => selfShim.onmessage({ data: m, target: o }));\n            };\n            this.isThisThread = true;\n        }\n    };\n};\n\n// Test Worker capabilities\nif (Worker) {\n    var testWorker,\n        objURL = createSourceObject('self.onmessage = function () {}'),\n        testArray = new Uint8Array(1);\n\n    try {\n        // No workers via blobs in Edge 12 and IE 11 and lower :(\n        if (/(?:Trident|Edge)\\/(?:[567]|12)/i.test(navigator.userAgent)) {\n            throw new Error('Not available');\n        }\n        testWorker = new Worker(objURL);\n\n        // Native browser on some Samsung devices throws for transferables, let's detect it\n        testWorker.postMessage(testArray, [testArray.buffer]);\n    }\n    catch (e) {\n        Worker = null;\n    }\n    finally {\n        URL.revokeObjectURL(objURL);\n        if (testWorker) {\n            testWorker.terminate();\n        }\n    }\n}\n\nfunction createSourceObject(str) {\n    try {\n        return URL.createObjectURL(new Blob([str], { type: SCRIPT_TYPE }));\n    }\n    catch (e) {\n        var blob = new BlobBuilder();\n        blob.append(str);\n        return URL.createObjectURL(blob.getBlob(type));\n    }\n}\n","import shimWorker from 'rollup-plugin-bundle-worker';\nexport default new shimWorker(\"../decoder/hevc-worker.js\", function (window, document) {\nvar self = this;\n// 目前仅支持yuv420\n\n// const H265_DECODER_URL =\n//   \"https://sf1-vcloudcdn.pstatp.com/obj/media-fe/decoder/h265/decoder_1592202936266.js\";\n\nfunction shimImportScripts(src) {\n  return fetch(src).then(function (res) {\n    return res.text();\n  }).then(function (text) {\n    eval(text);\n    self.Module = Module;\n    self.addOnPostRun = addOnPostRun;\n  });\n}\n\nvar MAX_STREAM_BUFFER_LENGTH = 1024 * 1024;\nvar Decoder = function Decoder(self) {\n  this.inited = false;\n  this.infoId = 0;\n  this.self = self;\n  this.meta = this.self.meta;\n  this.ts = 0;\n  this.infolist = [];\n  self.par_broadwayOnBroadwayInited = this.broadwayOnBroadwayInited.bind(this);\n  self.par_broadwayOnPictureDecoded = this.broadwayOnPictureDecoded.bind(this);\n};\n\nDecoder.prototype.toU8Array = function (ptr, length) {\n  return Module.HEAPU8.subarray(ptr, ptr + length);\n};\n\nDecoder.prototype.init = function () {\n  Module._broadwayInit();\n  this.offset = Module._broadwayCreateStream(MAX_STREAM_BUFFER_LENGTH);\n};\n\nDecoder.prototype.broadwayOnPictureDecoded = function (offset, width, height, infoid, sliceType) {\n  if (this.infolist[0] && this.infolist[0].isGop && sliceType !== 2) {\n    this.self.postMessage({\n      msg: 'LOG',\n      log: 'drop sample'\n    });\n    return;\n  }\n\n  var info = this.infolist.shift();\n  var yRowcount = height;\n  var uvRowcount = height / 2;\n  var yLinesize = width;\n  var uvLinesize = width / 2;\n  if (this.meta && (this.meta.chromaFormat === 444 || this.meta.chromaFormat === 422)) {\n    uvRowcount = height;\n  }\n  var data = this.toU8Array(offset, yLinesize * yRowcount + 2 * (uvLinesize * uvRowcount));\n  // this.infolist[infoid] = null;\n  var datetemp = new Uint8Array(data.length);\n  datetemp.set(data);\n  var buffer = datetemp.buffer;\n\n  this.self.postMessage({\n    msg: 'DECODED',\n    width: width,\n    height: height,\n    yLinesize: yLinesize,\n    uvLinesize: uvLinesize,\n    info: info,\n    buffer: buffer\n  }, [buffer]);\n};\n\nDecoder.prototype.broadwayOnBroadwayInited = function () {\n  if (this.inited) {\n    return;\n  }\n  this.inited = true;\n  this.self.postMessage({\n    msg: 'LOG',\n    log: 'decoder inited'\n  });\n  this.self.postMessage({ msg: 'DECODER_READY' });\n};\n\nDecoder.prototype.decode = function (data, info) {\n  var time = parseInt(new Date().getTime());\n  var infoid = time - Math.floor(time / 10e8) * 10e8;\n  this.infolist.push(info);\n  if (info && info.isGop) {\n    this.infolist = [info];\n    Module._broadwayFlushStream(infoid);\n  }\n  Module.HEAPU8.set(data, this.offset);\n  Module._broadwayPlayStream(data.length, this.infoId);\n};\n\nDecoder.prototype.destroy = function () {\n  Module._broadwayExit();\n};\n\nDecoder.prototype.updateMeta = function (meta) {\n  this.meta = meta;\n};\n\nvar decoder;\n\nfunction onPostRun() {\n  self.postMessage({\n    msg: 'LOG',\n    log: 'do post run'\n  });\n  decoder = new Decoder(this);\n  decoder.init();\n}\n\nfunction init(url) {\n  if (!decoder) {\n    var task = void 0;\n\n    if (!self.importScripts) {\n      task = shimImportScripts(url);\n    } else {\n      task = new Promise(function (resolve, reject) {\n        if (!self.console) {\n          self.console = {\n            log: function log() {},\n            warn: function warn() {},\n            info: function info() {},\n            error: function error() {}\n          };\n        }\n        try {\n          self.importScripts(url);\n          resolve();\n        } catch (e) {\n          reject(e);\n        }\n      });\n    }\n\n    task.then(function () {\n      addOnPostRun(onPostRun.bind(self));\n      setTimeout(function () {\n        if (!decoder || !decoder.inited) {\n          console.log('auto instance Decoder!');\n          onPostRun.call(self);\n        }\n      }, 5000);\n    }).catch(function (e) {\n      self.postMessage({\n        msg: 'INIT_FAILED',\n        log: e.message\n      });\n    });\n  }\n}\n\nself.onmessage = function (e) {\n  var data = e.data;\n  if (!data.msg) {\n    self.postMessage({\n      msg: 'ERROR:invalid message'\n    });\n  } else {\n    switch (data.msg) {\n      case 'init':\n        self.meta = data.meta;\n        self.postMessage({\n          msg: 'LOG',\n          log: 'worker inited'\n        });\n        init(data.url);\n        break;\n      case 'updatemeta':\n        self.meta = data.meta;\n        decoder.updateMeta(data.meta);\n        break;\n      case 'decode':\n        decoder.decode(data.data, data.info);\n        self.postMessage({\n          msg: 'DECODE_FINISH',\n          dts: data.info ? data.info.dts : 0\n        });\n        break;\n      case 'destory':\n        decoder.destroy();\n        break;\n      default:\n        break;\n    }\n  }\n};\n\n});","import shimWorker from 'rollup-plugin-bundle-worker';\nexport default new shimWorker(\"../decoder/worker.js\", function (window, document) {\nvar self = this;\n// const H264_DECODER_URL =\n//   \"https://sf1-vcloudcdn.pstatp.com/obj/ttfe/media/decoder/h264/decoder_1583333072684.js\";\n\nfunction shimImportScripts(src) {\n  return fetch(src).then(function (res) {\n    return res.text();\n  }).then(function (text) {\n    eval(text);\n    self.Module = Module;\n    self.addOnPostRun = addOnPostRun;\n  });\n}\n\nvar MAX_STREAM_BUFFER_LENGTH = 1024 * 1024;\n\nvar Decoder = function Decoder(self) {\n  this.inited = false;\n  this.self = self;\n  this.meta = this.self.meta;\n  this.infolist = {};\n  self.par_broadwayOnBroadwayInited = this.broadwayOnBroadwayInited.bind(this);\n  self.par_broadwayOnPictureDecoded = this.broadwayOnPictureDecoded.bind(this);\n};\n\nDecoder.prototype.toU8Array = function (ptr, length) {\n  return Module.HEAPU8.subarray(ptr, ptr + length);\n};\n\nDecoder.prototype.init = function () {\n  Module._broadwayInit();\n  this.broadwayOnBroadwayInited();\n  this.streamBuffer = this.toU8Array(Module._broadwayCreateStream(MAX_STREAM_BUFFER_LENGTH), MAX_STREAM_BUFFER_LENGTH);\n};\n\nDecoder.prototype.broadwayOnPictureDecoded = function (offset, width, height, yLinesize, uvLinesize, infoid) {\n  var info = Object.assign({}, this.infolist[infoid]);\n  var yRowcount = height;\n  var uvRowcount = height / 2;\n  if (this.meta && (this.meta.chromaFormat === 444 || this.meta.chromaFormat === 422)) {\n    uvRowcount = height;\n  }\n  var data = this.toU8Array(offset, yLinesize * yRowcount + 2 * (uvLinesize * uvRowcount));\n  this.infolist[infoid] = null;\n  var datetemp = new Uint8Array(data.length);\n  datetemp.set(data);\n  var buffer = datetemp.buffer;\n\n  this.self.postMessage({\n    msg: 'DECODED',\n    width: width,\n    height: height,\n    yLinesize: yLinesize,\n    uvLinesize: uvLinesize,\n    info: info,\n    buffer: buffer\n  }, [buffer]);\n};\n\nDecoder.prototype.broadwayOnBroadwayInited = function () {\n  this.inited = true;\n  this.self.postMessage({\n    msg: 'LOG',\n    log: 'decoder inited'\n  });\n  this.self.postMessage({ msg: 'DECODER_READY' });\n};\n\nDecoder.prototype.decode = function (data, info) {\n  var time = parseInt(new Date().getTime());\n  var infoid = time - Math.floor(time / 10e8) * 10e8;\n  this.infolist[infoid] = info;\n  this.streamBuffer.set(data);\n  Module._broadwayPlayStream(data.length, infoid);\n};\n\nDecoder.prototype.destroy = function () {\n  Module._broadwayExit();\n};\n\nDecoder.prototype.updateMeta = function (meta) {\n  this.meta = meta;\n};\n\nvar decoder;\n\nfunction onPostRun() {\n  self.postMessage({\n    msg: 'LOG',\n    log: 'do post run'\n  });\n\n  decoder = new Decoder(this);\n  decoder.init();\n}\n\nfunction init(url) {\n  if (!decoder) {\n    var task = void 0;\n    if (!self.importScripts) {\n      task = shimImportScripts(url);\n    } else {\n      task = new Promise(function (resolve, reject) {\n        if (!self.console) {\n          self.console = {\n            log: function log() {},\n            warn: function warn() {},\n            info: function info() {},\n            error: function error() {}\n          };\n        }\n        try {\n          self.importScripts(url);\n          resolve();\n        } catch (e) {\n          reject(e);\n        }\n      });\n    }\n\n    task.then(function () {\n      addOnPostRun(onPostRun.bind(self));\n\n      setTimeout(function () {\n        if (!decoder || !decoder.inited) {\n          console.log('auto instance Decoder!');\n          onPostRun.call(self);\n        }\n      }, 5000);\n    }).catch(function (e) {\n      self.postMessage({\n        msg: 'INIT_FAILED',\n        log: e.message\n      });\n    });\n  }\n}\n\nself.onmessage = function (e) {\n  var data = e.data;\n  if (!data.msg) {\n    self.postMessage({\n      msg: 'ERROR:invalid message'\n    });\n  } else {\n    switch (data.msg) {\n      case 'init':\n        self.meta = data.meta;\n        self.postMessage({\n          msg: 'LOG',\n          log: 'worker inited'\n        });\n        init(data.url);\n        break;\n      case 'updatemeta':\n        self.meta = data.meta;\n        decoder.updateMeta(data.meta);\n        break;\n      case 'decode':\n        decoder.decode(data.data, data.info);\n        self.postMessage({\n          msg: 'DECODE_FINISH',\n          dts: data.info ? data.info.dts : 0\n        });\n        break;\n      case 'destory':\n        decoder.destroy();\n        break;\n      default:\n        break;\n    }\n  }\n};\n\n});","var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nimport { logger } from 'xgplayer-helper-utils';\n\nfunction bitRateFormate(v) {\n  if (v > 1000) {\n    return (v / 1000).toFixed(2) + 'MB/s';\n  }\n  return v.toFixed(2) + 'KB/s';\n}\n\nvar VideoTimeRange = function () {\n  function VideoTimeRange() {\n    _classCallCheck(this, VideoTimeRange);\n\n    this.TAG = 'VideoTimeRange';\n    this._baseDts = -1;\n    this._lastDuration = 0;\n    this._duration = 0;\n    this._bitrate = '0KB/s';\n    this._compressFrame = [];\n  }\n\n  _createClass(VideoTimeRange, [{\n    key: '_caclBaseDts',\n    value: function _caclBaseDts(frame) {\n      if (this._baseDts !== -1) return;\n      if (!frame) return;\n      this._baseDts = frame.dts;\n      logger.log(this.TAG, 'set baseDts: ', this._baseDts, 'frame len:', this._compressFrame.length);\n    }\n  }, {\n    key: '_updateDuration',\n    value: function _updateDuration(frames) {\n      var len = frames.length;\n      var last = frames[len - 1];\n\n      for (var i = 0; i < len; i++) {\n        var f = frames[i];\n        if (f && f.options && f.options.meta) {\n          var pre = frames[i - 1] || this._compressFrame[this._compressFrame.length - 1];\n          if (pre) {\n            this._lastDuration += (pre.dts - this._baseDts) / 1000;\n          } else {\n            this._lastDuration = this._duration;\n          }\n          logger.log(this.TAG, 'updateBaseDts,record lastDuration:', this._lastDuration);\n          this._baseDts = f.dts;\n          break;\n        }\n      }\n\n      if (last) {\n        this._duration = (last.dts - this._baseDts) / 1000 + this._lastDuration;\n      }\n    }\n  }, {\n    key: '_estimateBitRate',\n    value: function _estimateBitRate(frames) {\n      var len = frames.length;\n      if (!len) return;\n      var sum = 0;\n      for (var i = 0; i < len; i++) {\n        sum += frames[i].data.length;\n      }\n      var delta = frames[len - 1].dts - frames[0].dts;\n\n      var bitrate = sum / delta; // KB/s\n      this._bitrate = bitRateFormate(bitrate);\n    }\n  }, {\n    key: 'append',\n    value: function append(frames, upDuration) {\n      this._caclBaseDts(frames[0]);\n\n      if (upDuration) {\n        this._updateDuration(frames);\n      }\n      this._estimateBitRate(frames);\n      this._compressFrame = this._compressFrame.concat(frames);\n    }\n  }, {\n    key: 'deletePassed',\n    value: function deletePassed(dts) {\n      var len = this._compressFrame.length;\n      this._compressFrame = this._compressFrame.filter(function (x) {\n        return x.dts > dts;\n      });\n      return len - this._compressFrame.length;\n    }\n  }, {\n    key: 'shift',\n    value: function shift() {\n      var f = this._compressFrame.shift();\n      return f;\n    }\n  }, {\n    key: 'baseDts',\n    get: function get() {\n      return this._baseDts;\n    }\n  }, {\n    key: 'duartion',\n    get: function get() {\n      return this._duration;\n    }\n  }, {\n    key: 'buffered',\n    get: function get() {\n      var _this = this;\n\n      return {\n        length: 1,\n        start: function start() {\n          return 0;\n        },\n        end: function end() {\n          return _this._duration;\n        }\n      };\n    }\n  }, {\n    key: 'bitrate',\n    get: function get() {\n      return this._bitrate;\n    }\n  }, {\n    key: 'lastDuration',\n    get: function get() {\n      return this._lastDuration;\n    }\n  }]);\n\n  return VideoTimeRange;\n}();\n\nexport default VideoTimeRange;","var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nimport { logger } from \"xgplayer-helper-utils\";\n\nvar YUVCanvas = function () {\n  function YUVCanvas(configs) {\n    _classCallCheck(this, YUVCanvas);\n\n    this.configs = Object.assign({}, configs);\n    this.canvas = this.configs.canvas;\n    this.meta = Object.assign({}, this.configs.meta);\n    this._initMeta();\n    // this.canvas.style.width = configs.style.width;\n    // this.canvas.style.height = configs.style.height;\n    this._initContextGL();\n    if (this.contextGL) {\n      this._initProgram();\n      this._initBuffers();\n      this._initTextures();\n    };\n  }\n\n  _createClass(YUVCanvas, [{\n    key: '_initMeta',\n    value: function _initMeta() {\n      this.chroma = this.meta.chromaFormat;\n      this.height = this.meta.presentHeight;\n      this.width = this.meta.presentWidth;\n      this.canvas.width = this.meta.presentWidth;\n      this.canvas.height = this.meta.presentHeight;\n    }\n  }, {\n    key: '_initContextGL',\n    value: function _initContextGL() {\n      var canvas = this.canvas;\n      var gl = null;\n\n      var validContextNames = ['webgl', 'experimental-webgl', 'moz-webgl', 'webkit-3d'];\n      var nameIndex = 0;\n\n      while (!gl && nameIndex < validContextNames.length) {\n        var contextName = validContextNames[nameIndex];\n\n        try {\n          if (this.contextOptions) {\n            gl = canvas.getContext(contextName, this.contextOptions);\n          } else {\n            gl = canvas.getContext(contextName);\n          };\n          logger.log('YUVCanvas', 'use=', contextName);\n          break;\n        } catch (e) {\n          gl = null;\n        }\n\n        if (!gl || typeof gl.getParameter !== 'function') {\n          gl = null;\n        }\n\n        ++nameIndex;\n      };\n\n      this.contextGL = gl;\n    }\n  }, {\n    key: '_initProgram',\n    value: function _initProgram() {\n      var gl = this.contextGL;\n\n      // vertex shader is the same for all types\n      var vertexShaderScript;\n      var fragmentShaderScript;\n      vertexShaderScript = ['attribute vec4 vertexPos;', 'attribute vec4 texturePos;', 'attribute vec4 uTexturePos;', 'attribute vec4 vTexturePos;', 'varying vec2 textureCoord;', 'varying vec2 uTextureCoord;', 'varying vec2 vTextureCoord;', 'void main()', '{', '  gl_Position = vertexPos;', '  textureCoord = texturePos.xy;', '  uTextureCoord = uTexturePos.xy;', '  vTextureCoord = vTexturePos.xy;', '}'].join('\\n');\n\n      fragmentShaderScript = ['precision highp float;', 'varying highp vec2 textureCoord;', 'varying highp vec2 uTextureCoord;', 'varying highp vec2 vTextureCoord;', 'uniform sampler2D ySampler;', 'uniform sampler2D uSampler;', 'uniform sampler2D vSampler;', 'uniform mat4 YUV2RGB;', 'void main(void) {', '  highp float y = texture2D(ySampler,  textureCoord).r;', '  highp float u = texture2D(uSampler,  uTextureCoord).r;', '  highp float v = texture2D(vSampler,  vTextureCoord).r;', '  gl_FragColor = vec4(y, u, v, 1) * YUV2RGB;', '}'].join('\\n');\n\n      var YUV2RGB = [1.16438, 0.00000, 1.59603, -0.87079, 1.16438, -0.39176, -0.81297, 0.52959, 1.16438, 2.01723, 0.00000, -1.08139, 0, 0, 0, 1];\n      var vertexShader = gl.createShader(gl.VERTEX_SHADER);\n      gl.shaderSource(vertexShader, vertexShaderScript);\n      gl.compileShader(vertexShader);\n      if (!gl.getShaderParameter(vertexShader, gl.COMPILE_STATUS)) {\n        console.log('Vertex shader failed to compile: ' + gl.getShaderInfoLog(vertexShader));\n      }\n\n      var fragmentShader = gl.createShader(gl.FRAGMENT_SHADER);\n      gl.shaderSource(fragmentShader, fragmentShaderScript);\n      gl.compileShader(fragmentShader);\n      if (!gl.getShaderParameter(fragmentShader, gl.COMPILE_STATUS)) {\n        console.log('Fragment shader failed to compile: ' + gl.getShaderInfoLog(fragmentShader));\n      }\n\n      var program = gl.createProgram();\n      gl.attachShader(program, vertexShader);\n      gl.attachShader(program, fragmentShader);\n      gl.linkProgram(program);\n      if (!gl.getProgramParameter(program, gl.LINK_STATUS)) {\n        console.log('Program failed to compile: ' + gl.getProgramInfoLog(program));\n      }\n\n      gl.useProgram(program);\n\n      var YUV2RGBRef = gl.getUniformLocation(program, 'YUV2RGB');\n      gl.uniformMatrix4fv(YUV2RGBRef, false, YUV2RGB);\n\n      this.shaderProgram = program;\n    }\n  }, {\n    key: '_initBuffers',\n    value: function _initBuffers() {\n      var gl = this.contextGL;\n      var program = this.shaderProgram;\n\n      var vertexPosBuffer = gl.createBuffer();\n      gl.bindBuffer(gl.ARRAY_BUFFER, vertexPosBuffer);\n      gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([1, 1, -1, 1, 1, -1, -1, -1]), gl.STATIC_DRAW);\n\n      var vertexPosRef = gl.getAttribLocation(program, 'vertexPos');\n      gl.enableVertexAttribArray(vertexPosRef);\n      gl.vertexAttribPointer(vertexPosRef, 2, gl.FLOAT, false, 0, 0);\n\n      var texturePosBuffer = gl.createBuffer();\n      gl.bindBuffer(gl.ARRAY_BUFFER, texturePosBuffer);\n      gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([1, 0, 0, 0, 1, 1, 0, 1]), gl.STATIC_DRAW);\n\n      var texturePosRef = gl.getAttribLocation(program, 'texturePos');\n      gl.enableVertexAttribArray(texturePosRef);\n      gl.vertexAttribPointer(texturePosRef, 2, gl.FLOAT, false, 0, 0);\n\n      this.texturePosBuffer = texturePosBuffer;\n\n      var uTexturePosBuffer = gl.createBuffer();\n      gl.bindBuffer(gl.ARRAY_BUFFER, uTexturePosBuffer);\n      gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([1, 0, 0, 0, 1, 1, 0, 1]), gl.STATIC_DRAW);\n\n      var uTexturePosRef = gl.getAttribLocation(program, 'uTexturePos');\n      gl.enableVertexAttribArray(uTexturePosRef);\n      gl.vertexAttribPointer(uTexturePosRef, 2, gl.FLOAT, false, 0, 0);\n\n      this.uTexturePosBuffer = uTexturePosBuffer;\n\n      var vTexturePosBuffer = gl.createBuffer();\n      gl.bindBuffer(gl.ARRAY_BUFFER, vTexturePosBuffer);\n      gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([1, 0, 0, 0, 1, 1, 0, 1]), gl.STATIC_DRAW);\n\n      var vTexturePosRef = gl.getAttribLocation(program, 'vTexturePos');\n      gl.enableVertexAttribArray(vTexturePosRef);\n      gl.vertexAttribPointer(vTexturePosRef, 2, gl.FLOAT, false, 0, 0);\n\n      this.vTexturePosBuffer = vTexturePosBuffer;\n    }\n  }, {\n    key: '_initTextures',\n    value: function _initTextures() {\n      var gl = this.contextGL;\n      var program = this.shaderProgram;\n      var yTextureRef = this._initTexture();\n      var ySamplerRef = gl.getUniformLocation(program, 'ySampler');\n      gl.uniform1i(ySamplerRef, 0);\n      this.yTextureRef = yTextureRef;\n\n      var uTextureRef = this._initTexture();\n      var uSamplerRef = gl.getUniformLocation(program, 'uSampler');\n      gl.uniform1i(uSamplerRef, 1);\n      this.uTextureRef = uTextureRef;\n\n      var vTextureRef = this._initTexture();\n      var vSamplerRef = gl.getUniformLocation(program, 'vSampler');\n      gl.uniform1i(vSamplerRef, 2);\n      this.vTextureRef = vTextureRef;\n    }\n  }, {\n    key: '_initTexture',\n    value: function _initTexture() {\n      var gl = this.contextGL;\n\n      var textureRef = gl.createTexture();\n      gl.bindTexture(gl.TEXTURE_2D, textureRef);\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n      gl.bindTexture(gl.TEXTURE_2D, null);\n\n      return textureRef;\n    }\n  }, {\n    key: '_drawPictureGL',\n    value: function _drawPictureGL(data, width, height, yLinesize, uvLinesize) {\n      var ylen = yLinesize * height;\n      var uvlen = uvLinesize * height / 2;\n      if (this.chroma === 444 || this.chroma === 422) {\n        uvlen *= 2;\n      }\n      data = new Uint8Array(data);\n      var renderData = {\n        yData: data.subarray(0, ylen),\n        uData: data.subarray(ylen, ylen + uvlen),\n        vData: data.subarray(ylen + uvlen, ylen + uvlen + uvlen)\n      };\n      this._drawPictureGL420(renderData, width, height, yLinesize, uvLinesize);\n    }\n  }, {\n    key: '_drawPictureGL420',\n    value: function _drawPictureGL420(data, width, height, yLinesize, uvLinesize) {\n      var gl = this.contextGL;\n      var texturePosBuffer = this.texturePosBuffer;\n      var uTexturePosBuffer = this.uTexturePosBuffer;\n      var vTexturePosBuffer = this.vTexturePosBuffer;\n\n      var yTextureRef = this.yTextureRef;\n      var uTextureRef = this.uTextureRef;\n      var vTextureRef = this.vTextureRef;\n\n      var yData = data.yData;\n      var uData = data.uData;\n      var vData = data.vData;\n\n      var yDataPerRow = yLinesize;\n      var yRowCnt = height;\n\n      var uDataPerRow = uvLinesize;\n      var uRowCnt = height / 2;\n\n      if (this.chroma === 422 || this.chroma === 444) {\n        uRowCnt = height;\n      }\n\n      var vDataPerRow = uvLinesize;\n      var vRowCnt = uRowCnt;\n\n      var ratiow = this.canvas.width / this.width;\n      var ratioh = this.canvas.height / this.height;\n      var left = 0;\n      var top = 0;\n      var w = this.canvas.width;\n      var h = this.canvas.height;\n      if (ratiow < ratioh) {\n        h = this.height * this.canvas.width / this.width;\n        top = parseInt((this.canvas.height - this.height * this.canvas.width / this.width) / 2);\n      } else {\n        w = this.width * this.canvas.height / this.height;\n        left = parseInt((this.canvas.width - this.width * this.canvas.height / this.height) / 2);\n      }\n      gl.viewport(left, top, w, h);\n\n      var texturePosValues = new Float32Array([1, 0, 0, 0, 1, 1, 0, 1]);\n      gl.bindBuffer(gl.ARRAY_BUFFER, texturePosBuffer);\n      gl.bufferData(gl.ARRAY_BUFFER, texturePosValues, gl.DYNAMIC_DRAW);\n\n      var uTexturePosValues = new Float32Array([1, 0, 0, 0, 1, 1, 0, 1]);\n      gl.bindBuffer(gl.ARRAY_BUFFER, uTexturePosBuffer);\n      gl.bufferData(gl.ARRAY_BUFFER, uTexturePosValues, gl.DYNAMIC_DRAW);\n\n      var vTexturePosValues = new Float32Array([1, 0, 0, 0, 1, 1, 0, 1]);\n      gl.bindBuffer(gl.ARRAY_BUFFER, vTexturePosBuffer);\n      gl.bufferData(gl.ARRAY_BUFFER, vTexturePosValues, gl.DYNAMIC_DRAW);\n\n      gl.activeTexture(gl.TEXTURE0);\n      gl.bindTexture(gl.TEXTURE_2D, yTextureRef);\n      gl.texImage2D(gl.TEXTURE_2D, 0, gl.LUMINANCE, yDataPerRow, yRowCnt, 0, gl.LUMINANCE, gl.UNSIGNED_BYTE, yData);\n\n      gl.activeTexture(gl.TEXTURE1);\n      gl.bindTexture(gl.TEXTURE_2D, uTextureRef);\n      gl.texImage2D(gl.TEXTURE_2D, 0, gl.LUMINANCE, uDataPerRow, uRowCnt, 0, gl.LUMINANCE, gl.UNSIGNED_BYTE, uData);\n\n      gl.activeTexture(gl.TEXTURE2);\n      gl.bindTexture(gl.TEXTURE_2D, vTextureRef);\n      gl.texImage2D(gl.TEXTURE_2D, 0, gl.LUMINANCE, vDataPerRow, vRowCnt, 0, gl.LUMINANCE, gl.UNSIGNED_BYTE, vData);\n\n      gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);\n    }\n  }, {\n    key: '_drawPictureRGB',\n    value: function _drawPictureRGB(data) {}\n  }, {\n    key: 'render',\n    value: function render(data, width, height, yLinesize, uvLinesize) {\n      var gl = this.contextGL;\n      // console.log(data, width, height, yLinesize, uvLinesize)\n      if (gl) {\n        this._drawPictureGL(data, width, height, yLinesize, uvLinesize);\n      } else {\n        this._drawPictureRGB(data);\n      }\n    }\n  }, {\n    key: 'resetMeta',\n    value: function resetMeta(meta) {\n      this.meta = Object.assign({}, meta);\n      this._initMeta();\n    }\n  }]);\n\n  return YUVCanvas;\n}();\n\nexport default YUVCanvas;","var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nimport { logger } from 'xgplayer-helper-utils';\nimport Events from '../events';\n\nvar MAX_QUEUE_LENGTH = 10;\nvar MAX_LOW_FPS_RECORD = 20;\n\nvar DecodeEstimate = function () {\n  function DecodeEstimate(parent) {\n    _classCallCheck(this, DecodeEstimate);\n\n    this.TAG = 'DecodeEstimate';\n    this._needEstimate = true;\n    this._parent = parent;\n    this._lastDecodeDot = 0;\n    this._lastDecodeCost = 0;\n    this._lastFrameDts = 0;\n    this._dtsDeltas = [];\n    this._decodeCosts = [];\n    this._lowDecodeQueue = [];\n    this._fps = 0;\n    this._decodeFps = 0;\n  }\n\n  _createClass(DecodeEstimate, [{\n    key: 'needEstimateFps',\n    value: function needEstimateFps() {\n      this._needEstimate = true;\n    }\n  }, {\n    key: 'addDecodeInfo',\n    value: function addDecodeInfo() {\n      var frameInfo = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : { dts: 0 };\n\n      this._estimateDecodeFps();\n      this._estimateFps(frameInfo);\n    }\n  }, {\n    key: 'resetDecodeDot',\n    value: function resetDecodeDot() {\n      this._lastDecodeDot = 0;\n    }\n  }, {\n    key: '_estimateFps',\n    value: function _estimateFps(frameInfo) {\n      if (!this._needEstimate) return;\n\n      if (!this._lastFrameDts) {\n        this._lastFrameDts = frameInfo.dts;\n        return;\n      }\n\n      var delta = frameInfo.dts - this._lastFrameDts;\n      this._lastFrameDts = frameInfo.dts;\n\n      if (Math.abs(delta) > 100) return;\n\n      this._dtsDeltas.push(delta);\n\n      var len = this._dtsDeltas.length;\n\n      if (len < MAX_QUEUE_LENGTH) return;\n\n      this._fps = Math.ceil(1000 / this._avg(this._dtsDeltas, len));\n      logger.log(this.TAG, 'estimate fps:', this._fps);\n      this._needEstimate = false;\n    }\n  }, {\n    key: '_estimateDecodeFps',\n    value: function _estimateDecodeFps() {\n      if (!this._lastDecodeDot) {\n        this._lastDecodeDot = performance.now();\n        return;\n      }\n\n      var now = performance.now();\n      var cost = now - this._lastDecodeDot;\n      this._lastDecodeDot = now;\n\n      if (cost < 0.5) return;\n\n      this._lastDecodeCost = cost;\n      this._decodeCosts.push(cost);\n      var len = this._decodeCosts.length;\n\n      if (len < MAX_QUEUE_LENGTH) return;\n\n      var avg = this._avg(this._decodeCosts, len);\n      this._decodeFps = Math.floor(1000 / avg);\n      this._decodeCosts = [];\n      this._lowDecodeDetect();\n    }\n  }, {\n    key: '_avg',\n    value: function _avg(list, len) {\n      var sum = list.reduce(function (all, c) {\n        all += c;\n        return all;\n      }, 0);\n      return Math.floor(sum / len) || 1;\n    }\n\n    // 低延迟检测逻辑\n\n  }, {\n    key: '_lowDecodeDetect',\n    value: function _lowDecodeDetect() {\n      if (this._decodeFps < this._fps) {\n        this._lowDecodeQueue.push(this._decodeFps);\n      } else {\n        this._lowDecodeQueue.pop();\n      }\n      if (this._lowDecodeQueue.length > MAX_LOW_FPS_RECORD) {\n        // 大约连续的 20 * 10 = 200帧 解码效率比较低时\n        this._lowDecodeQueue = [];\n        logger.log(this.TAG, '解码效率过低,应该降级');\n        this._parent.emit(Events.VIDEO.DECODE_LOW_FPS);\n      }\n    }\n  }, {\n    key: 'fps',\n    get: function get() {\n      return this._fps;\n    }\n  }, {\n    key: 'decodeFps',\n    get: function get() {\n      return this._decodeFps;\n    }\n  }, {\n    key: 'decodeCost',\n    get: function get() {\n      return this._lastDecodeCost;\n    }\n  }]);\n\n  return DecodeEstimate;\n}();\n\nexport default DecodeEstimate;","var H264_DECODER_URL = 'https://sf1-vcloudcdn.pstatp.com/obj/ttfe/media/decoder/h264/decoder_1583333072684.js';\n\nvar ASM_H264_DECODER_URL = 'https://sf1-vcloudcdn.pstatp.com/obj/media-fe/decoder/h264/decoder_asm_1589261792455.js';\n\nvar H265_DECODER_URL = 'https://sf1-vcloudcdn.pstatp.com/obj/media-fe/decoder/h265/decoder_1592202936266.js';\n\nvar ASM_H265_DECODER_URL = 'https://sf1-vcloudcdn.pstatp.com/obj/media-fe/decoder/h265/decoder_asm_1594191692633.js';\n\nexport { H264_DECODER_URL, H265_DECODER_URL, ASM_H264_DECODER_URL, ASM_H265_DECODER_URL };","var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nimport EventEmitter from 'events';\nimport HevcWorker from 'worker!../decoder/hevc-worker.js';\nimport AvcWorker from 'worker!../decoder/worker.js';\nimport { logger } from 'xgplayer-helper-utils';\nimport VideoTimeRange from './VideoTimeRange';\nimport FrameRender from './FrameRender';\nimport DecodeEstimate from './DecodeEstimate';\nimport Events from '../events';\nimport { H264_DECODER_URL, H265_DECODER_URL, ASM_H264_DECODER_URL, ASM_H265_DECODER_URL } from '../config';\n\nvar HAVE_NOTHING = 0;\nvar HAVE_METADATA = 1;\nvar HAVE_CURRENT_DATA = 2;\nvar HAVE_FUTURE_DATA = 3;\nvar HAVE_ENOUGH_DATA = 4;\n\nvar MEDIA_ERR_DECODE = 3;\n\nvar VideoRender = function (_EventEmitter) {\n  _inherits(VideoRender, _EventEmitter);\n\n  function VideoRender(config, parent) {\n    _classCallCheck(this, VideoRender);\n\n    var _this = _possibleConstructorReturn(this, (VideoRender.__proto__ || Object.getPrototypeOf(VideoRender)).call(this));\n\n    _this.TAG = 'VideoRender';\n    _this._config = config;\n    _this._parent = parent;\n    _this._timeRange = new VideoTimeRange();\n    _this._decodeEstimate = new DecodeEstimate(_this);\n    _this._frameQueue = []; // the queue of uncompressed frame\n    _this._canvas = config.canvas || document.createElement('canvas');\n    _this._meta = null;\n    _this._decoder = null; //  decoder worker instance\n    _this._frameRender = null; // FrameRender instance\n    _this._ready = false; // 初始解码ready,可播\n    _this._noAudio = false;\n    _this._wasmReady = false;\n    _this._clearId = -1;\n    _this._degrade = false;\n    _this._avccpushed = false;\n    _this._lastTimeupdate = 0;\n    _this._inDecoding = false;\n    _this._lastDecodingDts = 0;\n    _this._startRender = _this._startRender.bind(_this);\n    _this._initCanvas();\n    _this._bindEvents();\n    return _this;\n  }\n\n  _createClass(VideoRender, [{\n    key: 'updateReady',\n    value: function updateReady() {\n      this._whenReady();\n    }\n  }, {\n    key: '_assembleErr',\n    value: function _assembleErr(msg) {\n      var err = new Error(msg);\n      err.code = MEDIA_ERR_DECODE;\n      return err;\n    }\n  }, {\n    key: '_emitTimelineEvents',\n    value: function _emitTimelineEvents(e, v, d) {\n      this._parent.emit(e, v, d);\n    }\n  }, {\n    key: '_initCanvas',\n    value: function _initCanvas() {\n      this._canvas.style.maxWidth = '100%';\n      this._canvas.style.maxHeight = '100%';\n      this._canvas.style.top = 0;\n      this._canvas.style.bottom = 0;\n      this._canvas.style.left = 0;\n      this._canvas.style.right = 0;\n      this._canvas.style.margin = 'auto';\n      this._canvas.style.position = 'absolute';\n    }\n  }, {\n    key: '_bindEvents',\n    value: function _bindEvents() {\n      var _this2 = this;\n\n      this._parent.on(Events.TIMELINE.SET_METADATA, function (type, meta) {\n        if (type === 'audio') return;\n        logger.warn(_this2.TAG, 'video set metadata');\n        _this2._setMetadata(meta);\n      });\n\n      this._parent.on(Events.TIMELINE.APPEND_CHUNKS, this._appendChunk.bind(this));\n\n      this._parent.on(Events.TIMELINE.START_RENDER, this._startRender);\n\n      // 同步时机\n      // 1. 音频一小段buffer起播时\n      // 2. 对noAudio的场景 1. 视频变流时,dts发生变化 2. 卡顿waiting后,_parent.timelinePosition已不准确\n      this._parent.on(Events.TIMELINE.SYNC_DTS, function (dts) {\n        var nextFrame = _this2._frameQueue[0];\n        _this2.lastTimelinePosition = _this2.timelinePosition;\n        if (_this2._noAudio) {\n          dts = dts || nextFrame && nextFrame.info.dts || 0;\n        }\n        _this2.audioSyncDts = dts;\n        if (logger.long) {\n          logger.log(_this2.TAG, 'audio current buffer play finish,dts=', dts, 'currentTime:', _this2._parent.currentTime, 'next video frame dts:', nextFrame && nextFrame.info.dts);\n        }\n\n        // 1. 换流 音频播完,视频还存在几帧之前的流没播完时\n        // 2. 暂时的 a > v\n        while (nextFrame) {\n          var delta = nextFrame.info.dts - dts;\n          if (delta > 10000 || delta < -100) {\n            logger.warn(_this2.TAG, 'detect a-v sync problem,delete nextFrame');\n            _this2._frameQueue.shift();\n            nextFrame = _this2._frameQueue[0];\n            continue;\n          }\n          break;\n        }\n      });\n\n      this._parent.on(Events.TIMELINE.DO_PAUSE, function () {\n        clearTimeout(_this2._clearId);\n        _this2._clearId = 0;\n      });\n\n      this._parent.on(Events.TIMELINE.DESTROY, function () {\n        _this2._destroy();\n      });\n\n      this._parent.on(Events.TIMELINE.NO_AUDIO, function () {\n        _this2._noAudio = true;\n      });\n\n      this.on(Events.VIDEO.AUTO_RUN, this._startRender.bind(this));\n    }\n  }, {\n    key: '_bindWorkerEvent',\n    value: function _bindWorkerEvent(decoder) {\n      var _this3 = this;\n\n      decoder.addEventListener('message', function (e) {\n        var msg = e.data.msg;\n\n        switch (msg) {\n          case 'DECODER_READY':\n            logger.log(_this3.TAG, 'wasm worker ready ', performance.now());\n            _this3._wasmReady = true;\n            _this3.emit(Events.VIDEO.VIDEO_DECODER_INIT);\n            if (!_this3._avccpushed) {\n              _this3._pushAvcc(_this3._decoder, _this3._meta);\n            }\n            _this3._startDecode();\n            break;\n          case 'DECODED':\n            _this3._frameQueue.push(e.data);\n            _this3._decodeEstimate.addDecodeInfo(e.data.info);\n            _this3._checkToDecode();\n            break;\n          case 'DECODE_FINISH':\n            if (_this3._lastDecodingDts === e.data.dts) {\n              _this3._inDecoding = false;\n              _this3._decodeEstimate.resetDecodeDot();\n            }\n            break;\n          case 'LOG':\n            // console.log('video decoder worker: LOG:',msg,e.data.log, performance.now());\n            break;\n          case 'INIT_FAILED':\n            if (_this3._degrade) {\n              _this3._emitTimelineEvents(Events.TIMELINE.PLAY_EVENT, 'error', _this3._assembleErr(e.data.log));\n            } else {\n              _this3._degrade = true;\n              _this3._destroyWorker();\n              _this3._initWorker();\n            }\n\n            break;\n          default:\n            console.error('invalid messaeg', e);\n        }\n      });\n\n      decoder.addEventListener('error', function (e) {\n        _this3._emitTimelineEvents(Events.TIMELINE.PLAY_EVENT, 'error', _this3._assembleErr(e.message));\n      });\n    }\n  }, {\n    key: '_setMetadata',\n    value: function _setMetadata(meta) {\n      this._meta = meta;\n      var fps = meta && meta.frameRate && meta.frameRate.fps;\n      if (fps) {\n        logger.log(this.TAG, 'detect fps:', fps);\n      } else {\n        logger.warn(this.TAG, 'no detect fps,start estimate');\n      }\n      if (!this._decoder) {\n        this._initWorker();\n      } else if (this._wasmReady) {\n        this._pushAvcc(this._decoder, meta);\n      }\n    }\n  }, {\n    key: '_selectWorker',\n    value: function _selectWorker() {\n      logger.log(this.TAG, 'start init worker:', performance.now(), 'hevc:', this.isHevc, 'degrade:', this._degrade);\n      if (this.isHevc) {\n        return {\n          decoder: new HevcWorker(),\n          url: this._degrade ? ASM_H265_DECODER_URL : H265_DECODER_URL\n        };\n      }\n      return {\n        decoder: new AvcWorker(),\n        url: this._degrade ? ASM_H264_DECODER_URL : H264_DECODER_URL\n      };\n    }\n  }, {\n    key: '_initWorker',\n    value: function _initWorker() {\n      var _selectWorker2 = this._selectWorker(),\n          decoder = _selectWorker2.decoder,\n          url = _selectWorker2.url;\n\n      this._decoder = decoder;\n      this._bindWorkerEvent(this._decoder);\n      this._decoder.postMessage({\n        msg: 'init',\n        meta: this._meta,\n        url: url\n      });\n    }\n  }, {\n    key: '_pushAvcc',\n    value: function _pushAvcc(worker, meta) {\n      logger.log(this.TAG, 'push metadata, init codec context');\n      this._avccpushed = true;\n      worker.postMessage({\n        msg: 'updatemeta',\n        meta: meta\n      });\n      var vps = meta.rawVps || meta.vps;\n      var sps = meta.rawSps || meta.sps;\n      var pps = meta.rawPps || meta.pps;\n      if (vps) {\n        var _data = new Uint8Array(vps.byteLength + 4);\n        _data.set([0, 0, 0, 1]);\n        _data.set(vps, 4);\n        worker.postMessage({\n          msg: 'decode',\n          data: _data\n        });\n      }\n\n      var data = new Uint8Array(sps.byteLength + 4);\n      data.set([0, 0, 0, 1]);\n      data.set(sps, 4);\n      worker.postMessage({\n        msg: 'decode',\n        data: data\n      });\n\n      data = new Uint8Array(pps.byteLength + 4);\n      data.set([0, 0, 0, 1]);\n      data.set(pps, 4);\n      worker.postMessage({\n        msg: 'decode',\n        data: data\n      });\n\n      if (!this._frameRender) {\n        var config = Object.assign({ meta: meta, canvas: this._canvas }, this.config);\n        this._frameRender = new FrameRender(config);\n      } else {\n        this._frameRender.resetMeta(meta);\n      }\n    }\n  }, {\n    key: '_appendChunk',\n    value: function _appendChunk(videoTrack) {\n      this._timeRange.append(videoTrack.samples, this._noAudio);\n      videoTrack.samples = [];\n      if (!this._ready && this._wasmReady && this._noAudio) {\n        this._startDecode();\n      }\n      if (this._noAudio) {\n        this._emitTimelineEvents(Events.TIMELINE.PLAY_EVENT, Events.VIDEO_EVENTS.DURATION_CHANGE);\n      }\n    }\n\n    // 1. decoder初始化预解码几帧\n    // 2. render 过程,帧数过少时解码新帧\n\n  }, {\n    key: '_startDecode',\n    value: function _startDecode() {\n      var len = 15;\n      while (len >= 0) {\n        var sample = this._timeRange && this._timeRange.shift();\n        if (!sample) break;\n        this._decodeSample(sample);\n        len--;\n      }\n    }\n  }, {\n    key: '_whenReady',\n    value: function _whenReady() {\n      this._ready = true;\n      this.emit(Events.VIDEO.VIDEO_READY);\n      this._emitTimelineEvents(Events.TIMELINE.PLAY_EVENT, Events.VIDEO_EVENTS.LOADEDDATA);\n      if (this._noAudio) {\n        this._emitTimelineEvents(Events.TIMELINE.PLAY_EVENT, Events.VIDEO_EVENTS.PLAYING);\n      }\n    }\n\n    // 检测需要解码的时机\n    // 1. 解码worker初始化完成,提前解几帧\n    // 2. 渲染ticker中\n\n  }, {\n    key: '_checkToDecode',\n    value: function _checkToDecode() {\n      if (!this._ready) {\n        if (this.readyState >= HAVE_FUTURE_DATA) {\n          this._whenReady();\n        }\n        return;\n      }\n      if (!this._inDecoding && this.readyState < HAVE_FUTURE_DATA) {\n        this._startDecode();\n      }\n    }\n  }, {\n    key: '_startRender',\n    value: function _startRender() {\n      if (this._clearId) {\n        clearTimeout(this._clearId);\n      }\n\n      var frame = this._frameQueue && this._frameQueue[0];\n      if (!frame || !this._timeRange) {\n        logger.log(this.TAG, 'lack frame');\n        this._checkToDecode();\n        this._clearId = setTimeout(this._startRender, this.interval);\n        // waiting\n        if (this._noAudio) {\n          this._ready = false;\n          this.emit(Events.VIDEO.VIDEO_WAITING);\n        }\n        return;\n      }\n\n      var info = frame.info;\n\n      var _renderDelay = info.dts - this.preciseVideoDts;\n\n      if (_renderDelay > this.interval) {\n        this._clearId = setTimeout(this._startRender, this.interval);\n        return;\n      }\n\n      this._frameQueue.shift();\n\n      if (Math.abs(this._lastTimeupdate - info.dts) > 250) {\n        this._emitTimelineEvents(Events.TIMELINE.PLAY_EVENT, Events.VIDEO_EVENTS.TIMEUPDATE);\n        this._lastTimeupdate = info.dts;\n      }\n\n      if (logger.long) {\n        logger.log(this.TAG, 'render delay:' + _renderDelay + ' , timelinePosition:' + this.preciseVideoDts + ' , dts:' + info.dts + ' , rest:' + this._frameQueue.length);\n      }\n\n      this._frameRender.render(frame.buffer, frame.width, frame.height, frame.yLinesize, frame.uvLinesize);\n      this._checkToDecode();\n      this._clearId = setTimeout(this._startRender, 25);\n    }\n  }, {\n    key: '_decodeSample',\n    value: function _decodeSample(sample) {\n      if (sample.options && sample.options.meta) {\n        this._meta = sample.options.meta;\n        logger.warn(this.TAG, 'detect metadata! flush decoder');\n        this._pushAvcc(this._decoder, sample.options.meta);\n        // 换流更新\n        if (this._noAudio) {\n          this._emitTimelineEvents(Events.TIMELINE.SYNC_DTS, sample.dts);\n        }\n      }\n\n      var gopId = 0;\n      if (sample.gopId) {\n        gopId = sample.gopId - 1;\n      }\n      // const worker = this.wasmworkers[gopId % MAX_WORKER_NUM];\n      this._inDecoding = true;\n      this._lastDecodingDts = sample.dts;\n      this._decoder.postMessage({\n        msg: 'decode',\n        data: sample.data,\n        info: {\n          dts: sample.dts,\n          pts: sample.pts || sample.dts + sample.cts,\n          key: sample.isKeyframe,\n          gopId: gopId,\n          isGop: sample.isGop || false\n        }\n      });\n    }\n  }, {\n    key: '_destroyWorker',\n    value: function _destroyWorker() {\n      if (this._decoder) {\n        logger.log(this.TAG, 'destroy worker...');\n        this._decoder.postMessage({ msg: 'destroy' });\n        this._decoder.terminate();\n      }\n    }\n  }, {\n    key: '_destroy',\n    value: function _destroy() {\n      this._destroyWorker();\n      this._canvas = null;\n      this._timeRange = null;\n      this._frameQueue = null;\n      this._decodeEstimate = null;\n      this._frameRender = null;\n      clearTimeout(this._clearId);\n    }\n  }, {\n    key: 'canvas',\n    get: function get() {\n      return this._canvas;\n    }\n  }, {\n    key: 'isHevc',\n    get: function get() {\n      return (this._meta || {}).codec === 'hev1.1.6.L93.B0';\n    }\n  }, {\n    key: 'timescale',\n    get: function get() {\n      if (!this._meta) return 1000;\n      return this._meta.timescale || 1000;\n    }\n  }, {\n    key: 'fps',\n    get: function get() {\n      return this._meta && this._meta.frameRate && this._meta.frameRate.fps || this._decodeEstimate.fps || 24;\n    }\n  }, {\n    key: 'decodeFps',\n    get: function get() {\n      return this._decodeEstimate.decodeFps;\n    }\n  }, {\n    key: 'decodeCost',\n    get: function get() {\n      return this._decodeEstimate.decodeCost;\n    }\n  }, {\n    key: 'bitrate',\n    get: function get() {\n      return this._timeRange.bitrate;\n    }\n  }, {\n    key: 'duration',\n    get: function get() {\n      return this._timeRange.duartion;\n    }\n  }, {\n    key: 'buffered',\n    get: function get() {\n      return this._timeRange.buffered;\n    }\n  }, {\n    key: 'interval',\n    get: function get() {\n      return Math.floor(1000 / this.fps);\n    }\n  }, {\n    key: 'running',\n    get: function get() {\n      return this._clearId !== 0;\n    }\n\n    // video first frame dts\n\n  }, {\n    key: 'baseDts',\n    get: function get() {\n      return this._timeRange.baseDts;\n    }\n\n    // noAudio时使用\n\n  }, {\n    key: 'currentTime',\n    get: function get() {\n      return this._timeRange.lastDuration + (this.preciseVideoDts - this.baseDts) / 1000;\n    }\n  }, {\n    key: 'timelinePosition',\n    get: function get() {\n      return this._parent.timelinePosition;\n    }\n  }, {\n    key: 'lastTimelinePosition',\n    set: function set(ts) {\n      this._lastTimelinePosition = ts;\n    }\n\n    // the startTime on timeline of the buffer audioCtx current playing\n    // noAudio: the time record by perforamce.now() when play start or restart after waiting or stream changed\n    ,\n    get: function get() {\n      return this._lastTimelinePosition || 0;\n    }\n  }, {\n    key: 'audioSyncDts',\n    set: function set(dts) {\n      this._audioDts = dts;\n    }\n\n    // the first sample's dts of the buffer audioCtx current playing\n    ,\n    get: function get() {\n      return this._audioDts || this.baseDts;\n    }\n\n    // the precise video dts sync to timeline time\n\n  }, {\n    key: 'preciseVideoDts',\n    get: function get() {\n      return this.audioSyncDts + (this.timelinePosition - this.lastTimelinePosition) * 1000;\n    }\n  }, {\n    key: 'readyState',\n    get: function get() {\n      var len = this._frameQueue && this._frameQueue.length;\n      if (!len) return HAVE_NOTHING;\n      if (len >= 8) return HAVE_ENOUGH_DATA;\n      if (len >= 4) return HAVE_FUTURE_DATA;\n      if (len >= 2) return HAVE_CURRENT_DATA;\n      return HAVE_METADATA;\n    }\n  }]);\n\n  return VideoRender;\n}(EventEmitter);\n\nexport default VideoRender;","var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nimport EventEmitter from 'events';\nimport { logger } from 'xgplayer-helper-utils';\nimport AudioRender from './render/AudioRender';\nimport VideoRender from './render/VideoRender';\nimport Events from './events';\n\nvar TimeLine = function (_EventEmitter) {\n  _inherits(TimeLine, _EventEmitter);\n\n  function TimeLine(config, parent) {\n    _classCallCheck(this, TimeLine);\n\n    var _this = _possibleConstructorReturn(this, (TimeLine.__proto__ || Object.getPrototypeOf(TimeLine)).call(this));\n\n    _this.TAG = 'TimeLine';\n    _this._parent = parent;\n    _this.videoRender = new VideoRender(config, _this);\n    _this.audioRender = new AudioRender(config, _this);\n    _this._readyStatus = {\n      audio: false,\n      video: false\n    };\n    _this._paused = true;\n    _this._noAudio = false;\n    _this._bindEvent();\n    return _this;\n  }\n\n  _createClass(TimeLine, [{\n    key: '_bindEvent',\n    value: function _bindEvent() {\n      var _this2 = this;\n\n      this.audioRender.on(Events.AUDIO.AUDIO_READY, function () {\n        logger.log(_this2.TAG, 'audio ready!');\n        _this2._readyStatus.audio = true;\n        if (_this2._readyStatus.video) {\n          _this2._startRender();\n        }\n      });\n\n      this.audioRender.on(Events.AUDIO.AUDIO_WAITING, function () {\n        if (_this2._noAudio) return;\n        logger.warn(_this2.TAG, 'lack data, audio waiting,currentTime:', _this2.currentTime);\n        _this2.emit(Events.TIMELINE.PLAY_EVENT, Events.VIDEO_EVENTS.WAITING);\n        _this2.emit(Events.TIMELINE.PLAY_EVENT, Events.VIDEO_EVENTS.TIMEUPDATE);\n        _this2.emit(Events.TIMELINE.DO_PAUSE);\n        _this2._readyStatus.audio = false;\n      });\n\n      // only used for no audio exist\n      this.videoRender.on(Events.VIDEO.VIDEO_WAITING, function () {\n        logger.warn(_this2.TAG, 'lack data, video waiting');\n        _this2.emit(Events.TIMELINE.PLAY_EVENT, Events.VIDEO_EVENTS.WAITING);\n        _this2.emit(Events.TIMELINE.DO_PAUSE);\n        _this2._readyStatus.video = false;\n      });\n\n      this.videoRender.on(Events.VIDEO.VIDEO_DECODER_INIT, function () {\n        logger.log(_this2.TAG, 'video decoder init!');\n        setTimeout(function () {\n          if (!_this2._readyStatus.video) {\n            logger.warn(_this2.TAG, 'video 首次解码无解码帧返回! auto ready!');\n            _this2.videoRender.updateReady();\n          }\n        }, 1000);\n      });\n\n      this.onVideoReady = function () {\n        logger.log(_this2.TAG, 'video ready!');\n        _this2._readyStatus.video = true;\n        if (_this2._readyStatus.audio) {\n          _this2._startRender();\n        }\n      };\n\n      this.videoRender.on(Events.VIDEO.VIDEO_READY, this.onVideoReady);\n\n      this.videoRender.on(Events.VIDEO.DECODE_LOW_FPS, function () {\n        if (_this2.currentTime < 20) return;\n        if (_this2._paused) return;\n        _this2.pause();\n        _this2.emit(Events.TIMELINE.PLAY_EVENT, Events.VIDEO_EVENTS.LOW_DECODE);\n      });\n\n      this.on(Events.TIMELINE.NO_AUDIO, function () {\n        _this2._noAudio = true;\n        _this2._readyStatus.audio = true;\n      });\n    }\n  }, {\n    key: '_startRender',\n    value: function _startRender() {\n      if (this._parent.error) return;\n      if (this._noAudio) {\n        this.emit(Events.TIMELINE.SYNC_DTS, 0);\n      }\n      logger.log(this.TAG, 'startRender: time=', this.currentTime);\n      this.emit(Events.TIMELINE.PLAY_EVENT, Events.VIDEO_EVENTS.CANPLAY);\n      this.emit(Events.TIMELINE.START_RENDER);\n      this.emit(Events.TIMELINE.READY);\n    }\n  }, {\n    key: 'resetReadyStatus',\n    value: function resetReadyStatus() {\n      this._readyStatus = {\n        audio: false,\n        video: false\n      };\n    }\n  }, {\n    key: 'play',\n    value: function play() {\n      var _this3 = this;\n\n      return new Promise(function (resolve, reject) {\n        var resumed = false;\n\n        if (_this3._noAudio) {\n          resumed = true;\n        } else {\n          _this3.audioRender.resume().then(function () {\n            logger.log(_this3.TAG, 'audioCtx 开始播放');\n            resumed = true;\n          });\n        }\n\n        setTimeout(function () {\n          _this3.emit(Events.TIMELINE.PLAY_EVENT, Events.VIDEO_EVENTS.TIMEUPDATE);\n          if (!resumed) {\n            logger.log(_this3.TAG, 'audioCtx 不能自动播放');\n            reject();\n            return;\n          }\n          _this3._paused = false;\n          _this3.emit(Events.TIMELINE.PLAY_EVENT, Events.VIDEO_EVENTS.PLAY);\n          resolve();\n        }, 30);\n      });\n    }\n  }, {\n    key: 'pause',\n    value: function pause() {\n      var _this4 = this;\n\n      if (this._paused) return;\n      this.emit(Events.TIMELINE.DO_PAUSE);\n      setTimeout(function () {\n        _this4._paused = true;\n        _this4.emit(Events.TIMELINE.PLAY_EVENT, Events.VIDEO_EVENTS.PAUSE);\n      }, 10);\n    }\n  }, {\n    key: 'seek',\n    value: function seek() {\n      this._paused = true;\n    }\n  }, {\n    key: 'ready',\n    get: function get() {\n      return this._readyStatus.video && this._readyStatus.audio;\n    }\n  }, {\n    key: 'played',\n    get: function get() {\n      var _this5 = this;\n\n      return {\n        length: this.currentTime ? 1 : 0,\n        start: function start() {\n          return 0;\n        },\n        end: function end() {\n          return _this5.currentTime;\n        }\n      };\n    }\n  }, {\n    key: 'decodeFps',\n    get: function get() {\n      return this.videoRender.decodeFps;\n    }\n  }, {\n    key: 'decodeCost',\n    get: function get() {\n      return this.videoRender.decodeCost;\n    }\n  }, {\n    key: 'fps',\n    get: function get() {\n      return this.videoRender.fps;\n    }\n  }, {\n    key: 'bitrate',\n    get: function get() {\n      return this.videoRender.bitrate;\n    }\n  }, {\n    key: 'currentTime',\n    get: function get() {\n      if (this._noAudio) return this.videoRender.currentTime;\n      return this.audioRender.currentTime;\n    }\n  }, {\n    key: 'timelinePosition',\n    get: function get() {\n      if (this._noAudio) return performance.now() / 1000; // s\n      return this.audioRender.currentTime;\n    }\n  }, {\n    key: 'canvas',\n    get: function get() {\n      return this.videoRender.canvas;\n    }\n  }, {\n    key: 'readyState',\n    get: function get() {\n      return this.videoRender.readyState;\n    }\n  }, {\n    key: 'buffered',\n    get: function get() {\n      if (this._noAudio) return this.videoRender.buffered;\n      return this.audioRender.buffered;\n    }\n  }, {\n    key: 'duration',\n    get: function get() {\n      if (this._noAudio) return this.videoRender.duration;\n      return this.audioRender.duration;\n    }\n  }, {\n    key: 'paused',\n    get: function get() {\n      return this._paused;\n    }\n  }]);\n\n  return TimeLine;\n}(EventEmitter);\n\nexport default TimeLine;","var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nfunction _CustomElement() {\n  return Reflect.construct(HTMLElement, [], this.__proto__.constructor);\n}\n\n;\nObject.setPrototypeOf(_CustomElement.prototype, HTMLElement.prototype);\nObject.setPrototypeOf(_CustomElement, HTMLElement);\nimport NoSleep from './nosleep';\nimport './polyfills/custom-elements.min';\nimport './polyfills/native-element';\nimport { logger } from 'xgplayer-helper-utils';\nimport TimeLine from './TimeLine';\nimport Events from './events';\n\nvar MVideo = function (_CustomElement2) {\n  _inherits(MVideo, _CustomElement2);\n\n  function MVideo() {\n    _classCallCheck(this, MVideo);\n\n    var _this = _possibleConstructorReturn(this, (MVideo.__proto__ || Object.getPrototypeOf(MVideo)).call(this));\n\n    _this.TAG = 'MVideo';\n    _this._init();\n    return _this;\n  }\n\n  _createClass(MVideo, [{\n    key: '_init',\n    value: function _init() {\n      var _this2 = this;\n\n      this.timeline = new TimeLine({\n        preloadTime: this.preloadTime,\n        volume: this.volume,\n        canvas: this.querySelector('canvas')\n      }, this);\n      this._noSleep = new NoSleep();\n      this._logFirstFrame = false;\n      this._playRequest = null;\n      this._bindEvents();\n      setTimeout(function () {\n        if (_this2.noAudio) {\n          _this2.setNoAudio();\n        }\n      });\n    }\n  }, {\n    key: '_bindEvents',\n    value: function _bindEvents() {\n      var _this3 = this;\n\n      this.timeline.on(Events.TIMELINE.PLAY_EVENT, function (status, data) {\n        if (status === 'canplay') {\n          if (!_this3.querySelector('canvas')) {\n            _this3.appendChild(_this3.canvas);\n          }\n        }\n        if (status === 'error') {\n          _this3._err = data;\n          logger.warn(_this3.TAG, 'detect error:', data.message);\n          _this3.pause();\n        }\n        if (status === 'ended') {\n          _this3.pause();\n        }\n        _this3._innerDispatchEvent(status);\n      });\n    }\n  }, {\n    key: 'disconnectedCallback',\n    value: function disconnectedCallback() {\n      logger.log(this.TAG, 'video disconnected');\n      this.destroy();\n    }\n  }, {\n    key: 'connectedCallback',\n    value: function connectedCallback() {\n      logger.log(this.TAG, 'video connected to document');\n      if (!this.timeline) {\n        this._init();\n      }\n    }\n  }, {\n    key: 'handleMediaInfo',\n    value: function handleMediaInfo() {\n      this._logFirstFrame = false;\n    }\n  }, {\n    key: 'play',\n    value: function play() {\n      var _this4 = this;\n\n      logger.log(this.TAG, 'mvideo called play(),to reset video:', this.timeline.ready, this.timeline.paused);\n\n      // 暂停后起播\n      // 初始化后不能自动播放,手动播放\n      if (this.timeline.ready && this.timeline.paused) {\n        this.destroy();\n        this._init();\n        this.timeline.resetReadyStatus();\n        this._playRequest = null;\n      }\n\n      this._playRequest = this._playRequest || new Promise(function (resolve, reject) {\n        _this4._innerDispatchEvent('timeupdate');\n        _this4._innerDispatchEvent('play');\n        _this4._innerDispatchEvent('waiting');\n        _this4._noSleep.enable();\n        _this4.timeline.once('ready', function () {\n          _this4._playRequest = null;\n          _this4.timeline.play().then(resolve).catch(reject);\n        });\n      });\n\n      return this._playRequest;\n    }\n  }, {\n    key: 'pause',\n    value: function pause() {\n      this._playRequest = null;\n      this.timeline.pause();\n      this._noSleep.disable();\n    }\n  }, {\n    key: 'load',\n    value: function load() {}\n  }, {\n    key: 'onDemuxComplete',\n    value: function onDemuxComplete(videoTrack, audioTrack) {\n      if (this.error || !this.timeline) return;\n      if (!this._logFirstFrame) {\n        var vSam0 = videoTrack.samples[0];\n        var aSam0 = this.noAudio ? null : audioTrack.samples[0];\n        if (vSam0 && aSam0 || vSam0 && this.noAudio) {\n          logger.log(this.TAG, 'video firstDts:' + vSam0.dts + ' , audio firstDts:' + (this.noAudio ? 0 : aSam0.dts));\n          this._logFirstFrame = true;\n        }\n      }\n      this.timeline.emit(Events.TIMELINE.APPEND_CHUNKS, videoTrack, audioTrack);\n    }\n  }, {\n    key: 'setNoAudio',\n    value: function setNoAudio() {\n      logger.log(this.TAG, 'video set noAudio!');\n      this.timeline.emit(Events.TIMELINE.NO_AUDIO);\n      this.noAudio = true;\n    }\n  }, {\n    key: 'setAudioMeta',\n    value: function setAudioMeta(meta) {\n      this.timeline.emit(Events.TIMELINE.SET_METADATA, 'audio', meta);\n    }\n  }, {\n    key: 'setVideoMeta',\n    value: function setVideoMeta(meta) {\n      this.timeline.emit(Events.TIMELINE.SET_METADATA, 'video', meta);\n    }\n  }, {\n    key: 'handleEnded',\n    value: function handleEnded() {\n      this.timeline.emit(Events.TIMELINE.PLAY_EVENT, 'ended');\n    }\n  }, {\n    key: 'handleErr',\n    value: function handleErr(code, message) {\n      this._err = {};\n      this._err.code = code;\n      this._err.message = message;\n      this.timeline.emit(Events.TIMELINE.PLAY_EVENT, 'error');\n    }\n  }, {\n    key: '_innerDispatchEvent',\n    value: function _innerDispatchEvent(type) {\n      this.dispatchEvent(new Event(type));\n    }\n  }, {\n    key: 'destroy',\n    value: function destroy() {\n      logger.log(this.TAG, 'call destroy');\n      this.timeline.emit(Events.TIMELINE.DESTROY);\n      this.timeline = null;\n      this._err = null;\n      this._noSleep = null;\n    }\n  }, {\n    key: 'noAudio',\n    get: function get() {\n      return this.getAttribute('noaudio') === 'true';\n    },\n    set: function set(val) {\n      this.setAttribute('noaudio', val);\n    }\n  }, {\n    key: 'canvas',\n    get: function get() {\n      return this.timeline.canvas;\n    }\n  }, {\n    key: 'width',\n    get: function get() {\n      return this.getAttribute('width') || this.videoWidth;\n    },\n    set: function set(val) {\n      this.style.display = 'inline-block';\n      var pxVal = typeof val === 'number' ? val + 'px' : val;\n      this.setAttribute('width', pxVal);\n      this.style.width = pxVal;\n      this.canvas.width = val;\n    }\n  }, {\n    key: 'height',\n    get: function get() {\n      return this.getAttribute('height');\n    },\n    set: function set(val) {\n      this.style.display = 'inline-block';\n      var pxVal = typeof val === 'number' ? val + 'px' : val;\n      this.setAttribute('height', pxVal);\n      this.style.height = pxVal;\n      this.canvas.height = val;\n    }\n  }, {\n    key: 'videoWidth',\n    get: function get() {\n      return this.canvas.width;\n    }\n  }, {\n    key: 'videoHeight',\n    get: function get() {\n      return this.canvas.height;\n    }\n  }, {\n    key: 'volume',\n    get: function get() {\n      return Number(this.getAttribute('volume'));\n    },\n    set: function set(v) {\n      if (v <= 0) {\n        v = 0;\n      }\n      if (v >= 1) {\n        v = 1;\n      }\n      this.setAttribute('volume', v);\n      this.timeline.emit(Events.TIMELINE.UPDATE_VOLUME, v);\n    }\n  }, {\n    key: 'muted',\n    get: function get() {\n      return this.getAttribute('muted') === 'true' || this.volume == 0;\n    },\n    set: function set(v) {\n      this.setAttribute('muted', v);\n      this.timeline.emit(Events.TIMELINE.UPDATE_VOLUME, v ? 0 : this.volume);\n    }\n  }, {\n    key: 'currentTime',\n    get: function get() {\n      var c = this.timeline.currentTime;\n      var d = this.timeline.duration;\n      return c > d ? d : c;\n    },\n    set: function set(v) {\n      this.timeline.seek(v);\n    }\n  }, {\n    key: 'duration',\n    get: function get() {\n      return this.timeline.duration;\n    }\n  }, {\n    key: 'seeking',\n    get: function get() {\n      return false;\n    }\n  }, {\n    key: 'paused',\n    get: function get() {\n      return this.timeline.paused;\n    }\n  }, {\n    key: 'fps',\n    get: function get() {\n      return this.timeline.fps;\n    }\n  }, {\n    key: 'decodeFps',\n    get: function get() {\n      return this.timeline.decodeFps;\n    }\n  }, {\n    key: 'decodeCost',\n    get: function get() {\n      return this.timeline.decodeCost;\n    }\n  }, {\n    key: 'bitrate',\n    get: function get() {\n      return this.timeline.bitrate;\n    }\n  }, {\n    key: 'readyState',\n    get: function get() {\n      return this.timeline.readyState;\n    }\n  }, {\n    key: 'buffered',\n    get: function get() {\n      return this.timeline.buffered;\n    }\n  }, {\n    key: 'src',\n    get: function get() {\n      return this.getAttribute('src');\n    },\n    set: function set(val) {\n      this.setAttribute('src', val);\n    }\n  }, {\n    key: 'playbackRate',\n    set: function set(v) {},\n    get: function get() {\n      return 1;\n    }\n  }, {\n    key: 'networkState',\n    get: function get() {\n      return 0;\n    }\n  }, {\n    key: 'preloadTime',\n    get: function get() {\n      var attrPreloadTime = this.getAttribute('preloadtime');\n      if (attrPreloadTime) {\n        var preloadTime = Number.parseFloat(attrPreloadTime);\n        if (preloadTime > 0 && !Number.isNaN(preloadTime)) {\n          return preloadTime;\n        }\n      }\n      return Infinity;\n    },\n    set: function set(val) {\n      if (val && Number(val) > 0) {\n        this.setAttribute('preloadtime', val);\n      }\n    }\n  }, {\n    key: 'error',\n    get: function get() {\n      return this._err;\n    }\n  }]);\n\n  return MVideo;\n}(_CustomElement);\n\ncustomElements.define('mobile-video', MVideo);","import Player from 'xgplayer';\nimport Context from 'xgplayer-transmuxer-context';\nimport Core from './raw-264';\nimport Events from 'xgplayer-transmuxer-constant-events';\nimport LoaderBuffer from 'xgplayer-transmuxer-buffer-xgbuffer';\nimport FetchLoader from 'xgplayer-transmuxer-loader-fetch';\nimport 'xgplayer-mobilevideo';\n\nconst asmSupported = () => {\n  try {\n    (function MyAsmModule () {\n      'use asm';\n    })();\n    return true;\n  } catch (err) {\n    // will never show...\n    return false;\n  }\n};\n\nclass Raw264Player extends Player {\n  static isSupported () {\n    const wasmSupported = 'WebAssembly' in window;\n\n    const WebComponentSupported = 'customElements' in window && window.customElements.define;\n    let isComponentDefined;\n    if (WebComponentSupported) {\n      isComponentDefined = window.customElements.get('mobile-video');\n    }\n    return (wasmSupported || asmSupported) && isComponentDefined;\n  }\n\n  constructor (props) {\n    if (!props.mediaType) {\n      props.mediaType = 'mobile-video';\n      if (props.videoConfig) {\n        props.videoConfig.preloadtime = props.preloadTime || 5;\n      } else {\n        props.videoConfig = {\n          preloadtime: props.preloadTime || 5\n        };\n      }\n    }\n    super(props);\n    this.video.setAttribute('noaudio', true);\n    this.handleTimeupdate = this.handleTimeupdate.bind(this);\n    this.hasPlayed = false;\n    this.hasStart = false;\n  }\n\n  start () {\n    if (this.hasStart) {\n      return;\n    } else {\n      this.hasStart = true;\n    }\n    this.context = new Context(Events.HlsAllowedEvents);\n    this.context.registry('LOADER_BUFFER', LoaderBuffer);\n    this.core = this.context.registry('RAW_264_CONTROLLER', Core)({player: this, fps: this.config.fps});\n    this.context.registry('FETCH_LOADER', FetchLoader);\n    this.context.init();\n    if (!this.config.isLive) {\n      this.core.load(this.config.url);\n    }\n\n    super.start();\n    this.video.preloadTime = this.config.preloadTime;\n    this.video.addEventListener('timeupdate', this.handleTimeupdate, false);\n  }\n\n  replay () {\n    this.video._cleanBuffer();\n    this.currentTime = 0;\n    this.start();\n    this.play();\n  }\n\n  handleTimeupdate () {\n    if (!this.config.isLive && this.currentTime >= this.duration) {\n      this.video._cleanBuffer();\n      this.pause();\n      this.emit('ended');\n    } else if (this.config.isLive && this.buffered.end(0) - this.currentTime > 0.1) {\n      this.currentTime = this.buffered.end(0) - 0.1;\n    }\n  }\n\n  destroy (isDelDom) {\n    super.destroy(isDelDom);\n    this.core.destroy();\n    this.context.destroy();\n    this.core = null;\n    this.context = null;\n  }\n\n  pushBuffer (arr) {\n    if (!this.hasStart) {\n      return this.start();\n    }\n    if (this.buffer) {\n      this.buffer.push(arr);\n      this.core.handleDataLoaded();\n    }\n  }\n\n  get buffer () {\n    return this.context.getInstance('LOADER_BUFFER');\n  }\n\n  set currentTime (time) {\n    const oldTime = super.currentTime;\n    const buffered = this.getBufferedRange();\n    if (buffered[0] <= time && buffered[1] >= time) {\n      this.video.currentTime = time;\n    } else {\n      this.video.currentTime = oldTime;\n    }\n  }\n\n  get currentTime () {\n    return super.currentTime;\n  }\n\n  get duration () {\n    if (this.core && this.core.duration) {\n      return this.core.duration;\n    }\n    return this.video.duration;\n  }\n}\n\nexport default Raw264Player;\n"],"names":["_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","Constructor","protoProps","staticProps","prototype","_classCallCheck","instance","TypeError","Golomb","uint8array","TAG","_buffer","_bufferIndex","_totalBytes","byteLength","_totalBits","_currentWord","_currentWordBitsLeft","value","destroy","_fillCurrentWord","bufferBytesLeft","bytesRead","Math","min","word","Uint8Array","set","subarray","DataView","buffer","getUint32","readBits","size","bits","valu","Error","readBool","readByte","_skipLeadingZero","zeroCount","readUEG","leadingZeros","readSEG","SPSParser","_ebsp2rbsp","src","srcLength","dst","dstIdx","parseSPS","rbsp","gb","profileIdc","levelIdc","profile_string","getProfileString","level_string","getLevelString","chroma_format_idc","chroma_format","chroma_format_table","bit_depth","scaling_list_count","_skipScalingList","pic_order_cnt_type","num_ref_frames_in_pic_order_cnt_cycle","_i","pic_width_in_mbs_minus1","pic_height_in_map_units_minus1","frame_mbs_only_flag","frame_crop_left_offset","frame_crop_right_offset","frame_crop_top_offset","frame_crop_bottom_offset","frame_cropping_flag","par_width","par_height","fps","fps_fixed","fps_num","fps_den","vui_parameters_present_flag","aspect_ratio_idc","par_w_table","par_h_table","num_units_in_tick","time_scale","parScale","crop_unit_x","crop_unit_y","sub_wc","sub_hc","codec_width","codec_height","present_width","ceil","chroma_format_string","getChromaFormatString","frame_rate","fixed","par_ratio","width","height","codec_size","present_size","count","lastScale","nextScale","deltaScale","toFixed","chroma","toVideoMeta","spsConfig","meta","codecWidth","codecHeight","presentWidth","presentHeight","profile","level","bitDepth","chromaFormat","parRatio","frameRate","fpsDen","fpsNum","refSampleDuration","floor","timescale","RBSP","EBSP2RBSP","data","filter","el","idx","EBSP2SODB","lastByte","slice","u8aToString","result","String","fromCharCode","SEIParser","_resolveNalu","parse","sodb","_SEIParser$switchPayl","switchPayloadType","payloadType","offset","content","user_data_unregistered","code","dv","getUint8","getPayloadLength","payloadLength","_SEIParser$getPayload","uuid","payload","Nalunit","getNalunits","position","buf","dataview","getInt32","getInt16","getInt8","getAnnexbNals","getAvccNals","nals","getHeaderPositionAnnexB","start","pos","end","header","headerLength","skip","body","unit","analyseNal","type","push","ndr","idr","sei","sps","SpsParser","pps","bufferLen","getAvcc","ret","NalUnit","_NalUnit","_Golomb","H264Demuxer","options","_player","player","videoMeta","VideoTrackMeta","videoTrack","samples","unusedUnits","currentSampleIdx","duration","dataLoadedTimer","initEvents","on","Events","LOADER_EVENTS","LOADER_DATALOADED","handleDataLoaded","bind","LOADER_COMPLETE","url","emit","LADER_START","clearTimeout","shift","clear","stream","XgStream","units","concat","config","isLive","lastUnit","pop","pushBackData","pushToMobileVideo","setTimeout","unitsToSamples","unused","forEach","sample","ts","dts","pts","video","setVideoMeta","intervalId","setInterval","onDemuxComplete","round","window","clearInterval","_context","getInstance","temp","golomb","combineUnits","dataSize","reduce","isKeyframe","mp4","oldIOS","navigator","parseFloat","exec","userAgent","replace","MSStream","nativeWakeLock","console","log","NoSleep","_this","noSleepTimer","noSleepVideo","document","createElement","setAttribute","_addSourceToVideo","addEventListener","element","dataURI","source","appendChild","enable","disable","warn","hidden","location","href","split","stop","play","catch","e","pause","n","Document","p","createElementNS","aa","importNode","ba","prepend","ca","append","da","DocumentFragment","ea","q","Node","cloneNode","r","t","insertBefore","u","removeChild","v","replaceChild","x","getOwnPropertyDescriptor","y","Element","attachShadow","z","A","getAttribute","B","C","removeAttribute","D","getAttributeNS","E","setAttributeNS","F","removeAttributeNS","G","insertAdjacentElement","fa","insertAdjacentHTML","ha","ia","ja","before","ka","after","la","replaceWith","ma","remove","na","HTMLElement","H","oa","pa","qa","Set","a","add","ra","b","has","test","sa","contains","documentElement","I","isConnected","__CE_isImportDocument","parentNode","ShadowRoot","host","J","children","Array","call","firstChild","nextSibling","nodeType","ELEMENT_NODE","K","L","c","f","d","localName","import","__CE_shadowRoot","M","ta","N","readyState","MutationObserver","observe","childList","subtree","ua","disconnect","addedNodes","va","Promise","wa","O","Map","g","l","j","h","m","o","Function","xa","ya","define","za","SyntaxError","P","w","k","observedAttributes","constructorFunction","connectedCallback","disconnectedCallback","adoptedCallback","attributeChangedCallback","constructionStack","upgrade","__CE_state","get","Q","whenDefined","reject","indexOf","polyfillWrapFlushCallback","delete","R","CustomElementRegistry","polyfillDefineLazy","S","T","noDocumentConstructionObserver","shadyDomFastWalk","U","ShadyDOM","inUse","querySelectorAll","nativeMethods","Aa","Ba","V","W","__CE_patched","X","Y","s","__CE_registry","__CE_documentLoadHandled","ownerDocument","defaultView","__CE_definition","hasAttributes","Ca","namespaceURI","setPrototypeOf","HTMLUnknownElement","message","sourceURL","fileName","line","lineNumber","column","columnNumber","ErrorEvent","initErrorEvent","cancelable","filename","lineno","colno","error","createEvent","preventDefault","dispatchEvent","defaultPrevented","Da","Ea","constructor","Z","arguments","apply","Fa","Ga","TEXT_NODE","childNodes","COMMENT_NODE","textContent","join","createTextNode","Ha","Ia","toLowerCase","previousSibling","lastChild","innerHTML","customElements","Ja","forcePolyfill","__CE_installPolyfill","self","Reflect","undefined","BuiltInHTMLElement","wrapperForTheName","construct","TimeRanges","dump","len","BROWSER_EVENTS","VISIBILITY_CHANGE","PLAYER_EVENTS","SEEK","LOADER_RESPONSE_HEADERS","LOADER_ERROR","DEMUX_EVENTS","DEMUX_START","DEMUX_COMPLETE","DEMUX_ERROR","METADATA_PARSED","SEI_PARSED","VIDEO_METADATA_CHANGE","AUDIO_METADATA_CHANGE","MEDIA_INFO","REMUX_EVENTS","REMUX_METADATA","REMUX_MEDIA","MEDIA_SEGMENT","REMUX_ERROR","INIT_SEGMENT","DETECT_CHANGE_STREAM","DETECT_CHANGE_STREAM_DISCONTINUE","DETECT_AUDIO_GAP","DETECT_AUDIO_OVERLAP","RANDOM_ACCESS_POINT","MSE_EVENTS","SOURCE_UPDATE_END","MSE_ERROR","HLS_EVENTS","RETRY_TIME_EXCEEDED","CRYTO_EVENTS","START_DECRYPT","DECRYPTED","ALLEVENTS","assign","FlvAllowedEvents","HlsAllowedEvents","hasOwnProperty","_key","Playlist","configs","_baseURL","_list","_ts","version","sequence","targetduration","fragLength","_lastget","_audoclear","autoclear","downloadedUrls","discontinue","id","downloaded","downloading","deleteFrag","time","pushM3U8","deletepre","encrypt","newfraglist","frags","frag","tslist","getTsList","keys","tsname","isloaded","loading","getTsByName","name","getTs","timelist","sort","parseInt","getLastDownloadedTs","found","clearDownloaded","baseURL","Presource","mimetype","init","PreSource","sources","getSource","createSource","Stream","ArrayBuffer","back","loop","last","readUint8","readUint16","readUint24","readUint32","readUint64","readInt8","readInt16","readInt32","writeUint32","sign","res","getUint16","_possibleConstructorReturn","ReferenceError","_inherits","subClass","superClass","create","__proto__","Track","sequenceNumber","droppedSamples","reset","distroy","AudioTrack","_Track","getPrototypeOf","VideoTrack","_Track2","_this2","dropped","Tracks","audioTrack","XgBuffer","historyLen","array","_shiftBuffer","_ret","_ret2","tmpoff","tmp","templength","toInt","retInt","AudioTrackMeta","_default","sampleRate","channelCount","codec","sampleRateIndex","avcc","AudioTrackSample","info","getDefault","VideoTrackSample","originDts","isObjectFilled","obj","MediaInfo","mimeType","hasVideo","hasAudio","audio","isComplete","isBaseInfoReady","isVideoReady","isAudioReady","mediaInfo","_MediaInfo","domain","EventHandlers","EventEmitter","usingDomains","_events","_maxListeners","defaultMaxListeners","active","_eventsCount","setMaxListeners","isNaN","$getMaxListeners","that","getMaxListeners","emitNone","handler","isFn","listeners","arrayClone","emitOne","arg1","emitTwo","arg2","emitThree","arg3","emitMany","args","er","events","doError","domainEmitter","domainThrown","err","context","_addListener","listener","existing","newListener","unshift","warned","emitter","emitWarning","addListener","prependListener","_onceWrap","fired","removeListener","once","prependOnceListener","list","originalListener","spliceOne","removeAllListeners","evlistener","unwrapListeners","listenerCount","eventNames","ownKeys","index","arr","copy","_get","object","property","receiver","desc","parent","getter","DIRECT_EMIT_FLAG","Context","allowedEvents","_emitter","off","_instanceMap","_clsMap","_inited","_hooks","tag","initInstance","_len","newInstance","registry","cls","checkMessageName","_isMessageNameValid","enhanced","_cls","onceListeners","messageName","callback","beforeList","_len2","_key2","emitTo","_len3","_key3","removeListeners","hasOwn","callbacks","_messageName","_callbacks","_callback","_len4","_key4","seek","EVENTS","destroyInstances","_this3","Crypto","inputBuffer","inputbuffer","outputBuffer","outputbuffer","iv","method","crypto","msCrypto","decript","aeskey","sbkey","subtle","importKey","then","decriptData","decrypt","KeySystems","WIDEVINE","PLAYREADY","MAX_LICENSE_REQUEST_FAILURES","EME","_ref","licenseUrl","mediaKeySystemConfigs","keySystem","mediaKeysList","requestLicenseFailureCount","onManifestParsed","createWidevineMediaKeySystemConfigurations","audioCodecs","videoCodecs","requestMediaKeySystemAccess","keySystemAccess","createMediaKeys","mediaKeys","setMediaKeys","onMediaEncrypted","onKeySessionMessage","keySession","requestLicense","update","keyMessage","xhr","createLicenseXhr","send","XMLHttpRequest","open","responseType","onreadystatechange","onLicenseRequestReadyStageChange","status","response","createSession","event","generateRequest","initDataType","initData","videoCapabilities","map","contentType","isSupported","checkIsIncompatibleBrowser","isSafari","isMSBrowser","isFirefox","isEdge","MSE","container","mediaSource","sourceBuffers","preloadTime","onSourceOpen","onTimeUpdate","onUpdateEnd","onWaiting","opened","MediaSource","_url","resetContext","newCtx","updating","clearBuffer","addSourceBuffers","doAppend","tracks","track","_k","_type","mime","sourceBuffer","addSourceBuffer","inited","appendBuffer","endOfStream","cleanBuffers","taskList","_loop","task","resolve","doCleanBuffer","retryTime","clean","removeEventListener","all","removeBuffers","_loop2","removeSourceBuffer","URL","revokeObjectURL","val","createObjectURL","buffered","bEnd","visibilityChange","msHidden","webkitHidden","PageVisibility","onShow","onHidden","handleVisibilityChange","le","setInt16","Int16Array","_typeof","Symbol","iterator","READ_STREAM","READ_TEXT","READ_JSON","READ_BUFFER","FetchLoader","_reader","_canceled","_destroyed","readtype","_loaderTaskNo","load","_fetch","fetch","_x","_x2","toString","params","timer","race","internalLoad","retryTimes","headers","ok","_onFetchResponse","statusText","opts","getParams","taskno","json","text","arrayBuffer","_onReader","getReader","reader","cancel","read","done","Headers","mode","cache","configHeaders","optHeaders","cors","withCredentials","credentials","_toConsumableArray","isArray","arr2","from","DevLogger","matched","cookie","_status","_level","funName","arg4","arg5","arg6","arg7","arg8","arg9","arg10","_console","tagName","logger","_devLogger","AUDIO","AUDIO_READY","AUDIO_WAITING","VIDEO","VIDEO_DECODER_INIT","VIDEO_READY","VIDEO_WAITING","AUTO_RUN","DECODE_LOW_FPS","TIMELINE","PLAY_EVENT","SET_METADATA","APPEND_CHUNKS","START_RENDER","DO_PAUSE","SYNC_DTS","UPDATE_VOLUME","UPDATE_PRELOAD_TIME","NO_AUDIO","DESTROY","READY","VIDEO_EVENTS","WAITING","CANPLAY","PLAY","PLAYING","PAUSE","LOADEDDATA","TIMEUPDATE","DURATION_CHANGE","VOLUME_CHANGE","ERROR","DECODE_FPS","LOW_DECODE","AudioTimeRange","_buffers","_duration","startDts","initBgSilenceAudio","querySelector","silenceMp3","item","controls","preload","muted","ele","playSlienceAudio","AudioContext","webkitAudioContext","MEDIA_ERR_DECODE","ERROR_MSG","INIT_AUDIO_ERR","DECODE_ERR","AudioRender","_EventEmitter","_config","_parent","_timeRange","_sampleQueue","_ready","_meta","_noAudio","_source","_onSourceBufferEnded","_initAudioCtx","volume","_bindEvents","resume","_audioCtx","_assembleErr","msg","_emitTimelineEvents","_gainNode","createGain","gain","connect","destination","suspend","state","_appendChunk","_startRender","_destroy","_","_assembleAAC","_checkMetaChange","sampleQueue","op","_this4","samp0","sampLast","metaChangeIndex","toDecode","splice","adtss","getAACData","chunkBuffer","combileData","decodeAudioData","uncompress","createBufferSource","long","currentTime","close","adts","getAdts","originObjectType","aacframelength","TARGET","SCRIPT_TYPE","BlobBuilder","WebKitBlobBuilder","MozBlobBuilder","MSBlobBuilder","webkitURL","Worker","shimWorker","fn","ShimWorker","forceFallback","objURL","createSourceObject","selfShim","postMessage","onmessage","isThisThread","testWorker","testArray","terminate","str","Blob","blob","getBlob","shimImportScripts","eval","Module","addOnPostRun","MAX_STREAM_BUFFER_LENGTH","Decoder","infoId","infolist","par_broadwayOnBroadwayInited","broadwayOnBroadwayInited","par_broadwayOnPictureDecoded","broadwayOnPictureDecoded","toU8Array","ptr","HEAPU8","_broadwayInit","_broadwayCreateStream","infoid","sliceType","isGop","yRowcount","uvRowcount","yLinesize","uvLinesize","datetemp","decode","Date","getTime","_broadwayFlushStream","_broadwayPlayStream","_broadwayExit","updateMeta","decoder","onPostRun","importScripts","streamBuffer","bitRateFormate","VideoTimeRange","_baseDts","_lastDuration","_bitrate","_compressFrame","_caclBaseDts","frame","_updateDuration","frames","pre","_estimateBitRate","sum","delta","bitrate","upDuration","deletePassed","YUVCanvas","canvas","_initMeta","_initContextGL","contextGL","_initProgram","_initBuffers","_initTextures","gl","validContextNames","nameIndex","contextName","contextOptions","getContext","getParameter","vertexShaderScript","fragmentShaderScript","YUV2RGB","vertexShader","createShader","VERTEX_SHADER","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","getShaderInfoLog","fragmentShader","FRAGMENT_SHADER","program","createProgram","attachShader","linkProgram","getProgramParameter","LINK_STATUS","getProgramInfoLog","useProgram","YUV2RGBRef","getUniformLocation","uniformMatrix4fv","shaderProgram","vertexPosBuffer","createBuffer","bindBuffer","ARRAY_BUFFER","bufferData","Float32Array","STATIC_DRAW","vertexPosRef","getAttribLocation","enableVertexAttribArray","vertexAttribPointer","FLOAT","texturePosBuffer","texturePosRef","uTexturePosBuffer","uTexturePosRef","vTexturePosBuffer","vTexturePosRef","yTextureRef","_initTexture","ySamplerRef","uniform1i","uTextureRef","uSamplerRef","vTextureRef","vSamplerRef","textureRef","createTexture","bindTexture","TEXTURE_2D","texParameteri","TEXTURE_MAG_FILTER","NEAREST","TEXTURE_MIN_FILTER","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","_drawPictureGL","ylen","uvlen","renderData","yData","uData","vData","_drawPictureGL420","yDataPerRow","yRowCnt","uDataPerRow","uRowCnt","vDataPerRow","vRowCnt","ratiow","ratioh","left","top","viewport","texturePosValues","DYNAMIC_DRAW","uTexturePosValues","vTexturePosValues","activeTexture","TEXTURE0","texImage2D","LUMINANCE","UNSIGNED_BYTE","TEXTURE1","TEXTURE2","drawArrays","TRIANGLE_STRIP","_drawPictureRGB","render","resetMeta","MAX_QUEUE_LENGTH","MAX_LOW_FPS_RECORD","DecodeEstimate","_needEstimate","_lastDecodeDot","_lastDecodeCost","_lastFrameDts","_dtsDeltas","_decodeCosts","_lowDecodeQueue","_fps","_decodeFps","needEstimateFps","addDecodeInfo","frameInfo","_estimateDecodeFps","_estimateFps","resetDecodeDot","abs","_avg","performance","now","cost","avg","_lowDecodeDetect","H264_DECODER_URL","ASM_H264_DECODER_URL","H265_DECODER_URL","ASM_H265_DECODER_URL","HAVE_NOTHING","HAVE_METADATA","HAVE_CURRENT_DATA","HAVE_FUTURE_DATA","HAVE_ENOUGH_DATA","VideoRender","_decodeEstimate","_frameQueue","_canvas","_decoder","_frameRender","_wasmReady","_clearId","_degrade","_avccpushed","_lastTimeupdate","_inDecoding","_lastDecodingDts","_initCanvas","updateReady","_whenReady","style","maxWidth","maxHeight","bottom","right","margin","_setMetadata","nextFrame","lastTimelinePosition","timelinePosition","audioSyncDts","_bindWorkerEvent","_pushAvcc","_startDecode","_checkToDecode","_destroyWorker","_initWorker","_selectWorker","isHevc","HevcWorker","AvcWorker","_selectWorker2","worker","vps","rawVps","rawSps","rawPps","_data","FrameRender","_decodeSample","interval","_renderDelay","preciseVideoDts","gopId","cts","decodeFps","decodeCost","duartion","baseDts","lastDuration","_lastTimelinePosition","_audioDts","TimeLine","videoRender","audioRender","_readyStatus","_paused","_bindEvent","onVideoReady","resetReadyStatus","resumed","_this5","_CustomElement","MVideo","_CustomElement2","_init","timeline","_noSleep","_logFirstFrame","_playRequest","noAudio","setNoAudio","_err","_innerDispatchEvent","handleMediaInfo","ready","paused","vSam0","aSam0","setAudioMeta","handleEnded","handleErr","Event","videoWidth","display","pxVal","Number","attrPreloadTime","Infinity","asmSupported","MyAsmModule","Raw264Player","wasmSupported","WebComponentSupported","isComponentDefined","mediaType","videoConfig","preloadtime","handleTimeupdate","hasPlayed","hasStart","LoaderBuffer","core","Core","_cleanBuffer","isDelDom","oldTime","getBufferedRange","Player"],"mappings":"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"}