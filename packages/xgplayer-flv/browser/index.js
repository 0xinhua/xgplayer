window.FlvPlayer=function(e){var t={};function n(r){if(t[r])return t[r].exports;var s=t[r]={i:r,l:!1,exports:{}};return e[r].call(s.exports,s,s.exports,n),s.l=!0,s.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)n.d(r,s,function(t){return e[t]}.bind(null,s));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}({"../xgplayer-flv-live/dist/index.js":
/*!****************************!*\
  !*** .-live/dist/index.js ***!
  \****************************/
/*! no static exports found */function(module,exports,__webpack_require__){"use strict";var n;window,n=function(__WEBPACK_EXTERNAL_MODULE_xgplayer__){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var s=t[r]={i:r,l:!1,exports:{}};return e[r].call(s.exports,s,s.exports,n),s.l=!0,s.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)n.d(r,s,function(t){return e[t]}.bind(null,s));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}({"../../node_modules/events/events.js":
/*!*****************************************************************************************!*\
      !*** /Users/leonardo/Documents/front-end/player/xgplayer/node_modules/events/events.js ***!
      \*****************************************************************************************/
/*! no static exports found */function(module,exports,__webpack_require__){eval("// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n\n\nvar R = typeof Reflect === 'object' ? Reflect : null;\nvar ReflectApply = R && typeof R.apply === 'function' ? R.apply : function ReflectApply(target, receiver, args) {\n  return Function.prototype.apply.call(target, receiver, args);\n};\n\nvar ReflectOwnKeys;\nif (R && typeof R.ownKeys === 'function') {\n  ReflectOwnKeys = R.ownKeys;\n} else if (Object.getOwnPropertySymbols) {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target).concat(Object.getOwnPropertySymbols(target));\n  };\n} else {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target);\n  };\n}\n\nfunction ProcessEmitWarning(warning) {\n  if (console && console.warn) console.warn(warning);\n}\n\nvar NumberIsNaN = Number.isNaN || function NumberIsNaN(value) {\n  return value !== value;\n};\n\nfunction EventEmitter() {\n  EventEmitter.init.call(this);\n}\nmodule.exports = EventEmitter;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._eventsCount = 0;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nvar defaultMaxListeners = 10;\n\nObject.defineProperty(EventEmitter, 'defaultMaxListeners', {\n  enumerable: true,\n  get: function () {\n    return defaultMaxListeners;\n  },\n  set: function (arg) {\n    if (typeof arg !== 'number' || arg < 0 || NumberIsNaN(arg)) {\n      throw new RangeError('The value of \"defaultMaxListeners\" is out of range. It must be a non-negative number. Received ' + arg + '.');\n    }\n    defaultMaxListeners = arg;\n  }\n});\n\nEventEmitter.init = function () {\n\n  if (this._events === undefined || this._events === Object.getPrototypeOf(this)._events) {\n    this._events = Object.create(null);\n    this._eventsCount = 0;\n  }\n\n  this._maxListeners = this._maxListeners || undefined;\n};\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function setMaxListeners(n) {\n  if (typeof n !== 'number' || n < 0 || NumberIsNaN(n)) {\n    throw new RangeError('The value of \"n\" is out of range. It must be a non-negative number. Received ' + n + '.');\n  }\n  this._maxListeners = n;\n  return this;\n};\n\nfunction $getMaxListeners(that) {\n  if (that._maxListeners === undefined) return EventEmitter.defaultMaxListeners;\n  return that._maxListeners;\n}\n\nEventEmitter.prototype.getMaxListeners = function getMaxListeners() {\n  return $getMaxListeners(this);\n};\n\nEventEmitter.prototype.emit = function emit(type) {\n  var args = [];\n  for (var i = 1; i < arguments.length; i++) args.push(arguments[i]);\n  var doError = type === 'error';\n\n  var events = this._events;\n  if (events !== undefined) doError = doError && events.error === undefined;else if (!doError) return false;\n\n  // If there is no 'error' event listener then throw.\n  if (doError) {\n    var er;\n    if (args.length > 0) er = args[0];\n    if (er instanceof Error) {\n      // Note: The comments on the `throw` lines are intentional, they show\n      // up in Node's output if this results in an unhandled exception.\n      throw er; // Unhandled 'error' event\n    }\n    // At least give some kind of context to the user\n    var err = new Error('Unhandled error.' + (er ? ' (' + er.message + ')' : ''));\n    err.context = er;\n    throw err; // Unhandled 'error' event\n  }\n\n  var handler = events[type];\n\n  if (handler === undefined) return false;\n\n  if (typeof handler === 'function') {\n    ReflectApply(handler, this, args);\n  } else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i) ReflectApply(listeners[i], this, args);\n  }\n\n  return true;\n};\n\nfunction _addListener(target, type, listener, prepend) {\n  var m;\n  var events;\n  var existing;\n\n  if (typeof listener !== 'function') {\n    throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n  }\n\n  events = target._events;\n  if (events === undefined) {\n    events = target._events = Object.create(null);\n    target._eventsCount = 0;\n  } else {\n    // To avoid recursion in the case that type === \"newListener\"! Before\n    // adding it to the listeners, first emit \"newListener\".\n    if (events.newListener !== undefined) {\n      target.emit('newListener', type, listener.listener ? listener.listener : listener);\n\n      // Re-assign `events` because a newListener handler could have caused the\n      // this._events to be assigned to a new object\n      events = target._events;\n    }\n    existing = events[type];\n  }\n\n  if (existing === undefined) {\n    // Optimize the case of one listener. Don't need the extra array object.\n    existing = events[type] = listener;\n    ++target._eventsCount;\n  } else {\n    if (typeof existing === 'function') {\n      // Adding the second element, need to change to array.\n      existing = events[type] = prepend ? [listener, existing] : [existing, listener];\n      // If we've already got an array, just append.\n    } else if (prepend) {\n      existing.unshift(listener);\n    } else {\n      existing.push(listener);\n    }\n\n    // Check for listener leak\n    m = $getMaxListeners(target);\n    if (m > 0 && existing.length > m && !existing.warned) {\n      existing.warned = true;\n      // No error code for this since it is a Warning\n      // eslint-disable-next-line no-restricted-syntax\n      var w = new Error('Possible EventEmitter memory leak detected. ' + existing.length + ' ' + String(type) + ' listeners ' + 'added. Use emitter.setMaxListeners() to ' + 'increase limit');\n      w.name = 'MaxListenersExceededWarning';\n      w.emitter = target;\n      w.type = type;\n      w.count = existing.length;\n      ProcessEmitWarning(w);\n    }\n  }\n\n  return target;\n}\n\nEventEmitter.prototype.addListener = function addListener(type, listener) {\n  return _addListener(this, type, listener, false);\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.prependListener = function prependListener(type, listener) {\n  return _addListener(this, type, listener, true);\n};\n\nfunction onceWrapper() {\n  var args = [];\n  for (var i = 0; i < arguments.length; i++) args.push(arguments[i]);\n  if (!this.fired) {\n    this.target.removeListener(this.type, this.wrapFn);\n    this.fired = true;\n    ReflectApply(this.listener, this.target, args);\n  }\n}\n\nfunction _onceWrap(target, type, listener) {\n  var state = { fired: false, wrapFn: undefined, target: target, type: type, listener: listener };\n  var wrapped = onceWrapper.bind(state);\n  wrapped.listener = listener;\n  state.wrapFn = wrapped;\n  return wrapped;\n}\n\nEventEmitter.prototype.once = function once(type, listener) {\n  if (typeof listener !== 'function') {\n    throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n  }\n  this.on(type, _onceWrap(this, type, listener));\n  return this;\n};\n\nEventEmitter.prototype.prependOnceListener = function prependOnceListener(type, listener) {\n  if (typeof listener !== 'function') {\n    throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n  }\n  this.prependListener(type, _onceWrap(this, type, listener));\n  return this;\n};\n\n// Emits a 'removeListener' event if and only if the listener was removed.\nEventEmitter.prototype.removeListener = function removeListener(type, listener) {\n  var list, events, position, i, originalListener;\n\n  if (typeof listener !== 'function') {\n    throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n  }\n\n  events = this._events;\n  if (events === undefined) return this;\n\n  list = events[type];\n  if (list === undefined) return this;\n\n  if (list === listener || list.listener === listener) {\n    if (--this._eventsCount === 0) this._events = Object.create(null);else {\n      delete events[type];\n      if (events.removeListener) this.emit('removeListener', type, list.listener || listener);\n    }\n  } else if (typeof list !== 'function') {\n    position = -1;\n\n    for (i = list.length - 1; i >= 0; i--) {\n      if (list[i] === listener || list[i].listener === listener) {\n        originalListener = list[i].listener;\n        position = i;\n        break;\n      }\n    }\n\n    if (position < 0) return this;\n\n    if (position === 0) list.shift();else {\n      spliceOne(list, position);\n    }\n\n    if (list.length === 1) events[type] = list[0];\n\n    if (events.removeListener !== undefined) this.emit('removeListener', type, originalListener || listener);\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\n\nEventEmitter.prototype.removeAllListeners = function removeAllListeners(type) {\n  var listeners, events, i;\n\n  events = this._events;\n  if (events === undefined) return this;\n\n  // not listening for removeListener, no need to emit\n  if (events.removeListener === undefined) {\n    if (arguments.length === 0) {\n      this._events = Object.create(null);\n      this._eventsCount = 0;\n    } else if (events[type] !== undefined) {\n      if (--this._eventsCount === 0) this._events = Object.create(null);else delete events[type];\n    }\n    return this;\n  }\n\n  // emit removeListener for all listeners on all events\n  if (arguments.length === 0) {\n    var keys = Object.keys(events);\n    var key;\n    for (i = 0; i < keys.length; ++i) {\n      key = keys[i];\n      if (key === 'removeListener') continue;\n      this.removeAllListeners(key);\n    }\n    this.removeAllListeners('removeListener');\n    this._events = Object.create(null);\n    this._eventsCount = 0;\n    return this;\n  }\n\n  listeners = events[type];\n\n  if (typeof listeners === 'function') {\n    this.removeListener(type, listeners);\n  } else if (listeners !== undefined) {\n    // LIFO order\n    for (i = listeners.length - 1; i >= 0; i--) {\n      this.removeListener(type, listeners[i]);\n    }\n  }\n\n  return this;\n};\n\nfunction _listeners(target, type, unwrap) {\n  var events = target._events;\n\n  if (events === undefined) return [];\n\n  var evlistener = events[type];\n  if (evlistener === undefined) return [];\n\n  if (typeof evlistener === 'function') return unwrap ? [evlistener.listener || evlistener] : [evlistener];\n\n  return unwrap ? unwrapListeners(evlistener) : arrayClone(evlistener, evlistener.length);\n}\n\nEventEmitter.prototype.listeners = function listeners(type) {\n  return _listeners(this, type, true);\n};\n\nEventEmitter.prototype.rawListeners = function rawListeners(type) {\n  return _listeners(this, type, false);\n};\n\nEventEmitter.listenerCount = function (emitter, type) {\n  if (typeof emitter.listenerCount === 'function') {\n    return emitter.listenerCount(type);\n  } else {\n    return listenerCount.call(emitter, type);\n  }\n};\n\nEventEmitter.prototype.listenerCount = listenerCount;\nfunction listenerCount(type) {\n  var events = this._events;\n\n  if (events !== undefined) {\n    var evlistener = events[type];\n\n    if (typeof evlistener === 'function') {\n      return 1;\n    } else if (evlistener !== undefined) {\n      return evlistener.length;\n    }\n  }\n\n  return 0;\n}\n\nEventEmitter.prototype.eventNames = function eventNames() {\n  return this._eventsCount > 0 ? ReflectOwnKeys(this._events) : [];\n};\n\nfunction arrayClone(arr, n) {\n  var copy = new Array(n);\n  for (var i = 0; i < n; ++i) copy[i] = arr[i];\n  return copy;\n}\n\nfunction spliceOne(list, index) {\n  for (; index + 1 < list.length; index++) list[index] = list[index + 1];\n  list.pop();\n}\n\nfunction unwrapListeners(arr) {\n  var ret = new Array(arr.length);\n  for (var i = 0; i < ret.length; ++i) {\n    ret[i] = arr[i].listener || arr[i];\n  }\n  return ret;\n}\n\n//# sourceURL=webpack://xgplayer-flv//Users/leonardo/Documents/front-end/player/xgplayer/node_modules/events/events.js?")},"../xgplayer-buffer/index.js":
/*!***********************************!*\
      !*** ../xgplayer-buffer/index.js ***!
      \***********************************/
/*! no static exports found */function(module,exports,__webpack_require__){eval('\n\nmodule.exports = {\n  Track: __webpack_require__(/*! ./src/track */ "../xgplayer-buffer/src/track.js").default,\n  Tracks: __webpack_require__(/*! ./src/track */ "../xgplayer-buffer/src/track.js").Tracks,\n  AudioTrack: __webpack_require__(/*! ./src/track */ "../xgplayer-buffer/src/track.js").AudioTrack,\n  VideoTrack: __webpack_require__(/*! ./src/track */ "../xgplayer-buffer/src/track.js").VideoTrack,\n\n  XgBuffer: __webpack_require__(/*! ./src/buffer */ "../xgplayer-buffer/src/buffer.js").XgBuffer,\n  RemuxBuffer: __webpack_require__(/*! ./src/buffer */ "../xgplayer-buffer/src/buffer.js").RemuxBuffer,\n\n  PreSource: __webpack_require__(/*! ./src/presouce */ "../xgplayer-buffer/src/presouce.js").default\n};\n\n//# sourceURL=webpack://xgplayer-flv/../xgplayer-buffer/index.js?')},"../xgplayer-buffer/src/buffer.js":
/*!****************************************!*\
      !*** ../xgplayer-buffer/src/buffer.js ***!
      \****************************************/
/*! no static exports found */function(module,exports,__webpack_require__){eval('\n\nObject.defineProperty(exports, "__esModule", {\n  value: true\n});\nclass XgBuffer {\n  /**\n   * A buffer to store loaded data.\n   *\n   * @class LoaderBuffer\n   * @param {number} length - Optional the buffer size\n   */\n  constructor(length) {\n    this.length = length || 0;\n    this.historyLen = length || 0;\n    this.array = [];\n    this.offset = 0;\n  }\n\n  /**\n   * The function to push data.\n   *\n   * @param {number} data - The data to push into the buffer\n   */\n  push(data) {\n    this.array.push(data);\n    this.length += data.byteLength;\n    this.historyLen += data.byteLength;\n  }\n\n  /**\n   * The function to shift data.\n   *\n   * @param {number} length - The size of shift.\n   */\n  shift(length) {\n    if (this.array.length < 1) {\n      return new Uint8Array(0);\n    }\n\n    if (length === undefined) {\n      return this._shiftBuffer();\n    }\n    if (this.offset + length === this.array[0].length) {\n      let ret = this.array[0].slice(this.offset, this.offset + length);\n      this.offset = 0;\n      this.array.shift();\n      this.length -= length;\n      return ret;\n    }\n\n    if (this.offset + length < this.array[0].length) {\n      let ret = this.array[0].slice(this.offset, this.offset + length);\n      this.offset += length;\n      this.length -= length;\n      return ret;\n    }\n\n    let ret = new Uint8Array(length);\n    let tmpoff = 0;\n    while (this.array.length > 0 && length > 0) {\n      if (this.offset + length < this.array[0].length) {\n        let tmp = this.array[0].slice(this.offset, this.offset + length);\n        ret.set(tmp, tmpoff);\n        this.offset += length;\n        this.length -= length;\n        length = 0;\n        break;\n      } else {\n        let templength = this.array[0].length - this.offset;\n        ret.set(this.array[0].slice(this.offset, this.array[0].length), tmpoff);\n        this.array.shift();\n        this.offset = 0;\n        tmpoff += templength;\n        this.length -= templength;\n        length -= templength;\n      }\n    }\n    return ret;\n  }\n\n  /**\n   * Function to clear the buffer.\n   */\n  clear() {\n    this.array = [];\n    this.length = 0;\n    this.offset = 0;\n  }\n\n  destroy() {\n    this.clear();\n    this.historyLen = 0;\n  }\n\n  /**\n   * Function to shift one unit8Array.\n   */\n  _shiftBuffer() {\n    this.length -= this.array[0].length;\n    this.offset = 0;\n    return this.array.shift();\n  }\n\n  /**\n   * Convert uint8 data to number.\n   *\n   * @param {number} start - the start postion.\n   * @param {number} length - the length of data.\n   */\n  toInt(start, length) {\n    let retInt = 0;\n    let i = this.offset + start;\n    while (i < this.offset + length + start) {\n      if (i < this.array[0].length) {\n        retInt = retInt * 256 + this.array[0][i];\n      } else if (this.array[1]) {\n        retInt = retInt * 256 + this.array[1][i - this.array[0].length];\n      }\n\n      i++;\n    }\n    return retInt;\n  }\n}\n\nexports.XgBuffer = XgBuffer;\nclass RemuxBuffer {\n  constructor() {\n    this.video = [];\n    this.audio = [];\n  }\n\n  destroy() {\n    this.video = [];\n    this.audio = [];\n  }\n}\nexports.RemuxBuffer = RemuxBuffer;\n\n//# sourceURL=webpack://xgplayer-flv/../xgplayer-buffer/src/buffer.js?')},"../xgplayer-buffer/src/presouce.js":
/*!******************************************!*\
      !*** ../xgplayer-buffer/src/presouce.js ***!
      \******************************************/
/*! no static exports found */function(module,exports,__webpack_require__){eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nclass Source {\n  constructor() {\n    this.mimetype = '';\n    this.init = null;\n    this.data = [];\n  }\n}\n\nclass PreSource {\n  constructor() {\n    this.sources = {};\n  }\n\n  getSource(source) {\n    return this.sources[source];\n  }\n\n  createSource(name) {\n    this.sources[name] = new Source();\n    return this.sources[name];\n  }\n\n  clear() {\n    this.sources = {};\n  }\n\n  destroy() {\n    this.sources = {};\n  }\n}\n\nexports.default = PreSource;\n\n//# sourceURL=webpack://xgplayer-flv/../xgplayer-buffer/src/presouce.js?")},"../xgplayer-buffer/src/track.js":
/*!***************************************!*\
      !*** ../xgplayer-buffer/src/track.js ***!
      \***************************************/
/*! no static exports found */function(module,exports,__webpack_require__){eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nclass Track {\n  /**\n   * The constructor.\n   */\n  constructor() {\n    this.id = -1;\n    this.sequenceNumber = 0;\n    this.samples = [];\n    this.droppedSamples = [];\n    this.length = 0;\n  }\n\n  /**\n   * Reset the track.\n   */\n  reset() {\n    this.sequenceNumber = 0;\n    this.samples = [];\n    this.length = 0;\n  }\n  /**\n   * destroy the track.\n   */\n  distroy() {\n    this.reset();\n    this.id = -1;\n  }\n}\n\nexports.default = Track;\nclass AudioTrack extends Track {\n  /**\n   * The constructor for audio track.\n   */\n  constructor() {\n    super();\n    this.TAG = 'AudioTrack';\n    this.type = 'audio';\n  }\n}\n\nexports.AudioTrack = AudioTrack;\nclass VideoTrack extends Track {\n  /**\n   * The constructor for video track.\n   */\n  constructor() {\n    super();\n    this.TAG = 'VideoTrack';\n    this.type = 'video';\n    this.dropped = 0;\n  }\n  /**\n   * reset the video track.\n   */\n  reset() {\n    this.sequenceNumber = 0;\n    this.samples = [];\n    this.length = 0;\n    this.dropped = 0;\n  }\n}\n\nexports.VideoTrack = VideoTrack;\nclass Tracks {\n  constructor() {\n    this.audioTrack = null;\n    this.videoTrack = null;\n  }\n}\nexports.Tracks = Tracks;\n\n//# sourceURL=webpack://xgplayer-flv/../xgplayer-buffer/src/track.js?")},"../xgplayer-codec/index.js":
/*!**********************************!*\
      !*** ../xgplayer-codec/index.js ***!
      \**********************************/
/*! no static exports found */function(module,exports,__webpack_require__){eval('\n\nmodule.exports = {\n  Nalunit: __webpack_require__(/*! ./src/h264/nalunit */ "../xgplayer-codec/src/h264/nalunit/index.js").default,\n  SpsParser: __webpack_require__(/*! ./src/h264/nalunit/sps */ "../xgplayer-codec/src/h264/nalunit/sps.js").default,\n\n  Compatibility: __webpack_require__(/*! ./src/compatibility */ "../xgplayer-codec/src/compatibility.js").default\n};\n\n//# sourceURL=webpack://xgplayer-flv/../xgplayer-codec/index.js?')},"../xgplayer-codec/src/aac/aac-helper.js":
/*!***********************************************!*\
      !*** ../xgplayer-codec/src/aac/aac-helper.js ***!
      \***********************************************/
/*! no static exports found */function(module,exports,__webpack_require__){eval('\n\nObject.defineProperty(exports, "__esModule", {\n  value: true\n});\n\nclass AAC {\n\n  static getSilentFrame(codec, channelCount) {\n    if (codec === \'mp4a.40.2\') {\n      // handle LC-AAC\n      if (channelCount === 1) {\n        return new Uint8Array([0x00, 0xc8, 0x00, 0x80, 0x23, 0x80]);\n      } else if (channelCount === 2) {\n        return new Uint8Array([0x21, 0x00, 0x49, 0x90, 0x02, 0x19, 0x00, 0x23, 0x80]);\n      } else if (channelCount === 3) {\n        return new Uint8Array([0x00, 0xc8, 0x00, 0x80, 0x20, 0x84, 0x01, 0x26, 0x40, 0x08, 0x64, 0x00, 0x8e]);\n      } else if (channelCount === 4) {\n        return new Uint8Array([0x00, 0xc8, 0x00, 0x80, 0x20, 0x84, 0x01, 0x26, 0x40, 0x08, 0x64, 0x00, 0x80, 0x2c, 0x80, 0x08, 0x02, 0x38]);\n      } else if (channelCount === 5) {\n        return new Uint8Array([0x00, 0xc8, 0x00, 0x80, 0x20, 0x84, 0x01, 0x26, 0x40, 0x08, 0x64, 0x00, 0x82, 0x30, 0x04, 0x99, 0x00, 0x21, 0x90, 0x02, 0x38]);\n      } else if (channelCount === 6) {\n        return new Uint8Array([0x00, 0xc8, 0x00, 0x80, 0x20, 0x84, 0x01, 0x26, 0x40, 0x08, 0x64, 0x00, 0x82, 0x30, 0x04, 0x99, 0x00, 0x21, 0x90, 0x02, 0x00, 0xb2, 0x00, 0x20, 0x08, 0xe0]);\n      }\n    } else {\n      // handle HE-AAC (mp4a.40.5 / mp4a.40.29)\n      if (channelCount === 1) {\n        // ffmpeg -y -f lavfi -i "aevalsrc=0:d=0.05" -c:a libfdk_aac -profile:a aac_he -b:a 4k output.aac && hexdump -v -e \'16/1 "0x%x," "\\n"\' -v output.aac\n        return new Uint8Array([0x1, 0x40, 0x22, 0x80, 0xa3, 0x4e, 0xe6, 0x80, 0xba, 0x8, 0x0, 0x0, 0x0, 0x1c, 0x6, 0xf1, 0xc1, 0xa, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5e]);\n      } else if (channelCount === 2) {\n        // ffmpeg -y -f lavfi -i "aevalsrc=0|0:d=0.05" -c:a libfdk_aac -profile:a aac_he_v2 -b:a 4k output.aac && hexdump -v -e \'16/1 "0x%x," "\\n"\' -v output.aac\n        return new Uint8Array([0x1, 0x40, 0x22, 0x80, 0xa3, 0x5e, 0xe6, 0x80, 0xba, 0x8, 0x0, 0x0, 0x0, 0x0, 0x95, 0x0, 0x6, 0xf1, 0xa1, 0xa, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5e]);\n      } else if (channelCount === 3) {\n        // ffmpeg -y -f lavfi -i "aevalsrc=0|0|0:d=0.05" -c:a libfdk_aac -profile:a aac_he_v2 -b:a 4k output.aac && hexdump -v -e \'16/1 "0x%x," "\\n"\' -v output.aac\n        return new Uint8Array([0x1, 0x40, 0x22, 0x80, 0xa3, 0x5e, 0xe6, 0x80, 0xba, 0x8, 0x0, 0x0, 0x0, 0x0, 0x95, 0x0, 0x6, 0xf1, 0xa1, 0xa, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5e]);\n      }\n    }\n    return null;\n  }\n\n}\n\nexports.default = AAC;\n\n//# sourceURL=webpack://xgplayer-flv/../xgplayer-codec/src/aac/aac-helper.js?')},"../xgplayer-codec/src/compatibility.js":
/*!**********************************************!*\
      !*** ../xgplayer-codec/src/compatibility.js ***!
      \**********************************************/
/*! no static exports found */function(module,exports,__webpack_require__){eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _xgplayerUtils = __webpack_require__(/*! xgplayer-utils */ \"../xgplayer-utils/index.js\");\n\nvar _aacHelper = __webpack_require__(/*! ./aac/aac-helper */ \"../xgplayer-codec/src/aac/aac-helper.js\");\n\nvar _aacHelper2 = _interopRequireDefault(_aacHelper);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst { REMUX_EVENTS } = _xgplayerUtils.EVENTS;\n\nclass Compatibility {\n  constructor() {\n    this.nextAudioDts = 0; // 模拟下一段音频数据的dts\n    this.nextVideoDts = 0; // 模拟下一段视频数据的dts\n\n    this.lastAudioSamplesLen = 0; // 上一段音频数据的长度\n    this.lastVideoSamplesLen = 0; // 上一段视频数据的长度\n\n    this.lastVideoDts = undefined; // 上一段音频数据的长度\n    this.lastAudioDts = undefined; // 上一段视频数据的长度\n\n    this.allAudioSamplesCount = 0; // 音频总数据量(原始帧)\n    this.allVideoSamplesCount = 0; // 视频总数据量(原始帧)\n\n    this._firstAudioSample = null;\n    this._firstVideoSample = null;\n\n    this.filledAudioSamples = []; // 补充音频帧（）\n    this.filledVideoSamples = []; // 补充视频帧（）\n  }\n\n  init() {\n    this.before(REMUX_EVENTS.REMUX_MEDIA, this.doFix.bind(this));\n  }\n\n  reset() {\n    this.nextAudioDts = 0; // 模拟下一段音频数据的dts\n    this.nextVideoDts = 0; // 模拟下一段视频数据的dts\n\n    this.lastAudioSamplesLen = 0; // 上一段音频数据的长度\n    this.lastVideoSamplesLen = 0; // 上一段视频数据的长度\n\n    this.lastVideoDts = undefined; // 上一段音频数据的长度\n    this.lastAudioDts = undefined; // 上一段视频数据的长度\n\n    this.allAudioSamplesCount = 0; // 音频总数据量(原始帧)\n    this.allVideoSamplesCount = 0; // 视频总数据量(原始帧)\n\n    this._firstAudioSample = null;\n    this._firstVideoSample = null;\n\n    this.filledAudioSamples = []; // 补充音频帧（）\n    this.filledVideoSamples = []; // 补充视频帧（）\n  }\n\n  doFix() {\n    const { isFirstAudioSamples, isFirstVideoSamples } = this.getFirstSample();\n\n    this.removeInvalidSamples();\n\n    this.recordSamplesCount();\n\n    if (this._firstVideoSample) {\n      this.fixRefSampleDuration(this.videoTrack.meta, this.videoTrack.samples);\n    }\n    if (this._firstAudioSample) {\n      this.fixRefSampleDuration(this.audioTrack.meta, this.audioTrack.samples);\n    }\n\n    this.doFixVideo(isFirstVideoSamples);\n    this.doFixAudio(isFirstAudioSamples);\n  }\n\n  doFixVideo(first) {\n    let { samples: videoSamples, meta } = this.videoTrack;\n\n    if (meta.frameRate && meta.frameRate.fixed === false) {\n      return;\n    }\n\n    if (!videoSamples || !videoSamples.length || !this._firstVideoSample) {\n      return;\n    }\n\n    // console.log(`video lastSample, ${videoSamples[videoSamples.length - 1].dts}`)\n\n    const firstSample = videoSamples[0];\n    const firstDts = firstSample.dts;\n\n    const samplesLen = videoSamples.length;\n\n    // step1. 修复与audio首帧差距太大的问题\n    if (first && this._firstAudioSample) {\n      const videoFirstDts = this._firstVideoSample.dts;\n      const audioFirstDts = this._firstAudioSample.dts;\n      const gap = videoFirstDts - audioFirstDts;\n      if (gap > 2 * meta.refSampleDuration) {\n        const fillCount = Math.floor(gap / meta.refSampleDuration);\n\n        for (let i = 0; i < fillCount; i++) {\n          const clonedFirstSample = Object.assign({}, firstSample); // 视频头部帧缺失需要复制第一帧\n          // 重新计算sample的dts和pts\n          clonedFirstSample.dts = videoFirstDts - (i + 1) * meta.refSampleDuration;\n          clonedFirstSample.pts = clonedFirstSample.dts + clonedFirstSample.cts;\n\n          videoSamples.unshift(clonedFirstSample);\n\n          this.filledVideoSamples.push({\n            dts: clonedFirstSample.dts,\n            size: clonedFirstSample.data.byteLength\n          });\n        }\n      }\n    }\n\n    let gap;\n    // step2. 修复samples段之间的间距问题、\n    if (this.nextVideoDts) {\n      // step1. 处理samples段之间的丢帧情况\n      // 当发现duration差距大于2帧时进行补帧\n      gap = firstDts - this.nextVideoDts;\n      const absGap = Math.abs(gap);\n      if (gap > 2 * meta.refSampleDuration) {\n        const fillFrameCount = Math.floor(gap / meta.refSampleDuration);\n\n        for (let i = 0; i < fillFrameCount; i++) {\n          const clonedSample = Object.assign({}, videoSamples[0]);\n          const computed = firstDts - (i + 1) * meta.refSampleDuration;\n\n          clonedSample.dts = computed > this.nextVideoDts ? computed : this.nextVideoDts; // 补的第一帧一定要是nextVideoDts\n          clonedSample.pts = clonedSample.dts + clonedSample.cts;\n\n          this.videoTrack.samples.unshift(clonedSample);\n\n          this.filledVideoSamples.push({\n            dts: clonedSample.dts,\n            size: clonedSample.data.byteLength\n          });\n        }\n      } else if (absGap <= 10 && absGap > 0) {\n        // 当差距在+-一帧之间时将第一帧的dts强行定位到期望位置\n        // console.log('重定位视频帧dts', videoSamples[0].dts, this.nextVideoDts)\n        videoSamples[0].dts = this.nextVideoDts;\n        videoSamples[0].originDts = videoSamples[0].dts;\n        videoSamples[0].cts = videoSamples[0].cts || videoSamples[0].pts - videoSamples[0].dts;\n        videoSamples[0].pts = videoSamples[0].dts + videoSamples[0].cts;\n      }\n    }\n    const lastDts = videoSamples[videoSamples.length - 1].dts;\n\n    const lastSampleDuration = videoSamples.length >= 2 ? lastDts - videoSamples[videoSamples.length - 2].dts : meta.refSampleDuration;\n\n    this.lastVideoSamplesLen = samplesLen;\n    this.nextVideoDts = lastDts + lastSampleDuration;\n    this.lastVideoDts = lastDts;\n\n    // step2. 修复sample段之内的间距问题\n    // step3. 修复samples段内部的dts异常问题\n    for (let i = 0, len = videoSamples.length; i < len; i++) {\n      const current = videoSamples[i];\n      const next = videoSamples[i + 1];\n\n      if (!next) {\n        break;\n      }\n\n      const duration = next.dts - current.dts;\n\n      if (duration > 2 * meta.refSampleDuration) {\n        // 两帧之间间隔太大，需要补空白帧\n        let fillFrameCount = Math.floor(duration / meta.refSampleDuration);\n\n        let fillFrameIdx = 0;\n        while (fillFrameIdx < fillFrameCount) {\n          const fillFrame = Object.assign({}, next);\n          fillFrame.dts = current.dts + (fillFrameIdx + 1) * meta.refSampleDuration;\n          fillFrame.pts = fillFrame.dts + fillFrame.cts;\n          if (fillFrame < next.dts) {\n            videoSamples.splice(i, 0, fillFrame);\n\n            this.filledVideoSamples.push({\n              dts: fillFrame.dts,\n              size: fillFrame.data.byteLength\n            });\n          }\n\n          fillFrameIdx++;\n          i++;\n        }\n      }\n    }\n\n    this.videoTrack.samples = videoSamples;\n  }\n\n  doFixAudio(first) {\n    let { samples: audioSamples, meta } = this.audioTrack;\n\n    if (!audioSamples || !audioSamples.length) {\n      return;\n    }\n    // console.log(`audio lastSample, ${audioSamples[audioSamples.length - 1].dts}`)\n\n    const samplesLen = audioSamples.length;\n    const silentFrame = _aacHelper2.default.getSilentFrame(meta.codec, meta.channelCount);\n\n    const firstSample = this._firstAudioSample;\n\n    // 对audioSamples按照dts做排序\n    audioSamples = Compatibility.sortAudioSamples(audioSamples);\n\n    // step0. 首帧与video首帧间距大的问题\n    if (this._firstVideoSample && first) {\n      const videoFirstPts = this._firstVideoSample.pts ? this._firstVideoSample.pts : this._firstVideoSample.dts + this._firstVideoSample.cts;\n\n      if (firstSample.dts - videoFirstPts > meta.refSampleDuration) {\n        const silentSampleCount = Math.floor((firstSample.dts - videoFirstPts) / meta.refSampleDuration);\n\n        for (let i = 0; i < silentSampleCount; i++) {\n          const silentSample = {\n            data: silentFrame,\n            datasize: silentFrame.byteLength,\n            dts: firstSample.dts - (i + 1) * meta.refSampleDuration,\n            filtered: 0\n          };\n\n          audioSamples.unshift(silentSample);\n\n          this.filledAudioSamples.push({\n            dts: silentSample.dts,\n            size: silentSample.data.byteLength\n          });\n        }\n      }\n    }\n\n    let gap;\n    const firstDts = audioSamples[0].dts;\n\n    if (this.nextAudioDts) {\n      // step1. 处理samples段之间的丢帧情况\n      // 当发现duration差距大于1帧时进行补帧\n      gap = firstDts - this.nextAudioDts;\n      const absGap = Math.abs(gap);\n\n      if (absGap > meta.refSampleDuration && samplesLen === 1 && this.lastAudioSamplesLen === 1) {\n        meta.refSampleDurationFixed = undefined;\n      }\n\n      if (gap > 2 * meta.refSampleDuration) {\n        if (samplesLen === 1 && this.lastAudioSamplesLen === 1) {\n          // 如果sample的length一直是1，而且一直不符合refSampleDuration，需要动态修改refSampleDuration\n          meta.refSampleDurationFixed = meta.refSampleDurationFixed !== undefined ? meta.refSampleDurationFixed + gap : meta.refSampleDuration + gap;\n        } else {\n          const silentFrameCount = Math.floor(gap / meta.refSampleDuration);\n\n          for (let i = 0; i < silentFrameCount; i++) {\n            const computed = firstDts - (i + 1) * meta.refSampleDuration;\n            const silentSample = Object.assign({}, audioSamples[0], {\n              dts: computed > this.nextAudioDts ? computed : this.nextAudioDts\n            });\n\n            this.filledAudioSamples.push({\n              dts: silentSample.dts,\n              size: silentSample.data.byteLength\n            });\n            this.audioTrack.samples.unshift(silentSample);\n          }\n        }\n      } else if (absGap <= 10 && absGap > 0) {\n        // 当差距比较小的时候将音频帧重定位\n        // console.log('重定位音频帧dts', audioSamples[0].dts, this.nextAudioDts)\n        audioSamples[0].dts = this.nextAudioDts;\n        audioSamples[0].pts = this.nextAudioDts;\n      }\n    }\n    const lastDts = audioSamples[audioSamples.length - 1].dts;\n    const lastSampleDuration = audioSamples.length >= 2 ? lastDts - audioSamples[audioSamples.length - 2].dts : meta.refSampleDuration;\n\n    this.lastAudioSamplesLen = samplesLen;\n    this.nextAudioDts = meta.refSampleDurationFixed ? lastDts + meta.refSampleDurationFixed : lastDts + lastSampleDuration;\n    this.lastAudioDts = lastDts;\n\n    // step3. 修复samples段内部的dts异常问题\n    for (let i = 0, len = audioSamples.length; i < len; i++) {\n      const current = audioSamples[i];\n      const next = audioSamples[i + 1];\n\n      if (!next) {\n        break;\n      }\n\n      const duration = next.dts - current.dts;\n      audioSamples[i].duration = duration;\n      /*\n      if (duration > (2 * meta.refSampleDuration)) {\n        // 两帧之间间隔太大，需要补空白帧\n        /**\n        let silentFrameCount = Math.floor(duration / meta.refSampleDuration)\n        let frameIdx = 0\n         while (frameIdx < silentFrameCount) {\n          const silentSample = {\n            data: silentFrame,\n            datasize: silentFrame.byteLength,\n            dts: current.dts + (frameIdx + 1) * meta.refSampleDuration,\n            filtered: 0,\n            isSilent: true\n          }\n           audioSamples.splice(i, 0, silentSample)\n           this.filledAudioSamples.push({\n            dts: silentSample.dts,\n            size: silentSample.data.byteLength\n          })\n           frameIdx++\n          i++ // 不对静音帧做比较\n        }\n      } */\n    }\n\n    this.audioTrack.samples = Compatibility.sortAudioSamples(audioSamples);\n  }\n\n  getFirstSample() {\n    // 获取video和audio的首帧数据\n    let { samples: videoSamples } = this.videoTrack;\n    let { samples: audioSamples } = this.audioTrack;\n\n    let isFirstVideoSamples = false;\n    let isFirstAudioSamples = false;\n\n    if (!this._firstVideoSample && videoSamples.length) {\n      this._firstVideoSample = Compatibility.findFirstVideoSample(videoSamples);\n      isFirstVideoSamples = true;\n    }\n\n    if (!this._firstAudioSample && audioSamples.length) {\n      this._firstAudioSample = Compatibility.findFirstAudioSample(audioSamples); // 寻找dts最小的帧作为首个音频帧\n      isFirstAudioSamples = true;\n    }\n\n    return {\n      isFirstVideoSamples,\n      isFirstAudioSamples\n    };\n  }\n\n  /**\n   * 在没有refSampleDuration的问题流中，\n   */\n  fixRefSampleDuration(meta, samples) {\n    const isVideo = meta.type === 'video';\n    const allSamplesCount = isVideo ? this.allVideoSamplesCount : this.allAudioSamplesCount;\n    const firstDts = isVideo ? this._firstVideoSample.dts : this._firstAudioSample.dts;\n    const filledSamplesCount = isVideo ? this.filledVideoSamples.length : this.filledAudioSamples.length;\n\n    if (!meta.refSampleDuration || meta.refSampleDuration <= 0 || Number.isNaN(meta.refSampleDuration)) {\n      if (samples.length >= 1) {\n        const lastDts = samples[samples.length - 1].dts;\n\n        meta.refSampleDuration = Math.floor((lastDts - firstDts) / (allSamplesCount + filledSamplesCount - 1)); // 将refSampleDuration重置为计算后的平均值\n      }\n    } else if (meta.refSampleDuration) {\n      if (samples.length >= 3) {\n        const lastDts = samples[samples.length - 1].dts;\n        const firstDts = samples[0].dts;\n        const durationAvg = (lastDts - firstDts) / samples.length;\n\n        meta.refSampleDuration = Math.abs(meta.refSampleDuration - durationAvg) <= meta.refSampleDuration ? meta.refSampleDuration : durationAvg; // 将refSampleDuration重置为计算后的平均值\n      }\n    }\n  }\n\n  /**\n   * 记录截止目前一共播放了多少帧\n   */\n  recordSamplesCount() {\n    const { audioTrack, videoTrack } = this;\n\n    this.allAudioSamplesCount += audioTrack.samples.length;\n    this.allVideoSamplesCount += videoTrack.samples.length;\n  }\n\n  /**\n   * 去除不合法的帧（倒退、重复帧）\n   */\n  removeInvalidSamples() {\n    const { _firstVideoSample, _firstAudioSample } = this;\n\n    this.audioTrack.samples = this.audioTrack.samples.filter(sample => {\n      return sample.dts >= _firstAudioSample.dts && (this.lastAudioDts === undefined || sample.dts > this.lastAudioDts);\n    });\n\n    this.videoTrack.samples = this.videoTrack.samples.filter(sample => {\n      return sample.dts >= _firstVideoSample.dts && (this.lastVideoDts === undefined || sample.dts > this.lastVideoDts);\n    });\n  }\n\n  static sortAudioSamples(samples) {\n    if (samples.length === 1) {\n      return samples;\n    }\n\n    return samples.sort((a, b) => {\n      return a.dts - b.dts;\n    });\n  }\n\n  /**\n   * 寻找dts最小的sample\n   * @param samples\n   */\n  static findFirstAudioSample(samples) {\n    if (!samples || samples.length === 0) {\n      return null;\n    }\n\n    return Compatibility.sortAudioSamples(samples)[0];\n  }\n\n  static findFirstVideoSample(samples) {\n    if (!samples.length) {\n      return null;\n    }\n\n    const sorted = samples.sort((a, b) => {\n      return a.dts - b.dts;\n    });\n\n    for (let i = 0, len = sorted.length; i < len; i++) {\n      if (sorted[i].isKeyframe) {\n        return sorted[i];\n      }\n    }\n  }\n\n  get tracks() {\n    return this._context.getInstance('TRACKS');\n  }\n\n  get audioTrack() {\n    if (this.tracks) {\n      return this.tracks.audioTrack;\n    }\n    return null;\n  }\n\n  get videoTrack() {\n    if (this.tracks) {\n      return this.tracks.videoTrack;\n    }\n    return null;\n  }\n}\nexports.default = Compatibility;\n\n//# sourceURL=webpack://xgplayer-flv/../xgplayer-codec/src/compatibility.js?")},"../xgplayer-codec/src/h264/nalunit/golomb.js":
/*!****************************************************!*\
      !*** ../xgplayer-codec/src/h264/nalunit/golomb.js ***!
      \****************************************************/
/*! no static exports found */function(module,exports,__webpack_require__){eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nclass Golomb {\n  constructor(uint8array) {\n    this.TAG = 'Golomb';\n    this._buffer = uint8array;\n    this._bufferIndex = 0;\n    this._totalBytes = uint8array.byteLength;\n    this._totalBits = uint8array.byteLength * 8;\n    this._currentWord = 0;\n    this._currentWordBitsLeft = 0;\n  }\n\n  destroy() {\n    this._buffer = null;\n  }\n\n  _fillCurrentWord() {\n    let bufferBytesLeft = this._totalBytes - this._bufferIndex;\n    if (bufferBytesLeft <= 0) {\n      // TODO 异常处理\n    }\n\n    let bytesRead = Math.min(4, bufferBytesLeft);\n    let word = new Uint8Array(4);\n    word.set(this._buffer.subarray(this._bufferIndex, this._bufferIndex + bytesRead));\n    this._currentWord = new DataView(word.buffer).getUint32(0, false);\n\n    this._bufferIndex += bytesRead;\n    this._currentWordBitsLeft = bytesRead * 8;\n  }\n\n  readBits(bits) {\n    if (bits > 32) {\n      // TODO\n    }\n\n    if (bits <= this._currentWordBitsLeft) {\n      let result = this._currentWord >>> 32 - bits;\n      this._currentWord <<= bits;\n      this._currentWordBitsLeft -= bits;\n      return result;\n    }\n\n    let result = this._currentWordBitsLeft ? this._currentWord : 0;\n    // eslint-disable-next-line\n    result >>> 32 - this._currentWordBitsLeft;\n    let bitsNeedLeft = bits - this._currentWordBitsLeft;\n\n    this._fillCurrentWord();\n    let bitsReadNext = Math.min(bitsNeedLeft, this._currentWordBitsLeft);\n\n    let result2 = this._currentWord >>> 32 - bitsReadNext;\n    this._currentWord <<= bitsReadNext;\n    this._currentWordBitsLeft -= bitsReadNext;\n\n    result = result << bitsReadNext | result2;\n    return result;\n  }\n\n  readBool() {\n    return this.readBits(1) === 1;\n  }\n\n  readByte() {\n    return this.readBits(8);\n  }\n\n  _skipLeadingZero() {\n    let zeroCount;\n    for (zeroCount = 0; zeroCount < this._currentWordBitsLeft; zeroCount++) {\n      if ((this._currentWord & 0x80000000 >>> zeroCount) !== 0) {\n        this._currentWord <<= zeroCount;\n        this._currentWordBitsLeft -= zeroCount;\n        return zeroCount;\n      }\n    }\n    this._fillCurrentWord();\n    return zeroCount + this._skipLeadingZero();\n  }\n\n  readUEG() {\n    // unsigned exponential golomb\n    let leadingZeros = this._skipLeadingZero();\n    return this.readBits(leadingZeros + 1) - 1;\n  }\n\n  readSEG() {\n    // signed exponential golomb\n    let value = this.readUEG();\n    if (value & 0x01) {\n      return value + 1 >>> 1;\n    } else {\n      return -1 * (value >>> 1);\n    }\n  }\n}\n\nexports.default = Golomb;\n\n//# sourceURL=webpack://xgplayer-flv/../xgplayer-codec/src/h264/nalunit/golomb.js?")},"../xgplayer-codec/src/h264/nalunit/index.js":
/*!***************************************************!*\
      !*** ../xgplayer-codec/src/h264/nalunit/index.js ***!
      \***************************************************/
/*! no static exports found */function(module,exports,__webpack_require__){eval('\n\nObject.defineProperty(exports, "__esModule", {\n  value: true\n});\n\nvar _sps = __webpack_require__(/*! ./sps */ "../xgplayer-codec/src/h264/nalunit/sps.js");\n\nvar _sps2 = _interopRequireDefault(_sps);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nclass Nalunit {\n  static getNalunits(buffer) {\n    if (buffer.length - buffer.position < 4) {\n      return [];\n    }\n\n    let buf = buffer.dataview;\n    let position = buffer.position;\n    if (buf.getInt32(position) === 1 || buf.getInt16(position) === 0 && buf.getInt8(position + 2) === 1) {\n      return Nalunit.getAnnexbNals(buffer);\n    } else {\n      return Nalunit.getAvccNals(buffer);\n    }\n  }\n\n  static getAnnexbNals(buffer) {\n    let nals = [];\n    let position = Nalunit.getHeaderPositionAnnexB(buffer);\n    let start = position.pos;\n    let end = start;\n    while (start < buffer.length - 4) {\n      let header = buffer.buffer.slice(start, start + position.headerLength);\n      if (position.pos === buffer.position) {\n        buffer.skip(position.headerLength);\n      }\n      position = Nalunit.getHeaderPositionAnnexB(buffer);\n      end = position.pos;\n      let body = new Uint8Array(buffer.buffer.slice(start + header.byteLength, end));\n      let unit = { header, body };\n      Nalunit.analyseNal(unit);\n      nals.push(unit);\n      buffer.skip(end - buffer.position);\n      start = end;\n    }\n    return nals;\n  }\n\n  static getAvccNals(buffer) {\n    let nals = [];\n    while (buffer.position < buffer.length - 4) {\n      let length = buffer.dataview.getInt32(buffer.position);\n      if (buffer.length - buffer.position >= length) {\n        let header = buffer.buffer.slice(buffer.position, buffer.position + 4);\n        buffer.skip(4);\n        let body = buffer.buffer.slice(buffer.position, buffer.position + length);\n        buffer.skip(length);\n        let unit = { header, body };\n        Nalunit.analyseNal(unit);\n        nals.push(unit);\n      } else {\n        break;\n      }\n    }\n    return nals;\n  }\n\n  static analyseNal(unit) {\n    let type = unit.body[0] & 0x1f;\n    switch (type) {\n      case 1:\n        // NDR\n        unit.ndr = true;\n        break;\n      case 5:\n        // IDR\n        unit.idr = true;\n        break;\n      case 6:\n        // SEI\n        break;\n      case 7:\n        // SPS\n        unit.sps = _sps2.default.parseSPS(unit.body);\n        break;\n      case 8:\n        // PPS\n        unit.pps = true;\n        break;\n      case 9:\n        // AUD\n        break;\n      default:\n        break;\n    }\n  }\n\n  static getHeaderPositionAnnexB(buffer) {\n    // seperate\n    let pos = buffer.position;\n    let headerLength = 0;\n    while (headerLength !== 3 && headerLength !== 4 && pos < buffer.length - 4) {\n      if (buffer.dataview.getInt16(pos) === 0) {\n        if (buffer.dataview.getInt16(pos + 2) === 1) {\n          // 0x000001\n          headerLength = 4;\n        } else if (buffer.dataview.getInt8(pos + 2) === 1) {\n          headerLength = 3;\n        } else {\n          pos++;\n        }\n      } else {\n        pos++;\n      }\n    }\n\n    if (pos === buffer.length - 4) {\n      if (buffer.dataview.getInt16(pos) === 0) {\n        if (buffer.dataview.getInt16(pos + 2) === 1) {\n          // 0x000001\n          headerLength = 4;\n        }\n      } else {\n        pos++;\n        if (buffer.dataview.getInt16(pos) === 0 && buffer.dataview.getInt8(pos) === 1) {\n          // 0x0000001\n          headerLength = 3;\n        } else {\n          pos = buffer.length;\n        }\n      }\n    }\n    return { pos, headerLength };\n  }\n\n  static getAvcc(sps, pps) {\n    let ret = new Uint8Array(sps.byteLength + pps.byteLength + 11);\n    ret[0] = 0x01;\n    ret[1] = sps[1];\n    ret[2] = sps[2];\n    ret[3] = sps[3];\n    ret[4] = 255;\n    ret[5] = 225;\n\n    let offset = 6;\n\n    ret.set(new Uint8Array([sps.byteLength >>> 8 & 0xff, sps.byteLength & 0xff]), offset);\n    offset += 2;\n    ret.set(sps, offset);\n    offset += sps.byteLength;\n\n    ret[offset] = 1;\n    offset++;\n\n    ret.set(new Uint8Array([pps.byteLength >>> 8 & 0xff, pps.byteLength & 0xff]), offset);\n    offset += 2;\n    ret.set(pps, offset);\n    return ret;\n  }\n}\n\nexports.default = Nalunit;\n\n//# sourceURL=webpack://xgplayer-flv/../xgplayer-codec/src/h264/nalunit/index.js?')},"../xgplayer-codec/src/h264/nalunit/sps.js":
/*!*************************************************!*\
      !*** ../xgplayer-codec/src/h264/nalunit/sps.js ***!
      \*************************************************/
/*! no static exports found */function(module,exports,__webpack_require__){eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _golomb = __webpack_require__(/*! ./golomb */ \"../xgplayer-codec/src/h264/nalunit/golomb.js\");\n\nvar _golomb2 = _interopRequireDefault(_golomb);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nclass SPSParser {\n  static _ebsp2rbsp(uint8array) {\n    let src = uint8array;\n    let srcLength = src.byteLength;\n    let dst = new Uint8Array(srcLength);\n    let dstIdx = 0;\n\n    for (let i = 0; i < srcLength; i++) {\n      if (i >= 2) {\n        if (src[i] === 0x03 && src[i - 1] === 0x00 && src[i - 2] === 0x00) {\n          continue;\n        }\n      }\n      dst[dstIdx] = src[i];\n      dstIdx++;\n    }\n\n    return new Uint8Array(dst.buffer, 0, dstIdx);\n  }\n\n  static parseSPS(uint8array) {\n    let rbsp = SPSParser._ebsp2rbsp(uint8array);\n    let gb = new _golomb2.default(rbsp);\n\n    gb.readByte();\n    let profileIdc = gb.readByte();\n    gb.readByte();\n    let levelIdc = gb.readByte();\n    gb.readUEG();\n\n    let profile_string = SPSParser.getProfileString(profileIdc);\n    let level_string = SPSParser.getLevelString(levelIdc);\n    let chroma_format_idc = 1;\n    let chroma_format = 420;\n    let chroma_format_table = [0, 420, 422, 444];\n    let bit_depth = 8;\n\n    if (profileIdc === 100 || profileIdc === 110 || profileIdc === 122 || profileIdc === 244 || profileIdc === 44 || profileIdc === 83 || profileIdc === 86 || profileIdc === 118 || profileIdc === 128 || profileIdc === 138 || profileIdc === 144) {\n      chroma_format_idc = gb.readUEG();\n      if (chroma_format_idc === 3) {\n        gb.readBits(1);\n      }\n      if (chroma_format_idc <= 3) {\n        chroma_format = chroma_format_table[chroma_format_idc];\n      }\n\n      bit_depth = gb.readUEG() + 8;\n      gb.readUEG();\n      gb.readBits(1);\n      if (gb.readBool()) {\n        let scaling_list_count = chroma_format_idc !== 3 ? 8 : 12;\n        for (let i = 0; i < scaling_list_count; i++) {\n          if (gb.readBool()) {\n            if (i < 6) {\n              SPSParser._skipScalingList(gb, 16);\n            } else {\n              SPSParser._skipScalingList(gb, 64);\n            }\n          }\n        }\n      }\n    }\n    gb.readUEG();\n    let pic_order_cnt_type = gb.readUEG();\n    if (pic_order_cnt_type === 0) {\n      gb.readUEG();\n    } else if (pic_order_cnt_type === 1) {\n      gb.readBits(1);\n      gb.readSEG();\n      gb.readSEG();\n      let num_ref_frames_in_pic_order_cnt_cycle = gb.readUEG();\n      for (let i = 0; i < num_ref_frames_in_pic_order_cnt_cycle; i++) {\n        gb.readSEG();\n      }\n    }\n    gb.readUEG();\n    gb.readBits(1);\n\n    let pic_width_in_mbs_minus1 = gb.readUEG();\n    let pic_height_in_map_units_minus1 = gb.readUEG();\n\n    let frame_mbs_only_flag = gb.readBits(1);\n    if (frame_mbs_only_flag === 0) {\n      gb.readBits(1);\n    }\n    gb.readBits(1);\n\n    let frame_crop_left_offset = 0;\n    let frame_crop_right_offset = 0;\n    let frame_crop_top_offset = 0;\n    let frame_crop_bottom_offset = 0;\n\n    let frame_cropping_flag = gb.readBool();\n    if (frame_cropping_flag) {\n      frame_crop_left_offset = gb.readUEG();\n      frame_crop_right_offset = gb.readUEG();\n      frame_crop_top_offset = gb.readUEG();\n      frame_crop_bottom_offset = gb.readUEG();\n    }\n\n    let par_width = 1,\n        par_height = 1;\n    let fps = 0,\n        fps_fixed = true,\n        fps_num = 0,\n        fps_den = 0;\n\n    let vui_parameters_present_flag = gb.readBool();\n    if (vui_parameters_present_flag) {\n      if (gb.readBool()) {\n        // aspect_ratio_info_present_flag\n        let aspect_ratio_idc = gb.readByte();\n        let par_w_table = [1, 12, 10, 16, 40, 24, 20, 32, 80, 18, 15, 64, 160, 4, 3, 2];\n        let par_h_table = [1, 11, 11, 11, 33, 11, 11, 11, 33, 11, 11, 33, 99, 3, 2, 1];\n\n        if (aspect_ratio_idc > 0 && aspect_ratio_idc < 16) {\n          par_width = par_w_table[aspect_ratio_idc - 1];\n          par_height = par_h_table[aspect_ratio_idc - 1];\n        } else if (aspect_ratio_idc === 255) {\n          par_width = gb.readByte() << 8 | gb.readByte();\n          par_height = gb.readByte() << 8 | gb.readByte();\n        }\n      }\n\n      if (gb.readBool()) {\n        gb.readBool();\n      }\n      if (gb.readBool()) {\n        gb.readBits(4);\n        if (gb.readBool()) {\n          gb.readBits(24);\n        }\n      }\n      if (gb.readBool()) {\n        gb.readUEG();\n        gb.readUEG();\n      }\n      if (gb.readBool()) {\n        let num_units_in_tick = gb.readBits(32);\n        let time_scale = gb.readBits(32);\n        fps_fixed = gb.readBool();\n\n        fps_num = time_scale;\n        fps_den = num_units_in_tick * 2;\n        fps = fps_num / fps_den;\n      }\n    }\n\n    let parScale = 1;\n    if (par_width !== 1 || par_height !== 1) {\n      parScale = par_width / par_height;\n    }\n\n    let crop_unit_x = 0,\n        crop_unit_y = 0;\n    if (chroma_format_idc === 0) {\n      crop_unit_x = 1;\n      crop_unit_y = 2 - frame_mbs_only_flag;\n    } else {\n      let sub_wc = chroma_format_idc === 3 ? 1 : 2;\n      let sub_hc = chroma_format_idc === 1 ? 2 : 1;\n      crop_unit_x = sub_wc;\n      crop_unit_y = sub_hc * (2 - frame_mbs_only_flag);\n    }\n\n    let codec_width = (pic_width_in_mbs_minus1 + 1) * 16;\n    let codec_height = (2 - frame_mbs_only_flag) * ((pic_height_in_map_units_minus1 + 1) * 16);\n\n    codec_width -= (frame_crop_left_offset + frame_crop_right_offset) * crop_unit_x;\n    codec_height -= (frame_crop_top_offset + frame_crop_bottom_offset) * crop_unit_y;\n\n    let present_width = Math.ceil(codec_width * parScale);\n\n    gb.destroy();\n    gb = null;\n\n    return {\n      profile_string: profile_string,\n      level_string: level_string,\n      bit_depth: bit_depth,\n      chroma_format: chroma_format,\n      chroma_format_string: SPSParser.getChromaFormatString(chroma_format),\n\n      frame_rate: {\n        fixed: fps_fixed,\n        fps: fps,\n        fps_den: fps_den,\n        fps_num: fps_num\n      },\n\n      par_ratio: {\n        width: par_width,\n        height: par_height\n      },\n\n      codec_size: {\n        width: codec_width,\n        height: codec_height\n      },\n\n      present_size: {\n        width: present_width,\n        height: codec_height\n      }\n    };\n  }\n\n  static _skipScalingList(gb, count) {\n    let last_scale = 8,\n        next_scale = 8;\n    let delta_scale = 0;\n    for (let i = 0; i < count; i++) {\n      if (next_scale !== 0) {\n        delta_scale = gb.readSEG();\n        next_scale = (last_scale + delta_scale + 256) % 256;\n      }\n      last_scale = next_scale === 0 ? last_scale : next_scale;\n    }\n  }\n\n  static getProfileString(profileIdc) {\n    switch (profileIdc) {\n      case 66:\n        return 'Baseline';\n      case 77:\n        return 'Main';\n      case 88:\n        return 'Extended';\n      case 100:\n        return 'High';\n      case 110:\n        return 'High10';\n      case 122:\n        return 'High422';\n      case 244:\n        return 'High444';\n      default:\n        return 'Unknown';\n    }\n  }\n\n  static getLevelString(levelIdc) {\n    return (levelIdc / 10).toFixed(1);\n  }\n\n  static getChromaFormatString(chroma) {\n    switch (chroma) {\n      case 420:\n        return '4:2:0';\n      case 422:\n        return '4:2:2';\n      case 444:\n        return '4:4:4';\n      default:\n        return 'Unknown';\n    }\n  }\n\n  static toVideoMeta(spsConfig) {\n    let meta = {};\n    if (spsConfig && spsConfig.codec_size) {\n      meta.codecWidth = spsConfig.codec_size.width;\n      meta.codecHeight = spsConfig.codec_size.height;\n      meta.presentWidth = spsConfig.present_size.width;\n      meta.presentHeight = spsConfig.present_size.height;\n    }\n\n    meta.profile = spsConfig.profile_string;\n    meta.level = spsConfig.level_string;\n    meta.bitDepth = spsConfig.bit_depth;\n    meta.chromaFormat = spsConfig.chroma_format;\n\n    meta.parRatio = {\n      width: spsConfig.par_ratio.width,\n      height: spsConfig.par_ratio.height\n    };\n\n    meta.frameRate = spsConfig.frame_rate;\n\n    let fpsDen = meta.frameRate.fps_den;\n    let fpsNum = meta.frameRate.fps_num;\n    meta.refSampleDuration = Math.floor(meta.timescale * (fpsDen / fpsNum));\n  }\n} /* eslint-disable camelcase  */\n/* eslint-disable one-var  */\nexports.default = SPSParser;\n\n//# sourceURL=webpack://xgplayer-flv/../xgplayer-codec/src/h264/nalunit/sps.js?")},"../xgplayer-demux/index.js":
/*!**********************************!*\
      !*** ../xgplayer-demux/index.js ***!
      \**********************************/
/*! no static exports found */function(module,exports,__webpack_require__){eval('\n\nmodule.exports = {\n  // HLS\n  M3U8Parser: __webpack_require__(/*! ./src/hls/demuxer/m3u8parser */ "../xgplayer-demux/src/hls/demuxer/m3u8parser.js").default,\n  TsDemuxer: __webpack_require__(/*! ./src/hls/demuxer/ts */ "../xgplayer-demux/src/hls/demuxer/ts.js").default,\n  Playlist: __webpack_require__(/*! ./src/hls/playlist */ "../xgplayer-demux/src/hls/playlist.js").default,\n  FlvDemuxer: __webpack_require__(/*! ./src/flv/index */ "../xgplayer-demux/src/flv/index.js").default\n};\n\n//# sourceURL=webpack://xgplayer-flv/../xgplayer-demux/index.js?')},"../xgplayer-demux/src/flv/amf-parser.js":
/*!***********************************************!*\
      !*** ../xgplayer-demux/src/flv/amf-parser.js ***!
      \***********************************************/
/*! no static exports found */function(module,exports,__webpack_require__){eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _xgplayerUtils = __webpack_require__(/*! xgplayer-utils */ \"../xgplayer-utils/index.js\");\n\nconst DATA_TYPES = {\n  NUMBER: 0,\n  BOOLEAN: 1,\n  STRING: 2,\n  OBJECT: 3,\n  MIX_ARRAY: 8,\n  OBJECT_END: 9,\n  STRICT_ARRAY: 10,\n  DATE: 11,\n  LONE_STRING: 12\n\n  /**\n   * meta信息解析\n   */\n};class AMFParser {\n  constructor() {\n    this.offset = 0;\n    this.readOffset = this.offset;\n  }\n\n  resolve(meta, size) {\n    if (size < 3) {\n      throw new Error('not enough data for metainfo');\n    }\n    const metaData = {};\n    const name = this.parseValue(meta);\n    const value = this.parseValue(meta, size - name.bodySize);\n    metaData[name.data] = value.data;\n\n    this.resetStatus();\n    return metaData;\n  }\n\n  resetStatus() {\n    this.offset = 0;\n    this.readOffset = this.offset;\n  }\n\n  parseString(buffer) {\n    const dv = new DataView(buffer, this.readOffset);\n    const strLen = dv.getUint16(0, !_xgplayerUtils.isLe);\n    let str = '';\n    if (strLen > 0) {\n      str = _xgplayerUtils.UTF8.decode(new Uint8Array(buffer, this.readOffset + 2, strLen));\n    } else {\n      str = '';\n    }\n    let size = strLen + 2;\n    this.readOffset += size;\n    return {\n      data: str,\n      bodySize: strLen + 2\n    };\n  }\n\n  parseDate(buffer, size) {\n    const dv = new DataView(buffer, this.readOffset, size);\n    let ts = dv.getFloat64(0, !_xgplayerUtils.isLe);\n    const timeOffset = dv.getInt16(8, !_xgplayerUtils.isLe);\n    ts += timeOffset * 60 * 1000;\n\n    this.readOffset += 10;\n    return {\n      data: new Date(ts),\n      bodySize: 10\n    };\n  }\n\n  parseObject(buffer, size) {\n    const name = this.parseString(buffer, size);\n    const value = this.parseValue(buffer, size - name.bodySize);\n    return {\n      data: {\n        name: name.data,\n        value: value.data\n      },\n      bodySize: name.bodySize + value.bodySize,\n      isObjEnd: value.isObjEnd\n    };\n  }\n\n  parseLongString(buffer) {\n    const dv = new DataView(buffer, this.readOffset);\n    const strLen = dv.getUint32(0, !_xgplayerUtils.isLe);\n    let str = '';\n    if (strLen > 0) {\n      str = _xgplayerUtils.UTF8.decode(new Uint8Array(buffer, this.readOffset + 2, strLen));\n    } else {\n      str = '';\n    }\n    // const size = strLen + 4;\n    this.readOffset += strLen + 4;\n    return {\n      data: str,\n      bodySize: strLen + 4\n    };\n  }\n\n  /**\n   * 解析meta中的变量\n   */\n  parseValue(data, size) {\n    let buffer = new ArrayBuffer();\n    if (data instanceof ArrayBuffer) {\n      buffer = data;\n    } else {\n      buffer = data.buffer;\n    }\n    const {\n      NUMBER,\n      BOOLEAN,\n      STRING,\n      OBJECT,\n      MIX_ARRAY,\n      OBJECT_END,\n      STRICT_ARRAY,\n      DATE,\n      LONE_STRING\n    } = DATA_TYPES;\n    const dataView = new DataView(buffer, this.readOffset, size);\n    let isObjEnd = false;\n    const type = dataView.getUint8(0);\n    let offset = 1;\n    this.readOffset += 1;\n    let value = null;\n\n    switch (type) {\n      case NUMBER:\n        {\n          value = dataView.getFloat64(1, !_xgplayerUtils.isLe);\n          this.readOffset += 8;\n          offset += 8;\n          break;\n        }\n      case BOOLEAN:\n        {\n          const boolNum = dataView.getUint8(1);\n          value = !!boolNum;\n          this.readOffset += 1;\n          offset += 1;\n          break;\n        }\n      case STRING:\n        {\n          const str = this.parseString(buffer);\n          value = str.data;\n          offset += str.bodySize;\n          break;\n        }\n      case OBJECT:\n        {\n          value = {};\n          let objEndSize = 0;\n          if (dataView.getUint32(size - 4, !_xgplayerUtils.isLe) & 0x00FFFFFF) {\n            objEndSize = 3;\n          }\n          // this.readOffset += offset - 1;\n          while (offset < size - 4) {\n            const amfObj = this.parseObject(buffer, size - offset - objEndSize);\n            if (amfObj.isObjectEnd) {\n              break;\n            }\n            value[amfObj.data.name] = amfObj.data.value;\n            offset += amfObj.bodySize;\n          }\n          if (offset <= size - 3) {\n            const mark = dataView.getUint32(offset - 1, !_xgplayerUtils.isLe) & 0x00FFFFFF;\n            if (mark === 9) {\n              this.readOffset += 3;\n              offset += 3;\n            }\n          }\n          break;\n        }\n      case MIX_ARRAY:\n        {\n          value = {};\n          offset += 4;\n          this.readOffset += 4;\n          let objEndSize = 0;\n          if ((dataView.getUint32(size - 4, !_xgplayerUtils.isLe) & 0x00FFFFFF) === 9) {\n            objEndSize = 3;\n          }\n\n          while (offset < size - 8) {\n            const amfVar = this.parseObject(buffer, size - offset - objEndSize);\n            if (amfVar.isObjectEnd) {\n              break;\n            }\n            value[amfVar.data.name] = amfVar.data.value;\n            offset += amfVar.bodySize;\n          }\n          if (offset <= size - 3) {\n            const marker = dataView.getUint32(offset - 1, !_xgplayerUtils.isLe) & 0x00FFFFFF;\n            if (marker === 9) {\n              offset += 3;\n              this.readOffset += 3;\n            }\n          }\n          break;\n        }\n\n      case OBJECT_END:\n        {\n          value = null;\n          isObjEnd = true;\n          break;\n        }\n\n      case STRICT_ARRAY:\n        {\n          value = [];\n          const arrLength = dataView.getUint32(1, !_xgplayerUtils.isLe);\n          offset += 4;\n          this.readOffset += 4;\n          for (let i = 0; i < arrLength; i++) {\n            const script = this.parseValue(buffer, size - offset);\n            value.push(script.data);\n            offset += script.bodySize;\n          }\n          break;\n        }\n\n      case DATE:\n        {\n          const date = this.parseDate(buffer, size - 1);\n          value = date.data;\n          offset += date.bodySize;\n          break;\n        }\n\n      case LONE_STRING:\n        {\n          const longStr = this.parseLongString(buffer, size - 1);\n          value = longStr.data;\n          offset += longStr.bodySize;\n          break;\n        }\n\n      default:\n        {\n          offset = size;\n        }\n    }\n\n    return {\n      data: value,\n      bodySize: offset,\n      isObjEnd: isObjEnd\n    };\n  }\n}\nexports.default = AMFParser;\n\n//# sourceURL=webpack://xgplayer-flv/../xgplayer-demux/src/flv/amf-parser.js?")},"../xgplayer-demux/src/flv/index.js":
/*!******************************************!*\
      !*** ../xgplayer-demux/src/flv/index.js ***!
      \******************************************/
/*! no static exports found */function(module,exports,__webpack_require__){eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _xgplayerUtils = __webpack_require__(/*! xgplayer-utils */ \"../xgplayer-utils/index.js\");\n\nvar _xgplayerCodec = __webpack_require__(/*! xgplayer-codec */ \"../xgplayer-codec/index.js\");\n\nvar _xgplayerBuffer = __webpack_require__(/*! xgplayer-buffer */ \"../xgplayer-buffer/index.js\");\n\nvar _amfParser = __webpack_require__(/*! ./amf-parser */ \"../xgplayer-demux/src/flv/amf-parser.js\");\n\nvar _amfParser2 = _interopRequireDefault(_amfParser);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst DEMUX_EVENTS = _xgplayerUtils.EVENTS.DEMUX_EVENTS;\n\nclass FlvDemuxer {\n  constructor() {\n    this._firstFragmentLoaded = false;\n    this._trackNum = 0;\n    this._hasScript = false;\n  }\n\n  init() {\n    this.on(DEMUX_EVENTS.DEMUX_START, this.doParseFlv.bind(this));\n  }\n\n  /**\n   * if the flv head is valid\n   * @param data\n   * @returns {boolean}\n   */\n  static isFlvFile(data) {\n    return !(data[0] !== 0x46 || data[1] !== 0x4C || data[2] !== 0x56 || data[3] !== 0x01);\n  }\n\n  /**\n   * If the stream has audio or video.\n   * @param {number} streamFlag - Data from the stream which is define whether the audio / video track is exist.\n   */\n  static getPlayType(streamFlag) {\n    const result = {\n      hasVideo: false,\n      hasAudio: false\n    };\n\n    if (streamFlag & 0x01 > 0) {\n      result.hasVideo = true;\n    }\n\n    if (streamFlag & 0x04 > 0) {\n      result.hasAudio = true;\n    }\n\n    return result;\n  }\n\n  doParseFlv() {\n    if (!this._firstFragmentLoaded) {\n      if (this.loaderBuffer.length < 13) {\n        return;\n      }\n      const header = this.loaderBuffer.shift(13);\n      this.parseFlvHeader(header);\n      this.doParseFlv(); // 递归调用，继续解析flv流\n    } else {\n      if (this.loaderBuffer.length < 11) {\n        return;\n      }\n      let chunk;\n      do {\n        chunk = this._parseFlvTag();\n      } while (chunk);\n\n      this.emit(DEMUX_EVENTS.DEMUX_COMPLETE);\n    }\n  }\n\n  parseFlvHeader(header) {\n    if (!FlvDemuxer.isFlvFile(header)) {\n      this.emit(DEMUX_EVENTS.DEMUX_ERROR, new Error('invalid flv file'));\n      this.doParseFlv();\n    } else {\n      this._firstFragmentLoaded = true;\n      const playType = FlvDemuxer.getPlayType(header[4]);\n\n      if (playType.hasVideo) {\n        this.initVideoTrack();\n      }\n\n      if (playType.hasAudio) {\n        this.initAudioTrack();\n      }\n    }\n    this.doParseFlv();\n  }\n\n  /**\n   * init default video track configs\n   */\n  initVideoTrack() {\n    this._trackNum++;\n    let videoTrack = new _xgplayerBuffer.VideoTrack();\n    videoTrack.meta = new _xgplayerUtils.VideoTrackMeta();\n    videoTrack.id = videoTrack.meta.id = this._trackNum;\n\n    this.tracks.videoTrack = videoTrack;\n  }\n\n  /**\n   * init default audio track configs\n   */\n  initAudioTrack() {\n    this._trackNum++;\n    let audioTrack = new _xgplayerBuffer.AudioTrack();\n    audioTrack.meta = new _xgplayerUtils.AudioTrackMeta();\n    audioTrack.id = audioTrack.meta.id = this._trackNum;\n\n    this.tracks.audioTrack = audioTrack;\n  }\n\n  /**\n   * Package the data as the following data structure\n   * {\n   *    data: Uint8Array. the Stream data.\n   *    info: The first byte info of the Tag.\n   *    tagType: 8、9、18\n   *    timeStamp: the timestemp\n   * }\n   */\n  _parseFlvTag() {\n    if (this.loaderBuffer.length < 11) {\n      return null;\n    }\n    let chunk = this._parseFlvTagHeader();\n    if (chunk) {\n      this._processChunk(chunk);\n    }\n    return chunk;\n  }\n\n  /**\n   * Parse the 11 byte tag Header\n   */\n  _parseFlvTagHeader() {\n    let offset = 0;\n    let chunk = {};\n\n    let tagType = this.loaderBuffer.toInt(offset, 1);\n    offset += 1;\n\n    // 2 bit FMS reserved, 1 bit filtered, 5 bit tag type\n    chunk.filtered = (tagType & 32) >>> 5;\n    chunk.tagType = tagType & 31;\n\n    // 3 Byte datasize\n    chunk.datasize = this.loaderBuffer.toInt(offset, 3);\n    offset += 3;\n\n    if (chunk.tagType !== 8 && chunk.tagType !== 9 && chunk.tagType !== 11 && chunk.tagType !== 18 || this.loaderBuffer.toInt(8, 3) !== 0) {\n      if (this.loaderBuffer && this.loaderBuffer.length > 0) {\n        this.loaderBuffer.shift(1);\n      }\n      this.logger.warn(this.TAG, 'tagType ' + chunk.tagType);\n      return null;\n    }\n\n    if (this.loaderBuffer.length < chunk.datasize + 15) {\n      return null;\n    }\n\n    // read the data.\n    this.loaderBuffer.shift(4);\n\n    // 3 Byte timestamp\n    let timestamp = this.loaderBuffer.toInt(0, 3);\n    this.loaderBuffer.shift(3);\n\n    // 1 Byte timestampExt\n    let timestampExt = this.loaderBuffer.shift(1)[0];\n    if (timestampExt > 0) {\n      timestamp += timestampExt * 0x1000000;\n    }\n\n    chunk.dts = timestamp;\n\n    // streamId\n    this.loaderBuffer.shift(3);\n    return chunk;\n  }\n\n  _processChunk(chunk) {\n    switch (chunk.tagType) {\n      case 18:\n        this._parseScriptData(chunk);\n        break;\n      case 8:\n        this._parseAACData(chunk);\n        break;\n      case 9:\n        this._parseHevcData(chunk);\n        break;\n      case 11:\n        // for some CDN that did not process the currect RTMP messages\n        this.loaderBuffer.shift(3);\n        break;\n      default:\n        this.loaderBuffer.shift(1);\n    }\n  }\n\n  /**\n   * parse flv script data\n   * @param chunk\n   * @private\n   */\n  _parseScriptData(chunk) {\n    let audioTrack = this.tracks.audioTrack;\n    let videoTrack = this.tracks.videoTrack;\n\n    let data = this.loaderBuffer.shift(chunk.datasize);\n\n    const info = new _amfParser2.default().resolve(data, data.length);\n\n    const onMetaData = this._context.onMetaData = info ? info.onMetaData : undefined;\n\n    // fill mediaInfo\n    this._context.mediaInfo.duration = onMetaData.duration;\n    this._context.mediaInfo.hasVideo = onMetaData.hasVideo;\n    this._context.mediaInfo.hsaAudio = onMetaData.hasAudio;\n\n    let validate = this._datasizeValidator(chunk.datasize);\n    if (validate) {\n      this.emit(DEMUX_EVENTS.MEDIA_INFO);\n      this._hasScript = true;\n    }\n\n    // Edit default meta.\n    if (audioTrack && !audioTrack.hasSpecificConfig) {\n      let meta = audioTrack.meta;\n      if (onMetaData.audiosamplerate) {\n        meta.sampleRate = onMetaData.audiosamplerate;\n      }\n\n      if (onMetaData.audiochannels) {\n        meta.channelCount = onMetaData.audiochannels;\n      }\n\n      switch (onMetaData.audiosamplerate) {\n        case 44100:\n          meta.sampleRateIndex = 4;\n          break;\n        case 22050:\n          meta.sampleRateIndex = 7;\n          break;\n        case 11025:\n          meta.sampleRateIndex = 10;\n          break;\n      }\n    }\n    if (videoTrack && !videoTrack.hasSpecificConfig) {\n      let meta = videoTrack.meta;\n      if (typeof onMetaData.framerate === 'number') {\n        let fpsNum = Math.floor(onMetaData.framerate * 1000);\n        if (fpsNum > 0) {\n          let fps = fpsNum / 1000;\n          if (!meta.frameRate) {\n            meta.frameRate = {};\n          }\n          meta.frameRate.fixed = true;\n          meta.frameRate.fps = fps;\n          meta.frameRate.fps_num = fpsNum;\n          meta.frameRate.fps_den = 1000;\n        }\n      }\n    }\n  }\n\n  _aacSequenceHeaderParser(data) {\n    let ret = {};\n    ret.hasSpecificConfig = true;\n    ret.objectType = data[1] >>> 3;\n    ret.sampleRateIndex = (data[1] & 7) << 1 | data[2] >>> 7;\n    ret.audiosamplerate = this._switchAudioSampleRate(ret.sampleRateIndex);\n    ret.channelCount = (data[2] & 120) >>> 3;\n    ret.frameLength = (data[2] & 4) >>> 2;\n    ret.dependsOnCoreCoder = (data[2] & 2) >>> 1;\n    ret.extensionFlagIndex = data[2] & 1;\n\n    ret.codec = `mp4a.40.${ret.objectType}`;\n    let userAgent = window.navigator.userAgent.toLowerCase();\n    let extensionSamplingIndex;\n\n    let config;\n    let samplingIndex = ret.sampleRateIndex;\n\n    if (userAgent.indexOf('firefox') !== -1) {\n      // firefox: use SBR (HE-AAC) if freq less than 24kHz\n      if (ret.sampleRateIndex >= 6) {\n        ret.objectType = 5;\n        config = new Array(4);\n        extensionSamplingIndex = samplingIndex - 3;\n      } else {\n        // use LC-AAC\n        ret.objectType = 2;\n        config = new Array(2);\n        extensionSamplingIndex = samplingIndex;\n      }\n    } else if (userAgent.indexOf('android') !== -1) {\n      // android: always use LC-AAC\n      ret.objectType = 2;\n      config = new Array(2);\n      extensionSamplingIndex = samplingIndex;\n    } else {\n      // for other browsers, e.g. chrome...\n      // Always use HE-AAC to make it easier to switch aac codec profile\n      ret.objectType = 5;\n      extensionSamplingIndex = ret.sampleRateIndex;\n      config = new Array(4);\n\n      if (ret.sampleRateIndex >= 6) {\n        extensionSamplingIndex = ret.sampleRateIndex - 3;\n      } else if (ret.channelCount === 1) {\n        // Mono channel\n        ret.objectType = 2;\n        config = new Array(2);\n        extensionSamplingIndex = ret.sampleRateIndex;\n      }\n    }\n\n    config[0] = ret.objectType << 3;\n    config[0] |= (ret.sampleRateIndex & 0x0F) >>> 1;\n    config[1] = (ret.sampleRateIndex & 0x0F) << 7;\n    config[1] |= (ret.channelCount & 0x0F) << 3;\n    if (ret.objectType === 5) {\n      config[1] |= (extensionSamplingIndex & 0x0F) >>> 1;\n      config[2] = (extensionSamplingIndex & 0x01) << 7;\n      // extended audio object type: force to 2 (LC-AAC)\n      config[2] |= 2 << 2;\n      config[3] = 0;\n    }\n    ret.config = config;\n    return ret;\n  }\n\n  _parseAACData(chunk) {\n    let track = this.tracks.audioTrack;\n    if (!track) {\n      return;\n    }\n\n    let meta = track.meta;\n\n    if (!meta) {\n      meta = new _xgplayerUtils.AudioTrackMeta();\n    }\n\n    let info = this.loaderBuffer.shift(1)[0];\n\n    chunk.data = this.loaderBuffer.shift(chunk.datasize - 1);\n\n    let format = (info & 240) >>> 4;\n\n    track.format = format;\n\n    if (format !== 10) {\n      this.emit(DEMUX_EVENTS.DEMUX_ERROR, new Error(`invalid audio format: ${format}`));\n    }\n\n    if (format === 10 && !this._hasAudioSequence) {\n      meta.sampleRate = this._switchAudioSamplingFrequency(info);\n      meta.sampleRateIndex = (info & 12) >>> 2;\n      meta.frameLenth = (info & 2) >>> 1;\n      meta.channelCount = info & 1;\n      meta.refSampleDuration = Math.floor(1024 / meta.audioSampleRate * meta.timescale);\n    }\n\n    let audioSampleRate = meta.audioSampleRate;\n    let audioSampleRateIndex = meta.sampleRateIndex;\n    let refSampleDuration = meta.refSampleDuration;\n\n    delete chunk.tagType;\n    let validate = this._datasizeValidator(chunk.datasize);\n\n    if (chunk.data[0] === 0) {\n      // AAC Sequence Header\n      let aacHeader = this._aacSequenceHeaderParser(chunk.data);\n      audioSampleRate = aacHeader.audiosamplerate || meta.audioSampleRate;\n      audioSampleRateIndex = aacHeader.sampleRateIndex || meta.sampleRateIndex;\n      refSampleDuration = Math.floor(1024 / audioSampleRate * meta.timescale);\n\n      meta.channelCount = aacHeader.channelCount;\n      meta.sampleRate = audioSampleRate;\n      meta.sampleRateIndex = audioSampleRateIndex;\n      meta.refSampleDuration = refSampleDuration;\n      meta.duration = this._context.mediaInfo.duration * meta.timescale;\n      meta.config = aacHeader.config;\n      meta.objectType = aacHeader.objectType;\n\n      const audioMedia = this._context.mediaInfo.audio;\n\n      // fill audio media info\n      audioMedia.codec = aacHeader.codec;\n      audioMedia.channelCount = aacHeader.channelCount;\n      audioMedia.sampleRate = audioSampleRate;\n      audioMedia.sampleRateIndex = aacHeader.audioSampleRateIndex;\n\n      if (this._hasScript && !this._hasAudioSequence) {\n        this.emit(DEMUX_EVENTS.METADATA_PARSED, 'audio');\n      } else if (this._hasScript && this._hasAudioSequence) {\n        this.emit(DEMUX_EVENTS.AUDIO_METADATA_CHANGE);\n      }\n      ;\n      this._hasAudioSequence = true;\n    } else {\n      chunk.data = chunk.data.slice(1, chunk.data.length);\n      track.samples.push(chunk);\n    }\n    if (!validate) {\n      const error = new Error('TAG length error at ' + chunk.datasize);\n      this.emit(DEMUX_EVENTS.DEMUX_ERROR, error.message);\n      this.logger.warn(this.TAG, error.message);\n    }\n  }\n\n  /**\n   * parse hevc/avc video data\n   * @param chunk\n   * @private\n   */\n  _parseHevcData(chunk) {\n    // header\n    let info = this.loaderBuffer.shift(1)[0];\n    chunk.frameType = (info & 0xf0) >>> 4;\n    chunk.isKeyframe = chunk.frameType === 1;\n    // let tempCodecID = this.tracks.videoTrack.codecID\n    let codecID = info & 0x0f;\n    this.tracks.videoTrack.codecID = codecID;\n\n    // hevc和avc的header解析方式一样\n    chunk.avcPacketType = this.loaderBuffer.shift(1)[0];\n    chunk.cts = this.loaderBuffer.toInt(0, 3);\n    this.loaderBuffer.shift(3);\n\n    // 12 for hevc, 7 for avc\n    if (codecID === 12) {\n      const data = this.loaderBuffer.shift(chunk.datasize - 5);\n      chunk.data = data;\n\n      if (Number.parseInt(chunk.avcPacketType) !== 0) {\n        if (!this._datasizeValidator(chunk.datasize)) {\n          this.logger.warn(this.TAG, `invalid video tag datasize: ${chunk.datasize}`);\n        }\n        let nalu = {};\n        let r = 0;\n        nalu.cts = chunk.cts;\n        nalu.dts = chunk.dts;\n        while (chunk.data.length > r) {\n          let sizes = chunk.data.slice(Number.parseInt(r), 4 + r);\n          nalu.size = sizes[3];\n          nalu.size += sizes[2] * 256;\n          nalu.size += sizes[1] * 256 * 256;\n          nalu.size += sizes[0] * 256 * 256 * 256;\n          r += 4;\n          nalu.data = chunk.data.slice(Number.parseInt(r), nalu.size + r);\n          r += nalu.size;\n          this.tracks.videoTrack.samples.push(nalu);\n          this.emit(DEMUX_EVENTS.METADATA_PARSED, 'video');\n        }\n      } else if (Number.parseInt(chunk.avcPacketType) === 0) {\n        if (!this._datasizeValidator(chunk.datasize)) {\n          this.logger.warn(this.TAG, `invalid video tag datasize: ${chunk.datasize}`);\n        } else {\n          this.emit(DEMUX_EVENTS.METADATA_PARSED, 'video');\n        }\n      }\n    } else if (codecID === 7) {\n      let data = this.loaderBuffer.shift(chunk.datasize - 5);\n      if (data[4] === 0 && data[5] === 0 && data[6] === 0 && data[7] === 1) {\n        let avcclength = 0;\n        for (let i = 0; i < 4; i++) {\n          avcclength = avcclength * 256 + data[i];\n        }\n        avcclength -= 4;\n        data = data.slice(4, data.length);\n        data[3] = avcclength % 256;\n        avcclength = (avcclength - data[3]) / 256;\n        data[2] = avcclength % 256;\n        avcclength = (avcclength - data[2]) / 256;\n        data[1] = avcclength % 256;\n        data[0] = (avcclength - data[1]) / 256;\n      }\n\n      chunk.data = data;\n      // If it is AVC sequece Header.\n      if (chunk.avcPacketType === 0) {\n        this._avcSequenceHeaderParser(chunk.data);\n        let validate = this._datasizeValidator(chunk.datasize);\n        if (validate) {\n          if (this._hasScript && !this._hasVideoSequence) {\n            this.emit(DEMUX_EVENTS.METADATA_PARSED, 'video');\n          } else if (this._hasScript && this._hasVideoSequence) {\n            this.emit(DEMUX_EVENTS.VIDEO_METADATA_CHANGE);\n          }\n          this._hasVideoSequence = true;\n        }\n      } else {\n        if (!this._datasizeValidator(chunk.datasize)) {\n          this.logger.warn(this.TAG, `invalid video tag datasize: ${chunk.datasize}`);\n          return;\n        }\n        this.tracks.videoTrack.samples.push(chunk);\n        // this.emit(DEMUX_EVENTS.DEMUX_COMPLETE)\n      }\n    } else {\n      this.logger.warn(this.TAG, `video codeid is ${codecID}`);\n      chunk.data = this.loaderBuffer.shift(chunk.datasize - 1);\n      if (!this._datasizeValidator(chunk.datasize)) {\n        this.logger.warn(this.TAG, `invalid video tag datasize: ${chunk.datasize}`);\n      }\n      this.tracks.videoTrack.samples.push(chunk);\n      this.emit(DEMUX_EVENTS.DEMUX_COMPLETE);\n    }\n    delete chunk.tagType;\n  }\n\n  /**\n   * parse avc metadata\n   * @param data\n   * @private\n   */\n  _avcSequenceHeaderParser(data) {\n    let track = this.tracks.videoTrack;\n\n    if (!track) {\n      return;\n    }\n\n    let offset = 0;\n\n    if (!track.meta) {\n      track.meta = new _xgplayerUtils.VideoTrackMeta();\n    }\n    let meta = track.meta;\n\n    meta.configurationVersion = data[0];\n    meta.avcProfileIndication = data[1];\n    meta.profileCompatibility = data[2];\n    meta.avcLevelIndication = data[3] / 10;\n    meta.nalUnitLength = (data[4] & 0x03) + 1;\n\n    let numOfSps = data[5] & 0x1f;\n    offset = 6;\n    let config = {};\n\n    // parse SPS\n    for (let i = 0; i < numOfSps; i++) {\n      let size = data[offset] * 255 + data[offset + 1];\n      offset += 2;\n\n      let sps = new Uint8Array(size);\n      for (let j = 0; j < size; j++) {\n        sps[j] = data[offset + j];\n      }\n\n      // codec string\n      let codecString = 'avc1.';\n      for (let j = 1; j < 4; j++) {\n        let h = sps[j].toString(16);\n        if (h.length < 2) {\n          h = '0' + h;\n        }\n        codecString += h;\n      }\n\n      meta.codec = codecString;\n\n      offset += size;\n      this.tracks.videoTrack.meta.sps = sps;\n      config = _xgplayerCodec.SpsParser.parseSPS(sps);\n    }\n\n    let numOfPps = data[offset];\n\n    offset++;\n\n    for (let i = 0; i < numOfPps; i++) {\n      let size = data[offset] * 255 + data[offset + 1];\n      offset += 2;\n      let pps = new Uint8Array(size);\n      for (let j = 0; j < size; j++) {\n        pps[j] = data[offset + j];\n      }\n      offset += size;\n      this.tracks.videoTrack.meta.pps = pps;\n    }\n\n    Object.assign(meta, _xgplayerCodec.SpsParser.toVideoMeta(config));\n\n    // fill video media info\n    const videoMedia = this._context.mediaInfo.video;\n\n    videoMedia.codec = meta.codec;\n    videoMedia.profile = meta.profile;\n    videoMedia.level = meta.level;\n    videoMedia.chromaFormat = meta.chromaFormat;\n    videoMedia.frameRate = meta.frameRate;\n    videoMedia.parRatio = meta.parRatio;\n    videoMedia.width = videoMedia.width === meta.presentWidth ? videoMedia.width : meta.presentWidth;\n    videoMedia.height = videoMedia.height === meta.presentHeight ? videoMedia.width : meta.presentHeight;\n\n    meta.duration = this._context.mediaInfo.duration * meta.timescale;\n    meta.avcc = new Uint8Array(data.length);\n    meta.avcc.set(data);\n    track.meta = meta;\n  }\n\n  /**\n   * choose audio sample rate\n   * @param samplingFrequencyIndex\n   * @returns {number}\n   * @private\n   */\n  _switchAudioSampleRate(samplingFrequencyIndex) {\n    let samplingFrequencyList = [96000, 88200, 64000, 48000, 44100, 32000, 24000, 22050, 16000, 12000, 11025, 8000, 7350];\n    return samplingFrequencyList[samplingFrequencyIndex];\n  }\n\n  /**\n   * choose audio sampling frequence\n   * @param info\n   * @returns {number}\n   * @private\n   */\n  _switchAudioSamplingFrequency(info) {\n    let samplingFrequencyIndex = (info & 12) >>> 2;\n    let samplingFrequencyList = [5500, 11025, 22050, 44100, 48000];\n    return samplingFrequencyList[samplingFrequencyIndex];\n  }\n\n  /**\n   * choose audio channel count\n   * @param info\n   * @returns {number}\n   * @private\n   */\n  _switchAudioChannel(info) {\n    let sampleTrackNumIndex = info & 1;\n    let sampleTrackNumList = [1, 2];\n    return sampleTrackNumList[sampleTrackNumIndex];\n  }\n\n  /**\n   * check datasize is valid use 4 Byte after current tag\n   * @param datasize\n   * @returns {boolean}\n   * @private\n   */\n  _datasizeValidator(datasize) {\n    let datasizeConfirm = this.loaderBuffer.toInt(0, 4);\n    this.loaderBuffer.shift(4);\n    return datasizeConfirm === datasize + 11;\n  }\n\n  get loaderBuffer() {\n    if (this._context.getInstance('LOADER_BUFFER')) {\n      return this._context.getInstance('LOADER_BUFFER');\n    } else {\n      this.emit(DEMUX_EVENTS.DEMUX_ERROR, new Error('找不到 loaderBuffer 实例'));\n    }\n  }\n\n  get tracks() {\n    return this._context.getInstance('TRACKS');\n  }\n\n  get logger() {\n    return this._context.getInstance('LOGGER');\n  }\n}\n\nexports.default = FlvDemuxer;\n\n//# sourceURL=webpack://xgplayer-flv/../xgplayer-demux/src/flv/index.js?")},"../xgplayer-demux/src/hls/demuxer/m3u8parser.js":
/*!*******************************************************!*\
      !*** ../xgplayer-demux/src/hls/demuxer/m3u8parser.js ***!
      \*******************************************************/
/*! no static exports found */function(module,exports,__webpack_require__){eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n/**\n * Reference: https://tools.ietf.org/html/rfc8216#section-4.3\n */\nclass M3U8Parser {\n  static parse(text, baseurl = '') {\n    let ret = {\n      duration: 0\n    };\n    if (!text || !text.split) {\n      return;\n    }\n    let refs = text.split(/\\r|\\n/);\n    refs = refs.filter(ref => {\n      return ref;\n    });\n    let ref = refs.shift();\n    if (!ref.match('#EXTM3U')) {\n      // TODO:M3U格式错误。\n      return null;\n    }\n    ref = refs.shift();\n    while (ref) {\n      let refm = ref.match(/#(.*):(.*)/);\n      if (refm && refm.length > 2) {\n        switch (refm[1]) {\n          case 'EXT-X-VERSION':\n            ret.version = parseInt(refm[2]);\n            break;\n          case 'EXT-X-MEDIA-SEQUENCE':\n            ret.sequence = parseInt(refm[2]);\n            break;\n          case 'EXT-X-TARGETDURATION':\n            ret.targetduration = parseFloat(refm[2]);\n            break;\n          case 'EXTINF':\n            M3U8Parser.parseFrag(refm, refs, ret, baseurl);\n            break;\n          default:\n            break;\n        }\n      }\n      ref = refs.shift();\n    }\n    return ret;\n  }\n\n  static parseFrag(refm, refs, ret, baseurl) {\n    if (!ret.frags) {\n      ret.frags = [];\n    }\n\n    let freg = {\n      start: ret.duration,\n      duration: parseFloat(refm[2]) * 1000\n    };\n\n    ret.duration += freg.duration;\n    let nextline = refs.shift();\n    if (nextline.match(/#(.*):(.*)/)) {\n      nextline = refs.shift();\n    }\n    if (nextline.length > 0 && nextline.charAt(0) === '/' && baseurl.match(/.*\\/\\/.*\\.\\w+/g)) {\n      baseurl = baseurl.match(/.*\\/\\/.*\\.\\w+/g)[0];\n    }\n    if (nextline.match(/.*:\\/\\/.*/)) {\n      freg.url = nextline;\n    } else {\n      freg.url = baseurl + nextline;\n    }\n\n    ret.frags.push(freg);\n  }\n\n  static parseURL(url) {\n    let baseurl = '';\n    let urls = url.match(/(.*\\/).*\\.m3u8/);\n    if (urls && urls.length > 0) {\n      for (let i = 0; i < urls.length; i++) {\n        if (urls[i].match(/.*\\/$/g) && urls[i].length > baseurl.length) {\n          baseurl = urls[i];\n        }\n      }\n    }\n    return baseurl;\n  }\n}\n\nexports.default = M3U8Parser;\n\n//# sourceURL=webpack://xgplayer-flv/../xgplayer-demux/src/hls/demuxer/m3u8parser.js?")},"../xgplayer-demux/src/hls/demuxer/ts.js":
/*!***********************************************!*\
      !*** ../xgplayer-demux/src/hls/demuxer/ts.js ***!
      \***********************************************/
/*! no static exports found */function(module,exports,__webpack_require__){eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _xgplayerCodec = __webpack_require__(/*! xgplayer-codec */ \"../xgplayer-codec/index.js\");\n\nvar _xgplayerBuffer = __webpack_require__(/*! xgplayer-buffer */ \"../xgplayer-buffer/index.js\");\n\nvar _xgplayerUtils = __webpack_require__(/*! xgplayer-utils */ \"../xgplayer-utils/index.js\");\n\nconst DEMUX_EVENTS = _xgplayerUtils.EVENTS.DEMUX_EVENTS;\nconst StreamType = {\n  0x01: ['video', 'MPEG-1'],\n  0x02: ['video', 'MPEG-2'],\n  0x1b: ['video', 'AVC.H264'],\n  0xea: ['video', 'VC-1'],\n  0x03: ['audio', 'MPEG-1'],\n  0x04: ['audio', 'MPEG-2'],\n  0x0f: ['audio', 'MPEG-2.AAC'],\n  0x11: ['audio', 'MPEG-4.AAC'],\n  0x80: ['audio', 'LPCM'],\n  0x81: ['audio', 'AC3'],\n  0x06: ['audio', 'AC3'],\n  0x82: ['audio', 'DTS'],\n  0x83: ['audio', 'Dolby TrueHD'],\n  0x84: ['audio', 'AC3-Plus'],\n  0x85: ['audio', 'DTS-HD'],\n  0x86: ['audio', 'DTS-MA'],\n  0xa1: ['audio', 'AC3-Plus-SEC'],\n  0xa2: ['audio', 'DTS-HD-SEC']\n};\n\nclass TsDemuxer {\n  constructor(configs) {\n    this.configs = Object.assign({}, configs);\n    this.demuxing = false;\n    this.pat = [];\n    this.pmt = [];\n    this._hasVideoMeta = false;\n    this._hasAudioMeta = false;\n  }\n\n  init() {\n    this.on(DEMUX_EVENTS.DEMUX_START, this.demux.bind(this));\n  }\n\n  demux() {\n    if (this.demuxing) {\n      return;\n    }\n\n    let buffer = this.inputBuffer;\n    let frags = { pat: [], pmt: [] };\n    let peses = {};\n\n    // Read TS segment\n    while (buffer.length >= 188) {\n      while (buffer.length >= 1 && buffer.array[0][buffer.offset] !== 71) {\n        buffer.shift(1);\n      }\n      let buf = buffer.shift(188);\n      // console.log(buf);\n      let tsStream = new _xgplayerUtils.Stream(buf.buffer);\n      let ts = {};\n      TsDemuxer.read(tsStream, ts, frags);\n      if (ts.pes) {\n        if (!peses[ts.header.pid]) {\n          peses[ts.header.pid] = [];\n        }\n        peses[ts.header.pid].push(ts.pes);\n        ts.pes.ES.buffer = [ts.pes.ES.buffer];\n      } else if (peses[ts.header.pid]) {\n        peses[ts.header.pid][peses[ts.header.pid].length - 1].ES.buffer.push(ts.payload.stream);\n      }\n    }\n\n    // Get Frames data\n    for (let i = 0; i < Object.keys(peses).length; i++) {\n      let epeses = peses[Object.keys(peses)[i]];\n      for (let j = 0; j < epeses.length; j++) {\n        epeses[j].id = Object.keys(peses)[i];\n        epeses[j].ES.buffer = TsDemuxer.Merge(epeses[j].ES.buffer);\n        if (epeses[j].type === 'audio') {\n          this.pushAudioSample(epeses[j]);\n        } else if (epeses[j].type === 'video') {\n          this.pushVideoSample(epeses[j]);\n        }\n      }\n    }\n\n    if (this._hasAudioMeta) {\n      this.emit(DEMUX_EVENTS.DEMUX_COMPLETE, 'audio');\n    }\n    if (this._hasVideoMeta) {\n      this.emit(DEMUX_EVENTS.DEMUX_COMPLETE, 'video');\n    }\n  }\n\n  pushAudioSample(pes) {\n    let track;\n    if (!this._tracks.audioTrack) {\n      this._tracks.audioTrack = new _xgplayerBuffer.AudioTrack();\n      track = this._tracks.audioTrack;\n      track.meta = new _xgplayerUtils.AudioTrackMeta({\n        audioSampleRate: pes.ES.frequence,\n        sampleRate: pes.ES.frequence,\n        channelCount: pes.ES.channel,\n        codec: 'mp4a.40.' + pes.ES.audioObjectType,\n        config: pes.ES.audioConfig,\n        id: 2,\n        sampleRateIndex: pes.ES.frequencyIndex\n      });\n      track.meta.refSampleDuration = Math.floor(1024 / track.meta.audioSampleRate * track.meta.timescale);\n      if (!this._hasAudioMeta) {\n        this._hasAudioMeta = true;\n        this.emit(DEMUX_EVENTS.METADATA_PARSED, 'audio');\n      }\n    } else {\n      track = this._tracks.audioTrack;\n    }\n    let data = new Uint8Array(pes.ES.buffer.buffer.slice(pes.ES.buffer.position, pes.ES.buffer.length));\n    let dts = parseInt(pes.pts / 90);\n    let pts = parseInt(pes.pts / 90);\n    let sample = new _xgplayerUtils.AudioTrackSample({ dts, pts, data });\n    track.samples.push(sample);\n  }\n\n  pushVideoSample(pes) {\n    let nals = _xgplayerCodec.Nalunit.getNalunits(pes.ES.buffer);\n    let track;\n    if (!this._tracks.videoTrack) {\n      this._tracks.videoTrack = new _xgplayerBuffer.VideoTrack();\n      track = this._tracks.videoTrack;\n      track.meta = new _xgplayerUtils.VideoTrackMeta();\n    } else {\n      track = this._tracks.videoTrack;\n    }\n    let sampleLength = 0;\n    let sps = false;\n    let pps = false;\n    for (let i = 0; i < nals.length; i++) {\n      let nal = nals[i];\n      if (nal.sps) {\n        // TODO：VideoTrack信息 和 Meta 信息\n        if (track.sps && TsDemuxer.compaireUint8(nal.body, track.sps)) {\n          continue;\n        }\n\n        sps = nal;\n        track.sps = nal.body;\n        track.meta.chromaFormat = sps.sps.chroma_format;\n        track.meta.codec = 'avc1.';\n        for (var j = 1; j < 4; j++) {\n          var h = sps.body[j].toString(16);\n          if (h.length < 2) {\n            h = '0' + h;\n          }\n          track.meta.codec += h;\n        }\n        track.meta.codecHeight = sps.sps.codec_size.height;\n        track.meta.codecWidth = sps.sps.codec_size.width;\n        track.meta.frameRate = sps.sps.frame_rate;\n        track.meta.id = 1;\n        track.meta.level = sps.sps.level_string;\n        track.meta.presentHeight = sps.sps.present_size.height;\n        track.meta.presentWidth = sps.sps.present_size.width;\n        track.meta.profile = sps.sps.profile_string;\n        track.meta.refSampleDuration = Math.floor(track.meta.timescale * (sps.sps.frame_rate.fps_den / sps.sps.frame_rate.fps_num));\n        track.meta.sarRatio = sps.sps.sar_ratio ? sps.sps.sar_ratio : sps.sps.par_ratio;\n      } else if (nal.pps) {\n        track.pps = nal.body;\n        pps = nal;\n      } else {\n        sampleLength += 4 + nal.body.byteLength;\n      }\n    }\n\n    if (sps && pps) {\n      track.meta.avcc = _xgplayerCodec.Nalunit.getAvcc(sps.body, pps.body);\n      if (!this._hasVideoMeta) {\n        this._hasVideoMeta = true;\n        this.emit(DEMUX_EVENTS.METADATA_PARSED, 'video');\n      }\n    }\n\n    let data = new Uint8Array(sampleLength);\n    let offset = 0;\n    let isKeyframe = false;\n    for (let i = 0; i < nals.length; i++) {\n      let nal = nals[i];\n      let length = nal.body.byteLength;\n      if (nal.idr) {\n        isKeyframe = true;\n      }\n      if (!nal.pps && !nal.sps) {\n        data.set(new Uint8Array([length >>> 24 & 0xff, length >>> 16 & 0xff, length >>> 8 & 0xff, length & 0xff]), offset);\n        offset += 4;\n        data.set(nal.body, offset);\n        offset += length;\n      }\n    }\n    let sample = new _xgplayerUtils.VideoTrackSample({\n      dts: parseInt(pes.dts / 90),\n      pts: parseInt(pes.pts / 90),\n      cts: (pes.pts - pes.dts) / 90,\n      originDts: pes.dts,\n      isKeyframe,\n      data\n    });\n    track.samples.push(sample);\n  }\n\n  destory() {\n    this.off(DEMUX_EVENTS.DEMUX_START, this.demux);\n    this.configs = {};\n    this.demuxing = false;\n    this.pat = [];\n    this.pmt = [];\n    this._hasVideoMeta = false;\n    this._hasAudioMeta = false;\n  }\n\n  static compaireUint8(a, b) {\n    if (a.byteLength !== b.byteLength) {\n      return false;\n    }\n    let ret = true;\n    for (let i = 0; i < a.byteLength; i++) {\n      if (a[i] !== b[i]) {\n        ret = false;\n      }\n    }\n    return ret;\n  }\n  static Merge(buffers) {\n    let data;\n    let length = 0;\n    let offset = 0;\n    for (let i = 0; i < buffers.length; i++) {\n      length += buffers[i].length - buffers[i].position;\n    }\n\n    data = new Uint8Array(length);\n    for (let i = 0; i < buffers.length; i++) {\n      let buffer = buffers[i];\n      data.set(new Uint8Array(buffer.buffer, buffer.position), offset);\n      offset += buffer.length - buffer.position;\n    }\n    return new _xgplayerUtils.Stream(data.buffer);\n  }\n\n  static read(stream, ts, frags) {\n    TsDemuxer.readHeader(stream, ts);\n    TsDemuxer.readPayload(stream, ts, frags);\n    if (ts.header.packet === 'MEDIA' && ts.header.payload === 1 && !ts.unknownPIDs) {\n      ts.pes = TsDemuxer.PES(ts);\n    }\n  }\n\n  static readPayload(stream, ts, frags) {\n    let header = ts.header;\n    let pid = header.pid;\n    switch (pid) {\n      case 0:\n        TsDemuxer.PAT(stream, ts, frags);\n        break;\n      case 1:\n        TsDemuxer.CAT(stream, ts, frags);\n        break;\n      case 2:\n        TsDemuxer.TSDT(stream, ts, frags);\n        break;\n      case 0x1fff:\n        break;\n      default:\n        // TODO: some的写法不太好，得改\n        if (frags.pat.some(item => {\n          return item.pid === pid;\n        })) {\n          TsDemuxer.PMT(stream, ts, frags);\n        } else {\n          let sts = frags.pmt ? frags.pmt.filter(item => item.pid === pid) : [];\n          if (sts.length > 0) {\n            TsDemuxer.Media(stream, ts, StreamType[sts[0].streamType][0]);\n          } else {\n            ts.unknownPIDs = true;\n          };\n        }\n    }\n  }\n\n  static readHeader(stream, ts) {\n    let header = {};\n    header.sync = stream.readUint8();\n    let next = stream.readUint16();\n    header.error = next >>> 15;\n    header.payload = next >>> 14 & 1;\n    header.priority = next >>> 13 & 1;\n    header.pid = next & 0x1fff;\n\n    next = stream.readUint8();\n\n    header.scrambling = next >> 6 & 0x3; // 是否加密，00表示不加密\n\n    /**\n     * 00 ISO/IEC未来使用保留\n     * 01 没有调整字段，仅含有184B有效净荷\n     * 02 没有有效净荷，仅含有183B调整字段\n     * 03 0~182B调整字段后为有效净荷\n     */\n    header.adaptation = next >> 4 & 0x3;\n    header.continuity = next & 15;\n    header.packet = header.pid === 0 ? 'PAT' : 'MEDIA';\n    ts.header = header;\n  }\n\n  static PAT(stream, ts, frags) {\n    let ret = {};\n    let next = stream.readUint8();\n    stream.skip(next);\n    next = stream.readUint8();\n    ret.tabelID = next;\n    next = stream.readUint16();\n    ret.error = next >>> 7;\n    ret.zero = next >>> 6 & 1;\n    ret.sectionLength = next & 0xfff;\n    ret.streamID = stream.readUint16();\n    ret.current = stream.readUint8() & 1;\n    ret.sectionNumber = stream.readUint8();\n    ret.lastSectionNumber = stream.readUint8();\n    let N = (ret.sectionLength - 9) / 4;\n    let list = [];\n    for (let i = 0; i < N; i++) {\n      let programNumber = stream.readUint16();\n      let pid = stream.readUint16() & 0x1fff;\n      list.push({\n        program: programNumber,\n        pid,\n        type: programNumber === 0 ? 'network' : 'mapPID'\n      });\n    }\n    if (list.length > 0) {\n      frags.pat = frags.pat.concat(list);\n    }\n    ret.list = list;\n    ret.program = stream.readUint16();\n    ret.pid = stream.readUint16() & 0x1fff;\n    ts.payload = ret;\n    // TODO CRC\n  }\n\n  static PMT(stream, ts, frags) {\n    let ret = {};\n    let header = ts.header;\n    header.packet = 'PMT';\n    let next = stream.readUint8();\n    stream.skip(next);\n    next = stream.readUint8();\n    ret.tableID = next;\n    next = stream.readUint16();\n    ret.sectionLength = next & 0xfff;\n    ret.program = stream.readUint16();\n    ret.current = stream.readUint8() & 1;\n    ret.order = stream.readUint8();\n    ret.lastOrder = stream.readUint8();\n    ret.PCR_PID = stream.readUint16() & 0x1fff;\n    ret.programLength = stream.readUint16() & 0xfff;\n    let N = (ret.sectionLength - 13) / 5;\n    let list = [];\n    for (let i = 0; i < N; i++) {\n      list.push({\n        streamType: stream.readUint8(),\n        pid: stream.readUint16() & 0x1fff, // 0x07e5 视频，0x07e6\n        es: stream.readUint16() & 0xfff\n      });\n    }\n    ret.list = list;\n    if (!this.pmt) {\n      this.pmt = [];\n    }\n    frags.pmt = this.pmt.concat(list.map(item => {\n      return {\n        pid: item.pid,\n        es: item.es,\n        streamType: item.streamType,\n        program: ret.program\n      };\n    }));\n    ts.payload = ret;\n  }\n\n  static Media(stream, ts, type) {\n    let header = ts.header;\n    let payload = {};\n    header.type = type;\n    if (header.adaptation === 0x03) {\n      payload.adaptationLength = stream.readUint8();\n      if (payload.adaptationLength > 0) {\n        let next = stream.readUint8();\n        payload.discontinue = next >>> 7;\n        payload.access = next >>> 6 & 0x01;\n        payload.priority = next >>> 5 & 0x01;\n        payload.PCR = next >>> 4 & 0x01;\n        payload.OPCR = next >>> 3 & 0x01;\n        payload.splicePoint = next >>> 2 & 0x01;\n        payload.transportPrivate = next >>> 1 & 0x01;\n        payload.adaptationField = next & 0x01;\n        let _start = stream.position;\n        if (payload.PCR === 1) {\n          payload.programClockBase = stream.readUint32() << 1;\n          next = stream.readUint16();\n          payload.programClockBase |= next >>> 15;\n          payload.programClockExtension = next & 0x1ff;\n        }\n        if (payload.OPCR === 1) {\n          payload.originProgramClockBase = stream.readUint32() << 1;\n          next = stream.readUint16();\n          payload.originProgramClockBase += next >>> 15;\n          payload.originProgramClockExtension = next & 0x1ff;\n        }\n        if (payload.splicePoint === 1) {\n          payload.spliceCountdown = stream.readUint8();\n        }\n        if (payload.transportPrivate === 1) {\n          let length = stream.readUint8();\n          let transportPrivateData = [];\n          for (let i = 0; i < length; i++) {\n            transportPrivateData.push(stream.readUint8());\n          }\n        }\n        if (payload.adaptationField === 1) {\n          let length = stream.readUint8();\n          let next = stream.readUint8();\n          let start = stream.position;\n          let ltw = next >>> 7;\n          let piecewise = next >>> 6 & 0x1;\n          let seamless = next >>> 5 & 0x1;\n          if (ltw === 1) {\n            next = stream.readUint16();\n            payload.ltwValid = next >>> 15;\n            payload.ltwOffset = next & 0xefff;\n          }\n          if (piecewise === 1) {\n            next = stream.readUint24();\n            payload.piecewiseRate = next & 0x3fffff;\n          }\n          if (seamless === 1) {\n            next = stream.readInt8();\n            payload.spliceType = next >>> 4;\n            payload.dtsNextAU1 = next >>> 1 & 0x7;\n            payload.marker1 = next & 0x1;\n            next = stream.readUint16();\n            payload.dtsNextAU2 = next >>> 1;\n            payload.marker2 = next & 0x1;\n            next = stream.readUint16();\n            payload.dtsNextAU3 = next;\n          }\n          stream.skip(length - 1 - (stream.position - start));\n        }\n        let lastStuffing = payload.adaptationLength - 1 - (stream.position - _start);\n        stream.skip(lastStuffing);\n      }\n    }\n    payload.stream = new _xgplayerUtils.Stream(stream.buffer.slice(stream.position));\n    ts.payload = payload;\n  }\n\n  static PES(ts) {\n    let ret = {};\n    let buffer = ts.payload.stream;\n\n    let next = buffer.readUint24();\n    if (next !== 1) {\n      ret.ES = {};\n      ret.ES.buffer = buffer;\n    } else {\n      let streamID = buffer.readUint8();\n      if (streamID >= 0xe0 && streamID <= 0xef) {\n        ret.type = 'video';\n      }\n      if (streamID >= 0xc0 && streamID <= 0xdf) {\n        ret.type = 'audio';\n      }\n      let packetLength = buffer.readUint16();\n      ret.packetLength = packetLength;\n      if (ret.type === 'video' || ret.type === 'audio') {\n        let next = buffer.readUint8();\n        let first = next >>> 6;\n        if (first !== 0x02) {\n          throw new Error('error when parse pes header');\n        }\n        next = buffer.readUint8();\n        ret.ptsDTSFlag = next >>> 6;\n        ret.escrFlag = next >>> 5 & 0x01;\n        ret.esRateFlag = next >>> 4 & 0x01;\n        ret.dsmFlag = next >>> 3 & 0x01;\n        ret.additionalFlag = next >>> 2 & 0x01;\n        ret.crcFlag = next >>> 1 & 0x01;\n        ret.extensionFlag = next & 0x01;\n        ret.pesHeaderLength = buffer.readUint8();\n        let N1 = ret.pesHeaderLength;\n\n        if (ret.ptsDTSFlag === 2) {\n          let pts = [];\n          next = buffer.readUint8();\n          pts.push(next >>> 1 & 0x07);\n          next = buffer.readUint16();\n          pts.push(next >>> 1);\n          next = buffer.readUint16();\n          pts.push(next >>> 1);\n          ret.pts = pts[0] << 30 | pts[1] << 15 | pts[2];\n          N1 -= 5;\n          // 视频如果没有dts用pts\n          if (ret.type === 'video') {\n            ret.dts = ret.pts;\n          }\n        }\n        if (ret.ptsDTSFlag === 3) {\n          let pts = [];\n          next = buffer.readUint8();\n          pts.push(next >>> 1 & 0x07);\n          next = buffer.readUint16();\n          pts.push(next >>> 1);\n          next = buffer.readUint16();\n          pts.push(next >>> 1);\n          ret.pts = pts[0] << 30 | pts[1] << 15 | pts[2];\n          let dts = [];\n          next = buffer.readUint8();\n          dts.push(next >>> 1 & 0x07);\n          next = buffer.readUint16();\n          dts.push(next >>> 1);\n          next = buffer.readUint16();\n          dts.push(next >>> 1);\n          ret.dts = dts[0] << 30 | dts[1] << 15 | dts[2];\n          N1 -= 10;\n        }\n        if (ret.escrFlag === 1) {\n          let escr = [];\n          let ex = [];\n          next = buffer.readUint8();\n          escr.push(next >>> 3 & 0x07);\n          escr.push(next & 0x03);\n          next = buffer.readUint16();\n          escr.push(next >>> 13);\n          escr.push(next & 0x03);\n          next = buffer.readUint16();\n          escr.push(next >>> 13);\n          ex.push(next & 0x03);\n          next = buffer.readUint8();\n          ex.push(next >>> 1);\n          ret.escr = (escr[0] << 30 | escr[1] << 28 | escr[2] << 15 | escr[3] << 13 | escr[4]) * 300 + (ex[0] << 7 | ex[1]);\n          N1 -= 6;\n        }\n        if (ret.esRateFlag === 1) {\n          next = buffer.readUint24();\n          ret.esRate = next >>> 1 & 0x3fffff;\n          N1 -= 3;\n        }\n        if (ret.dsmFlag === 1) {\n          throw new Error('not support DSM_trick_mode');\n        }\n        if (ret.additionalFlag === 1) {\n          next = buffer.readUint8();\n          ret.additionalCopyInfo = next & 0x7f;\n          N1 -= 1;\n        }\n        if (ret.crcFlag === 1) {\n          ret.pesCRC = buffer.readUint16();\n          N1 -= 2;\n        }\n        if (ret.extensionFlag === 1) {\n          throw new Error('not support extension');\n        }\n        if (N1 > 0) {\n          buffer.skip(N1);\n        }\n        ret.ES = TsDemuxer.ES(buffer, ret.type);\n      } else {\n        throw new Error('format is not supported');\n      }\n    }\n    return ret;\n  }\n\n  static ES(buffer, type) {\n    let next;\n    let ret = {};\n    if (type === 'video') {\n      next = buffer.readUint32();\n      if (next !== 1) {\n        buffer.back(4);\n        next = buffer.readUint24();\n        if (next !== 1) {\n          throw new Error('h264 nal header parse failed');\n        }\n      }\n      buffer.skip(2); // 09 F0\n      // TODO readnalu\n      ret.buffer = buffer;\n    } else if (type === 'audio') {\n      next = buffer.readUint16();\n      // adts的同步字节，12位\n      if (next >>> 4 !== 0xfff) {\n        throw new Error('aac ES parse Error');\n      }\n      const fq = [96000, 88200, 64000, 48000, 44100, 32000, 24000, 22050, 16000, 12000, 11025, 8000, 7350];\n      ret.id = (next >>> 3 & 0x01) === 0 ? 'MPEG-4' : 'MPEG-2';\n      ret.layer = next >>> 1 & 0x03;\n      ret.absent = next & 0x01;\n      next = buffer.readUint16();\n      ret.audioObjectType = (next >>> 14 & 0x03) + 1;\n      ret.profile = ret.audioObjectType - 1;\n      ret.frequencyIndex = next >>> 10 & 0x0f;\n      ret.frequence = fq[ret.frequencyIndex];\n      ret.channel = next >>> 6 & 0x07;\n      ret.frameLength = (next & 0x03) << 11 | buffer.readUint16() >>> 5;\n      ret.audioConfig = TsDemuxer.getAudioConfig(ret.audioObjectType, ret.channel, ret.frequencyIndex);\n      buffer.skip(1);\n      ret.buffer = buffer;\n    } else {\n      throw new Error(`ES ${type} is not supported`);\n    }\n\n    return ret;\n  }\n\n  static TSDT(stream, ts, frags) {\n    // TODO\n    ts.payload = {};\n  }\n\n  static CAT(stream, ts, frags) {\n    let ret = {};\n    ret.tableID = stream.readUint8();\n    let next = stream.readUint16();\n    ret.sectionIndicator = next >>> 7;\n    ret.sectionLength = next & 0x0fff;\n    stream.skip(2);\n    next = stream.readUint8();\n    ret.version = next >>> 3;\n    ret.currentNextIndicator = next & 0x01;\n    ret.sectionNumber = stream.readUint8();\n    ret.lastSectionNumber = stream.readUint8();\n    let N = (this.sectionLength - 9) / 4;\n    let list = [];\n    for (let i = 0; i < N; i++) {\n      list.push({});\n    }\n    ret.crc32 = stream.readUint32();\n    ts.payload = ret;\n  }\n\n  static getAudioConfig(audioObjectType, channel, sampleIndex) {\n    let userAgent = navigator.userAgent.toLowerCase();\n    let config;\n    let extensionSampleIndex;\n    if (/firefox/i.test(userAgent)) {\n      if (sampleIndex >= 6) {\n        audioObjectType = 5;\n        config = new Array(4);\n        extensionSampleIndex = sampleIndex - 3;\n      } else {\n        audioObjectType = 2;\n        config = new Array(2);\n        extensionSampleIndex = sampleIndex;\n      }\n    } else if (userAgent.indexOf('android') !== -1) {\n      audioObjectType = 2;\n      config = new Array(2);\n      extensionSampleIndex = sampleIndex;\n    } else {\n      audioObjectType = 5;\n      config = new Array(4);\n      if (sampleIndex >= 6) {\n        extensionSampleIndex = sampleIndex - 3;\n      } else {\n        if (channel === 1) {\n          audioObjectType = 2;\n          config = new Array(2);\n        }\n        extensionSampleIndex = sampleIndex;\n      }\n    }\n\n    config[0] = audioObjectType << 3;\n    config[0] |= (sampleIndex & 0x0e) >> 1;\n    config[1] = (sampleIndex & 0x01) << 7;\n    config[1] |= channel << 3;\n    if (audioObjectType === 5) {\n      config[1] |= (extensionSampleIndex & 0x0e) >> 1;\n      config[2] = (extensionSampleIndex & 0x01) << 7;\n      config[2] |= 2 << 2;\n      config[3] = 0;\n    }\n    return config;\n  }\n\n  get inputBuffer() {\n    return this._context.getInstance(this.configs.inputbuffer);\n  }\n\n  get _tracks() {\n    return this._context.getInstance('TRACKS');\n  }\n}\n\nexports.default = TsDemuxer;\n\n//# sourceURL=webpack://xgplayer-flv/../xgplayer-demux/src/hls/demuxer/ts.js?")},"../xgplayer-demux/src/hls/playlist.js":
/*!*********************************************!*\
      !*** ../xgplayer-demux/src/hls/playlist.js ***!
      \*********************************************/
/*! no static exports found */function(module,exports,__webpack_require__){eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nclass Playlist {\n  constructor(configs) {\n    this._baseURL = '';\n    this._list = {};\n    this._ts = {};\n    this.version = 0;\n    this.sequence = -1;\n    this.targetduration = 0;\n    this.duration = 0;\n    this.fragLength = 0;\n    this._lastget = undefined;\n    this._audoclear = configs.autoclear || false;\n  }\n\n  get list() {\n    return this._list;\n  }\n\n  set baseURL(baseURL) {\n    if (this.baseURL !== baseURL) {\n      this.clear();\n      this._baseURL = baseURL;\n    }\n  }\n\n  get baseURL() {\n    return this._baseURL;\n  }\n\n  push(ts, duration) {\n    if (!this._ts[ts]) {\n      this._ts[ts] = { duration: duration, downloaded: false, downloading: false, start: this.duration };\n      this._list[this.duration] = ts;\n      this.duration += duration;\n      this.fragLength += 1;\n    }\n  }\n\n  deleteFrag(url) {\n    if (this._ts[url]) {\n      if (this._ts[url].start > this._lastget.time) {\n        this._lastget = {\n          duration: this._ts[url].duration,\n          time: this._ts[url].start,\n          downloaded: false,\n          downloading: false,\n          url: url\n        };\n      }\n      delete this._list[this._ts[url].start];\n      delete this._ts[url];\n      this.fragLength -= 1;\n    }\n  }\n\n  pushM3U8(data, deletepre) {\n    // 常规信息替换\n    if (!data) {\n      return;\n    }\n    this.version = data.version;\n    this.targetduration = data.targetduration;\n\n    // 新分片信息\n    if (data.sequence > this.sequence) {\n      this.sequence = data.sequence;\n      let newfraglist = [];\n      for (let i = 0; i < data.frags.length; i++) {\n        let frag = data.frags[i];\n        if (!this._ts[frag.url]) {\n          newfraglist.push(frag.url);\n          this.push(frag.url, frag.duration);\n        }\n      }\n      if (deletepre) {\n        let tslist = this.getTsList();\n        for (let i = 0; i < tslist.length; i++) {\n          if (newfraglist.indexOf(tslist[i]) < 0) {\n            this.deleteFrag(tslist[i]);\n          }\n        }\n      }\n    }\n  }\n\n  getTsList() {\n    return Object.keys(this._ts);\n  }\n\n  downloaded(tsname, isloaded) {\n    let ts = this._ts[tsname];\n    if (ts) {\n      ts.downloaded = isloaded;\n    }\n  }\n\n  downloading(tsname, loading) {\n    let ts = this._ts[tsname];\n    if (ts) {\n      ts.downloading = loading;\n    }\n  }\n\n  getTsByName(name) {\n    return this._ts[name];\n  }\n\n  getTs(time) {\n    let timelist = Object.keys(this._list);\n    let ts;\n\n    if (time === undefined) {\n      if (this._lastget) {\n        time = this._lastget.time + this._lastget.duration;\n      } else {\n        time = 0;\n      }\n    }\n\n    if (timelist.length < 1 || time >= this.duration) {\n      return undefined;\n    }\n    timelist.sort((a, b) => {\n      return parseFloat(a) - parseFloat(b);\n    });\n    for (let i = 0; i < timelist.length; i++) {\n      if (time >= parseInt(timelist[i])) {\n        let url = this._list[timelist[i]];\n        let downloaded = this._ts[url].downloaded;\n        let downloading = this._ts[url].downloading;\n        ts = { url, downloaded, downloading, time: parseInt(timelist[i]), duration: parseInt(this._ts[url].duration) };\n        if (this.autoclear) {\n          delete this._ts[this._lastget.url];\n          delete this._list[this._lastget.time];\n        }\n        this._lastget = ts;\n      } else {\n        break;\n      }\n    }\n    return ts;\n  }\n\n  clear() {\n    this._baseURL = '';\n    this._list = {};\n    this._ts = {};\n    this.version = 0;\n    this.sequence = -1;\n    this.targetduration = 0;\n    this.duration = 0;\n  }\n\n  clearDownloaded() {\n    for (let i = 0, l = Object.keys(this._ts).length; i < l; i++) {\n      let ts = this._ts[Object.keys(this._ts)[i]];\n      ts.downloaded = false;\n      ts.downloading = false;\n    }\n  }\n\n  destroy() {\n    this._baseURL = '';\n    this._list = {};\n    this._ts = {};\n    this.version = 0;\n    this.sequence = -1;\n    this.targetduration = 0;\n    this.duration = 0;\n    this.fragLength = 0;\n    this._lastget = undefined;\n    this._audoclear = false;\n  }\n}\n\nexports.default = Playlist;\n\n//# sourceURL=webpack://xgplayer-flv/../xgplayer-demux/src/hls/playlist.js?")},"../xgplayer-loader/index.js":
/*!***********************************!*\
      !*** ../xgplayer-loader/index.js ***!
      \***********************************/
/*! no static exports found */function(module,exports,__webpack_require__){eval('\n\nmodule.exports = {\n  FetchLoader: __webpack_require__(/*! ./src/fetch-loader */ "../xgplayer-loader/src/fetch-loader.js").default\n};\n\n//# sourceURL=webpack://xgplayer-flv/../xgplayer-loader/index.js?')},"../xgplayer-loader/src/fetch-loader.js":
/*!**********************************************!*\
      !*** ../xgplayer-loader/src/fetch-loader.js ***!
      \**********************************************/
/*! no static exports found */function(module,exports,__webpack_require__){eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _xgplayerUtils = __webpack_require__(/*! xgplayer-utils */ \"../xgplayer-utils/index.js\");\n\nconst LOADER_EVENTS = _xgplayerUtils.EVENTS.LOADER_EVENTS;\nconst READ_STREAM = 0;\nconst READ_TEXT = 1;\nconst READ_JSON = 2;\nconst READ_BUFFER = 3;\nclass FetchLoader {\n  constructor(configs) {\n    this.configs = Object.assign({}, configs);\n    this.url = null;\n    this.status = 0;\n    this.error = null;\n    this._reader = null;\n    this._canceled = false;\n    this.readtype = this.configs.readtype;\n    this.buffer = this.configs.buffer || 'LOADER_BUFFER';\n    this._loaderTaskNo = 0;\n  }\n\n  init() {\n    this.on(LOADER_EVENTS.LADER_START, this.load.bind(this));\n  }\n\n  static get type() {\n    return 'loader';\n  }\n\n  load(url, opts) {\n    let _this = this;\n    this.url = url;\n    this._canceled = false;\n\n    // TODO: Add Ranges\n    let params = this.getParams(opts);\n    _this.loading = true;\n    return fetch(this.url, params).then(function (response) {\n      if (response.ok) {\n        _this.status = response.status;\n        return _this._onFetchResponse(response);\n      }\n      _this.emit(LOADER_EVENTS.LOADER_ERROR, _this, response);\n      _this.loading = false;\n    }).catch(function (error) {\n      _this.emit(LOADER_EVENTS.LOADER_ERROR, _this, error);\n      _this.loading = false;\n      throw new Error(error.message);\n    });\n  }\n\n  _onFetchResponse(response) {\n    let _this = this;\n    let buffer = this._context.getInstance(this.buffer);\n    this._loaderTaskNo++;\n    let taskno = this._loaderTaskNo;\n    if (response.ok === true) {\n      switch (this.readtype) {\n        case READ_JSON:\n          response.json().then(data => {\n            _this.loading = false;\n            if (!_this._canceled) {\n              if (buffer) {\n                buffer.push(data);\n                _this.emit(LOADER_EVENTS.LOADER_COMPLETE, buffer);\n              } else {\n                _this.emit(LOADER_EVENTS.LOADER_COMPLETE, data);\n              }\n            }\n          });\n          break;\n        case READ_TEXT:\n          response.text().then(data => {\n            _this.loading = false;\n            if (!_this._canceled) {\n              if (buffer) {\n                buffer.push(data);\n                _this.emit(LOADER_EVENTS.LOADER_COMPLETE, buffer);\n              } else {\n                _this.emit(LOADER_EVENTS.LOADER_COMPLETE, data);\n              }\n            }\n          });\n          break;\n        case READ_BUFFER:\n          response.arrayBuffer().then(data => {\n            _this.loading = false;\n            if (!_this._canceled) {\n              if (buffer) {\n                buffer.push(new Uint8Array(data));\n                _this.emit(LOADER_EVENTS.LOADER_COMPLETE, buffer);\n              } else {\n                _this.emit(LOADER_EVENTS.LOADER_COMPLETE, data);\n              }\n            }\n          });\n          break;\n        case READ_STREAM:\n        default:\n          return this._onReader(response.body.getReader(), taskno);\n      }\n    }\n  }\n\n  _onReader(reader, taskno) {\n    let buffer = this._context.getInstance(this.buffer);\n\n    if (!buffer) {\n      this._reader.cancel();\n    }\n\n    this._reader = reader;\n    if (this.loading === false) {\n      return;\n    }\n\n    let _this = this;\n    // reader read function returns a Promise. get data when callback and has value.done when disconnected.\n    // read方法返回一个Promise. 回调中可以获取到数据。当value.done存在时，说明链接断开。\n    this._reader && this._reader.read().then(function (val) {\n      if (val.done) {\n        // TODO: 完成处理\n        _this.loading = false;\n        _this.status = 0;\n        _this.emit(LOADER_EVENTS.LOADER_COMPLETE, buffer);\n        return;\n      }\n\n      if (_this._canceled) {\n        _this._reader.cancel();\n        return;\n      }\n      buffer.push(val.value);\n      _this.emit(LOADER_EVENTS.LOADER_DATALOADED, buffer);\n      return _this._onReader(reader, taskno);\n    }).catch(error => {\n      console.error(error);\n      _this.emit(LOADER_EVENTS.LOADER_ERROR, _this, error);\n      _this.loading = false;\n    });\n  }\n\n  getParams(opts) {\n    let options = Object.assign({}, opts);\n    let headers = new Headers();\n\n    let params = {\n      method: 'GET',\n      headers: headers,\n      mode: 'cors',\n      cache: 'default'\n\n      // add custmor headers\n      // 添加自定义头\n    };if (typeof this.configs.headers === 'object') {\n      let configHeaders = this.configs.headers;\n      for (let key in configHeaders) {\n        if (configHeaders.hasOwnProperty(key)) {\n          headers.append(key, configHeaders[key]);\n        }\n      }\n    }\n\n    if (typeof options.headers === 'object') {\n      let optHeaders = options.headers;\n      for (let key in optHeaders) {\n        if (optHeaders.hasOwnProperty(key)) {\n          headers.append(key, optHeaders[key]);\n        }\n      }\n    }\n\n    if (options.cors === false) {\n      params.mode = 'same-origin';\n    }\n\n    // withCredentials is disabled by default\n    // withCredentials 在默认情况下不被使用。\n    if (options.withCredentials) {\n      params.credentials = 'include';\n    }\n\n    // TODO: Add ranges;\n    return params;\n  }\n\n  cancel() {\n    if (this._reader) {\n      this._reader.cancel();\n      this._reader = null;\n      this.loading = false;\n      this._canceled = true;\n    }\n  }\n\n  destroy() {\n    this.cancel();\n  }\n}\n\nexports.default = FetchLoader;\n\n//# sourceURL=webpack://xgplayer-flv/../xgplayer-loader/src/fetch-loader.js?")},"../xgplayer-remux/index.js":
/*!**********************************!*\
      !*** ../xgplayer-remux/index.js ***!
      \**********************************/
/*! no static exports found */function(module,exports,__webpack_require__){eval('\n\nmodule.exports = {\n  Mp4Remuxer: __webpack_require__(/*! ./src/mp4 */ "../xgplayer-remux/src/mp4/index.js").default\n};\n\n//# sourceURL=webpack://xgplayer-flv/../xgplayer-remux/index.js?')},"../xgplayer-remux/src/mp4/fmp4.js":
/*!*****************************************!*\
      !*** ../xgplayer-remux/src/mp4/fmp4.js ***!
      \*****************************************/
/*! no static exports found */function(module,exports,__webpack_require__){eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _xgplayerUtils = __webpack_require__(/*! xgplayer-utils */ \"../xgplayer-utils/index.js\");\n\n// const UINT32_MAX = Math.pow(2, 32) - 1;\nclass Fmp4 {\n  static size(value) {\n    return _xgplayerUtils.Buffer.writeUint32(value);\n  }\n  static initBox(size, name, ...content) {\n    const buffer = new _xgplayerUtils.Buffer();\n    buffer.write(Fmp4.size(size), Fmp4.type(name), ...content);\n    return buffer.buffer;\n  }\n  static extension(version, flag) {\n    return new Uint8Array([version, flag >> 16 & 0xff, flag >> 8 & 0xff, flag & 0xff]);\n  }\n  static ftyp() {\n    return Fmp4.initBox(24, 'ftyp', new Uint8Array([0x69, 0x73, 0x6F, 0x6D, // isom,\n    0x0, 0x0, 0x00, 0x01, // minor_version: 0x01\n    0x69, 0x73, 0x6F, 0x6D, // isom\n    0x61, 0x76, 0x63, 0x31 // avc1\n    ]));\n  }\n  static moov({ type, meta }) {\n    let size = 8;\n    let mvhd = Fmp4.mvhd(meta.duration, meta.timescale);\n    let trak;\n\n    if (type === 'video') {\n      trak = Fmp4.videoTrak(meta);\n    } else {\n      trak = Fmp4.audioTrak(meta);\n    }\n\n    let mvex = Fmp4.mvex(meta.duration, meta.timescale || 1000, meta.id);\n    [mvhd, trak, mvex].forEach(item => {\n      size += item.byteLength;\n    });\n    return Fmp4.initBox(size, 'moov', mvhd, trak, mvex);\n  }\n  static mvhd(duration, timescale = 1000) {\n    // duration *= timescale;\n    let bytes = new Uint8Array([0x00, 0x00, 0x00, 0x00, // version(0) + flags     1位的box版本+3位flags   box版本，0或1，一般为0。（以下字节数均按version=0）\n    0x00, 0x00, 0x00, 0x00, // creation_time    创建时间  （相对于UTC时间1904-01-01零点的秒数）\n    0x00, 0x00, 0x00, 0x00, // modification_time   修改时间\n\n    /**\n           * timescale: 4 bytes文件媒体在1秒时间内的刻度值，可以理解为1秒长度\n           */\n    timescale >>> 24 & 0xFF, timescale >>> 16 & 0xFF, timescale >>> 8 & 0xFF, timescale & 0xFF,\n\n    /**\n           * duration: 4 bytes该track的时间长度，用duration和time scale值可以计算track时长，比如audio track的time scale = 8000,\n           * duration = 560128，时长为70.016，video track的time scale = 600, duration = 42000，时长为70\n           */\n    duration >>> 24 & 0xFF, duration >>> 16 & 0xFF, duration >>> 8 & 0xFF, duration & 0xFF, 0x00, 0x01, 0x00, 0x00, // Preferred rate: 1.0   推荐播放速率，高16位和低16位分别为小数点整数部分和小数部分，即[16.16] 格式，该值为1.0（0x00010000）表示正常前向播放\n    /**\n           * PreferredVolume(1.0, 2bytes) + reserved(2bytes)\n           * 与rate类似，[8.8] 格式，1.0（0x0100）表示最大音量\n           */\n    0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, //  reserved: 4 + 4 bytes保留位\n    0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x00, 0x00, // ----begin composition matrix----\n    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, // 视频变换矩阵   线性代数\n    0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x40, 0x00, 0x00, 0x00, // ----end composition matrix----\n    0x00, 0x00, 0x00, 0x00, // ----begin pre_defined 6 * 4 bytes----\n    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, // pre-defined 保留位\n    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, // ----end pre_defined 6 * 4 bytes----\n    0xFF, 0xFF, 0xFF, 0xFF // next_track_ID 下一个track使用的id号\n    ]);\n    return Fmp4.initBox(8 + bytes.length, 'mvhd', new Uint8Array(bytes));\n  }\n  static videoTrak(data) {\n    let size = 8;\n\n    let tkhd = Fmp4.tkhd({\n      id: 1,\n      duration: data.duration,\n      timescale: data.timescale || 1000,\n      width: data.presentWidth,\n      height: data.presentHeight,\n      type: 'video'\n    });\n    let mdia = Fmp4.mdia({\n      type: 'video',\n      timescale: data.timescale || 1000,\n      duration: data.duration,\n      avcc: data.avcc,\n      parRatio: data.parRatio,\n      width: data.presentWidth,\n      height: data.presentHeight\n    });\n    [tkhd, mdia].forEach(item => {\n      size += item.byteLength;\n    });\n    return Fmp4.initBox(size, 'trak', tkhd, mdia);\n  }\n  static audioTrak(data) {\n    let size = 8;\n    let tkhd = Fmp4.tkhd({\n      id: 2,\n      duration: data.duration,\n      timescale: data.timescale || 1000,\n      width: 0,\n      height: 0,\n      type: 'audio'\n    });\n    let mdia = Fmp4.mdia({\n      type: 'audio',\n      timescale: data.timescale || 1000,\n      duration: data.duration,\n      channelCount: data.channelCount,\n      samplerate: data.sampleRate,\n      config: data.config\n    });\n    [tkhd, mdia].forEach(item => {\n      size += item.byteLength;\n    });\n    return Fmp4.initBox(size, 'trak', tkhd, mdia);\n  }\n  static tkhd(data) {\n    let id = data.id;\n    let duration = data.duration;\n    let width = data.width;\n    let height = data.height;\n    let content = new Uint8Array([0x00, 0x00, 0x00, 0x07, // version(0) + flags 1位版本 box版本，0或1，一般为0。（以下字节数均按version=0）按位或操作结果值，预定义如下：\n    // 0x000001 track_enabled，否则该track不被播放；\n    // 0x000002 track_in_movie，表示该track在播放中被引用；\n    // 0x000004 track_in_preview，表示该track在预览时被引用。\n    // 一般该值为7，1+2+4 如果一个媒体所有track均未设置track_in_movie和track_in_preview，将被理解为所有track均设置了这两项；对于hint track，该值为0\n    // hint track 这个特殊的track并不包含媒体数据，而是包含了一些将其他数据track打包成流媒体的指示信息。\n    0x00, 0x00, 0x00, 0x00, // creation_time创建时间（相对于UTC时间1904-01-01零点的秒数）\n    0x00, 0x00, 0x00, 0x00, // modification time 修改时间\n    id >>> 24 & 0xFF, // track_ID: 4 bytes id号，不能重复且不能为0\n    id >>> 16 & 0xFF, id >>> 8 & 0xFF, id & 0xFF, 0x00, 0x00, 0x00, 0x00, // reserved: 4 bytes    保留位\n    duration >>> 24 & 0xFF, // duration: 4 bytes track的时间长度\n    duration >>> 16 & 0xFF, duration >>> 8 & 0xFF, duration & 0xFF, 0x00, 0x00, 0x00, 0x00, // reserved: 2 * 4 bytes    保留位\n    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, // layer(2bytes) + alternate_group(2bytes)  视频层，默认为0，值小的在上层.track分组信息，默认为0表示该track未与其他track有群组关系\n    0x00, 0x00, 0x00, 0x00, // volume(2bytes) + reserved(2bytes)    [8.8] 格式，如果为音频track，1.0（0x0100）表示最大音量；否则为0   +保留位\n    0x00, 0x01, 0x00, 0x00, // ----begin composition matrix----\n    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x00, 0x00, // 视频变换矩阵\n    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x40, 0x00, 0x00, 0x00, // ----end composition matrix----\n    width >>> 8 & 0xFF, // //宽度\n    width & 0xFF, 0x00, 0x00, height >>> 8 & 0xFF, // 高度\n    height & 0xFF, 0x00, 0x00]);\n    return Fmp4.initBox(8 + content.byteLength, 'tkhd', content);\n  }\n  static edts(data) {\n    let buffer = new _xgplayerUtils.Buffer();\n    let duration = data.duration;\n    let mediaTime = data.mediaTime;\n    buffer.write(Fmp4.size(36), Fmp4.type('edts'));\n    // elst\n    buffer.write(Fmp4.size(28), Fmp4.type('elst'));\n    buffer.write(new Uint8Array([0x00, 0x00, 0x00, 0x01, // entry count\n    duration >> 24 & 0xff, duration >> 16 & 0xff, duration >> 8 & 0xff, duration & 0xff, mediaTime >> 24 & 0xff, mediaTime >> 16 & 0xff, mediaTime >> 8 & 0xff, mediaTime & 0xff, 0x00, 0x00, 0x00, 0x01 // media rate\n    ]));\n    return buffer.buffer;\n  }\n  static mdia(data) {\n    let size = 8;\n    let mdhd = Fmp4.mdhd(data.timescale, data.duration);\n    let hdlr = Fmp4.hdlr(data.type);\n    let minf = Fmp4.minf(data);\n    [mdhd, hdlr, minf].forEach(item => {\n      size += item.byteLength;\n    });\n    return Fmp4.initBox(size, 'mdia', mdhd, hdlr, minf);\n  }\n  static mdhd(timescale = 1000, duration) {\n    let content = new Uint8Array([0x00, 0x00, 0x00, 0x00, // creation_time    创建时间\n    0x00, 0x00, 0x00, 0x00, // modification_time修改时间\n    timescale >>> 24 & 0xFF, // timescale: 4 bytes    文件媒体在1秒时间内的刻度值，可以理解为1秒长度\n    timescale >>> 16 & 0xFF, timescale >>> 8 & 0xFF, timescale & 0xFF, duration >>> 24 & 0xFF, // duration: 4 bytes  track的时间长度\n    duration >>> 16 & 0xFF, duration >>> 8 & 0xFF, duration & 0xFF, 0x55, 0xC4, // language: und (undetermined) 媒体语言码。最高位为0，后面15位为3个字符（见ISO 639-2/T标准中定义）\n    0x00, 0x00 // pre_defined = 0\n    ]);\n    return Fmp4.initBox(12 + content.byteLength, 'mdhd', Fmp4.extension(0, 0), content);\n  }\n  static hdlr(type) {\n    let value = [0x00, // version 0\n    0x00, 0x00, 0x00, // flags\n    0x00, 0x00, 0x00, 0x00, // pre_defined\n    0x76, 0x69, 0x64, 0x65, // handler_type: 'vide'\n    0x00, 0x00, 0x00, 0x00, // reserved\n    0x00, 0x00, 0x00, 0x00, // reserved\n    0x00, 0x00, 0x00, 0x00, // reserved\n    0x56, 0x69, 0x64, 0x65, 0x6f, 0x48, 0x61, 0x6e, 0x64, 0x6c, 0x65, 0x72, 0x00 // name: 'VideoHandler'\n    ];\n    if (type === 'audio') {\n      value.splice(8, 4, ...[0x73, 0x6f, 0x75, 0x6e]);\n      value.splice(24, 13, ...[0x53, 0x6f, 0x75, 0x6e, 0x64, 0x48, 0x61, 0x6e, 0x64, 0x6c, 0x65, 0x72, 0x00]);\n    }\n    return Fmp4.initBox(8 + value.length, 'hdlr', new Uint8Array(value));\n  }\n  static minf(data) {\n    let size = 8;\n    let vmhd = data.type === 'video' ? Fmp4.vmhd() : Fmp4.smhd();\n    let dinf = Fmp4.dinf();\n    let stbl = Fmp4.stbl(data);\n    [vmhd, dinf, stbl].forEach(item => {\n      size += item.byteLength;\n    });\n    return Fmp4.initBox(size, 'minf', vmhd, dinf, stbl);\n  }\n  static vmhd() {\n    return Fmp4.initBox(20, 'vmhd', new Uint8Array([0x00, // version\n    0x00, 0x00, 0x01, // flags\n    0x00, 0x00, // graphicsmode\n    0x00, 0x00, 0x00, 0x00, 0x00, 0x00 // opcolor\n    ]));\n  }\n  static smhd() {\n    return Fmp4.initBox(16, 'smhd', new Uint8Array([0x00, // version\n    0x00, 0x00, 0x00, // flags\n    0x00, 0x00, // balance\n    0x00, 0x00 // reserved\n    ]));\n  }\n  static dinf() {\n    let buffer = new _xgplayerUtils.Buffer();\n    let dref = [0x00, // version 0\n    0x00, 0x00, 0x00, // flags\n    0x00, 0x00, 0x00, 0x01, // entry_count\n    0x00, 0x00, 0x00, 0x0c, // entry_size\n    0x75, 0x72, 0x6c, 0x20, // 'url' type\n    0x00, // version 0\n    0x00, 0x00, 0x01 // entry_flags\n    ];\n    buffer.write(Fmp4.size(36), Fmp4.type('dinf'), Fmp4.size(28), Fmp4.type('dref'), new Uint8Array(dref));\n    return buffer.buffer;\n  }\n  static stbl(data) {\n    let size = 8;\n    let stsd = Fmp4.stsd(data);\n    let stts = Fmp4.stts();\n    let stsc = Fmp4.stsc();\n    let stsz = Fmp4.stsz();\n    let stco = Fmp4.stco();\n    [stsd, stts, stsc, stsz, stco].forEach(item => {\n      size += item.byteLength;\n    });\n    return Fmp4.initBox(size, 'stbl', stsd, stts, stsc, stsz, stco);\n  }\n  static stsd(data) {\n    let content;\n    if (data.type === 'audio') {\n      // if (!data.isAAC && data.codec === 'mp4') {\n      //     content = FMP4.mp3(data);\n      // } else {\n      //\n      // }\n      // 支持mp4a\n      content = Fmp4.mp4a(data);\n    } else {\n      content = Fmp4.avc1(data);\n    }\n    return Fmp4.initBox(16 + content.byteLength, 'stsd', Fmp4.extension(0, 0), new Uint8Array([0x00, 0x00, 0x00, 0x01]), content);\n  }\n  static mp4a(data) {\n    let content = new Uint8Array([0x00, 0x00, 0x00, // reserved\n    0x00, 0x00, 0x00, // reserved\n    0x00, 0x01, // data_reference_index\n    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, // reserved\n    0x00, data.channelCount, // channelcount\n    0x00, 0x10, // sampleSize:16bits\n    0x00, 0x00, 0x00, 0x00, // reserved2\n    data.samplerate >> 8 & 0xff, data.samplerate & 0xff, //\n    0x00, 0x00]);\n    let esds = Fmp4.esds(data.config);\n    return Fmp4.initBox(8 + content.byteLength + esds.byteLength, 'mp4a', content, esds);\n  }\n  static esds(config = [43, 146, 8, 0]) {\n    const configlen = config.length;\n    let buffer = new _xgplayerUtils.Buffer();\n    let content = new Uint8Array([0x00, // version 0\n    0x00, 0x00, 0x00, // flags\n\n    0x03, // descriptor_type\n    0x17 + configlen, // length\n    0x00, 0x01, // es_id\n    0x00, // stream_priority\n\n    0x04, // descriptor_type\n    0x0f + configlen, // length\n    0x40, // codec : mpeg4_audio\n    0x15, // stream_type\n    0x00, 0x00, 0x00, // buffer_size\n    0x00, 0x00, 0x00, 0x00, // maxBitrate\n    0x00, 0x00, 0x00, 0x00, // avgBitrate\n\n    0x05 // descriptor_type\n    ].concat([configlen]).concat(config).concat([0x06, 0x01, 0x02]));\n    buffer.write(Fmp4.size(8 + content.byteLength), Fmp4.type('esds'), content);\n    return buffer.buffer;\n  }\n  static avc1(data) {\n    let buffer = new _xgplayerUtils.Buffer();\n    let size = 40; // 8(avc1)+8(avcc)+8(btrt)+16(pasp)\n    // let sps = data.sps\n    // let pps = data.pps\n    let width = data.width;\n    let height = data.height;\n    let hSpacing = data.parRatio.height;\n    let vSpacing = data.parRatio.width;\n    // let avccBuffer = new Buffer()\n    // avccBuffer.write(new Uint8Array([\n    //   0x01, // version\n    //   sps[1], // profile\n    //   sps[2], // profile compatible\n    //   sps[3], // level\n    //   0xfc | 3,\n    //   0xE0 | 1 // 目前只处理一个sps\n    // ].concat([sps.length >>> 8 & 0xff, sps.length & 0xff])))\n    // avccBuffer.write(sps, new Uint8Array([1, pps.length >>> 8 & 0xff, pps.length & 0xff]), pps)\n\n    let avcc = data.avcc;\n    let avc1 = new Uint8Array([0x00, 0x00, 0x00, // reserved\n    0x00, 0x00, 0x00, // reserved\n    0x00, 0x01, // data_reference_index\n    0x00, 0x00, // pre_defined\n    0x00, 0x00, // reserved\n    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, // pre_defined\n    width >> 8 & 0xff, width & 0xff, // width\n    height >> 8 & 0xff, height & 0xff, // height\n    0x00, 0x48, 0x00, 0x00, // horizresolution\n    0x00, 0x48, 0x00, 0x00, // vertresolution\n    0x00, 0x00, 0x00, 0x00, // reserved\n    0x00, 0x01, // frame_count\n    0x12, 0x64, 0x61, 0x69, 0x6C, // dailymotion/hls.js\n    0x79, 0x6D, 0x6F, 0x74, 0x69, 0x6F, 0x6E, 0x2F, 0x68, 0x6C, 0x73, 0x2E, 0x6A, 0x73, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, // compressorname\n    0x00, 0x18, // depth = 24\n    0x11, 0x11]); // pre_defined = -1\n    let btrt = new Uint8Array([0x00, 0x1c, 0x9c, 0x80, // bufferSizeDB\n    0x00, 0x2d, 0xc6, 0xc0, // maxBitrate\n    0x00, 0x2d, 0xc6, 0xc0 // avgBitrate\n    ]);\n    let pasp = new Uint8Array([hSpacing >> 24, // hSpacing\n    hSpacing >> 16 & 0xff, hSpacing >> 8 & 0xff, hSpacing & 0xff, vSpacing >> 24, // vSpacing\n    vSpacing >> 16 & 0xff, vSpacing >> 8 & 0xff, vSpacing & 0xff]);\n\n    buffer.write(Fmp4.size(size + avc1.byteLength + avcc.byteLength + btrt.byteLength), Fmp4.type('avc1'), avc1, Fmp4.size(8 + avcc.byteLength), Fmp4.type('avcC'), avcc, Fmp4.size(20), Fmp4.type('btrt'), btrt, Fmp4.size(16), Fmp4.type('pasp'), pasp);\n    return buffer.buffer;\n  }\n  static stts() {\n    let content = new Uint8Array([0x00, // version\n    0x00, 0x00, 0x00, // flags\n    0x00, 0x00, 0x00, 0x00 // entry_count\n    ]);\n    return Fmp4.initBox(16, 'stts', content);\n  }\n  static stsc() {\n    let content = new Uint8Array([0x00, // version\n    0x00, 0x00, 0x00, // flags\n    0x00, 0x00, 0x00, 0x00 // entry_count\n    ]);\n    return Fmp4.initBox(16, 'stsc', content);\n  }\n  static stco() {\n    let content = new Uint8Array([0x00, // version\n    0x00, 0x00, 0x00, // flags\n    0x00, 0x00, 0x00, 0x00 // entry_count\n    ]);\n    return Fmp4.initBox(16, 'stco', content);\n  }\n  static stsz() {\n    let content = new Uint8Array([0x00, // version\n    0x00, 0x00, 0x00, // flags\n    0x00, 0x00, 0x00, 0x00, // sample_size\n    0x00, 0x00, 0x00, 0x00 // sample_count\n    ]);\n    return Fmp4.initBox(20, 'stsz', content);\n  }\n  static mvex(duration, timescale = 1000, trackID) {\n    let buffer = new _xgplayerUtils.Buffer();\n    let mehd = _xgplayerUtils.Buffer.writeUint32(duration);\n    buffer.write(Fmp4.size(56), Fmp4.type('mvex'), Fmp4.size(16), Fmp4.type('mehd'), Fmp4.extension(0, 0), mehd, Fmp4.trex(trackID));\n    return buffer.buffer;\n  }\n  static trex(id) {\n    let content = new Uint8Array([0x00, // version 0\n    0x00, 0x00, 0x00, // flags\n    id >> 24, id >> 16 & 0xff, id >> 8 & 0xff, id & 0xff, // track_ID\n    0x00, 0x00, 0x00, 0x01, // default_sample_description_index\n    0x00, 0x00, 0x00, 0x00, // default_sample_duration\n    0x00, 0x00, 0x00, 0x00, // default_sample_size\n    0x00, 0x01, 0x00, 0x01 // default_sample_flags\n    ]);\n    return Fmp4.initBox(8 + content.byteLength, 'trex', content);\n  }\n  static moof(data) {\n    let size = 8;\n    let mfhd = Fmp4.mfhd();\n    let traf = Fmp4.traf(data);\n    [mfhd, traf].forEach(item => {\n      size += item.byteLength;\n    });\n    return Fmp4.initBox(size, 'moof', mfhd, traf);\n  }\n  static mfhd() {\n    let content = _xgplayerUtils.Buffer.writeUint32(Fmp4.sequence);\n    Fmp4.sequence += 1;\n    return Fmp4.initBox(16, 'mfhd', Fmp4.extension(0, 0), content);\n  }\n  static traf(data) {\n    let size = 8;\n    let tfhd = Fmp4.tfhd(data.id);\n    let tfdt = Fmp4.tfdt(data.time);\n    let sdtp = Fmp4.sdtp(data);\n    let trun = Fmp4.trun(data, sdtp.byteLength);\n\n    [tfhd, tfdt, trun, sdtp].forEach(item => {\n      size += item.byteLength;\n    });\n    return Fmp4.initBox(size, 'traf', tfhd, tfdt, trun, sdtp);\n  }\n  static tfhd(id) {\n    let content = _xgplayerUtils.Buffer.writeUint32(id);\n    return Fmp4.initBox(16, 'tfhd', Fmp4.extension(0, 0), content);\n  }\n  static tfdt(time) {\n    // let upper = Math.floor(time / (UINT32_MAX + 1)),\n    //     lower = Math.floor(time % (UINT32_MAX + 1));\n    return Fmp4.initBox(16, 'tfdt', Fmp4.extension(0, 0), _xgplayerUtils.Buffer.writeUint32(time));\n  }\n  static trun(data, sdtpLength) {\n    // let id = data.id;\n    // let ceil = id === 1 ? 16 : 12;\n    let buffer = new _xgplayerUtils.Buffer();\n    let sampleCount = _xgplayerUtils.Buffer.writeUint32(data.samples.length);\n    // mdat-header 8\n    // moof-header 8\n    // mfhd 16\n    // traf-header 8\n    // thhd 16\n    // tfdt 20\n    // trun-header 12\n    // sampleCount 4\n    // data-offset 4\n    // samples.length\n    let offset = _xgplayerUtils.Buffer.writeUint32(8 + 8 + 16 + 8 + 16 + 16 + 12 + 4 + 4 + 16 * data.samples.length + sdtpLength);\n    buffer.write(Fmp4.size(20 + 16 * data.samples.length), Fmp4.type('trun'), new Uint8Array([0x00, 0x00, 0x0F, 0x01]), sampleCount, offset);\n\n    // let size = buffer.buffer.byteLength\n    // let writeOffset = 0\n    // data.samples.forEach(() => {\n    //   size += 16\n    // })\n    //\n    // let trunBox = new Uint8Array(size)\n\n    // trunBox.set(buffer.buffer, 0)\n\n    data.samples.forEach(item => {\n      const flags = item.flags;\n      // console.log(item.type, item.dts, item.duration)\n\n      buffer.write(new Uint8Array([item.duration >>> 24 & 0xFF, // sample_duration\n      item.duration >>> 16 & 0xFF, item.duration >>> 8 & 0xFF, item.duration & 0xFF, item.size >>> 24 & 0xFF, // sample_size\n      item.size >>> 16 & 0xFF, item.size >>> 8 & 0xFF, item.size & 0xFF, flags.isLeading << 2 | flags.dependsOn, // sample_flags\n      flags.isDependedOn << 6 | flags.hasRedundancy << 4 | flags.isNonSync, 0x00, 0x00, // sample_degradation_priority\n      item.cts >>> 24 & 0xFF, // sample_composition_time_offset\n      item.cts >>> 16 & 0xFF, item.cts >>> 8 & 0xFF, item.cts & 0xFF]));\n      // writeOffset += 16\n      // buffer.write(Buffer.writeUint32(0));\n    });\n    return buffer.buffer;\n  }\n  static sdtp(data) {\n    let buffer = new _xgplayerUtils.Buffer();\n    buffer.write(Fmp4.size(12 + data.samples.length), Fmp4.type('sdtp'), Fmp4.extension(0, 0));\n    data.samples.forEach(item => {\n      const flags = item.flags;\n      const num = flags.isLeading << 6 | // is_leading: 2 (bit)\n      flags.dependsOn << 4 | // sample_depends_on\n      flags.isDependedOn << 2 | // sample_is_depended_on\n      flags.hasRedundancy; // sample_has_redundancy\n\n      buffer.write(new Uint8Array([num]));\n    });\n    return buffer.buffer;\n  }\n  static mdat(data) {\n    let buffer = new _xgplayerUtils.Buffer();\n    let size = 8;\n    data.samples.forEach(item => {\n      size += item.size;\n    });\n    buffer.write(Fmp4.size(size), Fmp4.type('mdat'));\n    let mdatBox = new Uint8Array(size);\n    let offset = 0;\n    mdatBox.set(buffer.buffer, offset);\n    offset += 8;\n    data.samples.forEach(item => {\n      item.buffer.forEach(unit => {\n        mdatBox.set(unit, offset);\n        offset += unit.byteLength;\n        // buffer.write(unit.data);\n      });\n    });\n    return mdatBox;\n  }\n}\nFmp4.type = name => {\n  return new Uint8Array([name.charCodeAt(0), name.charCodeAt(1), name.charCodeAt(2), name.charCodeAt(3)]);\n};\nFmp4.sequence = 1;\n\nexports.default = Fmp4;\n\n//# sourceURL=webpack://xgplayer-flv/../xgplayer-remux/src/mp4/fmp4.js?")},"../xgplayer-remux/src/mp4/index.js":
/*!******************************************!*\
      !*** ../xgplayer-remux/src/mp4/index.js ***!
      \******************************************/
/*! no static exports found */function(module,exports,__webpack_require__){eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _xgplayerUtils = __webpack_require__(/*! xgplayer-utils */ \"../xgplayer-utils/index.js\");\n\nvar _fmp = __webpack_require__(/*! ./fmp4 */ \"../xgplayer-remux/src/mp4/fmp4.js\");\n\nvar _fmp2 = _interopRequireDefault(_fmp);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst REMUX_EVENTS = _xgplayerUtils.EVENTS.REMUX_EVENTS;\n\nclass Mp4Remuxer {\n  constructor() {\n    this._dtsBase = 0;\n    this._isDtsBaseInited = false;\n\n    this.videoAllDuration = 0;\n    this.audioAllDuration = 0;\n  }\n\n  init() {\n    this.on(REMUX_EVENTS.REMUX_MEDIA, this.remux.bind(this));\n    this.on(REMUX_EVENTS.REMUX_METADATA, this.onMetaDataReady.bind(this));\n  }\n\n  destroy() {\n    this._dtsBase = -1;\n    this._dtsBaseInited = false;\n  }\n\n  reset() {\n    this._dtsBase = 0;\n    this._isDtsBaseInited = false;\n  }\n\n  remux() {\n    const { audioTrack, videoTrack } = this._context.getInstance('TRACKS');\n    !this._isDtsBaseInited && this.calcDtsBase(audioTrack, videoTrack);\n\n    this._remuxVideo(videoTrack);\n    this._remuxAudio(audioTrack);\n  }\n\n  seek() {}\n\n  onMetaDataReady(type) {\n    let initSegment = new _xgplayerUtils.Buffer();\n    let ftyp = _fmp2.default.ftyp();\n    let moov;\n    let track;\n\n    if (type === 'audio') {\n      const { audioTrack } = this._context.getInstance('TRACKS');\n      track = audioTrack;\n    } else {\n      const { videoTrack } = this._context.getInstance('TRACKS');\n      track = videoTrack;\n    }\n\n    moov = _fmp2.default.moov({ type, meta: track.meta });\n\n    initSegment.write(ftyp, moov);\n\n    let presourcebuffer = this._context.getInstance('PRE_SOURCE_BUFFER');\n    let source = presourcebuffer.getSource(type);\n    if (!source) {\n      source = presourcebuffer.createSource(type);\n    }\n\n    source.mimetype = track.meta.codec;\n    source.init = initSegment;\n    this.emit(REMUX_EVENTS.INIT_SEGMENT, type);\n  }\n\n  calcDtsBase(audioTrack, videoTrack) {\n    if (!audioTrack.samples.length && !videoTrack.samples.length) {\n      return;\n    }\n\n    let audioBase = Infinity;\n    let videoBase = Infinity;\n\n    if (audioTrack.samples && audioTrack.samples.length) {\n      audioBase = audioTrack.samples[0].dts;\n    }\n    if (videoTrack.samples && videoTrack.samples.length) {\n      videoBase = videoTrack.samples[0].dts;\n    }\n\n    this._dtsBase = Math.min(audioBase, videoBase);\n    this._isDtsBaseInited = true;\n  }\n\n  _remuxVideo(videoTrack) {\n    const track = videoTrack;\n\n    if (!videoTrack.samples || !videoTrack.samples.length) {\n      return;\n    }\n\n    let { samples } = track;\n    let firstDts = -1;\n\n    const mp4Samples = [];\n    const mdatBox = {\n      samples: []\n    };\n\n    while (samples.length) {\n      const avcSample = samples.shift();\n      const { isKeyframe } = avcSample;\n      let dts = avcSample.dts - this._dtsBase;\n\n      if (firstDts === -1) {\n        firstDts = dts;\n      }\n\n      let cts;\n      let pts;\n      if (avcSample.pts) {\n        pts = avcSample.pts - this._dtsBase;\n        cts = pts - dts;\n      }\n      if (avcSample.cts) {\n        pts = avcSample.cts + dts;\n        cts = avcSample.cts;\n      }\n\n      let mdatSample = {\n        buffer: [],\n        size: 0\n      };\n      mdatBox.samples.push(mdatSample);\n      mdatSample.buffer.push(avcSample.data);\n      mdatSample.size += avcSample.data.byteLength;\n\n      let sampleDuration = 0;\n      if (samples.length >= 1) {\n        const nextDts = samples[0].dts - this._dtsBase;\n        sampleDuration = nextDts - dts;\n      } else {\n        if (mp4Samples.length >= 1) {\n          // lastest sample, use second last duration\n          sampleDuration = mp4Samples[mp4Samples.length - 1].duration;\n        } else {\n          // the only one sample, use reference duration\n          sampleDuration = this.videoMeta.refSampleDuration;\n        }\n      }\n      this.videoAllDuration += sampleDuration;\n      mp4Samples.push({\n        dts,\n        cts,\n        pts,\n        data: avcSample.data,\n        size: avcSample.data.byteLength,\n        isKeyframe,\n        duration: sampleDuration,\n        flags: {\n          isLeading: 0,\n          dependsOn: isKeyframe ? 2 : 1,\n          isDependedOn: isKeyframe ? 1 : 0,\n          hasRedundancy: 0,\n          isNonSync: isKeyframe ? 0 : 1\n        },\n        originDts: dts,\n        type: 'video'\n      });\n    }\n\n    let moofMdat = new _xgplayerUtils.Buffer();\n\n    const moof = _fmp2.default.moof({\n      id: track.meta.id,\n      time: firstDts,\n      samples: mp4Samples\n    });\n    const mdat = _fmp2.default.mdat(mdatBox);\n    moofMdat.write(moof, mdat);\n\n    track.samples = [];\n    track.length = 0;\n\n    let presourcebuffer = this._context.getInstance('PRE_SOURCE_BUFFER');\n    let source = presourcebuffer.getSource('video');\n    if (!source) {\n      source = presourcebuffer.createSource('video');\n    }\n\n    source.data.push(moofMdat);\n\n    this.emit(REMUX_EVENTS.MEDIA_SEGMENT, 'video');\n  }\n\n  _remuxAudio(track) {\n    const { samples } = track;\n    let firstDts = -1;\n    let mp4Samples = [];\n\n    const mdatBox = {\n      samples: []\n    };\n    if (!samples || !samples.length) {\n      return;\n    }\n    let isFirstDtsInited = false;\n    while (samples.length) {\n      let sample = samples.shift();\n      const { data } = sample;\n      let dts = sample.dts - this._dtsBase;\n      const originDts = dts;\n      if (!isFirstDtsInited) {\n        firstDts = dts;\n        isFirstDtsInited = true;\n      }\n\n      let sampleDuration = 0;\n\n      if (this.audioMeta.refSampleDurationFixed) {\n        sampleDuration = this.audioMeta.refSampleDurationFixed;\n      } else if (samples.length >= 1) {\n        const nextDts = samples[0].dts - this._dtsBase;\n        sampleDuration = nextDts - dts;\n      } else {\n        if (mp4Samples.length >= 1) {\n          // use second last sample duration\n          sampleDuration = mp4Samples[mp4Samples.length - 1].duration;\n        } else {\n          // the only one sample, use reference sample duration\n          sampleDuration = this.audioMeta.refSampleDuration;\n        }\n      }\n\n      // console.log('remux audio ', dts)\n      this.audioAllDuration += sampleDuration;\n      const mp4Sample = {\n        dts,\n        pts: dts,\n        cts: 0,\n        size: data.byteLength,\n        duration: sample.duration ? sample.duration : sampleDuration,\n        flags: {\n          isLeading: 0,\n          dependsOn: 2,\n          isDependedOn: 1,\n          hasRedundancy: 0,\n          isNonSync: 0\n        },\n        isKeyframe: true,\n        originDts,\n        type: 'audio'\n      };\n\n      let mdatSample = {\n        buffer: [],\n        size: 0\n      };\n      mdatSample.buffer.push(data);\n      mdatSample.size += data.byteLength;\n\n      mdatBox.samples.push(mdatSample);\n\n      mp4Samples.push(mp4Sample);\n    }\n\n    const moofMdat = new _xgplayerUtils.Buffer();\n    const moof = _fmp2.default.moof({\n      id: track.meta.id,\n      time: firstDts,\n      samples: mp4Samples\n    });\n    const mdat = _fmp2.default.mdat(mdatBox);\n    moofMdat.write(moof, mdat);\n\n    track.samples = [];\n    track.length = 0;\n\n    let presourcebuffer = this._context.getInstance('PRE_SOURCE_BUFFER');\n    let source = presourcebuffer.getSource('audio');\n    if (!source) {\n      source = presourcebuffer.createSource('audio');\n    }\n    source.data.push(moofMdat);\n    this.emit(REMUX_EVENTS.MEDIA_SEGMENT, 'audio', moofMdat);\n  }\n\n  initSilentAudio(dts, duration) {\n    const unit = Mp4Remuxer.getSilentFrame(this.audioMeta.channelCount);\n    return {\n      dts,\n      pts: dts,\n      cts: 0,\n      duration,\n      unit,\n      size: unit.byteLength,\n      originDts: dts,\n      type: 'video'\n    };\n  }\n\n  get videoMeta() {\n    return this._context.getInstance('TRACKS').videoTrack.meta;\n  }\n  get audioMeta() {\n    return this._context.getInstance('TRACKS').audioTrack.meta;\n  }\n\n  static getSilentFrame(channelCount) {\n    if (channelCount === 1) {\n      return new Uint8Array([0x00, 0xc8, 0x00, 0x80, 0x23, 0x80]);\n    } else if (channelCount === 2) {\n      return new Uint8Array([0x21, 0x00, 0x49, 0x90, 0x02, 0x19, 0x00, 0x23, 0x80]);\n    } else if (channelCount === 3) {\n      return new Uint8Array([0x00, 0xc8, 0x00, 0x80, 0x20, 0x84, 0x01, 0x26, 0x40, 0x08, 0x64, 0x00, 0x8e]);\n    } else if (channelCount === 4) {\n      return new Uint8Array([0x00, 0xc8, 0x00, 0x80, 0x20, 0x84, 0x01, 0x26, 0x40, 0x08, 0x64, 0x00, 0x80, 0x2c, 0x80, 0x08, 0x02, 0x38]);\n    } else if (channelCount === 5) {\n      return new Uint8Array([0x00, 0xc8, 0x00, 0x80, 0x20, 0x84, 0x01, 0x26, 0x40, 0x08, 0x64, 0x00, 0x82, 0x30, 0x04, 0x99, 0x00, 0x21, 0x90, 0x02, 0x38]);\n    } else if (channelCount === 6) {\n      return new Uint8Array([0x00, 0xc8, 0x00, 0x80, 0x20, 0x84, 0x01, 0x26, 0x40, 0x08, 0x64, 0x00, 0x82, 0x30, 0x04, 0x99, 0x00, 0x21, 0x90, 0x02, 0x00, 0xb2, 0x00, 0x20, 0x08, 0xe0]);\n    }\n    return null;\n  }\n}\nexports.default = Mp4Remuxer;\n\n//# sourceURL=webpack://xgplayer-flv/../xgplayer-remux/src/mp4/index.js?")},"../xgplayer-utils/index.js":
/*!**********************************!*\
      !*** ../xgplayer-utils/index.js ***!
      \**********************************/
/*! no static exports found */function(module,exports,__webpack_require__){eval('\n\nmodule.exports = {\n  Context: __webpack_require__(/*! ./src/context */ "../xgplayer-utils/src/context.js").default,\n\n  // Modules from constants\n  EVENTS: __webpack_require__(/*! ./src/constants/events */ "../xgplayer-utils/src/constants/events.js").default,\n  WORKER_COMMANDS: __webpack_require__(/*! ./src/constants/worker-commands */ "../xgplayer-utils/src/constants/worker-commands.js").default,\n\n  // Modules from env\n  sniffer: __webpack_require__(/*! ./src/env/sniffer */ "../xgplayer-utils/src/env/sniffer.js").default,\n  isLe: __webpack_require__(/*! ./src/env/isle */ "../xgplayer-utils/src/env/isle.js").default,\n  UTF8: __webpack_require__(/*! ./src/env/utf8 */ "../xgplayer-utils/src/env/utf8.js").default,\n\n  // Models\n  MediaInfo: __webpack_require__(/*! ./src/models/media-info */ "../xgplayer-utils/src/models/media-info.js").default,\n  MediaSample: __webpack_require__(/*! ./src/models/media-sample */ "../xgplayer-utils/src/models/media-sample.js").default,\n  MediaSegment: __webpack_require__(/*! ./src/models/media-segment */ "../xgplayer-utils/src/models/media-segment.js").default,\n  MediaSegmentList: __webpack_require__(/*! ./src/models/media-segment-list */ "../xgplayer-utils/src/models/media-segment-list.js").default,\n  AudioTrackMeta: __webpack_require__(/*! ./src/models/track-meta */ "../xgplayer-utils/src/models/track-meta.js").AudioTrackMeta,\n  VideoTrackMeta: __webpack_require__(/*! ./src/models/track-meta */ "../xgplayer-utils/src/models/track-meta.js").VideoTrackMeta,\n  AudioTrackSample: __webpack_require__(/*! ./src/models/track-sample */ "../xgplayer-utils/src/models/track-sample.js").AudioTrackSample,\n  VideoTrackSample: __webpack_require__(/*! ./src/models/track-sample */ "../xgplayer-utils/src/models/track-sample.js").VideoTrackSample,\n\n  // Modules from mse\n  Mse: __webpack_require__(/*! ./src/mse/index */ "../xgplayer-utils/src/mse/index.js").default,\n\n  // Modules from write\n  Stream: __webpack_require__(/*! ./src/write/stream */ "../xgplayer-utils/src/write/stream.js").default,\n  Buffer: __webpack_require__(/*! ./src/write/buffer */ "../xgplayer-utils/src/write/buffer.js").default,\n\n  MobileVideo: __webpack_require__(/*! ./src/mobile/mobile-video */ "../xgplayer-utils/src/mobile/mobile-video.js")\n};\n\n//# sourceURL=webpack://xgplayer-flv/../xgplayer-utils/index.js?')},"../xgplayer-utils/node_modules/concat-typed-array/lib/concat.js":
/*!***********************************************************************!*\
      !*** ../xgplayer-utils/node_modules/concat-typed-array/lib/concat.js ***!
      \***********************************************************************/
/*! no static exports found */function(module,exports,__webpack_require__){eval('\n\nObject.defineProperty(exports, "__esModule", {\n  value: true\n});\n\nexports.default = function (ResultConstructor) {\n  var totalLength = 0;\n\n  for (var _len = arguments.length, arrays = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    arrays[_key - 1] = arguments[_key];\n  }\n\n  var _iteratorNormalCompletion = true;\n  var _didIteratorError = false;\n  var _iteratorError = undefined;\n\n  try {\n    for (var _iterator = arrays[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n      var arr = _step.value;\n\n      totalLength += arr.length;\n    }\n  } catch (err) {\n    _didIteratorError = true;\n    _iteratorError = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion && _iterator.return) {\n        _iterator.return();\n      }\n    } finally {\n      if (_didIteratorError) {\n        throw _iteratorError;\n      }\n    }\n  }\n\n  var result = new ResultConstructor(totalLength);\n  var offset = 0;\n  var _iteratorNormalCompletion2 = true;\n  var _didIteratorError2 = false;\n  var _iteratorError2 = undefined;\n\n  try {\n    for (var _iterator2 = arrays[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n      var _arr = _step2.value;\n\n      result.set(_arr, offset);\n      offset += _arr.length;\n    }\n  } catch (err) {\n    _didIteratorError2 = true;\n    _iteratorError2 = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion2 && _iterator2.return) {\n        _iterator2.return();\n      }\n    } finally {\n      if (_didIteratorError2) {\n        throw _iteratorError2;\n      }\n    }\n  }\n\n  return result;\n};\n\n//# sourceURL=webpack://xgplayer-flv/../xgplayer-utils/node_modules/concat-typed-array/lib/concat.js?')},"../xgplayer-utils/node_modules/concat-typed-array/lib/index.js":
/*!**********************************************************************!*\
      !*** ../xgplayer-utils/node_modules/concat-typed-array/lib/index.js ***!
      \**********************************************************************/
/*! no static exports found */function(module,exports,__webpack_require__){eval('\n\nvar _concat = __webpack_require__(/*! ./concat */ "../xgplayer-utils/node_modules/concat-typed-array/lib/concat.js");\n\nvar _concat2 = _interopRequireDefault(_concat);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : { default: obj };\n}\n\nmodule.exports = _concat2.default;\n\n//# sourceURL=webpack://xgplayer-flv/../xgplayer-utils/node_modules/concat-typed-array/lib/index.js?')},"../xgplayer-utils/node_modules/webworkify-webpack/index.js":
/*!******************************************************************!*\
      !*** ../xgplayer-utils/node_modules/webworkify-webpack/index.js ***!
      \******************************************************************/
/*! no static exports found */function(module,exports,__webpack_require__){eval("\n\nfunction webpackBootstrapFunc(modules) {\n  /******/ // The module cache\n  /******/var installedModules = {};\n\n  /******/ // The require function\n  /******/function __webpack_require__(moduleId) {\n\n    /******/ // Check if module is in cache\n    /******/if (installedModules[moduleId])\n      /******/return installedModules[moduleId].exports;\n\n    /******/ // Create a new module (and put it into the cache)\n    /******/var module = installedModules[moduleId] = {\n      /******/i: moduleId,\n      /******/l: false,\n      /******/exports: {}\n      /******/ };\n\n    /******/ // Execute the module function\n    /******/modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n    /******/ // Flag the module as loaded\n    /******/module.l = true;\n\n    /******/ // Return the exports of the module\n    /******/return module.exports;\n    /******/\n  }\n\n  /******/ // expose the modules object (__webpack_modules__)\n  /******/__webpack_require__.m = modules;\n\n  /******/ // expose the module cache\n  /******/__webpack_require__.c = installedModules;\n\n  /******/ // identity function for calling harmony imports with the correct context\n  /******/__webpack_require__.i = function (value) {\n    return value;\n  };\n\n  /******/ // define getter function for harmony exports\n  /******/__webpack_require__.d = function (exports, name, getter) {\n    /******/if (!__webpack_require__.o(exports, name)) {\n      /******/Object.defineProperty(exports, name, {\n        /******/configurable: false,\n        /******/enumerable: true,\n        /******/get: getter\n        /******/ });\n      /******/\n    }\n    /******/\n  };\n\n  /******/ // define __esModule on exports\n  /******/__webpack_require__.r = function (exports) {\n    /******/Object.defineProperty(exports, '__esModule', { value: true });\n    /******/\n  };\n\n  /******/ // getDefaultExport function for compatibility with non-harmony modules\n  /******/__webpack_require__.n = function (module) {\n    /******/var getter = module && module.__esModule ?\n    /******/function getDefault() {\n      return module['default'];\n    } :\n    /******/function getModuleExports() {\n      return module;\n    };\n    /******/__webpack_require__.d(getter, 'a', getter);\n    /******/return getter;\n    /******/\n  };\n\n  /******/ // Object.prototype.hasOwnProperty.call\n  /******/__webpack_require__.o = function (object, property) {\n    return Object.prototype.hasOwnProperty.call(object, property);\n  };\n\n  /******/ // __webpack_public_path__\n  /******/__webpack_require__.p = \"/\";\n\n  /******/ // on error function for async loading\n  /******/__webpack_require__.oe = function (err) {\n    console.error(err);throw err;\n  };\n\n  var f = __webpack_require__(__webpack_require__.s = ENTRY_MODULE);\n  return f.default || f; // try to call default if defined to also support babel esmodule exports\n}\n\nvar moduleNameReqExp = '[\\\\.|\\\\-|\\\\+|\\\\w|\\/|@]+';\nvar dependencyRegExp = '\\\\(\\\\s*(\\/\\\\*.*?\\\\*\\/)?\\\\s*.*?(' + moduleNameReqExp + ').*?\\\\)'; // additional chars when output.pathinfo is true\n\n// http://stackoverflow.com/a/2593661/130442\nfunction quoteRegExp(str) {\n  return (str + '').replace(/[.?*+^$[\\]\\\\(){}|-]/g, '\\\\$&');\n}\n\nfunction isNumeric(n) {\n  return !isNaN(1 * n); // 1 * n converts integers, integers as string (\"123\"), 1e3 and \"1e3\" to integers and strings to NaN\n}\n\nfunction getModuleDependencies(sources, module, queueName) {\n  var retval = {};\n  retval[queueName] = [];\n\n  var fnString = module.toString();\n  var wrapperSignature = fnString.match(/^function\\s?\\w*\\(\\w+,\\s*\\w+,\\s*(\\w+)\\)/);\n  if (!wrapperSignature) return retval;\n  var webpackRequireName = wrapperSignature[1];\n\n  // main bundle deps\n  var re = new RegExp('(\\\\\\\\n|\\\\W)' + quoteRegExp(webpackRequireName) + dependencyRegExp, 'g');\n  var match;\n  while (match = re.exec(fnString)) {\n    if (match[3] === 'dll-reference') continue;\n    retval[queueName].push(match[3]);\n  }\n\n  // dll deps\n  re = new RegExp('\\\\(' + quoteRegExp(webpackRequireName) + '\\\\(\"(dll-reference\\\\s(' + moduleNameReqExp + '))\"\\\\)\\\\)' + dependencyRegExp, 'g');\n  while (match = re.exec(fnString)) {\n    if (!sources[match[2]]) {\n      retval[queueName].push(match[1]);\n      sources[match[2]] = __webpack_require__(match[1]).m;\n    }\n    retval[match[2]] = retval[match[2]] || [];\n    retval[match[2]].push(match[4]);\n  }\n\n  // convert 1e3 back to 1000 - this can be important after uglify-js converted 1000 to 1e3\n  var keys = Object.keys(retval);\n  for (var i = 0; i < keys.length; i++) {\n    for (var j = 0; j < retval[keys[i]].length; j++) {\n      if (isNumeric(retval[keys[i]][j])) {\n        retval[keys[i]][j] = 1 * retval[keys[i]][j];\n      }\n    }\n  }\n\n  return retval;\n}\n\nfunction hasValuesInQueues(queues) {\n  var keys = Object.keys(queues);\n  return keys.reduce(function (hasValues, key) {\n    return hasValues || queues[key].length > 0;\n  }, false);\n}\n\nfunction getRequiredModules(sources, moduleId) {\n  var modulesQueue = {\n    main: [moduleId]\n  };\n  var requiredModules = {\n    main: []\n  };\n  var seenModules = {\n    main: {}\n  };\n\n  while (hasValuesInQueues(modulesQueue)) {\n    var queues = Object.keys(modulesQueue);\n    for (var i = 0; i < queues.length; i++) {\n      var queueName = queues[i];\n      var queue = modulesQueue[queueName];\n      var moduleToCheck = queue.pop();\n      seenModules[queueName] = seenModules[queueName] || {};\n      if (seenModules[queueName][moduleToCheck] || !sources[queueName][moduleToCheck]) continue;\n      seenModules[queueName][moduleToCheck] = true;\n      requiredModules[queueName] = requiredModules[queueName] || [];\n      requiredModules[queueName].push(moduleToCheck);\n      var newModules = getModuleDependencies(sources, sources[queueName][moduleToCheck], queueName);\n      var newModulesKeys = Object.keys(newModules);\n      for (var j = 0; j < newModulesKeys.length; j++) {\n        modulesQueue[newModulesKeys[j]] = modulesQueue[newModulesKeys[j]] || [];\n        modulesQueue[newModulesKeys[j]] = modulesQueue[newModulesKeys[j]].concat(newModules[newModulesKeys[j]]);\n      }\n    }\n  }\n\n  return requiredModules;\n}\n\nmodule.exports = function (moduleId, options) {\n  options = options || {};\n  var sources = {\n    main: __webpack_require__.m\n  };\n\n  var requiredModules = options.all ? { main: Object.keys(sources.main) } : getRequiredModules(sources, moduleId);\n\n  var src = '';\n\n  Object.keys(requiredModules).filter(function (m) {\n    return m !== 'main';\n  }).forEach(function (module) {\n    var entryModule = 0;\n    while (requiredModules[module][entryModule]) {\n      entryModule++;\n    }\n    requiredModules[module].push(entryModule);\n    sources[module][entryModule] = '(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })';\n    src = src + 'var ' + module + ' = (' + webpackBootstrapFunc.toString().replace('ENTRY_MODULE', JSON.stringify(entryModule)) + ')({' + requiredModules[module].map(function (id) {\n      return '' + JSON.stringify(id) + ': ' + sources[module][id].toString();\n    }).join(',') + '});\\n';\n  });\n\n  src = src + 'new ((' + webpackBootstrapFunc.toString().replace('ENTRY_MODULE', JSON.stringify(moduleId)) + ')({' + requiredModules.main.map(function (id) {\n    return '' + JSON.stringify(id) + ': ' + sources.main[id].toString();\n  }).join(',') + '}))(self);';\n\n  var blob = new window.Blob([src], { type: 'text/javascript' });\n  if (options.bare) {\n    return blob;\n  }\n\n  var URL = window.URL || window.webkitURL || window.mozURL || window.msURL;\n\n  var workerUrl = URL.createObjectURL(blob);\n  var worker = new window.Worker(workerUrl);\n  worker.objectURL = workerUrl;\n\n  return worker;\n};\n\n//# sourceURL=webpack://xgplayer-flv/../xgplayer-utils/node_modules/webworkify-webpack/index.js?")},"../xgplayer-utils/src/constants/events.js":
/*!*************************************************!*\
      !*** ../xgplayer-utils/src/constants/events.js ***!
      \*************************************************/
/*! no static exports found */function(module,exports,__webpack_require__){eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst LOADER_EVENTS = {\n  LADER_START: 'LOADER_START',\n  LOADER_DATALOADED: 'LOADER_DATALOADED',\n  LOADER_COMPLETE: 'LOADER_COMPLETE',\n  LOADER_ERROR: 'LOADER_ERROR'\n};\n\nconst DEMUX_EVENTS = {\n  DEMUX_START: 'DEMUX_START',\n  DEMUX_COMPLETE: 'DEMUX_COMPLETE',\n  DEMUX_ERROR: 'DEMUX_ERROR',\n  METADATA_PARSED: 'METADATA_PARSED',\n  VIDEO_METADATA_CHANGE: 'VIDEO_METADATA_CHANGE',\n  AUDIO_METADATA_CHANGE: 'AUDIO_METADATA_CHANGE',\n  MEDIA_INFO: 'MEDIA_INFO'\n};\n\nconst REMUX_EVENTS = {\n  REMUX_METADATA: 'REMUX_METADATA',\n  REMUX_MEDIA: 'REMUX_MEDIA',\n  MEDIA_SEGMENT: 'MEDIA_SEGMENT',\n  REMUX_ERROR: 'REMUX_ERROR',\n  INIT_SEGMENT: 'INIT_SEGMENT'\n};\n\nconst MSE_EVENTS = {\n  SOURCE_UPDATE_END: 'SOURCE_UPDATE_END'\n\n  // hls专有events\n};const HLS_EVENTS = {\n  RETRY_TIME_EXCEEDED: 'RETRY_TIME_EXCEEDED'\n};\n\nconst ALLEVENTS = Object.assign({}, LOADER_EVENTS, DEMUX_EVENTS, REMUX_EVENTS, MSE_EVENTS, HLS_EVENTS);\n\nconst FlvAllowedEvents = [];\nconst HlsAllowedEvents = [];\n\nfor (let key in ALLEVENTS) {\n  if (ALLEVENTS.hasOwnProperty(key)) {\n    FlvAllowedEvents.push(ALLEVENTS[key]);\n  }\n}\n\nfor (let key in ALLEVENTS) {\n  if (ALLEVENTS.hasOwnProperty(key)) {\n    HlsAllowedEvents.push(ALLEVENTS[key]);\n  }\n}\n\nexports.default = {\n  ALLEVENTS,\n  HLS_EVENTS,\n  REMUX_EVENTS,\n  DEMUX_EVENTS,\n  MSE_EVENTS,\n  LOADER_EVENTS,\n  FlvAllowedEvents,\n  HlsAllowedEvents\n};\n\n//# sourceURL=webpack://xgplayer-flv/../xgplayer-utils/src/constants/events.js?")},"../xgplayer-utils/src/constants/worker-commands.js":
/*!**********************************************************!*\
      !*** ../xgplayer-utils/src/constants/worker-commands.js ***!
      \**********************************************************/
/*! no static exports found */function(module,exports,__webpack_require__){eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst CONTEXT_COMOMANDS = exports.CONTEXT_COMOMANDS = {\n  ON: 'on',\n  ONCE: 'once',\n  OFF: 'off',\n  EMIT: 'emit',\n  DESTROY: 'destroy'\n};\n\n//# sourceURL=webpack://xgplayer-flv/../xgplayer-utils/src/constants/worker-commands.js?")},"../xgplayer-utils/src/context.js":
/*!****************************************!*\
      !*** ../xgplayer-utils/src/context.js ***!
      \****************************************/
/*! no static exports found */function(module,exports,__webpack_require__){eval('\n\nObject.defineProperty(exports, "__esModule", {\n  value: true\n});\n\nvar _mediaInfo = __webpack_require__(/*! ./models/media-info */ "../xgplayer-utils/src/models/media-info.js");\n\nvar _mediaInfo2 = _interopRequireDefault(_mediaInfo);\n\nvar _events = __webpack_require__(/*! events */ "../../node_modules/events/events.js");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst DIRECT_EMIT_FLAG = \'__TO__\';\n\nclass Context {\n  constructor(allowedEvents = []) {\n    this._emitter = new _events.EventEmitter();\n    this._instanceMap = {}; // 所有的解码流程实例\n    this._clsMap = {}; // 构造函数的map\n    this._inited = false;\n    this.mediaInfo = new _mediaInfo2.default();\n    this.allowedEvents = allowedEvents;\n    this._hooks = {}; // 注册在事件前/后的钩子，例如 before(\'DEMUX_COMPLETE\')\n  }\n\n  /**\n   * 从上下文中获取解码流程实例，如果没有实例，构造一个\n   * @param tag\n   * @param args\n   * @returns {*}\n   */\n  getInstance(tag) {\n    if (this._instanceMap[tag]) {\n      return this._instanceMap[tag];\n    } else {\n      // throw new Error(`${tag}实例尚未初始化`)\n      return null;\n    }\n  }\n\n  /**\n   * 初始化具体实例\n   * @param tag\n   * @param args\n   */\n  initInstance(tag, ...args) {\n    if (this._clsMap[tag]) {\n      const newInstance = new this._clsMap[tag](...args);\n      this._instanceMap[tag] = newInstance;\n      if (newInstance.init) {\n        newInstance.init(); // TODO: lifecircle\n      }\n      return newInstance;\n    } else {\n      throw new Error(`${tag}未在context中注册`);\n    }\n  }\n\n  /**\n   * 避免大量的initInstance调用，初始化所有的组件\n   * @param config\n   */\n  init(config) {\n    if (this._inited) {\n      return;\n    }\n    for (let tag in this._clsMap) {\n      // if not inited, init an instance\n      if (this._clsMap.hasOwnProperty(tag) && !this._instanceMap[tag]) {\n        this.initInstance(tag, config);\n      }\n    }\n    this._inited = true;\n  }\n\n  /**\n   * 注册一个上下文流程，提供安全的事件发送机制\n   * @param tag\n   * @param cls\n   */\n  registry(tag, cls) {\n    const emitter = this._emitter;\n    const checkMessageName = this._isMessageNameValid.bind(this);\n    const self = this;\n    const enhanced = class extends cls {\n      constructor(...args) {\n        super(...args);\n        this.listeners = {};\n        this.onceListeners = {};\n        this.TAG = tag;\n        this._context = self;\n      }\n\n      on(messageName, callback) {\n        checkMessageName(messageName);\n\n        if (this.listeners[messageName]) {\n          this.listeners[messageName].push(callback);\n        } else {\n          this.listeners[messageName] = [callback];\n        }\n\n        emitter.on(`${messageName}${DIRECT_EMIT_FLAG}${tag}`, callback); // 建立定向通信监听\n        return emitter.on(messageName, callback);\n      }\n\n      /**\n       * 在某个事件触发前执行\n       * @param messageName\n       * @param callback\n       */\n      before(messageName, callback) {\n        checkMessageName(messageName);\n        if (self._hooks[messageName]) {\n          self._hooks[messageName].push(callback);\n        } else {\n          self._hooks[messageName] = [callback];\n        }\n      }\n\n      once(messageName, callback) {\n        checkMessageName(messageName);\n\n        if (this.onceListeners[messageName]) {\n          this.onceListeners[messageName].push(callback);\n        } else {\n          this.onceListeners[messageName] = [callback];\n        }\n\n        emitter.once(`${messageName}${DIRECT_EMIT_FLAG}${tag}`, callback);\n        return emitter.once(messageName, callback);\n      }\n\n      emit(messageName, ...args) {\n        checkMessageName(messageName);\n\n        const beforeList = self._hooks[messageName];\n        if (beforeList) {\n          for (let i = 0, len = beforeList.length; i < len; i++) {\n            const callback = beforeList[i];\n            callback();\n          }\n        }\n        return emitter.emit(messageName, ...args);\n      }\n\n      /**\n       * 定向发送给某个组件单例的消息\n       * @param messageName\n       * @param args\n       */\n      emitTo(tag, messageName, ...args) {\n        checkMessageName(messageName);\n\n        return emitter.emit(`${messageName}${DIRECT_EMIT_FLAG}${tag}`, ...args);\n      }\n\n      off(messageName, callback) {\n        checkMessageName(messageName);\n        return emitter.off(messageName, callback);\n      }\n\n      removeListeners() {\n        const hasOwn = Object.prototype.hasOwnProperty.bind(this.listeners);\n\n        for (let messageName in this.listeners) {\n          if (hasOwn(messageName)) {\n            const callbacks = this.listeners[messageName] || [];\n            for (let i = 0; i < callbacks.length; i++) {\n              const callback = callbacks[i];\n              emitter.off(messageName, callback);\n              emitter.off(`${messageName}${DIRECT_EMIT_FLAG}${tag}`, callback);\n            }\n          }\n        }\n\n        for (let messageName in this.onceListeners) {\n          if (hasOwn(messageName)) {\n            const callbacks = this.onceListeners[messageName] || [];\n            for (let i = 0; i < callbacks.length; i++) {\n              const callback = callbacks[i];\n              emitter.off(messageName, callback);\n              emitter.off(`${messageName}${DIRECT_EMIT_FLAG}${tag}`, callback);\n            }\n          }\n        }\n      }\n\n      /**\n       * 在组件销毁时，默认将它注册的事件全部卸载，确保不会造成内存泄漏\n       */\n      destroy() {\n        // step1 unlisten events\n        this.removeListeners();\n\n        // step2 release from context\n        delete self._instanceMap[tag];\n        if (super.destroy) {\n          super.destroy();\n        }\n      }\n    };\n    this._clsMap[tag] = enhanced;\n\n    /**\n     * get instance immediately\n     * e.g const instance = context.registry(tag, Cls)(config)\n     * */\n    return (...args) => {\n      return this.initInstance(tag, ...args);\n    };\n  }\n\n  /**\n   * 对存在的实例进行\n   */\n  destroyInstances() {\n    Object.keys(this._instanceMap).forEach(tag => {\n      if (this._instanceMap[tag].destroy) {\n        this._instanceMap[tag].destroy();\n      }\n    });\n  }\n\n  /**\n   * 编解码流程无需关注事件的解绑\n   */\n  destroy() {\n    this._emitter = null;\n    this.allowedEvents = [];\n    this._clsMap = null;\n    this._context = null;\n    this.destroyInstances();\n  }\n\n  /**\n   * 对信道进行收拢\n   * @param messageName\n   * @private\n   */\n  _isMessageNameValid(messageName) {\n    if (!this.allowedEvents.indexOf(messageName) < 0) {\n      throw new Error(`unregistered message name: ${messageName}`);\n    }\n  }\n}\n\nexports.default = Context;\n\n//# sourceURL=webpack://xgplayer-flv/../xgplayer-utils/src/context.js?')},"../xgplayer-utils/src/env/isle.js":
/*!*****************************************!*\
      !*** ../xgplayer-utils/src/env/isle.js ***!
      \*****************************************/
/*! no static exports found */function(module,exports,__webpack_require__){eval('\n\nObject.defineProperty(exports, "__esModule", {\n  value: true\n});\nconst le = function () {\n  const buf = new ArrayBuffer(2);\n  new DataView(buf).setInt16(0, 256, true); // little-endian write\n  return new Int16Array(buf)[0] === 256; // platform-spec read, if equal then LE\n}();\n\nexports.default = le;\n\n//# sourceURL=webpack://xgplayer-flv/../xgplayer-utils/src/env/isle.js?')},"../xgplayer-utils/src/env/sniffer.js":
/*!********************************************!*\
      !*** ../xgplayer-utils/src/env/sniffer.js ***!
      \********************************************/
/*! no static exports found */function(module,exports,__webpack_require__){eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst le = function () {\n  const buf = new ArrayBuffer(2);\n  new DataView(buf).setInt16(0, 256, true); // little-endian write\n  return new Int16Array(buf)[0] === 256; // platform-spec read, if equal then LE\n}();\n\nconst sniffer = {\n  get device() {\n    let r = sniffer.os;\n    return r.isPc ? 'pc' : r.isTablet ? 'tablet' : 'mobile';\n  },\n  get browser() {\n    let ua = navigator.userAgent.toLowerCase();\n    let reg = {\n      ie: /rv:([\\d.]+)\\) like gecko/,\n      firfox: /firefox\\/([\\d.]+)/,\n      chrome: /chrome\\/([\\d.]+)/,\n      opera: /opera.([\\d.]+)/,\n      safari: /version\\/([\\d.]+).*safari/\n    };\n    return [].concat(Object.keys(reg).filter(key => reg[key].test(ua)))[0];\n  },\n  get os() {\n    let ua = navigator.userAgent;\n    let isWindowsPhone = /(?:Windows Phone)/.test(ua);\n    let isSymbian = /(?:SymbianOS)/.test(ua) || isWindowsPhone;\n    let isAndroid = /(?:Android)/.test(ua);\n    let isFireFox = /(?:Firefox)/.test(ua);\n    let isTablet = /(?:iPad|PlayBook)/.test(ua) || isAndroid && !/(?:Mobile)/.test(ua) || isFireFox && /(?:Tablet)/.test(ua);\n    let isPhone = /(?:iPhone)/.test(ua) && !isTablet;\n    let isPc = !isPhone && !isAndroid && !isSymbian;\n    return {\n      isTablet,\n      isPhone,\n      isAndroid,\n      isPc,\n      isSymbian,\n      isWindowsPhone,\n      isFireFox\n    };\n  },\n\n  get isLe() {\n    return le;\n  }\n};\n\nexports.default = sniffer;\n\n//# sourceURL=webpack://xgplayer-flv/../xgplayer-utils/src/env/sniffer.js?")},"../xgplayer-utils/src/env/utf8.js":
/*!*****************************************!*\
      !*** ../xgplayer-utils/src/env/utf8.js ***!
      \*****************************************/
/*! no static exports found */function(module,exports,__webpack_require__){eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nclass UTF8 {\n  static decode(uint8array) {\n    const out = [];\n    const input = uint8array;\n    let i = 0;\n    const length = uint8array.length;\n\n    while (i < length) {\n      if (input[i] < 0x80) {\n        out.push(String.fromCharCode(input[i]));\n        ++i;\n        continue;\n      } else if (input[i] < 0xC0) {\n        // fallthrough\n      } else if (input[i] < 0xE0) {\n        if (UTF8._checkContinuation(input, i, 1)) {\n          const ucs4 = (input[i] & 0x1F) << 6 | input[i + 1] & 0x3F;\n          if (ucs4 >= 0x80) {\n            out.push(String.fromCharCode(ucs4 & 0xFFFF));\n            i += 2;\n            continue;\n          }\n        }\n      } else if (input[i] < 0xF0) {\n        if (UTF8._checkContinuation(input, i, 2)) {\n          const ucs4 = (input[i] & 0xF) << 12 | (input[i + 1] & 0x3F) << 6 | input[i + 2] & 0x3F;\n          if (ucs4 >= 0x800 && (ucs4 & 0xF800) !== 0xD800) {\n            out.push(String.fromCharCode(ucs4 & 0xFFFF));\n            i += 3;\n            continue;\n          }\n        }\n      } else if (input[i] < 0xF8) {\n        if (UTF8._checkContinuation(input, i, 3)) {\n          let ucs4 = (input[i] & 0x7) << 18 | (input[i + 1] & 0x3F) << 12 | (input[i + 2] & 0x3F) << 6 | input[i + 3] & 0x3F;\n          if (ucs4 > 0x10000 && ucs4 < 0x110000) {\n            ucs4 -= 0x10000;\n            out.push(String.fromCharCode(ucs4 >>> 10 | 0xD800));\n            out.push(String.fromCharCode(ucs4 & 0x3FF | 0xDC00));\n            i += 4;\n            continue;\n          }\n        }\n      }\n      out.push(String.fromCharCode(0xFFFD));\n      ++i;\n    }\n\n    return out.join('');\n  }\n\n  static _checkContinuation(uint8array, start, checkLength) {\n    let array = uint8array;\n    if (start + checkLength < array.length) {\n      while (checkLength--) {\n        if ((array[++start] & 0xC0) !== 0x80) {\n          return false;\n        }\n      }\n      return true;\n    } else {\n      return false;\n    }\n  }\n}\n\nexports.default = UTF8;\n\n//# sourceURL=webpack://xgplayer-flv/../xgplayer-utils/src/env/utf8.js?")},"../xgplayer-utils/src/mobile/audio-context.js":
/*!*****************************************************!*\
      !*** ../xgplayer-utils/src/mobile/audio-context.js ***!
      \*****************************************************/
/*! no static exports found */function(module,exports,__webpack_require__){eval('\n\nObject.defineProperty(exports, "__esModule", {\n  value: true\n});\nclass AudioCtx {\n  constructor(config) {\n    this.config = Object.assign({}, config);\n    let AudioContext = window.AudioContext || window.webkitAudioContext;\n    this.context = new AudioContext();\n    this.gainNode = this.context.createGain();\n    this.gainNode.connect(this.context.destination);\n    this.meta = undefined;\n    this.samples = [];\n    this.preloadTime = this.config.preloadTime || 3;\n    this.duration = 0;\n\n    this._currentBuffer = undefined;\n    this._nextBuffer = undefined;\n    this._lastpts = undefined;\n    this._preDecode = [];\n    this._currentTime = 0;\n    this._decoding = false;\n    // 记录外部传输的状态\n    this._played = false;\n  }\n\n  get currentTime() {\n    return this._currentTime;\n  }\n\n  decodeAudio(audioTrack) {\n    let { samples } = audioTrack;\n    let data = samples;\n    audioTrack.samples = [];\n    this.setAudioData(data);\n  }\n  setAudioData(data) {\n    for (let i = 0; i < data.length; i++) {\n      data[i].pts = data[i].pts === undefined ? data[i].dts : data[i].pts;\n      this._preDecode.push(data[i]);\n    }\n    if (this._preDecode.length > 0) {\n      if (this._lastpts === undefined) {\n        this._lastpts = this._preDecode[0].pts;\n      }\n      if ((this._preDecode[this._preDecode.length - 1].pts - this._lastpts) / 1000 > this.preloadTime) {\n        this.decodeAAC();\n      }\n    }\n  }\n\n  decodeAAC() {\n    if (this._decoding) {\n      return;\n    }\n    this._decoding = true;\n    let data = this._preDecode;\n    let samples = [];\n    let _this = this;\n    let sample = data.shift();\n    while (sample) {\n      let sampleData = AudioCtx.getAACData(this.meta, sample);\n      samples.push(sampleData);\n      this._lastpts = sample.pts;\n      sample = data.shift();\n    }\n    let buffer = AudioCtx.combileData(samples);\n    try {\n      this.context.decodeAudioData(buffer.buffer, function (buffer) {\n        let audioSource = _this.context.createBufferSource();\n        audioSource.buffer = buffer;\n        audioSource.onended = _this.onSourceEnded.bind(_this);\n        _this.samples.push({\n          time: _this.duration,\n          duration: buffer.duration,\n          data: audioSource\n        });\n\n        _this.duration += buffer.duration;\n\n        if (!_this._currentBuffer) {\n          _this._currentBuffer = _this.getTimeBuffer(_this.currentTime);\n\n          if (_this._played) {\n            _this.play();\n          }\n        }\n\n        if (!_this._nextBuffer && _this._currentBuffer) {\n          _this._nextBuffer = _this.getTimeBuffer(_this.currentTime + _this._currentBuffer.duration);\n        }\n        _this._decoding = false;\n\n        if ((_this._preDecode.length > 0 && _this._preDecode[_this._preDecode.length - 1].pts - _this._lastpts) / 1000 >= _this.preloadTime) {\n          _this.decodeAAC();\n        }\n      });\n    } catch (err) {\n      console.error(err);\n    }\n  }\n\n  onSourceEnded() {\n    if (!this._nextBuffer || !this._played) {\n      return;\n    }\n    let audioSource = this._nextBuffer.data;\n    audioSource.start();\n    audioSource.connect(this.gainNode);\n    this._currentBuffer = this._nextBuffer;\n    this._currentTime = this._currentBuffer.time;\n    this._nextBuffer = this.getTimeBuffer(this.currentTime);\n    if (this._currentBuffer) {\n      this._nextBuffer = this.getTimeBuffer(this.currentTime + this._currentBuffer.duration);\n    }\n  }\n\n  play() {\n    this._played = true;\n    if (!this._currentBuffer) {\n      return;\n    }\n    let audioSource = this._currentBuffer.data;\n    audioSource.connect(this.gainNode);\n    audioSource.start();\n  }\n\n  getTimeBuffer(time) {\n    let ret;\n    for (let i = 0; i < this.samples.length; i++) {\n      let sample = this.samples[i];\n      if (sample.time <= time && sample.time + sample.duration > time) {\n        ret = sample;\n        break;\n      }\n    }\n    return ret;\n  }\n\n  setAudioMetaData(meta) {\n    this.meta = meta;\n  }\n\n  static getAACData(meta, sample) {\n    let buffer = new Uint8Array(sample.data.byteLength + 7);\n    let adts = AudioCtx.getAdts(meta, sample.data);\n    buffer.set(adts);\n    buffer.set(sample.data, 7);\n    return buffer;\n  }\n\n  static combileData(samples) {\n    // get length\n    let length = 0;\n    for (let i = 0, k = samples.length; i < k; i++) {\n      length += samples[i].byteLength;\n    }\n\n    let ret = new Uint8Array(length);\n    let offset = 0;\n    // combile data;\n    for (let i = 0, k = samples.length; i < k; i++) {\n      ret.set(samples[i], offset);\n      offset += samples[i].byteLength;\n    }\n    return ret;\n  }\n\n  static getAdts(meta, data) {\n    let adts = new Uint8Array(7);\n\n    // 设置同步位 0xfff 12bit\n    adts[0] = 0xff;\n    adts[1] = 0xf0;\n\n    // Object data (没什么人用MPEG-2了，HLS和FLV也全是MPEG-4，这里直接0)  1bit\n    // Level always 00 2bit\n    // CRC always 1 1bit\n    adts[1] = adts[1] | 0x01;\n\n    // profile 2bit\n    adts[2] = 0xc0 & meta.objectType - 1 << 6;\n\n    //sampleFrequencyIndex\n    adts[2] = adts[2] | 0x3c & meta.sampleRateIndex << 2;\n\n    //private bit 0 1bit\n    // chanel configuration 3bit\n    adts[2] = adts[2] | 0x01 & meta.channelCount >> 2;\n    adts[3] = 0xc0 & meta.channelCount << 6;\n\n    // original_copy: 0 1bit\n    // home: 0 1bit\n\n    // adts_variable_header()\n    // copyrighted_id_bit 0 1bit\n    // copyrighted_id_start 0 1bit\n\n    // aac_frame_length 13bit;\n    let aacframelength = data.byteLength + 7;\n\n    adts[3] = adts[3] | 0x03 & aacframelength >> 11;\n    adts[4] = 0xff & aacframelength >> 3;\n    adts[5] = 0xe0 & aacframelength << 5;\n\n    // adts_buffer_fullness 0x7ff 11bit\n    adts[5] = adts[5] | 0x1f;\n    adts[6] = 0xfc;\n\n    // number_of_raw_data_blocks_in_frame 0 2bit;\n    return adts;\n  }\n}\n\nexports.default = AudioCtx;\n\n//# sourceURL=webpack://xgplayer-flv/../xgplayer-utils/src/mobile/audio-context.js?')},"../xgplayer-utils/src/mobile/mobile-video.js":
/*!****************************************************!*\
      !*** ../xgplayer-utils/src/mobile/mobile-video.js ***!
      \****************************************************/
/*! no static exports found */function(module,exports,__webpack_require__){eval('\n\nvar _videoContext = __webpack_require__(/*! ./video-context */ "../xgplayer-utils/src/mobile/video-context.js");\n\nvar _videoContext2 = _interopRequireDefault(_videoContext);\n\nvar _audioContext = __webpack_require__(/*! ./audio-context */ "../xgplayer-utils/src/mobile/audio-context.js");\n\nvar _audioContext2 = _interopRequireDefault(_audioContext);\n\nvar _ticker = __webpack_require__(/*! ./ticker */ "../xgplayer-utils/src/mobile/ticker.js");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * 音画同步调和器\n */\nclass AVReconciler {\n  constructor(props) {\n    this.aCtx = props.aCtx;\n    this.vCtx = props.vCtx;\n\n    this.timeoutId = null;\n  }\n\n  doReconcile() {\n    const vCurTime = this.vCtx.currentTime || 0;\n    const aCurTime = (this.aCtx.currentTime || 0) * 1000;\n\n    const gap = vCurTime - aCurTime;\n    if (this.timeoutId) {\n      return;\n    }\n    if (gap > 2000) {// audio delayed for more than 100ms\n      // this.vCtx.pause()\n      // this.timeoutId = setTimeout(() => {\n      //   this.vCtx.play()\n      //   this.timeoutId = null\n      // }, gap)\n    } else if (gap < -200) {\n      this.vCtx.currentTime = this.vCtx.currentTime + Math.abs(gap);\n    }\n  }\n\n  destroy() {\n    this.aCtx = null;\n    this.vCtx = null;\n  }\n}\n\n// eslint-disable-next-line no-undef\nclass MobileVideo extends HTMLElement {\n  constructor(config) {\n    super();\n    let _this = this;\n    this.vCtx = new _videoContext2.default();\n    this.aCtx = new _audioContext2.default(config);\n    this.ticker = new ((0, _ticker.getTicker)())();\n    this.historyTime = 0;\n    this.reconciler = new AVReconciler({\n      vCtx: this.vCtx,\n      aCtx: this.aCtx\n    });\n\n    this.init();\n  }\n\n  init() {\n    this.vCtx.oncanplay = () => {\n      this.appendChild(this.vCtx.canvas);\n      // eslint-disable-next-line no-undef\n      this.dispatchEvent(new Event(\'canplay\'));\n    };\n\n    this.ticker.start(() => {\n      // this.reconciler.doReconcile()\n      console.log(this.aCtx.currentTime);\n    });\n  }\n\n  destroy() {\n    this.reconciler.destroy();\n  }\n\n  onDemuxComplete(videoTrack, audioTrack) {\n    this.aCtx.decodeAudio(audioTrack);\n    this.vCtx.decodeVideo(videoTrack);\n  }\n\n  setAudioMeta(meta) {\n    this.aCtx.setAudioMetaData(meta);\n  }\n\n  setVideoMeta(meta) {\n    this.vCtx.setVideoMetaData(meta);\n  }\n\n  get currentTime() {}\n\n  play() {\n    // if (!this.vCtx.)\n    this.vCtx.play();\n    this.aCtx.play();\n  }\n}\n// eslint-disable-next-line no-undef\ncustomElements.define(\'mobile-video\', MobileVideo);\n\n//# sourceURL=webpack://xgplayer-flv/../xgplayer-utils/src/mobile/mobile-video.js?')},"../xgplayer-utils/src/mobile/sourcebuffer.js":
/*!****************************************************!*\
      !*** ../xgplayer-utils/src/mobile/sourcebuffer.js ***!
      \****************************************************/
/*! no static exports found */function(module,exports,__webpack_require__){eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nclass SourceBuffer {\n  constructor(config) {\n    this.config = Object.assign({}, config);\n    this.type = this.config.type;\n    this.buffer = [];\n    this.currentGop = undefined;\n    this._lastGet = undefined;\n  }\n\n  push(frame) {\n    if (this.type === 'video') {\n      if (frame.isKeyframe) {\n        let currentGop = {\n          samples: [],\n          start: frame.dts,\n          end: frame.dts,\n          nextGop: undefined\n        };\n        if (this.currentGop) {\n          this.currentGop.nextGop = currentGop;\n        }\n        this.currentGop = currentGop;\n        this.buffer.push(this.currentGop);\n      }\n\n      if (this.currentGop) {\n        this.currentGop.samples.push(frame);\n\n        if (frame.dts < this.currentGop.start) {\n          this.currentGop.start = frame.dts;\n        }\n\n        if (frame.dts > this.currentGop.end) {\n          this.currentGop.end = frame.dts;\n        }\n      }\n    }\n  }\n\n  get(time) {\n    if (this.type === 'video') {\n      if (this.buffer.length < 1) {\n        return;\n      }\n\n      if (time === undefined) {\n        let sample = this._getNext();\n        return sample;\n      }\n    }\n  }\n\n  _getNext() {\n    if (!this._lastGet) {\n      let gop = this.buffer[0];\n      if (gop.samples.length < 1) {\n        return;\n      }\n\n      this._lastGet = {\n        gop,\n        index: 0\n      };\n      return gop.samples[0];\n    } else {\n      let gop = this._lastGet.gop;\n      let sample = gop.samples[this._lastGet.index + 1];\n      if (sample) {\n        this._lastGet.index = this._lastGet.index + 1;\n        return sample;\n      } else {\n        gop = gop.nextGop;\n        if (!gop || gop.samples.length < 1) {\n          return;\n        }\n        sample = gop.samples[0];\n        this._lastGet = {\n          gop,\n          index: 0\n        };\n        return sample;\n      }\n    }\n  }\n\n  remove(start, end) {\n    if (this.buffer.length < 0) {\n      return;\n    }\n\n    let i = 0;\n    let gop = this.buffer[0];\n    while (gop) {\n      if (gop.end < end && gop.start >= start) {\n        delete this.buffer[i];\n        gop = this.buffer[i];\n      } else {\n        i += 1;\n        gop = this.buffer[i];\n      }\n    }\n  }\n}\n\nexports.default = SourceBuffer;\n\n//# sourceURL=webpack://xgplayer-flv/../xgplayer-utils/src/mobile/sourcebuffer.js?")},"../xgplayer-utils/src/mobile/ticker.js":
/*!**********************************************!*\
      !*** ../xgplayer-utils/src/mobile/ticker.js ***!
      \**********************************************/
/*! no static exports found */function(module,exports,__webpack_require__){eval('\n\nObject.defineProperty(exports, "__esModule", {\n  value: true\n});\n/**\n * @author fuyuhao@bytedance.com\n */\n\nclass Ticker {\n  constructor(options) {\n    this.options = Object.assign({}, options || {}, {\n      interval: 16\n    });\n\n    this.callbacks = [];\n  }\n\n  start(...callbacks) {\n    this.callbacks = callbacks;\n  }\n\n  onTick() {\n    for (let i = 0, len = this.callbacks.length; i < len; i++) {\n      const callback = this.callbacks[i];\n      callback();\n    }\n  }\n\n  setInterval(interval) {\n    this.options.interval = interval;\n    return this;\n  }\n}\n\n/**\n * ticker use requestAnimationFrame\n */\nclass RafTicker extends Ticker {\n  constructor(props) {\n    super(props);\n    this.prev = null;\n    this.timerId = null;\n    this._subTimerId = null;\n\n    this._tickFunc = RafTicker.getTickFunc();\n    this.tick = this.tick.bind(this);\n  }\n\n  start(...callbacks) {\n    super.start(...callbacks);\n    this.tick();\n  }\n\n  tick(timestamp) {\n    console.log(timestamp);\n    this.nextTick();\n    this.onTick();\n  }\n\n  nextTick() {\n    const { _tickFunc } = this;\n    this.timerId = _tickFunc(this.tick);\n  }\n\n  stop() {\n    if (this.timerId) {\n      const cancelFunc = RafTicker.getCancelFunc();\n\n      cancelFunc(this.timerId);\n    }\n  }\n\n  static getTickFunc() {\n    return window.requestAnimationFrame || window.webkitRequestAnimationFrame;\n  }\n\n  static getCancelFunc() {\n    return window.cancelAnimationFrame || window.webkitCancelAnimationFrame;\n  }\n\n  static isSupported() {\n    return RafTicker.getTickFunc() !== undefined;\n  }\n}\n\n/**\n * use setTimeout for browsers without raf support\n */\nclass TimeoutTicker extends Ticker {\n  constructor(config) {\n    super(config);\n    this.timeoutId = null;\n  }\n\n  start(...callbacks) {\n    super.nextTick(...callbacks);\n    this.timeoutId = window.setInterval(() => {\n      this.onTick();\n    }, this.options.interval || 16);\n  }\n\n  stop() {\n    if (this.timeoutId) {\n      window.clearInterval(this.timeoutId);\n    }\n  }\n\n}\n\n/**\n * 返回Ticker构造函数\n * @returns {Ticker}\n */\nconst getTicker = exports.getTicker = () => {\n  if (RafTicker.isSupported()) {\n    return RafTicker;\n  } else {\n    return TimeoutTicker;\n  }\n};\n\n//# sourceURL=webpack://xgplayer-flv/../xgplayer-utils/src/mobile/ticker.js?')},"../xgplayer-utils/src/mobile/video-context.js":
/*!*****************************************************!*\
      !*** ../xgplayer-utils/src/mobile/video-context.js ***!
      \*****************************************************/
/*! no static exports found */function(module,exports,__webpack_require__){eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _webworkifyWebpack = __webpack_require__(/*! webworkify-webpack */ \"../xgplayer-utils/node_modules/webworkify-webpack/index.js\");\n\nvar _webworkifyWebpack2 = _interopRequireDefault(_webworkifyWebpack);\n\nvar _stream = __webpack_require__(/*! ../write/stream */ \"../xgplayer-utils/src/write/stream.js\");\n\nvar _stream2 = _interopRequireDefault(_stream);\n\nvar _nalunit = __webpack_require__(/*! ../../../xgplayer-codec/src/h264/nalunit */ \"../xgplayer-codec/src/h264/nalunit/index.js\");\n\nvar _nalunit2 = _interopRequireDefault(_nalunit);\n\nvar _yuvCanvas = __webpack_require__(/*! ./yuv-canvas */ \"../xgplayer-utils/src/mobile/yuv-canvas.js\");\n\nvar _yuvCanvas2 = _interopRequireDefault(_yuvCanvas);\n\nvar _sourcebuffer = __webpack_require__(/*! ./sourcebuffer */ \"../xgplayer-utils/src/mobile/sourcebuffer.js\");\n\nvar _sourcebuffer2 = _interopRequireDefault(_sourcebuffer);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nclass VideoCanvas {\n  constructor(config) {\n    this.config = Object.assign({}, config);\n    this.canvas = this.config.canvas ? this.config.canvas : document.createElement('canvas');\n    this.source = new _sourcebuffer2.default({ type: 'video' });\n    this.preloadTime = this.config.preloadTime || 3;\n    this.oncanplay = undefined;\n    this.onFirstFrame = undefined;\n    this.meta = undefined;\n    this.readyStatus = 0;\n    this.paused = true;\n    this.count = 0;\n    this.currentTime = 0;\n    this.lastPlayed = 0;\n\n    this._decoderInited = false;\n    this._avccpushed = false;\n    this._decodedFrames = {};\n    this._lastSampleDts = undefined;\n    this._baseDts = undefined;\n    this.initWasmWorker();\n  }\n\n  initWasmWorker() {\n    let _this = this;\n    this.wasmworker = (0, _webworkifyWebpack2.default)(/*require.resolve*/(/*! ./worker.js */ \"../xgplayer-utils/src/mobile/worker.js\"));\n    this.wasmworker.postMessage({\n      msg: 'init'\n    });\n    this.wasmworker.addEventListener('message', msg => {\n      switch (msg.data.msg) {\n        case 'DECODER_READY':\n          _this._decoderInited = true;\n          break;\n        case 'DECODED':\n          this._onDecoded(msg.data);\n          break;\n      }\n    });\n  }\n\n  setVideoMetaData(meta) {\n    this.meta = meta;\n    if (!this._decoderInited) {\n      return;\n    }\n    this._avccpushed = true;\n    let data = new Uint8Array(meta.sps.byteLength + 4);\n    data.set([0, 0, 0, 1]);\n    data.set(meta.sps, 4);\n    this.wasmworker.postMessage({\n      msg: 'decode',\n      data: data\n    });\n\n    data = new Uint8Array(meta.pps.byteLength + 4);\n    data.set([0, 0, 0, 1]);\n    data.set(meta.pps, 4);\n    this.wasmworker.postMessage({\n      msg: 'decode',\n      data: data\n    });\n\n    if (!this.yuvCanvas) {\n      let config = Object.assign({ meta, canvas: this.canvas }, this.config);\n      this.yuvCanvas = new _yuvCanvas2.default(config);\n    }\n    this.readyStatus = 1;\n  }\n\n  decodeVideo(videoTrack) {\n    if (!this._decoderInited) {\n      return;\n    }\n\n    if (!this._avccpushed) {\n      this.setVideoMetaData(this.meta);\n    }\n    let { samples } = videoTrack;\n    let sample = samples.shift();\n\n    while (sample) {\n      if (!this._baseDts) {\n        this._baseDts = sample.dts;\n      }\n      this.source.push(sample);\n      sample = samples.shift();\n    }\n\n    this._preload();\n  }\n\n  _preload() {\n    if (!this._lastSampleDts || this._lastSampleDts - this._baseDts < this.currentTime + this.preloadTime * 1000) {\n      let sample = this.source.get();\n      if (sample) {\n        this._lastSampleDts = sample.dts;\n        this._analyseNal(sample);\n      }\n\n      while (sample && this._lastSampleDts - this._baseDts < this.currentTime + this.preloadTime * 1000) {\n        sample = this.source.get();\n        if (sample) {\n          this._analyseNal(sample);\n          this._lastSampleDts = sample.dts;\n        }\n      }\n    }\n  }\n\n  _analyseNal(sample) {\n    let nals = _nalunit2.default.getAvccNals(new _stream2.default(sample.data.buffer));\n\n    let length = 0;\n    for (let i = 0; i < nals.length; i++) {\n      let nal = nals[i];\n      length += nal.body.byteLength + 4;\n    }\n    let offset = 0;\n    let data = new Uint8Array(length);\n    for (let i = 0; i < nals.length; i++) {\n      let nal = nals[i];\n      data.set([0, 0, 0, 1], offset);\n      offset += 4;\n      data.set(new Uint8Array(nal.body), offset);\n      offset += nal.body.byteLength;\n    }\n    this.wasmworker.postMessage({\n      msg: 'decode',\n      data: data,\n      info: {\n        dts: sample.dts,\n        pts: sample.pts ? sample.pts : sample.dts + sample.cts,\n        key: sample.isKeyframe\n      }\n    });\n  }\n\n  _onDecoded(data) {\n    let { dts } = data.info;\n    this._decodedFrames[dts] = data;\n  }\n\n  play() {\n    this.paused = false;\n    this._onTimer();\n  }\n\n  _onTimer() {\n    let renderCost = 0;\n    const renderStart = Date.now();\n    if (this.paused) {\n      return;\n    }\n    let nextTime = 1000 / 60;\n    if (this.meta) {\n      if (this.meta.frameRate && this.meta.frameRate.fixed && this.meta.frameRate.fps) {\n        nextTime = Math.ceil(1000 / this.meta.frameRate.fps);\n      }\n      let frameTimes = Object.keys(this._decodedFrames);\n      if (frameTimes.length > 0) {\n        this.currentTime += nextTime;\n        let frameTime = -1;\n        for (let i = 0; i < frameTimes.length && frameTimes[i] - this._baseDts <= this.currentTime; i++) {\n          frameTime = frameTimes[i];\n          break;\n        }\n        let frame = this._decodedFrames[frameTime];\n        if (frame) {\n          if (this.oncanplay && this.readyStatus < 4) {\n            this.oncanplay();\n            this.readyStatus = 4;\n          }\n          console.log('video time', this.currentTime);\n          this.yuvCanvas.render(frame.buffer, frame.width, frame.height);\n          renderCost = Date.now() - renderStart;\n          delete this._decodedFrames[frameTime];\n        }\n      }\n    }\n    this._cleanBuffer();\n    setTimeout(this._onTimer.bind(this), nextTime - renderCost);\n  }\n\n  _cleanBuffer() {\n    this.source.remove(0, this.currentTime);\n  }\n}\nexports.default = VideoCanvas;\n\n//# sourceURL=webpack://xgplayer-flv/../xgplayer-utils/src/mobile/video-context.js?")},"../xgplayer-utils/src/mobile/worker.js":
/*!**********************************************!*\
      !*** ../xgplayer-utils/src/mobile/worker.js ***!
      \**********************************************/
/*! no static exports found */function(module,exports,__webpack_require__){eval("\n\nconst MAX_STREAM_BUFFER_LENGTH = 1024 * 1024;\nvar Decoder = function (self) {\n  this.inited = false;\n  this.self = self;\n  this.infolist = {};\n  self.par_broadwayOnBroadwayInited = this.broadwayOnBroadwayInited.bind(this);\n  self.par_broadwayOnPictureDecoded = this.broadwayOnPictureDecoded.bind(this);\n};\n\nDecoder.prototype.toU8Array = function (ptr, length) {\n  return this.self.HEAPU8.subarray(ptr, ptr + length);\n};\n\nDecoder.prototype.init = function () {\n  Module._broadwayInit();\n  this.streamBuffer = this.toU8Array(Module._broadwayCreateStream(MAX_STREAM_BUFFER_LENGTH), MAX_STREAM_BUFFER_LENGTH);\n};\n\nDecoder.prototype.broadwayOnPictureDecoded = function (offset, width, height, infoid) {\n  let info = Object.assign({}, this.infolist[infoid]);\n  let data = this.toU8Array(offset, width * height * 3 / 2);\n  this.infolist[infoid] = null;\n  let datetemp = new Uint8Array(data.length);\n  datetemp.set(data);\n  let buffer = datetemp.buffer;\n  this.self.postMessage({\n    msg: 'DECODED',\n    width,\n    height,\n    info,\n    buffer\n  }, [buffer]);\n};\n\nDecoder.prototype.broadwayOnBroadwayInited = function () {\n  this.inited = true;\n  this.self.postMessage({ msg: 'DECODER_READY' });\n};\n\nDecoder.prototype.decode = function (data, info) {\n  let time = parseInt(new Date().getTime());\n  let infoid = time - Math.floor(time / 10e9) * 10e9;\n  this.infolist[infoid] = info;\n  this.streamBuffer.set(data);\n  Module._broadwayPlayStream(data.length, infoid);\n};\n\nvar decoder;\n\nfunction onPostRun() {\n  decoder = new Decoder(this);\n  decoder.init();\n}\n\nfunction init() {\n  self.importScripts('http://10.95.45.202:9090/examples/flv/decoder.js');\n  addOnPostRun(onPostRun.bind(self));\n}\n\nmodule.exports = function (self) {\n  self.addEventListener('message', function (e) {\n    var data = e.data;\n    if (!data.msg) {\n      self.postMessage({\n        msg: 'ERROR:invalid message'\n      });\n    } else {\n      switch (data.msg) {\n        case 'init':\n          init(self);\n          break;\n        case 'decode':\n          decoder.decode(data.data, data.info);\n          break;\n        default:\n          break;\n      }\n    }\n  }, false);\n};\n\n//# sourceURL=webpack://xgplayer-flv/../xgplayer-utils/src/mobile/worker.js?")},"../xgplayer-utils/src/mobile/yuv-canvas.js":
/*!**************************************************!*\
      !*** ../xgplayer-utils/src/mobile/yuv-canvas.js ***!
      \**************************************************/
/*! no static exports found */function(module,exports,__webpack_require__){eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nclass YUVCanvas {\n  constructor(configs) {\n    this.configs = Object.assign({}, configs);\n    this.canvas = this.configs.canvas;\n    this.meta = Object.assign({}, this.configs.meta);\n    this.chroma = this.meta.chromaFormat;\n    this.height = this.meta.presentHeight;\n    this.width = this.meta.presentWidth;\n    this.canvas.width = this.width;\n    this.canvas.height = this.height;\n    this.canvas.style.width = '100%';\n    this.canvas.style.height = '100%';\n    this._initContextGL();\n    if (this.contextGL) {\n      this._initProgram();\n      this._initBuffers();\n      this._initTextures();\n    };\n  }\n\n  _initContextGL() {\n    var canvas = this.canvas;\n    var gl = null;\n\n    var validContextNames = ['webgl', 'experimental-webgl', 'moz-webgl', 'webkit-3d'];\n    var nameIndex = 0;\n\n    while (!gl && nameIndex < validContextNames.length) {\n      var contextName = validContextNames[nameIndex];\n\n      try {\n        if (this.contextOptions) {\n          gl = canvas.getContext(contextName, this.contextOptions);\n        } else {\n          gl = canvas.getContext(contextName);\n        };\n      } catch (e) {\n        gl = null;\n      }\n\n      if (!gl || typeof gl.getParameter !== 'function') {\n        gl = null;\n      }\n\n      ++nameIndex;\n    };\n\n    this.contextGL = gl;\n  }\n\n  _initProgram() {\n    var gl = this.contextGL;\n\n    // vertex shader is the same for all types\n    var vertexShaderScript;\n    var fragmentShaderScript;\n    if (this.chroma === 420) {\n      vertexShaderScript = ['attribute vec4 vertexPos;', 'attribute vec4 texturePos;', 'attribute vec4 uTexturePos;', 'attribute vec4 vTexturePos;', 'varying vec2 textureCoord;', 'varying vec2 uTextureCoord;', 'varying vec2 vTextureCoord;', 'void main()', '{', '  gl_Position = vertexPos;', '  textureCoord = texturePos.xy;', '  uTextureCoord = uTexturePos.xy;', '  vTextureCoord = vTexturePos.xy;', '}'].join('\\n');\n\n      fragmentShaderScript = ['precision highp float;', 'varying highp vec2 textureCoord;', 'varying highp vec2 uTextureCoord;', 'varying highp vec2 vTextureCoord;', 'uniform sampler2D ySampler;', 'uniform sampler2D uSampler;', 'uniform sampler2D vSampler;', 'uniform mat4 YUV2RGB;', 'void main(void) {', '  highp float y = texture2D(ySampler,  textureCoord).r;', '  highp float u = texture2D(uSampler,  uTextureCoord).r;', '  highp float v = texture2D(vSampler,  vTextureCoord).r;', '  gl_FragColor = vec4(y, u, v, 1) * YUV2RGB;', '}'].join('\\n');\n    } else if (this.chroma === 422) {\n      vertexShaderScript = ['attribute vec4 vertexPos;', 'attribute vec4 texturePos;', 'varying vec2 textureCoord;', 'void main()', '{', '  gl_Position = vertexPos;', '  textureCoord = texturePos.xy;', '}'].join('\\n');\n\n      fragmentShaderScript = ['precision highp float;', 'varying highp vec2 textureCoord;', 'uniform sampler2D sampler;', 'uniform highp vec2 resolution;', 'uniform mat4 YUV2RGB;', 'void main(void) {', '  highp float texPixX = 1.0 / resolution.x;', '  highp float logPixX = 2.0 / resolution.x;', // half the resolution of the texture\n      '  highp float logHalfPixX = 4.0 / resolution.x;', // half of the logical resolution so every 4th pixel\n      '  highp float steps = floor(textureCoord.x / logPixX);', '  highp float uvSteps = floor(textureCoord.x / logHalfPixX);', '  highp float y = texture2D(sampler, vec2((logPixX * steps) + texPixX, textureCoord.y)).r;', '  highp float u = texture2D(sampler, vec2((logHalfPixX * uvSteps), textureCoord.y)).r;', '  highp float v = texture2D(sampler, vec2((logHalfPixX * uvSteps) + texPixX + texPixX, textureCoord.y)).r;',\n\n      // '  highp float y = texture2D(sampler,  textureCoord).r;',\n      // '  gl_FragColor = vec4(y, u, v, 1) * YUV2RGB;',\n      '  gl_FragColor = vec4(y, u, v, 1.0) * YUV2RGB;', '}'].join('\\n');\n    };\n\n    var YUV2RGB = [1.16438, 0.00000, 1.59603, -0.87079, 1.16438, -0.39176, -0.81297, 0.52959, 1.16438, 2.01723, 0.00000, -1.08139, 0, 0, 0, 1];\n    var vertexShader = gl.createShader(gl.VERTEX_SHADER);\n    gl.shaderSource(vertexShader, vertexShaderScript);\n    gl.compileShader(vertexShader);\n    if (!gl.getShaderParameter(vertexShader, gl.COMPILE_STATUS)) {\n      console.log('Vertex shader failed to compile: ' + gl.getShaderInfoLog(vertexShader));\n    }\n\n    var fragmentShader = gl.createShader(gl.FRAGMENT_SHADER);\n    gl.shaderSource(fragmentShader, fragmentShaderScript);\n    gl.compileShader(fragmentShader);\n    if (!gl.getShaderParameter(fragmentShader, gl.COMPILE_STATUS)) {\n      console.log('Fragment shader failed to compile: ' + gl.getShaderInfoLog(fragmentShader));\n    }\n\n    var program = gl.createProgram();\n    gl.attachShader(program, vertexShader);\n    gl.attachShader(program, fragmentShader);\n    gl.linkProgram(program);\n    if (!gl.getProgramParameter(program, gl.LINK_STATUS)) {\n      console.log('Program failed to compile: ' + gl.getProgramInfoLog(program));\n    }\n\n    gl.useProgram(program);\n\n    var YUV2RGBRef = gl.getUniformLocation(program, 'YUV2RGB');\n    gl.uniformMatrix4fv(YUV2RGBRef, false, YUV2RGB);\n\n    this.shaderProgram = program;\n  }\n\n  _initBuffers() {\n    var gl = this.contextGL;\n    var program = this.shaderProgram;\n\n    var vertexPosBuffer = gl.createBuffer();\n    gl.bindBuffer(gl.ARRAY_BUFFER, vertexPosBuffer);\n    gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([1, 1, -1, 1, 1, -1, -1, -1]), gl.STATIC_DRAW);\n\n    var vertexPosRef = gl.getAttribLocation(program, 'vertexPos');\n    gl.enableVertexAttribArray(vertexPosRef);\n    gl.vertexAttribPointer(vertexPosRef, 2, gl.FLOAT, false, 0, 0);\n\n    var texturePosBuffer = gl.createBuffer();\n    gl.bindBuffer(gl.ARRAY_BUFFER, texturePosBuffer);\n    gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([1, 0, 0, 0, 1, 1, 0, 1]), gl.STATIC_DRAW);\n\n    var texturePosRef = gl.getAttribLocation(program, 'texturePos');\n    gl.enableVertexAttribArray(texturePosRef);\n    gl.vertexAttribPointer(texturePosRef, 2, gl.FLOAT, false, 0, 0);\n\n    this.texturePosBuffer = texturePosBuffer;\n\n    if (this.chroma === 420) {\n      var uTexturePosBuffer = gl.createBuffer();\n      gl.bindBuffer(gl.ARRAY_BUFFER, uTexturePosBuffer);\n      gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([1, 0, 0, 0, 1, 1, 0, 1]), gl.STATIC_DRAW);\n\n      var uTexturePosRef = gl.getAttribLocation(program, 'uTexturePos');\n      gl.enableVertexAttribArray(uTexturePosRef);\n      gl.vertexAttribPointer(uTexturePosRef, 2, gl.FLOAT, false, 0, 0);\n\n      this.uTexturePosBuffer = uTexturePosBuffer;\n\n      var vTexturePosBuffer = gl.createBuffer();\n      gl.bindBuffer(gl.ARRAY_BUFFER, vTexturePosBuffer);\n      gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([1, 0, 0, 0, 1, 1, 0, 1]), gl.STATIC_DRAW);\n\n      var vTexturePosRef = gl.getAttribLocation(program, 'vTexturePos');\n      gl.enableVertexAttribArray(vTexturePosRef);\n      gl.vertexAttribPointer(vTexturePosRef, 2, gl.FLOAT, false, 0, 0);\n\n      this.vTexturePosBuffer = vTexturePosBuffer;\n    };\n  }\n\n  _initTextures() {\n    var gl = this.contextGL;\n    var program = this.shaderProgram;\n\n    if (this.chroma === 420) {\n      var yTextureRef = this._initTexture();\n      var ySamplerRef = gl.getUniformLocation(program, 'ySampler');\n      gl.uniform1i(ySamplerRef, 0);\n      this.yTextureRef = yTextureRef;\n\n      var uTextureRef = this._initTexture();\n      var uSamplerRef = gl.getUniformLocation(program, 'uSampler');\n      gl.uniform1i(uSamplerRef, 1);\n      this.uTextureRef = uTextureRef;\n\n      var vTextureRef = this._initTexture();\n      var vSamplerRef = gl.getUniformLocation(program, 'vSampler');\n      gl.uniform1i(vSamplerRef, 2);\n      this.vTextureRef = vTextureRef;\n    } else if (this.chroma === 422) {\n      // only one texture for 422\n      var textureRef = this._initTexture();\n      var samplerRef = gl.getUniformLocation(program, 'sampler');\n      gl.uniform1i(samplerRef, 0);\n      this.textureRef = textureRef;\n    };\n  }\n\n  _initTexture() {\n    var gl = this.contextGL;\n\n    var textureRef = gl.createTexture();\n    gl.bindTexture(gl.TEXTURE_2D, textureRef);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n    gl.bindTexture(gl.TEXTURE_2D, null);\n\n    return textureRef;\n  }\n\n  _drawPictureGL(data, width, height) {\n    if (this.chroma === 420) {\n      let nWidth = width;\n      var ylen = width * height;\n      var uvlen = width / 2 * (height / 2);\n      data = new Uint8Array(data);\n      let renderData = {\n        yData: data.subarray(0, ylen),\n        uData: data.subarray(ylen, ylen + uvlen),\n        vData: data.subarray(ylen + uvlen, ylen + uvlen + uvlen)\n      };\n      if (width % 4 > 0) {\n        nWidth = width + 4 - width % 4;\n        let yArray = new Uint8Array(nWidth * height);\n        for (let i = 0; i < height; i++) {\n          yArray.set(renderData.yData.subarray(i * width, (i + 1) * width), i * nWidth);\n        }\n        renderData.yData = yArray;\n      }\n\n      if (width / 2 % 4 > 0) {\n        nWidth = width / 2 + 4 - width / 2 % 4;\n        let uArray = new Uint8Array(nWidth * height / 2);\n        let vArray = new Uint8Array(nWidth * height / 2);\n        for (let i = 0; i < height / 2; i++) {\n          uArray.set(renderData.uData.subarray(i * width / 2, (i + 1) * width / 2), i * nWidth);\n          vArray.set(renderData.vData.subarray(i * width / 2, (i + 1) * width / 2), i * nWidth);\n        }\n        renderData.uData = uArray;\n        renderData.vData = vArray;\n      }\n      this._drawPictureGL420(renderData, width, height);\n    } else if (this.chroma === 422) {\n      data = new Uint8Array(data);\n      this._drawPictureGL422(width, height, data);\n    }\n  }\n\n  _drawPictureGL422(data, width, height) {\n    var gl = this.contextGL;\n    var texturePosBuffer = this.texturePosBuffer;\n\n    var textureRef = this.textureRef;\n\n    var dataPerRow = width * 2;\n    var rowCnt = height;\n\n    gl.viewport(0, 0, width, height);\n\n    var tTop = 0;\n    var tLeft = 0;\n    var tBottom = height / rowCnt;\n    var tRight = width / (dataPerRow / 2);\n    var texturePosValues = new Float32Array([tRight, tTop, tLeft, tTop, tRight, tBottom, tLeft, tBottom]);\n\n    gl.bindBuffer(gl.ARRAY_BUFFER, texturePosBuffer);\n    gl.bufferData(gl.ARRAY_BUFFER, texturePosValues, gl.DYNAMIC_DRAW);\n\n    gl.uniform2f(gl.getUniformLocation(this.shaderProgram, 'resolution'), dataPerRow, height);\n\n    gl.activeTexture(gl.TEXTURE0);\n    gl.bindTexture(gl.TEXTURE_2D, textureRef);\n    gl.texImage2D(gl.TEXTURE_2D, 0, gl.LUMINANCE, dataPerRow, rowCnt, 0, gl.LUMINANCE, gl.UNSIGNED_BYTE, data);\n\n    gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);\n  }\n\n  _drawPictureGL420(data, width, height) {\n    var gl = this.contextGL;\n    var texturePosBuffer = this.texturePosBuffer;\n    var uTexturePosBuffer = this.uTexturePosBuffer;\n    var vTexturePosBuffer = this.vTexturePosBuffer;\n\n    var yTextureRef = this.yTextureRef;\n    var uTextureRef = this.uTextureRef;\n    var vTextureRef = this.vTextureRef;\n\n    var yData = data.yData;\n    var uData = data.uData;\n    var vData = data.vData;\n\n    var yDataPerRow = width;\n    var yRowCnt = height;\n\n    var uDataPerRow = width / 2;\n    var uRowCnt = height / 2;\n\n    var vDataPerRow = uDataPerRow;\n    var vRowCnt = uRowCnt;\n    gl.viewport(0, 0, this.width, this.height);\n\n    var tTop = 0;\n    var tLeft = 0;\n    var tBottom = height / yRowCnt;\n    var tRight = width / yDataPerRow;\n    var texturePosValues = new Float32Array([tRight, tTop, tLeft, tTop, tRight, tBottom, tLeft, tBottom]);\n\n    gl.bindBuffer(gl.ARRAY_BUFFER, texturePosBuffer);\n    gl.bufferData(gl.ARRAY_BUFFER, texturePosValues, gl.DYNAMIC_DRAW);\n\n    tBottom = height / 2 / uRowCnt;\n    tRight = width / 2 / uDataPerRow;\n    var uTexturePosValues = new Float32Array([tRight, tTop, tLeft, tTop, tRight, tBottom, tLeft, tBottom]);\n\n    gl.bindBuffer(gl.ARRAY_BUFFER, uTexturePosBuffer);\n    gl.bufferData(gl.ARRAY_BUFFER, uTexturePosValues, gl.DYNAMIC_DRAW);\n\n    tBottom = height / 2 / vRowCnt;\n    tRight = width / 2 / vDataPerRow;\n\n    var vTexturePosValues = new Float32Array([tRight, tTop, tLeft, tTop, tRight, tBottom, tLeft, tBottom]);\n\n    gl.bindBuffer(gl.ARRAY_BUFFER, vTexturePosBuffer);\n    gl.bufferData(gl.ARRAY_BUFFER, vTexturePosValues, gl.DYNAMIC_DRAW);\n\n    gl.activeTexture(gl.TEXTURE0);\n    gl.bindTexture(gl.TEXTURE_2D, yTextureRef);\n    gl.texImage2D(gl.TEXTURE_2D, 0, gl.LUMINANCE, yDataPerRow, yRowCnt, 0, gl.LUMINANCE, gl.UNSIGNED_BYTE, yData);\n\n    gl.activeTexture(gl.TEXTURE1);\n    gl.bindTexture(gl.TEXTURE_2D, uTextureRef);\n    gl.texImage2D(gl.TEXTURE_2D, 0, gl.LUMINANCE, uDataPerRow, uRowCnt, 0, gl.LUMINANCE, gl.UNSIGNED_BYTE, uData);\n\n    gl.activeTexture(gl.TEXTURE2);\n    gl.bindTexture(gl.TEXTURE_2D, vTextureRef);\n    gl.texImage2D(gl.TEXTURE_2D, 0, gl.LUMINANCE, vDataPerRow, vRowCnt, 0, gl.LUMINANCE, gl.UNSIGNED_BYTE, vData);\n\n    gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);\n  }\n\n  _drawPictureRGB(data) {}\n\n  render(data, width, height) {\n    var gl = this.contextGL;\n    if (gl) {\n      this._drawPictureGL(data, width, height);\n    } else {\n      this._drawPictureRGB(data);\n    }\n  }\n}\n\nexports.default = YUVCanvas;\n\n//# sourceURL=webpack://xgplayer-flv/../xgplayer-utils/src/mobile/yuv-canvas.js?")},"../xgplayer-utils/src/models/media-info.js":
/*!**************************************************!*\
      !*** ../xgplayer-utils/src/models/media-info.js ***!
      \**************************************************/
/*! no static exports found */function(module,exports,__webpack_require__){eval('\n\nObject.defineProperty(exports, "__esModule", {\n  value: true\n});\nconst isObjectFilled = obj => {\n  for (let key in obj) {\n    if (obj.hasOwnProperty(key)) {\n      if (obj[key] === null) {\n        return false;\n      }\n    }\n  }\n  return true;\n};\n\nclass MediaInfo {\n  constructor() {\n    this.mimeType = null;\n    this.duration = null;\n\n    this.hasVideo = null;\n    this.video = {\n      codec: null,\n      width: null,\n      height: null,\n      profile: null,\n      level: null,\n      frameRate: {\n        fixed: true,\n        fps: 25,\n        fps_num: 25000,\n        fps_den: 1000\n      },\n      chromaFormat: null,\n      parRatio: {\n        width: 1,\n        height: 1\n      }\n    };\n\n    this.hasAudio = null;\n\n    this.audio = {\n      codec: null,\n      sampleRate: null,\n      sampleRateIndex: null,\n      channelCount: null\n    };\n  }\n\n  isComplete() {\n    return MediaInfo.isBaseInfoReady(this) && MediaInfo.isVideoReady(this) && MediaInfo.isAudioReady(this);\n  }\n\n  static isBaseInfoReady(mediaInfo) {\n    return isObjectFilled(mediaInfo);\n  }\n\n  static isVideoReady(mediaInfo) {\n    if (!mediaInfo.hasVideo) {\n      return true;\n    }\n\n    return isObjectFilled(mediaInfo.video);\n  }\n\n  static isAudioReady(mediaInfo) {\n    if (!mediaInfo.hasAudio) {\n      return true;\n    }\n\n    return isObjectFilled(mediaInfo.video);\n  }\n}\nexports.default = MediaInfo;\n\n//# sourceURL=webpack://xgplayer-flv/../xgplayer-utils/src/models/media-info.js?')},"../xgplayer-utils/src/models/media-sample.js":
/*!****************************************************!*\
      !*** ../xgplayer-utils/src/models/media-sample.js ***!
      \****************************************************/
/*! no static exports found */function(module,exports,__webpack_require__){eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nclass MediaSample {\n  constructor(info) {\n    let _default = MediaSample.getDefaultInf();\n\n    if (!info || Object.prototype.toString.call(info) !== '[object Object]') {\n      return _default;\n    }\n    let sample = Object.assign({}, _default, info);\n\n    Object.entries(sample).forEach(([k, v]) => {\n      this[k] = v;\n    });\n  }\n\n  static getDefaultInf() {\n    return {\n      dts: null,\n      pts: null,\n      duration: null,\n      position: null,\n      isRAP: false, // is Random access point\n      originDts: null\n    };\n  }\n}\nexports.default = MediaSample;\n\n//# sourceURL=webpack://xgplayer-flv/../xgplayer-utils/src/models/media-sample.js?")},"../xgplayer-utils/src/models/media-segment-list.js":
/*!**********************************************************!*\
      !*** ../xgplayer-utils/src/models/media-segment-list.js ***!
      \**********************************************************/
/*! no static exports found */function(module,exports,__webpack_require__){eval('\n\nObject.defineProperty(exports, "__esModule", {\n    value: true\n});\nclass MediaSegmentList {\n\n    constructor(type) {\n        this._type = type;\n        this._list = [];\n        this._lastAppendLocation = -1; // cached last insert location\n    }\n\n    get type() {\n        return this._type;\n    }\n\n    get length() {\n        return this._list.length;\n    }\n\n    isEmpty() {\n        return this._list.length === 0;\n    }\n\n    clear() {\n        this._list = [];\n        this._lastAppendLocation = -1;\n    }\n\n    _searchNearestSegmentBefore(beginDts) {\n        let list = this._list;\n        if (list.length === 0) {\n            return -2;\n        }\n        let last = list.length - 1;\n        let mid = 0;\n        let lbound = 0;\n        let ubound = last;\n\n        let idx = 0;\n\n        if (beginDts < list[0].originDts) {\n            idx = -1;\n            return idx;\n        }\n\n        while (lbound <= ubound) {\n            mid = lbound + Math.floor((ubound - lbound) / 2);\n            if (mid === last || beginDts > list[mid].lastSample.originDts && beginDts < list[mid + 1].originDts) {\n                idx = mid;\n                break;\n            } else if (list[mid].originDts < beginDts) {\n                lbound = mid + 1;\n            } else {\n                ubound = mid - 1;\n            }\n        }\n        return idx;\n    }\n\n    _searchNearestSegmentAfter(beginDts) {\n        return this._searchNearestSegmentBefore(beginDts) + 1;\n    }\n\n    append(segment) {\n        let list = this._list;\n        let lastAppendIdx = this._lastAppendLocation;\n        let insertIdx = 0;\n\n        if (lastAppendIdx !== -1 && lastAppendIdx < list.length && segment.originStartDts >= list[lastAppendIdx].lastSample.originDts && (lastAppendIdx === list.length - 1 || lastAppendIdx < list.length - 1 && segment.originStartDts < list[lastAppendIdx + 1].originStartDts)) {\n            insertIdx = lastAppendIdx + 1; // use cached location idx\n        } else {\n            if (list.length > 0) {\n                insertIdx = this._searchNearestSegmentBefore(segment.originStartDts) + 1;\n            }\n        }\n\n        this._lastAppendLocation = insertIdx;\n        this._list.splice(insertIdx, 0, segment);\n    }\n\n    getLastSegmentBefore(beginDts) {\n        let idx = this._searchNearestSegmentBefore(beginDts);\n        if (idx >= 0) {\n            return this._list[idx];\n        } else {\n            // -1\n            return null;\n        }\n    }\n\n    getLastSampleBefore(beginDts) {\n        let segment = this.getLastSegmentBefore(beginDts);\n        if (segment !== null) {\n            return segment.lastSample;\n        } else {\n            return null;\n        }\n    }\n\n    getLastRAPBefore(beginDts) {\n        let segmentIdx = this._searchNearestSegmentBefore(beginDts);\n        let randomAccessPoints = this._list[segmentIdx].randomAccessPoints;\n        while (randomAccessPoints.length === 0 && segmentIdx > 0) {\n            segmentIdx--;\n            randomAccessPoints = this._list[segmentIdx].randomAccessPoints;\n        }\n        if (randomAccessPoints.length > 0) {\n            return randomAccessPoints[randomAccessPoints.length - 1];\n        } else {\n            return null;\n        }\n    }\n\n}\nexports.default = MediaSegmentList;\n\n//# sourceURL=webpack://xgplayer-flv/../xgplayer-utils/src/models/media-segment-list.js?')},"../xgplayer-utils/src/models/media-segment.js":
/*!*****************************************************!*\
      !*** ../xgplayer-utils/src/models/media-segment.js ***!
      \*****************************************************/
/*! no static exports found */function(module,exports,__webpack_require__){eval('\n\nObject.defineProperty(exports, "__esModule", {\n    value: true\n});\nclass MediaSegment {\n    constructor() {\n        this.startDts = -1;\n        this.endDts = -1;\n        this.startPts = -1;\n        this.endPts = -1;\n        this.originStartDts = -1;\n        this.originEndDts = -1;\n        this.randomAccessPoints = [];\n        this.firstSample = null;\n        this.lastSample = null;\n    }\n\n    addRAP(sample) {\n        sample.isRAP = true;\n        this.randomAccessPoints.push(sample);\n    }\n}\nexports.default = MediaSegment;\n\n//# sourceURL=webpack://xgplayer-flv/../xgplayer-utils/src/models/media-segment.js?')},"../xgplayer-utils/src/models/track-meta.js":
/*!**************************************************!*\
      !*** ../xgplayer-utils/src/models/track-meta.js ***!
      \**************************************************/
/*! no static exports found */function(module,exports,__webpack_require__){eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nclass AudioTrackMeta {\n  constructor(meta) {\n    const _default = {\n      sampleRate: 48000,\n      channelCount: 2,\n      codec: 'mp4a.40.2',\n      config: [41, 401, 136, 0],\n      duration: 0,\n      id: 2,\n      refSampleDuration: 21,\n      sampleRateIndex: 3,\n      timescale: 1000,\n      type: 'audio'\n    };\n    if (meta) {\n      return Object.assign({}, _default, meta);\n    }\n    return _default;\n  }\n}\n\nexports.AudioTrackMeta = AudioTrackMeta;\nclass VideoTrackMeta {\n  constructor(meta) {\n    const _default = {\n      avcc: null,\n      sps: new Uint8Array(0),\n      pps: new Uint8Array(0),\n      chromaFormat: 420,\n      codec: 'avc1.640020',\n      codecHeight: 720,\n      codecWidth: 1280,\n      duration: 0,\n      frameRate: {\n        fixed: true,\n        fps: 25,\n        fps_num: 25000,\n        fps_den: 1000\n      },\n      id: 1,\n      level: '3.2',\n      presentHeight: 720,\n      presentWidth: 1280,\n      profile: 'High',\n      refSampleDuration: 40,\n      parRatio: {\n        height: 1,\n        width: 1\n      },\n      timescale: 1000,\n      type: 'video'\n    };\n\n    if (meta) {\n      return Object.assign({}, _default, meta);\n    }\n    return _default;\n  }\n}\nexports.VideoTrackMeta = VideoTrackMeta;\n\n//# sourceURL=webpack://xgplayer-flv/../xgplayer-utils/src/models/track-meta.js?")},"../xgplayer-utils/src/models/track-sample.js":
/*!****************************************************!*\
      !*** ../xgplayer-utils/src/models/track-sample.js ***!
      \****************************************************/
/*! no static exports found */function(module,exports,__webpack_require__){eval('\n\nObject.defineProperty(exports, "__esModule", {\n  value: true\n});\nclass AudioTrackSample {\n  constructor(info) {\n    let _default = AudioTrackSample.getDefault();\n    if (!info) {\n      return _default;\n    }\n    let sample = Object.assign({}, _default, info);\n\n    return sample;\n  }\n\n  static getDefault() {\n    return {\n      dts: null,\n      pts: null,\n      data: new Uint8Array()\n    };\n  }\n}\n\nexports.AudioTrackSample = AudioTrackSample;\nclass VideoTrackSample {\n  constructor(info) {\n    let _default = VideoTrackSample.getDefault();\n\n    if (!info) {\n      return _default;\n    }\n    let sample = Object.assign({}, _default, info);\n\n    return sample;\n  }\n\n  static getDefault() {\n    return {\n      dts: null,\n      pts: null,\n      isKeyframe: false, // is Random access point\n      originDts: null,\n      data: new Uint8Array()\n    };\n  }\n}\nexports.VideoTrackSample = VideoTrackSample;\n\n//# sourceURL=webpack://xgplayer-flv/../xgplayer-utils/src/models/track-sample.js?')},"../xgplayer-utils/src/mse/index.js":
/*!******************************************!*\
      !*** ../xgplayer-utils/src/mse/index.js ***!
      \******************************************/
/*! no static exports found */function(module,exports,__webpack_require__){eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nclass MSE {\n  constructor(configs) {\n    this.configs = Object.assign({}, configs);\n    this.container = this.configs.container;\n    this.mediaSource = null;\n    this.sourceBuffers = {};\n    this.preloadTime = this.configs.preloadTime || 1;\n  }\n\n  init() {\n    // eslint-disable-next-line no-undef\n    this.mediaSource = new self.MediaSource();\n    this.mediaSource.addEventListener('sourceopen', this.onSourceOpen.bind(this));\n    this.container.src = URL.createObjectURL(this.mediaSource);\n    this.url = this.container.src;\n    this.container.addEventListener('timeupdate', this.onTimeUpdate.bind(this));\n    this.container.addEventListener('waiting', this.onWaiting.bind(this));\n  }\n\n  onTimeUpdate() {\n    this.emit('TIME_UPDATE', this.container);\n  }\n\n  onWaiting() {\n    this.emit('WAITING', this.container);\n  }\n\n  onSourceOpen() {\n    this.addSourceBuffers();\n  }\n\n  onUpdateEnd() {\n    this.emit('SOURCE_UPDATE_END');\n    this.doAppend();\n  }\n  addSourceBuffers() {\n    if (this.mediaSource.readyState !== 'open') {\n      return;\n    }\n    let sources = this._context.getInstance('PRE_SOURCE_BUFFER');\n    let tracks = this._context.getInstance('TRACKS');\n    let track;\n\n    sources = sources.sources;\n    let add = false;\n    for (let i = 0, k = Object.keys(sources).length; i < k; i++) {\n      let type = Object.keys(sources)[i];\n      if (type === 'audio') {\n        track = tracks.audioTrack;\n      } else if (type === 'video') {\n        track = tracks.videoTrack;\n      }\n      if (track) {\n        let dur = type === 'audio' ? 21 : 40;\n        if (track.meta && track.meta.refSampleDuration) dur = track.meta.refSampleDuration;\n        if (sources[type].data.length >= this.preloadTime / dur) {\n          add = true;\n        }\n      }\n    }\n\n    if (add) {\n      if (Object.keys(this.sourceBuffers).length > 0) {\n        return;\n      }\n      for (let i = 0, k = Object.keys(sources).length; i < k; i++) {\n        let type = Object.keys(sources)[i];\n        let source = sources[type];\n        let mime = type === 'video' ? 'video/mp4;codecs=' + source.mimetype : 'audio/mp4;codecs=' + source.mimetype;\n        let sourceBuffer = this.mediaSource.addSourceBuffer(mime);\n        this.sourceBuffers[type] = sourceBuffer;\n        sourceBuffer.addEventListener('updateend', this.onUpdateEnd.bind(this));\n        this.doAppend();\n      }\n    }\n  }\n\n  doAppend() {\n    let sources = this._context.getInstance('PRE_SOURCE_BUFFER');\n    if (sources) {\n      for (let i = 0; i < Object.keys(this.sourceBuffers).length; i++) {\n        let type = Object.keys(this.sourceBuffers)[i];\n        let sourceBuffer = this.sourceBuffers[type];\n        if (!sourceBuffer.updating) {\n          let source = sources.sources[type];\n          if (source && !source.inited) {\n            sourceBuffer.appendBuffer(source.init.buffer.buffer);\n            source.inited = true;\n          } else if (source) {\n            let data = source.data.shift();\n            if (data) {\n              sourceBuffer.appendBuffer(data.buffer.buffer);\n            }\n          }\n        }\n      }\n    }\n  }\n\n  endOfStream() {\n    if (this.mediaSource.readyState === 'open') {\n      this.mediaSource.endOfStream();\n    }\n  }\n\n  remove(end) {\n    for (let i = 0; i < Object.keys(this.sourceBuffers).length; i++) {\n      let buffer = this.sourceBuffers[Object.keys(this.sourceBuffers)[i]];\n      if (!buffer.updating) {\n        buffer.remove(0, end);\n      }\n    }\n  }\n\n  destroy() {\n    this.container.removeEventListener('timeupdate', this.onTimeUpdate);\n    this.container.removeEventListener('waiting', this.onWaiting);\n    this.mediaSource.removeEventListener('sourceopen', this.onSourceOpen);\n    this.configs = {};\n    this.container = null;\n    this.mediaSource = null;\n    this.sourceBuffers = {};\n    this.preloadTime = 1;\n    for (let i = 0; i < Object.keys(this.sourceBuffers).length; i++) {\n      let buffer = this.sourceBuffers[Object.keys(this.sourceBuffers)[i]];\n      buffer.removeEventListener('updateend', this.onUpdateEnd);\n      this.mediaSource.removeSourceBuffer(buffer);\n      delete this.sourceBuffers[Object.keys(this.sourceBuffers)[i]];\n    }\n  }\n}\nexports.default = MSE;\n\n//# sourceURL=webpack://xgplayer-flv/../xgplayer-utils/src/mse/index.js?")},"../xgplayer-utils/src/write/buffer.js":
/*!*********************************************!*\
      !*** ../xgplayer-utils/src/write/buffer.js ***!
      \*********************************************/
/*! no static exports found */function(module,exports,__webpack_require__){eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _concatTypedArray = __webpack_require__(/*! concat-typed-array */ \"../xgplayer-utils/node_modules/concat-typed-array/lib/index.js\");\n\nvar _concatTypedArray2 = _interopRequireDefault(_concatTypedArray);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nclass Buffer {\n  constructor(buffer) {\n    this.buffer = buffer || new Uint8Array(0);\n  }\n\n  write(...buffer) {\n    buffer.forEach(item => {\n      this.buffer = (0, _concatTypedArray2.default)(Uint8Array, this.buffer, item);\n    });\n  }\n\n  static writeUint32(value) {\n    return new Uint8Array([value >> 24, value >> 16 & 0xff, value >> 8 & 0xff, value & 0xff]);\n  }\n\n  static readAsInt(arr) {\n    let temp = '';\n\n    function padStart4Hex(hexNum) {\n      let hexStr = hexNum.toString(16);\n      return hexStr.padStart(2, '0');\n    }\n\n    arr.forEach(num => {\n      temp += padStart4Hex(num);\n    });\n    return parseInt(temp, 16);\n  }\n}\n\nexports.default = Buffer;\n\n//# sourceURL=webpack://xgplayer-flv/../xgplayer-utils/src/write/buffer.js?")},"../xgplayer-utils/src/write/stream.js":
/*!*********************************************!*\
      !*** ../xgplayer-utils/src/write/stream.js ***!
      \*********************************************/
/*! no static exports found */function(module,exports,__webpack_require__){eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nclass Stream {\n  constructor(buffer) {\n    if (buffer instanceof ArrayBuffer) {\n      this.buffer = buffer;\n      this.dataview = new DataView(buffer);\n      this.dataview.position = 0;\n    } else {\n      throw new Error('data is invalid');\n    }\n  }\n\n  get length() {\n    return this.buffer.byteLength;\n  }\n\n  set position(value) {\n    this.dataview.position = value;\n  }\n\n  get position() {\n    return this.dataview.position;\n  }\n\n  back(count) {\n    this.position -= count;\n  }\n\n  skip(count) {\n    let loop = Math.floor(count / 4);\n    let last = count % 4;\n    for (let i = 0; i < loop; i++) {\n      Stream.readByte(this.dataview, 4);\n    }\n    if (last > 0) {\n      Stream.readByte(this.dataview, last);\n    }\n  }\n\n  /**\n   * [readByte 从DataView中读取数据]\n   * @param  {DataView} buffer [DataView实例]\n   * @param  {Number} size   [读取字节数]\n   * @return {Number}        [整数]\n   */\n  static readByte(buffer, size, sign) {\n    let res;\n    switch (size) {\n      case 1:\n        if (sign) {\n          res = buffer.getInt8(buffer.position);\n        } else {\n          res = buffer.getUint8(buffer.position);\n        }\n        break;\n      case 2:\n        if (sign) {\n          res = buffer.getInt16(buffer.position);\n        } else {\n          res = buffer.getUint16(buffer.position);\n        }\n        break;\n      case 3:\n        if (sign) {\n          throw new Error('not supported for readByte 3');\n        } else {\n          res = buffer.getUint8(buffer.position) << 16;\n          res |= buffer.getUint8(buffer.position + 1) << 8;\n          res |= buffer.getUint8(buffer.position + 2);\n        }\n        break;\n      case 4:\n        if (sign) {\n          res = buffer.getInt32(buffer.position);\n        } else {\n          res = buffer.getUint32(buffer.position);\n        }\n        break;\n      case 8:\n        if (sign) {\n          throw new Error('not supported for readBody 8');\n        } else {\n          res = buffer.getUint32(buffer.position) << 32;\n          res |= buffer.getUint32(buffer.position + 4);\n        }\n        break;\n      default:\n        res = '';\n    }\n    buffer.position += size;\n    return res;\n  }\n\n  readUint8() {\n    return Stream.readByte(this.dataview, 1);\n  }\n\n  readUint16() {\n    return Stream.readByte(this.dataview, 2);\n  }\n\n  readUint24() {\n    return Stream.readByte(this.dataview, 3);\n  }\n\n  readUint32() {\n    return Stream.readByte(this.dataview, 4);\n  }\n\n  readUint64() {\n    return Stream.readByte(this.dataview, 8);\n  }\n\n  readInt8() {\n    return Stream.readByte(this.dataview, 1, true);\n  }\n  readInt16() {\n    return Stream.readByte(this.dataview, 2, true);\n  }\n\n  readInt32() {\n    return Stream.readByte(this.dataview, 4, true);\n  }\n\n  writeUint32(value) {\n    return new Uint8Array([value >>> 24 & 0xff, value >>> 16 & 0xff, value >>> 8 & 0xff, value & 0xff]);\n  }\n}\n\nexports.default = Stream;\n\n//# sourceURL=webpack://xgplayer-flv/../xgplayer-utils/src/write/stream.js?")},"./src/flv-live.js":
/*!*************************!*\
      !*** ./src/flv-live.js ***!
      \*************************/
/*! no static exports found */function(module,exports,__webpack_require__){eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _xgplayerRemux = __webpack_require__(/*! xgplayer-remux */ \"../xgplayer-remux/index.js\");\n\nvar _xgplayerRemux2 = _interopRequireDefault(_xgplayerRemux);\n\nvar _xgplayerLoader = __webpack_require__(/*! xgplayer-loader */ \"../xgplayer-loader/index.js\");\n\nvar _xgplayerDemux = __webpack_require__(/*! xgplayer-demux */ \"../xgplayer-demux/index.js\");\n\nvar _xgplayerBuffer = __webpack_require__(/*! xgplayer-buffer */ \"../xgplayer-buffer/index.js\");\n\nvar _xgplayerUtils = __webpack_require__(/*! xgplayer-utils */ \"../xgplayer-utils/index.js\");\n\nvar _xgplayerCodec = __webpack_require__(/*! xgplayer-codec */ \"../xgplayer-codec/index.js\");\n\nvar _xgplayer = __webpack_require__(/*! xgplayer */ \"xgplayer\");\n\nvar _xgplayer2 = _interopRequireDefault(_xgplayer);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst REMUX_EVENTS = _xgplayerUtils.EVENTS.REMUX_EVENTS;\nconst DEMUX_EVENTS = _xgplayerUtils.EVENTS.DEMUX_EVENTS;\nconst LOADER_EVENTS = _xgplayerUtils.EVENTS.LOADER_EVENTS;\nconst MSE_EVENTS = _xgplayerUtils.EVENTS.MSE_EVENTS;\n\nconst Tag = 'FLVController';\n\nclass Logger {\n  warn() {}\n}\n\nclass FlvController {\n  constructor(player) {\n    this.TAG = Tag;\n    this._player = player;\n\n    this.state = {\n      initSegmentArrived: false\n    };\n  }\n\n  init() {\n    this._context.registry('FETCH_LOADER', _xgplayerLoader.FetchLoader);\n    this._context.registry('LOADER_BUFFER', _xgplayerBuffer.XgBuffer);\n\n    this._context.registry('FLV_DEMUXER', _xgplayerDemux.FlvDemuxer);\n    this._context.registry('TRACKS', _xgplayerBuffer.Tracks);\n\n    this._context.registry('MP4_REMUXER', _xgplayerRemux2.default.Mp4Remuxer);\n    this._context.registry('PRE_SOURCE_BUFFER', _xgplayerBuffer.PreSource);\n\n    this._context.registry('COMPATIBILITY', _xgplayerCodec.Compatibility);\n\n    this._context.registry('LOGGER', Logger);\n    this.mse = this._context.registry('MSE', _xgplayerUtils.Mse)({ container: this._player.video });\n\n    this.initListeners();\n  }\n\n  initListeners() {\n    this.on(LOADER_EVENTS.LOADER_DATALOADED, this._handleLoaderDataLoaded.bind(this));\n    this.on(LOADER_EVENTS.LOADER_ERROR, this._handleNetworkError.bind(this));\n\n    this.on(DEMUX_EVENTS.MEDIA_INFO, this._handleMediaInfo.bind(this));\n    this.on(DEMUX_EVENTS.METADATA_PARSED, this._handleMetadataParsed.bind(this));\n    this.on(DEMUX_EVENTS.DEMUX_COMPLETE, this._handleDemuxComplete.bind(this));\n    this.on(DEMUX_EVENTS.DEMUX_ERROR, this._handleDemuxError.bind(this));\n\n    this.on(REMUX_EVENTS.INIT_SEGMENT, this._handleAppendInitSegment.bind(this));\n    this.on(REMUX_EVENTS.MEDIA_SEGMENT, this._handleMediaSegment.bind(this));\n\n    this.on(MSE_EVENTS.SOURCE_UPDATE_END, this._handleSourceUpdateEnd.bind(this));\n\n    this._player.on('timeupdate', this._handleTimeUpdate.bind(this));\n  }\n\n  _handleMediaInfo() {\n    if (!this._context.mediaInfo) {\n      this.emit(DEMUX_EVENTS.DEMUX_ERROR, new Error('failed to get mediainfo'));\n    }\n  }\n\n  _handleLoaderDataLoaded() {\n    this.emitTo('FLV_DEMUXER', DEMUX_EVENTS.DEMUX_START);\n  }\n\n  _handleMetadataParsed(type) {\n    this.emit(REMUX_EVENTS.REMUX_METADATA, type);\n  }\n  _handleDemuxComplete() {\n    this.emit(REMUX_EVENTS.REMUX_MEDIA);\n  }\n\n  _handleAppendInitSegment() {\n    this.state.initSegmentArrived = true;\n    this.mse.addSourceBuffers();\n  }\n\n  _handleMediaSegment() {\n    this.mse.addSourceBuffers();\n    this.mse.doAppend();\n  }\n\n  _handleSourceUpdateEnd() {\n    const time = this._player.currentTime;\n    const video = this._player.video;\n    const preloadTime = this._player.config.preloadTime || 5;\n\n    const { length } = video.buffered;\n\n    if (length === 0) {\n      return;\n    }\n\n    const bufferEnd = video.buffered.end(length - 1);\n    if (bufferEnd - time > preloadTime * 2) {\n      this._player.currentTime = bufferEnd - preloadTime;\n    }\n  }\n\n  _handleTimeUpdate() {\n    const time = this._player.currentTime;\n    if (time > 2) {\n      // 在直播时及时清空buffer，降低直播内存占用\n      this.mse.remove(time - 2);\n    }\n  }\n\n  _handleNetworkError() {\n    this._player.emit('error', new _xgplayer2.default.Errors('network', this._player.config.url));\n  }\n\n  _handleDemuxError() {\n    this._player.emit('error', new _xgplayer2.default.Errors('parse', this._player.config.url));\n  }\n\n  seek() {\n    if (!this.state.initSegmentArrived) {\n      this.loadData();\n    }\n  }\n\n  loadData() {\n    this.emit(LOADER_EVENTS.LADER_START, this._player.config.url);\n  }\n\n  pause() {\n    const loader = this._context.getInstance('FETCH_LOADER');\n\n    if (loader) {\n      loader.cancel();\n    }\n  }\n}\nexports.default = FlvController;\n\n//# sourceURL=webpack://xgplayer-flv/./src/flv-live.js?")},"./src/index.js":
/*!**********************!*\
      !*** ./src/index.js ***!
      \**********************/
/*! no static exports found */function(module,exports,__webpack_require__){eval("\n\nvar _xgplayer = __webpack_require__(/*! xgplayer */ \"xgplayer\");\n\nvar _xgplayer2 = _interopRequireDefault(_xgplayer);\n\nvar _xgplayerUtils = __webpack_require__(/*! xgplayer-utils */ \"../xgplayer-utils/index.js\");\n\nvar _flvLive = __webpack_require__(/*! ./flv-live */ \"./src/flv-live.js\");\n\nvar _flvLive2 = _interopRequireDefault(_flvLive);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst flvAllowedEvents = _xgplayerUtils.EVENTS.FlvAllowedEvents;\n\nclass FlvPlayer extends _xgplayer2.default {\n  constructor(config) {\n    super(config);\n    this.context = new _xgplayerUtils.Context(flvAllowedEvents);\n    this.initEvents();\n    // const preloadTime = player.config.preloadTime || 15\n  }\n\n  start() {\n    this.initFlv();\n    this.context.init();\n    super.start(this.flv.mse.url);\n  }\n\n  initFlvEvents(flv) {\n    const player = this;\n    flv.once(_xgplayerUtils.EVENTS.REMUX_EVENTS.INIT_SEGMENT, () => {\n      _xgplayer2.default.util.addClass(player.root, 'xgplayer-is-live');\n      if (!_xgplayer2.default.util.findDom(this.root, 'xg-live')) {\n        const live = _xgplayer2.default.util.createDom('xg-live', '正在直播', {}, 'xgplayer-live');\n        player.controls.appendChild(live);\n      }\n    });\n\n    flv.once(_xgplayerUtils.EVENTS.LOADER_EVENTS.LOADER_COMPLETE, () => {\n      // 直播完成，待播放器播完缓存后发送关闭事件\n      if (!player.paused) {\n        const timer = setInterval(() => {\n          const end = player.getBufferedRange()[1];\n          if (Math.abs(player.currentTime - end) < 0.5) {\n            player.emit('ended');\n            window.clearInterval(timer);\n          }\n        }, 200);\n      }\n    });\n  }\n\n  initEvents() {\n    this.on('timeupdate', () => {\n      this.loadData();\n    });\n\n    this.on('seeking', () => {\n      const time = this.currentTime;\n      const range = this.getBufferedRange();\n      if (time > range[1] || time < range[0]) {\n        this.flv.seek(this.currentTime);\n      }\n    });\n  }\n\n  initFlv() {\n    const flv = this.context.registry('FLV_CONTROLLER', _flvLive2.default)(this);\n    this.initFlvEvents(flv);\n    this.flv = flv;\n  }\n\n  play() {\n    if (this._hasStart) {\n      this._destroy();\n      this.context = new _xgplayerUtils.Context(flvAllowedEvents);\n      const flv = this.context.registry('FLV_CONTROLLER', _flvLive2.default)(this);\n      this.initFlvEvents(flv);\n      this.flv = flv;\n      this.context.init();\n      super.start(flv.mse.url);\n      super.play();\n    } else {\n      super.play();\n    }\n  }\n\n  pause() {\n    super.pause();\n    if (this.flv) {\n      this.flv.pause();\n    }\n  }\n\n  loadData(time = this.currentTime) {\n    if (this.flv) {\n      this.flv.seek(time);\n    }\n  }\n\n  destroy() {\n    this._destroy();\n    super.destroy();\n  }\n\n  _destroy() {\n    this.context.destroy();\n    this.flv = null;\n    this.context = null;\n  }\n\n  get src() {\n    return this.currentSrc;\n  }\n\n  set src(url) {\n    this.player.config.url = url;\n    if (!this.paused) {\n      this.pause();\n      this.once('pause', () => {\n        this.start(url);\n      });\n      this.once('canplay', () => {\n        this.play();\n      });\n    } else {\n      this.start(url);\n    }\n    this.once('canplay', () => {\n      this.currentTime = 0;\n    });\n  }\n}\n\nmodule.exports = FlvPlayer;\n\n//# sourceURL=webpack://xgplayer-flv/./src/index.js?")},0:
/*!****************************!*\
      !*** multi ./src/index.js ***!
      \****************************/
/*! no static exports found */function(module,exports,__webpack_require__){eval('module.exports = __webpack_require__(/*! ./src/index.js */"./src/index.js");\n\n\n//# sourceURL=webpack://xgplayer-flv/multi_./src/index.js?')},xgplayer:
/*!***************************!*\
      !*** external "xgplayer" ***!
      \***************************/
/*! no static exports found */function(module,exports){eval("module.exports = __WEBPACK_EXTERNAL_MODULE_xgplayer__;\n\n//# sourceURL=webpack://xgplayer-flv/external_%22xgplayer%22?")}})},module.exports=n(__webpack_require__(/*! xgplayer */"xgplayer"))},"../xgplayer-flv-vod/dist/index.js":
/*!***************************!*\
  !*** .-vod/dist/index.js ***!
  \***************************/
/*! no static exports found */function(e,t,n){"use strict";var r;window,e.exports=(r=n(/*! xgplayer */"xgplayer"),function(e){var t={};function n(r){if(t[r])return t[r].exports;var s=t[r]={i:r,l:!1,exports:{}};return e[r].call(s.exports,s,s.exports,n),s.l=!0,s.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)n.d(r,s,function(t){return e[t]}.bind(null,s));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}({"../../node_modules/events/events.js":
/*!*****************************************************************************************!*\
      !*** /Users/leonardo/Documents/front-end/player/xgplayer/node_modules/events/events.js ***!
      \*****************************************************************************************/
/*! no static exports found */function(e,t,n){var r,s="object"==typeof Reflect?Reflect:null,i=s&&"function"==typeof s.apply?s.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};r=s&&"function"==typeof s.ownKeys?s.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var a=Number.isNaN||function(e){return e!=e};function o(){o.init.call(this)}e.exports=o,o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var l=10;function d(e){return void 0===e._maxListeners?o.defaultMaxListeners:e._maxListeners}function u(e,t,n,r){var s,i,a,o;if("function"!=typeof n)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof n);if(void 0===(i=e._events)?(i=e._events=Object.create(null),e._eventsCount=0):(void 0!==i.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),i=e._events),a=i[t]),void 0===a)a=i[t]=n,++e._eventsCount;else if("function"==typeof a?a=i[t]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),(s=d(e))>0&&a.length>s&&!a.warned){a.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=a.length,o=l,console&&console.warn&&console.warn(o)}return e}function f(){for(var e=[],t=0;t<arguments.length;t++)e.push(arguments[t]);this.fired||(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,i(this.listener,this.target,e))}function c(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},s=f.bind(r);return s.listener=n,r.wrapFn=s,s}function h(e,t,n){var r=e._events;if(void 0===r)return[];var s=r[t];return void 0===s?[]:"function"==typeof s?n?[s.listener||s]:[s]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(s):m(s,s.length)}function p(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function m(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return l},set:function(e){if("number"!=typeof e||e<0||a(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");l=e}}),o.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||a(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},o.prototype.getMaxListeners=function(){return d(this)},o.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r="error"===e,s=this._events;if(void 0!==s)r=r&&void 0===s.error;else if(!r)return!1;if(r){var a;if(t.length>0&&(a=t[0]),a instanceof Error)throw a;var o=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw o.context=a,o}var l=s[e];if(void 0===l)return!1;if("function"==typeof l)i(l,this,t);else{var d=l.length,u=m(l,d);for(n=0;n<d;++n)i(u[n],this,t)}return!0},o.prototype.addListener=function(e,t){return u(this,e,t,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(e,t){return u(this,e,t,!0)},o.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);return this.on(e,c(this,e,t)),this},o.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);return this.prependListener(e,c(this,e,t)),this},o.prototype.removeListener=function(e,t){var n,r,s,i,a;if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);if(void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(s=-1,i=n.length-1;i>=0;i--)if(n[i]===t||n[i].listener===t){a=n[i].listener,s=i;break}if(s<0)return this;0===s?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,s),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,a||t)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var s,i=Object.keys(n);for(r=0;r<i.length;++r)"removeListener"!==(s=i[r])&&this.removeAllListeners(s);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},o.prototype.listeners=function(e){return h(this,e,!0)},o.prototype.rawListeners=function(e){return h(this,e,!1)},o.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):p.call(e,t)},o.prototype.listenerCount=p,o.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]}},"../xgplayer-buffer/index.js":
/*!***********************************!*\
      !*** ../xgplayer-buffer/index.js ***!
      \***********************************/
/*! no static exports found */function(e,t,n){e.exports={Track:n(/*! ./src/track */"../xgplayer-buffer/src/track.js").default,Tracks:n(/*! ./src/track */"../xgplayer-buffer/src/track.js").Tracks,AudioTrack:n(/*! ./src/track */"../xgplayer-buffer/src/track.js").AudioTrack,VideoTrack:n(/*! ./src/track */"../xgplayer-buffer/src/track.js").VideoTrack,XgBuffer:n(/*! ./src/buffer */"../xgplayer-buffer/src/buffer.js").XgBuffer,RemuxBuffer:n(/*! ./src/buffer */"../xgplayer-buffer/src/buffer.js").RemuxBuffer,PreSource:n(/*! ./src/presouce */"../xgplayer-buffer/src/presouce.js").default}},"../xgplayer-buffer/src/buffer.js":
/*!****************************************!*\
      !*** ../xgplayer-buffer/src/buffer.js ***!
      \****************************************/
/*! no static exports found */function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.XgBuffer=class{constructor(e){this.length=e||0,this.historyLen=e||0,this.array=[],this.offset=0}push(e){this.array.push(e),this.length+=e.byteLength,this.historyLen+=e.byteLength}shift(e){if(this.array.length<1)return new Uint8Array(0);if(void 0===e)return this._shiftBuffer();if(this.offset+e===this.array[0].length){let t=this.array[0].slice(this.offset,this.offset+e);return this.offset=0,this.array.shift(),this.length-=e,t}if(this.offset+e<this.array[0].length){let t=this.array[0].slice(this.offset,this.offset+e);return this.offset+=e,this.length-=e,t}let t=new Uint8Array(e),n=0;for(;this.array.length>0&&e>0;){if(this.offset+e<this.array[0].length){let r=this.array[0].slice(this.offset,this.offset+e);t.set(r,n),this.offset+=e,this.length-=e,e=0;break}{let r=this.array[0].length-this.offset;t.set(this.array[0].slice(this.offset,this.array[0].length),n),this.array.shift(),this.offset=0,n+=r,this.length-=r,e-=r}}return t}clear(){this.array=[],this.length=0,this.offset=0}destroy(){this.clear(),this.historyLen=0}_shiftBuffer(){return this.length-=this.array[0].length,this.offset=0,this.array.shift()}toInt(e,t){let n=0,r=this.offset+e;for(;r<this.offset+t+e;)r<this.array[0].length?n=256*n+this.array[0][r]:this.array[1]&&(n=256*n+this.array[1][r-this.array[0].length]),r++;return n}},t.RemuxBuffer=class{constructor(){this.video=[],this.audio=[]}destroy(){this.video=[],this.audio=[]}}},"../xgplayer-buffer/src/presouce.js":
/*!******************************************!*\
      !*** ../xgplayer-buffer/src/presouce.js ***!
      \******************************************/
/*! no static exports found */function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});class r{constructor(){this.mimetype="",this.init=null,this.data=[]}}t.default=class{constructor(){this.sources={}}getSource(e){return this.sources[e]}createSource(e){return this.sources[e]=new r,this.sources[e]}clear(){this.sources={}}destroy(){this.sources={}}}},"../xgplayer-buffer/src/track.js":
/*!***************************************!*\
      !*** ../xgplayer-buffer/src/track.js ***!
      \***************************************/
/*! no static exports found */function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});class r{constructor(){this.id=-1,this.sequenceNumber=0,this.samples=[],this.droppedSamples=[],this.length=0}reset(){this.sequenceNumber=0,this.samples=[],this.length=0}distroy(){this.reset(),this.id=-1}}t.default=r,t.AudioTrack=class extends r{constructor(){super(),this.TAG="AudioTrack",this.type="audio"}},t.VideoTrack=class extends r{constructor(){super(),this.TAG="VideoTrack",this.type="video",this.dropped=0}reset(){this.sequenceNumber=0,this.samples=[],this.length=0,this.dropped=0}},t.Tracks=class{constructor(){this.audioTrack=null,this.videoTrack=null}}},"../xgplayer-codec/index.js":
/*!**********************************!*\
      !*** ../xgplayer-codec/index.js ***!
      \**********************************/
/*! no static exports found */function(e,t,n){e.exports={Nalunit:n(/*! ./src/h264/nalunit */"../xgplayer-codec/src/h264/nalunit/index.js").default,SpsParser:n(/*! ./src/h264/nalunit/sps */"../xgplayer-codec/src/h264/nalunit/sps.js").default,Compatibility:n(/*! ./src/compatibility */"../xgplayer-codec/src/compatibility.js").default}},"../xgplayer-codec/src/aac/aac-helper.js":
/*!***********************************************!*\
      !*** ../xgplayer-codec/src/aac/aac-helper.js ***!
      \***********************************************/
/*! no static exports found */function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{static getSilentFrame(e,t){if("mp4a.40.2"===e){if(1===t)return new Uint8Array([0,200,0,128,35,128]);if(2===t)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224])}else{if(1===t)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null}}},"../xgplayer-codec/src/compatibility.js":
/*!**********************************************!*\
      !*** ../xgplayer-codec/src/compatibility.js ***!
      \**********************************************/
/*! no static exports found */function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r,s=n(/*! xgplayer-utils */"../xgplayer-utils/index.js"),i=(r=n(/*! ./aac/aac-helper */"../xgplayer-codec/src/aac/aac-helper.js"))&&r.__esModule?r:{default:r};const{REMUX_EVENTS:a}=s.EVENTS;class o{constructor(){this.nextAudioDts=0,this.nextVideoDts=0,this.lastAudioSamplesLen=0,this.lastVideoSamplesLen=0,this.lastVideoDts=void 0,this.lastAudioDts=void 0,this.allAudioSamplesCount=0,this.allVideoSamplesCount=0,this._firstAudioSample=null,this._firstVideoSample=null,this.filledAudioSamples=[],this.filledVideoSamples=[]}init(){this.before(a.REMUX_MEDIA,this.doFix.bind(this))}reset(){this.nextAudioDts=0,this.nextVideoDts=0,this.lastAudioSamplesLen=0,this.lastVideoSamplesLen=0,this.lastVideoDts=void 0,this.lastAudioDts=void 0,this.allAudioSamplesCount=0,this.allVideoSamplesCount=0,this._firstAudioSample=null,this._firstVideoSample=null,this.filledAudioSamples=[],this.filledVideoSamples=[]}doFix(){const{isFirstAudioSamples:e,isFirstVideoSamples:t}=this.getFirstSample();this.removeInvalidSamples(),this.recordSamplesCount(),this._firstVideoSample&&this.fixRefSampleDuration(this.videoTrack.meta,this.videoTrack.samples),this._firstAudioSample&&this.fixRefSampleDuration(this.audioTrack.meta,this.audioTrack.samples),this.doFixVideo(t),this.doFixAudio(e)}doFixVideo(e){let{samples:t,meta:n}=this.videoTrack;if(n.frameRate&&!1===n.frameRate.fixed)return;if(!t||!t.length||!this._firstVideoSample)return;const r=t[0],s=r.dts,i=t.length;if(e&&this._firstAudioSample){const e=this._firstVideoSample.dts,s=e-this._firstAudioSample.dts;if(s>2*n.refSampleDuration){const i=Math.floor(s/n.refSampleDuration);for(let s=0;s<i;s++){const i=Object.assign({},r);i.dts=e-(s+1)*n.refSampleDuration,i.pts=i.dts+i.cts,t.unshift(i),this.filledVideoSamples.push({dts:i.dts,size:i.data.byteLength})}}}let a;if(this.nextVideoDts){a=s-this.nextVideoDts;const e=Math.abs(a);if(a>2*n.refSampleDuration){const e=Math.floor(a/n.refSampleDuration);for(let r=0;r<e;r++){const e=Object.assign({},t[0]),i=s-(r+1)*n.refSampleDuration;e.dts=i>this.nextVideoDts?i:this.nextVideoDts,e.pts=e.dts+e.cts,this.videoTrack.samples.unshift(e),this.filledVideoSamples.push({dts:e.dts,size:e.data.byteLength})}}else e<=10&&e>0&&(t[0].dts=this.nextVideoDts,t[0].originDts=t[0].dts,t[0].cts=t[0].cts||t[0].pts-t[0].dts,t[0].pts=t[0].dts+t[0].cts)}const o=t[t.length-1].dts,l=t.length>=2?o-t[t.length-2].dts:n.refSampleDuration;this.lastVideoSamplesLen=i,this.nextVideoDts=o+l,this.lastVideoDts=o;for(let e=0,r=t.length;e<r;e++){const r=t[e],s=t[e+1];if(!s)break;const i=s.dts-r.dts;if(i>2*n.refSampleDuration){let a=Math.floor(i/n.refSampleDuration),o=0;for(;o<a;){const i=Object.assign({},s);i.dts=r.dts+(o+1)*n.refSampleDuration,i.pts=i.dts+i.cts,i<s.dts&&(t.splice(e,0,i),this.filledVideoSamples.push({dts:i.dts,size:i.data.byteLength})),o++,e++}}}this.videoTrack.samples=t}doFixAudio(e){let{samples:t,meta:n}=this.audioTrack;if(!t||!t.length)return;const r=t.length,s=i.default.getSilentFrame(n.codec,n.channelCount),a=this._firstAudioSample;if(t=o.sortAudioSamples(t),this._firstVideoSample&&e){const e=this._firstVideoSample.pts?this._firstVideoSample.pts:this._firstVideoSample.dts+this._firstVideoSample.cts;if(a.dts-e>n.refSampleDuration){const r=Math.floor((a.dts-e)/n.refSampleDuration);for(let e=0;e<r;e++){const r={data:s,datasize:s.byteLength,dts:a.dts-(e+1)*n.refSampleDuration,filtered:0};t.unshift(r),this.filledAudioSamples.push({dts:r.dts,size:r.data.byteLength})}}}let l;const d=t[0].dts;if(this.nextAudioDts){l=d-this.nextAudioDts;const e=Math.abs(l);if(e>n.refSampleDuration&&1===r&&1===this.lastAudioSamplesLen&&(n.refSampleDurationFixed=void 0),l>2*n.refSampleDuration)if(1===r&&1===this.lastAudioSamplesLen)n.refSampleDurationFixed=void 0!==n.refSampleDurationFixed?n.refSampleDurationFixed+l:n.refSampleDuration+l;else{const e=Math.floor(l/n.refSampleDuration);for(let r=0;r<e;r++){const e=d-(r+1)*n.refSampleDuration,s=Object.assign({},t[0],{dts:e>this.nextAudioDts?e:this.nextAudioDts});this.filledAudioSamples.push({dts:s.dts,size:s.data.byteLength}),this.audioTrack.samples.unshift(s)}}else e<=10&&e>0&&(t[0].dts=this.nextAudioDts,t[0].pts=this.nextAudioDts)}const u=t[t.length-1].dts,f=t.length>=2?u-t[t.length-2].dts:n.refSampleDuration;this.lastAudioSamplesLen=r,this.nextAudioDts=n.refSampleDurationFixed?u+n.refSampleDurationFixed:u+f,this.lastAudioDts=u;for(let e=0,n=t.length;e<n;e++){const n=t[e],r=t[e+1];if(!r)break;const s=r.dts-n.dts;t[e].duration=s}this.audioTrack.samples=o.sortAudioSamples(t)}getFirstSample(){let{samples:e}=this.videoTrack,{samples:t}=this.audioTrack,n=!1,r=!1;return!this._firstVideoSample&&e.length&&(this._firstVideoSample=o.findFirstVideoSample(e),n=!0),!this._firstAudioSample&&t.length&&(this._firstAudioSample=o.findFirstAudioSample(t),r=!0),{isFirstVideoSamples:n,isFirstAudioSamples:r}}fixRefSampleDuration(e,t){const n="video"===e.type,r=n?this.allVideoSamplesCount:this.allAudioSamplesCount,s=n?this._firstVideoSample.dts:this._firstAudioSample.dts,i=n?this.filledVideoSamples.length:this.filledAudioSamples.length;if(!e.refSampleDuration||e.refSampleDuration<=0||Number.isNaN(e.refSampleDuration)){if(t.length>=1){const n=t[t.length-1].dts;e.refSampleDuration=Math.floor((n-s)/(r+i-1))}}else if(e.refSampleDuration&&t.length>=3){const n=(t[t.length-1].dts-t[0].dts)/t.length;e.refSampleDuration=Math.abs(e.refSampleDuration-n)<=e.refSampleDuration?e.refSampleDuration:n}}recordSamplesCount(){const{audioTrack:e,videoTrack:t}=this;this.allAudioSamplesCount+=e.samples.length,this.allVideoSamplesCount+=t.samples.length}removeInvalidSamples(){const{_firstVideoSample:e,_firstAudioSample:t}=this;this.audioTrack.samples=this.audioTrack.samples.filter(e=>e.dts>=t.dts&&(void 0===this.lastAudioDts||e.dts>this.lastAudioDts)),this.videoTrack.samples=this.videoTrack.samples.filter(t=>t.dts>=e.dts&&(void 0===this.lastVideoDts||t.dts>this.lastVideoDts))}static sortAudioSamples(e){return 1===e.length?e:e.sort((e,t)=>e.dts-t.dts)}static findFirstAudioSample(e){return e&&0!==e.length?o.sortAudioSamples(e)[0]:null}static findFirstVideoSample(e){if(!e.length)return null;const t=e.sort((e,t)=>e.dts-t.dts);for(let e=0,n=t.length;e<n;e++)if(t[e].isKeyframe)return t[e]}get tracks(){return this._context.getInstance("TRACKS")}get audioTrack(){return this.tracks?this.tracks.audioTrack:null}get videoTrack(){return this.tracks?this.tracks.videoTrack:null}}t.default=o},"../xgplayer-codec/src/h264/nalunit/golomb.js":
/*!****************************************************!*\
      !*** ../xgplayer-codec/src/h264/nalunit/golomb.js ***!
      \****************************************************/
/*! no static exports found */function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(e){this.TAG="Golomb",this._buffer=e,this._bufferIndex=0,this._totalBytes=e.byteLength,this._totalBits=8*e.byteLength,this._currentWord=0,this._currentWordBitsLeft=0}destroy(){this._buffer=null}_fillCurrentWord(){let e=this._totalBytes-this._bufferIndex,t=Math.min(4,e),n=new Uint8Array(4);n.set(this._buffer.subarray(this._bufferIndex,this._bufferIndex+t)),this._currentWord=new DataView(n.buffer).getUint32(0,!1),this._bufferIndex+=t,this._currentWordBitsLeft=8*t}readBits(e){if(e<=this._currentWordBitsLeft){let t=this._currentWord>>>32-e;return this._currentWord<<=e,this._currentWordBitsLeft-=e,t}let t=this._currentWordBitsLeft?this._currentWord:0;this._currentWordBitsLeft;let n=e-this._currentWordBitsLeft;this._fillCurrentWord();let r=Math.min(n,this._currentWordBitsLeft),s=this._currentWord>>>32-r;return this._currentWord<<=r,this._currentWordBitsLeft-=r,t<<r|s}readBool(){return 1===this.readBits(1)}readByte(){return this.readBits(8)}_skipLeadingZero(){let e;for(e=0;e<this._currentWordBitsLeft;e++)if(0!=(this._currentWord&2147483648>>>e))return this._currentWord<<=e,this._currentWordBitsLeft-=e,e;return this._fillCurrentWord(),e+this._skipLeadingZero()}readUEG(){let e=this._skipLeadingZero();return this.readBits(e+1)-1}readSEG(){let e=this.readUEG();return 1&e?e+1>>>1:-1*(e>>>1)}}},"../xgplayer-codec/src/h264/nalunit/index.js":
/*!***************************************************!*\
      !*** ../xgplayer-codec/src/h264/nalunit/index.js ***!
      \***************************************************/
/*! no static exports found */function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r,s=(r=n(/*! ./sps */"../xgplayer-codec/src/h264/nalunit/sps.js"))&&r.__esModule?r:{default:r};class i{static getNalunits(e){if(e.length-e.position<4)return[];let t=e.dataview,n=e.position;return 1===t.getInt32(n)||0===t.getInt16(n)&&1===t.getInt8(n+2)?i.getAnnexbNals(e):i.getAvccNals(e)}static getAnnexbNals(e){let t=[],n=i.getHeaderPositionAnnexB(e),r=n.pos,s=r;for(;r<e.length-4;){let a=e.buffer.slice(r,r+n.headerLength);n.pos===e.position&&e.skip(n.headerLength),s=(n=i.getHeaderPositionAnnexB(e)).pos;let o={header:a,body:new Uint8Array(e.buffer.slice(r+a.byteLength,s))};i.analyseNal(o),t.push(o),e.skip(s-e.position),r=s}return t}static getAvccNals(e){let t=[];for(;e.position<e.length-4;){let n=e.dataview.getInt32(e.position);if(!(e.length-e.position>=n))break;{let r=e.buffer.slice(e.position,e.position+4);e.skip(4);let s=e.buffer.slice(e.position,e.position+n);e.skip(n);let a={header:r,body:s};i.analyseNal(a),t.push(a)}}return t}static analyseNal(e){switch(31&e.body[0]){case 1:e.ndr=!0;break;case 5:e.idr=!0;break;case 6:break;case 7:e.sps=s.default.parseSPS(e.body);break;case 8:e.pps=!0}}static getHeaderPositionAnnexB(e){let t=e.position,n=0;for(;3!==n&&4!==n&&t<e.length-4;)0===e.dataview.getInt16(t)?1===e.dataview.getInt16(t+2)?n=4:1===e.dataview.getInt8(t+2)?n=3:t++:t++;return t===e.length-4&&(0===e.dataview.getInt16(t)?1===e.dataview.getInt16(t+2)&&(n=4):(t++,0===e.dataview.getInt16(t)&&1===e.dataview.getInt8(t)?n=3:t=e.length)),{pos:t,headerLength:n}}static getAvcc(e,t){let n=new Uint8Array(e.byteLength+t.byteLength+11);n[0]=1,n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=255,n[5]=225;let r=6;return n.set(new Uint8Array([e.byteLength>>>8&255,255&e.byteLength]),r),r+=2,n.set(e,r),n[r+=e.byteLength]=1,r++,n.set(new Uint8Array([t.byteLength>>>8&255,255&t.byteLength]),r),r+=2,n.set(t,r),n}}t.default=i},"../xgplayer-codec/src/h264/nalunit/sps.js":
/*!*************************************************!*\
      !*** ../xgplayer-codec/src/h264/nalunit/sps.js ***!
      \*************************************************/
/*! no static exports found */function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r,s=(r=n(/*! ./golomb */"../xgplayer-codec/src/h264/nalunit/golomb.js"))&&r.__esModule?r:{default:r};class i{static _ebsp2rbsp(e){let t=e,n=t.byteLength,r=new Uint8Array(n),s=0;for(let e=0;e<n;e++)e>=2&&3===t[e]&&0===t[e-1]&&0===t[e-2]||(r[s]=t[e],s++);return new Uint8Array(r.buffer,0,s)}static parseSPS(e){let t=i._ebsp2rbsp(e),n=new s.default(t);n.readByte();let r=n.readByte();n.readByte();let a=n.readByte();n.readUEG();let o=i.getProfileString(r),l=i.getLevelString(a),d=1,u=420,f=8;if((100===r||110===r||122===r||244===r||44===r||83===r||86===r||118===r||128===r||138===r||144===r)&&(3===(d=n.readUEG())&&n.readBits(1),d<=3&&(u=[0,420,422,444][d]),f=n.readUEG()+8,n.readUEG(),n.readBits(1),n.readBool())){let e=3!==d?8:12;for(let t=0;t<e;t++)n.readBool()&&(t<6?i._skipScalingList(n,16):i._skipScalingList(n,64))}n.readUEG();let c=n.readUEG();if(0===c)n.readUEG();else if(1===c){n.readBits(1),n.readSEG(),n.readSEG();let e=n.readUEG();for(let t=0;t<e;t++)n.readSEG()}n.readUEG(),n.readBits(1);let h=n.readUEG(),p=n.readUEG(),m=n.readBits(1);0===m&&n.readBits(1),n.readBits(1);let g=0,x=0,_=0,y=0;n.readBool()&&(g=n.readUEG(),x=n.readUEG(),_=n.readUEG(),y=n.readUEG());let b=1,v=1,E=0,T=!0,S=0,w=0;if(n.readBool()){if(n.readBool()){let e=n.readByte(),t=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2],r=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1];e>0&&e<16?(b=t[e-1],v=r[e-1]):255===e&&(b=n.readByte()<<8|n.readByte(),v=n.readByte()<<8|n.readByte())}if(n.readBool()&&n.readBool(),n.readBool()&&(n.readBits(4),n.readBool()&&n.readBits(24)),n.readBool()&&(n.readUEG(),n.readUEG()),n.readBool()){let e=n.readBits(32),t=n.readBits(32);T=n.readBool(),E=(S=t)/(w=2*e)}}let A=1;1===b&&1===v||(A=b/v);let k=0,R=0;0===d?(k=1,R=2-m):(k=3===d?1:2,R=(1===d?2:1)*(2-m));let D=16*(h+1),L=16*(p+1)*(2-m);D-=(g+x)*k,L-=(_+y)*R;let U=Math.ceil(D*A);return n.destroy(),n=null,{profile_string:o,level_string:l,bit_depth:f,chroma_format:u,chroma_format_string:i.getChromaFormatString(u),frame_rate:{fixed:T,fps:E,fps_den:w,fps_num:S},par_ratio:{width:b,height:v},codec_size:{width:D,height:L},present_size:{width:U,height:L}}}static _skipScalingList(e,t){let n=8,r=8,s=0;for(let i=0;i<t;i++)0!==r&&(r=(n+(s=e.readSEG())+256)%256),n=0===r?n:r}static getProfileString(e){switch(e){case 66:return"Baseline";case 77:return"Main";case 88:return"Extended";case 100:return"High";case 110:return"High10";case 122:return"High422";case 244:return"High444";default:return"Unknown"}}static getLevelString(e){return(e/10).toFixed(1)}static getChromaFormatString(e){switch(e){case 420:return"4:2:0";case 422:return"4:2:2";case 444:return"4:4:4";default:return"Unknown"}}static toVideoMeta(e){let t={};e&&e.codec_size&&(t.codecWidth=e.codec_size.width,t.codecHeight=e.codec_size.height,t.presentWidth=e.present_size.width,t.presentHeight=e.present_size.height),t.profile=e.profile_string,t.level=e.level_string,t.bitDepth=e.bit_depth,t.chromaFormat=e.chroma_format,t.parRatio={width:e.par_ratio.width,height:e.par_ratio.height},t.frameRate=e.frame_rate;let n=t.frameRate.fps_den,r=t.frameRate.fps_num;t.refSampleDuration=Math.floor(t.timescale*(n/r))}}t.default=i},"../xgplayer-demux/src/flv/amf-parser.js":
/*!***********************************************!*\
      !*** ../xgplayer-demux/src/flv/amf-parser.js ***!
      \***********************************************/
/*! no static exports found */function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(/*! xgplayer-utils */"../xgplayer-utils/index.js");const s={NUMBER:0,BOOLEAN:1,STRING:2,OBJECT:3,MIX_ARRAY:8,OBJECT_END:9,STRICT_ARRAY:10,DATE:11,LONE_STRING:12};t.default=class{constructor(){this.offset=0,this.readOffset=this.offset}resolve(e,t){if(t<3)throw new Error("not enough data for metainfo");const n={},r=this.parseValue(e),s=this.parseValue(e,t-r.bodySize);return n[r.data]=s.data,this.resetStatus(),n}resetStatus(){this.offset=0,this.readOffset=this.offset}parseString(e){const t=new DataView(e,this.readOffset).getUint16(0,!r.isLe);let n="";n=t>0?r.UTF8.decode(new Uint8Array(e,this.readOffset+2,t)):"";let s=t+2;return this.readOffset+=s,{data:n,bodySize:t+2}}parseDate(e,t){const n=new DataView(e,this.readOffset,t);let s=n.getFloat64(0,!r.isLe);return s+=60*n.getInt16(8,!r.isLe)*1e3,this.readOffset+=10,{data:new Date(s),bodySize:10}}parseObject(e,t){const n=this.parseString(e,t),r=this.parseValue(e,t-n.bodySize);return{data:{name:n.data,value:r.data},bodySize:n.bodySize+r.bodySize,isObjEnd:r.isObjEnd}}parseLongString(e){const t=new DataView(e,this.readOffset).getUint32(0,!r.isLe);let n="";return n=t>0?r.UTF8.decode(new Uint8Array(e,this.readOffset+2,t)):"",this.readOffset+=t+4,{data:n,bodySize:t+4}}parseValue(e,t){let n=new ArrayBuffer;n=e instanceof ArrayBuffer?e:e.buffer;const{NUMBER:i,BOOLEAN:a,STRING:o,OBJECT:l,MIX_ARRAY:d,OBJECT_END:u,STRICT_ARRAY:f,DATE:c,LONE_STRING:h}=s,p=new DataView(n,this.readOffset,t);let m=!1;const g=p.getUint8(0);let x=1;this.readOffset+=1;let _=null;switch(g){case i:_=p.getFloat64(1,!r.isLe),this.readOffset+=8,x+=8;break;case a:_=!!p.getUint8(1),this.readOffset+=1,x+=1;break;case o:{const e=this.parseString(n);_=e.data,x+=e.bodySize;break}case l:{_={};let e=0;for(16777215&p.getUint32(t-4,!r.isLe)&&(e=3);x<t-4;){const r=this.parseObject(n,t-x-e);if(r.isObjectEnd)break;_[r.data.name]=r.data.value,x+=r.bodySize}x<=t-3&&9==(16777215&p.getUint32(x-1,!r.isLe))&&(this.readOffset+=3,x+=3);break}case d:{_={},x+=4,this.readOffset+=4;let e=0;for(9==(16777215&p.getUint32(t-4,!r.isLe))&&(e=3);x<t-8;){const r=this.parseObject(n,t-x-e);if(r.isObjectEnd)break;_[r.data.name]=r.data.value,x+=r.bodySize}x<=t-3&&9==(16777215&p.getUint32(x-1,!r.isLe))&&(x+=3,this.readOffset+=3);break}case u:_=null,m=!0;break;case f:{_=[];const e=p.getUint32(1,!r.isLe);x+=4,this.readOffset+=4;for(let r=0;r<e;r++){const e=this.parseValue(n,t-x);_.push(e.data),x+=e.bodySize}break}case c:{const e=this.parseDate(n,t-1);_=e.data,x+=e.bodySize;break}case h:{const e=this.parseLongString(n,t-1);_=e.data,x+=e.bodySize;break}default:x=t}return{data:_,bodySize:x,isObjEnd:m}}}},"../xgplayer-demux/src/flv/index.js":
/*!******************************************!*\
      !*** ../xgplayer-demux/src/flv/index.js ***!
      \******************************************/
/*! no static exports found */function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r,s=n(/*! xgplayer-utils */"../xgplayer-utils/index.js"),i=n(/*! xgplayer-codec */"../xgplayer-codec/index.js"),a=n(/*! xgplayer-buffer */"../xgplayer-buffer/index.js"),o=(r=n(/*! ./amf-parser */"../xgplayer-demux/src/flv/amf-parser.js"))&&r.__esModule?r:{default:r};const l=s.EVENTS.DEMUX_EVENTS;class d{constructor(){this._firstFragmentLoaded=!1,this._trackNum=0,this._hasScript=!1}init(){this.on(l.DEMUX_START,this.doParseFlv.bind(this))}static isFlvFile(e){return!(70!==e[0]||76!==e[1]||86!==e[2]||1!==e[3])}static getPlayType(e){const t={hasVideo:!1,hasAudio:!1};return!0&e&&(t.hasVideo=!0),!0&e&&(t.hasAudio=!0),t}doParseFlv(){if(this._firstFragmentLoaded){if(this.loaderBuffer.length<11)return;let e;do{e=this._parseFlvTag()}while(e);this.emit(l.DEMUX_COMPLETE)}else{if(this.loaderBuffer.length<13)return;const e=this.loaderBuffer.shift(13);this.parseFlvHeader(e),this.doParseFlv()}}parseFlvHeader(e){if(d.isFlvFile(e)){this._firstFragmentLoaded=!0;const t=d.getPlayType(e[4]);t.hasVideo&&this.initVideoTrack(),t.hasAudio&&this.initAudioTrack()}else this.emit(l.DEMUX_ERROR,new Error("invalid flv file")),this.doParseFlv();this.doParseFlv()}initVideoTrack(){this._trackNum++;let e=new a.VideoTrack;e.meta=new s.VideoTrackMeta,e.id=e.meta.id=this._trackNum,this.tracks.videoTrack=e}initAudioTrack(){this._trackNum++;let e=new a.AudioTrack;e.meta=new s.AudioTrackMeta,e.id=e.meta.id=this._trackNum,this.tracks.audioTrack=e}_parseFlvTag(){if(this.loaderBuffer.length<11)return null;let e=this._parseFlvTagHeader();return e&&this._processChunk(e),e}_parseFlvTagHeader(){let e=0,t={},n=this.loaderBuffer.toInt(e,1);if(e+=1,t.filtered=(32&n)>>>5,t.tagType=31&n,t.datasize=this.loaderBuffer.toInt(e,3),e+=3,8!==t.tagType&&9!==t.tagType&&11!==t.tagType&&18!==t.tagType||0!==this.loaderBuffer.toInt(8,3))return this.loaderBuffer&&this.loaderBuffer.length>0&&this.loaderBuffer.shift(1),this.logger.warn(this.TAG,"tagType "+t.tagType),null;if(this.loaderBuffer.length<t.datasize+15)return null;this.loaderBuffer.shift(4);let r=this.loaderBuffer.toInt(0,3);this.loaderBuffer.shift(3);let s=this.loaderBuffer.shift(1)[0];return s>0&&(r+=16777216*s),t.dts=r,this.loaderBuffer.shift(3),t}_processChunk(e){switch(e.tagType){case 18:this._parseScriptData(e);break;case 8:this._parseAACData(e);break;case 9:this._parseHevcData(e);break;case 11:this.loaderBuffer.shift(3);break;default:this.loaderBuffer.shift(1)}}_parseScriptData(e){let t=this.tracks.audioTrack,n=this.tracks.videoTrack,r=this.loaderBuffer.shift(e.datasize);const s=(new o.default).resolve(r,r.length),i=this._context.onMetaData=s?s.onMetaData:void 0;if(this._context.mediaInfo.duration=i.duration,this._context.mediaInfo.hasVideo=i.hasVideo,this._context.mediaInfo.hsaAudio=i.hasAudio,this._datasizeValidator(e.datasize)&&(this.emit(l.MEDIA_INFO),this._hasScript=!0),t&&!t.hasSpecificConfig){let e=t.meta;switch(i.audiosamplerate&&(e.sampleRate=i.audiosamplerate),i.audiochannels&&(e.channelCount=i.audiochannels),i.audiosamplerate){case 44100:e.sampleRateIndex=4;break;case 22050:e.sampleRateIndex=7;break;case 11025:e.sampleRateIndex=10}}if(n&&!n.hasSpecificConfig){let e=n.meta;if("number"==typeof i.framerate){let t=Math.floor(1e3*i.framerate);if(t>0){let n=t/1e3;e.frameRate||(e.frameRate={}),e.frameRate.fixed=!0,e.frameRate.fps=n,e.frameRate.fps_num=t,e.frameRate.fps_den=1e3}}}}_aacSequenceHeaderParser(e){let t={hasSpecificConfig:!0};t.objectType=e[1]>>>3,t.sampleRateIndex=(7&e[1])<<1|e[2]>>>7,t.audiosamplerate=this._switchAudioSampleRate(t.sampleRateIndex),t.channelCount=(120&e[2])>>>3,t.frameLength=(4&e[2])>>>2,t.dependsOnCoreCoder=(2&e[2])>>>1,t.extensionFlagIndex=1&e[2],t.codec=`mp4a.40.${t.objectType}`;let n,r,s=window.navigator.userAgent.toLowerCase(),i=t.sampleRateIndex;return-1!==s.indexOf("firefox")?t.sampleRateIndex>=6?(t.objectType=5,r=new Array(4),n=i-3):(t.objectType=2,r=new Array(2),n=i):-1!==s.indexOf("android")?(t.objectType=2,r=new Array(2),n=i):(t.objectType=5,n=t.sampleRateIndex,r=new Array(4),t.sampleRateIndex>=6?n=t.sampleRateIndex-3:1===t.channelCount&&(t.objectType=2,r=new Array(2),n=t.sampleRateIndex)),r[0]=t.objectType<<3,r[0]|=(15&t.sampleRateIndex)>>>1,r[1]=(15&t.sampleRateIndex)<<7,r[1]|=(15&t.channelCount)<<3,5===t.objectType&&(r[1]|=(15&n)>>>1,r[2]=(1&n)<<7,r[2]|=8,r[3]=0),t.config=r,t}_parseAACData(e){let t=this.tracks.audioTrack;if(!t)return;let n=t.meta;n||(n=new s.AudioTrackMeta);let r=this.loaderBuffer.shift(1)[0];e.data=this.loaderBuffer.shift(e.datasize-1);let i=(240&r)>>>4;t.format=i,10!==i&&this.emit(l.DEMUX_ERROR,new Error(`invalid audio format: ${i}`)),10!==i||this._hasAudioSequence||(n.sampleRate=this._switchAudioSamplingFrequency(r),n.sampleRateIndex=(12&r)>>>2,n.frameLenth=(2&r)>>>1,n.channelCount=1&r,n.refSampleDuration=Math.floor(1024/n.audioSampleRate*n.timescale));let a=n.audioSampleRate,o=n.sampleRateIndex,d=n.refSampleDuration;delete e.tagType;let u=this._datasizeValidator(e.datasize);if(0===e.data[0]){let t=this._aacSequenceHeaderParser(e.data);a=t.audiosamplerate||n.audioSampleRate,o=t.sampleRateIndex||n.sampleRateIndex,d=Math.floor(1024/a*n.timescale),n.channelCount=t.channelCount,n.sampleRate=a,n.sampleRateIndex=o,n.refSampleDuration=d,n.duration=this._context.mediaInfo.duration*n.timescale,n.config=t.config,n.objectType=t.objectType;const r=this._context.mediaInfo.audio;r.codec=t.codec,r.channelCount=t.channelCount,r.sampleRate=a,r.sampleRateIndex=t.audioSampleRateIndex,this._hasScript&&!this._hasAudioSequence?this.emit(l.METADATA_PARSED,"audio"):this._hasScript&&this._hasAudioSequence&&this.emit(l.AUDIO_METADATA_CHANGE),this._hasAudioSequence=!0}else e.data=e.data.slice(1,e.data.length),t.samples.push(e);if(!u){const t=new Error("TAG length error at "+e.datasize);this.emit(l.DEMUX_ERROR,t.message),this.logger.warn(this.TAG,t.message)}}_parseHevcData(e){let t=this.loaderBuffer.shift(1)[0];e.frameType=(240&t)>>>4,e.isKeyframe=1===e.frameType;let n=15&t;if(this.tracks.videoTrack.codecID=n,e.avcPacketType=this.loaderBuffer.shift(1)[0],e.cts=this.loaderBuffer.toInt(0,3),this.loaderBuffer.shift(3),12===n){const t=this.loaderBuffer.shift(e.datasize-5);if(e.data=t,0!==Number.parseInt(e.avcPacketType)){this._datasizeValidator(e.datasize)||this.logger.warn(this.TAG,`invalid video tag datasize: ${e.datasize}`);let t={},n=0;for(t.cts=e.cts,t.dts=e.dts;e.data.length>n;){let r=e.data.slice(Number.parseInt(n),4+n);t.size=r[3],t.size+=256*r[2],t.size+=256*r[1]*256,t.size+=256*r[0]*256*256,n+=4,t.data=e.data.slice(Number.parseInt(n),t.size+n),n+=t.size,this.tracks.videoTrack.samples.push(t),this.emit(l.METADATA_PARSED,"video")}}else 0===Number.parseInt(e.avcPacketType)&&(this._datasizeValidator(e.datasize)?this.emit(l.METADATA_PARSED,"video"):this.logger.warn(this.TAG,`invalid video tag datasize: ${e.datasize}`))}else if(7===n){let t=this.loaderBuffer.shift(e.datasize-5);if(0===t[4]&&0===t[5]&&0===t[6]&&1===t[7]){let e=0;for(let n=0;n<4;n++)e=256*e+t[n];e-=4,(t=t.slice(4,t.length))[3]=e%256,e=(e-t[3])/256,t[2]=e%256,e=(e-t[2])/256,t[1]=e%256,t[0]=(e-t[1])/256}if(e.data=t,0===e.avcPacketType)this._avcSequenceHeaderParser(e.data),this._datasizeValidator(e.datasize)&&(this._hasScript&&!this._hasVideoSequence?this.emit(l.METADATA_PARSED,"video"):this._hasScript&&this._hasVideoSequence&&this.emit(l.VIDEO_METADATA_CHANGE),this._hasVideoSequence=!0);else{if(!this._datasizeValidator(e.datasize))return void this.logger.warn(this.TAG,`invalid video tag datasize: ${e.datasize}`);this.tracks.videoTrack.samples.push(e)}}else this.logger.warn(this.TAG,`video codeid is ${n}`),e.data=this.loaderBuffer.shift(e.datasize-1),this._datasizeValidator(e.datasize)||this.logger.warn(this.TAG,`invalid video tag datasize: ${e.datasize}`),this.tracks.videoTrack.samples.push(e),this.emit(l.DEMUX_COMPLETE);delete e.tagType}_avcSequenceHeaderParser(e){let t=this.tracks.videoTrack;if(!t)return;let n=0;t.meta||(t.meta=new s.VideoTrackMeta);let r=t.meta;r.configurationVersion=e[0],r.avcProfileIndication=e[1],r.profileCompatibility=e[2],r.avcLevelIndication=e[3]/10,r.nalUnitLength=1+(3&e[4]);let a=31&e[5];n=6;let o={};for(let t=0;t<a;t++){let t=255*e[n]+e[n+1];n+=2;let s=new Uint8Array(t);for(let r=0;r<t;r++)s[r]=e[n+r];let a="avc1.";for(let e=1;e<4;e++){let t=s[e].toString(16);t.length<2&&(t="0"+t),a+=t}r.codec=a,n+=t,this.tracks.videoTrack.meta.sps=s,o=i.SpsParser.parseSPS(s)}let l=e[n];n++;for(let t=0;t<l;t++){let t=255*e[n]+e[n+1];n+=2;let r=new Uint8Array(t);for(let s=0;s<t;s++)r[s]=e[n+s];n+=t,this.tracks.videoTrack.meta.pps=r}Object.assign(r,i.SpsParser.toVideoMeta(o));const d=this._context.mediaInfo.video;d.codec=r.codec,d.profile=r.profile,d.level=r.level,d.chromaFormat=r.chromaFormat,d.frameRate=r.frameRate,d.parRatio=r.parRatio,d.width=d.width===r.presentWidth?d.width:r.presentWidth,d.height=d.height===r.presentHeight?d.width:r.presentHeight,r.duration=this._context.mediaInfo.duration*r.timescale,r.avcc=new Uint8Array(e.length),r.avcc.set(e),t.meta=r}_switchAudioSampleRate(e){return[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350][e]}_switchAudioSamplingFrequency(e){return[5500,11025,22050,44100,48e3][(12&e)>>>2]}_switchAudioChannel(e){return[1,2][1&e]}_datasizeValidator(e){let t=this.loaderBuffer.toInt(0,4);return this.loaderBuffer.shift(4),t===e+11}get loaderBuffer(){if(this._context.getInstance("LOADER_BUFFER"))return this._context.getInstance("LOADER_BUFFER");this.emit(l.DEMUX_ERROR,new Error("找不到 loaderBuffer 实例"))}get tracks(){return this._context.getInstance("TRACKS")}get logger(){return this._context.getInstance("LOGGER")}}t.default=d},"../xgplayer-loader/index.js":
/*!***********************************!*\
      !*** ../xgplayer-loader/index.js ***!
      \***********************************/
/*! no static exports found */function(e,t,n){e.exports={FetchLoader:n(/*! ./src/fetch-loader */"../xgplayer-loader/src/fetch-loader.js").default}},"../xgplayer-loader/src/fetch-loader.js":
/*!**********************************************!*\
      !*** ../xgplayer-loader/src/fetch-loader.js ***!
      \**********************************************/
/*! no static exports found */function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});const r=n(/*! xgplayer-utils */"../xgplayer-utils/index.js").EVENTS.LOADER_EVENTS;t.default=class{constructor(e){this.configs=Object.assign({},e),this.url=null,this.status=0,this.error=null,this._reader=null,this._canceled=!1,this.readtype=this.configs.readtype,this.buffer=this.configs.buffer||"LOADER_BUFFER",this._loaderTaskNo=0}init(){this.on(r.LADER_START,this.load.bind(this))}static get type(){return"loader"}load(e,t){let n=this;this.url=e,this._canceled=!1;let s=this.getParams(t);return n.loading=!0,fetch(this.url,s).then((function(e){if(e.ok)return n.status=e.status,n._onFetchResponse(e);n.emit(r.LOADER_ERROR,n,e),n.loading=!1})).catch((function(e){throw n.emit(r.LOADER_ERROR,n,e),n.loading=!1,new Error(e.message)}))}_onFetchResponse(e){let t=this,n=this._context.getInstance(this.buffer);this._loaderTaskNo++;let s=this._loaderTaskNo;if(!0===e.ok)switch(this.readtype){case 2:e.json().then(e=>{t.loading=!1,t._canceled||(n?(n.push(e),t.emit(r.LOADER_COMPLETE,n)):t.emit(r.LOADER_COMPLETE,e))});break;case 1:e.text().then(e=>{t.loading=!1,t._canceled||(n?(n.push(e),t.emit(r.LOADER_COMPLETE,n)):t.emit(r.LOADER_COMPLETE,e))});break;case 3:e.arrayBuffer().then(e=>{t.loading=!1,t._canceled||(n?(n.push(new Uint8Array(e)),t.emit(r.LOADER_COMPLETE,n)):t.emit(r.LOADER_COMPLETE,e))});break;case 0:default:return this._onReader(e.body.getReader(),s)}}_onReader(e,t){let n=this._context.getInstance(this.buffer);if(n||this._reader.cancel(),this._reader=e,!1===this.loading)return;let s=this;this._reader&&this._reader.read().then((function(i){return i.done?(s.loading=!1,s.status=0,void s.emit(r.LOADER_COMPLETE,n)):s._canceled?void s._reader.cancel():(n.push(i.value),s.emit(r.LOADER_DATALOADED,n),s._onReader(e,t))})).catch(e=>{console.error(e),s.emit(r.LOADER_ERROR,s,e),s.loading=!1})}getParams(e){let t=Object.assign({},e),n=new Headers,r={method:"GET",headers:n,mode:"cors",cache:"default"};if("object"==typeof this.configs.headers){let e=this.configs.headers;for(let t in e)e.hasOwnProperty(t)&&n.append(t,e[t])}if("object"==typeof t.headers){let e=t.headers;for(let t in e)e.hasOwnProperty(t)&&n.append(t,e[t])}return!1===t.cors&&(r.mode="same-origin"),t.withCredentials&&(r.credentials="include"),r}cancel(){this._reader&&(this._reader.cancel(),this._reader=null,this.loading=!1,this._canceled=!0)}destroy(){this.cancel()}}},"../xgplayer-remux/index.js":
/*!**********************************!*\
      !*** ../xgplayer-remux/index.js ***!
      \**********************************/
/*! no static exports found */function(e,t,n){e.exports={Mp4Remuxer:n(/*! ./src/mp4 */"../xgplayer-remux/src/mp4/index.js").default}},"../xgplayer-remux/src/mp4/fmp4.js":
/*!*****************************************!*\
      !*** ../xgplayer-remux/src/mp4/fmp4.js ***!
      \*****************************************/
/*! no static exports found */function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(/*! xgplayer-utils */"../xgplayer-utils/index.js");class s{static size(e){return r.Buffer.writeUint32(e)}static initBox(e,t,...n){const i=new r.Buffer;return i.write(s.size(e),s.type(t),...n),i.buffer}static extension(e,t){return new Uint8Array([e,t>>16&255,t>>8&255,255&t])}static ftyp(){return s.initBox(24,"ftyp",new Uint8Array([105,115,111,109,0,0,0,1,105,115,111,109,97,118,99,49]))}static moov({type:e,meta:t}){let n,r=8,i=s.mvhd(t.duration,t.timescale);n="video"===e?s.videoTrak(t):s.audioTrak(t);let a=s.mvex(t.duration,t.timescale||1e3,t.id);return[i,n,a].forEach(e=>{r+=e.byteLength}),s.initBox(r,"moov",i,n,a)}static mvhd(e,t=1e3){let n=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,t>>>24&255,t>>>16&255,t>>>8&255,255&t,e>>>24&255,e>>>16&255,e>>>8&255,255&e,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return s.initBox(8+n.length,"mvhd",new Uint8Array(n))}static videoTrak(e){let t=8,n=s.tkhd({id:1,duration:e.duration,timescale:e.timescale||1e3,width:e.presentWidth,height:e.presentHeight,type:"video"}),r=s.mdia({type:"video",timescale:e.timescale||1e3,duration:e.duration,avcc:e.avcc,parRatio:e.parRatio,width:e.presentWidth,height:e.presentHeight});return[n,r].forEach(e=>{t+=e.byteLength}),s.initBox(t,"trak",n,r)}static audioTrak(e){let t=8,n=s.tkhd({id:2,duration:e.duration,timescale:e.timescale||1e3,width:0,height:0,type:"audio"}),r=s.mdia({type:"audio",timescale:e.timescale||1e3,duration:e.duration,channelCount:e.channelCount,samplerate:e.sampleRate,config:e.config});return[n,r].forEach(e=>{t+=e.byteLength}),s.initBox(t,"trak",n,r)}static tkhd(e){let t=e.id,n=e.duration,r=e.width,i=e.height,a=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,t>>>24&255,t>>>16&255,t>>>8&255,255&t,0,0,0,0,n>>>24&255,n>>>16&255,n>>>8&255,255&n,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,r>>>8&255,255&r,0,0,i>>>8&255,255&i,0,0]);return s.initBox(8+a.byteLength,"tkhd",a)}static edts(e){let t=new r.Buffer,n=e.duration,i=e.mediaTime;return t.write(s.size(36),s.type("edts")),t.write(s.size(28),s.type("elst")),t.write(new Uint8Array([0,0,0,1,n>>24&255,n>>16&255,n>>8&255,255&n,i>>24&255,i>>16&255,i>>8&255,255&i,0,0,0,1])),t.buffer}static mdia(e){let t=8,n=s.mdhd(e.timescale,e.duration),r=s.hdlr(e.type),i=s.minf(e);return[n,r,i].forEach(e=>{t+=e.byteLength}),s.initBox(t,"mdia",n,r,i)}static mdhd(e=1e3,t){let n=new Uint8Array([0,0,0,0,0,0,0,0,e>>>24&255,e>>>16&255,e>>>8&255,255&e,t>>>24&255,t>>>16&255,t>>>8&255,255&t,85,196,0,0]);return s.initBox(12+n.byteLength,"mdhd",s.extension(0,0),n)}static hdlr(e){let t=[0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0];return"audio"===e&&(t.splice(8,4,115,111,117,110),t.splice(24,13,83,111,117,110,100,72,97,110,100,108,101,114,0)),s.initBox(8+t.length,"hdlr",new Uint8Array(t))}static minf(e){let t=8,n="video"===e.type?s.vmhd():s.smhd(),r=s.dinf(),i=s.stbl(e);return[n,r,i].forEach(e=>{t+=e.byteLength}),s.initBox(t,"minf",n,r,i)}static vmhd(){return s.initBox(20,"vmhd",new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]))}static smhd(){return s.initBox(16,"smhd",new Uint8Array([0,0,0,0,0,0,0,0]))}static dinf(){let e=new r.Buffer;return e.write(s.size(36),s.type("dinf"),s.size(28),s.type("dref"),new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1])),e.buffer}static stbl(e){let t=8,n=s.stsd(e),r=s.stts(),i=s.stsc(),a=s.stsz(),o=s.stco();return[n,r,i,a,o].forEach(e=>{t+=e.byteLength}),s.initBox(t,"stbl",n,r,i,a,o)}static stsd(e){let t;return t="audio"===e.type?s.mp4a(e):s.avc1(e),s.initBox(16+t.byteLength,"stsd",s.extension(0,0),new Uint8Array([0,0,0,1]),t)}static mp4a(e){let t=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,e.samplerate>>8&255,255&e.samplerate,0,0]),n=s.esds(e.config);return s.initBox(8+t.byteLength+n.byteLength,"mp4a",t,n)}static esds(e=[43,146,8,0]){const t=e.length;let n=new r.Buffer,i=new Uint8Array([0,0,0,0,3,23+t,0,1,0,4,15+t,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([t]).concat(e).concat([6,1,2]));return n.write(s.size(8+i.byteLength),s.type("esds"),i),n.buffer}static avc1(e){let t=new r.Buffer,n=e.width,i=e.height,a=e.parRatio.height,o=e.parRatio.width,l=e.avcc,d=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,n>>8&255,255&n,i>>8&255,255&i,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),u=new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]),f=new Uint8Array([a>>24,a>>16&255,a>>8&255,255&a,o>>24,o>>16&255,o>>8&255,255&o]);return t.write(s.size(40+d.byteLength+l.byteLength+u.byteLength),s.type("avc1"),d,s.size(8+l.byteLength),s.type("avcC"),l,s.size(20),s.type("btrt"),u,s.size(16),s.type("pasp"),f),t.buffer}static stts(){let e=new Uint8Array([0,0,0,0,0,0,0,0]);return s.initBox(16,"stts",e)}static stsc(){let e=new Uint8Array([0,0,0,0,0,0,0,0]);return s.initBox(16,"stsc",e)}static stco(){let e=new Uint8Array([0,0,0,0,0,0,0,0]);return s.initBox(16,"stco",e)}static stsz(){let e=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]);return s.initBox(20,"stsz",e)}static mvex(e,t=1e3,n){let i=new r.Buffer,a=r.Buffer.writeUint32(e);return i.write(s.size(56),s.type("mvex"),s.size(16),s.type("mehd"),s.extension(0,0),a,s.trex(n)),i.buffer}static trex(e){let t=new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,255&e,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return s.initBox(8+t.byteLength,"trex",t)}static moof(e){let t=8,n=s.mfhd(),r=s.traf(e);return[n,r].forEach(e=>{t+=e.byteLength}),s.initBox(t,"moof",n,r)}static mfhd(){let e=r.Buffer.writeUint32(s.sequence);return s.sequence+=1,s.initBox(16,"mfhd",s.extension(0,0),e)}static traf(e){let t=8,n=s.tfhd(e.id),r=s.tfdt(e.time),i=s.sdtp(e),a=s.trun(e,i.byteLength);return[n,r,a,i].forEach(e=>{t+=e.byteLength}),s.initBox(t,"traf",n,r,a,i)}static tfhd(e){let t=r.Buffer.writeUint32(e);return s.initBox(16,"tfhd",s.extension(0,0),t)}static tfdt(e){return s.initBox(16,"tfdt",s.extension(0,0),r.Buffer.writeUint32(e))}static trun(e,t){let n=new r.Buffer,i=r.Buffer.writeUint32(e.samples.length),a=r.Buffer.writeUint32(92+16*e.samples.length+t);return n.write(s.size(20+16*e.samples.length),s.type("trun"),new Uint8Array([0,0,15,1]),i,a),e.samples.forEach(e=>{const t=e.flags;n.write(new Uint8Array([e.duration>>>24&255,e.duration>>>16&255,e.duration>>>8&255,255&e.duration,e.size>>>24&255,e.size>>>16&255,e.size>>>8&255,255&e.size,t.isLeading<<2|t.dependsOn,t.isDependedOn<<6|t.hasRedundancy<<4|t.isNonSync,0,0,e.cts>>>24&255,e.cts>>>16&255,e.cts>>>8&255,255&e.cts]))}),n.buffer}static sdtp(e){let t=new r.Buffer;return t.write(s.size(12+e.samples.length),s.type("sdtp"),s.extension(0,0)),e.samples.forEach(e=>{const n=e.flags,r=n.isLeading<<6|n.dependsOn<<4|n.isDependedOn<<2|n.hasRedundancy;t.write(new Uint8Array([r]))}),t.buffer}static mdat(e){let t=new r.Buffer,n=8;e.samples.forEach(e=>{n+=e.size}),t.write(s.size(n),s.type("mdat"));let i=new Uint8Array(n),a=0;return i.set(t.buffer,a),a+=8,e.samples.forEach(e=>{e.buffer.forEach(e=>{i.set(e,a),a+=e.byteLength})}),i}}s.type=e=>new Uint8Array([e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]),s.sequence=1,t.default=s},"../xgplayer-remux/src/mp4/index.js":
/*!******************************************!*\
      !*** ../xgplayer-remux/src/mp4/index.js ***!
      \******************************************/
/*! no static exports found */function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r,s=n(/*! xgplayer-utils */"../xgplayer-utils/index.js"),i=(r=n(/*! ./fmp4 */"../xgplayer-remux/src/mp4/fmp4.js"))&&r.__esModule?r:{default:r};const a=s.EVENTS.REMUX_EVENTS;class o{constructor(){this._dtsBase=0,this._isDtsBaseInited=!1,this.videoAllDuration=0,this.audioAllDuration=0}init(){this.on(a.REMUX_MEDIA,this.remux.bind(this)),this.on(a.REMUX_METADATA,this.onMetaDataReady.bind(this))}destroy(){this._dtsBase=-1,this._dtsBaseInited=!1}reset(){this._dtsBase=0,this._isDtsBaseInited=!1}remux(){const{audioTrack:e,videoTrack:t}=this._context.getInstance("TRACKS");!this._isDtsBaseInited&&this.calcDtsBase(e,t),this._remuxVideo(t),this._remuxAudio(e)}seek(){}onMetaDataReady(e){let t,n,r=new s.Buffer,o=i.default.ftyp();if("audio"===e){const{audioTrack:e}=this._context.getInstance("TRACKS");n=e}else{const{videoTrack:e}=this._context.getInstance("TRACKS");n=e}t=i.default.moov({type:e,meta:n.meta}),r.write(o,t);let l=this._context.getInstance("PRE_SOURCE_BUFFER"),d=l.getSource(e);d||(d=l.createSource(e)),d.mimetype=n.meta.codec,d.init=r,this.emit(a.INIT_SEGMENT,e)}calcDtsBase(e,t){if(!e.samples.length&&!t.samples.length)return;let n=1/0,r=1/0;e.samples&&e.samples.length&&(n=e.samples[0].dts),t.samples&&t.samples.length&&(r=t.samples[0].dts),this._dtsBase=Math.min(n,r),this._isDtsBaseInited=!0}_remuxVideo(e){const t=e;if(!e.samples||!e.samples.length)return;let{samples:n}=t,r=-1;const o=[],l={samples:[]};for(;n.length;){const e=n.shift(),{isKeyframe:t}=e;let s,i,a=e.dts-this._dtsBase;-1===r&&(r=a),e.pts&&(s=(i=e.pts-this._dtsBase)-a),e.cts&&(i=e.cts+a,s=e.cts);let d={buffer:[],size:0};l.samples.push(d),d.buffer.push(e.data),d.size+=e.data.byteLength;let u=0;u=n.length>=1?n[0].dts-this._dtsBase-a:o.length>=1?o[o.length-1].duration:this.videoMeta.refSampleDuration,this.videoAllDuration+=u,o.push({dts:a,cts:s,pts:i,data:e.data,size:e.data.byteLength,isKeyframe:t,duration:u,flags:{isLeading:0,dependsOn:t?2:1,isDependedOn:t?1:0,hasRedundancy:0,isNonSync:t?0:1},originDts:a,type:"video"})}let d=new s.Buffer;const u=i.default.moof({id:t.meta.id,time:r,samples:o}),f=i.default.mdat(l);d.write(u,f),t.samples=[],t.length=0;let c=this._context.getInstance("PRE_SOURCE_BUFFER"),h=c.getSource("video");h||(h=c.createSource("video")),h.data.push(d),this.emit(a.MEDIA_SEGMENT,"video")}_remuxAudio(e){const{samples:t}=e;let n=-1,r=[];const o={samples:[]};if(!t||!t.length)return;let l=!1;for(;t.length;){let e=t.shift();const{data:s}=e;let i=e.dts-this._dtsBase;const a=i;l||(n=i,l=!0);let d=0;d=this.audioMeta.refSampleDurationFixed?this.audioMeta.refSampleDurationFixed:t.length>=1?t[0].dts-this._dtsBase-i:r.length>=1?r[r.length-1].duration:this.audioMeta.refSampleDuration,this.audioAllDuration+=d;const u={dts:i,pts:i,cts:0,size:s.byteLength,duration:e.duration?e.duration:d,flags:{isLeading:0,dependsOn:2,isDependedOn:1,hasRedundancy:0,isNonSync:0},isKeyframe:!0,originDts:a,type:"audio"};let f={buffer:[],size:0};f.buffer.push(s),f.size+=s.byteLength,o.samples.push(f),r.push(u)}const d=new s.Buffer,u=i.default.moof({id:e.meta.id,time:n,samples:r}),f=i.default.mdat(o);d.write(u,f),e.samples=[],e.length=0;let c=this._context.getInstance("PRE_SOURCE_BUFFER"),h=c.getSource("audio");h||(h=c.createSource("audio")),h.data.push(d),this.emit(a.MEDIA_SEGMENT,"audio",d)}initSilentAudio(e,t){const n=o.getSilentFrame(this.audioMeta.channelCount);return{dts:e,pts:e,cts:0,duration:t,unit:n,size:n.byteLength,originDts:e,type:"video"}}get videoMeta(){return this._context.getInstance("TRACKS").videoTrack.meta}get audioMeta(){return this._context.getInstance("TRACKS").audioTrack.meta}static getSilentFrame(e){return 1===e?new Uint8Array([0,200,0,128,35,128]):2===e?new Uint8Array([33,0,73,144,2,25,0,35,128]):3===e?new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]):4===e?new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]):5===e?new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]):6===e?new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]):null}}t.default=o},"../xgplayer-utils/index.js":
/*!**********************************!*\
      !*** ../xgplayer-utils/index.js ***!
      \**********************************/
/*! no static exports found */function(e,t,n){e.exports={Context:n(/*! ./src/context */"../xgplayer-utils/src/context.js").default,EVENTS:n(/*! ./src/constants/events */"../xgplayer-utils/src/constants/events.js").default,WORKER_COMMANDS:n(/*! ./src/constants/worker-commands */"../xgplayer-utils/src/constants/worker-commands.js").default,sniffer:n(/*! ./src/env/sniffer */"../xgplayer-utils/src/env/sniffer.js").default,isLe:n(/*! ./src/env/isle */"../xgplayer-utils/src/env/isle.js").default,UTF8:n(/*! ./src/env/utf8 */"../xgplayer-utils/src/env/utf8.js").default,MediaInfo:n(/*! ./src/models/media-info */"../xgplayer-utils/src/models/media-info.js").default,MediaSample:n(/*! ./src/models/media-sample */"../xgplayer-utils/src/models/media-sample.js").default,MediaSegment:n(/*! ./src/models/media-segment */"../xgplayer-utils/src/models/media-segment.js").default,MediaSegmentList:n(/*! ./src/models/media-segment-list */"../xgplayer-utils/src/models/media-segment-list.js").default,AudioTrackMeta:n(/*! ./src/models/track-meta */"../xgplayer-utils/src/models/track-meta.js").AudioTrackMeta,VideoTrackMeta:n(/*! ./src/models/track-meta */"../xgplayer-utils/src/models/track-meta.js").VideoTrackMeta,AudioTrackSample:n(/*! ./src/models/track-sample */"../xgplayer-utils/src/models/track-sample.js").AudioTrackSample,VideoTrackSample:n(/*! ./src/models/track-sample */"../xgplayer-utils/src/models/track-sample.js").VideoTrackSample,Mse:n(/*! ./src/mse/index */"../xgplayer-utils/src/mse/index.js").default,Stream:n(/*! ./src/write/stream */"../xgplayer-utils/src/write/stream.js").default,Buffer:n(/*! ./src/write/buffer */"../xgplayer-utils/src/write/buffer.js").default,MobileVideo:n(/*! ./src/mobile/mobile-video */"../xgplayer-utils/src/mobile/mobile-video.js")}},"../xgplayer-utils/node_modules/concat-typed-array/lib/concat.js":
/*!***********************************************************************!*\
      !*** ../xgplayer-utils/node_modules/concat-typed-array/lib/concat.js ***!
      \***********************************************************************/
/*! no static exports found */function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){for(var t=0,n=arguments.length,r=Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];var i=!0,a=!1,o=void 0;try{for(var l,d=r[Symbol.iterator]();!(i=(l=d.next()).done);i=!0){var u=l.value;t+=u.length}}catch(e){a=!0,o=e}finally{try{!i&&d.return&&d.return()}finally{if(a)throw o}}var f=new e(t),c=0,h=!0,p=!1,m=void 0;try{for(var g,x=r[Symbol.iterator]();!(h=(g=x.next()).done);h=!0){var _=g.value;f.set(_,c),c+=_.length}}catch(e){p=!0,m=e}finally{try{!h&&x.return&&x.return()}finally{if(p)throw m}}return f}},"../xgplayer-utils/node_modules/concat-typed-array/lib/index.js":
/*!**********************************************************************!*\
      !*** ../xgplayer-utils/node_modules/concat-typed-array/lib/index.js ***!
      \**********************************************************************/
/*! no static exports found */function(e,t,n){var r,s=(r=n(/*! ./concat */"../xgplayer-utils/node_modules/concat-typed-array/lib/concat.js"))&&r.__esModule?r:{default:r};e.exports=s.default},"../xgplayer-utils/node_modules/webworkify-webpack/index.js":
/*!******************************************************************!*\
      !*** ../xgplayer-utils/node_modules/webworkify-webpack/index.js ***!
      \******************************************************************/
/*! no static exports found */function(e,t,n){function r(e){var t={};function n(r){if(t[r])return t[r].exports;var s=t[r]={i:r,l:!1,exports:{}};return e[r].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=e,n.c=t,n.i=function(e){return e},n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n.oe=function(e){throw console.error(e),e};var r=n(n.s=ENTRY_MODULE);return r.default||r}var s="[\\.|\\-|\\+|\\w|/|@]+",i="\\(\\s*(/\\*.*?\\*/)?\\s*.*?("+s+").*?\\)";function a(e){return(e+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function o(e,t,r){var o={};o[r]=[];var l=t.toString(),d=l.match(/^function\s?\w*\(\w+,\s*\w+,\s*(\w+)\)/);if(!d)return o;for(var u,f=d[1],c=new RegExp("(\\\\n|\\W)"+a(f)+i,"g");u=c.exec(l);)"dll-reference"!==u[3]&&o[r].push(u[3]);for(c=new RegExp("\\("+a(f)+'\\("(dll-reference\\s('+s+'))"\\)\\)'+i,"g");u=c.exec(l);)e[u[2]]||(o[r].push(u[1]),e[u[2]]=n(u[1]).m),o[u[2]]=o[u[2]]||[],o[u[2]].push(u[4]);for(var h,p=Object.keys(o),m=0;m<p.length;m++)for(var g=0;g<o[p[m]].length;g++)h=o[p[m]][g],isNaN(1*h)||(o[p[m]][g]=1*o[p[m]][g]);return o}function l(e){return Object.keys(e).reduce((function(t,n){return t||e[n].length>0}),!1)}e.exports=function(e,t){t=t||{};var s={main:n.m},i=t.all?{main:Object.keys(s.main)}:function(e,t){for(var n={main:[t]},r={main:[]},s={main:{}};l(n);)for(var i=Object.keys(n),a=0;a<i.length;a++){var d=i[a],u=n[d].pop();if(s[d]=s[d]||{},!s[d][u]&&e[d][u]){s[d][u]=!0,r[d]=r[d]||[],r[d].push(u);for(var f=o(e,e[d][u],d),c=Object.keys(f),h=0;h<c.length;h++)n[c[h]]=n[c[h]]||[],n[c[h]]=n[c[h]].concat(f[c[h]])}}return r}(s,e),a="";Object.keys(i).filter((function(e){return"main"!==e})).forEach((function(e){for(var t=0;i[e][t];)t++;i[e].push(t),s[e][t]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",a=a+"var "+e+" = ("+r.toString().replace("ENTRY_MODULE",JSON.stringify(t))+")({"+i[e].map((function(t){return JSON.stringify(t)+": "+s[e][t].toString()})).join(",")+"});\n"})),a=a+"new (("+r.toString().replace("ENTRY_MODULE",JSON.stringify(e))+")({"+i.main.map((function(e){return JSON.stringify(e)+": "+s.main[e].toString()})).join(",")+"}))(self);";var d=new window.Blob([a],{type:"text/javascript"});if(t.bare)return d;var u=(window.URL||window.webkitURL||window.mozURL||window.msURL).createObjectURL(d),f=new window.Worker(u);return f.objectURL=u,f}},"../xgplayer-utils/src/constants/events.js":
/*!*************************************************!*\
      !*** ../xgplayer-utils/src/constants/events.js ***!
      \*************************************************/
/*! no static exports found */function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});const r={LADER_START:"LOADER_START",LOADER_DATALOADED:"LOADER_DATALOADED",LOADER_COMPLETE:"LOADER_COMPLETE",LOADER_ERROR:"LOADER_ERROR"},s={DEMUX_START:"DEMUX_START",DEMUX_COMPLETE:"DEMUX_COMPLETE",DEMUX_ERROR:"DEMUX_ERROR",METADATA_PARSED:"METADATA_PARSED",VIDEO_METADATA_CHANGE:"VIDEO_METADATA_CHANGE",AUDIO_METADATA_CHANGE:"AUDIO_METADATA_CHANGE",MEDIA_INFO:"MEDIA_INFO"},i={REMUX_METADATA:"REMUX_METADATA",REMUX_MEDIA:"REMUX_MEDIA",MEDIA_SEGMENT:"MEDIA_SEGMENT",REMUX_ERROR:"REMUX_ERROR",INIT_SEGMENT:"INIT_SEGMENT"},a={SOURCE_UPDATE_END:"SOURCE_UPDATE_END"},o={RETRY_TIME_EXCEEDED:"RETRY_TIME_EXCEEDED"},l=Object.assign({},r,s,i,a,o),d=[],u=[];for(let e in l)l.hasOwnProperty(e)&&d.push(l[e]);for(let e in l)l.hasOwnProperty(e)&&u.push(l[e]);t.default={ALLEVENTS:l,HLS_EVENTS:o,REMUX_EVENTS:i,DEMUX_EVENTS:s,MSE_EVENTS:a,LOADER_EVENTS:r,FlvAllowedEvents:d,HlsAllowedEvents:u}},"../xgplayer-utils/src/constants/worker-commands.js":
/*!**********************************************************!*\
      !*** ../xgplayer-utils/src/constants/worker-commands.js ***!
      \**********************************************************/
/*! no static exports found */function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CONTEXT_COMOMANDS={ON:"on",ONCE:"once",OFF:"off",EMIT:"emit",DESTROY:"destroy"}},"../xgplayer-utils/src/context.js":
/*!****************************************!*\
      !*** ../xgplayer-utils/src/context.js ***!
      \****************************************/
/*! no static exports found */function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r,s=(r=n(/*! ./models/media-info */"../xgplayer-utils/src/models/media-info.js"))&&r.__esModule?r:{default:r},i=n(/*! events */"../../node_modules/events/events.js");const a="__TO__";t.default=class{constructor(e=[]){this._emitter=new i.EventEmitter,this._instanceMap={},this._clsMap={},this._inited=!1,this.mediaInfo=new s.default,this.allowedEvents=e,this._hooks={}}getInstance(e){return this._instanceMap[e]?this._instanceMap[e]:null}initInstance(e,...t){if(this._clsMap[e]){const n=new this._clsMap[e](...t);return this._instanceMap[e]=n,n.init&&n.init(),n}throw new Error(`${e}未在context中注册`)}init(e){if(!this._inited){for(let t in this._clsMap)this._clsMap.hasOwnProperty(t)&&!this._instanceMap[t]&&this.initInstance(t,e);this._inited=!0}}registry(e,t){const n=this._emitter,r=this._isMessageNameValid.bind(this),s=this;return this._clsMap[e]=class extends t{constructor(...t){super(...t),this.listeners={},this.onceListeners={},this.TAG=e,this._context=s}on(t,s){return r(t),this.listeners[t]?this.listeners[t].push(s):this.listeners[t]=[s],n.on(`${t}${a}${e}`,s),n.on(t,s)}before(e,t){r(e),s._hooks[e]?s._hooks[e].push(t):s._hooks[e]=[t]}once(t,s){return r(t),this.onceListeners[t]?this.onceListeners[t].push(s):this.onceListeners[t]=[s],n.once(`${t}${a}${e}`,s),n.once(t,s)}emit(e,...t){r(e);const i=s._hooks[e];if(i)for(let e=0,t=i.length;e<t;e++)(0,i[e])();return n.emit(e,...t)}emitTo(e,t,...s){return r(t),n.emit(`${t}${a}${e}`,...s)}off(e,t){return r(e),n.off(e,t)}removeListeners(){const t=Object.prototype.hasOwnProperty.bind(this.listeners);for(let r in this.listeners)if(t(r)){const t=this.listeners[r]||[];for(let s=0;s<t.length;s++){const i=t[s];n.off(r,i),n.off(`${r}${a}${e}`,i)}}for(let r in this.onceListeners)if(t(r)){const t=this.onceListeners[r]||[];for(let s=0;s<t.length;s++){const i=t[s];n.off(r,i),n.off(`${r}${a}${e}`,i)}}}destroy(){this.removeListeners(),delete s._instanceMap[e],super.destroy&&super.destroy()}},(...t)=>this.initInstance(e,...t)}destroyInstances(){Object.keys(this._instanceMap).forEach(e=>{this._instanceMap[e].destroy&&this._instanceMap[e].destroy()})}destroy(){this._emitter=null,this.allowedEvents=[],this._clsMap=null,this._context=null,this.destroyInstances()}_isMessageNameValid(e){if(!this.allowedEvents.indexOf(e)<0)throw new Error(`unregistered message name: ${e}`)}}},"../xgplayer-utils/src/env/isle.js":
/*!*****************************************!*\
      !*** ../xgplayer-utils/src/env/isle.js ***!
      \*****************************************/
/*! no static exports found */function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});const r=function(){const e=new ArrayBuffer(2);return new DataView(e).setInt16(0,256,!0),256===new Int16Array(e)[0]}();t.default=r},"../xgplayer-utils/src/env/sniffer.js":
/*!********************************************!*\
      !*** ../xgplayer-utils/src/env/sniffer.js ***!
      \********************************************/
/*! no static exports found */function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});const r=function(){const e=new ArrayBuffer(2);return new DataView(e).setInt16(0,256,!0),256===new Int16Array(e)[0]}(),s={get device(){let e=s.os;return e.isPc?"pc":e.isTablet?"tablet":"mobile"},get browser(){let e=navigator.userAgent.toLowerCase(),t={ie:/rv:([\d.]+)\) like gecko/,firfox:/firefox\/([\d.]+)/,chrome:/chrome\/([\d.]+)/,opera:/opera.([\d.]+)/,safari:/version\/([\d.]+).*safari/};return[].concat(Object.keys(t).filter(n=>t[n].test(e)))[0]},get os(){let e=navigator.userAgent,t=/(?:Windows Phone)/.test(e),n=/(?:SymbianOS)/.test(e)||t,r=/(?:Android)/.test(e),s=/(?:Firefox)/.test(e),i=/(?:iPad|PlayBook)/.test(e)||r&&!/(?:Mobile)/.test(e)||s&&/(?:Tablet)/.test(e),a=/(?:iPhone)/.test(e)&&!i;return{isTablet:i,isPhone:a,isAndroid:r,isPc:!a&&!r&&!n,isSymbian:n,isWindowsPhone:t,isFireFox:s}},get isLe(){return r}};t.default=s},"../xgplayer-utils/src/env/utf8.js":
/*!*****************************************!*\
      !*** ../xgplayer-utils/src/env/utf8.js ***!
      \*****************************************/
/*! no static exports found */function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});class r{static decode(e){const t=[],n=e;let s=0;const i=e.length;for(;s<i;)if(n[s]<128)t.push(String.fromCharCode(n[s])),++s;else{if(n[s]<192);else if(n[s]<224){if(r._checkContinuation(n,s,1)){const e=(31&n[s])<<6|63&n[s+1];if(e>=128){t.push(String.fromCharCode(65535&e)),s+=2;continue}}}else if(n[s]<240){if(r._checkContinuation(n,s,2)){const e=(15&n[s])<<12|(63&n[s+1])<<6|63&n[s+2];if(e>=2048&&55296!=(63488&e)){t.push(String.fromCharCode(65535&e)),s+=3;continue}}}else if(n[s]<248&&r._checkContinuation(n,s,3)){let e=(7&n[s])<<18|(63&n[s+1])<<12|(63&n[s+2])<<6|63&n[s+3];if(e>65536&&e<1114112){e-=65536,t.push(String.fromCharCode(e>>>10|55296)),t.push(String.fromCharCode(1023&e|56320)),s+=4;continue}}t.push(String.fromCharCode(65533)),++s}return t.join("")}static _checkContinuation(e,t,n){let r=e;if(t+n<r.length){for(;n--;)if(128!=(192&r[++t]))return!1;return!0}return!1}}t.default=r},"../xgplayer-utils/src/mobile/audio-context.js":
/*!*****************************************************!*\
      !*** ../xgplayer-utils/src/mobile/audio-context.js ***!
      \*****************************************************/
/*! no static exports found */function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});class r{constructor(e){this.config=Object.assign({},e);let t=window.AudioContext||window.webkitAudioContext;this.context=new t,this.gainNode=this.context.createGain(),this.gainNode.connect(this.context.destination),this.meta=void 0,this.samples=[],this.preloadTime=this.config.preloadTime||3,this.duration=0,this._currentBuffer=void 0,this._nextBuffer=void 0,this._lastpts=void 0,this._preDecode=[],this._currentTime=0,this._decoding=!1,this._played=!1}get currentTime(){return this._currentTime}decodeAudio(e){let{samples:t}=e,n=t;e.samples=[],this.setAudioData(n)}setAudioData(e){for(let t=0;t<e.length;t++)e[t].pts=void 0===e[t].pts?e[t].dts:e[t].pts,this._preDecode.push(e[t]);this._preDecode.length>0&&(void 0===this._lastpts&&(this._lastpts=this._preDecode[0].pts),(this._preDecode[this._preDecode.length-1].pts-this._lastpts)/1e3>this.preloadTime&&this.decodeAAC())}decodeAAC(){if(this._decoding)return;this._decoding=!0;let e=this._preDecode,t=[],n=this,s=e.shift();for(;s;){let n=r.getAACData(this.meta,s);t.push(n),this._lastpts=s.pts,s=e.shift()}let i=r.combileData(t);try{this.context.decodeAudioData(i.buffer,(function(e){let t=n.context.createBufferSource();t.buffer=e,t.onended=n.onSourceEnded.bind(n),n.samples.push({time:n.duration,duration:e.duration,data:t}),n.duration+=e.duration,n._currentBuffer||(n._currentBuffer=n.getTimeBuffer(n.currentTime),n._played&&n.play()),!n._nextBuffer&&n._currentBuffer&&(n._nextBuffer=n.getTimeBuffer(n.currentTime+n._currentBuffer.duration)),n._decoding=!1,(n._preDecode.length>0&&n._preDecode[n._preDecode.length-1].pts-n._lastpts)/1e3>=n.preloadTime&&n.decodeAAC()}))}catch(e){console.error(e)}}onSourceEnded(){if(!this._nextBuffer||!this._played)return;let e=this._nextBuffer.data;e.start(),e.connect(this.gainNode),this._currentBuffer=this._nextBuffer,this._currentTime=this._currentBuffer.time,this._nextBuffer=this.getTimeBuffer(this.currentTime),this._currentBuffer&&(this._nextBuffer=this.getTimeBuffer(this.currentTime+this._currentBuffer.duration))}play(){if(this._played=!0,!this._currentBuffer)return;let e=this._currentBuffer.data;e.connect(this.gainNode),e.start()}getTimeBuffer(e){let t;for(let n=0;n<this.samples.length;n++){let r=this.samples[n];if(r.time<=e&&r.time+r.duration>e){t=r;break}}return t}setAudioMetaData(e){this.meta=e}static getAACData(e,t){let n=new Uint8Array(t.data.byteLength+7),s=r.getAdts(e,t.data);return n.set(s),n.set(t.data,7),n}static combileData(e){let t=0;for(let n=0,r=e.length;n<r;n++)t+=e[n].byteLength;let n=new Uint8Array(t),r=0;for(let t=0,s=e.length;t<s;t++)n.set(e[t],r),r+=e[t].byteLength;return n}static getAdts(e,t){let n=new Uint8Array(7);n[0]=255,n[1]=240,n[1]=1|n[1],n[2]=192&e.objectType-1<<6,n[2]=n[2]|60&e.sampleRateIndex<<2,n[2]=n[2]|1&e.channelCount>>2,n[3]=192&e.channelCount<<6;let r=t.byteLength+7;return n[3]=n[3]|3&r>>11,n[4]=255&r>>3,n[5]=224&r<<5,n[5]=31|n[5],n[6]=252,n}}t.default=r},"../xgplayer-utils/src/mobile/mobile-video.js":
/*!****************************************************!*\
      !*** ../xgplayer-utils/src/mobile/mobile-video.js ***!
      \****************************************************/
/*! no static exports found */function(e,t,n){var r=i(n(/*! ./video-context */"../xgplayer-utils/src/mobile/video-context.js")),s=i(n(/*! ./audio-context */"../xgplayer-utils/src/mobile/audio-context.js"));function i(e){return e&&e.__esModule?e:{default:e}}n(/*! ./ticker */"../xgplayer-utils/src/mobile/ticker.js");class a extends HTMLElement{constructor(e){super();let t=this;this.vCtx=new r.default,this.aCtx=new s.default(e),this.vCtx.oncanplay=function(){t.appendChild(t.vCtx.canvas),console.log("canplay",t),t.dispatchEvent(new Event("canplay"))},this.historyTime=0}destroy(){}onDemuxComplete(e,t){this.aCtx.decodeAudio(t),this.vCtx.decodeVideo(e)}setAudioMeta(e){this.aCtx.setAudioMetaData(e)}setVideoMeta(e){this.vCtx.setVideoMetaData(e)}get currentTime(){}play(){this.aCtx.play(),this.vCtx.play()}}customElements.define("mobile-video",a)},"../xgplayer-utils/src/mobile/sourcebuffer.js":
/*!****************************************************!*\
      !*** ../xgplayer-utils/src/mobile/sourcebuffer.js ***!
      \****************************************************/
/*! no static exports found */function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(e){this.config=Object.assign({},e),this.type=this.config.type,this.buffer=[],this.currentGop=void 0,this._lastGet=void 0}push(e){if("video"===this.type){if(e.isKeyframe){let t={samples:[],start:e.dts,end:e.dts,nextGop:void 0};this.currentGop&&(this.currentGop.nextGop=t),this.currentGop=t,this.buffer.push(this.currentGop)}this.currentGop&&(this.currentGop.samples.push(e),e.dts<this.currentGop.start&&(this.currentGop.start=e.dts),e.dts>this.currentGop.end&&(this.currentGop.end=e.dts))}}get(e){if("video"===this.type){if(this.buffer.length<1)return;if(void 0===e)return this._getNext()}}_getNext(){if(this._lastGet){let e=this._lastGet.gop,t=e.samples[this._lastGet.index+1];if(t)return this._lastGet.index=this._lastGet.index+1,t;if(!(e=e.nextGop)||e.samples.length<1)return;return t=e.samples[0],this._lastGet={gop:e,index:0},t}{let e=this.buffer[0];if(e.samples.length<1)return;return this._lastGet={gop:e,index:0},e.samples[0]}}remove(e,t){if(this.buffer.length<0)return;let n=0,r=this.buffer[0];for(;r;)r.end<t&&r.start>=e?(delete this.buffer[n],r=this.buffer[n]):(n+=1,r=this.buffer[n])}}},"../xgplayer-utils/src/mobile/ticker.js":
/*!**********************************************!*\
      !*** ../xgplayer-utils/src/mobile/ticker.js ***!
      \**********************************************/
/*! no static exports found */function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});class r{constructor(e){this.options=Object.assign({},e||{},{interval:40}),this.callbacks=[]}nextTick(...e){this.callbacks=e}onTick(){for(let e=0,t=this.callbacks.length;e<t;e++)(0,this.callbacks[e])()}setInterval(e){this.options.interval=e}}class s extends r{constructor(e){super(e),this.prev=null,this.timerId=null,this._subTimerId=null}nexTick(...e){super.nextTick(...e),s.getTickFunc()(this.tick.bind(this))}tick(e){this.prev||(this.prev=e);const{interval:t}=this.options,{getTickFunc:n}=s,r=n(),i=this.prev+t-e,a=()=>{this.prev=null,this.onTick()};i<=0?(this._subTimerId&&(window.clearTimeout(this._subTimerId),this._subTimerId=null),a()):i<=10?this._subTimerId=setTimeout(()=>{a()},i):(()=>{this.timerId=r(this.tick.bind(this))})()}stop(){this.timerId&&s.getCancelFunc()(this.timerId)}static getTickFunc(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame}static getCancelFunc(){return window.cancelAnimationFrame||window.webkitCancelAnimationFrame}static isSupported(){return void 0!==s.getTickFunc()}}class i extends r{constructor(e){super(e),this.timeoutId=null}nextTick(...e){super.nextTick(...e),this.timeoutId=window.setTimeout(()=>{this.onTick()},this.options.interval)}stop(){this.timeoutId&&window.clearTimeout(this.timeoutId)}}t.getTicker=()=>s.isSupported()?s:i},"../xgplayer-utils/src/mobile/video-context.js":
/*!*****************************************************!*\
      !*** ../xgplayer-utils/src/mobile/video-context.js ***!
      \*****************************************************/
/*! no static exports found */function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=l(n(/*! webworkify-webpack */"../xgplayer-utils/node_modules/webworkify-webpack/index.js")),s=l(n(/*! ../write/stream */"../xgplayer-utils/src/write/stream.js")),i=l(n(/*! ../../../xgplayer-codec/src/h264/nalunit */"../xgplayer-codec/src/h264/nalunit/index.js")),a=l(n(/*! ./yuv-canvas */"../xgplayer-utils/src/mobile/yuv-canvas.js")),o=l(n(/*! ./sourcebuffer */"../xgplayer-utils/src/mobile/sourcebuffer.js"));function l(e){return e&&e.__esModule?e:{default:e}}t.default=class{constructor(e){this.config=Object.assign({},e),this.canvas=this.config.canvas?this.config.canvas:document.createElement("canvas"),this.source=new o.default({type:"video"}),this.preloadTime=this.config.preloadTime||3,this.oncanplay=void 0,this.meta=void 0,this.readyStatus=0,this.paused=!0,this.count=0,this.currentTime=0,this.lastPlayed=0,this._decoderInited=!1,this._avccpushed=!1,this._decodedFrames={},this._lastSampleDts=void 0,this._baseDts=void 0,this.initWasmWorker()}play(){this.paused=!1,this._onTimer()}pause(){this.paused=!0}seek(e){this.currentTime=e}initWasmWorker(){let e=this;this.wasmworker=(0,r.default)(/*! ./worker.js */"../xgplayer-utils/src/mobile/worker.js"),this.wasmworker.postMessage({msg:"init"}),this.wasmworker.addEventListener("message",t=>{switch(t.data.msg){case"DECODER_READY":e._decoderInited=!0;break;case"DECODED":this._onDecoded(t.data)}})}setVideoMetaData(e){if(this.meta=e,!this._decoderInited)return;this._avccpushed=!0;let t=new Uint8Array(e.sps.byteLength+4);if(t.set([0,0,0,1]),t.set(e.sps,4),this.wasmworker.postMessage({msg:"decode",data:t}),(t=new Uint8Array(e.pps.byteLength+4)).set([0,0,0,1]),t.set(e.pps,4),this.wasmworker.postMessage({msg:"decode",data:t}),!this.yuvCanvas){let t=Object.assign({meta:e,canvas:this.canvas},this.config);this.yuvCanvas=new a.default(t)}this.readyStatus=1}decodeVideo(e){if(!this._decoderInited)return;this._avccpushed||this.setVideoMetaData(this.meta);let{samples:t}=e,n=t.shift();for(;n;)this._baseDts||(this._baseDts=n.dts),this.source.push(n),n=t.shift();this._preload()}_preload(){if(!this._lastSampleDts||this._lastSampleDts-this._baseDts<this.currentTime+1e3*this.preloadTime){let e=this.source.get();for(e&&(this._lastSampleDts=e.dts,this._analyseNal(e));e&&this._lastSampleDts-this._baseDts<this.currentTime+1e3*this.preloadTime;)(e=this.source.get())&&(this._analyseNal(e),this._lastSampleDts=e.dts)}}_analyseNal(e){let t=i.default.getAvccNals(new s.default(e.data.buffer)),n=0;for(let e=0;e<t.length;e++)n+=t[e].body.byteLength+4;let r=0,a=new Uint8Array(n);for(let e=0;e<t.length;e++){let n=t[e];a.set([0,0,0,1],r),r+=4,a.set(new Uint8Array(n.body),r),r+=n.body.byteLength}this.wasmworker.postMessage({msg:"decode",data:a,info:{dts:e.dts,pts:e.pts?e.pts:e.dts+e.cts,key:e.isKeyframe}})}_onDecoded(e){let{dts:t}=e.info;this._decodedFrames[t]=e}_onTimer(){if(this.paused)return;let e=1e3/60;if(this.meta){this.meta.frameRate&&this.meta.frameRate.fixed&&this.meta.frameRate.fps&&(e=Math.ceil(1e3/this.meta.frameRate.fps));let t=Object.keys(this._decodedFrames);if(t.length>0){this.currentTime+=e;let n=-1;for(let e=0;e<t.length&&t[e]-this._baseDts<=this.currentTime;e++)n=t[e];let r=this._decodedFrames[n];if(r){this.oncanplay&&this.readyStatus<4&&(this.oncanplay(),this.readyStatus=4);const e=Date.now();this.yuvCanvas.render(r.buffer,r.width,r.height),console.log(`${n}渲染时长`,Date.now()-e),delete this._decodedFrames[n]}}}setTimeout(this._onTimer.bind(this),e)}_cleanBuffer(){this.source.remove(0,this.currentTime)}get fps(){}}},"../xgplayer-utils/src/mobile/worker.js":
/*!**********************************************!*\
      !*** ../xgplayer-utils/src/mobile/worker.js ***!
      \**********************************************/
/*! no static exports found */function(e,t,n){var r,s=function(e){this.inited=!1,this.self=e,this.infolist={},e.par_broadwayOnBroadwayInited=this.broadwayOnBroadwayInited.bind(this),e.par_broadwayOnPictureDecoded=this.broadwayOnPictureDecoded.bind(this)};function i(){(r=new s(this)).init()}function a(){self.importScripts("http://10.95.49.41:9090/examples/flv/decoder.js"),addOnPostRun(i.bind(self))}s.prototype.toU8Array=function(e,t){return this.self.HEAPU8.subarray(e,e+t)},s.prototype.init=function(){Module._broadwayInit(),this.streamBuffer=this.toU8Array(Module._broadwayCreateStream(1048576),1048576)},s.prototype.broadwayOnPictureDecoded=function(e,t,n,r){let s=Object.assign({},this.infolist[r]),i=this.toU8Array(e,t*n*3/2);this.infolist[r]=null;let a=new Uint8Array(i.length);a.set(i);let o=a.buffer;this.self.postMessage({msg:"DECODED",width:t,height:n,info:s,buffer:o},[o])},s.prototype.broadwayOnBroadwayInited=function(){this.inited=!0,this.self.postMessage({msg:"DECODER_READY"})},s.prototype.decode=function(e,t){let n=parseInt((new Date).getTime()),r=n-1e10*Math.floor(n/1e10);this.infolist[r]=t,this.streamBuffer.set(e),Module._broadwayPlayStream(e.length,r)},e.exports=function(e){e.addEventListener("message",(function(t){var n=t.data;if(n.msg)switch(n.msg){case"init":a();break;case"decode":r.decode(n.data,n.info)}else e.postMessage({msg:"ERROR:invalid message"})}),!1)}},"../xgplayer-utils/src/mobile/yuv-canvas.js":
/*!**************************************************!*\
      !*** ../xgplayer-utils/src/mobile/yuv-canvas.js ***!
      \**************************************************/
/*! no static exports found */function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(e){this.configs=Object.assign({},e),this.canvas=this.configs.canvas,this.meta=Object.assign({},this.configs.meta),this.chroma=this.meta.chromaFormat,this.height=this.meta.presentHeight,this.width=this.meta.presentWidth,this.canvas.width=this.width,this.canvas.height=this.height,this.canvas.style.width="100%",this.canvas.style.height="100%",this._initContextGL(),this.contextGL&&(this._initProgram(),this._initBuffers(),this._initTextures())}_initContextGL(){for(var e=this.canvas,t=null,n=["webgl","experimental-webgl","moz-webgl","webkit-3d"],r=0;!t&&r<n.length;){var s=n[r];try{t=this.contextOptions?e.getContext(s,this.contextOptions):e.getContext(s)}catch(e){t=null}t&&"function"==typeof t.getParameter||(t=null),++r}this.contextGL=t}_initProgram(){var e,t,n=this.contextGL;420===this.chroma?(e=["attribute vec4 vertexPos;","attribute vec4 texturePos;","attribute vec4 uTexturePos;","attribute vec4 vTexturePos;","varying vec2 textureCoord;","varying vec2 uTextureCoord;","varying vec2 vTextureCoord;","void main()","{","  gl_Position = vertexPos;","  textureCoord = texturePos.xy;","  uTextureCoord = uTexturePos.xy;","  vTextureCoord = vTexturePos.xy;","}"].join("\n"),t=["precision highp float;","varying highp vec2 textureCoord;","varying highp vec2 uTextureCoord;","varying highp vec2 vTextureCoord;","uniform sampler2D ySampler;","uniform sampler2D uSampler;","uniform sampler2D vSampler;","uniform mat4 YUV2RGB;","void main(void) {","  highp float y = texture2D(ySampler,  textureCoord).r;","  highp float u = texture2D(uSampler,  uTextureCoord).r;","  highp float v = texture2D(vSampler,  vTextureCoord).r;","  gl_FragColor = vec4(y, u, v, 1) * YUV2RGB;","}"].join("\n")):422===this.chroma&&(e=["attribute vec4 vertexPos;","attribute vec4 texturePos;","varying vec2 textureCoord;","void main()","{","  gl_Position = vertexPos;","  textureCoord = texturePos.xy;","}"].join("\n"),t=["precision highp float;","varying highp vec2 textureCoord;","uniform sampler2D sampler;","uniform highp vec2 resolution;","uniform mat4 YUV2RGB;","void main(void) {","  highp float texPixX = 1.0 / resolution.x;","  highp float logPixX = 2.0 / resolution.x;","  highp float logHalfPixX = 4.0 / resolution.x;","  highp float steps = floor(textureCoord.x / logPixX);","  highp float uvSteps = floor(textureCoord.x / logHalfPixX);","  highp float y = texture2D(sampler, vec2((logPixX * steps) + texPixX, textureCoord.y)).r;","  highp float u = texture2D(sampler, vec2((logHalfPixX * uvSteps), textureCoord.y)).r;","  highp float v = texture2D(sampler, vec2((logHalfPixX * uvSteps) + texPixX + texPixX, textureCoord.y)).r;","  gl_FragColor = vec4(y, u, v, 1.0) * YUV2RGB;","}"].join("\n"));var r=n.createShader(n.VERTEX_SHADER);n.shaderSource(r,e),n.compileShader(r),n.getShaderParameter(r,n.COMPILE_STATUS)||console.log("Vertex shader failed to compile: "+n.getShaderInfoLog(r));var s=n.createShader(n.FRAGMENT_SHADER);n.shaderSource(s,t),n.compileShader(s),n.getShaderParameter(s,n.COMPILE_STATUS)||console.log("Fragment shader failed to compile: "+n.getShaderInfoLog(s));var i=n.createProgram();n.attachShader(i,r),n.attachShader(i,s),n.linkProgram(i),n.getProgramParameter(i,n.LINK_STATUS)||console.log("Program failed to compile: "+n.getProgramInfoLog(i)),n.useProgram(i);var a=n.getUniformLocation(i,"YUV2RGB");n.uniformMatrix4fv(a,!1,[1.16438,0,1.59603,-.87079,1.16438,-.39176,-.81297,.52959,1.16438,2.01723,0,-1.08139,0,0,0,1]),this.shaderProgram=i}_initBuffers(){var e=this.contextGL,t=this.shaderProgram,n=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,n),e.bufferData(e.ARRAY_BUFFER,new Float32Array([1,1,-1,1,1,-1,-1,-1]),e.STATIC_DRAW);var r=e.getAttribLocation(t,"vertexPos");e.enableVertexAttribArray(r),e.vertexAttribPointer(r,2,e.FLOAT,!1,0,0);var s=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,s),e.bufferData(e.ARRAY_BUFFER,new Float32Array([1,0,0,0,1,1,0,1]),e.STATIC_DRAW);var i=e.getAttribLocation(t,"texturePos");if(e.enableVertexAttribArray(i),e.vertexAttribPointer(i,2,e.FLOAT,!1,0,0),this.texturePosBuffer=s,420===this.chroma){var a=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,a),e.bufferData(e.ARRAY_BUFFER,new Float32Array([1,0,0,0,1,1,0,1]),e.STATIC_DRAW);var o=e.getAttribLocation(t,"uTexturePos");e.enableVertexAttribArray(o),e.vertexAttribPointer(o,2,e.FLOAT,!1,0,0),this.uTexturePosBuffer=a;var l=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,l),e.bufferData(e.ARRAY_BUFFER,new Float32Array([1,0,0,0,1,1,0,1]),e.STATIC_DRAW);var d=e.getAttribLocation(t,"vTexturePos");e.enableVertexAttribArray(d),e.vertexAttribPointer(d,2,e.FLOAT,!1,0,0),this.vTexturePosBuffer=l}}_initTextures(){var e=this.contextGL,t=this.shaderProgram;if(420===this.chroma){var n=this._initTexture(),r=e.getUniformLocation(t,"ySampler");e.uniform1i(r,0),this.yTextureRef=n;var s=this._initTexture(),i=e.getUniformLocation(t,"uSampler");e.uniform1i(i,1),this.uTextureRef=s;var a=this._initTexture(),o=e.getUniformLocation(t,"vSampler");e.uniform1i(o,2),this.vTextureRef=a}else if(422===this.chroma){var l=this._initTexture(),d=e.getUniformLocation(t,"sampler");e.uniform1i(d,0),this.textureRef=l}}_initTexture(){var e=this.contextGL,t=e.createTexture();return e.bindTexture(e.TEXTURE_2D,t),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.bindTexture(e.TEXTURE_2D,null),t}_drawPictureGL(e,t,n){if(420===this.chroma){let i=t;var r=t*n,s=t/2*(n/2);let a={yData:(e=new Uint8Array(e)).subarray(0,r),uData:e.subarray(r,r+s),vData:e.subarray(r+s,r+s+s)};if(t%4>0){i=t+4-t%4;let e=new Uint8Array(i*n);for(let r=0;r<n;r++)e.set(a.yData.subarray(r*t,(r+1)*t),r*i);a.yData=e}if(t/2%4>0){i=t/2+4-t/2%4;let e=new Uint8Array(i*n/2),r=new Uint8Array(i*n/2);for(let s=0;s<n/2;s++)e.set(a.uData.subarray(s*t/2,(s+1)*t/2),s*i),r.set(a.vData.subarray(s*t/2,(s+1)*t/2),s*i);a.uData=e,a.vData=r}this._drawPictureGL420(a,t,n)}else 422===this.chroma&&(e=new Uint8Array(e),this._drawPictureGL422(t,n,e))}_drawPictureGL422(e,t,n){var r=this.contextGL,s=this.texturePosBuffer,i=this.textureRef,a=2*t,o=n;r.viewport(0,0,t,n);var l=n/o,d=t/(a/2),u=new Float32Array([d,0,0,0,d,l,0,l]);r.bindBuffer(r.ARRAY_BUFFER,s),r.bufferData(r.ARRAY_BUFFER,u,r.DYNAMIC_DRAW),r.uniform2f(r.getUniformLocation(this.shaderProgram,"resolution"),a,n),r.activeTexture(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,i),r.texImage2D(r.TEXTURE_2D,0,r.LUMINANCE,a,o,0,r.LUMINANCE,r.UNSIGNED_BYTE,e),r.drawArrays(r.TRIANGLE_STRIP,0,4)}_drawPictureGL420(e,t,n){var r=this.contextGL,s=this.texturePosBuffer,i=this.uTexturePosBuffer,a=this.vTexturePosBuffer,o=this.yTextureRef,l=this.uTextureRef,d=this.vTextureRef,u=e.yData,f=e.uData,c=e.vData,h=t,p=n,m=t/2,g=n/2,x=m,_=g;r.viewport(0,0,this.width,this.height);var y=n/p,b=t/h,v=new Float32Array([b,0,0,0,b,y,0,y]);r.bindBuffer(r.ARRAY_BUFFER,s),r.bufferData(r.ARRAY_BUFFER,v,r.DYNAMIC_DRAW),y=n/2/g,b=t/2/m;var E=new Float32Array([b,0,0,0,b,y,0,y]);r.bindBuffer(r.ARRAY_BUFFER,i),r.bufferData(r.ARRAY_BUFFER,E,r.DYNAMIC_DRAW),y=n/2/_,b=t/2/x;var T=new Float32Array([b,0,0,0,b,y,0,y]);r.bindBuffer(r.ARRAY_BUFFER,a),r.bufferData(r.ARRAY_BUFFER,T,r.DYNAMIC_DRAW),r.activeTexture(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,o),r.texImage2D(r.TEXTURE_2D,0,r.LUMINANCE,h,p,0,r.LUMINANCE,r.UNSIGNED_BYTE,u),r.activeTexture(r.TEXTURE1),r.bindTexture(r.TEXTURE_2D,l),r.texImage2D(r.TEXTURE_2D,0,r.LUMINANCE,m,g,0,r.LUMINANCE,r.UNSIGNED_BYTE,f),r.activeTexture(r.TEXTURE2),r.bindTexture(r.TEXTURE_2D,d),r.texImage2D(r.TEXTURE_2D,0,r.LUMINANCE,x,_,0,r.LUMINANCE,r.UNSIGNED_BYTE,c),r.drawArrays(r.TRIANGLE_STRIP,0,4)}_drawPictureRGB(e){}render(e,t,n){this.contextGL?this._drawPictureGL(e,t,n):this._drawPictureRGB(e)}}},"../xgplayer-utils/src/models/media-info.js":
/*!**************************************************!*\
      !*** ../xgplayer-utils/src/models/media-info.js ***!
      \**************************************************/
/*! no static exports found */function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});const r=e=>{for(let t in e)if(e.hasOwnProperty(t)&&null===e[t])return!1;return!0};class s{constructor(){this.mimeType=null,this.duration=null,this.hasVideo=null,this.video={codec:null,width:null,height:null,profile:null,level:null,frameRate:{fixed:!0,fps:25,fps_num:25e3,fps_den:1e3},chromaFormat:null,parRatio:{width:1,height:1}},this.hasAudio=null,this.audio={codec:null,sampleRate:null,sampleRateIndex:null,channelCount:null}}isComplete(){return s.isBaseInfoReady(this)&&s.isVideoReady(this)&&s.isAudioReady(this)}static isBaseInfoReady(e){return r(e)}static isVideoReady(e){return!e.hasVideo||r(e.video)}static isAudioReady(e){return!e.hasAudio||r(e.video)}}t.default=s},"../xgplayer-utils/src/models/media-sample.js":
/*!****************************************************!*\
      !*** ../xgplayer-utils/src/models/media-sample.js ***!
      \****************************************************/
/*! no static exports found */function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});class r{constructor(e){let t=r.getDefaultInf();if(!e||"[object Object]"!==Object.prototype.toString.call(e))return t;let n=Object.assign({},t,e);Object.entries(n).forEach(([e,t])=>{this[e]=t})}static getDefaultInf(){return{dts:null,pts:null,duration:null,position:null,isRAP:!1,originDts:null}}}t.default=r},"../xgplayer-utils/src/models/media-segment-list.js":
/*!**********************************************************!*\
      !*** ../xgplayer-utils/src/models/media-segment-list.js ***!
      \**********************************************************/
/*! no static exports found */function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(e){this._type=e,this._list=[],this._lastAppendLocation=-1}get type(){return this._type}get length(){return this._list.length}isEmpty(){return 0===this._list.length}clear(){this._list=[],this._lastAppendLocation=-1}_searchNearestSegmentBefore(e){let t=this._list;if(0===t.length)return-2;let n=t.length-1,r=0,s=0,i=n,a=0;if(e<t[0].originDts)return-1;for(;s<=i;){if((r=s+Math.floor((i-s)/2))===n||e>t[r].lastSample.originDts&&e<t[r+1].originDts){a=r;break}t[r].originDts<e?s=r+1:i=r-1}return a}_searchNearestSegmentAfter(e){return this._searchNearestSegmentBefore(e)+1}append(e){let t=this._list,n=this._lastAppendLocation,r=0;-1!==n&&n<t.length&&e.originStartDts>=t[n].lastSample.originDts&&(n===t.length-1||n<t.length-1&&e.originStartDts<t[n+1].originStartDts)?r=n+1:t.length>0&&(r=this._searchNearestSegmentBefore(e.originStartDts)+1),this._lastAppendLocation=r,this._list.splice(r,0,e)}getLastSegmentBefore(e){let t=this._searchNearestSegmentBefore(e);return t>=0?this._list[t]:null}getLastSampleBefore(e){let t=this.getLastSegmentBefore(e);return null!==t?t.lastSample:null}getLastRAPBefore(e){let t=this._searchNearestSegmentBefore(e),n=this._list[t].randomAccessPoints;for(;0===n.length&&t>0;)t--,n=this._list[t].randomAccessPoints;return n.length>0?n[n.length-1]:null}}},"../xgplayer-utils/src/models/media-segment.js":
/*!*****************************************************!*\
      !*** ../xgplayer-utils/src/models/media-segment.js ***!
      \*****************************************************/
/*! no static exports found */function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(){this.startDts=-1,this.endDts=-1,this.startPts=-1,this.endPts=-1,this.originStartDts=-1,this.originEndDts=-1,this.randomAccessPoints=[],this.firstSample=null,this.lastSample=null}addRAP(e){e.isRAP=!0,this.randomAccessPoints.push(e)}}},"../xgplayer-utils/src/models/track-meta.js":
/*!**************************************************!*\
      !*** ../xgplayer-utils/src/models/track-meta.js ***!
      \**************************************************/
/*! no static exports found */function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.AudioTrackMeta=class{constructor(e){const t={sampleRate:48e3,channelCount:2,codec:"mp4a.40.2",config:[41,401,136,0],duration:0,id:2,refSampleDuration:21,sampleRateIndex:3,timescale:1e3,type:"audio"};return e?Object.assign({},t,e):t}},t.VideoTrackMeta=class{constructor(e){const t={avcc:null,sps:new Uint8Array(0),pps:new Uint8Array(0),chromaFormat:420,codec:"avc1.640020",codecHeight:720,codecWidth:1280,duration:0,frameRate:{fixed:!0,fps:25,fps_num:25e3,fps_den:1e3},id:1,level:"3.2",presentHeight:720,presentWidth:1280,profile:"High",refSampleDuration:40,parRatio:{height:1,width:1},timescale:1e3,type:"video"};return e?Object.assign({},t,e):t}}},"../xgplayer-utils/src/models/track-sample.js":
/*!****************************************************!*\
      !*** ../xgplayer-utils/src/models/track-sample.js ***!
      \****************************************************/
/*! no static exports found */function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});class r{constructor(e){let t=r.getDefault();return e?Object.assign({},t,e):t}static getDefault(){return{dts:null,pts:null,data:new Uint8Array}}}t.AudioTrackSample=r;class s{constructor(e){let t=s.getDefault();return e?Object.assign({},t,e):t}static getDefault(){return{dts:null,pts:null,isKeyframe:!1,originDts:null,data:new Uint8Array}}}t.VideoTrackSample=s},"../xgplayer-utils/src/mse/index.js":
/*!******************************************!*\
      !*** ../xgplayer-utils/src/mse/index.js ***!
      \******************************************/
/*! no static exports found */function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(e){this.configs=Object.assign({},e),this.container=this.configs.container,this.mediaSource=null,this.sourceBuffers={},this.preloadTime=this.configs.preloadTime||1}init(){this.mediaSource=new self.MediaSource,this.mediaSource.addEventListener("sourceopen",this.onSourceOpen.bind(this)),this.container.src=URL.createObjectURL(this.mediaSource),this.url=this.container.src,this.container.addEventListener("timeupdate",this.onTimeUpdate.bind(this)),this.container.addEventListener("waiting",this.onWaiting.bind(this))}onTimeUpdate(){this.emit("TIME_UPDATE",this.container)}onWaiting(){this.emit("WAITING",this.container)}onSourceOpen(){this.addSourceBuffers()}onUpdateEnd(){this.emit("SOURCE_UPDATE_END"),this.doAppend()}addSourceBuffers(){if("open"!==this.mediaSource.readyState)return;let e,t=this._context.getInstance("PRE_SOURCE_BUFFER"),n=this._context.getInstance("TRACKS");t=t.sources;let r=!1;for(let s=0,i=Object.keys(t).length;s<i;s++){let i=Object.keys(t)[s];if("audio"===i?e=n.audioTrack:"video"===i&&(e=n.videoTrack),e){let n="audio"===i?21:40;e.meta&&e.meta.refSampleDuration&&(n=e.meta.refSampleDuration),t[i].data.length>=this.preloadTime/n&&(r=!0)}}if(r){if(Object.keys(this.sourceBuffers).length>0)return;for(let e=0,n=Object.keys(t).length;e<n;e++){let n=Object.keys(t)[e],r=t[n],s="video"===n?"video/mp4;codecs="+r.mimetype:"audio/mp4;codecs="+r.mimetype,i=this.mediaSource.addSourceBuffer(s);this.sourceBuffers[n]=i,i.addEventListener("updateend",this.onUpdateEnd.bind(this)),this.doAppend()}}}doAppend(){let e=this._context.getInstance("PRE_SOURCE_BUFFER");if(e)for(let t=0;t<Object.keys(this.sourceBuffers).length;t++){let n=Object.keys(this.sourceBuffers)[t],r=this.sourceBuffers[n];if(!r.updating){let t=e.sources[n];if(t&&!t.inited)r.appendBuffer(t.init.buffer.buffer),t.inited=!0;else if(t){let e=t.data.shift();e&&r.appendBuffer(e.buffer.buffer)}}}}endOfStream(){"open"===this.mediaSource.readyState&&this.mediaSource.endOfStream()}remove(e){for(let t=0;t<Object.keys(this.sourceBuffers).length;t++){let n=this.sourceBuffers[Object.keys(this.sourceBuffers)[t]];n.updating||n.remove(0,e)}}destroy(){this.container.removeEventListener("timeupdate",this.onTimeUpdate),this.container.removeEventListener("waiting",this.onWaiting),this.mediaSource.removeEventListener("sourceopen",this.onSourceOpen),this.configs={},this.container=null,this.mediaSource=null,this.sourceBuffers={},this.preloadTime=1;for(let e=0;e<Object.keys(this.sourceBuffers).length;e++){let t=this.sourceBuffers[Object.keys(this.sourceBuffers)[e]];t.removeEventListener("updateend",this.onUpdateEnd),this.mediaSource.removeSourceBuffer(t),delete this.sourceBuffers[Object.keys(this.sourceBuffers)[e]]}}}},"../xgplayer-utils/src/write/buffer.js":
/*!*********************************************!*\
      !*** ../xgplayer-utils/src/write/buffer.js ***!
      \*********************************************/
/*! no static exports found */function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r,s=(r=n(/*! concat-typed-array */"../xgplayer-utils/node_modules/concat-typed-array/lib/index.js"))&&r.__esModule?r:{default:r};t.default=class{constructor(e){this.buffer=e||new Uint8Array(0)}write(...e){e.forEach(e=>{this.buffer=(0,s.default)(Uint8Array,this.buffer,e)})}static writeUint32(e){return new Uint8Array([e>>24,e>>16&255,e>>8&255,255&e])}static readAsInt(e){let t="";return e.forEach(e=>{t+=function(e){return e.toString(16).padStart(2,"0")}(e)}),parseInt(t,16)}}},"../xgplayer-utils/src/write/stream.js":
/*!*********************************************!*\
      !*** ../xgplayer-utils/src/write/stream.js ***!
      \*********************************************/
/*! no static exports found */function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});class r{constructor(e){if(!(e instanceof ArrayBuffer))throw new Error("data is invalid");this.buffer=e,this.dataview=new DataView(e),this.dataview.position=0}get length(){return this.buffer.byteLength}set position(e){this.dataview.position=e}get position(){return this.dataview.position}back(e){this.position-=e}skip(e){let t=Math.floor(e/4),n=e%4;for(let e=0;e<t;e++)r.readByte(this.dataview,4);n>0&&r.readByte(this.dataview,n)}static readByte(e,t,n){let r;switch(t){case 1:r=n?e.getInt8(e.position):e.getUint8(e.position);break;case 2:r=n?e.getInt16(e.position):e.getUint16(e.position);break;case 3:if(n)throw new Error("not supported for readByte 3");r=e.getUint8(e.position)<<16,r|=e.getUint8(e.position+1)<<8,r|=e.getUint8(e.position+2);break;case 4:r=n?e.getInt32(e.position):e.getUint32(e.position);break;case 8:if(n)throw new Error("not supported for readBody 8");r=e.getUint32(e.position)<<32,r|=e.getUint32(e.position+4);break;default:r=""}return e.position+=t,r}readUint8(){return r.readByte(this.dataview,1)}readUint16(){return r.readByte(this.dataview,2)}readUint24(){return r.readByte(this.dataview,3)}readUint32(){return r.readByte(this.dataview,4)}readUint64(){return r.readByte(this.dataview,8)}readInt8(){return r.readByte(this.dataview,1,!0)}readInt16(){return r.readByte(this.dataview,2,!0)}readInt32(){return r.readByte(this.dataview,4,!0)}writeUint32(e){return new Uint8Array([e>>>24&255,e>>>16&255,e>>>8&255,255&e])}}t.default=r},"./src/flv-vod.js":
/*!************************!*\
      !*** ./src/flv-vod.js ***!
      \************************/
/*! no static exports found */function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=u(n(/*! ../../xgplayer-demux/src/flv */"../xgplayer-demux/src/flv/index.js")),s=u(n(/*! xgplayer-remux */"../xgplayer-remux/index.js")),i=n(/*! xgplayer-loader */"../xgplayer-loader/index.js"),a=n(/*! xgplayer-buffer */"../xgplayer-buffer/index.js"),o=n(/*! xgplayer-utils */"../xgplayer-utils/index.js"),l=n(/*! xgplayer-codec */"../xgplayer-codec/index.js"),d=u(n(/*! xgplayer */"xgplayer"));function u(e){return e&&e.__esModule?e:{default:e}}const f=o.EVENTS.REMUX_EVENTS,c=o.EVENTS.DEMUX_EVENTS,h=o.EVENTS.LOADER_EVENTS,p="FLVController";class m{warn(){}}class g{constructor(e){this.TAG=p,this._player=e,this.state={initSegmentArrived:!1,range:{start:0,end:""},rangeSupport:!0}}static findFilePosition(e,t){for(let n=0,r=t.times.length;n<r;n++){const s=t.times[n],i=n+1<r?t.times[n+1]:Number.MAX_SAFE_INTEGER;if(s<=e&&e<=i)return t.filepositions[n]}return""}init(){this._context.registry("FETCH_LOADER",i.FetchLoader),this._context.registry("LOADER_BUFFER",a.XgBuffer),this._context.registry("FLV_DEMUXER",r.default),this._context.registry("TRACKS",a.Tracks),this._context.registry("MP4_REMUXER",s.default.Mp4Remuxer),this._context.registry("PRE_SOURCE_BUFFER",a.PreSource),this._context.registry("COMPATIBILITY",l.Compatibility),this._context.registry("LOGGER",m),this.mse=this._context.registry("MSE",o.Mse)({container:this._player.video}),this.initListeners(),setTimeout(()=>{this.loadMeta()},0)}initListeners(){this.on(h.LOADER_DATALOADED,this._handleLoaderDataLoaded.bind(this)),this.on(c.MEDIA_INFO,this._handleMediaInfo.bind(this)),this.on(c.METADATA_PARSED,this._handleMetadataParsed.bind(this)),this.on(c.DEMUX_COMPLETE,this._handleDemuxComplete.bind(this)),this.on(c.DEMUX_ERROR,this._handleDemuxError.bind(this)),this.on(f.INIT_SEGMENT,this._handleAppendInitSegment.bind(this)),this.on(f.MEDIA_SEGMENT,this._handleMediaSegment.bind(this))}_handleMediaInfo(){this._context.onMetaData||this.emit(c.DEMUX_ERROR,new Error("failed to get mediainfo"));const e=this._context.getInstance("LOADER_BUFFER"),t=this._context.getInstance("FETCH_LOADER");this.isSeekable&&(t.cancel(),this.state.range={start:0,end:e.historyLen-1},setTimeout(()=>{this.loadNext(0)}))}_handleLoaderDataLoaded(){this.emitTo("FLV_DEMUXER",c.DEMUX_START)}_handleMetadataParsed(e){this.emit(f.REMUX_METADATA,e)}_handleDemuxComplete(){this.emit(f.REMUX_MEDIA)}_handleAppendInitSegment(){this.state.initSegmentArrived=!0,this.mse.addSourceBuffers()}_handleMediaSegment(){this.mse.addSourceBuffers(),this.mse.doAppend()}_handleDemuxError(){this._player.emit("error",new d.default.Errors("parse",this._player.config.url))}seek(e){if(!this._context.onMetaData)return void this.loadMeta();if(!this.isSeekable)return;this._context.getInstance("LOADER_BUFFER").clear();const{preloadTime:t=15}=this._player.config,n=this.getSeekRange(e,t);this.state.range=n,this.loadData()}loadNext(e){this._context.onMetaData&&(this.loader.loading||this.getNextRange(e)&&this.loadData())}loadData(){const{start:e,end:t}=this.state.range;this.emit(h.LADER_START,this._player.config.url,{headers:{method:"get",Range:`bytes=${e}-${t}`}})}loadMeta(){this.loader.load(this._player.config.url,{headers:{Range:"bytes=0-"}}).catch(()=>{this.state.rangeSupport=!1,this.loadFallback()})}loadFallback(){this.loader.load(this._player.config.url).catch(()=>{this._player.emit("error",new d.default.Errors("network",this._player.config.url))})}getSeekRange(e,t){const{keyframes:n}=this._context.onMetaData,r=this._context.mediaInfo.duration,s=e,i=e+t,a=g.findFilePosition(s,n);return i>=r||s>=r?{start:a,end:""}:{start:a,end:g.findFilePosition(i,n)}}getNextRange(e){if(""===this.state.range.end)return;const{end:t}=this.getSeekRange(e,this.config.preloadTime||15);return t<=this.state.range.end&&""!==t?void 0:(this.state.range={start:this.state.range.end+1,end:t},!0)}destroy(){this._player=null,this.state={initSegmentArrived:!1,range:{start:0,end:""},rangeSupport:!0}}get isSeekable(){return!!this.state.rangeSupport&&(!this._context||!this._context.mediaInfo.isComplete()||null!==this._context.mediaInfo.keyframes&&void 0!==this._context.mediaInfo.keyframes)}get config(){return this._player.config}get loader(){return this._context.getInstance("FETCH_LOADER")}}t.default=g},"./src/index.js":
/*!**********************!*\
      !*** ./src/index.js ***!
      \**********************/
/*! no static exports found */function(e,t,n){var r=a(n(/*! xgplayer */"xgplayer")),s=n(/*! xgplayer-utils */"../xgplayer-utils/index.js"),i=a(n(/*! ./flv-vod */"./src/flv-vod.js"));function a(e){return e&&e.__esModule?e:{default:e}}const o=s.EVENTS.FlvAllowedEvents,l=(e,t)=>{if(!e.config.isLive&&e.duration-e.currentTime<2){const n=e.getBufferedRange();e.currentTime-n[1]<.1&&(e.emit("ended"),t.mse.endOfStream())}};class d extends r.default{constructor(e){super(e),this.context=new s.Context(o),this.initEvents()}start(){const e=this.context.registry("FLV_CONTROLLER",i.default)(this);this.flv=e,this.context.init(),super.start(e.mse.url)}initEvents(){this.on("timeupdate",this.handleTimeUpdate.bind(this)),this.on("seeking",this.handleSeek.bind(this)),this.once("destroy",this._destroy.bind(this))}handleTimeUpdate(){this.loadData(),l(this,this.flv)}handleSeek(){const e=this.currentTime,t=this.getBufferedRange();(e>t[1]||e<t[0])&&this.flv.seek(this.currentTime)}_destroy(){this.context.destroy(),this.context=null,this.flv=null}loadData(e=this.currentTime){const t=this.getBufferedRange();t[1]-e<(this.config.preloadTime||15)-5&&this.flv.loadNext(t[1]+1)}get src(){return this.currentSrc}set src(e){this.player.config.url=e,this.paused?this.start(e):(this.pause(),this.once("pause",()=>{this.start(e)}),this.once("canplay",()=>{this.play()})),this.once("canplay",()=>{this.currentTime=0})}}e.exports=d},0:
/*!****************************!*\
      !*** multi ./src/index.js ***!
      \****************************/
/*! no static exports found */function(e,t,n){e.exports=n(/*! ./src/index.js */"./src/index.js")},xgplayer:
/*!***************************!*\
      !*** external "xgplayer" ***!
      \***************************/
/*! no static exports found */function(e,t){e.exports=r}}))},"./src/index.js":
/*!**********************!*\
  !*** ./src/index.js ***!
  \**********************/
/*! no static exports found */function(e,t,n){"use strict";var r=i(n(/*! xgplayer-flv-live */"../xgplayer-flv-live/dist/index.js")),s=i(n(/*! xgplayer-flv-vod */"../xgplayer-flv-vod/dist/index.js"));function i(e){return e&&e.__esModule?e:{default:e}}e.exports=function e(t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t.isLive?new r.default(t):new s.default(t)}},0:
/*!****************************!*\
  !*** multi ./src/index.js ***!
  \****************************/
/*! no static exports found */function(e,t,n){e.exports=n(/*! ./src/index.js */"./src/index.js")},xgplayer:
/*!*************************!*\
  !*** external "Player" ***!
  \*************************/
/*! no static exports found */function(e,t){e.exports=window.Player}});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9GbHZQbGF5ZXIvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vRmx2UGxheWVyLy4tbGl2ZS9kaXN0L2luZGV4LmpzIiwid2VicGFjazovL0ZsdlBsYXllci93ZWJwYWNrOi8veGdwbGF5ZXItZmx2L3dlYnBhY2svdW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbiIsIndlYnBhY2s6Ly9GbHZQbGF5ZXIvd2VicGFjazovL3hncGxheWVyLWZsdi93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9GbHZQbGF5ZXIvd2VicGFjazovL3hncGxheWVyLWZsdi9Vc2Vycy9sZW9uYXJkby9Eb2N1bWVudHMvZnJvbnQtZW5kL3BsYXllci94Z3BsYXllci9ub2RlX21vZHVsZXMvZXZlbnRzL2V2ZW50cy5qcyIsIndlYnBhY2s6Ly9GbHZQbGF5ZXIvd2VicGFjazovL3hncGxheWVyeGdwbGF5ZXItYnVmZmVyL2luZGV4LmpzIiwid2VicGFjazovL0ZsdlBsYXllci93ZWJwYWNrOi8veGdwbGF5ZXJ4Z3BsYXllci1idWZmZXIvc3JjL2J1ZmZlci5qcyIsIndlYnBhY2s6Ly9GbHZQbGF5ZXIvd2VicGFjazovL3hncGxheWVyeGdwbGF5ZXItYnVmZmVyL3NyYy9wcmVzb3VjZS5qcyIsIndlYnBhY2s6Ly9GbHZQbGF5ZXIvd2VicGFjazovL3hncGxheWVyeGdwbGF5ZXItYnVmZmVyL3NyYy90cmFjay5qcyIsIndlYnBhY2s6Ly9GbHZQbGF5ZXIvd2VicGFjazovL3hncGxheWVyeGdwbGF5ZXItY29kZWMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vRmx2UGxheWVyL3dlYnBhY2s6Ly94Z3BsYXllcnhncGxheWVyLWNvZGVjL3NyYy9hYWMvYWFjLWhlbHBlci5qcyIsIndlYnBhY2s6Ly9GbHZQbGF5ZXIvd2VicGFjazovL3hncGxheWVyeGdwbGF5ZXItY29kZWMvc3JjL2NvbXBhdGliaWxpdHkuanMiLCJ3ZWJwYWNrOi8vRmx2UGxheWVyL3dlYnBhY2s6Ly94Z3BsYXllcnhncGxheWVyLWNvZGVjL3NyYy9oMjY0L25hbHVuaXQvZ29sb21iLmpzIiwid2VicGFjazovL0ZsdlBsYXllci93ZWJwYWNrOi8veGdwbGF5ZXJ4Z3BsYXllci1jb2RlYy9zcmMvaDI2NC9uYWx1bml0L2luZGV4LmpzIiwid2VicGFjazovL0ZsdlBsYXllci93ZWJwYWNrOi8veGdwbGF5ZXJ4Z3BsYXllci1jb2RlYy9zcmMvaDI2NC9uYWx1bml0L3Nwcy5qcyIsIndlYnBhY2s6Ly9GbHZQbGF5ZXIvd2VicGFjazovL3hncGxheWVyeGdwbGF5ZXItZGVtdXgvc3JjL2Zsdi9hbWYtcGFyc2VyLmpzIiwid2VicGFjazovL0ZsdlBsYXllci93ZWJwYWNrOi8veGdwbGF5ZXJ4Z3BsYXllci1kZW11eC9zcmMvZmx2L2luZGV4LmpzIiwid2VicGFjazovL0ZsdlBsYXllci93ZWJwYWNrOi8veGdwbGF5ZXJ4Z3BsYXllci1sb2FkZXIvaW5kZXguanMiLCJ3ZWJwYWNrOi8vRmx2UGxheWVyL3dlYnBhY2s6Ly94Z3BsYXllcnhncGxheWVyLWxvYWRlci9zcmMvZmV0Y2gtbG9hZGVyLmpzIiwid2VicGFjazovL0ZsdlBsYXllci93ZWJwYWNrOi8veGdwbGF5ZXJ4Z3BsYXllci1yZW11eC9pbmRleC5qcyIsIndlYnBhY2s6Ly9GbHZQbGF5ZXIvd2VicGFjazovL3hncGxheWVyeGdwbGF5ZXItcmVtdXgvc3JjL21wNC9mbXA0LmpzIiwid2VicGFjazovL0ZsdlBsYXllci93ZWJwYWNrOi8veGdwbGF5ZXJ4Z3BsYXllci1yZW11eC9zcmMvbXA0L2luZGV4LmpzIiwid2VicGFjazovL0ZsdlBsYXllci93ZWJwYWNrOi8veGdwbGF5ZXJ4Z3BsYXllci11dGlscy9pbmRleC5qcyIsIndlYnBhY2s6Ly9GbHZQbGF5ZXIvd2VicGFjazovL3hncGxheWVyeGdwbGF5ZXItdXRpbHMvbm9kZV9tb2R1bGVzL2NvbmNhdC10eXBlZC1hcnJheS9saWIvY29uY2F0LmpzIiwid2VicGFjazovL0ZsdlBsYXllci93ZWJwYWNrOi8veGdwbGF5ZXJ4Z3BsYXllci11dGlscy9ub2RlX21vZHVsZXMvY29uY2F0LXR5cGVkLWFycmF5L2xpYi9pbmRleC5qcyIsIndlYnBhY2s6Ly9GbHZQbGF5ZXIvd2VicGFjazovL3hncGxheWVyeGdwbGF5ZXItdXRpbHMvbm9kZV9tb2R1bGVzL3dlYndvcmtpZnktd2VicGFjay9pbmRleC5qcyIsIndlYnBhY2s6Ly9GbHZQbGF5ZXIvd2VicGFjazovL3hncGxheWVyeGdwbGF5ZXItdXRpbHMvc3JjL2NvbnN0YW50cy9ldmVudHMuanMiLCJ3ZWJwYWNrOi8vRmx2UGxheWVyL3dlYnBhY2s6Ly94Z3BsYXllcnhncGxheWVyLXV0aWxzL3NyYy9jb25zdGFudHMvd29ya2VyLWNvbW1hbmRzLmpzIiwid2VicGFjazovL0ZsdlBsYXllci93ZWJwYWNrOi8veGdwbGF5ZXJ4Z3BsYXllci11dGlscy9zcmMvY29udGV4dC5qcyIsIndlYnBhY2s6Ly9GbHZQbGF5ZXIvd2VicGFjazovL3hncGxheWVyeGdwbGF5ZXItdXRpbHMvc3JjL2Vudi9pc2xlLmpzIiwid2VicGFjazovL0ZsdlBsYXllci93ZWJwYWNrOi8veGdwbGF5ZXJ4Z3BsYXllci11dGlscy9zcmMvZW52L3NuaWZmZXIuanMiLCJ3ZWJwYWNrOi8vRmx2UGxheWVyL3dlYnBhY2s6Ly94Z3BsYXllcnhncGxheWVyLXV0aWxzL3NyYy9lbnYvdXRmOC5qcyIsIndlYnBhY2s6Ly9GbHZQbGF5ZXIvd2VicGFjazovL3hncGxheWVyeGdwbGF5ZXItdXRpbHMvc3JjL21vYmlsZS9hdWRpby1jb250ZXh0LmpzIiwid2VicGFjazovL0ZsdlBsYXllci93ZWJwYWNrOi8veGdwbGF5ZXJ4Z3BsYXllci11dGlscy9zcmMvbW9iaWxlL21vYmlsZS12aWRlby5qcyIsIndlYnBhY2s6Ly9GbHZQbGF5ZXIvd2VicGFjazovL3hncGxheWVyeGdwbGF5ZXItdXRpbHMvc3JjL21vYmlsZS9zb3VyY2VidWZmZXIuanMiLCJ3ZWJwYWNrOi8vRmx2UGxheWVyL3dlYnBhY2s6Ly94Z3BsYXllcnhncGxheWVyLXV0aWxzL3NyYy9tb2JpbGUvdGlja2VyLmpzIiwid2VicGFjazovL0ZsdlBsYXllci93ZWJwYWNrOi8veGdwbGF5ZXJ4Z3BsYXllci11dGlscy9zcmMvbW9iaWxlL3ZpZGVvLWNvbnRleHQuanMiLCJ3ZWJwYWNrOi8vRmx2UGxheWVyL3dlYnBhY2s6Ly94Z3BsYXllcnhncGxheWVyLXV0aWxzL3NyYy9tb2JpbGUvd29ya2VyLmpzIiwid2VicGFjazovL0ZsdlBsYXllci93ZWJwYWNrOi8veGdwbGF5ZXJ4Z3BsYXllci11dGlscy9zcmMvbW9iaWxlL3l1di1jYW52YXMuanMiLCJ3ZWJwYWNrOi8vRmx2UGxheWVyL3dlYnBhY2s6Ly94Z3BsYXllcnhncGxheWVyLXV0aWxzL3NyYy9tb2RlbHMvbWVkaWEtaW5mby5qcyIsIndlYnBhY2s6Ly9GbHZQbGF5ZXIvd2VicGFjazovL3hncGxheWVyeGdwbGF5ZXItdXRpbHMvc3JjL21vZGVscy9tZWRpYS1zYW1wbGUuanMiLCJ3ZWJwYWNrOi8vRmx2UGxheWVyL3dlYnBhY2s6Ly94Z3BsYXllcnhncGxheWVyLXV0aWxzL3NyYy9tb2RlbHMvbWVkaWEtc2VnbWVudC1saXN0LmpzIiwid2VicGFjazovL0ZsdlBsYXllci93ZWJwYWNrOi8veGdwbGF5ZXJ4Z3BsYXllci11dGlscy9zcmMvbW9kZWxzL21lZGlhLXNlZ21lbnQuanMiLCJ3ZWJwYWNrOi8vRmx2UGxheWVyL3dlYnBhY2s6Ly94Z3BsYXllcnhncGxheWVyLXV0aWxzL3NyYy9tb2RlbHMvdHJhY2stbWV0YS5qcyIsIndlYnBhY2s6Ly9GbHZQbGF5ZXIvd2VicGFjazovL3hncGxheWVyeGdwbGF5ZXItdXRpbHMvc3JjL21vZGVscy90cmFjay1zYW1wbGUuanMiLCJ3ZWJwYWNrOi8vRmx2UGxheWVyL3dlYnBhY2s6Ly94Z3BsYXllcnhncGxheWVyLXV0aWxzL3NyYy9tc2UvaW5kZXguanMiLCJ3ZWJwYWNrOi8vRmx2UGxheWVyL3dlYnBhY2s6Ly94Z3BsYXllcnhncGxheWVyLXV0aWxzL3NyYy93cml0ZS9idWZmZXIuanMiLCJ3ZWJwYWNrOi8vRmx2UGxheWVyL3dlYnBhY2s6Ly94Z3BsYXllcnhncGxheWVyLXV0aWxzL3NyYy93cml0ZS9zdHJlYW0uanMiLCJ3ZWJwYWNrOi8vRmx2UGxheWVyL3dlYnBhY2s6Ly94Z3BsYXllci1mbHYvc3JjL2Zsdi12b2QuanMiLCJ3ZWJwYWNrOi8vRmx2UGxheWVyL3dlYnBhY2s6Ly94Z3BsYXllci1mbHYvc3JjL2luZGV4LmpzIiwid2VicGFjazovL0ZsdlBsYXllci93ZWJwYWNrOi94Z3BsYXllci1mbHYvZXh0ZXJuYWwgXCJ4Z3BsYXllclwiIiwid2VicGFjazovL0ZsdlBsYXllci8uL3NyYy9pbmRleC5qcyIsIndlYnBhY2s6Ly9GbHZQbGF5ZXIvZXh0ZXJuYWwgXCJQbGF5ZXJcIiJdLCJuYW1lcyI6WyJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsIndpbmRvdyIsIl9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfeGdwbGF5ZXJfXyIsImUiLCJhIiwiZGVmYXVsdCIsImV2YWwiLCIwIiwieGdwbGF5ZXIiLCJyZXF1aXJlIiwiUmVmbGVjdE93bktleXMiLCJSIiwiUmVmbGVjdCIsIlJlZmxlY3RBcHBseSIsImFwcGx5IiwidGFyZ2V0IiwicmVjZWl2ZXIiLCJhcmdzIiwiRnVuY3Rpb24iLCJvd25LZXlzIiwiZ2V0T3duUHJvcGVydHlTeW1ib2xzIiwiZ2V0T3duUHJvcGVydHlOYW1lcyIsImNvbmNhdCIsIk51bWJlcklzTmFOIiwiTnVtYmVyIiwiaXNOYU4iLCJFdmVudEVtaXR0ZXIiLCJpbml0IiwidGhpcyIsIl9ldmVudHMiLCJfZXZlbnRzQ291bnQiLCJfbWF4TGlzdGVuZXJzIiwiZGVmYXVsdE1heExpc3RlbmVycyIsIiRnZXRNYXhMaXN0ZW5lcnMiLCJ0aGF0IiwiX2FkZExpc3RlbmVyIiwidHlwZSIsImxpc3RlbmVyIiwicHJlcGVuZCIsImV2ZW50cyIsImV4aXN0aW5nIiwid2FybmluZyIsIlR5cGVFcnJvciIsIm5ld0xpc3RlbmVyIiwiZW1pdCIsInVuc2hpZnQiLCJwdXNoIiwibGVuZ3RoIiwid2FybmVkIiwidyIsIkVycm9yIiwiU3RyaW5nIiwiZW1pdHRlciIsImNvdW50IiwiY29uc29sZSIsIndhcm4iLCJvbmNlV3JhcHBlciIsImFyZ3VtZW50cyIsImZpcmVkIiwicmVtb3ZlTGlzdGVuZXIiLCJ3cmFwRm4iLCJfb25jZVdyYXAiLCJzdGF0ZSIsIndyYXBwZWQiLCJfbGlzdGVuZXJzIiwidW53cmFwIiwiZXZsaXN0ZW5lciIsImFyciIsInJldCIsIkFycmF5IiwiYXJyYXlDbG9uZSIsImxpc3RlbmVyQ291bnQiLCJjb3B5Iiwic2V0IiwiYXJnIiwiUmFuZ2VFcnJvciIsImdldFByb3RvdHlwZU9mIiwic2V0TWF4TGlzdGVuZXJzIiwiZ2V0TWF4TGlzdGVuZXJzIiwiZG9FcnJvciIsImVycm9yIiwiZXIiLCJlcnIiLCJtZXNzYWdlIiwiY29udGV4dCIsImhhbmRsZXIiLCJsZW4iLCJsaXN0ZW5lcnMiLCJhZGRMaXN0ZW5lciIsIm9uIiwicHJlcGVuZExpc3RlbmVyIiwib25jZSIsInByZXBlbmRPbmNlTGlzdGVuZXIiLCJsaXN0IiwicG9zaXRpb24iLCJvcmlnaW5hbExpc3RlbmVyIiwic2hpZnQiLCJpbmRleCIsInBvcCIsIm9mZiIsInJlbW92ZUFsbExpc3RlbmVycyIsImtleXMiLCJyYXdMaXN0ZW5lcnMiLCJldmVudE5hbWVzIiwiVHJhY2siLCJUcmFja3MiLCJBdWRpb1RyYWNrIiwiVmlkZW9UcmFjayIsIlhnQnVmZmVyIiwiUmVtdXhCdWZmZXIiLCJQcmVTb3VyY2UiLCJjb25zdHJ1Y3RvciIsImhpc3RvcnlMZW4iLCJhcnJheSIsIm9mZnNldCIsImRhdGEiLCJieXRlTGVuZ3RoIiwiVWludDhBcnJheSIsIl9zaGlmdEJ1ZmZlciIsInNsaWNlIiwidG1wb2ZmIiwidG1wIiwidGVtcGxlbmd0aCIsImNsZWFyIiwiZGVzdHJveSIsInRvSW50Iiwic3RhcnQiLCJyZXRJbnQiLCJ2aWRlbyIsImF1ZGlvIiwiU291cmNlIiwibWltZXR5cGUiLCJzb3VyY2VzIiwiZ2V0U291cmNlIiwic291cmNlIiwiY3JlYXRlU291cmNlIiwiaWQiLCJzZXF1ZW5jZU51bWJlciIsInNhbXBsZXMiLCJkcm9wcGVkU2FtcGxlcyIsInJlc2V0IiwiZGlzdHJveSIsInN1cGVyIiwiVEFHIiwiZHJvcHBlZCIsImF1ZGlvVHJhY2siLCJ2aWRlb1RyYWNrIiwiTmFsdW5pdCIsIlNwc1BhcnNlciIsIkNvbXBhdGliaWxpdHkiLCJjb2RlYyIsImNoYW5uZWxDb3VudCIsIlJFTVVYX0VWRU5UUyIsIkVWRU5UUyIsIm5leHRBdWRpb0R0cyIsIm5leHRWaWRlb0R0cyIsImxhc3RBdWRpb1NhbXBsZXNMZW4iLCJsYXN0VmlkZW9TYW1wbGVzTGVuIiwibGFzdFZpZGVvRHRzIiwibGFzdEF1ZGlvRHRzIiwiYWxsQXVkaW9TYW1wbGVzQ291bnQiLCJhbGxWaWRlb1NhbXBsZXNDb3VudCIsIl9maXJzdEF1ZGlvU2FtcGxlIiwiX2ZpcnN0VmlkZW9TYW1wbGUiLCJmaWxsZWRBdWRpb1NhbXBsZXMiLCJmaWxsZWRWaWRlb1NhbXBsZXMiLCJiZWZvcmUiLCJSRU1VWF9NRURJQSIsImRvRml4IiwiaXNGaXJzdEF1ZGlvU2FtcGxlcyIsImlzRmlyc3RWaWRlb1NhbXBsZXMiLCJnZXRGaXJzdFNhbXBsZSIsInJlbW92ZUludmFsaWRTYW1wbGVzIiwicmVjb3JkU2FtcGxlc0NvdW50IiwiZml4UmVmU2FtcGxlRHVyYXRpb24iLCJtZXRhIiwiZG9GaXhWaWRlbyIsImRvRml4QXVkaW8iLCJmaXJzdCIsInZpZGVvU2FtcGxlcyIsImZyYW1lUmF0ZSIsImZpeGVkIiwiZmlyc3RTYW1wbGUiLCJmaXJzdER0cyIsImR0cyIsInNhbXBsZXNMZW4iLCJ2aWRlb0ZpcnN0RHRzIiwiZ2FwIiwicmVmU2FtcGxlRHVyYXRpb24iLCJmaWxsQ291bnQiLCJNYXRoIiwiZmxvb3IiLCJjbG9uZWRGaXJzdFNhbXBsZSIsImFzc2lnbiIsInB0cyIsImN0cyIsInNpemUiLCJhYnNHYXAiLCJhYnMiLCJmaWxsRnJhbWVDb3VudCIsImNsb25lZFNhbXBsZSIsImNvbXB1dGVkIiwib3JpZ2luRHRzIiwibGFzdER0cyIsImxhc3RTYW1wbGVEdXJhdGlvbiIsImN1cnJlbnQiLCJuZXh0IiwiZHVyYXRpb24iLCJmaWxsRnJhbWVJZHgiLCJmaWxsRnJhbWUiLCJzcGxpY2UiLCJhdWRpb1NhbXBsZXMiLCJzaWxlbnRGcmFtZSIsIkFBQyIsImdldFNpbGVudEZyYW1lIiwic29ydEF1ZGlvU2FtcGxlcyIsInZpZGVvRmlyc3RQdHMiLCJzaWxlbnRTYW1wbGVDb3VudCIsInNpbGVudFNhbXBsZSIsImRhdGFzaXplIiwiZmlsdGVyZWQiLCJyZWZTYW1wbGVEdXJhdGlvbkZpeGVkIiwic2lsZW50RnJhbWVDb3VudCIsImZpbmRGaXJzdFZpZGVvU2FtcGxlIiwiZmluZEZpcnN0QXVkaW9TYW1wbGUiLCJpc1ZpZGVvIiwiYWxsU2FtcGxlc0NvdW50IiwiZmlsbGVkU2FtcGxlc0NvdW50IiwiZHVyYXRpb25BdmciLCJmaWx0ZXIiLCJzYW1wbGUiLCJzb3J0IiwiYiIsInNvcnRlZCIsImlzS2V5ZnJhbWUiLCJfY29udGV4dCIsImdldEluc3RhbmNlIiwidHJhY2tzIiwidWludDhhcnJheSIsIl9idWZmZXIiLCJfYnVmZmVySW5kZXgiLCJfdG90YWxCeXRlcyIsIl90b3RhbEJpdHMiLCJfY3VycmVudFdvcmQiLCJfY3VycmVudFdvcmRCaXRzTGVmdCIsIl9maWxsQ3VycmVudFdvcmQiLCJidWZmZXJCeXRlc0xlZnQiLCJieXRlc1JlYWQiLCJtaW4iLCJ3b3JkIiwic3ViYXJyYXkiLCJEYXRhVmlldyIsImJ1ZmZlciIsImdldFVpbnQzMiIsInJlYWRCaXRzIiwiYml0cyIsInJlc3VsdCIsImJpdHNOZWVkTGVmdCIsImJpdHNSZWFkTmV4dCIsInJlc3VsdDIiLCJyZWFkQm9vbCIsInJlYWRCeXRlIiwiX3NraXBMZWFkaW5nWmVybyIsInplcm9Db3VudCIsInJlYWRVRUciLCJsZWFkaW5nWmVyb3MiLCJyZWFkU0VHIiwiYnVmIiwiZGF0YXZpZXciLCJnZXRJbnQzMiIsImdldEludDE2IiwiZ2V0SW50OCIsImdldEFubmV4Yk5hbHMiLCJnZXRBdmNjTmFscyIsIm5hbHMiLCJnZXRIZWFkZXJQb3NpdGlvbkFubmV4QiIsInBvcyIsImVuZCIsImhlYWRlciIsImhlYWRlckxlbmd0aCIsInNraXAiLCJ1bml0IiwiYm9keSIsImFuYWx5c2VOYWwiLCJuZHIiLCJpZHIiLCJzcHMiLCJwYXJzZVNQUyIsInBwcyIsIlNQU1BhcnNlciIsInNyYyIsInNyY0xlbmd0aCIsImRzdCIsImRzdElkeCIsInJic3AiLCJfZWJzcDJyYnNwIiwiZ2IiLCJHb2xvbWIiLCJwcm9maWxlSWRjIiwibGV2ZWxJZGMiLCJwcm9maWxlX3N0cmluZyIsImdldFByb2ZpbGVTdHJpbmciLCJsZXZlbF9zdHJpbmciLCJnZXRMZXZlbFN0cmluZyIsImNocm9tYV9mb3JtYXRfaWRjIiwiY2hyb21hX2Zvcm1hdCIsImJpdF9kZXB0aCIsInNjYWxpbmdfbGlzdF9jb3VudCIsIl9za2lwU2NhbGluZ0xpc3QiLCJwaWNfb3JkZXJfY250X3R5cGUiLCJudW1fcmVmX2ZyYW1lc19pbl9waWNfb3JkZXJfY250X2N5Y2xlIiwicGljX3dpZHRoX2luX21ic19taW51czEiLCJwaWNfaGVpZ2h0X2luX21hcF91bml0c19taW51czEiLCJmcmFtZV9tYnNfb25seV9mbGFnIiwiZnJhbWVfY3JvcF9sZWZ0X29mZnNldCIsImZyYW1lX2Nyb3BfcmlnaHRfb2Zmc2V0IiwiZnJhbWVfY3JvcF90b3Bfb2Zmc2V0IiwiZnJhbWVfY3JvcF9ib3R0b21fb2Zmc2V0IiwicGFyX3dpZHRoIiwicGFyX2hlaWdodCIsImZwcyIsImZwc19maXhlZCIsImZwc19udW0iLCJmcHNfZGVuIiwiYXNwZWN0X3JhdGlvX2lkYyIsInBhcl93X3RhYmxlIiwicGFyX2hfdGFibGUiLCJudW1fdW5pdHNfaW5fdGljayIsInRpbWVfc2NhbGUiLCJwYXJTY2FsZSIsImNyb3BfdW5pdF94IiwiY3JvcF91bml0X3kiLCJjb2RlY193aWR0aCIsImNvZGVjX2hlaWdodCIsInByZXNlbnRfd2lkdGgiLCJjZWlsIiwiY2hyb21hX2Zvcm1hdF9zdHJpbmciLCJnZXRDaHJvbWFGb3JtYXRTdHJpbmciLCJmcmFtZV9yYXRlIiwicGFyX3JhdGlvIiwid2lkdGgiLCJoZWlnaHQiLCJjb2RlY19zaXplIiwicHJlc2VudF9zaXplIiwibGFzdF9zY2FsZSIsIm5leHRfc2NhbGUiLCJkZWx0YV9zY2FsZSIsInRvRml4ZWQiLCJjaHJvbWEiLCJzcHNDb25maWciLCJjb2RlY1dpZHRoIiwiY29kZWNIZWlnaHQiLCJwcmVzZW50V2lkdGgiLCJwcmVzZW50SGVpZ2h0IiwicHJvZmlsZSIsImxldmVsIiwiYml0RGVwdGgiLCJjaHJvbWFGb3JtYXQiLCJwYXJSYXRpbyIsImZwc0RlbiIsImZwc051bSIsInRpbWVzY2FsZSIsIkRBVEFfVFlQRVMiLCJOVU1CRVIiLCJCT09MRUFOIiwiU1RSSU5HIiwiT0JKRUNUIiwiTUlYX0FSUkFZIiwiT0JKRUNUX0VORCIsIlNUUklDVF9BUlJBWSIsIkRBVEUiLCJMT05FX1NUUklORyIsInJlYWRPZmZzZXQiLCJyZXNvbHZlIiwibWV0YURhdGEiLCJwYXJzZVZhbHVlIiwiYm9keVNpemUiLCJyZXNldFN0YXR1cyIsInBhcnNlU3RyaW5nIiwic3RyTGVuIiwiZ2V0VWludDE2IiwiaXNMZSIsInN0ciIsIlVURjgiLCJkZWNvZGUiLCJwYXJzZURhdGUiLCJkdiIsInRzIiwiZ2V0RmxvYXQ2NCIsIkRhdGUiLCJwYXJzZU9iamVjdCIsImlzT2JqRW5kIiwicGFyc2VMb25nU3RyaW5nIiwiQXJyYXlCdWZmZXIiLCJkYXRhVmlldyIsImdldFVpbnQ4Iiwib2JqRW5kU2l6ZSIsImFtZk9iaiIsImlzT2JqZWN0RW5kIiwiYW1mVmFyIiwiYXJyTGVuZ3RoIiwic2NyaXB0IiwiZGF0ZSIsImxvbmdTdHIiLCJERU1VWF9FVkVOVFMiLCJGbHZEZW11eGVyIiwiX2ZpcnN0RnJhZ21lbnRMb2FkZWQiLCJfdHJhY2tOdW0iLCJfaGFzU2NyaXB0IiwiREVNVVhfU1RBUlQiLCJkb1BhcnNlRmx2Iiwic3RyZWFtRmxhZyIsImhhc1ZpZGVvIiwiaGFzQXVkaW8iLCJsb2FkZXJCdWZmZXIiLCJjaHVuayIsIl9wYXJzZUZsdlRhZyIsIkRFTVVYX0NPTVBMRVRFIiwicGFyc2VGbHZIZWFkZXIiLCJpc0ZsdkZpbGUiLCJwbGF5VHlwZSIsImdldFBsYXlUeXBlIiwiaW5pdFZpZGVvVHJhY2siLCJpbml0QXVkaW9UcmFjayIsIkRFTVVYX0VSUk9SIiwiVmlkZW9UcmFja01ldGEiLCJBdWRpb1RyYWNrTWV0YSIsIl9wYXJzZUZsdlRhZ0hlYWRlciIsIl9wcm9jZXNzQ2h1bmsiLCJ0YWdUeXBlIiwibG9nZ2VyIiwidGltZXN0YW1wIiwidGltZXN0YW1wRXh0IiwiX3BhcnNlU2NyaXB0RGF0YSIsIl9wYXJzZUFBQ0RhdGEiLCJfcGFyc2VIZXZjRGF0YSIsImluZm8iLCJBTUZQYXJzZXIiLCJvbk1ldGFEYXRhIiwibWVkaWFJbmZvIiwiaHNhQXVkaW8iLCJfZGF0YXNpemVWYWxpZGF0b3IiLCJNRURJQV9JTkZPIiwiaGFzU3BlY2lmaWNDb25maWciLCJhdWRpb3NhbXBsZXJhdGUiLCJzYW1wbGVSYXRlIiwiYXVkaW9jaGFubmVscyIsInNhbXBsZVJhdGVJbmRleCIsImZyYW1lcmF0ZSIsIl9hYWNTZXF1ZW5jZUhlYWRlclBhcnNlciIsIm9iamVjdFR5cGUiLCJfc3dpdGNoQXVkaW9TYW1wbGVSYXRlIiwiZnJhbWVMZW5ndGgiLCJkZXBlbmRzT25Db3JlQ29kZXIiLCJleHRlbnNpb25GbGFnSW5kZXgiLCJleHRlbnNpb25TYW1wbGluZ0luZGV4IiwiY29uZmlnIiwidXNlckFnZW50IiwibmF2aWdhdG9yIiwidG9Mb3dlckNhc2UiLCJzYW1wbGluZ0luZGV4IiwiaW5kZXhPZiIsInRyYWNrIiwiZm9ybWF0IiwiX2hhc0F1ZGlvU2VxdWVuY2UiLCJfc3dpdGNoQXVkaW9TYW1wbGluZ0ZyZXF1ZW5jeSIsImZyYW1lTGVudGgiLCJhdWRpb1NhbXBsZVJhdGUiLCJhdWRpb1NhbXBsZVJhdGVJbmRleCIsInZhbGlkYXRlIiwiYWFjSGVhZGVyIiwiYXVkaW9NZWRpYSIsIk1FVEFEQVRBX1BBUlNFRCIsIkFVRElPX01FVEFEQVRBX0NIQU5HRSIsImZyYW1lVHlwZSIsImNvZGVjSUQiLCJhdmNQYWNrZXRUeXBlIiwicGFyc2VJbnQiLCJuYWx1Iiwic2l6ZXMiLCJhdmNjbGVuZ3RoIiwiX2F2Y1NlcXVlbmNlSGVhZGVyUGFyc2VyIiwiX2hhc1ZpZGVvU2VxdWVuY2UiLCJWSURFT19NRVRBREFUQV9DSEFOR0UiLCJjb25maWd1cmF0aW9uVmVyc2lvbiIsImF2Y1Byb2ZpbGVJbmRpY2F0aW9uIiwicHJvZmlsZUNvbXBhdGliaWxpdHkiLCJhdmNMZXZlbEluZGljYXRpb24iLCJuYWxVbml0TGVuZ3RoIiwibnVtT2ZTcHMiLCJqIiwiY29kZWNTdHJpbmciLCJoIiwidG9TdHJpbmciLCJudW1PZlBwcyIsInRvVmlkZW9NZXRhIiwidmlkZW9NZWRpYSIsImF2Y2MiLCJzYW1wbGluZ0ZyZXF1ZW5jeUluZGV4IiwiX3N3aXRjaEF1ZGlvQ2hhbm5lbCIsImRhdGFzaXplQ29uZmlybSIsIkZldGNoTG9hZGVyIiwiTE9BREVSX0VWRU5UUyIsImNvbmZpZ3MiLCJ1cmwiLCJzdGF0dXMiLCJfcmVhZGVyIiwiX2NhbmNlbGVkIiwicmVhZHR5cGUiLCJfbG9hZGVyVGFza05vIiwiTEFERVJfU1RBUlQiLCJsb2FkIiwib3B0cyIsIl90aGlzIiwicGFyYW1zIiwiZ2V0UGFyYW1zIiwibG9hZGluZyIsImZldGNoIiwidGhlbiIsInJlc3BvbnNlIiwib2siLCJfb25GZXRjaFJlc3BvbnNlIiwiTE9BREVSX0VSUk9SIiwiY2F0Y2giLCJ0YXNrbm8iLCJqc29uIiwiTE9BREVSX0NPTVBMRVRFIiwidGV4dCIsImFycmF5QnVmZmVyIiwiX29uUmVhZGVyIiwiZ2V0UmVhZGVyIiwicmVhZGVyIiwiY2FuY2VsIiwicmVhZCIsInZhbCIsImRvbmUiLCJMT0FERVJfREFUQUxPQURFRCIsIm9wdGlvbnMiLCJoZWFkZXJzIiwiSGVhZGVycyIsIm1ldGhvZCIsImNhY2hlIiwiY29uZmlnSGVhZGVycyIsImFwcGVuZCIsIm9wdEhlYWRlcnMiLCJjb3JzIiwid2l0aENyZWRlbnRpYWxzIiwiY3JlZGVudGlhbHMiLCJNcDRSZW11eGVyIiwiRm1wNCIsIkJ1ZmZlciIsIndyaXRlVWludDMyIiwiY29udGVudCIsIndyaXRlIiwidmVyc2lvbiIsImZsYWciLCJpbml0Qm94IiwidHJhayIsIm12aGQiLCJ2aWRlb1RyYWsiLCJhdWRpb1RyYWsiLCJtdmV4IiwiZm9yRWFjaCIsIml0ZW0iLCJieXRlcyIsInRraGQiLCJtZGlhIiwic2FtcGxlcmF0ZSIsIm1lZGlhVGltZSIsIm1kaGQiLCJoZGxyIiwibWluZiIsImV4dGVuc2lvbiIsInZtaGQiLCJzbWhkIiwiZGluZiIsInN0YmwiLCJzdHNkIiwic3R0cyIsInN0c2MiLCJzdHN6Iiwic3RjbyIsIm1wNGEiLCJhdmMxIiwiZXNkcyIsImNvbmZpZ2xlbiIsImhTcGFjaW5nIiwidlNwYWNpbmciLCJidHJ0IiwicGFzcCIsInRyYWNrSUQiLCJtZWhkIiwidHJleCIsIm1maGQiLCJ0cmFmIiwic2VxdWVuY2UiLCJ0ZmhkIiwidGZkdCIsInRpbWUiLCJzZHRwIiwidHJ1biIsInNkdHBMZW5ndGgiLCJzYW1wbGVDb3VudCIsImZsYWdzIiwiaXNMZWFkaW5nIiwiZGVwZW5kc09uIiwiaXNEZXBlbmRlZE9uIiwiaGFzUmVkdW5kYW5jeSIsImlzTm9uU3luYyIsIm51bSIsIm1kYXRCb3giLCJjaGFyQ29kZUF0IiwiX2R0c0Jhc2UiLCJfaXNEdHNCYXNlSW5pdGVkIiwidmlkZW9BbGxEdXJhdGlvbiIsImF1ZGlvQWxsRHVyYXRpb24iLCJyZW11eCIsIlJFTVVYX01FVEFEQVRBIiwib25NZXRhRGF0YVJlYWR5IiwiX2R0c0Jhc2VJbml0ZWQiLCJjYWxjRHRzQmFzZSIsIl9yZW11eFZpZGVvIiwiX3JlbXV4QXVkaW8iLCJzZWVrIiwibW9vdiIsImluaXRTZWdtZW50IiwiZnR5cCIsInByZXNvdXJjZWJ1ZmZlciIsIklOSVRfU0VHTUVOVCIsImF1ZGlvQmFzZSIsIkluZmluaXR5IiwidmlkZW9CYXNlIiwibXA0U2FtcGxlcyIsImF2Y1NhbXBsZSIsIm1kYXRTYW1wbGUiLCJzYW1wbGVEdXJhdGlvbiIsInZpZGVvTWV0YSIsIm1vb2ZNZGF0IiwibW9vZiIsIm1kYXQiLCJNRURJQV9TRUdNRU5UIiwiaXNGaXJzdER0c0luaXRlZCIsImF1ZGlvTWV0YSIsIm1wNFNhbXBsZSIsImluaXRTaWxlbnRBdWRpbyIsIkNvbnRleHQiLCJXT1JLRVJfQ09NTUFORFMiLCJzbmlmZmVyIiwiTWVkaWFJbmZvIiwiTWVkaWFTYW1wbGUiLCJNZWRpYVNlZ21lbnQiLCJNZWRpYVNlZ21lbnRMaXN0IiwiQXVkaW9UcmFja1NhbXBsZSIsIlZpZGVvVHJhY2tTYW1wbGUiLCJNc2UiLCJTdHJlYW0iLCJNb2JpbGVWaWRlbyIsIlJlc3VsdENvbnN0cnVjdG9yIiwidG90YWxMZW5ndGgiLCJfbGVuIiwiYXJyYXlzIiwiX2tleSIsIl9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24iLCJfZGlkSXRlcmF0b3JFcnJvciIsIl9pdGVyYXRvckVycm9yIiwiX3N0ZXAiLCJfaXRlcmF0b3IiLCJpdGVyYXRvciIsInJldHVybiIsIl9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24yIiwiX2RpZEl0ZXJhdG9yRXJyb3IyIiwiX2l0ZXJhdG9yRXJyb3IyIiwiX3N0ZXAyIiwiX2l0ZXJhdG9yMiIsIl9hcnIiLCJvYmoiLCJfY29uY2F0MiIsIndlYnBhY2tCb290c3RyYXBGdW5jIiwiY29uZmlndXJhYmxlIiwib2UiLCJmIiwiRU5UUllfTU9EVUxFIiwibW9kdWxlTmFtZVJlcUV4cCIsImRlcGVuZGVuY3lSZWdFeHAiLCJxdW90ZVJlZ0V4cCIsInJlcGxhY2UiLCJnZXRNb2R1bGVEZXBlbmRlbmNpZXMiLCJxdWV1ZU5hbWUiLCJyZXR2YWwiLCJmblN0cmluZyIsIndyYXBwZXJTaWduYXR1cmUiLCJtYXRjaCIsIndlYnBhY2tSZXF1aXJlTmFtZSIsInJlIiwiUmVnRXhwIiwiZXhlYyIsImhhc1ZhbHVlc0luUXVldWVzIiwicXVldWVzIiwicmVkdWNlIiwiaGFzVmFsdWVzIiwibWFpbiIsIl9fd2VicGFja19tb2R1bGVzX18iLCJyZXF1aXJlZE1vZHVsZXMiLCJhbGwiLCJtb2R1bGVzUXVldWUiLCJzZWVuTW9kdWxlcyIsIm1vZHVsZVRvQ2hlY2siLCJuZXdNb2R1bGVzIiwibmV3TW9kdWxlc0tleXMiLCJlbnRyeU1vZHVsZSIsIkpTT04iLCJzdHJpbmdpZnkiLCJtYXAiLCJqb2luIiwiYmxvYiIsIkJsb2IiLCJiYXJlIiwid29ya2VyVXJsIiwiVVJMIiwid2Via2l0VVJMIiwibW96VVJMIiwibXNVUkwiLCJjcmVhdGVPYmplY3RVUkwiLCJ3b3JrZXIiLCJXb3JrZXIiLCJvYmplY3RVUkwiLCJSRU1VWF9FUlJPUiIsIk1TRV9FVkVOVFMiLCJTT1VSQ0VfVVBEQVRFX0VORCIsIkhMU19FVkVOVFMiLCJSRVRSWV9USU1FX0VYQ0VFREVEIiwiQUxMRVZFTlRTIiwiRmx2QWxsb3dlZEV2ZW50cyIsIkhsc0FsbG93ZWRFdmVudHMiLCJDT05URVhUX0NPTU9NQU5EUyIsIk9OIiwiT05DRSIsIk9GRiIsIkVNSVQiLCJERVNUUk9ZIiwiRElSRUNUX0VNSVRfRkxBRyIsImFsbG93ZWRFdmVudHMiLCJfZW1pdHRlciIsIl9pbnN0YW5jZU1hcCIsIl9jbHNNYXAiLCJfaW5pdGVkIiwiX2hvb2tzIiwidGFnIiwiaW5pdEluc3RhbmNlIiwibmV3SW5zdGFuY2UiLCJyZWdpc3RyeSIsImNscyIsImNoZWNrTWVzc2FnZU5hbWUiLCJfaXNNZXNzYWdlTmFtZVZhbGlkIiwic2VsZiIsIm9uY2VMaXN0ZW5lcnMiLCJtZXNzYWdlTmFtZSIsImNhbGxiYWNrIiwiYmVmb3JlTGlzdCIsImVtaXRUbyIsInJlbW92ZUxpc3RlbmVycyIsImhhc093biIsImNhbGxiYWNrcyIsImRlc3Ryb3lJbnN0YW5jZXMiLCJsZSIsInNldEludDE2IiwiSW50MTZBcnJheSIsIm9zIiwiaXNQYyIsImlzVGFibGV0IiwidWEiLCJyZWciLCJpZSIsImZpcmZveCIsImNocm9tZSIsIm9wZXJhIiwic2FmYXJpIiwidGVzdCIsImlzV2luZG93c1Bob25lIiwiaXNTeW1iaWFuIiwiaXNBbmRyb2lkIiwiaXNGaXJlRm94IiwiaXNQaG9uZSIsIm91dCIsImlucHV0IiwiZnJvbUNoYXJDb2RlIiwiX2NoZWNrQ29udGludWF0aW9uIiwidWNzNCIsImNoZWNrTGVuZ3RoIiwiQXVkaW9DdHgiLCJBdWRpb0NvbnRleHQiLCJ3ZWJraXRBdWRpb0NvbnRleHQiLCJnYWluTm9kZSIsImNyZWF0ZUdhaW4iLCJjb25uZWN0IiwiZGVzdGluYXRpb24iLCJwcmVsb2FkVGltZSIsIl9jdXJyZW50QnVmZmVyIiwiX25leHRCdWZmZXIiLCJfbGFzdHB0cyIsIl9wcmVEZWNvZGUiLCJfY3VycmVudFRpbWUiLCJfZGVjb2RpbmciLCJfcGxheWVkIiwiZGVjb2RlQXVkaW8iLCJzZXRBdWRpb0RhdGEiLCJkZWNvZGVBQUMiLCJzYW1wbGVEYXRhIiwiZ2V0QUFDRGF0YSIsImNvbWJpbGVEYXRhIiwiZGVjb2RlQXVkaW9EYXRhIiwiYXVkaW9Tb3VyY2UiLCJjcmVhdGVCdWZmZXJTb3VyY2UiLCJvbmVuZGVkIiwib25Tb3VyY2VFbmRlZCIsImdldFRpbWVCdWZmZXIiLCJjdXJyZW50VGltZSIsInBsYXkiLCJzZXRBdWRpb01ldGFEYXRhIiwiYWR0cyIsImdldEFkdHMiLCJrIiwiYWFjZnJhbWVsZW5ndGgiLCJIVE1MRWxlbWVudCIsInZDdHgiLCJWaWRlb0N0eCIsImFDdHgiLCJvbmNhbnBsYXkiLCJhcHBlbmRDaGlsZCIsImNhbnZhcyIsImxvZyIsImRpc3BhdGNoRXZlbnQiLCJFdmVudCIsImhpc3RvcnlUaW1lIiwib25EZW11eENvbXBsZXRlIiwiZGVjb2RlVmlkZW8iLCJzZXRBdWRpb01ldGEiLCJzZXRWaWRlb01ldGEiLCJzZXRWaWRlb01ldGFEYXRhIiwiY3VzdG9tRWxlbWVudHMiLCJkZWZpbmUiLCJjdXJyZW50R29wIiwiX2xhc3RHZXQiLCJmcmFtZSIsIm5leHRHb3AiLCJfZ2V0TmV4dCIsImdvcCIsInJlbW92ZSIsIlRpY2tlciIsImludGVydmFsIiwibmV4dFRpY2siLCJvblRpY2siLCJzZXRJbnRlcnZhbCIsIlJhZlRpY2tlciIsInByb3BzIiwicHJldiIsInRpbWVySWQiLCJfc3ViVGltZXJJZCIsIm5leFRpY2siLCJnZXRUaWNrRnVuYyIsInRpY2siLCJ0aWNrRnVuYyIsInJlc3QiLCJydW5DYWxsYmFjayIsImNsZWFyVGltZW91dCIsInNldFRpbWVvdXQiLCJzdG9wIiwiZ2V0Q2FuY2VsRnVuYyIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsIndlYmtpdFJlcXVlc3RBbmltYXRpb25GcmFtZSIsImNhbmNlbEFuaW1hdGlvbkZyYW1lIiwid2Via2l0Q2FuY2VsQW5pbWF0aW9uRnJhbWUiLCJUaW1lb3V0VGlja2VyIiwidGltZW91dElkIiwiZ2V0VGlja2VyIiwiaXNTdXBwb3J0ZWQiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJTb3VyY2VCdWZmZXIiLCJyZWFkeVN0YXR1cyIsInBhdXNlZCIsImxhc3RQbGF5ZWQiLCJfZGVjb2RlckluaXRlZCIsIl9hdmNjcHVzaGVkIiwiX2RlY29kZWRGcmFtZXMiLCJfbGFzdFNhbXBsZUR0cyIsIl9iYXNlRHRzIiwiaW5pdFdhc21Xb3JrZXIiLCJfb25UaW1lciIsInBhdXNlIiwid2FzbXdvcmtlciIsInBvc3RNZXNzYWdlIiwibXNnIiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9vbkRlY29kZWQiLCJ5dXZDYW52YXMiLCJZVVZDYW52YXMiLCJfcHJlbG9hZCIsIl9hbmFseXNlTmFsIiwibmFsIiwibmV4dFRpbWUiLCJmcmFtZVRpbWVzIiwiZnJhbWVUaW1lIiwibm93IiwicmVuZGVyIiwiX2NsZWFuQnVmZmVyIiwiZGVjb2RlciIsIkRlY29kZXIiLCJpbml0ZWQiLCJpbmZvbGlzdCIsInBhcl9icm9hZHdheU9uQnJvYWR3YXlJbml0ZWQiLCJicm9hZHdheU9uQnJvYWR3YXlJbml0ZWQiLCJwYXJfYnJvYWR3YXlPblBpY3R1cmVEZWNvZGVkIiwiYnJvYWR3YXlPblBpY3R1cmVEZWNvZGVkIiwib25Qb3N0UnVuIiwiaW1wb3J0U2NyaXB0cyIsImFkZE9uUG9zdFJ1biIsInRvVThBcnJheSIsInB0ciIsIkhFQVBVOCIsIk1vZHVsZSIsIl9icm9hZHdheUluaXQiLCJzdHJlYW1CdWZmZXIiLCJfYnJvYWR3YXlDcmVhdGVTdHJlYW0iLCJpbmZvaWQiLCJkYXRldGVtcCIsImdldFRpbWUiLCJfYnJvYWR3YXlQbGF5U3RyZWFtIiwic3R5bGUiLCJfaW5pdENvbnRleHRHTCIsImNvbnRleHRHTCIsIl9pbml0UHJvZ3JhbSIsIl9pbml0QnVmZmVycyIsIl9pbml0VGV4dHVyZXMiLCJnbCIsInZhbGlkQ29udGV4dE5hbWVzIiwibmFtZUluZGV4IiwiY29udGV4dE5hbWUiLCJjb250ZXh0T3B0aW9ucyIsImdldENvbnRleHQiLCJnZXRQYXJhbWV0ZXIiLCJ2ZXJ0ZXhTaGFkZXJTY3JpcHQiLCJmcmFnbWVudFNoYWRlclNjcmlwdCIsInZlcnRleFNoYWRlciIsImNyZWF0ZVNoYWRlciIsIlZFUlRFWF9TSEFERVIiLCJzaGFkZXJTb3VyY2UiLCJjb21waWxlU2hhZGVyIiwiZ2V0U2hhZGVyUGFyYW1ldGVyIiwiQ09NUElMRV9TVEFUVVMiLCJnZXRTaGFkZXJJbmZvTG9nIiwiZnJhZ21lbnRTaGFkZXIiLCJGUkFHTUVOVF9TSEFERVIiLCJwcm9ncmFtIiwiY3JlYXRlUHJvZ3JhbSIsImF0dGFjaFNoYWRlciIsImxpbmtQcm9ncmFtIiwiZ2V0UHJvZ3JhbVBhcmFtZXRlciIsIkxJTktfU1RBVFVTIiwiZ2V0UHJvZ3JhbUluZm9Mb2ciLCJ1c2VQcm9ncmFtIiwiWVVWMlJHQlJlZiIsImdldFVuaWZvcm1Mb2NhdGlvbiIsInVuaWZvcm1NYXRyaXg0ZnYiLCJzaGFkZXJQcm9ncmFtIiwidmVydGV4UG9zQnVmZmVyIiwiY3JlYXRlQnVmZmVyIiwiYmluZEJ1ZmZlciIsIkFSUkFZX0JVRkZFUiIsImJ1ZmZlckRhdGEiLCJGbG9hdDMyQXJyYXkiLCJTVEFUSUNfRFJBVyIsInZlcnRleFBvc1JlZiIsImdldEF0dHJpYkxvY2F0aW9uIiwiZW5hYmxlVmVydGV4QXR0cmliQXJyYXkiLCJ2ZXJ0ZXhBdHRyaWJQb2ludGVyIiwiRkxPQVQiLCJ0ZXh0dXJlUG9zQnVmZmVyIiwidGV4dHVyZVBvc1JlZiIsInVUZXh0dXJlUG9zQnVmZmVyIiwidVRleHR1cmVQb3NSZWYiLCJ2VGV4dHVyZVBvc0J1ZmZlciIsInZUZXh0dXJlUG9zUmVmIiwieVRleHR1cmVSZWYiLCJfaW5pdFRleHR1cmUiLCJ5U2FtcGxlclJlZiIsInVuaWZvcm0xaSIsInVUZXh0dXJlUmVmIiwidVNhbXBsZXJSZWYiLCJ2VGV4dHVyZVJlZiIsInZTYW1wbGVyUmVmIiwidGV4dHVyZVJlZiIsInNhbXBsZXJSZWYiLCJjcmVhdGVUZXh0dXJlIiwiYmluZFRleHR1cmUiLCJURVhUVVJFXzJEIiwidGV4UGFyYW1ldGVyaSIsIlRFWFRVUkVfTUFHX0ZJTFRFUiIsIk5FQVJFU1QiLCJURVhUVVJFX01JTl9GSUxURVIiLCJURVhUVVJFX1dSQVBfUyIsIkNMQU1QX1RPX0VER0UiLCJURVhUVVJFX1dSQVBfVCIsIl9kcmF3UGljdHVyZUdMIiwibldpZHRoIiwieWxlbiIsInV2bGVuIiwicmVuZGVyRGF0YSIsInlEYXRhIiwidURhdGEiLCJ2RGF0YSIsInlBcnJheSIsInVBcnJheSIsInZBcnJheSIsIl9kcmF3UGljdHVyZUdMNDIwIiwiX2RyYXdQaWN0dXJlR0w0MjIiLCJkYXRhUGVyUm93Iiwicm93Q250Iiwidmlld3BvcnQiLCJ0Qm90dG9tIiwidFJpZ2h0IiwidGV4dHVyZVBvc1ZhbHVlcyIsIkRZTkFNSUNfRFJBVyIsInVuaWZvcm0yZiIsImFjdGl2ZVRleHR1cmUiLCJURVhUVVJFMCIsInRleEltYWdlMkQiLCJMVU1JTkFOQ0UiLCJVTlNJR05FRF9CWVRFIiwiZHJhd0FycmF5cyIsIlRSSUFOR0xFX1NUUklQIiwieURhdGFQZXJSb3ciLCJ5Um93Q250IiwidURhdGFQZXJSb3ciLCJ1Um93Q250IiwidkRhdGFQZXJSb3ciLCJ2Um93Q250IiwidVRleHR1cmVQb3NWYWx1ZXMiLCJ2VGV4dHVyZVBvc1ZhbHVlcyIsIlRFWFRVUkUxIiwiVEVYVFVSRTIiLCJfZHJhd1BpY3R1cmVSR0IiLCJpc09iamVjdEZpbGxlZCIsIm1pbWVUeXBlIiwiaXNDb21wbGV0ZSIsImlzQmFzZUluZm9SZWFkeSIsImlzVmlkZW9SZWFkeSIsImlzQXVkaW9SZWFkeSIsIl9kZWZhdWx0IiwiZ2V0RGVmYXVsdEluZiIsImVudHJpZXMiLCJ2IiwiaXNSQVAiLCJfdHlwZSIsIl9saXN0IiwiX2xhc3RBcHBlbmRMb2NhdGlvbiIsImlzRW1wdHkiLCJfc2VhcmNoTmVhcmVzdFNlZ21lbnRCZWZvcmUiLCJiZWdpbkR0cyIsImxhc3QiLCJtaWQiLCJsYm91bmQiLCJ1Ym91bmQiLCJpZHgiLCJsYXN0U2FtcGxlIiwiX3NlYXJjaE5lYXJlc3RTZWdtZW50QWZ0ZXIiLCJzZWdtZW50IiwibGFzdEFwcGVuZElkeCIsImluc2VydElkeCIsIm9yaWdpblN0YXJ0RHRzIiwiZ2V0TGFzdFNlZ21lbnRCZWZvcmUiLCJnZXRMYXN0U2FtcGxlQmVmb3JlIiwiZ2V0TGFzdFJBUEJlZm9yZSIsInNlZ21lbnRJZHgiLCJyYW5kb21BY2Nlc3NQb2ludHMiLCJzdGFydER0cyIsImVuZER0cyIsInN0YXJ0UHRzIiwiZW5kUHRzIiwib3JpZ2luRW5kRHRzIiwiYWRkUkFQIiwiZ2V0RGVmYXVsdCIsImNvbnRhaW5lciIsIm1lZGlhU291cmNlIiwic291cmNlQnVmZmVycyIsIk1lZGlhU291cmNlIiwib25Tb3VyY2VPcGVuIiwib25UaW1lVXBkYXRlIiwib25XYWl0aW5nIiwiYWRkU291cmNlQnVmZmVycyIsIm9uVXBkYXRlRW5kIiwiZG9BcHBlbmQiLCJyZWFkeVN0YXRlIiwiYWRkIiwiZHVyIiwibWltZSIsInNvdXJjZUJ1ZmZlciIsImFkZFNvdXJjZUJ1ZmZlciIsInVwZGF0aW5nIiwiYXBwZW5kQnVmZmVyIiwiZW5kT2ZTdHJlYW0iLCJyZW1vdmVFdmVudExpc3RlbmVyIiwicmVtb3ZlU291cmNlQnVmZmVyIiwidGVtcCIsImhleE51bSIsInBhZFN0YXJ0IiwiYmFjayIsImxvb3AiLCJzaWduIiwicmVzIiwicmVhZFVpbnQ4IiwicmVhZFVpbnQxNiIsInJlYWRVaW50MjQiLCJyZWFkVWludDMyIiwicmVhZFVpbnQ2NCIsInJlYWRJbnQ4IiwicmVhZEludDE2IiwicmVhZEludDMyIiwiVGFnIiwiTG9nZ2VyIiwiRmx2Q29udHJvbGxlciIsInBsYXllciIsIl9wbGF5ZXIiLCJpbml0U2VnbWVudEFycml2ZWQiLCJyYW5nZSIsInJhbmdlU3VwcG9ydCIsImtleWZyYW1lcyIsInRpbWVzIiwiY3VycmVudEtleWZyYW1lVGltZSIsIm5leHRLZXlmcmFtZVRpbWUiLCJNQVhfU0FGRV9JTlRFR0VSIiwiZmlsZXBvc2l0aW9ucyIsIlJlbXV4ZXIiLCJtc2UiLCJpbml0TGlzdGVuZXJzIiwibG9hZE1ldGEiLCJfaGFuZGxlTG9hZGVyRGF0YUxvYWRlZCIsIl9oYW5kbGVNZWRpYUluZm8iLCJfaGFuZGxlTWV0YWRhdGFQYXJzZWQiLCJfaGFuZGxlRGVtdXhDb21wbGV0ZSIsIl9oYW5kbGVEZW11eEVycm9yIiwiX2hhbmRsZUFwcGVuZEluaXRTZWdtZW50IiwiX2hhbmRsZU1lZGlhU2VnbWVudCIsImxvYWRlciIsImlzU2Vla2FibGUiLCJsb2FkTmV4dCIsIlBsYXllciIsIkVycm9ycyIsImdldFNlZWtSYW5nZSIsImxvYWREYXRhIiwiY3VyVGltZSIsImdldE5leHRSYW5nZSIsIlJhbmdlIiwibG9hZEZhbGxiYWNrIiwic2Vla1N0YXJ0VGltZSIsInNlZWtFbmRUaW1lIiwic2Vla1N0YXJ0RmlsZVBvcyIsImZpbmRGaWxlUG9zaXRpb24iLCJmbHZBbGxvd2VkRXZlbnRzIiwiaXNFbmRlZCIsImZsdiIsImlzTGl2ZSIsImdldEJ1ZmZlcmVkUmFuZ2UiLCJGbHZQbGF5ZXIiLCJpbml0RXZlbnRzIiwiRkxWIiwiaGFuZGxlVGltZVVwZGF0ZSIsImhhbmRsZVNlZWsiLCJfZGVzdHJveSIsImN1cnJlbnRTcmMiLCJGbHZMaXZlUGxheWVyIiwiRmx2Vm9kUGxheWVyIl0sIm1hcHBpbmdzIjoiNkJBQ0UsSUFBSUEsRUFBbUIsR0FHdkIsU0FBU0MsRUFBb0JDLEdBRzVCLEdBQUdGLEVBQWlCRSxHQUNuQixPQUFPRixFQUFpQkUsR0FBVUMsUUFHbkMsSUFBSUMsRUFBU0osRUFBaUJFLEdBQVksQ0FDekNHLEVBQUdILEVBQ0hJLEdBQUcsRUFDSEgsUUFBUyxJQVVWLE9BTkFJLEVBQVFMLEdBQVVNLEtBQUtKLEVBQU9ELFFBQVNDLEVBQVFBLEVBQU9ELFFBQVNGLEdBRy9ERyxFQUFPRSxHQUFJLEVBR0pGLEVBQU9ELFFBMERmLE9BckRBRixFQUFvQlEsRUFBSUYsRUFHeEJOLEVBQW9CUyxFQUFJVixFQUd4QkMsRUFBb0JVLEVBQUksU0FBU1IsRUFBU1MsRUFBTUMsR0FDM0NaLEVBQW9CYSxFQUFFWCxFQUFTUyxJQUNsQ0csT0FBT0MsZUFBZWIsRUFBU1MsRUFBTSxDQUFFSyxZQUFZLEVBQU1DLElBQUtMLEtBS2hFWixFQUFvQmtCLEVBQUksU0FBU2hCLEdBQ1gsb0JBQVhpQixRQUEwQkEsT0FBT0MsYUFDMUNOLE9BQU9DLGVBQWViLEVBQVNpQixPQUFPQyxZQUFhLENBQUVDLE1BQU8sV0FFN0RQLE9BQU9DLGVBQWVi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QUsrRCxLQUFLLFVBQVcsS0FDbkIvRCxLQUFLb3hCLFlBQWMsS0FLekJoMUIsRUFBT0QsUUFBVTRxQyxHOzs7Ozs7Ozs0Q0MxRmpCM3FDLEVBQU9ELFFBQVVtQyxPOzs7OzJEQ0FqQixJLElBQUEsaUUsSUFDQSwrRCxtREFZQWxDLEVBQU9ELFFBVEwsV0FBYXllLEdBQ1gsTyw0RkFEbUIsU0FDZkEsRUFBT2lzQixPQUNGLElBQUlTLFVBQWMxc0IsR0FFbEIsSUFBSTJzQixVQUFhM3NCLEs7Ozs7Ozs7OzRDQ1JoQnhlLEVBQU9ELFFBQVVrQyxPQUFlIiwiZmlsZSI6ImluZGV4LmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDApO1xuIiwiIWZ1bmN0aW9uKGUsbil7XCJvYmplY3RcIj09dHlwZW9mIGV4cG9ydHMmJlwib2JqZWN0XCI9PXR5cGVvZiBtb2R1bGU/bW9kdWxlLmV4cG9ydHM9bihyZXF1aXJlKFwieGdwbGF5ZXJcIikpOlwiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoW1wieGdwbGF5ZXJcIl0sbik6XCJvYmplY3RcIj09dHlwZW9mIGV4cG9ydHM/ZXhwb3J0c1tcInhncGxheWVyLWZsdlwiXT1uKHJlcXVpcmUoXCJ4Z3BsYXllclwiKSk6ZVtcInhncGxheWVyLWZsdlwiXT1uKGUueGdwbGF5ZXIpfSh3aW5kb3csKGZ1bmN0aW9uKF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfeGdwbGF5ZXJfXyl7cmV0dXJuIGZ1bmN0aW9uKGUpe3ZhciBuPXt9O2Z1bmN0aW9uIHQocil7aWYobltyXSlyZXR1cm4gbltyXS5leHBvcnRzO3ZhciBhPW5bcl09e2k6cixsOiExLGV4cG9ydHM6e319O3JldHVybiBlW3JdLmNhbGwoYS5leHBvcnRzLGEsYS5leHBvcnRzLHQpLGEubD0hMCxhLmV4cG9ydHN9cmV0dXJuIHQubT1lLHQuYz1uLHQuZD1mdW5jdGlvbihlLG4scil7dC5vKGUsbil8fE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLG4se2VudW1lcmFibGU6ITAsZ2V0OnJ9KX0sdC5yPWZ1bmN0aW9uKGUpe1widW5kZWZpbmVkXCIhPXR5cGVvZiBTeW1ib2wmJlN5bWJvbC50b1N0cmluZ1RhZyYmT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsU3ltYm9sLnRvU3RyaW5nVGFnLHt2YWx1ZTpcIk1vZHVsZVwifSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSl9LHQudD1mdW5jdGlvbihlLG4pe2lmKDEmbiYmKGU9dChlKSksOCZuKXJldHVybiBlO2lmKDQmbiYmXCJvYmplY3RcIj09dHlwZW9mIGUmJmUmJmUuX19lc01vZHVsZSlyZXR1cm4gZTt2YXIgcj1PYmplY3QuY3JlYXRlKG51bGwpO2lmKHQucihyKSxPYmplY3QuZGVmaW5lUHJvcGVydHkocixcImRlZmF1bHRcIix7ZW51bWVyYWJsZTohMCx2YWx1ZTplfSksMiZuJiZcInN0cmluZ1wiIT10eXBlb2YgZSlmb3IodmFyIGEgaW4gZSl0LmQocixhLGZ1bmN0aW9uKG4pe3JldHVybiBlW25dfS5iaW5kKG51bGwsYSkpO3JldHVybiByfSx0Lm49ZnVuY3Rpb24oZSl7dmFyIG49ZSYmZS5fX2VzTW9kdWxlP2Z1bmN0aW9uKCl7cmV0dXJuIGUuZGVmYXVsdH06ZnVuY3Rpb24oKXtyZXR1cm4gZX07cmV0dXJuIHQuZChuLFwiYVwiLG4pLG59LHQubz1mdW5jdGlvbihlLG4pe3JldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSxuKX0sdC5wPVwiXCIsdCh0LnM9MCl9KHtcIi4uLy4uL25vZGVfbW9kdWxlcy9ldmVudHMvZXZlbnRzLmpzXCI6XG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAvVXNlcnMvbGVvbmFyZG8vRG9jdW1lbnRzL2Zyb250LWVuZC9wbGF5ZXIveGdwbGF5ZXIvbm9kZV9tb2R1bGVzL2V2ZW50cy9ldmVudHMuanMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIG5vIHN0YXRpYyBleHBvcnRzIGZvdW5kICovZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7XCJ1c2Ugc3RyaWN0XCI7ZXZhbChcIi8vIENvcHlyaWdodCBKb3llbnQsIEluYy4gYW5kIG90aGVyIE5vZGUgY29udHJpYnV0b3JzLlxcbi8vXFxuLy8gUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGFcXG4vLyBjb3B5IG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlXFxuLy8gXFxcIlNvZnR3YXJlXFxcIiksIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZ1xcbi8vIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCxcXG4vLyBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0XFxuLy8gcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlXFxuLy8gZm9sbG93aW5nIGNvbmRpdGlvbnM6XFxuLy9cXG4vLyBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZFxcbi8vIGluIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxcbi8vXFxuLy8gVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFxcXCJBUyBJU1xcXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1NcXG4vLyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GXFxuLy8gTUVSQ0hBTlRBQklMSVRZLCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTlxcbi8vIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLFxcbi8vIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUlxcbi8vIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLCBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEVcXG4vLyBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLlxcblxcblxcblxcbnZhciBSID0gdHlwZW9mIFJlZmxlY3QgPT09ICdvYmplY3QnID8gUmVmbGVjdCA6IG51bGw7XFxudmFyIFJlZmxlY3RBcHBseSA9IFIgJiYgdHlwZW9mIFIuYXBwbHkgPT09ICdmdW5jdGlvbicgPyBSLmFwcGx5IDogZnVuY3Rpb24gUmVmbGVjdEFwcGx5KHRhcmdldCwgcmVjZWl2ZXIsIGFyZ3MpIHtcXG4gIHJldHVybiBGdW5jdGlvbi5wcm90b3R5cGUuYXBwbHkuY2FsbCh0YXJnZXQsIHJlY2VpdmVyLCBhcmdzKTtcXG59O1xcblxcbnZhciBSZWZsZWN0T3duS2V5cztcXG5pZiAoUiAmJiB0eXBlb2YgUi5vd25LZXlzID09PSAnZnVuY3Rpb24nKSB7XFxuICBSZWZsZWN0T3duS2V5cyA9IFIub3duS2V5cztcXG59IGVsc2UgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHtcXG4gIFJlZmxlY3RPd25LZXlzID0gZnVuY3Rpb24gUmVmbGVjdE93bktleXModGFyZ2V0KSB7XFxuICAgIHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyh0YXJnZXQpLmNvbmNhdChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKHRhcmdldCkpO1xcbiAgfTtcXG59IGVsc2Uge1xcbiAgUmVmbGVjdE93bktleXMgPSBmdW5jdGlvbiBSZWZsZWN0T3duS2V5cyh0YXJnZXQpIHtcXG4gICAgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHRhcmdldCk7XFxuICB9O1xcbn1cXG5cXG5mdW5jdGlvbiBQcm9jZXNzRW1pdFdhcm5pbmcod2FybmluZykge1xcbiAgaWYgKGNvbnNvbGUgJiYgY29uc29sZS53YXJuKSBjb25zb2xlLndhcm4od2FybmluZyk7XFxufVxcblxcbnZhciBOdW1iZXJJc05hTiA9IE51bWJlci5pc05hTiB8fCBmdW5jdGlvbiBOdW1iZXJJc05hTih2YWx1ZSkge1xcbiAgcmV0dXJuIHZhbHVlICE9PSB2YWx1ZTtcXG59O1xcblxcbmZ1bmN0aW9uIEV2ZW50RW1pdHRlcigpIHtcXG4gIEV2ZW50RW1pdHRlci5pbml0LmNhbGwodGhpcyk7XFxufVxcbm1vZHVsZS5leHBvcnRzID0gRXZlbnRFbWl0dGVyO1xcblxcbi8vIEJhY2t3YXJkcy1jb21wYXQgd2l0aCBub2RlIDAuMTAueFxcbkV2ZW50RW1pdHRlci5FdmVudEVtaXR0ZXIgPSBFdmVudEVtaXR0ZXI7XFxuXFxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5fZXZlbnRzID0gdW5kZWZpbmVkO1xcbkV2ZW50RW1pdHRlci5wcm90b3R5cGUuX2V2ZW50c0NvdW50ID0gMDtcXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLl9tYXhMaXN0ZW5lcnMgPSB1bmRlZmluZWQ7XFxuXFxuLy8gQnkgZGVmYXVsdCBFdmVudEVtaXR0ZXJzIHdpbGwgcHJpbnQgYSB3YXJuaW5nIGlmIG1vcmUgdGhhbiAxMCBsaXN0ZW5lcnMgYXJlXFxuLy8gYWRkZWQgdG8gaXQuIFRoaXMgaXMgYSB1c2VmdWwgZGVmYXVsdCB3aGljaCBoZWxwcyBmaW5kaW5nIG1lbW9yeSBsZWFrcy5cXG52YXIgZGVmYXVsdE1heExpc3RlbmVycyA9IDEwO1xcblxcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShFdmVudEVtaXR0ZXIsICdkZWZhdWx0TWF4TGlzdGVuZXJzJywge1xcbiAgZW51bWVyYWJsZTogdHJ1ZSxcXG4gIGdldDogZnVuY3Rpb24gKCkge1xcbiAgICByZXR1cm4gZGVmYXVsdE1heExpc3RlbmVycztcXG4gIH0sXFxuICBzZXQ6IGZ1bmN0aW9uIChhcmcpIHtcXG4gICAgaWYgKHR5cGVvZiBhcmcgIT09ICdudW1iZXInIHx8IGFyZyA8IDAgfHwgTnVtYmVySXNOYU4oYXJnKSkge1xcbiAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdUaGUgdmFsdWUgb2YgXFxcImRlZmF1bHRNYXhMaXN0ZW5lcnNcXFwiIGlzIG91dCBvZiByYW5nZS4gSXQgbXVzdCBiZSBhIG5vbi1uZWdhdGl2ZSBudW1iZXIuIFJlY2VpdmVkICcgKyBhcmcgKyAnLicpO1xcbiAgICB9XFxuICAgIGRlZmF1bHRNYXhMaXN0ZW5lcnMgPSBhcmc7XFxuICB9XFxufSk7XFxuXFxuRXZlbnRFbWl0dGVyLmluaXQgPSBmdW5jdGlvbiAoKSB7XFxuXFxuICBpZiAodGhpcy5fZXZlbnRzID09PSB1bmRlZmluZWQgfHwgdGhpcy5fZXZlbnRzID09PSBPYmplY3QuZ2V0UHJvdG90eXBlT2YodGhpcykuX2V2ZW50cykge1xcbiAgICB0aGlzLl9ldmVudHMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xcbiAgICB0aGlzLl9ldmVudHNDb3VudCA9IDA7XFxuICB9XFxuXFxuICB0aGlzLl9tYXhMaXN0ZW5lcnMgPSB0aGlzLl9tYXhMaXN0ZW5lcnMgfHwgdW5kZWZpbmVkO1xcbn07XFxuXFxuLy8gT2J2aW91c2x5IG5vdCBhbGwgRW1pdHRlcnMgc2hvdWxkIGJlIGxpbWl0ZWQgdG8gMTAuIFRoaXMgZnVuY3Rpb24gYWxsb3dzXFxuLy8gdGhhdCB0byBiZSBpbmNyZWFzZWQuIFNldCB0byB6ZXJvIGZvciB1bmxpbWl0ZWQuXFxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5zZXRNYXhMaXN0ZW5lcnMgPSBmdW5jdGlvbiBzZXRNYXhMaXN0ZW5lcnMobikge1xcbiAgaWYgKHR5cGVvZiBuICE9PSAnbnVtYmVyJyB8fCBuIDwgMCB8fCBOdW1iZXJJc05hTihuKSkge1xcbiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignVGhlIHZhbHVlIG9mIFxcXCJuXFxcIiBpcyBvdXQgb2YgcmFuZ2UuIEl0IG11c3QgYmUgYSBub24tbmVnYXRpdmUgbnVtYmVyLiBSZWNlaXZlZCAnICsgbiArICcuJyk7XFxuICB9XFxuICB0aGlzLl9tYXhMaXN0ZW5lcnMgPSBuO1xcbiAgcmV0dXJuIHRoaXM7XFxufTtcXG5cXG5mdW5jdGlvbiAkZ2V0TWF4TGlzdGVuZXJzKHRoYXQpIHtcXG4gIGlmICh0aGF0Ll9tYXhMaXN0ZW5lcnMgPT09IHVuZGVmaW5lZCkgcmV0dXJuIEV2ZW50RW1pdHRlci5kZWZhdWx0TWF4TGlzdGVuZXJzO1xcbiAgcmV0dXJuIHRoYXQuX21heExpc3RlbmVycztcXG59XFxuXFxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5nZXRNYXhMaXN0ZW5lcnMgPSBmdW5jdGlvbiBnZXRNYXhMaXN0ZW5lcnMoKSB7XFxuICByZXR1cm4gJGdldE1heExpc3RlbmVycyh0aGlzKTtcXG59O1xcblxcbkV2ZW50RW1pdHRlci5wcm90b3R5cGUuZW1pdCA9IGZ1bmN0aW9uIGVtaXQodHlwZSkge1xcbiAgdmFyIGFyZ3MgPSBbXTtcXG4gIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSBhcmdzLnB1c2goYXJndW1lbnRzW2ldKTtcXG4gIHZhciBkb0Vycm9yID0gdHlwZSA9PT0gJ2Vycm9yJztcXG5cXG4gIHZhciBldmVudHMgPSB0aGlzLl9ldmVudHM7XFxuICBpZiAoZXZlbnRzICE9PSB1bmRlZmluZWQpIGRvRXJyb3IgPSBkb0Vycm9yICYmIGV2ZW50cy5lcnJvciA9PT0gdW5kZWZpbmVkO2Vsc2UgaWYgKCFkb0Vycm9yKSByZXR1cm4gZmFsc2U7XFxuXFxuICAvLyBJZiB0aGVyZSBpcyBubyAnZXJyb3InIGV2ZW50IGxpc3RlbmVyIHRoZW4gdGhyb3cuXFxuICBpZiAoZG9FcnJvcikge1xcbiAgICB2YXIgZXI7XFxuICAgIGlmIChhcmdzLmxlbmd0aCA+IDApIGVyID0gYXJnc1swXTtcXG4gICAgaWYgKGVyIGluc3RhbmNlb2YgRXJyb3IpIHtcXG4gICAgICAvLyBOb3RlOiBUaGUgY29tbWVudHMgb24gdGhlIGB0aHJvd2AgbGluZXMgYXJlIGludGVudGlvbmFsLCB0aGV5IHNob3dcXG4gICAgICAvLyB1cCBpbiBOb2RlJ3Mgb3V0cHV0IGlmIHRoaXMgcmVzdWx0cyBpbiBhbiB1bmhhbmRsZWQgZXhjZXB0aW9uLlxcbiAgICAgIHRocm93IGVyOyAvLyBVbmhhbmRsZWQgJ2Vycm9yJyBldmVudFxcbiAgICB9XFxuICAgIC8vIEF0IGxlYXN0IGdpdmUgc29tZSBraW5kIG9mIGNvbnRleHQgdG8gdGhlIHVzZXJcXG4gICAgdmFyIGVyciA9IG5ldyBFcnJvcignVW5oYW5kbGVkIGVycm9yLicgKyAoZXIgPyAnICgnICsgZXIubWVzc2FnZSArICcpJyA6ICcnKSk7XFxuICAgIGVyci5jb250ZXh0ID0gZXI7XFxuICAgIHRocm93IGVycjsgLy8gVW5oYW5kbGVkICdlcnJvcicgZXZlbnRcXG4gIH1cXG5cXG4gIHZhciBoYW5kbGVyID0gZXZlbnRzW3R5cGVdO1xcblxcbiAgaWYgKGhhbmRsZXIgPT09IHVuZGVmaW5lZCkgcmV0dXJuIGZhbHNlO1xcblxcbiAgaWYgKHR5cGVvZiBoYW5kbGVyID09PSAnZnVuY3Rpb24nKSB7XFxuICAgIFJlZmxlY3RBcHBseShoYW5kbGVyLCB0aGlzLCBhcmdzKTtcXG4gIH0gZWxzZSB7XFxuICAgIHZhciBsZW4gPSBoYW5kbGVyLmxlbmd0aDtcXG4gICAgdmFyIGxpc3RlbmVycyA9IGFycmF5Q2xvbmUoaGFuZGxlciwgbGVuKTtcXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47ICsraSkgUmVmbGVjdEFwcGx5KGxpc3RlbmVyc1tpXSwgdGhpcywgYXJncyk7XFxuICB9XFxuXFxuICByZXR1cm4gdHJ1ZTtcXG59O1xcblxcbmZ1bmN0aW9uIF9hZGRMaXN0ZW5lcih0YXJnZXQsIHR5cGUsIGxpc3RlbmVyLCBwcmVwZW5kKSB7XFxuICB2YXIgbTtcXG4gIHZhciBldmVudHM7XFxuICB2YXIgZXhpc3Rpbmc7XFxuXFxuICBpZiAodHlwZW9mIGxpc3RlbmVyICE9PSAnZnVuY3Rpb24nKSB7XFxuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1RoZSBcXFwibGlzdGVuZXJcXFwiIGFyZ3VtZW50IG11c3QgYmUgb2YgdHlwZSBGdW5jdGlvbi4gUmVjZWl2ZWQgdHlwZSAnICsgdHlwZW9mIGxpc3RlbmVyKTtcXG4gIH1cXG5cXG4gIGV2ZW50cyA9IHRhcmdldC5fZXZlbnRzO1xcbiAgaWYgKGV2ZW50cyA9PT0gdW5kZWZpbmVkKSB7XFxuICAgIGV2ZW50cyA9IHRhcmdldC5fZXZlbnRzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcXG4gICAgdGFyZ2V0Ll9ldmVudHNDb3VudCA9IDA7XFxuICB9IGVsc2Uge1xcbiAgICAvLyBUbyBhdm9pZCByZWN1cnNpb24gaW4gdGhlIGNhc2UgdGhhdCB0eXBlID09PSBcXFwibmV3TGlzdGVuZXJcXFwiISBCZWZvcmVcXG4gICAgLy8gYWRkaW5nIGl0IHRvIHRoZSBsaXN0ZW5lcnMsIGZpcnN0IGVtaXQgXFxcIm5ld0xpc3RlbmVyXFxcIi5cXG4gICAgaWYgKGV2ZW50cy5uZXdMaXN0ZW5lciAhPT0gdW5kZWZpbmVkKSB7XFxuICAgICAgdGFyZ2V0LmVtaXQoJ25ld0xpc3RlbmVyJywgdHlwZSwgbGlzdGVuZXIubGlzdGVuZXIgPyBsaXN0ZW5lci5saXN0ZW5lciA6IGxpc3RlbmVyKTtcXG5cXG4gICAgICAvLyBSZS1hc3NpZ24gYGV2ZW50c2AgYmVjYXVzZSBhIG5ld0xpc3RlbmVyIGhhbmRsZXIgY291bGQgaGF2ZSBjYXVzZWQgdGhlXFxuICAgICAgLy8gdGhpcy5fZXZlbnRzIHRvIGJlIGFzc2lnbmVkIHRvIGEgbmV3IG9iamVjdFxcbiAgICAgIGV2ZW50cyA9IHRhcmdldC5fZXZlbnRzO1xcbiAgICB9XFxuICAgIGV4aXN0aW5nID0gZXZlbnRzW3R5cGVdO1xcbiAgfVxcblxcbiAgaWYgKGV4aXN0aW5nID09PSB1bmRlZmluZWQpIHtcXG4gICAgLy8gT3B0aW1pemUgdGhlIGNhc2Ugb2Ygb25lIGxpc3RlbmVyLiBEb24ndCBuZWVkIHRoZSBleHRyYSBhcnJheSBvYmplY3QuXFxuICAgIGV4aXN0aW5nID0gZXZlbnRzW3R5cGVdID0gbGlzdGVuZXI7XFxuICAgICsrdGFyZ2V0Ll9ldmVudHNDb3VudDtcXG4gIH0gZWxzZSB7XFxuICAgIGlmICh0eXBlb2YgZXhpc3RpbmcgPT09ICdmdW5jdGlvbicpIHtcXG4gICAgICAvLyBBZGRpbmcgdGhlIHNlY29uZCBlbGVtZW50LCBuZWVkIHRvIGNoYW5nZSB0byBhcnJheS5cXG4gICAgICBleGlzdGluZyA9IGV2ZW50c1t0eXBlXSA9IHByZXBlbmQgPyBbbGlzdGVuZXIsIGV4aXN0aW5nXSA6IFtleGlzdGluZywgbGlzdGVuZXJdO1xcbiAgICAgIC8vIElmIHdlJ3ZlIGFscmVhZHkgZ290IGFuIGFycmF5LCBqdXN0IGFwcGVuZC5cXG4gICAgfSBlbHNlIGlmIChwcmVwZW5kKSB7XFxuICAgICAgZXhpc3RpbmcudW5zaGlmdChsaXN0ZW5lcik7XFxuICAgIH0gZWxzZSB7XFxuICAgICAgZXhpc3RpbmcucHVzaChsaXN0ZW5lcik7XFxuICAgIH1cXG5cXG4gICAgLy8gQ2hlY2sgZm9yIGxpc3RlbmVyIGxlYWtcXG4gICAgbSA9ICRnZXRNYXhMaXN0ZW5lcnModGFyZ2V0KTtcXG4gICAgaWYgKG0gPiAwICYmIGV4aXN0aW5nLmxlbmd0aCA+IG0gJiYgIWV4aXN0aW5nLndhcm5lZCkge1xcbiAgICAgIGV4aXN0aW5nLndhcm5lZCA9IHRydWU7XFxuICAgICAgLy8gTm8gZXJyb3IgY29kZSBmb3IgdGhpcyBzaW5jZSBpdCBpcyBhIFdhcm5pbmdcXG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcmVzdHJpY3RlZC1zeW50YXhcXG4gICAgICB2YXIgdyA9IG5ldyBFcnJvcignUG9zc2libGUgRXZlbnRFbWl0dGVyIG1lbW9yeSBsZWFrIGRldGVjdGVkLiAnICsgZXhpc3RpbmcubGVuZ3RoICsgJyAnICsgU3RyaW5nKHR5cGUpICsgJyBsaXN0ZW5lcnMgJyArICdhZGRlZC4gVXNlIGVtaXR0ZXIuc2V0TWF4TGlzdGVuZXJzKCkgdG8gJyArICdpbmNyZWFzZSBsaW1pdCcpO1xcbiAgICAgIHcubmFtZSA9ICdNYXhMaXN0ZW5lcnNFeGNlZWRlZFdhcm5pbmcnO1xcbiAgICAgIHcuZW1pdHRlciA9IHRhcmdldDtcXG4gICAgICB3LnR5cGUgPSB0eXBlO1xcbiAgICAgIHcuY291bnQgPSBleGlzdGluZy5sZW5ndGg7XFxuICAgICAgUHJvY2Vzc0VtaXRXYXJuaW5nKHcpO1xcbiAgICB9XFxuICB9XFxuXFxuICByZXR1cm4gdGFyZ2V0O1xcbn1cXG5cXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLmFkZExpc3RlbmVyID0gZnVuY3Rpb24gYWRkTGlzdGVuZXIodHlwZSwgbGlzdGVuZXIpIHtcXG4gIHJldHVybiBfYWRkTGlzdGVuZXIodGhpcywgdHlwZSwgbGlzdGVuZXIsIGZhbHNlKTtcXG59O1xcblxcbkV2ZW50RW1pdHRlci5wcm90b3R5cGUub24gPSBFdmVudEVtaXR0ZXIucHJvdG90eXBlLmFkZExpc3RlbmVyO1xcblxcbkV2ZW50RW1pdHRlci5wcm90b3R5cGUucHJlcGVuZExpc3RlbmVyID0gZnVuY3Rpb24gcHJlcGVuZExpc3RlbmVyKHR5cGUsIGxpc3RlbmVyKSB7XFxuICByZXR1cm4gX2FkZExpc3RlbmVyKHRoaXMsIHR5cGUsIGxpc3RlbmVyLCB0cnVlKTtcXG59O1xcblxcbmZ1bmN0aW9uIG9uY2VXcmFwcGVyKCkge1xcbiAgdmFyIGFyZ3MgPSBbXTtcXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSBhcmdzLnB1c2goYXJndW1lbnRzW2ldKTtcXG4gIGlmICghdGhpcy5maXJlZCkge1xcbiAgICB0aGlzLnRhcmdldC5yZW1vdmVMaXN0ZW5lcih0aGlzLnR5cGUsIHRoaXMud3JhcEZuKTtcXG4gICAgdGhpcy5maXJlZCA9IHRydWU7XFxuICAgIFJlZmxlY3RBcHBseSh0aGlzLmxpc3RlbmVyLCB0aGlzLnRhcmdldCwgYXJncyk7XFxuICB9XFxufVxcblxcbmZ1bmN0aW9uIF9vbmNlV3JhcCh0YXJnZXQsIHR5cGUsIGxpc3RlbmVyKSB7XFxuICB2YXIgc3RhdGUgPSB7IGZpcmVkOiBmYWxzZSwgd3JhcEZuOiB1bmRlZmluZWQsIHRhcmdldDogdGFyZ2V0LCB0eXBlOiB0eXBlLCBsaXN0ZW5lcjogbGlzdGVuZXIgfTtcXG4gIHZhciB3cmFwcGVkID0gb25jZVdyYXBwZXIuYmluZChzdGF0ZSk7XFxuICB3cmFwcGVkLmxpc3RlbmVyID0gbGlzdGVuZXI7XFxuICBzdGF0ZS53cmFwRm4gPSB3cmFwcGVkO1xcbiAgcmV0dXJuIHdyYXBwZWQ7XFxufVxcblxcbkV2ZW50RW1pdHRlci5wcm90b3R5cGUub25jZSA9IGZ1bmN0aW9uIG9uY2UodHlwZSwgbGlzdGVuZXIpIHtcXG4gIGlmICh0eXBlb2YgbGlzdGVuZXIgIT09ICdmdW5jdGlvbicpIHtcXG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignVGhlIFxcXCJsaXN0ZW5lclxcXCIgYXJndW1lbnQgbXVzdCBiZSBvZiB0eXBlIEZ1bmN0aW9uLiBSZWNlaXZlZCB0eXBlICcgKyB0eXBlb2YgbGlzdGVuZXIpO1xcbiAgfVxcbiAgdGhpcy5vbih0eXBlLCBfb25jZVdyYXAodGhpcywgdHlwZSwgbGlzdGVuZXIpKTtcXG4gIHJldHVybiB0aGlzO1xcbn07XFxuXFxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5wcmVwZW5kT25jZUxpc3RlbmVyID0gZnVuY3Rpb24gcHJlcGVuZE9uY2VMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcikge1xcbiAgaWYgKHR5cGVvZiBsaXN0ZW5lciAhPT0gJ2Z1bmN0aW9uJykge1xcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdUaGUgXFxcImxpc3RlbmVyXFxcIiBhcmd1bWVudCBtdXN0IGJlIG9mIHR5cGUgRnVuY3Rpb24uIFJlY2VpdmVkIHR5cGUgJyArIHR5cGVvZiBsaXN0ZW5lcik7XFxuICB9XFxuICB0aGlzLnByZXBlbmRMaXN0ZW5lcih0eXBlLCBfb25jZVdyYXAodGhpcywgdHlwZSwgbGlzdGVuZXIpKTtcXG4gIHJldHVybiB0aGlzO1xcbn07XFxuXFxuLy8gRW1pdHMgYSAncmVtb3ZlTGlzdGVuZXInIGV2ZW50IGlmIGFuZCBvbmx5IGlmIHRoZSBsaXN0ZW5lciB3YXMgcmVtb3ZlZC5cXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLnJlbW92ZUxpc3RlbmVyID0gZnVuY3Rpb24gcmVtb3ZlTGlzdGVuZXIodHlwZSwgbGlzdGVuZXIpIHtcXG4gIHZhciBsaXN0LCBldmVudHMsIHBvc2l0aW9uLCBpLCBvcmlnaW5hbExpc3RlbmVyO1xcblxcbiAgaWYgKHR5cGVvZiBsaXN0ZW5lciAhPT0gJ2Z1bmN0aW9uJykge1xcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdUaGUgXFxcImxpc3RlbmVyXFxcIiBhcmd1bWVudCBtdXN0IGJlIG9mIHR5cGUgRnVuY3Rpb24uIFJlY2VpdmVkIHR5cGUgJyArIHR5cGVvZiBsaXN0ZW5lcik7XFxuICB9XFxuXFxuICBldmVudHMgPSB0aGlzLl9ldmVudHM7XFxuICBpZiAoZXZlbnRzID09PSB1bmRlZmluZWQpIHJldHVybiB0aGlzO1xcblxcbiAgbGlzdCA9IGV2ZW50c1t0eXBlXTtcXG4gIGlmIChsaXN0ID09PSB1bmRlZmluZWQpIHJldHVybiB0aGlzO1xcblxcbiAgaWYgKGxpc3QgPT09IGxpc3RlbmVyIHx8IGxpc3QubGlzdGVuZXIgPT09IGxpc3RlbmVyKSB7XFxuICAgIGlmICgtLXRoaXMuX2V2ZW50c0NvdW50ID09PSAwKSB0aGlzLl9ldmVudHMgPSBPYmplY3QuY3JlYXRlKG51bGwpO2Vsc2Uge1xcbiAgICAgIGRlbGV0ZSBldmVudHNbdHlwZV07XFxuICAgICAgaWYgKGV2ZW50cy5yZW1vdmVMaXN0ZW5lcikgdGhpcy5lbWl0KCdyZW1vdmVMaXN0ZW5lcicsIHR5cGUsIGxpc3QubGlzdGVuZXIgfHwgbGlzdGVuZXIpO1xcbiAgICB9XFxuICB9IGVsc2UgaWYgKHR5cGVvZiBsaXN0ICE9PSAnZnVuY3Rpb24nKSB7XFxuICAgIHBvc2l0aW9uID0gLTE7XFxuXFxuICAgIGZvciAoaSA9IGxpc3QubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcXG4gICAgICBpZiAobGlzdFtpXSA9PT0gbGlzdGVuZXIgfHwgbGlzdFtpXS5saXN0ZW5lciA9PT0gbGlzdGVuZXIpIHtcXG4gICAgICAgIG9yaWdpbmFsTGlzdGVuZXIgPSBsaXN0W2ldLmxpc3RlbmVyO1xcbiAgICAgICAgcG9zaXRpb24gPSBpO1xcbiAgICAgICAgYnJlYWs7XFxuICAgICAgfVxcbiAgICB9XFxuXFxuICAgIGlmIChwb3NpdGlvbiA8IDApIHJldHVybiB0aGlzO1xcblxcbiAgICBpZiAocG9zaXRpb24gPT09IDApIGxpc3Quc2hpZnQoKTtlbHNlIHtcXG4gICAgICBzcGxpY2VPbmUobGlzdCwgcG9zaXRpb24pO1xcbiAgICB9XFxuXFxuICAgIGlmIChsaXN0Lmxlbmd0aCA9PT0gMSkgZXZlbnRzW3R5cGVdID0gbGlzdFswXTtcXG5cXG4gICAgaWYgKGV2ZW50cy5yZW1vdmVMaXN0ZW5lciAhPT0gdW5kZWZpbmVkKSB0aGlzLmVtaXQoJ3JlbW92ZUxpc3RlbmVyJywgdHlwZSwgb3JpZ2luYWxMaXN0ZW5lciB8fCBsaXN0ZW5lcik7XFxuICB9XFxuXFxuICByZXR1cm4gdGhpcztcXG59O1xcblxcbkV2ZW50RW1pdHRlci5wcm90b3R5cGUub2ZmID0gRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5yZW1vdmVMaXN0ZW5lcjtcXG5cXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLnJlbW92ZUFsbExpc3RlbmVycyA9IGZ1bmN0aW9uIHJlbW92ZUFsbExpc3RlbmVycyh0eXBlKSB7XFxuICB2YXIgbGlzdGVuZXJzLCBldmVudHMsIGk7XFxuXFxuICBldmVudHMgPSB0aGlzLl9ldmVudHM7XFxuICBpZiAoZXZlbnRzID09PSB1bmRlZmluZWQpIHJldHVybiB0aGlzO1xcblxcbiAgLy8gbm90IGxpc3RlbmluZyBmb3IgcmVtb3ZlTGlzdGVuZXIsIG5vIG5lZWQgdG8gZW1pdFxcbiAgaWYgKGV2ZW50cy5yZW1vdmVMaXN0ZW5lciA9PT0gdW5kZWZpbmVkKSB7XFxuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAwKSB7XFxuICAgICAgdGhpcy5fZXZlbnRzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcXG4gICAgICB0aGlzLl9ldmVudHNDb3VudCA9IDA7XFxuICAgIH0gZWxzZSBpZiAoZXZlbnRzW3R5cGVdICE9PSB1bmRlZmluZWQpIHtcXG4gICAgICBpZiAoLS10aGlzLl9ldmVudHNDb3VudCA9PT0gMCkgdGhpcy5fZXZlbnRzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtlbHNlIGRlbGV0ZSBldmVudHNbdHlwZV07XFxuICAgIH1cXG4gICAgcmV0dXJuIHRoaXM7XFxuICB9XFxuXFxuICAvLyBlbWl0IHJlbW92ZUxpc3RlbmVyIGZvciBhbGwgbGlzdGVuZXJzIG9uIGFsbCBldmVudHNcXG4gIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAwKSB7XFxuICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXMoZXZlbnRzKTtcXG4gICAgdmFyIGtleTtcXG4gICAgZm9yIChpID0gMDsgaSA8IGtleXMubGVuZ3RoOyArK2kpIHtcXG4gICAgICBrZXkgPSBrZXlzW2ldO1xcbiAgICAgIGlmIChrZXkgPT09ICdyZW1vdmVMaXN0ZW5lcicpIGNvbnRpbnVlO1xcbiAgICAgIHRoaXMucmVtb3ZlQWxsTGlzdGVuZXJzKGtleSk7XFxuICAgIH1cXG4gICAgdGhpcy5yZW1vdmVBbGxMaXN0ZW5lcnMoJ3JlbW92ZUxpc3RlbmVyJyk7XFxuICAgIHRoaXMuX2V2ZW50cyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XFxuICAgIHRoaXMuX2V2ZW50c0NvdW50ID0gMDtcXG4gICAgcmV0dXJuIHRoaXM7XFxuICB9XFxuXFxuICBsaXN0ZW5lcnMgPSBldmVudHNbdHlwZV07XFxuXFxuICBpZiAodHlwZW9mIGxpc3RlbmVycyA9PT0gJ2Z1bmN0aW9uJykge1xcbiAgICB0aGlzLnJlbW92ZUxpc3RlbmVyKHR5cGUsIGxpc3RlbmVycyk7XFxuICB9IGVsc2UgaWYgKGxpc3RlbmVycyAhPT0gdW5kZWZpbmVkKSB7XFxuICAgIC8vIExJRk8gb3JkZXJcXG4gICAgZm9yIChpID0gbGlzdGVuZXJzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XFxuICAgICAgdGhpcy5yZW1vdmVMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcnNbaV0pO1xcbiAgICB9XFxuICB9XFxuXFxuICByZXR1cm4gdGhpcztcXG59O1xcblxcbmZ1bmN0aW9uIF9saXN0ZW5lcnModGFyZ2V0LCB0eXBlLCB1bndyYXApIHtcXG4gIHZhciBldmVudHMgPSB0YXJnZXQuX2V2ZW50cztcXG5cXG4gIGlmIChldmVudHMgPT09IHVuZGVmaW5lZCkgcmV0dXJuIFtdO1xcblxcbiAgdmFyIGV2bGlzdGVuZXIgPSBldmVudHNbdHlwZV07XFxuICBpZiAoZXZsaXN0ZW5lciA9PT0gdW5kZWZpbmVkKSByZXR1cm4gW107XFxuXFxuICBpZiAodHlwZW9mIGV2bGlzdGVuZXIgPT09ICdmdW5jdGlvbicpIHJldHVybiB1bndyYXAgPyBbZXZsaXN0ZW5lci5saXN0ZW5lciB8fCBldmxpc3RlbmVyXSA6IFtldmxpc3RlbmVyXTtcXG5cXG4gIHJldHVybiB1bndyYXAgPyB1bndyYXBMaXN0ZW5lcnMoZXZsaXN0ZW5lcikgOiBhcnJheUNsb25lKGV2bGlzdGVuZXIsIGV2bGlzdGVuZXIubGVuZ3RoKTtcXG59XFxuXFxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5saXN0ZW5lcnMgPSBmdW5jdGlvbiBsaXN0ZW5lcnModHlwZSkge1xcbiAgcmV0dXJuIF9saXN0ZW5lcnModGhpcywgdHlwZSwgdHJ1ZSk7XFxufTtcXG5cXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLnJhd0xpc3RlbmVycyA9IGZ1bmN0aW9uIHJhd0xpc3RlbmVycyh0eXBlKSB7XFxuICByZXR1cm4gX2xpc3RlbmVycyh0aGlzLCB0eXBlLCBmYWxzZSk7XFxufTtcXG5cXG5FdmVudEVtaXR0ZXIubGlzdGVuZXJDb3VudCA9IGZ1bmN0aW9uIChlbWl0dGVyLCB0eXBlKSB7XFxuICBpZiAodHlwZW9mIGVtaXR0ZXIubGlzdGVuZXJDb3VudCA9PT0gJ2Z1bmN0aW9uJykge1xcbiAgICByZXR1cm4gZW1pdHRlci5saXN0ZW5lckNvdW50KHR5cGUpO1xcbiAgfSBlbHNlIHtcXG4gICAgcmV0dXJuIGxpc3RlbmVyQ291bnQuY2FsbChlbWl0dGVyLCB0eXBlKTtcXG4gIH1cXG59O1xcblxcbkV2ZW50RW1pdHRlci5wcm90b3R5cGUubGlzdGVuZXJDb3VudCA9IGxpc3RlbmVyQ291bnQ7XFxuZnVuY3Rpb24gbGlzdGVuZXJDb3VudCh0eXBlKSB7XFxuICB2YXIgZXZlbnRzID0gdGhpcy5fZXZlbnRzO1xcblxcbiAgaWYgKGV2ZW50cyAhPT0gdW5kZWZpbmVkKSB7XFxuICAgIHZhciBldmxpc3RlbmVyID0gZXZlbnRzW3R5cGVdO1xcblxcbiAgICBpZiAodHlwZW9mIGV2bGlzdGVuZXIgPT09ICdmdW5jdGlvbicpIHtcXG4gICAgICByZXR1cm4gMTtcXG4gICAgfSBlbHNlIGlmIChldmxpc3RlbmVyICE9PSB1bmRlZmluZWQpIHtcXG4gICAgICByZXR1cm4gZXZsaXN0ZW5lci5sZW5ndGg7XFxuICAgIH1cXG4gIH1cXG5cXG4gIHJldHVybiAwO1xcbn1cXG5cXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLmV2ZW50TmFtZXMgPSBmdW5jdGlvbiBldmVudE5hbWVzKCkge1xcbiAgcmV0dXJuIHRoaXMuX2V2ZW50c0NvdW50ID4gMCA/IFJlZmxlY3RPd25LZXlzKHRoaXMuX2V2ZW50cykgOiBbXTtcXG59O1xcblxcbmZ1bmN0aW9uIGFycmF5Q2xvbmUoYXJyLCBuKSB7XFxuICB2YXIgY29weSA9IG5ldyBBcnJheShuKTtcXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbjsgKytpKSBjb3B5W2ldID0gYXJyW2ldO1xcbiAgcmV0dXJuIGNvcHk7XFxufVxcblxcbmZ1bmN0aW9uIHNwbGljZU9uZShsaXN0LCBpbmRleCkge1xcbiAgZm9yICg7IGluZGV4ICsgMSA8IGxpc3QubGVuZ3RoOyBpbmRleCsrKSBsaXN0W2luZGV4XSA9IGxpc3RbaW5kZXggKyAxXTtcXG4gIGxpc3QucG9wKCk7XFxufVxcblxcbmZ1bmN0aW9uIHVud3JhcExpc3RlbmVycyhhcnIpIHtcXG4gIHZhciByZXQgPSBuZXcgQXJyYXkoYXJyLmxlbmd0aCk7XFxuICBmb3IgKHZhciBpID0gMDsgaSA8IHJldC5sZW5ndGg7ICsraSkge1xcbiAgICByZXRbaV0gPSBhcnJbaV0ubGlzdGVuZXIgfHwgYXJyW2ldO1xcbiAgfVxcbiAgcmV0dXJuIHJldDtcXG59XFxuXFxuLy8jIHNvdXJjZVVSTD13ZWJwYWNrOi8veGdwbGF5ZXItZmx2Ly9Vc2Vycy9sZW9uYXJkby9Eb2N1bWVudHMvZnJvbnQtZW5kL3BsYXllci94Z3BsYXllci9ub2RlX21vZHVsZXMvZXZlbnRzL2V2ZW50cy5qcz9cIil9LFwiLi4veGdwbGF5ZXItYnVmZmVyL2luZGV4LmpzXCI6XG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuLi94Z3BsYXllci1idWZmZXIvaW5kZXguanMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIG5vIHN0YXRpYyBleHBvcnRzIGZvdW5kICovZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7XCJ1c2Ugc3RyaWN0XCI7ZXZhbCgnXFxuXFxubW9kdWxlLmV4cG9ydHMgPSB7XFxuICBUcmFjazogX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9zcmMvdHJhY2sgKi8gXCIuLi94Z3BsYXllci1idWZmZXIvc3JjL3RyYWNrLmpzXCIpLmRlZmF1bHQsXFxuICBUcmFja3M6IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vc3JjL3RyYWNrICovIFwiLi4veGdwbGF5ZXItYnVmZmVyL3NyYy90cmFjay5qc1wiKS5UcmFja3MsXFxuICBBdWRpb1RyYWNrOiBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL3NyYy90cmFjayAqLyBcIi4uL3hncGxheWVyLWJ1ZmZlci9zcmMvdHJhY2suanNcIikuQXVkaW9UcmFjayxcXG4gIFZpZGVvVHJhY2s6IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vc3JjL3RyYWNrICovIFwiLi4veGdwbGF5ZXItYnVmZmVyL3NyYy90cmFjay5qc1wiKS5WaWRlb1RyYWNrLFxcblxcbiAgWGdCdWZmZXI6IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vc3JjL2J1ZmZlciAqLyBcIi4uL3hncGxheWVyLWJ1ZmZlci9zcmMvYnVmZmVyLmpzXCIpLlhnQnVmZmVyLFxcbiAgUmVtdXhCdWZmZXI6IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vc3JjL2J1ZmZlciAqLyBcIi4uL3hncGxheWVyLWJ1ZmZlci9zcmMvYnVmZmVyLmpzXCIpLlJlbXV4QnVmZmVyLFxcblxcbiAgUHJlU291cmNlOiBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL3NyYy9wcmVzb3VjZSAqLyBcIi4uL3hncGxheWVyLWJ1ZmZlci9zcmMvcHJlc291Y2UuanNcIikuZGVmYXVsdFxcbn07XFxuXFxuLy8jIHNvdXJjZVVSTD13ZWJwYWNrOi8veGdwbGF5ZXItZmx2Ly4uL3hncGxheWVyLWJ1ZmZlci9pbmRleC5qcz8nKX0sXCIuLi94Z3BsYXllci1idWZmZXIvc3JjL2J1ZmZlci5qc1wiOlxuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuLi94Z3BsYXllci1idWZmZXIvc3JjL2J1ZmZlci5qcyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBubyBzdGF0aWMgZXhwb3J0cyBmb3VuZCAqL2Z1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pe1widXNlIHN0cmljdFwiO2V2YWwoJ1xcblxcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xcbiAgdmFsdWU6IHRydWVcXG59KTtcXG5jbGFzcyBYZ0J1ZmZlciB7XFxuICAvKipcXG4gICAqIEEgYnVmZmVyIHRvIHN0b3JlIGxvYWRlZCBkYXRhLlxcbiAgICpcXG4gICAqIEBjbGFzcyBMb2FkZXJCdWZmZXJcXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBsZW5ndGggLSBPcHRpb25hbCB0aGUgYnVmZmVyIHNpemVcXG4gICAqL1xcbiAgY29uc3RydWN0b3IobGVuZ3RoKSB7XFxuICAgIHRoaXMubGVuZ3RoID0gbGVuZ3RoIHx8IDA7XFxuICAgIHRoaXMuaGlzdG9yeUxlbiA9IGxlbmd0aCB8fCAwO1xcbiAgICB0aGlzLmFycmF5ID0gW107XFxuICAgIHRoaXMub2Zmc2V0ID0gMDtcXG4gIH1cXG5cXG4gIC8qKlxcbiAgICogVGhlIGZ1bmN0aW9uIHRvIHB1c2ggZGF0YS5cXG4gICAqXFxuICAgKiBAcGFyYW0ge251bWJlcn0gZGF0YSAtIFRoZSBkYXRhIHRvIHB1c2ggaW50byB0aGUgYnVmZmVyXFxuICAgKi9cXG4gIHB1c2goZGF0YSkge1xcbiAgICB0aGlzLmFycmF5LnB1c2goZGF0YSk7XFxuICAgIHRoaXMubGVuZ3RoICs9IGRhdGEuYnl0ZUxlbmd0aDtcXG4gICAgdGhpcy5oaXN0b3J5TGVuICs9IGRhdGEuYnl0ZUxlbmd0aDtcXG4gIH1cXG5cXG4gIC8qKlxcbiAgICogVGhlIGZ1bmN0aW9uIHRvIHNoaWZ0IGRhdGEuXFxuICAgKlxcbiAgICogQHBhcmFtIHtudW1iZXJ9IGxlbmd0aCAtIFRoZSBzaXplIG9mIHNoaWZ0LlxcbiAgICovXFxuICBzaGlmdChsZW5ndGgpIHtcXG4gICAgaWYgKHRoaXMuYXJyYXkubGVuZ3RoIDwgMSkge1xcbiAgICAgIHJldHVybiBuZXcgVWludDhBcnJheSgwKTtcXG4gICAgfVxcblxcbiAgICBpZiAobGVuZ3RoID09PSB1bmRlZmluZWQpIHtcXG4gICAgICByZXR1cm4gdGhpcy5fc2hpZnRCdWZmZXIoKTtcXG4gICAgfVxcbiAgICBpZiAodGhpcy5vZmZzZXQgKyBsZW5ndGggPT09IHRoaXMuYXJyYXlbMF0ubGVuZ3RoKSB7XFxuICAgICAgbGV0IHJldCA9IHRoaXMuYXJyYXlbMF0uc2xpY2UodGhpcy5vZmZzZXQsIHRoaXMub2Zmc2V0ICsgbGVuZ3RoKTtcXG4gICAgICB0aGlzLm9mZnNldCA9IDA7XFxuICAgICAgdGhpcy5hcnJheS5zaGlmdCgpO1xcbiAgICAgIHRoaXMubGVuZ3RoIC09IGxlbmd0aDtcXG4gICAgICByZXR1cm4gcmV0O1xcbiAgICB9XFxuXFxuICAgIGlmICh0aGlzLm9mZnNldCArIGxlbmd0aCA8IHRoaXMuYXJyYXlbMF0ubGVuZ3RoKSB7XFxuICAgICAgbGV0IHJldCA9IHRoaXMuYXJyYXlbMF0uc2xpY2UodGhpcy5vZmZzZXQsIHRoaXMub2Zmc2V0ICsgbGVuZ3RoKTtcXG4gICAgICB0aGlzLm9mZnNldCArPSBsZW5ndGg7XFxuICAgICAgdGhpcy5sZW5ndGggLT0gbGVuZ3RoO1xcbiAgICAgIHJldHVybiByZXQ7XFxuICAgIH1cXG5cXG4gICAgbGV0IHJldCA9IG5ldyBVaW50OEFycmF5KGxlbmd0aCk7XFxuICAgIGxldCB0bXBvZmYgPSAwO1xcbiAgICB3aGlsZSAodGhpcy5hcnJheS5sZW5ndGggPiAwICYmIGxlbmd0aCA+IDApIHtcXG4gICAgICBpZiAodGhpcy5vZmZzZXQgKyBsZW5ndGggPCB0aGlzLmFycmF5WzBdLmxlbmd0aCkge1xcbiAgICAgICAgbGV0IHRtcCA9IHRoaXMuYXJyYXlbMF0uc2xpY2UodGhpcy5vZmZzZXQsIHRoaXMub2Zmc2V0ICsgbGVuZ3RoKTtcXG4gICAgICAgIHJldC5zZXQodG1wLCB0bXBvZmYpO1xcbiAgICAgICAgdGhpcy5vZmZzZXQgKz0gbGVuZ3RoO1xcbiAgICAgICAgdGhpcy5sZW5ndGggLT0gbGVuZ3RoO1xcbiAgICAgICAgbGVuZ3RoID0gMDtcXG4gICAgICAgIGJyZWFrO1xcbiAgICAgIH0gZWxzZSB7XFxuICAgICAgICBsZXQgdGVtcGxlbmd0aCA9IHRoaXMuYXJyYXlbMF0ubGVuZ3RoIC0gdGhpcy5vZmZzZXQ7XFxuICAgICAgICByZXQuc2V0KHRoaXMuYXJyYXlbMF0uc2xpY2UodGhpcy5vZmZzZXQsIHRoaXMuYXJyYXlbMF0ubGVuZ3RoKSwgdG1wb2ZmKTtcXG4gICAgICAgIHRoaXMuYXJyYXkuc2hpZnQoKTtcXG4gICAgICAgIHRoaXMub2Zmc2V0ID0gMDtcXG4gICAgICAgIHRtcG9mZiArPSB0ZW1wbGVuZ3RoO1xcbiAgICAgICAgdGhpcy5sZW5ndGggLT0gdGVtcGxlbmd0aDtcXG4gICAgICAgIGxlbmd0aCAtPSB0ZW1wbGVuZ3RoO1xcbiAgICAgIH1cXG4gICAgfVxcbiAgICByZXR1cm4gcmV0O1xcbiAgfVxcblxcbiAgLyoqXFxuICAgKiBGdW5jdGlvbiB0byBjbGVhciB0aGUgYnVmZmVyLlxcbiAgICovXFxuICBjbGVhcigpIHtcXG4gICAgdGhpcy5hcnJheSA9IFtdO1xcbiAgICB0aGlzLmxlbmd0aCA9IDA7XFxuICAgIHRoaXMub2Zmc2V0ID0gMDtcXG4gIH1cXG5cXG4gIGRlc3Ryb3koKSB7XFxuICAgIHRoaXMuY2xlYXIoKTtcXG4gICAgdGhpcy5oaXN0b3J5TGVuID0gMDtcXG4gIH1cXG5cXG4gIC8qKlxcbiAgICogRnVuY3Rpb24gdG8gc2hpZnQgb25lIHVuaXQ4QXJyYXkuXFxuICAgKi9cXG4gIF9zaGlmdEJ1ZmZlcigpIHtcXG4gICAgdGhpcy5sZW5ndGggLT0gdGhpcy5hcnJheVswXS5sZW5ndGg7XFxuICAgIHRoaXMub2Zmc2V0ID0gMDtcXG4gICAgcmV0dXJuIHRoaXMuYXJyYXkuc2hpZnQoKTtcXG4gIH1cXG5cXG4gIC8qKlxcbiAgICogQ29udmVydCB1aW50OCBkYXRhIHRvIG51bWJlci5cXG4gICAqXFxuICAgKiBAcGFyYW0ge251bWJlcn0gc3RhcnQgLSB0aGUgc3RhcnQgcG9zdGlvbi5cXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBsZW5ndGggLSB0aGUgbGVuZ3RoIG9mIGRhdGEuXFxuICAgKi9cXG4gIHRvSW50KHN0YXJ0LCBsZW5ndGgpIHtcXG4gICAgbGV0IHJldEludCA9IDA7XFxuICAgIGxldCBpID0gdGhpcy5vZmZzZXQgKyBzdGFydDtcXG4gICAgd2hpbGUgKGkgPCB0aGlzLm9mZnNldCArIGxlbmd0aCArIHN0YXJ0KSB7XFxuICAgICAgaWYgKGkgPCB0aGlzLmFycmF5WzBdLmxlbmd0aCkge1xcbiAgICAgICAgcmV0SW50ID0gcmV0SW50ICogMjU2ICsgdGhpcy5hcnJheVswXVtpXTtcXG4gICAgICB9IGVsc2UgaWYgKHRoaXMuYXJyYXlbMV0pIHtcXG4gICAgICAgIHJldEludCA9IHJldEludCAqIDI1NiArIHRoaXMuYXJyYXlbMV1baSAtIHRoaXMuYXJyYXlbMF0ubGVuZ3RoXTtcXG4gICAgICB9XFxuXFxuICAgICAgaSsrO1xcbiAgICB9XFxuICAgIHJldHVybiByZXRJbnQ7XFxuICB9XFxufVxcblxcbmV4cG9ydHMuWGdCdWZmZXIgPSBYZ0J1ZmZlcjtcXG5jbGFzcyBSZW11eEJ1ZmZlciB7XFxuICBjb25zdHJ1Y3RvcigpIHtcXG4gICAgdGhpcy52aWRlbyA9IFtdO1xcbiAgICB0aGlzLmF1ZGlvID0gW107XFxuICB9XFxuXFxuICBkZXN0cm95KCkge1xcbiAgICB0aGlzLnZpZGVvID0gW107XFxuICAgIHRoaXMuYXVkaW8gPSBbXTtcXG4gIH1cXG59XFxuZXhwb3J0cy5SZW11eEJ1ZmZlciA9IFJlbXV4QnVmZmVyO1xcblxcbi8vIyBzb3VyY2VVUkw9d2VicGFjazovL3hncGxheWVyLWZsdi8uLi94Z3BsYXllci1idWZmZXIvc3JjL2J1ZmZlci5qcz8nKX0sXCIuLi94Z3BsYXllci1idWZmZXIvc3JjL3ByZXNvdWNlLmpzXCI6XG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi4veGdwbGF5ZXItYnVmZmVyL3NyYy9wcmVzb3VjZS5qcyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIG5vIHN0YXRpYyBleHBvcnRzIGZvdW5kICovZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7XCJ1c2Ugc3RyaWN0XCI7ZXZhbChcIlxcblxcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcXFwiX19lc01vZHVsZVxcXCIsIHtcXG4gIHZhbHVlOiB0cnVlXFxufSk7XFxuY2xhc3MgU291cmNlIHtcXG4gIGNvbnN0cnVjdG9yKCkge1xcbiAgICB0aGlzLm1pbWV0eXBlID0gJyc7XFxuICAgIHRoaXMuaW5pdCA9IG51bGw7XFxuICAgIHRoaXMuZGF0YSA9IFtdO1xcbiAgfVxcbn1cXG5cXG5jbGFzcyBQcmVTb3VyY2Uge1xcbiAgY29uc3RydWN0b3IoKSB7XFxuICAgIHRoaXMuc291cmNlcyA9IHt9O1xcbiAgfVxcblxcbiAgZ2V0U291cmNlKHNvdXJjZSkge1xcbiAgICByZXR1cm4gdGhpcy5zb3VyY2VzW3NvdXJjZV07XFxuICB9XFxuXFxuICBjcmVhdGVTb3VyY2UobmFtZSkge1xcbiAgICB0aGlzLnNvdXJjZXNbbmFtZV0gPSBuZXcgU291cmNlKCk7XFxuICAgIHJldHVybiB0aGlzLnNvdXJjZXNbbmFtZV07XFxuICB9XFxuXFxuICBjbGVhcigpIHtcXG4gICAgdGhpcy5zb3VyY2VzID0ge307XFxuICB9XFxuXFxuICBkZXN0cm95KCkge1xcbiAgICB0aGlzLnNvdXJjZXMgPSB7fTtcXG4gIH1cXG59XFxuXFxuZXhwb3J0cy5kZWZhdWx0ID0gUHJlU291cmNlO1xcblxcbi8vIyBzb3VyY2VVUkw9d2VicGFjazovL3hncGxheWVyLWZsdi8uLi94Z3BsYXllci1idWZmZXIvc3JjL3ByZXNvdWNlLmpzP1wiKX0sXCIuLi94Z3BsYXllci1idWZmZXIvc3JjL3RyYWNrLmpzXCI6XG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi4veGdwbGF5ZXItYnVmZmVyL3NyYy90cmFjay5qcyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIG5vIHN0YXRpYyBleHBvcnRzIGZvdW5kICovZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7XCJ1c2Ugc3RyaWN0XCI7ZXZhbChcIlxcblxcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcXFwiX19lc01vZHVsZVxcXCIsIHtcXG4gIHZhbHVlOiB0cnVlXFxufSk7XFxuY2xhc3MgVHJhY2sge1xcbiAgLyoqXFxuICAgKiBUaGUgY29uc3RydWN0b3IuXFxuICAgKi9cXG4gIGNvbnN0cnVjdG9yKCkge1xcbiAgICB0aGlzLmlkID0gLTE7XFxuICAgIHRoaXMuc2VxdWVuY2VOdW1iZXIgPSAwO1xcbiAgICB0aGlzLnNhbXBsZXMgPSBbXTtcXG4gICAgdGhpcy5kcm9wcGVkU2FtcGxlcyA9IFtdO1xcbiAgICB0aGlzLmxlbmd0aCA9IDA7XFxuICB9XFxuXFxuICAvKipcXG4gICAqIFJlc2V0IHRoZSB0cmFjay5cXG4gICAqL1xcbiAgcmVzZXQoKSB7XFxuICAgIHRoaXMuc2VxdWVuY2VOdW1iZXIgPSAwO1xcbiAgICB0aGlzLnNhbXBsZXMgPSBbXTtcXG4gICAgdGhpcy5sZW5ndGggPSAwO1xcbiAgfVxcbiAgLyoqXFxuICAgKiBkZXN0cm95IHRoZSB0cmFjay5cXG4gICAqL1xcbiAgZGlzdHJveSgpIHtcXG4gICAgdGhpcy5yZXNldCgpO1xcbiAgICB0aGlzLmlkID0gLTE7XFxuICB9XFxufVxcblxcbmV4cG9ydHMuZGVmYXVsdCA9IFRyYWNrO1xcbmNsYXNzIEF1ZGlvVHJhY2sgZXh0ZW5kcyBUcmFjayB7XFxuICAvKipcXG4gICAqIFRoZSBjb25zdHJ1Y3RvciBmb3IgYXVkaW8gdHJhY2suXFxuICAgKi9cXG4gIGNvbnN0cnVjdG9yKCkge1xcbiAgICBzdXBlcigpO1xcbiAgICB0aGlzLlRBRyA9ICdBdWRpb1RyYWNrJztcXG4gICAgdGhpcy50eXBlID0gJ2F1ZGlvJztcXG4gIH1cXG59XFxuXFxuZXhwb3J0cy5BdWRpb1RyYWNrID0gQXVkaW9UcmFjaztcXG5jbGFzcyBWaWRlb1RyYWNrIGV4dGVuZHMgVHJhY2sge1xcbiAgLyoqXFxuICAgKiBUaGUgY29uc3RydWN0b3IgZm9yIHZpZGVvIHRyYWNrLlxcbiAgICovXFxuICBjb25zdHJ1Y3RvcigpIHtcXG4gICAgc3VwZXIoKTtcXG4gICAgdGhpcy5UQUcgPSAnVmlkZW9UcmFjayc7XFxuICAgIHRoaXMudHlwZSA9ICd2aWRlbyc7XFxuICAgIHRoaXMuZHJvcHBlZCA9IDA7XFxuICB9XFxuICAvKipcXG4gICAqIHJlc2V0IHRoZSB2aWRlbyB0cmFjay5cXG4gICAqL1xcbiAgcmVzZXQoKSB7XFxuICAgIHRoaXMuc2VxdWVuY2VOdW1iZXIgPSAwO1xcbiAgICB0aGlzLnNhbXBsZXMgPSBbXTtcXG4gICAgdGhpcy5sZW5ndGggPSAwO1xcbiAgICB0aGlzLmRyb3BwZWQgPSAwO1xcbiAgfVxcbn1cXG5cXG5leHBvcnRzLlZpZGVvVHJhY2sgPSBWaWRlb1RyYWNrO1xcbmNsYXNzIFRyYWNrcyB7XFxuICBjb25zdHJ1Y3RvcigpIHtcXG4gICAgdGhpcy5hdWRpb1RyYWNrID0gbnVsbDtcXG4gICAgdGhpcy52aWRlb1RyYWNrID0gbnVsbDtcXG4gIH1cXG59XFxuZXhwb3J0cy5UcmFja3MgPSBUcmFja3M7XFxuXFxuLy8jIHNvdXJjZVVSTD13ZWJwYWNrOi8veGdwbGF5ZXItZmx2Ly4uL3hncGxheWVyLWJ1ZmZlci9zcmMvdHJhY2suanM/XCIpfSxcIi4uL3hncGxheWVyLWNvZGVjL2luZGV4LmpzXCI6XG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4uL3hncGxheWVyLWNvZGVjL2luZGV4LmpzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIG5vIHN0YXRpYyBleHBvcnRzIGZvdW5kICovZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7XCJ1c2Ugc3RyaWN0XCI7ZXZhbCgnXFxuXFxubW9kdWxlLmV4cG9ydHMgPSB7XFxuICBOYWx1bml0OiBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL3NyYy9oMjY0L25hbHVuaXQgKi8gXCIuLi94Z3BsYXllci1jb2RlYy9zcmMvaDI2NC9uYWx1bml0L2luZGV4LmpzXCIpLmRlZmF1bHQsXFxuICBTcHNQYXJzZXI6IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vc3JjL2gyNjQvbmFsdW5pdC9zcHMgKi8gXCIuLi94Z3BsYXllci1jb2RlYy9zcmMvaDI2NC9uYWx1bml0L3Nwcy5qc1wiKS5kZWZhdWx0LFxcblxcbiAgQ29tcGF0aWJpbGl0eTogX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9zcmMvY29tcGF0aWJpbGl0eSAqLyBcIi4uL3hncGxheWVyLWNvZGVjL3NyYy9jb21wYXRpYmlsaXR5LmpzXCIpLmRlZmF1bHRcXG59O1xcblxcbi8vIyBzb3VyY2VVUkw9d2VicGFjazovL3hncGxheWVyLWZsdi8uLi94Z3BsYXllci1jb2RlYy9pbmRleC5qcz8nKX0sXCIuLi94Z3BsYXllci1jb2RlYy9zcmMvYWFjL2FhYy1oZWxwZXIuanNcIjpcbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4uL3hncGxheWVyLWNvZGVjL3NyYy9hYWMvYWFjLWhlbHBlci5qcyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgbm8gc3RhdGljIGV4cG9ydHMgZm91bmQgKi9mdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXtcInVzZSBzdHJpY3RcIjtldmFsKCdcXG5cXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcXG4gIHZhbHVlOiB0cnVlXFxufSk7XFxuXFxuY2xhc3MgQUFDIHtcXG5cXG4gIHN0YXRpYyBnZXRTaWxlbnRGcmFtZShjb2RlYywgY2hhbm5lbENvdW50KSB7XFxuICAgIGlmIChjb2RlYyA9PT0gXFwnbXA0YS40MC4yXFwnKSB7XFxuICAgICAgLy8gaGFuZGxlIExDLUFBQ1xcbiAgICAgIGlmIChjaGFubmVsQ291bnQgPT09IDEpIHtcXG4gICAgICAgIHJldHVybiBuZXcgVWludDhBcnJheShbMHgwMCwgMHhjOCwgMHgwMCwgMHg4MCwgMHgyMywgMHg4MF0pO1xcbiAgICAgIH0gZWxzZSBpZiAoY2hhbm5lbENvdW50ID09PSAyKSB7XFxuICAgICAgICByZXR1cm4gbmV3IFVpbnQ4QXJyYXkoWzB4MjEsIDB4MDAsIDB4NDksIDB4OTAsIDB4MDIsIDB4MTksIDB4MDAsIDB4MjMsIDB4ODBdKTtcXG4gICAgICB9IGVsc2UgaWYgKGNoYW5uZWxDb3VudCA9PT0gMykge1xcbiAgICAgICAgcmV0dXJuIG5ldyBVaW50OEFycmF5KFsweDAwLCAweGM4LCAweDAwLCAweDgwLCAweDIwLCAweDg0LCAweDAxLCAweDI2LCAweDQwLCAweDA4LCAweDY0LCAweDAwLCAweDhlXSk7XFxuICAgICAgfSBlbHNlIGlmIChjaGFubmVsQ291bnQgPT09IDQpIHtcXG4gICAgICAgIHJldHVybiBuZXcgVWludDhBcnJheShbMHgwMCwgMHhjOCwgMHgwMCwgMHg4MCwgMHgyMCwgMHg4NCwgMHgwMSwgMHgyNiwgMHg0MCwgMHgwOCwgMHg2NCwgMHgwMCwgMHg4MCwgMHgyYywgMHg4MCwgMHgwOCwgMHgwMiwgMHgzOF0pO1xcbiAgICAgIH0gZWxzZSBpZiAoY2hhbm5lbENvdW50ID09PSA1KSB7XFxuICAgICAgICByZXR1cm4gbmV3IFVpbnQ4QXJyYXkoWzB4MDAsIDB4YzgsIDB4MDAsIDB4ODAsIDB4MjAsIDB4ODQsIDB4MDEsIDB4MjYsIDB4NDAsIDB4MDgsIDB4NjQsIDB4MDAsIDB4ODIsIDB4MzAsIDB4MDQsIDB4OTksIDB4MDAsIDB4MjEsIDB4OTAsIDB4MDIsIDB4MzhdKTtcXG4gICAgICB9IGVsc2UgaWYgKGNoYW5uZWxDb3VudCA9PT0gNikge1xcbiAgICAgICAgcmV0dXJuIG5ldyBVaW50OEFycmF5KFsweDAwLCAweGM4LCAweDAwLCAweDgwLCAweDIwLCAweDg0LCAweDAxLCAweDI2LCAweDQwLCAweDA4LCAweDY0LCAweDAwLCAweDgyLCAweDMwLCAweDA0LCAweDk5LCAweDAwLCAweDIxLCAweDkwLCAweDAyLCAweDAwLCAweGIyLCAweDAwLCAweDIwLCAweDA4LCAweGUwXSk7XFxuICAgICAgfVxcbiAgICB9IGVsc2Uge1xcbiAgICAgIC8vIGhhbmRsZSBIRS1BQUMgKG1wNGEuNDAuNSAvIG1wNGEuNDAuMjkpXFxuICAgICAgaWYgKGNoYW5uZWxDb3VudCA9PT0gMSkge1xcbiAgICAgICAgLy8gZmZtcGVnIC15IC1mIGxhdmZpIC1pIFwiYWV2YWxzcmM9MDpkPTAuMDVcIiAtYzphIGxpYmZka19hYWMgLXByb2ZpbGU6YSBhYWNfaGUgLWI6YSA0ayBvdXRwdXQuYWFjICYmIGhleGR1bXAgLXYgLWUgXFwnMTYvMSBcIjB4JXgsXCIgXCJcXFxcblwiXFwnIC12IG91dHB1dC5hYWNcXG4gICAgICAgIHJldHVybiBuZXcgVWludDhBcnJheShbMHgxLCAweDQwLCAweDIyLCAweDgwLCAweGEzLCAweDRlLCAweGU2LCAweDgwLCAweGJhLCAweDgsIDB4MCwgMHgwLCAweDAsIDB4MWMsIDB4NiwgMHhmMSwgMHhjMSwgMHhhLCAweDVhLCAweDVhLCAweDVhLCAweDVhLCAweDVhLCAweDVhLCAweDVhLCAweDVhLCAweDVhLCAweDVhLCAweDVhLCAweDVhLCAweDVhLCAweDVhLCAweDVhLCAweDVhLCAweDVhLCAweDVhLCAweDVhLCAweDVhLCAweDVhLCAweDVhLCAweDVhLCAweDVhLCAweDVhLCAweDVhLCAweDVhLCAweDVhLCAweDVhLCAweDVhLCAweDVhLCAweDVhLCAweDVhLCAweDVhLCAweDVhLCAweDVhLCAweDVhLCAweDVhLCAweDVhLCAweDVhLCAweDVlXSk7XFxuICAgICAgfSBlbHNlIGlmIChjaGFubmVsQ291bnQgPT09IDIpIHtcXG4gICAgICAgIC8vIGZmbXBlZyAteSAtZiBsYXZmaSAtaSBcImFldmFsc3JjPTB8MDpkPTAuMDVcIiAtYzphIGxpYmZka19hYWMgLXByb2ZpbGU6YSBhYWNfaGVfdjIgLWI6YSA0ayBvdXRwdXQuYWFjICYmIGhleGR1bXAgLXYgLWUgXFwnMTYvMSBcIjB4JXgsXCIgXCJcXFxcblwiXFwnIC12IG91dHB1dC5hYWNcXG4gICAgICAgIHJldHVybiBuZXcgVWludDhBcnJheShbMHgxLCAweDQwLCAweDIyLCAweDgwLCAweGEzLCAweDVlLCAweGU2LCAweDgwLCAweGJhLCAweDgsIDB4MCwgMHgwLCAweDAsIDB4MCwgMHg5NSwgMHgwLCAweDYsIDB4ZjEsIDB4YTEsIDB4YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1ZV0pO1xcbiAgICAgIH0gZWxzZSBpZiAoY2hhbm5lbENvdW50ID09PSAzKSB7XFxuICAgICAgICAvLyBmZm1wZWcgLXkgLWYgbGF2ZmkgLWkgXCJhZXZhbHNyYz0wfDB8MDpkPTAuMDVcIiAtYzphIGxpYmZka19hYWMgLXByb2ZpbGU6YSBhYWNfaGVfdjIgLWI6YSA0ayBvdXRwdXQuYWFjICYmIGhleGR1bXAgLXYgLWUgXFwnMTYvMSBcIjB4JXgsXCIgXCJcXFxcblwiXFwnIC12IG91dHB1dC5hYWNcXG4gICAgICAgIHJldHVybiBuZXcgVWludDhBcnJheShbMHgxLCAweDQwLCAweDIyLCAweDgwLCAweGEzLCAweDVlLCAweGU2LCAweDgwLCAweGJhLCAweDgsIDB4MCwgMHgwLCAweDAsIDB4MCwgMHg5NSwgMHgwLCAweDYsIDB4ZjEsIDB4YTEsIDB4YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1ZV0pO1xcbiAgICAgIH1cXG4gICAgfVxcbiAgICByZXR1cm4gbnVsbDtcXG4gIH1cXG5cXG59XFxuXFxuZXhwb3J0cy5kZWZhdWx0ID0gQUFDO1xcblxcbi8vIyBzb3VyY2VVUkw9d2VicGFjazovL3hncGxheWVyLWZsdi8uLi94Z3BsYXllci1jb2RlYy9zcmMvYWFjL2FhYy1oZWxwZXIuanM/Jyl9LFwiLi4veGdwbGF5ZXItY29kZWMvc3JjL2NvbXBhdGliaWxpdHkuanNcIjpcbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi4veGdwbGF5ZXItY29kZWMvc3JjL2NvbXBhdGliaWxpdHkuanMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgbm8gc3RhdGljIGV4cG9ydHMgZm91bmQgKi9mdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXtcInVzZSBzdHJpY3RcIjtldmFsKFwiXFxuXFxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFxcXCJfX2VzTW9kdWxlXFxcIiwge1xcbiAgdmFsdWU6IHRydWVcXG59KTtcXG5cXG52YXIgX3hncGxheWVyVXRpbHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISB4Z3BsYXllci11dGlscyAqLyBcXFwiLi4veGdwbGF5ZXItdXRpbHMvaW5kZXguanNcXFwiKTtcXG5cXG52YXIgX2FhY0hlbHBlciA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vYWFjL2FhYy1oZWxwZXIgKi8gXFxcIi4uL3hncGxheWVyLWNvZGVjL3NyYy9hYWMvYWFjLWhlbHBlci5qc1xcXCIpO1xcblxcbnZhciBfYWFjSGVscGVyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2FhY0hlbHBlcik7XFxuXFxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cXG5cXG5jb25zdCB7IFJFTVVYX0VWRU5UUyB9ID0gX3hncGxheWVyVXRpbHMuRVZFTlRTO1xcblxcbmNsYXNzIENvbXBhdGliaWxpdHkge1xcbiAgY29uc3RydWN0b3IoKSB7XFxuICAgIHRoaXMubmV4dEF1ZGlvRHRzID0gMDsgLy8g5qih5ouf5LiL5LiA5q616Z+z6aKR5pWw5o2u55qEZHRzXFxuICAgIHRoaXMubmV4dFZpZGVvRHRzID0gMDsgLy8g5qih5ouf5LiL5LiA5q616KeG6aKR5pWw5o2u55qEZHRzXFxuXFxuICAgIHRoaXMubGFzdEF1ZGlvU2FtcGxlc0xlbiA9IDA7IC8vIOS4iuS4gOautemfs+mikeaVsOaNrueahOmVv+W6plxcbiAgICB0aGlzLmxhc3RWaWRlb1NhbXBsZXNMZW4gPSAwOyAvLyDkuIrkuIDmrrXop4bpopHmlbDmja7nmoTplb/luqZcXG5cXG4gICAgdGhpcy5sYXN0VmlkZW9EdHMgPSB1bmRlZmluZWQ7IC8vIOS4iuS4gOautemfs+mikeaVsOaNrueahOmVv+W6plxcbiAgICB0aGlzLmxhc3RBdWRpb0R0cyA9IHVuZGVmaW5lZDsgLy8g5LiK5LiA5q616KeG6aKR5pWw5o2u55qE6ZW/5bqmXFxuXFxuICAgIHRoaXMuYWxsQXVkaW9TYW1wbGVzQ291bnQgPSAwOyAvLyDpn7PpopHmgLvmlbDmja7ph48o5Y6f5aeL5binKVxcbiAgICB0aGlzLmFsbFZpZGVvU2FtcGxlc0NvdW50ID0gMDsgLy8g6KeG6aKR5oC75pWw5o2u6YePKOWOn+Wni+W4pylcXG5cXG4gICAgdGhpcy5fZmlyc3RBdWRpb1NhbXBsZSA9IG51bGw7XFxuICAgIHRoaXMuX2ZpcnN0VmlkZW9TYW1wbGUgPSBudWxsO1xcblxcbiAgICB0aGlzLmZpbGxlZEF1ZGlvU2FtcGxlcyA9IFtdOyAvLyDooaXlhYXpn7PpopHluKfvvIjvvIlcXG4gICAgdGhpcy5maWxsZWRWaWRlb1NhbXBsZXMgPSBbXTsgLy8g6KGl5YWF6KeG6aKR5bin77yI77yJXFxuICB9XFxuXFxuICBpbml0KCkge1xcbiAgICB0aGlzLmJlZm9yZShSRU1VWF9FVkVOVFMuUkVNVVhfTUVESUEsIHRoaXMuZG9GaXguYmluZCh0aGlzKSk7XFxuICB9XFxuXFxuICByZXNldCgpIHtcXG4gICAgdGhpcy5uZXh0QXVkaW9EdHMgPSAwOyAvLyDmqKHmi5/kuIvkuIDmrrXpn7PpopHmlbDmja7nmoRkdHNcXG4gICAgdGhpcy5uZXh0VmlkZW9EdHMgPSAwOyAvLyDmqKHmi5/kuIvkuIDmrrXop4bpopHmlbDmja7nmoRkdHNcXG5cXG4gICAgdGhpcy5sYXN0QXVkaW9TYW1wbGVzTGVuID0gMDsgLy8g5LiK5LiA5q616Z+z6aKR5pWw5o2u55qE6ZW/5bqmXFxuICAgIHRoaXMubGFzdFZpZGVvU2FtcGxlc0xlbiA9IDA7IC8vIOS4iuS4gOauteinhumikeaVsOaNrueahOmVv+W6plxcblxcbiAgICB0aGlzLmxhc3RWaWRlb0R0cyA9IHVuZGVmaW5lZDsgLy8g5LiK5LiA5q616Z+z6aKR5pWw5o2u55qE6ZW/5bqmXFxuICAgIHRoaXMubGFzdEF1ZGlvRHRzID0gdW5kZWZpbmVkOyAvLyDkuIrkuIDmrrXop4bpopHmlbDmja7nmoTplb/luqZcXG5cXG4gICAgdGhpcy5hbGxBdWRpb1NhbXBsZXNDb3VudCA9IDA7IC8vIOmfs+mikeaAu+aVsOaNrumHjyjljp/lp4vluKcpXFxuICAgIHRoaXMuYWxsVmlkZW9TYW1wbGVzQ291bnQgPSAwOyAvLyDop4bpopHmgLvmlbDmja7ph48o5Y6f5aeL5binKVxcblxcbiAgICB0aGlzLl9maXJzdEF1ZGlvU2FtcGxlID0gbnVsbDtcXG4gICAgdGhpcy5fZmlyc3RWaWRlb1NhbXBsZSA9IG51bGw7XFxuXFxuICAgIHRoaXMuZmlsbGVkQXVkaW9TYW1wbGVzID0gW107IC8vIOihpeWFhemfs+mikeW4p++8iO+8iVxcbiAgICB0aGlzLmZpbGxlZFZpZGVvU2FtcGxlcyA9IFtdOyAvLyDooaXlhYXop4bpopHluKfvvIjvvIlcXG4gIH1cXG5cXG4gIGRvRml4KCkge1xcbiAgICBjb25zdCB7IGlzRmlyc3RBdWRpb1NhbXBsZXMsIGlzRmlyc3RWaWRlb1NhbXBsZXMgfSA9IHRoaXMuZ2V0Rmlyc3RTYW1wbGUoKTtcXG5cXG4gICAgdGhpcy5yZW1vdmVJbnZhbGlkU2FtcGxlcygpO1xcblxcbiAgICB0aGlzLnJlY29yZFNhbXBsZXNDb3VudCgpO1xcblxcbiAgICBpZiAodGhpcy5fZmlyc3RWaWRlb1NhbXBsZSkge1xcbiAgICAgIHRoaXMuZml4UmVmU2FtcGxlRHVyYXRpb24odGhpcy52aWRlb1RyYWNrLm1ldGEsIHRoaXMudmlkZW9UcmFjay5zYW1wbGVzKTtcXG4gICAgfVxcbiAgICBpZiAodGhpcy5fZmlyc3RBdWRpb1NhbXBsZSkge1xcbiAgICAgIHRoaXMuZml4UmVmU2FtcGxlRHVyYXRpb24odGhpcy5hdWRpb1RyYWNrLm1ldGEsIHRoaXMuYXVkaW9UcmFjay5zYW1wbGVzKTtcXG4gICAgfVxcblxcbiAgICB0aGlzLmRvRml4VmlkZW8oaXNGaXJzdFZpZGVvU2FtcGxlcyk7XFxuICAgIHRoaXMuZG9GaXhBdWRpbyhpc0ZpcnN0QXVkaW9TYW1wbGVzKTtcXG4gIH1cXG5cXG4gIGRvRml4VmlkZW8oZmlyc3QpIHtcXG4gICAgbGV0IHsgc2FtcGxlczogdmlkZW9TYW1wbGVzLCBtZXRhIH0gPSB0aGlzLnZpZGVvVHJhY2s7XFxuXFxuICAgIGlmIChtZXRhLmZyYW1lUmF0ZSAmJiBtZXRhLmZyYW1lUmF0ZS5maXhlZCA9PT0gZmFsc2UpIHtcXG4gICAgICByZXR1cm47XFxuICAgIH1cXG5cXG4gICAgaWYgKCF2aWRlb1NhbXBsZXMgfHwgIXZpZGVvU2FtcGxlcy5sZW5ndGggfHwgIXRoaXMuX2ZpcnN0VmlkZW9TYW1wbGUpIHtcXG4gICAgICByZXR1cm47XFxuICAgIH1cXG5cXG4gICAgLy8gY29uc29sZS5sb2coYHZpZGVvIGxhc3RTYW1wbGUsICR7dmlkZW9TYW1wbGVzW3ZpZGVvU2FtcGxlcy5sZW5ndGggLSAxXS5kdHN9YClcXG5cXG4gICAgY29uc3QgZmlyc3RTYW1wbGUgPSB2aWRlb1NhbXBsZXNbMF07XFxuICAgIGNvbnN0IGZpcnN0RHRzID0gZmlyc3RTYW1wbGUuZHRzO1xcblxcbiAgICBjb25zdCBzYW1wbGVzTGVuID0gdmlkZW9TYW1wbGVzLmxlbmd0aDtcXG5cXG4gICAgLy8gc3RlcDEuIOS/ruWkjeS4jmF1ZGlv6aaW5bin5beu6Led5aSq5aSn55qE6Zeu6aKYXFxuICAgIGlmIChmaXJzdCAmJiB0aGlzLl9maXJzdEF1ZGlvU2FtcGxlKSB7XFxuICAgICAgY29uc3QgdmlkZW9GaXJzdER0cyA9IHRoaXMuX2ZpcnN0VmlkZW9TYW1wbGUuZHRzO1xcbiAgICAgIGNvbnN0IGF1ZGlvRmlyc3REdHMgPSB0aGlzLl9maXJzdEF1ZGlvU2FtcGxlLmR0cztcXG4gICAgICBjb25zdCBnYXAgPSB2aWRlb0ZpcnN0RHRzIC0gYXVkaW9GaXJzdER0cztcXG4gICAgICBpZiAoZ2FwID4gMiAqIG1ldGEucmVmU2FtcGxlRHVyYXRpb24pIHtcXG4gICAgICAgIGNvbnN0IGZpbGxDb3VudCA9IE1hdGguZmxvb3IoZ2FwIC8gbWV0YS5yZWZTYW1wbGVEdXJhdGlvbik7XFxuXFxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGZpbGxDb3VudDsgaSsrKSB7XFxuICAgICAgICAgIGNvbnN0IGNsb25lZEZpcnN0U2FtcGxlID0gT2JqZWN0LmFzc2lnbih7fSwgZmlyc3RTYW1wbGUpOyAvLyDop4bpopHlpLTpg6jluKfnvLrlpLHpnIDopoHlpI3liLbnrKzkuIDluKdcXG4gICAgICAgICAgLy8g6YeN5paw6K6h566Xc2FtcGxl55qEZHRz5ZKMcHRzXFxuICAgICAgICAgIGNsb25lZEZpcnN0U2FtcGxlLmR0cyA9IHZpZGVvRmlyc3REdHMgLSAoaSArIDEpICogbWV0YS5yZWZTYW1wbGVEdXJhdGlvbjtcXG4gICAgICAgICAgY2xvbmVkRmlyc3RTYW1wbGUucHRzID0gY2xvbmVkRmlyc3RTYW1wbGUuZHRzICsgY2xvbmVkRmlyc3RTYW1wbGUuY3RzO1xcblxcbiAgICAgICAgICB2aWRlb1NhbXBsZXMudW5zaGlmdChjbG9uZWRGaXJzdFNhbXBsZSk7XFxuXFxuICAgICAgICAgIHRoaXMuZmlsbGVkVmlkZW9TYW1wbGVzLnB1c2goe1xcbiAgICAgICAgICAgIGR0czogY2xvbmVkRmlyc3RTYW1wbGUuZHRzLFxcbiAgICAgICAgICAgIHNpemU6IGNsb25lZEZpcnN0U2FtcGxlLmRhdGEuYnl0ZUxlbmd0aFxcbiAgICAgICAgICB9KTtcXG4gICAgICAgIH1cXG4gICAgICB9XFxuICAgIH1cXG5cXG4gICAgbGV0IGdhcDtcXG4gICAgLy8gc3RlcDIuIOS/ruWkjXNhbXBsZXPmrrXkuYvpl7TnmoTpl7Tot53pl67popjjgIFcXG4gICAgaWYgKHRoaXMubmV4dFZpZGVvRHRzKSB7XFxuICAgICAgLy8gc3RlcDEuIOWkhOeQhnNhbXBsZXPmrrXkuYvpl7TnmoTkuKLluKfmg4XlhrVcXG4gICAgICAvLyDlvZPlj5HnjrBkdXJhdGlvbuW3rui3neWkp+S6jjLluKfml7bov5vooYzooaXluKdcXG4gICAgICBnYXAgPSBmaXJzdER0cyAtIHRoaXMubmV4dFZpZGVvRHRzO1xcbiAgICAgIGNvbnN0IGFic0dhcCA9IE1hdGguYWJzKGdhcCk7XFxuICAgICAgaWYgKGdhcCA+IDIgKiBtZXRhLnJlZlNhbXBsZUR1cmF0aW9uKSB7XFxuICAgICAgICBjb25zdCBmaWxsRnJhbWVDb3VudCA9IE1hdGguZmxvb3IoZ2FwIC8gbWV0YS5yZWZTYW1wbGVEdXJhdGlvbik7XFxuXFxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGZpbGxGcmFtZUNvdW50OyBpKyspIHtcXG4gICAgICAgICAgY29uc3QgY2xvbmVkU2FtcGxlID0gT2JqZWN0LmFzc2lnbih7fSwgdmlkZW9TYW1wbGVzWzBdKTtcXG4gICAgICAgICAgY29uc3QgY29tcHV0ZWQgPSBmaXJzdER0cyAtIChpICsgMSkgKiBtZXRhLnJlZlNhbXBsZUR1cmF0aW9uO1xcblxcbiAgICAgICAgICBjbG9uZWRTYW1wbGUuZHRzID0gY29tcHV0ZWQgPiB0aGlzLm5leHRWaWRlb0R0cyA/IGNvbXB1dGVkIDogdGhpcy5uZXh0VmlkZW9EdHM7IC8vIOihpeeahOesrOS4gOW4p+S4gOWumuimgeaYr25leHRWaWRlb0R0c1xcbiAgICAgICAgICBjbG9uZWRTYW1wbGUucHRzID0gY2xvbmVkU2FtcGxlLmR0cyArIGNsb25lZFNhbXBsZS5jdHM7XFxuXFxuICAgICAgICAgIHRoaXMudmlkZW9UcmFjay5zYW1wbGVzLnVuc2hpZnQoY2xvbmVkU2FtcGxlKTtcXG5cXG4gICAgICAgICAgdGhpcy5maWxsZWRWaWRlb1NhbXBsZXMucHVzaCh7XFxuICAgICAgICAgICAgZHRzOiBjbG9uZWRTYW1wbGUuZHRzLFxcbiAgICAgICAgICAgIHNpemU6IGNsb25lZFNhbXBsZS5kYXRhLmJ5dGVMZW5ndGhcXG4gICAgICAgICAgfSk7XFxuICAgICAgICB9XFxuICAgICAgfSBlbHNlIGlmIChhYnNHYXAgPD0gMTAgJiYgYWJzR2FwID4gMCkge1xcbiAgICAgICAgLy8g5b2T5beu6Led5ZyoKy3kuIDluKfkuYvpl7Tml7blsIbnrKzkuIDluKfnmoRkdHPlvLrooYzlrprkvY3liLDmnJ/mnJvkvY3nva5cXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCfph43lrprkvY3op4bpopHluKdkdHMnLCB2aWRlb1NhbXBsZXNbMF0uZHRzLCB0aGlzLm5leHRWaWRlb0R0cylcXG4gICAgICAgIHZpZGVvU2FtcGxlc1swXS5kdHMgPSB0aGlzLm5leHRWaWRlb0R0cztcXG4gICAgICAgIHZpZGVvU2FtcGxlc1swXS5vcmlnaW5EdHMgPSB2aWRlb1NhbXBsZXNbMF0uZHRzO1xcbiAgICAgICAgdmlkZW9TYW1wbGVzWzBdLmN0cyA9IHZpZGVvU2FtcGxlc1swXS5jdHMgfHwgdmlkZW9TYW1wbGVzWzBdLnB0cyAtIHZpZGVvU2FtcGxlc1swXS5kdHM7XFxuICAgICAgICB2aWRlb1NhbXBsZXNbMF0ucHRzID0gdmlkZW9TYW1wbGVzWzBdLmR0cyArIHZpZGVvU2FtcGxlc1swXS5jdHM7XFxuICAgICAgfVxcbiAgICB9XFxuICAgIGNvbnN0IGxhc3REdHMgPSB2aWRlb1NhbXBsZXNbdmlkZW9TYW1wbGVzLmxlbmd0aCAtIDFdLmR0cztcXG5cXG4gICAgY29uc3QgbGFzdFNhbXBsZUR1cmF0aW9uID0gdmlkZW9TYW1wbGVzLmxlbmd0aCA+PSAyID8gbGFzdER0cyAtIHZpZGVvU2FtcGxlc1t2aWRlb1NhbXBsZXMubGVuZ3RoIC0gMl0uZHRzIDogbWV0YS5yZWZTYW1wbGVEdXJhdGlvbjtcXG5cXG4gICAgdGhpcy5sYXN0VmlkZW9TYW1wbGVzTGVuID0gc2FtcGxlc0xlbjtcXG4gICAgdGhpcy5uZXh0VmlkZW9EdHMgPSBsYXN0RHRzICsgbGFzdFNhbXBsZUR1cmF0aW9uO1xcbiAgICB0aGlzLmxhc3RWaWRlb0R0cyA9IGxhc3REdHM7XFxuXFxuICAgIC8vIHN0ZXAyLiDkv67lpI1zYW1wbGXmrrXkuYvlhoXnmoTpl7Tot53pl67pophcXG4gICAgLy8gc3RlcDMuIOS/ruWkjXNhbXBsZXPmrrXlhoXpg6jnmoRkdHPlvILluLjpl67pophcXG4gICAgZm9yIChsZXQgaSA9IDAsIGxlbiA9IHZpZGVvU2FtcGxlcy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xcbiAgICAgIGNvbnN0IGN1cnJlbnQgPSB2aWRlb1NhbXBsZXNbaV07XFxuICAgICAgY29uc3QgbmV4dCA9IHZpZGVvU2FtcGxlc1tpICsgMV07XFxuXFxuICAgICAgaWYgKCFuZXh0KSB7XFxuICAgICAgICBicmVhaztcXG4gICAgICB9XFxuXFxuICAgICAgY29uc3QgZHVyYXRpb24gPSBuZXh0LmR0cyAtIGN1cnJlbnQuZHRzO1xcblxcbiAgICAgIGlmIChkdXJhdGlvbiA+IDIgKiBtZXRhLnJlZlNhbXBsZUR1cmF0aW9uKSB7XFxuICAgICAgICAvLyDkuKTluKfkuYvpl7Tpl7TpmpTlpKrlpKfvvIzpnIDopoHooaXnqbrnmb3luKdcXG4gICAgICAgIGxldCBmaWxsRnJhbWVDb3VudCA9IE1hdGguZmxvb3IoZHVyYXRpb24gLyBtZXRhLnJlZlNhbXBsZUR1cmF0aW9uKTtcXG5cXG4gICAgICAgIGxldCBmaWxsRnJhbWVJZHggPSAwO1xcbiAgICAgICAgd2hpbGUgKGZpbGxGcmFtZUlkeCA8IGZpbGxGcmFtZUNvdW50KSB7XFxuICAgICAgICAgIGNvbnN0IGZpbGxGcmFtZSA9IE9iamVjdC5hc3NpZ24oe30sIG5leHQpO1xcbiAgICAgICAgICBmaWxsRnJhbWUuZHRzID0gY3VycmVudC5kdHMgKyAoZmlsbEZyYW1lSWR4ICsgMSkgKiBtZXRhLnJlZlNhbXBsZUR1cmF0aW9uO1xcbiAgICAgICAgICBmaWxsRnJhbWUucHRzID0gZmlsbEZyYW1lLmR0cyArIGZpbGxGcmFtZS5jdHM7XFxuICAgICAgICAgIGlmIChmaWxsRnJhbWUgPCBuZXh0LmR0cykge1xcbiAgICAgICAgICAgIHZpZGVvU2FtcGxlcy5zcGxpY2UoaSwgMCwgZmlsbEZyYW1lKTtcXG5cXG4gICAgICAgICAgICB0aGlzLmZpbGxlZFZpZGVvU2FtcGxlcy5wdXNoKHtcXG4gICAgICAgICAgICAgIGR0czogZmlsbEZyYW1lLmR0cyxcXG4gICAgICAgICAgICAgIHNpemU6IGZpbGxGcmFtZS5kYXRhLmJ5dGVMZW5ndGhcXG4gICAgICAgICAgICB9KTtcXG4gICAgICAgICAgfVxcblxcbiAgICAgICAgICBmaWxsRnJhbWVJZHgrKztcXG4gICAgICAgICAgaSsrO1xcbiAgICAgICAgfVxcbiAgICAgIH1cXG4gICAgfVxcblxcbiAgICB0aGlzLnZpZGVvVHJhY2suc2FtcGxlcyA9IHZpZGVvU2FtcGxlcztcXG4gIH1cXG5cXG4gIGRvRml4QXVkaW8oZmlyc3QpIHtcXG4gICAgbGV0IHsgc2FtcGxlczogYXVkaW9TYW1wbGVzLCBtZXRhIH0gPSB0aGlzLmF1ZGlvVHJhY2s7XFxuXFxuICAgIGlmICghYXVkaW9TYW1wbGVzIHx8ICFhdWRpb1NhbXBsZXMubGVuZ3RoKSB7XFxuICAgICAgcmV0dXJuO1xcbiAgICB9XFxuICAgIC8vIGNvbnNvbGUubG9nKGBhdWRpbyBsYXN0U2FtcGxlLCAke2F1ZGlvU2FtcGxlc1thdWRpb1NhbXBsZXMubGVuZ3RoIC0gMV0uZHRzfWApXFxuXFxuICAgIGNvbnN0IHNhbXBsZXNMZW4gPSBhdWRpb1NhbXBsZXMubGVuZ3RoO1xcbiAgICBjb25zdCBzaWxlbnRGcmFtZSA9IF9hYWNIZWxwZXIyLmRlZmF1bHQuZ2V0U2lsZW50RnJhbWUobWV0YS5jb2RlYywgbWV0YS5jaGFubmVsQ291bnQpO1xcblxcbiAgICBjb25zdCBmaXJzdFNhbXBsZSA9IHRoaXMuX2ZpcnN0QXVkaW9TYW1wbGU7XFxuXFxuICAgIC8vIOWvuWF1ZGlvU2FtcGxlc+aMieeFp2R0c+WBmuaOkuW6j1xcbiAgICBhdWRpb1NhbXBsZXMgPSBDb21wYXRpYmlsaXR5LnNvcnRBdWRpb1NhbXBsZXMoYXVkaW9TYW1wbGVzKTtcXG5cXG4gICAgLy8gc3RlcDAuIOmmluW4p+S4jnZpZGVv6aaW5bin6Ze06Led5aSn55qE6Zeu6aKYXFxuICAgIGlmICh0aGlzLl9maXJzdFZpZGVvU2FtcGxlICYmIGZpcnN0KSB7XFxuICAgICAgY29uc3QgdmlkZW9GaXJzdFB0cyA9IHRoaXMuX2ZpcnN0VmlkZW9TYW1wbGUucHRzID8gdGhpcy5fZmlyc3RWaWRlb1NhbXBsZS5wdHMgOiB0aGlzLl9maXJzdFZpZGVvU2FtcGxlLmR0cyArIHRoaXMuX2ZpcnN0VmlkZW9TYW1wbGUuY3RzO1xcblxcbiAgICAgIGlmIChmaXJzdFNhbXBsZS5kdHMgLSB2aWRlb0ZpcnN0UHRzID4gbWV0YS5yZWZTYW1wbGVEdXJhdGlvbikge1xcbiAgICAgICAgY29uc3Qgc2lsZW50U2FtcGxlQ291bnQgPSBNYXRoLmZsb29yKChmaXJzdFNhbXBsZS5kdHMgLSB2aWRlb0ZpcnN0UHRzKSAvIG1ldGEucmVmU2FtcGxlRHVyYXRpb24pO1xcblxcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzaWxlbnRTYW1wbGVDb3VudDsgaSsrKSB7XFxuICAgICAgICAgIGNvbnN0IHNpbGVudFNhbXBsZSA9IHtcXG4gICAgICAgICAgICBkYXRhOiBzaWxlbnRGcmFtZSxcXG4gICAgICAgICAgICBkYXRhc2l6ZTogc2lsZW50RnJhbWUuYnl0ZUxlbmd0aCxcXG4gICAgICAgICAgICBkdHM6IGZpcnN0U2FtcGxlLmR0cyAtIChpICsgMSkgKiBtZXRhLnJlZlNhbXBsZUR1cmF0aW9uLFxcbiAgICAgICAgICAgIGZpbHRlcmVkOiAwXFxuICAgICAgICAgIH07XFxuXFxuICAgICAgICAgIGF1ZGlvU2FtcGxlcy51bnNoaWZ0KHNpbGVudFNhbXBsZSk7XFxuXFxuICAgICAgICAgIHRoaXMuZmlsbGVkQXVkaW9TYW1wbGVzLnB1c2goe1xcbiAgICAgICAgICAgIGR0czogc2lsZW50U2FtcGxlLmR0cyxcXG4gICAgICAgICAgICBzaXplOiBzaWxlbnRTYW1wbGUuZGF0YS5ieXRlTGVuZ3RoXFxuICAgICAgICAgIH0pO1xcbiAgICAgICAgfVxcbiAgICAgIH1cXG4gICAgfVxcblxcbiAgICBsZXQgZ2FwO1xcbiAgICBjb25zdCBmaXJzdER0cyA9IGF1ZGlvU2FtcGxlc1swXS5kdHM7XFxuXFxuICAgIGlmICh0aGlzLm5leHRBdWRpb0R0cykge1xcbiAgICAgIC8vIHN0ZXAxLiDlpITnkIZzYW1wbGVz5q615LmL6Ze055qE5Lii5bin5oOF5Ya1XFxuICAgICAgLy8g5b2T5Y+R546wZHVyYXRpb27lt67ot53lpKfkuo4x5bin5pe26L+b6KGM6KGl5binXFxuICAgICAgZ2FwID0gZmlyc3REdHMgLSB0aGlzLm5leHRBdWRpb0R0cztcXG4gICAgICBjb25zdCBhYnNHYXAgPSBNYXRoLmFicyhnYXApO1xcblxcbiAgICAgIGlmIChhYnNHYXAgPiBtZXRhLnJlZlNhbXBsZUR1cmF0aW9uICYmIHNhbXBsZXNMZW4gPT09IDEgJiYgdGhpcy5sYXN0QXVkaW9TYW1wbGVzTGVuID09PSAxKSB7XFxuICAgICAgICBtZXRhLnJlZlNhbXBsZUR1cmF0aW9uRml4ZWQgPSB1bmRlZmluZWQ7XFxuICAgICAgfVxcblxcbiAgICAgIGlmIChnYXAgPiAyICogbWV0YS5yZWZTYW1wbGVEdXJhdGlvbikge1xcbiAgICAgICAgaWYgKHNhbXBsZXNMZW4gPT09IDEgJiYgdGhpcy5sYXN0QXVkaW9TYW1wbGVzTGVuID09PSAxKSB7XFxuICAgICAgICAgIC8vIOWmguaenHNhbXBsZeeahGxlbmd0aOS4gOebtOaYrzHvvIzogIzkuJTkuIDnm7TkuI3nrKblkIhyZWZTYW1wbGVEdXJhdGlvbu+8jOmcgOimgeWKqOaAgeS/ruaUuXJlZlNhbXBsZUR1cmF0aW9uXFxuICAgICAgICAgIG1ldGEucmVmU2FtcGxlRHVyYXRpb25GaXhlZCA9IG1ldGEucmVmU2FtcGxlRHVyYXRpb25GaXhlZCAhPT0gdW5kZWZpbmVkID8gbWV0YS5yZWZTYW1wbGVEdXJhdGlvbkZpeGVkICsgZ2FwIDogbWV0YS5yZWZTYW1wbGVEdXJhdGlvbiArIGdhcDtcXG4gICAgICAgIH0gZWxzZSB7XFxuICAgICAgICAgIGNvbnN0IHNpbGVudEZyYW1lQ291bnQgPSBNYXRoLmZsb29yKGdhcCAvIG1ldGEucmVmU2FtcGxlRHVyYXRpb24pO1xcblxcbiAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNpbGVudEZyYW1lQ291bnQ7IGkrKykge1xcbiAgICAgICAgICAgIGNvbnN0IGNvbXB1dGVkID0gZmlyc3REdHMgLSAoaSArIDEpICogbWV0YS5yZWZTYW1wbGVEdXJhdGlvbjtcXG4gICAgICAgICAgICBjb25zdCBzaWxlbnRTYW1wbGUgPSBPYmplY3QuYXNzaWduKHt9LCBhdWRpb1NhbXBsZXNbMF0sIHtcXG4gICAgICAgICAgICAgIGR0czogY29tcHV0ZWQgPiB0aGlzLm5leHRBdWRpb0R0cyA/IGNvbXB1dGVkIDogdGhpcy5uZXh0QXVkaW9EdHNcXG4gICAgICAgICAgICB9KTtcXG5cXG4gICAgICAgICAgICB0aGlzLmZpbGxlZEF1ZGlvU2FtcGxlcy5wdXNoKHtcXG4gICAgICAgICAgICAgIGR0czogc2lsZW50U2FtcGxlLmR0cyxcXG4gICAgICAgICAgICAgIHNpemU6IHNpbGVudFNhbXBsZS5kYXRhLmJ5dGVMZW5ndGhcXG4gICAgICAgICAgICB9KTtcXG4gICAgICAgICAgICB0aGlzLmF1ZGlvVHJhY2suc2FtcGxlcy51bnNoaWZ0KHNpbGVudFNhbXBsZSk7XFxuICAgICAgICAgIH1cXG4gICAgICAgIH1cXG4gICAgICB9IGVsc2UgaWYgKGFic0dhcCA8PSAxMCAmJiBhYnNHYXAgPiAwKSB7XFxuICAgICAgICAvLyDlvZPlt67ot53mr5TovoPlsI/nmoTml7blgJnlsIbpn7PpopHluKfph43lrprkvY1cXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCfph43lrprkvY3pn7PpopHluKdkdHMnLCBhdWRpb1NhbXBsZXNbMF0uZHRzLCB0aGlzLm5leHRBdWRpb0R0cylcXG4gICAgICAgIGF1ZGlvU2FtcGxlc1swXS5kdHMgPSB0aGlzLm5leHRBdWRpb0R0cztcXG4gICAgICAgIGF1ZGlvU2FtcGxlc1swXS5wdHMgPSB0aGlzLm5leHRBdWRpb0R0cztcXG4gICAgICB9XFxuICAgIH1cXG4gICAgY29uc3QgbGFzdER0cyA9IGF1ZGlvU2FtcGxlc1thdWRpb1NhbXBsZXMubGVuZ3RoIC0gMV0uZHRzO1xcbiAgICBjb25zdCBsYXN0U2FtcGxlRHVyYXRpb24gPSBhdWRpb1NhbXBsZXMubGVuZ3RoID49IDIgPyBsYXN0RHRzIC0gYXVkaW9TYW1wbGVzW2F1ZGlvU2FtcGxlcy5sZW5ndGggLSAyXS5kdHMgOiBtZXRhLnJlZlNhbXBsZUR1cmF0aW9uO1xcblxcbiAgICB0aGlzLmxhc3RBdWRpb1NhbXBsZXNMZW4gPSBzYW1wbGVzTGVuO1xcbiAgICB0aGlzLm5leHRBdWRpb0R0cyA9IG1ldGEucmVmU2FtcGxlRHVyYXRpb25GaXhlZCA/IGxhc3REdHMgKyBtZXRhLnJlZlNhbXBsZUR1cmF0aW9uRml4ZWQgOiBsYXN0RHRzICsgbGFzdFNhbXBsZUR1cmF0aW9uO1xcbiAgICB0aGlzLmxhc3RBdWRpb0R0cyA9IGxhc3REdHM7XFxuXFxuICAgIC8vIHN0ZXAzLiDkv67lpI1zYW1wbGVz5q615YaF6YOo55qEZHRz5byC5bi46Zeu6aKYXFxuICAgIGZvciAobGV0IGkgPSAwLCBsZW4gPSBhdWRpb1NhbXBsZXMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcXG4gICAgICBjb25zdCBjdXJyZW50ID0gYXVkaW9TYW1wbGVzW2ldO1xcbiAgICAgIGNvbnN0IG5leHQgPSBhdWRpb1NhbXBsZXNbaSArIDFdO1xcblxcbiAgICAgIGlmICghbmV4dCkge1xcbiAgICAgICAgYnJlYWs7XFxuICAgICAgfVxcblxcbiAgICAgIGNvbnN0IGR1cmF0aW9uID0gbmV4dC5kdHMgLSBjdXJyZW50LmR0cztcXG4gICAgICBhdWRpb1NhbXBsZXNbaV0uZHVyYXRpb24gPSBkdXJhdGlvbjtcXG4gICAgICAvKlxcbiAgICAgIGlmIChkdXJhdGlvbiA+ICgyICogbWV0YS5yZWZTYW1wbGVEdXJhdGlvbikpIHtcXG4gICAgICAgIC8vIOS4pOW4p+S5i+mXtOmXtOmalOWkquWkp++8jOmcgOimgeihpeepuueZveW4p1xcbiAgICAgICAgLyoqXFxuICAgICAgICBsZXQgc2lsZW50RnJhbWVDb3VudCA9IE1hdGguZmxvb3IoZHVyYXRpb24gLyBtZXRhLnJlZlNhbXBsZUR1cmF0aW9uKVxcbiAgICAgICAgbGV0IGZyYW1lSWR4ID0gMFxcbiAgICAgICAgIHdoaWxlIChmcmFtZUlkeCA8IHNpbGVudEZyYW1lQ291bnQpIHtcXG4gICAgICAgICAgY29uc3Qgc2lsZW50U2FtcGxlID0ge1xcbiAgICAgICAgICAgIGRhdGE6IHNpbGVudEZyYW1lLFxcbiAgICAgICAgICAgIGRhdGFzaXplOiBzaWxlbnRGcmFtZS5ieXRlTGVuZ3RoLFxcbiAgICAgICAgICAgIGR0czogY3VycmVudC5kdHMgKyAoZnJhbWVJZHggKyAxKSAqIG1ldGEucmVmU2FtcGxlRHVyYXRpb24sXFxuICAgICAgICAgICAgZmlsdGVyZWQ6IDAsXFxuICAgICAgICAgICAgaXNTaWxlbnQ6IHRydWVcXG4gICAgICAgICAgfVxcbiAgICAgICAgICAgYXVkaW9TYW1wbGVzLnNwbGljZShpLCAwLCBzaWxlbnRTYW1wbGUpXFxuICAgICAgICAgICB0aGlzLmZpbGxlZEF1ZGlvU2FtcGxlcy5wdXNoKHtcXG4gICAgICAgICAgICBkdHM6IHNpbGVudFNhbXBsZS5kdHMsXFxuICAgICAgICAgICAgc2l6ZTogc2lsZW50U2FtcGxlLmRhdGEuYnl0ZUxlbmd0aFxcbiAgICAgICAgICB9KVxcbiAgICAgICAgICAgZnJhbWVJZHgrK1xcbiAgICAgICAgICBpKysgLy8g5LiN5a+56Z2Z6Z+z5bin5YGa5q+U6L6DXFxuICAgICAgICB9XFxuICAgICAgfSAqL1xcbiAgICB9XFxuXFxuICAgIHRoaXMuYXVkaW9UcmFjay5zYW1wbGVzID0gQ29tcGF0aWJpbGl0eS5zb3J0QXVkaW9TYW1wbGVzKGF1ZGlvU2FtcGxlcyk7XFxuICB9XFxuXFxuICBnZXRGaXJzdFNhbXBsZSgpIHtcXG4gICAgLy8g6I635Y+WdmlkZW/lkoxhdWRpb+eahOmmluW4p+aVsOaNrlxcbiAgICBsZXQgeyBzYW1wbGVzOiB2aWRlb1NhbXBsZXMgfSA9IHRoaXMudmlkZW9UcmFjaztcXG4gICAgbGV0IHsgc2FtcGxlczogYXVkaW9TYW1wbGVzIH0gPSB0aGlzLmF1ZGlvVHJhY2s7XFxuXFxuICAgIGxldCBpc0ZpcnN0VmlkZW9TYW1wbGVzID0gZmFsc2U7XFxuICAgIGxldCBpc0ZpcnN0QXVkaW9TYW1wbGVzID0gZmFsc2U7XFxuXFxuICAgIGlmICghdGhpcy5fZmlyc3RWaWRlb1NhbXBsZSAmJiB2aWRlb1NhbXBsZXMubGVuZ3RoKSB7XFxuICAgICAgdGhpcy5fZmlyc3RWaWRlb1NhbXBsZSA9IENvbXBhdGliaWxpdHkuZmluZEZpcnN0VmlkZW9TYW1wbGUodmlkZW9TYW1wbGVzKTtcXG4gICAgICBpc0ZpcnN0VmlkZW9TYW1wbGVzID0gdHJ1ZTtcXG4gICAgfVxcblxcbiAgICBpZiAoIXRoaXMuX2ZpcnN0QXVkaW9TYW1wbGUgJiYgYXVkaW9TYW1wbGVzLmxlbmd0aCkge1xcbiAgICAgIHRoaXMuX2ZpcnN0QXVkaW9TYW1wbGUgPSBDb21wYXRpYmlsaXR5LmZpbmRGaXJzdEF1ZGlvU2FtcGxlKGF1ZGlvU2FtcGxlcyk7IC8vIOWvu+aJvmR0c+acgOWwj+eahOW4p+S9nOS4uummluS4qumfs+mikeW4p1xcbiAgICAgIGlzRmlyc3RBdWRpb1NhbXBsZXMgPSB0cnVlO1xcbiAgICB9XFxuXFxuICAgIHJldHVybiB7XFxuICAgICAgaXNGaXJzdFZpZGVvU2FtcGxlcyxcXG4gICAgICBpc0ZpcnN0QXVkaW9TYW1wbGVzXFxuICAgIH07XFxuICB9XFxuXFxuICAvKipcXG4gICAqIOWcqOayoeaciXJlZlNhbXBsZUR1cmF0aW9u55qE6Zeu6aKY5rWB5Lit77yMXFxuICAgKi9cXG4gIGZpeFJlZlNhbXBsZUR1cmF0aW9uKG1ldGEsIHNhbXBsZXMpIHtcXG4gICAgY29uc3QgaXNWaWRlbyA9IG1ldGEudHlwZSA9PT0gJ3ZpZGVvJztcXG4gICAgY29uc3QgYWxsU2FtcGxlc0NvdW50ID0gaXNWaWRlbyA/IHRoaXMuYWxsVmlkZW9TYW1wbGVzQ291bnQgOiB0aGlzLmFsbEF1ZGlvU2FtcGxlc0NvdW50O1xcbiAgICBjb25zdCBmaXJzdER0cyA9IGlzVmlkZW8gPyB0aGlzLl9maXJzdFZpZGVvU2FtcGxlLmR0cyA6IHRoaXMuX2ZpcnN0QXVkaW9TYW1wbGUuZHRzO1xcbiAgICBjb25zdCBmaWxsZWRTYW1wbGVzQ291bnQgPSBpc1ZpZGVvID8gdGhpcy5maWxsZWRWaWRlb1NhbXBsZXMubGVuZ3RoIDogdGhpcy5maWxsZWRBdWRpb1NhbXBsZXMubGVuZ3RoO1xcblxcbiAgICBpZiAoIW1ldGEucmVmU2FtcGxlRHVyYXRpb24gfHwgbWV0YS5yZWZTYW1wbGVEdXJhdGlvbiA8PSAwIHx8IE51bWJlci5pc05hTihtZXRhLnJlZlNhbXBsZUR1cmF0aW9uKSkge1xcbiAgICAgIGlmIChzYW1wbGVzLmxlbmd0aCA+PSAxKSB7XFxuICAgICAgICBjb25zdCBsYXN0RHRzID0gc2FtcGxlc1tzYW1wbGVzLmxlbmd0aCAtIDFdLmR0cztcXG5cXG4gICAgICAgIG1ldGEucmVmU2FtcGxlRHVyYXRpb24gPSBNYXRoLmZsb29yKChsYXN0RHRzIC0gZmlyc3REdHMpIC8gKGFsbFNhbXBsZXNDb3VudCArIGZpbGxlZFNhbXBsZXNDb3VudCAtIDEpKTsgLy8g5bCGcmVmU2FtcGxlRHVyYXRpb27ph43nva7kuLrorqHnrpflkI7nmoTlubPlnYflgLxcXG4gICAgICB9XFxuICAgIH0gZWxzZSBpZiAobWV0YS5yZWZTYW1wbGVEdXJhdGlvbikge1xcbiAgICAgIGlmIChzYW1wbGVzLmxlbmd0aCA+PSAzKSB7XFxuICAgICAgICBjb25zdCBsYXN0RHRzID0gc2FtcGxlc1tzYW1wbGVzLmxlbmd0aCAtIDFdLmR0cztcXG4gICAgICAgIGNvbnN0IGZpcnN0RHRzID0gc2FtcGxlc1swXS5kdHM7XFxuICAgICAgICBjb25zdCBkdXJhdGlvbkF2ZyA9IChsYXN0RHRzIC0gZmlyc3REdHMpIC8gc2FtcGxlcy5sZW5ndGg7XFxuXFxuICAgICAgICBtZXRhLnJlZlNhbXBsZUR1cmF0aW9uID0gTWF0aC5hYnMobWV0YS5yZWZTYW1wbGVEdXJhdGlvbiAtIGR1cmF0aW9uQXZnKSA8PSBtZXRhLnJlZlNhbXBsZUR1cmF0aW9uID8gbWV0YS5yZWZTYW1wbGVEdXJhdGlvbiA6IGR1cmF0aW9uQXZnOyAvLyDlsIZyZWZTYW1wbGVEdXJhdGlvbumHjee9ruS4uuiuoeeul+WQjueahOW5s+Wdh+WAvFxcbiAgICAgIH1cXG4gICAgfVxcbiAgfVxcblxcbiAgLyoqXFxuICAgKiDorrDlvZXmiKrmraLnm67liY3kuIDlhbHmkq3mlL7kuoblpJrlsJHluKdcXG4gICAqL1xcbiAgcmVjb3JkU2FtcGxlc0NvdW50KCkge1xcbiAgICBjb25zdCB7IGF1ZGlvVHJhY2ssIHZpZGVvVHJhY2sgfSA9IHRoaXM7XFxuXFxuICAgIHRoaXMuYWxsQXVkaW9TYW1wbGVzQ291bnQgKz0gYXVkaW9UcmFjay5zYW1wbGVzLmxlbmd0aDtcXG4gICAgdGhpcy5hbGxWaWRlb1NhbXBsZXNDb3VudCArPSB2aWRlb1RyYWNrLnNhbXBsZXMubGVuZ3RoO1xcbiAgfVxcblxcbiAgLyoqXFxuICAgKiDljrvpmaTkuI3lkIjms5XnmoTluKfvvIjlgJLpgIDjgIHph43lpI3luKfvvIlcXG4gICAqL1xcbiAgcmVtb3ZlSW52YWxpZFNhbXBsZXMoKSB7XFxuICAgIGNvbnN0IHsgX2ZpcnN0VmlkZW9TYW1wbGUsIF9maXJzdEF1ZGlvU2FtcGxlIH0gPSB0aGlzO1xcblxcbiAgICB0aGlzLmF1ZGlvVHJhY2suc2FtcGxlcyA9IHRoaXMuYXVkaW9UcmFjay5zYW1wbGVzLmZpbHRlcihzYW1wbGUgPT4ge1xcbiAgICAgIHJldHVybiBzYW1wbGUuZHRzID49IF9maXJzdEF1ZGlvU2FtcGxlLmR0cyAmJiAodGhpcy5sYXN0QXVkaW9EdHMgPT09IHVuZGVmaW5lZCB8fCBzYW1wbGUuZHRzID4gdGhpcy5sYXN0QXVkaW9EdHMpO1xcbiAgICB9KTtcXG5cXG4gICAgdGhpcy52aWRlb1RyYWNrLnNhbXBsZXMgPSB0aGlzLnZpZGVvVHJhY2suc2FtcGxlcy5maWx0ZXIoc2FtcGxlID0+IHtcXG4gICAgICByZXR1cm4gc2FtcGxlLmR0cyA+PSBfZmlyc3RWaWRlb1NhbXBsZS5kdHMgJiYgKHRoaXMubGFzdFZpZGVvRHRzID09PSB1bmRlZmluZWQgfHwgc2FtcGxlLmR0cyA+IHRoaXMubGFzdFZpZGVvRHRzKTtcXG4gICAgfSk7XFxuICB9XFxuXFxuICBzdGF0aWMgc29ydEF1ZGlvU2FtcGxlcyhzYW1wbGVzKSB7XFxuICAgIGlmIChzYW1wbGVzLmxlbmd0aCA9PT0gMSkge1xcbiAgICAgIHJldHVybiBzYW1wbGVzO1xcbiAgICB9XFxuXFxuICAgIHJldHVybiBzYW1wbGVzLnNvcnQoKGEsIGIpID0+IHtcXG4gICAgICByZXR1cm4gYS5kdHMgLSBiLmR0cztcXG4gICAgfSk7XFxuICB9XFxuXFxuICAvKipcXG4gICAqIOWvu+aJvmR0c+acgOWwj+eahHNhbXBsZVxcbiAgICogQHBhcmFtIHNhbXBsZXNcXG4gICAqL1xcbiAgc3RhdGljIGZpbmRGaXJzdEF1ZGlvU2FtcGxlKHNhbXBsZXMpIHtcXG4gICAgaWYgKCFzYW1wbGVzIHx8IHNhbXBsZXMubGVuZ3RoID09PSAwKSB7XFxuICAgICAgcmV0dXJuIG51bGw7XFxuICAgIH1cXG5cXG4gICAgcmV0dXJuIENvbXBhdGliaWxpdHkuc29ydEF1ZGlvU2FtcGxlcyhzYW1wbGVzKVswXTtcXG4gIH1cXG5cXG4gIHN0YXRpYyBmaW5kRmlyc3RWaWRlb1NhbXBsZShzYW1wbGVzKSB7XFxuICAgIGlmICghc2FtcGxlcy5sZW5ndGgpIHtcXG4gICAgICByZXR1cm4gbnVsbDtcXG4gICAgfVxcblxcbiAgICBjb25zdCBzb3J0ZWQgPSBzYW1wbGVzLnNvcnQoKGEsIGIpID0+IHtcXG4gICAgICByZXR1cm4gYS5kdHMgLSBiLmR0cztcXG4gICAgfSk7XFxuXFxuICAgIGZvciAobGV0IGkgPSAwLCBsZW4gPSBzb3J0ZWQubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcXG4gICAgICBpZiAoc29ydGVkW2ldLmlzS2V5ZnJhbWUpIHtcXG4gICAgICAgIHJldHVybiBzb3J0ZWRbaV07XFxuICAgICAgfVxcbiAgICB9XFxuICB9XFxuXFxuICBnZXQgdHJhY2tzKCkge1xcbiAgICByZXR1cm4gdGhpcy5fY29udGV4dC5nZXRJbnN0YW5jZSgnVFJBQ0tTJyk7XFxuICB9XFxuXFxuICBnZXQgYXVkaW9UcmFjaygpIHtcXG4gICAgaWYgKHRoaXMudHJhY2tzKSB7XFxuICAgICAgcmV0dXJuIHRoaXMudHJhY2tzLmF1ZGlvVHJhY2s7XFxuICAgIH1cXG4gICAgcmV0dXJuIG51bGw7XFxuICB9XFxuXFxuICBnZXQgdmlkZW9UcmFjaygpIHtcXG4gICAgaWYgKHRoaXMudHJhY2tzKSB7XFxuICAgICAgcmV0dXJuIHRoaXMudHJhY2tzLnZpZGVvVHJhY2s7XFxuICAgIH1cXG4gICAgcmV0dXJuIG51bGw7XFxuICB9XFxufVxcbmV4cG9ydHMuZGVmYXVsdCA9IENvbXBhdGliaWxpdHk7XFxuXFxuLy8jIHNvdXJjZVVSTD13ZWJwYWNrOi8veGdwbGF5ZXItZmx2Ly4uL3hncGxheWVyLWNvZGVjL3NyYy9jb21wYXRpYmlsaXR5LmpzP1wiKX0sXCIuLi94Z3BsYXllci1jb2RlYy9zcmMvaDI2NC9uYWx1bml0L2dvbG9tYi5qc1wiOlxuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuLi94Z3BsYXllci1jb2RlYy9zcmMvaDI2NC9uYWx1bml0L2dvbG9tYi5qcyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBubyBzdGF0aWMgZXhwb3J0cyBmb3VuZCAqL2Z1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pe1widXNlIHN0cmljdFwiO2V2YWwoXCJcXG5cXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXFxcIl9fZXNNb2R1bGVcXFwiLCB7XFxuICB2YWx1ZTogdHJ1ZVxcbn0pO1xcbmNsYXNzIEdvbG9tYiB7XFxuICBjb25zdHJ1Y3Rvcih1aW50OGFycmF5KSB7XFxuICAgIHRoaXMuVEFHID0gJ0dvbG9tYic7XFxuICAgIHRoaXMuX2J1ZmZlciA9IHVpbnQ4YXJyYXk7XFxuICAgIHRoaXMuX2J1ZmZlckluZGV4ID0gMDtcXG4gICAgdGhpcy5fdG90YWxCeXRlcyA9IHVpbnQ4YXJyYXkuYnl0ZUxlbmd0aDtcXG4gICAgdGhpcy5fdG90YWxCaXRzID0gdWludDhhcnJheS5ieXRlTGVuZ3RoICogODtcXG4gICAgdGhpcy5fY3VycmVudFdvcmQgPSAwO1xcbiAgICB0aGlzLl9jdXJyZW50V29yZEJpdHNMZWZ0ID0gMDtcXG4gIH1cXG5cXG4gIGRlc3Ryb3koKSB7XFxuICAgIHRoaXMuX2J1ZmZlciA9IG51bGw7XFxuICB9XFxuXFxuICBfZmlsbEN1cnJlbnRXb3JkKCkge1xcbiAgICBsZXQgYnVmZmVyQnl0ZXNMZWZ0ID0gdGhpcy5fdG90YWxCeXRlcyAtIHRoaXMuX2J1ZmZlckluZGV4O1xcbiAgICBpZiAoYnVmZmVyQnl0ZXNMZWZ0IDw9IDApIHtcXG4gICAgICAvLyBUT0RPIOW8guW4uOWkhOeQhlxcbiAgICB9XFxuXFxuICAgIGxldCBieXRlc1JlYWQgPSBNYXRoLm1pbig0LCBidWZmZXJCeXRlc0xlZnQpO1xcbiAgICBsZXQgd29yZCA9IG5ldyBVaW50OEFycmF5KDQpO1xcbiAgICB3b3JkLnNldCh0aGlzLl9idWZmZXIuc3ViYXJyYXkodGhpcy5fYnVmZmVySW5kZXgsIHRoaXMuX2J1ZmZlckluZGV4ICsgYnl0ZXNSZWFkKSk7XFxuICAgIHRoaXMuX2N1cnJlbnRXb3JkID0gbmV3IERhdGFWaWV3KHdvcmQuYnVmZmVyKS5nZXRVaW50MzIoMCwgZmFsc2UpO1xcblxcbiAgICB0aGlzLl9idWZmZXJJbmRleCArPSBieXRlc1JlYWQ7XFxuICAgIHRoaXMuX2N1cnJlbnRXb3JkQml0c0xlZnQgPSBieXRlc1JlYWQgKiA4O1xcbiAgfVxcblxcbiAgcmVhZEJpdHMoYml0cykge1xcbiAgICBpZiAoYml0cyA+IDMyKSB7XFxuICAgICAgLy8gVE9ET1xcbiAgICB9XFxuXFxuICAgIGlmIChiaXRzIDw9IHRoaXMuX2N1cnJlbnRXb3JkQml0c0xlZnQpIHtcXG4gICAgICBsZXQgcmVzdWx0ID0gdGhpcy5fY3VycmVudFdvcmQgPj4+IDMyIC0gYml0cztcXG4gICAgICB0aGlzLl9jdXJyZW50V29yZCA8PD0gYml0cztcXG4gICAgICB0aGlzLl9jdXJyZW50V29yZEJpdHNMZWZ0IC09IGJpdHM7XFxuICAgICAgcmV0dXJuIHJlc3VsdDtcXG4gICAgfVxcblxcbiAgICBsZXQgcmVzdWx0ID0gdGhpcy5fY3VycmVudFdvcmRCaXRzTGVmdCA/IHRoaXMuX2N1cnJlbnRXb3JkIDogMDtcXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lXFxuICAgIHJlc3VsdCA+Pj4gMzIgLSB0aGlzLl9jdXJyZW50V29yZEJpdHNMZWZ0O1xcbiAgICBsZXQgYml0c05lZWRMZWZ0ID0gYml0cyAtIHRoaXMuX2N1cnJlbnRXb3JkQml0c0xlZnQ7XFxuXFxuICAgIHRoaXMuX2ZpbGxDdXJyZW50V29yZCgpO1xcbiAgICBsZXQgYml0c1JlYWROZXh0ID0gTWF0aC5taW4oYml0c05lZWRMZWZ0LCB0aGlzLl9jdXJyZW50V29yZEJpdHNMZWZ0KTtcXG5cXG4gICAgbGV0IHJlc3VsdDIgPSB0aGlzLl9jdXJyZW50V29yZCA+Pj4gMzIgLSBiaXRzUmVhZE5leHQ7XFxuICAgIHRoaXMuX2N1cnJlbnRXb3JkIDw8PSBiaXRzUmVhZE5leHQ7XFxuICAgIHRoaXMuX2N1cnJlbnRXb3JkQml0c0xlZnQgLT0gYml0c1JlYWROZXh0O1xcblxcbiAgICByZXN1bHQgPSByZXN1bHQgPDwgYml0c1JlYWROZXh0IHwgcmVzdWx0MjtcXG4gICAgcmV0dXJuIHJlc3VsdDtcXG4gIH1cXG5cXG4gIHJlYWRCb29sKCkge1xcbiAgICByZXR1cm4gdGhpcy5yZWFkQml0cygxKSA9PT0gMTtcXG4gIH1cXG5cXG4gIHJlYWRCeXRlKCkge1xcbiAgICByZXR1cm4gdGhpcy5yZWFkQml0cyg4KTtcXG4gIH1cXG5cXG4gIF9za2lwTGVhZGluZ1plcm8oKSB7XFxuICAgIGxldCB6ZXJvQ291bnQ7XFxuICAgIGZvciAoemVyb0NvdW50ID0gMDsgemVyb0NvdW50IDwgdGhpcy5fY3VycmVudFdvcmRCaXRzTGVmdDsgemVyb0NvdW50KyspIHtcXG4gICAgICBpZiAoKHRoaXMuX2N1cnJlbnRXb3JkICYgMHg4MDAwMDAwMCA+Pj4gemVyb0NvdW50KSAhPT0gMCkge1xcbiAgICAgICAgdGhpcy5fY3VycmVudFdvcmQgPDw9IHplcm9Db3VudDtcXG4gICAgICAgIHRoaXMuX2N1cnJlbnRXb3JkQml0c0xlZnQgLT0gemVyb0NvdW50O1xcbiAgICAgICAgcmV0dXJuIHplcm9Db3VudDtcXG4gICAgICB9XFxuICAgIH1cXG4gICAgdGhpcy5fZmlsbEN1cnJlbnRXb3JkKCk7XFxuICAgIHJldHVybiB6ZXJvQ291bnQgKyB0aGlzLl9za2lwTGVhZGluZ1plcm8oKTtcXG4gIH1cXG5cXG4gIHJlYWRVRUcoKSB7XFxuICAgIC8vIHVuc2lnbmVkIGV4cG9uZW50aWFsIGdvbG9tYlxcbiAgICBsZXQgbGVhZGluZ1plcm9zID0gdGhpcy5fc2tpcExlYWRpbmdaZXJvKCk7XFxuICAgIHJldHVybiB0aGlzLnJlYWRCaXRzKGxlYWRpbmdaZXJvcyArIDEpIC0gMTtcXG4gIH1cXG5cXG4gIHJlYWRTRUcoKSB7XFxuICAgIC8vIHNpZ25lZCBleHBvbmVudGlhbCBnb2xvbWJcXG4gICAgbGV0IHZhbHVlID0gdGhpcy5yZWFkVUVHKCk7XFxuICAgIGlmICh2YWx1ZSAmIDB4MDEpIHtcXG4gICAgICByZXR1cm4gdmFsdWUgKyAxID4+PiAxO1xcbiAgICB9IGVsc2Uge1xcbiAgICAgIHJldHVybiAtMSAqICh2YWx1ZSA+Pj4gMSk7XFxuICAgIH1cXG4gIH1cXG59XFxuXFxuZXhwb3J0cy5kZWZhdWx0ID0gR29sb21iO1xcblxcbi8vIyBzb3VyY2VVUkw9d2VicGFjazovL3hncGxheWVyLWZsdi8uLi94Z3BsYXllci1jb2RlYy9zcmMvaDI2NC9uYWx1bml0L2dvbG9tYi5qcz9cIil9LFwiLi4veGdwbGF5ZXItY29kZWMvc3JjL2gyNjQvbmFsdW5pdC9pbmRleC5qc1wiOlxuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4uL3hncGxheWVyLWNvZGVjL3NyYy9oMjY0L25hbHVuaXQvaW5kZXguanMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBubyBzdGF0aWMgZXhwb3J0cyBmb3VuZCAqL2Z1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pe1widXNlIHN0cmljdFwiO2V2YWwoJ1xcblxcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xcbiAgdmFsdWU6IHRydWVcXG59KTtcXG5cXG52YXIgX3NwcyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vc3BzICovIFwiLi4veGdwbGF5ZXItY29kZWMvc3JjL2gyNjQvbmFsdW5pdC9zcHMuanNcIik7XFxuXFxudmFyIF9zcHMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfc3BzKTtcXG5cXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxcblxcbmNsYXNzIE5hbHVuaXQge1xcbiAgc3RhdGljIGdldE5hbHVuaXRzKGJ1ZmZlcikge1xcbiAgICBpZiAoYnVmZmVyLmxlbmd0aCAtIGJ1ZmZlci5wb3NpdGlvbiA8IDQpIHtcXG4gICAgICByZXR1cm4gW107XFxuICAgIH1cXG5cXG4gICAgbGV0IGJ1ZiA9IGJ1ZmZlci5kYXRhdmlldztcXG4gICAgbGV0IHBvc2l0aW9uID0gYnVmZmVyLnBvc2l0aW9uO1xcbiAgICBpZiAoYnVmLmdldEludDMyKHBvc2l0aW9uKSA9PT0gMSB8fCBidWYuZ2V0SW50MTYocG9zaXRpb24pID09PSAwICYmIGJ1Zi5nZXRJbnQ4KHBvc2l0aW9uICsgMikgPT09IDEpIHtcXG4gICAgICByZXR1cm4gTmFsdW5pdC5nZXRBbm5leGJOYWxzKGJ1ZmZlcik7XFxuICAgIH0gZWxzZSB7XFxuICAgICAgcmV0dXJuIE5hbHVuaXQuZ2V0QXZjY05hbHMoYnVmZmVyKTtcXG4gICAgfVxcbiAgfVxcblxcbiAgc3RhdGljIGdldEFubmV4Yk5hbHMoYnVmZmVyKSB7XFxuICAgIGxldCBuYWxzID0gW107XFxuICAgIGxldCBwb3NpdGlvbiA9IE5hbHVuaXQuZ2V0SGVhZGVyUG9zaXRpb25Bbm5leEIoYnVmZmVyKTtcXG4gICAgbGV0IHN0YXJ0ID0gcG9zaXRpb24ucG9zO1xcbiAgICBsZXQgZW5kID0gc3RhcnQ7XFxuICAgIHdoaWxlIChzdGFydCA8IGJ1ZmZlci5sZW5ndGggLSA0KSB7XFxuICAgICAgbGV0IGhlYWRlciA9IGJ1ZmZlci5idWZmZXIuc2xpY2Uoc3RhcnQsIHN0YXJ0ICsgcG9zaXRpb24uaGVhZGVyTGVuZ3RoKTtcXG4gICAgICBpZiAocG9zaXRpb24ucG9zID09PSBidWZmZXIucG9zaXRpb24pIHtcXG4gICAgICAgIGJ1ZmZlci5za2lwKHBvc2l0aW9uLmhlYWRlckxlbmd0aCk7XFxuICAgICAgfVxcbiAgICAgIHBvc2l0aW9uID0gTmFsdW5pdC5nZXRIZWFkZXJQb3NpdGlvbkFubmV4QihidWZmZXIpO1xcbiAgICAgIGVuZCA9IHBvc2l0aW9uLnBvcztcXG4gICAgICBsZXQgYm9keSA9IG5ldyBVaW50OEFycmF5KGJ1ZmZlci5idWZmZXIuc2xpY2Uoc3RhcnQgKyBoZWFkZXIuYnl0ZUxlbmd0aCwgZW5kKSk7XFxuICAgICAgbGV0IHVuaXQgPSB7IGhlYWRlciwgYm9keSB9O1xcbiAgICAgIE5hbHVuaXQuYW5hbHlzZU5hbCh1bml0KTtcXG4gICAgICBuYWxzLnB1c2godW5pdCk7XFxuICAgICAgYnVmZmVyLnNraXAoZW5kIC0gYnVmZmVyLnBvc2l0aW9uKTtcXG4gICAgICBzdGFydCA9IGVuZDtcXG4gICAgfVxcbiAgICByZXR1cm4gbmFscztcXG4gIH1cXG5cXG4gIHN0YXRpYyBnZXRBdmNjTmFscyhidWZmZXIpIHtcXG4gICAgbGV0IG5hbHMgPSBbXTtcXG4gICAgd2hpbGUgKGJ1ZmZlci5wb3NpdGlvbiA8IGJ1ZmZlci5sZW5ndGggLSA0KSB7XFxuICAgICAgbGV0IGxlbmd0aCA9IGJ1ZmZlci5kYXRhdmlldy5nZXRJbnQzMihidWZmZXIucG9zaXRpb24pO1xcbiAgICAgIGlmIChidWZmZXIubGVuZ3RoIC0gYnVmZmVyLnBvc2l0aW9uID49IGxlbmd0aCkge1xcbiAgICAgICAgbGV0IGhlYWRlciA9IGJ1ZmZlci5idWZmZXIuc2xpY2UoYnVmZmVyLnBvc2l0aW9uLCBidWZmZXIucG9zaXRpb24gKyA0KTtcXG4gICAgICAgIGJ1ZmZlci5za2lwKDQpO1xcbiAgICAgICAgbGV0IGJvZHkgPSBidWZmZXIuYnVmZmVyLnNsaWNlKGJ1ZmZlci5wb3NpdGlvbiwgYnVmZmVyLnBvc2l0aW9uICsgbGVuZ3RoKTtcXG4gICAgICAgIGJ1ZmZlci5za2lwKGxlbmd0aCk7XFxuICAgICAgICBsZXQgdW5pdCA9IHsgaGVhZGVyLCBib2R5IH07XFxuICAgICAgICBOYWx1bml0LmFuYWx5c2VOYWwodW5pdCk7XFxuICAgICAgICBuYWxzLnB1c2godW5pdCk7XFxuICAgICAgfSBlbHNlIHtcXG4gICAgICAgIGJyZWFrO1xcbiAgICAgIH1cXG4gICAgfVxcbiAgICByZXR1cm4gbmFscztcXG4gIH1cXG5cXG4gIHN0YXRpYyBhbmFseXNlTmFsKHVuaXQpIHtcXG4gICAgbGV0IHR5cGUgPSB1bml0LmJvZHlbMF0gJiAweDFmO1xcbiAgICBzd2l0Y2ggKHR5cGUpIHtcXG4gICAgICBjYXNlIDE6XFxuICAgICAgICAvLyBORFJcXG4gICAgICAgIHVuaXQubmRyID0gdHJ1ZTtcXG4gICAgICAgIGJyZWFrO1xcbiAgICAgIGNhc2UgNTpcXG4gICAgICAgIC8vIElEUlxcbiAgICAgICAgdW5pdC5pZHIgPSB0cnVlO1xcbiAgICAgICAgYnJlYWs7XFxuICAgICAgY2FzZSA2OlxcbiAgICAgICAgLy8gU0VJXFxuICAgICAgICBicmVhaztcXG4gICAgICBjYXNlIDc6XFxuICAgICAgICAvLyBTUFNcXG4gICAgICAgIHVuaXQuc3BzID0gX3NwczIuZGVmYXVsdC5wYXJzZVNQUyh1bml0LmJvZHkpO1xcbiAgICAgICAgYnJlYWs7XFxuICAgICAgY2FzZSA4OlxcbiAgICAgICAgLy8gUFBTXFxuICAgICAgICB1bml0LnBwcyA9IHRydWU7XFxuICAgICAgICBicmVhaztcXG4gICAgICBjYXNlIDk6XFxuICAgICAgICAvLyBBVURcXG4gICAgICAgIGJyZWFrO1xcbiAgICAgIGRlZmF1bHQ6XFxuICAgICAgICBicmVhaztcXG4gICAgfVxcbiAgfVxcblxcbiAgc3RhdGljIGdldEhlYWRlclBvc2l0aW9uQW5uZXhCKGJ1ZmZlcikge1xcbiAgICAvLyBzZXBlcmF0ZVxcbiAgICBsZXQgcG9zID0gYnVmZmVyLnBvc2l0aW9uO1xcbiAgICBsZXQgaGVhZGVyTGVuZ3RoID0gMDtcXG4gICAgd2hpbGUgKGhlYWRlckxlbmd0aCAhPT0gMyAmJiBoZWFkZXJMZW5ndGggIT09IDQgJiYgcG9zIDwgYnVmZmVyLmxlbmd0aCAtIDQpIHtcXG4gICAgICBpZiAoYnVmZmVyLmRhdGF2aWV3LmdldEludDE2KHBvcykgPT09IDApIHtcXG4gICAgICAgIGlmIChidWZmZXIuZGF0YXZpZXcuZ2V0SW50MTYocG9zICsgMikgPT09IDEpIHtcXG4gICAgICAgICAgLy8gMHgwMDAwMDFcXG4gICAgICAgICAgaGVhZGVyTGVuZ3RoID0gNDtcXG4gICAgICAgIH0gZWxzZSBpZiAoYnVmZmVyLmRhdGF2aWV3LmdldEludDgocG9zICsgMikgPT09IDEpIHtcXG4gICAgICAgICAgaGVhZGVyTGVuZ3RoID0gMztcXG4gICAgICAgIH0gZWxzZSB7XFxuICAgICAgICAgIHBvcysrO1xcbiAgICAgICAgfVxcbiAgICAgIH0gZWxzZSB7XFxuICAgICAgICBwb3MrKztcXG4gICAgICB9XFxuICAgIH1cXG5cXG4gICAgaWYgKHBvcyA9PT0gYnVmZmVyLmxlbmd0aCAtIDQpIHtcXG4gICAgICBpZiAoYnVmZmVyLmRhdGF2aWV3LmdldEludDE2KHBvcykgPT09IDApIHtcXG4gICAgICAgIGlmIChidWZmZXIuZGF0YXZpZXcuZ2V0SW50MTYocG9zICsgMikgPT09IDEpIHtcXG4gICAgICAgICAgLy8gMHgwMDAwMDFcXG4gICAgICAgICAgaGVhZGVyTGVuZ3RoID0gNDtcXG4gICAgICAgIH1cXG4gICAgICB9IGVsc2Uge1xcbiAgICAgICAgcG9zKys7XFxuICAgICAgICBpZiAoYnVmZmVyLmRhdGF2aWV3LmdldEludDE2KHBvcykgPT09IDAgJiYgYnVmZmVyLmRhdGF2aWV3LmdldEludDgocG9zKSA9PT0gMSkge1xcbiAgICAgICAgICAvLyAweDAwMDAwMDFcXG4gICAgICAgICAgaGVhZGVyTGVuZ3RoID0gMztcXG4gICAgICAgIH0gZWxzZSB7XFxuICAgICAgICAgIHBvcyA9IGJ1ZmZlci5sZW5ndGg7XFxuICAgICAgICB9XFxuICAgICAgfVxcbiAgICB9XFxuICAgIHJldHVybiB7IHBvcywgaGVhZGVyTGVuZ3RoIH07XFxuICB9XFxuXFxuICBzdGF0aWMgZ2V0QXZjYyhzcHMsIHBwcykge1xcbiAgICBsZXQgcmV0ID0gbmV3IFVpbnQ4QXJyYXkoc3BzLmJ5dGVMZW5ndGggKyBwcHMuYnl0ZUxlbmd0aCArIDExKTtcXG4gICAgcmV0WzBdID0gMHgwMTtcXG4gICAgcmV0WzFdID0gc3BzWzFdO1xcbiAgICByZXRbMl0gPSBzcHNbMl07XFxuICAgIHJldFszXSA9IHNwc1szXTtcXG4gICAgcmV0WzRdID0gMjU1O1xcbiAgICByZXRbNV0gPSAyMjU7XFxuXFxuICAgIGxldCBvZmZzZXQgPSA2O1xcblxcbiAgICByZXQuc2V0KG5ldyBVaW50OEFycmF5KFtzcHMuYnl0ZUxlbmd0aCA+Pj4gOCAmIDB4ZmYsIHNwcy5ieXRlTGVuZ3RoICYgMHhmZl0pLCBvZmZzZXQpO1xcbiAgICBvZmZzZXQgKz0gMjtcXG4gICAgcmV0LnNldChzcHMsIG9mZnNldCk7XFxuICAgIG9mZnNldCArPSBzcHMuYnl0ZUxlbmd0aDtcXG5cXG4gICAgcmV0W29mZnNldF0gPSAxO1xcbiAgICBvZmZzZXQrKztcXG5cXG4gICAgcmV0LnNldChuZXcgVWludDhBcnJheShbcHBzLmJ5dGVMZW5ndGggPj4+IDggJiAweGZmLCBwcHMuYnl0ZUxlbmd0aCAmIDB4ZmZdKSwgb2Zmc2V0KTtcXG4gICAgb2Zmc2V0ICs9IDI7XFxuICAgIHJldC5zZXQocHBzLCBvZmZzZXQpO1xcbiAgICByZXR1cm4gcmV0O1xcbiAgfVxcbn1cXG5cXG5leHBvcnRzLmRlZmF1bHQgPSBOYWx1bml0O1xcblxcbi8vIyBzb3VyY2VVUkw9d2VicGFjazovL3hncGxheWVyLWZsdi8uLi94Z3BsYXllci1jb2RlYy9zcmMvaDI2NC9uYWx1bml0L2luZGV4LmpzPycpfSxcIi4uL3hncGxheWVyLWNvZGVjL3NyYy9oMjY0L25hbHVuaXQvc3BzLmpzXCI6XG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4uL3hncGxheWVyLWNvZGVjL3NyYy9oMjY0L25hbHVuaXQvc3BzLmpzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIG5vIHN0YXRpYyBleHBvcnRzIGZvdW5kICovZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7XCJ1c2Ugc3RyaWN0XCI7ZXZhbChcIlxcblxcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcXFwiX19lc01vZHVsZVxcXCIsIHtcXG4gIHZhbHVlOiB0cnVlXFxufSk7XFxuXFxudmFyIF9nb2xvbWIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL2dvbG9tYiAqLyBcXFwiLi4veGdwbGF5ZXItY29kZWMvc3JjL2gyNjQvbmFsdW5pdC9nb2xvbWIuanNcXFwiKTtcXG5cXG52YXIgX2dvbG9tYjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9nb2xvbWIpO1xcblxcbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XFxuXFxuY2xhc3MgU1BTUGFyc2VyIHtcXG4gIHN0YXRpYyBfZWJzcDJyYnNwKHVpbnQ4YXJyYXkpIHtcXG4gICAgbGV0IHNyYyA9IHVpbnQ4YXJyYXk7XFxuICAgIGxldCBzcmNMZW5ndGggPSBzcmMuYnl0ZUxlbmd0aDtcXG4gICAgbGV0IGRzdCA9IG5ldyBVaW50OEFycmF5KHNyY0xlbmd0aCk7XFxuICAgIGxldCBkc3RJZHggPSAwO1xcblxcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNyY0xlbmd0aDsgaSsrKSB7XFxuICAgICAgaWYgKGkgPj0gMikge1xcbiAgICAgICAgaWYgKHNyY1tpXSA9PT0gMHgwMyAmJiBzcmNbaSAtIDFdID09PSAweDAwICYmIHNyY1tpIC0gMl0gPT09IDB4MDApIHtcXG4gICAgICAgICAgY29udGludWU7XFxuICAgICAgICB9XFxuICAgICAgfVxcbiAgICAgIGRzdFtkc3RJZHhdID0gc3JjW2ldO1xcbiAgICAgIGRzdElkeCsrO1xcbiAgICB9XFxuXFxuICAgIHJldHVybiBuZXcgVWludDhBcnJheShkc3QuYnVmZmVyLCAwLCBkc3RJZHgpO1xcbiAgfVxcblxcbiAgc3RhdGljIHBhcnNlU1BTKHVpbnQ4YXJyYXkpIHtcXG4gICAgbGV0IHJic3AgPSBTUFNQYXJzZXIuX2Vic3AycmJzcCh1aW50OGFycmF5KTtcXG4gICAgbGV0IGdiID0gbmV3IF9nb2xvbWIyLmRlZmF1bHQocmJzcCk7XFxuXFxuICAgIGdiLnJlYWRCeXRlKCk7XFxuICAgIGxldCBwcm9maWxlSWRjID0gZ2IucmVhZEJ5dGUoKTtcXG4gICAgZ2IucmVhZEJ5dGUoKTtcXG4gICAgbGV0IGxldmVsSWRjID0gZ2IucmVhZEJ5dGUoKTtcXG4gICAgZ2IucmVhZFVFRygpO1xcblxcbiAgICBsZXQgcHJvZmlsZV9zdHJpbmcgPSBTUFNQYXJzZXIuZ2V0UHJvZmlsZVN0cmluZyhwcm9maWxlSWRjKTtcXG4gICAgbGV0IGxldmVsX3N0cmluZyA9IFNQU1BhcnNlci5nZXRMZXZlbFN0cmluZyhsZXZlbElkYyk7XFxuICAgIGxldCBjaHJvbWFfZm9ybWF0X2lkYyA9IDE7XFxuICAgIGxldCBjaHJvbWFfZm9ybWF0ID0gNDIwO1xcbiAgICBsZXQgY2hyb21hX2Zvcm1hdF90YWJsZSA9IFswLCA0MjAsIDQyMiwgNDQ0XTtcXG4gICAgbGV0IGJpdF9kZXB0aCA9IDg7XFxuXFxuICAgIGlmIChwcm9maWxlSWRjID09PSAxMDAgfHwgcHJvZmlsZUlkYyA9PT0gMTEwIHx8IHByb2ZpbGVJZGMgPT09IDEyMiB8fCBwcm9maWxlSWRjID09PSAyNDQgfHwgcHJvZmlsZUlkYyA9PT0gNDQgfHwgcHJvZmlsZUlkYyA9PT0gODMgfHwgcHJvZmlsZUlkYyA9PT0gODYgfHwgcHJvZmlsZUlkYyA9PT0gMTE4IHx8IHByb2ZpbGVJZGMgPT09IDEyOCB8fCBwcm9maWxlSWRjID09PSAxMzggfHwgcHJvZmlsZUlkYyA9PT0gMTQ0KSB7XFxuICAgICAgY2hyb21hX2Zvcm1hdF9pZGMgPSBnYi5yZWFkVUVHKCk7XFxuICAgICAgaWYgKGNocm9tYV9mb3JtYXRfaWRjID09PSAzKSB7XFxuICAgICAgICBnYi5yZWFkQml0cygxKTtcXG4gICAgICB9XFxuICAgICAgaWYgKGNocm9tYV9mb3JtYXRfaWRjIDw9IDMpIHtcXG4gICAgICAgIGNocm9tYV9mb3JtYXQgPSBjaHJvbWFfZm9ybWF0X3RhYmxlW2Nocm9tYV9mb3JtYXRfaWRjXTtcXG4gICAgICB9XFxuXFxuICAgICAgYml0X2RlcHRoID0gZ2IucmVhZFVFRygpICsgODtcXG4gICAgICBnYi5yZWFkVUVHKCk7XFxuICAgICAgZ2IucmVhZEJpdHMoMSk7XFxuICAgICAgaWYgKGdiLnJlYWRCb29sKCkpIHtcXG4gICAgICAgIGxldCBzY2FsaW5nX2xpc3RfY291bnQgPSBjaHJvbWFfZm9ybWF0X2lkYyAhPT0gMyA/IDggOiAxMjtcXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2NhbGluZ19saXN0X2NvdW50OyBpKyspIHtcXG4gICAgICAgICAgaWYgKGdiLnJlYWRCb29sKCkpIHtcXG4gICAgICAgICAgICBpZiAoaSA8IDYpIHtcXG4gICAgICAgICAgICAgIFNQU1BhcnNlci5fc2tpcFNjYWxpbmdMaXN0KGdiLCAxNik7XFxuICAgICAgICAgICAgfSBlbHNlIHtcXG4gICAgICAgICAgICAgIFNQU1BhcnNlci5fc2tpcFNjYWxpbmdMaXN0KGdiLCA2NCk7XFxuICAgICAgICAgICAgfVxcbiAgICAgICAgICB9XFxuICAgICAgICB9XFxuICAgICAgfVxcbiAgICB9XFxuICAgIGdiLnJlYWRVRUcoKTtcXG4gICAgbGV0IHBpY19vcmRlcl9jbnRfdHlwZSA9IGdiLnJlYWRVRUcoKTtcXG4gICAgaWYgKHBpY19vcmRlcl9jbnRfdHlwZSA9PT0gMCkge1xcbiAgICAgIGdiLnJlYWRVRUcoKTtcXG4gICAgfSBlbHNlIGlmIChwaWNfb3JkZXJfY250X3R5cGUgPT09IDEpIHtcXG4gICAgICBnYi5yZWFkQml0cygxKTtcXG4gICAgICBnYi5yZWFkU0VHKCk7XFxuICAgICAgZ2IucmVhZFNFRygpO1xcbiAgICAgIGxldCBudW1fcmVmX2ZyYW1lc19pbl9waWNfb3JkZXJfY250X2N5Y2xlID0gZ2IucmVhZFVFRygpO1xcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbnVtX3JlZl9mcmFtZXNfaW5fcGljX29yZGVyX2NudF9jeWNsZTsgaSsrKSB7XFxuICAgICAgICBnYi5yZWFkU0VHKCk7XFxuICAgICAgfVxcbiAgICB9XFxuICAgIGdiLnJlYWRVRUcoKTtcXG4gICAgZ2IucmVhZEJpdHMoMSk7XFxuXFxuICAgIGxldCBwaWNfd2lkdGhfaW5fbWJzX21pbnVzMSA9IGdiLnJlYWRVRUcoKTtcXG4gICAgbGV0IHBpY19oZWlnaHRfaW5fbWFwX3VuaXRzX21pbnVzMSA9IGdiLnJlYWRVRUcoKTtcXG5cXG4gICAgbGV0IGZyYW1lX21ic19vbmx5X2ZsYWcgPSBnYi5yZWFkQml0cygxKTtcXG4gICAgaWYgKGZyYW1lX21ic19vbmx5X2ZsYWcgPT09IDApIHtcXG4gICAgICBnYi5yZWFkQml0cygxKTtcXG4gICAgfVxcbiAgICBnYi5yZWFkQml0cygxKTtcXG5cXG4gICAgbGV0IGZyYW1lX2Nyb3BfbGVmdF9vZmZzZXQgPSAwO1xcbiAgICBsZXQgZnJhbWVfY3JvcF9yaWdodF9vZmZzZXQgPSAwO1xcbiAgICBsZXQgZnJhbWVfY3JvcF90b3Bfb2Zmc2V0ID0gMDtcXG4gICAgbGV0IGZyYW1lX2Nyb3BfYm90dG9tX29mZnNldCA9IDA7XFxuXFxuICAgIGxldCBmcmFtZV9jcm9wcGluZ19mbGFnID0gZ2IucmVhZEJvb2woKTtcXG4gICAgaWYgKGZyYW1lX2Nyb3BwaW5nX2ZsYWcpIHtcXG4gICAgICBmcmFtZV9jcm9wX2xlZnRfb2Zmc2V0ID0gZ2IucmVhZFVFRygpO1xcbiAgICAgIGZyYW1lX2Nyb3BfcmlnaHRfb2Zmc2V0ID0gZ2IucmVhZFVFRygpO1xcbiAgICAgIGZyYW1lX2Nyb3BfdG9wX29mZnNldCA9IGdiLnJlYWRVRUcoKTtcXG4gICAgICBmcmFtZV9jcm9wX2JvdHRvbV9vZmZzZXQgPSBnYi5yZWFkVUVHKCk7XFxuICAgIH1cXG5cXG4gICAgbGV0IHBhcl93aWR0aCA9IDEsXFxuICAgICAgICBwYXJfaGVpZ2h0ID0gMTtcXG4gICAgbGV0IGZwcyA9IDAsXFxuICAgICAgICBmcHNfZml4ZWQgPSB0cnVlLFxcbiAgICAgICAgZnBzX251bSA9IDAsXFxuICAgICAgICBmcHNfZGVuID0gMDtcXG5cXG4gICAgbGV0IHZ1aV9wYXJhbWV0ZXJzX3ByZXNlbnRfZmxhZyA9IGdiLnJlYWRCb29sKCk7XFxuICAgIGlmICh2dWlfcGFyYW1ldGVyc19wcmVzZW50X2ZsYWcpIHtcXG4gICAgICBpZiAoZ2IucmVhZEJvb2woKSkge1xcbiAgICAgICAgLy8gYXNwZWN0X3JhdGlvX2luZm9fcHJlc2VudF9mbGFnXFxuICAgICAgICBsZXQgYXNwZWN0X3JhdGlvX2lkYyA9IGdiLnJlYWRCeXRlKCk7XFxuICAgICAgICBsZXQgcGFyX3dfdGFibGUgPSBbMSwgMTIsIDEwLCAxNiwgNDAsIDI0LCAyMCwgMzIsIDgwLCAxOCwgMTUsIDY0LCAxNjAsIDQsIDMsIDJdO1xcbiAgICAgICAgbGV0IHBhcl9oX3RhYmxlID0gWzEsIDExLCAxMSwgMTEsIDMzLCAxMSwgMTEsIDExLCAzMywgMTEsIDExLCAzMywgOTksIDMsIDIsIDFdO1xcblxcbiAgICAgICAgaWYgKGFzcGVjdF9yYXRpb19pZGMgPiAwICYmIGFzcGVjdF9yYXRpb19pZGMgPCAxNikge1xcbiAgICAgICAgICBwYXJfd2lkdGggPSBwYXJfd190YWJsZVthc3BlY3RfcmF0aW9faWRjIC0gMV07XFxuICAgICAgICAgIHBhcl9oZWlnaHQgPSBwYXJfaF90YWJsZVthc3BlY3RfcmF0aW9faWRjIC0gMV07XFxuICAgICAgICB9IGVsc2UgaWYgKGFzcGVjdF9yYXRpb19pZGMgPT09IDI1NSkge1xcbiAgICAgICAgICBwYXJfd2lkdGggPSBnYi5yZWFkQnl0ZSgpIDw8IDggfCBnYi5yZWFkQnl0ZSgpO1xcbiAgICAgICAgICBwYXJfaGVpZ2h0ID0gZ2IucmVhZEJ5dGUoKSA8PCA4IHwgZ2IucmVhZEJ5dGUoKTtcXG4gICAgICAgIH1cXG4gICAgICB9XFxuXFxuICAgICAgaWYgKGdiLnJlYWRCb29sKCkpIHtcXG4gICAgICAgIGdiLnJlYWRCb29sKCk7XFxuICAgICAgfVxcbiAgICAgIGlmIChnYi5yZWFkQm9vbCgpKSB7XFxuICAgICAgICBnYi5yZWFkQml0cyg0KTtcXG4gICAgICAgIGlmIChnYi5yZWFkQm9vbCgpKSB7XFxuICAgICAgICAgIGdiLnJlYWRCaXRzKDI0KTtcXG4gICAgICAgIH1cXG4gICAgICB9XFxuICAgICAgaWYgKGdiLnJlYWRCb29sKCkpIHtcXG4gICAgICAgIGdiLnJlYWRVRUcoKTtcXG4gICAgICAgIGdiLnJlYWRVRUcoKTtcXG4gICAgICB9XFxuICAgICAgaWYgKGdiLnJlYWRCb29sKCkpIHtcXG4gICAgICAgIGxldCBudW1fdW5pdHNfaW5fdGljayA9IGdiLnJlYWRCaXRzKDMyKTtcXG4gICAgICAgIGxldCB0aW1lX3NjYWxlID0gZ2IucmVhZEJpdHMoMzIpO1xcbiAgICAgICAgZnBzX2ZpeGVkID0gZ2IucmVhZEJvb2woKTtcXG5cXG4gICAgICAgIGZwc19udW0gPSB0aW1lX3NjYWxlO1xcbiAgICAgICAgZnBzX2RlbiA9IG51bV91bml0c19pbl90aWNrICogMjtcXG4gICAgICAgIGZwcyA9IGZwc19udW0gLyBmcHNfZGVuO1xcbiAgICAgIH1cXG4gICAgfVxcblxcbiAgICBsZXQgcGFyU2NhbGUgPSAxO1xcbiAgICBpZiAocGFyX3dpZHRoICE9PSAxIHx8IHBhcl9oZWlnaHQgIT09IDEpIHtcXG4gICAgICBwYXJTY2FsZSA9IHBhcl93aWR0aCAvIHBhcl9oZWlnaHQ7XFxuICAgIH1cXG5cXG4gICAgbGV0IGNyb3BfdW5pdF94ID0gMCxcXG4gICAgICAgIGNyb3BfdW5pdF95ID0gMDtcXG4gICAgaWYgKGNocm9tYV9mb3JtYXRfaWRjID09PSAwKSB7XFxuICAgICAgY3JvcF91bml0X3ggPSAxO1xcbiAgICAgIGNyb3BfdW5pdF95ID0gMiAtIGZyYW1lX21ic19vbmx5X2ZsYWc7XFxuICAgIH0gZWxzZSB7XFxuICAgICAgbGV0IHN1Yl93YyA9IGNocm9tYV9mb3JtYXRfaWRjID09PSAzID8gMSA6IDI7XFxuICAgICAgbGV0IHN1Yl9oYyA9IGNocm9tYV9mb3JtYXRfaWRjID09PSAxID8gMiA6IDE7XFxuICAgICAgY3JvcF91bml0X3ggPSBzdWJfd2M7XFxuICAgICAgY3JvcF91bml0X3kgPSBzdWJfaGMgKiAoMiAtIGZyYW1lX21ic19vbmx5X2ZsYWcpO1xcbiAgICB9XFxuXFxuICAgIGxldCBjb2RlY193aWR0aCA9IChwaWNfd2lkdGhfaW5fbWJzX21pbnVzMSArIDEpICogMTY7XFxuICAgIGxldCBjb2RlY19oZWlnaHQgPSAoMiAtIGZyYW1lX21ic19vbmx5X2ZsYWcpICogKChwaWNfaGVpZ2h0X2luX21hcF91bml0c19taW51czEgKyAxKSAqIDE2KTtcXG5cXG4gICAgY29kZWNfd2lkdGggLT0gKGZyYW1lX2Nyb3BfbGVmdF9vZmZzZXQgKyBmcmFtZV9jcm9wX3JpZ2h0X29mZnNldCkgKiBjcm9wX3VuaXRfeDtcXG4gICAgY29kZWNfaGVpZ2h0IC09IChmcmFtZV9jcm9wX3RvcF9vZmZzZXQgKyBmcmFtZV9jcm9wX2JvdHRvbV9vZmZzZXQpICogY3JvcF91bml0X3k7XFxuXFxuICAgIGxldCBwcmVzZW50X3dpZHRoID0gTWF0aC5jZWlsKGNvZGVjX3dpZHRoICogcGFyU2NhbGUpO1xcblxcbiAgICBnYi5kZXN0cm95KCk7XFxuICAgIGdiID0gbnVsbDtcXG5cXG4gICAgcmV0dXJuIHtcXG4gICAgICBwcm9maWxlX3N0cmluZzogcHJvZmlsZV9zdHJpbmcsXFxuICAgICAgbGV2ZWxfc3RyaW5nOiBsZXZlbF9zdHJpbmcsXFxuICAgICAgYml0X2RlcHRoOiBiaXRfZGVwdGgsXFxuICAgICAgY2hyb21hX2Zvcm1hdDogY2hyb21hX2Zvcm1hdCxcXG4gICAgICBjaHJvbWFfZm9ybWF0X3N0cmluZzogU1BTUGFyc2VyLmdldENocm9tYUZvcm1hdFN0cmluZyhjaHJvbWFfZm9ybWF0KSxcXG5cXG4gICAgICBmcmFtZV9yYXRlOiB7XFxuICAgICAgICBmaXhlZDogZnBzX2ZpeGVkLFxcbiAgICAgICAgZnBzOiBmcHMsXFxuICAgICAgICBmcHNfZGVuOiBmcHNfZGVuLFxcbiAgICAgICAgZnBzX251bTogZnBzX251bVxcbiAgICAgIH0sXFxuXFxuICAgICAgcGFyX3JhdGlvOiB7XFxuICAgICAgICB3aWR0aDogcGFyX3dpZHRoLFxcbiAgICAgICAgaGVpZ2h0OiBwYXJfaGVpZ2h0XFxuICAgICAgfSxcXG5cXG4gICAgICBjb2RlY19zaXplOiB7XFxuICAgICAgICB3aWR0aDogY29kZWNfd2lkdGgsXFxuICAgICAgICBoZWlnaHQ6IGNvZGVjX2hlaWdodFxcbiAgICAgIH0sXFxuXFxuICAgICAgcHJlc2VudF9zaXplOiB7XFxuICAgICAgICB3aWR0aDogcHJlc2VudF93aWR0aCxcXG4gICAgICAgIGhlaWdodDogY29kZWNfaGVpZ2h0XFxuICAgICAgfVxcbiAgICB9O1xcbiAgfVxcblxcbiAgc3RhdGljIF9za2lwU2NhbGluZ0xpc3QoZ2IsIGNvdW50KSB7XFxuICAgIGxldCBsYXN0X3NjYWxlID0gOCxcXG4gICAgICAgIG5leHRfc2NhbGUgPSA4O1xcbiAgICBsZXQgZGVsdGFfc2NhbGUgPSAwO1xcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvdW50OyBpKyspIHtcXG4gICAgICBpZiAobmV4dF9zY2FsZSAhPT0gMCkge1xcbiAgICAgICAgZGVsdGFfc2NhbGUgPSBnYi5yZWFkU0VHKCk7XFxuICAgICAgICBuZXh0X3NjYWxlID0gKGxhc3Rfc2NhbGUgKyBkZWx0YV9zY2FsZSArIDI1NikgJSAyNTY7XFxuICAgICAgfVxcbiAgICAgIGxhc3Rfc2NhbGUgPSBuZXh0X3NjYWxlID09PSAwID8gbGFzdF9zY2FsZSA6IG5leHRfc2NhbGU7XFxuICAgIH1cXG4gIH1cXG5cXG4gIHN0YXRpYyBnZXRQcm9maWxlU3RyaW5nKHByb2ZpbGVJZGMpIHtcXG4gICAgc3dpdGNoIChwcm9maWxlSWRjKSB7XFxuICAgICAgY2FzZSA2NjpcXG4gICAgICAgIHJldHVybiAnQmFzZWxpbmUnO1xcbiAgICAgIGNhc2UgNzc6XFxuICAgICAgICByZXR1cm4gJ01haW4nO1xcbiAgICAgIGNhc2UgODg6XFxuICAgICAgICByZXR1cm4gJ0V4dGVuZGVkJztcXG4gICAgICBjYXNlIDEwMDpcXG4gICAgICAgIHJldHVybiAnSGlnaCc7XFxuICAgICAgY2FzZSAxMTA6XFxuICAgICAgICByZXR1cm4gJ0hpZ2gxMCc7XFxuICAgICAgY2FzZSAxMjI6XFxuICAgICAgICByZXR1cm4gJ0hpZ2g0MjInO1xcbiAgICAgIGNhc2UgMjQ0OlxcbiAgICAgICAgcmV0dXJuICdIaWdoNDQ0JztcXG4gICAgICBkZWZhdWx0OlxcbiAgICAgICAgcmV0dXJuICdVbmtub3duJztcXG4gICAgfVxcbiAgfVxcblxcbiAgc3RhdGljIGdldExldmVsU3RyaW5nKGxldmVsSWRjKSB7XFxuICAgIHJldHVybiAobGV2ZWxJZGMgLyAxMCkudG9GaXhlZCgxKTtcXG4gIH1cXG5cXG4gIHN0YXRpYyBnZXRDaHJvbWFGb3JtYXRTdHJpbmcoY2hyb21hKSB7XFxuICAgIHN3aXRjaCAoY2hyb21hKSB7XFxuICAgICAgY2FzZSA0MjA6XFxuICAgICAgICByZXR1cm4gJzQ6MjowJztcXG4gICAgICBjYXNlIDQyMjpcXG4gICAgICAgIHJldHVybiAnNDoyOjInO1xcbiAgICAgIGNhc2UgNDQ0OlxcbiAgICAgICAgcmV0dXJuICc0OjQ6NCc7XFxuICAgICAgZGVmYXVsdDpcXG4gICAgICAgIHJldHVybiAnVW5rbm93bic7XFxuICAgIH1cXG4gIH1cXG5cXG4gIHN0YXRpYyB0b1ZpZGVvTWV0YShzcHNDb25maWcpIHtcXG4gICAgbGV0IG1ldGEgPSB7fTtcXG4gICAgaWYgKHNwc0NvbmZpZyAmJiBzcHNDb25maWcuY29kZWNfc2l6ZSkge1xcbiAgICAgIG1ldGEuY29kZWNXaWR0aCA9IHNwc0NvbmZpZy5jb2RlY19zaXplLndpZHRoO1xcbiAgICAgIG1ldGEuY29kZWNIZWlnaHQgPSBzcHNDb25maWcuY29kZWNfc2l6ZS5oZWlnaHQ7XFxuICAgICAgbWV0YS5wcmVzZW50V2lkdGggPSBzcHNDb25maWcucHJlc2VudF9zaXplLndpZHRoO1xcbiAgICAgIG1ldGEucHJlc2VudEhlaWdodCA9IHNwc0NvbmZpZy5wcmVzZW50X3NpemUuaGVpZ2h0O1xcbiAgICB9XFxuXFxuICAgIG1ldGEucHJvZmlsZSA9IHNwc0NvbmZpZy5wcm9maWxlX3N0cmluZztcXG4gICAgbWV0YS5sZXZlbCA9IHNwc0NvbmZpZy5sZXZlbF9zdHJpbmc7XFxuICAgIG1ldGEuYml0RGVwdGggPSBzcHNDb25maWcuYml0X2RlcHRoO1xcbiAgICBtZXRhLmNocm9tYUZvcm1hdCA9IHNwc0NvbmZpZy5jaHJvbWFfZm9ybWF0O1xcblxcbiAgICBtZXRhLnBhclJhdGlvID0ge1xcbiAgICAgIHdpZHRoOiBzcHNDb25maWcucGFyX3JhdGlvLndpZHRoLFxcbiAgICAgIGhlaWdodDogc3BzQ29uZmlnLnBhcl9yYXRpby5oZWlnaHRcXG4gICAgfTtcXG5cXG4gICAgbWV0YS5mcmFtZVJhdGUgPSBzcHNDb25maWcuZnJhbWVfcmF0ZTtcXG5cXG4gICAgbGV0IGZwc0RlbiA9IG1ldGEuZnJhbWVSYXRlLmZwc19kZW47XFxuICAgIGxldCBmcHNOdW0gPSBtZXRhLmZyYW1lUmF0ZS5mcHNfbnVtO1xcbiAgICBtZXRhLnJlZlNhbXBsZUR1cmF0aW9uID0gTWF0aC5mbG9vcihtZXRhLnRpbWVzY2FsZSAqIChmcHNEZW4gLyBmcHNOdW0pKTtcXG4gIH1cXG59IC8qIGVzbGludC1kaXNhYmxlIGNhbWVsY2FzZSAgKi9cXG4vKiBlc2xpbnQtZGlzYWJsZSBvbmUtdmFyICAqL1xcbmV4cG9ydHMuZGVmYXVsdCA9IFNQU1BhcnNlcjtcXG5cXG4vLyMgc291cmNlVVJMPXdlYnBhY2s6Ly94Z3BsYXllci1mbHYvLi4veGdwbGF5ZXItY29kZWMvc3JjL2gyNjQvbmFsdW5pdC9zcHMuanM/XCIpfSxcIi4uL3hncGxheWVyLWRlbXV4L2luZGV4LmpzXCI6XG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4uL3hncGxheWVyLWRlbXV4L2luZGV4LmpzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIG5vIHN0YXRpYyBleHBvcnRzIGZvdW5kICovZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7XCJ1c2Ugc3RyaWN0XCI7ZXZhbCgnXFxuXFxubW9kdWxlLmV4cG9ydHMgPSB7XFxuICAvLyBITFNcXG4gIE0zVThQYXJzZXI6IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vc3JjL2hscy9kZW11eGVyL20zdThwYXJzZXIgKi8gXCIuLi94Z3BsYXllci1kZW11eC9zcmMvaGxzL2RlbXV4ZXIvbTN1OHBhcnNlci5qc1wiKS5kZWZhdWx0LFxcbiAgVHNEZW11eGVyOiBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL3NyYy9obHMvZGVtdXhlci90cyAqLyBcIi4uL3hncGxheWVyLWRlbXV4L3NyYy9obHMvZGVtdXhlci90cy5qc1wiKS5kZWZhdWx0LFxcbiAgUGxheWxpc3Q6IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vc3JjL2hscy9wbGF5bGlzdCAqLyBcIi4uL3hncGxheWVyLWRlbXV4L3NyYy9obHMvcGxheWxpc3QuanNcIikuZGVmYXVsdCxcXG4gIEZsdkRlbXV4ZXI6IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vc3JjL2Zsdi9pbmRleCAqLyBcIi4uL3hncGxheWVyLWRlbXV4L3NyYy9mbHYvaW5kZXguanNcIikuZGVmYXVsdFxcbn07XFxuXFxuLy8jIHNvdXJjZVVSTD13ZWJwYWNrOi8veGdwbGF5ZXItZmx2Ly4uL3hncGxheWVyLWRlbXV4L2luZGV4LmpzPycpfSxcIi4uL3hncGxheWVyLWRlbXV4L3NyYy9mbHYvYW1mLXBhcnNlci5qc1wiOlxuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi4veGdwbGF5ZXItZGVtdXgvc3JjL2Zsdi9hbWYtcGFyc2VyLmpzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBubyBzdGF0aWMgZXhwb3J0cyBmb3VuZCAqL2Z1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pe1widXNlIHN0cmljdFwiO2V2YWwoXCJcXG5cXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXFxcIl9fZXNNb2R1bGVcXFwiLCB7XFxuICB2YWx1ZTogdHJ1ZVxcbn0pO1xcblxcbnZhciBfeGdwbGF5ZXJVdGlscyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIHhncGxheWVyLXV0aWxzICovIFxcXCIuLi94Z3BsYXllci11dGlscy9pbmRleC5qc1xcXCIpO1xcblxcbmNvbnN0IERBVEFfVFlQRVMgPSB7XFxuICBOVU1CRVI6IDAsXFxuICBCT09MRUFOOiAxLFxcbiAgU1RSSU5HOiAyLFxcbiAgT0JKRUNUOiAzLFxcbiAgTUlYX0FSUkFZOiA4LFxcbiAgT0JKRUNUX0VORDogOSxcXG4gIFNUUklDVF9BUlJBWTogMTAsXFxuICBEQVRFOiAxMSxcXG4gIExPTkVfU1RSSU5HOiAxMlxcblxcbiAgLyoqXFxuICAgKiBtZXRh5L+h5oGv6Kej5p6QXFxuICAgKi9cXG59O2NsYXNzIEFNRlBhcnNlciB7XFxuICBjb25zdHJ1Y3RvcigpIHtcXG4gICAgdGhpcy5vZmZzZXQgPSAwO1xcbiAgICB0aGlzLnJlYWRPZmZzZXQgPSB0aGlzLm9mZnNldDtcXG4gIH1cXG5cXG4gIHJlc29sdmUobWV0YSwgc2l6ZSkge1xcbiAgICBpZiAoc2l6ZSA8IDMpIHtcXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ25vdCBlbm91Z2ggZGF0YSBmb3IgbWV0YWluZm8nKTtcXG4gICAgfVxcbiAgICBjb25zdCBtZXRhRGF0YSA9IHt9O1xcbiAgICBjb25zdCBuYW1lID0gdGhpcy5wYXJzZVZhbHVlKG1ldGEpO1xcbiAgICBjb25zdCB2YWx1ZSA9IHRoaXMucGFyc2VWYWx1ZShtZXRhLCBzaXplIC0gbmFtZS5ib2R5U2l6ZSk7XFxuICAgIG1ldGFEYXRhW25hbWUuZGF0YV0gPSB2YWx1ZS5kYXRhO1xcblxcbiAgICB0aGlzLnJlc2V0U3RhdHVzKCk7XFxuICAgIHJldHVybiBtZXRhRGF0YTtcXG4gIH1cXG5cXG4gIHJlc2V0U3RhdHVzKCkge1xcbiAgICB0aGlzLm9mZnNldCA9IDA7XFxuICAgIHRoaXMucmVhZE9mZnNldCA9IHRoaXMub2Zmc2V0O1xcbiAgfVxcblxcbiAgcGFyc2VTdHJpbmcoYnVmZmVyKSB7XFxuICAgIGNvbnN0IGR2ID0gbmV3IERhdGFWaWV3KGJ1ZmZlciwgdGhpcy5yZWFkT2Zmc2V0KTtcXG4gICAgY29uc3Qgc3RyTGVuID0gZHYuZ2V0VWludDE2KDAsICFfeGdwbGF5ZXJVdGlscy5pc0xlKTtcXG4gICAgbGV0IHN0ciA9ICcnO1xcbiAgICBpZiAoc3RyTGVuID4gMCkge1xcbiAgICAgIHN0ciA9IF94Z3BsYXllclV0aWxzLlVURjguZGVjb2RlKG5ldyBVaW50OEFycmF5KGJ1ZmZlciwgdGhpcy5yZWFkT2Zmc2V0ICsgMiwgc3RyTGVuKSk7XFxuICAgIH0gZWxzZSB7XFxuICAgICAgc3RyID0gJyc7XFxuICAgIH1cXG4gICAgbGV0IHNpemUgPSBzdHJMZW4gKyAyO1xcbiAgICB0aGlzLnJlYWRPZmZzZXQgKz0gc2l6ZTtcXG4gICAgcmV0dXJuIHtcXG4gICAgICBkYXRhOiBzdHIsXFxuICAgICAgYm9keVNpemU6IHN0ckxlbiArIDJcXG4gICAgfTtcXG4gIH1cXG5cXG4gIHBhcnNlRGF0ZShidWZmZXIsIHNpemUpIHtcXG4gICAgY29uc3QgZHYgPSBuZXcgRGF0YVZpZXcoYnVmZmVyLCB0aGlzLnJlYWRPZmZzZXQsIHNpemUpO1xcbiAgICBsZXQgdHMgPSBkdi5nZXRGbG9hdDY0KDAsICFfeGdwbGF5ZXJVdGlscy5pc0xlKTtcXG4gICAgY29uc3QgdGltZU9mZnNldCA9IGR2LmdldEludDE2KDgsICFfeGdwbGF5ZXJVdGlscy5pc0xlKTtcXG4gICAgdHMgKz0gdGltZU9mZnNldCAqIDYwICogMTAwMDtcXG5cXG4gICAgdGhpcy5yZWFkT2Zmc2V0ICs9IDEwO1xcbiAgICByZXR1cm4ge1xcbiAgICAgIGRhdGE6IG5ldyBEYXRlKHRzKSxcXG4gICAgICBib2R5U2l6ZTogMTBcXG4gICAgfTtcXG4gIH1cXG5cXG4gIHBhcnNlT2JqZWN0KGJ1ZmZlciwgc2l6ZSkge1xcbiAgICBjb25zdCBuYW1lID0gdGhpcy5wYXJzZVN0cmluZyhidWZmZXIsIHNpemUpO1xcbiAgICBjb25zdCB2YWx1ZSA9IHRoaXMucGFyc2VWYWx1ZShidWZmZXIsIHNpemUgLSBuYW1lLmJvZHlTaXplKTtcXG4gICAgcmV0dXJuIHtcXG4gICAgICBkYXRhOiB7XFxuICAgICAgICBuYW1lOiBuYW1lLmRhdGEsXFxuICAgICAgICB2YWx1ZTogdmFsdWUuZGF0YVxcbiAgICAgIH0sXFxuICAgICAgYm9keVNpemU6IG5hbWUuYm9keVNpemUgKyB2YWx1ZS5ib2R5U2l6ZSxcXG4gICAgICBpc09iakVuZDogdmFsdWUuaXNPYmpFbmRcXG4gICAgfTtcXG4gIH1cXG5cXG4gIHBhcnNlTG9uZ1N0cmluZyhidWZmZXIpIHtcXG4gICAgY29uc3QgZHYgPSBuZXcgRGF0YVZpZXcoYnVmZmVyLCB0aGlzLnJlYWRPZmZzZXQpO1xcbiAgICBjb25zdCBzdHJMZW4gPSBkdi5nZXRVaW50MzIoMCwgIV94Z3BsYXllclV0aWxzLmlzTGUpO1xcbiAgICBsZXQgc3RyID0gJyc7XFxuICAgIGlmIChzdHJMZW4gPiAwKSB7XFxuICAgICAgc3RyID0gX3hncGxheWVyVXRpbHMuVVRGOC5kZWNvZGUobmV3IFVpbnQ4QXJyYXkoYnVmZmVyLCB0aGlzLnJlYWRPZmZzZXQgKyAyLCBzdHJMZW4pKTtcXG4gICAgfSBlbHNlIHtcXG4gICAgICBzdHIgPSAnJztcXG4gICAgfVxcbiAgICAvLyBjb25zdCBzaXplID0gc3RyTGVuICsgNDtcXG4gICAgdGhpcy5yZWFkT2Zmc2V0ICs9IHN0ckxlbiArIDQ7XFxuICAgIHJldHVybiB7XFxuICAgICAgZGF0YTogc3RyLFxcbiAgICAgIGJvZHlTaXplOiBzdHJMZW4gKyA0XFxuICAgIH07XFxuICB9XFxuXFxuICAvKipcXG4gICAqIOino+aekG1ldGHkuK3nmoTlj5jph49cXG4gICAqL1xcbiAgcGFyc2VWYWx1ZShkYXRhLCBzaXplKSB7XFxuICAgIGxldCBidWZmZXIgPSBuZXcgQXJyYXlCdWZmZXIoKTtcXG4gICAgaWYgKGRhdGEgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcikge1xcbiAgICAgIGJ1ZmZlciA9IGRhdGE7XFxuICAgIH0gZWxzZSB7XFxuICAgICAgYnVmZmVyID0gZGF0YS5idWZmZXI7XFxuICAgIH1cXG4gICAgY29uc3Qge1xcbiAgICAgIE5VTUJFUixcXG4gICAgICBCT09MRUFOLFxcbiAgICAgIFNUUklORyxcXG4gICAgICBPQkpFQ1QsXFxuICAgICAgTUlYX0FSUkFZLFxcbiAgICAgIE9CSkVDVF9FTkQsXFxuICAgICAgU1RSSUNUX0FSUkFZLFxcbiAgICAgIERBVEUsXFxuICAgICAgTE9ORV9TVFJJTkdcXG4gICAgfSA9IERBVEFfVFlQRVM7XFxuICAgIGNvbnN0IGRhdGFWaWV3ID0gbmV3IERhdGFWaWV3KGJ1ZmZlciwgdGhpcy5yZWFkT2Zmc2V0LCBzaXplKTtcXG4gICAgbGV0IGlzT2JqRW5kID0gZmFsc2U7XFxuICAgIGNvbnN0IHR5cGUgPSBkYXRhVmlldy5nZXRVaW50OCgwKTtcXG4gICAgbGV0IG9mZnNldCA9IDE7XFxuICAgIHRoaXMucmVhZE9mZnNldCArPSAxO1xcbiAgICBsZXQgdmFsdWUgPSBudWxsO1xcblxcbiAgICBzd2l0Y2ggKHR5cGUpIHtcXG4gICAgICBjYXNlIE5VTUJFUjpcXG4gICAgICAgIHtcXG4gICAgICAgICAgdmFsdWUgPSBkYXRhVmlldy5nZXRGbG9hdDY0KDEsICFfeGdwbGF5ZXJVdGlscy5pc0xlKTtcXG4gICAgICAgICAgdGhpcy5yZWFkT2Zmc2V0ICs9IDg7XFxuICAgICAgICAgIG9mZnNldCArPSA4O1xcbiAgICAgICAgICBicmVhaztcXG4gICAgICAgIH1cXG4gICAgICBjYXNlIEJPT0xFQU46XFxuICAgICAgICB7XFxuICAgICAgICAgIGNvbnN0IGJvb2xOdW0gPSBkYXRhVmlldy5nZXRVaW50OCgxKTtcXG4gICAgICAgICAgdmFsdWUgPSAhIWJvb2xOdW07XFxuICAgICAgICAgIHRoaXMucmVhZE9mZnNldCArPSAxO1xcbiAgICAgICAgICBvZmZzZXQgKz0gMTtcXG4gICAgICAgICAgYnJlYWs7XFxuICAgICAgICB9XFxuICAgICAgY2FzZSBTVFJJTkc6XFxuICAgICAgICB7XFxuICAgICAgICAgIGNvbnN0IHN0ciA9IHRoaXMucGFyc2VTdHJpbmcoYnVmZmVyKTtcXG4gICAgICAgICAgdmFsdWUgPSBzdHIuZGF0YTtcXG4gICAgICAgICAgb2Zmc2V0ICs9IHN0ci5ib2R5U2l6ZTtcXG4gICAgICAgICAgYnJlYWs7XFxuICAgICAgICB9XFxuICAgICAgY2FzZSBPQkpFQ1Q6XFxuICAgICAgICB7XFxuICAgICAgICAgIHZhbHVlID0ge307XFxuICAgICAgICAgIGxldCBvYmpFbmRTaXplID0gMDtcXG4gICAgICAgICAgaWYgKGRhdGFWaWV3LmdldFVpbnQzMihzaXplIC0gNCwgIV94Z3BsYXllclV0aWxzLmlzTGUpICYgMHgwMEZGRkZGRikge1xcbiAgICAgICAgICAgIG9iakVuZFNpemUgPSAzO1xcbiAgICAgICAgICB9XFxuICAgICAgICAgIC8vIHRoaXMucmVhZE9mZnNldCArPSBvZmZzZXQgLSAxO1xcbiAgICAgICAgICB3aGlsZSAob2Zmc2V0IDwgc2l6ZSAtIDQpIHtcXG4gICAgICAgICAgICBjb25zdCBhbWZPYmogPSB0aGlzLnBhcnNlT2JqZWN0KGJ1ZmZlciwgc2l6ZSAtIG9mZnNldCAtIG9iakVuZFNpemUpO1xcbiAgICAgICAgICAgIGlmIChhbWZPYmouaXNPYmplY3RFbmQpIHtcXG4gICAgICAgICAgICAgIGJyZWFrO1xcbiAgICAgICAgICAgIH1cXG4gICAgICAgICAgICB2YWx1ZVthbWZPYmouZGF0YS5uYW1lXSA9IGFtZk9iai5kYXRhLnZhbHVlO1xcbiAgICAgICAgICAgIG9mZnNldCArPSBhbWZPYmouYm9keVNpemU7XFxuICAgICAgICAgIH1cXG4gICAgICAgICAgaWYgKG9mZnNldCA8PSBzaXplIC0gMykge1xcbiAgICAgICAgICAgIGNvbnN0IG1hcmsgPSBkYXRhVmlldy5nZXRVaW50MzIob2Zmc2V0IC0gMSwgIV94Z3BsYXllclV0aWxzLmlzTGUpICYgMHgwMEZGRkZGRjtcXG4gICAgICAgICAgICBpZiAobWFyayA9PT0gOSkge1xcbiAgICAgICAgICAgICAgdGhpcy5yZWFkT2Zmc2V0ICs9IDM7XFxuICAgICAgICAgICAgICBvZmZzZXQgKz0gMztcXG4gICAgICAgICAgICB9XFxuICAgICAgICAgIH1cXG4gICAgICAgICAgYnJlYWs7XFxuICAgICAgICB9XFxuICAgICAgY2FzZSBNSVhfQVJSQVk6XFxuICAgICAgICB7XFxuICAgICAgICAgIHZhbHVlID0ge307XFxuICAgICAgICAgIG9mZnNldCArPSA0O1xcbiAgICAgICAgICB0aGlzLnJlYWRPZmZzZXQgKz0gNDtcXG4gICAgICAgICAgbGV0IG9iakVuZFNpemUgPSAwO1xcbiAgICAgICAgICBpZiAoKGRhdGFWaWV3LmdldFVpbnQzMihzaXplIC0gNCwgIV94Z3BsYXllclV0aWxzLmlzTGUpICYgMHgwMEZGRkZGRikgPT09IDkpIHtcXG4gICAgICAgICAgICBvYmpFbmRTaXplID0gMztcXG4gICAgICAgICAgfVxcblxcbiAgICAgICAgICB3aGlsZSAob2Zmc2V0IDwgc2l6ZSAtIDgpIHtcXG4gICAgICAgICAgICBjb25zdCBhbWZWYXIgPSB0aGlzLnBhcnNlT2JqZWN0KGJ1ZmZlciwgc2l6ZSAtIG9mZnNldCAtIG9iakVuZFNpemUpO1xcbiAgICAgICAgICAgIGlmIChhbWZWYXIuaXNPYmplY3RFbmQpIHtcXG4gICAgICAgICAgICAgIGJyZWFrO1xcbiAgICAgICAgICAgIH1cXG4gICAgICAgICAgICB2YWx1ZVthbWZWYXIuZGF0YS5uYW1lXSA9IGFtZlZhci5kYXRhLnZhbHVlO1xcbiAgICAgICAgICAgIG9mZnNldCArPSBhbWZWYXIuYm9keVNpemU7XFxuICAgICAgICAgIH1cXG4gICAgICAgICAgaWYgKG9mZnNldCA8PSBzaXplIC0gMykge1xcbiAgICAgICAgICAgIGNvbnN0IG1hcmtlciA9IGRhdGFWaWV3LmdldFVpbnQzMihvZmZzZXQgLSAxLCAhX3hncGxheWVyVXRpbHMuaXNMZSkgJiAweDAwRkZGRkZGO1xcbiAgICAgICAgICAgIGlmIChtYXJrZXIgPT09IDkpIHtcXG4gICAgICAgICAgICAgIG9mZnNldCArPSAzO1xcbiAgICAgICAgICAgICAgdGhpcy5yZWFkT2Zmc2V0ICs9IDM7XFxuICAgICAgICAgICAgfVxcbiAgICAgICAgICB9XFxuICAgICAgICAgIGJyZWFrO1xcbiAgICAgICAgfVxcblxcbiAgICAgIGNhc2UgT0JKRUNUX0VORDpcXG4gICAgICAgIHtcXG4gICAgICAgICAgdmFsdWUgPSBudWxsO1xcbiAgICAgICAgICBpc09iakVuZCA9IHRydWU7XFxuICAgICAgICAgIGJyZWFrO1xcbiAgICAgICAgfVxcblxcbiAgICAgIGNhc2UgU1RSSUNUX0FSUkFZOlxcbiAgICAgICAge1xcbiAgICAgICAgICB2YWx1ZSA9IFtdO1xcbiAgICAgICAgICBjb25zdCBhcnJMZW5ndGggPSBkYXRhVmlldy5nZXRVaW50MzIoMSwgIV94Z3BsYXllclV0aWxzLmlzTGUpO1xcbiAgICAgICAgICBvZmZzZXQgKz0gNDtcXG4gICAgICAgICAgdGhpcy5yZWFkT2Zmc2V0ICs9IDQ7XFxuICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYXJyTGVuZ3RoOyBpKyspIHtcXG4gICAgICAgICAgICBjb25zdCBzY3JpcHQgPSB0aGlzLnBhcnNlVmFsdWUoYnVmZmVyLCBzaXplIC0gb2Zmc2V0KTtcXG4gICAgICAgICAgICB2YWx1ZS5wdXNoKHNjcmlwdC5kYXRhKTtcXG4gICAgICAgICAgICBvZmZzZXQgKz0gc2NyaXB0LmJvZHlTaXplO1xcbiAgICAgICAgICB9XFxuICAgICAgICAgIGJyZWFrO1xcbiAgICAgICAgfVxcblxcbiAgICAgIGNhc2UgREFURTpcXG4gICAgICAgIHtcXG4gICAgICAgICAgY29uc3QgZGF0ZSA9IHRoaXMucGFyc2VEYXRlKGJ1ZmZlciwgc2l6ZSAtIDEpO1xcbiAgICAgICAgICB2YWx1ZSA9IGRhdGUuZGF0YTtcXG4gICAgICAgICAgb2Zmc2V0ICs9IGRhdGUuYm9keVNpemU7XFxuICAgICAgICAgIGJyZWFrO1xcbiAgICAgICAgfVxcblxcbiAgICAgIGNhc2UgTE9ORV9TVFJJTkc6XFxuICAgICAgICB7XFxuICAgICAgICAgIGNvbnN0IGxvbmdTdHIgPSB0aGlzLnBhcnNlTG9uZ1N0cmluZyhidWZmZXIsIHNpemUgLSAxKTtcXG4gICAgICAgICAgdmFsdWUgPSBsb25nU3RyLmRhdGE7XFxuICAgICAgICAgIG9mZnNldCArPSBsb25nU3RyLmJvZHlTaXplO1xcbiAgICAgICAgICBicmVhaztcXG4gICAgICAgIH1cXG5cXG4gICAgICBkZWZhdWx0OlxcbiAgICAgICAge1xcbiAgICAgICAgICBvZmZzZXQgPSBzaXplO1xcbiAgICAgICAgfVxcbiAgICB9XFxuXFxuICAgIHJldHVybiB7XFxuICAgICAgZGF0YTogdmFsdWUsXFxuICAgICAgYm9keVNpemU6IG9mZnNldCxcXG4gICAgICBpc09iakVuZDogaXNPYmpFbmRcXG4gICAgfTtcXG4gIH1cXG59XFxuZXhwb3J0cy5kZWZhdWx0ID0gQU1GUGFyc2VyO1xcblxcbi8vIyBzb3VyY2VVUkw9d2VicGFjazovL3hncGxheWVyLWZsdi8uLi94Z3BsYXllci1kZW11eC9zcmMvZmx2L2FtZi1wYXJzZXIuanM/XCIpfSxcIi4uL3hncGxheWVyLWRlbXV4L3NyYy9mbHYvaW5kZXguanNcIjpcbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuLi94Z3BsYXllci1kZW11eC9zcmMvZmx2L2luZGV4LmpzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgbm8gc3RhdGljIGV4cG9ydHMgZm91bmQgKi9mdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXtcInVzZSBzdHJpY3RcIjtldmFsKFwiXFxuXFxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFxcXCJfX2VzTW9kdWxlXFxcIiwge1xcbiAgdmFsdWU6IHRydWVcXG59KTtcXG5cXG52YXIgX3hncGxheWVyVXRpbHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISB4Z3BsYXllci11dGlscyAqLyBcXFwiLi4veGdwbGF5ZXItdXRpbHMvaW5kZXguanNcXFwiKTtcXG5cXG52YXIgX3hncGxheWVyQ29kZWMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISB4Z3BsYXllci1jb2RlYyAqLyBcXFwiLi4veGdwbGF5ZXItY29kZWMvaW5kZXguanNcXFwiKTtcXG5cXG52YXIgX3hncGxheWVyQnVmZmVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgeGdwbGF5ZXItYnVmZmVyICovIFxcXCIuLi94Z3BsYXllci1idWZmZXIvaW5kZXguanNcXFwiKTtcXG5cXG52YXIgX2FtZlBhcnNlciA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vYW1mLXBhcnNlciAqLyBcXFwiLi4veGdwbGF5ZXItZGVtdXgvc3JjL2Zsdi9hbWYtcGFyc2VyLmpzXFxcIik7XFxuXFxudmFyIF9hbWZQYXJzZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfYW1mUGFyc2VyKTtcXG5cXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxcblxcbmNvbnN0IERFTVVYX0VWRU5UUyA9IF94Z3BsYXllclV0aWxzLkVWRU5UUy5ERU1VWF9FVkVOVFM7XFxuXFxuY2xhc3MgRmx2RGVtdXhlciB7XFxuICBjb25zdHJ1Y3RvcigpIHtcXG4gICAgdGhpcy5fZmlyc3RGcmFnbWVudExvYWRlZCA9IGZhbHNlO1xcbiAgICB0aGlzLl90cmFja051bSA9IDA7XFxuICAgIHRoaXMuX2hhc1NjcmlwdCA9IGZhbHNlO1xcbiAgfVxcblxcbiAgaW5pdCgpIHtcXG4gICAgdGhpcy5vbihERU1VWF9FVkVOVFMuREVNVVhfU1RBUlQsIHRoaXMuZG9QYXJzZUZsdi5iaW5kKHRoaXMpKTtcXG4gIH1cXG5cXG4gIC8qKlxcbiAgICogaWYgdGhlIGZsdiBoZWFkIGlzIHZhbGlkXFxuICAgKiBAcGFyYW0gZGF0YVxcbiAgICogQHJldHVybnMge2Jvb2xlYW59XFxuICAgKi9cXG4gIHN0YXRpYyBpc0ZsdkZpbGUoZGF0YSkge1xcbiAgICByZXR1cm4gIShkYXRhWzBdICE9PSAweDQ2IHx8IGRhdGFbMV0gIT09IDB4NEMgfHwgZGF0YVsyXSAhPT0gMHg1NiB8fCBkYXRhWzNdICE9PSAweDAxKTtcXG4gIH1cXG5cXG4gIC8qKlxcbiAgICogSWYgdGhlIHN0cmVhbSBoYXMgYXVkaW8gb3IgdmlkZW8uXFxuICAgKiBAcGFyYW0ge251bWJlcn0gc3RyZWFtRmxhZyAtIERhdGEgZnJvbSB0aGUgc3RyZWFtIHdoaWNoIGlzIGRlZmluZSB3aGV0aGVyIHRoZSBhdWRpbyAvIHZpZGVvIHRyYWNrIGlzIGV4aXN0LlxcbiAgICovXFxuICBzdGF0aWMgZ2V0UGxheVR5cGUoc3RyZWFtRmxhZykge1xcbiAgICBjb25zdCByZXN1bHQgPSB7XFxuICAgICAgaGFzVmlkZW86IGZhbHNlLFxcbiAgICAgIGhhc0F1ZGlvOiBmYWxzZVxcbiAgICB9O1xcblxcbiAgICBpZiAoc3RyZWFtRmxhZyAmIDB4MDEgPiAwKSB7XFxuICAgICAgcmVzdWx0Lmhhc1ZpZGVvID0gdHJ1ZTtcXG4gICAgfVxcblxcbiAgICBpZiAoc3RyZWFtRmxhZyAmIDB4MDQgPiAwKSB7XFxuICAgICAgcmVzdWx0Lmhhc0F1ZGlvID0gdHJ1ZTtcXG4gICAgfVxcblxcbiAgICByZXR1cm4gcmVzdWx0O1xcbiAgfVxcblxcbiAgZG9QYXJzZUZsdigpIHtcXG4gICAgaWYgKCF0aGlzLl9maXJzdEZyYWdtZW50TG9hZGVkKSB7XFxuICAgICAgaWYgKHRoaXMubG9hZGVyQnVmZmVyLmxlbmd0aCA8IDEzKSB7XFxuICAgICAgICByZXR1cm47XFxuICAgICAgfVxcbiAgICAgIGNvbnN0IGhlYWRlciA9IHRoaXMubG9hZGVyQnVmZmVyLnNoaWZ0KDEzKTtcXG4gICAgICB0aGlzLnBhcnNlRmx2SGVhZGVyKGhlYWRlcik7XFxuICAgICAgdGhpcy5kb1BhcnNlRmx2KCk7IC8vIOmAkuW9kuiwg+eUqO+8jOe7p+e7reino+aekGZsdua1gVxcbiAgICB9IGVsc2Uge1xcbiAgICAgIGlmICh0aGlzLmxvYWRlckJ1ZmZlci5sZW5ndGggPCAxMSkge1xcbiAgICAgICAgcmV0dXJuO1xcbiAgICAgIH1cXG4gICAgICBsZXQgY2h1bms7XFxuICAgICAgZG8ge1xcbiAgICAgICAgY2h1bmsgPSB0aGlzLl9wYXJzZUZsdlRhZygpO1xcbiAgICAgIH0gd2hpbGUgKGNodW5rKTtcXG5cXG4gICAgICB0aGlzLmVtaXQoREVNVVhfRVZFTlRTLkRFTVVYX0NPTVBMRVRFKTtcXG4gICAgfVxcbiAgfVxcblxcbiAgcGFyc2VGbHZIZWFkZXIoaGVhZGVyKSB7XFxuICAgIGlmICghRmx2RGVtdXhlci5pc0ZsdkZpbGUoaGVhZGVyKSkge1xcbiAgICAgIHRoaXMuZW1pdChERU1VWF9FVkVOVFMuREVNVVhfRVJST1IsIG5ldyBFcnJvcignaW52YWxpZCBmbHYgZmlsZScpKTtcXG4gICAgICB0aGlzLmRvUGFyc2VGbHYoKTtcXG4gICAgfSBlbHNlIHtcXG4gICAgICB0aGlzLl9maXJzdEZyYWdtZW50TG9hZGVkID0gdHJ1ZTtcXG4gICAgICBjb25zdCBwbGF5VHlwZSA9IEZsdkRlbXV4ZXIuZ2V0UGxheVR5cGUoaGVhZGVyWzRdKTtcXG5cXG4gICAgICBpZiAocGxheVR5cGUuaGFzVmlkZW8pIHtcXG4gICAgICAgIHRoaXMuaW5pdFZpZGVvVHJhY2soKTtcXG4gICAgICB9XFxuXFxuICAgICAgaWYgKHBsYXlUeXBlLmhhc0F1ZGlvKSB7XFxuICAgICAgICB0aGlzLmluaXRBdWRpb1RyYWNrKCk7XFxuICAgICAgfVxcbiAgICB9XFxuICAgIHRoaXMuZG9QYXJzZUZsdigpO1xcbiAgfVxcblxcbiAgLyoqXFxuICAgKiBpbml0IGRlZmF1bHQgdmlkZW8gdHJhY2sgY29uZmlnc1xcbiAgICovXFxuICBpbml0VmlkZW9UcmFjaygpIHtcXG4gICAgdGhpcy5fdHJhY2tOdW0rKztcXG4gICAgbGV0IHZpZGVvVHJhY2sgPSBuZXcgX3hncGxheWVyQnVmZmVyLlZpZGVvVHJhY2soKTtcXG4gICAgdmlkZW9UcmFjay5tZXRhID0gbmV3IF94Z3BsYXllclV0aWxzLlZpZGVvVHJhY2tNZXRhKCk7XFxuICAgIHZpZGVvVHJhY2suaWQgPSB2aWRlb1RyYWNrLm1ldGEuaWQgPSB0aGlzLl90cmFja051bTtcXG5cXG4gICAgdGhpcy50cmFja3MudmlkZW9UcmFjayA9IHZpZGVvVHJhY2s7XFxuICB9XFxuXFxuICAvKipcXG4gICAqIGluaXQgZGVmYXVsdCBhdWRpbyB0cmFjayBjb25maWdzXFxuICAgKi9cXG4gIGluaXRBdWRpb1RyYWNrKCkge1xcbiAgICB0aGlzLl90cmFja051bSsrO1xcbiAgICBsZXQgYXVkaW9UcmFjayA9IG5ldyBfeGdwbGF5ZXJCdWZmZXIuQXVkaW9UcmFjaygpO1xcbiAgICBhdWRpb1RyYWNrLm1ldGEgPSBuZXcgX3hncGxheWVyVXRpbHMuQXVkaW9UcmFja01ldGEoKTtcXG4gICAgYXVkaW9UcmFjay5pZCA9IGF1ZGlvVHJhY2subWV0YS5pZCA9IHRoaXMuX3RyYWNrTnVtO1xcblxcbiAgICB0aGlzLnRyYWNrcy5hdWRpb1RyYWNrID0gYXVkaW9UcmFjaztcXG4gIH1cXG5cXG4gIC8qKlxcbiAgICogUGFja2FnZSB0aGUgZGF0YSBhcyB0aGUgZm9sbG93aW5nIGRhdGEgc3RydWN0dXJlXFxuICAgKiB7XFxuICAgKiAgICBkYXRhOiBVaW50OEFycmF5LiB0aGUgU3RyZWFtIGRhdGEuXFxuICAgKiAgICBpbmZvOiBUaGUgZmlyc3QgYnl0ZSBpbmZvIG9mIHRoZSBUYWcuXFxuICAgKiAgICB0YWdUeXBlOiA444CBOeOAgTE4XFxuICAgKiAgICB0aW1lU3RhbXA6IHRoZSB0aW1lc3RlbXBcXG4gICAqIH1cXG4gICAqL1xcbiAgX3BhcnNlRmx2VGFnKCkge1xcbiAgICBpZiAodGhpcy5sb2FkZXJCdWZmZXIubGVuZ3RoIDwgMTEpIHtcXG4gICAgICByZXR1cm4gbnVsbDtcXG4gICAgfVxcbiAgICBsZXQgY2h1bmsgPSB0aGlzLl9wYXJzZUZsdlRhZ0hlYWRlcigpO1xcbiAgICBpZiAoY2h1bmspIHtcXG4gICAgICB0aGlzLl9wcm9jZXNzQ2h1bmsoY2h1bmspO1xcbiAgICB9XFxuICAgIHJldHVybiBjaHVuaztcXG4gIH1cXG5cXG4gIC8qKlxcbiAgICogUGFyc2UgdGhlIDExIGJ5dGUgdGFnIEhlYWRlclxcbiAgICovXFxuICBfcGFyc2VGbHZUYWdIZWFkZXIoKSB7XFxuICAgIGxldCBvZmZzZXQgPSAwO1xcbiAgICBsZXQgY2h1bmsgPSB7fTtcXG5cXG4gICAgbGV0IHRhZ1R5cGUgPSB0aGlzLmxvYWRlckJ1ZmZlci50b0ludChvZmZzZXQsIDEpO1xcbiAgICBvZmZzZXQgKz0gMTtcXG5cXG4gICAgLy8gMiBiaXQgRk1TIHJlc2VydmVkLCAxIGJpdCBmaWx0ZXJlZCwgNSBiaXQgdGFnIHR5cGVcXG4gICAgY2h1bmsuZmlsdGVyZWQgPSAodGFnVHlwZSAmIDMyKSA+Pj4gNTtcXG4gICAgY2h1bmsudGFnVHlwZSA9IHRhZ1R5cGUgJiAzMTtcXG5cXG4gICAgLy8gMyBCeXRlIGRhdGFzaXplXFxuICAgIGNodW5rLmRhdGFzaXplID0gdGhpcy5sb2FkZXJCdWZmZXIudG9JbnQob2Zmc2V0LCAzKTtcXG4gICAgb2Zmc2V0ICs9IDM7XFxuXFxuICAgIGlmIChjaHVuay50YWdUeXBlICE9PSA4ICYmIGNodW5rLnRhZ1R5cGUgIT09IDkgJiYgY2h1bmsudGFnVHlwZSAhPT0gMTEgJiYgY2h1bmsudGFnVHlwZSAhPT0gMTggfHwgdGhpcy5sb2FkZXJCdWZmZXIudG9JbnQoOCwgMykgIT09IDApIHtcXG4gICAgICBpZiAodGhpcy5sb2FkZXJCdWZmZXIgJiYgdGhpcy5sb2FkZXJCdWZmZXIubGVuZ3RoID4gMCkge1xcbiAgICAgICAgdGhpcy5sb2FkZXJCdWZmZXIuc2hpZnQoMSk7XFxuICAgICAgfVxcbiAgICAgIHRoaXMubG9nZ2VyLndhcm4odGhpcy5UQUcsICd0YWdUeXBlICcgKyBjaHVuay50YWdUeXBlKTtcXG4gICAgICByZXR1cm4gbnVsbDtcXG4gICAgfVxcblxcbiAgICBpZiAodGhpcy5sb2FkZXJCdWZmZXIubGVuZ3RoIDwgY2h1bmsuZGF0YXNpemUgKyAxNSkge1xcbiAgICAgIHJldHVybiBudWxsO1xcbiAgICB9XFxuXFxuICAgIC8vIHJlYWQgdGhlIGRhdGEuXFxuICAgIHRoaXMubG9hZGVyQnVmZmVyLnNoaWZ0KDQpO1xcblxcbiAgICAvLyAzIEJ5dGUgdGltZXN0YW1wXFxuICAgIGxldCB0aW1lc3RhbXAgPSB0aGlzLmxvYWRlckJ1ZmZlci50b0ludCgwLCAzKTtcXG4gICAgdGhpcy5sb2FkZXJCdWZmZXIuc2hpZnQoMyk7XFxuXFxuICAgIC8vIDEgQnl0ZSB0aW1lc3RhbXBFeHRcXG4gICAgbGV0IHRpbWVzdGFtcEV4dCA9IHRoaXMubG9hZGVyQnVmZmVyLnNoaWZ0KDEpWzBdO1xcbiAgICBpZiAodGltZXN0YW1wRXh0ID4gMCkge1xcbiAgICAgIHRpbWVzdGFtcCArPSB0aW1lc3RhbXBFeHQgKiAweDEwMDAwMDA7XFxuICAgIH1cXG5cXG4gICAgY2h1bmsuZHRzID0gdGltZXN0YW1wO1xcblxcbiAgICAvLyBzdHJlYW1JZFxcbiAgICB0aGlzLmxvYWRlckJ1ZmZlci5zaGlmdCgzKTtcXG4gICAgcmV0dXJuIGNodW5rO1xcbiAgfVxcblxcbiAgX3Byb2Nlc3NDaHVuayhjaHVuaykge1xcbiAgICBzd2l0Y2ggKGNodW5rLnRhZ1R5cGUpIHtcXG4gICAgICBjYXNlIDE4OlxcbiAgICAgICAgdGhpcy5fcGFyc2VTY3JpcHREYXRhKGNodW5rKTtcXG4gICAgICAgIGJyZWFrO1xcbiAgICAgIGNhc2UgODpcXG4gICAgICAgIHRoaXMuX3BhcnNlQUFDRGF0YShjaHVuayk7XFxuICAgICAgICBicmVhaztcXG4gICAgICBjYXNlIDk6XFxuICAgICAgICB0aGlzLl9wYXJzZUhldmNEYXRhKGNodW5rKTtcXG4gICAgICAgIGJyZWFrO1xcbiAgICAgIGNhc2UgMTE6XFxuICAgICAgICAvLyBmb3Igc29tZSBDRE4gdGhhdCBkaWQgbm90IHByb2Nlc3MgdGhlIGN1cnJlY3QgUlRNUCBtZXNzYWdlc1xcbiAgICAgICAgdGhpcy5sb2FkZXJCdWZmZXIuc2hpZnQoMyk7XFxuICAgICAgICBicmVhaztcXG4gICAgICBkZWZhdWx0OlxcbiAgICAgICAgdGhpcy5sb2FkZXJCdWZmZXIuc2hpZnQoMSk7XFxuICAgIH1cXG4gIH1cXG5cXG4gIC8qKlxcbiAgICogcGFyc2UgZmx2IHNjcmlwdCBkYXRhXFxuICAgKiBAcGFyYW0gY2h1bmtcXG4gICAqIEBwcml2YXRlXFxuICAgKi9cXG4gIF9wYXJzZVNjcmlwdERhdGEoY2h1bmspIHtcXG4gICAgbGV0IGF1ZGlvVHJhY2sgPSB0aGlzLnRyYWNrcy5hdWRpb1RyYWNrO1xcbiAgICBsZXQgdmlkZW9UcmFjayA9IHRoaXMudHJhY2tzLnZpZGVvVHJhY2s7XFxuXFxuICAgIGxldCBkYXRhID0gdGhpcy5sb2FkZXJCdWZmZXIuc2hpZnQoY2h1bmsuZGF0YXNpemUpO1xcblxcbiAgICBjb25zdCBpbmZvID0gbmV3IF9hbWZQYXJzZXIyLmRlZmF1bHQoKS5yZXNvbHZlKGRhdGEsIGRhdGEubGVuZ3RoKTtcXG5cXG4gICAgY29uc3Qgb25NZXRhRGF0YSA9IHRoaXMuX2NvbnRleHQub25NZXRhRGF0YSA9IGluZm8gPyBpbmZvLm9uTWV0YURhdGEgOiB1bmRlZmluZWQ7XFxuXFxuICAgIC8vIGZpbGwgbWVkaWFJbmZvXFxuICAgIHRoaXMuX2NvbnRleHQubWVkaWFJbmZvLmR1cmF0aW9uID0gb25NZXRhRGF0YS5kdXJhdGlvbjtcXG4gICAgdGhpcy5fY29udGV4dC5tZWRpYUluZm8uaGFzVmlkZW8gPSBvbk1ldGFEYXRhLmhhc1ZpZGVvO1xcbiAgICB0aGlzLl9jb250ZXh0Lm1lZGlhSW5mby5oc2FBdWRpbyA9IG9uTWV0YURhdGEuaGFzQXVkaW87XFxuXFxuICAgIGxldCB2YWxpZGF0ZSA9IHRoaXMuX2RhdGFzaXplVmFsaWRhdG9yKGNodW5rLmRhdGFzaXplKTtcXG4gICAgaWYgKHZhbGlkYXRlKSB7XFxuICAgICAgdGhpcy5lbWl0KERFTVVYX0VWRU5UUy5NRURJQV9JTkZPKTtcXG4gICAgICB0aGlzLl9oYXNTY3JpcHQgPSB0cnVlO1xcbiAgICB9XFxuXFxuICAgIC8vIEVkaXQgZGVmYXVsdCBtZXRhLlxcbiAgICBpZiAoYXVkaW9UcmFjayAmJiAhYXVkaW9UcmFjay5oYXNTcGVjaWZpY0NvbmZpZykge1xcbiAgICAgIGxldCBtZXRhID0gYXVkaW9UcmFjay5tZXRhO1xcbiAgICAgIGlmIChvbk1ldGFEYXRhLmF1ZGlvc2FtcGxlcmF0ZSkge1xcbiAgICAgICAgbWV0YS5zYW1wbGVSYXRlID0gb25NZXRhRGF0YS5hdWRpb3NhbXBsZXJhdGU7XFxuICAgICAgfVxcblxcbiAgICAgIGlmIChvbk1ldGFEYXRhLmF1ZGlvY2hhbm5lbHMpIHtcXG4gICAgICAgIG1ldGEuY2hhbm5lbENvdW50ID0gb25NZXRhRGF0YS5hdWRpb2NoYW5uZWxzO1xcbiAgICAgIH1cXG5cXG4gICAgICBzd2l0Y2ggKG9uTWV0YURhdGEuYXVkaW9zYW1wbGVyYXRlKSB7XFxuICAgICAgICBjYXNlIDQ0MTAwOlxcbiAgICAgICAgICBtZXRhLnNhbXBsZVJhdGVJbmRleCA9IDQ7XFxuICAgICAgICAgIGJyZWFrO1xcbiAgICAgICAgY2FzZSAyMjA1MDpcXG4gICAgICAgICAgbWV0YS5zYW1wbGVSYXRlSW5kZXggPSA3O1xcbiAgICAgICAgICBicmVhaztcXG4gICAgICAgIGNhc2UgMTEwMjU6XFxuICAgICAgICAgIG1ldGEuc2FtcGxlUmF0ZUluZGV4ID0gMTA7XFxuICAgICAgICAgIGJyZWFrO1xcbiAgICAgIH1cXG4gICAgfVxcbiAgICBpZiAodmlkZW9UcmFjayAmJiAhdmlkZW9UcmFjay5oYXNTcGVjaWZpY0NvbmZpZykge1xcbiAgICAgIGxldCBtZXRhID0gdmlkZW9UcmFjay5tZXRhO1xcbiAgICAgIGlmICh0eXBlb2Ygb25NZXRhRGF0YS5mcmFtZXJhdGUgPT09ICdudW1iZXInKSB7XFxuICAgICAgICBsZXQgZnBzTnVtID0gTWF0aC5mbG9vcihvbk1ldGFEYXRhLmZyYW1lcmF0ZSAqIDEwMDApO1xcbiAgICAgICAgaWYgKGZwc051bSA+IDApIHtcXG4gICAgICAgICAgbGV0IGZwcyA9IGZwc051bSAvIDEwMDA7XFxuICAgICAgICAgIGlmICghbWV0YS5mcmFtZVJhdGUpIHtcXG4gICAgICAgICAgICBtZXRhLmZyYW1lUmF0ZSA9IHt9O1xcbiAgICAgICAgICB9XFxuICAgICAgICAgIG1ldGEuZnJhbWVSYXRlLmZpeGVkID0gdHJ1ZTtcXG4gICAgICAgICAgbWV0YS5mcmFtZVJhdGUuZnBzID0gZnBzO1xcbiAgICAgICAgICBtZXRhLmZyYW1lUmF0ZS5mcHNfbnVtID0gZnBzTnVtO1xcbiAgICAgICAgICBtZXRhLmZyYW1lUmF0ZS5mcHNfZGVuID0gMTAwMDtcXG4gICAgICAgIH1cXG4gICAgICB9XFxuICAgIH1cXG4gIH1cXG5cXG4gIF9hYWNTZXF1ZW5jZUhlYWRlclBhcnNlcihkYXRhKSB7XFxuICAgIGxldCByZXQgPSB7fTtcXG4gICAgcmV0Lmhhc1NwZWNpZmljQ29uZmlnID0gdHJ1ZTtcXG4gICAgcmV0Lm9iamVjdFR5cGUgPSBkYXRhWzFdID4+PiAzO1xcbiAgICByZXQuc2FtcGxlUmF0ZUluZGV4ID0gKGRhdGFbMV0gJiA3KSA8PCAxIHwgZGF0YVsyXSA+Pj4gNztcXG4gICAgcmV0LmF1ZGlvc2FtcGxlcmF0ZSA9IHRoaXMuX3N3aXRjaEF1ZGlvU2FtcGxlUmF0ZShyZXQuc2FtcGxlUmF0ZUluZGV4KTtcXG4gICAgcmV0LmNoYW5uZWxDb3VudCA9IChkYXRhWzJdICYgMTIwKSA+Pj4gMztcXG4gICAgcmV0LmZyYW1lTGVuZ3RoID0gKGRhdGFbMl0gJiA0KSA+Pj4gMjtcXG4gICAgcmV0LmRlcGVuZHNPbkNvcmVDb2RlciA9IChkYXRhWzJdICYgMikgPj4+IDE7XFxuICAgIHJldC5leHRlbnNpb25GbGFnSW5kZXggPSBkYXRhWzJdICYgMTtcXG5cXG4gICAgcmV0LmNvZGVjID0gYG1wNGEuNDAuJHtyZXQub2JqZWN0VHlwZX1gO1xcbiAgICBsZXQgdXNlckFnZW50ID0gd2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKTtcXG4gICAgbGV0IGV4dGVuc2lvblNhbXBsaW5nSW5kZXg7XFxuXFxuICAgIGxldCBjb25maWc7XFxuICAgIGxldCBzYW1wbGluZ0luZGV4ID0gcmV0LnNhbXBsZVJhdGVJbmRleDtcXG5cXG4gICAgaWYgKHVzZXJBZ2VudC5pbmRleE9mKCdmaXJlZm94JykgIT09IC0xKSB7XFxuICAgICAgLy8gZmlyZWZveDogdXNlIFNCUiAoSEUtQUFDKSBpZiBmcmVxIGxlc3MgdGhhbiAyNGtIelxcbiAgICAgIGlmIChyZXQuc2FtcGxlUmF0ZUluZGV4ID49IDYpIHtcXG4gICAgICAgIHJldC5vYmplY3RUeXBlID0gNTtcXG4gICAgICAgIGNvbmZpZyA9IG5ldyBBcnJheSg0KTtcXG4gICAgICAgIGV4dGVuc2lvblNhbXBsaW5nSW5kZXggPSBzYW1wbGluZ0luZGV4IC0gMztcXG4gICAgICB9IGVsc2Uge1xcbiAgICAgICAgLy8gdXNlIExDLUFBQ1xcbiAgICAgICAgcmV0Lm9iamVjdFR5cGUgPSAyO1xcbiAgICAgICAgY29uZmlnID0gbmV3IEFycmF5KDIpO1xcbiAgICAgICAgZXh0ZW5zaW9uU2FtcGxpbmdJbmRleCA9IHNhbXBsaW5nSW5kZXg7XFxuICAgICAgfVxcbiAgICB9IGVsc2UgaWYgKHVzZXJBZ2VudC5pbmRleE9mKCdhbmRyb2lkJykgIT09IC0xKSB7XFxuICAgICAgLy8gYW5kcm9pZDogYWx3YXlzIHVzZSBMQy1BQUNcXG4gICAgICByZXQub2JqZWN0VHlwZSA9IDI7XFxuICAgICAgY29uZmlnID0gbmV3IEFycmF5KDIpO1xcbiAgICAgIGV4dGVuc2lvblNhbXBsaW5nSW5kZXggPSBzYW1wbGluZ0luZGV4O1xcbiAgICB9IGVsc2Uge1xcbiAgICAgIC8vIGZvciBvdGhlciBicm93c2VycywgZS5nLiBjaHJvbWUuLi5cXG4gICAgICAvLyBBbHdheXMgdXNlIEhFLUFBQyB0byBtYWtlIGl0IGVhc2llciB0byBzd2l0Y2ggYWFjIGNvZGVjIHByb2ZpbGVcXG4gICAgICByZXQub2JqZWN0VHlwZSA9IDU7XFxuICAgICAgZXh0ZW5zaW9uU2FtcGxpbmdJbmRleCA9IHJldC5zYW1wbGVSYXRlSW5kZXg7XFxuICAgICAgY29uZmlnID0gbmV3IEFycmF5KDQpO1xcblxcbiAgICAgIGlmIChyZXQuc2FtcGxlUmF0ZUluZGV4ID49IDYpIHtcXG4gICAgICAgIGV4dGVuc2lvblNhbXBsaW5nSW5kZXggPSByZXQuc2FtcGxlUmF0ZUluZGV4IC0gMztcXG4gICAgICB9IGVsc2UgaWYgKHJldC5jaGFubmVsQ291bnQgPT09IDEpIHtcXG4gICAgICAgIC8vIE1vbm8gY2hhbm5lbFxcbiAgICAgICAgcmV0Lm9iamVjdFR5cGUgPSAyO1xcbiAgICAgICAgY29uZmlnID0gbmV3IEFycmF5KDIpO1xcbiAgICAgICAgZXh0ZW5zaW9uU2FtcGxpbmdJbmRleCA9IHJldC5zYW1wbGVSYXRlSW5kZXg7XFxuICAgICAgfVxcbiAgICB9XFxuXFxuICAgIGNvbmZpZ1swXSA9IHJldC5vYmplY3RUeXBlIDw8IDM7XFxuICAgIGNvbmZpZ1swXSB8PSAocmV0LnNhbXBsZVJhdGVJbmRleCAmIDB4MEYpID4+PiAxO1xcbiAgICBjb25maWdbMV0gPSAocmV0LnNhbXBsZVJhdGVJbmRleCAmIDB4MEYpIDw8IDc7XFxuICAgIGNvbmZpZ1sxXSB8PSAocmV0LmNoYW5uZWxDb3VudCAmIDB4MEYpIDw8IDM7XFxuICAgIGlmIChyZXQub2JqZWN0VHlwZSA9PT0gNSkge1xcbiAgICAgIGNvbmZpZ1sxXSB8PSAoZXh0ZW5zaW9uU2FtcGxpbmdJbmRleCAmIDB4MEYpID4+PiAxO1xcbiAgICAgIGNvbmZpZ1syXSA9IChleHRlbnNpb25TYW1wbGluZ0luZGV4ICYgMHgwMSkgPDwgNztcXG4gICAgICAvLyBleHRlbmRlZCBhdWRpbyBvYmplY3QgdHlwZTogZm9yY2UgdG8gMiAoTEMtQUFDKVxcbiAgICAgIGNvbmZpZ1syXSB8PSAyIDw8IDI7XFxuICAgICAgY29uZmlnWzNdID0gMDtcXG4gICAgfVxcbiAgICByZXQuY29uZmlnID0gY29uZmlnO1xcbiAgICByZXR1cm4gcmV0O1xcbiAgfVxcblxcbiAgX3BhcnNlQUFDRGF0YShjaHVuaykge1xcbiAgICBsZXQgdHJhY2sgPSB0aGlzLnRyYWNrcy5hdWRpb1RyYWNrO1xcbiAgICBpZiAoIXRyYWNrKSB7XFxuICAgICAgcmV0dXJuO1xcbiAgICB9XFxuXFxuICAgIGxldCBtZXRhID0gdHJhY2subWV0YTtcXG5cXG4gICAgaWYgKCFtZXRhKSB7XFxuICAgICAgbWV0YSA9IG5ldyBfeGdwbGF5ZXJVdGlscy5BdWRpb1RyYWNrTWV0YSgpO1xcbiAgICB9XFxuXFxuICAgIGxldCBpbmZvID0gdGhpcy5sb2FkZXJCdWZmZXIuc2hpZnQoMSlbMF07XFxuXFxuICAgIGNodW5rLmRhdGEgPSB0aGlzLmxvYWRlckJ1ZmZlci5zaGlmdChjaHVuay5kYXRhc2l6ZSAtIDEpO1xcblxcbiAgICBsZXQgZm9ybWF0ID0gKGluZm8gJiAyNDApID4+PiA0O1xcblxcbiAgICB0cmFjay5mb3JtYXQgPSBmb3JtYXQ7XFxuXFxuICAgIGlmIChmb3JtYXQgIT09IDEwKSB7XFxuICAgICAgdGhpcy5lbWl0KERFTVVYX0VWRU5UUy5ERU1VWF9FUlJPUiwgbmV3IEVycm9yKGBpbnZhbGlkIGF1ZGlvIGZvcm1hdDogJHtmb3JtYXR9YCkpO1xcbiAgICB9XFxuXFxuICAgIGlmIChmb3JtYXQgPT09IDEwICYmICF0aGlzLl9oYXNBdWRpb1NlcXVlbmNlKSB7XFxuICAgICAgbWV0YS5zYW1wbGVSYXRlID0gdGhpcy5fc3dpdGNoQXVkaW9TYW1wbGluZ0ZyZXF1ZW5jeShpbmZvKTtcXG4gICAgICBtZXRhLnNhbXBsZVJhdGVJbmRleCA9IChpbmZvICYgMTIpID4+PiAyO1xcbiAgICAgIG1ldGEuZnJhbWVMZW50aCA9IChpbmZvICYgMikgPj4+IDE7XFxuICAgICAgbWV0YS5jaGFubmVsQ291bnQgPSBpbmZvICYgMTtcXG4gICAgICBtZXRhLnJlZlNhbXBsZUR1cmF0aW9uID0gTWF0aC5mbG9vcigxMDI0IC8gbWV0YS5hdWRpb1NhbXBsZVJhdGUgKiBtZXRhLnRpbWVzY2FsZSk7XFxuICAgIH1cXG5cXG4gICAgbGV0IGF1ZGlvU2FtcGxlUmF0ZSA9IG1ldGEuYXVkaW9TYW1wbGVSYXRlO1xcbiAgICBsZXQgYXVkaW9TYW1wbGVSYXRlSW5kZXggPSBtZXRhLnNhbXBsZVJhdGVJbmRleDtcXG4gICAgbGV0IHJlZlNhbXBsZUR1cmF0aW9uID0gbWV0YS5yZWZTYW1wbGVEdXJhdGlvbjtcXG5cXG4gICAgZGVsZXRlIGNodW5rLnRhZ1R5cGU7XFxuICAgIGxldCB2YWxpZGF0ZSA9IHRoaXMuX2RhdGFzaXplVmFsaWRhdG9yKGNodW5rLmRhdGFzaXplKTtcXG5cXG4gICAgaWYgKGNodW5rLmRhdGFbMF0gPT09IDApIHtcXG4gICAgICAvLyBBQUMgU2VxdWVuY2UgSGVhZGVyXFxuICAgICAgbGV0IGFhY0hlYWRlciA9IHRoaXMuX2FhY1NlcXVlbmNlSGVhZGVyUGFyc2VyKGNodW5rLmRhdGEpO1xcbiAgICAgIGF1ZGlvU2FtcGxlUmF0ZSA9IGFhY0hlYWRlci5hdWRpb3NhbXBsZXJhdGUgfHwgbWV0YS5hdWRpb1NhbXBsZVJhdGU7XFxuICAgICAgYXVkaW9TYW1wbGVSYXRlSW5kZXggPSBhYWNIZWFkZXIuc2FtcGxlUmF0ZUluZGV4IHx8IG1ldGEuc2FtcGxlUmF0ZUluZGV4O1xcbiAgICAgIHJlZlNhbXBsZUR1cmF0aW9uID0gTWF0aC5mbG9vcigxMDI0IC8gYXVkaW9TYW1wbGVSYXRlICogbWV0YS50aW1lc2NhbGUpO1xcblxcbiAgICAgIG1ldGEuY2hhbm5lbENvdW50ID0gYWFjSGVhZGVyLmNoYW5uZWxDb3VudDtcXG4gICAgICBtZXRhLnNhbXBsZVJhdGUgPSBhdWRpb1NhbXBsZVJhdGU7XFxuICAgICAgbWV0YS5zYW1wbGVSYXRlSW5kZXggPSBhdWRpb1NhbXBsZVJhdGVJbmRleDtcXG4gICAgICBtZXRhLnJlZlNhbXBsZUR1cmF0aW9uID0gcmVmU2FtcGxlRHVyYXRpb247XFxuICAgICAgbWV0YS5kdXJhdGlvbiA9IHRoaXMuX2NvbnRleHQubWVkaWFJbmZvLmR1cmF0aW9uICogbWV0YS50aW1lc2NhbGU7XFxuICAgICAgbWV0YS5jb25maWcgPSBhYWNIZWFkZXIuY29uZmlnO1xcbiAgICAgIG1ldGEub2JqZWN0VHlwZSA9IGFhY0hlYWRlci5vYmplY3RUeXBlO1xcblxcbiAgICAgIGNvbnN0IGF1ZGlvTWVkaWEgPSB0aGlzLl9jb250ZXh0Lm1lZGlhSW5mby5hdWRpbztcXG5cXG4gICAgICAvLyBmaWxsIGF1ZGlvIG1lZGlhIGluZm9cXG4gICAgICBhdWRpb01lZGlhLmNvZGVjID0gYWFjSGVhZGVyLmNvZGVjO1xcbiAgICAgIGF1ZGlvTWVkaWEuY2hhbm5lbENvdW50ID0gYWFjSGVhZGVyLmNoYW5uZWxDb3VudDtcXG4gICAgICBhdWRpb01lZGlhLnNhbXBsZVJhdGUgPSBhdWRpb1NhbXBsZVJhdGU7XFxuICAgICAgYXVkaW9NZWRpYS5zYW1wbGVSYXRlSW5kZXggPSBhYWNIZWFkZXIuYXVkaW9TYW1wbGVSYXRlSW5kZXg7XFxuXFxuICAgICAgaWYgKHRoaXMuX2hhc1NjcmlwdCAmJiAhdGhpcy5faGFzQXVkaW9TZXF1ZW5jZSkge1xcbiAgICAgICAgdGhpcy5lbWl0KERFTVVYX0VWRU5UUy5NRVRBREFUQV9QQVJTRUQsICdhdWRpbycpO1xcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5faGFzU2NyaXB0ICYmIHRoaXMuX2hhc0F1ZGlvU2VxdWVuY2UpIHtcXG4gICAgICAgIHRoaXMuZW1pdChERU1VWF9FVkVOVFMuQVVESU9fTUVUQURBVEFfQ0hBTkdFKTtcXG4gICAgICB9XFxuICAgICAgO1xcbiAgICAgIHRoaXMuX2hhc0F1ZGlvU2VxdWVuY2UgPSB0cnVlO1xcbiAgICB9IGVsc2Uge1xcbiAgICAgIGNodW5rLmRhdGEgPSBjaHVuay5kYXRhLnNsaWNlKDEsIGNodW5rLmRhdGEubGVuZ3RoKTtcXG4gICAgICB0cmFjay5zYW1wbGVzLnB1c2goY2h1bmspO1xcbiAgICB9XFxuICAgIGlmICghdmFsaWRhdGUpIHtcXG4gICAgICBjb25zdCBlcnJvciA9IG5ldyBFcnJvcignVEFHIGxlbmd0aCBlcnJvciBhdCAnICsgY2h1bmsuZGF0YXNpemUpO1xcbiAgICAgIHRoaXMuZW1pdChERU1VWF9FVkVOVFMuREVNVVhfRVJST1IsIGVycm9yLm1lc3NhZ2UpO1xcbiAgICAgIHRoaXMubG9nZ2VyLndhcm4odGhpcy5UQUcsIGVycm9yLm1lc3NhZ2UpO1xcbiAgICB9XFxuICB9XFxuXFxuICAvKipcXG4gICAqIHBhcnNlIGhldmMvYXZjIHZpZGVvIGRhdGFcXG4gICAqIEBwYXJhbSBjaHVua1xcbiAgICogQHByaXZhdGVcXG4gICAqL1xcbiAgX3BhcnNlSGV2Y0RhdGEoY2h1bmspIHtcXG4gICAgLy8gaGVhZGVyXFxuICAgIGxldCBpbmZvID0gdGhpcy5sb2FkZXJCdWZmZXIuc2hpZnQoMSlbMF07XFxuICAgIGNodW5rLmZyYW1lVHlwZSA9IChpbmZvICYgMHhmMCkgPj4+IDQ7XFxuICAgIGNodW5rLmlzS2V5ZnJhbWUgPSBjaHVuay5mcmFtZVR5cGUgPT09IDE7XFxuICAgIC8vIGxldCB0ZW1wQ29kZWNJRCA9IHRoaXMudHJhY2tzLnZpZGVvVHJhY2suY29kZWNJRFxcbiAgICBsZXQgY29kZWNJRCA9IGluZm8gJiAweDBmO1xcbiAgICB0aGlzLnRyYWNrcy52aWRlb1RyYWNrLmNvZGVjSUQgPSBjb2RlY0lEO1xcblxcbiAgICAvLyBoZXZj5ZKMYXZj55qEaGVhZGVy6Kej5p6Q5pa55byP5LiA5qC3XFxuICAgIGNodW5rLmF2Y1BhY2tldFR5cGUgPSB0aGlzLmxvYWRlckJ1ZmZlci5zaGlmdCgxKVswXTtcXG4gICAgY2h1bmsuY3RzID0gdGhpcy5sb2FkZXJCdWZmZXIudG9JbnQoMCwgMyk7XFxuICAgIHRoaXMubG9hZGVyQnVmZmVyLnNoaWZ0KDMpO1xcblxcbiAgICAvLyAxMiBmb3IgaGV2YywgNyBmb3IgYXZjXFxuICAgIGlmIChjb2RlY0lEID09PSAxMikge1xcbiAgICAgIGNvbnN0IGRhdGEgPSB0aGlzLmxvYWRlckJ1ZmZlci5zaGlmdChjaHVuay5kYXRhc2l6ZSAtIDUpO1xcbiAgICAgIGNodW5rLmRhdGEgPSBkYXRhO1xcblxcbiAgICAgIGlmIChOdW1iZXIucGFyc2VJbnQoY2h1bmsuYXZjUGFja2V0VHlwZSkgIT09IDApIHtcXG4gICAgICAgIGlmICghdGhpcy5fZGF0YXNpemVWYWxpZGF0b3IoY2h1bmsuZGF0YXNpemUpKSB7XFxuICAgICAgICAgIHRoaXMubG9nZ2VyLndhcm4odGhpcy5UQUcsIGBpbnZhbGlkIHZpZGVvIHRhZyBkYXRhc2l6ZTogJHtjaHVuay5kYXRhc2l6ZX1gKTtcXG4gICAgICAgIH1cXG4gICAgICAgIGxldCBuYWx1ID0ge307XFxuICAgICAgICBsZXQgciA9IDA7XFxuICAgICAgICBuYWx1LmN0cyA9IGNodW5rLmN0cztcXG4gICAgICAgIG5hbHUuZHRzID0gY2h1bmsuZHRzO1xcbiAgICAgICAgd2hpbGUgKGNodW5rLmRhdGEubGVuZ3RoID4gcikge1xcbiAgICAgICAgICBsZXQgc2l6ZXMgPSBjaHVuay5kYXRhLnNsaWNlKE51bWJlci5wYXJzZUludChyKSwgNCArIHIpO1xcbiAgICAgICAgICBuYWx1LnNpemUgPSBzaXplc1szXTtcXG4gICAgICAgICAgbmFsdS5zaXplICs9IHNpemVzWzJdICogMjU2O1xcbiAgICAgICAgICBuYWx1LnNpemUgKz0gc2l6ZXNbMV0gKiAyNTYgKiAyNTY7XFxuICAgICAgICAgIG5hbHUuc2l6ZSArPSBzaXplc1swXSAqIDI1NiAqIDI1NiAqIDI1NjtcXG4gICAgICAgICAgciArPSA0O1xcbiAgICAgICAgICBuYWx1LmRhdGEgPSBjaHVuay5kYXRhLnNsaWNlKE51bWJlci5wYXJzZUludChyKSwgbmFsdS5zaXplICsgcik7XFxuICAgICAgICAgIHIgKz0gbmFsdS5zaXplO1xcbiAgICAgICAgICB0aGlzLnRyYWNrcy52aWRlb1RyYWNrLnNhbXBsZXMucHVzaChuYWx1KTtcXG4gICAgICAgICAgdGhpcy5lbWl0KERFTVVYX0VWRU5UUy5NRVRBREFUQV9QQVJTRUQsICd2aWRlbycpO1xcbiAgICAgICAgfVxcbiAgICAgIH0gZWxzZSBpZiAoTnVtYmVyLnBhcnNlSW50KGNodW5rLmF2Y1BhY2tldFR5cGUpID09PSAwKSB7XFxuICAgICAgICBpZiAoIXRoaXMuX2RhdGFzaXplVmFsaWRhdG9yKGNodW5rLmRhdGFzaXplKSkge1xcbiAgICAgICAgICB0aGlzLmxvZ2dlci53YXJuKHRoaXMuVEFHLCBgaW52YWxpZCB2aWRlbyB0YWcgZGF0YXNpemU6ICR7Y2h1bmsuZGF0YXNpemV9YCk7XFxuICAgICAgICB9IGVsc2Uge1xcbiAgICAgICAgICB0aGlzLmVtaXQoREVNVVhfRVZFTlRTLk1FVEFEQVRBX1BBUlNFRCwgJ3ZpZGVvJyk7XFxuICAgICAgICB9XFxuICAgICAgfVxcbiAgICB9IGVsc2UgaWYgKGNvZGVjSUQgPT09IDcpIHtcXG4gICAgICBsZXQgZGF0YSA9IHRoaXMubG9hZGVyQnVmZmVyLnNoaWZ0KGNodW5rLmRhdGFzaXplIC0gNSk7XFxuICAgICAgaWYgKGRhdGFbNF0gPT09IDAgJiYgZGF0YVs1XSA9PT0gMCAmJiBkYXRhWzZdID09PSAwICYmIGRhdGFbN10gPT09IDEpIHtcXG4gICAgICAgIGxldCBhdmNjbGVuZ3RoID0gMDtcXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgNDsgaSsrKSB7XFxuICAgICAgICAgIGF2Y2NsZW5ndGggPSBhdmNjbGVuZ3RoICogMjU2ICsgZGF0YVtpXTtcXG4gICAgICAgIH1cXG4gICAgICAgIGF2Y2NsZW5ndGggLT0gNDtcXG4gICAgICAgIGRhdGEgPSBkYXRhLnNsaWNlKDQsIGRhdGEubGVuZ3RoKTtcXG4gICAgICAgIGRhdGFbM10gPSBhdmNjbGVuZ3RoICUgMjU2O1xcbiAgICAgICAgYXZjY2xlbmd0aCA9IChhdmNjbGVuZ3RoIC0gZGF0YVszXSkgLyAyNTY7XFxuICAgICAgICBkYXRhWzJdID0gYXZjY2xlbmd0aCAlIDI1NjtcXG4gICAgICAgIGF2Y2NsZW5ndGggPSAoYXZjY2xlbmd0aCAtIGRhdGFbMl0pIC8gMjU2O1xcbiAgICAgICAgZGF0YVsxXSA9IGF2Y2NsZW5ndGggJSAyNTY7XFxuICAgICAgICBkYXRhWzBdID0gKGF2Y2NsZW5ndGggLSBkYXRhWzFdKSAvIDI1NjtcXG4gICAgICB9XFxuXFxuICAgICAgY2h1bmsuZGF0YSA9IGRhdGE7XFxuICAgICAgLy8gSWYgaXQgaXMgQVZDIHNlcXVlY2UgSGVhZGVyLlxcbiAgICAgIGlmIChjaHVuay5hdmNQYWNrZXRUeXBlID09PSAwKSB7XFxuICAgICAgICB0aGlzLl9hdmNTZXF1ZW5jZUhlYWRlclBhcnNlcihjaHVuay5kYXRhKTtcXG4gICAgICAgIGxldCB2YWxpZGF0ZSA9IHRoaXMuX2RhdGFzaXplVmFsaWRhdG9yKGNodW5rLmRhdGFzaXplKTtcXG4gICAgICAgIGlmICh2YWxpZGF0ZSkge1xcbiAgICAgICAgICBpZiAodGhpcy5faGFzU2NyaXB0ICYmICF0aGlzLl9oYXNWaWRlb1NlcXVlbmNlKSB7XFxuICAgICAgICAgICAgdGhpcy5lbWl0KERFTVVYX0VWRU5UUy5NRVRBREFUQV9QQVJTRUQsICd2aWRlbycpO1xcbiAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuX2hhc1NjcmlwdCAmJiB0aGlzLl9oYXNWaWRlb1NlcXVlbmNlKSB7XFxuICAgICAgICAgICAgdGhpcy5lbWl0KERFTVVYX0VWRU5UUy5WSURFT19NRVRBREFUQV9DSEFOR0UpO1xcbiAgICAgICAgICB9XFxuICAgICAgICAgIHRoaXMuX2hhc1ZpZGVvU2VxdWVuY2UgPSB0cnVlO1xcbiAgICAgICAgfVxcbiAgICAgIH0gZWxzZSB7XFxuICAgICAgICBpZiAoIXRoaXMuX2RhdGFzaXplVmFsaWRhdG9yKGNodW5rLmRhdGFzaXplKSkge1xcbiAgICAgICAgICB0aGlzLmxvZ2dlci53YXJuKHRoaXMuVEFHLCBgaW52YWxpZCB2aWRlbyB0YWcgZGF0YXNpemU6ICR7Y2h1bmsuZGF0YXNpemV9YCk7XFxuICAgICAgICAgIHJldHVybjtcXG4gICAgICAgIH1cXG4gICAgICAgIHRoaXMudHJhY2tzLnZpZGVvVHJhY2suc2FtcGxlcy5wdXNoKGNodW5rKTtcXG4gICAgICAgIC8vIHRoaXMuZW1pdChERU1VWF9FVkVOVFMuREVNVVhfQ09NUExFVEUpXFxuICAgICAgfVxcbiAgICB9IGVsc2Uge1xcbiAgICAgIHRoaXMubG9nZ2VyLndhcm4odGhpcy5UQUcsIGB2aWRlbyBjb2RlaWQgaXMgJHtjb2RlY0lEfWApO1xcbiAgICAgIGNodW5rLmRhdGEgPSB0aGlzLmxvYWRlckJ1ZmZlci5zaGlmdChjaHVuay5kYXRhc2l6ZSAtIDEpO1xcbiAgICAgIGlmICghdGhpcy5fZGF0YXNpemVWYWxpZGF0b3IoY2h1bmsuZGF0YXNpemUpKSB7XFxuICAgICAgICB0aGlzLmxvZ2dlci53YXJuKHRoaXMuVEFHLCBgaW52YWxpZCB2aWRlbyB0YWcgZGF0YXNpemU6ICR7Y2h1bmsuZGF0YXNpemV9YCk7XFxuICAgICAgfVxcbiAgICAgIHRoaXMudHJhY2tzLnZpZGVvVHJhY2suc2FtcGxlcy5wdXNoKGNodW5rKTtcXG4gICAgICB0aGlzLmVtaXQoREVNVVhfRVZFTlRTLkRFTVVYX0NPTVBMRVRFKTtcXG4gICAgfVxcbiAgICBkZWxldGUgY2h1bmsudGFnVHlwZTtcXG4gIH1cXG5cXG4gIC8qKlxcbiAgICogcGFyc2UgYXZjIG1ldGFkYXRhXFxuICAgKiBAcGFyYW0gZGF0YVxcbiAgICogQHByaXZhdGVcXG4gICAqL1xcbiAgX2F2Y1NlcXVlbmNlSGVhZGVyUGFyc2VyKGRhdGEpIHtcXG4gICAgbGV0IHRyYWNrID0gdGhpcy50cmFja3MudmlkZW9UcmFjaztcXG5cXG4gICAgaWYgKCF0cmFjaykge1xcbiAgICAgIHJldHVybjtcXG4gICAgfVxcblxcbiAgICBsZXQgb2Zmc2V0ID0gMDtcXG5cXG4gICAgaWYgKCF0cmFjay5tZXRhKSB7XFxuICAgICAgdHJhY2subWV0YSA9IG5ldyBfeGdwbGF5ZXJVdGlscy5WaWRlb1RyYWNrTWV0YSgpO1xcbiAgICB9XFxuICAgIGxldCBtZXRhID0gdHJhY2subWV0YTtcXG5cXG4gICAgbWV0YS5jb25maWd1cmF0aW9uVmVyc2lvbiA9IGRhdGFbMF07XFxuICAgIG1ldGEuYXZjUHJvZmlsZUluZGljYXRpb24gPSBkYXRhWzFdO1xcbiAgICBtZXRhLnByb2ZpbGVDb21wYXRpYmlsaXR5ID0gZGF0YVsyXTtcXG4gICAgbWV0YS5hdmNMZXZlbEluZGljYXRpb24gPSBkYXRhWzNdIC8gMTA7XFxuICAgIG1ldGEubmFsVW5pdExlbmd0aCA9IChkYXRhWzRdICYgMHgwMykgKyAxO1xcblxcbiAgICBsZXQgbnVtT2ZTcHMgPSBkYXRhWzVdICYgMHgxZjtcXG4gICAgb2Zmc2V0ID0gNjtcXG4gICAgbGV0IGNvbmZpZyA9IHt9O1xcblxcbiAgICAvLyBwYXJzZSBTUFNcXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBudW1PZlNwczsgaSsrKSB7XFxuICAgICAgbGV0IHNpemUgPSBkYXRhW29mZnNldF0gKiAyNTUgKyBkYXRhW29mZnNldCArIDFdO1xcbiAgICAgIG9mZnNldCArPSAyO1xcblxcbiAgICAgIGxldCBzcHMgPSBuZXcgVWludDhBcnJheShzaXplKTtcXG4gICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHNpemU7IGorKykge1xcbiAgICAgICAgc3BzW2pdID0gZGF0YVtvZmZzZXQgKyBqXTtcXG4gICAgICB9XFxuXFxuICAgICAgLy8gY29kZWMgc3RyaW5nXFxuICAgICAgbGV0IGNvZGVjU3RyaW5nID0gJ2F2YzEuJztcXG4gICAgICBmb3IgKGxldCBqID0gMTsgaiA8IDQ7IGorKykge1xcbiAgICAgICAgbGV0IGggPSBzcHNbal0udG9TdHJpbmcoMTYpO1xcbiAgICAgICAgaWYgKGgubGVuZ3RoIDwgMikge1xcbiAgICAgICAgICBoID0gJzAnICsgaDtcXG4gICAgICAgIH1cXG4gICAgICAgIGNvZGVjU3RyaW5nICs9IGg7XFxuICAgICAgfVxcblxcbiAgICAgIG1ldGEuY29kZWMgPSBjb2RlY1N0cmluZztcXG5cXG4gICAgICBvZmZzZXQgKz0gc2l6ZTtcXG4gICAgICB0aGlzLnRyYWNrcy52aWRlb1RyYWNrLm1ldGEuc3BzID0gc3BzO1xcbiAgICAgIGNvbmZpZyA9IF94Z3BsYXllckNvZGVjLlNwc1BhcnNlci5wYXJzZVNQUyhzcHMpO1xcbiAgICB9XFxuXFxuICAgIGxldCBudW1PZlBwcyA9IGRhdGFbb2Zmc2V0XTtcXG5cXG4gICAgb2Zmc2V0Kys7XFxuXFxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbnVtT2ZQcHM7IGkrKykge1xcbiAgICAgIGxldCBzaXplID0gZGF0YVtvZmZzZXRdICogMjU1ICsgZGF0YVtvZmZzZXQgKyAxXTtcXG4gICAgICBvZmZzZXQgKz0gMjtcXG4gICAgICBsZXQgcHBzID0gbmV3IFVpbnQ4QXJyYXkoc2l6ZSk7XFxuICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBzaXplOyBqKyspIHtcXG4gICAgICAgIHBwc1tqXSA9IGRhdGFbb2Zmc2V0ICsgal07XFxuICAgICAgfVxcbiAgICAgIG9mZnNldCArPSBzaXplO1xcbiAgICAgIHRoaXMudHJhY2tzLnZpZGVvVHJhY2subWV0YS5wcHMgPSBwcHM7XFxuICAgIH1cXG5cXG4gICAgT2JqZWN0LmFzc2lnbihtZXRhLCBfeGdwbGF5ZXJDb2RlYy5TcHNQYXJzZXIudG9WaWRlb01ldGEoY29uZmlnKSk7XFxuXFxuICAgIC8vIGZpbGwgdmlkZW8gbWVkaWEgaW5mb1xcbiAgICBjb25zdCB2aWRlb01lZGlhID0gdGhpcy5fY29udGV4dC5tZWRpYUluZm8udmlkZW87XFxuXFxuICAgIHZpZGVvTWVkaWEuY29kZWMgPSBtZXRhLmNvZGVjO1xcbiAgICB2aWRlb01lZGlhLnByb2ZpbGUgPSBtZXRhLnByb2ZpbGU7XFxuICAgIHZpZGVvTWVkaWEubGV2ZWwgPSBtZXRhLmxldmVsO1xcbiAgICB2aWRlb01lZGlhLmNocm9tYUZvcm1hdCA9IG1ldGEuY2hyb21hRm9ybWF0O1xcbiAgICB2aWRlb01lZGlhLmZyYW1lUmF0ZSA9IG1ldGEuZnJhbWVSYXRlO1xcbiAgICB2aWRlb01lZGlhLnBhclJhdGlvID0gbWV0YS5wYXJSYXRpbztcXG4gICAgdmlkZW9NZWRpYS53aWR0aCA9IHZpZGVvTWVkaWEud2lkdGggPT09IG1ldGEucHJlc2VudFdpZHRoID8gdmlkZW9NZWRpYS53aWR0aCA6IG1ldGEucHJlc2VudFdpZHRoO1xcbiAgICB2aWRlb01lZGlhLmhlaWdodCA9IHZpZGVvTWVkaWEuaGVpZ2h0ID09PSBtZXRhLnByZXNlbnRIZWlnaHQgPyB2aWRlb01lZGlhLndpZHRoIDogbWV0YS5wcmVzZW50SGVpZ2h0O1xcblxcbiAgICBtZXRhLmR1cmF0aW9uID0gdGhpcy5fY29udGV4dC5tZWRpYUluZm8uZHVyYXRpb24gKiBtZXRhLnRpbWVzY2FsZTtcXG4gICAgbWV0YS5hdmNjID0gbmV3IFVpbnQ4QXJyYXkoZGF0YS5sZW5ndGgpO1xcbiAgICBtZXRhLmF2Y2Muc2V0KGRhdGEpO1xcbiAgICB0cmFjay5tZXRhID0gbWV0YTtcXG4gIH1cXG5cXG4gIC8qKlxcbiAgICogY2hvb3NlIGF1ZGlvIHNhbXBsZSByYXRlXFxuICAgKiBAcGFyYW0gc2FtcGxpbmdGcmVxdWVuY3lJbmRleFxcbiAgICogQHJldHVybnMge251bWJlcn1cXG4gICAqIEBwcml2YXRlXFxuICAgKi9cXG4gIF9zd2l0Y2hBdWRpb1NhbXBsZVJhdGUoc2FtcGxpbmdGcmVxdWVuY3lJbmRleCkge1xcbiAgICBsZXQgc2FtcGxpbmdGcmVxdWVuY3lMaXN0ID0gWzk2MDAwLCA4ODIwMCwgNjQwMDAsIDQ4MDAwLCA0NDEwMCwgMzIwMDAsIDI0MDAwLCAyMjA1MCwgMTYwMDAsIDEyMDAwLCAxMTAyNSwgODAwMCwgNzM1MF07XFxuICAgIHJldHVybiBzYW1wbGluZ0ZyZXF1ZW5jeUxpc3Rbc2FtcGxpbmdGcmVxdWVuY3lJbmRleF07XFxuICB9XFxuXFxuICAvKipcXG4gICAqIGNob29zZSBhdWRpbyBzYW1wbGluZyBmcmVxdWVuY2VcXG4gICAqIEBwYXJhbSBpbmZvXFxuICAgKiBAcmV0dXJucyB7bnVtYmVyfVxcbiAgICogQHByaXZhdGVcXG4gICAqL1xcbiAgX3N3aXRjaEF1ZGlvU2FtcGxpbmdGcmVxdWVuY3koaW5mbykge1xcbiAgICBsZXQgc2FtcGxpbmdGcmVxdWVuY3lJbmRleCA9IChpbmZvICYgMTIpID4+PiAyO1xcbiAgICBsZXQgc2FtcGxpbmdGcmVxdWVuY3lMaXN0ID0gWzU1MDAsIDExMDI1LCAyMjA1MCwgNDQxMDAsIDQ4MDAwXTtcXG4gICAgcmV0dXJuIHNhbXBsaW5nRnJlcXVlbmN5TGlzdFtzYW1wbGluZ0ZyZXF1ZW5jeUluZGV4XTtcXG4gIH1cXG5cXG4gIC8qKlxcbiAgICogY2hvb3NlIGF1ZGlvIGNoYW5uZWwgY291bnRcXG4gICAqIEBwYXJhbSBpbmZvXFxuICAgKiBAcmV0dXJucyB7bnVtYmVyfVxcbiAgICogQHByaXZhdGVcXG4gICAqL1xcbiAgX3N3aXRjaEF1ZGlvQ2hhbm5lbChpbmZvKSB7XFxuICAgIGxldCBzYW1wbGVUcmFja051bUluZGV4ID0gaW5mbyAmIDE7XFxuICAgIGxldCBzYW1wbGVUcmFja051bUxpc3QgPSBbMSwgMl07XFxuICAgIHJldHVybiBzYW1wbGVUcmFja051bUxpc3Rbc2FtcGxlVHJhY2tOdW1JbmRleF07XFxuICB9XFxuXFxuICAvKipcXG4gICAqIGNoZWNrIGRhdGFzaXplIGlzIHZhbGlkIHVzZSA0IEJ5dGUgYWZ0ZXIgY3VycmVudCB0YWdcXG4gICAqIEBwYXJhbSBkYXRhc2l6ZVxcbiAgICogQHJldHVybnMge2Jvb2xlYW59XFxuICAgKiBAcHJpdmF0ZVxcbiAgICovXFxuICBfZGF0YXNpemVWYWxpZGF0b3IoZGF0YXNpemUpIHtcXG4gICAgbGV0IGRhdGFzaXplQ29uZmlybSA9IHRoaXMubG9hZGVyQnVmZmVyLnRvSW50KDAsIDQpO1xcbiAgICB0aGlzLmxvYWRlckJ1ZmZlci5zaGlmdCg0KTtcXG4gICAgcmV0dXJuIGRhdGFzaXplQ29uZmlybSA9PT0gZGF0YXNpemUgKyAxMTtcXG4gIH1cXG5cXG4gIGdldCBsb2FkZXJCdWZmZXIoKSB7XFxuICAgIGlmICh0aGlzLl9jb250ZXh0LmdldEluc3RhbmNlKCdMT0FERVJfQlVGRkVSJykpIHtcXG4gICAgICByZXR1cm4gdGhpcy5fY29udGV4dC5nZXRJbnN0YW5jZSgnTE9BREVSX0JVRkZFUicpO1xcbiAgICB9IGVsc2Uge1xcbiAgICAgIHRoaXMuZW1pdChERU1VWF9FVkVOVFMuREVNVVhfRVJST1IsIG5ldyBFcnJvcign5om+5LiN5YiwIGxvYWRlckJ1ZmZlciDlrp7kvosnKSk7XFxuICAgIH1cXG4gIH1cXG5cXG4gIGdldCB0cmFja3MoKSB7XFxuICAgIHJldHVybiB0aGlzLl9jb250ZXh0LmdldEluc3RhbmNlKCdUUkFDS1MnKTtcXG4gIH1cXG5cXG4gIGdldCBsb2dnZXIoKSB7XFxuICAgIHJldHVybiB0aGlzLl9jb250ZXh0LmdldEluc3RhbmNlKCdMT0dHRVInKTtcXG4gIH1cXG59XFxuXFxuZXhwb3J0cy5kZWZhdWx0ID0gRmx2RGVtdXhlcjtcXG5cXG4vLyMgc291cmNlVVJMPXdlYnBhY2s6Ly94Z3BsYXllci1mbHYvLi4veGdwbGF5ZXItZGVtdXgvc3JjL2Zsdi9pbmRleC5qcz9cIil9LFwiLi4veGdwbGF5ZXItZGVtdXgvc3JjL2hscy9kZW11eGVyL20zdThwYXJzZXIuanNcIjpcbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi4veGdwbGF5ZXItZGVtdXgvc3JjL2hscy9kZW11eGVyL20zdThwYXJzZXIuanMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgbm8gc3RhdGljIGV4cG9ydHMgZm91bmQgKi9mdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXtcInVzZSBzdHJpY3RcIjtldmFsKFwiXFxuXFxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFxcXCJfX2VzTW9kdWxlXFxcIiwge1xcbiAgdmFsdWU6IHRydWVcXG59KTtcXG4vKipcXG4gKiBSZWZlcmVuY2U6IGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmM4MjE2I3NlY3Rpb24tNC4zXFxuICovXFxuY2xhc3MgTTNVOFBhcnNlciB7XFxuICBzdGF0aWMgcGFyc2UodGV4dCwgYmFzZXVybCA9ICcnKSB7XFxuICAgIGxldCByZXQgPSB7XFxuICAgICAgZHVyYXRpb246IDBcXG4gICAgfTtcXG4gICAgaWYgKCF0ZXh0IHx8ICF0ZXh0LnNwbGl0KSB7XFxuICAgICAgcmV0dXJuO1xcbiAgICB9XFxuICAgIGxldCByZWZzID0gdGV4dC5zcGxpdCgvXFxcXHJ8XFxcXG4vKTtcXG4gICAgcmVmcyA9IHJlZnMuZmlsdGVyKHJlZiA9PiB7XFxuICAgICAgcmV0dXJuIHJlZjtcXG4gICAgfSk7XFxuICAgIGxldCByZWYgPSByZWZzLnNoaWZ0KCk7XFxuICAgIGlmICghcmVmLm1hdGNoKCcjRVhUTTNVJykpIHtcXG4gICAgICAvLyBUT0RPOk0zVeagvOW8j+mUmeivr+OAglxcbiAgICAgIHJldHVybiBudWxsO1xcbiAgICB9XFxuICAgIHJlZiA9IHJlZnMuc2hpZnQoKTtcXG4gICAgd2hpbGUgKHJlZikge1xcbiAgICAgIGxldCByZWZtID0gcmVmLm1hdGNoKC8jKC4qKTooLiopLyk7XFxuICAgICAgaWYgKHJlZm0gJiYgcmVmbS5sZW5ndGggPiAyKSB7XFxuICAgICAgICBzd2l0Y2ggKHJlZm1bMV0pIHtcXG4gICAgICAgICAgY2FzZSAnRVhULVgtVkVSU0lPTic6XFxuICAgICAgICAgICAgcmV0LnZlcnNpb24gPSBwYXJzZUludChyZWZtWzJdKTtcXG4gICAgICAgICAgICBicmVhaztcXG4gICAgICAgICAgY2FzZSAnRVhULVgtTUVESUEtU0VRVUVOQ0UnOlxcbiAgICAgICAgICAgIHJldC5zZXF1ZW5jZSA9IHBhcnNlSW50KHJlZm1bMl0pO1xcbiAgICAgICAgICAgIGJyZWFrO1xcbiAgICAgICAgICBjYXNlICdFWFQtWC1UQVJHRVREVVJBVElPTic6XFxuICAgICAgICAgICAgcmV0LnRhcmdldGR1cmF0aW9uID0gcGFyc2VGbG9hdChyZWZtWzJdKTtcXG4gICAgICAgICAgICBicmVhaztcXG4gICAgICAgICAgY2FzZSAnRVhUSU5GJzpcXG4gICAgICAgICAgICBNM1U4UGFyc2VyLnBhcnNlRnJhZyhyZWZtLCByZWZzLCByZXQsIGJhc2V1cmwpO1xcbiAgICAgICAgICAgIGJyZWFrO1xcbiAgICAgICAgICBkZWZhdWx0OlxcbiAgICAgICAgICAgIGJyZWFrO1xcbiAgICAgICAgfVxcbiAgICAgIH1cXG4gICAgICByZWYgPSByZWZzLnNoaWZ0KCk7XFxuICAgIH1cXG4gICAgcmV0dXJuIHJldDtcXG4gIH1cXG5cXG4gIHN0YXRpYyBwYXJzZUZyYWcocmVmbSwgcmVmcywgcmV0LCBiYXNldXJsKSB7XFxuICAgIGlmICghcmV0LmZyYWdzKSB7XFxuICAgICAgcmV0LmZyYWdzID0gW107XFxuICAgIH1cXG5cXG4gICAgbGV0IGZyZWcgPSB7XFxuICAgICAgc3RhcnQ6IHJldC5kdXJhdGlvbixcXG4gICAgICBkdXJhdGlvbjogcGFyc2VGbG9hdChyZWZtWzJdKSAqIDEwMDBcXG4gICAgfTtcXG5cXG4gICAgcmV0LmR1cmF0aW9uICs9IGZyZWcuZHVyYXRpb247XFxuICAgIGxldCBuZXh0bGluZSA9IHJlZnMuc2hpZnQoKTtcXG4gICAgaWYgKG5leHRsaW5lLm1hdGNoKC8jKC4qKTooLiopLykpIHtcXG4gICAgICBuZXh0bGluZSA9IHJlZnMuc2hpZnQoKTtcXG4gICAgfVxcbiAgICBpZiAobmV4dGxpbmUubGVuZ3RoID4gMCAmJiBuZXh0bGluZS5jaGFyQXQoMCkgPT09ICcvJyAmJiBiYXNldXJsLm1hdGNoKC8uKlxcXFwvXFxcXC8uKlxcXFwuXFxcXHcrL2cpKSB7XFxuICAgICAgYmFzZXVybCA9IGJhc2V1cmwubWF0Y2goLy4qXFxcXC9cXFxcLy4qXFxcXC5cXFxcdysvZylbMF07XFxuICAgIH1cXG4gICAgaWYgKG5leHRsaW5lLm1hdGNoKC8uKjpcXFxcL1xcXFwvLiovKSkge1xcbiAgICAgIGZyZWcudXJsID0gbmV4dGxpbmU7XFxuICAgIH0gZWxzZSB7XFxuICAgICAgZnJlZy51cmwgPSBiYXNldXJsICsgbmV4dGxpbmU7XFxuICAgIH1cXG5cXG4gICAgcmV0LmZyYWdzLnB1c2goZnJlZyk7XFxuICB9XFxuXFxuICBzdGF0aWMgcGFyc2VVUkwodXJsKSB7XFxuICAgIGxldCBiYXNldXJsID0gJyc7XFxuICAgIGxldCB1cmxzID0gdXJsLm1hdGNoKC8oLipcXFxcLykuKlxcXFwubTN1OC8pO1xcbiAgICBpZiAodXJscyAmJiB1cmxzLmxlbmd0aCA+IDApIHtcXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHVybHMubGVuZ3RoOyBpKyspIHtcXG4gICAgICAgIGlmICh1cmxzW2ldLm1hdGNoKC8uKlxcXFwvJC9nKSAmJiB1cmxzW2ldLmxlbmd0aCA+IGJhc2V1cmwubGVuZ3RoKSB7XFxuICAgICAgICAgIGJhc2V1cmwgPSB1cmxzW2ldO1xcbiAgICAgICAgfVxcbiAgICAgIH1cXG4gICAgfVxcbiAgICByZXR1cm4gYmFzZXVybDtcXG4gIH1cXG59XFxuXFxuZXhwb3J0cy5kZWZhdWx0ID0gTTNVOFBhcnNlcjtcXG5cXG4vLyMgc291cmNlVVJMPXdlYnBhY2s6Ly94Z3BsYXllci1mbHYvLi4veGdwbGF5ZXItZGVtdXgvc3JjL2hscy9kZW11eGVyL20zdThwYXJzZXIuanM/XCIpfSxcIi4uL3hncGxheWVyLWRlbXV4L3NyYy9obHMvZGVtdXhlci90cy5qc1wiOlxuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi4veGdwbGF5ZXItZGVtdXgvc3JjL2hscy9kZW11eGVyL3RzLmpzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBubyBzdGF0aWMgZXhwb3J0cyBmb3VuZCAqL2Z1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pe1widXNlIHN0cmljdFwiO2V2YWwoXCJcXG5cXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXFxcIl9fZXNNb2R1bGVcXFwiLCB7XFxuICB2YWx1ZTogdHJ1ZVxcbn0pO1xcblxcbnZhciBfeGdwbGF5ZXJDb2RlYyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIHhncGxheWVyLWNvZGVjICovIFxcXCIuLi94Z3BsYXllci1jb2RlYy9pbmRleC5qc1xcXCIpO1xcblxcbnZhciBfeGdwbGF5ZXJCdWZmZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISB4Z3BsYXllci1idWZmZXIgKi8gXFxcIi4uL3hncGxheWVyLWJ1ZmZlci9pbmRleC5qc1xcXCIpO1xcblxcbnZhciBfeGdwbGF5ZXJVdGlscyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIHhncGxheWVyLXV0aWxzICovIFxcXCIuLi94Z3BsYXllci11dGlscy9pbmRleC5qc1xcXCIpO1xcblxcbmNvbnN0IERFTVVYX0VWRU5UUyA9IF94Z3BsYXllclV0aWxzLkVWRU5UUy5ERU1VWF9FVkVOVFM7XFxuY29uc3QgU3RyZWFtVHlwZSA9IHtcXG4gIDB4MDE6IFsndmlkZW8nLCAnTVBFRy0xJ10sXFxuICAweDAyOiBbJ3ZpZGVvJywgJ01QRUctMiddLFxcbiAgMHgxYjogWyd2aWRlbycsICdBVkMuSDI2NCddLFxcbiAgMHhlYTogWyd2aWRlbycsICdWQy0xJ10sXFxuICAweDAzOiBbJ2F1ZGlvJywgJ01QRUctMSddLFxcbiAgMHgwNDogWydhdWRpbycsICdNUEVHLTInXSxcXG4gIDB4MGY6IFsnYXVkaW8nLCAnTVBFRy0yLkFBQyddLFxcbiAgMHgxMTogWydhdWRpbycsICdNUEVHLTQuQUFDJ10sXFxuICAweDgwOiBbJ2F1ZGlvJywgJ0xQQ00nXSxcXG4gIDB4ODE6IFsnYXVkaW8nLCAnQUMzJ10sXFxuICAweDA2OiBbJ2F1ZGlvJywgJ0FDMyddLFxcbiAgMHg4MjogWydhdWRpbycsICdEVFMnXSxcXG4gIDB4ODM6IFsnYXVkaW8nLCAnRG9sYnkgVHJ1ZUhEJ10sXFxuICAweDg0OiBbJ2F1ZGlvJywgJ0FDMy1QbHVzJ10sXFxuICAweDg1OiBbJ2F1ZGlvJywgJ0RUUy1IRCddLFxcbiAgMHg4NjogWydhdWRpbycsICdEVFMtTUEnXSxcXG4gIDB4YTE6IFsnYXVkaW8nLCAnQUMzLVBsdXMtU0VDJ10sXFxuICAweGEyOiBbJ2F1ZGlvJywgJ0RUUy1IRC1TRUMnXVxcbn07XFxuXFxuY2xhc3MgVHNEZW11eGVyIHtcXG4gIGNvbnN0cnVjdG9yKGNvbmZpZ3MpIHtcXG4gICAgdGhpcy5jb25maWdzID0gT2JqZWN0LmFzc2lnbih7fSwgY29uZmlncyk7XFxuICAgIHRoaXMuZGVtdXhpbmcgPSBmYWxzZTtcXG4gICAgdGhpcy5wYXQgPSBbXTtcXG4gICAgdGhpcy5wbXQgPSBbXTtcXG4gICAgdGhpcy5faGFzVmlkZW9NZXRhID0gZmFsc2U7XFxuICAgIHRoaXMuX2hhc0F1ZGlvTWV0YSA9IGZhbHNlO1xcbiAgfVxcblxcbiAgaW5pdCgpIHtcXG4gICAgdGhpcy5vbihERU1VWF9FVkVOVFMuREVNVVhfU1RBUlQsIHRoaXMuZGVtdXguYmluZCh0aGlzKSk7XFxuICB9XFxuXFxuICBkZW11eCgpIHtcXG4gICAgaWYgKHRoaXMuZGVtdXhpbmcpIHtcXG4gICAgICByZXR1cm47XFxuICAgIH1cXG5cXG4gICAgbGV0IGJ1ZmZlciA9IHRoaXMuaW5wdXRCdWZmZXI7XFxuICAgIGxldCBmcmFncyA9IHsgcGF0OiBbXSwgcG10OiBbXSB9O1xcbiAgICBsZXQgcGVzZXMgPSB7fTtcXG5cXG4gICAgLy8gUmVhZCBUUyBzZWdtZW50XFxuICAgIHdoaWxlIChidWZmZXIubGVuZ3RoID49IDE4OCkge1xcbiAgICAgIHdoaWxlIChidWZmZXIubGVuZ3RoID49IDEgJiYgYnVmZmVyLmFycmF5WzBdW2J1ZmZlci5vZmZzZXRdICE9PSA3MSkge1xcbiAgICAgICAgYnVmZmVyLnNoaWZ0KDEpO1xcbiAgICAgIH1cXG4gICAgICBsZXQgYnVmID0gYnVmZmVyLnNoaWZ0KDE4OCk7XFxuICAgICAgLy8gY29uc29sZS5sb2coYnVmKTtcXG4gICAgICBsZXQgdHNTdHJlYW0gPSBuZXcgX3hncGxheWVyVXRpbHMuU3RyZWFtKGJ1Zi5idWZmZXIpO1xcbiAgICAgIGxldCB0cyA9IHt9O1xcbiAgICAgIFRzRGVtdXhlci5yZWFkKHRzU3RyZWFtLCB0cywgZnJhZ3MpO1xcbiAgICAgIGlmICh0cy5wZXMpIHtcXG4gICAgICAgIGlmICghcGVzZXNbdHMuaGVhZGVyLnBpZF0pIHtcXG4gICAgICAgICAgcGVzZXNbdHMuaGVhZGVyLnBpZF0gPSBbXTtcXG4gICAgICAgIH1cXG4gICAgICAgIHBlc2VzW3RzLmhlYWRlci5waWRdLnB1c2godHMucGVzKTtcXG4gICAgICAgIHRzLnBlcy5FUy5idWZmZXIgPSBbdHMucGVzLkVTLmJ1ZmZlcl07XFxuICAgICAgfSBlbHNlIGlmIChwZXNlc1t0cy5oZWFkZXIucGlkXSkge1xcbiAgICAgICAgcGVzZXNbdHMuaGVhZGVyLnBpZF1bcGVzZXNbdHMuaGVhZGVyLnBpZF0ubGVuZ3RoIC0gMV0uRVMuYnVmZmVyLnB1c2godHMucGF5bG9hZC5zdHJlYW0pO1xcbiAgICAgIH1cXG4gICAgfVxcblxcbiAgICAvLyBHZXQgRnJhbWVzIGRhdGFcXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBPYmplY3Qua2V5cyhwZXNlcykubGVuZ3RoOyBpKyspIHtcXG4gICAgICBsZXQgZXBlc2VzID0gcGVzZXNbT2JqZWN0LmtleXMocGVzZXMpW2ldXTtcXG4gICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGVwZXNlcy5sZW5ndGg7IGorKykge1xcbiAgICAgICAgZXBlc2VzW2pdLmlkID0gT2JqZWN0LmtleXMocGVzZXMpW2ldO1xcbiAgICAgICAgZXBlc2VzW2pdLkVTLmJ1ZmZlciA9IFRzRGVtdXhlci5NZXJnZShlcGVzZXNbal0uRVMuYnVmZmVyKTtcXG4gICAgICAgIGlmIChlcGVzZXNbal0udHlwZSA9PT0gJ2F1ZGlvJykge1xcbiAgICAgICAgICB0aGlzLnB1c2hBdWRpb1NhbXBsZShlcGVzZXNbal0pO1xcbiAgICAgICAgfSBlbHNlIGlmIChlcGVzZXNbal0udHlwZSA9PT0gJ3ZpZGVvJykge1xcbiAgICAgICAgICB0aGlzLnB1c2hWaWRlb1NhbXBsZShlcGVzZXNbal0pO1xcbiAgICAgICAgfVxcbiAgICAgIH1cXG4gICAgfVxcblxcbiAgICBpZiAodGhpcy5faGFzQXVkaW9NZXRhKSB7XFxuICAgICAgdGhpcy5lbWl0KERFTVVYX0VWRU5UUy5ERU1VWF9DT01QTEVURSwgJ2F1ZGlvJyk7XFxuICAgIH1cXG4gICAgaWYgKHRoaXMuX2hhc1ZpZGVvTWV0YSkge1xcbiAgICAgIHRoaXMuZW1pdChERU1VWF9FVkVOVFMuREVNVVhfQ09NUExFVEUsICd2aWRlbycpO1xcbiAgICB9XFxuICB9XFxuXFxuICBwdXNoQXVkaW9TYW1wbGUocGVzKSB7XFxuICAgIGxldCB0cmFjaztcXG4gICAgaWYgKCF0aGlzLl90cmFja3MuYXVkaW9UcmFjaykge1xcbiAgICAgIHRoaXMuX3RyYWNrcy5hdWRpb1RyYWNrID0gbmV3IF94Z3BsYXllckJ1ZmZlci5BdWRpb1RyYWNrKCk7XFxuICAgICAgdHJhY2sgPSB0aGlzLl90cmFja3MuYXVkaW9UcmFjaztcXG4gICAgICB0cmFjay5tZXRhID0gbmV3IF94Z3BsYXllclV0aWxzLkF1ZGlvVHJhY2tNZXRhKHtcXG4gICAgICAgIGF1ZGlvU2FtcGxlUmF0ZTogcGVzLkVTLmZyZXF1ZW5jZSxcXG4gICAgICAgIHNhbXBsZVJhdGU6IHBlcy5FUy5mcmVxdWVuY2UsXFxuICAgICAgICBjaGFubmVsQ291bnQ6IHBlcy5FUy5jaGFubmVsLFxcbiAgICAgICAgY29kZWM6ICdtcDRhLjQwLicgKyBwZXMuRVMuYXVkaW9PYmplY3RUeXBlLFxcbiAgICAgICAgY29uZmlnOiBwZXMuRVMuYXVkaW9Db25maWcsXFxuICAgICAgICBpZDogMixcXG4gICAgICAgIHNhbXBsZVJhdGVJbmRleDogcGVzLkVTLmZyZXF1ZW5jeUluZGV4XFxuICAgICAgfSk7XFxuICAgICAgdHJhY2subWV0YS5yZWZTYW1wbGVEdXJhdGlvbiA9IE1hdGguZmxvb3IoMTAyNCAvIHRyYWNrLm1ldGEuYXVkaW9TYW1wbGVSYXRlICogdHJhY2subWV0YS50aW1lc2NhbGUpO1xcbiAgICAgIGlmICghdGhpcy5faGFzQXVkaW9NZXRhKSB7XFxuICAgICAgICB0aGlzLl9oYXNBdWRpb01ldGEgPSB0cnVlO1xcbiAgICAgICAgdGhpcy5lbWl0KERFTVVYX0VWRU5UUy5NRVRBREFUQV9QQVJTRUQsICdhdWRpbycpO1xcbiAgICAgIH1cXG4gICAgfSBlbHNlIHtcXG4gICAgICB0cmFjayA9IHRoaXMuX3RyYWNrcy5hdWRpb1RyYWNrO1xcbiAgICB9XFxuICAgIGxldCBkYXRhID0gbmV3IFVpbnQ4QXJyYXkocGVzLkVTLmJ1ZmZlci5idWZmZXIuc2xpY2UocGVzLkVTLmJ1ZmZlci5wb3NpdGlvbiwgcGVzLkVTLmJ1ZmZlci5sZW5ndGgpKTtcXG4gICAgbGV0IGR0cyA9IHBhcnNlSW50KHBlcy5wdHMgLyA5MCk7XFxuICAgIGxldCBwdHMgPSBwYXJzZUludChwZXMucHRzIC8gOTApO1xcbiAgICBsZXQgc2FtcGxlID0gbmV3IF94Z3BsYXllclV0aWxzLkF1ZGlvVHJhY2tTYW1wbGUoeyBkdHMsIHB0cywgZGF0YSB9KTtcXG4gICAgdHJhY2suc2FtcGxlcy5wdXNoKHNhbXBsZSk7XFxuICB9XFxuXFxuICBwdXNoVmlkZW9TYW1wbGUocGVzKSB7XFxuICAgIGxldCBuYWxzID0gX3hncGxheWVyQ29kZWMuTmFsdW5pdC5nZXROYWx1bml0cyhwZXMuRVMuYnVmZmVyKTtcXG4gICAgbGV0IHRyYWNrO1xcbiAgICBpZiAoIXRoaXMuX3RyYWNrcy52aWRlb1RyYWNrKSB7XFxuICAgICAgdGhpcy5fdHJhY2tzLnZpZGVvVHJhY2sgPSBuZXcgX3hncGxheWVyQnVmZmVyLlZpZGVvVHJhY2soKTtcXG4gICAgICB0cmFjayA9IHRoaXMuX3RyYWNrcy52aWRlb1RyYWNrO1xcbiAgICAgIHRyYWNrLm1ldGEgPSBuZXcgX3hncGxheWVyVXRpbHMuVmlkZW9UcmFja01ldGEoKTtcXG4gICAgfSBlbHNlIHtcXG4gICAgICB0cmFjayA9IHRoaXMuX3RyYWNrcy52aWRlb1RyYWNrO1xcbiAgICB9XFxuICAgIGxldCBzYW1wbGVMZW5ndGggPSAwO1xcbiAgICBsZXQgc3BzID0gZmFsc2U7XFxuICAgIGxldCBwcHMgPSBmYWxzZTtcXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBuYWxzLmxlbmd0aDsgaSsrKSB7XFxuICAgICAgbGV0IG5hbCA9IG5hbHNbaV07XFxuICAgICAgaWYgKG5hbC5zcHMpIHtcXG4gICAgICAgIC8vIFRPRE/vvJpWaWRlb1RyYWNr5L+h5oGvIOWSjCBNZXRhIOS/oeaBr1xcbiAgICAgICAgaWYgKHRyYWNrLnNwcyAmJiBUc0RlbXV4ZXIuY29tcGFpcmVVaW50OChuYWwuYm9keSwgdHJhY2suc3BzKSkge1xcbiAgICAgICAgICBjb250aW51ZTtcXG4gICAgICAgIH1cXG5cXG4gICAgICAgIHNwcyA9IG5hbDtcXG4gICAgICAgIHRyYWNrLnNwcyA9IG5hbC5ib2R5O1xcbiAgICAgICAgdHJhY2subWV0YS5jaHJvbWFGb3JtYXQgPSBzcHMuc3BzLmNocm9tYV9mb3JtYXQ7XFxuICAgICAgICB0cmFjay5tZXRhLmNvZGVjID0gJ2F2YzEuJztcXG4gICAgICAgIGZvciAodmFyIGogPSAxOyBqIDwgNDsgaisrKSB7XFxuICAgICAgICAgIHZhciBoID0gc3BzLmJvZHlbal0udG9TdHJpbmcoMTYpO1xcbiAgICAgICAgICBpZiAoaC5sZW5ndGggPCAyKSB7XFxuICAgICAgICAgICAgaCA9ICcwJyArIGg7XFxuICAgICAgICAgIH1cXG4gICAgICAgICAgdHJhY2subWV0YS5jb2RlYyArPSBoO1xcbiAgICAgICAgfVxcbiAgICAgICAgdHJhY2subWV0YS5jb2RlY0hlaWdodCA9IHNwcy5zcHMuY29kZWNfc2l6ZS5oZWlnaHQ7XFxuICAgICAgICB0cmFjay5tZXRhLmNvZGVjV2lkdGggPSBzcHMuc3BzLmNvZGVjX3NpemUud2lkdGg7XFxuICAgICAgICB0cmFjay5tZXRhLmZyYW1lUmF0ZSA9IHNwcy5zcHMuZnJhbWVfcmF0ZTtcXG4gICAgICAgIHRyYWNrLm1ldGEuaWQgPSAxO1xcbiAgICAgICAgdHJhY2subWV0YS5sZXZlbCA9IHNwcy5zcHMubGV2ZWxfc3RyaW5nO1xcbiAgICAgICAgdHJhY2subWV0YS5wcmVzZW50SGVpZ2h0ID0gc3BzLnNwcy5wcmVzZW50X3NpemUuaGVpZ2h0O1xcbiAgICAgICAgdHJhY2subWV0YS5wcmVzZW50V2lkdGggPSBzcHMuc3BzLnByZXNlbnRfc2l6ZS53aWR0aDtcXG4gICAgICAgIHRyYWNrLm1ldGEucHJvZmlsZSA9IHNwcy5zcHMucHJvZmlsZV9zdHJpbmc7XFxuICAgICAgICB0cmFjay5tZXRhLnJlZlNhbXBsZUR1cmF0aW9uID0gTWF0aC5mbG9vcih0cmFjay5tZXRhLnRpbWVzY2FsZSAqIChzcHMuc3BzLmZyYW1lX3JhdGUuZnBzX2RlbiAvIHNwcy5zcHMuZnJhbWVfcmF0ZS5mcHNfbnVtKSk7XFxuICAgICAgICB0cmFjay5tZXRhLnNhclJhdGlvID0gc3BzLnNwcy5zYXJfcmF0aW8gPyBzcHMuc3BzLnNhcl9yYXRpbyA6IHNwcy5zcHMucGFyX3JhdGlvO1xcbiAgICAgIH0gZWxzZSBpZiAobmFsLnBwcykge1xcbiAgICAgICAgdHJhY2sucHBzID0gbmFsLmJvZHk7XFxuICAgICAgICBwcHMgPSBuYWw7XFxuICAgICAgfSBlbHNlIHtcXG4gICAgICAgIHNhbXBsZUxlbmd0aCArPSA0ICsgbmFsLmJvZHkuYnl0ZUxlbmd0aDtcXG4gICAgICB9XFxuICAgIH1cXG5cXG4gICAgaWYgKHNwcyAmJiBwcHMpIHtcXG4gICAgICB0cmFjay5tZXRhLmF2Y2MgPSBfeGdwbGF5ZXJDb2RlYy5OYWx1bml0LmdldEF2Y2Moc3BzLmJvZHksIHBwcy5ib2R5KTtcXG4gICAgICBpZiAoIXRoaXMuX2hhc1ZpZGVvTWV0YSkge1xcbiAgICAgICAgdGhpcy5faGFzVmlkZW9NZXRhID0gdHJ1ZTtcXG4gICAgICAgIHRoaXMuZW1pdChERU1VWF9FVkVOVFMuTUVUQURBVEFfUEFSU0VELCAndmlkZW8nKTtcXG4gICAgICB9XFxuICAgIH1cXG5cXG4gICAgbGV0IGRhdGEgPSBuZXcgVWludDhBcnJheShzYW1wbGVMZW5ndGgpO1xcbiAgICBsZXQgb2Zmc2V0ID0gMDtcXG4gICAgbGV0IGlzS2V5ZnJhbWUgPSBmYWxzZTtcXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBuYWxzLmxlbmd0aDsgaSsrKSB7XFxuICAgICAgbGV0IG5hbCA9IG5hbHNbaV07XFxuICAgICAgbGV0IGxlbmd0aCA9IG5hbC5ib2R5LmJ5dGVMZW5ndGg7XFxuICAgICAgaWYgKG5hbC5pZHIpIHtcXG4gICAgICAgIGlzS2V5ZnJhbWUgPSB0cnVlO1xcbiAgICAgIH1cXG4gICAgICBpZiAoIW5hbC5wcHMgJiYgIW5hbC5zcHMpIHtcXG4gICAgICAgIGRhdGEuc2V0KG5ldyBVaW50OEFycmF5KFtsZW5ndGggPj4+IDI0ICYgMHhmZiwgbGVuZ3RoID4+PiAxNiAmIDB4ZmYsIGxlbmd0aCA+Pj4gOCAmIDB4ZmYsIGxlbmd0aCAmIDB4ZmZdKSwgb2Zmc2V0KTtcXG4gICAgICAgIG9mZnNldCArPSA0O1xcbiAgICAgICAgZGF0YS5zZXQobmFsLmJvZHksIG9mZnNldCk7XFxuICAgICAgICBvZmZzZXQgKz0gbGVuZ3RoO1xcbiAgICAgIH1cXG4gICAgfVxcbiAgICBsZXQgc2FtcGxlID0gbmV3IF94Z3BsYXllclV0aWxzLlZpZGVvVHJhY2tTYW1wbGUoe1xcbiAgICAgIGR0czogcGFyc2VJbnQocGVzLmR0cyAvIDkwKSxcXG4gICAgICBwdHM6IHBhcnNlSW50KHBlcy5wdHMgLyA5MCksXFxuICAgICAgY3RzOiAocGVzLnB0cyAtIHBlcy5kdHMpIC8gOTAsXFxuICAgICAgb3JpZ2luRHRzOiBwZXMuZHRzLFxcbiAgICAgIGlzS2V5ZnJhbWUsXFxuICAgICAgZGF0YVxcbiAgICB9KTtcXG4gICAgdHJhY2suc2FtcGxlcy5wdXNoKHNhbXBsZSk7XFxuICB9XFxuXFxuICBkZXN0b3J5KCkge1xcbiAgICB0aGlzLm9mZihERU1VWF9FVkVOVFMuREVNVVhfU1RBUlQsIHRoaXMuZGVtdXgpO1xcbiAgICB0aGlzLmNvbmZpZ3MgPSB7fTtcXG4gICAgdGhpcy5kZW11eGluZyA9IGZhbHNlO1xcbiAgICB0aGlzLnBhdCA9IFtdO1xcbiAgICB0aGlzLnBtdCA9IFtdO1xcbiAgICB0aGlzLl9oYXNWaWRlb01ldGEgPSBmYWxzZTtcXG4gICAgdGhpcy5faGFzQXVkaW9NZXRhID0gZmFsc2U7XFxuICB9XFxuXFxuICBzdGF0aWMgY29tcGFpcmVVaW50OChhLCBiKSB7XFxuICAgIGlmIChhLmJ5dGVMZW5ndGggIT09IGIuYnl0ZUxlbmd0aCkge1xcbiAgICAgIHJldHVybiBmYWxzZTtcXG4gICAgfVxcbiAgICBsZXQgcmV0ID0gdHJ1ZTtcXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhLmJ5dGVMZW5ndGg7IGkrKykge1xcbiAgICAgIGlmIChhW2ldICE9PSBiW2ldKSB7XFxuICAgICAgICByZXQgPSBmYWxzZTtcXG4gICAgICB9XFxuICAgIH1cXG4gICAgcmV0dXJuIHJldDtcXG4gIH1cXG4gIHN0YXRpYyBNZXJnZShidWZmZXJzKSB7XFxuICAgIGxldCBkYXRhO1xcbiAgICBsZXQgbGVuZ3RoID0gMDtcXG4gICAgbGV0IG9mZnNldCA9IDA7XFxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYnVmZmVycy5sZW5ndGg7IGkrKykge1xcbiAgICAgIGxlbmd0aCArPSBidWZmZXJzW2ldLmxlbmd0aCAtIGJ1ZmZlcnNbaV0ucG9zaXRpb247XFxuICAgIH1cXG5cXG4gICAgZGF0YSA9IG5ldyBVaW50OEFycmF5KGxlbmd0aCk7XFxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYnVmZmVycy5sZW5ndGg7IGkrKykge1xcbiAgICAgIGxldCBidWZmZXIgPSBidWZmZXJzW2ldO1xcbiAgICAgIGRhdGEuc2V0KG5ldyBVaW50OEFycmF5KGJ1ZmZlci5idWZmZXIsIGJ1ZmZlci5wb3NpdGlvbiksIG9mZnNldCk7XFxuICAgICAgb2Zmc2V0ICs9IGJ1ZmZlci5sZW5ndGggLSBidWZmZXIucG9zaXRpb247XFxuICAgIH1cXG4gICAgcmV0dXJuIG5ldyBfeGdwbGF5ZXJVdGlscy5TdHJlYW0oZGF0YS5idWZmZXIpO1xcbiAgfVxcblxcbiAgc3RhdGljIHJlYWQoc3RyZWFtLCB0cywgZnJhZ3MpIHtcXG4gICAgVHNEZW11eGVyLnJlYWRIZWFkZXIoc3RyZWFtLCB0cyk7XFxuICAgIFRzRGVtdXhlci5yZWFkUGF5bG9hZChzdHJlYW0sIHRzLCBmcmFncyk7XFxuICAgIGlmICh0cy5oZWFkZXIucGFja2V0ID09PSAnTUVESUEnICYmIHRzLmhlYWRlci5wYXlsb2FkID09PSAxICYmICF0cy51bmtub3duUElEcykge1xcbiAgICAgIHRzLnBlcyA9IFRzRGVtdXhlci5QRVModHMpO1xcbiAgICB9XFxuICB9XFxuXFxuICBzdGF0aWMgcmVhZFBheWxvYWQoc3RyZWFtLCB0cywgZnJhZ3MpIHtcXG4gICAgbGV0IGhlYWRlciA9IHRzLmhlYWRlcjtcXG4gICAgbGV0IHBpZCA9IGhlYWRlci5waWQ7XFxuICAgIHN3aXRjaCAocGlkKSB7XFxuICAgICAgY2FzZSAwOlxcbiAgICAgICAgVHNEZW11eGVyLlBBVChzdHJlYW0sIHRzLCBmcmFncyk7XFxuICAgICAgICBicmVhaztcXG4gICAgICBjYXNlIDE6XFxuICAgICAgICBUc0RlbXV4ZXIuQ0FUKHN0cmVhbSwgdHMsIGZyYWdzKTtcXG4gICAgICAgIGJyZWFrO1xcbiAgICAgIGNhc2UgMjpcXG4gICAgICAgIFRzRGVtdXhlci5UU0RUKHN0cmVhbSwgdHMsIGZyYWdzKTtcXG4gICAgICAgIGJyZWFrO1xcbiAgICAgIGNhc2UgMHgxZmZmOlxcbiAgICAgICAgYnJlYWs7XFxuICAgICAgZGVmYXVsdDpcXG4gICAgICAgIC8vIFRPRE86IHNvbWXnmoTlhpnms5XkuI3lpKrlpb3vvIzlvpfmlLlcXG4gICAgICAgIGlmIChmcmFncy5wYXQuc29tZShpdGVtID0+IHtcXG4gICAgICAgICAgcmV0dXJuIGl0ZW0ucGlkID09PSBwaWQ7XFxuICAgICAgICB9KSkge1xcbiAgICAgICAgICBUc0RlbXV4ZXIuUE1UKHN0cmVhbSwgdHMsIGZyYWdzKTtcXG4gICAgICAgIH0gZWxzZSB7XFxuICAgICAgICAgIGxldCBzdHMgPSBmcmFncy5wbXQgPyBmcmFncy5wbXQuZmlsdGVyKGl0ZW0gPT4gaXRlbS5waWQgPT09IHBpZCkgOiBbXTtcXG4gICAgICAgICAgaWYgKHN0cy5sZW5ndGggPiAwKSB7XFxuICAgICAgICAgICAgVHNEZW11eGVyLk1lZGlhKHN0cmVhbSwgdHMsIFN0cmVhbVR5cGVbc3RzWzBdLnN0cmVhbVR5cGVdWzBdKTtcXG4gICAgICAgICAgfSBlbHNlIHtcXG4gICAgICAgICAgICB0cy51bmtub3duUElEcyA9IHRydWU7XFxuICAgICAgICAgIH07XFxuICAgICAgICB9XFxuICAgIH1cXG4gIH1cXG5cXG4gIHN0YXRpYyByZWFkSGVhZGVyKHN0cmVhbSwgdHMpIHtcXG4gICAgbGV0IGhlYWRlciA9IHt9O1xcbiAgICBoZWFkZXIuc3luYyA9IHN0cmVhbS5yZWFkVWludDgoKTtcXG4gICAgbGV0IG5leHQgPSBzdHJlYW0ucmVhZFVpbnQxNigpO1xcbiAgICBoZWFkZXIuZXJyb3IgPSBuZXh0ID4+PiAxNTtcXG4gICAgaGVhZGVyLnBheWxvYWQgPSBuZXh0ID4+PiAxNCAmIDE7XFxuICAgIGhlYWRlci5wcmlvcml0eSA9IG5leHQgPj4+IDEzICYgMTtcXG4gICAgaGVhZGVyLnBpZCA9IG5leHQgJiAweDFmZmY7XFxuXFxuICAgIG5leHQgPSBzdHJlYW0ucmVhZFVpbnQ4KCk7XFxuXFxuICAgIGhlYWRlci5zY3JhbWJsaW5nID0gbmV4dCA+PiA2ICYgMHgzOyAvLyDmmK/lkKbliqDlr4bvvIwwMOihqOekuuS4jeWKoOWvhlxcblxcbiAgICAvKipcXG4gICAgICogMDAgSVNPL0lFQ+acquadpeS9v+eUqOS/neeVmVxcbiAgICAgKiAwMSDmsqHmnInosIPmlbTlrZfmrrXvvIzku4XlkKvmnIkxODRC5pyJ5pWI5YeA6I23XFxuICAgICAqIDAyIOayoeacieacieaViOWHgOiNt++8jOS7heWQq+aciTE4M0LosIPmlbTlrZfmrrVcXG4gICAgICogMDMgMH4xODJC6LCD5pW05a2X5q615ZCO5Li65pyJ5pWI5YeA6I23XFxuICAgICAqL1xcbiAgICBoZWFkZXIuYWRhcHRhdGlvbiA9IG5leHQgPj4gNCAmIDB4MztcXG4gICAgaGVhZGVyLmNvbnRpbnVpdHkgPSBuZXh0ICYgMTU7XFxuICAgIGhlYWRlci5wYWNrZXQgPSBoZWFkZXIucGlkID09PSAwID8gJ1BBVCcgOiAnTUVESUEnO1xcbiAgICB0cy5oZWFkZXIgPSBoZWFkZXI7XFxuICB9XFxuXFxuICBzdGF0aWMgUEFUKHN0cmVhbSwgdHMsIGZyYWdzKSB7XFxuICAgIGxldCByZXQgPSB7fTtcXG4gICAgbGV0IG5leHQgPSBzdHJlYW0ucmVhZFVpbnQ4KCk7XFxuICAgIHN0cmVhbS5za2lwKG5leHQpO1xcbiAgICBuZXh0ID0gc3RyZWFtLnJlYWRVaW50OCgpO1xcbiAgICByZXQudGFiZWxJRCA9IG5leHQ7XFxuICAgIG5leHQgPSBzdHJlYW0ucmVhZFVpbnQxNigpO1xcbiAgICByZXQuZXJyb3IgPSBuZXh0ID4+PiA3O1xcbiAgICByZXQuemVybyA9IG5leHQgPj4+IDYgJiAxO1xcbiAgICByZXQuc2VjdGlvbkxlbmd0aCA9IG5leHQgJiAweGZmZjtcXG4gICAgcmV0LnN0cmVhbUlEID0gc3RyZWFtLnJlYWRVaW50MTYoKTtcXG4gICAgcmV0LmN1cnJlbnQgPSBzdHJlYW0ucmVhZFVpbnQ4KCkgJiAxO1xcbiAgICByZXQuc2VjdGlvbk51bWJlciA9IHN0cmVhbS5yZWFkVWludDgoKTtcXG4gICAgcmV0Lmxhc3RTZWN0aW9uTnVtYmVyID0gc3RyZWFtLnJlYWRVaW50OCgpO1xcbiAgICBsZXQgTiA9IChyZXQuc2VjdGlvbkxlbmd0aCAtIDkpIC8gNDtcXG4gICAgbGV0IGxpc3QgPSBbXTtcXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBOOyBpKyspIHtcXG4gICAgICBsZXQgcHJvZ3JhbU51bWJlciA9IHN0cmVhbS5yZWFkVWludDE2KCk7XFxuICAgICAgbGV0IHBpZCA9IHN0cmVhbS5yZWFkVWludDE2KCkgJiAweDFmZmY7XFxuICAgICAgbGlzdC5wdXNoKHtcXG4gICAgICAgIHByb2dyYW06IHByb2dyYW1OdW1iZXIsXFxuICAgICAgICBwaWQsXFxuICAgICAgICB0eXBlOiBwcm9ncmFtTnVtYmVyID09PSAwID8gJ25ldHdvcmsnIDogJ21hcFBJRCdcXG4gICAgICB9KTtcXG4gICAgfVxcbiAgICBpZiAobGlzdC5sZW5ndGggPiAwKSB7XFxuICAgICAgZnJhZ3MucGF0ID0gZnJhZ3MucGF0LmNvbmNhdChsaXN0KTtcXG4gICAgfVxcbiAgICByZXQubGlzdCA9IGxpc3Q7XFxuICAgIHJldC5wcm9ncmFtID0gc3RyZWFtLnJlYWRVaW50MTYoKTtcXG4gICAgcmV0LnBpZCA9IHN0cmVhbS5yZWFkVWludDE2KCkgJiAweDFmZmY7XFxuICAgIHRzLnBheWxvYWQgPSByZXQ7XFxuICAgIC8vIFRPRE8gQ1JDXFxuICB9XFxuXFxuICBzdGF0aWMgUE1UKHN0cmVhbSwgdHMsIGZyYWdzKSB7XFxuICAgIGxldCByZXQgPSB7fTtcXG4gICAgbGV0IGhlYWRlciA9IHRzLmhlYWRlcjtcXG4gICAgaGVhZGVyLnBhY2tldCA9ICdQTVQnO1xcbiAgICBsZXQgbmV4dCA9IHN0cmVhbS5yZWFkVWludDgoKTtcXG4gICAgc3RyZWFtLnNraXAobmV4dCk7XFxuICAgIG5leHQgPSBzdHJlYW0ucmVhZFVpbnQ4KCk7XFxuICAgIHJldC50YWJsZUlEID0gbmV4dDtcXG4gICAgbmV4dCA9IHN0cmVhbS5yZWFkVWludDE2KCk7XFxuICAgIHJldC5zZWN0aW9uTGVuZ3RoID0gbmV4dCAmIDB4ZmZmO1xcbiAgICByZXQucHJvZ3JhbSA9IHN0cmVhbS5yZWFkVWludDE2KCk7XFxuICAgIHJldC5jdXJyZW50ID0gc3RyZWFtLnJlYWRVaW50OCgpICYgMTtcXG4gICAgcmV0Lm9yZGVyID0gc3RyZWFtLnJlYWRVaW50OCgpO1xcbiAgICByZXQubGFzdE9yZGVyID0gc3RyZWFtLnJlYWRVaW50OCgpO1xcbiAgICByZXQuUENSX1BJRCA9IHN0cmVhbS5yZWFkVWludDE2KCkgJiAweDFmZmY7XFxuICAgIHJldC5wcm9ncmFtTGVuZ3RoID0gc3RyZWFtLnJlYWRVaW50MTYoKSAmIDB4ZmZmO1xcbiAgICBsZXQgTiA9IChyZXQuc2VjdGlvbkxlbmd0aCAtIDEzKSAvIDU7XFxuICAgIGxldCBsaXN0ID0gW107XFxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgTjsgaSsrKSB7XFxuICAgICAgbGlzdC5wdXNoKHtcXG4gICAgICAgIHN0cmVhbVR5cGU6IHN0cmVhbS5yZWFkVWludDgoKSxcXG4gICAgICAgIHBpZDogc3RyZWFtLnJlYWRVaW50MTYoKSAmIDB4MWZmZiwgLy8gMHgwN2U1IOinhumike+8jDB4MDdlNlxcbiAgICAgICAgZXM6IHN0cmVhbS5yZWFkVWludDE2KCkgJiAweGZmZlxcbiAgICAgIH0pO1xcbiAgICB9XFxuICAgIHJldC5saXN0ID0gbGlzdDtcXG4gICAgaWYgKCF0aGlzLnBtdCkge1xcbiAgICAgIHRoaXMucG10ID0gW107XFxuICAgIH1cXG4gICAgZnJhZ3MucG10ID0gdGhpcy5wbXQuY29uY2F0KGxpc3QubWFwKGl0ZW0gPT4ge1xcbiAgICAgIHJldHVybiB7XFxuICAgICAgICBwaWQ6IGl0ZW0ucGlkLFxcbiAgICAgICAgZXM6IGl0ZW0uZXMsXFxuICAgICAgICBzdHJlYW1UeXBlOiBpdGVtLnN0cmVhbVR5cGUsXFxuICAgICAgICBwcm9ncmFtOiByZXQucHJvZ3JhbVxcbiAgICAgIH07XFxuICAgIH0pKTtcXG4gICAgdHMucGF5bG9hZCA9IHJldDtcXG4gIH1cXG5cXG4gIHN0YXRpYyBNZWRpYShzdHJlYW0sIHRzLCB0eXBlKSB7XFxuICAgIGxldCBoZWFkZXIgPSB0cy5oZWFkZXI7XFxuICAgIGxldCBwYXlsb2FkID0ge307XFxuICAgIGhlYWRlci50eXBlID0gdHlwZTtcXG4gICAgaWYgKGhlYWRlci5hZGFwdGF0aW9uID09PSAweDAzKSB7XFxuICAgICAgcGF5bG9hZC5hZGFwdGF0aW9uTGVuZ3RoID0gc3RyZWFtLnJlYWRVaW50OCgpO1xcbiAgICAgIGlmIChwYXlsb2FkLmFkYXB0YXRpb25MZW5ndGggPiAwKSB7XFxuICAgICAgICBsZXQgbmV4dCA9IHN0cmVhbS5yZWFkVWludDgoKTtcXG4gICAgICAgIHBheWxvYWQuZGlzY29udGludWUgPSBuZXh0ID4+PiA3O1xcbiAgICAgICAgcGF5bG9hZC5hY2Nlc3MgPSBuZXh0ID4+PiA2ICYgMHgwMTtcXG4gICAgICAgIHBheWxvYWQucHJpb3JpdHkgPSBuZXh0ID4+PiA1ICYgMHgwMTtcXG4gICAgICAgIHBheWxvYWQuUENSID0gbmV4dCA+Pj4gNCAmIDB4MDE7XFxuICAgICAgICBwYXlsb2FkLk9QQ1IgPSBuZXh0ID4+PiAzICYgMHgwMTtcXG4gICAgICAgIHBheWxvYWQuc3BsaWNlUG9pbnQgPSBuZXh0ID4+PiAyICYgMHgwMTtcXG4gICAgICAgIHBheWxvYWQudHJhbnNwb3J0UHJpdmF0ZSA9IG5leHQgPj4+IDEgJiAweDAxO1xcbiAgICAgICAgcGF5bG9hZC5hZGFwdGF0aW9uRmllbGQgPSBuZXh0ICYgMHgwMTtcXG4gICAgICAgIGxldCBfc3RhcnQgPSBzdHJlYW0ucG9zaXRpb247XFxuICAgICAgICBpZiAocGF5bG9hZC5QQ1IgPT09IDEpIHtcXG4gICAgICAgICAgcGF5bG9hZC5wcm9ncmFtQ2xvY2tCYXNlID0gc3RyZWFtLnJlYWRVaW50MzIoKSA8PCAxO1xcbiAgICAgICAgICBuZXh0ID0gc3RyZWFtLnJlYWRVaW50MTYoKTtcXG4gICAgICAgICAgcGF5bG9hZC5wcm9ncmFtQ2xvY2tCYXNlIHw9IG5leHQgPj4+IDE1O1xcbiAgICAgICAgICBwYXlsb2FkLnByb2dyYW1DbG9ja0V4dGVuc2lvbiA9IG5leHQgJiAweDFmZjtcXG4gICAgICAgIH1cXG4gICAgICAgIGlmIChwYXlsb2FkLk9QQ1IgPT09IDEpIHtcXG4gICAgICAgICAgcGF5bG9hZC5vcmlnaW5Qcm9ncmFtQ2xvY2tCYXNlID0gc3RyZWFtLnJlYWRVaW50MzIoKSA8PCAxO1xcbiAgICAgICAgICBuZXh0ID0gc3RyZWFtLnJlYWRVaW50MTYoKTtcXG4gICAgICAgICAgcGF5bG9hZC5vcmlnaW5Qcm9ncmFtQ2xvY2tCYXNlICs9IG5leHQgPj4+IDE1O1xcbiAgICAgICAgICBwYXlsb2FkLm9yaWdpblByb2dyYW1DbG9ja0V4dGVuc2lvbiA9IG5leHQgJiAweDFmZjtcXG4gICAgICAgIH1cXG4gICAgICAgIGlmIChwYXlsb2FkLnNwbGljZVBvaW50ID09PSAxKSB7XFxuICAgICAgICAgIHBheWxvYWQuc3BsaWNlQ291bnRkb3duID0gc3RyZWFtLnJlYWRVaW50OCgpO1xcbiAgICAgICAgfVxcbiAgICAgICAgaWYgKHBheWxvYWQudHJhbnNwb3J0UHJpdmF0ZSA9PT0gMSkge1xcbiAgICAgICAgICBsZXQgbGVuZ3RoID0gc3RyZWFtLnJlYWRVaW50OCgpO1xcbiAgICAgICAgICBsZXQgdHJhbnNwb3J0UHJpdmF0ZURhdGEgPSBbXTtcXG4gICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xcbiAgICAgICAgICAgIHRyYW5zcG9ydFByaXZhdGVEYXRhLnB1c2goc3RyZWFtLnJlYWRVaW50OCgpKTtcXG4gICAgICAgICAgfVxcbiAgICAgICAgfVxcbiAgICAgICAgaWYgKHBheWxvYWQuYWRhcHRhdGlvbkZpZWxkID09PSAxKSB7XFxuICAgICAgICAgIGxldCBsZW5ndGggPSBzdHJlYW0ucmVhZFVpbnQ4KCk7XFxuICAgICAgICAgIGxldCBuZXh0ID0gc3RyZWFtLnJlYWRVaW50OCgpO1xcbiAgICAgICAgICBsZXQgc3RhcnQgPSBzdHJlYW0ucG9zaXRpb247XFxuICAgICAgICAgIGxldCBsdHcgPSBuZXh0ID4+PiA3O1xcbiAgICAgICAgICBsZXQgcGllY2V3aXNlID0gbmV4dCA+Pj4gNiAmIDB4MTtcXG4gICAgICAgICAgbGV0IHNlYW1sZXNzID0gbmV4dCA+Pj4gNSAmIDB4MTtcXG4gICAgICAgICAgaWYgKGx0dyA9PT0gMSkge1xcbiAgICAgICAgICAgIG5leHQgPSBzdHJlYW0ucmVhZFVpbnQxNigpO1xcbiAgICAgICAgICAgIHBheWxvYWQubHR3VmFsaWQgPSBuZXh0ID4+PiAxNTtcXG4gICAgICAgICAgICBwYXlsb2FkLmx0d09mZnNldCA9IG5leHQgJiAweGVmZmY7XFxuICAgICAgICAgIH1cXG4gICAgICAgICAgaWYgKHBpZWNld2lzZSA9PT0gMSkge1xcbiAgICAgICAgICAgIG5leHQgPSBzdHJlYW0ucmVhZFVpbnQyNCgpO1xcbiAgICAgICAgICAgIHBheWxvYWQucGllY2V3aXNlUmF0ZSA9IG5leHQgJiAweDNmZmZmZjtcXG4gICAgICAgICAgfVxcbiAgICAgICAgICBpZiAoc2VhbWxlc3MgPT09IDEpIHtcXG4gICAgICAgICAgICBuZXh0ID0gc3RyZWFtLnJlYWRJbnQ4KCk7XFxuICAgICAgICAgICAgcGF5bG9hZC5zcGxpY2VUeXBlID0gbmV4dCA+Pj4gNDtcXG4gICAgICAgICAgICBwYXlsb2FkLmR0c05leHRBVTEgPSBuZXh0ID4+PiAxICYgMHg3O1xcbiAgICAgICAgICAgIHBheWxvYWQubWFya2VyMSA9IG5leHQgJiAweDE7XFxuICAgICAgICAgICAgbmV4dCA9IHN0cmVhbS5yZWFkVWludDE2KCk7XFxuICAgICAgICAgICAgcGF5bG9hZC5kdHNOZXh0QVUyID0gbmV4dCA+Pj4gMTtcXG4gICAgICAgICAgICBwYXlsb2FkLm1hcmtlcjIgPSBuZXh0ICYgMHgxO1xcbiAgICAgICAgICAgIG5leHQgPSBzdHJlYW0ucmVhZFVpbnQxNigpO1xcbiAgICAgICAgICAgIHBheWxvYWQuZHRzTmV4dEFVMyA9IG5leHQ7XFxuICAgICAgICAgIH1cXG4gICAgICAgICAgc3RyZWFtLnNraXAobGVuZ3RoIC0gMSAtIChzdHJlYW0ucG9zaXRpb24gLSBzdGFydCkpO1xcbiAgICAgICAgfVxcbiAgICAgICAgbGV0IGxhc3RTdHVmZmluZyA9IHBheWxvYWQuYWRhcHRhdGlvbkxlbmd0aCAtIDEgLSAoc3RyZWFtLnBvc2l0aW9uIC0gX3N0YXJ0KTtcXG4gICAgICAgIHN0cmVhbS5za2lwKGxhc3RTdHVmZmluZyk7XFxuICAgICAgfVxcbiAgICB9XFxuICAgIHBheWxvYWQuc3RyZWFtID0gbmV3IF94Z3BsYXllclV0aWxzLlN0cmVhbShzdHJlYW0uYnVmZmVyLnNsaWNlKHN0cmVhbS5wb3NpdGlvbikpO1xcbiAgICB0cy5wYXlsb2FkID0gcGF5bG9hZDtcXG4gIH1cXG5cXG4gIHN0YXRpYyBQRVModHMpIHtcXG4gICAgbGV0IHJldCA9IHt9O1xcbiAgICBsZXQgYnVmZmVyID0gdHMucGF5bG9hZC5zdHJlYW07XFxuXFxuICAgIGxldCBuZXh0ID0gYnVmZmVyLnJlYWRVaW50MjQoKTtcXG4gICAgaWYgKG5leHQgIT09IDEpIHtcXG4gICAgICByZXQuRVMgPSB7fTtcXG4gICAgICByZXQuRVMuYnVmZmVyID0gYnVmZmVyO1xcbiAgICB9IGVsc2Uge1xcbiAgICAgIGxldCBzdHJlYW1JRCA9IGJ1ZmZlci5yZWFkVWludDgoKTtcXG4gICAgICBpZiAoc3RyZWFtSUQgPj0gMHhlMCAmJiBzdHJlYW1JRCA8PSAweGVmKSB7XFxuICAgICAgICByZXQudHlwZSA9ICd2aWRlbyc7XFxuICAgICAgfVxcbiAgICAgIGlmIChzdHJlYW1JRCA+PSAweGMwICYmIHN0cmVhbUlEIDw9IDB4ZGYpIHtcXG4gICAgICAgIHJldC50eXBlID0gJ2F1ZGlvJztcXG4gICAgICB9XFxuICAgICAgbGV0IHBhY2tldExlbmd0aCA9IGJ1ZmZlci5yZWFkVWludDE2KCk7XFxuICAgICAgcmV0LnBhY2tldExlbmd0aCA9IHBhY2tldExlbmd0aDtcXG4gICAgICBpZiAocmV0LnR5cGUgPT09ICd2aWRlbycgfHwgcmV0LnR5cGUgPT09ICdhdWRpbycpIHtcXG4gICAgICAgIGxldCBuZXh0ID0gYnVmZmVyLnJlYWRVaW50OCgpO1xcbiAgICAgICAgbGV0IGZpcnN0ID0gbmV4dCA+Pj4gNjtcXG4gICAgICAgIGlmIChmaXJzdCAhPT0gMHgwMikge1xcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2Vycm9yIHdoZW4gcGFyc2UgcGVzIGhlYWRlcicpO1xcbiAgICAgICAgfVxcbiAgICAgICAgbmV4dCA9IGJ1ZmZlci5yZWFkVWludDgoKTtcXG4gICAgICAgIHJldC5wdHNEVFNGbGFnID0gbmV4dCA+Pj4gNjtcXG4gICAgICAgIHJldC5lc2NyRmxhZyA9IG5leHQgPj4+IDUgJiAweDAxO1xcbiAgICAgICAgcmV0LmVzUmF0ZUZsYWcgPSBuZXh0ID4+PiA0ICYgMHgwMTtcXG4gICAgICAgIHJldC5kc21GbGFnID0gbmV4dCA+Pj4gMyAmIDB4MDE7XFxuICAgICAgICByZXQuYWRkaXRpb25hbEZsYWcgPSBuZXh0ID4+PiAyICYgMHgwMTtcXG4gICAgICAgIHJldC5jcmNGbGFnID0gbmV4dCA+Pj4gMSAmIDB4MDE7XFxuICAgICAgICByZXQuZXh0ZW5zaW9uRmxhZyA9IG5leHQgJiAweDAxO1xcbiAgICAgICAgcmV0LnBlc0hlYWRlckxlbmd0aCA9IGJ1ZmZlci5yZWFkVWludDgoKTtcXG4gICAgICAgIGxldCBOMSA9IHJldC5wZXNIZWFkZXJMZW5ndGg7XFxuXFxuICAgICAgICBpZiAocmV0LnB0c0RUU0ZsYWcgPT09IDIpIHtcXG4gICAgICAgICAgbGV0IHB0cyA9IFtdO1xcbiAgICAgICAgICBuZXh0ID0gYnVmZmVyLnJlYWRVaW50OCgpO1xcbiAgICAgICAgICBwdHMucHVzaChuZXh0ID4+PiAxICYgMHgwNyk7XFxuICAgICAgICAgIG5leHQgPSBidWZmZXIucmVhZFVpbnQxNigpO1xcbiAgICAgICAgICBwdHMucHVzaChuZXh0ID4+PiAxKTtcXG4gICAgICAgICAgbmV4dCA9IGJ1ZmZlci5yZWFkVWludDE2KCk7XFxuICAgICAgICAgIHB0cy5wdXNoKG5leHQgPj4+IDEpO1xcbiAgICAgICAgICByZXQucHRzID0gcHRzWzBdIDw8IDMwIHwgcHRzWzFdIDw8IDE1IHwgcHRzWzJdO1xcbiAgICAgICAgICBOMSAtPSA1O1xcbiAgICAgICAgICAvLyDop4bpopHlpoLmnpzmsqHmnIlkdHPnlKhwdHNcXG4gICAgICAgICAgaWYgKHJldC50eXBlID09PSAndmlkZW8nKSB7XFxuICAgICAgICAgICAgcmV0LmR0cyA9IHJldC5wdHM7XFxuICAgICAgICAgIH1cXG4gICAgICAgIH1cXG4gICAgICAgIGlmIChyZXQucHRzRFRTRmxhZyA9PT0gMykge1xcbiAgICAgICAgICBsZXQgcHRzID0gW107XFxuICAgICAgICAgIG5leHQgPSBidWZmZXIucmVhZFVpbnQ4KCk7XFxuICAgICAgICAgIHB0cy5wdXNoKG5leHQgPj4+IDEgJiAweDA3KTtcXG4gICAgICAgICAgbmV4dCA9IGJ1ZmZlci5yZWFkVWludDE2KCk7XFxuICAgICAgICAgIHB0cy5wdXNoKG5leHQgPj4+IDEpO1xcbiAgICAgICAgICBuZXh0ID0gYnVmZmVyLnJlYWRVaW50MTYoKTtcXG4gICAgICAgICAgcHRzLnB1c2gobmV4dCA+Pj4gMSk7XFxuICAgICAgICAgIHJldC5wdHMgPSBwdHNbMF0gPDwgMzAgfCBwdHNbMV0gPDwgMTUgfCBwdHNbMl07XFxuICAgICAgICAgIGxldCBkdHMgPSBbXTtcXG4gICAgICAgICAgbmV4dCA9IGJ1ZmZlci5yZWFkVWludDgoKTtcXG4gICAgICAgICAgZHRzLnB1c2gobmV4dCA+Pj4gMSAmIDB4MDcpO1xcbiAgICAgICAgICBuZXh0ID0gYnVmZmVyLnJlYWRVaW50MTYoKTtcXG4gICAgICAgICAgZHRzLnB1c2gobmV4dCA+Pj4gMSk7XFxuICAgICAgICAgIG5leHQgPSBidWZmZXIucmVhZFVpbnQxNigpO1xcbiAgICAgICAgICBkdHMucHVzaChuZXh0ID4+PiAxKTtcXG4gICAgICAgICAgcmV0LmR0cyA9IGR0c1swXSA8PCAzMCB8IGR0c1sxXSA8PCAxNSB8IGR0c1syXTtcXG4gICAgICAgICAgTjEgLT0gMTA7XFxuICAgICAgICB9XFxuICAgICAgICBpZiAocmV0LmVzY3JGbGFnID09PSAxKSB7XFxuICAgICAgICAgIGxldCBlc2NyID0gW107XFxuICAgICAgICAgIGxldCBleCA9IFtdO1xcbiAgICAgICAgICBuZXh0ID0gYnVmZmVyLnJlYWRVaW50OCgpO1xcbiAgICAgICAgICBlc2NyLnB1c2gobmV4dCA+Pj4gMyAmIDB4MDcpO1xcbiAgICAgICAgICBlc2NyLnB1c2gobmV4dCAmIDB4MDMpO1xcbiAgICAgICAgICBuZXh0ID0gYnVmZmVyLnJlYWRVaW50MTYoKTtcXG4gICAgICAgICAgZXNjci5wdXNoKG5leHQgPj4+IDEzKTtcXG4gICAgICAgICAgZXNjci5wdXNoKG5leHQgJiAweDAzKTtcXG4gICAgICAgICAgbmV4dCA9IGJ1ZmZlci5yZWFkVWludDE2KCk7XFxuICAgICAgICAgIGVzY3IucHVzaChuZXh0ID4+PiAxMyk7XFxuICAgICAgICAgIGV4LnB1c2gobmV4dCAmIDB4MDMpO1xcbiAgICAgICAgICBuZXh0ID0gYnVmZmVyLnJlYWRVaW50OCgpO1xcbiAgICAgICAgICBleC5wdXNoKG5leHQgPj4+IDEpO1xcbiAgICAgICAgICByZXQuZXNjciA9IChlc2NyWzBdIDw8IDMwIHwgZXNjclsxXSA8PCAyOCB8IGVzY3JbMl0gPDwgMTUgfCBlc2NyWzNdIDw8IDEzIHwgZXNjcls0XSkgKiAzMDAgKyAoZXhbMF0gPDwgNyB8IGV4WzFdKTtcXG4gICAgICAgICAgTjEgLT0gNjtcXG4gICAgICAgIH1cXG4gICAgICAgIGlmIChyZXQuZXNSYXRlRmxhZyA9PT0gMSkge1xcbiAgICAgICAgICBuZXh0ID0gYnVmZmVyLnJlYWRVaW50MjQoKTtcXG4gICAgICAgICAgcmV0LmVzUmF0ZSA9IG5leHQgPj4+IDEgJiAweDNmZmZmZjtcXG4gICAgICAgICAgTjEgLT0gMztcXG4gICAgICAgIH1cXG4gICAgICAgIGlmIChyZXQuZHNtRmxhZyA9PT0gMSkge1xcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ25vdCBzdXBwb3J0IERTTV90cmlja19tb2RlJyk7XFxuICAgICAgICB9XFxuICAgICAgICBpZiAocmV0LmFkZGl0aW9uYWxGbGFnID09PSAxKSB7XFxuICAgICAgICAgIG5leHQgPSBidWZmZXIucmVhZFVpbnQ4KCk7XFxuICAgICAgICAgIHJldC5hZGRpdGlvbmFsQ29weUluZm8gPSBuZXh0ICYgMHg3ZjtcXG4gICAgICAgICAgTjEgLT0gMTtcXG4gICAgICAgIH1cXG4gICAgICAgIGlmIChyZXQuY3JjRmxhZyA9PT0gMSkge1xcbiAgICAgICAgICByZXQucGVzQ1JDID0gYnVmZmVyLnJlYWRVaW50MTYoKTtcXG4gICAgICAgICAgTjEgLT0gMjtcXG4gICAgICAgIH1cXG4gICAgICAgIGlmIChyZXQuZXh0ZW5zaW9uRmxhZyA9PT0gMSkge1xcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ25vdCBzdXBwb3J0IGV4dGVuc2lvbicpO1xcbiAgICAgICAgfVxcbiAgICAgICAgaWYgKE4xID4gMCkge1xcbiAgICAgICAgICBidWZmZXIuc2tpcChOMSk7XFxuICAgICAgICB9XFxuICAgICAgICByZXQuRVMgPSBUc0RlbXV4ZXIuRVMoYnVmZmVyLCByZXQudHlwZSk7XFxuICAgICAgfSBlbHNlIHtcXG4gICAgICAgIHRocm93IG5ldyBFcnJvcignZm9ybWF0IGlzIG5vdCBzdXBwb3J0ZWQnKTtcXG4gICAgICB9XFxuICAgIH1cXG4gICAgcmV0dXJuIHJldDtcXG4gIH1cXG5cXG4gIHN0YXRpYyBFUyhidWZmZXIsIHR5cGUpIHtcXG4gICAgbGV0IG5leHQ7XFxuICAgIGxldCByZXQgPSB7fTtcXG4gICAgaWYgKHR5cGUgPT09ICd2aWRlbycpIHtcXG4gICAgICBuZXh0ID0gYnVmZmVyLnJlYWRVaW50MzIoKTtcXG4gICAgICBpZiAobmV4dCAhPT0gMSkge1xcbiAgICAgICAgYnVmZmVyLmJhY2soNCk7XFxuICAgICAgICBuZXh0ID0gYnVmZmVyLnJlYWRVaW50MjQoKTtcXG4gICAgICAgIGlmIChuZXh0ICE9PSAxKSB7XFxuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignaDI2NCBuYWwgaGVhZGVyIHBhcnNlIGZhaWxlZCcpO1xcbiAgICAgICAgfVxcbiAgICAgIH1cXG4gICAgICBidWZmZXIuc2tpcCgyKTsgLy8gMDkgRjBcXG4gICAgICAvLyBUT0RPIHJlYWRuYWx1XFxuICAgICAgcmV0LmJ1ZmZlciA9IGJ1ZmZlcjtcXG4gICAgfSBlbHNlIGlmICh0eXBlID09PSAnYXVkaW8nKSB7XFxuICAgICAgbmV4dCA9IGJ1ZmZlci5yZWFkVWludDE2KCk7XFxuICAgICAgLy8gYWR0c+eahOWQjOatpeWtl+iKgu+8jDEy5L2NXFxuICAgICAgaWYgKG5leHQgPj4+IDQgIT09IDB4ZmZmKSB7XFxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2FhYyBFUyBwYXJzZSBFcnJvcicpO1xcbiAgICAgIH1cXG4gICAgICBjb25zdCBmcSA9IFs5NjAwMCwgODgyMDAsIDY0MDAwLCA0ODAwMCwgNDQxMDAsIDMyMDAwLCAyNDAwMCwgMjIwNTAsIDE2MDAwLCAxMjAwMCwgMTEwMjUsIDgwMDAsIDczNTBdO1xcbiAgICAgIHJldC5pZCA9IChuZXh0ID4+PiAzICYgMHgwMSkgPT09IDAgPyAnTVBFRy00JyA6ICdNUEVHLTInO1xcbiAgICAgIHJldC5sYXllciA9IG5leHQgPj4+IDEgJiAweDAzO1xcbiAgICAgIHJldC5hYnNlbnQgPSBuZXh0ICYgMHgwMTtcXG4gICAgICBuZXh0ID0gYnVmZmVyLnJlYWRVaW50MTYoKTtcXG4gICAgICByZXQuYXVkaW9PYmplY3RUeXBlID0gKG5leHQgPj4+IDE0ICYgMHgwMykgKyAxO1xcbiAgICAgIHJldC5wcm9maWxlID0gcmV0LmF1ZGlvT2JqZWN0VHlwZSAtIDE7XFxuICAgICAgcmV0LmZyZXF1ZW5jeUluZGV4ID0gbmV4dCA+Pj4gMTAgJiAweDBmO1xcbiAgICAgIHJldC5mcmVxdWVuY2UgPSBmcVtyZXQuZnJlcXVlbmN5SW5kZXhdO1xcbiAgICAgIHJldC5jaGFubmVsID0gbmV4dCA+Pj4gNiAmIDB4MDc7XFxuICAgICAgcmV0LmZyYW1lTGVuZ3RoID0gKG5leHQgJiAweDAzKSA8PCAxMSB8IGJ1ZmZlci5yZWFkVWludDE2KCkgPj4+IDU7XFxuICAgICAgcmV0LmF1ZGlvQ29uZmlnID0gVHNEZW11eGVyLmdldEF1ZGlvQ29uZmlnKHJldC5hdWRpb09iamVjdFR5cGUsIHJldC5jaGFubmVsLCByZXQuZnJlcXVlbmN5SW5kZXgpO1xcbiAgICAgIGJ1ZmZlci5za2lwKDEpO1xcbiAgICAgIHJldC5idWZmZXIgPSBidWZmZXI7XFxuICAgIH0gZWxzZSB7XFxuICAgICAgdGhyb3cgbmV3IEVycm9yKGBFUyAke3R5cGV9IGlzIG5vdCBzdXBwb3J0ZWRgKTtcXG4gICAgfVxcblxcbiAgICByZXR1cm4gcmV0O1xcbiAgfVxcblxcbiAgc3RhdGljIFRTRFQoc3RyZWFtLCB0cywgZnJhZ3MpIHtcXG4gICAgLy8gVE9ET1xcbiAgICB0cy5wYXlsb2FkID0ge307XFxuICB9XFxuXFxuICBzdGF0aWMgQ0FUKHN0cmVhbSwgdHMsIGZyYWdzKSB7XFxuICAgIGxldCByZXQgPSB7fTtcXG4gICAgcmV0LnRhYmxlSUQgPSBzdHJlYW0ucmVhZFVpbnQ4KCk7XFxuICAgIGxldCBuZXh0ID0gc3RyZWFtLnJlYWRVaW50MTYoKTtcXG4gICAgcmV0LnNlY3Rpb25JbmRpY2F0b3IgPSBuZXh0ID4+PiA3O1xcbiAgICByZXQuc2VjdGlvbkxlbmd0aCA9IG5leHQgJiAweDBmZmY7XFxuICAgIHN0cmVhbS5za2lwKDIpO1xcbiAgICBuZXh0ID0gc3RyZWFtLnJlYWRVaW50OCgpO1xcbiAgICByZXQudmVyc2lvbiA9IG5leHQgPj4+IDM7XFxuICAgIHJldC5jdXJyZW50TmV4dEluZGljYXRvciA9IG5leHQgJiAweDAxO1xcbiAgICByZXQuc2VjdGlvbk51bWJlciA9IHN0cmVhbS5yZWFkVWludDgoKTtcXG4gICAgcmV0Lmxhc3RTZWN0aW9uTnVtYmVyID0gc3RyZWFtLnJlYWRVaW50OCgpO1xcbiAgICBsZXQgTiA9ICh0aGlzLnNlY3Rpb25MZW5ndGggLSA5KSAvIDQ7XFxuICAgIGxldCBsaXN0ID0gW107XFxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgTjsgaSsrKSB7XFxuICAgICAgbGlzdC5wdXNoKHt9KTtcXG4gICAgfVxcbiAgICByZXQuY3JjMzIgPSBzdHJlYW0ucmVhZFVpbnQzMigpO1xcbiAgICB0cy5wYXlsb2FkID0gcmV0O1xcbiAgfVxcblxcbiAgc3RhdGljIGdldEF1ZGlvQ29uZmlnKGF1ZGlvT2JqZWN0VHlwZSwgY2hhbm5lbCwgc2FtcGxlSW5kZXgpIHtcXG4gICAgbGV0IHVzZXJBZ2VudCA9IG5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKTtcXG4gICAgbGV0IGNvbmZpZztcXG4gICAgbGV0IGV4dGVuc2lvblNhbXBsZUluZGV4O1xcbiAgICBpZiAoL2ZpcmVmb3gvaS50ZXN0KHVzZXJBZ2VudCkpIHtcXG4gICAgICBpZiAoc2FtcGxlSW5kZXggPj0gNikge1xcbiAgICAgICAgYXVkaW9PYmplY3RUeXBlID0gNTtcXG4gICAgICAgIGNvbmZpZyA9IG5ldyBBcnJheSg0KTtcXG4gICAgICAgIGV4dGVuc2lvblNhbXBsZUluZGV4ID0gc2FtcGxlSW5kZXggLSAzO1xcbiAgICAgIH0gZWxzZSB7XFxuICAgICAgICBhdWRpb09iamVjdFR5cGUgPSAyO1xcbiAgICAgICAgY29uZmlnID0gbmV3IEFycmF5KDIpO1xcbiAgICAgICAgZXh0ZW5zaW9uU2FtcGxlSW5kZXggPSBzYW1wbGVJbmRleDtcXG4gICAgICB9XFxuICAgIH0gZWxzZSBpZiAodXNlckFnZW50LmluZGV4T2YoJ2FuZHJvaWQnKSAhPT0gLTEpIHtcXG4gICAgICBhdWRpb09iamVjdFR5cGUgPSAyO1xcbiAgICAgIGNvbmZpZyA9IG5ldyBBcnJheSgyKTtcXG4gICAgICBleHRlbnNpb25TYW1wbGVJbmRleCA9IHNhbXBsZUluZGV4O1xcbiAgICB9IGVsc2Uge1xcbiAgICAgIGF1ZGlvT2JqZWN0VHlwZSA9IDU7XFxuICAgICAgY29uZmlnID0gbmV3IEFycmF5KDQpO1xcbiAgICAgIGlmIChzYW1wbGVJbmRleCA+PSA2KSB7XFxuICAgICAgICBleHRlbnNpb25TYW1wbGVJbmRleCA9IHNhbXBsZUluZGV4IC0gMztcXG4gICAgICB9IGVsc2Uge1xcbiAgICAgICAgaWYgKGNoYW5uZWwgPT09IDEpIHtcXG4gICAgICAgICAgYXVkaW9PYmplY3RUeXBlID0gMjtcXG4gICAgICAgICAgY29uZmlnID0gbmV3IEFycmF5KDIpO1xcbiAgICAgICAgfVxcbiAgICAgICAgZXh0ZW5zaW9uU2FtcGxlSW5kZXggPSBzYW1wbGVJbmRleDtcXG4gICAgICB9XFxuICAgIH1cXG5cXG4gICAgY29uZmlnWzBdID0gYXVkaW9PYmplY3RUeXBlIDw8IDM7XFxuICAgIGNvbmZpZ1swXSB8PSAoc2FtcGxlSW5kZXggJiAweDBlKSA+PiAxO1xcbiAgICBjb25maWdbMV0gPSAoc2FtcGxlSW5kZXggJiAweDAxKSA8PCA3O1xcbiAgICBjb25maWdbMV0gfD0gY2hhbm5lbCA8PCAzO1xcbiAgICBpZiAoYXVkaW9PYmplY3RUeXBlID09PSA1KSB7XFxuICAgICAgY29uZmlnWzFdIHw9IChleHRlbnNpb25TYW1wbGVJbmRleCAmIDB4MGUpID4+IDE7XFxuICAgICAgY29uZmlnWzJdID0gKGV4dGVuc2lvblNhbXBsZUluZGV4ICYgMHgwMSkgPDwgNztcXG4gICAgICBjb25maWdbMl0gfD0gMiA8PCAyO1xcbiAgICAgIGNvbmZpZ1szXSA9IDA7XFxuICAgIH1cXG4gICAgcmV0dXJuIGNvbmZpZztcXG4gIH1cXG5cXG4gIGdldCBpbnB1dEJ1ZmZlcigpIHtcXG4gICAgcmV0dXJuIHRoaXMuX2NvbnRleHQuZ2V0SW5zdGFuY2UodGhpcy5jb25maWdzLmlucHV0YnVmZmVyKTtcXG4gIH1cXG5cXG4gIGdldCBfdHJhY2tzKCkge1xcbiAgICByZXR1cm4gdGhpcy5fY29udGV4dC5nZXRJbnN0YW5jZSgnVFJBQ0tTJyk7XFxuICB9XFxufVxcblxcbmV4cG9ydHMuZGVmYXVsdCA9IFRzRGVtdXhlcjtcXG5cXG4vLyMgc291cmNlVVJMPXdlYnBhY2s6Ly94Z3BsYXllci1mbHYvLi4veGdwbGF5ZXItZGVtdXgvc3JjL2hscy9kZW11eGVyL3RzLmpzP1wiKX0sXCIuLi94Z3BsYXllci1kZW11eC9zcmMvaGxzL3BsYXlsaXN0LmpzXCI6XG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi4veGdwbGF5ZXItZGVtdXgvc3JjL2hscy9wbGF5bGlzdC5qcyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIG5vIHN0YXRpYyBleHBvcnRzIGZvdW5kICovZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7XCJ1c2Ugc3RyaWN0XCI7ZXZhbChcIlxcblxcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcXFwiX19lc01vZHVsZVxcXCIsIHtcXG4gIHZhbHVlOiB0cnVlXFxufSk7XFxuY2xhc3MgUGxheWxpc3Qge1xcbiAgY29uc3RydWN0b3IoY29uZmlncykge1xcbiAgICB0aGlzLl9iYXNlVVJMID0gJyc7XFxuICAgIHRoaXMuX2xpc3QgPSB7fTtcXG4gICAgdGhpcy5fdHMgPSB7fTtcXG4gICAgdGhpcy52ZXJzaW9uID0gMDtcXG4gICAgdGhpcy5zZXF1ZW5jZSA9IC0xO1xcbiAgICB0aGlzLnRhcmdldGR1cmF0aW9uID0gMDtcXG4gICAgdGhpcy5kdXJhdGlvbiA9IDA7XFxuICAgIHRoaXMuZnJhZ0xlbmd0aCA9IDA7XFxuICAgIHRoaXMuX2xhc3RnZXQgPSB1bmRlZmluZWQ7XFxuICAgIHRoaXMuX2F1ZG9jbGVhciA9IGNvbmZpZ3MuYXV0b2NsZWFyIHx8IGZhbHNlO1xcbiAgfVxcblxcbiAgZ2V0IGxpc3QoKSB7XFxuICAgIHJldHVybiB0aGlzLl9saXN0O1xcbiAgfVxcblxcbiAgc2V0IGJhc2VVUkwoYmFzZVVSTCkge1xcbiAgICBpZiAodGhpcy5iYXNlVVJMICE9PSBiYXNlVVJMKSB7XFxuICAgICAgdGhpcy5jbGVhcigpO1xcbiAgICAgIHRoaXMuX2Jhc2VVUkwgPSBiYXNlVVJMO1xcbiAgICB9XFxuICB9XFxuXFxuICBnZXQgYmFzZVVSTCgpIHtcXG4gICAgcmV0dXJuIHRoaXMuX2Jhc2VVUkw7XFxuICB9XFxuXFxuICBwdXNoKHRzLCBkdXJhdGlvbikge1xcbiAgICBpZiAoIXRoaXMuX3RzW3RzXSkge1xcbiAgICAgIHRoaXMuX3RzW3RzXSA9IHsgZHVyYXRpb246IGR1cmF0aW9uLCBkb3dubG9hZGVkOiBmYWxzZSwgZG93bmxvYWRpbmc6IGZhbHNlLCBzdGFydDogdGhpcy5kdXJhdGlvbiB9O1xcbiAgICAgIHRoaXMuX2xpc3RbdGhpcy5kdXJhdGlvbl0gPSB0cztcXG4gICAgICB0aGlzLmR1cmF0aW9uICs9IGR1cmF0aW9uO1xcbiAgICAgIHRoaXMuZnJhZ0xlbmd0aCArPSAxO1xcbiAgICB9XFxuICB9XFxuXFxuICBkZWxldGVGcmFnKHVybCkge1xcbiAgICBpZiAodGhpcy5fdHNbdXJsXSkge1xcbiAgICAgIGlmICh0aGlzLl90c1t1cmxdLnN0YXJ0ID4gdGhpcy5fbGFzdGdldC50aW1lKSB7XFxuICAgICAgICB0aGlzLl9sYXN0Z2V0ID0ge1xcbiAgICAgICAgICBkdXJhdGlvbjogdGhpcy5fdHNbdXJsXS5kdXJhdGlvbixcXG4gICAgICAgICAgdGltZTogdGhpcy5fdHNbdXJsXS5zdGFydCxcXG4gICAgICAgICAgZG93bmxvYWRlZDogZmFsc2UsXFxuICAgICAgICAgIGRvd25sb2FkaW5nOiBmYWxzZSxcXG4gICAgICAgICAgdXJsOiB1cmxcXG4gICAgICAgIH07XFxuICAgICAgfVxcbiAgICAgIGRlbGV0ZSB0aGlzLl9saXN0W3RoaXMuX3RzW3VybF0uc3RhcnRdO1xcbiAgICAgIGRlbGV0ZSB0aGlzLl90c1t1cmxdO1xcbiAgICAgIHRoaXMuZnJhZ0xlbmd0aCAtPSAxO1xcbiAgICB9XFxuICB9XFxuXFxuICBwdXNoTTNVOChkYXRhLCBkZWxldGVwcmUpIHtcXG4gICAgLy8g5bi46KeE5L+h5oGv5pu/5o2iXFxuICAgIGlmICghZGF0YSkge1xcbiAgICAgIHJldHVybjtcXG4gICAgfVxcbiAgICB0aGlzLnZlcnNpb24gPSBkYXRhLnZlcnNpb247XFxuICAgIHRoaXMudGFyZ2V0ZHVyYXRpb24gPSBkYXRhLnRhcmdldGR1cmF0aW9uO1xcblxcbiAgICAvLyDmlrDliIbniYfkv6Hmga9cXG4gICAgaWYgKGRhdGEuc2VxdWVuY2UgPiB0aGlzLnNlcXVlbmNlKSB7XFxuICAgICAgdGhpcy5zZXF1ZW5jZSA9IGRhdGEuc2VxdWVuY2U7XFxuICAgICAgbGV0IG5ld2ZyYWdsaXN0ID0gW107XFxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkYXRhLmZyYWdzLmxlbmd0aDsgaSsrKSB7XFxuICAgICAgICBsZXQgZnJhZyA9IGRhdGEuZnJhZ3NbaV07XFxuICAgICAgICBpZiAoIXRoaXMuX3RzW2ZyYWcudXJsXSkge1xcbiAgICAgICAgICBuZXdmcmFnbGlzdC5wdXNoKGZyYWcudXJsKTtcXG4gICAgICAgICAgdGhpcy5wdXNoKGZyYWcudXJsLCBmcmFnLmR1cmF0aW9uKTtcXG4gICAgICAgIH1cXG4gICAgICB9XFxuICAgICAgaWYgKGRlbGV0ZXByZSkge1xcbiAgICAgICAgbGV0IHRzbGlzdCA9IHRoaXMuZ2V0VHNMaXN0KCk7XFxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRzbGlzdC5sZW5ndGg7IGkrKykge1xcbiAgICAgICAgICBpZiAobmV3ZnJhZ2xpc3QuaW5kZXhPZih0c2xpc3RbaV0pIDwgMCkge1xcbiAgICAgICAgICAgIHRoaXMuZGVsZXRlRnJhZyh0c2xpc3RbaV0pO1xcbiAgICAgICAgICB9XFxuICAgICAgICB9XFxuICAgICAgfVxcbiAgICB9XFxuICB9XFxuXFxuICBnZXRUc0xpc3QoKSB7XFxuICAgIHJldHVybiBPYmplY3Qua2V5cyh0aGlzLl90cyk7XFxuICB9XFxuXFxuICBkb3dubG9hZGVkKHRzbmFtZSwgaXNsb2FkZWQpIHtcXG4gICAgbGV0IHRzID0gdGhpcy5fdHNbdHNuYW1lXTtcXG4gICAgaWYgKHRzKSB7XFxuICAgICAgdHMuZG93bmxvYWRlZCA9IGlzbG9hZGVkO1xcbiAgICB9XFxuICB9XFxuXFxuICBkb3dubG9hZGluZyh0c25hbWUsIGxvYWRpbmcpIHtcXG4gICAgbGV0IHRzID0gdGhpcy5fdHNbdHNuYW1lXTtcXG4gICAgaWYgKHRzKSB7XFxuICAgICAgdHMuZG93bmxvYWRpbmcgPSBsb2FkaW5nO1xcbiAgICB9XFxuICB9XFxuXFxuICBnZXRUc0J5TmFtZShuYW1lKSB7XFxuICAgIHJldHVybiB0aGlzLl90c1tuYW1lXTtcXG4gIH1cXG5cXG4gIGdldFRzKHRpbWUpIHtcXG4gICAgbGV0IHRpbWVsaXN0ID0gT2JqZWN0LmtleXModGhpcy5fbGlzdCk7XFxuICAgIGxldCB0cztcXG5cXG4gICAgaWYgKHRpbWUgPT09IHVuZGVmaW5lZCkge1xcbiAgICAgIGlmICh0aGlzLl9sYXN0Z2V0KSB7XFxuICAgICAgICB0aW1lID0gdGhpcy5fbGFzdGdldC50aW1lICsgdGhpcy5fbGFzdGdldC5kdXJhdGlvbjtcXG4gICAgICB9IGVsc2Uge1xcbiAgICAgICAgdGltZSA9IDA7XFxuICAgICAgfVxcbiAgICB9XFxuXFxuICAgIGlmICh0aW1lbGlzdC5sZW5ndGggPCAxIHx8IHRpbWUgPj0gdGhpcy5kdXJhdGlvbikge1xcbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XFxuICAgIH1cXG4gICAgdGltZWxpc3Quc29ydCgoYSwgYikgPT4ge1xcbiAgICAgIHJldHVybiBwYXJzZUZsb2F0KGEpIC0gcGFyc2VGbG9hdChiKTtcXG4gICAgfSk7XFxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGltZWxpc3QubGVuZ3RoOyBpKyspIHtcXG4gICAgICBpZiAodGltZSA+PSBwYXJzZUludCh0aW1lbGlzdFtpXSkpIHtcXG4gICAgICAgIGxldCB1cmwgPSB0aGlzLl9saXN0W3RpbWVsaXN0W2ldXTtcXG4gICAgICAgIGxldCBkb3dubG9hZGVkID0gdGhpcy5fdHNbdXJsXS5kb3dubG9hZGVkO1xcbiAgICAgICAgbGV0IGRvd25sb2FkaW5nID0gdGhpcy5fdHNbdXJsXS5kb3dubG9hZGluZztcXG4gICAgICAgIHRzID0geyB1cmwsIGRvd25sb2FkZWQsIGRvd25sb2FkaW5nLCB0aW1lOiBwYXJzZUludCh0aW1lbGlzdFtpXSksIGR1cmF0aW9uOiBwYXJzZUludCh0aGlzLl90c1t1cmxdLmR1cmF0aW9uKSB9O1xcbiAgICAgICAgaWYgKHRoaXMuYXV0b2NsZWFyKSB7XFxuICAgICAgICAgIGRlbGV0ZSB0aGlzLl90c1t0aGlzLl9sYXN0Z2V0LnVybF07XFxuICAgICAgICAgIGRlbGV0ZSB0aGlzLl9saXN0W3RoaXMuX2xhc3RnZXQudGltZV07XFxuICAgICAgICB9XFxuICAgICAgICB0aGlzLl9sYXN0Z2V0ID0gdHM7XFxuICAgICAgfSBlbHNlIHtcXG4gICAgICAgIGJyZWFrO1xcbiAgICAgIH1cXG4gICAgfVxcbiAgICByZXR1cm4gdHM7XFxuICB9XFxuXFxuICBjbGVhcigpIHtcXG4gICAgdGhpcy5fYmFzZVVSTCA9ICcnO1xcbiAgICB0aGlzLl9saXN0ID0ge307XFxuICAgIHRoaXMuX3RzID0ge307XFxuICAgIHRoaXMudmVyc2lvbiA9IDA7XFxuICAgIHRoaXMuc2VxdWVuY2UgPSAtMTtcXG4gICAgdGhpcy50YXJnZXRkdXJhdGlvbiA9IDA7XFxuICAgIHRoaXMuZHVyYXRpb24gPSAwO1xcbiAgfVxcblxcbiAgY2xlYXJEb3dubG9hZGVkKCkge1xcbiAgICBmb3IgKGxldCBpID0gMCwgbCA9IE9iamVjdC5rZXlzKHRoaXMuX3RzKS5sZW5ndGg7IGkgPCBsOyBpKyspIHtcXG4gICAgICBsZXQgdHMgPSB0aGlzLl90c1tPYmplY3Qua2V5cyh0aGlzLl90cylbaV1dO1xcbiAgICAgIHRzLmRvd25sb2FkZWQgPSBmYWxzZTtcXG4gICAgICB0cy5kb3dubG9hZGluZyA9IGZhbHNlO1xcbiAgICB9XFxuICB9XFxuXFxuICBkZXN0cm95KCkge1xcbiAgICB0aGlzLl9iYXNlVVJMID0gJyc7XFxuICAgIHRoaXMuX2xpc3QgPSB7fTtcXG4gICAgdGhpcy5fdHMgPSB7fTtcXG4gICAgdGhpcy52ZXJzaW9uID0gMDtcXG4gICAgdGhpcy5zZXF1ZW5jZSA9IC0xO1xcbiAgICB0aGlzLnRhcmdldGR1cmF0aW9uID0gMDtcXG4gICAgdGhpcy5kdXJhdGlvbiA9IDA7XFxuICAgIHRoaXMuZnJhZ0xlbmd0aCA9IDA7XFxuICAgIHRoaXMuX2xhc3RnZXQgPSB1bmRlZmluZWQ7XFxuICAgIHRoaXMuX2F1ZG9jbGVhciA9IGZhbHNlO1xcbiAgfVxcbn1cXG5cXG5leHBvcnRzLmRlZmF1bHQgPSBQbGF5bGlzdDtcXG5cXG4vLyMgc291cmNlVVJMPXdlYnBhY2s6Ly94Z3BsYXllci1mbHYvLi4veGdwbGF5ZXItZGVtdXgvc3JjL2hscy9wbGF5bGlzdC5qcz9cIil9LFwiLi4veGdwbGF5ZXItbG9hZGVyL2luZGV4LmpzXCI6XG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuLi94Z3BsYXllci1sb2FkZXIvaW5kZXguanMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIG5vIHN0YXRpYyBleHBvcnRzIGZvdW5kICovZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7XCJ1c2Ugc3RyaWN0XCI7ZXZhbCgnXFxuXFxubW9kdWxlLmV4cG9ydHMgPSB7XFxuICBGZXRjaExvYWRlcjogX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9zcmMvZmV0Y2gtbG9hZGVyICovIFwiLi4veGdwbGF5ZXItbG9hZGVyL3NyYy9mZXRjaC1sb2FkZXIuanNcIikuZGVmYXVsdFxcbn07XFxuXFxuLy8jIHNvdXJjZVVSTD13ZWJwYWNrOi8veGdwbGF5ZXItZmx2Ly4uL3hncGxheWVyLWxvYWRlci9pbmRleC5qcz8nKX0sXCIuLi94Z3BsYXllci1sb2FkZXIvc3JjL2ZldGNoLWxvYWRlci5qc1wiOlxuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuLi94Z3BsYXllci1sb2FkZXIvc3JjL2ZldGNoLWxvYWRlci5qcyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBubyBzdGF0aWMgZXhwb3J0cyBmb3VuZCAqL2Z1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pe1widXNlIHN0cmljdFwiO2V2YWwoXCJcXG5cXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXFxcIl9fZXNNb2R1bGVcXFwiLCB7XFxuICB2YWx1ZTogdHJ1ZVxcbn0pO1xcblxcbnZhciBfeGdwbGF5ZXJVdGlscyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIHhncGxheWVyLXV0aWxzICovIFxcXCIuLi94Z3BsYXllci11dGlscy9pbmRleC5qc1xcXCIpO1xcblxcbmNvbnN0IExPQURFUl9FVkVOVFMgPSBfeGdwbGF5ZXJVdGlscy5FVkVOVFMuTE9BREVSX0VWRU5UUztcXG5jb25zdCBSRUFEX1NUUkVBTSA9IDA7XFxuY29uc3QgUkVBRF9URVhUID0gMTtcXG5jb25zdCBSRUFEX0pTT04gPSAyO1xcbmNvbnN0IFJFQURfQlVGRkVSID0gMztcXG5jbGFzcyBGZXRjaExvYWRlciB7XFxuICBjb25zdHJ1Y3Rvcihjb25maWdzKSB7XFxuICAgIHRoaXMuY29uZmlncyA9IE9iamVjdC5hc3NpZ24oe30sIGNvbmZpZ3MpO1xcbiAgICB0aGlzLnVybCA9IG51bGw7XFxuICAgIHRoaXMuc3RhdHVzID0gMDtcXG4gICAgdGhpcy5lcnJvciA9IG51bGw7XFxuICAgIHRoaXMuX3JlYWRlciA9IG51bGw7XFxuICAgIHRoaXMuX2NhbmNlbGVkID0gZmFsc2U7XFxuICAgIHRoaXMucmVhZHR5cGUgPSB0aGlzLmNvbmZpZ3MucmVhZHR5cGU7XFxuICAgIHRoaXMuYnVmZmVyID0gdGhpcy5jb25maWdzLmJ1ZmZlciB8fCAnTE9BREVSX0JVRkZFUic7XFxuICAgIHRoaXMuX2xvYWRlclRhc2tObyA9IDA7XFxuICB9XFxuXFxuICBpbml0KCkge1xcbiAgICB0aGlzLm9uKExPQURFUl9FVkVOVFMuTEFERVJfU1RBUlQsIHRoaXMubG9hZC5iaW5kKHRoaXMpKTtcXG4gIH1cXG5cXG4gIHN0YXRpYyBnZXQgdHlwZSgpIHtcXG4gICAgcmV0dXJuICdsb2FkZXInO1xcbiAgfVxcblxcbiAgbG9hZCh1cmwsIG9wdHMpIHtcXG4gICAgbGV0IF90aGlzID0gdGhpcztcXG4gICAgdGhpcy51cmwgPSB1cmw7XFxuICAgIHRoaXMuX2NhbmNlbGVkID0gZmFsc2U7XFxuXFxuICAgIC8vIFRPRE86IEFkZCBSYW5nZXNcXG4gICAgbGV0IHBhcmFtcyA9IHRoaXMuZ2V0UGFyYW1zKG9wdHMpO1xcbiAgICBfdGhpcy5sb2FkaW5nID0gdHJ1ZTtcXG4gICAgcmV0dXJuIGZldGNoKHRoaXMudXJsLCBwYXJhbXMpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XFxuICAgICAgaWYgKHJlc3BvbnNlLm9rKSB7XFxuICAgICAgICBfdGhpcy5zdGF0dXMgPSByZXNwb25zZS5zdGF0dXM7XFxuICAgICAgICByZXR1cm4gX3RoaXMuX29uRmV0Y2hSZXNwb25zZShyZXNwb25zZSk7XFxuICAgICAgfVxcbiAgICAgIF90aGlzLmVtaXQoTE9BREVSX0VWRU5UUy5MT0FERVJfRVJST1IsIF90aGlzLCByZXNwb25zZSk7XFxuICAgICAgX3RoaXMubG9hZGluZyA9IGZhbHNlO1xcbiAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHtcXG4gICAgICBfdGhpcy5lbWl0KExPQURFUl9FVkVOVFMuTE9BREVSX0VSUk9SLCBfdGhpcywgZXJyb3IpO1xcbiAgICAgIF90aGlzLmxvYWRpbmcgPSBmYWxzZTtcXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3IubWVzc2FnZSk7XFxuICAgIH0pO1xcbiAgfVxcblxcbiAgX29uRmV0Y2hSZXNwb25zZShyZXNwb25zZSkge1xcbiAgICBsZXQgX3RoaXMgPSB0aGlzO1xcbiAgICBsZXQgYnVmZmVyID0gdGhpcy5fY29udGV4dC5nZXRJbnN0YW5jZSh0aGlzLmJ1ZmZlcik7XFxuICAgIHRoaXMuX2xvYWRlclRhc2tObysrO1xcbiAgICBsZXQgdGFza25vID0gdGhpcy5fbG9hZGVyVGFza05vO1xcbiAgICBpZiAocmVzcG9uc2Uub2sgPT09IHRydWUpIHtcXG4gICAgICBzd2l0Y2ggKHRoaXMucmVhZHR5cGUpIHtcXG4gICAgICAgIGNhc2UgUkVBRF9KU09OOlxcbiAgICAgICAgICByZXNwb25zZS5qc29uKCkudGhlbihkYXRhID0+IHtcXG4gICAgICAgICAgICBfdGhpcy5sb2FkaW5nID0gZmFsc2U7XFxuICAgICAgICAgICAgaWYgKCFfdGhpcy5fY2FuY2VsZWQpIHtcXG4gICAgICAgICAgICAgIGlmIChidWZmZXIpIHtcXG4gICAgICAgICAgICAgICAgYnVmZmVyLnB1c2goZGF0YSk7XFxuICAgICAgICAgICAgICAgIF90aGlzLmVtaXQoTE9BREVSX0VWRU5UUy5MT0FERVJfQ09NUExFVEUsIGJ1ZmZlcik7XFxuICAgICAgICAgICAgICB9IGVsc2Uge1xcbiAgICAgICAgICAgICAgICBfdGhpcy5lbWl0KExPQURFUl9FVkVOVFMuTE9BREVSX0NPTVBMRVRFLCBkYXRhKTtcXG4gICAgICAgICAgICAgIH1cXG4gICAgICAgICAgICB9XFxuICAgICAgICAgIH0pO1xcbiAgICAgICAgICBicmVhaztcXG4gICAgICAgIGNhc2UgUkVBRF9URVhUOlxcbiAgICAgICAgICByZXNwb25zZS50ZXh0KCkudGhlbihkYXRhID0+IHtcXG4gICAgICAgICAgICBfdGhpcy5sb2FkaW5nID0gZmFsc2U7XFxuICAgICAgICAgICAgaWYgKCFfdGhpcy5fY2FuY2VsZWQpIHtcXG4gICAgICAgICAgICAgIGlmIChidWZmZXIpIHtcXG4gICAgICAgICAgICAgICAgYnVmZmVyLnB1c2goZGF0YSk7XFxuICAgICAgICAgICAgICAgIF90aGlzLmVtaXQoTE9BREVSX0VWRU5UUy5MT0FERVJfQ09NUExFVEUsIGJ1ZmZlcik7XFxuICAgICAgICAgICAgICB9IGVsc2Uge1xcbiAgICAgICAgICAgICAgICBfdGhpcy5lbWl0KExPQURFUl9FVkVOVFMuTE9BREVSX0NPTVBMRVRFLCBkYXRhKTtcXG4gICAgICAgICAgICAgIH1cXG4gICAgICAgICAgICB9XFxuICAgICAgICAgIH0pO1xcbiAgICAgICAgICBicmVhaztcXG4gICAgICAgIGNhc2UgUkVBRF9CVUZGRVI6XFxuICAgICAgICAgIHJlc3BvbnNlLmFycmF5QnVmZmVyKCkudGhlbihkYXRhID0+IHtcXG4gICAgICAgICAgICBfdGhpcy5sb2FkaW5nID0gZmFsc2U7XFxuICAgICAgICAgICAgaWYgKCFfdGhpcy5fY2FuY2VsZWQpIHtcXG4gICAgICAgICAgICAgIGlmIChidWZmZXIpIHtcXG4gICAgICAgICAgICAgICAgYnVmZmVyLnB1c2gobmV3IFVpbnQ4QXJyYXkoZGF0YSkpO1xcbiAgICAgICAgICAgICAgICBfdGhpcy5lbWl0KExPQURFUl9FVkVOVFMuTE9BREVSX0NPTVBMRVRFLCBidWZmZXIpO1xcbiAgICAgICAgICAgICAgfSBlbHNlIHtcXG4gICAgICAgICAgICAgICAgX3RoaXMuZW1pdChMT0FERVJfRVZFTlRTLkxPQURFUl9DT01QTEVURSwgZGF0YSk7XFxuICAgICAgICAgICAgICB9XFxuICAgICAgICAgICAgfVxcbiAgICAgICAgICB9KTtcXG4gICAgICAgICAgYnJlYWs7XFxuICAgICAgICBjYXNlIFJFQURfU1RSRUFNOlxcbiAgICAgICAgZGVmYXVsdDpcXG4gICAgICAgICAgcmV0dXJuIHRoaXMuX29uUmVhZGVyKHJlc3BvbnNlLmJvZHkuZ2V0UmVhZGVyKCksIHRhc2tubyk7XFxuICAgICAgfVxcbiAgICB9XFxuICB9XFxuXFxuICBfb25SZWFkZXIocmVhZGVyLCB0YXNrbm8pIHtcXG4gICAgbGV0IGJ1ZmZlciA9IHRoaXMuX2NvbnRleHQuZ2V0SW5zdGFuY2UodGhpcy5idWZmZXIpO1xcblxcbiAgICBpZiAoIWJ1ZmZlcikge1xcbiAgICAgIHRoaXMuX3JlYWRlci5jYW5jZWwoKTtcXG4gICAgfVxcblxcbiAgICB0aGlzLl9yZWFkZXIgPSByZWFkZXI7XFxuICAgIGlmICh0aGlzLmxvYWRpbmcgPT09IGZhbHNlKSB7XFxuICAgICAgcmV0dXJuO1xcbiAgICB9XFxuXFxuICAgIGxldCBfdGhpcyA9IHRoaXM7XFxuICAgIC8vIHJlYWRlciByZWFkIGZ1bmN0aW9uIHJldHVybnMgYSBQcm9taXNlLiBnZXQgZGF0YSB3aGVuIGNhbGxiYWNrIGFuZCBoYXMgdmFsdWUuZG9uZSB3aGVuIGRpc2Nvbm5lY3RlZC5cXG4gICAgLy8gcmVhZOaWueazlei/lOWbnuS4gOS4qlByb21pc2UuIOWbnuiwg+S4reWPr+S7peiOt+WPluWIsOaVsOaNruOAguW9k3ZhbHVlLmRvbmXlrZjlnKjml7bvvIzor7TmmI7pk77mjqXmlq3lvIDjgIJcXG4gICAgdGhpcy5fcmVhZGVyICYmIHRoaXMuX3JlYWRlci5yZWFkKCkudGhlbihmdW5jdGlvbiAodmFsKSB7XFxuICAgICAgaWYgKHZhbC5kb25lKSB7XFxuICAgICAgICAvLyBUT0RPOiDlrozmiJDlpITnkIZcXG4gICAgICAgIF90aGlzLmxvYWRpbmcgPSBmYWxzZTtcXG4gICAgICAgIF90aGlzLnN0YXR1cyA9IDA7XFxuICAgICAgICBfdGhpcy5lbWl0KExPQURFUl9FVkVOVFMuTE9BREVSX0NPTVBMRVRFLCBidWZmZXIpO1xcbiAgICAgICAgcmV0dXJuO1xcbiAgICAgIH1cXG5cXG4gICAgICBpZiAoX3RoaXMuX2NhbmNlbGVkKSB7XFxuICAgICAgICBfdGhpcy5fcmVhZGVyLmNhbmNlbCgpO1xcbiAgICAgICAgcmV0dXJuO1xcbiAgICAgIH1cXG4gICAgICBidWZmZXIucHVzaCh2YWwudmFsdWUpO1xcbiAgICAgIF90aGlzLmVtaXQoTE9BREVSX0VWRU5UUy5MT0FERVJfREFUQUxPQURFRCwgYnVmZmVyKTtcXG4gICAgICByZXR1cm4gX3RoaXMuX29uUmVhZGVyKHJlYWRlciwgdGFza25vKTtcXG4gICAgfSkuY2F0Y2goZXJyb3IgPT4ge1xcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xcbiAgICAgIF90aGlzLmVtaXQoTE9BREVSX0VWRU5UUy5MT0FERVJfRVJST1IsIF90aGlzLCBlcnJvcik7XFxuICAgICAgX3RoaXMubG9hZGluZyA9IGZhbHNlO1xcbiAgICB9KTtcXG4gIH1cXG5cXG4gIGdldFBhcmFtcyhvcHRzKSB7XFxuICAgIGxldCBvcHRpb25zID0gT2JqZWN0LmFzc2lnbih7fSwgb3B0cyk7XFxuICAgIGxldCBoZWFkZXJzID0gbmV3IEhlYWRlcnMoKTtcXG5cXG4gICAgbGV0IHBhcmFtcyA9IHtcXG4gICAgICBtZXRob2Q6ICdHRVQnLFxcbiAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXFxuICAgICAgbW9kZTogJ2NvcnMnLFxcbiAgICAgIGNhY2hlOiAnZGVmYXVsdCdcXG5cXG4gICAgICAvLyBhZGQgY3VzdG1vciBoZWFkZXJzXFxuICAgICAgLy8g5re75Yqg6Ieq5a6a5LmJ5aS0XFxuICAgIH07aWYgKHR5cGVvZiB0aGlzLmNvbmZpZ3MuaGVhZGVycyA9PT0gJ29iamVjdCcpIHtcXG4gICAgICBsZXQgY29uZmlnSGVhZGVycyA9IHRoaXMuY29uZmlncy5oZWFkZXJzO1xcbiAgICAgIGZvciAobGV0IGtleSBpbiBjb25maWdIZWFkZXJzKSB7XFxuICAgICAgICBpZiAoY29uZmlnSGVhZGVycy5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XFxuICAgICAgICAgIGhlYWRlcnMuYXBwZW5kKGtleSwgY29uZmlnSGVhZGVyc1trZXldKTtcXG4gICAgICAgIH1cXG4gICAgICB9XFxuICAgIH1cXG5cXG4gICAgaWYgKHR5cGVvZiBvcHRpb25zLmhlYWRlcnMgPT09ICdvYmplY3QnKSB7XFxuICAgICAgbGV0IG9wdEhlYWRlcnMgPSBvcHRpb25zLmhlYWRlcnM7XFxuICAgICAgZm9yIChsZXQga2V5IGluIG9wdEhlYWRlcnMpIHtcXG4gICAgICAgIGlmIChvcHRIZWFkZXJzLmhhc093blByb3BlcnR5KGtleSkpIHtcXG4gICAgICAgICAgaGVhZGVycy5hcHBlbmQoa2V5LCBvcHRIZWFkZXJzW2tleV0pO1xcbiAgICAgICAgfVxcbiAgICAgIH1cXG4gICAgfVxcblxcbiAgICBpZiAob3B0aW9ucy5jb3JzID09PSBmYWxzZSkge1xcbiAgICAgIHBhcmFtcy5tb2RlID0gJ3NhbWUtb3JpZ2luJztcXG4gICAgfVxcblxcbiAgICAvLyB3aXRoQ3JlZGVudGlhbHMgaXMgZGlzYWJsZWQgYnkgZGVmYXVsdFxcbiAgICAvLyB3aXRoQ3JlZGVudGlhbHMg5Zyo6buY6K6k5oOF5Ya15LiL5LiN6KKr5L2/55So44CCXFxuICAgIGlmIChvcHRpb25zLndpdGhDcmVkZW50aWFscykge1xcbiAgICAgIHBhcmFtcy5jcmVkZW50aWFscyA9ICdpbmNsdWRlJztcXG4gICAgfVxcblxcbiAgICAvLyBUT0RPOiBBZGQgcmFuZ2VzO1xcbiAgICByZXR1cm4gcGFyYW1zO1xcbiAgfVxcblxcbiAgY2FuY2VsKCkge1xcbiAgICBpZiAodGhpcy5fcmVhZGVyKSB7XFxuICAgICAgdGhpcy5fcmVhZGVyLmNhbmNlbCgpO1xcbiAgICAgIHRoaXMuX3JlYWRlciA9IG51bGw7XFxuICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7XFxuICAgICAgdGhpcy5fY2FuY2VsZWQgPSB0cnVlO1xcbiAgICB9XFxuICB9XFxuXFxuICBkZXN0cm95KCkge1xcbiAgICB0aGlzLmNhbmNlbCgpO1xcbiAgfVxcbn1cXG5cXG5leHBvcnRzLmRlZmF1bHQgPSBGZXRjaExvYWRlcjtcXG5cXG4vLyMgc291cmNlVVJMPXdlYnBhY2s6Ly94Z3BsYXllci1mbHYvLi4veGdwbGF5ZXItbG9hZGVyL3NyYy9mZXRjaC1sb2FkZXIuanM/XCIpfSxcIi4uL3hncGxheWVyLXJlbXV4L2luZGV4LmpzXCI6XG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4uL3hncGxheWVyLXJlbXV4L2luZGV4LmpzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIG5vIHN0YXRpYyBleHBvcnRzIGZvdW5kICovZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7XCJ1c2Ugc3RyaWN0XCI7ZXZhbCgnXFxuXFxubW9kdWxlLmV4cG9ydHMgPSB7XFxuICBNcDRSZW11eGVyOiBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL3NyYy9tcDQgKi8gXCIuLi94Z3BsYXllci1yZW11eC9zcmMvbXA0L2luZGV4LmpzXCIpLmRlZmF1bHRcXG59O1xcblxcbi8vIyBzb3VyY2VVUkw9d2VicGFjazovL3hncGxheWVyLWZsdi8uLi94Z3BsYXllci1yZW11eC9pbmRleC5qcz8nKX0sXCIuLi94Z3BsYXllci1yZW11eC9zcmMvbXA0L2ZtcDQuanNcIjpcbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4uL3hncGxheWVyLXJlbXV4L3NyYy9tcDQvZm1wNC5qcyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgbm8gc3RhdGljIGV4cG9ydHMgZm91bmQgKi9mdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXtcInVzZSBzdHJpY3RcIjtldmFsKFwiXFxuXFxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFxcXCJfX2VzTW9kdWxlXFxcIiwge1xcbiAgdmFsdWU6IHRydWVcXG59KTtcXG5cXG52YXIgX3hncGxheWVyVXRpbHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISB4Z3BsYXllci11dGlscyAqLyBcXFwiLi4veGdwbGF5ZXItdXRpbHMvaW5kZXguanNcXFwiKTtcXG5cXG4vLyBjb25zdCBVSU5UMzJfTUFYID0gTWF0aC5wb3coMiwgMzIpIC0gMTtcXG5jbGFzcyBGbXA0IHtcXG4gIHN0YXRpYyBzaXplKHZhbHVlKSB7XFxuICAgIHJldHVybiBfeGdwbGF5ZXJVdGlscy5CdWZmZXIud3JpdGVVaW50MzIodmFsdWUpO1xcbiAgfVxcbiAgc3RhdGljIGluaXRCb3goc2l6ZSwgbmFtZSwgLi4uY29udGVudCkge1xcbiAgICBjb25zdCBidWZmZXIgPSBuZXcgX3hncGxheWVyVXRpbHMuQnVmZmVyKCk7XFxuICAgIGJ1ZmZlci53cml0ZShGbXA0LnNpemUoc2l6ZSksIEZtcDQudHlwZShuYW1lKSwgLi4uY29udGVudCk7XFxuICAgIHJldHVybiBidWZmZXIuYnVmZmVyO1xcbiAgfVxcbiAgc3RhdGljIGV4dGVuc2lvbih2ZXJzaW9uLCBmbGFnKSB7XFxuICAgIHJldHVybiBuZXcgVWludDhBcnJheShbdmVyc2lvbiwgZmxhZyA+PiAxNiAmIDB4ZmYsIGZsYWcgPj4gOCAmIDB4ZmYsIGZsYWcgJiAweGZmXSk7XFxuICB9XFxuICBzdGF0aWMgZnR5cCgpIHtcXG4gICAgcmV0dXJuIEZtcDQuaW5pdEJveCgyNCwgJ2Z0eXAnLCBuZXcgVWludDhBcnJheShbMHg2OSwgMHg3MywgMHg2RiwgMHg2RCwgLy8gaXNvbSxcXG4gICAgMHgwLCAweDAsIDB4MDAsIDB4MDEsIC8vIG1pbm9yX3ZlcnNpb246IDB4MDFcXG4gICAgMHg2OSwgMHg3MywgMHg2RiwgMHg2RCwgLy8gaXNvbVxcbiAgICAweDYxLCAweDc2LCAweDYzLCAweDMxIC8vIGF2YzFcXG4gICAgXSkpO1xcbiAgfVxcbiAgc3RhdGljIG1vb3YoeyB0eXBlLCBtZXRhIH0pIHtcXG4gICAgbGV0IHNpemUgPSA4O1xcbiAgICBsZXQgbXZoZCA9IEZtcDQubXZoZChtZXRhLmR1cmF0aW9uLCBtZXRhLnRpbWVzY2FsZSk7XFxuICAgIGxldCB0cmFrO1xcblxcbiAgICBpZiAodHlwZSA9PT0gJ3ZpZGVvJykge1xcbiAgICAgIHRyYWsgPSBGbXA0LnZpZGVvVHJhayhtZXRhKTtcXG4gICAgfSBlbHNlIHtcXG4gICAgICB0cmFrID0gRm1wNC5hdWRpb1RyYWsobWV0YSk7XFxuICAgIH1cXG5cXG4gICAgbGV0IG12ZXggPSBGbXA0Lm12ZXgobWV0YS5kdXJhdGlvbiwgbWV0YS50aW1lc2NhbGUgfHwgMTAwMCwgbWV0YS5pZCk7XFxuICAgIFttdmhkLCB0cmFrLCBtdmV4XS5mb3JFYWNoKGl0ZW0gPT4ge1xcbiAgICAgIHNpemUgKz0gaXRlbS5ieXRlTGVuZ3RoO1xcbiAgICB9KTtcXG4gICAgcmV0dXJuIEZtcDQuaW5pdEJveChzaXplLCAnbW9vdicsIG12aGQsIHRyYWssIG12ZXgpO1xcbiAgfVxcbiAgc3RhdGljIG12aGQoZHVyYXRpb24sIHRpbWVzY2FsZSA9IDEwMDApIHtcXG4gICAgLy8gZHVyYXRpb24gKj0gdGltZXNjYWxlO1xcbiAgICBsZXQgYnl0ZXMgPSBuZXcgVWludDhBcnJheShbMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgLy8gdmVyc2lvbigwKSArIGZsYWdzICAgICAx5L2N55qEYm9454mI5pysKzPkvY1mbGFncyAgIGJveOeJiOacrO+8jDDmiJYx77yM5LiA6Iis5Li6MOOAgu+8iOS7peS4i+Wtl+iKguaVsOWdh+aMiXZlcnNpb249MO+8iVxcbiAgICAweDAwLCAweDAwLCAweDAwLCAweDAwLCAvLyBjcmVhdGlvbl90aW1lICAgIOWIm+W7uuaXtumXtCAg77yI55u45a+55LqOVVRD5pe26Ze0MTkwNC0wMS0wMembtueCueeahOenkuaVsO+8iVxcbiAgICAweDAwLCAweDAwLCAweDAwLCAweDAwLCAvLyBtb2RpZmljYXRpb25fdGltZSAgIOS/ruaUueaXtumXtFxcblxcbiAgICAvKipcXG4gICAgICAgICAgICogdGltZXNjYWxlOiA0IGJ5dGVz5paH5Lu25aqS5L2T5ZyoMeenkuaXtumXtOWGheeahOWIu+W6puWAvO+8jOWPr+S7peeQhuino+S4ujHnp5Lplb/luqZcXG4gICAgICAgICAgICovXFxuICAgIHRpbWVzY2FsZSA+Pj4gMjQgJiAweEZGLCB0aW1lc2NhbGUgPj4+IDE2ICYgMHhGRiwgdGltZXNjYWxlID4+PiA4ICYgMHhGRiwgdGltZXNjYWxlICYgMHhGRixcXG5cXG4gICAgLyoqXFxuICAgICAgICAgICAqIGR1cmF0aW9uOiA0IGJ5dGVz6K+ldHJhY2vnmoTml7bpl7Tplb/luqbvvIznlKhkdXJhdGlvbuWSjHRpbWUgc2NhbGXlgLzlj6/ku6XorqHnrpd0cmFja+aXtumVv++8jOavlOWmgmF1ZGlvIHRyYWNr55qEdGltZSBzY2FsZSA9IDgwMDAsXFxuICAgICAgICAgICAqIGR1cmF0aW9uID0gNTYwMTI477yM5pe26ZW/5Li6NzAuMDE277yMdmlkZW8gdHJhY2vnmoR0aW1lIHNjYWxlID0gNjAwLCBkdXJhdGlvbiA9IDQyMDAw77yM5pe26ZW/5Li6NzBcXG4gICAgICAgICAgICovXFxuICAgIGR1cmF0aW9uID4+PiAyNCAmIDB4RkYsIGR1cmF0aW9uID4+PiAxNiAmIDB4RkYsIGR1cmF0aW9uID4+PiA4ICYgMHhGRiwgZHVyYXRpb24gJiAweEZGLCAweDAwLCAweDAxLCAweDAwLCAweDAwLCAvLyBQcmVmZXJyZWQgcmF0ZTogMS4wICAg5o6o6I2Q5pKt5pS+6YCf546H77yM6auYMTbkvY3lkozkvY4xNuS9jeWIhuWIq+S4uuWwj+aVsOeCueaVtOaVsOmDqOWIhuWSjOWwj+aVsOmDqOWIhu+8jOWNs1sxNi4xNl0g5qC85byP77yM6K+l5YC85Li6MS4w77yIMHgwMDAxMDAwMO+8ieihqOekuuato+W4uOWJjeWQkeaSreaUvlxcbiAgICAvKipcXG4gICAgICAgICAgICogUHJlZmVycmVkVm9sdW1lKDEuMCwgMmJ5dGVzKSArIHJlc2VydmVkKDJieXRlcylcXG4gICAgICAgICAgICog5LiOcmF0Zeexu+S8vO+8jFs4LjhdIOagvOW8j++8jDEuMO+8iDB4MDEwMO+8ieihqOekuuacgOWkp+mfs+mHj1xcbiAgICAgICAgICAgKi9cXG4gICAgMHgwMSwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgLy8gIHJlc2VydmVkOiA0ICsgNCBieXRlc+S/neeVmeS9jVxcbiAgICAweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAxLCAweDAwLCAweDAwLCAvLyAtLS0tYmVnaW4gY29tcG9zaXRpb24gbWF0cml4LS0tLVxcbiAgICAweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAwLCAvLyDop4bpopHlj5jmjaLnn6npmLUgICDnur/mgKfku6PmlbBcXG4gICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMSwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHg0MCwgMHgwMCwgMHgwMCwgMHgwMCwgLy8gLS0tLWVuZCBjb21wb3NpdGlvbiBtYXRyaXgtLS0tXFxuICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIC8vIC0tLS1iZWdpbiBwcmVfZGVmaW5lZCA2ICogNCBieXRlcy0tLS1cXG4gICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgLy8gcHJlLWRlZmluZWQg5L+d55WZ5L2NXFxuICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIC8vIC0tLS1lbmQgcHJlX2RlZmluZWQgNiAqIDQgYnl0ZXMtLS0tXFxuICAgIDB4RkYsIDB4RkYsIDB4RkYsIDB4RkYgLy8gbmV4dF90cmFja19JRCDkuIvkuIDkuKp0cmFja+S9v+eUqOeahGlk5Y+3XFxuICAgIF0pO1xcbiAgICByZXR1cm4gRm1wNC5pbml0Qm94KDggKyBieXRlcy5sZW5ndGgsICdtdmhkJywgbmV3IFVpbnQ4QXJyYXkoYnl0ZXMpKTtcXG4gIH1cXG4gIHN0YXRpYyB2aWRlb1RyYWsoZGF0YSkge1xcbiAgICBsZXQgc2l6ZSA9IDg7XFxuXFxuICAgIGxldCB0a2hkID0gRm1wNC50a2hkKHtcXG4gICAgICBpZDogMSxcXG4gICAgICBkdXJhdGlvbjogZGF0YS5kdXJhdGlvbixcXG4gICAgICB0aW1lc2NhbGU6IGRhdGEudGltZXNjYWxlIHx8IDEwMDAsXFxuICAgICAgd2lkdGg6IGRhdGEucHJlc2VudFdpZHRoLFxcbiAgICAgIGhlaWdodDogZGF0YS5wcmVzZW50SGVpZ2h0LFxcbiAgICAgIHR5cGU6ICd2aWRlbydcXG4gICAgfSk7XFxuICAgIGxldCBtZGlhID0gRm1wNC5tZGlhKHtcXG4gICAgICB0eXBlOiAndmlkZW8nLFxcbiAgICAgIHRpbWVzY2FsZTogZGF0YS50aW1lc2NhbGUgfHwgMTAwMCxcXG4gICAgICBkdXJhdGlvbjogZGF0YS5kdXJhdGlvbixcXG4gICAgICBhdmNjOiBkYXRhLmF2Y2MsXFxuICAgICAgcGFyUmF0aW86IGRhdGEucGFyUmF0aW8sXFxuICAgICAgd2lkdGg6IGRhdGEucHJlc2VudFdpZHRoLFxcbiAgICAgIGhlaWdodDogZGF0YS5wcmVzZW50SGVpZ2h0XFxuICAgIH0pO1xcbiAgICBbdGtoZCwgbWRpYV0uZm9yRWFjaChpdGVtID0+IHtcXG4gICAgICBzaXplICs9IGl0ZW0uYnl0ZUxlbmd0aDtcXG4gICAgfSk7XFxuICAgIHJldHVybiBGbXA0LmluaXRCb3goc2l6ZSwgJ3RyYWsnLCB0a2hkLCBtZGlhKTtcXG4gIH1cXG4gIHN0YXRpYyBhdWRpb1RyYWsoZGF0YSkge1xcbiAgICBsZXQgc2l6ZSA9IDg7XFxuICAgIGxldCB0a2hkID0gRm1wNC50a2hkKHtcXG4gICAgICBpZDogMixcXG4gICAgICBkdXJhdGlvbjogZGF0YS5kdXJhdGlvbixcXG4gICAgICB0aW1lc2NhbGU6IGRhdGEudGltZXNjYWxlIHx8IDEwMDAsXFxuICAgICAgd2lkdGg6IDAsXFxuICAgICAgaGVpZ2h0OiAwLFxcbiAgICAgIHR5cGU6ICdhdWRpbydcXG4gICAgfSk7XFxuICAgIGxldCBtZGlhID0gRm1wNC5tZGlhKHtcXG4gICAgICB0eXBlOiAnYXVkaW8nLFxcbiAgICAgIHRpbWVzY2FsZTogZGF0YS50aW1lc2NhbGUgfHwgMTAwMCxcXG4gICAgICBkdXJhdGlvbjogZGF0YS5kdXJhdGlvbixcXG4gICAgICBjaGFubmVsQ291bnQ6IGRhdGEuY2hhbm5lbENvdW50LFxcbiAgICAgIHNhbXBsZXJhdGU6IGRhdGEuc2FtcGxlUmF0ZSxcXG4gICAgICBjb25maWc6IGRhdGEuY29uZmlnXFxuICAgIH0pO1xcbiAgICBbdGtoZCwgbWRpYV0uZm9yRWFjaChpdGVtID0+IHtcXG4gICAgICBzaXplICs9IGl0ZW0uYnl0ZUxlbmd0aDtcXG4gICAgfSk7XFxuICAgIHJldHVybiBGbXA0LmluaXRCb3goc2l6ZSwgJ3RyYWsnLCB0a2hkLCBtZGlhKTtcXG4gIH1cXG4gIHN0YXRpYyB0a2hkKGRhdGEpIHtcXG4gICAgbGV0IGlkID0gZGF0YS5pZDtcXG4gICAgbGV0IGR1cmF0aW9uID0gZGF0YS5kdXJhdGlvbjtcXG4gICAgbGV0IHdpZHRoID0gZGF0YS53aWR0aDtcXG4gICAgbGV0IGhlaWdodCA9IGRhdGEuaGVpZ2h0O1xcbiAgICBsZXQgY29udGVudCA9IG5ldyBVaW50OEFycmF5KFsweDAwLCAweDAwLCAweDAwLCAweDA3LCAvLyB2ZXJzaW9uKDApICsgZmxhZ3MgMeS9jeeJiOacrCBib3jniYjmnKzvvIww5oiWMe+8jOS4gOiIrOS4ujDjgILvvIjku6XkuIvlrZfoioLmlbDlnYfmjIl2ZXJzaW9uPTDvvInmjInkvY3miJbmk43kvZznu5PmnpzlgLzvvIzpooTlrprkuYnlpoLkuIvvvJpcXG4gICAgLy8gMHgwMDAwMDEgdHJhY2tfZW5hYmxlZO+8jOWQpuWImeivpXRyYWNr5LiN6KKr5pKt5pS+77ybXFxuICAgIC8vIDB4MDAwMDAyIHRyYWNrX2luX21vdmll77yM6KGo56S66K+ldHJhY2vlnKjmkq3mlL7kuK3ooqvlvJXnlKjvvJtcXG4gICAgLy8gMHgwMDAwMDQgdHJhY2tfaW5fcHJldmlld++8jOihqOekuuivpXRyYWNr5Zyo6aKE6KeI5pe26KKr5byV55So44CCXFxuICAgIC8vIOS4gOiIrOivpeWAvOS4ujfvvIwxKzIrNCDlpoLmnpzkuIDkuKrlqpLkvZPmiYDmnIl0cmFja+Wdh+acquiuvue9rnRyYWNrX2luX21vdmll5ZKMdHJhY2tfaW5fcHJldmlld++8jOWwhuiiq+eQhuino+S4uuaJgOaciXRyYWNr5Z2H6K6+572u5LqG6L+Z5Lik6aG577yb5a+55LqOaGludCB0cmFja++8jOivpeWAvOS4ujBcXG4gICAgLy8gaGludCB0cmFjayDov5nkuKrnibnmrornmoR0cmFja+W5tuS4jeWMheWQq+WqkuS9k+aVsOaNru+8jOiAjOaYr+WMheWQq+S6huS4gOS6m+WwhuWFtuS7luaVsOaNrnRyYWNr5omT5YyF5oiQ5rWB5aqS5L2T55qE5oyH56S65L+h5oGv44CCXFxuICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIC8vIGNyZWF0aW9uX3RpbWXliJvlu7rml7bpl7TvvIjnm7jlr7nkuo5VVEPml7bpl7QxOTA0LTAxLTAx6Zu254K555qE56eS5pWw77yJXFxuICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIC8vIG1vZGlmaWNhdGlvbiB0aW1lIOS/ruaUueaXtumXtFxcbiAgICBpZCA+Pj4gMjQgJiAweEZGLCAvLyB0cmFja19JRDogNCBieXRlcyBpZOWPt++8jOS4jeiDvemHjeWkjeS4lOS4jeiDveS4ujBcXG4gICAgaWQgPj4+IDE2ICYgMHhGRiwgaWQgPj4+IDggJiAweEZGLCBpZCAmIDB4RkYsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIC8vIHJlc2VydmVkOiA0IGJ5dGVzICAgIOS/neeVmeS9jVxcbiAgICBkdXJhdGlvbiA+Pj4gMjQgJiAweEZGLCAvLyBkdXJhdGlvbjogNCBieXRlcyB0cmFja+eahOaXtumXtOmVv+W6plxcbiAgICBkdXJhdGlvbiA+Pj4gMTYgJiAweEZGLCBkdXJhdGlvbiA+Pj4gOCAmIDB4RkYsIGR1cmF0aW9uICYgMHhGRiwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgLy8gcmVzZXJ2ZWQ6IDIgKiA0IGJ5dGVzICAgIOS/neeVmeS9jVxcbiAgICAweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAwLCAvLyBsYXllcigyYnl0ZXMpICsgYWx0ZXJuYXRlX2dyb3VwKDJieXRlcykgIOinhumikeWxgu+8jOm7mOiupOS4ujDvvIzlgLzlsI/nmoTlnKjkuIrlsYIudHJhY2vliIbnu4Tkv6Hmga/vvIzpu5jorqTkuLow6KGo56S66K+ldHJhY2vmnKrkuI7lhbbku5Z0cmFja+aciee+pOe7hOWFs+ezu1xcbiAgICAweDAwLCAweDAwLCAweDAwLCAweDAwLCAvLyB2b2x1bWUoMmJ5dGVzKSArIHJlc2VydmVkKDJieXRlcykgICAgWzguOF0g5qC85byP77yM5aaC5p6c5Li66Z+z6aKRdHJhY2vvvIwxLjDvvIgweDAxMDDvvInooajnpLrmnIDlpKfpn7Pph4/vvJvlkKbliJnkuLowICAgK+S/neeVmeS9jVxcbiAgICAweDAwLCAweDAxLCAweDAwLCAweDAwLCAvLyAtLS0tYmVnaW4gY29tcG9zaXRpb24gbWF0cml4LS0tLVxcbiAgICAweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAxLCAweDAwLCAweDAwLCAvLyDop4bpopHlj5jmjaLnn6npmLVcXG4gICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHg0MCwgMHgwMCwgMHgwMCwgMHgwMCwgLy8gLS0tLWVuZCBjb21wb3NpdGlvbiBtYXRyaXgtLS0tXFxuICAgIHdpZHRoID4+PiA4ICYgMHhGRiwgLy8gLy/lrr3luqZcXG4gICAgd2lkdGggJiAweEZGLCAweDAwLCAweDAwLCBoZWlnaHQgPj4+IDggJiAweEZGLCAvLyDpq5jluqZcXG4gICAgaGVpZ2h0ICYgMHhGRiwgMHgwMCwgMHgwMF0pO1xcbiAgICByZXR1cm4gRm1wNC5pbml0Qm94KDggKyBjb250ZW50LmJ5dGVMZW5ndGgsICd0a2hkJywgY29udGVudCk7XFxuICB9XFxuICBzdGF0aWMgZWR0cyhkYXRhKSB7XFxuICAgIGxldCBidWZmZXIgPSBuZXcgX3hncGxheWVyVXRpbHMuQnVmZmVyKCk7XFxuICAgIGxldCBkdXJhdGlvbiA9IGRhdGEuZHVyYXRpb247XFxuICAgIGxldCBtZWRpYVRpbWUgPSBkYXRhLm1lZGlhVGltZTtcXG4gICAgYnVmZmVyLndyaXRlKEZtcDQuc2l6ZSgzNiksIEZtcDQudHlwZSgnZWR0cycpKTtcXG4gICAgLy8gZWxzdFxcbiAgICBidWZmZXIud3JpdGUoRm1wNC5zaXplKDI4KSwgRm1wNC50eXBlKCdlbHN0JykpO1xcbiAgICBidWZmZXIud3JpdGUobmV3IFVpbnQ4QXJyYXkoWzB4MDAsIDB4MDAsIDB4MDAsIDB4MDEsIC8vIGVudHJ5IGNvdW50XFxuICAgIGR1cmF0aW9uID4+IDI0ICYgMHhmZiwgZHVyYXRpb24gPj4gMTYgJiAweGZmLCBkdXJhdGlvbiA+PiA4ICYgMHhmZiwgZHVyYXRpb24gJiAweGZmLCBtZWRpYVRpbWUgPj4gMjQgJiAweGZmLCBtZWRpYVRpbWUgPj4gMTYgJiAweGZmLCBtZWRpYVRpbWUgPj4gOCAmIDB4ZmYsIG1lZGlhVGltZSAmIDB4ZmYsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDEgLy8gbWVkaWEgcmF0ZVxcbiAgICBdKSk7XFxuICAgIHJldHVybiBidWZmZXIuYnVmZmVyO1xcbiAgfVxcbiAgc3RhdGljIG1kaWEoZGF0YSkge1xcbiAgICBsZXQgc2l6ZSA9IDg7XFxuICAgIGxldCBtZGhkID0gRm1wNC5tZGhkKGRhdGEudGltZXNjYWxlLCBkYXRhLmR1cmF0aW9uKTtcXG4gICAgbGV0IGhkbHIgPSBGbXA0LmhkbHIoZGF0YS50eXBlKTtcXG4gICAgbGV0IG1pbmYgPSBGbXA0Lm1pbmYoZGF0YSk7XFxuICAgIFttZGhkLCBoZGxyLCBtaW5mXS5mb3JFYWNoKGl0ZW0gPT4ge1xcbiAgICAgIHNpemUgKz0gaXRlbS5ieXRlTGVuZ3RoO1xcbiAgICB9KTtcXG4gICAgcmV0dXJuIEZtcDQuaW5pdEJveChzaXplLCAnbWRpYScsIG1kaGQsIGhkbHIsIG1pbmYpO1xcbiAgfVxcbiAgc3RhdGljIG1kaGQodGltZXNjYWxlID0gMTAwMCwgZHVyYXRpb24pIHtcXG4gICAgbGV0IGNvbnRlbnQgPSBuZXcgVWludDhBcnJheShbMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgLy8gY3JlYXRpb25fdGltZSAgICDliJvlu7rml7bpl7RcXG4gICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgLy8gbW9kaWZpY2F0aW9uX3RpbWXkv67mlLnml7bpl7RcXG4gICAgdGltZXNjYWxlID4+PiAyNCAmIDB4RkYsIC8vIHRpbWVzY2FsZTogNCBieXRlcyAgICDmlofku7blqpLkvZPlnKgx56eS5pe26Ze05YaF55qE5Yi75bqm5YC877yM5Y+v5Lul55CG6Kej5Li6MeenkumVv+W6plxcbiAgICB0aW1lc2NhbGUgPj4+IDE2ICYgMHhGRiwgdGltZXNjYWxlID4+PiA4ICYgMHhGRiwgdGltZXNjYWxlICYgMHhGRiwgZHVyYXRpb24gPj4+IDI0ICYgMHhGRiwgLy8gZHVyYXRpb246IDQgYnl0ZXMgIHRyYWNr55qE5pe26Ze06ZW/5bqmXFxuICAgIGR1cmF0aW9uID4+PiAxNiAmIDB4RkYsIGR1cmF0aW9uID4+PiA4ICYgMHhGRiwgZHVyYXRpb24gJiAweEZGLCAweDU1LCAweEM0LCAvLyBsYW5ndWFnZTogdW5kICh1bmRldGVybWluZWQpIOWqkuS9k+ivreiogOeggeOAguacgOmrmOS9jeS4ujDvvIzlkI7pnaIxNeS9jeS4ujPkuKrlrZfnrKbvvIjop4FJU08gNjM5LTIvVOagh+WHhuS4reWumuS5ie+8iVxcbiAgICAweDAwLCAweDAwIC8vIHByZV9kZWZpbmVkID0gMFxcbiAgICBdKTtcXG4gICAgcmV0dXJuIEZtcDQuaW5pdEJveCgxMiArIGNvbnRlbnQuYnl0ZUxlbmd0aCwgJ21kaGQnLCBGbXA0LmV4dGVuc2lvbigwLCAwKSwgY29udGVudCk7XFxuICB9XFxuICBzdGF0aWMgaGRscih0eXBlKSB7XFxuICAgIGxldCB2YWx1ZSA9IFsweDAwLCAvLyB2ZXJzaW9uIDBcXG4gICAgMHgwMCwgMHgwMCwgMHgwMCwgLy8gZmxhZ3NcXG4gICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgLy8gcHJlX2RlZmluZWRcXG4gICAgMHg3NiwgMHg2OSwgMHg2NCwgMHg2NSwgLy8gaGFuZGxlcl90eXBlOiAndmlkZSdcXG4gICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgLy8gcmVzZXJ2ZWRcXG4gICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgLy8gcmVzZXJ2ZWRcXG4gICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgLy8gcmVzZXJ2ZWRcXG4gICAgMHg1NiwgMHg2OSwgMHg2NCwgMHg2NSwgMHg2ZiwgMHg0OCwgMHg2MSwgMHg2ZSwgMHg2NCwgMHg2YywgMHg2NSwgMHg3MiwgMHgwMCAvLyBuYW1lOiAnVmlkZW9IYW5kbGVyJ1xcbiAgICBdO1xcbiAgICBpZiAodHlwZSA9PT0gJ2F1ZGlvJykge1xcbiAgICAgIHZhbHVlLnNwbGljZSg4LCA0LCAuLi5bMHg3MywgMHg2ZiwgMHg3NSwgMHg2ZV0pO1xcbiAgICAgIHZhbHVlLnNwbGljZSgyNCwgMTMsIC4uLlsweDUzLCAweDZmLCAweDc1LCAweDZlLCAweDY0LCAweDQ4LCAweDYxLCAweDZlLCAweDY0LCAweDZjLCAweDY1LCAweDcyLCAweDAwXSk7XFxuICAgIH1cXG4gICAgcmV0dXJuIEZtcDQuaW5pdEJveCg4ICsgdmFsdWUubGVuZ3RoLCAnaGRscicsIG5ldyBVaW50OEFycmF5KHZhbHVlKSk7XFxuICB9XFxuICBzdGF0aWMgbWluZihkYXRhKSB7XFxuICAgIGxldCBzaXplID0gODtcXG4gICAgbGV0IHZtaGQgPSBkYXRhLnR5cGUgPT09ICd2aWRlbycgPyBGbXA0LnZtaGQoKSA6IEZtcDQuc21oZCgpO1xcbiAgICBsZXQgZGluZiA9IEZtcDQuZGluZigpO1xcbiAgICBsZXQgc3RibCA9IEZtcDQuc3RibChkYXRhKTtcXG4gICAgW3ZtaGQsIGRpbmYsIHN0YmxdLmZvckVhY2goaXRlbSA9PiB7XFxuICAgICAgc2l6ZSArPSBpdGVtLmJ5dGVMZW5ndGg7XFxuICAgIH0pO1xcbiAgICByZXR1cm4gRm1wNC5pbml0Qm94KHNpemUsICdtaW5mJywgdm1oZCwgZGluZiwgc3RibCk7XFxuICB9XFxuICBzdGF0aWMgdm1oZCgpIHtcXG4gICAgcmV0dXJuIEZtcDQuaW5pdEJveCgyMCwgJ3ZtaGQnLCBuZXcgVWludDhBcnJheShbMHgwMCwgLy8gdmVyc2lvblxcbiAgICAweDAwLCAweDAwLCAweDAxLCAvLyBmbGFnc1xcbiAgICAweDAwLCAweDAwLCAvLyBncmFwaGljc21vZGVcXG4gICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCAvLyBvcGNvbG9yXFxuICAgIF0pKTtcXG4gIH1cXG4gIHN0YXRpYyBzbWhkKCkge1xcbiAgICByZXR1cm4gRm1wNC5pbml0Qm94KDE2LCAnc21oZCcsIG5ldyBVaW50OEFycmF5KFsweDAwLCAvLyB2ZXJzaW9uXFxuICAgIDB4MDAsIDB4MDAsIDB4MDAsIC8vIGZsYWdzXFxuICAgIDB4MDAsIDB4MDAsIC8vIGJhbGFuY2VcXG4gICAgMHgwMCwgMHgwMCAvLyByZXNlcnZlZFxcbiAgICBdKSk7XFxuICB9XFxuICBzdGF0aWMgZGluZigpIHtcXG4gICAgbGV0IGJ1ZmZlciA9IG5ldyBfeGdwbGF5ZXJVdGlscy5CdWZmZXIoKTtcXG4gICAgbGV0IGRyZWYgPSBbMHgwMCwgLy8gdmVyc2lvbiAwXFxuICAgIDB4MDAsIDB4MDAsIDB4MDAsIC8vIGZsYWdzXFxuICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDEsIC8vIGVudHJ5X2NvdW50XFxuICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MGMsIC8vIGVudHJ5X3NpemVcXG4gICAgMHg3NSwgMHg3MiwgMHg2YywgMHgyMCwgLy8gJ3VybCcgdHlwZVxcbiAgICAweDAwLCAvLyB2ZXJzaW9uIDBcXG4gICAgMHgwMCwgMHgwMCwgMHgwMSAvLyBlbnRyeV9mbGFnc1xcbiAgICBdO1xcbiAgICBidWZmZXIud3JpdGUoRm1wNC5zaXplKDM2KSwgRm1wNC50eXBlKCdkaW5mJyksIEZtcDQuc2l6ZSgyOCksIEZtcDQudHlwZSgnZHJlZicpLCBuZXcgVWludDhBcnJheShkcmVmKSk7XFxuICAgIHJldHVybiBidWZmZXIuYnVmZmVyO1xcbiAgfVxcbiAgc3RhdGljIHN0YmwoZGF0YSkge1xcbiAgICBsZXQgc2l6ZSA9IDg7XFxuICAgIGxldCBzdHNkID0gRm1wNC5zdHNkKGRhdGEpO1xcbiAgICBsZXQgc3R0cyA9IEZtcDQuc3R0cygpO1xcbiAgICBsZXQgc3RzYyA9IEZtcDQuc3RzYygpO1xcbiAgICBsZXQgc3RzeiA9IEZtcDQuc3RzeigpO1xcbiAgICBsZXQgc3RjbyA9IEZtcDQuc3RjbygpO1xcbiAgICBbc3RzZCwgc3R0cywgc3RzYywgc3Rzeiwgc3Rjb10uZm9yRWFjaChpdGVtID0+IHtcXG4gICAgICBzaXplICs9IGl0ZW0uYnl0ZUxlbmd0aDtcXG4gICAgfSk7XFxuICAgIHJldHVybiBGbXA0LmluaXRCb3goc2l6ZSwgJ3N0YmwnLCBzdHNkLCBzdHRzLCBzdHNjLCBzdHN6LCBzdGNvKTtcXG4gIH1cXG4gIHN0YXRpYyBzdHNkKGRhdGEpIHtcXG4gICAgbGV0IGNvbnRlbnQ7XFxuICAgIGlmIChkYXRhLnR5cGUgPT09ICdhdWRpbycpIHtcXG4gICAgICAvLyBpZiAoIWRhdGEuaXNBQUMgJiYgZGF0YS5jb2RlYyA9PT0gJ21wNCcpIHtcXG4gICAgICAvLyAgICAgY29udGVudCA9IEZNUDQubXAzKGRhdGEpO1xcbiAgICAgIC8vIH0gZWxzZSB7XFxuICAgICAgLy9cXG4gICAgICAvLyB9XFxuICAgICAgLy8g5pSv5oyBbXA0YVxcbiAgICAgIGNvbnRlbnQgPSBGbXA0Lm1wNGEoZGF0YSk7XFxuICAgIH0gZWxzZSB7XFxuICAgICAgY29udGVudCA9IEZtcDQuYXZjMShkYXRhKTtcXG4gICAgfVxcbiAgICByZXR1cm4gRm1wNC5pbml0Qm94KDE2ICsgY29udGVudC5ieXRlTGVuZ3RoLCAnc3RzZCcsIEZtcDQuZXh0ZW5zaW9uKDAsIDApLCBuZXcgVWludDhBcnJheShbMHgwMCwgMHgwMCwgMHgwMCwgMHgwMV0pLCBjb250ZW50KTtcXG4gIH1cXG4gIHN0YXRpYyBtcDRhKGRhdGEpIHtcXG4gICAgbGV0IGNvbnRlbnQgPSBuZXcgVWludDhBcnJheShbMHgwMCwgMHgwMCwgMHgwMCwgLy8gcmVzZXJ2ZWRcXG4gICAgMHgwMCwgMHgwMCwgMHgwMCwgLy8gcmVzZXJ2ZWRcXG4gICAgMHgwMCwgMHgwMSwgLy8gZGF0YV9yZWZlcmVuY2VfaW5kZXhcXG4gICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgLy8gcmVzZXJ2ZWRcXG4gICAgMHgwMCwgZGF0YS5jaGFubmVsQ291bnQsIC8vIGNoYW5uZWxjb3VudFxcbiAgICAweDAwLCAweDEwLCAvLyBzYW1wbGVTaXplOjE2Yml0c1xcbiAgICAweDAwLCAweDAwLCAweDAwLCAweDAwLCAvLyByZXNlcnZlZDJcXG4gICAgZGF0YS5zYW1wbGVyYXRlID4+IDggJiAweGZmLCBkYXRhLnNhbXBsZXJhdGUgJiAweGZmLCAvL1xcbiAgICAweDAwLCAweDAwXSk7XFxuICAgIGxldCBlc2RzID0gRm1wNC5lc2RzKGRhdGEuY29uZmlnKTtcXG4gICAgcmV0dXJuIEZtcDQuaW5pdEJveCg4ICsgY29udGVudC5ieXRlTGVuZ3RoICsgZXNkcy5ieXRlTGVuZ3RoLCAnbXA0YScsIGNvbnRlbnQsIGVzZHMpO1xcbiAgfVxcbiAgc3RhdGljIGVzZHMoY29uZmlnID0gWzQzLCAxNDYsIDgsIDBdKSB7XFxuICAgIGNvbnN0IGNvbmZpZ2xlbiA9IGNvbmZpZy5sZW5ndGg7XFxuICAgIGxldCBidWZmZXIgPSBuZXcgX3hncGxheWVyVXRpbHMuQnVmZmVyKCk7XFxuICAgIGxldCBjb250ZW50ID0gbmV3IFVpbnQ4QXJyYXkoWzB4MDAsIC8vIHZlcnNpb24gMFxcbiAgICAweDAwLCAweDAwLCAweDAwLCAvLyBmbGFnc1xcblxcbiAgICAweDAzLCAvLyBkZXNjcmlwdG9yX3R5cGVcXG4gICAgMHgxNyArIGNvbmZpZ2xlbiwgLy8gbGVuZ3RoXFxuICAgIDB4MDAsIDB4MDEsIC8vIGVzX2lkXFxuICAgIDB4MDAsIC8vIHN0cmVhbV9wcmlvcml0eVxcblxcbiAgICAweDA0LCAvLyBkZXNjcmlwdG9yX3R5cGVcXG4gICAgMHgwZiArIGNvbmZpZ2xlbiwgLy8gbGVuZ3RoXFxuICAgIDB4NDAsIC8vIGNvZGVjIDogbXBlZzRfYXVkaW9cXG4gICAgMHgxNSwgLy8gc3RyZWFtX3R5cGVcXG4gICAgMHgwMCwgMHgwMCwgMHgwMCwgLy8gYnVmZmVyX3NpemVcXG4gICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgLy8gbWF4Qml0cmF0ZVxcbiAgICAweDAwLCAweDAwLCAweDAwLCAweDAwLCAvLyBhdmdCaXRyYXRlXFxuXFxuICAgIDB4MDUgLy8gZGVzY3JpcHRvcl90eXBlXFxuICAgIF0uY29uY2F0KFtjb25maWdsZW5dKS5jb25jYXQoY29uZmlnKS5jb25jYXQoWzB4MDYsIDB4MDEsIDB4MDJdKSk7XFxuICAgIGJ1ZmZlci53cml0ZShGbXA0LnNpemUoOCArIGNvbnRlbnQuYnl0ZUxlbmd0aCksIEZtcDQudHlwZSgnZXNkcycpLCBjb250ZW50KTtcXG4gICAgcmV0dXJuIGJ1ZmZlci5idWZmZXI7XFxuICB9XFxuICBzdGF0aWMgYXZjMShkYXRhKSB7XFxuICAgIGxldCBidWZmZXIgPSBuZXcgX3hncGxheWVyVXRpbHMuQnVmZmVyKCk7XFxuICAgIGxldCBzaXplID0gNDA7IC8vIDgoYXZjMSkrOChhdmNjKSs4KGJ0cnQpKzE2KHBhc3ApXFxuICAgIC8vIGxldCBzcHMgPSBkYXRhLnNwc1xcbiAgICAvLyBsZXQgcHBzID0gZGF0YS5wcHNcXG4gICAgbGV0IHdpZHRoID0gZGF0YS53aWR0aDtcXG4gICAgbGV0IGhlaWdodCA9IGRhdGEuaGVpZ2h0O1xcbiAgICBsZXQgaFNwYWNpbmcgPSBkYXRhLnBhclJhdGlvLmhlaWdodDtcXG4gICAgbGV0IHZTcGFjaW5nID0gZGF0YS5wYXJSYXRpby53aWR0aDtcXG4gICAgLy8gbGV0IGF2Y2NCdWZmZXIgPSBuZXcgQnVmZmVyKClcXG4gICAgLy8gYXZjY0J1ZmZlci53cml0ZShuZXcgVWludDhBcnJheShbXFxuICAgIC8vICAgMHgwMSwgLy8gdmVyc2lvblxcbiAgICAvLyAgIHNwc1sxXSwgLy8gcHJvZmlsZVxcbiAgICAvLyAgIHNwc1syXSwgLy8gcHJvZmlsZSBjb21wYXRpYmxlXFxuICAgIC8vICAgc3BzWzNdLCAvLyBsZXZlbFxcbiAgICAvLyAgIDB4ZmMgfCAzLFxcbiAgICAvLyAgIDB4RTAgfCAxIC8vIOebruWJjeWPquWkhOeQhuS4gOS4qnNwc1xcbiAgICAvLyBdLmNvbmNhdChbc3BzLmxlbmd0aCA+Pj4gOCAmIDB4ZmYsIHNwcy5sZW5ndGggJiAweGZmXSkpKVxcbiAgICAvLyBhdmNjQnVmZmVyLndyaXRlKHNwcywgbmV3IFVpbnQ4QXJyYXkoWzEsIHBwcy5sZW5ndGggPj4+IDggJiAweGZmLCBwcHMubGVuZ3RoICYgMHhmZl0pLCBwcHMpXFxuXFxuICAgIGxldCBhdmNjID0gZGF0YS5hdmNjO1xcbiAgICBsZXQgYXZjMSA9IG5ldyBVaW50OEFycmF5KFsweDAwLCAweDAwLCAweDAwLCAvLyByZXNlcnZlZFxcbiAgICAweDAwLCAweDAwLCAweDAwLCAvLyByZXNlcnZlZFxcbiAgICAweDAwLCAweDAxLCAvLyBkYXRhX3JlZmVyZW5jZV9pbmRleFxcbiAgICAweDAwLCAweDAwLCAvLyBwcmVfZGVmaW5lZFxcbiAgICAweDAwLCAweDAwLCAvLyByZXNlcnZlZFxcbiAgICAweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAwLCAvLyBwcmVfZGVmaW5lZFxcbiAgICB3aWR0aCA+PiA4ICYgMHhmZiwgd2lkdGggJiAweGZmLCAvLyB3aWR0aFxcbiAgICBoZWlnaHQgPj4gOCAmIDB4ZmYsIGhlaWdodCAmIDB4ZmYsIC8vIGhlaWdodFxcbiAgICAweDAwLCAweDQ4LCAweDAwLCAweDAwLCAvLyBob3JpenJlc29sdXRpb25cXG4gICAgMHgwMCwgMHg0OCwgMHgwMCwgMHgwMCwgLy8gdmVydHJlc29sdXRpb25cXG4gICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgLy8gcmVzZXJ2ZWRcXG4gICAgMHgwMCwgMHgwMSwgLy8gZnJhbWVfY291bnRcXG4gICAgMHgxMiwgMHg2NCwgMHg2MSwgMHg2OSwgMHg2QywgLy8gZGFpbHltb3Rpb24vaGxzLmpzXFxuICAgIDB4NzksIDB4NkQsIDB4NkYsIDB4NzQsIDB4NjksIDB4NkYsIDB4NkUsIDB4MkYsIDB4NjgsIDB4NkMsIDB4NzMsIDB4MkUsIDB4NkEsIDB4NzMsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIC8vIGNvbXByZXNzb3JuYW1lXFxuICAgIDB4MDAsIDB4MTgsIC8vIGRlcHRoID0gMjRcXG4gICAgMHgxMSwgMHgxMV0pOyAvLyBwcmVfZGVmaW5lZCA9IC0xXFxuICAgIGxldCBidHJ0ID0gbmV3IFVpbnQ4QXJyYXkoWzB4MDAsIDB4MWMsIDB4OWMsIDB4ODAsIC8vIGJ1ZmZlclNpemVEQlxcbiAgICAweDAwLCAweDJkLCAweGM2LCAweGMwLCAvLyBtYXhCaXRyYXRlXFxuICAgIDB4MDAsIDB4MmQsIDB4YzYsIDB4YzAgLy8gYXZnQml0cmF0ZVxcbiAgICBdKTtcXG4gICAgbGV0IHBhc3AgPSBuZXcgVWludDhBcnJheShbaFNwYWNpbmcgPj4gMjQsIC8vIGhTcGFjaW5nXFxuICAgIGhTcGFjaW5nID4+IDE2ICYgMHhmZiwgaFNwYWNpbmcgPj4gOCAmIDB4ZmYsIGhTcGFjaW5nICYgMHhmZiwgdlNwYWNpbmcgPj4gMjQsIC8vIHZTcGFjaW5nXFxuICAgIHZTcGFjaW5nID4+IDE2ICYgMHhmZiwgdlNwYWNpbmcgPj4gOCAmIDB4ZmYsIHZTcGFjaW5nICYgMHhmZl0pO1xcblxcbiAgICBidWZmZXIud3JpdGUoRm1wNC5zaXplKHNpemUgKyBhdmMxLmJ5dGVMZW5ndGggKyBhdmNjLmJ5dGVMZW5ndGggKyBidHJ0LmJ5dGVMZW5ndGgpLCBGbXA0LnR5cGUoJ2F2YzEnKSwgYXZjMSwgRm1wNC5zaXplKDggKyBhdmNjLmJ5dGVMZW5ndGgpLCBGbXA0LnR5cGUoJ2F2Y0MnKSwgYXZjYywgRm1wNC5zaXplKDIwKSwgRm1wNC50eXBlKCdidHJ0JyksIGJ0cnQsIEZtcDQuc2l6ZSgxNiksIEZtcDQudHlwZSgncGFzcCcpLCBwYXNwKTtcXG4gICAgcmV0dXJuIGJ1ZmZlci5idWZmZXI7XFxuICB9XFxuICBzdGF0aWMgc3R0cygpIHtcXG4gICAgbGV0IGNvbnRlbnQgPSBuZXcgVWludDhBcnJheShbMHgwMCwgLy8gdmVyc2lvblxcbiAgICAweDAwLCAweDAwLCAweDAwLCAvLyBmbGFnc1xcbiAgICAweDAwLCAweDAwLCAweDAwLCAweDAwIC8vIGVudHJ5X2NvdW50XFxuICAgIF0pO1xcbiAgICByZXR1cm4gRm1wNC5pbml0Qm94KDE2LCAnc3R0cycsIGNvbnRlbnQpO1xcbiAgfVxcbiAgc3RhdGljIHN0c2MoKSB7XFxuICAgIGxldCBjb250ZW50ID0gbmV3IFVpbnQ4QXJyYXkoWzB4MDAsIC8vIHZlcnNpb25cXG4gICAgMHgwMCwgMHgwMCwgMHgwMCwgLy8gZmxhZ3NcXG4gICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCAvLyBlbnRyeV9jb3VudFxcbiAgICBdKTtcXG4gICAgcmV0dXJuIEZtcDQuaW5pdEJveCgxNiwgJ3N0c2MnLCBjb250ZW50KTtcXG4gIH1cXG4gIHN0YXRpYyBzdGNvKCkge1xcbiAgICBsZXQgY29udGVudCA9IG5ldyBVaW50OEFycmF5KFsweDAwLCAvLyB2ZXJzaW9uXFxuICAgIDB4MDAsIDB4MDAsIDB4MDAsIC8vIGZsYWdzXFxuICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAgLy8gZW50cnlfY291bnRcXG4gICAgXSk7XFxuICAgIHJldHVybiBGbXA0LmluaXRCb3goMTYsICdzdGNvJywgY29udGVudCk7XFxuICB9XFxuICBzdGF0aWMgc3RzeigpIHtcXG4gICAgbGV0IGNvbnRlbnQgPSBuZXcgVWludDhBcnJheShbMHgwMCwgLy8gdmVyc2lvblxcbiAgICAweDAwLCAweDAwLCAweDAwLCAvLyBmbGFnc1xcbiAgICAweDAwLCAweDAwLCAweDAwLCAweDAwLCAvLyBzYW1wbGVfc2l6ZVxcbiAgICAweDAwLCAweDAwLCAweDAwLCAweDAwIC8vIHNhbXBsZV9jb3VudFxcbiAgICBdKTtcXG4gICAgcmV0dXJuIEZtcDQuaW5pdEJveCgyMCwgJ3N0c3onLCBjb250ZW50KTtcXG4gIH1cXG4gIHN0YXRpYyBtdmV4KGR1cmF0aW9uLCB0aW1lc2NhbGUgPSAxMDAwLCB0cmFja0lEKSB7XFxuICAgIGxldCBidWZmZXIgPSBuZXcgX3hncGxheWVyVXRpbHMuQnVmZmVyKCk7XFxuICAgIGxldCBtZWhkID0gX3hncGxheWVyVXRpbHMuQnVmZmVyLndyaXRlVWludDMyKGR1cmF0aW9uKTtcXG4gICAgYnVmZmVyLndyaXRlKEZtcDQuc2l6ZSg1NiksIEZtcDQudHlwZSgnbXZleCcpLCBGbXA0LnNpemUoMTYpLCBGbXA0LnR5cGUoJ21laGQnKSwgRm1wNC5leHRlbnNpb24oMCwgMCksIG1laGQsIEZtcDQudHJleCh0cmFja0lEKSk7XFxuICAgIHJldHVybiBidWZmZXIuYnVmZmVyO1xcbiAgfVxcbiAgc3RhdGljIHRyZXgoaWQpIHtcXG4gICAgbGV0IGNvbnRlbnQgPSBuZXcgVWludDhBcnJheShbMHgwMCwgLy8gdmVyc2lvbiAwXFxuICAgIDB4MDAsIDB4MDAsIDB4MDAsIC8vIGZsYWdzXFxuICAgIGlkID4+IDI0LCBpZCA+PiAxNiAmIDB4ZmYsIGlkID4+IDggJiAweGZmLCBpZCAmIDB4ZmYsIC8vIHRyYWNrX0lEXFxuICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDEsIC8vIGRlZmF1bHRfc2FtcGxlX2Rlc2NyaXB0aW9uX2luZGV4XFxuICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIC8vIGRlZmF1bHRfc2FtcGxlX2R1cmF0aW9uXFxuICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIC8vIGRlZmF1bHRfc2FtcGxlX3NpemVcXG4gICAgMHgwMCwgMHgwMSwgMHgwMCwgMHgwMSAvLyBkZWZhdWx0X3NhbXBsZV9mbGFnc1xcbiAgICBdKTtcXG4gICAgcmV0dXJuIEZtcDQuaW5pdEJveCg4ICsgY29udGVudC5ieXRlTGVuZ3RoLCAndHJleCcsIGNvbnRlbnQpO1xcbiAgfVxcbiAgc3RhdGljIG1vb2YoZGF0YSkge1xcbiAgICBsZXQgc2l6ZSA9IDg7XFxuICAgIGxldCBtZmhkID0gRm1wNC5tZmhkKCk7XFxuICAgIGxldCB0cmFmID0gRm1wNC50cmFmKGRhdGEpO1xcbiAgICBbbWZoZCwgdHJhZl0uZm9yRWFjaChpdGVtID0+IHtcXG4gICAgICBzaXplICs9IGl0ZW0uYnl0ZUxlbmd0aDtcXG4gICAgfSk7XFxuICAgIHJldHVybiBGbXA0LmluaXRCb3goc2l6ZSwgJ21vb2YnLCBtZmhkLCB0cmFmKTtcXG4gIH1cXG4gIHN0YXRpYyBtZmhkKCkge1xcbiAgICBsZXQgY29udGVudCA9IF94Z3BsYXllclV0aWxzLkJ1ZmZlci53cml0ZVVpbnQzMihGbXA0LnNlcXVlbmNlKTtcXG4gICAgRm1wNC5zZXF1ZW5jZSArPSAxO1xcbiAgICByZXR1cm4gRm1wNC5pbml0Qm94KDE2LCAnbWZoZCcsIEZtcDQuZXh0ZW5zaW9uKDAsIDApLCBjb250ZW50KTtcXG4gIH1cXG4gIHN0YXRpYyB0cmFmKGRhdGEpIHtcXG4gICAgbGV0IHNpemUgPSA4O1xcbiAgICBsZXQgdGZoZCA9IEZtcDQudGZoZChkYXRhLmlkKTtcXG4gICAgbGV0IHRmZHQgPSBGbXA0LnRmZHQoZGF0YS50aW1lKTtcXG4gICAgbGV0IHNkdHAgPSBGbXA0LnNkdHAoZGF0YSk7XFxuICAgIGxldCB0cnVuID0gRm1wNC50cnVuKGRhdGEsIHNkdHAuYnl0ZUxlbmd0aCk7XFxuXFxuICAgIFt0ZmhkLCB0ZmR0LCB0cnVuLCBzZHRwXS5mb3JFYWNoKGl0ZW0gPT4ge1xcbiAgICAgIHNpemUgKz0gaXRlbS5ieXRlTGVuZ3RoO1xcbiAgICB9KTtcXG4gICAgcmV0dXJuIEZtcDQuaW5pdEJveChzaXplLCAndHJhZicsIHRmaGQsIHRmZHQsIHRydW4sIHNkdHApO1xcbiAgfVxcbiAgc3RhdGljIHRmaGQoaWQpIHtcXG4gICAgbGV0IGNvbnRlbnQgPSBfeGdwbGF5ZXJVdGlscy5CdWZmZXIud3JpdGVVaW50MzIoaWQpO1xcbiAgICByZXR1cm4gRm1wNC5pbml0Qm94KDE2LCAndGZoZCcsIEZtcDQuZXh0ZW5zaW9uKDAsIDApLCBjb250ZW50KTtcXG4gIH1cXG4gIHN0YXRpYyB0ZmR0KHRpbWUpIHtcXG4gICAgLy8gbGV0IHVwcGVyID0gTWF0aC5mbG9vcih0aW1lIC8gKFVJTlQzMl9NQVggKyAxKSksXFxuICAgIC8vICAgICBsb3dlciA9IE1hdGguZmxvb3IodGltZSAlIChVSU5UMzJfTUFYICsgMSkpO1xcbiAgICByZXR1cm4gRm1wNC5pbml0Qm94KDE2LCAndGZkdCcsIEZtcDQuZXh0ZW5zaW9uKDAsIDApLCBfeGdwbGF5ZXJVdGlscy5CdWZmZXIud3JpdGVVaW50MzIodGltZSkpO1xcbiAgfVxcbiAgc3RhdGljIHRydW4oZGF0YSwgc2R0cExlbmd0aCkge1xcbiAgICAvLyBsZXQgaWQgPSBkYXRhLmlkO1xcbiAgICAvLyBsZXQgY2VpbCA9IGlkID09PSAxID8gMTYgOiAxMjtcXG4gICAgbGV0IGJ1ZmZlciA9IG5ldyBfeGdwbGF5ZXJVdGlscy5CdWZmZXIoKTtcXG4gICAgbGV0IHNhbXBsZUNvdW50ID0gX3hncGxheWVyVXRpbHMuQnVmZmVyLndyaXRlVWludDMyKGRhdGEuc2FtcGxlcy5sZW5ndGgpO1xcbiAgICAvLyBtZGF0LWhlYWRlciA4XFxuICAgIC8vIG1vb2YtaGVhZGVyIDhcXG4gICAgLy8gbWZoZCAxNlxcbiAgICAvLyB0cmFmLWhlYWRlciA4XFxuICAgIC8vIHRoaGQgMTZcXG4gICAgLy8gdGZkdCAyMFxcbiAgICAvLyB0cnVuLWhlYWRlciAxMlxcbiAgICAvLyBzYW1wbGVDb3VudCA0XFxuICAgIC8vIGRhdGEtb2Zmc2V0IDRcXG4gICAgLy8gc2FtcGxlcy5sZW5ndGhcXG4gICAgbGV0IG9mZnNldCA9IF94Z3BsYXllclV0aWxzLkJ1ZmZlci53cml0ZVVpbnQzMig4ICsgOCArIDE2ICsgOCArIDE2ICsgMTYgKyAxMiArIDQgKyA0ICsgMTYgKiBkYXRhLnNhbXBsZXMubGVuZ3RoICsgc2R0cExlbmd0aCk7XFxuICAgIGJ1ZmZlci53cml0ZShGbXA0LnNpemUoMjAgKyAxNiAqIGRhdGEuc2FtcGxlcy5sZW5ndGgpLCBGbXA0LnR5cGUoJ3RydW4nKSwgbmV3IFVpbnQ4QXJyYXkoWzB4MDAsIDB4MDAsIDB4MEYsIDB4MDFdKSwgc2FtcGxlQ291bnQsIG9mZnNldCk7XFxuXFxuICAgIC8vIGxldCBzaXplID0gYnVmZmVyLmJ1ZmZlci5ieXRlTGVuZ3RoXFxuICAgIC8vIGxldCB3cml0ZU9mZnNldCA9IDBcXG4gICAgLy8gZGF0YS5zYW1wbGVzLmZvckVhY2goKCkgPT4ge1xcbiAgICAvLyAgIHNpemUgKz0gMTZcXG4gICAgLy8gfSlcXG4gICAgLy9cXG4gICAgLy8gbGV0IHRydW5Cb3ggPSBuZXcgVWludDhBcnJheShzaXplKVxcblxcbiAgICAvLyB0cnVuQm94LnNldChidWZmZXIuYnVmZmVyLCAwKVxcblxcbiAgICBkYXRhLnNhbXBsZXMuZm9yRWFjaChpdGVtID0+IHtcXG4gICAgICBjb25zdCBmbGFncyA9IGl0ZW0uZmxhZ3M7XFxuICAgICAgLy8gY29uc29sZS5sb2coaXRlbS50eXBlLCBpdGVtLmR0cywgaXRlbS5kdXJhdGlvbilcXG5cXG4gICAgICBidWZmZXIud3JpdGUobmV3IFVpbnQ4QXJyYXkoW2l0ZW0uZHVyYXRpb24gPj4+IDI0ICYgMHhGRiwgLy8gc2FtcGxlX2R1cmF0aW9uXFxuICAgICAgaXRlbS5kdXJhdGlvbiA+Pj4gMTYgJiAweEZGLCBpdGVtLmR1cmF0aW9uID4+PiA4ICYgMHhGRiwgaXRlbS5kdXJhdGlvbiAmIDB4RkYsIGl0ZW0uc2l6ZSA+Pj4gMjQgJiAweEZGLCAvLyBzYW1wbGVfc2l6ZVxcbiAgICAgIGl0ZW0uc2l6ZSA+Pj4gMTYgJiAweEZGLCBpdGVtLnNpemUgPj4+IDggJiAweEZGLCBpdGVtLnNpemUgJiAweEZGLCBmbGFncy5pc0xlYWRpbmcgPDwgMiB8IGZsYWdzLmRlcGVuZHNPbiwgLy8gc2FtcGxlX2ZsYWdzXFxuICAgICAgZmxhZ3MuaXNEZXBlbmRlZE9uIDw8IDYgfCBmbGFncy5oYXNSZWR1bmRhbmN5IDw8IDQgfCBmbGFncy5pc05vblN5bmMsIDB4MDAsIDB4MDAsIC8vIHNhbXBsZV9kZWdyYWRhdGlvbl9wcmlvcml0eVxcbiAgICAgIGl0ZW0uY3RzID4+PiAyNCAmIDB4RkYsIC8vIHNhbXBsZV9jb21wb3NpdGlvbl90aW1lX29mZnNldFxcbiAgICAgIGl0ZW0uY3RzID4+PiAxNiAmIDB4RkYsIGl0ZW0uY3RzID4+PiA4ICYgMHhGRiwgaXRlbS5jdHMgJiAweEZGXSkpO1xcbiAgICAgIC8vIHdyaXRlT2Zmc2V0ICs9IDE2XFxuICAgICAgLy8gYnVmZmVyLndyaXRlKEJ1ZmZlci53cml0ZVVpbnQzMigwKSk7XFxuICAgIH0pO1xcbiAgICByZXR1cm4gYnVmZmVyLmJ1ZmZlcjtcXG4gIH1cXG4gIHN0YXRpYyBzZHRwKGRhdGEpIHtcXG4gICAgbGV0IGJ1ZmZlciA9IG5ldyBfeGdwbGF5ZXJVdGlscy5CdWZmZXIoKTtcXG4gICAgYnVmZmVyLndyaXRlKEZtcDQuc2l6ZSgxMiArIGRhdGEuc2FtcGxlcy5sZW5ndGgpLCBGbXA0LnR5cGUoJ3NkdHAnKSwgRm1wNC5leHRlbnNpb24oMCwgMCkpO1xcbiAgICBkYXRhLnNhbXBsZXMuZm9yRWFjaChpdGVtID0+IHtcXG4gICAgICBjb25zdCBmbGFncyA9IGl0ZW0uZmxhZ3M7XFxuICAgICAgY29uc3QgbnVtID0gZmxhZ3MuaXNMZWFkaW5nIDw8IDYgfCAvLyBpc19sZWFkaW5nOiAyIChiaXQpXFxuICAgICAgZmxhZ3MuZGVwZW5kc09uIDw8IDQgfCAvLyBzYW1wbGVfZGVwZW5kc19vblxcbiAgICAgIGZsYWdzLmlzRGVwZW5kZWRPbiA8PCAyIHwgLy8gc2FtcGxlX2lzX2RlcGVuZGVkX29uXFxuICAgICAgZmxhZ3MuaGFzUmVkdW5kYW5jeTsgLy8gc2FtcGxlX2hhc19yZWR1bmRhbmN5XFxuXFxuICAgICAgYnVmZmVyLndyaXRlKG5ldyBVaW50OEFycmF5KFtudW1dKSk7XFxuICAgIH0pO1xcbiAgICByZXR1cm4gYnVmZmVyLmJ1ZmZlcjtcXG4gIH1cXG4gIHN0YXRpYyBtZGF0KGRhdGEpIHtcXG4gICAgbGV0IGJ1ZmZlciA9IG5ldyBfeGdwbGF5ZXJVdGlscy5CdWZmZXIoKTtcXG4gICAgbGV0IHNpemUgPSA4O1xcbiAgICBkYXRhLnNhbXBsZXMuZm9yRWFjaChpdGVtID0+IHtcXG4gICAgICBzaXplICs9IGl0ZW0uc2l6ZTtcXG4gICAgfSk7XFxuICAgIGJ1ZmZlci53cml0ZShGbXA0LnNpemUoc2l6ZSksIEZtcDQudHlwZSgnbWRhdCcpKTtcXG4gICAgbGV0IG1kYXRCb3ggPSBuZXcgVWludDhBcnJheShzaXplKTtcXG4gICAgbGV0IG9mZnNldCA9IDA7XFxuICAgIG1kYXRCb3guc2V0KGJ1ZmZlci5idWZmZXIsIG9mZnNldCk7XFxuICAgIG9mZnNldCArPSA4O1xcbiAgICBkYXRhLnNhbXBsZXMuZm9yRWFjaChpdGVtID0+IHtcXG4gICAgICBpdGVtLmJ1ZmZlci5mb3JFYWNoKHVuaXQgPT4ge1xcbiAgICAgICAgbWRhdEJveC5zZXQodW5pdCwgb2Zmc2V0KTtcXG4gICAgICAgIG9mZnNldCArPSB1bml0LmJ5dGVMZW5ndGg7XFxuICAgICAgICAvLyBidWZmZXIud3JpdGUodW5pdC5kYXRhKTtcXG4gICAgICB9KTtcXG4gICAgfSk7XFxuICAgIHJldHVybiBtZGF0Qm94O1xcbiAgfVxcbn1cXG5GbXA0LnR5cGUgPSBuYW1lID0+IHtcXG4gIHJldHVybiBuZXcgVWludDhBcnJheShbbmFtZS5jaGFyQ29kZUF0KDApLCBuYW1lLmNoYXJDb2RlQXQoMSksIG5hbWUuY2hhckNvZGVBdCgyKSwgbmFtZS5jaGFyQ29kZUF0KDMpXSk7XFxufTtcXG5GbXA0LnNlcXVlbmNlID0gMTtcXG5cXG5leHBvcnRzLmRlZmF1bHQgPSBGbXA0O1xcblxcbi8vIyBzb3VyY2VVUkw9d2VicGFjazovL3hncGxheWVyLWZsdi8uLi94Z3BsYXllci1yZW11eC9zcmMvbXA0L2ZtcDQuanM/XCIpfSxcIi4uL3hncGxheWVyLXJlbXV4L3NyYy9tcDQvaW5kZXguanNcIjpcbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuLi94Z3BsYXllci1yZW11eC9zcmMvbXA0L2luZGV4LmpzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgbm8gc3RhdGljIGV4cG9ydHMgZm91bmQgKi9mdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXtcInVzZSBzdHJpY3RcIjtldmFsKFwiXFxuXFxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFxcXCJfX2VzTW9kdWxlXFxcIiwge1xcbiAgdmFsdWU6IHRydWVcXG59KTtcXG5cXG52YXIgX3hncGxheWVyVXRpbHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISB4Z3BsYXllci11dGlscyAqLyBcXFwiLi4veGdwbGF5ZXItdXRpbHMvaW5kZXguanNcXFwiKTtcXG5cXG52YXIgX2ZtcCA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vZm1wNCAqLyBcXFwiLi4veGdwbGF5ZXItcmVtdXgvc3JjL21wNC9mbXA0LmpzXFxcIik7XFxuXFxudmFyIF9mbXAyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZm1wKTtcXG5cXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxcblxcbmNvbnN0IFJFTVVYX0VWRU5UUyA9IF94Z3BsYXllclV0aWxzLkVWRU5UUy5SRU1VWF9FVkVOVFM7XFxuXFxuY2xhc3MgTXA0UmVtdXhlciB7XFxuICBjb25zdHJ1Y3RvcigpIHtcXG4gICAgdGhpcy5fZHRzQmFzZSA9IDA7XFxuICAgIHRoaXMuX2lzRHRzQmFzZUluaXRlZCA9IGZhbHNlO1xcblxcbiAgICB0aGlzLnZpZGVvQWxsRHVyYXRpb24gPSAwO1xcbiAgICB0aGlzLmF1ZGlvQWxsRHVyYXRpb24gPSAwO1xcbiAgfVxcblxcbiAgaW5pdCgpIHtcXG4gICAgdGhpcy5vbihSRU1VWF9FVkVOVFMuUkVNVVhfTUVESUEsIHRoaXMucmVtdXguYmluZCh0aGlzKSk7XFxuICAgIHRoaXMub24oUkVNVVhfRVZFTlRTLlJFTVVYX01FVEFEQVRBLCB0aGlzLm9uTWV0YURhdGFSZWFkeS5iaW5kKHRoaXMpKTtcXG4gIH1cXG5cXG4gIGRlc3Ryb3koKSB7XFxuICAgIHRoaXMuX2R0c0Jhc2UgPSAtMTtcXG4gICAgdGhpcy5fZHRzQmFzZUluaXRlZCA9IGZhbHNlO1xcbiAgfVxcblxcbiAgcmVzZXQoKSB7XFxuICAgIHRoaXMuX2R0c0Jhc2UgPSAwO1xcbiAgICB0aGlzLl9pc0R0c0Jhc2VJbml0ZWQgPSBmYWxzZTtcXG4gIH1cXG5cXG4gIHJlbXV4KCkge1xcbiAgICBjb25zdCB7IGF1ZGlvVHJhY2ssIHZpZGVvVHJhY2sgfSA9IHRoaXMuX2NvbnRleHQuZ2V0SW5zdGFuY2UoJ1RSQUNLUycpO1xcbiAgICAhdGhpcy5faXNEdHNCYXNlSW5pdGVkICYmIHRoaXMuY2FsY0R0c0Jhc2UoYXVkaW9UcmFjaywgdmlkZW9UcmFjayk7XFxuXFxuICAgIHRoaXMuX3JlbXV4VmlkZW8odmlkZW9UcmFjayk7XFxuICAgIHRoaXMuX3JlbXV4QXVkaW8oYXVkaW9UcmFjayk7XFxuICB9XFxuXFxuICBzZWVrKCkge31cXG5cXG4gIG9uTWV0YURhdGFSZWFkeSh0eXBlKSB7XFxuICAgIGxldCBpbml0U2VnbWVudCA9IG5ldyBfeGdwbGF5ZXJVdGlscy5CdWZmZXIoKTtcXG4gICAgbGV0IGZ0eXAgPSBfZm1wMi5kZWZhdWx0LmZ0eXAoKTtcXG4gICAgbGV0IG1vb3Y7XFxuICAgIGxldCB0cmFjaztcXG5cXG4gICAgaWYgKHR5cGUgPT09ICdhdWRpbycpIHtcXG4gICAgICBjb25zdCB7IGF1ZGlvVHJhY2sgfSA9IHRoaXMuX2NvbnRleHQuZ2V0SW5zdGFuY2UoJ1RSQUNLUycpO1xcbiAgICAgIHRyYWNrID0gYXVkaW9UcmFjaztcXG4gICAgfSBlbHNlIHtcXG4gICAgICBjb25zdCB7IHZpZGVvVHJhY2sgfSA9IHRoaXMuX2NvbnRleHQuZ2V0SW5zdGFuY2UoJ1RSQUNLUycpO1xcbiAgICAgIHRyYWNrID0gdmlkZW9UcmFjaztcXG4gICAgfVxcblxcbiAgICBtb292ID0gX2ZtcDIuZGVmYXVsdC5tb292KHsgdHlwZSwgbWV0YTogdHJhY2subWV0YSB9KTtcXG5cXG4gICAgaW5pdFNlZ21lbnQud3JpdGUoZnR5cCwgbW9vdik7XFxuXFxuICAgIGxldCBwcmVzb3VyY2VidWZmZXIgPSB0aGlzLl9jb250ZXh0LmdldEluc3RhbmNlKCdQUkVfU09VUkNFX0JVRkZFUicpO1xcbiAgICBsZXQgc291cmNlID0gcHJlc291cmNlYnVmZmVyLmdldFNvdXJjZSh0eXBlKTtcXG4gICAgaWYgKCFzb3VyY2UpIHtcXG4gICAgICBzb3VyY2UgPSBwcmVzb3VyY2VidWZmZXIuY3JlYXRlU291cmNlKHR5cGUpO1xcbiAgICB9XFxuXFxuICAgIHNvdXJjZS5taW1ldHlwZSA9IHRyYWNrLm1ldGEuY29kZWM7XFxuICAgIHNvdXJjZS5pbml0ID0gaW5pdFNlZ21lbnQ7XFxuICAgIHRoaXMuZW1pdChSRU1VWF9FVkVOVFMuSU5JVF9TRUdNRU5ULCB0eXBlKTtcXG4gIH1cXG5cXG4gIGNhbGNEdHNCYXNlKGF1ZGlvVHJhY2ssIHZpZGVvVHJhY2spIHtcXG4gICAgaWYgKCFhdWRpb1RyYWNrLnNhbXBsZXMubGVuZ3RoICYmICF2aWRlb1RyYWNrLnNhbXBsZXMubGVuZ3RoKSB7XFxuICAgICAgcmV0dXJuO1xcbiAgICB9XFxuXFxuICAgIGxldCBhdWRpb0Jhc2UgPSBJbmZpbml0eTtcXG4gICAgbGV0IHZpZGVvQmFzZSA9IEluZmluaXR5O1xcblxcbiAgICBpZiAoYXVkaW9UcmFjay5zYW1wbGVzICYmIGF1ZGlvVHJhY2suc2FtcGxlcy5sZW5ndGgpIHtcXG4gICAgICBhdWRpb0Jhc2UgPSBhdWRpb1RyYWNrLnNhbXBsZXNbMF0uZHRzO1xcbiAgICB9XFxuICAgIGlmICh2aWRlb1RyYWNrLnNhbXBsZXMgJiYgdmlkZW9UcmFjay5zYW1wbGVzLmxlbmd0aCkge1xcbiAgICAgIHZpZGVvQmFzZSA9IHZpZGVvVHJhY2suc2FtcGxlc1swXS5kdHM7XFxuICAgIH1cXG5cXG4gICAgdGhpcy5fZHRzQmFzZSA9IE1hdGgubWluKGF1ZGlvQmFzZSwgdmlkZW9CYXNlKTtcXG4gICAgdGhpcy5faXNEdHNCYXNlSW5pdGVkID0gdHJ1ZTtcXG4gIH1cXG5cXG4gIF9yZW11eFZpZGVvKHZpZGVvVHJhY2spIHtcXG4gICAgY29uc3QgdHJhY2sgPSB2aWRlb1RyYWNrO1xcblxcbiAgICBpZiAoIXZpZGVvVHJhY2suc2FtcGxlcyB8fCAhdmlkZW9UcmFjay5zYW1wbGVzLmxlbmd0aCkge1xcbiAgICAgIHJldHVybjtcXG4gICAgfVxcblxcbiAgICBsZXQgeyBzYW1wbGVzIH0gPSB0cmFjaztcXG4gICAgbGV0IGZpcnN0RHRzID0gLTE7XFxuXFxuICAgIGNvbnN0IG1wNFNhbXBsZXMgPSBbXTtcXG4gICAgY29uc3QgbWRhdEJveCA9IHtcXG4gICAgICBzYW1wbGVzOiBbXVxcbiAgICB9O1xcblxcbiAgICB3aGlsZSAoc2FtcGxlcy5sZW5ndGgpIHtcXG4gICAgICBjb25zdCBhdmNTYW1wbGUgPSBzYW1wbGVzLnNoaWZ0KCk7XFxuICAgICAgY29uc3QgeyBpc0tleWZyYW1lIH0gPSBhdmNTYW1wbGU7XFxuICAgICAgbGV0IGR0cyA9IGF2Y1NhbXBsZS5kdHMgLSB0aGlzLl9kdHNCYXNlO1xcblxcbiAgICAgIGlmIChmaXJzdER0cyA9PT0gLTEpIHtcXG4gICAgICAgIGZpcnN0RHRzID0gZHRzO1xcbiAgICAgIH1cXG5cXG4gICAgICBsZXQgY3RzO1xcbiAgICAgIGxldCBwdHM7XFxuICAgICAgaWYgKGF2Y1NhbXBsZS5wdHMpIHtcXG4gICAgICAgIHB0cyA9IGF2Y1NhbXBsZS5wdHMgLSB0aGlzLl9kdHNCYXNlO1xcbiAgICAgICAgY3RzID0gcHRzIC0gZHRzO1xcbiAgICAgIH1cXG4gICAgICBpZiAoYXZjU2FtcGxlLmN0cykge1xcbiAgICAgICAgcHRzID0gYXZjU2FtcGxlLmN0cyArIGR0cztcXG4gICAgICAgIGN0cyA9IGF2Y1NhbXBsZS5jdHM7XFxuICAgICAgfVxcblxcbiAgICAgIGxldCBtZGF0U2FtcGxlID0ge1xcbiAgICAgICAgYnVmZmVyOiBbXSxcXG4gICAgICAgIHNpemU6IDBcXG4gICAgICB9O1xcbiAgICAgIG1kYXRCb3guc2FtcGxlcy5wdXNoKG1kYXRTYW1wbGUpO1xcbiAgICAgIG1kYXRTYW1wbGUuYnVmZmVyLnB1c2goYXZjU2FtcGxlLmRhdGEpO1xcbiAgICAgIG1kYXRTYW1wbGUuc2l6ZSArPSBhdmNTYW1wbGUuZGF0YS5ieXRlTGVuZ3RoO1xcblxcbiAgICAgIGxldCBzYW1wbGVEdXJhdGlvbiA9IDA7XFxuICAgICAgaWYgKHNhbXBsZXMubGVuZ3RoID49IDEpIHtcXG4gICAgICAgIGNvbnN0IG5leHREdHMgPSBzYW1wbGVzWzBdLmR0cyAtIHRoaXMuX2R0c0Jhc2U7XFxuICAgICAgICBzYW1wbGVEdXJhdGlvbiA9IG5leHREdHMgLSBkdHM7XFxuICAgICAgfSBlbHNlIHtcXG4gICAgICAgIGlmIChtcDRTYW1wbGVzLmxlbmd0aCA+PSAxKSB7XFxuICAgICAgICAgIC8vIGxhc3Rlc3Qgc2FtcGxlLCB1c2Ugc2Vjb25kIGxhc3QgZHVyYXRpb25cXG4gICAgICAgICAgc2FtcGxlRHVyYXRpb24gPSBtcDRTYW1wbGVzW21wNFNhbXBsZXMubGVuZ3RoIC0gMV0uZHVyYXRpb247XFxuICAgICAgICB9IGVsc2Uge1xcbiAgICAgICAgICAvLyB0aGUgb25seSBvbmUgc2FtcGxlLCB1c2UgcmVmZXJlbmNlIGR1cmF0aW9uXFxuICAgICAgICAgIHNhbXBsZUR1cmF0aW9uID0gdGhpcy52aWRlb01ldGEucmVmU2FtcGxlRHVyYXRpb247XFxuICAgICAgICB9XFxuICAgICAgfVxcbiAgICAgIHRoaXMudmlkZW9BbGxEdXJhdGlvbiArPSBzYW1wbGVEdXJhdGlvbjtcXG4gICAgICBtcDRTYW1wbGVzLnB1c2goe1xcbiAgICAgICAgZHRzLFxcbiAgICAgICAgY3RzLFxcbiAgICAgICAgcHRzLFxcbiAgICAgICAgZGF0YTogYXZjU2FtcGxlLmRhdGEsXFxuICAgICAgICBzaXplOiBhdmNTYW1wbGUuZGF0YS5ieXRlTGVuZ3RoLFxcbiAgICAgICAgaXNLZXlmcmFtZSxcXG4gICAgICAgIGR1cmF0aW9uOiBzYW1wbGVEdXJhdGlvbixcXG4gICAgICAgIGZsYWdzOiB7XFxuICAgICAgICAgIGlzTGVhZGluZzogMCxcXG4gICAgICAgICAgZGVwZW5kc09uOiBpc0tleWZyYW1lID8gMiA6IDEsXFxuICAgICAgICAgIGlzRGVwZW5kZWRPbjogaXNLZXlmcmFtZSA/IDEgOiAwLFxcbiAgICAgICAgICBoYXNSZWR1bmRhbmN5OiAwLFxcbiAgICAgICAgICBpc05vblN5bmM6IGlzS2V5ZnJhbWUgPyAwIDogMVxcbiAgICAgICAgfSxcXG4gICAgICAgIG9yaWdpbkR0czogZHRzLFxcbiAgICAgICAgdHlwZTogJ3ZpZGVvJ1xcbiAgICAgIH0pO1xcbiAgICB9XFxuXFxuICAgIGxldCBtb29mTWRhdCA9IG5ldyBfeGdwbGF5ZXJVdGlscy5CdWZmZXIoKTtcXG5cXG4gICAgY29uc3QgbW9vZiA9IF9mbXAyLmRlZmF1bHQubW9vZih7XFxuICAgICAgaWQ6IHRyYWNrLm1ldGEuaWQsXFxuICAgICAgdGltZTogZmlyc3REdHMsXFxuICAgICAgc2FtcGxlczogbXA0U2FtcGxlc1xcbiAgICB9KTtcXG4gICAgY29uc3QgbWRhdCA9IF9mbXAyLmRlZmF1bHQubWRhdChtZGF0Qm94KTtcXG4gICAgbW9vZk1kYXQud3JpdGUobW9vZiwgbWRhdCk7XFxuXFxuICAgIHRyYWNrLnNhbXBsZXMgPSBbXTtcXG4gICAgdHJhY2subGVuZ3RoID0gMDtcXG5cXG4gICAgbGV0IHByZXNvdXJjZWJ1ZmZlciA9IHRoaXMuX2NvbnRleHQuZ2V0SW5zdGFuY2UoJ1BSRV9TT1VSQ0VfQlVGRkVSJyk7XFxuICAgIGxldCBzb3VyY2UgPSBwcmVzb3VyY2VidWZmZXIuZ2V0U291cmNlKCd2aWRlbycpO1xcbiAgICBpZiAoIXNvdXJjZSkge1xcbiAgICAgIHNvdXJjZSA9IHByZXNvdXJjZWJ1ZmZlci5jcmVhdGVTb3VyY2UoJ3ZpZGVvJyk7XFxuICAgIH1cXG5cXG4gICAgc291cmNlLmRhdGEucHVzaChtb29mTWRhdCk7XFxuXFxuICAgIHRoaXMuZW1pdChSRU1VWF9FVkVOVFMuTUVESUFfU0VHTUVOVCwgJ3ZpZGVvJyk7XFxuICB9XFxuXFxuICBfcmVtdXhBdWRpbyh0cmFjaykge1xcbiAgICBjb25zdCB7IHNhbXBsZXMgfSA9IHRyYWNrO1xcbiAgICBsZXQgZmlyc3REdHMgPSAtMTtcXG4gICAgbGV0IG1wNFNhbXBsZXMgPSBbXTtcXG5cXG4gICAgY29uc3QgbWRhdEJveCA9IHtcXG4gICAgICBzYW1wbGVzOiBbXVxcbiAgICB9O1xcbiAgICBpZiAoIXNhbXBsZXMgfHwgIXNhbXBsZXMubGVuZ3RoKSB7XFxuICAgICAgcmV0dXJuO1xcbiAgICB9XFxuICAgIGxldCBpc0ZpcnN0RHRzSW5pdGVkID0gZmFsc2U7XFxuICAgIHdoaWxlIChzYW1wbGVzLmxlbmd0aCkge1xcbiAgICAgIGxldCBzYW1wbGUgPSBzYW1wbGVzLnNoaWZ0KCk7XFxuICAgICAgY29uc3QgeyBkYXRhIH0gPSBzYW1wbGU7XFxuICAgICAgbGV0IGR0cyA9IHNhbXBsZS5kdHMgLSB0aGlzLl9kdHNCYXNlO1xcbiAgICAgIGNvbnN0IG9yaWdpbkR0cyA9IGR0cztcXG4gICAgICBpZiAoIWlzRmlyc3REdHNJbml0ZWQpIHtcXG4gICAgICAgIGZpcnN0RHRzID0gZHRzO1xcbiAgICAgICAgaXNGaXJzdER0c0luaXRlZCA9IHRydWU7XFxuICAgICAgfVxcblxcbiAgICAgIGxldCBzYW1wbGVEdXJhdGlvbiA9IDA7XFxuXFxuICAgICAgaWYgKHRoaXMuYXVkaW9NZXRhLnJlZlNhbXBsZUR1cmF0aW9uRml4ZWQpIHtcXG4gICAgICAgIHNhbXBsZUR1cmF0aW9uID0gdGhpcy5hdWRpb01ldGEucmVmU2FtcGxlRHVyYXRpb25GaXhlZDtcXG4gICAgICB9IGVsc2UgaWYgKHNhbXBsZXMubGVuZ3RoID49IDEpIHtcXG4gICAgICAgIGNvbnN0IG5leHREdHMgPSBzYW1wbGVzWzBdLmR0cyAtIHRoaXMuX2R0c0Jhc2U7XFxuICAgICAgICBzYW1wbGVEdXJhdGlvbiA9IG5leHREdHMgLSBkdHM7XFxuICAgICAgfSBlbHNlIHtcXG4gICAgICAgIGlmIChtcDRTYW1wbGVzLmxlbmd0aCA+PSAxKSB7XFxuICAgICAgICAgIC8vIHVzZSBzZWNvbmQgbGFzdCBzYW1wbGUgZHVyYXRpb25cXG4gICAgICAgICAgc2FtcGxlRHVyYXRpb24gPSBtcDRTYW1wbGVzW21wNFNhbXBsZXMubGVuZ3RoIC0gMV0uZHVyYXRpb247XFxuICAgICAgICB9IGVsc2Uge1xcbiAgICAgICAgICAvLyB0aGUgb25seSBvbmUgc2FtcGxlLCB1c2UgcmVmZXJlbmNlIHNhbXBsZSBkdXJhdGlvblxcbiAgICAgICAgICBzYW1wbGVEdXJhdGlvbiA9IHRoaXMuYXVkaW9NZXRhLnJlZlNhbXBsZUR1cmF0aW9uO1xcbiAgICAgICAgfVxcbiAgICAgIH1cXG5cXG4gICAgICAvLyBjb25zb2xlLmxvZygncmVtdXggYXVkaW8gJywgZHRzKVxcbiAgICAgIHRoaXMuYXVkaW9BbGxEdXJhdGlvbiArPSBzYW1wbGVEdXJhdGlvbjtcXG4gICAgICBjb25zdCBtcDRTYW1wbGUgPSB7XFxuICAgICAgICBkdHMsXFxuICAgICAgICBwdHM6IGR0cyxcXG4gICAgICAgIGN0czogMCxcXG4gICAgICAgIHNpemU6IGRhdGEuYnl0ZUxlbmd0aCxcXG4gICAgICAgIGR1cmF0aW9uOiBzYW1wbGUuZHVyYXRpb24gPyBzYW1wbGUuZHVyYXRpb24gOiBzYW1wbGVEdXJhdGlvbixcXG4gICAgICAgIGZsYWdzOiB7XFxuICAgICAgICAgIGlzTGVhZGluZzogMCxcXG4gICAgICAgICAgZGVwZW5kc09uOiAyLFxcbiAgICAgICAgICBpc0RlcGVuZGVkT246IDEsXFxuICAgICAgICAgIGhhc1JlZHVuZGFuY3k6IDAsXFxuICAgICAgICAgIGlzTm9uU3luYzogMFxcbiAgICAgICAgfSxcXG4gICAgICAgIGlzS2V5ZnJhbWU6IHRydWUsXFxuICAgICAgICBvcmlnaW5EdHMsXFxuICAgICAgICB0eXBlOiAnYXVkaW8nXFxuICAgICAgfTtcXG5cXG4gICAgICBsZXQgbWRhdFNhbXBsZSA9IHtcXG4gICAgICAgIGJ1ZmZlcjogW10sXFxuICAgICAgICBzaXplOiAwXFxuICAgICAgfTtcXG4gICAgICBtZGF0U2FtcGxlLmJ1ZmZlci5wdXNoKGRhdGEpO1xcbiAgICAgIG1kYXRTYW1wbGUuc2l6ZSArPSBkYXRhLmJ5dGVMZW5ndGg7XFxuXFxuICAgICAgbWRhdEJveC5zYW1wbGVzLnB1c2gobWRhdFNhbXBsZSk7XFxuXFxuICAgICAgbXA0U2FtcGxlcy5wdXNoKG1wNFNhbXBsZSk7XFxuICAgIH1cXG5cXG4gICAgY29uc3QgbW9vZk1kYXQgPSBuZXcgX3hncGxheWVyVXRpbHMuQnVmZmVyKCk7XFxuICAgIGNvbnN0IG1vb2YgPSBfZm1wMi5kZWZhdWx0Lm1vb2Yoe1xcbiAgICAgIGlkOiB0cmFjay5tZXRhLmlkLFxcbiAgICAgIHRpbWU6IGZpcnN0RHRzLFxcbiAgICAgIHNhbXBsZXM6IG1wNFNhbXBsZXNcXG4gICAgfSk7XFxuICAgIGNvbnN0IG1kYXQgPSBfZm1wMi5kZWZhdWx0Lm1kYXQobWRhdEJveCk7XFxuICAgIG1vb2ZNZGF0LndyaXRlKG1vb2YsIG1kYXQpO1xcblxcbiAgICB0cmFjay5zYW1wbGVzID0gW107XFxuICAgIHRyYWNrLmxlbmd0aCA9IDA7XFxuXFxuICAgIGxldCBwcmVzb3VyY2VidWZmZXIgPSB0aGlzLl9jb250ZXh0LmdldEluc3RhbmNlKCdQUkVfU09VUkNFX0JVRkZFUicpO1xcbiAgICBsZXQgc291cmNlID0gcHJlc291cmNlYnVmZmVyLmdldFNvdXJjZSgnYXVkaW8nKTtcXG4gICAgaWYgKCFzb3VyY2UpIHtcXG4gICAgICBzb3VyY2UgPSBwcmVzb3VyY2VidWZmZXIuY3JlYXRlU291cmNlKCdhdWRpbycpO1xcbiAgICB9XFxuICAgIHNvdXJjZS5kYXRhLnB1c2gobW9vZk1kYXQpO1xcbiAgICB0aGlzLmVtaXQoUkVNVVhfRVZFTlRTLk1FRElBX1NFR01FTlQsICdhdWRpbycsIG1vb2ZNZGF0KTtcXG4gIH1cXG5cXG4gIGluaXRTaWxlbnRBdWRpbyhkdHMsIGR1cmF0aW9uKSB7XFxuICAgIGNvbnN0IHVuaXQgPSBNcDRSZW11eGVyLmdldFNpbGVudEZyYW1lKHRoaXMuYXVkaW9NZXRhLmNoYW5uZWxDb3VudCk7XFxuICAgIHJldHVybiB7XFxuICAgICAgZHRzLFxcbiAgICAgIHB0czogZHRzLFxcbiAgICAgIGN0czogMCxcXG4gICAgICBkdXJhdGlvbixcXG4gICAgICB1bml0LFxcbiAgICAgIHNpemU6IHVuaXQuYnl0ZUxlbmd0aCxcXG4gICAgICBvcmlnaW5EdHM6IGR0cyxcXG4gICAgICB0eXBlOiAndmlkZW8nXFxuICAgIH07XFxuICB9XFxuXFxuICBnZXQgdmlkZW9NZXRhKCkge1xcbiAgICByZXR1cm4gdGhpcy5fY29udGV4dC5nZXRJbnN0YW5jZSgnVFJBQ0tTJykudmlkZW9UcmFjay5tZXRhO1xcbiAgfVxcbiAgZ2V0IGF1ZGlvTWV0YSgpIHtcXG4gICAgcmV0dXJuIHRoaXMuX2NvbnRleHQuZ2V0SW5zdGFuY2UoJ1RSQUNLUycpLmF1ZGlvVHJhY2subWV0YTtcXG4gIH1cXG5cXG4gIHN0YXRpYyBnZXRTaWxlbnRGcmFtZShjaGFubmVsQ291bnQpIHtcXG4gICAgaWYgKGNoYW5uZWxDb3VudCA9PT0gMSkge1xcbiAgICAgIHJldHVybiBuZXcgVWludDhBcnJheShbMHgwMCwgMHhjOCwgMHgwMCwgMHg4MCwgMHgyMywgMHg4MF0pO1xcbiAgICB9IGVsc2UgaWYgKGNoYW5uZWxDb3VudCA9PT0gMikge1xcbiAgICAgIHJldHVybiBuZXcgVWludDhBcnJheShbMHgyMSwgMHgwMCwgMHg0OSwgMHg5MCwgMHgwMiwgMHgxOSwgMHgwMCwgMHgyMywgMHg4MF0pO1xcbiAgICB9IGVsc2UgaWYgKGNoYW5uZWxDb3VudCA9PT0gMykge1xcbiAgICAgIHJldHVybiBuZXcgVWludDhBcnJheShbMHgwMCwgMHhjOCwgMHgwMCwgMHg4MCwgMHgyMCwgMHg4NCwgMHgwMSwgMHgyNiwgMHg0MCwgMHgwOCwgMHg2NCwgMHgwMCwgMHg4ZV0pO1xcbiAgICB9IGVsc2UgaWYgKGNoYW5uZWxDb3VudCA9PT0gNCkge1xcbiAgICAgIHJldHVybiBuZXcgVWludDhBcnJheShbMHgwMCwgMHhjOCwgMHgwMCwgMHg4MCwgMHgyMCwgMHg4NCwgMHgwMSwgMHgyNiwgMHg0MCwgMHgwOCwgMHg2NCwgMHgwMCwgMHg4MCwgMHgyYywgMHg4MCwgMHgwOCwgMHgwMiwgMHgzOF0pO1xcbiAgICB9IGVsc2UgaWYgKGNoYW5uZWxDb3VudCA9PT0gNSkge1xcbiAgICAgIHJldHVybiBuZXcgVWludDhBcnJheShbMHgwMCwgMHhjOCwgMHgwMCwgMHg4MCwgMHgyMCwgMHg4NCwgMHgwMSwgMHgyNiwgMHg0MCwgMHgwOCwgMHg2NCwgMHgwMCwgMHg4MiwgMHgzMCwgMHgwNCwgMHg5OSwgMHgwMCwgMHgyMSwgMHg5MCwgMHgwMiwgMHgzOF0pO1xcbiAgICB9IGVsc2UgaWYgKGNoYW5uZWxDb3VudCA9PT0gNikge1xcbiAgICAgIHJldHVybiBuZXcgVWludDhBcnJheShbMHgwMCwgMHhjOCwgMHgwMCwgMHg4MCwgMHgyMCwgMHg4NCwgMHgwMSwgMHgyNiwgMHg0MCwgMHgwOCwgMHg2NCwgMHgwMCwgMHg4MiwgMHgzMCwgMHgwNCwgMHg5OSwgMHgwMCwgMHgyMSwgMHg5MCwgMHgwMiwgMHgwMCwgMHhiMiwgMHgwMCwgMHgyMCwgMHgwOCwgMHhlMF0pO1xcbiAgICB9XFxuICAgIHJldHVybiBudWxsO1xcbiAgfVxcbn1cXG5leHBvcnRzLmRlZmF1bHQgPSBNcDRSZW11eGVyO1xcblxcbi8vIyBzb3VyY2VVUkw9d2VicGFjazovL3hncGxheWVyLWZsdi8uLi94Z3BsYXllci1yZW11eC9zcmMvbXA0L2luZGV4LmpzP1wiKX0sXCIuLi94Z3BsYXllci11dGlscy9pbmRleC5qc1wiOlxuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuLi94Z3BsYXllci11dGlscy9pbmRleC5qcyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBubyBzdGF0aWMgZXhwb3J0cyBmb3VuZCAqL2Z1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pe1widXNlIHN0cmljdFwiO2V2YWwoJ1xcblxcbm1vZHVsZS5leHBvcnRzID0ge1xcbiAgQ29udGV4dDogX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9zcmMvY29udGV4dCAqLyBcIi4uL3hncGxheWVyLXV0aWxzL3NyYy9jb250ZXh0LmpzXCIpLmRlZmF1bHQsXFxuXFxuICAvLyBNb2R1bGVzIGZyb20gY29uc3RhbnRzXFxuICBFVkVOVFM6IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vc3JjL2NvbnN0YW50cy9ldmVudHMgKi8gXCIuLi94Z3BsYXllci11dGlscy9zcmMvY29uc3RhbnRzL2V2ZW50cy5qc1wiKS5kZWZhdWx0LFxcbiAgV09SS0VSX0NPTU1BTkRTOiBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL3NyYy9jb25zdGFudHMvd29ya2VyLWNvbW1hbmRzICovIFwiLi4veGdwbGF5ZXItdXRpbHMvc3JjL2NvbnN0YW50cy93b3JrZXItY29tbWFuZHMuanNcIikuZGVmYXVsdCxcXG5cXG4gIC8vIE1vZHVsZXMgZnJvbSBlbnZcXG4gIHNuaWZmZXI6IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vc3JjL2Vudi9zbmlmZmVyICovIFwiLi4veGdwbGF5ZXItdXRpbHMvc3JjL2Vudi9zbmlmZmVyLmpzXCIpLmRlZmF1bHQsXFxuICBpc0xlOiBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL3NyYy9lbnYvaXNsZSAqLyBcIi4uL3hncGxheWVyLXV0aWxzL3NyYy9lbnYvaXNsZS5qc1wiKS5kZWZhdWx0LFxcbiAgVVRGODogX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9zcmMvZW52L3V0ZjggKi8gXCIuLi94Z3BsYXllci11dGlscy9zcmMvZW52L3V0ZjguanNcIikuZGVmYXVsdCxcXG5cXG4gIC8vIE1vZGVsc1xcbiAgTWVkaWFJbmZvOiBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL3NyYy9tb2RlbHMvbWVkaWEtaW5mbyAqLyBcIi4uL3hncGxheWVyLXV0aWxzL3NyYy9tb2RlbHMvbWVkaWEtaW5mby5qc1wiKS5kZWZhdWx0LFxcbiAgTWVkaWFTYW1wbGU6IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vc3JjL21vZGVscy9tZWRpYS1zYW1wbGUgKi8gXCIuLi94Z3BsYXllci11dGlscy9zcmMvbW9kZWxzL21lZGlhLXNhbXBsZS5qc1wiKS5kZWZhdWx0LFxcbiAgTWVkaWFTZWdtZW50OiBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL3NyYy9tb2RlbHMvbWVkaWEtc2VnbWVudCAqLyBcIi4uL3hncGxheWVyLXV0aWxzL3NyYy9tb2RlbHMvbWVkaWEtc2VnbWVudC5qc1wiKS5kZWZhdWx0LFxcbiAgTWVkaWFTZWdtZW50TGlzdDogX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9zcmMvbW9kZWxzL21lZGlhLXNlZ21lbnQtbGlzdCAqLyBcIi4uL3hncGxheWVyLXV0aWxzL3NyYy9tb2RlbHMvbWVkaWEtc2VnbWVudC1saXN0LmpzXCIpLmRlZmF1bHQsXFxuICBBdWRpb1RyYWNrTWV0YTogX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9zcmMvbW9kZWxzL3RyYWNrLW1ldGEgKi8gXCIuLi94Z3BsYXllci11dGlscy9zcmMvbW9kZWxzL3RyYWNrLW1ldGEuanNcIikuQXVkaW9UcmFja01ldGEsXFxuICBWaWRlb1RyYWNrTWV0YTogX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9zcmMvbW9kZWxzL3RyYWNrLW1ldGEgKi8gXCIuLi94Z3BsYXllci11dGlscy9zcmMvbW9kZWxzL3RyYWNrLW1ldGEuanNcIikuVmlkZW9UcmFja01ldGEsXFxuICBBdWRpb1RyYWNrU2FtcGxlOiBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL3NyYy9tb2RlbHMvdHJhY2stc2FtcGxlICovIFwiLi4veGdwbGF5ZXItdXRpbHMvc3JjL21vZGVscy90cmFjay1zYW1wbGUuanNcIikuQXVkaW9UcmFja1NhbXBsZSxcXG4gIFZpZGVvVHJhY2tTYW1wbGU6IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vc3JjL21vZGVscy90cmFjay1zYW1wbGUgKi8gXCIuLi94Z3BsYXllci11dGlscy9zcmMvbW9kZWxzL3RyYWNrLXNhbXBsZS5qc1wiKS5WaWRlb1RyYWNrU2FtcGxlLFxcblxcbiAgLy8gTW9kdWxlcyBmcm9tIG1zZVxcbiAgTXNlOiBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL3NyYy9tc2UvaW5kZXggKi8gXCIuLi94Z3BsYXllci11dGlscy9zcmMvbXNlL2luZGV4LmpzXCIpLmRlZmF1bHQsXFxuXFxuICAvLyBNb2R1bGVzIGZyb20gd3JpdGVcXG4gIFN0cmVhbTogX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9zcmMvd3JpdGUvc3RyZWFtICovIFwiLi4veGdwbGF5ZXItdXRpbHMvc3JjL3dyaXRlL3N0cmVhbS5qc1wiKS5kZWZhdWx0LFxcbiAgQnVmZmVyOiBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL3NyYy93cml0ZS9idWZmZXIgKi8gXCIuLi94Z3BsYXllci11dGlscy9zcmMvd3JpdGUvYnVmZmVyLmpzXCIpLmRlZmF1bHQsXFxuXFxuICBNb2JpbGVWaWRlbzogX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9zcmMvbW9iaWxlL21vYmlsZS12aWRlbyAqLyBcIi4uL3hncGxheWVyLXV0aWxzL3NyYy9tb2JpbGUvbW9iaWxlLXZpZGVvLmpzXCIpXFxufTtcXG5cXG4vLyMgc291cmNlVVJMPXdlYnBhY2s6Ly94Z3BsYXllci1mbHYvLi4veGdwbGF5ZXItdXRpbHMvaW5kZXguanM/Jyl9LFwiLi4veGdwbGF5ZXItdXRpbHMvbm9kZV9tb2R1bGVzL2NvbmNhdC10eXBlZC1hcnJheS9saWIvY29uY2F0LmpzXCI6XG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuLi94Z3BsYXllci11dGlscy9ub2RlX21vZHVsZXMvY29uY2F0LXR5cGVkLWFycmF5L2xpYi9jb25jYXQuanMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIG5vIHN0YXRpYyBleHBvcnRzIGZvdW5kICovZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7XCJ1c2Ugc3RyaWN0XCI7ZXZhbCgnXFxuXFxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XFxuICB2YWx1ZTogdHJ1ZVxcbn0pO1xcblxcbmV4cG9ydHMuZGVmYXVsdCA9IGZ1bmN0aW9uIChSZXN1bHRDb25zdHJ1Y3Rvcikge1xcbiAgdmFyIHRvdGFsTGVuZ3RoID0gMDtcXG5cXG4gIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcnJheXMgPSBBcnJheShfbGVuID4gMSA/IF9sZW4gLSAxIDogMCksIF9rZXkgPSAxOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XFxuICAgIGFycmF5c1tfa2V5IC0gMV0gPSBhcmd1bWVudHNbX2tleV07XFxuICB9XFxuXFxuICB2YXIgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiA9IHRydWU7XFxuICB2YXIgX2RpZEl0ZXJhdG9yRXJyb3IgPSBmYWxzZTtcXG4gIHZhciBfaXRlcmF0b3JFcnJvciA9IHVuZGVmaW5lZDtcXG5cXG4gIHRyeSB7XFxuICAgIGZvciAodmFyIF9pdGVyYXRvciA9IGFycmF5c1tTeW1ib2wuaXRlcmF0b3JdKCksIF9zdGVwOyAhKF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24gPSAoX3N0ZXAgPSBfaXRlcmF0b3IubmV4dCgpKS5kb25lKTsgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiA9IHRydWUpIHtcXG4gICAgICB2YXIgYXJyID0gX3N0ZXAudmFsdWU7XFxuXFxuICAgICAgdG90YWxMZW5ndGggKz0gYXJyLmxlbmd0aDtcXG4gICAgfVxcbiAgfSBjYXRjaCAoZXJyKSB7XFxuICAgIF9kaWRJdGVyYXRvckVycm9yID0gdHJ1ZTtcXG4gICAgX2l0ZXJhdG9yRXJyb3IgPSBlcnI7XFxuICB9IGZpbmFsbHkge1xcbiAgICB0cnkge1xcbiAgICAgIGlmICghX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiAmJiBfaXRlcmF0b3IucmV0dXJuKSB7XFxuICAgICAgICBfaXRlcmF0b3IucmV0dXJuKCk7XFxuICAgICAgfVxcbiAgICB9IGZpbmFsbHkge1xcbiAgICAgIGlmIChfZGlkSXRlcmF0b3JFcnJvcikge1xcbiAgICAgICAgdGhyb3cgX2l0ZXJhdG9yRXJyb3I7XFxuICAgICAgfVxcbiAgICB9XFxuICB9XFxuXFxuICB2YXIgcmVzdWx0ID0gbmV3IFJlc3VsdENvbnN0cnVjdG9yKHRvdGFsTGVuZ3RoKTtcXG4gIHZhciBvZmZzZXQgPSAwO1xcbiAgdmFyIF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24yID0gdHJ1ZTtcXG4gIHZhciBfZGlkSXRlcmF0b3JFcnJvcjIgPSBmYWxzZTtcXG4gIHZhciBfaXRlcmF0b3JFcnJvcjIgPSB1bmRlZmluZWQ7XFxuXFxuICB0cnkge1xcbiAgICBmb3IgKHZhciBfaXRlcmF0b3IyID0gYXJyYXlzW1N5bWJvbC5pdGVyYXRvcl0oKSwgX3N0ZXAyOyAhKF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24yID0gKF9zdGVwMiA9IF9pdGVyYXRvcjIubmV4dCgpKS5kb25lKTsgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjIgPSB0cnVlKSB7XFxuICAgICAgdmFyIF9hcnIgPSBfc3RlcDIudmFsdWU7XFxuXFxuICAgICAgcmVzdWx0LnNldChfYXJyLCBvZmZzZXQpO1xcbiAgICAgIG9mZnNldCArPSBfYXJyLmxlbmd0aDtcXG4gICAgfVxcbiAgfSBjYXRjaCAoZXJyKSB7XFxuICAgIF9kaWRJdGVyYXRvckVycm9yMiA9IHRydWU7XFxuICAgIF9pdGVyYXRvckVycm9yMiA9IGVycjtcXG4gIH0gZmluYWxseSB7XFxuICAgIHRyeSB7XFxuICAgICAgaWYgKCFfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uMiAmJiBfaXRlcmF0b3IyLnJldHVybikge1xcbiAgICAgICAgX2l0ZXJhdG9yMi5yZXR1cm4oKTtcXG4gICAgICB9XFxuICAgIH0gZmluYWxseSB7XFxuICAgICAgaWYgKF9kaWRJdGVyYXRvckVycm9yMikge1xcbiAgICAgICAgdGhyb3cgX2l0ZXJhdG9yRXJyb3IyO1xcbiAgICAgIH1cXG4gICAgfVxcbiAgfVxcblxcbiAgcmV0dXJuIHJlc3VsdDtcXG59O1xcblxcbi8vIyBzb3VyY2VVUkw9d2VicGFjazovL3hncGxheWVyLWZsdi8uLi94Z3BsYXllci11dGlscy9ub2RlX21vZHVsZXMvY29uY2F0LXR5cGVkLWFycmF5L2xpYi9jb25jYXQuanM/Jyl9LFwiLi4veGdwbGF5ZXItdXRpbHMvbm9kZV9tb2R1bGVzL2NvbmNhdC10eXBlZC1hcnJheS9saWIvaW5kZXguanNcIjpcbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi4veGdwbGF5ZXItdXRpbHMvbm9kZV9tb2R1bGVzL2NvbmNhdC10eXBlZC1hcnJheS9saWIvaW5kZXguanMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgbm8gc3RhdGljIGV4cG9ydHMgZm91bmQgKi9mdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXtcInVzZSBzdHJpY3RcIjtldmFsKCdcXG5cXG52YXIgX2NvbmNhdCA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vY29uY2F0ICovIFwiLi4veGdwbGF5ZXItdXRpbHMvbm9kZV9tb2R1bGVzL2NvbmNhdC10eXBlZC1hcnJheS9saWIvY29uY2F0LmpzXCIpO1xcblxcbnZhciBfY29uY2F0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NvbmNhdCk7XFxuXFxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHtcXG4gIHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9O1xcbn1cXG5cXG5tb2R1bGUuZXhwb3J0cyA9IF9jb25jYXQyLmRlZmF1bHQ7XFxuXFxuLy8jIHNvdXJjZVVSTD13ZWJwYWNrOi8veGdwbGF5ZXItZmx2Ly4uL3hncGxheWVyLXV0aWxzL25vZGVfbW9kdWxlcy9jb25jYXQtdHlwZWQtYXJyYXkvbGliL2luZGV4LmpzPycpfSxcIi4uL3hncGxheWVyLXV0aWxzL25vZGVfbW9kdWxlcy93ZWJ3b3JraWZ5LXdlYnBhY2svaW5kZXguanNcIjpcbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuLi94Z3BsYXllci11dGlscy9ub2RlX21vZHVsZXMvd2Vid29ya2lmeS13ZWJwYWNrL2luZGV4LmpzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgbm8gc3RhdGljIGV4cG9ydHMgZm91bmQgKi9mdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXtcInVzZSBzdHJpY3RcIjtldmFsKFwiXFxuXFxuZnVuY3Rpb24gd2VicGFja0Jvb3RzdHJhcEZ1bmMobW9kdWxlcykge1xcbiAgLyoqKioqKi8gLy8gVGhlIG1vZHVsZSBjYWNoZVxcbiAgLyoqKioqKi92YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xcblxcbiAgLyoqKioqKi8gLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cXG4gIC8qKioqKiovZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xcblxcbiAgICAvKioqKioqLyAvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcXG4gICAgLyoqKioqKi9pZiAoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pXFxuICAgICAgLyoqKioqKi9yZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcXG5cXG4gICAgLyoqKioqKi8gLy8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcXG4gICAgLyoqKioqKi92YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XFxuICAgICAgLyoqKioqKi9pOiBtb2R1bGVJZCxcXG4gICAgICAvKioqKioqL2w6IGZhbHNlLFxcbiAgICAgIC8qKioqKiovZXhwb3J0czoge31cXG4gICAgICAvKioqKioqLyB9O1xcblxcbiAgICAvKioqKioqLyAvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cXG4gICAgLyoqKioqKi9tb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcXG5cXG4gICAgLyoqKioqKi8gLy8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxcbiAgICAvKioqKioqL21vZHVsZS5sID0gdHJ1ZTtcXG5cXG4gICAgLyoqKioqKi8gLy8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcXG4gICAgLyoqKioqKi9yZXR1cm4gbW9kdWxlLmV4cG9ydHM7XFxuICAgIC8qKioqKiovXFxuICB9XFxuXFxuICAvKioqKioqLyAvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxcbiAgLyoqKioqKi9fX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xcblxcbiAgLyoqKioqKi8gLy8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcXG4gIC8qKioqKiovX193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcXG5cXG4gIC8qKioqKiovIC8vIGlkZW50aXR5IGZ1bmN0aW9uIGZvciBjYWxsaW5nIGhhcm1vbnkgaW1wb3J0cyB3aXRoIHRoZSBjb3JyZWN0IGNvbnRleHRcXG4gIC8qKioqKiovX193ZWJwYWNrX3JlcXVpcmVfXy5pID0gZnVuY3Rpb24gKHZhbHVlKSB7XFxuICAgIHJldHVybiB2YWx1ZTtcXG4gIH07XFxuXFxuICAvKioqKioqLyAvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcXG4gIC8qKioqKiovX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24gKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xcbiAgICAvKioqKioqL2lmICghX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XFxuICAgICAgLyoqKioqKi9PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwge1xcbiAgICAgICAgLyoqKioqKi9jb25maWd1cmFibGU6IGZhbHNlLFxcbiAgICAgICAgLyoqKioqKi9lbnVtZXJhYmxlOiB0cnVlLFxcbiAgICAgICAgLyoqKioqKi9nZXQ6IGdldHRlclxcbiAgICAgICAgLyoqKioqKi8gfSk7XFxuICAgICAgLyoqKioqKi9cXG4gICAgfVxcbiAgICAvKioqKioqL1xcbiAgfTtcXG5cXG4gIC8qKioqKiovIC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcXG4gIC8qKioqKiovX193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24gKGV4cG9ydHMpIHtcXG4gICAgLyoqKioqKi9PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xcbiAgICAvKioqKioqL1xcbiAgfTtcXG5cXG4gIC8qKioqKiovIC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXFxuICAvKioqKioqL19fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uIChtb2R1bGUpIHtcXG4gICAgLyoqKioqKi92YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cXG4gICAgLyoqKioqKi9mdW5jdGlvbiBnZXREZWZhdWx0KCkge1xcbiAgICAgIHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTtcXG4gICAgfSA6XFxuICAgIC8qKioqKiovZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHtcXG4gICAgICByZXR1cm4gbW9kdWxlO1xcbiAgICB9O1xcbiAgICAvKioqKioqL19fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcXG4gICAgLyoqKioqKi9yZXR1cm4gZ2V0dGVyO1xcbiAgICAvKioqKioqL1xcbiAgfTtcXG5cXG4gIC8qKioqKiovIC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxcbiAgLyoqKioqKi9fX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbiAob2JqZWN0LCBwcm9wZXJ0eSkge1xcbiAgICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpO1xcbiAgfTtcXG5cXG4gIC8qKioqKiovIC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXFxuICAvKioqKioqL19fd2VicGFja19yZXF1aXJlX18ucCA9IFxcXCIvXFxcIjtcXG5cXG4gIC8qKioqKiovIC8vIG9uIGVycm9yIGZ1bmN0aW9uIGZvciBhc3luYyBsb2FkaW5nXFxuICAvKioqKioqL19fd2VicGFja19yZXF1aXJlX18ub2UgPSBmdW5jdGlvbiAoZXJyKSB7XFxuICAgIGNvbnNvbGUuZXJyb3IoZXJyKTt0aHJvdyBlcnI7XFxuICB9O1xcblxcbiAgdmFyIGYgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IEVOVFJZX01PRFVMRSk7XFxuICByZXR1cm4gZi5kZWZhdWx0IHx8IGY7IC8vIHRyeSB0byBjYWxsIGRlZmF1bHQgaWYgZGVmaW5lZCB0byBhbHNvIHN1cHBvcnQgYmFiZWwgZXNtb2R1bGUgZXhwb3J0c1xcbn1cXG5cXG52YXIgbW9kdWxlTmFtZVJlcUV4cCA9ICdbXFxcXFxcXFwufFxcXFxcXFxcLXxcXFxcXFxcXCt8XFxcXFxcXFx3fFxcXFwvfEBdKyc7XFxudmFyIGRlcGVuZGVuY3lSZWdFeHAgPSAnXFxcXFxcXFwoXFxcXFxcXFxzKihcXFxcL1xcXFxcXFxcKi4qP1xcXFxcXFxcKlxcXFwvKT9cXFxcXFxcXHMqLio/KCcgKyBtb2R1bGVOYW1lUmVxRXhwICsgJykuKj9cXFxcXFxcXCknOyAvLyBhZGRpdGlvbmFsIGNoYXJzIHdoZW4gb3V0cHV0LnBhdGhpbmZvIGlzIHRydWVcXG5cXG4vLyBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8yNTkzNjYxLzEzMDQ0MlxcbmZ1bmN0aW9uIHF1b3RlUmVnRXhwKHN0cikge1xcbiAgcmV0dXJuIChzdHIgKyAnJykucmVwbGFjZSgvWy4/KiteJFtcXFxcXVxcXFxcXFxcKCl7fXwtXS9nLCAnXFxcXFxcXFwkJicpO1xcbn1cXG5cXG5mdW5jdGlvbiBpc051bWVyaWMobikge1xcbiAgcmV0dXJuICFpc05hTigxICogbik7IC8vIDEgKiBuIGNvbnZlcnRzIGludGVnZXJzLCBpbnRlZ2VycyBhcyBzdHJpbmcgKFxcXCIxMjNcXFwiKSwgMWUzIGFuZCBcXFwiMWUzXFxcIiB0byBpbnRlZ2VycyBhbmQgc3RyaW5ncyB0byBOYU5cXG59XFxuXFxuZnVuY3Rpb24gZ2V0TW9kdWxlRGVwZW5kZW5jaWVzKHNvdXJjZXMsIG1vZHVsZSwgcXVldWVOYW1lKSB7XFxuICB2YXIgcmV0dmFsID0ge307XFxuICByZXR2YWxbcXVldWVOYW1lXSA9IFtdO1xcblxcbiAgdmFyIGZuU3RyaW5nID0gbW9kdWxlLnRvU3RyaW5nKCk7XFxuICB2YXIgd3JhcHBlclNpZ25hdHVyZSA9IGZuU3RyaW5nLm1hdGNoKC9eZnVuY3Rpb25cXFxccz9cXFxcdypcXFxcKFxcXFx3KyxcXFxccypcXFxcdyssXFxcXHMqKFxcXFx3KylcXFxcKS8pO1xcbiAgaWYgKCF3cmFwcGVyU2lnbmF0dXJlKSByZXR1cm4gcmV0dmFsO1xcbiAgdmFyIHdlYnBhY2tSZXF1aXJlTmFtZSA9IHdyYXBwZXJTaWduYXR1cmVbMV07XFxuXFxuICAvLyBtYWluIGJ1bmRsZSBkZXBzXFxuICB2YXIgcmUgPSBuZXcgUmVnRXhwKCcoXFxcXFxcXFxcXFxcXFxcXG58XFxcXFxcXFxXKScgKyBxdW90ZVJlZ0V4cCh3ZWJwYWNrUmVxdWlyZU5hbWUpICsgZGVwZW5kZW5jeVJlZ0V4cCwgJ2cnKTtcXG4gIHZhciBtYXRjaDtcXG4gIHdoaWxlIChtYXRjaCA9IHJlLmV4ZWMoZm5TdHJpbmcpKSB7XFxuICAgIGlmIChtYXRjaFszXSA9PT0gJ2RsbC1yZWZlcmVuY2UnKSBjb250aW51ZTtcXG4gICAgcmV0dmFsW3F1ZXVlTmFtZV0ucHVzaChtYXRjaFszXSk7XFxuICB9XFxuXFxuICAvLyBkbGwgZGVwc1xcbiAgcmUgPSBuZXcgUmVnRXhwKCdcXFxcXFxcXCgnICsgcXVvdGVSZWdFeHAod2VicGFja1JlcXVpcmVOYW1lKSArICdcXFxcXFxcXChcXFwiKGRsbC1yZWZlcmVuY2VcXFxcXFxcXHMoJyArIG1vZHVsZU5hbWVSZXFFeHAgKyAnKSlcXFwiXFxcXFxcXFwpXFxcXFxcXFwpJyArIGRlcGVuZGVuY3lSZWdFeHAsICdnJyk7XFxuICB3aGlsZSAobWF0Y2ggPSByZS5leGVjKGZuU3RyaW5nKSkge1xcbiAgICBpZiAoIXNvdXJjZXNbbWF0Y2hbMl1dKSB7XFxuICAgICAgcmV0dmFsW3F1ZXVlTmFtZV0ucHVzaChtYXRjaFsxXSk7XFxuICAgICAgc291cmNlc1ttYXRjaFsyXV0gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKG1hdGNoWzFdKS5tO1xcbiAgICB9XFxuICAgIHJldHZhbFttYXRjaFsyXV0gPSByZXR2YWxbbWF0Y2hbMl1dIHx8IFtdO1xcbiAgICByZXR2YWxbbWF0Y2hbMl1dLnB1c2gobWF0Y2hbNF0pO1xcbiAgfVxcblxcbiAgLy8gY29udmVydCAxZTMgYmFjayB0byAxMDAwIC0gdGhpcyBjYW4gYmUgaW1wb3J0YW50IGFmdGVyIHVnbGlmeS1qcyBjb252ZXJ0ZWQgMTAwMCB0byAxZTNcXG4gIHZhciBrZXlzID0gT2JqZWN0LmtleXMocmV0dmFsKTtcXG4gIGZvciAodmFyIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7IGkrKykge1xcbiAgICBmb3IgKHZhciBqID0gMDsgaiA8IHJldHZhbFtrZXlzW2ldXS5sZW5ndGg7IGorKykge1xcbiAgICAgIGlmIChpc051bWVyaWMocmV0dmFsW2tleXNbaV1dW2pdKSkge1xcbiAgICAgICAgcmV0dmFsW2tleXNbaV1dW2pdID0gMSAqIHJldHZhbFtrZXlzW2ldXVtqXTtcXG4gICAgICB9XFxuICAgIH1cXG4gIH1cXG5cXG4gIHJldHVybiByZXR2YWw7XFxufVxcblxcbmZ1bmN0aW9uIGhhc1ZhbHVlc0luUXVldWVzKHF1ZXVlcykge1xcbiAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhxdWV1ZXMpO1xcbiAgcmV0dXJuIGtleXMucmVkdWNlKGZ1bmN0aW9uIChoYXNWYWx1ZXMsIGtleSkge1xcbiAgICByZXR1cm4gaGFzVmFsdWVzIHx8IHF1ZXVlc1trZXldLmxlbmd0aCA+IDA7XFxuICB9LCBmYWxzZSk7XFxufVxcblxcbmZ1bmN0aW9uIGdldFJlcXVpcmVkTW9kdWxlcyhzb3VyY2VzLCBtb2R1bGVJZCkge1xcbiAgdmFyIG1vZHVsZXNRdWV1ZSA9IHtcXG4gICAgbWFpbjogW21vZHVsZUlkXVxcbiAgfTtcXG4gIHZhciByZXF1aXJlZE1vZHVsZXMgPSB7XFxuICAgIG1haW46IFtdXFxuICB9O1xcbiAgdmFyIHNlZW5Nb2R1bGVzID0ge1xcbiAgICBtYWluOiB7fVxcbiAgfTtcXG5cXG4gIHdoaWxlIChoYXNWYWx1ZXNJblF1ZXVlcyhtb2R1bGVzUXVldWUpKSB7XFxuICAgIHZhciBxdWV1ZXMgPSBPYmplY3Qua2V5cyhtb2R1bGVzUXVldWUpO1xcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHF1ZXVlcy5sZW5ndGg7IGkrKykge1xcbiAgICAgIHZhciBxdWV1ZU5hbWUgPSBxdWV1ZXNbaV07XFxuICAgICAgdmFyIHF1ZXVlID0gbW9kdWxlc1F1ZXVlW3F1ZXVlTmFtZV07XFxuICAgICAgdmFyIG1vZHVsZVRvQ2hlY2sgPSBxdWV1ZS5wb3AoKTtcXG4gICAgICBzZWVuTW9kdWxlc1txdWV1ZU5hbWVdID0gc2Vlbk1vZHVsZXNbcXVldWVOYW1lXSB8fCB7fTtcXG4gICAgICBpZiAoc2Vlbk1vZHVsZXNbcXVldWVOYW1lXVttb2R1bGVUb0NoZWNrXSB8fCAhc291cmNlc1txdWV1ZU5hbWVdW21vZHVsZVRvQ2hlY2tdKSBjb250aW51ZTtcXG4gICAgICBzZWVuTW9kdWxlc1txdWV1ZU5hbWVdW21vZHVsZVRvQ2hlY2tdID0gdHJ1ZTtcXG4gICAgICByZXF1aXJlZE1vZHVsZXNbcXVldWVOYW1lXSA9IHJlcXVpcmVkTW9kdWxlc1txdWV1ZU5hbWVdIHx8IFtdO1xcbiAgICAgIHJlcXVpcmVkTW9kdWxlc1txdWV1ZU5hbWVdLnB1c2gobW9kdWxlVG9DaGVjayk7XFxuICAgICAgdmFyIG5ld01vZHVsZXMgPSBnZXRNb2R1bGVEZXBlbmRlbmNpZXMoc291cmNlcywgc291cmNlc1txdWV1ZU5hbWVdW21vZHVsZVRvQ2hlY2tdLCBxdWV1ZU5hbWUpO1xcbiAgICAgIHZhciBuZXdNb2R1bGVzS2V5cyA9IE9iamVjdC5rZXlzKG5ld01vZHVsZXMpO1xcbiAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgbmV3TW9kdWxlc0tleXMubGVuZ3RoOyBqKyspIHtcXG4gICAgICAgIG1vZHVsZXNRdWV1ZVtuZXdNb2R1bGVzS2V5c1tqXV0gPSBtb2R1bGVzUXVldWVbbmV3TW9kdWxlc0tleXNbal1dIHx8IFtdO1xcbiAgICAgICAgbW9kdWxlc1F1ZXVlW25ld01vZHVsZXNLZXlzW2pdXSA9IG1vZHVsZXNRdWV1ZVtuZXdNb2R1bGVzS2V5c1tqXV0uY29uY2F0KG5ld01vZHVsZXNbbmV3TW9kdWxlc0tleXNbal1dKTtcXG4gICAgICB9XFxuICAgIH1cXG4gIH1cXG5cXG4gIHJldHVybiByZXF1aXJlZE1vZHVsZXM7XFxufVxcblxcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKG1vZHVsZUlkLCBvcHRpb25zKSB7XFxuICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcXG4gIHZhciBzb3VyY2VzID0ge1xcbiAgICBtYWluOiBfX3dlYnBhY2tfcmVxdWlyZV9fLm1cXG4gIH07XFxuXFxuICB2YXIgcmVxdWlyZWRNb2R1bGVzID0gb3B0aW9ucy5hbGwgPyB7IG1haW46IE9iamVjdC5rZXlzKHNvdXJjZXMubWFpbikgfSA6IGdldFJlcXVpcmVkTW9kdWxlcyhzb3VyY2VzLCBtb2R1bGVJZCk7XFxuXFxuICB2YXIgc3JjID0gJyc7XFxuXFxuICBPYmplY3Qua2V5cyhyZXF1aXJlZE1vZHVsZXMpLmZpbHRlcihmdW5jdGlvbiAobSkge1xcbiAgICByZXR1cm4gbSAhPT0gJ21haW4nO1xcbiAgfSkuZm9yRWFjaChmdW5jdGlvbiAobW9kdWxlKSB7XFxuICAgIHZhciBlbnRyeU1vZHVsZSA9IDA7XFxuICAgIHdoaWxlIChyZXF1aXJlZE1vZHVsZXNbbW9kdWxlXVtlbnRyeU1vZHVsZV0pIHtcXG4gICAgICBlbnRyeU1vZHVsZSsrO1xcbiAgICB9XFxuICAgIHJlcXVpcmVkTW9kdWxlc1ttb2R1bGVdLnB1c2goZW50cnlNb2R1bGUpO1xcbiAgICBzb3VyY2VzW21vZHVsZV1bZW50cnlNb2R1bGVdID0gJyhmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsgbW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fOyB9KSc7XFxuICAgIHNyYyA9IHNyYyArICd2YXIgJyArIG1vZHVsZSArICcgPSAoJyArIHdlYnBhY2tCb290c3RyYXBGdW5jLnRvU3RyaW5nKCkucmVwbGFjZSgnRU5UUllfTU9EVUxFJywgSlNPTi5zdHJpbmdpZnkoZW50cnlNb2R1bGUpKSArICcpKHsnICsgcmVxdWlyZWRNb2R1bGVzW21vZHVsZV0ubWFwKGZ1bmN0aW9uIChpZCkge1xcbiAgICAgIHJldHVybiAnJyArIEpTT04uc3RyaW5naWZ5KGlkKSArICc6ICcgKyBzb3VyY2VzW21vZHVsZV1baWRdLnRvU3RyaW5nKCk7XFxuICAgIH0pLmpvaW4oJywnKSArICd9KTtcXFxcbic7XFxuICB9KTtcXG5cXG4gIHNyYyA9IHNyYyArICduZXcgKCgnICsgd2VicGFja0Jvb3RzdHJhcEZ1bmMudG9TdHJpbmcoKS5yZXBsYWNlKCdFTlRSWV9NT0RVTEUnLCBKU09OLnN0cmluZ2lmeShtb2R1bGVJZCkpICsgJykoeycgKyByZXF1aXJlZE1vZHVsZXMubWFpbi5tYXAoZnVuY3Rpb24gKGlkKSB7XFxuICAgIHJldHVybiAnJyArIEpTT04uc3RyaW5naWZ5KGlkKSArICc6ICcgKyBzb3VyY2VzLm1haW5baWRdLnRvU3RyaW5nKCk7XFxuICB9KS5qb2luKCcsJykgKyAnfSkpKHNlbGYpOyc7XFxuXFxuICB2YXIgYmxvYiA9IG5ldyB3aW5kb3cuQmxvYihbc3JjXSwgeyB0eXBlOiAndGV4dC9qYXZhc2NyaXB0JyB9KTtcXG4gIGlmIChvcHRpb25zLmJhcmUpIHtcXG4gICAgcmV0dXJuIGJsb2I7XFxuICB9XFxuXFxuICB2YXIgVVJMID0gd2luZG93LlVSTCB8fCB3aW5kb3cud2Via2l0VVJMIHx8IHdpbmRvdy5tb3pVUkwgfHwgd2luZG93Lm1zVVJMO1xcblxcbiAgdmFyIHdvcmtlclVybCA9IFVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7XFxuICB2YXIgd29ya2VyID0gbmV3IHdpbmRvdy5Xb3JrZXIod29ya2VyVXJsKTtcXG4gIHdvcmtlci5vYmplY3RVUkwgPSB3b3JrZXJVcmw7XFxuXFxuICByZXR1cm4gd29ya2VyO1xcbn07XFxuXFxuLy8jIHNvdXJjZVVSTD13ZWJwYWNrOi8veGdwbGF5ZXItZmx2Ly4uL3hncGxheWVyLXV0aWxzL25vZGVfbW9kdWxlcy93ZWJ3b3JraWZ5LXdlYnBhY2svaW5kZXguanM/XCIpfSxcIi4uL3hncGxheWVyLXV0aWxzL3NyYy9jb25zdGFudHMvZXZlbnRzLmpzXCI6XG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4uL3hncGxheWVyLXV0aWxzL3NyYy9jb25zdGFudHMvZXZlbnRzLmpzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIG5vIHN0YXRpYyBleHBvcnRzIGZvdW5kICovZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7XCJ1c2Ugc3RyaWN0XCI7ZXZhbChcIlxcblxcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcXFwiX19lc01vZHVsZVxcXCIsIHtcXG4gIHZhbHVlOiB0cnVlXFxufSk7XFxuY29uc3QgTE9BREVSX0VWRU5UUyA9IHtcXG4gIExBREVSX1NUQVJUOiAnTE9BREVSX1NUQVJUJyxcXG4gIExPQURFUl9EQVRBTE9BREVEOiAnTE9BREVSX0RBVEFMT0FERUQnLFxcbiAgTE9BREVSX0NPTVBMRVRFOiAnTE9BREVSX0NPTVBMRVRFJyxcXG4gIExPQURFUl9FUlJPUjogJ0xPQURFUl9FUlJPUidcXG59O1xcblxcbmNvbnN0IERFTVVYX0VWRU5UUyA9IHtcXG4gIERFTVVYX1NUQVJUOiAnREVNVVhfU1RBUlQnLFxcbiAgREVNVVhfQ09NUExFVEU6ICdERU1VWF9DT01QTEVURScsXFxuICBERU1VWF9FUlJPUjogJ0RFTVVYX0VSUk9SJyxcXG4gIE1FVEFEQVRBX1BBUlNFRDogJ01FVEFEQVRBX1BBUlNFRCcsXFxuICBWSURFT19NRVRBREFUQV9DSEFOR0U6ICdWSURFT19NRVRBREFUQV9DSEFOR0UnLFxcbiAgQVVESU9fTUVUQURBVEFfQ0hBTkdFOiAnQVVESU9fTUVUQURBVEFfQ0hBTkdFJyxcXG4gIE1FRElBX0lORk86ICdNRURJQV9JTkZPJ1xcbn07XFxuXFxuY29uc3QgUkVNVVhfRVZFTlRTID0ge1xcbiAgUkVNVVhfTUVUQURBVEE6ICdSRU1VWF9NRVRBREFUQScsXFxuICBSRU1VWF9NRURJQTogJ1JFTVVYX01FRElBJyxcXG4gIE1FRElBX1NFR01FTlQ6ICdNRURJQV9TRUdNRU5UJyxcXG4gIFJFTVVYX0VSUk9SOiAnUkVNVVhfRVJST1InLFxcbiAgSU5JVF9TRUdNRU5UOiAnSU5JVF9TRUdNRU5UJ1xcbn07XFxuXFxuY29uc3QgTVNFX0VWRU5UUyA9IHtcXG4gIFNPVVJDRV9VUERBVEVfRU5EOiAnU09VUkNFX1VQREFURV9FTkQnXFxuXFxuICAvLyBobHPkuJPmnIlldmVudHNcXG59O2NvbnN0IEhMU19FVkVOVFMgPSB7XFxuICBSRVRSWV9USU1FX0VYQ0VFREVEOiAnUkVUUllfVElNRV9FWENFRURFRCdcXG59O1xcblxcbmNvbnN0IEFMTEVWRU5UUyA9IE9iamVjdC5hc3NpZ24oe30sIExPQURFUl9FVkVOVFMsIERFTVVYX0VWRU5UUywgUkVNVVhfRVZFTlRTLCBNU0VfRVZFTlRTLCBITFNfRVZFTlRTKTtcXG5cXG5jb25zdCBGbHZBbGxvd2VkRXZlbnRzID0gW107XFxuY29uc3QgSGxzQWxsb3dlZEV2ZW50cyA9IFtdO1xcblxcbmZvciAobGV0IGtleSBpbiBBTExFVkVOVFMpIHtcXG4gIGlmIChBTExFVkVOVFMuaGFzT3duUHJvcGVydHkoa2V5KSkge1xcbiAgICBGbHZBbGxvd2VkRXZlbnRzLnB1c2goQUxMRVZFTlRTW2tleV0pO1xcbiAgfVxcbn1cXG5cXG5mb3IgKGxldCBrZXkgaW4gQUxMRVZFTlRTKSB7XFxuICBpZiAoQUxMRVZFTlRTLmhhc093blByb3BlcnR5KGtleSkpIHtcXG4gICAgSGxzQWxsb3dlZEV2ZW50cy5wdXNoKEFMTEVWRU5UU1trZXldKTtcXG4gIH1cXG59XFxuXFxuZXhwb3J0cy5kZWZhdWx0ID0ge1xcbiAgQUxMRVZFTlRTLFxcbiAgSExTX0VWRU5UUyxcXG4gIFJFTVVYX0VWRU5UUyxcXG4gIERFTVVYX0VWRU5UUyxcXG4gIE1TRV9FVkVOVFMsXFxuICBMT0FERVJfRVZFTlRTLFxcbiAgRmx2QWxsb3dlZEV2ZW50cyxcXG4gIEhsc0FsbG93ZWRFdmVudHNcXG59O1xcblxcbi8vIyBzb3VyY2VVUkw9d2VicGFjazovL3hncGxheWVyLWZsdi8uLi94Z3BsYXllci11dGlscy9zcmMvY29uc3RhbnRzL2V2ZW50cy5qcz9cIil9LFwiLi4veGdwbGF5ZXItdXRpbHMvc3JjL2NvbnN0YW50cy93b3JrZXItY29tbWFuZHMuanNcIjpcbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi4veGdwbGF5ZXItdXRpbHMvc3JjL2NvbnN0YW50cy93b3JrZXItY29tbWFuZHMuanMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgbm8gc3RhdGljIGV4cG9ydHMgZm91bmQgKi9mdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXtcInVzZSBzdHJpY3RcIjtldmFsKFwiXFxuXFxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFxcXCJfX2VzTW9kdWxlXFxcIiwge1xcbiAgdmFsdWU6IHRydWVcXG59KTtcXG5jb25zdCBDT05URVhUX0NPTU9NQU5EUyA9IGV4cG9ydHMuQ09OVEVYVF9DT01PTUFORFMgPSB7XFxuICBPTjogJ29uJyxcXG4gIE9OQ0U6ICdvbmNlJyxcXG4gIE9GRjogJ29mZicsXFxuICBFTUlUOiAnZW1pdCcsXFxuICBERVNUUk9ZOiAnZGVzdHJveSdcXG59O1xcblxcbi8vIyBzb3VyY2VVUkw9d2VicGFjazovL3hncGxheWVyLWZsdi8uLi94Z3BsYXllci11dGlscy9zcmMvY29uc3RhbnRzL3dvcmtlci1jb21tYW5kcy5qcz9cIil9LFwiLi4veGdwbGF5ZXItdXRpbHMvc3JjL2NvbnRleHQuanNcIjpcbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi4veGdwbGF5ZXItdXRpbHMvc3JjL2NvbnRleHQuanMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgbm8gc3RhdGljIGV4cG9ydHMgZm91bmQgKi9mdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXtcInVzZSBzdHJpY3RcIjtldmFsKCdcXG5cXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcXG4gIHZhbHVlOiB0cnVlXFxufSk7XFxuXFxudmFyIF9tZWRpYUluZm8gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL21vZGVscy9tZWRpYS1pbmZvICovIFwiLi4veGdwbGF5ZXItdXRpbHMvc3JjL21vZGVscy9tZWRpYS1pbmZvLmpzXCIpO1xcblxcbnZhciBfbWVkaWFJbmZvMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX21lZGlhSW5mbyk7XFxuXFxudmFyIF9ldmVudHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISBldmVudHMgKi8gXCIuLi8uLi9ub2RlX21vZHVsZXMvZXZlbnRzL2V2ZW50cy5qc1wiKTtcXG5cXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxcblxcbmNvbnN0IERJUkVDVF9FTUlUX0ZMQUcgPSBcXCdfX1RPX19cXCc7XFxuXFxuY2xhc3MgQ29udGV4dCB7XFxuICBjb25zdHJ1Y3RvcihhbGxvd2VkRXZlbnRzID0gW10pIHtcXG4gICAgdGhpcy5fZW1pdHRlciA9IG5ldyBfZXZlbnRzLkV2ZW50RW1pdHRlcigpO1xcbiAgICB0aGlzLl9pbnN0YW5jZU1hcCA9IHt9OyAvLyDmiYDmnInnmoTop6PnoIHmtYHnqIvlrp7kvotcXG4gICAgdGhpcy5fY2xzTWFwID0ge307IC8vIOaehOmAoOWHveaVsOeahG1hcFxcbiAgICB0aGlzLl9pbml0ZWQgPSBmYWxzZTtcXG4gICAgdGhpcy5tZWRpYUluZm8gPSBuZXcgX21lZGlhSW5mbzIuZGVmYXVsdCgpO1xcbiAgICB0aGlzLmFsbG93ZWRFdmVudHMgPSBhbGxvd2VkRXZlbnRzO1xcbiAgICB0aGlzLl9ob29rcyA9IHt9OyAvLyDms6jlhozlnKjkuovku7bliY0v5ZCO55qE6ZKp5a2Q77yM5L6L5aaCIGJlZm9yZShcXCdERU1VWF9DT01QTEVURVxcJylcXG4gIH1cXG5cXG4gIC8qKlxcbiAgICog5LuO5LiK5LiL5paH5Lit6I635Y+W6Kej56CB5rWB56iL5a6e5L6L77yM5aaC5p6c5rKh5pyJ5a6e5L6L77yM5p6E6YCg5LiA5LiqXFxuICAgKiBAcGFyYW0gdGFnXFxuICAgKiBAcGFyYW0gYXJnc1xcbiAgICogQHJldHVybnMgeyp9XFxuICAgKi9cXG4gIGdldEluc3RhbmNlKHRhZykge1xcbiAgICBpZiAodGhpcy5faW5zdGFuY2VNYXBbdGFnXSkge1xcbiAgICAgIHJldHVybiB0aGlzLl9pbnN0YW5jZU1hcFt0YWddO1xcbiAgICB9IGVsc2Uge1xcbiAgICAgIC8vIHRocm93IG5ldyBFcnJvcihgJHt0YWd95a6e5L6L5bCa5pyq5Yid5aeL5YyWYClcXG4gICAgICByZXR1cm4gbnVsbDtcXG4gICAgfVxcbiAgfVxcblxcbiAgLyoqXFxuICAgKiDliJ3lp4vljJblhbfkvZPlrp7kvotcXG4gICAqIEBwYXJhbSB0YWdcXG4gICAqIEBwYXJhbSBhcmdzXFxuICAgKi9cXG4gIGluaXRJbnN0YW5jZSh0YWcsIC4uLmFyZ3MpIHtcXG4gICAgaWYgKHRoaXMuX2Nsc01hcFt0YWddKSB7XFxuICAgICAgY29uc3QgbmV3SW5zdGFuY2UgPSBuZXcgdGhpcy5fY2xzTWFwW3RhZ10oLi4uYXJncyk7XFxuICAgICAgdGhpcy5faW5zdGFuY2VNYXBbdGFnXSA9IG5ld0luc3RhbmNlO1xcbiAgICAgIGlmIChuZXdJbnN0YW5jZS5pbml0KSB7XFxuICAgICAgICBuZXdJbnN0YW5jZS5pbml0KCk7IC8vIFRPRE86IGxpZmVjaXJjbGVcXG4gICAgICB9XFxuICAgICAgcmV0dXJuIG5ld0luc3RhbmNlO1xcbiAgICB9IGVsc2Uge1xcbiAgICAgIHRocm93IG5ldyBFcnJvcihgJHt0YWd95pyq5ZyoY29udGV4dOS4reazqOWGjGApO1xcbiAgICB9XFxuICB9XFxuXFxuICAvKipcXG4gICAqIOmBv+WFjeWkp+mHj+eahGluaXRJbnN0YW5jZeiwg+eUqO+8jOWIneWni+WMluaJgOacieeahOe7hOS7tlxcbiAgICogQHBhcmFtIGNvbmZpZ1xcbiAgICovXFxuICBpbml0KGNvbmZpZykge1xcbiAgICBpZiAodGhpcy5faW5pdGVkKSB7XFxuICAgICAgcmV0dXJuO1xcbiAgICB9XFxuICAgIGZvciAobGV0IHRhZyBpbiB0aGlzLl9jbHNNYXApIHtcXG4gICAgICAvLyBpZiBub3QgaW5pdGVkLCBpbml0IGFuIGluc3RhbmNlXFxuICAgICAgaWYgKHRoaXMuX2Nsc01hcC5oYXNPd25Qcm9wZXJ0eSh0YWcpICYmICF0aGlzLl9pbnN0YW5jZU1hcFt0YWddKSB7XFxuICAgICAgICB0aGlzLmluaXRJbnN0YW5jZSh0YWcsIGNvbmZpZyk7XFxuICAgICAgfVxcbiAgICB9XFxuICAgIHRoaXMuX2luaXRlZCA9IHRydWU7XFxuICB9XFxuXFxuICAvKipcXG4gICAqIOazqOWGjOS4gOS4quS4iuS4i+aWh+a1geeoi++8jOaPkOS+m+WuieWFqOeahOS6i+S7tuWPkemAgeacuuWItlxcbiAgICogQHBhcmFtIHRhZ1xcbiAgICogQHBhcmFtIGNsc1xcbiAgICovXFxuICByZWdpc3RyeSh0YWcsIGNscykge1xcbiAgICBjb25zdCBlbWl0dGVyID0gdGhpcy5fZW1pdHRlcjtcXG4gICAgY29uc3QgY2hlY2tNZXNzYWdlTmFtZSA9IHRoaXMuX2lzTWVzc2FnZU5hbWVWYWxpZC5iaW5kKHRoaXMpO1xcbiAgICBjb25zdCBzZWxmID0gdGhpcztcXG4gICAgY29uc3QgZW5oYW5jZWQgPSBjbGFzcyBleHRlbmRzIGNscyB7XFxuICAgICAgY29uc3RydWN0b3IoLi4uYXJncykge1xcbiAgICAgICAgc3VwZXIoLi4uYXJncyk7XFxuICAgICAgICB0aGlzLmxpc3RlbmVycyA9IHt9O1xcbiAgICAgICAgdGhpcy5vbmNlTGlzdGVuZXJzID0ge307XFxuICAgICAgICB0aGlzLlRBRyA9IHRhZztcXG4gICAgICAgIHRoaXMuX2NvbnRleHQgPSBzZWxmO1xcbiAgICAgIH1cXG5cXG4gICAgICBvbihtZXNzYWdlTmFtZSwgY2FsbGJhY2spIHtcXG4gICAgICAgIGNoZWNrTWVzc2FnZU5hbWUobWVzc2FnZU5hbWUpO1xcblxcbiAgICAgICAgaWYgKHRoaXMubGlzdGVuZXJzW21lc3NhZ2VOYW1lXSkge1xcbiAgICAgICAgICB0aGlzLmxpc3RlbmVyc1ttZXNzYWdlTmFtZV0ucHVzaChjYWxsYmFjayk7XFxuICAgICAgICB9IGVsc2Uge1xcbiAgICAgICAgICB0aGlzLmxpc3RlbmVyc1ttZXNzYWdlTmFtZV0gPSBbY2FsbGJhY2tdO1xcbiAgICAgICAgfVxcblxcbiAgICAgICAgZW1pdHRlci5vbihgJHttZXNzYWdlTmFtZX0ke0RJUkVDVF9FTUlUX0ZMQUd9JHt0YWd9YCwgY2FsbGJhY2spOyAvLyDlu7rnq4vlrprlkJHpgJrkv6Hnm5HlkKxcXG4gICAgICAgIHJldHVybiBlbWl0dGVyLm9uKG1lc3NhZ2VOYW1lLCBjYWxsYmFjayk7XFxuICAgICAgfVxcblxcbiAgICAgIC8qKlxcbiAgICAgICAqIOWcqOafkOS4quS6i+S7tuinpuWPkeWJjeaJp+ihjFxcbiAgICAgICAqIEBwYXJhbSBtZXNzYWdlTmFtZVxcbiAgICAgICAqIEBwYXJhbSBjYWxsYmFja1xcbiAgICAgICAqL1xcbiAgICAgIGJlZm9yZShtZXNzYWdlTmFtZSwgY2FsbGJhY2spIHtcXG4gICAgICAgIGNoZWNrTWVzc2FnZU5hbWUobWVzc2FnZU5hbWUpO1xcbiAgICAgICAgaWYgKHNlbGYuX2hvb2tzW21lc3NhZ2VOYW1lXSkge1xcbiAgICAgICAgICBzZWxmLl9ob29rc1ttZXNzYWdlTmFtZV0ucHVzaChjYWxsYmFjayk7XFxuICAgICAgICB9IGVsc2Uge1xcbiAgICAgICAgICBzZWxmLl9ob29rc1ttZXNzYWdlTmFtZV0gPSBbY2FsbGJhY2tdO1xcbiAgICAgICAgfVxcbiAgICAgIH1cXG5cXG4gICAgICBvbmNlKG1lc3NhZ2VOYW1lLCBjYWxsYmFjaykge1xcbiAgICAgICAgY2hlY2tNZXNzYWdlTmFtZShtZXNzYWdlTmFtZSk7XFxuXFxuICAgICAgICBpZiAodGhpcy5vbmNlTGlzdGVuZXJzW21lc3NhZ2VOYW1lXSkge1xcbiAgICAgICAgICB0aGlzLm9uY2VMaXN0ZW5lcnNbbWVzc2FnZU5hbWVdLnB1c2goY2FsbGJhY2spO1xcbiAgICAgICAgfSBlbHNlIHtcXG4gICAgICAgICAgdGhpcy5vbmNlTGlzdGVuZXJzW21lc3NhZ2VOYW1lXSA9IFtjYWxsYmFja107XFxuICAgICAgICB9XFxuXFxuICAgICAgICBlbWl0dGVyLm9uY2UoYCR7bWVzc2FnZU5hbWV9JHtESVJFQ1RfRU1JVF9GTEFHfSR7dGFnfWAsIGNhbGxiYWNrKTtcXG4gICAgICAgIHJldHVybiBlbWl0dGVyLm9uY2UobWVzc2FnZU5hbWUsIGNhbGxiYWNrKTtcXG4gICAgICB9XFxuXFxuICAgICAgZW1pdChtZXNzYWdlTmFtZSwgLi4uYXJncykge1xcbiAgICAgICAgY2hlY2tNZXNzYWdlTmFtZShtZXNzYWdlTmFtZSk7XFxuXFxuICAgICAgICBjb25zdCBiZWZvcmVMaXN0ID0gc2VsZi5faG9va3NbbWVzc2FnZU5hbWVdO1xcbiAgICAgICAgaWYgKGJlZm9yZUxpc3QpIHtcXG4gICAgICAgICAgZm9yIChsZXQgaSA9IDAsIGxlbiA9IGJlZm9yZUxpc3QubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcXG4gICAgICAgICAgICBjb25zdCBjYWxsYmFjayA9IGJlZm9yZUxpc3RbaV07XFxuICAgICAgICAgICAgY2FsbGJhY2soKTtcXG4gICAgICAgICAgfVxcbiAgICAgICAgfVxcbiAgICAgICAgcmV0dXJuIGVtaXR0ZXIuZW1pdChtZXNzYWdlTmFtZSwgLi4uYXJncyk7XFxuICAgICAgfVxcblxcbiAgICAgIC8qKlxcbiAgICAgICAqIOWumuWQkeWPkemAgee7meafkOS4que7hOS7tuWNleS+i+eahOa2iOaBr1xcbiAgICAgICAqIEBwYXJhbSBtZXNzYWdlTmFtZVxcbiAgICAgICAqIEBwYXJhbSBhcmdzXFxuICAgICAgICovXFxuICAgICAgZW1pdFRvKHRhZywgbWVzc2FnZU5hbWUsIC4uLmFyZ3MpIHtcXG4gICAgICAgIGNoZWNrTWVzc2FnZU5hbWUobWVzc2FnZU5hbWUpO1xcblxcbiAgICAgICAgcmV0dXJuIGVtaXR0ZXIuZW1pdChgJHttZXNzYWdlTmFtZX0ke0RJUkVDVF9FTUlUX0ZMQUd9JHt0YWd9YCwgLi4uYXJncyk7XFxuICAgICAgfVxcblxcbiAgICAgIG9mZihtZXNzYWdlTmFtZSwgY2FsbGJhY2spIHtcXG4gICAgICAgIGNoZWNrTWVzc2FnZU5hbWUobWVzc2FnZU5hbWUpO1xcbiAgICAgICAgcmV0dXJuIGVtaXR0ZXIub2ZmKG1lc3NhZ2VOYW1lLCBjYWxsYmFjayk7XFxuICAgICAgfVxcblxcbiAgICAgIHJlbW92ZUxpc3RlbmVycygpIHtcXG4gICAgICAgIGNvbnN0IGhhc093biA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuYmluZCh0aGlzLmxpc3RlbmVycyk7XFxuXFxuICAgICAgICBmb3IgKGxldCBtZXNzYWdlTmFtZSBpbiB0aGlzLmxpc3RlbmVycykge1xcbiAgICAgICAgICBpZiAoaGFzT3duKG1lc3NhZ2VOYW1lKSkge1xcbiAgICAgICAgICAgIGNvbnN0IGNhbGxiYWNrcyA9IHRoaXMubGlzdGVuZXJzW21lc3NhZ2VOYW1lXSB8fCBbXTtcXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNhbGxiYWNrcy5sZW5ndGg7IGkrKykge1xcbiAgICAgICAgICAgICAgY29uc3QgY2FsbGJhY2sgPSBjYWxsYmFja3NbaV07XFxuICAgICAgICAgICAgICBlbWl0dGVyLm9mZihtZXNzYWdlTmFtZSwgY2FsbGJhY2spO1xcbiAgICAgICAgICAgICAgZW1pdHRlci5vZmYoYCR7bWVzc2FnZU5hbWV9JHtESVJFQ1RfRU1JVF9GTEFHfSR7dGFnfWAsIGNhbGxiYWNrKTtcXG4gICAgICAgICAgICB9XFxuICAgICAgICAgIH1cXG4gICAgICAgIH1cXG5cXG4gICAgICAgIGZvciAobGV0IG1lc3NhZ2VOYW1lIGluIHRoaXMub25jZUxpc3RlbmVycykge1xcbiAgICAgICAgICBpZiAoaGFzT3duKG1lc3NhZ2VOYW1lKSkge1xcbiAgICAgICAgICAgIGNvbnN0IGNhbGxiYWNrcyA9IHRoaXMub25jZUxpc3RlbmVyc1ttZXNzYWdlTmFtZV0gfHwgW107XFxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjYWxsYmFja3MubGVuZ3RoOyBpKyspIHtcXG4gICAgICAgICAgICAgIGNvbnN0IGNhbGxiYWNrID0gY2FsbGJhY2tzW2ldO1xcbiAgICAgICAgICAgICAgZW1pdHRlci5vZmYobWVzc2FnZU5hbWUsIGNhbGxiYWNrKTtcXG4gICAgICAgICAgICAgIGVtaXR0ZXIub2ZmKGAke21lc3NhZ2VOYW1lfSR7RElSRUNUX0VNSVRfRkxBR30ke3RhZ31gLCBjYWxsYmFjayk7XFxuICAgICAgICAgICAgfVxcbiAgICAgICAgICB9XFxuICAgICAgICB9XFxuICAgICAgfVxcblxcbiAgICAgIC8qKlxcbiAgICAgICAqIOWcqOe7hOS7tumUgOavgeaXtu+8jOm7mOiupOWwhuWug+azqOWGjOeahOS6i+S7tuWFqOmDqOWNuOi9ve+8jOehruS/neS4jeS8mumAoOaIkOWGheWtmOazhOa8j1xcbiAgICAgICAqL1xcbiAgICAgIGRlc3Ryb3koKSB7XFxuICAgICAgICAvLyBzdGVwMSB1bmxpc3RlbiBldmVudHNcXG4gICAgICAgIHRoaXMucmVtb3ZlTGlzdGVuZXJzKCk7XFxuXFxuICAgICAgICAvLyBzdGVwMiByZWxlYXNlIGZyb20gY29udGV4dFxcbiAgICAgICAgZGVsZXRlIHNlbGYuX2luc3RhbmNlTWFwW3RhZ107XFxuICAgICAgICBpZiAoc3VwZXIuZGVzdHJveSkge1xcbiAgICAgICAgICBzdXBlci5kZXN0cm95KCk7XFxuICAgICAgICB9XFxuICAgICAgfVxcbiAgICB9O1xcbiAgICB0aGlzLl9jbHNNYXBbdGFnXSA9IGVuaGFuY2VkO1xcblxcbiAgICAvKipcXG4gICAgICogZ2V0IGluc3RhbmNlIGltbWVkaWF0ZWx5XFxuICAgICAqIGUuZyBjb25zdCBpbnN0YW5jZSA9IGNvbnRleHQucmVnaXN0cnkodGFnLCBDbHMpKGNvbmZpZylcXG4gICAgICogKi9cXG4gICAgcmV0dXJuICguLi5hcmdzKSA9PiB7XFxuICAgICAgcmV0dXJuIHRoaXMuaW5pdEluc3RhbmNlKHRhZywgLi4uYXJncyk7XFxuICAgIH07XFxuICB9XFxuXFxuICAvKipcXG4gICAqIOWvueWtmOWcqOeahOWunuS+i+i/m+ihjFxcbiAgICovXFxuICBkZXN0cm95SW5zdGFuY2VzKCkge1xcbiAgICBPYmplY3Qua2V5cyh0aGlzLl9pbnN0YW5jZU1hcCkuZm9yRWFjaCh0YWcgPT4ge1xcbiAgICAgIGlmICh0aGlzLl9pbnN0YW5jZU1hcFt0YWddLmRlc3Ryb3kpIHtcXG4gICAgICAgIHRoaXMuX2luc3RhbmNlTWFwW3RhZ10uZGVzdHJveSgpO1xcbiAgICAgIH1cXG4gICAgfSk7XFxuICB9XFxuXFxuICAvKipcXG4gICAqIOe8luino+eggea1geeoi+aXoOmcgOWFs+azqOS6i+S7tueahOino+e7kVxcbiAgICovXFxuICBkZXN0cm95KCkge1xcbiAgICB0aGlzLl9lbWl0dGVyID0gbnVsbDtcXG4gICAgdGhpcy5hbGxvd2VkRXZlbnRzID0gW107XFxuICAgIHRoaXMuX2Nsc01hcCA9IG51bGw7XFxuICAgIHRoaXMuX2NvbnRleHQgPSBudWxsO1xcbiAgICB0aGlzLmRlc3Ryb3lJbnN0YW5jZXMoKTtcXG4gIH1cXG5cXG4gIC8qKlxcbiAgICog5a+55L+h6YGT6L+b6KGM5pS25ouiXFxuICAgKiBAcGFyYW0gbWVzc2FnZU5hbWVcXG4gICAqIEBwcml2YXRlXFxuICAgKi9cXG4gIF9pc01lc3NhZ2VOYW1lVmFsaWQobWVzc2FnZU5hbWUpIHtcXG4gICAgaWYgKCF0aGlzLmFsbG93ZWRFdmVudHMuaW5kZXhPZihtZXNzYWdlTmFtZSkgPCAwKSB7XFxuICAgICAgdGhyb3cgbmV3IEVycm9yKGB1bnJlZ2lzdGVyZWQgbWVzc2FnZSBuYW1lOiAke21lc3NhZ2VOYW1lfWApO1xcbiAgICB9XFxuICB9XFxufVxcblxcbmV4cG9ydHMuZGVmYXVsdCA9IENvbnRleHQ7XFxuXFxuLy8jIHNvdXJjZVVSTD13ZWJwYWNrOi8veGdwbGF5ZXItZmx2Ly4uL3hncGxheWVyLXV0aWxzL3NyYy9jb250ZXh0LmpzPycpfSxcIi4uL3hncGxheWVyLXV0aWxzL3NyYy9lbnYvaXNsZS5qc1wiOlxuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi4veGdwbGF5ZXItdXRpbHMvc3JjL2Vudi9pc2xlLmpzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBubyBzdGF0aWMgZXhwb3J0cyBmb3VuZCAqL2Z1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pe1widXNlIHN0cmljdFwiO2V2YWwoJ1xcblxcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xcbiAgdmFsdWU6IHRydWVcXG59KTtcXG5jb25zdCBsZSA9IGZ1bmN0aW9uICgpIHtcXG4gIGNvbnN0IGJ1ZiA9IG5ldyBBcnJheUJ1ZmZlcigyKTtcXG4gIG5ldyBEYXRhVmlldyhidWYpLnNldEludDE2KDAsIDI1NiwgdHJ1ZSk7IC8vIGxpdHRsZS1lbmRpYW4gd3JpdGVcXG4gIHJldHVybiBuZXcgSW50MTZBcnJheShidWYpWzBdID09PSAyNTY7IC8vIHBsYXRmb3JtLXNwZWMgcmVhZCwgaWYgZXF1YWwgdGhlbiBMRVxcbn0oKTtcXG5cXG5leHBvcnRzLmRlZmF1bHQgPSBsZTtcXG5cXG4vLyMgc291cmNlVVJMPXdlYnBhY2s6Ly94Z3BsYXllci1mbHYvLi4veGdwbGF5ZXItdXRpbHMvc3JjL2Vudi9pc2xlLmpzPycpfSxcIi4uL3hncGxheWVyLXV0aWxzL3NyYy9lbnYvc25pZmZlci5qc1wiOlxuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi4veGdwbGF5ZXItdXRpbHMvc3JjL2Vudi9zbmlmZmVyLmpzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBubyBzdGF0aWMgZXhwb3J0cyBmb3VuZCAqL2Z1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pe1widXNlIHN0cmljdFwiO2V2YWwoXCJcXG5cXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXFxcIl9fZXNNb2R1bGVcXFwiLCB7XFxuICB2YWx1ZTogdHJ1ZVxcbn0pO1xcbmNvbnN0IGxlID0gZnVuY3Rpb24gKCkge1xcbiAgY29uc3QgYnVmID0gbmV3IEFycmF5QnVmZmVyKDIpO1xcbiAgbmV3IERhdGFWaWV3KGJ1Zikuc2V0SW50MTYoMCwgMjU2LCB0cnVlKTsgLy8gbGl0dGxlLWVuZGlhbiB3cml0ZVxcbiAgcmV0dXJuIG5ldyBJbnQxNkFycmF5KGJ1ZilbMF0gPT09IDI1NjsgLy8gcGxhdGZvcm0tc3BlYyByZWFkLCBpZiBlcXVhbCB0aGVuIExFXFxufSgpO1xcblxcbmNvbnN0IHNuaWZmZXIgPSB7XFxuICBnZXQgZGV2aWNlKCkge1xcbiAgICBsZXQgciA9IHNuaWZmZXIub3M7XFxuICAgIHJldHVybiByLmlzUGMgPyAncGMnIDogci5pc1RhYmxldCA/ICd0YWJsZXQnIDogJ21vYmlsZSc7XFxuICB9LFxcbiAgZ2V0IGJyb3dzZXIoKSB7XFxuICAgIGxldCB1YSA9IG5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKTtcXG4gICAgbGV0IHJlZyA9IHtcXG4gICAgICBpZTogL3J2OihbXFxcXGQuXSspXFxcXCkgbGlrZSBnZWNrby8sXFxuICAgICAgZmlyZm94OiAvZmlyZWZveFxcXFwvKFtcXFxcZC5dKykvLFxcbiAgICAgIGNocm9tZTogL2Nocm9tZVxcXFwvKFtcXFxcZC5dKykvLFxcbiAgICAgIG9wZXJhOiAvb3BlcmEuKFtcXFxcZC5dKykvLFxcbiAgICAgIHNhZmFyaTogL3ZlcnNpb25cXFxcLyhbXFxcXGQuXSspLipzYWZhcmkvXFxuICAgIH07XFxuICAgIHJldHVybiBbXS5jb25jYXQoT2JqZWN0LmtleXMocmVnKS5maWx0ZXIoa2V5ID0+IHJlZ1trZXldLnRlc3QodWEpKSlbMF07XFxuICB9LFxcbiAgZ2V0IG9zKCkge1xcbiAgICBsZXQgdWEgPSBuYXZpZ2F0b3IudXNlckFnZW50O1xcbiAgICBsZXQgaXNXaW5kb3dzUGhvbmUgPSAvKD86V2luZG93cyBQaG9uZSkvLnRlc3QodWEpO1xcbiAgICBsZXQgaXNTeW1iaWFuID0gLyg/OlN5bWJpYW5PUykvLnRlc3QodWEpIHx8IGlzV2luZG93c1Bob25lO1xcbiAgICBsZXQgaXNBbmRyb2lkID0gLyg/OkFuZHJvaWQpLy50ZXN0KHVhKTtcXG4gICAgbGV0IGlzRmlyZUZveCA9IC8oPzpGaXJlZm94KS8udGVzdCh1YSk7XFxuICAgIGxldCBpc1RhYmxldCA9IC8oPzppUGFkfFBsYXlCb29rKS8udGVzdCh1YSkgfHwgaXNBbmRyb2lkICYmICEvKD86TW9iaWxlKS8udGVzdCh1YSkgfHwgaXNGaXJlRm94ICYmIC8oPzpUYWJsZXQpLy50ZXN0KHVhKTtcXG4gICAgbGV0IGlzUGhvbmUgPSAvKD86aVBob25lKS8udGVzdCh1YSkgJiYgIWlzVGFibGV0O1xcbiAgICBsZXQgaXNQYyA9ICFpc1Bob25lICYmICFpc0FuZHJvaWQgJiYgIWlzU3ltYmlhbjtcXG4gICAgcmV0dXJuIHtcXG4gICAgICBpc1RhYmxldCxcXG4gICAgICBpc1Bob25lLFxcbiAgICAgIGlzQW5kcm9pZCxcXG4gICAgICBpc1BjLFxcbiAgICAgIGlzU3ltYmlhbixcXG4gICAgICBpc1dpbmRvd3NQaG9uZSxcXG4gICAgICBpc0ZpcmVGb3hcXG4gICAgfTtcXG4gIH0sXFxuXFxuICBnZXQgaXNMZSgpIHtcXG4gICAgcmV0dXJuIGxlO1xcbiAgfVxcbn07XFxuXFxuZXhwb3J0cy5kZWZhdWx0ID0gc25pZmZlcjtcXG5cXG4vLyMgc291cmNlVVJMPXdlYnBhY2s6Ly94Z3BsYXllci1mbHYvLi4veGdwbGF5ZXItdXRpbHMvc3JjL2Vudi9zbmlmZmVyLmpzP1wiKX0sXCIuLi94Z3BsYXllci11dGlscy9zcmMvZW52L3V0ZjguanNcIjpcbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4uL3hncGxheWVyLXV0aWxzL3NyYy9lbnYvdXRmOC5qcyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgbm8gc3RhdGljIGV4cG9ydHMgZm91bmQgKi9mdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXtcInVzZSBzdHJpY3RcIjtldmFsKFwiXFxuXFxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFxcXCJfX2VzTW9kdWxlXFxcIiwge1xcbiAgdmFsdWU6IHRydWVcXG59KTtcXG5jbGFzcyBVVEY4IHtcXG4gIHN0YXRpYyBkZWNvZGUodWludDhhcnJheSkge1xcbiAgICBjb25zdCBvdXQgPSBbXTtcXG4gICAgY29uc3QgaW5wdXQgPSB1aW50OGFycmF5O1xcbiAgICBsZXQgaSA9IDA7XFxuICAgIGNvbnN0IGxlbmd0aCA9IHVpbnQ4YXJyYXkubGVuZ3RoO1xcblxcbiAgICB3aGlsZSAoaSA8IGxlbmd0aCkge1xcbiAgICAgIGlmIChpbnB1dFtpXSA8IDB4ODApIHtcXG4gICAgICAgIG91dC5wdXNoKFN0cmluZy5mcm9tQ2hhckNvZGUoaW5wdXRbaV0pKTtcXG4gICAgICAgICsraTtcXG4gICAgICAgIGNvbnRpbnVlO1xcbiAgICAgIH0gZWxzZSBpZiAoaW5wdXRbaV0gPCAweEMwKSB7XFxuICAgICAgICAvLyBmYWxsdGhyb3VnaFxcbiAgICAgIH0gZWxzZSBpZiAoaW5wdXRbaV0gPCAweEUwKSB7XFxuICAgICAgICBpZiAoVVRGOC5fY2hlY2tDb250aW51YXRpb24oaW5wdXQsIGksIDEpKSB7XFxuICAgICAgICAgIGNvbnN0IHVjczQgPSAoaW5wdXRbaV0gJiAweDFGKSA8PCA2IHwgaW5wdXRbaSArIDFdICYgMHgzRjtcXG4gICAgICAgICAgaWYgKHVjczQgPj0gMHg4MCkge1xcbiAgICAgICAgICAgIG91dC5wdXNoKFN0cmluZy5mcm9tQ2hhckNvZGUodWNzNCAmIDB4RkZGRikpO1xcbiAgICAgICAgICAgIGkgKz0gMjtcXG4gICAgICAgICAgICBjb250aW51ZTtcXG4gICAgICAgICAgfVxcbiAgICAgICAgfVxcbiAgICAgIH0gZWxzZSBpZiAoaW5wdXRbaV0gPCAweEYwKSB7XFxuICAgICAgICBpZiAoVVRGOC5fY2hlY2tDb250aW51YXRpb24oaW5wdXQsIGksIDIpKSB7XFxuICAgICAgICAgIGNvbnN0IHVjczQgPSAoaW5wdXRbaV0gJiAweEYpIDw8IDEyIHwgKGlucHV0W2kgKyAxXSAmIDB4M0YpIDw8IDYgfCBpbnB1dFtpICsgMl0gJiAweDNGO1xcbiAgICAgICAgICBpZiAodWNzNCA+PSAweDgwMCAmJiAodWNzNCAmIDB4RjgwMCkgIT09IDB4RDgwMCkge1xcbiAgICAgICAgICAgIG91dC5wdXNoKFN0cmluZy5mcm9tQ2hhckNvZGUodWNzNCAmIDB4RkZGRikpO1xcbiAgICAgICAgICAgIGkgKz0gMztcXG4gICAgICAgICAgICBjb250aW51ZTtcXG4gICAgICAgICAgfVxcbiAgICAgICAgfVxcbiAgICAgIH0gZWxzZSBpZiAoaW5wdXRbaV0gPCAweEY4KSB7XFxuICAgICAgICBpZiAoVVRGOC5fY2hlY2tDb250aW51YXRpb24oaW5wdXQsIGksIDMpKSB7XFxuICAgICAgICAgIGxldCB1Y3M0ID0gKGlucHV0W2ldICYgMHg3KSA8PCAxOCB8IChpbnB1dFtpICsgMV0gJiAweDNGKSA8PCAxMiB8IChpbnB1dFtpICsgMl0gJiAweDNGKSA8PCA2IHwgaW5wdXRbaSArIDNdICYgMHgzRjtcXG4gICAgICAgICAgaWYgKHVjczQgPiAweDEwMDAwICYmIHVjczQgPCAweDExMDAwMCkge1xcbiAgICAgICAgICAgIHVjczQgLT0gMHgxMDAwMDtcXG4gICAgICAgICAgICBvdXQucHVzaChTdHJpbmcuZnJvbUNoYXJDb2RlKHVjczQgPj4+IDEwIHwgMHhEODAwKSk7XFxuICAgICAgICAgICAgb3V0LnB1c2goU3RyaW5nLmZyb21DaGFyQ29kZSh1Y3M0ICYgMHgzRkYgfCAweERDMDApKTtcXG4gICAgICAgICAgICBpICs9IDQ7XFxuICAgICAgICAgICAgY29udGludWU7XFxuICAgICAgICAgIH1cXG4gICAgICAgIH1cXG4gICAgICB9XFxuICAgICAgb3V0LnB1c2goU3RyaW5nLmZyb21DaGFyQ29kZSgweEZGRkQpKTtcXG4gICAgICArK2k7XFxuICAgIH1cXG5cXG4gICAgcmV0dXJuIG91dC5qb2luKCcnKTtcXG4gIH1cXG5cXG4gIHN0YXRpYyBfY2hlY2tDb250aW51YXRpb24odWludDhhcnJheSwgc3RhcnQsIGNoZWNrTGVuZ3RoKSB7XFxuICAgIGxldCBhcnJheSA9IHVpbnQ4YXJyYXk7XFxuICAgIGlmIChzdGFydCArIGNoZWNrTGVuZ3RoIDwgYXJyYXkubGVuZ3RoKSB7XFxuICAgICAgd2hpbGUgKGNoZWNrTGVuZ3RoLS0pIHtcXG4gICAgICAgIGlmICgoYXJyYXlbKytzdGFydF0gJiAweEMwKSAhPT0gMHg4MCkge1xcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XFxuICAgICAgICB9XFxuICAgICAgfVxcbiAgICAgIHJldHVybiB0cnVlO1xcbiAgICB9IGVsc2Uge1xcbiAgICAgIHJldHVybiBmYWxzZTtcXG4gICAgfVxcbiAgfVxcbn1cXG5cXG5leHBvcnRzLmRlZmF1bHQgPSBVVEY4O1xcblxcbi8vIyBzb3VyY2VVUkw9d2VicGFjazovL3hncGxheWVyLWZsdi8uLi94Z3BsYXllci11dGlscy9zcmMvZW52L3V0ZjguanM/XCIpfSxcIi4uL3hncGxheWVyLXV0aWxzL3NyYy9tb2JpbGUvYXVkaW8tY29udGV4dC5qc1wiOlxuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi4veGdwbGF5ZXItdXRpbHMvc3JjL21vYmlsZS9hdWRpby1jb250ZXh0LmpzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBubyBzdGF0aWMgZXhwb3J0cyBmb3VuZCAqL2Z1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pe1widXNlIHN0cmljdFwiO2V2YWwoJ1xcblxcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xcbiAgdmFsdWU6IHRydWVcXG59KTtcXG5jbGFzcyBBdWRpb0N0eCB7XFxuICBjb25zdHJ1Y3Rvcihjb25maWcpIHtcXG4gICAgdGhpcy5jb25maWcgPSBPYmplY3QuYXNzaWduKHt9LCBjb25maWcpO1xcbiAgICBsZXQgQXVkaW9Db250ZXh0ID0gd2luZG93LkF1ZGlvQ29udGV4dCB8fCB3aW5kb3cud2Via2l0QXVkaW9Db250ZXh0O1xcbiAgICB0aGlzLmNvbnRleHQgPSBuZXcgQXVkaW9Db250ZXh0KCk7XFxuICAgIHRoaXMuZ2Fpbk5vZGUgPSB0aGlzLmNvbnRleHQuY3JlYXRlR2FpbigpO1xcbiAgICB0aGlzLmdhaW5Ob2RlLmNvbm5lY3QodGhpcy5jb250ZXh0LmRlc3RpbmF0aW9uKTtcXG4gICAgdGhpcy5tZXRhID0gdW5kZWZpbmVkO1xcbiAgICB0aGlzLnNhbXBsZXMgPSBbXTtcXG4gICAgdGhpcy5wcmVsb2FkVGltZSA9IHRoaXMuY29uZmlnLnByZWxvYWRUaW1lIHx8IDM7XFxuICAgIHRoaXMuZHVyYXRpb24gPSAwO1xcblxcbiAgICB0aGlzLl9jdXJyZW50QnVmZmVyID0gdW5kZWZpbmVkO1xcbiAgICB0aGlzLl9uZXh0QnVmZmVyID0gdW5kZWZpbmVkO1xcbiAgICB0aGlzLl9sYXN0cHRzID0gdW5kZWZpbmVkO1xcbiAgICB0aGlzLl9wcmVEZWNvZGUgPSBbXTtcXG4gICAgdGhpcy5fY3VycmVudFRpbWUgPSAwO1xcbiAgICB0aGlzLl9kZWNvZGluZyA9IGZhbHNlO1xcbiAgICAvLyDorrDlvZXlpJbpg6jkvKDovpPnmoTnirbmgIFcXG4gICAgdGhpcy5fcGxheWVkID0gZmFsc2U7XFxuICB9XFxuXFxuICBnZXQgY3VycmVudFRpbWUoKSB7XFxuICAgIHJldHVybiB0aGlzLl9jdXJyZW50VGltZTtcXG4gIH1cXG5cXG4gIGRlY29kZUF1ZGlvKGF1ZGlvVHJhY2spIHtcXG4gICAgbGV0IHsgc2FtcGxlcyB9ID0gYXVkaW9UcmFjaztcXG4gICAgbGV0IGRhdGEgPSBzYW1wbGVzO1xcbiAgICBhdWRpb1RyYWNrLnNhbXBsZXMgPSBbXTtcXG4gICAgdGhpcy5zZXRBdWRpb0RhdGEoZGF0YSk7XFxuICB9XFxuICBzZXRBdWRpb0RhdGEoZGF0YSkge1xcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRhdGEubGVuZ3RoOyBpKyspIHtcXG4gICAgICBkYXRhW2ldLnB0cyA9IGRhdGFbaV0ucHRzID09PSB1bmRlZmluZWQgPyBkYXRhW2ldLmR0cyA6IGRhdGFbaV0ucHRzO1xcbiAgICAgIHRoaXMuX3ByZURlY29kZS5wdXNoKGRhdGFbaV0pO1xcbiAgICB9XFxuICAgIGlmICh0aGlzLl9wcmVEZWNvZGUubGVuZ3RoID4gMCkge1xcbiAgICAgIGlmICh0aGlzLl9sYXN0cHRzID09PSB1bmRlZmluZWQpIHtcXG4gICAgICAgIHRoaXMuX2xhc3RwdHMgPSB0aGlzLl9wcmVEZWNvZGVbMF0ucHRzO1xcbiAgICAgIH1cXG4gICAgICBpZiAoKHRoaXMuX3ByZURlY29kZVt0aGlzLl9wcmVEZWNvZGUubGVuZ3RoIC0gMV0ucHRzIC0gdGhpcy5fbGFzdHB0cykgLyAxMDAwID4gdGhpcy5wcmVsb2FkVGltZSkge1xcbiAgICAgICAgdGhpcy5kZWNvZGVBQUMoKTtcXG4gICAgICB9XFxuICAgIH1cXG4gIH1cXG5cXG4gIGRlY29kZUFBQygpIHtcXG4gICAgaWYgKHRoaXMuX2RlY29kaW5nKSB7XFxuICAgICAgcmV0dXJuO1xcbiAgICB9XFxuICAgIHRoaXMuX2RlY29kaW5nID0gdHJ1ZTtcXG4gICAgbGV0IGRhdGEgPSB0aGlzLl9wcmVEZWNvZGU7XFxuICAgIGxldCBzYW1wbGVzID0gW107XFxuICAgIGxldCBfdGhpcyA9IHRoaXM7XFxuICAgIGxldCBzYW1wbGUgPSBkYXRhLnNoaWZ0KCk7XFxuICAgIHdoaWxlIChzYW1wbGUpIHtcXG4gICAgICBsZXQgc2FtcGxlRGF0YSA9IEF1ZGlvQ3R4LmdldEFBQ0RhdGEodGhpcy5tZXRhLCBzYW1wbGUpO1xcbiAgICAgIHNhbXBsZXMucHVzaChzYW1wbGVEYXRhKTtcXG4gICAgICB0aGlzLl9sYXN0cHRzID0gc2FtcGxlLnB0cztcXG4gICAgICBzYW1wbGUgPSBkYXRhLnNoaWZ0KCk7XFxuICAgIH1cXG4gICAgbGV0IGJ1ZmZlciA9IEF1ZGlvQ3R4LmNvbWJpbGVEYXRhKHNhbXBsZXMpO1xcbiAgICB0cnkge1xcbiAgICAgIHRoaXMuY29udGV4dC5kZWNvZGVBdWRpb0RhdGEoYnVmZmVyLmJ1ZmZlciwgZnVuY3Rpb24gKGJ1ZmZlcikge1xcbiAgICAgICAgbGV0IGF1ZGlvU291cmNlID0gX3RoaXMuY29udGV4dC5jcmVhdGVCdWZmZXJTb3VyY2UoKTtcXG4gICAgICAgIGF1ZGlvU291cmNlLmJ1ZmZlciA9IGJ1ZmZlcjtcXG4gICAgICAgIGF1ZGlvU291cmNlLm9uZW5kZWQgPSBfdGhpcy5vblNvdXJjZUVuZGVkLmJpbmQoX3RoaXMpO1xcbiAgICAgICAgX3RoaXMuc2FtcGxlcy5wdXNoKHtcXG4gICAgICAgICAgdGltZTogX3RoaXMuZHVyYXRpb24sXFxuICAgICAgICAgIGR1cmF0aW9uOiBidWZmZXIuZHVyYXRpb24sXFxuICAgICAgICAgIGRhdGE6IGF1ZGlvU291cmNlXFxuICAgICAgICB9KTtcXG5cXG4gICAgICAgIF90aGlzLmR1cmF0aW9uICs9IGJ1ZmZlci5kdXJhdGlvbjtcXG5cXG4gICAgICAgIGlmICghX3RoaXMuX2N1cnJlbnRCdWZmZXIpIHtcXG4gICAgICAgICAgX3RoaXMuX2N1cnJlbnRCdWZmZXIgPSBfdGhpcy5nZXRUaW1lQnVmZmVyKF90aGlzLmN1cnJlbnRUaW1lKTtcXG5cXG4gICAgICAgICAgaWYgKF90aGlzLl9wbGF5ZWQpIHtcXG4gICAgICAgICAgICBfdGhpcy5wbGF5KCk7XFxuICAgICAgICAgIH1cXG4gICAgICAgIH1cXG5cXG4gICAgICAgIGlmICghX3RoaXMuX25leHRCdWZmZXIgJiYgX3RoaXMuX2N1cnJlbnRCdWZmZXIpIHtcXG4gICAgICAgICAgX3RoaXMuX25leHRCdWZmZXIgPSBfdGhpcy5nZXRUaW1lQnVmZmVyKF90aGlzLmN1cnJlbnRUaW1lICsgX3RoaXMuX2N1cnJlbnRCdWZmZXIuZHVyYXRpb24pO1xcbiAgICAgICAgfVxcbiAgICAgICAgX3RoaXMuX2RlY29kaW5nID0gZmFsc2U7XFxuXFxuICAgICAgICBpZiAoKF90aGlzLl9wcmVEZWNvZGUubGVuZ3RoID4gMCAmJiBfdGhpcy5fcHJlRGVjb2RlW190aGlzLl9wcmVEZWNvZGUubGVuZ3RoIC0gMV0ucHRzIC0gX3RoaXMuX2xhc3RwdHMpIC8gMTAwMCA+PSBfdGhpcy5wcmVsb2FkVGltZSkge1xcbiAgICAgICAgICBfdGhpcy5kZWNvZGVBQUMoKTtcXG4gICAgICAgIH1cXG4gICAgICB9KTtcXG4gICAgfSBjYXRjaCAoZXJyKSB7XFxuICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xcbiAgICB9XFxuICB9XFxuXFxuICBvblNvdXJjZUVuZGVkKCkge1xcbiAgICBpZiAoIXRoaXMuX25leHRCdWZmZXIgfHwgIXRoaXMuX3BsYXllZCkge1xcbiAgICAgIHJldHVybjtcXG4gICAgfVxcbiAgICBsZXQgYXVkaW9Tb3VyY2UgPSB0aGlzLl9uZXh0QnVmZmVyLmRhdGE7XFxuICAgIGF1ZGlvU291cmNlLnN0YXJ0KCk7XFxuICAgIGF1ZGlvU291cmNlLmNvbm5lY3QodGhpcy5nYWluTm9kZSk7XFxuICAgIHRoaXMuX2N1cnJlbnRCdWZmZXIgPSB0aGlzLl9uZXh0QnVmZmVyO1xcbiAgICB0aGlzLl9jdXJyZW50VGltZSA9IHRoaXMuX2N1cnJlbnRCdWZmZXIudGltZTtcXG4gICAgdGhpcy5fbmV4dEJ1ZmZlciA9IHRoaXMuZ2V0VGltZUJ1ZmZlcih0aGlzLmN1cnJlbnRUaW1lKTtcXG4gICAgaWYgKHRoaXMuX2N1cnJlbnRCdWZmZXIpIHtcXG4gICAgICB0aGlzLl9uZXh0QnVmZmVyID0gdGhpcy5nZXRUaW1lQnVmZmVyKHRoaXMuY3VycmVudFRpbWUgKyB0aGlzLl9jdXJyZW50QnVmZmVyLmR1cmF0aW9uKTtcXG4gICAgfVxcbiAgfVxcblxcbiAgcGxheSgpIHtcXG4gICAgdGhpcy5fcGxheWVkID0gdHJ1ZTtcXG4gICAgaWYgKCF0aGlzLl9jdXJyZW50QnVmZmVyKSB7XFxuICAgICAgcmV0dXJuO1xcbiAgICB9XFxuICAgIGxldCBhdWRpb1NvdXJjZSA9IHRoaXMuX2N1cnJlbnRCdWZmZXIuZGF0YTtcXG4gICAgYXVkaW9Tb3VyY2UuY29ubmVjdCh0aGlzLmdhaW5Ob2RlKTtcXG4gICAgYXVkaW9Tb3VyY2Uuc3RhcnQoKTtcXG4gIH1cXG5cXG4gIGdldFRpbWVCdWZmZXIodGltZSkge1xcbiAgICBsZXQgcmV0O1xcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuc2FtcGxlcy5sZW5ndGg7IGkrKykge1xcbiAgICAgIGxldCBzYW1wbGUgPSB0aGlzLnNhbXBsZXNbaV07XFxuICAgICAgaWYgKHNhbXBsZS50aW1lIDw9IHRpbWUgJiYgc2FtcGxlLnRpbWUgKyBzYW1wbGUuZHVyYXRpb24gPiB0aW1lKSB7XFxuICAgICAgICByZXQgPSBzYW1wbGU7XFxuICAgICAgICBicmVhaztcXG4gICAgICB9XFxuICAgIH1cXG4gICAgcmV0dXJuIHJldDtcXG4gIH1cXG5cXG4gIHNldEF1ZGlvTWV0YURhdGEobWV0YSkge1xcbiAgICB0aGlzLm1ldGEgPSBtZXRhO1xcbiAgfVxcblxcbiAgc3RhdGljIGdldEFBQ0RhdGEobWV0YSwgc2FtcGxlKSB7XFxuICAgIGxldCBidWZmZXIgPSBuZXcgVWludDhBcnJheShzYW1wbGUuZGF0YS5ieXRlTGVuZ3RoICsgNyk7XFxuICAgIGxldCBhZHRzID0gQXVkaW9DdHguZ2V0QWR0cyhtZXRhLCBzYW1wbGUuZGF0YSk7XFxuICAgIGJ1ZmZlci5zZXQoYWR0cyk7XFxuICAgIGJ1ZmZlci5zZXQoc2FtcGxlLmRhdGEsIDcpO1xcbiAgICByZXR1cm4gYnVmZmVyO1xcbiAgfVxcblxcbiAgc3RhdGljIGNvbWJpbGVEYXRhKHNhbXBsZXMpIHtcXG4gICAgLy8gZ2V0IGxlbmd0aFxcbiAgICBsZXQgbGVuZ3RoID0gMDtcXG4gICAgZm9yIChsZXQgaSA9IDAsIGsgPSBzYW1wbGVzLmxlbmd0aDsgaSA8IGs7IGkrKykge1xcbiAgICAgIGxlbmd0aCArPSBzYW1wbGVzW2ldLmJ5dGVMZW5ndGg7XFxuICAgIH1cXG5cXG4gICAgbGV0IHJldCA9IG5ldyBVaW50OEFycmF5KGxlbmd0aCk7XFxuICAgIGxldCBvZmZzZXQgPSAwO1xcbiAgICAvLyBjb21iaWxlIGRhdGE7XFxuICAgIGZvciAobGV0IGkgPSAwLCBrID0gc2FtcGxlcy5sZW5ndGg7IGkgPCBrOyBpKyspIHtcXG4gICAgICByZXQuc2V0KHNhbXBsZXNbaV0sIG9mZnNldCk7XFxuICAgICAgb2Zmc2V0ICs9IHNhbXBsZXNbaV0uYnl0ZUxlbmd0aDtcXG4gICAgfVxcbiAgICByZXR1cm4gcmV0O1xcbiAgfVxcblxcbiAgc3RhdGljIGdldEFkdHMobWV0YSwgZGF0YSkge1xcbiAgICBsZXQgYWR0cyA9IG5ldyBVaW50OEFycmF5KDcpO1xcblxcbiAgICAvLyDorr7nva7lkIzmraXkvY0gMHhmZmYgMTJiaXRcXG4gICAgYWR0c1swXSA9IDB4ZmY7XFxuICAgIGFkdHNbMV0gPSAweGYwO1xcblxcbiAgICAvLyBPYmplY3QgZGF0YSAo5rKh5LuA5LmI5Lq655SoTVBFRy0y5LqG77yMSExT5ZKMRkxW5Lmf5YWo5pivTVBFRy0077yM6L+Z6YeM55u05o6lMCkgIDFiaXRcXG4gICAgLy8gTGV2ZWwgYWx3YXlzIDAwIDJiaXRcXG4gICAgLy8gQ1JDIGFsd2F5cyAxIDFiaXRcXG4gICAgYWR0c1sxXSA9IGFkdHNbMV0gfCAweDAxO1xcblxcbiAgICAvLyBwcm9maWxlIDJiaXRcXG4gICAgYWR0c1syXSA9IDB4YzAgJiBtZXRhLm9iamVjdFR5cGUgLSAxIDw8IDY7XFxuXFxuICAgIC8vc2FtcGxlRnJlcXVlbmN5SW5kZXhcXG4gICAgYWR0c1syXSA9IGFkdHNbMl0gfCAweDNjICYgbWV0YS5zYW1wbGVSYXRlSW5kZXggPDwgMjtcXG5cXG4gICAgLy9wcml2YXRlIGJpdCAwIDFiaXRcXG4gICAgLy8gY2hhbmVsIGNvbmZpZ3VyYXRpb24gM2JpdFxcbiAgICBhZHRzWzJdID0gYWR0c1syXSB8IDB4MDEgJiBtZXRhLmNoYW5uZWxDb3VudCA+PiAyO1xcbiAgICBhZHRzWzNdID0gMHhjMCAmIG1ldGEuY2hhbm5lbENvdW50IDw8IDY7XFxuXFxuICAgIC8vIG9yaWdpbmFsX2NvcHk6IDAgMWJpdFxcbiAgICAvLyBob21lOiAwIDFiaXRcXG5cXG4gICAgLy8gYWR0c192YXJpYWJsZV9oZWFkZXIoKVxcbiAgICAvLyBjb3B5cmlnaHRlZF9pZF9iaXQgMCAxYml0XFxuICAgIC8vIGNvcHlyaWdodGVkX2lkX3N0YXJ0IDAgMWJpdFxcblxcbiAgICAvLyBhYWNfZnJhbWVfbGVuZ3RoIDEzYml0O1xcbiAgICBsZXQgYWFjZnJhbWVsZW5ndGggPSBkYXRhLmJ5dGVMZW5ndGggKyA3O1xcblxcbiAgICBhZHRzWzNdID0gYWR0c1szXSB8IDB4MDMgJiBhYWNmcmFtZWxlbmd0aCA+PiAxMTtcXG4gICAgYWR0c1s0XSA9IDB4ZmYgJiBhYWNmcmFtZWxlbmd0aCA+PiAzO1xcbiAgICBhZHRzWzVdID0gMHhlMCAmIGFhY2ZyYW1lbGVuZ3RoIDw8IDU7XFxuXFxuICAgIC8vIGFkdHNfYnVmZmVyX2Z1bGxuZXNzIDB4N2ZmIDExYml0XFxuICAgIGFkdHNbNV0gPSBhZHRzWzVdIHwgMHgxZjtcXG4gICAgYWR0c1s2XSA9IDB4ZmM7XFxuXFxuICAgIC8vIG51bWJlcl9vZl9yYXdfZGF0YV9ibG9ja3NfaW5fZnJhbWUgMCAyYml0O1xcbiAgICByZXR1cm4gYWR0cztcXG4gIH1cXG59XFxuXFxuZXhwb3J0cy5kZWZhdWx0ID0gQXVkaW9DdHg7XFxuXFxuLy8jIHNvdXJjZVVSTD13ZWJwYWNrOi8veGdwbGF5ZXItZmx2Ly4uL3hncGxheWVyLXV0aWxzL3NyYy9tb2JpbGUvYXVkaW8tY29udGV4dC5qcz8nKX0sXCIuLi94Z3BsYXllci11dGlscy9zcmMvbW9iaWxlL21vYmlsZS12aWRlby5qc1wiOlxuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuLi94Z3BsYXllci11dGlscy9zcmMvbW9iaWxlL21vYmlsZS12aWRlby5qcyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBubyBzdGF0aWMgZXhwb3J0cyBmb3VuZCAqL2Z1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pe1widXNlIHN0cmljdFwiO2V2YWwoJ1xcblxcbnZhciBfdmlkZW9Db250ZXh0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi92aWRlby1jb250ZXh0ICovIFwiLi4veGdwbGF5ZXItdXRpbHMvc3JjL21vYmlsZS92aWRlby1jb250ZXh0LmpzXCIpO1xcblxcbnZhciBfdmlkZW9Db250ZXh0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3ZpZGVvQ29udGV4dCk7XFxuXFxudmFyIF9hdWRpb0NvbnRleHQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL2F1ZGlvLWNvbnRleHQgKi8gXCIuLi94Z3BsYXllci11dGlscy9zcmMvbW9iaWxlL2F1ZGlvLWNvbnRleHQuanNcIik7XFxuXFxudmFyIF9hdWRpb0NvbnRleHQyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfYXVkaW9Db250ZXh0KTtcXG5cXG52YXIgX3RpY2tlciA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vdGlja2VyICovIFwiLi4veGdwbGF5ZXItdXRpbHMvc3JjL21vYmlsZS90aWNrZXIuanNcIik7XFxuXFxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cXG5cXG4vKipcXG4gKiDpn7PnlLvlkIzmraXosIPlkozlmahcXG4gKi9cXG5jbGFzcyBBVlJlY29uY2lsZXIge1xcbiAgY29uc3RydWN0b3IocHJvcHMpIHtcXG4gICAgdGhpcy5hQ3R4ID0gcHJvcHMuYUN0eDtcXG4gICAgdGhpcy52Q3R4ID0gcHJvcHMudkN0eDtcXG5cXG4gICAgdGhpcy50aW1lb3V0SWQgPSBudWxsO1xcbiAgfVxcblxcbiAgZG9SZWNvbmNpbGUoKSB7XFxuICAgIGNvbnN0IHZDdXJUaW1lID0gdGhpcy52Q3R4LmN1cnJlbnRUaW1lIHx8IDA7XFxuICAgIGNvbnN0IGFDdXJUaW1lID0gKHRoaXMuYUN0eC5jdXJyZW50VGltZSB8fCAwKSAqIDEwMDA7XFxuXFxuICAgIGNvbnN0IGdhcCA9IHZDdXJUaW1lIC0gYUN1clRpbWU7XFxuICAgIGlmICh0aGlzLnRpbWVvdXRJZCkge1xcbiAgICAgIHJldHVybjtcXG4gICAgfVxcbiAgICBpZiAoZ2FwID4gMjAwMCkgey8vIGF1ZGlvIGRlbGF5ZWQgZm9yIG1vcmUgdGhhbiAxMDBtc1xcbiAgICAgIC8vIHRoaXMudkN0eC5wYXVzZSgpXFxuICAgICAgLy8gdGhpcy50aW1lb3V0SWQgPSBzZXRUaW1lb3V0KCgpID0+IHtcXG4gICAgICAvLyAgIHRoaXMudkN0eC5wbGF5KClcXG4gICAgICAvLyAgIHRoaXMudGltZW91dElkID0gbnVsbFxcbiAgICAgIC8vIH0sIGdhcClcXG4gICAgfSBlbHNlIGlmIChnYXAgPCAtMjAwKSB7XFxuICAgICAgdGhpcy52Q3R4LmN1cnJlbnRUaW1lID0gdGhpcy52Q3R4LmN1cnJlbnRUaW1lICsgTWF0aC5hYnMoZ2FwKTtcXG4gICAgfVxcbiAgfVxcblxcbiAgZGVzdHJveSgpIHtcXG4gICAgdGhpcy5hQ3R4ID0gbnVsbDtcXG4gICAgdGhpcy52Q3R4ID0gbnVsbDtcXG4gIH1cXG59XFxuXFxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVuZGVmXFxuY2xhc3MgTW9iaWxlVmlkZW8gZXh0ZW5kcyBIVE1MRWxlbWVudCB7XFxuICBjb25zdHJ1Y3Rvcihjb25maWcpIHtcXG4gICAgc3VwZXIoKTtcXG4gICAgbGV0IF90aGlzID0gdGhpcztcXG4gICAgdGhpcy52Q3R4ID0gbmV3IF92aWRlb0NvbnRleHQyLmRlZmF1bHQoKTtcXG4gICAgdGhpcy5hQ3R4ID0gbmV3IF9hdWRpb0NvbnRleHQyLmRlZmF1bHQoY29uZmlnKTtcXG4gICAgdGhpcy50aWNrZXIgPSBuZXcgKCgwLCBfdGlja2VyLmdldFRpY2tlcikoKSkoKTtcXG4gICAgdGhpcy5oaXN0b3J5VGltZSA9IDA7XFxuICAgIHRoaXMucmVjb25jaWxlciA9IG5ldyBBVlJlY29uY2lsZXIoe1xcbiAgICAgIHZDdHg6IHRoaXMudkN0eCxcXG4gICAgICBhQ3R4OiB0aGlzLmFDdHhcXG4gICAgfSk7XFxuXFxuICAgIHRoaXMuaW5pdCgpO1xcbiAgfVxcblxcbiAgaW5pdCgpIHtcXG4gICAgdGhpcy52Q3R4Lm9uY2FucGxheSA9ICgpID0+IHtcXG4gICAgICB0aGlzLmFwcGVuZENoaWxkKHRoaXMudkN0eC5jYW52YXMpO1xcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bmRlZlxcbiAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoXFwnY2FucGxheVxcJykpO1xcbiAgICB9O1xcblxcbiAgICB0aGlzLnRpY2tlci5zdGFydCgoKSA9PiB7XFxuICAgICAgLy8gdGhpcy5yZWNvbmNpbGVyLmRvUmVjb25jaWxlKClcXG4gICAgICBjb25zb2xlLmxvZyh0aGlzLmFDdHguY3VycmVudFRpbWUpO1xcbiAgICB9KTtcXG4gIH1cXG5cXG4gIGRlc3Ryb3koKSB7XFxuICAgIHRoaXMucmVjb25jaWxlci5kZXN0cm95KCk7XFxuICB9XFxuXFxuICBvbkRlbXV4Q29tcGxldGUodmlkZW9UcmFjaywgYXVkaW9UcmFjaykge1xcbiAgICB0aGlzLmFDdHguZGVjb2RlQXVkaW8oYXVkaW9UcmFjayk7XFxuICAgIHRoaXMudkN0eC5kZWNvZGVWaWRlbyh2aWRlb1RyYWNrKTtcXG4gIH1cXG5cXG4gIHNldEF1ZGlvTWV0YShtZXRhKSB7XFxuICAgIHRoaXMuYUN0eC5zZXRBdWRpb01ldGFEYXRhKG1ldGEpO1xcbiAgfVxcblxcbiAgc2V0VmlkZW9NZXRhKG1ldGEpIHtcXG4gICAgdGhpcy52Q3R4LnNldFZpZGVvTWV0YURhdGEobWV0YSk7XFxuICB9XFxuXFxuICBnZXQgY3VycmVudFRpbWUoKSB7fVxcblxcbiAgcGxheSgpIHtcXG4gICAgLy8gaWYgKCF0aGlzLnZDdHguKVxcbiAgICB0aGlzLnZDdHgucGxheSgpO1xcbiAgICB0aGlzLmFDdHgucGxheSgpO1xcbiAgfVxcbn1cXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW5kZWZcXG5jdXN0b21FbGVtZW50cy5kZWZpbmUoXFwnbW9iaWxlLXZpZGVvXFwnLCBNb2JpbGVWaWRlbyk7XFxuXFxuLy8jIHNvdXJjZVVSTD13ZWJwYWNrOi8veGdwbGF5ZXItZmx2Ly4uL3hncGxheWVyLXV0aWxzL3NyYy9tb2JpbGUvbW9iaWxlLXZpZGVvLmpzPycpfSxcIi4uL3hncGxheWVyLXV0aWxzL3NyYy9tb2JpbGUvc291cmNlYnVmZmVyLmpzXCI6XG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4uL3hncGxheWVyLXV0aWxzL3NyYy9tb2JpbGUvc291cmNlYnVmZmVyLmpzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIG5vIHN0YXRpYyBleHBvcnRzIGZvdW5kICovZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7XCJ1c2Ugc3RyaWN0XCI7ZXZhbChcIlxcblxcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcXFwiX19lc01vZHVsZVxcXCIsIHtcXG4gIHZhbHVlOiB0cnVlXFxufSk7XFxuY2xhc3MgU291cmNlQnVmZmVyIHtcXG4gIGNvbnN0cnVjdG9yKGNvbmZpZykge1xcbiAgICB0aGlzLmNvbmZpZyA9IE9iamVjdC5hc3NpZ24oe30sIGNvbmZpZyk7XFxuICAgIHRoaXMudHlwZSA9IHRoaXMuY29uZmlnLnR5cGU7XFxuICAgIHRoaXMuYnVmZmVyID0gW107XFxuICAgIHRoaXMuY3VycmVudEdvcCA9IHVuZGVmaW5lZDtcXG4gICAgdGhpcy5fbGFzdEdldCA9IHVuZGVmaW5lZDtcXG4gIH1cXG5cXG4gIHB1c2goZnJhbWUpIHtcXG4gICAgaWYgKHRoaXMudHlwZSA9PT0gJ3ZpZGVvJykge1xcbiAgICAgIGlmIChmcmFtZS5pc0tleWZyYW1lKSB7XFxuICAgICAgICBsZXQgY3VycmVudEdvcCA9IHtcXG4gICAgICAgICAgc2FtcGxlczogW10sXFxuICAgICAgICAgIHN0YXJ0OiBmcmFtZS5kdHMsXFxuICAgICAgICAgIGVuZDogZnJhbWUuZHRzLFxcbiAgICAgICAgICBuZXh0R29wOiB1bmRlZmluZWRcXG4gICAgICAgIH07XFxuICAgICAgICBpZiAodGhpcy5jdXJyZW50R29wKSB7XFxuICAgICAgICAgIHRoaXMuY3VycmVudEdvcC5uZXh0R29wID0gY3VycmVudEdvcDtcXG4gICAgICAgIH1cXG4gICAgICAgIHRoaXMuY3VycmVudEdvcCA9IGN1cnJlbnRHb3A7XFxuICAgICAgICB0aGlzLmJ1ZmZlci5wdXNoKHRoaXMuY3VycmVudEdvcCk7XFxuICAgICAgfVxcblxcbiAgICAgIGlmICh0aGlzLmN1cnJlbnRHb3ApIHtcXG4gICAgICAgIHRoaXMuY3VycmVudEdvcC5zYW1wbGVzLnB1c2goZnJhbWUpO1xcblxcbiAgICAgICAgaWYgKGZyYW1lLmR0cyA8IHRoaXMuY3VycmVudEdvcC5zdGFydCkge1xcbiAgICAgICAgICB0aGlzLmN1cnJlbnRHb3Auc3RhcnQgPSBmcmFtZS5kdHM7XFxuICAgICAgICB9XFxuXFxuICAgICAgICBpZiAoZnJhbWUuZHRzID4gdGhpcy5jdXJyZW50R29wLmVuZCkge1xcbiAgICAgICAgICB0aGlzLmN1cnJlbnRHb3AuZW5kID0gZnJhbWUuZHRzO1xcbiAgICAgICAgfVxcbiAgICAgIH1cXG4gICAgfVxcbiAgfVxcblxcbiAgZ2V0KHRpbWUpIHtcXG4gICAgaWYgKHRoaXMudHlwZSA9PT0gJ3ZpZGVvJykge1xcbiAgICAgIGlmICh0aGlzLmJ1ZmZlci5sZW5ndGggPCAxKSB7XFxuICAgICAgICByZXR1cm47XFxuICAgICAgfVxcblxcbiAgICAgIGlmICh0aW1lID09PSB1bmRlZmluZWQpIHtcXG4gICAgICAgIGxldCBzYW1wbGUgPSB0aGlzLl9nZXROZXh0KCk7XFxuICAgICAgICByZXR1cm4gc2FtcGxlO1xcbiAgICAgIH1cXG4gICAgfVxcbiAgfVxcblxcbiAgX2dldE5leHQoKSB7XFxuICAgIGlmICghdGhpcy5fbGFzdEdldCkge1xcbiAgICAgIGxldCBnb3AgPSB0aGlzLmJ1ZmZlclswXTtcXG4gICAgICBpZiAoZ29wLnNhbXBsZXMubGVuZ3RoIDwgMSkge1xcbiAgICAgICAgcmV0dXJuO1xcbiAgICAgIH1cXG5cXG4gICAgICB0aGlzLl9sYXN0R2V0ID0ge1xcbiAgICAgICAgZ29wLFxcbiAgICAgICAgaW5kZXg6IDBcXG4gICAgICB9O1xcbiAgICAgIHJldHVybiBnb3Auc2FtcGxlc1swXTtcXG4gICAgfSBlbHNlIHtcXG4gICAgICBsZXQgZ29wID0gdGhpcy5fbGFzdEdldC5nb3A7XFxuICAgICAgbGV0IHNhbXBsZSA9IGdvcC5zYW1wbGVzW3RoaXMuX2xhc3RHZXQuaW5kZXggKyAxXTtcXG4gICAgICBpZiAoc2FtcGxlKSB7XFxuICAgICAgICB0aGlzLl9sYXN0R2V0LmluZGV4ID0gdGhpcy5fbGFzdEdldC5pbmRleCArIDE7XFxuICAgICAgICByZXR1cm4gc2FtcGxlO1xcbiAgICAgIH0gZWxzZSB7XFxuICAgICAgICBnb3AgPSBnb3AubmV4dEdvcDtcXG4gICAgICAgIGlmICghZ29wIHx8IGdvcC5zYW1wbGVzLmxlbmd0aCA8IDEpIHtcXG4gICAgICAgICAgcmV0dXJuO1xcbiAgICAgICAgfVxcbiAgICAgICAgc2FtcGxlID0gZ29wLnNhbXBsZXNbMF07XFxuICAgICAgICB0aGlzLl9sYXN0R2V0ID0ge1xcbiAgICAgICAgICBnb3AsXFxuICAgICAgICAgIGluZGV4OiAwXFxuICAgICAgICB9O1xcbiAgICAgICAgcmV0dXJuIHNhbXBsZTtcXG4gICAgICB9XFxuICAgIH1cXG4gIH1cXG5cXG4gIHJlbW92ZShzdGFydCwgZW5kKSB7XFxuICAgIGlmICh0aGlzLmJ1ZmZlci5sZW5ndGggPCAwKSB7XFxuICAgICAgcmV0dXJuO1xcbiAgICB9XFxuXFxuICAgIGxldCBpID0gMDtcXG4gICAgbGV0IGdvcCA9IHRoaXMuYnVmZmVyWzBdO1xcbiAgICB3aGlsZSAoZ29wKSB7XFxuICAgICAgaWYgKGdvcC5lbmQgPCBlbmQgJiYgZ29wLnN0YXJ0ID49IHN0YXJ0KSB7XFxuICAgICAgICBkZWxldGUgdGhpcy5idWZmZXJbaV07XFxuICAgICAgICBnb3AgPSB0aGlzLmJ1ZmZlcltpXTtcXG4gICAgICB9IGVsc2Uge1xcbiAgICAgICAgaSArPSAxO1xcbiAgICAgICAgZ29wID0gdGhpcy5idWZmZXJbaV07XFxuICAgICAgfVxcbiAgICB9XFxuICB9XFxufVxcblxcbmV4cG9ydHMuZGVmYXVsdCA9IFNvdXJjZUJ1ZmZlcjtcXG5cXG4vLyMgc291cmNlVVJMPXdlYnBhY2s6Ly94Z3BsYXllci1mbHYvLi4veGdwbGF5ZXItdXRpbHMvc3JjL21vYmlsZS9zb3VyY2VidWZmZXIuanM/XCIpfSxcIi4uL3hncGxheWVyLXV0aWxzL3NyYy9tb2JpbGUvdGlja2VyLmpzXCI6XG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4uL3hncGxheWVyLXV0aWxzL3NyYy9tb2JpbGUvdGlja2VyLmpzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIG5vIHN0YXRpYyBleHBvcnRzIGZvdW5kICovZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7XCJ1c2Ugc3RyaWN0XCI7ZXZhbCgnXFxuXFxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XFxuICB2YWx1ZTogdHJ1ZVxcbn0pO1xcbi8qKlxcbiAqIEBhdXRob3IgZnV5dWhhb0BieXRlZGFuY2UuY29tXFxuICovXFxuXFxuY2xhc3MgVGlja2VyIHtcXG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcXG4gICAgdGhpcy5vcHRpb25zID0gT2JqZWN0LmFzc2lnbih7fSwgb3B0aW9ucyB8fCB7fSwge1xcbiAgICAgIGludGVydmFsOiAxNlxcbiAgICB9KTtcXG5cXG4gICAgdGhpcy5jYWxsYmFja3MgPSBbXTtcXG4gIH1cXG5cXG4gIHN0YXJ0KC4uLmNhbGxiYWNrcykge1xcbiAgICB0aGlzLmNhbGxiYWNrcyA9IGNhbGxiYWNrcztcXG4gIH1cXG5cXG4gIG9uVGljaygpIHtcXG4gICAgZm9yIChsZXQgaSA9IDAsIGxlbiA9IHRoaXMuY2FsbGJhY2tzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XFxuICAgICAgY29uc3QgY2FsbGJhY2sgPSB0aGlzLmNhbGxiYWNrc1tpXTtcXG4gICAgICBjYWxsYmFjaygpO1xcbiAgICB9XFxuICB9XFxuXFxuICBzZXRJbnRlcnZhbChpbnRlcnZhbCkge1xcbiAgICB0aGlzLm9wdGlvbnMuaW50ZXJ2YWwgPSBpbnRlcnZhbDtcXG4gICAgcmV0dXJuIHRoaXM7XFxuICB9XFxufVxcblxcbi8qKlxcbiAqIHRpY2tlciB1c2UgcmVxdWVzdEFuaW1hdGlvbkZyYW1lXFxuICovXFxuY2xhc3MgUmFmVGlja2VyIGV4dGVuZHMgVGlja2VyIHtcXG4gIGNvbnN0cnVjdG9yKHByb3BzKSB7XFxuICAgIHN1cGVyKHByb3BzKTtcXG4gICAgdGhpcy5wcmV2ID0gbnVsbDtcXG4gICAgdGhpcy50aW1lcklkID0gbnVsbDtcXG4gICAgdGhpcy5fc3ViVGltZXJJZCA9IG51bGw7XFxuXFxuICAgIHRoaXMuX3RpY2tGdW5jID0gUmFmVGlja2VyLmdldFRpY2tGdW5jKCk7XFxuICAgIHRoaXMudGljayA9IHRoaXMudGljay5iaW5kKHRoaXMpO1xcbiAgfVxcblxcbiAgc3RhcnQoLi4uY2FsbGJhY2tzKSB7XFxuICAgIHN1cGVyLnN0YXJ0KC4uLmNhbGxiYWNrcyk7XFxuICAgIHRoaXMudGljaygpO1xcbiAgfVxcblxcbiAgdGljayh0aW1lc3RhbXApIHtcXG4gICAgY29uc29sZS5sb2codGltZXN0YW1wKTtcXG4gICAgdGhpcy5uZXh0VGljaygpO1xcbiAgICB0aGlzLm9uVGljaygpO1xcbiAgfVxcblxcbiAgbmV4dFRpY2soKSB7XFxuICAgIGNvbnN0IHsgX3RpY2tGdW5jIH0gPSB0aGlzO1xcbiAgICB0aGlzLnRpbWVySWQgPSBfdGlja0Z1bmModGhpcy50aWNrKTtcXG4gIH1cXG5cXG4gIHN0b3AoKSB7XFxuICAgIGlmICh0aGlzLnRpbWVySWQpIHtcXG4gICAgICBjb25zdCBjYW5jZWxGdW5jID0gUmFmVGlja2VyLmdldENhbmNlbEZ1bmMoKTtcXG5cXG4gICAgICBjYW5jZWxGdW5jKHRoaXMudGltZXJJZCk7XFxuICAgIH1cXG4gIH1cXG5cXG4gIHN0YXRpYyBnZXRUaWNrRnVuYygpIHtcXG4gICAgcmV0dXJuIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUgfHwgd2luZG93LndlYmtpdFJlcXVlc3RBbmltYXRpb25GcmFtZTtcXG4gIH1cXG5cXG4gIHN0YXRpYyBnZXRDYW5jZWxGdW5jKCkge1xcbiAgICByZXR1cm4gd2luZG93LmNhbmNlbEFuaW1hdGlvbkZyYW1lIHx8IHdpbmRvdy53ZWJraXRDYW5jZWxBbmltYXRpb25GcmFtZTtcXG4gIH1cXG5cXG4gIHN0YXRpYyBpc1N1cHBvcnRlZCgpIHtcXG4gICAgcmV0dXJuIFJhZlRpY2tlci5nZXRUaWNrRnVuYygpICE9PSB1bmRlZmluZWQ7XFxuICB9XFxufVxcblxcbi8qKlxcbiAqIHVzZSBzZXRUaW1lb3V0IGZvciBicm93c2VycyB3aXRob3V0IHJhZiBzdXBwb3J0XFxuICovXFxuY2xhc3MgVGltZW91dFRpY2tlciBleHRlbmRzIFRpY2tlciB7XFxuICBjb25zdHJ1Y3Rvcihjb25maWcpIHtcXG4gICAgc3VwZXIoY29uZmlnKTtcXG4gICAgdGhpcy50aW1lb3V0SWQgPSBudWxsO1xcbiAgfVxcblxcbiAgc3RhcnQoLi4uY2FsbGJhY2tzKSB7XFxuICAgIHN1cGVyLm5leHRUaWNrKC4uLmNhbGxiYWNrcyk7XFxuICAgIHRoaXMudGltZW91dElkID0gd2luZG93LnNldEludGVydmFsKCgpID0+IHtcXG4gICAgICB0aGlzLm9uVGljaygpO1xcbiAgICB9LCB0aGlzLm9wdGlvbnMuaW50ZXJ2YWwgfHwgMTYpO1xcbiAgfVxcblxcbiAgc3RvcCgpIHtcXG4gICAgaWYgKHRoaXMudGltZW91dElkKSB7XFxuICAgICAgd2luZG93LmNsZWFySW50ZXJ2YWwodGhpcy50aW1lb3V0SWQpO1xcbiAgICB9XFxuICB9XFxuXFxufVxcblxcbi8qKlxcbiAqIOi/lOWbnlRpY2tlcuaehOmAoOWHveaVsFxcbiAqIEByZXR1cm5zIHtUaWNrZXJ9XFxuICovXFxuY29uc3QgZ2V0VGlja2VyID0gZXhwb3J0cy5nZXRUaWNrZXIgPSAoKSA9PiB7XFxuICBpZiAoUmFmVGlja2VyLmlzU3VwcG9ydGVkKCkpIHtcXG4gICAgcmV0dXJuIFJhZlRpY2tlcjtcXG4gIH0gZWxzZSB7XFxuICAgIHJldHVybiBUaW1lb3V0VGlja2VyO1xcbiAgfVxcbn07XFxuXFxuLy8jIHNvdXJjZVVSTD13ZWJwYWNrOi8veGdwbGF5ZXItZmx2Ly4uL3hncGxheWVyLXV0aWxzL3NyYy9tb2JpbGUvdGlja2VyLmpzPycpfSxcIi4uL3hncGxheWVyLXV0aWxzL3NyYy9tb2JpbGUvdmlkZW8tY29udGV4dC5qc1wiOlxuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi4veGdwbGF5ZXItdXRpbHMvc3JjL21vYmlsZS92aWRlby1jb250ZXh0LmpzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBubyBzdGF0aWMgZXhwb3J0cyBmb3VuZCAqL2Z1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pe1widXNlIHN0cmljdFwiO2V2YWwoXCJcXG5cXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXFxcIl9fZXNNb2R1bGVcXFwiLCB7XFxuICB2YWx1ZTogdHJ1ZVxcbn0pO1xcblxcbnZhciBfd2Vid29ya2lmeVdlYnBhY2sgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISB3ZWJ3b3JraWZ5LXdlYnBhY2sgKi8gXFxcIi4uL3hncGxheWVyLXV0aWxzL25vZGVfbW9kdWxlcy93ZWJ3b3JraWZ5LXdlYnBhY2svaW5kZXguanNcXFwiKTtcXG5cXG52YXIgX3dlYndvcmtpZnlXZWJwYWNrMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3dlYndvcmtpZnlXZWJwYWNrKTtcXG5cXG52YXIgX3N0cmVhbSA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4uL3dyaXRlL3N0cmVhbSAqLyBcXFwiLi4veGdwbGF5ZXItdXRpbHMvc3JjL3dyaXRlL3N0cmVhbS5qc1xcXCIpO1xcblxcbnZhciBfc3RyZWFtMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3N0cmVhbSk7XFxuXFxudmFyIF9uYWx1bml0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi4vLi4vLi4veGdwbGF5ZXItY29kZWMvc3JjL2gyNjQvbmFsdW5pdCAqLyBcXFwiLi4veGdwbGF5ZXItY29kZWMvc3JjL2gyNjQvbmFsdW5pdC9pbmRleC5qc1xcXCIpO1xcblxcbnZhciBfbmFsdW5pdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9uYWx1bml0KTtcXG5cXG52YXIgX3l1dkNhbnZhcyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4veXV2LWNhbnZhcyAqLyBcXFwiLi4veGdwbGF5ZXItdXRpbHMvc3JjL21vYmlsZS95dXYtY2FudmFzLmpzXFxcIik7XFxuXFxudmFyIF95dXZDYW52YXMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfeXV2Q2FudmFzKTtcXG5cXG52YXIgX3NvdXJjZWJ1ZmZlciA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vc291cmNlYnVmZmVyICovIFxcXCIuLi94Z3BsYXllci11dGlscy9zcmMvbW9iaWxlL3NvdXJjZWJ1ZmZlci5qc1xcXCIpO1xcblxcbnZhciBfc291cmNlYnVmZmVyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3NvdXJjZWJ1ZmZlcik7XFxuXFxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cXG5cXG5jbGFzcyBWaWRlb0NhbnZhcyB7XFxuICBjb25zdHJ1Y3Rvcihjb25maWcpIHtcXG4gICAgdGhpcy5jb25maWcgPSBPYmplY3QuYXNzaWduKHt9LCBjb25maWcpO1xcbiAgICB0aGlzLmNhbnZhcyA9IHRoaXMuY29uZmlnLmNhbnZhcyA/IHRoaXMuY29uZmlnLmNhbnZhcyA6IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xcbiAgICB0aGlzLnNvdXJjZSA9IG5ldyBfc291cmNlYnVmZmVyMi5kZWZhdWx0KHsgdHlwZTogJ3ZpZGVvJyB9KTtcXG4gICAgdGhpcy5wcmVsb2FkVGltZSA9IHRoaXMuY29uZmlnLnByZWxvYWRUaW1lIHx8IDM7XFxuICAgIHRoaXMub25jYW5wbGF5ID0gdW5kZWZpbmVkO1xcbiAgICB0aGlzLm9uRmlyc3RGcmFtZSA9IHVuZGVmaW5lZDtcXG4gICAgdGhpcy5tZXRhID0gdW5kZWZpbmVkO1xcbiAgICB0aGlzLnJlYWR5U3RhdHVzID0gMDtcXG4gICAgdGhpcy5wYXVzZWQgPSB0cnVlO1xcbiAgICB0aGlzLmNvdW50ID0gMDtcXG4gICAgdGhpcy5jdXJyZW50VGltZSA9IDA7XFxuICAgIHRoaXMubGFzdFBsYXllZCA9IDA7XFxuXFxuICAgIHRoaXMuX2RlY29kZXJJbml0ZWQgPSBmYWxzZTtcXG4gICAgdGhpcy5fYXZjY3B1c2hlZCA9IGZhbHNlO1xcbiAgICB0aGlzLl9kZWNvZGVkRnJhbWVzID0ge307XFxuICAgIHRoaXMuX2xhc3RTYW1wbGVEdHMgPSB1bmRlZmluZWQ7XFxuICAgIHRoaXMuX2Jhc2VEdHMgPSB1bmRlZmluZWQ7XFxuICAgIHRoaXMuaW5pdFdhc21Xb3JrZXIoKTtcXG4gIH1cXG5cXG4gIGluaXRXYXNtV29ya2VyKCkge1xcbiAgICBsZXQgX3RoaXMgPSB0aGlzO1xcbiAgICB0aGlzLndhc213b3JrZXIgPSAoMCwgX3dlYndvcmtpZnlXZWJwYWNrMi5kZWZhdWx0KSgvKnJlcXVpcmUucmVzb2x2ZSovKC8qISAuL3dvcmtlci5qcyAqLyBcXFwiLi4veGdwbGF5ZXItdXRpbHMvc3JjL21vYmlsZS93b3JrZXIuanNcXFwiKSk7XFxuICAgIHRoaXMud2FzbXdvcmtlci5wb3N0TWVzc2FnZSh7XFxuICAgICAgbXNnOiAnaW5pdCdcXG4gICAgfSk7XFxuICAgIHRoaXMud2FzbXdvcmtlci5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgbXNnID0+IHtcXG4gICAgICBzd2l0Y2ggKG1zZy5kYXRhLm1zZykge1xcbiAgICAgICAgY2FzZSAnREVDT0RFUl9SRUFEWSc6XFxuICAgICAgICAgIF90aGlzLl9kZWNvZGVySW5pdGVkID0gdHJ1ZTtcXG4gICAgICAgICAgYnJlYWs7XFxuICAgICAgICBjYXNlICdERUNPREVEJzpcXG4gICAgICAgICAgdGhpcy5fb25EZWNvZGVkKG1zZy5kYXRhKTtcXG4gICAgICAgICAgYnJlYWs7XFxuICAgICAgfVxcbiAgICB9KTtcXG4gIH1cXG5cXG4gIHNldFZpZGVvTWV0YURhdGEobWV0YSkge1xcbiAgICB0aGlzLm1ldGEgPSBtZXRhO1xcbiAgICBpZiAoIXRoaXMuX2RlY29kZXJJbml0ZWQpIHtcXG4gICAgICByZXR1cm47XFxuICAgIH1cXG4gICAgdGhpcy5fYXZjY3B1c2hlZCA9IHRydWU7XFxuICAgIGxldCBkYXRhID0gbmV3IFVpbnQ4QXJyYXkobWV0YS5zcHMuYnl0ZUxlbmd0aCArIDQpO1xcbiAgICBkYXRhLnNldChbMCwgMCwgMCwgMV0pO1xcbiAgICBkYXRhLnNldChtZXRhLnNwcywgNCk7XFxuICAgIHRoaXMud2FzbXdvcmtlci5wb3N0TWVzc2FnZSh7XFxuICAgICAgbXNnOiAnZGVjb2RlJyxcXG4gICAgICBkYXRhOiBkYXRhXFxuICAgIH0pO1xcblxcbiAgICBkYXRhID0gbmV3IFVpbnQ4QXJyYXkobWV0YS5wcHMuYnl0ZUxlbmd0aCArIDQpO1xcbiAgICBkYXRhLnNldChbMCwgMCwgMCwgMV0pO1xcbiAgICBkYXRhLnNldChtZXRhLnBwcywgNCk7XFxuICAgIHRoaXMud2FzbXdvcmtlci5wb3N0TWVzc2FnZSh7XFxuICAgICAgbXNnOiAnZGVjb2RlJyxcXG4gICAgICBkYXRhOiBkYXRhXFxuICAgIH0pO1xcblxcbiAgICBpZiAoIXRoaXMueXV2Q2FudmFzKSB7XFxuICAgICAgbGV0IGNvbmZpZyA9IE9iamVjdC5hc3NpZ24oeyBtZXRhLCBjYW52YXM6IHRoaXMuY2FudmFzIH0sIHRoaXMuY29uZmlnKTtcXG4gICAgICB0aGlzLnl1dkNhbnZhcyA9IG5ldyBfeXV2Q2FudmFzMi5kZWZhdWx0KGNvbmZpZyk7XFxuICAgIH1cXG4gICAgdGhpcy5yZWFkeVN0YXR1cyA9IDE7XFxuICB9XFxuXFxuICBkZWNvZGVWaWRlbyh2aWRlb1RyYWNrKSB7XFxuICAgIGlmICghdGhpcy5fZGVjb2RlckluaXRlZCkge1xcbiAgICAgIHJldHVybjtcXG4gICAgfVxcblxcbiAgICBpZiAoIXRoaXMuX2F2Y2NwdXNoZWQpIHtcXG4gICAgICB0aGlzLnNldFZpZGVvTWV0YURhdGEodGhpcy5tZXRhKTtcXG4gICAgfVxcbiAgICBsZXQgeyBzYW1wbGVzIH0gPSB2aWRlb1RyYWNrO1xcbiAgICBsZXQgc2FtcGxlID0gc2FtcGxlcy5zaGlmdCgpO1xcblxcbiAgICB3aGlsZSAoc2FtcGxlKSB7XFxuICAgICAgaWYgKCF0aGlzLl9iYXNlRHRzKSB7XFxuICAgICAgICB0aGlzLl9iYXNlRHRzID0gc2FtcGxlLmR0cztcXG4gICAgICB9XFxuICAgICAgdGhpcy5zb3VyY2UucHVzaChzYW1wbGUpO1xcbiAgICAgIHNhbXBsZSA9IHNhbXBsZXMuc2hpZnQoKTtcXG4gICAgfVxcblxcbiAgICB0aGlzLl9wcmVsb2FkKCk7XFxuICB9XFxuXFxuICBfcHJlbG9hZCgpIHtcXG4gICAgaWYgKCF0aGlzLl9sYXN0U2FtcGxlRHRzIHx8IHRoaXMuX2xhc3RTYW1wbGVEdHMgLSB0aGlzLl9iYXNlRHRzIDwgdGhpcy5jdXJyZW50VGltZSArIHRoaXMucHJlbG9hZFRpbWUgKiAxMDAwKSB7XFxuICAgICAgbGV0IHNhbXBsZSA9IHRoaXMuc291cmNlLmdldCgpO1xcbiAgICAgIGlmIChzYW1wbGUpIHtcXG4gICAgICAgIHRoaXMuX2xhc3RTYW1wbGVEdHMgPSBzYW1wbGUuZHRzO1xcbiAgICAgICAgdGhpcy5fYW5hbHlzZU5hbChzYW1wbGUpO1xcbiAgICAgIH1cXG5cXG4gICAgICB3aGlsZSAoc2FtcGxlICYmIHRoaXMuX2xhc3RTYW1wbGVEdHMgLSB0aGlzLl9iYXNlRHRzIDwgdGhpcy5jdXJyZW50VGltZSArIHRoaXMucHJlbG9hZFRpbWUgKiAxMDAwKSB7XFxuICAgICAgICBzYW1wbGUgPSB0aGlzLnNvdXJjZS5nZXQoKTtcXG4gICAgICAgIGlmIChzYW1wbGUpIHtcXG4gICAgICAgICAgdGhpcy5fYW5hbHlzZU5hbChzYW1wbGUpO1xcbiAgICAgICAgICB0aGlzLl9sYXN0U2FtcGxlRHRzID0gc2FtcGxlLmR0cztcXG4gICAgICAgIH1cXG4gICAgICB9XFxuICAgIH1cXG4gIH1cXG5cXG4gIF9hbmFseXNlTmFsKHNhbXBsZSkge1xcbiAgICBsZXQgbmFscyA9IF9uYWx1bml0Mi5kZWZhdWx0LmdldEF2Y2NOYWxzKG5ldyBfc3RyZWFtMi5kZWZhdWx0KHNhbXBsZS5kYXRhLmJ1ZmZlcikpO1xcblxcbiAgICBsZXQgbGVuZ3RoID0gMDtcXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBuYWxzLmxlbmd0aDsgaSsrKSB7XFxuICAgICAgbGV0IG5hbCA9IG5hbHNbaV07XFxuICAgICAgbGVuZ3RoICs9IG5hbC5ib2R5LmJ5dGVMZW5ndGggKyA0O1xcbiAgICB9XFxuICAgIGxldCBvZmZzZXQgPSAwO1xcbiAgICBsZXQgZGF0YSA9IG5ldyBVaW50OEFycmF5KGxlbmd0aCk7XFxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbmFscy5sZW5ndGg7IGkrKykge1xcbiAgICAgIGxldCBuYWwgPSBuYWxzW2ldO1xcbiAgICAgIGRhdGEuc2V0KFswLCAwLCAwLCAxXSwgb2Zmc2V0KTtcXG4gICAgICBvZmZzZXQgKz0gNDtcXG4gICAgICBkYXRhLnNldChuZXcgVWludDhBcnJheShuYWwuYm9keSksIG9mZnNldCk7XFxuICAgICAgb2Zmc2V0ICs9IG5hbC5ib2R5LmJ5dGVMZW5ndGg7XFxuICAgIH1cXG4gICAgdGhpcy53YXNtd29ya2VyLnBvc3RNZXNzYWdlKHtcXG4gICAgICBtc2c6ICdkZWNvZGUnLFxcbiAgICAgIGRhdGE6IGRhdGEsXFxuICAgICAgaW5mbzoge1xcbiAgICAgICAgZHRzOiBzYW1wbGUuZHRzLFxcbiAgICAgICAgcHRzOiBzYW1wbGUucHRzID8gc2FtcGxlLnB0cyA6IHNhbXBsZS5kdHMgKyBzYW1wbGUuY3RzLFxcbiAgICAgICAga2V5OiBzYW1wbGUuaXNLZXlmcmFtZVxcbiAgICAgIH1cXG4gICAgfSk7XFxuICB9XFxuXFxuICBfb25EZWNvZGVkKGRhdGEpIHtcXG4gICAgbGV0IHsgZHRzIH0gPSBkYXRhLmluZm87XFxuICAgIHRoaXMuX2RlY29kZWRGcmFtZXNbZHRzXSA9IGRhdGE7XFxuICB9XFxuXFxuICBwbGF5KCkge1xcbiAgICB0aGlzLnBhdXNlZCA9IGZhbHNlO1xcbiAgICB0aGlzLl9vblRpbWVyKCk7XFxuICB9XFxuXFxuICBfb25UaW1lcigpIHtcXG4gICAgbGV0IHJlbmRlckNvc3QgPSAwO1xcbiAgICBjb25zdCByZW5kZXJTdGFydCA9IERhdGUubm93KCk7XFxuICAgIGlmICh0aGlzLnBhdXNlZCkge1xcbiAgICAgIHJldHVybjtcXG4gICAgfVxcbiAgICBsZXQgbmV4dFRpbWUgPSAxMDAwIC8gNjA7XFxuICAgIGlmICh0aGlzLm1ldGEpIHtcXG4gICAgICBpZiAodGhpcy5tZXRhLmZyYW1lUmF0ZSAmJiB0aGlzLm1ldGEuZnJhbWVSYXRlLmZpeGVkICYmIHRoaXMubWV0YS5mcmFtZVJhdGUuZnBzKSB7XFxuICAgICAgICBuZXh0VGltZSA9IE1hdGguY2VpbCgxMDAwIC8gdGhpcy5tZXRhLmZyYW1lUmF0ZS5mcHMpO1xcbiAgICAgIH1cXG4gICAgICBsZXQgZnJhbWVUaW1lcyA9IE9iamVjdC5rZXlzKHRoaXMuX2RlY29kZWRGcmFtZXMpO1xcbiAgICAgIGlmIChmcmFtZVRpbWVzLmxlbmd0aCA+IDApIHtcXG4gICAgICAgIHRoaXMuY3VycmVudFRpbWUgKz0gbmV4dFRpbWU7XFxuICAgICAgICBsZXQgZnJhbWVUaW1lID0gLTE7XFxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGZyYW1lVGltZXMubGVuZ3RoICYmIGZyYW1lVGltZXNbaV0gLSB0aGlzLl9iYXNlRHRzIDw9IHRoaXMuY3VycmVudFRpbWU7IGkrKykge1xcbiAgICAgICAgICBmcmFtZVRpbWUgPSBmcmFtZVRpbWVzW2ldO1xcbiAgICAgICAgICBicmVhaztcXG4gICAgICAgIH1cXG4gICAgICAgIGxldCBmcmFtZSA9IHRoaXMuX2RlY29kZWRGcmFtZXNbZnJhbWVUaW1lXTtcXG4gICAgICAgIGlmIChmcmFtZSkge1xcbiAgICAgICAgICBpZiAodGhpcy5vbmNhbnBsYXkgJiYgdGhpcy5yZWFkeVN0YXR1cyA8IDQpIHtcXG4gICAgICAgICAgICB0aGlzLm9uY2FucGxheSgpO1xcbiAgICAgICAgICAgIHRoaXMucmVhZHlTdGF0dXMgPSA0O1xcbiAgICAgICAgICB9XFxuICAgICAgICAgIGNvbnNvbGUubG9nKCd2aWRlbyB0aW1lJywgdGhpcy5jdXJyZW50VGltZSk7XFxuICAgICAgICAgIHRoaXMueXV2Q2FudmFzLnJlbmRlcihmcmFtZS5idWZmZXIsIGZyYW1lLndpZHRoLCBmcmFtZS5oZWlnaHQpO1xcbiAgICAgICAgICByZW5kZXJDb3N0ID0gRGF0ZS5ub3coKSAtIHJlbmRlclN0YXJ0O1xcbiAgICAgICAgICBkZWxldGUgdGhpcy5fZGVjb2RlZEZyYW1lc1tmcmFtZVRpbWVdO1xcbiAgICAgICAgfVxcbiAgICAgIH1cXG4gICAgfVxcbiAgICB0aGlzLl9jbGVhbkJ1ZmZlcigpO1xcbiAgICBzZXRUaW1lb3V0KHRoaXMuX29uVGltZXIuYmluZCh0aGlzKSwgbmV4dFRpbWUgLSByZW5kZXJDb3N0KTtcXG4gIH1cXG5cXG4gIF9jbGVhbkJ1ZmZlcigpIHtcXG4gICAgdGhpcy5zb3VyY2UucmVtb3ZlKDAsIHRoaXMuY3VycmVudFRpbWUpO1xcbiAgfVxcbn1cXG5leHBvcnRzLmRlZmF1bHQgPSBWaWRlb0NhbnZhcztcXG5cXG4vLyMgc291cmNlVVJMPXdlYnBhY2s6Ly94Z3BsYXllci1mbHYvLi4veGdwbGF5ZXItdXRpbHMvc3JjL21vYmlsZS92aWRlby1jb250ZXh0LmpzP1wiKX0sXCIuLi94Z3BsYXllci11dGlscy9zcmMvbW9iaWxlL3dvcmtlci5qc1wiOlxuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuLi94Z3BsYXllci11dGlscy9zcmMvbW9iaWxlL3dvcmtlci5qcyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBubyBzdGF0aWMgZXhwb3J0cyBmb3VuZCAqL2Z1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pe1widXNlIHN0cmljdFwiO2V2YWwoXCJcXG5cXG5jb25zdCBNQVhfU1RSRUFNX0JVRkZFUl9MRU5HVEggPSAxMDI0ICogMTAyNDtcXG52YXIgRGVjb2RlciA9IGZ1bmN0aW9uIChzZWxmKSB7XFxuICB0aGlzLmluaXRlZCA9IGZhbHNlO1xcbiAgdGhpcy5zZWxmID0gc2VsZjtcXG4gIHRoaXMuaW5mb2xpc3QgPSB7fTtcXG4gIHNlbGYucGFyX2Jyb2Fkd2F5T25Ccm9hZHdheUluaXRlZCA9IHRoaXMuYnJvYWR3YXlPbkJyb2Fkd2F5SW5pdGVkLmJpbmQodGhpcyk7XFxuICBzZWxmLnBhcl9icm9hZHdheU9uUGljdHVyZURlY29kZWQgPSB0aGlzLmJyb2Fkd2F5T25QaWN0dXJlRGVjb2RlZC5iaW5kKHRoaXMpO1xcbn07XFxuXFxuRGVjb2Rlci5wcm90b3R5cGUudG9VOEFycmF5ID0gZnVuY3Rpb24gKHB0ciwgbGVuZ3RoKSB7XFxuICByZXR1cm4gdGhpcy5zZWxmLkhFQVBVOC5zdWJhcnJheShwdHIsIHB0ciArIGxlbmd0aCk7XFxufTtcXG5cXG5EZWNvZGVyLnByb3RvdHlwZS5pbml0ID0gZnVuY3Rpb24gKCkge1xcbiAgTW9kdWxlLl9icm9hZHdheUluaXQoKTtcXG4gIHRoaXMuc3RyZWFtQnVmZmVyID0gdGhpcy50b1U4QXJyYXkoTW9kdWxlLl9icm9hZHdheUNyZWF0ZVN0cmVhbShNQVhfU1RSRUFNX0JVRkZFUl9MRU5HVEgpLCBNQVhfU1RSRUFNX0JVRkZFUl9MRU5HVEgpO1xcbn07XFxuXFxuRGVjb2Rlci5wcm90b3R5cGUuYnJvYWR3YXlPblBpY3R1cmVEZWNvZGVkID0gZnVuY3Rpb24gKG9mZnNldCwgd2lkdGgsIGhlaWdodCwgaW5mb2lkKSB7XFxuICBsZXQgaW5mbyA9IE9iamVjdC5hc3NpZ24oe30sIHRoaXMuaW5mb2xpc3RbaW5mb2lkXSk7XFxuICBsZXQgZGF0YSA9IHRoaXMudG9VOEFycmF5KG9mZnNldCwgd2lkdGggKiBoZWlnaHQgKiAzIC8gMik7XFxuICB0aGlzLmluZm9saXN0W2luZm9pZF0gPSBudWxsO1xcbiAgbGV0IGRhdGV0ZW1wID0gbmV3IFVpbnQ4QXJyYXkoZGF0YS5sZW5ndGgpO1xcbiAgZGF0ZXRlbXAuc2V0KGRhdGEpO1xcbiAgbGV0IGJ1ZmZlciA9IGRhdGV0ZW1wLmJ1ZmZlcjtcXG4gIHRoaXMuc2VsZi5wb3N0TWVzc2FnZSh7XFxuICAgIG1zZzogJ0RFQ09ERUQnLFxcbiAgICB3aWR0aCxcXG4gICAgaGVpZ2h0LFxcbiAgICBpbmZvLFxcbiAgICBidWZmZXJcXG4gIH0sIFtidWZmZXJdKTtcXG59O1xcblxcbkRlY29kZXIucHJvdG90eXBlLmJyb2Fkd2F5T25Ccm9hZHdheUluaXRlZCA9IGZ1bmN0aW9uICgpIHtcXG4gIHRoaXMuaW5pdGVkID0gdHJ1ZTtcXG4gIHRoaXMuc2VsZi5wb3N0TWVzc2FnZSh7IG1zZzogJ0RFQ09ERVJfUkVBRFknIH0pO1xcbn07XFxuXFxuRGVjb2Rlci5wcm90b3R5cGUuZGVjb2RlID0gZnVuY3Rpb24gKGRhdGEsIGluZm8pIHtcXG4gIGxldCB0aW1lID0gcGFyc2VJbnQobmV3IERhdGUoKS5nZXRUaW1lKCkpO1xcbiAgbGV0IGluZm9pZCA9IHRpbWUgLSBNYXRoLmZsb29yKHRpbWUgLyAxMGU5KSAqIDEwZTk7XFxuICB0aGlzLmluZm9saXN0W2luZm9pZF0gPSBpbmZvO1xcbiAgdGhpcy5zdHJlYW1CdWZmZXIuc2V0KGRhdGEpO1xcbiAgTW9kdWxlLl9icm9hZHdheVBsYXlTdHJlYW0oZGF0YS5sZW5ndGgsIGluZm9pZCk7XFxufTtcXG5cXG52YXIgZGVjb2RlcjtcXG5cXG5mdW5jdGlvbiBvblBvc3RSdW4oKSB7XFxuICBkZWNvZGVyID0gbmV3IERlY29kZXIodGhpcyk7XFxuICBkZWNvZGVyLmluaXQoKTtcXG59XFxuXFxuZnVuY3Rpb24gaW5pdCgpIHtcXG4gIHNlbGYuaW1wb3J0U2NyaXB0cygnaHR0cDovLzEwLjk1LjQ1LjIwMjo5MDkwL2V4YW1wbGVzL2Zsdi9kZWNvZGVyLmpzJyk7XFxuICBhZGRPblBvc3RSdW4ob25Qb3N0UnVuLmJpbmQoc2VsZikpO1xcbn1cXG5cXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChzZWxmKSB7XFxuICBzZWxmLmFkZEV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCBmdW5jdGlvbiAoZSkge1xcbiAgICB2YXIgZGF0YSA9IGUuZGF0YTtcXG4gICAgaWYgKCFkYXRhLm1zZykge1xcbiAgICAgIHNlbGYucG9zdE1lc3NhZ2Uoe1xcbiAgICAgICAgbXNnOiAnRVJST1I6aW52YWxpZCBtZXNzYWdlJ1xcbiAgICAgIH0pO1xcbiAgICB9IGVsc2Uge1xcbiAgICAgIHN3aXRjaCAoZGF0YS5tc2cpIHtcXG4gICAgICAgIGNhc2UgJ2luaXQnOlxcbiAgICAgICAgICBpbml0KHNlbGYpO1xcbiAgICAgICAgICBicmVhaztcXG4gICAgICAgIGNhc2UgJ2RlY29kZSc6XFxuICAgICAgICAgIGRlY29kZXIuZGVjb2RlKGRhdGEuZGF0YSwgZGF0YS5pbmZvKTtcXG4gICAgICAgICAgYnJlYWs7XFxuICAgICAgICBkZWZhdWx0OlxcbiAgICAgICAgICBicmVhaztcXG4gICAgICB9XFxuICAgIH1cXG4gIH0sIGZhbHNlKTtcXG59O1xcblxcbi8vIyBzb3VyY2VVUkw9d2VicGFjazovL3hncGxheWVyLWZsdi8uLi94Z3BsYXllci11dGlscy9zcmMvbW9iaWxlL3dvcmtlci5qcz9cIil9LFwiLi4veGdwbGF5ZXItdXRpbHMvc3JjL21vYmlsZS95dXYtY2FudmFzLmpzXCI6XG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuLi94Z3BsYXllci11dGlscy9zcmMvbW9iaWxlL3l1di1jYW52YXMuanMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIG5vIHN0YXRpYyBleHBvcnRzIGZvdW5kICovZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7XCJ1c2Ugc3RyaWN0XCI7ZXZhbChcIlxcblxcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcXFwiX19lc01vZHVsZVxcXCIsIHtcXG4gIHZhbHVlOiB0cnVlXFxufSk7XFxuY2xhc3MgWVVWQ2FudmFzIHtcXG4gIGNvbnN0cnVjdG9yKGNvbmZpZ3MpIHtcXG4gICAgdGhpcy5jb25maWdzID0gT2JqZWN0LmFzc2lnbih7fSwgY29uZmlncyk7XFxuICAgIHRoaXMuY2FudmFzID0gdGhpcy5jb25maWdzLmNhbnZhcztcXG4gICAgdGhpcy5tZXRhID0gT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5jb25maWdzLm1ldGEpO1xcbiAgICB0aGlzLmNocm9tYSA9IHRoaXMubWV0YS5jaHJvbWFGb3JtYXQ7XFxuICAgIHRoaXMuaGVpZ2h0ID0gdGhpcy5tZXRhLnByZXNlbnRIZWlnaHQ7XFxuICAgIHRoaXMud2lkdGggPSB0aGlzLm1ldGEucHJlc2VudFdpZHRoO1xcbiAgICB0aGlzLmNhbnZhcy53aWR0aCA9IHRoaXMud2lkdGg7XFxuICAgIHRoaXMuY2FudmFzLmhlaWdodCA9IHRoaXMuaGVpZ2h0O1xcbiAgICB0aGlzLmNhbnZhcy5zdHlsZS53aWR0aCA9ICcxMDAlJztcXG4gICAgdGhpcy5jYW52YXMuc3R5bGUuaGVpZ2h0ID0gJzEwMCUnO1xcbiAgICB0aGlzLl9pbml0Q29udGV4dEdMKCk7XFxuICAgIGlmICh0aGlzLmNvbnRleHRHTCkge1xcbiAgICAgIHRoaXMuX2luaXRQcm9ncmFtKCk7XFxuICAgICAgdGhpcy5faW5pdEJ1ZmZlcnMoKTtcXG4gICAgICB0aGlzLl9pbml0VGV4dHVyZXMoKTtcXG4gICAgfTtcXG4gIH1cXG5cXG4gIF9pbml0Q29udGV4dEdMKCkge1xcbiAgICB2YXIgY2FudmFzID0gdGhpcy5jYW52YXM7XFxuICAgIHZhciBnbCA9IG51bGw7XFxuXFxuICAgIHZhciB2YWxpZENvbnRleHROYW1lcyA9IFsnd2ViZ2wnLCAnZXhwZXJpbWVudGFsLXdlYmdsJywgJ21vei13ZWJnbCcsICd3ZWJraXQtM2QnXTtcXG4gICAgdmFyIG5hbWVJbmRleCA9IDA7XFxuXFxuICAgIHdoaWxlICghZ2wgJiYgbmFtZUluZGV4IDwgdmFsaWRDb250ZXh0TmFtZXMubGVuZ3RoKSB7XFxuICAgICAgdmFyIGNvbnRleHROYW1lID0gdmFsaWRDb250ZXh0TmFtZXNbbmFtZUluZGV4XTtcXG5cXG4gICAgICB0cnkge1xcbiAgICAgICAgaWYgKHRoaXMuY29udGV4dE9wdGlvbnMpIHtcXG4gICAgICAgICAgZ2wgPSBjYW52YXMuZ2V0Q29udGV4dChjb250ZXh0TmFtZSwgdGhpcy5jb250ZXh0T3B0aW9ucyk7XFxuICAgICAgICB9IGVsc2Uge1xcbiAgICAgICAgICBnbCA9IGNhbnZhcy5nZXRDb250ZXh0KGNvbnRleHROYW1lKTtcXG4gICAgICAgIH07XFxuICAgICAgfSBjYXRjaCAoZSkge1xcbiAgICAgICAgZ2wgPSBudWxsO1xcbiAgICAgIH1cXG5cXG4gICAgICBpZiAoIWdsIHx8IHR5cGVvZiBnbC5nZXRQYXJhbWV0ZXIgIT09ICdmdW5jdGlvbicpIHtcXG4gICAgICAgIGdsID0gbnVsbDtcXG4gICAgICB9XFxuXFxuICAgICAgKytuYW1lSW5kZXg7XFxuICAgIH07XFxuXFxuICAgIHRoaXMuY29udGV4dEdMID0gZ2w7XFxuICB9XFxuXFxuICBfaW5pdFByb2dyYW0oKSB7XFxuICAgIHZhciBnbCA9IHRoaXMuY29udGV4dEdMO1xcblxcbiAgICAvLyB2ZXJ0ZXggc2hhZGVyIGlzIHRoZSBzYW1lIGZvciBhbGwgdHlwZXNcXG4gICAgdmFyIHZlcnRleFNoYWRlclNjcmlwdDtcXG4gICAgdmFyIGZyYWdtZW50U2hhZGVyU2NyaXB0O1xcbiAgICBpZiAodGhpcy5jaHJvbWEgPT09IDQyMCkge1xcbiAgICAgIHZlcnRleFNoYWRlclNjcmlwdCA9IFsnYXR0cmlidXRlIHZlYzQgdmVydGV4UG9zOycsICdhdHRyaWJ1dGUgdmVjNCB0ZXh0dXJlUG9zOycsICdhdHRyaWJ1dGUgdmVjNCB1VGV4dHVyZVBvczsnLCAnYXR0cmlidXRlIHZlYzQgdlRleHR1cmVQb3M7JywgJ3ZhcnlpbmcgdmVjMiB0ZXh0dXJlQ29vcmQ7JywgJ3ZhcnlpbmcgdmVjMiB1VGV4dHVyZUNvb3JkOycsICd2YXJ5aW5nIHZlYzIgdlRleHR1cmVDb29yZDsnLCAndm9pZCBtYWluKCknLCAneycsICcgIGdsX1Bvc2l0aW9uID0gdmVydGV4UG9zOycsICcgIHRleHR1cmVDb29yZCA9IHRleHR1cmVQb3MueHk7JywgJyAgdVRleHR1cmVDb29yZCA9IHVUZXh0dXJlUG9zLnh5OycsICcgIHZUZXh0dXJlQ29vcmQgPSB2VGV4dHVyZVBvcy54eTsnLCAnfSddLmpvaW4oJ1xcXFxuJyk7XFxuXFxuICAgICAgZnJhZ21lbnRTaGFkZXJTY3JpcHQgPSBbJ3ByZWNpc2lvbiBoaWdocCBmbG9hdDsnLCAndmFyeWluZyBoaWdocCB2ZWMyIHRleHR1cmVDb29yZDsnLCAndmFyeWluZyBoaWdocCB2ZWMyIHVUZXh0dXJlQ29vcmQ7JywgJ3ZhcnlpbmcgaGlnaHAgdmVjMiB2VGV4dHVyZUNvb3JkOycsICd1bmlmb3JtIHNhbXBsZXIyRCB5U2FtcGxlcjsnLCAndW5pZm9ybSBzYW1wbGVyMkQgdVNhbXBsZXI7JywgJ3VuaWZvcm0gc2FtcGxlcjJEIHZTYW1wbGVyOycsICd1bmlmb3JtIG1hdDQgWVVWMlJHQjsnLCAndm9pZCBtYWluKHZvaWQpIHsnLCAnICBoaWdocCBmbG9hdCB5ID0gdGV4dHVyZTJEKHlTYW1wbGVyLCAgdGV4dHVyZUNvb3JkKS5yOycsICcgIGhpZ2hwIGZsb2F0IHUgPSB0ZXh0dXJlMkQodVNhbXBsZXIsICB1VGV4dHVyZUNvb3JkKS5yOycsICcgIGhpZ2hwIGZsb2F0IHYgPSB0ZXh0dXJlMkQodlNhbXBsZXIsICB2VGV4dHVyZUNvb3JkKS5yOycsICcgIGdsX0ZyYWdDb2xvciA9IHZlYzQoeSwgdSwgdiwgMSkgKiBZVVYyUkdCOycsICd9J10uam9pbignXFxcXG4nKTtcXG4gICAgfSBlbHNlIGlmICh0aGlzLmNocm9tYSA9PT0gNDIyKSB7XFxuICAgICAgdmVydGV4U2hhZGVyU2NyaXB0ID0gWydhdHRyaWJ1dGUgdmVjNCB2ZXJ0ZXhQb3M7JywgJ2F0dHJpYnV0ZSB2ZWM0IHRleHR1cmVQb3M7JywgJ3ZhcnlpbmcgdmVjMiB0ZXh0dXJlQ29vcmQ7JywgJ3ZvaWQgbWFpbigpJywgJ3snLCAnICBnbF9Qb3NpdGlvbiA9IHZlcnRleFBvczsnLCAnICB0ZXh0dXJlQ29vcmQgPSB0ZXh0dXJlUG9zLnh5OycsICd9J10uam9pbignXFxcXG4nKTtcXG5cXG4gICAgICBmcmFnbWVudFNoYWRlclNjcmlwdCA9IFsncHJlY2lzaW9uIGhpZ2hwIGZsb2F0OycsICd2YXJ5aW5nIGhpZ2hwIHZlYzIgdGV4dHVyZUNvb3JkOycsICd1bmlmb3JtIHNhbXBsZXIyRCBzYW1wbGVyOycsICd1bmlmb3JtIGhpZ2hwIHZlYzIgcmVzb2x1dGlvbjsnLCAndW5pZm9ybSBtYXQ0IFlVVjJSR0I7JywgJ3ZvaWQgbWFpbih2b2lkKSB7JywgJyAgaGlnaHAgZmxvYXQgdGV4UGl4WCA9IDEuMCAvIHJlc29sdXRpb24ueDsnLCAnICBoaWdocCBmbG9hdCBsb2dQaXhYID0gMi4wIC8gcmVzb2x1dGlvbi54OycsIC8vIGhhbGYgdGhlIHJlc29sdXRpb24gb2YgdGhlIHRleHR1cmVcXG4gICAgICAnICBoaWdocCBmbG9hdCBsb2dIYWxmUGl4WCA9IDQuMCAvIHJlc29sdXRpb24ueDsnLCAvLyBoYWxmIG9mIHRoZSBsb2dpY2FsIHJlc29sdXRpb24gc28gZXZlcnkgNHRoIHBpeGVsXFxuICAgICAgJyAgaGlnaHAgZmxvYXQgc3RlcHMgPSBmbG9vcih0ZXh0dXJlQ29vcmQueCAvIGxvZ1BpeFgpOycsICcgIGhpZ2hwIGZsb2F0IHV2U3RlcHMgPSBmbG9vcih0ZXh0dXJlQ29vcmQueCAvIGxvZ0hhbGZQaXhYKTsnLCAnICBoaWdocCBmbG9hdCB5ID0gdGV4dHVyZTJEKHNhbXBsZXIsIHZlYzIoKGxvZ1BpeFggKiBzdGVwcykgKyB0ZXhQaXhYLCB0ZXh0dXJlQ29vcmQueSkpLnI7JywgJyAgaGlnaHAgZmxvYXQgdSA9IHRleHR1cmUyRChzYW1wbGVyLCB2ZWMyKChsb2dIYWxmUGl4WCAqIHV2U3RlcHMpLCB0ZXh0dXJlQ29vcmQueSkpLnI7JywgJyAgaGlnaHAgZmxvYXQgdiA9IHRleHR1cmUyRChzYW1wbGVyLCB2ZWMyKChsb2dIYWxmUGl4WCAqIHV2U3RlcHMpICsgdGV4UGl4WCArIHRleFBpeFgsIHRleHR1cmVDb29yZC55KSkucjsnLFxcblxcbiAgICAgIC8vICcgIGhpZ2hwIGZsb2F0IHkgPSB0ZXh0dXJlMkQoc2FtcGxlciwgIHRleHR1cmVDb29yZCkucjsnLFxcbiAgICAgIC8vICcgIGdsX0ZyYWdDb2xvciA9IHZlYzQoeSwgdSwgdiwgMSkgKiBZVVYyUkdCOycsXFxuICAgICAgJyAgZ2xfRnJhZ0NvbG9yID0gdmVjNCh5LCB1LCB2LCAxLjApICogWVVWMlJHQjsnLCAnfSddLmpvaW4oJ1xcXFxuJyk7XFxuICAgIH07XFxuXFxuICAgIHZhciBZVVYyUkdCID0gWzEuMTY0MzgsIDAuMDAwMDAsIDEuNTk2MDMsIC0wLjg3MDc5LCAxLjE2NDM4LCAtMC4zOTE3NiwgLTAuODEyOTcsIDAuNTI5NTksIDEuMTY0MzgsIDIuMDE3MjMsIDAuMDAwMDAsIC0xLjA4MTM5LCAwLCAwLCAwLCAxXTtcXG4gICAgdmFyIHZlcnRleFNoYWRlciA9IGdsLmNyZWF0ZVNoYWRlcihnbC5WRVJURVhfU0hBREVSKTtcXG4gICAgZ2wuc2hhZGVyU291cmNlKHZlcnRleFNoYWRlciwgdmVydGV4U2hhZGVyU2NyaXB0KTtcXG4gICAgZ2wuY29tcGlsZVNoYWRlcih2ZXJ0ZXhTaGFkZXIpO1xcbiAgICBpZiAoIWdsLmdldFNoYWRlclBhcmFtZXRlcih2ZXJ0ZXhTaGFkZXIsIGdsLkNPTVBJTEVfU1RBVFVTKSkge1xcbiAgICAgIGNvbnNvbGUubG9nKCdWZXJ0ZXggc2hhZGVyIGZhaWxlZCB0byBjb21waWxlOiAnICsgZ2wuZ2V0U2hhZGVySW5mb0xvZyh2ZXJ0ZXhTaGFkZXIpKTtcXG4gICAgfVxcblxcbiAgICB2YXIgZnJhZ21lbnRTaGFkZXIgPSBnbC5jcmVhdGVTaGFkZXIoZ2wuRlJBR01FTlRfU0hBREVSKTtcXG4gICAgZ2wuc2hhZGVyU291cmNlKGZyYWdtZW50U2hhZGVyLCBmcmFnbWVudFNoYWRlclNjcmlwdCk7XFxuICAgIGdsLmNvbXBpbGVTaGFkZXIoZnJhZ21lbnRTaGFkZXIpO1xcbiAgICBpZiAoIWdsLmdldFNoYWRlclBhcmFtZXRlcihmcmFnbWVudFNoYWRlciwgZ2wuQ09NUElMRV9TVEFUVVMpKSB7XFxuICAgICAgY29uc29sZS5sb2coJ0ZyYWdtZW50IHNoYWRlciBmYWlsZWQgdG8gY29tcGlsZTogJyArIGdsLmdldFNoYWRlckluZm9Mb2coZnJhZ21lbnRTaGFkZXIpKTtcXG4gICAgfVxcblxcbiAgICB2YXIgcHJvZ3JhbSA9IGdsLmNyZWF0ZVByb2dyYW0oKTtcXG4gICAgZ2wuYXR0YWNoU2hhZGVyKHByb2dyYW0sIHZlcnRleFNoYWRlcik7XFxuICAgIGdsLmF0dGFjaFNoYWRlcihwcm9ncmFtLCBmcmFnbWVudFNoYWRlcik7XFxuICAgIGdsLmxpbmtQcm9ncmFtKHByb2dyYW0pO1xcbiAgICBpZiAoIWdsLmdldFByb2dyYW1QYXJhbWV0ZXIocHJvZ3JhbSwgZ2wuTElOS19TVEFUVVMpKSB7XFxuICAgICAgY29uc29sZS5sb2coJ1Byb2dyYW0gZmFpbGVkIHRvIGNvbXBpbGU6ICcgKyBnbC5nZXRQcm9ncmFtSW5mb0xvZyhwcm9ncmFtKSk7XFxuICAgIH1cXG5cXG4gICAgZ2wudXNlUHJvZ3JhbShwcm9ncmFtKTtcXG5cXG4gICAgdmFyIFlVVjJSR0JSZWYgPSBnbC5nZXRVbmlmb3JtTG9jYXRpb24ocHJvZ3JhbSwgJ1lVVjJSR0InKTtcXG4gICAgZ2wudW5pZm9ybU1hdHJpeDRmdihZVVYyUkdCUmVmLCBmYWxzZSwgWVVWMlJHQik7XFxuXFxuICAgIHRoaXMuc2hhZGVyUHJvZ3JhbSA9IHByb2dyYW07XFxuICB9XFxuXFxuICBfaW5pdEJ1ZmZlcnMoKSB7XFxuICAgIHZhciBnbCA9IHRoaXMuY29udGV4dEdMO1xcbiAgICB2YXIgcHJvZ3JhbSA9IHRoaXMuc2hhZGVyUHJvZ3JhbTtcXG5cXG4gICAgdmFyIHZlcnRleFBvc0J1ZmZlciA9IGdsLmNyZWF0ZUJ1ZmZlcigpO1xcbiAgICBnbC5iaW5kQnVmZmVyKGdsLkFSUkFZX0JVRkZFUiwgdmVydGV4UG9zQnVmZmVyKTtcXG4gICAgZ2wuYnVmZmVyRGF0YShnbC5BUlJBWV9CVUZGRVIsIG5ldyBGbG9hdDMyQXJyYXkoWzEsIDEsIC0xLCAxLCAxLCAtMSwgLTEsIC0xXSksIGdsLlNUQVRJQ19EUkFXKTtcXG5cXG4gICAgdmFyIHZlcnRleFBvc1JlZiA9IGdsLmdldEF0dHJpYkxvY2F0aW9uKHByb2dyYW0sICd2ZXJ0ZXhQb3MnKTtcXG4gICAgZ2wuZW5hYmxlVmVydGV4QXR0cmliQXJyYXkodmVydGV4UG9zUmVmKTtcXG4gICAgZ2wudmVydGV4QXR0cmliUG9pbnRlcih2ZXJ0ZXhQb3NSZWYsIDIsIGdsLkZMT0FULCBmYWxzZSwgMCwgMCk7XFxuXFxuICAgIHZhciB0ZXh0dXJlUG9zQnVmZmVyID0gZ2wuY3JlYXRlQnVmZmVyKCk7XFxuICAgIGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCB0ZXh0dXJlUG9zQnVmZmVyKTtcXG4gICAgZ2wuYnVmZmVyRGF0YShnbC5BUlJBWV9CVUZGRVIsIG5ldyBGbG9hdDMyQXJyYXkoWzEsIDAsIDAsIDAsIDEsIDEsIDAsIDFdKSwgZ2wuU1RBVElDX0RSQVcpO1xcblxcbiAgICB2YXIgdGV4dHVyZVBvc1JlZiA9IGdsLmdldEF0dHJpYkxvY2F0aW9uKHByb2dyYW0sICd0ZXh0dXJlUG9zJyk7XFxuICAgIGdsLmVuYWJsZVZlcnRleEF0dHJpYkFycmF5KHRleHR1cmVQb3NSZWYpO1xcbiAgICBnbC52ZXJ0ZXhBdHRyaWJQb2ludGVyKHRleHR1cmVQb3NSZWYsIDIsIGdsLkZMT0FULCBmYWxzZSwgMCwgMCk7XFxuXFxuICAgIHRoaXMudGV4dHVyZVBvc0J1ZmZlciA9IHRleHR1cmVQb3NCdWZmZXI7XFxuXFxuICAgIGlmICh0aGlzLmNocm9tYSA9PT0gNDIwKSB7XFxuICAgICAgdmFyIHVUZXh0dXJlUG9zQnVmZmVyID0gZ2wuY3JlYXRlQnVmZmVyKCk7XFxuICAgICAgZ2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZGRVIsIHVUZXh0dXJlUG9zQnVmZmVyKTtcXG4gICAgICBnbC5idWZmZXJEYXRhKGdsLkFSUkFZX0JVRkZFUiwgbmV3IEZsb2F0MzJBcnJheShbMSwgMCwgMCwgMCwgMSwgMSwgMCwgMV0pLCBnbC5TVEFUSUNfRFJBVyk7XFxuXFxuICAgICAgdmFyIHVUZXh0dXJlUG9zUmVmID0gZ2wuZ2V0QXR0cmliTG9jYXRpb24ocHJvZ3JhbSwgJ3VUZXh0dXJlUG9zJyk7XFxuICAgICAgZ2wuZW5hYmxlVmVydGV4QXR0cmliQXJyYXkodVRleHR1cmVQb3NSZWYpO1xcbiAgICAgIGdsLnZlcnRleEF0dHJpYlBvaW50ZXIodVRleHR1cmVQb3NSZWYsIDIsIGdsLkZMT0FULCBmYWxzZSwgMCwgMCk7XFxuXFxuICAgICAgdGhpcy51VGV4dHVyZVBvc0J1ZmZlciA9IHVUZXh0dXJlUG9zQnVmZmVyO1xcblxcbiAgICAgIHZhciB2VGV4dHVyZVBvc0J1ZmZlciA9IGdsLmNyZWF0ZUJ1ZmZlcigpO1xcbiAgICAgIGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCB2VGV4dHVyZVBvc0J1ZmZlcik7XFxuICAgICAgZ2wuYnVmZmVyRGF0YShnbC5BUlJBWV9CVUZGRVIsIG5ldyBGbG9hdDMyQXJyYXkoWzEsIDAsIDAsIDAsIDEsIDEsIDAsIDFdKSwgZ2wuU1RBVElDX0RSQVcpO1xcblxcbiAgICAgIHZhciB2VGV4dHVyZVBvc1JlZiA9IGdsLmdldEF0dHJpYkxvY2F0aW9uKHByb2dyYW0sICd2VGV4dHVyZVBvcycpO1xcbiAgICAgIGdsLmVuYWJsZVZlcnRleEF0dHJpYkFycmF5KHZUZXh0dXJlUG9zUmVmKTtcXG4gICAgICBnbC52ZXJ0ZXhBdHRyaWJQb2ludGVyKHZUZXh0dXJlUG9zUmVmLCAyLCBnbC5GTE9BVCwgZmFsc2UsIDAsIDApO1xcblxcbiAgICAgIHRoaXMudlRleHR1cmVQb3NCdWZmZXIgPSB2VGV4dHVyZVBvc0J1ZmZlcjtcXG4gICAgfTtcXG4gIH1cXG5cXG4gIF9pbml0VGV4dHVyZXMoKSB7XFxuICAgIHZhciBnbCA9IHRoaXMuY29udGV4dEdMO1xcbiAgICB2YXIgcHJvZ3JhbSA9IHRoaXMuc2hhZGVyUHJvZ3JhbTtcXG5cXG4gICAgaWYgKHRoaXMuY2hyb21hID09PSA0MjApIHtcXG4gICAgICB2YXIgeVRleHR1cmVSZWYgPSB0aGlzLl9pbml0VGV4dHVyZSgpO1xcbiAgICAgIHZhciB5U2FtcGxlclJlZiA9IGdsLmdldFVuaWZvcm1Mb2NhdGlvbihwcm9ncmFtLCAneVNhbXBsZXInKTtcXG4gICAgICBnbC51bmlmb3JtMWkoeVNhbXBsZXJSZWYsIDApO1xcbiAgICAgIHRoaXMueVRleHR1cmVSZWYgPSB5VGV4dHVyZVJlZjtcXG5cXG4gICAgICB2YXIgdVRleHR1cmVSZWYgPSB0aGlzLl9pbml0VGV4dHVyZSgpO1xcbiAgICAgIHZhciB1U2FtcGxlclJlZiA9IGdsLmdldFVuaWZvcm1Mb2NhdGlvbihwcm9ncmFtLCAndVNhbXBsZXInKTtcXG4gICAgICBnbC51bmlmb3JtMWkodVNhbXBsZXJSZWYsIDEpO1xcbiAgICAgIHRoaXMudVRleHR1cmVSZWYgPSB1VGV4dHVyZVJlZjtcXG5cXG4gICAgICB2YXIgdlRleHR1cmVSZWYgPSB0aGlzLl9pbml0VGV4dHVyZSgpO1xcbiAgICAgIHZhciB2U2FtcGxlclJlZiA9IGdsLmdldFVuaWZvcm1Mb2NhdGlvbihwcm9ncmFtLCAndlNhbXBsZXInKTtcXG4gICAgICBnbC51bmlmb3JtMWkodlNhbXBsZXJSZWYsIDIpO1xcbiAgICAgIHRoaXMudlRleHR1cmVSZWYgPSB2VGV4dHVyZVJlZjtcXG4gICAgfSBlbHNlIGlmICh0aGlzLmNocm9tYSA9PT0gNDIyKSB7XFxuICAgICAgLy8gb25seSBvbmUgdGV4dHVyZSBmb3IgNDIyXFxuICAgICAgdmFyIHRleHR1cmVSZWYgPSB0aGlzLl9pbml0VGV4dHVyZSgpO1xcbiAgICAgIHZhciBzYW1wbGVyUmVmID0gZ2wuZ2V0VW5pZm9ybUxvY2F0aW9uKHByb2dyYW0sICdzYW1wbGVyJyk7XFxuICAgICAgZ2wudW5pZm9ybTFpKHNhbXBsZXJSZWYsIDApO1xcbiAgICAgIHRoaXMudGV4dHVyZVJlZiA9IHRleHR1cmVSZWY7XFxuICAgIH07XFxuICB9XFxuXFxuICBfaW5pdFRleHR1cmUoKSB7XFxuICAgIHZhciBnbCA9IHRoaXMuY29udGV4dEdMO1xcblxcbiAgICB2YXIgdGV4dHVyZVJlZiA9IGdsLmNyZWF0ZVRleHR1cmUoKTtcXG4gICAgZ2wuYmluZFRleHR1cmUoZ2wuVEVYVFVSRV8yRCwgdGV4dHVyZVJlZik7XFxuICAgIGdsLnRleFBhcmFtZXRlcmkoZ2wuVEVYVFVSRV8yRCwgZ2wuVEVYVFVSRV9NQUdfRklMVEVSLCBnbC5ORUFSRVNUKTtcXG4gICAgZ2wudGV4UGFyYW1ldGVyaShnbC5URVhUVVJFXzJELCBnbC5URVhUVVJFX01JTl9GSUxURVIsIGdsLk5FQVJFU1QpO1xcbiAgICBnbC50ZXhQYXJhbWV0ZXJpKGdsLlRFWFRVUkVfMkQsIGdsLlRFWFRVUkVfV1JBUF9TLCBnbC5DTEFNUF9UT19FREdFKTtcXG4gICAgZ2wudGV4UGFyYW1ldGVyaShnbC5URVhUVVJFXzJELCBnbC5URVhUVVJFX1dSQVBfVCwgZ2wuQ0xBTVBfVE9fRURHRSk7XFxuICAgIGdsLmJpbmRUZXh0dXJlKGdsLlRFWFRVUkVfMkQsIG51bGwpO1xcblxcbiAgICByZXR1cm4gdGV4dHVyZVJlZjtcXG4gIH1cXG5cXG4gIF9kcmF3UGljdHVyZUdMKGRhdGEsIHdpZHRoLCBoZWlnaHQpIHtcXG4gICAgaWYgKHRoaXMuY2hyb21hID09PSA0MjApIHtcXG4gICAgICBsZXQgbldpZHRoID0gd2lkdGg7XFxuICAgICAgdmFyIHlsZW4gPSB3aWR0aCAqIGhlaWdodDtcXG4gICAgICB2YXIgdXZsZW4gPSB3aWR0aCAvIDIgKiAoaGVpZ2h0IC8gMik7XFxuICAgICAgZGF0YSA9IG5ldyBVaW50OEFycmF5KGRhdGEpO1xcbiAgICAgIGxldCByZW5kZXJEYXRhID0ge1xcbiAgICAgICAgeURhdGE6IGRhdGEuc3ViYXJyYXkoMCwgeWxlbiksXFxuICAgICAgICB1RGF0YTogZGF0YS5zdWJhcnJheSh5bGVuLCB5bGVuICsgdXZsZW4pLFxcbiAgICAgICAgdkRhdGE6IGRhdGEuc3ViYXJyYXkoeWxlbiArIHV2bGVuLCB5bGVuICsgdXZsZW4gKyB1dmxlbilcXG4gICAgICB9O1xcbiAgICAgIGlmICh3aWR0aCAlIDQgPiAwKSB7XFxuICAgICAgICBuV2lkdGggPSB3aWR0aCArIDQgLSB3aWR0aCAlIDQ7XFxuICAgICAgICBsZXQgeUFycmF5ID0gbmV3IFVpbnQ4QXJyYXkobldpZHRoICogaGVpZ2h0KTtcXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaGVpZ2h0OyBpKyspIHtcXG4gICAgICAgICAgeUFycmF5LnNldChyZW5kZXJEYXRhLnlEYXRhLnN1YmFycmF5KGkgKiB3aWR0aCwgKGkgKyAxKSAqIHdpZHRoKSwgaSAqIG5XaWR0aCk7XFxuICAgICAgICB9XFxuICAgICAgICByZW5kZXJEYXRhLnlEYXRhID0geUFycmF5O1xcbiAgICAgIH1cXG5cXG4gICAgICBpZiAod2lkdGggLyAyICUgNCA+IDApIHtcXG4gICAgICAgIG5XaWR0aCA9IHdpZHRoIC8gMiArIDQgLSB3aWR0aCAvIDIgJSA0O1xcbiAgICAgICAgbGV0IHVBcnJheSA9IG5ldyBVaW50OEFycmF5KG5XaWR0aCAqIGhlaWdodCAvIDIpO1xcbiAgICAgICAgbGV0IHZBcnJheSA9IG5ldyBVaW50OEFycmF5KG5XaWR0aCAqIGhlaWdodCAvIDIpO1xcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBoZWlnaHQgLyAyOyBpKyspIHtcXG4gICAgICAgICAgdUFycmF5LnNldChyZW5kZXJEYXRhLnVEYXRhLnN1YmFycmF5KGkgKiB3aWR0aCAvIDIsIChpICsgMSkgKiB3aWR0aCAvIDIpLCBpICogbldpZHRoKTtcXG4gICAgICAgICAgdkFycmF5LnNldChyZW5kZXJEYXRhLnZEYXRhLnN1YmFycmF5KGkgKiB3aWR0aCAvIDIsIChpICsgMSkgKiB3aWR0aCAvIDIpLCBpICogbldpZHRoKTtcXG4gICAgICAgIH1cXG4gICAgICAgIHJlbmRlckRhdGEudURhdGEgPSB1QXJyYXk7XFxuICAgICAgICByZW5kZXJEYXRhLnZEYXRhID0gdkFycmF5O1xcbiAgICAgIH1cXG4gICAgICB0aGlzLl9kcmF3UGljdHVyZUdMNDIwKHJlbmRlckRhdGEsIHdpZHRoLCBoZWlnaHQpO1xcbiAgICB9IGVsc2UgaWYgKHRoaXMuY2hyb21hID09PSA0MjIpIHtcXG4gICAgICBkYXRhID0gbmV3IFVpbnQ4QXJyYXkoZGF0YSk7XFxuICAgICAgdGhpcy5fZHJhd1BpY3R1cmVHTDQyMih3aWR0aCwgaGVpZ2h0LCBkYXRhKTtcXG4gICAgfVxcbiAgfVxcblxcbiAgX2RyYXdQaWN0dXJlR0w0MjIoZGF0YSwgd2lkdGgsIGhlaWdodCkge1xcbiAgICB2YXIgZ2wgPSB0aGlzLmNvbnRleHRHTDtcXG4gICAgdmFyIHRleHR1cmVQb3NCdWZmZXIgPSB0aGlzLnRleHR1cmVQb3NCdWZmZXI7XFxuXFxuICAgIHZhciB0ZXh0dXJlUmVmID0gdGhpcy50ZXh0dXJlUmVmO1xcblxcbiAgICB2YXIgZGF0YVBlclJvdyA9IHdpZHRoICogMjtcXG4gICAgdmFyIHJvd0NudCA9IGhlaWdodDtcXG5cXG4gICAgZ2wudmlld3BvcnQoMCwgMCwgd2lkdGgsIGhlaWdodCk7XFxuXFxuICAgIHZhciB0VG9wID0gMDtcXG4gICAgdmFyIHRMZWZ0ID0gMDtcXG4gICAgdmFyIHRCb3R0b20gPSBoZWlnaHQgLyByb3dDbnQ7XFxuICAgIHZhciB0UmlnaHQgPSB3aWR0aCAvIChkYXRhUGVyUm93IC8gMik7XFxuICAgIHZhciB0ZXh0dXJlUG9zVmFsdWVzID0gbmV3IEZsb2F0MzJBcnJheShbdFJpZ2h0LCB0VG9wLCB0TGVmdCwgdFRvcCwgdFJpZ2h0LCB0Qm90dG9tLCB0TGVmdCwgdEJvdHRvbV0pO1xcblxcbiAgICBnbC5iaW5kQnVmZmVyKGdsLkFSUkFZX0JVRkZFUiwgdGV4dHVyZVBvc0J1ZmZlcik7XFxuICAgIGdsLmJ1ZmZlckRhdGEoZ2wuQVJSQVlfQlVGRkVSLCB0ZXh0dXJlUG9zVmFsdWVzLCBnbC5EWU5BTUlDX0RSQVcpO1xcblxcbiAgICBnbC51bmlmb3JtMmYoZ2wuZ2V0VW5pZm9ybUxvY2F0aW9uKHRoaXMuc2hhZGVyUHJvZ3JhbSwgJ3Jlc29sdXRpb24nKSwgZGF0YVBlclJvdywgaGVpZ2h0KTtcXG5cXG4gICAgZ2wuYWN0aXZlVGV4dHVyZShnbC5URVhUVVJFMCk7XFxuICAgIGdsLmJpbmRUZXh0dXJlKGdsLlRFWFRVUkVfMkQsIHRleHR1cmVSZWYpO1xcbiAgICBnbC50ZXhJbWFnZTJEKGdsLlRFWFRVUkVfMkQsIDAsIGdsLkxVTUlOQU5DRSwgZGF0YVBlclJvdywgcm93Q250LCAwLCBnbC5MVU1JTkFOQ0UsIGdsLlVOU0lHTkVEX0JZVEUsIGRhdGEpO1xcblxcbiAgICBnbC5kcmF3QXJyYXlzKGdsLlRSSUFOR0xFX1NUUklQLCAwLCA0KTtcXG4gIH1cXG5cXG4gIF9kcmF3UGljdHVyZUdMNDIwKGRhdGEsIHdpZHRoLCBoZWlnaHQpIHtcXG4gICAgdmFyIGdsID0gdGhpcy5jb250ZXh0R0w7XFxuICAgIHZhciB0ZXh0dXJlUG9zQnVmZmVyID0gdGhpcy50ZXh0dXJlUG9zQnVmZmVyO1xcbiAgICB2YXIgdVRleHR1cmVQb3NCdWZmZXIgPSB0aGlzLnVUZXh0dXJlUG9zQnVmZmVyO1xcbiAgICB2YXIgdlRleHR1cmVQb3NCdWZmZXIgPSB0aGlzLnZUZXh0dXJlUG9zQnVmZmVyO1xcblxcbiAgICB2YXIgeVRleHR1cmVSZWYgPSB0aGlzLnlUZXh0dXJlUmVmO1xcbiAgICB2YXIgdVRleHR1cmVSZWYgPSB0aGlzLnVUZXh0dXJlUmVmO1xcbiAgICB2YXIgdlRleHR1cmVSZWYgPSB0aGlzLnZUZXh0dXJlUmVmO1xcblxcbiAgICB2YXIgeURhdGEgPSBkYXRhLnlEYXRhO1xcbiAgICB2YXIgdURhdGEgPSBkYXRhLnVEYXRhO1xcbiAgICB2YXIgdkRhdGEgPSBkYXRhLnZEYXRhO1xcblxcbiAgICB2YXIgeURhdGFQZXJSb3cgPSB3aWR0aDtcXG4gICAgdmFyIHlSb3dDbnQgPSBoZWlnaHQ7XFxuXFxuICAgIHZhciB1RGF0YVBlclJvdyA9IHdpZHRoIC8gMjtcXG4gICAgdmFyIHVSb3dDbnQgPSBoZWlnaHQgLyAyO1xcblxcbiAgICB2YXIgdkRhdGFQZXJSb3cgPSB1RGF0YVBlclJvdztcXG4gICAgdmFyIHZSb3dDbnQgPSB1Um93Q250O1xcbiAgICBnbC52aWV3cG9ydCgwLCAwLCB0aGlzLndpZHRoLCB0aGlzLmhlaWdodCk7XFxuXFxuICAgIHZhciB0VG9wID0gMDtcXG4gICAgdmFyIHRMZWZ0ID0gMDtcXG4gICAgdmFyIHRCb3R0b20gPSBoZWlnaHQgLyB5Um93Q250O1xcbiAgICB2YXIgdFJpZ2h0ID0gd2lkdGggLyB5RGF0YVBlclJvdztcXG4gICAgdmFyIHRleHR1cmVQb3NWYWx1ZXMgPSBuZXcgRmxvYXQzMkFycmF5KFt0UmlnaHQsIHRUb3AsIHRMZWZ0LCB0VG9wLCB0UmlnaHQsIHRCb3R0b20sIHRMZWZ0LCB0Qm90dG9tXSk7XFxuXFxuICAgIGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCB0ZXh0dXJlUG9zQnVmZmVyKTtcXG4gICAgZ2wuYnVmZmVyRGF0YShnbC5BUlJBWV9CVUZGRVIsIHRleHR1cmVQb3NWYWx1ZXMsIGdsLkRZTkFNSUNfRFJBVyk7XFxuXFxuICAgIHRCb3R0b20gPSBoZWlnaHQgLyAyIC8gdVJvd0NudDtcXG4gICAgdFJpZ2h0ID0gd2lkdGggLyAyIC8gdURhdGFQZXJSb3c7XFxuICAgIHZhciB1VGV4dHVyZVBvc1ZhbHVlcyA9IG5ldyBGbG9hdDMyQXJyYXkoW3RSaWdodCwgdFRvcCwgdExlZnQsIHRUb3AsIHRSaWdodCwgdEJvdHRvbSwgdExlZnQsIHRCb3R0b21dKTtcXG5cXG4gICAgZ2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZGRVIsIHVUZXh0dXJlUG9zQnVmZmVyKTtcXG4gICAgZ2wuYnVmZmVyRGF0YShnbC5BUlJBWV9CVUZGRVIsIHVUZXh0dXJlUG9zVmFsdWVzLCBnbC5EWU5BTUlDX0RSQVcpO1xcblxcbiAgICB0Qm90dG9tID0gaGVpZ2h0IC8gMiAvIHZSb3dDbnQ7XFxuICAgIHRSaWdodCA9IHdpZHRoIC8gMiAvIHZEYXRhUGVyUm93O1xcblxcbiAgICB2YXIgdlRleHR1cmVQb3NWYWx1ZXMgPSBuZXcgRmxvYXQzMkFycmF5KFt0UmlnaHQsIHRUb3AsIHRMZWZ0LCB0VG9wLCB0UmlnaHQsIHRCb3R0b20sIHRMZWZ0LCB0Qm90dG9tXSk7XFxuXFxuICAgIGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCB2VGV4dHVyZVBvc0J1ZmZlcik7XFxuICAgIGdsLmJ1ZmZlckRhdGEoZ2wuQVJSQVlfQlVGRkVSLCB2VGV4dHVyZVBvc1ZhbHVlcywgZ2wuRFlOQU1JQ19EUkFXKTtcXG5cXG4gICAgZ2wuYWN0aXZlVGV4dHVyZShnbC5URVhUVVJFMCk7XFxuICAgIGdsLmJpbmRUZXh0dXJlKGdsLlRFWFRVUkVfMkQsIHlUZXh0dXJlUmVmKTtcXG4gICAgZ2wudGV4SW1hZ2UyRChnbC5URVhUVVJFXzJELCAwLCBnbC5MVU1JTkFOQ0UsIHlEYXRhUGVyUm93LCB5Um93Q250LCAwLCBnbC5MVU1JTkFOQ0UsIGdsLlVOU0lHTkVEX0JZVEUsIHlEYXRhKTtcXG5cXG4gICAgZ2wuYWN0aXZlVGV4dHVyZShnbC5URVhUVVJFMSk7XFxuICAgIGdsLmJpbmRUZXh0dXJlKGdsLlRFWFRVUkVfMkQsIHVUZXh0dXJlUmVmKTtcXG4gICAgZ2wudGV4SW1hZ2UyRChnbC5URVhUVVJFXzJELCAwLCBnbC5MVU1JTkFOQ0UsIHVEYXRhUGVyUm93LCB1Um93Q250LCAwLCBnbC5MVU1JTkFOQ0UsIGdsLlVOU0lHTkVEX0JZVEUsIHVEYXRhKTtcXG5cXG4gICAgZ2wuYWN0aXZlVGV4dHVyZShnbC5URVhUVVJFMik7XFxuICAgIGdsLmJpbmRUZXh0dXJlKGdsLlRFWFRVUkVfMkQsIHZUZXh0dXJlUmVmKTtcXG4gICAgZ2wudGV4SW1hZ2UyRChnbC5URVhUVVJFXzJELCAwLCBnbC5MVU1JTkFOQ0UsIHZEYXRhUGVyUm93LCB2Um93Q250LCAwLCBnbC5MVU1JTkFOQ0UsIGdsLlVOU0lHTkVEX0JZVEUsIHZEYXRhKTtcXG5cXG4gICAgZ2wuZHJhd0FycmF5cyhnbC5UUklBTkdMRV9TVFJJUCwgMCwgNCk7XFxuICB9XFxuXFxuICBfZHJhd1BpY3R1cmVSR0IoZGF0YSkge31cXG5cXG4gIHJlbmRlcihkYXRhLCB3aWR0aCwgaGVpZ2h0KSB7XFxuICAgIHZhciBnbCA9IHRoaXMuY29udGV4dEdMO1xcbiAgICBpZiAoZ2wpIHtcXG4gICAgICB0aGlzLl9kcmF3UGljdHVyZUdMKGRhdGEsIHdpZHRoLCBoZWlnaHQpO1xcbiAgICB9IGVsc2Uge1xcbiAgICAgIHRoaXMuX2RyYXdQaWN0dXJlUkdCKGRhdGEpO1xcbiAgICB9XFxuICB9XFxufVxcblxcbmV4cG9ydHMuZGVmYXVsdCA9IFlVVkNhbnZhcztcXG5cXG4vLyMgc291cmNlVVJMPXdlYnBhY2s6Ly94Z3BsYXllci1mbHYvLi4veGdwbGF5ZXItdXRpbHMvc3JjL21vYmlsZS95dXYtY2FudmFzLmpzP1wiKX0sXCIuLi94Z3BsYXllci11dGlscy9zcmMvbW9kZWxzL21lZGlhLWluZm8uanNcIjpcbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4uL3hncGxheWVyLXV0aWxzL3NyYy9tb2RlbHMvbWVkaWEtaW5mby5qcyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgbm8gc3RhdGljIGV4cG9ydHMgZm91bmQgKi9mdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXtcInVzZSBzdHJpY3RcIjtldmFsKCdcXG5cXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcXG4gIHZhbHVlOiB0cnVlXFxufSk7XFxuY29uc3QgaXNPYmplY3RGaWxsZWQgPSBvYmogPT4ge1xcbiAgZm9yIChsZXQga2V5IGluIG9iaikge1xcbiAgICBpZiAob2JqLmhhc093blByb3BlcnR5KGtleSkpIHtcXG4gICAgICBpZiAob2JqW2tleV0gPT09IG51bGwpIHtcXG4gICAgICAgIHJldHVybiBmYWxzZTtcXG4gICAgICB9XFxuICAgIH1cXG4gIH1cXG4gIHJldHVybiB0cnVlO1xcbn07XFxuXFxuY2xhc3MgTWVkaWFJbmZvIHtcXG4gIGNvbnN0cnVjdG9yKCkge1xcbiAgICB0aGlzLm1pbWVUeXBlID0gbnVsbDtcXG4gICAgdGhpcy5kdXJhdGlvbiA9IG51bGw7XFxuXFxuICAgIHRoaXMuaGFzVmlkZW8gPSBudWxsO1xcbiAgICB0aGlzLnZpZGVvID0ge1xcbiAgICAgIGNvZGVjOiBudWxsLFxcbiAgICAgIHdpZHRoOiBudWxsLFxcbiAgICAgIGhlaWdodDogbnVsbCxcXG4gICAgICBwcm9maWxlOiBudWxsLFxcbiAgICAgIGxldmVsOiBudWxsLFxcbiAgICAgIGZyYW1lUmF0ZToge1xcbiAgICAgICAgZml4ZWQ6IHRydWUsXFxuICAgICAgICBmcHM6IDI1LFxcbiAgICAgICAgZnBzX251bTogMjUwMDAsXFxuICAgICAgICBmcHNfZGVuOiAxMDAwXFxuICAgICAgfSxcXG4gICAgICBjaHJvbWFGb3JtYXQ6IG51bGwsXFxuICAgICAgcGFyUmF0aW86IHtcXG4gICAgICAgIHdpZHRoOiAxLFxcbiAgICAgICAgaGVpZ2h0OiAxXFxuICAgICAgfVxcbiAgICB9O1xcblxcbiAgICB0aGlzLmhhc0F1ZGlvID0gbnVsbDtcXG5cXG4gICAgdGhpcy5hdWRpbyA9IHtcXG4gICAgICBjb2RlYzogbnVsbCxcXG4gICAgICBzYW1wbGVSYXRlOiBudWxsLFxcbiAgICAgIHNhbXBsZVJhdGVJbmRleDogbnVsbCxcXG4gICAgICBjaGFubmVsQ291bnQ6IG51bGxcXG4gICAgfTtcXG4gIH1cXG5cXG4gIGlzQ29tcGxldGUoKSB7XFxuICAgIHJldHVybiBNZWRpYUluZm8uaXNCYXNlSW5mb1JlYWR5KHRoaXMpICYmIE1lZGlhSW5mby5pc1ZpZGVvUmVhZHkodGhpcykgJiYgTWVkaWFJbmZvLmlzQXVkaW9SZWFkeSh0aGlzKTtcXG4gIH1cXG5cXG4gIHN0YXRpYyBpc0Jhc2VJbmZvUmVhZHkobWVkaWFJbmZvKSB7XFxuICAgIHJldHVybiBpc09iamVjdEZpbGxlZChtZWRpYUluZm8pO1xcbiAgfVxcblxcbiAgc3RhdGljIGlzVmlkZW9SZWFkeShtZWRpYUluZm8pIHtcXG4gICAgaWYgKCFtZWRpYUluZm8uaGFzVmlkZW8pIHtcXG4gICAgICByZXR1cm4gdHJ1ZTtcXG4gICAgfVxcblxcbiAgICByZXR1cm4gaXNPYmplY3RGaWxsZWQobWVkaWFJbmZvLnZpZGVvKTtcXG4gIH1cXG5cXG4gIHN0YXRpYyBpc0F1ZGlvUmVhZHkobWVkaWFJbmZvKSB7XFxuICAgIGlmICghbWVkaWFJbmZvLmhhc0F1ZGlvKSB7XFxuICAgICAgcmV0dXJuIHRydWU7XFxuICAgIH1cXG5cXG4gICAgcmV0dXJuIGlzT2JqZWN0RmlsbGVkKG1lZGlhSW5mby52aWRlbyk7XFxuICB9XFxufVxcbmV4cG9ydHMuZGVmYXVsdCA9IE1lZGlhSW5mbztcXG5cXG4vLyMgc291cmNlVVJMPXdlYnBhY2s6Ly94Z3BsYXllci1mbHYvLi4veGdwbGF5ZXItdXRpbHMvc3JjL21vZGVscy9tZWRpYS1pbmZvLmpzPycpfSxcIi4uL3hncGxheWVyLXV0aWxzL3NyYy9tb2RlbHMvbWVkaWEtc2FtcGxlLmpzXCI6XG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4uL3hncGxheWVyLXV0aWxzL3NyYy9tb2RlbHMvbWVkaWEtc2FtcGxlLmpzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIG5vIHN0YXRpYyBleHBvcnRzIGZvdW5kICovZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7XCJ1c2Ugc3RyaWN0XCI7ZXZhbChcIlxcblxcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcXFwiX19lc01vZHVsZVxcXCIsIHtcXG4gIHZhbHVlOiB0cnVlXFxufSk7XFxuY2xhc3MgTWVkaWFTYW1wbGUge1xcbiAgY29uc3RydWN0b3IoaW5mbykge1xcbiAgICBsZXQgX2RlZmF1bHQgPSBNZWRpYVNhbXBsZS5nZXREZWZhdWx0SW5mKCk7XFxuXFxuICAgIGlmICghaW5mbyB8fCBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoaW5mbykgIT09ICdbb2JqZWN0IE9iamVjdF0nKSB7XFxuICAgICAgcmV0dXJuIF9kZWZhdWx0O1xcbiAgICB9XFxuICAgIGxldCBzYW1wbGUgPSBPYmplY3QuYXNzaWduKHt9LCBfZGVmYXVsdCwgaW5mbyk7XFxuXFxuICAgIE9iamVjdC5lbnRyaWVzKHNhbXBsZSkuZm9yRWFjaCgoW2ssIHZdKSA9PiB7XFxuICAgICAgdGhpc1trXSA9IHY7XFxuICAgIH0pO1xcbiAgfVxcblxcbiAgc3RhdGljIGdldERlZmF1bHRJbmYoKSB7XFxuICAgIHJldHVybiB7XFxuICAgICAgZHRzOiBudWxsLFxcbiAgICAgIHB0czogbnVsbCxcXG4gICAgICBkdXJhdGlvbjogbnVsbCxcXG4gICAgICBwb3NpdGlvbjogbnVsbCxcXG4gICAgICBpc1JBUDogZmFsc2UsIC8vIGlzIFJhbmRvbSBhY2Nlc3MgcG9pbnRcXG4gICAgICBvcmlnaW5EdHM6IG51bGxcXG4gICAgfTtcXG4gIH1cXG59XFxuZXhwb3J0cy5kZWZhdWx0ID0gTWVkaWFTYW1wbGU7XFxuXFxuLy8jIHNvdXJjZVVSTD13ZWJwYWNrOi8veGdwbGF5ZXItZmx2Ly4uL3hncGxheWVyLXV0aWxzL3NyYy9tb2RlbHMvbWVkaWEtc2FtcGxlLmpzP1wiKX0sXCIuLi94Z3BsYXllci11dGlscy9zcmMvbW9kZWxzL21lZGlhLXNlZ21lbnQtbGlzdC5qc1wiOlxuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuLi94Z3BsYXllci11dGlscy9zcmMvbW9kZWxzL21lZGlhLXNlZ21lbnQtbGlzdC5qcyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBubyBzdGF0aWMgZXhwb3J0cyBmb3VuZCAqL2Z1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pe1widXNlIHN0cmljdFwiO2V2YWwoJ1xcblxcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xcbiAgICB2YWx1ZTogdHJ1ZVxcbn0pO1xcbmNsYXNzIE1lZGlhU2VnbWVudExpc3Qge1xcblxcbiAgICBjb25zdHJ1Y3Rvcih0eXBlKSB7XFxuICAgICAgICB0aGlzLl90eXBlID0gdHlwZTtcXG4gICAgICAgIHRoaXMuX2xpc3QgPSBbXTtcXG4gICAgICAgIHRoaXMuX2xhc3RBcHBlbmRMb2NhdGlvbiA9IC0xOyAvLyBjYWNoZWQgbGFzdCBpbnNlcnQgbG9jYXRpb25cXG4gICAgfVxcblxcbiAgICBnZXQgdHlwZSgpIHtcXG4gICAgICAgIHJldHVybiB0aGlzLl90eXBlO1xcbiAgICB9XFxuXFxuICAgIGdldCBsZW5ndGgoKSB7XFxuICAgICAgICByZXR1cm4gdGhpcy5fbGlzdC5sZW5ndGg7XFxuICAgIH1cXG5cXG4gICAgaXNFbXB0eSgpIHtcXG4gICAgICAgIHJldHVybiB0aGlzLl9saXN0Lmxlbmd0aCA9PT0gMDtcXG4gICAgfVxcblxcbiAgICBjbGVhcigpIHtcXG4gICAgICAgIHRoaXMuX2xpc3QgPSBbXTtcXG4gICAgICAgIHRoaXMuX2xhc3RBcHBlbmRMb2NhdGlvbiA9IC0xO1xcbiAgICB9XFxuXFxuICAgIF9zZWFyY2hOZWFyZXN0U2VnbWVudEJlZm9yZShiZWdpbkR0cykge1xcbiAgICAgICAgbGV0IGxpc3QgPSB0aGlzLl9saXN0O1xcbiAgICAgICAgaWYgKGxpc3QubGVuZ3RoID09PSAwKSB7XFxuICAgICAgICAgICAgcmV0dXJuIC0yO1xcbiAgICAgICAgfVxcbiAgICAgICAgbGV0IGxhc3QgPSBsaXN0Lmxlbmd0aCAtIDE7XFxuICAgICAgICBsZXQgbWlkID0gMDtcXG4gICAgICAgIGxldCBsYm91bmQgPSAwO1xcbiAgICAgICAgbGV0IHVib3VuZCA9IGxhc3Q7XFxuXFxuICAgICAgICBsZXQgaWR4ID0gMDtcXG5cXG4gICAgICAgIGlmIChiZWdpbkR0cyA8IGxpc3RbMF0ub3JpZ2luRHRzKSB7XFxuICAgICAgICAgICAgaWR4ID0gLTE7XFxuICAgICAgICAgICAgcmV0dXJuIGlkeDtcXG4gICAgICAgIH1cXG5cXG4gICAgICAgIHdoaWxlIChsYm91bmQgPD0gdWJvdW5kKSB7XFxuICAgICAgICAgICAgbWlkID0gbGJvdW5kICsgTWF0aC5mbG9vcigodWJvdW5kIC0gbGJvdW5kKSAvIDIpO1xcbiAgICAgICAgICAgIGlmIChtaWQgPT09IGxhc3QgfHwgYmVnaW5EdHMgPiBsaXN0W21pZF0ubGFzdFNhbXBsZS5vcmlnaW5EdHMgJiYgYmVnaW5EdHMgPCBsaXN0W21pZCArIDFdLm9yaWdpbkR0cykge1xcbiAgICAgICAgICAgICAgICBpZHggPSBtaWQ7XFxuICAgICAgICAgICAgICAgIGJyZWFrO1xcbiAgICAgICAgICAgIH0gZWxzZSBpZiAobGlzdFttaWRdLm9yaWdpbkR0cyA8IGJlZ2luRHRzKSB7XFxuICAgICAgICAgICAgICAgIGxib3VuZCA9IG1pZCArIDE7XFxuICAgICAgICAgICAgfSBlbHNlIHtcXG4gICAgICAgICAgICAgICAgdWJvdW5kID0gbWlkIC0gMTtcXG4gICAgICAgICAgICB9XFxuICAgICAgICB9XFxuICAgICAgICByZXR1cm4gaWR4O1xcbiAgICB9XFxuXFxuICAgIF9zZWFyY2hOZWFyZXN0U2VnbWVudEFmdGVyKGJlZ2luRHRzKSB7XFxuICAgICAgICByZXR1cm4gdGhpcy5fc2VhcmNoTmVhcmVzdFNlZ21lbnRCZWZvcmUoYmVnaW5EdHMpICsgMTtcXG4gICAgfVxcblxcbiAgICBhcHBlbmQoc2VnbWVudCkge1xcbiAgICAgICAgbGV0IGxpc3QgPSB0aGlzLl9saXN0O1xcbiAgICAgICAgbGV0IGxhc3RBcHBlbmRJZHggPSB0aGlzLl9sYXN0QXBwZW5kTG9jYXRpb247XFxuICAgICAgICBsZXQgaW5zZXJ0SWR4ID0gMDtcXG5cXG4gICAgICAgIGlmIChsYXN0QXBwZW5kSWR4ICE9PSAtMSAmJiBsYXN0QXBwZW5kSWR4IDwgbGlzdC5sZW5ndGggJiYgc2VnbWVudC5vcmlnaW5TdGFydER0cyA+PSBsaXN0W2xhc3RBcHBlbmRJZHhdLmxhc3RTYW1wbGUub3JpZ2luRHRzICYmIChsYXN0QXBwZW5kSWR4ID09PSBsaXN0Lmxlbmd0aCAtIDEgfHwgbGFzdEFwcGVuZElkeCA8IGxpc3QubGVuZ3RoIC0gMSAmJiBzZWdtZW50Lm9yaWdpblN0YXJ0RHRzIDwgbGlzdFtsYXN0QXBwZW5kSWR4ICsgMV0ub3JpZ2luU3RhcnREdHMpKSB7XFxuICAgICAgICAgICAgaW5zZXJ0SWR4ID0gbGFzdEFwcGVuZElkeCArIDE7IC8vIHVzZSBjYWNoZWQgbG9jYXRpb24gaWR4XFxuICAgICAgICB9IGVsc2Uge1xcbiAgICAgICAgICAgIGlmIChsaXN0Lmxlbmd0aCA+IDApIHtcXG4gICAgICAgICAgICAgICAgaW5zZXJ0SWR4ID0gdGhpcy5fc2VhcmNoTmVhcmVzdFNlZ21lbnRCZWZvcmUoc2VnbWVudC5vcmlnaW5TdGFydER0cykgKyAxO1xcbiAgICAgICAgICAgIH1cXG4gICAgICAgIH1cXG5cXG4gICAgICAgIHRoaXMuX2xhc3RBcHBlbmRMb2NhdGlvbiA9IGluc2VydElkeDtcXG4gICAgICAgIHRoaXMuX2xpc3Quc3BsaWNlKGluc2VydElkeCwgMCwgc2VnbWVudCk7XFxuICAgIH1cXG5cXG4gICAgZ2V0TGFzdFNlZ21lbnRCZWZvcmUoYmVnaW5EdHMpIHtcXG4gICAgICAgIGxldCBpZHggPSB0aGlzLl9zZWFyY2hOZWFyZXN0U2VnbWVudEJlZm9yZShiZWdpbkR0cyk7XFxuICAgICAgICBpZiAoaWR4ID49IDApIHtcXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fbGlzdFtpZHhdO1xcbiAgICAgICAgfSBlbHNlIHtcXG4gICAgICAgICAgICAvLyAtMVxcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xcbiAgICAgICAgfVxcbiAgICB9XFxuXFxuICAgIGdldExhc3RTYW1wbGVCZWZvcmUoYmVnaW5EdHMpIHtcXG4gICAgICAgIGxldCBzZWdtZW50ID0gdGhpcy5nZXRMYXN0U2VnbWVudEJlZm9yZShiZWdpbkR0cyk7XFxuICAgICAgICBpZiAoc2VnbWVudCAhPT0gbnVsbCkge1xcbiAgICAgICAgICAgIHJldHVybiBzZWdtZW50Lmxhc3RTYW1wbGU7XFxuICAgICAgICB9IGVsc2Uge1xcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xcbiAgICAgICAgfVxcbiAgICB9XFxuXFxuICAgIGdldExhc3RSQVBCZWZvcmUoYmVnaW5EdHMpIHtcXG4gICAgICAgIGxldCBzZWdtZW50SWR4ID0gdGhpcy5fc2VhcmNoTmVhcmVzdFNlZ21lbnRCZWZvcmUoYmVnaW5EdHMpO1xcbiAgICAgICAgbGV0IHJhbmRvbUFjY2Vzc1BvaW50cyA9IHRoaXMuX2xpc3Rbc2VnbWVudElkeF0ucmFuZG9tQWNjZXNzUG9pbnRzO1xcbiAgICAgICAgd2hpbGUgKHJhbmRvbUFjY2Vzc1BvaW50cy5sZW5ndGggPT09IDAgJiYgc2VnbWVudElkeCA+IDApIHtcXG4gICAgICAgICAgICBzZWdtZW50SWR4LS07XFxuICAgICAgICAgICAgcmFuZG9tQWNjZXNzUG9pbnRzID0gdGhpcy5fbGlzdFtzZWdtZW50SWR4XS5yYW5kb21BY2Nlc3NQb2ludHM7XFxuICAgICAgICB9XFxuICAgICAgICBpZiAocmFuZG9tQWNjZXNzUG9pbnRzLmxlbmd0aCA+IDApIHtcXG4gICAgICAgICAgICByZXR1cm4gcmFuZG9tQWNjZXNzUG9pbnRzW3JhbmRvbUFjY2Vzc1BvaW50cy5sZW5ndGggLSAxXTtcXG4gICAgICAgIH0gZWxzZSB7XFxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XFxuICAgICAgICB9XFxuICAgIH1cXG5cXG59XFxuZXhwb3J0cy5kZWZhdWx0ID0gTWVkaWFTZWdtZW50TGlzdDtcXG5cXG4vLyMgc291cmNlVVJMPXdlYnBhY2s6Ly94Z3BsYXllci1mbHYvLi4veGdwbGF5ZXItdXRpbHMvc3JjL21vZGVscy9tZWRpYS1zZWdtZW50LWxpc3QuanM/Jyl9LFwiLi4veGdwbGF5ZXItdXRpbHMvc3JjL21vZGVscy9tZWRpYS1zZWdtZW50LmpzXCI6XG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuLi94Z3BsYXllci11dGlscy9zcmMvbW9kZWxzL21lZGlhLXNlZ21lbnQuanMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIG5vIHN0YXRpYyBleHBvcnRzIGZvdW5kICovZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7XCJ1c2Ugc3RyaWN0XCI7ZXZhbCgnXFxuXFxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XFxuICAgIHZhbHVlOiB0cnVlXFxufSk7XFxuY2xhc3MgTWVkaWFTZWdtZW50IHtcXG4gICAgY29uc3RydWN0b3IoKSB7XFxuICAgICAgICB0aGlzLnN0YXJ0RHRzID0gLTE7XFxuICAgICAgICB0aGlzLmVuZER0cyA9IC0xO1xcbiAgICAgICAgdGhpcy5zdGFydFB0cyA9IC0xO1xcbiAgICAgICAgdGhpcy5lbmRQdHMgPSAtMTtcXG4gICAgICAgIHRoaXMub3JpZ2luU3RhcnREdHMgPSAtMTtcXG4gICAgICAgIHRoaXMub3JpZ2luRW5kRHRzID0gLTE7XFxuICAgICAgICB0aGlzLnJhbmRvbUFjY2Vzc1BvaW50cyA9IFtdO1xcbiAgICAgICAgdGhpcy5maXJzdFNhbXBsZSA9IG51bGw7XFxuICAgICAgICB0aGlzLmxhc3RTYW1wbGUgPSBudWxsO1xcbiAgICB9XFxuXFxuICAgIGFkZFJBUChzYW1wbGUpIHtcXG4gICAgICAgIHNhbXBsZS5pc1JBUCA9IHRydWU7XFxuICAgICAgICB0aGlzLnJhbmRvbUFjY2Vzc1BvaW50cy5wdXNoKHNhbXBsZSk7XFxuICAgIH1cXG59XFxuZXhwb3J0cy5kZWZhdWx0ID0gTWVkaWFTZWdtZW50O1xcblxcbi8vIyBzb3VyY2VVUkw9d2VicGFjazovL3hncGxheWVyLWZsdi8uLi94Z3BsYXllci11dGlscy9zcmMvbW9kZWxzL21lZGlhLXNlZ21lbnQuanM/Jyl9LFwiLi4veGdwbGF5ZXItdXRpbHMvc3JjL21vZGVscy90cmFjay1tZXRhLmpzXCI6XG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuLi94Z3BsYXllci11dGlscy9zcmMvbW9kZWxzL3RyYWNrLW1ldGEuanMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIG5vIHN0YXRpYyBleHBvcnRzIGZvdW5kICovZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7XCJ1c2Ugc3RyaWN0XCI7ZXZhbChcIlxcblxcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcXFwiX19lc01vZHVsZVxcXCIsIHtcXG4gIHZhbHVlOiB0cnVlXFxufSk7XFxuY2xhc3MgQXVkaW9UcmFja01ldGEge1xcbiAgY29uc3RydWN0b3IobWV0YSkge1xcbiAgICBjb25zdCBfZGVmYXVsdCA9IHtcXG4gICAgICBzYW1wbGVSYXRlOiA0ODAwMCxcXG4gICAgICBjaGFubmVsQ291bnQ6IDIsXFxuICAgICAgY29kZWM6ICdtcDRhLjQwLjInLFxcbiAgICAgIGNvbmZpZzogWzQxLCA0MDEsIDEzNiwgMF0sXFxuICAgICAgZHVyYXRpb246IDAsXFxuICAgICAgaWQ6IDIsXFxuICAgICAgcmVmU2FtcGxlRHVyYXRpb246IDIxLFxcbiAgICAgIHNhbXBsZVJhdGVJbmRleDogMyxcXG4gICAgICB0aW1lc2NhbGU6IDEwMDAsXFxuICAgICAgdHlwZTogJ2F1ZGlvJ1xcbiAgICB9O1xcbiAgICBpZiAobWV0YSkge1xcbiAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKHt9LCBfZGVmYXVsdCwgbWV0YSk7XFxuICAgIH1cXG4gICAgcmV0dXJuIF9kZWZhdWx0O1xcbiAgfVxcbn1cXG5cXG5leHBvcnRzLkF1ZGlvVHJhY2tNZXRhID0gQXVkaW9UcmFja01ldGE7XFxuY2xhc3MgVmlkZW9UcmFja01ldGEge1xcbiAgY29uc3RydWN0b3IobWV0YSkge1xcbiAgICBjb25zdCBfZGVmYXVsdCA9IHtcXG4gICAgICBhdmNjOiBudWxsLFxcbiAgICAgIHNwczogbmV3IFVpbnQ4QXJyYXkoMCksXFxuICAgICAgcHBzOiBuZXcgVWludDhBcnJheSgwKSxcXG4gICAgICBjaHJvbWFGb3JtYXQ6IDQyMCxcXG4gICAgICBjb2RlYzogJ2F2YzEuNjQwMDIwJyxcXG4gICAgICBjb2RlY0hlaWdodDogNzIwLFxcbiAgICAgIGNvZGVjV2lkdGg6IDEyODAsXFxuICAgICAgZHVyYXRpb246IDAsXFxuICAgICAgZnJhbWVSYXRlOiB7XFxuICAgICAgICBmaXhlZDogdHJ1ZSxcXG4gICAgICAgIGZwczogMjUsXFxuICAgICAgICBmcHNfbnVtOiAyNTAwMCxcXG4gICAgICAgIGZwc19kZW46IDEwMDBcXG4gICAgICB9LFxcbiAgICAgIGlkOiAxLFxcbiAgICAgIGxldmVsOiAnMy4yJyxcXG4gICAgICBwcmVzZW50SGVpZ2h0OiA3MjAsXFxuICAgICAgcHJlc2VudFdpZHRoOiAxMjgwLFxcbiAgICAgIHByb2ZpbGU6ICdIaWdoJyxcXG4gICAgICByZWZTYW1wbGVEdXJhdGlvbjogNDAsXFxuICAgICAgcGFyUmF0aW86IHtcXG4gICAgICAgIGhlaWdodDogMSxcXG4gICAgICAgIHdpZHRoOiAxXFxuICAgICAgfSxcXG4gICAgICB0aW1lc2NhbGU6IDEwMDAsXFxuICAgICAgdHlwZTogJ3ZpZGVvJ1xcbiAgICB9O1xcblxcbiAgICBpZiAobWV0YSkge1xcbiAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKHt9LCBfZGVmYXVsdCwgbWV0YSk7XFxuICAgIH1cXG4gICAgcmV0dXJuIF9kZWZhdWx0O1xcbiAgfVxcbn1cXG5leHBvcnRzLlZpZGVvVHJhY2tNZXRhID0gVmlkZW9UcmFja01ldGE7XFxuXFxuLy8jIHNvdXJjZVVSTD13ZWJwYWNrOi8veGdwbGF5ZXItZmx2Ly4uL3hncGxheWVyLXV0aWxzL3NyYy9tb2RlbHMvdHJhY2stbWV0YS5qcz9cIil9LFwiLi4veGdwbGF5ZXItdXRpbHMvc3JjL21vZGVscy90cmFjay1zYW1wbGUuanNcIjpcbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi4veGdwbGF5ZXItdXRpbHMvc3JjL21vZGVscy90cmFjay1zYW1wbGUuanMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgbm8gc3RhdGljIGV4cG9ydHMgZm91bmQgKi9mdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXtcInVzZSBzdHJpY3RcIjtldmFsKCdcXG5cXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcXG4gIHZhbHVlOiB0cnVlXFxufSk7XFxuY2xhc3MgQXVkaW9UcmFja1NhbXBsZSB7XFxuICBjb25zdHJ1Y3RvcihpbmZvKSB7XFxuICAgIGxldCBfZGVmYXVsdCA9IEF1ZGlvVHJhY2tTYW1wbGUuZ2V0RGVmYXVsdCgpO1xcbiAgICBpZiAoIWluZm8pIHtcXG4gICAgICByZXR1cm4gX2RlZmF1bHQ7XFxuICAgIH1cXG4gICAgbGV0IHNhbXBsZSA9IE9iamVjdC5hc3NpZ24oe30sIF9kZWZhdWx0LCBpbmZvKTtcXG5cXG4gICAgcmV0dXJuIHNhbXBsZTtcXG4gIH1cXG5cXG4gIHN0YXRpYyBnZXREZWZhdWx0KCkge1xcbiAgICByZXR1cm4ge1xcbiAgICAgIGR0czogbnVsbCxcXG4gICAgICBwdHM6IG51bGwsXFxuICAgICAgZGF0YTogbmV3IFVpbnQ4QXJyYXkoKVxcbiAgICB9O1xcbiAgfVxcbn1cXG5cXG5leHBvcnRzLkF1ZGlvVHJhY2tTYW1wbGUgPSBBdWRpb1RyYWNrU2FtcGxlO1xcbmNsYXNzIFZpZGVvVHJhY2tTYW1wbGUge1xcbiAgY29uc3RydWN0b3IoaW5mbykge1xcbiAgICBsZXQgX2RlZmF1bHQgPSBWaWRlb1RyYWNrU2FtcGxlLmdldERlZmF1bHQoKTtcXG5cXG4gICAgaWYgKCFpbmZvKSB7XFxuICAgICAgcmV0dXJuIF9kZWZhdWx0O1xcbiAgICB9XFxuICAgIGxldCBzYW1wbGUgPSBPYmplY3QuYXNzaWduKHt9LCBfZGVmYXVsdCwgaW5mbyk7XFxuXFxuICAgIHJldHVybiBzYW1wbGU7XFxuICB9XFxuXFxuICBzdGF0aWMgZ2V0RGVmYXVsdCgpIHtcXG4gICAgcmV0dXJuIHtcXG4gICAgICBkdHM6IG51bGwsXFxuICAgICAgcHRzOiBudWxsLFxcbiAgICAgIGlzS2V5ZnJhbWU6IGZhbHNlLCAvLyBpcyBSYW5kb20gYWNjZXNzIHBvaW50XFxuICAgICAgb3JpZ2luRHRzOiBudWxsLFxcbiAgICAgIGRhdGE6IG5ldyBVaW50OEFycmF5KClcXG4gICAgfTtcXG4gIH1cXG59XFxuZXhwb3J0cy5WaWRlb1RyYWNrU2FtcGxlID0gVmlkZW9UcmFja1NhbXBsZTtcXG5cXG4vLyMgc291cmNlVVJMPXdlYnBhY2s6Ly94Z3BsYXllci1mbHYvLi4veGdwbGF5ZXItdXRpbHMvc3JjL21vZGVscy90cmFjay1zYW1wbGUuanM/Jyl9LFwiLi4veGdwbGF5ZXItdXRpbHMvc3JjL21zZS9pbmRleC5qc1wiOlxuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4uL3hncGxheWVyLXV0aWxzL3NyYy9tc2UvaW5kZXguanMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBubyBzdGF0aWMgZXhwb3J0cyBmb3VuZCAqL2Z1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pe1widXNlIHN0cmljdFwiO2V2YWwoXCJcXG5cXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXFxcIl9fZXNNb2R1bGVcXFwiLCB7XFxuICB2YWx1ZTogdHJ1ZVxcbn0pO1xcbmNsYXNzIE1TRSB7XFxuICBjb25zdHJ1Y3Rvcihjb25maWdzKSB7XFxuICAgIHRoaXMuY29uZmlncyA9IE9iamVjdC5hc3NpZ24oe30sIGNvbmZpZ3MpO1xcbiAgICB0aGlzLmNvbnRhaW5lciA9IHRoaXMuY29uZmlncy5jb250YWluZXI7XFxuICAgIHRoaXMubWVkaWFTb3VyY2UgPSBudWxsO1xcbiAgICB0aGlzLnNvdXJjZUJ1ZmZlcnMgPSB7fTtcXG4gICAgdGhpcy5wcmVsb2FkVGltZSA9IHRoaXMuY29uZmlncy5wcmVsb2FkVGltZSB8fCAxO1xcbiAgfVxcblxcbiAgaW5pdCgpIHtcXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVuZGVmXFxuICAgIHRoaXMubWVkaWFTb3VyY2UgPSBuZXcgc2VsZi5NZWRpYVNvdXJjZSgpO1xcbiAgICB0aGlzLm1lZGlhU291cmNlLmFkZEV2ZW50TGlzdGVuZXIoJ3NvdXJjZW9wZW4nLCB0aGlzLm9uU291cmNlT3Blbi5iaW5kKHRoaXMpKTtcXG4gICAgdGhpcy5jb250YWluZXIuc3JjID0gVVJMLmNyZWF0ZU9iamVjdFVSTCh0aGlzLm1lZGlhU291cmNlKTtcXG4gICAgdGhpcy51cmwgPSB0aGlzLmNvbnRhaW5lci5zcmM7XFxuICAgIHRoaXMuY29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ3RpbWV1cGRhdGUnLCB0aGlzLm9uVGltZVVwZGF0ZS5iaW5kKHRoaXMpKTtcXG4gICAgdGhpcy5jb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignd2FpdGluZycsIHRoaXMub25XYWl0aW5nLmJpbmQodGhpcykpO1xcbiAgfVxcblxcbiAgb25UaW1lVXBkYXRlKCkge1xcbiAgICB0aGlzLmVtaXQoJ1RJTUVfVVBEQVRFJywgdGhpcy5jb250YWluZXIpO1xcbiAgfVxcblxcbiAgb25XYWl0aW5nKCkge1xcbiAgICB0aGlzLmVtaXQoJ1dBSVRJTkcnLCB0aGlzLmNvbnRhaW5lcik7XFxuICB9XFxuXFxuICBvblNvdXJjZU9wZW4oKSB7XFxuICAgIHRoaXMuYWRkU291cmNlQnVmZmVycygpO1xcbiAgfVxcblxcbiAgb25VcGRhdGVFbmQoKSB7XFxuICAgIHRoaXMuZW1pdCgnU09VUkNFX1VQREFURV9FTkQnKTtcXG4gICAgdGhpcy5kb0FwcGVuZCgpO1xcbiAgfVxcbiAgYWRkU291cmNlQnVmZmVycygpIHtcXG4gICAgaWYgKHRoaXMubWVkaWFTb3VyY2UucmVhZHlTdGF0ZSAhPT0gJ29wZW4nKSB7XFxuICAgICAgcmV0dXJuO1xcbiAgICB9XFxuICAgIGxldCBzb3VyY2VzID0gdGhpcy5fY29udGV4dC5nZXRJbnN0YW5jZSgnUFJFX1NPVVJDRV9CVUZGRVInKTtcXG4gICAgbGV0IHRyYWNrcyA9IHRoaXMuX2NvbnRleHQuZ2V0SW5zdGFuY2UoJ1RSQUNLUycpO1xcbiAgICBsZXQgdHJhY2s7XFxuXFxuICAgIHNvdXJjZXMgPSBzb3VyY2VzLnNvdXJjZXM7XFxuICAgIGxldCBhZGQgPSBmYWxzZTtcXG4gICAgZm9yIChsZXQgaSA9IDAsIGsgPSBPYmplY3Qua2V5cyhzb3VyY2VzKS5sZW5ndGg7IGkgPCBrOyBpKyspIHtcXG4gICAgICBsZXQgdHlwZSA9IE9iamVjdC5rZXlzKHNvdXJjZXMpW2ldO1xcbiAgICAgIGlmICh0eXBlID09PSAnYXVkaW8nKSB7XFxuICAgICAgICB0cmFjayA9IHRyYWNrcy5hdWRpb1RyYWNrO1xcbiAgICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gJ3ZpZGVvJykge1xcbiAgICAgICAgdHJhY2sgPSB0cmFja3MudmlkZW9UcmFjaztcXG4gICAgICB9XFxuICAgICAgaWYgKHRyYWNrKSB7XFxuICAgICAgICBsZXQgZHVyID0gdHlwZSA9PT0gJ2F1ZGlvJyA/IDIxIDogNDA7XFxuICAgICAgICBpZiAodHJhY2subWV0YSAmJiB0cmFjay5tZXRhLnJlZlNhbXBsZUR1cmF0aW9uKSBkdXIgPSB0cmFjay5tZXRhLnJlZlNhbXBsZUR1cmF0aW9uO1xcbiAgICAgICAgaWYgKHNvdXJjZXNbdHlwZV0uZGF0YS5sZW5ndGggPj0gdGhpcy5wcmVsb2FkVGltZSAvIGR1cikge1xcbiAgICAgICAgICBhZGQgPSB0cnVlO1xcbiAgICAgICAgfVxcbiAgICAgIH1cXG4gICAgfVxcblxcbiAgICBpZiAoYWRkKSB7XFxuICAgICAgaWYgKE9iamVjdC5rZXlzKHRoaXMuc291cmNlQnVmZmVycykubGVuZ3RoID4gMCkge1xcbiAgICAgICAgcmV0dXJuO1xcbiAgICAgIH1cXG4gICAgICBmb3IgKGxldCBpID0gMCwgayA9IE9iamVjdC5rZXlzKHNvdXJjZXMpLmxlbmd0aDsgaSA8IGs7IGkrKykge1xcbiAgICAgICAgbGV0IHR5cGUgPSBPYmplY3Qua2V5cyhzb3VyY2VzKVtpXTtcXG4gICAgICAgIGxldCBzb3VyY2UgPSBzb3VyY2VzW3R5cGVdO1xcbiAgICAgICAgbGV0IG1pbWUgPSB0eXBlID09PSAndmlkZW8nID8gJ3ZpZGVvL21wNDtjb2RlY3M9JyArIHNvdXJjZS5taW1ldHlwZSA6ICdhdWRpby9tcDQ7Y29kZWNzPScgKyBzb3VyY2UubWltZXR5cGU7XFxuICAgICAgICBsZXQgc291cmNlQnVmZmVyID0gdGhpcy5tZWRpYVNvdXJjZS5hZGRTb3VyY2VCdWZmZXIobWltZSk7XFxuICAgICAgICB0aGlzLnNvdXJjZUJ1ZmZlcnNbdHlwZV0gPSBzb3VyY2VCdWZmZXI7XFxuICAgICAgICBzb3VyY2VCdWZmZXIuYWRkRXZlbnRMaXN0ZW5lcigndXBkYXRlZW5kJywgdGhpcy5vblVwZGF0ZUVuZC5iaW5kKHRoaXMpKTtcXG4gICAgICAgIHRoaXMuZG9BcHBlbmQoKTtcXG4gICAgICB9XFxuICAgIH1cXG4gIH1cXG5cXG4gIGRvQXBwZW5kKCkge1xcbiAgICBsZXQgc291cmNlcyA9IHRoaXMuX2NvbnRleHQuZ2V0SW5zdGFuY2UoJ1BSRV9TT1VSQ0VfQlVGRkVSJyk7XFxuICAgIGlmIChzb3VyY2VzKSB7XFxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBPYmplY3Qua2V5cyh0aGlzLnNvdXJjZUJ1ZmZlcnMpLmxlbmd0aDsgaSsrKSB7XFxuICAgICAgICBsZXQgdHlwZSA9IE9iamVjdC5rZXlzKHRoaXMuc291cmNlQnVmZmVycylbaV07XFxuICAgICAgICBsZXQgc291cmNlQnVmZmVyID0gdGhpcy5zb3VyY2VCdWZmZXJzW3R5cGVdO1xcbiAgICAgICAgaWYgKCFzb3VyY2VCdWZmZXIudXBkYXRpbmcpIHtcXG4gICAgICAgICAgbGV0IHNvdXJjZSA9IHNvdXJjZXMuc291cmNlc1t0eXBlXTtcXG4gICAgICAgICAgaWYgKHNvdXJjZSAmJiAhc291cmNlLmluaXRlZCkge1xcbiAgICAgICAgICAgIHNvdXJjZUJ1ZmZlci5hcHBlbmRCdWZmZXIoc291cmNlLmluaXQuYnVmZmVyLmJ1ZmZlcik7XFxuICAgICAgICAgICAgc291cmNlLmluaXRlZCA9IHRydWU7XFxuICAgICAgICAgIH0gZWxzZSBpZiAoc291cmNlKSB7XFxuICAgICAgICAgICAgbGV0IGRhdGEgPSBzb3VyY2UuZGF0YS5zaGlmdCgpO1xcbiAgICAgICAgICAgIGlmIChkYXRhKSB7XFxuICAgICAgICAgICAgICBzb3VyY2VCdWZmZXIuYXBwZW5kQnVmZmVyKGRhdGEuYnVmZmVyLmJ1ZmZlcik7XFxuICAgICAgICAgICAgfVxcbiAgICAgICAgICB9XFxuICAgICAgICB9XFxuICAgICAgfVxcbiAgICB9XFxuICB9XFxuXFxuICBlbmRPZlN0cmVhbSgpIHtcXG4gICAgaWYgKHRoaXMubWVkaWFTb3VyY2UucmVhZHlTdGF0ZSA9PT0gJ29wZW4nKSB7XFxuICAgICAgdGhpcy5tZWRpYVNvdXJjZS5lbmRPZlN0cmVhbSgpO1xcbiAgICB9XFxuICB9XFxuXFxuICByZW1vdmUoZW5kKSB7XFxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgT2JqZWN0LmtleXModGhpcy5zb3VyY2VCdWZmZXJzKS5sZW5ndGg7IGkrKykge1xcbiAgICAgIGxldCBidWZmZXIgPSB0aGlzLnNvdXJjZUJ1ZmZlcnNbT2JqZWN0LmtleXModGhpcy5zb3VyY2VCdWZmZXJzKVtpXV07XFxuICAgICAgaWYgKCFidWZmZXIudXBkYXRpbmcpIHtcXG4gICAgICAgIGJ1ZmZlci5yZW1vdmUoMCwgZW5kKTtcXG4gICAgICB9XFxuICAgIH1cXG4gIH1cXG5cXG4gIGRlc3Ryb3koKSB7XFxuICAgIHRoaXMuY29udGFpbmVyLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RpbWV1cGRhdGUnLCB0aGlzLm9uVGltZVVwZGF0ZSk7XFxuICAgIHRoaXMuY29udGFpbmVyLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3dhaXRpbmcnLCB0aGlzLm9uV2FpdGluZyk7XFxuICAgIHRoaXMubWVkaWFTb3VyY2UucmVtb3ZlRXZlbnRMaXN0ZW5lcignc291cmNlb3BlbicsIHRoaXMub25Tb3VyY2VPcGVuKTtcXG4gICAgdGhpcy5jb25maWdzID0ge307XFxuICAgIHRoaXMuY29udGFpbmVyID0gbnVsbDtcXG4gICAgdGhpcy5tZWRpYVNvdXJjZSA9IG51bGw7XFxuICAgIHRoaXMuc291cmNlQnVmZmVycyA9IHt9O1xcbiAgICB0aGlzLnByZWxvYWRUaW1lID0gMTtcXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBPYmplY3Qua2V5cyh0aGlzLnNvdXJjZUJ1ZmZlcnMpLmxlbmd0aDsgaSsrKSB7XFxuICAgICAgbGV0IGJ1ZmZlciA9IHRoaXMuc291cmNlQnVmZmVyc1tPYmplY3Qua2V5cyh0aGlzLnNvdXJjZUJ1ZmZlcnMpW2ldXTtcXG4gICAgICBidWZmZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcigndXBkYXRlZW5kJywgdGhpcy5vblVwZGF0ZUVuZCk7XFxuICAgICAgdGhpcy5tZWRpYVNvdXJjZS5yZW1vdmVTb3VyY2VCdWZmZXIoYnVmZmVyKTtcXG4gICAgICBkZWxldGUgdGhpcy5zb3VyY2VCdWZmZXJzW09iamVjdC5rZXlzKHRoaXMuc291cmNlQnVmZmVycylbaV1dO1xcbiAgICB9XFxuICB9XFxufVxcbmV4cG9ydHMuZGVmYXVsdCA9IE1TRTtcXG5cXG4vLyMgc291cmNlVVJMPXdlYnBhY2s6Ly94Z3BsYXllci1mbHYvLi4veGdwbGF5ZXItdXRpbHMvc3JjL21zZS9pbmRleC5qcz9cIil9LFwiLi4veGdwbGF5ZXItdXRpbHMvc3JjL3dyaXRlL2J1ZmZlci5qc1wiOlxuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4uL3hncGxheWVyLXV0aWxzL3NyYy93cml0ZS9idWZmZXIuanMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBubyBzdGF0aWMgZXhwb3J0cyBmb3VuZCAqL2Z1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pe1widXNlIHN0cmljdFwiO2V2YWwoXCJcXG5cXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXFxcIl9fZXNNb2R1bGVcXFwiLCB7XFxuICB2YWx1ZTogdHJ1ZVxcbn0pO1xcblxcbnZhciBfY29uY2F0VHlwZWRBcnJheSA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIGNvbmNhdC10eXBlZC1hcnJheSAqLyBcXFwiLi4veGdwbGF5ZXItdXRpbHMvbm9kZV9tb2R1bGVzL2NvbmNhdC10eXBlZC1hcnJheS9saWIvaW5kZXguanNcXFwiKTtcXG5cXG52YXIgX2NvbmNhdFR5cGVkQXJyYXkyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY29uY2F0VHlwZWRBcnJheSk7XFxuXFxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cXG5cXG5jbGFzcyBCdWZmZXIge1xcbiAgY29uc3RydWN0b3IoYnVmZmVyKSB7XFxuICAgIHRoaXMuYnVmZmVyID0gYnVmZmVyIHx8IG5ldyBVaW50OEFycmF5KDApO1xcbiAgfVxcblxcbiAgd3JpdGUoLi4uYnVmZmVyKSB7XFxuICAgIGJ1ZmZlci5mb3JFYWNoKGl0ZW0gPT4ge1xcbiAgICAgIHRoaXMuYnVmZmVyID0gKDAsIF9jb25jYXRUeXBlZEFycmF5Mi5kZWZhdWx0KShVaW50OEFycmF5LCB0aGlzLmJ1ZmZlciwgaXRlbSk7XFxuICAgIH0pO1xcbiAgfVxcblxcbiAgc3RhdGljIHdyaXRlVWludDMyKHZhbHVlKSB7XFxuICAgIHJldHVybiBuZXcgVWludDhBcnJheShbdmFsdWUgPj4gMjQsIHZhbHVlID4+IDE2ICYgMHhmZiwgdmFsdWUgPj4gOCAmIDB4ZmYsIHZhbHVlICYgMHhmZl0pO1xcbiAgfVxcblxcbiAgc3RhdGljIHJlYWRBc0ludChhcnIpIHtcXG4gICAgbGV0IHRlbXAgPSAnJztcXG5cXG4gICAgZnVuY3Rpb24gcGFkU3RhcnQ0SGV4KGhleE51bSkge1xcbiAgICAgIGxldCBoZXhTdHIgPSBoZXhOdW0udG9TdHJpbmcoMTYpO1xcbiAgICAgIHJldHVybiBoZXhTdHIucGFkU3RhcnQoMiwgJzAnKTtcXG4gICAgfVxcblxcbiAgICBhcnIuZm9yRWFjaChudW0gPT4ge1xcbiAgICAgIHRlbXAgKz0gcGFkU3RhcnQ0SGV4KG51bSk7XFxuICAgIH0pO1xcbiAgICByZXR1cm4gcGFyc2VJbnQodGVtcCwgMTYpO1xcbiAgfVxcbn1cXG5cXG5leHBvcnRzLmRlZmF1bHQgPSBCdWZmZXI7XFxuXFxuLy8jIHNvdXJjZVVSTD13ZWJwYWNrOi8veGdwbGF5ZXItZmx2Ly4uL3hncGxheWVyLXV0aWxzL3NyYy93cml0ZS9idWZmZXIuanM/XCIpfSxcIi4uL3hncGxheWVyLXV0aWxzL3NyYy93cml0ZS9zdHJlYW0uanNcIjpcbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuLi94Z3BsYXllci11dGlscy9zcmMvd3JpdGUvc3RyZWFtLmpzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgbm8gc3RhdGljIGV4cG9ydHMgZm91bmQgKi9mdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXtcInVzZSBzdHJpY3RcIjtldmFsKFwiXFxuXFxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFxcXCJfX2VzTW9kdWxlXFxcIiwge1xcbiAgdmFsdWU6IHRydWVcXG59KTtcXG5jbGFzcyBTdHJlYW0ge1xcbiAgY29uc3RydWN0b3IoYnVmZmVyKSB7XFxuICAgIGlmIChidWZmZXIgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcikge1xcbiAgICAgIHRoaXMuYnVmZmVyID0gYnVmZmVyO1xcbiAgICAgIHRoaXMuZGF0YXZpZXcgPSBuZXcgRGF0YVZpZXcoYnVmZmVyKTtcXG4gICAgICB0aGlzLmRhdGF2aWV3LnBvc2l0aW9uID0gMDtcXG4gICAgfSBlbHNlIHtcXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ2RhdGEgaXMgaW52YWxpZCcpO1xcbiAgICB9XFxuICB9XFxuXFxuICBnZXQgbGVuZ3RoKCkge1xcbiAgICByZXR1cm4gdGhpcy5idWZmZXIuYnl0ZUxlbmd0aDtcXG4gIH1cXG5cXG4gIHNldCBwb3NpdGlvbih2YWx1ZSkge1xcbiAgICB0aGlzLmRhdGF2aWV3LnBvc2l0aW9uID0gdmFsdWU7XFxuICB9XFxuXFxuICBnZXQgcG9zaXRpb24oKSB7XFxuICAgIHJldHVybiB0aGlzLmRhdGF2aWV3LnBvc2l0aW9uO1xcbiAgfVxcblxcbiAgYmFjayhjb3VudCkge1xcbiAgICB0aGlzLnBvc2l0aW9uIC09IGNvdW50O1xcbiAgfVxcblxcbiAgc2tpcChjb3VudCkge1xcbiAgICBsZXQgbG9vcCA9IE1hdGguZmxvb3IoY291bnQgLyA0KTtcXG4gICAgbGV0IGxhc3QgPSBjb3VudCAlIDQ7XFxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbG9vcDsgaSsrKSB7XFxuICAgICAgU3RyZWFtLnJlYWRCeXRlKHRoaXMuZGF0YXZpZXcsIDQpO1xcbiAgICB9XFxuICAgIGlmIChsYXN0ID4gMCkge1xcbiAgICAgIFN0cmVhbS5yZWFkQnl0ZSh0aGlzLmRhdGF2aWV3LCBsYXN0KTtcXG4gICAgfVxcbiAgfVxcblxcbiAgLyoqXFxuICAgKiBbcmVhZEJ5dGUg5LuORGF0YVZpZXfkuK3or7vlj5bmlbDmja5dXFxuICAgKiBAcGFyYW0gIHtEYXRhVmlld30gYnVmZmVyIFtEYXRhVmlld+WunuS+i11cXG4gICAqIEBwYXJhbSAge051bWJlcn0gc2l6ZSAgIFvor7vlj5blrZfoioLmlbBdXFxuICAgKiBAcmV0dXJuIHtOdW1iZXJ9ICAgICAgICBb5pW05pWwXVxcbiAgICovXFxuICBzdGF0aWMgcmVhZEJ5dGUoYnVmZmVyLCBzaXplLCBzaWduKSB7XFxuICAgIGxldCByZXM7XFxuICAgIHN3aXRjaCAoc2l6ZSkge1xcbiAgICAgIGNhc2UgMTpcXG4gICAgICAgIGlmIChzaWduKSB7XFxuICAgICAgICAgIHJlcyA9IGJ1ZmZlci5nZXRJbnQ4KGJ1ZmZlci5wb3NpdGlvbik7XFxuICAgICAgICB9IGVsc2Uge1xcbiAgICAgICAgICByZXMgPSBidWZmZXIuZ2V0VWludDgoYnVmZmVyLnBvc2l0aW9uKTtcXG4gICAgICAgIH1cXG4gICAgICAgIGJyZWFrO1xcbiAgICAgIGNhc2UgMjpcXG4gICAgICAgIGlmIChzaWduKSB7XFxuICAgICAgICAgIHJlcyA9IGJ1ZmZlci5nZXRJbnQxNihidWZmZXIucG9zaXRpb24pO1xcbiAgICAgICAgfSBlbHNlIHtcXG4gICAgICAgICAgcmVzID0gYnVmZmVyLmdldFVpbnQxNihidWZmZXIucG9zaXRpb24pO1xcbiAgICAgICAgfVxcbiAgICAgICAgYnJlYWs7XFxuICAgICAgY2FzZSAzOlxcbiAgICAgICAgaWYgKHNpZ24pIHtcXG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdub3Qgc3VwcG9ydGVkIGZvciByZWFkQnl0ZSAzJyk7XFxuICAgICAgICB9IGVsc2Uge1xcbiAgICAgICAgICByZXMgPSBidWZmZXIuZ2V0VWludDgoYnVmZmVyLnBvc2l0aW9uKSA8PCAxNjtcXG4gICAgICAgICAgcmVzIHw9IGJ1ZmZlci5nZXRVaW50OChidWZmZXIucG9zaXRpb24gKyAxKSA8PCA4O1xcbiAgICAgICAgICByZXMgfD0gYnVmZmVyLmdldFVpbnQ4KGJ1ZmZlci5wb3NpdGlvbiArIDIpO1xcbiAgICAgICAgfVxcbiAgICAgICAgYnJlYWs7XFxuICAgICAgY2FzZSA0OlxcbiAgICAgICAgaWYgKHNpZ24pIHtcXG4gICAgICAgICAgcmVzID0gYnVmZmVyLmdldEludDMyKGJ1ZmZlci5wb3NpdGlvbik7XFxuICAgICAgICB9IGVsc2Uge1xcbiAgICAgICAgICByZXMgPSBidWZmZXIuZ2V0VWludDMyKGJ1ZmZlci5wb3NpdGlvbik7XFxuICAgICAgICB9XFxuICAgICAgICBicmVhaztcXG4gICAgICBjYXNlIDg6XFxuICAgICAgICBpZiAoc2lnbikge1xcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ25vdCBzdXBwb3J0ZWQgZm9yIHJlYWRCb2R5IDgnKTtcXG4gICAgICAgIH0gZWxzZSB7XFxuICAgICAgICAgIHJlcyA9IGJ1ZmZlci5nZXRVaW50MzIoYnVmZmVyLnBvc2l0aW9uKSA8PCAzMjtcXG4gICAgICAgICAgcmVzIHw9IGJ1ZmZlci5nZXRVaW50MzIoYnVmZmVyLnBvc2l0aW9uICsgNCk7XFxuICAgICAgICB9XFxuICAgICAgICBicmVhaztcXG4gICAgICBkZWZhdWx0OlxcbiAgICAgICAgcmVzID0gJyc7XFxuICAgIH1cXG4gICAgYnVmZmVyLnBvc2l0aW9uICs9IHNpemU7XFxuICAgIHJldHVybiByZXM7XFxuICB9XFxuXFxuICByZWFkVWludDgoKSB7XFxuICAgIHJldHVybiBTdHJlYW0ucmVhZEJ5dGUodGhpcy5kYXRhdmlldywgMSk7XFxuICB9XFxuXFxuICByZWFkVWludDE2KCkge1xcbiAgICByZXR1cm4gU3RyZWFtLnJlYWRCeXRlKHRoaXMuZGF0YXZpZXcsIDIpO1xcbiAgfVxcblxcbiAgcmVhZFVpbnQyNCgpIHtcXG4gICAgcmV0dXJuIFN0cmVhbS5yZWFkQnl0ZSh0aGlzLmRhdGF2aWV3LCAzKTtcXG4gIH1cXG5cXG4gIHJlYWRVaW50MzIoKSB7XFxuICAgIHJldHVybiBTdHJlYW0ucmVhZEJ5dGUodGhpcy5kYXRhdmlldywgNCk7XFxuICB9XFxuXFxuICByZWFkVWludDY0KCkge1xcbiAgICByZXR1cm4gU3RyZWFtLnJlYWRCeXRlKHRoaXMuZGF0YXZpZXcsIDgpO1xcbiAgfVxcblxcbiAgcmVhZEludDgoKSB7XFxuICAgIHJldHVybiBTdHJlYW0ucmVhZEJ5dGUodGhpcy5kYXRhdmlldywgMSwgdHJ1ZSk7XFxuICB9XFxuICByZWFkSW50MTYoKSB7XFxuICAgIHJldHVybiBTdHJlYW0ucmVhZEJ5dGUodGhpcy5kYXRhdmlldywgMiwgdHJ1ZSk7XFxuICB9XFxuXFxuICByZWFkSW50MzIoKSB7XFxuICAgIHJldHVybiBTdHJlYW0ucmVhZEJ5dGUodGhpcy5kYXRhdmlldywgNCwgdHJ1ZSk7XFxuICB9XFxuXFxuICB3cml0ZVVpbnQzMih2YWx1ZSkge1xcbiAgICByZXR1cm4gbmV3IFVpbnQ4QXJyYXkoW3ZhbHVlID4+PiAyNCAmIDB4ZmYsIHZhbHVlID4+PiAxNiAmIDB4ZmYsIHZhbHVlID4+PiA4ICYgMHhmZiwgdmFsdWUgJiAweGZmXSk7XFxuICB9XFxufVxcblxcbmV4cG9ydHMuZGVmYXVsdCA9IFN0cmVhbTtcXG5cXG4vLyMgc291cmNlVVJMPXdlYnBhY2s6Ly94Z3BsYXllci1mbHYvLi4veGdwbGF5ZXItdXRpbHMvc3JjL3dyaXRlL3N0cmVhbS5qcz9cIil9LFwiLi9zcmMvZmx2LWxpdmUuanNcIjpcbi8qISoqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9zcmMvZmx2LWxpdmUuanMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgbm8gc3RhdGljIGV4cG9ydHMgZm91bmQgKi9mdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXtcInVzZSBzdHJpY3RcIjtldmFsKFwiXFxuXFxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFxcXCJfX2VzTW9kdWxlXFxcIiwge1xcbiAgdmFsdWU6IHRydWVcXG59KTtcXG5cXG52YXIgX3hncGxheWVyUmVtdXggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISB4Z3BsYXllci1yZW11eCAqLyBcXFwiLi4veGdwbGF5ZXItcmVtdXgvaW5kZXguanNcXFwiKTtcXG5cXG52YXIgX3hncGxheWVyUmVtdXgyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfeGdwbGF5ZXJSZW11eCk7XFxuXFxudmFyIF94Z3BsYXllckxvYWRlciA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIHhncGxheWVyLWxvYWRlciAqLyBcXFwiLi4veGdwbGF5ZXItbG9hZGVyL2luZGV4LmpzXFxcIik7XFxuXFxudmFyIF94Z3BsYXllckRlbXV4ID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgeGdwbGF5ZXItZGVtdXggKi8gXFxcIi4uL3hncGxheWVyLWRlbXV4L2luZGV4LmpzXFxcIik7XFxuXFxudmFyIF94Z3BsYXllckJ1ZmZlciA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIHhncGxheWVyLWJ1ZmZlciAqLyBcXFwiLi4veGdwbGF5ZXItYnVmZmVyL2luZGV4LmpzXFxcIik7XFxuXFxudmFyIF94Z3BsYXllclV0aWxzID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgeGdwbGF5ZXItdXRpbHMgKi8gXFxcIi4uL3hncGxheWVyLXV0aWxzL2luZGV4LmpzXFxcIik7XFxuXFxudmFyIF94Z3BsYXllckNvZGVjID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgeGdwbGF5ZXItY29kZWMgKi8gXFxcIi4uL3hncGxheWVyLWNvZGVjL2luZGV4LmpzXFxcIik7XFxuXFxudmFyIF94Z3BsYXllciA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIHhncGxheWVyICovIFxcXCJ4Z3BsYXllclxcXCIpO1xcblxcbnZhciBfeGdwbGF5ZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfeGdwbGF5ZXIpO1xcblxcbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XFxuXFxuY29uc3QgUkVNVVhfRVZFTlRTID0gX3hncGxheWVyVXRpbHMuRVZFTlRTLlJFTVVYX0VWRU5UUztcXG5jb25zdCBERU1VWF9FVkVOVFMgPSBfeGdwbGF5ZXJVdGlscy5FVkVOVFMuREVNVVhfRVZFTlRTO1xcbmNvbnN0IExPQURFUl9FVkVOVFMgPSBfeGdwbGF5ZXJVdGlscy5FVkVOVFMuTE9BREVSX0VWRU5UUztcXG5jb25zdCBNU0VfRVZFTlRTID0gX3hncGxheWVyVXRpbHMuRVZFTlRTLk1TRV9FVkVOVFM7XFxuXFxuY29uc3QgVGFnID0gJ0ZMVkNvbnRyb2xsZXInO1xcblxcbmNsYXNzIExvZ2dlciB7XFxuICB3YXJuKCkge31cXG59XFxuXFxuY2xhc3MgRmx2Q29udHJvbGxlciB7XFxuICBjb25zdHJ1Y3RvcihwbGF5ZXIpIHtcXG4gICAgdGhpcy5UQUcgPSBUYWc7XFxuICAgIHRoaXMuX3BsYXllciA9IHBsYXllcjtcXG5cXG4gICAgdGhpcy5zdGF0ZSA9IHtcXG4gICAgICBpbml0U2VnbWVudEFycml2ZWQ6IGZhbHNlXFxuICAgIH07XFxuICB9XFxuXFxuICBpbml0KCkge1xcbiAgICB0aGlzLl9jb250ZXh0LnJlZ2lzdHJ5KCdGRVRDSF9MT0FERVInLCBfeGdwbGF5ZXJMb2FkZXIuRmV0Y2hMb2FkZXIpO1xcbiAgICB0aGlzLl9jb250ZXh0LnJlZ2lzdHJ5KCdMT0FERVJfQlVGRkVSJywgX3hncGxheWVyQnVmZmVyLlhnQnVmZmVyKTtcXG5cXG4gICAgdGhpcy5fY29udGV4dC5yZWdpc3RyeSgnRkxWX0RFTVVYRVInLCBfeGdwbGF5ZXJEZW11eC5GbHZEZW11eGVyKTtcXG4gICAgdGhpcy5fY29udGV4dC5yZWdpc3RyeSgnVFJBQ0tTJywgX3hncGxheWVyQnVmZmVyLlRyYWNrcyk7XFxuXFxuICAgIHRoaXMuX2NvbnRleHQucmVnaXN0cnkoJ01QNF9SRU1VWEVSJywgX3hncGxheWVyUmVtdXgyLmRlZmF1bHQuTXA0UmVtdXhlcik7XFxuICAgIHRoaXMuX2NvbnRleHQucmVnaXN0cnkoJ1BSRV9TT1VSQ0VfQlVGRkVSJywgX3hncGxheWVyQnVmZmVyLlByZVNvdXJjZSk7XFxuXFxuICAgIHRoaXMuX2NvbnRleHQucmVnaXN0cnkoJ0NPTVBBVElCSUxJVFknLCBfeGdwbGF5ZXJDb2RlYy5Db21wYXRpYmlsaXR5KTtcXG5cXG4gICAgdGhpcy5fY29udGV4dC5yZWdpc3RyeSgnTE9HR0VSJywgTG9nZ2VyKTtcXG4gICAgdGhpcy5tc2UgPSB0aGlzLl9jb250ZXh0LnJlZ2lzdHJ5KCdNU0UnLCBfeGdwbGF5ZXJVdGlscy5Nc2UpKHsgY29udGFpbmVyOiB0aGlzLl9wbGF5ZXIudmlkZW8gfSk7XFxuXFxuICAgIHRoaXMuaW5pdExpc3RlbmVycygpO1xcbiAgfVxcblxcbiAgaW5pdExpc3RlbmVycygpIHtcXG4gICAgdGhpcy5vbihMT0FERVJfRVZFTlRTLkxPQURFUl9EQVRBTE9BREVELCB0aGlzLl9oYW5kbGVMb2FkZXJEYXRhTG9hZGVkLmJpbmQodGhpcykpO1xcbiAgICB0aGlzLm9uKExPQURFUl9FVkVOVFMuTE9BREVSX0VSUk9SLCB0aGlzLl9oYW5kbGVOZXR3b3JrRXJyb3IuYmluZCh0aGlzKSk7XFxuXFxuICAgIHRoaXMub24oREVNVVhfRVZFTlRTLk1FRElBX0lORk8sIHRoaXMuX2hhbmRsZU1lZGlhSW5mby5iaW5kKHRoaXMpKTtcXG4gICAgdGhpcy5vbihERU1VWF9FVkVOVFMuTUVUQURBVEFfUEFSU0VELCB0aGlzLl9oYW5kbGVNZXRhZGF0YVBhcnNlZC5iaW5kKHRoaXMpKTtcXG4gICAgdGhpcy5vbihERU1VWF9FVkVOVFMuREVNVVhfQ09NUExFVEUsIHRoaXMuX2hhbmRsZURlbXV4Q29tcGxldGUuYmluZCh0aGlzKSk7XFxuICAgIHRoaXMub24oREVNVVhfRVZFTlRTLkRFTVVYX0VSUk9SLCB0aGlzLl9oYW5kbGVEZW11eEVycm9yLmJpbmQodGhpcykpO1xcblxcbiAgICB0aGlzLm9uKFJFTVVYX0VWRU5UUy5JTklUX1NFR01FTlQsIHRoaXMuX2hhbmRsZUFwcGVuZEluaXRTZWdtZW50LmJpbmQodGhpcykpO1xcbiAgICB0aGlzLm9uKFJFTVVYX0VWRU5UUy5NRURJQV9TRUdNRU5ULCB0aGlzLl9oYW5kbGVNZWRpYVNlZ21lbnQuYmluZCh0aGlzKSk7XFxuXFxuICAgIHRoaXMub24oTVNFX0VWRU5UUy5TT1VSQ0VfVVBEQVRFX0VORCwgdGhpcy5faGFuZGxlU291cmNlVXBkYXRlRW5kLmJpbmQodGhpcykpO1xcblxcbiAgICB0aGlzLl9wbGF5ZXIub24oJ3RpbWV1cGRhdGUnLCB0aGlzLl9oYW5kbGVUaW1lVXBkYXRlLmJpbmQodGhpcykpO1xcbiAgfVxcblxcbiAgX2hhbmRsZU1lZGlhSW5mbygpIHtcXG4gICAgaWYgKCF0aGlzLl9jb250ZXh0Lm1lZGlhSW5mbykge1xcbiAgICAgIHRoaXMuZW1pdChERU1VWF9FVkVOVFMuREVNVVhfRVJST1IsIG5ldyBFcnJvcignZmFpbGVkIHRvIGdldCBtZWRpYWluZm8nKSk7XFxuICAgIH1cXG4gIH1cXG5cXG4gIF9oYW5kbGVMb2FkZXJEYXRhTG9hZGVkKCkge1xcbiAgICB0aGlzLmVtaXRUbygnRkxWX0RFTVVYRVInLCBERU1VWF9FVkVOVFMuREVNVVhfU1RBUlQpO1xcbiAgfVxcblxcbiAgX2hhbmRsZU1ldGFkYXRhUGFyc2VkKHR5cGUpIHtcXG4gICAgdGhpcy5lbWl0KFJFTVVYX0VWRU5UUy5SRU1VWF9NRVRBREFUQSwgdHlwZSk7XFxuICB9XFxuICBfaGFuZGxlRGVtdXhDb21wbGV0ZSgpIHtcXG4gICAgdGhpcy5lbWl0KFJFTVVYX0VWRU5UUy5SRU1VWF9NRURJQSk7XFxuICB9XFxuXFxuICBfaGFuZGxlQXBwZW5kSW5pdFNlZ21lbnQoKSB7XFxuICAgIHRoaXMuc3RhdGUuaW5pdFNlZ21lbnRBcnJpdmVkID0gdHJ1ZTtcXG4gICAgdGhpcy5tc2UuYWRkU291cmNlQnVmZmVycygpO1xcbiAgfVxcblxcbiAgX2hhbmRsZU1lZGlhU2VnbWVudCgpIHtcXG4gICAgdGhpcy5tc2UuYWRkU291cmNlQnVmZmVycygpO1xcbiAgICB0aGlzLm1zZS5kb0FwcGVuZCgpO1xcbiAgfVxcblxcbiAgX2hhbmRsZVNvdXJjZVVwZGF0ZUVuZCgpIHtcXG4gICAgY29uc3QgdGltZSA9IHRoaXMuX3BsYXllci5jdXJyZW50VGltZTtcXG4gICAgY29uc3QgdmlkZW8gPSB0aGlzLl9wbGF5ZXIudmlkZW87XFxuICAgIGNvbnN0IHByZWxvYWRUaW1lID0gdGhpcy5fcGxheWVyLmNvbmZpZy5wcmVsb2FkVGltZSB8fCA1O1xcblxcbiAgICBjb25zdCB7IGxlbmd0aCB9ID0gdmlkZW8uYnVmZmVyZWQ7XFxuXFxuICAgIGlmIChsZW5ndGggPT09IDApIHtcXG4gICAgICByZXR1cm47XFxuICAgIH1cXG5cXG4gICAgY29uc3QgYnVmZmVyRW5kID0gdmlkZW8uYnVmZmVyZWQuZW5kKGxlbmd0aCAtIDEpO1xcbiAgICBpZiAoYnVmZmVyRW5kIC0gdGltZSA+IHByZWxvYWRUaW1lICogMikge1xcbiAgICAgIHRoaXMuX3BsYXllci5jdXJyZW50VGltZSA9IGJ1ZmZlckVuZCAtIHByZWxvYWRUaW1lO1xcbiAgICB9XFxuICB9XFxuXFxuICBfaGFuZGxlVGltZVVwZGF0ZSgpIHtcXG4gICAgY29uc3QgdGltZSA9IHRoaXMuX3BsYXllci5jdXJyZW50VGltZTtcXG4gICAgaWYgKHRpbWUgPiAyKSB7XFxuICAgICAgLy8g5Zyo55u05pKt5pe25Y+K5pe25riF56m6YnVmZmVy77yM6ZmN5L2O55u05pKt5YaF5a2Y5Y2g55SoXFxuICAgICAgdGhpcy5tc2UucmVtb3ZlKHRpbWUgLSAyKTtcXG4gICAgfVxcbiAgfVxcblxcbiAgX2hhbmRsZU5ldHdvcmtFcnJvcigpIHtcXG4gICAgdGhpcy5fcGxheWVyLmVtaXQoJ2Vycm9yJywgbmV3IF94Z3BsYXllcjIuZGVmYXVsdC5FcnJvcnMoJ25ldHdvcmsnLCB0aGlzLl9wbGF5ZXIuY29uZmlnLnVybCkpO1xcbiAgfVxcblxcbiAgX2hhbmRsZURlbXV4RXJyb3IoKSB7XFxuICAgIHRoaXMuX3BsYXllci5lbWl0KCdlcnJvcicsIG5ldyBfeGdwbGF5ZXIyLmRlZmF1bHQuRXJyb3JzKCdwYXJzZScsIHRoaXMuX3BsYXllci5jb25maWcudXJsKSk7XFxuICB9XFxuXFxuICBzZWVrKCkge1xcbiAgICBpZiAoIXRoaXMuc3RhdGUuaW5pdFNlZ21lbnRBcnJpdmVkKSB7XFxuICAgICAgdGhpcy5sb2FkRGF0YSgpO1xcbiAgICB9XFxuICB9XFxuXFxuICBsb2FkRGF0YSgpIHtcXG4gICAgdGhpcy5lbWl0KExPQURFUl9FVkVOVFMuTEFERVJfU1RBUlQsIHRoaXMuX3BsYXllci5jb25maWcudXJsKTtcXG4gIH1cXG5cXG4gIHBhdXNlKCkge1xcbiAgICBjb25zdCBsb2FkZXIgPSB0aGlzLl9jb250ZXh0LmdldEluc3RhbmNlKCdGRVRDSF9MT0FERVInKTtcXG5cXG4gICAgaWYgKGxvYWRlcikge1xcbiAgICAgIGxvYWRlci5jYW5jZWwoKTtcXG4gICAgfVxcbiAgfVxcbn1cXG5leHBvcnRzLmRlZmF1bHQgPSBGbHZDb250cm9sbGVyO1xcblxcbi8vIyBzb3VyY2VVUkw9d2VicGFjazovL3hncGxheWVyLWZsdi8uL3NyYy9mbHYtbGl2ZS5qcz9cIil9LFwiLi9zcmMvaW5kZXguanNcIjpcbi8qISoqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9zcmMvaW5kZXguanMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgbm8gc3RhdGljIGV4cG9ydHMgZm91bmQgKi9mdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXtcInVzZSBzdHJpY3RcIjtldmFsKFwiXFxuXFxudmFyIF94Z3BsYXllciA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIHhncGxheWVyICovIFxcXCJ4Z3BsYXllclxcXCIpO1xcblxcbnZhciBfeGdwbGF5ZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfeGdwbGF5ZXIpO1xcblxcbnZhciBfeGdwbGF5ZXJVdGlscyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIHhncGxheWVyLXV0aWxzICovIFxcXCIuLi94Z3BsYXllci11dGlscy9pbmRleC5qc1xcXCIpO1xcblxcbnZhciBfZmx2TGl2ZSA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vZmx2LWxpdmUgKi8gXFxcIi4vc3JjL2Zsdi1saXZlLmpzXFxcIik7XFxuXFxudmFyIF9mbHZMaXZlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2ZsdkxpdmUpO1xcblxcbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XFxuXFxuY29uc3QgZmx2QWxsb3dlZEV2ZW50cyA9IF94Z3BsYXllclV0aWxzLkVWRU5UUy5GbHZBbGxvd2VkRXZlbnRzO1xcblxcbmNsYXNzIEZsdlBsYXllciBleHRlbmRzIF94Z3BsYXllcjIuZGVmYXVsdCB7XFxuICBjb25zdHJ1Y3Rvcihjb25maWcpIHtcXG4gICAgc3VwZXIoY29uZmlnKTtcXG4gICAgdGhpcy5jb250ZXh0ID0gbmV3IF94Z3BsYXllclV0aWxzLkNvbnRleHQoZmx2QWxsb3dlZEV2ZW50cyk7XFxuICAgIHRoaXMuaW5pdEV2ZW50cygpO1xcbiAgICAvLyBjb25zdCBwcmVsb2FkVGltZSA9IHBsYXllci5jb25maWcucHJlbG9hZFRpbWUgfHwgMTVcXG4gIH1cXG5cXG4gIHN0YXJ0KCkge1xcbiAgICB0aGlzLmluaXRGbHYoKTtcXG4gICAgdGhpcy5jb250ZXh0LmluaXQoKTtcXG4gICAgc3VwZXIuc3RhcnQodGhpcy5mbHYubXNlLnVybCk7XFxuICB9XFxuXFxuICBpbml0Rmx2RXZlbnRzKGZsdikge1xcbiAgICBjb25zdCBwbGF5ZXIgPSB0aGlzO1xcbiAgICBmbHYub25jZShfeGdwbGF5ZXJVdGlscy5FVkVOVFMuUkVNVVhfRVZFTlRTLklOSVRfU0VHTUVOVCwgKCkgPT4ge1xcbiAgICAgIF94Z3BsYXllcjIuZGVmYXVsdC51dGlsLmFkZENsYXNzKHBsYXllci5yb290LCAneGdwbGF5ZXItaXMtbGl2ZScpO1xcbiAgICAgIGlmICghX3hncGxheWVyMi5kZWZhdWx0LnV0aWwuZmluZERvbSh0aGlzLnJvb3QsICd4Zy1saXZlJykpIHtcXG4gICAgICAgIGNvbnN0IGxpdmUgPSBfeGdwbGF5ZXIyLmRlZmF1bHQudXRpbC5jcmVhdGVEb20oJ3hnLWxpdmUnLCAn5q2j5Zyo55u05pKtJywge30sICd4Z3BsYXllci1saXZlJyk7XFxuICAgICAgICBwbGF5ZXIuY29udHJvbHMuYXBwZW5kQ2hpbGQobGl2ZSk7XFxuICAgICAgfVxcbiAgICB9KTtcXG5cXG4gICAgZmx2Lm9uY2UoX3hncGxheWVyVXRpbHMuRVZFTlRTLkxPQURFUl9FVkVOVFMuTE9BREVSX0NPTVBMRVRFLCAoKSA9PiB7XFxuICAgICAgLy8g55u05pKt5a6M5oiQ77yM5b6F5pKt5pS+5Zmo5pKt5a6M57yT5a2Y5ZCO5Y+R6YCB5YWz6Zet5LqL5Lu2XFxuICAgICAgaWYgKCFwbGF5ZXIucGF1c2VkKSB7XFxuICAgICAgICBjb25zdCB0aW1lciA9IHNldEludGVydmFsKCgpID0+IHtcXG4gICAgICAgICAgY29uc3QgZW5kID0gcGxheWVyLmdldEJ1ZmZlcmVkUmFuZ2UoKVsxXTtcXG4gICAgICAgICAgaWYgKE1hdGguYWJzKHBsYXllci5jdXJyZW50VGltZSAtIGVuZCkgPCAwLjUpIHtcXG4gICAgICAgICAgICBwbGF5ZXIuZW1pdCgnZW5kZWQnKTtcXG4gICAgICAgICAgICB3aW5kb3cuY2xlYXJJbnRlcnZhbCh0aW1lcik7XFxuICAgICAgICAgIH1cXG4gICAgICAgIH0sIDIwMCk7XFxuICAgICAgfVxcbiAgICB9KTtcXG4gIH1cXG5cXG4gIGluaXRFdmVudHMoKSB7XFxuICAgIHRoaXMub24oJ3RpbWV1cGRhdGUnLCAoKSA9PiB7XFxuICAgICAgdGhpcy5sb2FkRGF0YSgpO1xcbiAgICB9KTtcXG5cXG4gICAgdGhpcy5vbignc2Vla2luZycsICgpID0+IHtcXG4gICAgICBjb25zdCB0aW1lID0gdGhpcy5jdXJyZW50VGltZTtcXG4gICAgICBjb25zdCByYW5nZSA9IHRoaXMuZ2V0QnVmZmVyZWRSYW5nZSgpO1xcbiAgICAgIGlmICh0aW1lID4gcmFuZ2VbMV0gfHwgdGltZSA8IHJhbmdlWzBdKSB7XFxuICAgICAgICB0aGlzLmZsdi5zZWVrKHRoaXMuY3VycmVudFRpbWUpO1xcbiAgICAgIH1cXG4gICAgfSk7XFxuICB9XFxuXFxuICBpbml0Rmx2KCkge1xcbiAgICBjb25zdCBmbHYgPSB0aGlzLmNvbnRleHQucmVnaXN0cnkoJ0ZMVl9DT05UUk9MTEVSJywgX2ZsdkxpdmUyLmRlZmF1bHQpKHRoaXMpO1xcbiAgICB0aGlzLmluaXRGbHZFdmVudHMoZmx2KTtcXG4gICAgdGhpcy5mbHYgPSBmbHY7XFxuICB9XFxuXFxuICBwbGF5KCkge1xcbiAgICBpZiAodGhpcy5faGFzU3RhcnQpIHtcXG4gICAgICB0aGlzLl9kZXN0cm95KCk7XFxuICAgICAgdGhpcy5jb250ZXh0ID0gbmV3IF94Z3BsYXllclV0aWxzLkNvbnRleHQoZmx2QWxsb3dlZEV2ZW50cyk7XFxuICAgICAgY29uc3QgZmx2ID0gdGhpcy5jb250ZXh0LnJlZ2lzdHJ5KCdGTFZfQ09OVFJPTExFUicsIF9mbHZMaXZlMi5kZWZhdWx0KSh0aGlzKTtcXG4gICAgICB0aGlzLmluaXRGbHZFdmVudHMoZmx2KTtcXG4gICAgICB0aGlzLmZsdiA9IGZsdjtcXG4gICAgICB0aGlzLmNvbnRleHQuaW5pdCgpO1xcbiAgICAgIHN1cGVyLnN0YXJ0KGZsdi5tc2UudXJsKTtcXG4gICAgICBzdXBlci5wbGF5KCk7XFxuICAgIH0gZWxzZSB7XFxuICAgICAgc3VwZXIucGxheSgpO1xcbiAgICB9XFxuICB9XFxuXFxuICBwYXVzZSgpIHtcXG4gICAgc3VwZXIucGF1c2UoKTtcXG4gICAgaWYgKHRoaXMuZmx2KSB7XFxuICAgICAgdGhpcy5mbHYucGF1c2UoKTtcXG4gICAgfVxcbiAgfVxcblxcbiAgbG9hZERhdGEodGltZSA9IHRoaXMuY3VycmVudFRpbWUpIHtcXG4gICAgaWYgKHRoaXMuZmx2KSB7XFxuICAgICAgdGhpcy5mbHYuc2Vlayh0aW1lKTtcXG4gICAgfVxcbiAgfVxcblxcbiAgZGVzdHJveSgpIHtcXG4gICAgdGhpcy5fZGVzdHJveSgpO1xcbiAgICBzdXBlci5kZXN0cm95KCk7XFxuICB9XFxuXFxuICBfZGVzdHJveSgpIHtcXG4gICAgdGhpcy5jb250ZXh0LmRlc3Ryb3koKTtcXG4gICAgdGhpcy5mbHYgPSBudWxsO1xcbiAgICB0aGlzLmNvbnRleHQgPSBudWxsO1xcbiAgfVxcblxcbiAgZ2V0IHNyYygpIHtcXG4gICAgcmV0dXJuIHRoaXMuY3VycmVudFNyYztcXG4gIH1cXG5cXG4gIHNldCBzcmModXJsKSB7XFxuICAgIHRoaXMucGxheWVyLmNvbmZpZy51cmwgPSB1cmw7XFxuICAgIGlmICghdGhpcy5wYXVzZWQpIHtcXG4gICAgICB0aGlzLnBhdXNlKCk7XFxuICAgICAgdGhpcy5vbmNlKCdwYXVzZScsICgpID0+IHtcXG4gICAgICAgIHRoaXMuc3RhcnQodXJsKTtcXG4gICAgICB9KTtcXG4gICAgICB0aGlzLm9uY2UoJ2NhbnBsYXknLCAoKSA9PiB7XFxuICAgICAgICB0aGlzLnBsYXkoKTtcXG4gICAgICB9KTtcXG4gICAgfSBlbHNlIHtcXG4gICAgICB0aGlzLnN0YXJ0KHVybCk7XFxuICAgIH1cXG4gICAgdGhpcy5vbmNlKCdjYW5wbGF5JywgKCkgPT4ge1xcbiAgICAgIHRoaXMuY3VycmVudFRpbWUgPSAwO1xcbiAgICB9KTtcXG4gIH1cXG59XFxuXFxubW9kdWxlLmV4cG9ydHMgPSBGbHZQbGF5ZXI7XFxuXFxuLy8jIHNvdXJjZVVSTD13ZWJwYWNrOi8veGdwbGF5ZXItZmx2Ly4vc3JjL2luZGV4LmpzP1wiKX0sMDpcbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogbXVsdGkgLi9zcmMvaW5kZXguanMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgbm8gc3RhdGljIGV4cG9ydHMgZm91bmQgKi9mdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXtldmFsKCdtb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vc3JjL2luZGV4LmpzICovXCIuL3NyYy9pbmRleC5qc1wiKTtcXG5cXG5cXG4vLyMgc291cmNlVVJMPXdlYnBhY2s6Ly94Z3BsYXllci1mbHYvbXVsdGlfLi9zcmMvaW5kZXguanM/Jyl9LHhncGxheWVyOlxuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIGV4dGVybmFsIFwieGdwbGF5ZXJcIiAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIG5vIHN0YXRpYyBleHBvcnRzIGZvdW5kICovZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMpe2V2YWwoXCJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfeGdwbGF5ZXJfXztcXG5cXG4vLyMgc291cmNlVVJMPXdlYnBhY2s6Ly94Z3BsYXllci1mbHYvZXh0ZXJuYWxfJTIyeGdwbGF5ZXIlMjI/XCIpfX0pfSkpOyIsIihmdW5jdGlvbiB3ZWJwYWNrVW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbihyb290LCBmYWN0b3J5KSB7XG5cdGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlID09PSAnb2JqZWN0Jylcblx0XHRtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkocmVxdWlyZShcInhncGxheWVyXCIpKTtcblx0ZWxzZSBpZih0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpXG5cdFx0ZGVmaW5lKFtcInhncGxheWVyXCJdLCBmYWN0b3J5KTtcblx0ZWxzZSBpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcpXG5cdFx0ZXhwb3J0c1tcInhncGxheWVyLWZsdlwiXSA9IGZhY3RvcnkocmVxdWlyZShcInhncGxheWVyXCIpKTtcblx0ZWxzZVxuXHRcdHJvb3RbXCJ4Z3BsYXllci1mbHZcIl0gPSBmYWN0b3J5KHJvb3RbXCJ4Z3BsYXllclwiXSk7XG59KSh3aW5kb3csIGZ1bmN0aW9uKF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfeGdwbGF5ZXJfXykge1xucmV0dXJuICIsIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAwKTtcbiIsIi8vIENvcHlyaWdodCBKb3llbnQsIEluYy4gYW5kIG90aGVyIE5vZGUgY29udHJpYnV0b3JzLlxuLy9cbi8vIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhXG4vLyBjb3B5IG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlXG4vLyBcIlNvZnR3YXJlXCIpLCB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmdcbi8vIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCxcbi8vIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXRcbi8vIHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZVxuLy8gZm9sbG93aW5nIGNvbmRpdGlvbnM6XG4vL1xuLy8gVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWRcbi8vIGluIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuLy9cbi8vIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1Ncbi8vIE9SIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0Zcbi8vIE1FUkNIQU5UQUJJTElUWSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU5cbi8vIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLFxuLy8gREFNQUdFUyBPUiBPVEhFUiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SXG4vLyBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFXG4vLyBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLlxuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBSID0gdHlwZW9mIFJlZmxlY3QgPT09ICdvYmplY3QnID8gUmVmbGVjdCA6IG51bGxcbnZhciBSZWZsZWN0QXBwbHkgPSBSICYmIHR5cGVvZiBSLmFwcGx5ID09PSAnZnVuY3Rpb24nXG4gID8gUi5hcHBseVxuICA6IGZ1bmN0aW9uIFJlZmxlY3RBcHBseSh0YXJnZXQsIHJlY2VpdmVyLCBhcmdzKSB7XG4gICAgcmV0dXJuIEZ1bmN0aW9uLnByb3RvdHlwZS5hcHBseS5jYWxsKHRhcmdldCwgcmVjZWl2ZXIsIGFyZ3MpO1xuICB9XG5cbnZhciBSZWZsZWN0T3duS2V5c1xuaWYgKFIgJiYgdHlwZW9mIFIub3duS2V5cyA9PT0gJ2Z1bmN0aW9uJykge1xuICBSZWZsZWN0T3duS2V5cyA9IFIub3duS2V5c1xufSBlbHNlIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7XG4gIFJlZmxlY3RPd25LZXlzID0gZnVuY3Rpb24gUmVmbGVjdE93bktleXModGFyZ2V0KSB7XG4gICAgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHRhcmdldClcbiAgICAgIC5jb25jYXQoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyh0YXJnZXQpKTtcbiAgfTtcbn0gZWxzZSB7XG4gIFJlZmxlY3RPd25LZXlzID0gZnVuY3Rpb24gUmVmbGVjdE93bktleXModGFyZ2V0KSB7XG4gICAgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHRhcmdldCk7XG4gIH07XG59XG5cbmZ1bmN0aW9uIFByb2Nlc3NFbWl0V2FybmluZyh3YXJuaW5nKSB7XG4gIGlmIChjb25zb2xlICYmIGNvbnNvbGUud2FybikgY29uc29sZS53YXJuKHdhcm5pbmcpO1xufVxuXG52YXIgTnVtYmVySXNOYU4gPSBOdW1iZXIuaXNOYU4gfHwgZnVuY3Rpb24gTnVtYmVySXNOYU4odmFsdWUpIHtcbiAgcmV0dXJuIHZhbHVlICE9PSB2YWx1ZTtcbn1cblxuZnVuY3Rpb24gRXZlbnRFbWl0dGVyKCkge1xuICBFdmVudEVtaXR0ZXIuaW5pdC5jYWxsKHRoaXMpO1xufVxubW9kdWxlLmV4cG9ydHMgPSBFdmVudEVtaXR0ZXI7XG5cbi8vIEJhY2t3YXJkcy1jb21wYXQgd2l0aCBub2RlIDAuMTAueFxuRXZlbnRFbWl0dGVyLkV2ZW50RW1pdHRlciA9IEV2ZW50RW1pdHRlcjtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5fZXZlbnRzID0gdW5kZWZpbmVkO1xuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5fZXZlbnRzQ291bnQgPSAwO1xuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5fbWF4TGlzdGVuZXJzID0gdW5kZWZpbmVkO1xuXG4vLyBCeSBkZWZhdWx0IEV2ZW50RW1pdHRlcnMgd2lsbCBwcmludCBhIHdhcm5pbmcgaWYgbW9yZSB0aGFuIDEwIGxpc3RlbmVycyBhcmVcbi8vIGFkZGVkIHRvIGl0LiBUaGlzIGlzIGEgdXNlZnVsIGRlZmF1bHQgd2hpY2ggaGVscHMgZmluZGluZyBtZW1vcnkgbGVha3MuXG52YXIgZGVmYXVsdE1heExpc3RlbmVycyA9IDEwO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoRXZlbnRFbWl0dGVyLCAnZGVmYXVsdE1heExpc3RlbmVycycsIHtcbiAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gZGVmYXVsdE1heExpc3RlbmVycztcbiAgfSxcbiAgc2V0OiBmdW5jdGlvbihhcmcpIHtcbiAgICBpZiAodHlwZW9mIGFyZyAhPT0gJ251bWJlcicgfHwgYXJnIDwgMCB8fCBOdW1iZXJJc05hTihhcmcpKSB7XG4gICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignVGhlIHZhbHVlIG9mIFwiZGVmYXVsdE1heExpc3RlbmVyc1wiIGlzIG91dCBvZiByYW5nZS4gSXQgbXVzdCBiZSBhIG5vbi1uZWdhdGl2ZSBudW1iZXIuIFJlY2VpdmVkICcgKyBhcmcgKyAnLicpO1xuICAgIH1cbiAgICBkZWZhdWx0TWF4TGlzdGVuZXJzID0gYXJnO1xuICB9XG59KTtcblxuRXZlbnRFbWl0dGVyLmluaXQgPSBmdW5jdGlvbigpIHtcblxuICBpZiAodGhpcy5fZXZlbnRzID09PSB1bmRlZmluZWQgfHxcbiAgICAgIHRoaXMuX2V2ZW50cyA9PT0gT2JqZWN0LmdldFByb3RvdHlwZU9mKHRoaXMpLl9ldmVudHMpIHtcbiAgICB0aGlzLl9ldmVudHMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgIHRoaXMuX2V2ZW50c0NvdW50ID0gMDtcbiAgfVxuXG4gIHRoaXMuX21heExpc3RlbmVycyA9IHRoaXMuX21heExpc3RlbmVycyB8fCB1bmRlZmluZWQ7XG59O1xuXG4vLyBPYnZpb3VzbHkgbm90IGFsbCBFbWl0dGVycyBzaG91bGQgYmUgbGltaXRlZCB0byAxMC4gVGhpcyBmdW5jdGlvbiBhbGxvd3Ncbi8vIHRoYXQgdG8gYmUgaW5jcmVhc2VkLiBTZXQgdG8gemVybyBmb3IgdW5saW1pdGVkLlxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5zZXRNYXhMaXN0ZW5lcnMgPSBmdW5jdGlvbiBzZXRNYXhMaXN0ZW5lcnMobikge1xuICBpZiAodHlwZW9mIG4gIT09ICdudW1iZXInIHx8IG4gPCAwIHx8IE51bWJlcklzTmFOKG4pKSB7XG4gICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ1RoZSB2YWx1ZSBvZiBcIm5cIiBpcyBvdXQgb2YgcmFuZ2UuIEl0IG11c3QgYmUgYSBub24tbmVnYXRpdmUgbnVtYmVyLiBSZWNlaXZlZCAnICsgbiArICcuJyk7XG4gIH1cbiAgdGhpcy5fbWF4TGlzdGVuZXJzID0gbjtcbiAgcmV0dXJuIHRoaXM7XG59O1xuXG5mdW5jdGlvbiAkZ2V0TWF4TGlzdGVuZXJzKHRoYXQpIHtcbiAgaWYgKHRoYXQuX21heExpc3RlbmVycyA9PT0gdW5kZWZpbmVkKVxuICAgIHJldHVybiBFdmVudEVtaXR0ZXIuZGVmYXVsdE1heExpc3RlbmVycztcbiAgcmV0dXJuIHRoYXQuX21heExpc3RlbmVycztcbn1cblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5nZXRNYXhMaXN0ZW5lcnMgPSBmdW5jdGlvbiBnZXRNYXhMaXN0ZW5lcnMoKSB7XG4gIHJldHVybiAkZ2V0TWF4TGlzdGVuZXJzKHRoaXMpO1xufTtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5lbWl0ID0gZnVuY3Rpb24gZW1pdCh0eXBlKSB7XG4gIHZhciBhcmdzID0gW107XG4gIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSBhcmdzLnB1c2goYXJndW1lbnRzW2ldKTtcbiAgdmFyIGRvRXJyb3IgPSAodHlwZSA9PT0gJ2Vycm9yJyk7XG5cbiAgdmFyIGV2ZW50cyA9IHRoaXMuX2V2ZW50cztcbiAgaWYgKGV2ZW50cyAhPT0gdW5kZWZpbmVkKVxuICAgIGRvRXJyb3IgPSAoZG9FcnJvciAmJiBldmVudHMuZXJyb3IgPT09IHVuZGVmaW5lZCk7XG4gIGVsc2UgaWYgKCFkb0Vycm9yKVxuICAgIHJldHVybiBmYWxzZTtcblxuICAvLyBJZiB0aGVyZSBpcyBubyAnZXJyb3InIGV2ZW50IGxpc3RlbmVyIHRoZW4gdGhyb3cuXG4gIGlmIChkb0Vycm9yKSB7XG4gICAgdmFyIGVyO1xuICAgIGlmIChhcmdzLmxlbmd0aCA+IDApXG4gICAgICBlciA9IGFyZ3NbMF07XG4gICAgaWYgKGVyIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgIC8vIE5vdGU6IFRoZSBjb21tZW50cyBvbiB0aGUgYHRocm93YCBsaW5lcyBhcmUgaW50ZW50aW9uYWwsIHRoZXkgc2hvd1xuICAgICAgLy8gdXAgaW4gTm9kZSdzIG91dHB1dCBpZiB0aGlzIHJlc3VsdHMgaW4gYW4gdW5oYW5kbGVkIGV4Y2VwdGlvbi5cbiAgICAgIHRocm93IGVyOyAvLyBVbmhhbmRsZWQgJ2Vycm9yJyBldmVudFxuICAgIH1cbiAgICAvLyBBdCBsZWFzdCBnaXZlIHNvbWUga2luZCBvZiBjb250ZXh0IHRvIHRoZSB1c2VyXG4gICAgdmFyIGVyciA9IG5ldyBFcnJvcignVW5oYW5kbGVkIGVycm9yLicgKyAoZXIgPyAnICgnICsgZXIubWVzc2FnZSArICcpJyA6ICcnKSk7XG4gICAgZXJyLmNvbnRleHQgPSBlcjtcbiAgICB0aHJvdyBlcnI7IC8vIFVuaGFuZGxlZCAnZXJyb3InIGV2ZW50XG4gIH1cblxuICB2YXIgaGFuZGxlciA9IGV2ZW50c1t0eXBlXTtcblxuICBpZiAoaGFuZGxlciA9PT0gdW5kZWZpbmVkKVxuICAgIHJldHVybiBmYWxzZTtcblxuICBpZiAodHlwZW9mIGhhbmRsZXIgPT09ICdmdW5jdGlvbicpIHtcbiAgICBSZWZsZWN0QXBwbHkoaGFuZGxlciwgdGhpcywgYXJncyk7XG4gIH0gZWxzZSB7XG4gICAgdmFyIGxlbiA9IGhhbmRsZXIubGVuZ3RoO1xuICAgIHZhciBsaXN0ZW5lcnMgPSBhcnJheUNsb25lKGhhbmRsZXIsIGxlbik7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47ICsraSlcbiAgICAgIFJlZmxlY3RBcHBseShsaXN0ZW5lcnNbaV0sIHRoaXMsIGFyZ3MpO1xuICB9XG5cbiAgcmV0dXJuIHRydWU7XG59O1xuXG5mdW5jdGlvbiBfYWRkTGlzdGVuZXIodGFyZ2V0LCB0eXBlLCBsaXN0ZW5lciwgcHJlcGVuZCkge1xuICB2YXIgbTtcbiAgdmFyIGV2ZW50cztcbiAgdmFyIGV4aXN0aW5nO1xuXG4gIGlmICh0eXBlb2YgbGlzdGVuZXIgIT09ICdmdW5jdGlvbicpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdUaGUgXCJsaXN0ZW5lclwiIGFyZ3VtZW50IG11c3QgYmUgb2YgdHlwZSBGdW5jdGlvbi4gUmVjZWl2ZWQgdHlwZSAnICsgdHlwZW9mIGxpc3RlbmVyKTtcbiAgfVxuXG4gIGV2ZW50cyA9IHRhcmdldC5fZXZlbnRzO1xuICBpZiAoZXZlbnRzID09PSB1bmRlZmluZWQpIHtcbiAgICBldmVudHMgPSB0YXJnZXQuX2V2ZW50cyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgdGFyZ2V0Ll9ldmVudHNDb3VudCA9IDA7XG4gIH0gZWxzZSB7XG4gICAgLy8gVG8gYXZvaWQgcmVjdXJzaW9uIGluIHRoZSBjYXNlIHRoYXQgdHlwZSA9PT0gXCJuZXdMaXN0ZW5lclwiISBCZWZvcmVcbiAgICAvLyBhZGRpbmcgaXQgdG8gdGhlIGxpc3RlbmVycywgZmlyc3QgZW1pdCBcIm5ld0xpc3RlbmVyXCIuXG4gICAgaWYgKGV2ZW50cy5uZXdMaXN0ZW5lciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICB0YXJnZXQuZW1pdCgnbmV3TGlzdGVuZXInLCB0eXBlLFxuICAgICAgICAgICAgICAgICAgbGlzdGVuZXIubGlzdGVuZXIgPyBsaXN0ZW5lci5saXN0ZW5lciA6IGxpc3RlbmVyKTtcblxuICAgICAgLy8gUmUtYXNzaWduIGBldmVudHNgIGJlY2F1c2UgYSBuZXdMaXN0ZW5lciBoYW5kbGVyIGNvdWxkIGhhdmUgY2F1c2VkIHRoZVxuICAgICAgLy8gdGhpcy5fZXZlbnRzIHRvIGJlIGFzc2lnbmVkIHRvIGEgbmV3IG9iamVjdFxuICAgICAgZXZlbnRzID0gdGFyZ2V0Ll9ldmVudHM7XG4gICAgfVxuICAgIGV4aXN0aW5nID0gZXZlbnRzW3R5cGVdO1xuICB9XG5cbiAgaWYgKGV4aXN0aW5nID09PSB1bmRlZmluZWQpIHtcbiAgICAvLyBPcHRpbWl6ZSB0aGUgY2FzZSBvZiBvbmUgbGlzdGVuZXIuIERvbid0IG5lZWQgdGhlIGV4dHJhIGFycmF5IG9iamVjdC5cbiAgICBleGlzdGluZyA9IGV2ZW50c1t0eXBlXSA9IGxpc3RlbmVyO1xuICAgICsrdGFyZ2V0Ll9ldmVudHNDb3VudDtcbiAgfSBlbHNlIHtcbiAgICBpZiAodHlwZW9mIGV4aXN0aW5nID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAvLyBBZGRpbmcgdGhlIHNlY29uZCBlbGVtZW50LCBuZWVkIHRvIGNoYW5nZSB0byBhcnJheS5cbiAgICAgIGV4aXN0aW5nID0gZXZlbnRzW3R5cGVdID1cbiAgICAgICAgcHJlcGVuZCA/IFtsaXN0ZW5lciwgZXhpc3RpbmddIDogW2V4aXN0aW5nLCBsaXN0ZW5lcl07XG4gICAgICAvLyBJZiB3ZSd2ZSBhbHJlYWR5IGdvdCBhbiBhcnJheSwganVzdCBhcHBlbmQuXG4gICAgfSBlbHNlIGlmIChwcmVwZW5kKSB7XG4gICAgICBleGlzdGluZy51bnNoaWZ0KGxpc3RlbmVyKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZXhpc3RpbmcucHVzaChsaXN0ZW5lcik7XG4gICAgfVxuXG4gICAgLy8gQ2hlY2sgZm9yIGxpc3RlbmVyIGxlYWtcbiAgICBtID0gJGdldE1heExpc3RlbmVycyh0YXJnZXQpO1xuICAgIGlmIChtID4gMCAmJiBleGlzdGluZy5sZW5ndGggPiBtICYmICFleGlzdGluZy53YXJuZWQpIHtcbiAgICAgIGV4aXN0aW5nLndhcm5lZCA9IHRydWU7XG4gICAgICAvLyBObyBlcnJvciBjb2RlIGZvciB0aGlzIHNpbmNlIGl0IGlzIGEgV2FybmluZ1xuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXJlc3RyaWN0ZWQtc3ludGF4XG4gICAgICB2YXIgdyA9IG5ldyBFcnJvcignUG9zc2libGUgRXZlbnRFbWl0dGVyIG1lbW9yeSBsZWFrIGRldGVjdGVkLiAnICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZXhpc3RpbmcubGVuZ3RoICsgJyAnICsgU3RyaW5nKHR5cGUpICsgJyBsaXN0ZW5lcnMgJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICdhZGRlZC4gVXNlIGVtaXR0ZXIuc2V0TWF4TGlzdGVuZXJzKCkgdG8gJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICdpbmNyZWFzZSBsaW1pdCcpO1xuICAgICAgdy5uYW1lID0gJ01heExpc3RlbmVyc0V4Y2VlZGVkV2FybmluZyc7XG4gICAgICB3LmVtaXR0ZXIgPSB0YXJnZXQ7XG4gICAgICB3LnR5cGUgPSB0eXBlO1xuICAgICAgdy5jb3VudCA9IGV4aXN0aW5nLmxlbmd0aDtcbiAgICAgIFByb2Nlc3NFbWl0V2FybmluZyh3KTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gdGFyZ2V0O1xufVxuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLmFkZExpc3RlbmVyID0gZnVuY3Rpb24gYWRkTGlzdGVuZXIodHlwZSwgbGlzdGVuZXIpIHtcbiAgcmV0dXJuIF9hZGRMaXN0ZW5lcih0aGlzLCB0eXBlLCBsaXN0ZW5lciwgZmFsc2UpO1xufTtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5vbiA9IEV2ZW50RW1pdHRlci5wcm90b3R5cGUuYWRkTGlzdGVuZXI7XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUucHJlcGVuZExpc3RlbmVyID1cbiAgICBmdW5jdGlvbiBwcmVwZW5kTGlzdGVuZXIodHlwZSwgbGlzdGVuZXIpIHtcbiAgICAgIHJldHVybiBfYWRkTGlzdGVuZXIodGhpcywgdHlwZSwgbGlzdGVuZXIsIHRydWUpO1xuICAgIH07XG5cbmZ1bmN0aW9uIG9uY2VXcmFwcGVyKCkge1xuICB2YXIgYXJncyA9IFtdO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgYXJncy5wdXNoKGFyZ3VtZW50c1tpXSk7XG4gIGlmICghdGhpcy5maXJlZCkge1xuICAgIHRoaXMudGFyZ2V0LnJlbW92ZUxpc3RlbmVyKHRoaXMudHlwZSwgdGhpcy53cmFwRm4pO1xuICAgIHRoaXMuZmlyZWQgPSB0cnVlO1xuICAgIFJlZmxlY3RBcHBseSh0aGlzLmxpc3RlbmVyLCB0aGlzLnRhcmdldCwgYXJncyk7XG4gIH1cbn1cblxuZnVuY3Rpb24gX29uY2VXcmFwKHRhcmdldCwgdHlwZSwgbGlzdGVuZXIpIHtcbiAgdmFyIHN0YXRlID0geyBmaXJlZDogZmFsc2UsIHdyYXBGbjogdW5kZWZpbmVkLCB0YXJnZXQ6IHRhcmdldCwgdHlwZTogdHlwZSwgbGlzdGVuZXI6IGxpc3RlbmVyIH07XG4gIHZhciB3cmFwcGVkID0gb25jZVdyYXBwZXIuYmluZChzdGF0ZSk7XG4gIHdyYXBwZWQubGlzdGVuZXIgPSBsaXN0ZW5lcjtcbiAgc3RhdGUud3JhcEZuID0gd3JhcHBlZDtcbiAgcmV0dXJuIHdyYXBwZWQ7XG59XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUub25jZSA9IGZ1bmN0aW9uIG9uY2UodHlwZSwgbGlzdGVuZXIpIHtcbiAgaWYgKHR5cGVvZiBsaXN0ZW5lciAhPT0gJ2Z1bmN0aW9uJykge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1RoZSBcImxpc3RlbmVyXCIgYXJndW1lbnQgbXVzdCBiZSBvZiB0eXBlIEZ1bmN0aW9uLiBSZWNlaXZlZCB0eXBlICcgKyB0eXBlb2YgbGlzdGVuZXIpO1xuICB9XG4gIHRoaXMub24odHlwZSwgX29uY2VXcmFwKHRoaXMsIHR5cGUsIGxpc3RlbmVyKSk7XG4gIHJldHVybiB0aGlzO1xufTtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5wcmVwZW5kT25jZUxpc3RlbmVyID1cbiAgICBmdW5jdGlvbiBwcmVwZW5kT25jZUxpc3RlbmVyKHR5cGUsIGxpc3RlbmVyKSB7XG4gICAgICBpZiAodHlwZW9mIGxpc3RlbmVyICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1RoZSBcImxpc3RlbmVyXCIgYXJndW1lbnQgbXVzdCBiZSBvZiB0eXBlIEZ1bmN0aW9uLiBSZWNlaXZlZCB0eXBlICcgKyB0eXBlb2YgbGlzdGVuZXIpO1xuICAgICAgfVxuICAgICAgdGhpcy5wcmVwZW5kTGlzdGVuZXIodHlwZSwgX29uY2VXcmFwKHRoaXMsIHR5cGUsIGxpc3RlbmVyKSk7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4vLyBFbWl0cyBhICdyZW1vdmVMaXN0ZW5lcicgZXZlbnQgaWYgYW5kIG9ubHkgaWYgdGhlIGxpc3RlbmVyIHdhcyByZW1vdmVkLlxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5yZW1vdmVMaXN0ZW5lciA9XG4gICAgZnVuY3Rpb24gcmVtb3ZlTGlzdGVuZXIodHlwZSwgbGlzdGVuZXIpIHtcbiAgICAgIHZhciBsaXN0LCBldmVudHMsIHBvc2l0aW9uLCBpLCBvcmlnaW5hbExpc3RlbmVyO1xuXG4gICAgICBpZiAodHlwZW9mIGxpc3RlbmVyICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1RoZSBcImxpc3RlbmVyXCIgYXJndW1lbnQgbXVzdCBiZSBvZiB0eXBlIEZ1bmN0aW9uLiBSZWNlaXZlZCB0eXBlICcgKyB0eXBlb2YgbGlzdGVuZXIpO1xuICAgICAgfVxuXG4gICAgICBldmVudHMgPSB0aGlzLl9ldmVudHM7XG4gICAgICBpZiAoZXZlbnRzID09PSB1bmRlZmluZWQpXG4gICAgICAgIHJldHVybiB0aGlzO1xuXG4gICAgICBsaXN0ID0gZXZlbnRzW3R5cGVdO1xuICAgICAgaWYgKGxpc3QgPT09IHVuZGVmaW5lZClcbiAgICAgICAgcmV0dXJuIHRoaXM7XG5cbiAgICAgIGlmIChsaXN0ID09PSBsaXN0ZW5lciB8fCBsaXN0Lmxpc3RlbmVyID09PSBsaXN0ZW5lcikge1xuICAgICAgICBpZiAoLS10aGlzLl9ldmVudHNDb3VudCA9PT0gMClcbiAgICAgICAgICB0aGlzLl9ldmVudHMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgICAgICBlbHNlIHtcbiAgICAgICAgICBkZWxldGUgZXZlbnRzW3R5cGVdO1xuICAgICAgICAgIGlmIChldmVudHMucmVtb3ZlTGlzdGVuZXIpXG4gICAgICAgICAgICB0aGlzLmVtaXQoJ3JlbW92ZUxpc3RlbmVyJywgdHlwZSwgbGlzdC5saXN0ZW5lciB8fCBsaXN0ZW5lcik7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGxpc3QgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgcG9zaXRpb24gPSAtMTtcblxuICAgICAgICBmb3IgKGkgPSBsaXN0Lmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgICAgaWYgKGxpc3RbaV0gPT09IGxpc3RlbmVyIHx8IGxpc3RbaV0ubGlzdGVuZXIgPT09IGxpc3RlbmVyKSB7XG4gICAgICAgICAgICBvcmlnaW5hbExpc3RlbmVyID0gbGlzdFtpXS5saXN0ZW5lcjtcbiAgICAgICAgICAgIHBvc2l0aW9uID0gaTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChwb3NpdGlvbiA8IDApXG4gICAgICAgICAgcmV0dXJuIHRoaXM7XG5cbiAgICAgICAgaWYgKHBvc2l0aW9uID09PSAwKVxuICAgICAgICAgIGxpc3Quc2hpZnQoKTtcbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgc3BsaWNlT25lKGxpc3QsIHBvc2l0aW9uKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChsaXN0Lmxlbmd0aCA9PT0gMSlcbiAgICAgICAgICBldmVudHNbdHlwZV0gPSBsaXN0WzBdO1xuXG4gICAgICAgIGlmIChldmVudHMucmVtb3ZlTGlzdGVuZXIgIT09IHVuZGVmaW5lZClcbiAgICAgICAgICB0aGlzLmVtaXQoJ3JlbW92ZUxpc3RlbmVyJywgdHlwZSwgb3JpZ2luYWxMaXN0ZW5lciB8fCBsaXN0ZW5lcik7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUub2ZmID0gRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5yZW1vdmVMaXN0ZW5lcjtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5yZW1vdmVBbGxMaXN0ZW5lcnMgPVxuICAgIGZ1bmN0aW9uIHJlbW92ZUFsbExpc3RlbmVycyh0eXBlKSB7XG4gICAgICB2YXIgbGlzdGVuZXJzLCBldmVudHMsIGk7XG5cbiAgICAgIGV2ZW50cyA9IHRoaXMuX2V2ZW50cztcbiAgICAgIGlmIChldmVudHMgPT09IHVuZGVmaW5lZClcbiAgICAgICAgcmV0dXJuIHRoaXM7XG5cbiAgICAgIC8vIG5vdCBsaXN0ZW5pbmcgZm9yIHJlbW92ZUxpc3RlbmVyLCBubyBuZWVkIHRvIGVtaXRcbiAgICAgIGlmIChldmVudHMucmVtb3ZlTGlzdGVuZXIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgIHRoaXMuX2V2ZW50cyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgICAgICAgdGhpcy5fZXZlbnRzQ291bnQgPSAwO1xuICAgICAgICB9IGVsc2UgaWYgKGV2ZW50c1t0eXBlXSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgaWYgKC0tdGhpcy5fZXZlbnRzQ291bnQgPT09IDApXG4gICAgICAgICAgICB0aGlzLl9ldmVudHMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgIGRlbGV0ZSBldmVudHNbdHlwZV07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9XG5cbiAgICAgIC8vIGVtaXQgcmVtb3ZlTGlzdGVuZXIgZm9yIGFsbCBsaXN0ZW5lcnMgb24gYWxsIGV2ZW50c1xuICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhldmVudHMpO1xuICAgICAgICB2YXIga2V5O1xuICAgICAgICBmb3IgKGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgIGtleSA9IGtleXNbaV07XG4gICAgICAgICAgaWYgKGtleSA9PT0gJ3JlbW92ZUxpc3RlbmVyJykgY29udGludWU7XG4gICAgICAgICAgdGhpcy5yZW1vdmVBbGxMaXN0ZW5lcnMoa2V5KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJlbW92ZUFsbExpc3RlbmVycygncmVtb3ZlTGlzdGVuZXInKTtcbiAgICAgICAgdGhpcy5fZXZlbnRzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICAgICAgdGhpcy5fZXZlbnRzQ291bnQgPSAwO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgIH1cblxuICAgICAgbGlzdGVuZXJzID0gZXZlbnRzW3R5cGVdO1xuXG4gICAgICBpZiAodHlwZW9mIGxpc3RlbmVycyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICB0aGlzLnJlbW92ZUxpc3RlbmVyKHR5cGUsIGxpc3RlbmVycyk7XG4gICAgICB9IGVsc2UgaWYgKGxpc3RlbmVycyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIC8vIExJRk8gb3JkZXJcbiAgICAgICAgZm9yIChpID0gbGlzdGVuZXJzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgICAgdGhpcy5yZW1vdmVMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcnNbaV0pO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbmZ1bmN0aW9uIF9saXN0ZW5lcnModGFyZ2V0LCB0eXBlLCB1bndyYXApIHtcbiAgdmFyIGV2ZW50cyA9IHRhcmdldC5fZXZlbnRzO1xuXG4gIGlmIChldmVudHMgPT09IHVuZGVmaW5lZClcbiAgICByZXR1cm4gW107XG5cbiAgdmFyIGV2bGlzdGVuZXIgPSBldmVudHNbdHlwZV07XG4gIGlmIChldmxpc3RlbmVyID09PSB1bmRlZmluZWQpXG4gICAgcmV0dXJuIFtdO1xuXG4gIGlmICh0eXBlb2YgZXZsaXN0ZW5lciA9PT0gJ2Z1bmN0aW9uJylcbiAgICByZXR1cm4gdW53cmFwID8gW2V2bGlzdGVuZXIubGlzdGVuZXIgfHwgZXZsaXN0ZW5lcl0gOiBbZXZsaXN0ZW5lcl07XG5cbiAgcmV0dXJuIHVud3JhcCA/XG4gICAgdW53cmFwTGlzdGVuZXJzKGV2bGlzdGVuZXIpIDogYXJyYXlDbG9uZShldmxpc3RlbmVyLCBldmxpc3RlbmVyLmxlbmd0aCk7XG59XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUubGlzdGVuZXJzID0gZnVuY3Rpb24gbGlzdGVuZXJzKHR5cGUpIHtcbiAgcmV0dXJuIF9saXN0ZW5lcnModGhpcywgdHlwZSwgdHJ1ZSk7XG59O1xuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLnJhd0xpc3RlbmVycyA9IGZ1bmN0aW9uIHJhd0xpc3RlbmVycyh0eXBlKSB7XG4gIHJldHVybiBfbGlzdGVuZXJzKHRoaXMsIHR5cGUsIGZhbHNlKTtcbn07XG5cbkV2ZW50RW1pdHRlci5saXN0ZW5lckNvdW50ID0gZnVuY3Rpb24oZW1pdHRlciwgdHlwZSkge1xuICBpZiAodHlwZW9mIGVtaXR0ZXIubGlzdGVuZXJDb3VudCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIHJldHVybiBlbWl0dGVyLmxpc3RlbmVyQ291bnQodHlwZSk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGxpc3RlbmVyQ291bnQuY2FsbChlbWl0dGVyLCB0eXBlKTtcbiAgfVxufTtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5saXN0ZW5lckNvdW50ID0gbGlzdGVuZXJDb3VudDtcbmZ1bmN0aW9uIGxpc3RlbmVyQ291bnQodHlwZSkge1xuICB2YXIgZXZlbnRzID0gdGhpcy5fZXZlbnRzO1xuXG4gIGlmIChldmVudHMgIT09IHVuZGVmaW5lZCkge1xuICAgIHZhciBldmxpc3RlbmVyID0gZXZlbnRzW3R5cGVdO1xuXG4gICAgaWYgKHR5cGVvZiBldmxpc3RlbmVyID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICByZXR1cm4gMTtcbiAgICB9IGVsc2UgaWYgKGV2bGlzdGVuZXIgIT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIGV2bGlzdGVuZXIubGVuZ3RoO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiAwO1xufVxuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLmV2ZW50TmFtZXMgPSBmdW5jdGlvbiBldmVudE5hbWVzKCkge1xuICByZXR1cm4gdGhpcy5fZXZlbnRzQ291bnQgPiAwID8gUmVmbGVjdE93bktleXModGhpcy5fZXZlbnRzKSA6IFtdO1xufTtcblxuZnVuY3Rpb24gYXJyYXlDbG9uZShhcnIsIG4pIHtcbiAgdmFyIGNvcHkgPSBuZXcgQXJyYXkobik7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbjsgKytpKVxuICAgIGNvcHlbaV0gPSBhcnJbaV07XG4gIHJldHVybiBjb3B5O1xufVxuXG5mdW5jdGlvbiBzcGxpY2VPbmUobGlzdCwgaW5kZXgpIHtcbiAgZm9yICg7IGluZGV4ICsgMSA8IGxpc3QubGVuZ3RoOyBpbmRleCsrKVxuICAgIGxpc3RbaW5kZXhdID0gbGlzdFtpbmRleCArIDFdO1xuICBsaXN0LnBvcCgpO1xufVxuXG5mdW5jdGlvbiB1bndyYXBMaXN0ZW5lcnMoYXJyKSB7XG4gIHZhciByZXQgPSBuZXcgQXJyYXkoYXJyLmxlbmd0aCk7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgcmV0Lmxlbmd0aDsgKytpKSB7XG4gICAgcmV0W2ldID0gYXJyW2ldLmxpc3RlbmVyIHx8IGFycltpXTtcbiAgfVxuICByZXR1cm4gcmV0O1xufVxuIiwibW9kdWxlLmV4cG9ydHMgPSB7XG4gIFRyYWNrOiByZXF1aXJlKCcuL3NyYy90cmFjaycpLmRlZmF1bHQsXG4gIFRyYWNrczogcmVxdWlyZSgnLi9zcmMvdHJhY2snKS5UcmFja3MsXG4gIEF1ZGlvVHJhY2s6IHJlcXVpcmUoJy4vc3JjL3RyYWNrJykuQXVkaW9UcmFjayxcbiAgVmlkZW9UcmFjazogcmVxdWlyZSgnLi9zcmMvdHJhY2snKS5WaWRlb1RyYWNrLFxuXG4gIFhnQnVmZmVyOiByZXF1aXJlKCcuL3NyYy9idWZmZXInKS5YZ0J1ZmZlcixcbiAgUmVtdXhCdWZmZXI6IHJlcXVpcmUoJy4vc3JjL2J1ZmZlcicpLlJlbXV4QnVmZmVyLFxuXG4gIFByZVNvdXJjZTogcmVxdWlyZSgnLi9zcmMvcHJlc291Y2UnKS5kZWZhdWx0XG59O1xuIiwiZXhwb3J0IGNsYXNzIFhnQnVmZmVyIHtcbiAgLyoqXG4gICAqIEEgYnVmZmVyIHRvIHN0b3JlIGxvYWRlZCBkYXRhLlxuICAgKlxuICAgKiBAY2xhc3MgTG9hZGVyQnVmZmVyXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBsZW5ndGggLSBPcHRpb25hbCB0aGUgYnVmZmVyIHNpemVcbiAgICovXG4gIGNvbnN0cnVjdG9yIChsZW5ndGgpIHtcbiAgICB0aGlzLmxlbmd0aCA9IGxlbmd0aCB8fCAwXG4gICAgdGhpcy5oaXN0b3J5TGVuID0gbGVuZ3RoIHx8IDBcbiAgICB0aGlzLmFycmF5ID0gW11cbiAgICB0aGlzLm9mZnNldCA9IDBcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgZnVuY3Rpb24gdG8gcHVzaCBkYXRhLlxuICAgKlxuICAgKiBAcGFyYW0ge251bWJlcn0gZGF0YSAtIFRoZSBkYXRhIHRvIHB1c2ggaW50byB0aGUgYnVmZmVyXG4gICAqL1xuICBwdXNoIChkYXRhKSB7XG4gICAgdGhpcy5hcnJheS5wdXNoKGRhdGEpXG4gICAgdGhpcy5sZW5ndGggKz0gZGF0YS5ieXRlTGVuZ3RoXG4gICAgdGhpcy5oaXN0b3J5TGVuICs9IGRhdGEuYnl0ZUxlbmd0aFxuICB9XG5cbiAgLyoqXG4gICAqIFRoZSBmdW5jdGlvbiB0byBzaGlmdCBkYXRhLlxuICAgKlxuICAgKiBAcGFyYW0ge251bWJlcn0gbGVuZ3RoIC0gVGhlIHNpemUgb2Ygc2hpZnQuXG4gICAqL1xuICBzaGlmdCAobGVuZ3RoKSB7XG4gICAgaWYgKHRoaXMuYXJyYXkubGVuZ3RoIDwgMSkge1xuICAgICAgcmV0dXJuIG5ldyBVaW50OEFycmF5KDApXG4gICAgfVxuXG4gICAgaWYgKGxlbmd0aCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm4gdGhpcy5fc2hpZnRCdWZmZXIoKVxuICAgIH1cbiAgICBpZiAoKHRoaXMub2Zmc2V0ICsgbGVuZ3RoKSA9PT0gdGhpcy5hcnJheVswXS5sZW5ndGgpIHtcbiAgICAgIGxldCByZXQgPSB0aGlzLmFycmF5WzBdLnNsaWNlKHRoaXMub2Zmc2V0LCB0aGlzLm9mZnNldCArIGxlbmd0aClcbiAgICAgIHRoaXMub2Zmc2V0ID0gMFxuICAgICAgdGhpcy5hcnJheS5zaGlmdCgpXG4gICAgICB0aGlzLmxlbmd0aCAtPSBsZW5ndGhcbiAgICAgIHJldHVybiByZXRcbiAgICB9XG5cbiAgICBpZiAoKHRoaXMub2Zmc2V0ICsgbGVuZ3RoKSA8IHRoaXMuYXJyYXlbMF0ubGVuZ3RoKSB7XG4gICAgICBsZXQgcmV0ID0gdGhpcy5hcnJheVswXS5zbGljZSh0aGlzLm9mZnNldCwgdGhpcy5vZmZzZXQgKyBsZW5ndGgpXG4gICAgICB0aGlzLm9mZnNldCArPSBsZW5ndGhcbiAgICAgIHRoaXMubGVuZ3RoIC09IGxlbmd0aFxuICAgICAgcmV0dXJuIHJldFxuICAgIH1cblxuICAgIGxldCByZXQgPSBuZXcgVWludDhBcnJheShsZW5ndGgpXG4gICAgbGV0IHRtcG9mZiA9IDBcbiAgICB3aGlsZSAodGhpcy5hcnJheS5sZW5ndGggPiAwICYmIGxlbmd0aCA+IDApIHtcbiAgICAgIGlmICgodGhpcy5vZmZzZXQgKyBsZW5ndGgpIDwgdGhpcy5hcnJheVswXS5sZW5ndGgpIHtcbiAgICAgICAgbGV0IHRtcCA9IHRoaXMuYXJyYXlbMF0uc2xpY2UodGhpcy5vZmZzZXQsIHRoaXMub2Zmc2V0ICsgbGVuZ3RoKVxuICAgICAgICByZXQuc2V0KHRtcCwgdG1wb2ZmKVxuICAgICAgICB0aGlzLm9mZnNldCArPSBsZW5ndGhcbiAgICAgICAgdGhpcy5sZW5ndGggLT0gbGVuZ3RoXG4gICAgICAgIGxlbmd0aCA9IDBcbiAgICAgICAgYnJlYWtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGxldCB0ZW1wbGVuZ3RoID0gdGhpcy5hcnJheVswXS5sZW5ndGggLSB0aGlzLm9mZnNldFxuICAgICAgICByZXQuc2V0KHRoaXMuYXJyYXlbMF0uc2xpY2UodGhpcy5vZmZzZXQsIHRoaXMuYXJyYXlbMF0ubGVuZ3RoKSwgdG1wb2ZmKVxuICAgICAgICB0aGlzLmFycmF5LnNoaWZ0KClcbiAgICAgICAgdGhpcy5vZmZzZXQgPSAwXG4gICAgICAgIHRtcG9mZiArPSB0ZW1wbGVuZ3RoXG4gICAgICAgIHRoaXMubGVuZ3RoIC09IHRlbXBsZW5ndGhcbiAgICAgICAgbGVuZ3RoIC09IHRlbXBsZW5ndGhcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJldFxuICB9XG5cbiAgLyoqXG4gICAqIEZ1bmN0aW9uIHRvIGNsZWFyIHRoZSBidWZmZXIuXG4gICAqL1xuICBjbGVhciAoKSB7XG4gICAgdGhpcy5hcnJheSA9IFtdXG4gICAgdGhpcy5sZW5ndGggPSAwXG4gICAgdGhpcy5vZmZzZXQgPSAwXG4gIH1cblxuICBkZXN0cm95ICgpIHtcbiAgICB0aGlzLmNsZWFyKClcbiAgICB0aGlzLmhpc3RvcnlMZW4gPSAwXG4gIH1cblxuICAvKipcbiAgICogRnVuY3Rpb24gdG8gc2hpZnQgb25lIHVuaXQ4QXJyYXkuXG4gICAqL1xuICBfc2hpZnRCdWZmZXIgKCkge1xuICAgIHRoaXMubGVuZ3RoIC09IHRoaXMuYXJyYXlbMF0ubGVuZ3RoXG4gICAgdGhpcy5vZmZzZXQgPSAwXG4gICAgcmV0dXJuIHRoaXMuYXJyYXkuc2hpZnQoKVxuICB9XG5cbiAgLyoqXG4gICAqIENvbnZlcnQgdWludDggZGF0YSB0byBudW1iZXIuXG4gICAqXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBzdGFydCAtIHRoZSBzdGFydCBwb3N0aW9uLlxuICAgKiBAcGFyYW0ge251bWJlcn0gbGVuZ3RoIC0gdGhlIGxlbmd0aCBvZiBkYXRhLlxuICAgKi9cbiAgdG9JbnQgKHN0YXJ0LCBsZW5ndGgpIHtcbiAgICBsZXQgcmV0SW50ID0gMFxuICAgIGxldCBpID0gdGhpcy5vZmZzZXQgKyBzdGFydFxuICAgIHdoaWxlIChpIDwgdGhpcy5vZmZzZXQgKyBsZW5ndGggKyBzdGFydCkge1xuICAgICAgaWYgKGkgPCB0aGlzLmFycmF5WzBdLmxlbmd0aCkge1xuICAgICAgICByZXRJbnQgPSByZXRJbnQgKiAyNTYgKyB0aGlzLmFycmF5WzBdW2ldXG4gICAgICB9IGVsc2UgaWYgKHRoaXMuYXJyYXlbMV0pIHtcbiAgICAgICAgcmV0SW50ID0gcmV0SW50ICogMjU2ICsgdGhpcy5hcnJheVsxXVtpIC0gdGhpcy5hcnJheVswXS5sZW5ndGhdXG4gICAgICB9XG5cbiAgICAgIGkrK1xuICAgIH1cbiAgICByZXR1cm4gcmV0SW50XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIFJlbXV4QnVmZmVyIHtcbiAgY29uc3RydWN0b3IgKCkge1xuICAgIHRoaXMudmlkZW8gPSBbXVxuICAgIHRoaXMuYXVkaW8gPSBbXVxuICB9XG5cbiAgZGVzdHJveSAoKSB7XG4gICAgdGhpcy52aWRlbyA9IFtdXG4gICAgdGhpcy5hdWRpbyA9IFtdXG4gIH1cbn1cbiIsImNsYXNzIFNvdXJjZSB7XG4gIGNvbnN0cnVjdG9yICgpIHtcbiAgICB0aGlzLm1pbWV0eXBlID0gJyc7XG4gICAgdGhpcy5pbml0ID0gbnVsbDtcbiAgICB0aGlzLmRhdGEgPSBbXTtcbiAgfVxufVxuXG5jbGFzcyBQcmVTb3VyY2Uge1xuICBjb25zdHJ1Y3RvciAoKSB7XG4gICAgdGhpcy5zb3VyY2VzID0ge307XG4gIH1cblxuICBnZXRTb3VyY2UgKHNvdXJjZSkge1xuICAgIHJldHVybiB0aGlzLnNvdXJjZXNbc291cmNlXTtcbiAgfVxuXG4gIGNyZWF0ZVNvdXJjZSAobmFtZSkge1xuICAgIHRoaXMuc291cmNlc1tuYW1lXSA9IG5ldyBTb3VyY2UoKTtcbiAgICByZXR1cm4gdGhpcy5zb3VyY2VzW25hbWVdO1xuICB9XG5cbiAgY2xlYXIgKCkge1xuICAgIHRoaXMuc291cmNlcyA9IHt9O1xuICB9XG5cbiAgZGVzdHJveSAoKSB7XG4gICAgdGhpcy5zb3VyY2VzID0ge307XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgUHJlU291cmNlO1xuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVHJhY2sge1xuICAvKipcbiAgICogVGhlIGNvbnN0cnVjdG9yLlxuICAgKi9cbiAgY29uc3RydWN0b3IgKCkge1xuICAgIHRoaXMuaWQgPSAtMVxuICAgIHRoaXMuc2VxdWVuY2VOdW1iZXIgPSAwXG4gICAgdGhpcy5zYW1wbGVzID0gW11cbiAgICB0aGlzLmRyb3BwZWRTYW1wbGVzID0gW11cbiAgICB0aGlzLmxlbmd0aCA9IDBcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXNldCB0aGUgdHJhY2suXG4gICAqL1xuICByZXNldCAoKSB7XG4gICAgdGhpcy5zZXF1ZW5jZU51bWJlciA9IDBcbiAgICB0aGlzLnNhbXBsZXMgPSBbXVxuICAgIHRoaXMubGVuZ3RoID0gMFxuICB9XG4gIC8qKlxuICAgKiBkZXN0cm95IHRoZSB0cmFjay5cbiAgICovXG4gIGRpc3Ryb3kgKCkge1xuICAgIHRoaXMucmVzZXQoKVxuICAgIHRoaXMuaWQgPSAtMVxuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBBdWRpb1RyYWNrIGV4dGVuZHMgVHJhY2sge1xuICAvKipcbiAgICogVGhlIGNvbnN0cnVjdG9yIGZvciBhdWRpbyB0cmFjay5cbiAgICovXG4gIGNvbnN0cnVjdG9yICgpIHtcbiAgICBzdXBlcigpXG4gICAgdGhpcy5UQUcgPSAnQXVkaW9UcmFjaydcbiAgICB0aGlzLnR5cGUgPSAnYXVkaW8nXG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIFZpZGVvVHJhY2sgZXh0ZW5kcyBUcmFjayB7XG4gIC8qKlxuICAgKiBUaGUgY29uc3RydWN0b3IgZm9yIHZpZGVvIHRyYWNrLlxuICAgKi9cbiAgY29uc3RydWN0b3IgKCkge1xuICAgIHN1cGVyKClcbiAgICB0aGlzLlRBRyA9ICdWaWRlb1RyYWNrJ1xuICAgIHRoaXMudHlwZSA9ICd2aWRlbydcbiAgICB0aGlzLmRyb3BwZWQgPSAwXG4gIH1cbiAgLyoqXG4gICAqIHJlc2V0IHRoZSB2aWRlbyB0cmFjay5cbiAgICovXG4gIHJlc2V0ICgpIHtcbiAgICB0aGlzLnNlcXVlbmNlTnVtYmVyID0gMFxuICAgIHRoaXMuc2FtcGxlcyA9IFtdXG4gICAgdGhpcy5sZW5ndGggPSAwXG4gICAgdGhpcy5kcm9wcGVkID0gMFxuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBUcmFja3Mge1xuICBjb25zdHJ1Y3RvciAoKSB7XG4gICAgdGhpcy5hdWRpb1RyYWNrID0gbnVsbFxuICAgIHRoaXMudmlkZW9UcmFjayA9IG51bGxcbiAgfVxufVxuIiwibW9kdWxlLmV4cG9ydHMgPSB7XG4gIE5hbHVuaXQ6IHJlcXVpcmUoJy4vc3JjL2gyNjQvbmFsdW5pdCcpLmRlZmF1bHQsXG4gIFNwc1BhcnNlcjogcmVxdWlyZSgnLi9zcmMvaDI2NC9uYWx1bml0L3NwcycpLmRlZmF1bHQsXG5cbiAgQ29tcGF0aWJpbGl0eTogcmVxdWlyZSgnLi9zcmMvY29tcGF0aWJpbGl0eScpLmRlZmF1bHRcbn07XG4iLCJcbmNsYXNzIEFBQyB7XG5cbiAgc3RhdGljIGdldFNpbGVudEZyYW1lKGNvZGVjLCBjaGFubmVsQ291bnQpIHtcbiAgICBpZiAoY29kZWMgPT09ICdtcDRhLjQwLjInKSB7XG4gICAgICAvLyBoYW5kbGUgTEMtQUFDXG4gICAgICBpZiAoY2hhbm5lbENvdW50ID09PSAxKSB7XG4gICAgICAgIHJldHVybiBuZXcgVWludDhBcnJheShbMHgwMCwgMHhjOCwgMHgwMCwgMHg4MCwgMHgyMywgMHg4MF0pO1xuICAgICAgfSBlbHNlIGlmIChjaGFubmVsQ291bnQgPT09IDIpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBVaW50OEFycmF5KFsweDIxLCAweDAwLCAweDQ5LCAweDkwLCAweDAyLCAweDE5LCAweDAwLCAweDIzLCAweDgwXSk7XG4gICAgICB9IGVsc2UgaWYgKGNoYW5uZWxDb3VudCA9PT0gMykge1xuICAgICAgICByZXR1cm4gbmV3IFVpbnQ4QXJyYXkoWzB4MDAsIDB4YzgsIDB4MDAsIDB4ODAsIDB4MjAsIDB4ODQsIDB4MDEsIDB4MjYsIDB4NDAsIDB4MDgsIDB4NjQsIDB4MDAsIDB4OGVdKTtcbiAgICAgIH0gZWxzZSBpZiAoY2hhbm5lbENvdW50ID09PSA0KSB7XG4gICAgICAgIHJldHVybiBuZXcgVWludDhBcnJheShbMHgwMCwgMHhjOCwgMHgwMCwgMHg4MCwgMHgyMCwgMHg4NCwgMHgwMSwgMHgyNiwgMHg0MCwgMHgwOCwgMHg2NCwgMHgwMCwgMHg4MCwgMHgyYywgMHg4MCwgMHgwOCwgMHgwMiwgMHgzOF0pO1xuICAgICAgfSBlbHNlIGlmIChjaGFubmVsQ291bnQgPT09IDUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBVaW50OEFycmF5KFsweDAwLCAweGM4LCAweDAwLCAweDgwLCAweDIwLCAweDg0LCAweDAxLCAweDI2LCAweDQwLCAweDA4LCAweDY0LCAweDAwLCAweDgyLCAweDMwLCAweDA0LCAweDk5LCAweDAwLCAweDIxLCAweDkwLCAweDAyLCAweDM4XSk7XG4gICAgICB9IGVsc2UgaWYgKGNoYW5uZWxDb3VudCA9PT0gNikge1xuICAgICAgICByZXR1cm4gbmV3IFVpbnQ4QXJyYXkoWzB4MDAsIDB4YzgsIDB4MDAsIDB4ODAsIDB4MjAsIDB4ODQsIDB4MDEsIDB4MjYsIDB4NDAsIDB4MDgsIDB4NjQsIDB4MDAsIDB4ODIsIDB4MzAsIDB4MDQsIDB4OTksIDB4MDAsIDB4MjEsIDB4OTAsIDB4MDIsIDB4MDAsIDB4YjIsIDB4MDAsIDB4MjAsIDB4MDgsIDB4ZTBdKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gaGFuZGxlIEhFLUFBQyAobXA0YS40MC41IC8gbXA0YS40MC4yOSlcbiAgICAgIGlmIChjaGFubmVsQ291bnQgPT09IDEpIHtcbiAgICAgICAgLy8gZmZtcGVnIC15IC1mIGxhdmZpIC1pIFwiYWV2YWxzcmM9MDpkPTAuMDVcIiAtYzphIGxpYmZka19hYWMgLXByb2ZpbGU6YSBhYWNfaGUgLWI6YSA0ayBvdXRwdXQuYWFjICYmIGhleGR1bXAgLXYgLWUgJzE2LzEgXCIweCV4LFwiIFwiXFxuXCInIC12IG91dHB1dC5hYWNcbiAgICAgICAgcmV0dXJuIG5ldyBVaW50OEFycmF5KFsweDEsIDB4NDAsIDB4MjIsIDB4ODAsIDB4YTMsIDB4NGUsIDB4ZTYsIDB4ODAsIDB4YmEsIDB4OCwgMHgwLCAweDAsIDB4MCwgMHgxYywgMHg2LCAweGYxLCAweGMxLCAweGEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWVdKTtcbiAgICAgIH0gZWxzZSBpZiAoY2hhbm5lbENvdW50ID09PSAyKSB7XG4gICAgICAgIC8vIGZmbXBlZyAteSAtZiBsYXZmaSAtaSBcImFldmFsc3JjPTB8MDpkPTAuMDVcIiAtYzphIGxpYmZka19hYWMgLXByb2ZpbGU6YSBhYWNfaGVfdjIgLWI6YSA0ayBvdXRwdXQuYWFjICYmIGhleGR1bXAgLXYgLWUgJzE2LzEgXCIweCV4LFwiIFwiXFxuXCInIC12IG91dHB1dC5hYWNcbiAgICAgICAgcmV0dXJuIG5ldyBVaW50OEFycmF5KFsweDEsIDB4NDAsIDB4MjIsIDB4ODAsIDB4YTMsIDB4NWUsIDB4ZTYsIDB4ODAsIDB4YmEsIDB4OCwgMHgwLCAweDAsIDB4MCwgMHgwLCAweDk1LCAweDAsIDB4NiwgMHhmMSwgMHhhMSwgMHhhLCAweDVhLCAweDVhLCAweDVhLCAweDVhLCAweDVhLCAweDVhLCAweDVhLCAweDVhLCAweDVhLCAweDVhLCAweDVhLCAweDVhLCAweDVhLCAweDVhLCAweDVhLCAweDVhLCAweDVhLCAweDVhLCAweDVhLCAweDVhLCAweDVhLCAweDVhLCAweDVhLCAweDVhLCAweDVhLCAweDVhLCAweDVhLCAweDVhLCAweDVhLCAweDVhLCAweDVhLCAweDVhLCAweDVhLCAweDVhLCAweDVhLCAweDVhLCAweDVhLCAweDVhLCAweDVlXSk7XG4gICAgICB9IGVsc2UgaWYgKGNoYW5uZWxDb3VudCA9PT0gMykge1xuICAgICAgICAvLyBmZm1wZWcgLXkgLWYgbGF2ZmkgLWkgXCJhZXZhbHNyYz0wfDB8MDpkPTAuMDVcIiAtYzphIGxpYmZka19hYWMgLXByb2ZpbGU6YSBhYWNfaGVfdjIgLWI6YSA0ayBvdXRwdXQuYWFjICYmIGhleGR1bXAgLXYgLWUgJzE2LzEgXCIweCV4LFwiIFwiXFxuXCInIC12IG91dHB1dC5hYWNcbiAgICAgICAgcmV0dXJuIG5ldyBVaW50OEFycmF5KFsweDEsIDB4NDAsIDB4MjIsIDB4ODAsIDB4YTMsIDB4NWUsIDB4ZTYsIDB4ODAsIDB4YmEsIDB4OCwgMHgwLCAweDAsIDB4MCwgMHgwLCAweDk1LCAweDAsIDB4NiwgMHhmMSwgMHhhMSwgMHhhLCAweDVhLCAweDVhLCAweDVhLCAweDVhLCAweDVhLCAweDVhLCAweDVhLCAweDVhLCAweDVhLCAweDVhLCAweDVhLCAweDVhLCAweDVhLCAweDVhLCAweDVhLCAweDVhLCAweDVhLCAweDVhLCAweDVhLCAweDVhLCAweDVhLCAweDVhLCAweDVhLCAweDVhLCAweDVhLCAweDVhLCAweDVhLCAweDVhLCAweDVhLCAweDVhLCAweDVhLCAweDVhLCAweDVhLCAweDVhLCAweDVhLCAweDVhLCAweDVhLCAweDVhLCAweDVlXSk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xuICB9XG5cbn1cblxuZXhwb3J0IGRlZmF1bHQgQUFDO1xuIiwiaW1wb3J0IHtFVkVOVFN9IGZyb20gJ3hncGxheWVyLXV0aWxzJ1xuaW1wb3J0IEFBQyBmcm9tICcuL2FhYy9hYWMtaGVscGVyJ1xuXG5jb25zdCB7UkVNVVhfRVZFTlRTfSA9IEVWRU5UU1xuXG5jbGFzcyBDb21wYXRpYmlsaXR5IHtcbiAgY29uc3RydWN0b3IgKCkge1xuICAgIHRoaXMubmV4dEF1ZGlvRHRzID0gMCAvLyDmqKHmi5/kuIvkuIDmrrXpn7PpopHmlbDmja7nmoRkdHNcbiAgICB0aGlzLm5leHRWaWRlb0R0cyA9IDAgLy8g5qih5ouf5LiL5LiA5q616KeG6aKR5pWw5o2u55qEZHRzXG5cbiAgICB0aGlzLmxhc3RBdWRpb1NhbXBsZXNMZW4gPSAwIC8vIOS4iuS4gOautemfs+mikeaVsOaNrueahOmVv+W6plxuICAgIHRoaXMubGFzdFZpZGVvU2FtcGxlc0xlbiA9IDAgLy8g5LiK5LiA5q616KeG6aKR5pWw5o2u55qE6ZW/5bqmXG5cbiAgICB0aGlzLmxhc3RWaWRlb0R0cyA9IHVuZGVmaW5lZCAvLyDkuIrkuIDmrrXpn7PpopHmlbDmja7nmoTplb/luqZcbiAgICB0aGlzLmxhc3RBdWRpb0R0cyA9IHVuZGVmaW5lZCAvLyDkuIrkuIDmrrXop4bpopHmlbDmja7nmoTplb/luqZcblxuICAgIHRoaXMuYWxsQXVkaW9TYW1wbGVzQ291bnQgPSAwIC8vIOmfs+mikeaAu+aVsOaNrumHjyjljp/lp4vluKcpXG4gICAgdGhpcy5hbGxWaWRlb1NhbXBsZXNDb3VudCA9IDAgLy8g6KeG6aKR5oC75pWw5o2u6YePKOWOn+Wni+W4pylcblxuICAgIHRoaXMuX2ZpcnN0QXVkaW9TYW1wbGUgPSBudWxsXG4gICAgdGhpcy5fZmlyc3RWaWRlb1NhbXBsZSA9IG51bGxcblxuICAgIHRoaXMuZmlsbGVkQXVkaW9TYW1wbGVzID0gW10gLy8g6KGl5YWF6Z+z6aKR5bin77yI77yJXG4gICAgdGhpcy5maWxsZWRWaWRlb1NhbXBsZXMgPSBbXSAvLyDooaXlhYXop4bpopHluKfvvIjvvIlcbiAgfVxuXG4gIGluaXQgKCkge1xuICAgIHRoaXMuYmVmb3JlKFJFTVVYX0VWRU5UUy5SRU1VWF9NRURJQSwgdGhpcy5kb0ZpeC5iaW5kKHRoaXMpKVxuICB9XG5cbiAgcmVzZXQgKCkge1xuICAgIHRoaXMubmV4dEF1ZGlvRHRzID0gMCAvLyDmqKHmi5/kuIvkuIDmrrXpn7PpopHmlbDmja7nmoRkdHNcbiAgICB0aGlzLm5leHRWaWRlb0R0cyA9IDAgLy8g5qih5ouf5LiL5LiA5q616KeG6aKR5pWw5o2u55qEZHRzXG5cbiAgICB0aGlzLmxhc3RBdWRpb1NhbXBsZXNMZW4gPSAwIC8vIOS4iuS4gOautemfs+mikeaVsOaNrueahOmVv+W6plxuICAgIHRoaXMubGFzdFZpZGVvU2FtcGxlc0xlbiA9IDAgLy8g5LiK5LiA5q616KeG6aKR5pWw5o2u55qE6ZW/5bqmXG5cbiAgICB0aGlzLmxhc3RWaWRlb0R0cyA9IHVuZGVmaW5lZCAvLyDkuIrkuIDmrrXpn7PpopHmlbDmja7nmoTplb/luqZcbiAgICB0aGlzLmxhc3RBdWRpb0R0cyA9IHVuZGVmaW5lZCAvLyDkuIrkuIDmrrXop4bpopHmlbDmja7nmoTplb/luqZcblxuICAgIHRoaXMuYWxsQXVkaW9TYW1wbGVzQ291bnQgPSAwIC8vIOmfs+mikeaAu+aVsOaNrumHjyjljp/lp4vluKcpXG4gICAgdGhpcy5hbGxWaWRlb1NhbXBsZXNDb3VudCA9IDAgLy8g6KeG6aKR5oC75pWw5o2u6YePKOWOn+Wni+W4pylcblxuICAgIHRoaXMuX2ZpcnN0QXVkaW9TYW1wbGUgPSBudWxsXG4gICAgdGhpcy5fZmlyc3RWaWRlb1NhbXBsZSA9IG51bGxcblxuICAgIHRoaXMuZmlsbGVkQXVkaW9TYW1wbGVzID0gW10gLy8g6KGl5YWF6Z+z6aKR5bin77yI77yJXG4gICAgdGhpcy5maWxsZWRWaWRlb1NhbXBsZXMgPSBbXSAvLyDooaXlhYXop4bpopHluKfvvIjvvIlcbiAgfVxuXG4gIGRvRml4ICgpIHtcbiAgICBjb25zdCB7IGlzRmlyc3RBdWRpb1NhbXBsZXMsIGlzRmlyc3RWaWRlb1NhbXBsZXMgfSA9IHRoaXMuZ2V0Rmlyc3RTYW1wbGUoKVxuXG4gICAgdGhpcy5yZW1vdmVJbnZhbGlkU2FtcGxlcygpXG5cbiAgICB0aGlzLnJlY29yZFNhbXBsZXNDb3VudCgpXG5cbiAgICBpZiAodGhpcy5fZmlyc3RWaWRlb1NhbXBsZSkge1xuICAgICAgdGhpcy5maXhSZWZTYW1wbGVEdXJhdGlvbih0aGlzLnZpZGVvVHJhY2subWV0YSwgdGhpcy52aWRlb1RyYWNrLnNhbXBsZXMpXG4gICAgfVxuICAgIGlmICh0aGlzLl9maXJzdEF1ZGlvU2FtcGxlKSB7XG4gICAgICB0aGlzLmZpeFJlZlNhbXBsZUR1cmF0aW9uKHRoaXMuYXVkaW9UcmFjay5tZXRhLCB0aGlzLmF1ZGlvVHJhY2suc2FtcGxlcylcbiAgICB9XG5cbiAgICB0aGlzLmRvRml4VmlkZW8oaXNGaXJzdFZpZGVvU2FtcGxlcylcbiAgICB0aGlzLmRvRml4QXVkaW8oaXNGaXJzdEF1ZGlvU2FtcGxlcylcbiAgfVxuXG4gIGRvRml4VmlkZW8gKGZpcnN0KSB7XG4gICAgbGV0IHtzYW1wbGVzOiB2aWRlb1NhbXBsZXMsIG1ldGF9ID0gdGhpcy52aWRlb1RyYWNrXG5cbiAgICBpZiAobWV0YS5mcmFtZVJhdGUgJiYgbWV0YS5mcmFtZVJhdGUuZml4ZWQgPT09IGZhbHNlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKCF2aWRlb1NhbXBsZXMgfHwgIXZpZGVvU2FtcGxlcy5sZW5ndGggfHwgIXRoaXMuX2ZpcnN0VmlkZW9TYW1wbGUpIHtcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIC8vIGNvbnNvbGUubG9nKGB2aWRlbyBsYXN0U2FtcGxlLCAke3ZpZGVvU2FtcGxlc1t2aWRlb1NhbXBsZXMubGVuZ3RoIC0gMV0uZHRzfWApXG5cbiAgICBjb25zdCBmaXJzdFNhbXBsZSA9IHZpZGVvU2FtcGxlc1swXVxuICAgIGNvbnN0IGZpcnN0RHRzID0gZmlyc3RTYW1wbGUuZHRzXG5cbiAgICBjb25zdCBzYW1wbGVzTGVuID0gdmlkZW9TYW1wbGVzLmxlbmd0aDtcblxuICAgIC8vIHN0ZXAxLiDkv67lpI3kuI5hdWRpb+mmluW4p+W3rui3neWkquWkp+eahOmXrumimFxuICAgIGlmIChmaXJzdCAmJiB0aGlzLl9maXJzdEF1ZGlvU2FtcGxlKSB7XG4gICAgICBjb25zdCB2aWRlb0ZpcnN0RHRzID0gdGhpcy5fZmlyc3RWaWRlb1NhbXBsZS5kdHNcbiAgICAgIGNvbnN0IGF1ZGlvRmlyc3REdHMgPSB0aGlzLl9maXJzdEF1ZGlvU2FtcGxlLmR0c1xuICAgICAgY29uc3QgZ2FwID0gdmlkZW9GaXJzdER0cyAtIGF1ZGlvRmlyc3REdHNcbiAgICAgIGlmIChnYXAgPiAoMiAqIG1ldGEucmVmU2FtcGxlRHVyYXRpb24pKSB7XG4gICAgICAgIGNvbnN0IGZpbGxDb3VudCA9IE1hdGguZmxvb3IoZ2FwIC8gbWV0YS5yZWZTYW1wbGVEdXJhdGlvbilcblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGZpbGxDb3VudDsgaSsrKSB7XG4gICAgICAgICAgY29uc3QgY2xvbmVkRmlyc3RTYW1wbGUgPSBPYmplY3QuYXNzaWduKHt9LCBmaXJzdFNhbXBsZSkgLy8g6KeG6aKR5aS06YOo5bin57y65aSx6ZyA6KaB5aSN5Yi256ys5LiA5binXG4gICAgICAgICAgLy8g6YeN5paw6K6h566Xc2FtcGxl55qEZHRz5ZKMcHRzXG4gICAgICAgICAgY2xvbmVkRmlyc3RTYW1wbGUuZHRzID0gdmlkZW9GaXJzdER0cyAtIChpICsgMSkgKiBtZXRhLnJlZlNhbXBsZUR1cmF0aW9uXG4gICAgICAgICAgY2xvbmVkRmlyc3RTYW1wbGUucHRzID0gY2xvbmVkRmlyc3RTYW1wbGUuZHRzICsgY2xvbmVkRmlyc3RTYW1wbGUuY3RzXG5cbiAgICAgICAgICB2aWRlb1NhbXBsZXMudW5zaGlmdChjbG9uZWRGaXJzdFNhbXBsZSlcblxuICAgICAgICAgIHRoaXMuZmlsbGVkVmlkZW9TYW1wbGVzLnB1c2goe1xuICAgICAgICAgICAgZHRzOiBjbG9uZWRGaXJzdFNhbXBsZS5kdHMsXG4gICAgICAgICAgICBzaXplOiBjbG9uZWRGaXJzdFNhbXBsZS5kYXRhLmJ5dGVMZW5ndGhcbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgbGV0IGdhcFxuICAgIC8vIHN0ZXAyLiDkv67lpI1zYW1wbGVz5q615LmL6Ze055qE6Ze06Led6Zeu6aKY44CBXG4gICAgaWYgKHRoaXMubmV4dFZpZGVvRHRzKSB7XG4gICAgICAvLyBzdGVwMS4g5aSE55CGc2FtcGxlc+auteS5i+mXtOeahOS4ouW4p+aDheWGtVxuICAgICAgLy8g5b2T5Y+R546wZHVyYXRpb27lt67ot53lpKfkuo4y5bin5pe26L+b6KGM6KGl5binXG4gICAgICBnYXAgPSBmaXJzdER0cyAtIHRoaXMubmV4dFZpZGVvRHRzXG4gICAgICBjb25zdCBhYnNHYXAgPSBNYXRoLmFicyhnYXApXG4gICAgICBpZiAoZ2FwID4gKDIgKiBtZXRhLnJlZlNhbXBsZUR1cmF0aW9uKSkge1xuICAgICAgICBjb25zdCBmaWxsRnJhbWVDb3VudCA9IE1hdGguZmxvb3IoZ2FwIC8gbWV0YS5yZWZTYW1wbGVEdXJhdGlvbilcblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGZpbGxGcmFtZUNvdW50OyBpKyspIHtcbiAgICAgICAgICBjb25zdCBjbG9uZWRTYW1wbGUgPSBPYmplY3QuYXNzaWduKHt9LCB2aWRlb1NhbXBsZXNbMF0pXG4gICAgICAgICAgY29uc3QgY29tcHV0ZWQgPSBmaXJzdER0cyAtIChpICsgMSkgKiBtZXRhLnJlZlNhbXBsZUR1cmF0aW9uXG5cbiAgICAgICAgICBjbG9uZWRTYW1wbGUuZHRzID0gY29tcHV0ZWQgPiB0aGlzLm5leHRWaWRlb0R0cyA/IGNvbXB1dGVkIDogdGhpcy5uZXh0VmlkZW9EdHMgLy8g6KGl55qE56ys5LiA5bin5LiA5a6a6KaB5pivbmV4dFZpZGVvRHRzXG4gICAgICAgICAgY2xvbmVkU2FtcGxlLnB0cyA9IGNsb25lZFNhbXBsZS5kdHMgKyBjbG9uZWRTYW1wbGUuY3RzXG5cbiAgICAgICAgICB0aGlzLnZpZGVvVHJhY2suc2FtcGxlcy51bnNoaWZ0KGNsb25lZFNhbXBsZSlcblxuICAgICAgICAgIHRoaXMuZmlsbGVkVmlkZW9TYW1wbGVzLnB1c2goe1xuICAgICAgICAgICAgZHRzOiBjbG9uZWRTYW1wbGUuZHRzLFxuICAgICAgICAgICAgc2l6ZTogY2xvbmVkU2FtcGxlLmRhdGEuYnl0ZUxlbmd0aFxuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoYWJzR2FwIDw9IDEwICYmIGFic0dhcCA+IDApIHtcbiAgICAgICAgLy8g5b2T5beu6Led5ZyoKy3kuIDluKfkuYvpl7Tml7blsIbnrKzkuIDluKfnmoRkdHPlvLrooYzlrprkvY3liLDmnJ/mnJvkvY3nva5cbiAgICAgICAgLy8gY29uc29sZS5sb2coJ+mHjeWumuS9jeinhumikeW4p2R0cycsIHZpZGVvU2FtcGxlc1swXS5kdHMsIHRoaXMubmV4dFZpZGVvRHRzKVxuICAgICAgICB2aWRlb1NhbXBsZXNbMF0uZHRzID0gdGhpcy5uZXh0VmlkZW9EdHNcbiAgICAgICAgdmlkZW9TYW1wbGVzWzBdLm9yaWdpbkR0cyA9IHZpZGVvU2FtcGxlc1swXS5kdHNcbiAgICAgICAgdmlkZW9TYW1wbGVzWzBdLmN0cyA9IHZpZGVvU2FtcGxlc1swXS5jdHMgfHwgdmlkZW9TYW1wbGVzWzBdLnB0cyAtIHZpZGVvU2FtcGxlc1swXS5kdHNcbiAgICAgICAgdmlkZW9TYW1wbGVzWzBdLnB0cyA9IHZpZGVvU2FtcGxlc1swXS5kdHMgKyB2aWRlb1NhbXBsZXNbMF0uY3RzXG4gICAgICB9XG4gICAgfVxuICAgIGNvbnN0IGxhc3REdHMgPSB2aWRlb1NhbXBsZXNbdmlkZW9TYW1wbGVzLmxlbmd0aCAtIDFdLmR0cztcblxuICAgIGNvbnN0IGxhc3RTYW1wbGVEdXJhdGlvbiA9IHZpZGVvU2FtcGxlcy5sZW5ndGggPj0gMiA/IGxhc3REdHMgLSB2aWRlb1NhbXBsZXNbdmlkZW9TYW1wbGVzLmxlbmd0aCAtIDJdLmR0cyA6IG1ldGEucmVmU2FtcGxlRHVyYXRpb25cblxuICAgIHRoaXMubGFzdFZpZGVvU2FtcGxlc0xlbiA9IHNhbXBsZXNMZW5cbiAgICB0aGlzLm5leHRWaWRlb0R0cyA9IGxhc3REdHMgKyBsYXN0U2FtcGxlRHVyYXRpb25cbiAgICB0aGlzLmxhc3RWaWRlb0R0cyA9IGxhc3REdHNcblxuICAgIC8vIHN0ZXAyLiDkv67lpI1zYW1wbGXmrrXkuYvlhoXnmoTpl7Tot53pl67pophcbiAgICAvLyBzdGVwMy4g5L+u5aSNc2FtcGxlc+auteWGhemDqOeahGR0c+W8guW4uOmXrumimFxuICAgIGZvciAobGV0IGkgPSAwLCBsZW4gPSB2aWRlb1NhbXBsZXMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgIGNvbnN0IGN1cnJlbnQgPSB2aWRlb1NhbXBsZXNbaV1cbiAgICAgIGNvbnN0IG5leHQgPSB2aWRlb1NhbXBsZXNbaSArIDFdXG5cbiAgICAgIGlmICghbmV4dCkge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cblxuICAgICAgY29uc3QgZHVyYXRpb24gPSBuZXh0LmR0cyAtIGN1cnJlbnQuZHRzO1xuXG4gICAgICBpZiAoZHVyYXRpb24gPiAoMiAqIG1ldGEucmVmU2FtcGxlRHVyYXRpb24pKSB7XG4gICAgICAgIC8vIOS4pOW4p+S5i+mXtOmXtOmalOWkquWkp++8jOmcgOimgeihpeepuueZveW4p1xuICAgICAgICBsZXQgZmlsbEZyYW1lQ291bnQgPSBNYXRoLmZsb29yKGR1cmF0aW9uIC8gbWV0YS5yZWZTYW1wbGVEdXJhdGlvbilcblxuICAgICAgICBsZXQgZmlsbEZyYW1lSWR4ID0gMFxuICAgICAgICB3aGlsZSAoZmlsbEZyYW1lSWR4IDwgZmlsbEZyYW1lQ291bnQpIHtcbiAgICAgICAgICBjb25zdCBmaWxsRnJhbWUgPSBPYmplY3QuYXNzaWduKHt9LCBuZXh0KVxuICAgICAgICAgIGZpbGxGcmFtZS5kdHMgPSBjdXJyZW50LmR0cyArIChmaWxsRnJhbWVJZHggKyAxKSAqIG1ldGEucmVmU2FtcGxlRHVyYXRpb25cbiAgICAgICAgICBmaWxsRnJhbWUucHRzID0gZmlsbEZyYW1lLmR0cyArIGZpbGxGcmFtZS5jdHNcbiAgICAgICAgICBpZiAoZmlsbEZyYW1lIDwgbmV4dC5kdHMpIHtcbiAgICAgICAgICAgIHZpZGVvU2FtcGxlcy5zcGxpY2UoaSwgMCwgZmlsbEZyYW1lKVxuXG4gICAgICAgICAgICB0aGlzLmZpbGxlZFZpZGVvU2FtcGxlcy5wdXNoKHtcbiAgICAgICAgICAgICAgZHRzOiBmaWxsRnJhbWUuZHRzLFxuICAgICAgICAgICAgICBzaXplOiBmaWxsRnJhbWUuZGF0YS5ieXRlTGVuZ3RoXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH1cblxuICAgICAgICAgIGZpbGxGcmFtZUlkeCsrXG4gICAgICAgICAgaSsrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy52aWRlb1RyYWNrLnNhbXBsZXMgPSB2aWRlb1NhbXBsZXM7XG4gIH1cblxuICBkb0ZpeEF1ZGlvIChmaXJzdCkge1xuICAgIGxldCB7c2FtcGxlczogYXVkaW9TYW1wbGVzLCBtZXRhfSA9IHRoaXMuYXVkaW9UcmFja1xuXG4gICAgaWYgKCFhdWRpb1NhbXBsZXMgfHwgIWF1ZGlvU2FtcGxlcy5sZW5ndGgpIHtcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICAvLyBjb25zb2xlLmxvZyhgYXVkaW8gbGFzdFNhbXBsZSwgJHthdWRpb1NhbXBsZXNbYXVkaW9TYW1wbGVzLmxlbmd0aCAtIDFdLmR0c31gKVxuXG4gICAgY29uc3Qgc2FtcGxlc0xlbiA9IGF1ZGlvU2FtcGxlcy5sZW5ndGg7XG4gICAgY29uc3Qgc2lsZW50RnJhbWUgPSBBQUMuZ2V0U2lsZW50RnJhbWUobWV0YS5jb2RlYywgbWV0YS5jaGFubmVsQ291bnQpXG5cbiAgICBjb25zdCBmaXJzdFNhbXBsZSA9IHRoaXMuX2ZpcnN0QXVkaW9TYW1wbGVcblxuICAgIC8vIOWvuWF1ZGlvU2FtcGxlc+aMieeFp2R0c+WBmuaOkuW6j1xuICAgIGF1ZGlvU2FtcGxlcyA9IENvbXBhdGliaWxpdHkuc29ydEF1ZGlvU2FtcGxlcyhhdWRpb1NhbXBsZXMpXG5cbiAgICAvLyBzdGVwMC4g6aaW5bin5LiOdmlkZW/pppbluKfpl7Tot53lpKfnmoTpl67pophcbiAgICBpZiAodGhpcy5fZmlyc3RWaWRlb1NhbXBsZSAmJiBmaXJzdCkge1xuICAgICAgY29uc3QgdmlkZW9GaXJzdFB0cyA9IHRoaXMuX2ZpcnN0VmlkZW9TYW1wbGUucHRzID8gdGhpcy5fZmlyc3RWaWRlb1NhbXBsZS5wdHMgOiB0aGlzLl9maXJzdFZpZGVvU2FtcGxlLmR0cyArIHRoaXMuX2ZpcnN0VmlkZW9TYW1wbGUuY3RzXG5cbiAgICAgIGlmIChmaXJzdFNhbXBsZS5kdHMgLSB2aWRlb0ZpcnN0UHRzID4gbWV0YS5yZWZTYW1wbGVEdXJhdGlvbikge1xuICAgICAgICBjb25zdCBzaWxlbnRTYW1wbGVDb3VudCA9IE1hdGguZmxvb3IoKGZpcnN0U2FtcGxlLmR0cyAtIHZpZGVvRmlyc3RQdHMpIC8gbWV0YS5yZWZTYW1wbGVEdXJhdGlvbilcblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNpbGVudFNhbXBsZUNvdW50OyBpKyspIHtcbiAgICAgICAgICBjb25zdCBzaWxlbnRTYW1wbGUgPSB7XG4gICAgICAgICAgICBkYXRhOiBzaWxlbnRGcmFtZSxcbiAgICAgICAgICAgIGRhdGFzaXplOiBzaWxlbnRGcmFtZS5ieXRlTGVuZ3RoLFxuICAgICAgICAgICAgZHRzOiBmaXJzdFNhbXBsZS5kdHMgLSAoaSArIDEpICogbWV0YS5yZWZTYW1wbGVEdXJhdGlvbixcbiAgICAgICAgICAgIGZpbHRlcmVkOiAwXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgYXVkaW9TYW1wbGVzLnVuc2hpZnQoc2lsZW50U2FtcGxlKVxuXG4gICAgICAgICAgdGhpcy5maWxsZWRBdWRpb1NhbXBsZXMucHVzaCh7XG4gICAgICAgICAgICBkdHM6IHNpbGVudFNhbXBsZS5kdHMsXG4gICAgICAgICAgICBzaXplOiBzaWxlbnRTYW1wbGUuZGF0YS5ieXRlTGVuZ3RoXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGxldCBnYXBcbiAgICBjb25zdCBmaXJzdER0cyA9IGF1ZGlvU2FtcGxlc1swXS5kdHNcblxuICAgIGlmICh0aGlzLm5leHRBdWRpb0R0cykge1xuICAgICAgLy8gc3RlcDEuIOWkhOeQhnNhbXBsZXPmrrXkuYvpl7TnmoTkuKLluKfmg4XlhrVcbiAgICAgIC8vIOW9k+WPkeeOsGR1cmF0aW9u5beu6Led5aSn5LqOMeW4p+aXtui/m+ihjOihpeW4p1xuICAgICAgZ2FwID0gZmlyc3REdHMgLSB0aGlzLm5leHRBdWRpb0R0c1xuICAgICAgY29uc3QgYWJzR2FwID0gTWF0aC5hYnMoZ2FwKVxuXG4gICAgICBpZiAoYWJzR2FwID4gbWV0YS5yZWZTYW1wbGVEdXJhdGlvbiAmJiBzYW1wbGVzTGVuID09PSAxICYmIHRoaXMubGFzdEF1ZGlvU2FtcGxlc0xlbiA9PT0gMSkge1xuICAgICAgICBtZXRhLnJlZlNhbXBsZUR1cmF0aW9uRml4ZWQgPSB1bmRlZmluZWRcbiAgICAgIH1cblxuICAgICAgaWYgKGdhcCA+ICgyICogbWV0YS5yZWZTYW1wbGVEdXJhdGlvbikpIHtcbiAgICAgICAgaWYgKHNhbXBsZXNMZW4gPT09IDEgJiYgdGhpcy5sYXN0QXVkaW9TYW1wbGVzTGVuID09PSAxKSB7XG4gICAgICAgICAgLy8g5aaC5p6cc2FtcGxl55qEbGVuZ3Ro5LiA55u05pivMe+8jOiAjOS4lOS4gOebtOS4jeespuWQiHJlZlNhbXBsZUR1cmF0aW9u77yM6ZyA6KaB5Yqo5oCB5L+u5pS5cmVmU2FtcGxlRHVyYXRpb25cbiAgICAgICAgICBtZXRhLnJlZlNhbXBsZUR1cmF0aW9uRml4ZWQgPSBtZXRhLnJlZlNhbXBsZUR1cmF0aW9uRml4ZWQgIT09IHVuZGVmaW5lZCA/IG1ldGEucmVmU2FtcGxlRHVyYXRpb25GaXhlZCArIGdhcCA6IG1ldGEucmVmU2FtcGxlRHVyYXRpb24gKyBnYXBcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zdCBzaWxlbnRGcmFtZUNvdW50ID0gTWF0aC5mbG9vcihnYXAgLyBtZXRhLnJlZlNhbXBsZUR1cmF0aW9uKVxuXG4gICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzaWxlbnRGcmFtZUNvdW50OyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IGNvbXB1dGVkID0gZmlyc3REdHMgLSAoaSArIDEpICogbWV0YS5yZWZTYW1wbGVEdXJhdGlvblxuICAgICAgICAgICAgY29uc3Qgc2lsZW50U2FtcGxlID0gT2JqZWN0LmFzc2lnbih7fSwgYXVkaW9TYW1wbGVzWzBdLCB7XG4gICAgICAgICAgICAgIGR0czogY29tcHV0ZWQgPiB0aGlzLm5leHRBdWRpb0R0cyA/IGNvbXB1dGVkIDogdGhpcy5uZXh0QXVkaW9EdHNcbiAgICAgICAgICAgIH0pXG5cbiAgICAgICAgICAgIHRoaXMuZmlsbGVkQXVkaW9TYW1wbGVzLnB1c2goe1xuICAgICAgICAgICAgICBkdHM6IHNpbGVudFNhbXBsZS5kdHMsXG4gICAgICAgICAgICAgIHNpemU6IHNpbGVudFNhbXBsZS5kYXRhLmJ5dGVMZW5ndGhcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB0aGlzLmF1ZGlvVHJhY2suc2FtcGxlcy51bnNoaWZ0KHNpbGVudFNhbXBsZSlcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoYWJzR2FwIDw9IDEwICYmIGFic0dhcCA+IDApIHtcbiAgICAgICAgLy8g5b2T5beu6Led5q+U6L6D5bCP55qE5pe25YCZ5bCG6Z+z6aKR5bin6YeN5a6a5L2NXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCfph43lrprkvY3pn7PpopHluKdkdHMnLCBhdWRpb1NhbXBsZXNbMF0uZHRzLCB0aGlzLm5leHRBdWRpb0R0cylcbiAgICAgICAgYXVkaW9TYW1wbGVzWzBdLmR0cyA9IHRoaXMubmV4dEF1ZGlvRHRzXG4gICAgICAgIGF1ZGlvU2FtcGxlc1swXS5wdHMgPSB0aGlzLm5leHRBdWRpb0R0c1xuICAgICAgfVxuICAgIH1cbiAgICBjb25zdCBsYXN0RHRzID0gYXVkaW9TYW1wbGVzW2F1ZGlvU2FtcGxlcy5sZW5ndGggLSAxXS5kdHM7XG4gICAgY29uc3QgbGFzdFNhbXBsZUR1cmF0aW9uID0gYXVkaW9TYW1wbGVzLmxlbmd0aCA+PSAyID8gbGFzdER0cyAtIGF1ZGlvU2FtcGxlc1thdWRpb1NhbXBsZXMubGVuZ3RoIC0gMl0uZHRzIDogbWV0YS5yZWZTYW1wbGVEdXJhdGlvblxuXG4gICAgdGhpcy5sYXN0QXVkaW9TYW1wbGVzTGVuID0gc2FtcGxlc0xlbjtcbiAgICB0aGlzLm5leHRBdWRpb0R0cyA9IG1ldGEucmVmU2FtcGxlRHVyYXRpb25GaXhlZCA/IGxhc3REdHMgKyBtZXRhLnJlZlNhbXBsZUR1cmF0aW9uRml4ZWQgOiBsYXN0RHRzICsgbGFzdFNhbXBsZUR1cmF0aW9uXG4gICAgdGhpcy5sYXN0QXVkaW9EdHMgPSBsYXN0RHRzXG5cbiAgICAvLyBzdGVwMy4g5L+u5aSNc2FtcGxlc+auteWGhemDqOeahGR0c+W8guW4uOmXrumimFxuICAgIGZvciAobGV0IGkgPSAwLCBsZW4gPSBhdWRpb1NhbXBsZXMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgIGNvbnN0IGN1cnJlbnQgPSBhdWRpb1NhbXBsZXNbaV1cbiAgICAgIGNvbnN0IG5leHQgPSBhdWRpb1NhbXBsZXNbaSArIDFdXG5cbiAgICAgIGlmICghbmV4dCkge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cblxuICAgICAgY29uc3QgZHVyYXRpb24gPSBuZXh0LmR0cyAtIGN1cnJlbnQuZHRzO1xuICAgICAgYXVkaW9TYW1wbGVzW2ldLmR1cmF0aW9uID0gZHVyYXRpb247XG4gICAgICAvKlxuICAgICAgaWYgKGR1cmF0aW9uID4gKDIgKiBtZXRhLnJlZlNhbXBsZUR1cmF0aW9uKSkge1xuICAgICAgICAvLyDkuKTluKfkuYvpl7Tpl7TpmpTlpKrlpKfvvIzpnIDopoHooaXnqbrnmb3luKdcbiAgICAgICAgLyoqXG4gICAgICAgIGxldCBzaWxlbnRGcmFtZUNvdW50ID0gTWF0aC5mbG9vcihkdXJhdGlvbiAvIG1ldGEucmVmU2FtcGxlRHVyYXRpb24pXG4gICAgICAgIGxldCBmcmFtZUlkeCA9IDBcblxuICAgICAgICB3aGlsZSAoZnJhbWVJZHggPCBzaWxlbnRGcmFtZUNvdW50KSB7XG4gICAgICAgICAgY29uc3Qgc2lsZW50U2FtcGxlID0ge1xuICAgICAgICAgICAgZGF0YTogc2lsZW50RnJhbWUsXG4gICAgICAgICAgICBkYXRhc2l6ZTogc2lsZW50RnJhbWUuYnl0ZUxlbmd0aCxcbiAgICAgICAgICAgIGR0czogY3VycmVudC5kdHMgKyAoZnJhbWVJZHggKyAxKSAqIG1ldGEucmVmU2FtcGxlRHVyYXRpb24sXG4gICAgICAgICAgICBmaWx0ZXJlZDogMCxcbiAgICAgICAgICAgIGlzU2lsZW50OiB0cnVlXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgYXVkaW9TYW1wbGVzLnNwbGljZShpLCAwLCBzaWxlbnRTYW1wbGUpXG5cbiAgICAgICAgICB0aGlzLmZpbGxlZEF1ZGlvU2FtcGxlcy5wdXNoKHtcbiAgICAgICAgICAgIGR0czogc2lsZW50U2FtcGxlLmR0cyxcbiAgICAgICAgICAgIHNpemU6IHNpbGVudFNhbXBsZS5kYXRhLmJ5dGVMZW5ndGhcbiAgICAgICAgICB9KVxuXG4gICAgICAgICAgZnJhbWVJZHgrK1xuICAgICAgICAgIGkrKyAvLyDkuI3lr7npnZnpn7PluKflgZrmr5TovoNcbiAgICAgICAgfVxuICAgICAgfSAqL1xuICAgIH1cblxuICAgIHRoaXMuYXVkaW9UcmFjay5zYW1wbGVzID0gQ29tcGF0aWJpbGl0eS5zb3J0QXVkaW9TYW1wbGVzKGF1ZGlvU2FtcGxlcylcbiAgfVxuXG4gIGdldEZpcnN0U2FtcGxlICgpIHtcbiAgICAvLyDojrflj5Z2aWRlb+WSjGF1ZGlv55qE6aaW5bin5pWw5o2uXG4gICAgbGV0IHtzYW1wbGVzOiB2aWRlb1NhbXBsZXN9ID0gdGhpcy52aWRlb1RyYWNrXG4gICAgbGV0IHtzYW1wbGVzOiBhdWRpb1NhbXBsZXN9ID0gdGhpcy5hdWRpb1RyYWNrXG5cbiAgICBsZXQgaXNGaXJzdFZpZGVvU2FtcGxlcyA9IGZhbHNlO1xuICAgIGxldCBpc0ZpcnN0QXVkaW9TYW1wbGVzID0gZmFsc2U7XG5cbiAgICBpZiAoIXRoaXMuX2ZpcnN0VmlkZW9TYW1wbGUgJiYgdmlkZW9TYW1wbGVzLmxlbmd0aCkge1xuICAgICAgdGhpcy5fZmlyc3RWaWRlb1NhbXBsZSA9IENvbXBhdGliaWxpdHkuZmluZEZpcnN0VmlkZW9TYW1wbGUodmlkZW9TYW1wbGVzKVxuICAgICAgaXNGaXJzdFZpZGVvU2FtcGxlcyA9IHRydWVcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMuX2ZpcnN0QXVkaW9TYW1wbGUgJiYgYXVkaW9TYW1wbGVzLmxlbmd0aCkge1xuICAgICAgdGhpcy5fZmlyc3RBdWRpb1NhbXBsZSA9IENvbXBhdGliaWxpdHkuZmluZEZpcnN0QXVkaW9TYW1wbGUoYXVkaW9TYW1wbGVzKSAvLyDlr7vmib5kdHPmnIDlsI/nmoTluKfkvZzkuLrpppbkuKrpn7PpopHluKdcbiAgICAgIGlzRmlyc3RBdWRpb1NhbXBsZXMgPSB0cnVlXG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIGlzRmlyc3RWaWRlb1NhbXBsZXMsXG4gICAgICBpc0ZpcnN0QXVkaW9TYW1wbGVzXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIOWcqOayoeaciXJlZlNhbXBsZUR1cmF0aW9u55qE6Zeu6aKY5rWB5Lit77yMXG4gICAqL1xuICBmaXhSZWZTYW1wbGVEdXJhdGlvbiAobWV0YSwgc2FtcGxlcykge1xuICAgIGNvbnN0IGlzVmlkZW8gPSBtZXRhLnR5cGUgPT09ICd2aWRlbydcbiAgICBjb25zdCBhbGxTYW1wbGVzQ291bnQgPSBpc1ZpZGVvID8gdGhpcy5hbGxWaWRlb1NhbXBsZXNDb3VudCA6IHRoaXMuYWxsQXVkaW9TYW1wbGVzQ291bnRcbiAgICBjb25zdCBmaXJzdER0cyA9IGlzVmlkZW8gPyB0aGlzLl9maXJzdFZpZGVvU2FtcGxlLmR0cyA6IHRoaXMuX2ZpcnN0QXVkaW9TYW1wbGUuZHRzXG4gICAgY29uc3QgZmlsbGVkU2FtcGxlc0NvdW50ID0gaXNWaWRlbyA/IHRoaXMuZmlsbGVkVmlkZW9TYW1wbGVzLmxlbmd0aCA6IHRoaXMuZmlsbGVkQXVkaW9TYW1wbGVzLmxlbmd0aFxuXG4gICAgaWYgKCFtZXRhLnJlZlNhbXBsZUR1cmF0aW9uIHx8IG1ldGEucmVmU2FtcGxlRHVyYXRpb24gPD0gMCB8fCBOdW1iZXIuaXNOYU4obWV0YS5yZWZTYW1wbGVEdXJhdGlvbikpIHtcbiAgICAgIGlmIChzYW1wbGVzLmxlbmd0aCA+PSAxKSB7XG4gICAgICAgIGNvbnN0IGxhc3REdHMgPSBzYW1wbGVzW3NhbXBsZXMubGVuZ3RoIC0gMV0uZHRzXG5cbiAgICAgICAgbWV0YS5yZWZTYW1wbGVEdXJhdGlvbiA9IE1hdGguZmxvb3IoKGxhc3REdHMgLSBmaXJzdER0cykgLyAoKGFsbFNhbXBsZXNDb3VudCArIGZpbGxlZFNhbXBsZXNDb3VudCkgLSAxKSk7IC8vIOWwhnJlZlNhbXBsZUR1cmF0aW9u6YeN572u5Li66K6h566X5ZCO55qE5bmz5Z2H5YC8XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChtZXRhLnJlZlNhbXBsZUR1cmF0aW9uKSB7XG4gICAgICBpZiAoc2FtcGxlcy5sZW5ndGggPj0gMykge1xuICAgICAgICBjb25zdCBsYXN0RHRzID0gc2FtcGxlc1tzYW1wbGVzLmxlbmd0aCAtIDFdLmR0c1xuICAgICAgICBjb25zdCBmaXJzdER0cyA9IHNhbXBsZXNbMF0uZHRzXG4gICAgICAgIGNvbnN0IGR1cmF0aW9uQXZnID0gKGxhc3REdHMgLSBmaXJzdER0cykgLyBzYW1wbGVzLmxlbmd0aFxuXG4gICAgICAgIG1ldGEucmVmU2FtcGxlRHVyYXRpb24gPSBNYXRoLmFicyhtZXRhLnJlZlNhbXBsZUR1cmF0aW9uIC0gZHVyYXRpb25BdmcpIDw9IG1ldGEucmVmU2FtcGxlRHVyYXRpb24gPyBtZXRhLnJlZlNhbXBsZUR1cmF0aW9uIDogZHVyYXRpb25Bdmc7IC8vIOWwhnJlZlNhbXBsZUR1cmF0aW9u6YeN572u5Li66K6h566X5ZCO55qE5bmz5Z2H5YC8XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIOiusOW9leaIquatouebruWJjeS4gOWFseaSreaUvuS6huWkmuWwkeW4p1xuICAgKi9cbiAgcmVjb3JkU2FtcGxlc0NvdW50ICgpIHtcbiAgICBjb25zdCB7IGF1ZGlvVHJhY2ssIHZpZGVvVHJhY2sgfSA9IHRoaXNcblxuICAgIHRoaXMuYWxsQXVkaW9TYW1wbGVzQ291bnQgKz0gYXVkaW9UcmFjay5zYW1wbGVzLmxlbmd0aFxuICAgIHRoaXMuYWxsVmlkZW9TYW1wbGVzQ291bnQgKz0gdmlkZW9UcmFjay5zYW1wbGVzLmxlbmd0aFxuICB9XG5cbiAgLyoqXG4gICAqIOWOu+mZpOS4jeWQiOazleeahOW4p++8iOWAkumAgOOAgemHjeWkjeW4p++8iVxuICAgKi9cbiAgcmVtb3ZlSW52YWxpZFNhbXBsZXMgKCkge1xuICAgIGNvbnN0IHsgX2ZpcnN0VmlkZW9TYW1wbGUsIF9maXJzdEF1ZGlvU2FtcGxlIH0gPSB0aGlzXG5cbiAgICB0aGlzLmF1ZGlvVHJhY2suc2FtcGxlcyA9IHRoaXMuYXVkaW9UcmFjay5zYW1wbGVzLmZpbHRlcigoc2FtcGxlKSA9PiB7XG4gICAgICByZXR1cm4gc2FtcGxlLmR0cyA+PSBfZmlyc3RBdWRpb1NhbXBsZS5kdHMgJiYgKHRoaXMubGFzdEF1ZGlvRHRzID09PSB1bmRlZmluZWQgfHwgc2FtcGxlLmR0cyA+IHRoaXMubGFzdEF1ZGlvRHRzKVxuICAgIH0pXG5cbiAgICB0aGlzLnZpZGVvVHJhY2suc2FtcGxlcyA9IHRoaXMudmlkZW9UcmFjay5zYW1wbGVzLmZpbHRlcigoc2FtcGxlKSA9PiB7XG4gICAgICByZXR1cm4gc2FtcGxlLmR0cyA+PSBfZmlyc3RWaWRlb1NhbXBsZS5kdHMgJiYgKHRoaXMubGFzdFZpZGVvRHRzID09PSB1bmRlZmluZWQgfHwgc2FtcGxlLmR0cyA+IHRoaXMubGFzdFZpZGVvRHRzKVxuICAgIH0pXG4gIH1cblxuICBzdGF0aWMgc29ydEF1ZGlvU2FtcGxlcyAoc2FtcGxlcykge1xuICAgIGlmIChzYW1wbGVzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgcmV0dXJuIHNhbXBsZXNcbiAgICB9XG5cbiAgICByZXR1cm4gc2FtcGxlcy5zb3J0KChhLCBiKSA9PiB7XG4gICAgICByZXR1cm4gYS5kdHMgLSBiLmR0c1xuICAgIH0pXG4gIH1cblxuICAvKipcbiAgICog5a+75om+ZHRz5pyA5bCP55qEc2FtcGxlXG4gICAqIEBwYXJhbSBzYW1wbGVzXG4gICAqL1xuICBzdGF0aWMgZmluZEZpcnN0QXVkaW9TYW1wbGUgKHNhbXBsZXMpIHtcbiAgICBpZiAoIXNhbXBsZXMgfHwgc2FtcGxlcy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiBudWxsXG4gICAgfVxuXG4gICAgcmV0dXJuIENvbXBhdGliaWxpdHkuc29ydEF1ZGlvU2FtcGxlcyhzYW1wbGVzKVswXVxuICB9XG5cbiAgc3RhdGljIGZpbmRGaXJzdFZpZGVvU2FtcGxlIChzYW1wbGVzKSB7XG4gICAgaWYgKCFzYW1wbGVzLmxlbmd0aCkge1xuICAgICAgcmV0dXJuIG51bGxcbiAgICB9XG5cbiAgICBjb25zdCBzb3J0ZWQgPSBzYW1wbGVzLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgIHJldHVybiBhLmR0cyAtIGIuZHRzO1xuICAgIH0pXG5cbiAgICBmb3IgKGxldCBpID0gMCwgbGVuID0gc29ydGVkLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICBpZiAoc29ydGVkW2ldLmlzS2V5ZnJhbWUpIHtcbiAgICAgICAgcmV0dXJuIHNvcnRlZFtpXVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGdldCB0cmFja3MgKCkge1xuICAgIHJldHVybiB0aGlzLl9jb250ZXh0LmdldEluc3RhbmNlKCdUUkFDS1MnKVxuICB9XG5cbiAgZ2V0IGF1ZGlvVHJhY2sgKCkge1xuICAgIGlmICh0aGlzLnRyYWNrcykge1xuICAgICAgcmV0dXJuIHRoaXMudHJhY2tzLmF1ZGlvVHJhY2tcbiAgICB9XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIGdldCB2aWRlb1RyYWNrICgpIHtcbiAgICBpZiAodGhpcy50cmFja3MpIHtcbiAgICAgIHJldHVybiB0aGlzLnRyYWNrcy52aWRlb1RyYWNrXG4gICAgfVxuICAgIHJldHVybiBudWxsXG4gIH1cbn1cbmV4cG9ydCBkZWZhdWx0IENvbXBhdGliaWxpdHk7XG4iLCJjbGFzcyBHb2xvbWIge1xuICBjb25zdHJ1Y3RvciAodWludDhhcnJheSkge1xuICAgIHRoaXMuVEFHID0gJ0dvbG9tYidcbiAgICB0aGlzLl9idWZmZXIgPSB1aW50OGFycmF5XG4gICAgdGhpcy5fYnVmZmVySW5kZXggPSAwXG4gICAgdGhpcy5fdG90YWxCeXRlcyA9IHVpbnQ4YXJyYXkuYnl0ZUxlbmd0aFxuICAgIHRoaXMuX3RvdGFsQml0cyA9IHVpbnQ4YXJyYXkuYnl0ZUxlbmd0aCAqIDhcbiAgICB0aGlzLl9jdXJyZW50V29yZCA9IDBcbiAgICB0aGlzLl9jdXJyZW50V29yZEJpdHNMZWZ0ID0gMFxuICB9XG5cbiAgZGVzdHJveSAoKSB7XG4gICAgdGhpcy5fYnVmZmVyID0gbnVsbFxuICB9XG5cbiAgX2ZpbGxDdXJyZW50V29yZCAoKSB7XG4gICAgbGV0IGJ1ZmZlckJ5dGVzTGVmdCA9IHRoaXMuX3RvdGFsQnl0ZXMgLSB0aGlzLl9idWZmZXJJbmRleFxuICAgIGlmIChidWZmZXJCeXRlc0xlZnQgPD0gMCkge1xuICAgICAgLy8gVE9ETyDlvILluLjlpITnkIZcbiAgICB9XG5cbiAgICBsZXQgYnl0ZXNSZWFkID0gTWF0aC5taW4oNCwgYnVmZmVyQnl0ZXNMZWZ0KVxuICAgIGxldCB3b3JkID0gbmV3IFVpbnQ4QXJyYXkoNClcbiAgICB3b3JkLnNldCh0aGlzLl9idWZmZXIuc3ViYXJyYXkodGhpcy5fYnVmZmVySW5kZXgsIHRoaXMuX2J1ZmZlckluZGV4ICsgYnl0ZXNSZWFkKSlcbiAgICB0aGlzLl9jdXJyZW50V29yZCA9IG5ldyBEYXRhVmlldyh3b3JkLmJ1ZmZlcikuZ2V0VWludDMyKDAsIGZhbHNlKVxuXG4gICAgdGhpcy5fYnVmZmVySW5kZXggKz0gYnl0ZXNSZWFkXG4gICAgdGhpcy5fY3VycmVudFdvcmRCaXRzTGVmdCA9IGJ5dGVzUmVhZCAqIDhcbiAgfVxuXG4gIHJlYWRCaXRzIChiaXRzKSB7XG4gICAgaWYgKGJpdHMgPiAzMikge1xuICAgICAgLy8gVE9ET1xuICAgIH1cblxuICAgIGlmIChiaXRzIDw9IHRoaXMuX2N1cnJlbnRXb3JkQml0c0xlZnQpIHtcbiAgICAgIGxldCByZXN1bHQgPSB0aGlzLl9jdXJyZW50V29yZCA+Pj4gKDMyIC0gYml0cylcbiAgICAgIHRoaXMuX2N1cnJlbnRXb3JkIDw8PSBiaXRzXG4gICAgICB0aGlzLl9jdXJyZW50V29yZEJpdHNMZWZ0IC09IGJpdHNcbiAgICAgIHJldHVybiByZXN1bHRcbiAgICB9XG5cbiAgICBsZXQgcmVzdWx0ID0gdGhpcy5fY3VycmVudFdvcmRCaXRzTGVmdCA/IHRoaXMuX2N1cnJlbnRXb3JkIDogMFxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZVxuICAgIHJlc3VsdCA+Pj4gKDMyIC0gdGhpcy5fY3VycmVudFdvcmRCaXRzTGVmdClcbiAgICBsZXQgYml0c05lZWRMZWZ0ID0gYml0cyAtIHRoaXMuX2N1cnJlbnRXb3JkQml0c0xlZnRcblxuICAgIHRoaXMuX2ZpbGxDdXJyZW50V29yZCgpXG4gICAgbGV0IGJpdHNSZWFkTmV4dCA9IE1hdGgubWluKGJpdHNOZWVkTGVmdCwgdGhpcy5fY3VycmVudFdvcmRCaXRzTGVmdClcblxuICAgIGxldCByZXN1bHQyID0gdGhpcy5fY3VycmVudFdvcmQgPj4+ICgzMiAtIGJpdHNSZWFkTmV4dClcbiAgICB0aGlzLl9jdXJyZW50V29yZCA8PD0gYml0c1JlYWROZXh0XG4gICAgdGhpcy5fY3VycmVudFdvcmRCaXRzTGVmdCAtPSBiaXRzUmVhZE5leHRcblxuICAgIHJlc3VsdCA9IChyZXN1bHQgPDwgYml0c1JlYWROZXh0KSB8IHJlc3VsdDJcbiAgICByZXR1cm4gcmVzdWx0XG4gIH1cblxuICByZWFkQm9vbCAoKSB7XG4gICAgcmV0dXJuIHRoaXMucmVhZEJpdHMoMSkgPT09IDFcbiAgfVxuXG4gIHJlYWRCeXRlICgpIHtcbiAgICByZXR1cm4gdGhpcy5yZWFkQml0cyg4KVxuICB9XG5cbiAgX3NraXBMZWFkaW5nWmVybyAoKSB7XG4gICAgbGV0IHplcm9Db3VudFxuICAgIGZvciAoemVyb0NvdW50ID0gMDsgemVyb0NvdW50IDwgdGhpcy5fY3VycmVudFdvcmRCaXRzTGVmdDsgemVyb0NvdW50KyspIHtcbiAgICAgIGlmICgodGhpcy5fY3VycmVudFdvcmQgJiAoMHg4MDAwMDAwMCA+Pj4gemVyb0NvdW50KSkgIT09IDApIHtcbiAgICAgICAgdGhpcy5fY3VycmVudFdvcmQgPDw9IHplcm9Db3VudFxuICAgICAgICB0aGlzLl9jdXJyZW50V29yZEJpdHNMZWZ0IC09IHplcm9Db3VudFxuICAgICAgICByZXR1cm4gemVyb0NvdW50XG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMuX2ZpbGxDdXJyZW50V29yZCgpXG4gICAgcmV0dXJuIHplcm9Db3VudCArIHRoaXMuX3NraXBMZWFkaW5nWmVybygpXG4gIH1cblxuICByZWFkVUVHICgpIHsgLy8gdW5zaWduZWQgZXhwb25lbnRpYWwgZ29sb21iXG4gICAgbGV0IGxlYWRpbmdaZXJvcyA9IHRoaXMuX3NraXBMZWFkaW5nWmVybygpXG4gICAgcmV0dXJuIHRoaXMucmVhZEJpdHMobGVhZGluZ1plcm9zICsgMSkgLSAxXG4gIH1cblxuICByZWFkU0VHICgpIHsgLy8gc2lnbmVkIGV4cG9uZW50aWFsIGdvbG9tYlxuICAgIGxldCB2YWx1ZSA9IHRoaXMucmVhZFVFRygpXG4gICAgaWYgKHZhbHVlICYgMHgwMSkge1xuICAgICAgcmV0dXJuICh2YWx1ZSArIDEpID4+PiAxXG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiAtMSAqICh2YWx1ZSA+Pj4gMSlcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgR29sb21iXG4iLCJpbXBvcnQgU3BzUGFyc2VyIGZyb20gJy4vc3BzJztcbmNsYXNzIE5hbHVuaXQge1xuICBzdGF0aWMgZ2V0TmFsdW5pdHMgKGJ1ZmZlcikge1xuICAgIGlmIChidWZmZXIubGVuZ3RoIC0gYnVmZmVyLnBvc2l0aW9uIDwgNCkge1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cblxuICAgIGxldCBidWYgPSBidWZmZXIuZGF0YXZpZXc7XG4gICAgbGV0IHBvc2l0aW9uID0gYnVmZmVyLnBvc2l0aW9uO1xuICAgIGlmIChidWYuZ2V0SW50MzIocG9zaXRpb24pID09PSAxIHx8XG4gICAgKGJ1Zi5nZXRJbnQxNihwb3NpdGlvbikgPT09IDAgJiYgYnVmLmdldEludDgocG9zaXRpb24gKyAyKSA9PT0gMSkpIHtcbiAgICAgIHJldHVybiBOYWx1bml0LmdldEFubmV4Yk5hbHMoYnVmZmVyKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIE5hbHVuaXQuZ2V0QXZjY05hbHMoYnVmZmVyKTtcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgZ2V0QW5uZXhiTmFscyAoYnVmZmVyKSB7XG4gICAgbGV0IG5hbHMgPSBbXTtcbiAgICBsZXQgcG9zaXRpb24gPSBOYWx1bml0LmdldEhlYWRlclBvc2l0aW9uQW5uZXhCKGJ1ZmZlcik7XG4gICAgbGV0IHN0YXJ0ID0gcG9zaXRpb24ucG9zO1xuICAgIGxldCBlbmQgPSBzdGFydDtcbiAgICB3aGlsZSAoc3RhcnQgPCBidWZmZXIubGVuZ3RoIC0gNCkge1xuICAgICAgbGV0IGhlYWRlciA9IGJ1ZmZlci5idWZmZXIuc2xpY2Uoc3RhcnQsIHN0YXJ0ICsgcG9zaXRpb24uaGVhZGVyTGVuZ3RoKTtcbiAgICAgIGlmIChwb3NpdGlvbi5wb3MgPT09IGJ1ZmZlci5wb3NpdGlvbikge1xuICAgICAgICBidWZmZXIuc2tpcChwb3NpdGlvbi5oZWFkZXJMZW5ndGgpO1xuICAgICAgfVxuICAgICAgcG9zaXRpb24gPSBOYWx1bml0LmdldEhlYWRlclBvc2l0aW9uQW5uZXhCKGJ1ZmZlcik7XG4gICAgICBlbmQgPSBwb3NpdGlvbi5wb3M7XG4gICAgICBsZXQgYm9keSA9IG5ldyBVaW50OEFycmF5KGJ1ZmZlci5idWZmZXIuc2xpY2Uoc3RhcnQgKyBoZWFkZXIuYnl0ZUxlbmd0aCwgZW5kKSk7XG4gICAgICBsZXQgdW5pdCA9IHtoZWFkZXIsIGJvZHl9O1xuICAgICAgTmFsdW5pdC5hbmFseXNlTmFsKHVuaXQpO1xuICAgICAgbmFscy5wdXNoKHVuaXQpO1xuICAgICAgYnVmZmVyLnNraXAoZW5kIC0gYnVmZmVyLnBvc2l0aW9uKTtcbiAgICAgIHN0YXJ0ID0gZW5kO1xuICAgIH1cbiAgICByZXR1cm4gbmFscztcbiAgfVxuXG4gIHN0YXRpYyBnZXRBdmNjTmFscyAoYnVmZmVyKSB7XG4gICAgbGV0IG5hbHMgPSBbXTtcbiAgICB3aGlsZSAoYnVmZmVyLnBvc2l0aW9uIDwgYnVmZmVyLmxlbmd0aCAtIDQpIHtcbiAgICAgIGxldCBsZW5ndGggPSBidWZmZXIuZGF0YXZpZXcuZ2V0SW50MzIoYnVmZmVyLnBvc2l0aW9uKTtcbiAgICAgIGlmIChidWZmZXIubGVuZ3RoIC0gYnVmZmVyLnBvc2l0aW9uID49IGxlbmd0aCkge1xuICAgICAgICBsZXQgaGVhZGVyID0gYnVmZmVyLmJ1ZmZlci5zbGljZShidWZmZXIucG9zaXRpb24sIGJ1ZmZlci5wb3NpdGlvbiArIDQpO1xuICAgICAgICBidWZmZXIuc2tpcCg0KVxuICAgICAgICBsZXQgYm9keSA9IGJ1ZmZlci5idWZmZXIuc2xpY2UoYnVmZmVyLnBvc2l0aW9uLCBidWZmZXIucG9zaXRpb24gKyBsZW5ndGgpO1xuICAgICAgICBidWZmZXIuc2tpcChsZW5ndGgpO1xuICAgICAgICBsZXQgdW5pdCA9IHtoZWFkZXIsIGJvZHl9O1xuICAgICAgICBOYWx1bml0LmFuYWx5c2VOYWwodW5pdCk7XG4gICAgICAgIG5hbHMucHVzaCh1bml0KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbmFscztcbiAgfVxuXG4gIHN0YXRpYyBhbmFseXNlTmFsICh1bml0KSB7XG4gICAgbGV0IHR5cGUgPSB1bml0LmJvZHlbMF0gJiAweDFmO1xuICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgY2FzZSAxOlxuICAgICAgICAvLyBORFJcbiAgICAgICAgdW5pdC5uZHIgPSB0cnVlO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgNTpcbiAgICAgICAgLy8gSURSXG4gICAgICAgIHVuaXQuaWRyID0gdHJ1ZTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIDY6XG4gICAgICAgIC8vIFNFSVxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgNzpcbiAgICAgICAgLy8gU1BTXG4gICAgICAgIHVuaXQuc3BzID0gU3BzUGFyc2VyLnBhcnNlU1BTKHVuaXQuYm9keSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSA4OlxuICAgICAgICAvLyBQUFNcbiAgICAgICAgdW5pdC5wcHMgPSB0cnVlO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgOTpcbiAgICAgICAgLy8gQVVEXG4gICAgICAgIGJyZWFrO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGdldEhlYWRlclBvc2l0aW9uQW5uZXhCIChidWZmZXIpIHtcbiAgICAvLyBzZXBlcmF0ZVxuICAgIGxldCBwb3MgPSBidWZmZXIucG9zaXRpb247XG4gICAgbGV0IGhlYWRlckxlbmd0aCA9IDA7XG4gICAgd2hpbGUgKGhlYWRlckxlbmd0aCAhPT0gMyAmJiBoZWFkZXJMZW5ndGggIT09IDQgJiYgcG9zIDwgYnVmZmVyLmxlbmd0aCAtIDQpIHtcbiAgICAgIGlmIChidWZmZXIuZGF0YXZpZXcuZ2V0SW50MTYocG9zKSA9PT0gMCkge1xuICAgICAgICBpZiAoYnVmZmVyLmRhdGF2aWV3LmdldEludDE2KHBvcyArIDIpID09PSAxKSB7XG4gICAgICAgICAgLy8gMHgwMDAwMDFcbiAgICAgICAgICBoZWFkZXJMZW5ndGggPSA0O1xuICAgICAgICB9IGVsc2UgaWYgKGJ1ZmZlci5kYXRhdmlldy5nZXRJbnQ4KHBvcyArIDIpID09PSAxKSB7XG4gICAgICAgICAgaGVhZGVyTGVuZ3RoID0gMztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBwb3MrKztcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcG9zKys7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHBvcyA9PT0gYnVmZmVyLmxlbmd0aCAtIDQpIHtcbiAgICAgIGlmIChidWZmZXIuZGF0YXZpZXcuZ2V0SW50MTYocG9zKSA9PT0gMCkge1xuICAgICAgICBpZiAoYnVmZmVyLmRhdGF2aWV3LmdldEludDE2KHBvcyArIDIpID09PSAxKSB7XG4gICAgICAgICAgLy8gMHgwMDAwMDFcbiAgICAgICAgICBoZWFkZXJMZW5ndGggPSA0O1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBwb3MrKztcbiAgICAgICAgaWYgKGJ1ZmZlci5kYXRhdmlldy5nZXRJbnQxNihwb3MpID09PSAwICYmIGJ1ZmZlci5kYXRhdmlldy5nZXRJbnQ4KHBvcykgPT09IDEpIHtcbiAgICAgICAgICAvLyAweDAwMDAwMDFcbiAgICAgICAgICBoZWFkZXJMZW5ndGggPSAzO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHBvcyA9IGJ1ZmZlci5sZW5ndGg7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHtwb3MsIGhlYWRlckxlbmd0aH07XG4gIH1cblxuICBzdGF0aWMgZ2V0QXZjYyAoc3BzLCBwcHMpIHtcbiAgICBsZXQgcmV0ID0gbmV3IFVpbnQ4QXJyYXkoc3BzLmJ5dGVMZW5ndGggKyBwcHMuYnl0ZUxlbmd0aCArIDExKTtcbiAgICByZXRbMF0gPSAweDAxO1xuICAgIHJldFsxXSA9IHNwc1sxXTtcbiAgICByZXRbMl0gPSBzcHNbMl07XG4gICAgcmV0WzNdID0gc3BzWzNdO1xuICAgIHJldFs0XSA9IDI1NTtcbiAgICByZXRbNV0gPSAyMjU7XG5cbiAgICBsZXQgb2Zmc2V0ID0gNjtcblxuICAgIHJldC5zZXQobmV3IFVpbnQ4QXJyYXkoWyhzcHMuYnl0ZUxlbmd0aCA+Pj4gOCkgJiAweGZmLCBzcHMuYnl0ZUxlbmd0aCAmIDB4ZmZdKSwgb2Zmc2V0KTtcbiAgICBvZmZzZXQgKz0gMjtcbiAgICByZXQuc2V0KHNwcywgb2Zmc2V0KTtcbiAgICBvZmZzZXQgKz0gc3BzLmJ5dGVMZW5ndGg7XG5cbiAgICByZXRbb2Zmc2V0XSA9IDE7XG4gICAgb2Zmc2V0Kys7XG5cbiAgICByZXQuc2V0KG5ldyBVaW50OEFycmF5KFsocHBzLmJ5dGVMZW5ndGggPj4+IDgpICYgMHhmZiwgcHBzLmJ5dGVMZW5ndGggJiAweGZmXSksIG9mZnNldCk7XG4gICAgb2Zmc2V0ICs9IDI7XG4gICAgcmV0LnNldChwcHMsIG9mZnNldCk7XG4gICAgcmV0dXJuIHJldDtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBOYWx1bml0O1xuIiwiLyogZXNsaW50LWRpc2FibGUgY2FtZWxjYXNlICAqL1xuLyogZXNsaW50LWRpc2FibGUgb25lLXZhciAgKi9cbmltcG9ydCBHb2xvbWIgZnJvbSAnLi9nb2xvbWInXG5cbmNsYXNzIFNQU1BhcnNlciB7XG4gIHN0YXRpYyBfZWJzcDJyYnNwICh1aW50OGFycmF5KSB7XG4gICAgbGV0IHNyYyA9IHVpbnQ4YXJyYXlcbiAgICBsZXQgc3JjTGVuZ3RoID0gc3JjLmJ5dGVMZW5ndGhcbiAgICBsZXQgZHN0ID0gbmV3IFVpbnQ4QXJyYXkoc3JjTGVuZ3RoKVxuICAgIGxldCBkc3RJZHggPSAwXG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNyY0xlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAoaSA+PSAyKSB7XG4gICAgICAgIGlmIChzcmNbaV0gPT09IDB4MDMgJiYgc3JjW2kgLSAxXSA9PT0gMHgwMCAmJiBzcmNbaSAtIDJdID09PSAweDAwKSB7XG4gICAgICAgICAgY29udGludWVcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgZHN0W2RzdElkeF0gPSBzcmNbaV1cbiAgICAgIGRzdElkeCsrXG4gICAgfVxuXG4gICAgcmV0dXJuIG5ldyBVaW50OEFycmF5KGRzdC5idWZmZXIsIDAsIGRzdElkeClcbiAgfVxuXG4gIHN0YXRpYyBwYXJzZVNQUyAodWludDhhcnJheSkge1xuICAgIGxldCByYnNwID0gU1BTUGFyc2VyLl9lYnNwMnJic3AodWludDhhcnJheSlcbiAgICBsZXQgZ2IgPSBuZXcgR29sb21iKHJic3ApXG5cbiAgICBnYi5yZWFkQnl0ZSgpXG4gICAgbGV0IHByb2ZpbGVJZGMgPSBnYi5yZWFkQnl0ZSgpXG4gICAgZ2IucmVhZEJ5dGUoKVxuICAgIGxldCBsZXZlbElkYyA9IGdiLnJlYWRCeXRlKClcbiAgICBnYi5yZWFkVUVHKClcblxuICAgIGxldCBwcm9maWxlX3N0cmluZyA9IFNQU1BhcnNlci5nZXRQcm9maWxlU3RyaW5nKHByb2ZpbGVJZGMpXG4gICAgbGV0IGxldmVsX3N0cmluZyA9IFNQU1BhcnNlci5nZXRMZXZlbFN0cmluZyhsZXZlbElkYylcbiAgICBsZXQgY2hyb21hX2Zvcm1hdF9pZGMgPSAxXG4gICAgbGV0IGNocm9tYV9mb3JtYXQgPSA0MjBcbiAgICBsZXQgY2hyb21hX2Zvcm1hdF90YWJsZSA9IFswLCA0MjAsIDQyMiwgNDQ0XVxuICAgIGxldCBiaXRfZGVwdGggPSA4XG5cbiAgICBpZiAocHJvZmlsZUlkYyA9PT0gMTAwIHx8IHByb2ZpbGVJZGMgPT09IDExMCB8fCBwcm9maWxlSWRjID09PSAxMjIgfHxcbiAgICAgIHByb2ZpbGVJZGMgPT09IDI0NCB8fCBwcm9maWxlSWRjID09PSA0NCB8fCBwcm9maWxlSWRjID09PSA4MyB8fFxuICAgICAgcHJvZmlsZUlkYyA9PT0gODYgfHwgcHJvZmlsZUlkYyA9PT0gMTE4IHx8IHByb2ZpbGVJZGMgPT09IDEyOCB8fFxuICAgICAgcHJvZmlsZUlkYyA9PT0gMTM4IHx8IHByb2ZpbGVJZGMgPT09IDE0NCkge1xuICAgICAgY2hyb21hX2Zvcm1hdF9pZGMgPSBnYi5yZWFkVUVHKClcbiAgICAgIGlmIChjaHJvbWFfZm9ybWF0X2lkYyA9PT0gMykge1xuICAgICAgICBnYi5yZWFkQml0cygxKVxuICAgICAgfVxuICAgICAgaWYgKGNocm9tYV9mb3JtYXRfaWRjIDw9IDMpIHtcbiAgICAgICAgY2hyb21hX2Zvcm1hdCA9IGNocm9tYV9mb3JtYXRfdGFibGVbY2hyb21hX2Zvcm1hdF9pZGNdXG4gICAgICB9XG5cbiAgICAgIGJpdF9kZXB0aCA9IGdiLnJlYWRVRUcoKSArIDhcbiAgICAgIGdiLnJlYWRVRUcoKVxuICAgICAgZ2IucmVhZEJpdHMoMSlcbiAgICAgIGlmIChnYi5yZWFkQm9vbCgpKSB7XG4gICAgICAgIGxldCBzY2FsaW5nX2xpc3RfY291bnQgPSAoY2hyb21hX2Zvcm1hdF9pZGMgIT09IDMpID8gOCA6IDEyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2NhbGluZ19saXN0X2NvdW50OyBpKyspIHtcbiAgICAgICAgICBpZiAoZ2IucmVhZEJvb2woKSkge1xuICAgICAgICAgICAgaWYgKGkgPCA2KSB7XG4gICAgICAgICAgICAgIFNQU1BhcnNlci5fc2tpcFNjYWxpbmdMaXN0KGdiLCAxNilcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIFNQU1BhcnNlci5fc2tpcFNjYWxpbmdMaXN0KGdiLCA2NClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgZ2IucmVhZFVFRygpXG4gICAgbGV0IHBpY19vcmRlcl9jbnRfdHlwZSA9IGdiLnJlYWRVRUcoKVxuICAgIGlmIChwaWNfb3JkZXJfY250X3R5cGUgPT09IDApIHtcbiAgICAgIGdiLnJlYWRVRUcoKVxuICAgIH0gZWxzZSBpZiAocGljX29yZGVyX2NudF90eXBlID09PSAxKSB7XG4gICAgICBnYi5yZWFkQml0cygxKVxuICAgICAgZ2IucmVhZFNFRygpXG4gICAgICBnYi5yZWFkU0VHKClcbiAgICAgIGxldCBudW1fcmVmX2ZyYW1lc19pbl9waWNfb3JkZXJfY250X2N5Y2xlID0gZ2IucmVhZFVFRygpXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bV9yZWZfZnJhbWVzX2luX3BpY19vcmRlcl9jbnRfY3ljbGU7IGkrKykge1xuICAgICAgICBnYi5yZWFkU0VHKClcbiAgICAgIH1cbiAgICB9XG4gICAgZ2IucmVhZFVFRygpXG4gICAgZ2IucmVhZEJpdHMoMSlcblxuICAgIGxldCBwaWNfd2lkdGhfaW5fbWJzX21pbnVzMSA9IGdiLnJlYWRVRUcoKVxuICAgIGxldCBwaWNfaGVpZ2h0X2luX21hcF91bml0c19taW51czEgPSBnYi5yZWFkVUVHKClcblxuICAgIGxldCBmcmFtZV9tYnNfb25seV9mbGFnID0gZ2IucmVhZEJpdHMoMSlcbiAgICBpZiAoZnJhbWVfbWJzX29ubHlfZmxhZyA9PT0gMCkge1xuICAgICAgZ2IucmVhZEJpdHMoMSlcbiAgICB9XG4gICAgZ2IucmVhZEJpdHMoMSlcblxuICAgIGxldCBmcmFtZV9jcm9wX2xlZnRfb2Zmc2V0ID0gMFxuICAgIGxldCBmcmFtZV9jcm9wX3JpZ2h0X29mZnNldCA9IDBcbiAgICBsZXQgZnJhbWVfY3JvcF90b3Bfb2Zmc2V0ID0gMFxuICAgIGxldCBmcmFtZV9jcm9wX2JvdHRvbV9vZmZzZXQgPSAwXG5cbiAgICBsZXQgZnJhbWVfY3JvcHBpbmdfZmxhZyA9IGdiLnJlYWRCb29sKClcbiAgICBpZiAoZnJhbWVfY3JvcHBpbmdfZmxhZykge1xuICAgICAgZnJhbWVfY3JvcF9sZWZ0X29mZnNldCA9IGdiLnJlYWRVRUcoKVxuICAgICAgZnJhbWVfY3JvcF9yaWdodF9vZmZzZXQgPSBnYi5yZWFkVUVHKClcbiAgICAgIGZyYW1lX2Nyb3BfdG9wX29mZnNldCA9IGdiLnJlYWRVRUcoKVxuICAgICAgZnJhbWVfY3JvcF9ib3R0b21fb2Zmc2V0ID0gZ2IucmVhZFVFRygpXG4gICAgfVxuXG4gICAgbGV0IHBhcl93aWR0aCA9IDEsIHBhcl9oZWlnaHQgPSAxXG4gICAgbGV0IGZwcyA9IDAsIGZwc19maXhlZCA9IHRydWUsIGZwc19udW0gPSAwLCBmcHNfZGVuID0gMFxuXG4gICAgbGV0IHZ1aV9wYXJhbWV0ZXJzX3ByZXNlbnRfZmxhZyA9IGdiLnJlYWRCb29sKClcbiAgICBpZiAodnVpX3BhcmFtZXRlcnNfcHJlc2VudF9mbGFnKSB7XG4gICAgICBpZiAoZ2IucmVhZEJvb2woKSkgeyAvLyBhc3BlY3RfcmF0aW9faW5mb19wcmVzZW50X2ZsYWdcbiAgICAgICAgbGV0IGFzcGVjdF9yYXRpb19pZGMgPSBnYi5yZWFkQnl0ZSgpXG4gICAgICAgIGxldCBwYXJfd190YWJsZSA9IFsxLCAxMiwgMTAsIDE2LCA0MCwgMjQsIDIwLCAzMiwgODAsIDE4LCAxNSwgNjQsIDE2MCwgNCwgMywgMl1cbiAgICAgICAgbGV0IHBhcl9oX3RhYmxlID0gWzEsIDExLCAxMSwgMTEsIDMzLCAxMSwgMTEsIDExLCAzMywgMTEsIDExLCAzMywgOTksIDMsIDIsIDFdXG5cbiAgICAgICAgaWYgKGFzcGVjdF9yYXRpb19pZGMgPiAwICYmIGFzcGVjdF9yYXRpb19pZGMgPCAxNikge1xuICAgICAgICAgIHBhcl93aWR0aCA9IHBhcl93X3RhYmxlW2FzcGVjdF9yYXRpb19pZGMgLSAxXVxuICAgICAgICAgIHBhcl9oZWlnaHQgPSBwYXJfaF90YWJsZVthc3BlY3RfcmF0aW9faWRjIC0gMV1cbiAgICAgICAgfSBlbHNlIGlmIChhc3BlY3RfcmF0aW9faWRjID09PSAyNTUpIHtcbiAgICAgICAgICBwYXJfd2lkdGggPSBnYi5yZWFkQnl0ZSgpIDw8IDggfCBnYi5yZWFkQnl0ZSgpXG4gICAgICAgICAgcGFyX2hlaWdodCA9IGdiLnJlYWRCeXRlKCkgPDwgOCB8IGdiLnJlYWRCeXRlKClcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoZ2IucmVhZEJvb2woKSkge1xuICAgICAgICBnYi5yZWFkQm9vbCgpXG4gICAgICB9XG4gICAgICBpZiAoZ2IucmVhZEJvb2woKSkge1xuICAgICAgICBnYi5yZWFkQml0cyg0KVxuICAgICAgICBpZiAoZ2IucmVhZEJvb2woKSkge1xuICAgICAgICAgIGdiLnJlYWRCaXRzKDI0KVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoZ2IucmVhZEJvb2woKSkge1xuICAgICAgICBnYi5yZWFkVUVHKClcbiAgICAgICAgZ2IucmVhZFVFRygpXG4gICAgICB9XG4gICAgICBpZiAoZ2IucmVhZEJvb2woKSkge1xuICAgICAgICBsZXQgbnVtX3VuaXRzX2luX3RpY2sgPSBnYi5yZWFkQml0cygzMilcbiAgICAgICAgbGV0IHRpbWVfc2NhbGUgPSBnYi5yZWFkQml0cygzMilcbiAgICAgICAgZnBzX2ZpeGVkID0gZ2IucmVhZEJvb2woKVxuXG4gICAgICAgIGZwc19udW0gPSB0aW1lX3NjYWxlXG4gICAgICAgIGZwc19kZW4gPSBudW1fdW5pdHNfaW5fdGljayAqIDJcbiAgICAgICAgZnBzID0gZnBzX251bSAvIGZwc19kZW5cbiAgICAgIH1cbiAgICB9XG5cbiAgICBsZXQgcGFyU2NhbGUgPSAxXG4gICAgaWYgKHBhcl93aWR0aCAhPT0gMSB8fCBwYXJfaGVpZ2h0ICE9PSAxKSB7XG4gICAgICBwYXJTY2FsZSA9IHBhcl93aWR0aCAvIHBhcl9oZWlnaHRcbiAgICB9XG5cbiAgICBsZXQgY3JvcF91bml0X3ggPSAwLCBjcm9wX3VuaXRfeSA9IDBcbiAgICBpZiAoY2hyb21hX2Zvcm1hdF9pZGMgPT09IDApIHtcbiAgICAgIGNyb3BfdW5pdF94ID0gMVxuICAgICAgY3JvcF91bml0X3kgPSAyIC0gZnJhbWVfbWJzX29ubHlfZmxhZ1xuICAgIH0gZWxzZSB7XG4gICAgICBsZXQgc3ViX3djID0gKGNocm9tYV9mb3JtYXRfaWRjID09PSAzKSA/IDEgOiAyXG4gICAgICBsZXQgc3ViX2hjID0gKGNocm9tYV9mb3JtYXRfaWRjID09PSAxKSA/IDIgOiAxXG4gICAgICBjcm9wX3VuaXRfeCA9IHN1Yl93Y1xuICAgICAgY3JvcF91bml0X3kgPSBzdWJfaGMgKiAoMiAtIGZyYW1lX21ic19vbmx5X2ZsYWcpXG4gICAgfVxuXG4gICAgbGV0IGNvZGVjX3dpZHRoID0gKHBpY193aWR0aF9pbl9tYnNfbWludXMxICsgMSkgKiAxNlxuICAgIGxldCBjb2RlY19oZWlnaHQgPSAoMiAtIGZyYW1lX21ic19vbmx5X2ZsYWcpICogKChwaWNfaGVpZ2h0X2luX21hcF91bml0c19taW51czEgKyAxKSAqIDE2KVxuXG4gICAgY29kZWNfd2lkdGggLT0gKGZyYW1lX2Nyb3BfbGVmdF9vZmZzZXQgKyBmcmFtZV9jcm9wX3JpZ2h0X29mZnNldCkgKiBjcm9wX3VuaXRfeFxuICAgIGNvZGVjX2hlaWdodCAtPSAoZnJhbWVfY3JvcF90b3Bfb2Zmc2V0ICsgZnJhbWVfY3JvcF9ib3R0b21fb2Zmc2V0KSAqIGNyb3BfdW5pdF95XG5cbiAgICBsZXQgcHJlc2VudF93aWR0aCA9IE1hdGguY2VpbChjb2RlY193aWR0aCAqIHBhclNjYWxlKVxuXG4gICAgZ2IuZGVzdHJveSgpXG4gICAgZ2IgPSBudWxsXG5cbiAgICByZXR1cm4ge1xuICAgICAgcHJvZmlsZV9zdHJpbmc6IHByb2ZpbGVfc3RyaW5nLFxuICAgICAgbGV2ZWxfc3RyaW5nOiBsZXZlbF9zdHJpbmcsXG4gICAgICBiaXRfZGVwdGg6IGJpdF9kZXB0aCxcbiAgICAgIGNocm9tYV9mb3JtYXQ6IGNocm9tYV9mb3JtYXQsXG4gICAgICBjaHJvbWFfZm9ybWF0X3N0cmluZzogU1BTUGFyc2VyLmdldENocm9tYUZvcm1hdFN0cmluZyhjaHJvbWFfZm9ybWF0KSxcblxuICAgICAgZnJhbWVfcmF0ZToge1xuICAgICAgICBmaXhlZDogZnBzX2ZpeGVkLFxuICAgICAgICBmcHM6IGZwcyxcbiAgICAgICAgZnBzX2RlbjogZnBzX2RlbixcbiAgICAgICAgZnBzX251bTogZnBzX251bVxuICAgICAgfSxcblxuICAgICAgcGFyX3JhdGlvOiB7XG4gICAgICAgIHdpZHRoOiBwYXJfd2lkdGgsXG4gICAgICAgIGhlaWdodDogcGFyX2hlaWdodFxuICAgICAgfSxcblxuICAgICAgY29kZWNfc2l6ZToge1xuICAgICAgICB3aWR0aDogY29kZWNfd2lkdGgsXG4gICAgICAgIGhlaWdodDogY29kZWNfaGVpZ2h0XG4gICAgICB9LFxuXG4gICAgICBwcmVzZW50X3NpemU6IHtcbiAgICAgICAgd2lkdGg6IHByZXNlbnRfd2lkdGgsXG4gICAgICAgIGhlaWdodDogY29kZWNfaGVpZ2h0XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIF9za2lwU2NhbGluZ0xpc3QgKGdiLCBjb3VudCkge1xuICAgIGxldCBsYXN0X3NjYWxlID0gOCwgbmV4dF9zY2FsZSA9IDhcbiAgICBsZXQgZGVsdGFfc2NhbGUgPSAwXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb3VudDsgaSsrKSB7XG4gICAgICBpZiAobmV4dF9zY2FsZSAhPT0gMCkge1xuICAgICAgICBkZWx0YV9zY2FsZSA9IGdiLnJlYWRTRUcoKVxuICAgICAgICBuZXh0X3NjYWxlID0gKGxhc3Rfc2NhbGUgKyBkZWx0YV9zY2FsZSArIDI1NikgJSAyNTZcbiAgICAgIH1cbiAgICAgIGxhc3Rfc2NhbGUgPSAobmV4dF9zY2FsZSA9PT0gMCkgPyBsYXN0X3NjYWxlIDogbmV4dF9zY2FsZVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBnZXRQcm9maWxlU3RyaW5nIChwcm9maWxlSWRjKSB7XG4gICAgc3dpdGNoIChwcm9maWxlSWRjKSB7XG4gICAgICBjYXNlIDY2OlxuICAgICAgICByZXR1cm4gJ0Jhc2VsaW5lJ1xuICAgICAgY2FzZSA3NzpcbiAgICAgICAgcmV0dXJuICdNYWluJ1xuICAgICAgY2FzZSA4ODpcbiAgICAgICAgcmV0dXJuICdFeHRlbmRlZCdcbiAgICAgIGNhc2UgMTAwOlxuICAgICAgICByZXR1cm4gJ0hpZ2gnXG4gICAgICBjYXNlIDExMDpcbiAgICAgICAgcmV0dXJuICdIaWdoMTAnXG4gICAgICBjYXNlIDEyMjpcbiAgICAgICAgcmV0dXJuICdIaWdoNDIyJ1xuICAgICAgY2FzZSAyNDQ6XG4gICAgICAgIHJldHVybiAnSGlnaDQ0NCdcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiAnVW5rbm93bidcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgZ2V0TGV2ZWxTdHJpbmcgKGxldmVsSWRjKSB7XG4gICAgcmV0dXJuIChsZXZlbElkYyAvIDEwKS50b0ZpeGVkKDEpXG4gIH1cblxuICBzdGF0aWMgZ2V0Q2hyb21hRm9ybWF0U3RyaW5nIChjaHJvbWEpIHtcbiAgICBzd2l0Y2ggKGNocm9tYSkge1xuICAgICAgY2FzZSA0MjA6XG4gICAgICAgIHJldHVybiAnNDoyOjAnXG4gICAgICBjYXNlIDQyMjpcbiAgICAgICAgcmV0dXJuICc0OjI6MidcbiAgICAgIGNhc2UgNDQ0OlxuICAgICAgICByZXR1cm4gJzQ6NDo0J1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuICdVbmtub3duJ1xuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyB0b1ZpZGVvTWV0YSAoc3BzQ29uZmlnKSB7XG4gICAgbGV0IG1ldGEgPSB7fVxuICAgIGlmIChzcHNDb25maWcgJiYgc3BzQ29uZmlnLmNvZGVjX3NpemUpIHtcbiAgICAgIG1ldGEuY29kZWNXaWR0aCA9IHNwc0NvbmZpZy5jb2RlY19zaXplLndpZHRoXG4gICAgICBtZXRhLmNvZGVjSGVpZ2h0ID0gc3BzQ29uZmlnLmNvZGVjX3NpemUuaGVpZ2h0XG4gICAgICBtZXRhLnByZXNlbnRXaWR0aCA9IHNwc0NvbmZpZy5wcmVzZW50X3NpemUud2lkdGhcbiAgICAgIG1ldGEucHJlc2VudEhlaWdodCA9IHNwc0NvbmZpZy5wcmVzZW50X3NpemUuaGVpZ2h0XG4gICAgfVxuXG4gICAgbWV0YS5wcm9maWxlID0gc3BzQ29uZmlnLnByb2ZpbGVfc3RyaW5nXG4gICAgbWV0YS5sZXZlbCA9IHNwc0NvbmZpZy5sZXZlbF9zdHJpbmdcbiAgICBtZXRhLmJpdERlcHRoID0gc3BzQ29uZmlnLmJpdF9kZXB0aFxuICAgIG1ldGEuY2hyb21hRm9ybWF0ID0gc3BzQ29uZmlnLmNocm9tYV9mb3JtYXRcblxuICAgIG1ldGEucGFyUmF0aW8gPSB7XG4gICAgICB3aWR0aDogc3BzQ29uZmlnLnBhcl9yYXRpby53aWR0aCxcbiAgICAgIGhlaWdodDogc3BzQ29uZmlnLnBhcl9yYXRpby5oZWlnaHRcbiAgICB9XG5cbiAgICBtZXRhLmZyYW1lUmF0ZSA9IHNwc0NvbmZpZy5mcmFtZV9yYXRlXG5cbiAgICBsZXQgZnBzRGVuID0gbWV0YS5mcmFtZVJhdGUuZnBzX2RlblxuICAgIGxldCBmcHNOdW0gPSBtZXRhLmZyYW1lUmF0ZS5mcHNfbnVtXG4gICAgbWV0YS5yZWZTYW1wbGVEdXJhdGlvbiA9IE1hdGguZmxvb3IobWV0YS50aW1lc2NhbGUgKiAoZnBzRGVuIC8gZnBzTnVtKSlcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBTUFNQYXJzZXJcbiIsImltcG9ydCB7IGlzTGUsIFVURjggfSBmcm9tICd4Z3BsYXllci11dGlscydcblxuY29uc3QgREFUQV9UWVBFUyA9IHtcbiAgTlVNQkVSOiAwLFxuICBCT09MRUFOOiAxLFxuICBTVFJJTkc6IDIsXG4gIE9CSkVDVDogMyxcbiAgTUlYX0FSUkFZOiA4LFxuICBPQkpFQ1RfRU5EOiA5LFxuICBTVFJJQ1RfQVJSQVk6IDEwLFxuICBEQVRFOiAxMSxcbiAgTE9ORV9TVFJJTkc6IDEyXG59XG5cbi8qKlxuICogbWV0YeS/oeaBr+ino+aekFxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBBTUZQYXJzZXIge1xuICBjb25zdHJ1Y3RvciAoKSB7XG4gICAgdGhpcy5vZmZzZXQgPSAwXG4gICAgdGhpcy5yZWFkT2Zmc2V0ID0gdGhpcy5vZmZzZXRcbiAgfVxuXG4gIHJlc29sdmUgKG1ldGEsIHNpemUpIHtcbiAgICBpZiAoc2l6ZSA8IDMpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignbm90IGVub3VnaCBkYXRhIGZvciBtZXRhaW5mbycpXG4gICAgfVxuICAgIGNvbnN0IG1ldGFEYXRhID0ge31cbiAgICBjb25zdCBuYW1lID0gdGhpcy5wYXJzZVZhbHVlKG1ldGEpXG4gICAgY29uc3QgdmFsdWUgPSB0aGlzLnBhcnNlVmFsdWUobWV0YSwgc2l6ZSAtIG5hbWUuYm9keVNpemUpXG4gICAgbWV0YURhdGFbbmFtZS5kYXRhXSA9IHZhbHVlLmRhdGFcblxuICAgIHRoaXMucmVzZXRTdGF0dXMoKVxuICAgIHJldHVybiBtZXRhRGF0YVxuICB9XG5cbiAgcmVzZXRTdGF0dXMgKCkge1xuICAgIHRoaXMub2Zmc2V0ID0gMFxuICAgIHRoaXMucmVhZE9mZnNldCA9IHRoaXMub2Zmc2V0XG4gIH1cblxuICBwYXJzZVN0cmluZyAoYnVmZmVyKSB7XG4gICAgY29uc3QgZHYgPSBuZXcgRGF0YVZpZXcoYnVmZmVyLCB0aGlzLnJlYWRPZmZzZXQpXG4gICAgY29uc3Qgc3RyTGVuID0gZHYuZ2V0VWludDE2KDAsICFpc0xlKVxuICAgIGxldCBzdHIgPSAnJ1xuICAgIGlmIChzdHJMZW4gPiAwKSB7XG4gICAgICBzdHIgPSBVVEY4LmRlY29kZShuZXcgVWludDhBcnJheShidWZmZXIsIHRoaXMucmVhZE9mZnNldCArIDIsIHN0ckxlbikpXG4gICAgfSBlbHNlIHtcbiAgICAgIHN0ciA9ICcnXG4gICAgfVxuICAgIGxldCBzaXplID0gc3RyTGVuICsgMlxuICAgIHRoaXMucmVhZE9mZnNldCArPSBzaXplXG4gICAgcmV0dXJuIHtcbiAgICAgIGRhdGE6IHN0cixcbiAgICAgIGJvZHlTaXplOiBzdHJMZW4gKyAyXG4gICAgfVxuICB9XG5cbiAgcGFyc2VEYXRlIChidWZmZXIsIHNpemUpIHtcbiAgICBjb25zdCBkdiA9IG5ldyBEYXRhVmlldyhidWZmZXIsIHRoaXMucmVhZE9mZnNldCwgc2l6ZSlcbiAgICBsZXQgdHMgPSBkdi5nZXRGbG9hdDY0KDAsICFpc0xlKVxuICAgIGNvbnN0IHRpbWVPZmZzZXQgPSBkdi5nZXRJbnQxNig4LCAhaXNMZSlcbiAgICB0cyArPSB0aW1lT2Zmc2V0ICogNjAgKiAxMDAwXG5cbiAgICB0aGlzLnJlYWRPZmZzZXQgKz0gMTBcbiAgICByZXR1cm4ge1xuICAgICAgZGF0YTogbmV3IERhdGUodHMpLFxuICAgICAgYm9keVNpemU6IDEwXG4gICAgfVxuICB9XG5cbiAgcGFyc2VPYmplY3QgKGJ1ZmZlciwgc2l6ZSkge1xuICAgIGNvbnN0IG5hbWUgPSB0aGlzLnBhcnNlU3RyaW5nKGJ1ZmZlciwgc2l6ZSlcbiAgICBjb25zdCB2YWx1ZSA9IHRoaXMucGFyc2VWYWx1ZShidWZmZXIsIHNpemUgLSBuYW1lLmJvZHlTaXplKVxuICAgIHJldHVybiB7XG4gICAgICBkYXRhOiB7XG4gICAgICAgIG5hbWU6IG5hbWUuZGF0YSxcbiAgICAgICAgdmFsdWU6IHZhbHVlLmRhdGFcbiAgICAgIH0sXG4gICAgICBib2R5U2l6ZTogbmFtZS5ib2R5U2l6ZSArIHZhbHVlLmJvZHlTaXplLFxuICAgICAgaXNPYmpFbmQ6IHZhbHVlLmlzT2JqRW5kXG4gICAgfVxuICB9XG5cbiAgcGFyc2VMb25nU3RyaW5nIChidWZmZXIpIHtcbiAgICBjb25zdCBkdiA9IG5ldyBEYXRhVmlldyhidWZmZXIsIHRoaXMucmVhZE9mZnNldClcbiAgICBjb25zdCBzdHJMZW4gPSBkdi5nZXRVaW50MzIoMCwgIWlzTGUpXG4gICAgbGV0IHN0ciA9ICcnXG4gICAgaWYgKHN0ckxlbiA+IDApIHtcbiAgICAgIHN0ciA9IFVURjguZGVjb2RlKG5ldyBVaW50OEFycmF5KGJ1ZmZlciwgdGhpcy5yZWFkT2Zmc2V0ICsgMiwgc3RyTGVuKSlcbiAgICB9IGVsc2Uge1xuICAgICAgc3RyID0gJydcbiAgICB9XG4gICAgLy8gY29uc3Qgc2l6ZSA9IHN0ckxlbiArIDQ7XG4gICAgdGhpcy5yZWFkT2Zmc2V0ICs9IHN0ckxlbiArIDRcbiAgICByZXR1cm4ge1xuICAgICAgZGF0YTogc3RyLFxuICAgICAgYm9keVNpemU6IHN0ckxlbiArIDRcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICog6Kej5p6QbWV0YeS4reeahOWPmOmHj1xuICAgKi9cbiAgcGFyc2VWYWx1ZSAoZGF0YSwgc2l6ZSkge1xuICAgIGxldCBidWZmZXIgPSBuZXcgQXJyYXlCdWZmZXIoKVxuICAgIGlmIChkYXRhIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpIHtcbiAgICAgIGJ1ZmZlciA9IGRhdGFcbiAgICB9IGVsc2Uge1xuICAgICAgYnVmZmVyID0gZGF0YS5idWZmZXJcbiAgICB9XG4gICAgY29uc3Qge1xuICAgICAgTlVNQkVSLFxuICAgICAgQk9PTEVBTixcbiAgICAgIFNUUklORyxcbiAgICAgIE9CSkVDVCxcbiAgICAgIE1JWF9BUlJBWSxcbiAgICAgIE9CSkVDVF9FTkQsXG4gICAgICBTVFJJQ1RfQVJSQVksXG4gICAgICBEQVRFLFxuICAgICAgTE9ORV9TVFJJTkdcbiAgICB9ID0gREFUQV9UWVBFU1xuICAgIGNvbnN0IGRhdGFWaWV3ID0gbmV3IERhdGFWaWV3KGJ1ZmZlciwgdGhpcy5yZWFkT2Zmc2V0LCBzaXplKVxuICAgIGxldCBpc09iakVuZCA9IGZhbHNlXG4gICAgY29uc3QgdHlwZSA9IGRhdGFWaWV3LmdldFVpbnQ4KDApXG4gICAgbGV0IG9mZnNldCA9IDFcbiAgICB0aGlzLnJlYWRPZmZzZXQgKz0gMVxuICAgIGxldCB2YWx1ZSA9IG51bGxcblxuICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgY2FzZSBOVU1CRVI6IHtcbiAgICAgICAgdmFsdWUgPSBkYXRhVmlldy5nZXRGbG9hdDY0KDEsICFpc0xlKVxuICAgICAgICB0aGlzLnJlYWRPZmZzZXQgKz0gOFxuICAgICAgICBvZmZzZXQgKz0gOFxuICAgICAgICBicmVha1xuICAgICAgfVxuICAgICAgY2FzZSBCT09MRUFOOiB7XG4gICAgICAgIGNvbnN0IGJvb2xOdW0gPSBkYXRhVmlldy5nZXRVaW50OCgxKVxuICAgICAgICB2YWx1ZSA9ICEhYm9vbE51bVxuICAgICAgICB0aGlzLnJlYWRPZmZzZXQgKz0gMVxuICAgICAgICBvZmZzZXQgKz0gMVxuICAgICAgICBicmVha1xuICAgICAgfVxuICAgICAgY2FzZSBTVFJJTkc6IHtcbiAgICAgICAgY29uc3Qgc3RyID0gdGhpcy5wYXJzZVN0cmluZyhidWZmZXIpXG4gICAgICAgIHZhbHVlID0gc3RyLmRhdGFcbiAgICAgICAgb2Zmc2V0ICs9IHN0ci5ib2R5U2l6ZVxuICAgICAgICBicmVha1xuICAgICAgfVxuICAgICAgY2FzZSBPQkpFQ1Q6IHtcbiAgICAgICAgdmFsdWUgPSB7fVxuICAgICAgICBsZXQgb2JqRW5kU2l6ZSA9IDBcbiAgICAgICAgaWYgKGRhdGFWaWV3LmdldFVpbnQzMihzaXplIC0gNCwgIWlzTGUpICYgMHgwMEZGRkZGRikge1xuICAgICAgICAgIG9iakVuZFNpemUgPSAzXG4gICAgICAgIH1cbiAgICAgICAgLy8gdGhpcy5yZWFkT2Zmc2V0ICs9IG9mZnNldCAtIDE7XG4gICAgICAgIHdoaWxlIChvZmZzZXQgPCBzaXplIC0gNCkge1xuICAgICAgICAgIGNvbnN0IGFtZk9iaiA9IHRoaXMucGFyc2VPYmplY3QoYnVmZmVyLCBzaXplIC0gb2Zmc2V0IC0gb2JqRW5kU2l6ZSlcbiAgICAgICAgICBpZiAoYW1mT2JqLmlzT2JqZWN0RW5kKSB7IGJyZWFrIH1cbiAgICAgICAgICB2YWx1ZVthbWZPYmouZGF0YS5uYW1lXSA9IGFtZk9iai5kYXRhLnZhbHVlXG4gICAgICAgICAgb2Zmc2V0ICs9IGFtZk9iai5ib2R5U2l6ZVxuICAgICAgICB9XG4gICAgICAgIGlmIChvZmZzZXQgPD0gc2l6ZSAtIDMpIHtcbiAgICAgICAgICBjb25zdCBtYXJrID0gZGF0YVZpZXcuZ2V0VWludDMyKG9mZnNldCAtIDEsICFpc0xlKSAmIDB4MDBGRkZGRkZcbiAgICAgICAgICBpZiAobWFyayA9PT0gOSkge1xuICAgICAgICAgICAgdGhpcy5yZWFkT2Zmc2V0ICs9IDNcbiAgICAgICAgICAgIG9mZnNldCArPSAzXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgICBjYXNlIE1JWF9BUlJBWToge1xuICAgICAgICB2YWx1ZSA9IHt9XG4gICAgICAgIG9mZnNldCArPSA0XG4gICAgICAgIHRoaXMucmVhZE9mZnNldCArPSA0XG4gICAgICAgIGxldCBvYmpFbmRTaXplID0gMFxuICAgICAgICBpZiAoKGRhdGFWaWV3LmdldFVpbnQzMihzaXplIC0gNCwgIWlzTGUpICYgMHgwMEZGRkZGRikgPT09IDkpIHtcbiAgICAgICAgICBvYmpFbmRTaXplID0gM1xuICAgICAgICB9XG5cbiAgICAgICAgd2hpbGUgKG9mZnNldCA8IHNpemUgLSA4KSB7XG4gICAgICAgICAgY29uc3QgYW1mVmFyID0gdGhpcy5wYXJzZU9iamVjdChidWZmZXIsIHNpemUgLSBvZmZzZXQgLSBvYmpFbmRTaXplKVxuICAgICAgICAgIGlmIChhbWZWYXIuaXNPYmplY3RFbmQpIHsgYnJlYWsgfVxuICAgICAgICAgIHZhbHVlW2FtZlZhci5kYXRhLm5hbWVdID0gYW1mVmFyLmRhdGEudmFsdWVcbiAgICAgICAgICBvZmZzZXQgKz0gYW1mVmFyLmJvZHlTaXplXG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9mZnNldCA8PSBzaXplIC0gMykge1xuICAgICAgICAgIGNvbnN0IG1hcmtlciA9IGRhdGFWaWV3LmdldFVpbnQzMihvZmZzZXQgLSAxLCAhaXNMZSkgJiAweDAwRkZGRkZGXG4gICAgICAgICAgaWYgKG1hcmtlciA9PT0gOSkge1xuICAgICAgICAgICAgb2Zmc2V0ICs9IDNcbiAgICAgICAgICAgIHRoaXMucmVhZE9mZnNldCArPSAzXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIGNhc2UgT0JKRUNUX0VORDoge1xuICAgICAgICB2YWx1ZSA9IG51bGxcbiAgICAgICAgaXNPYmpFbmQgPSB0cnVlXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIGNhc2UgU1RSSUNUX0FSUkFZOiB7XG4gICAgICAgIHZhbHVlID0gW11cbiAgICAgICAgY29uc3QgYXJyTGVuZ3RoID0gZGF0YVZpZXcuZ2V0VWludDMyKDEsICFpc0xlKVxuICAgICAgICBvZmZzZXQgKz0gNFxuICAgICAgICB0aGlzLnJlYWRPZmZzZXQgKz0gNFxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFyckxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgY29uc3Qgc2NyaXB0ID0gdGhpcy5wYXJzZVZhbHVlKGJ1ZmZlciwgc2l6ZSAtIG9mZnNldClcbiAgICAgICAgICB2YWx1ZS5wdXNoKHNjcmlwdC5kYXRhKVxuICAgICAgICAgIG9mZnNldCArPSBzY3JpcHQuYm9keVNpemVcbiAgICAgICAgfVxuICAgICAgICBicmVha1xuICAgICAgfVxuXG4gICAgICBjYXNlIERBVEU6IHtcbiAgICAgICAgY29uc3QgZGF0ZSA9IHRoaXMucGFyc2VEYXRlKGJ1ZmZlciwgc2l6ZSAtIDEpXG4gICAgICAgIHZhbHVlID0gZGF0ZS5kYXRhXG4gICAgICAgIG9mZnNldCArPSBkYXRlLmJvZHlTaXplXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIGNhc2UgTE9ORV9TVFJJTkc6IHtcbiAgICAgICAgY29uc3QgbG9uZ1N0ciA9IHRoaXMucGFyc2VMb25nU3RyaW5nKGJ1ZmZlciwgc2l6ZSAtIDEpXG4gICAgICAgIHZhbHVlID0gbG9uZ1N0ci5kYXRhXG4gICAgICAgIG9mZnNldCArPSBsb25nU3RyLmJvZHlTaXplXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgb2Zmc2V0ID0gc2l6ZVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICBkYXRhOiB2YWx1ZSxcbiAgICAgIGJvZHlTaXplOiBvZmZzZXQsXG4gICAgICBpc09iakVuZDogaXNPYmpFbmRcbiAgICB9XG4gIH1cbn1cbiIsImltcG9ydCB7IEVWRU5UUywgQXVkaW9UcmFja01ldGEsIFZpZGVvVHJhY2tNZXRhIH0gZnJvbSAneGdwbGF5ZXItdXRpbHMnO1xuaW1wb3J0IHsgU3BzUGFyc2VyIH0gZnJvbSAneGdwbGF5ZXItY29kZWMnO1xuaW1wb3J0IHsgVmlkZW9UcmFjaywgQXVkaW9UcmFjayB9IGZyb20gJ3hncGxheWVyLWJ1ZmZlcidcblxuaW1wb3J0IEFNRlBhcnNlciBmcm9tICcuL2FtZi1wYXJzZXInXG5cbmNvbnN0IERFTVVYX0VWRU5UUyA9IEVWRU5UUy5ERU1VWF9FVkVOVFM7XG5cbmNsYXNzIEZsdkRlbXV4ZXIge1xuICBjb25zdHJ1Y3RvciAoKSB7XG4gICAgdGhpcy5fZmlyc3RGcmFnbWVudExvYWRlZCA9IGZhbHNlXG4gICAgdGhpcy5fdHJhY2tOdW0gPSAwXG4gICAgdGhpcy5faGFzU2NyaXB0ID0gZmFsc2VcbiAgfVxuXG4gIGluaXQgKCkge1xuICAgIHRoaXMub24oREVNVVhfRVZFTlRTLkRFTVVYX1NUQVJULCB0aGlzLmRvUGFyc2VGbHYuYmluZCh0aGlzKSlcbiAgfVxuXG4gIC8qKlxuICAgKiBpZiB0aGUgZmx2IGhlYWQgaXMgdmFsaWRcbiAgICogQHBhcmFtIGRhdGFcbiAgICogQHJldHVybnMge2Jvb2xlYW59XG4gICAqL1xuICBzdGF0aWMgaXNGbHZGaWxlIChkYXRhKSB7XG4gICAgcmV0dXJuICEoZGF0YVswXSAhPT0gMHg0NiB8fCBkYXRhWzFdICE9PSAweDRDIHx8IGRhdGFbMl0gIT09IDB4NTYgfHwgZGF0YVszXSAhPT0gMHgwMSlcbiAgfVxuXG4gIC8qKlxuICAgKiBJZiB0aGUgc3RyZWFtIGhhcyBhdWRpbyBvciB2aWRlby5cbiAgICogQHBhcmFtIHtudW1iZXJ9IHN0cmVhbUZsYWcgLSBEYXRhIGZyb20gdGhlIHN0cmVhbSB3aGljaCBpcyBkZWZpbmUgd2hldGhlciB0aGUgYXVkaW8gLyB2aWRlbyB0cmFjayBpcyBleGlzdC5cbiAgICovXG4gIHN0YXRpYyBnZXRQbGF5VHlwZSAoc3RyZWFtRmxhZykge1xuICAgIGNvbnN0IHJlc3VsdCA9IHtcbiAgICAgIGhhc1ZpZGVvOiBmYWxzZSxcbiAgICAgIGhhc0F1ZGlvOiBmYWxzZVxuICAgIH1cblxuICAgIGlmIChzdHJlYW1GbGFnICYgMHgwMSA+IDApIHtcbiAgICAgIHJlc3VsdC5oYXNWaWRlbyA9IHRydWVcbiAgICB9XG5cbiAgICBpZiAoc3RyZWFtRmxhZyAmIDB4MDQgPiAwKSB7XG4gICAgICByZXN1bHQuaGFzQXVkaW8gPSB0cnVlXG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3VsdFxuICB9XG5cbiAgZG9QYXJzZUZsdiAoKSB7XG4gICAgaWYgKCF0aGlzLl9maXJzdEZyYWdtZW50TG9hZGVkKSB7XG4gICAgICBpZiAodGhpcy5sb2FkZXJCdWZmZXIubGVuZ3RoIDwgMTMpIHtcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG4gICAgICBjb25zdCBoZWFkZXIgPSB0aGlzLmxvYWRlckJ1ZmZlci5zaGlmdCgxMylcbiAgICAgIHRoaXMucGFyc2VGbHZIZWFkZXIoaGVhZGVyKVxuICAgICAgdGhpcy5kb1BhcnNlRmx2KCkgLy8g6YCS5b2S6LCD55So77yM57un57ut6Kej5p6QZmx25rWBXG4gICAgfSBlbHNlIHtcbiAgICAgIGlmICh0aGlzLmxvYWRlckJ1ZmZlci5sZW5ndGggPCAxMSkge1xuICAgICAgICByZXR1cm5cbiAgICAgIH1cbiAgICAgIGxldCBjaHVuaztcbiAgICAgIGRvIHtcbiAgICAgICAgY2h1bmsgPSB0aGlzLl9wYXJzZUZsdlRhZygpXG4gICAgICB9IHdoaWxlIChjaHVuaylcblxuICAgICAgdGhpcy5lbWl0KERFTVVYX0VWRU5UUy5ERU1VWF9DT01QTEVURSlcbiAgICB9XG4gIH1cblxuICBwYXJzZUZsdkhlYWRlciAoaGVhZGVyKSB7XG4gICAgaWYgKCFGbHZEZW11eGVyLmlzRmx2RmlsZShoZWFkZXIpKSB7XG4gICAgICB0aGlzLmVtaXQoREVNVVhfRVZFTlRTLkRFTVVYX0VSUk9SLCBuZXcgRXJyb3IoJ2ludmFsaWQgZmx2IGZpbGUnKSlcbiAgICAgIHRoaXMuZG9QYXJzZUZsdigpXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2ZpcnN0RnJhZ21lbnRMb2FkZWQgPSB0cnVlXG4gICAgICBjb25zdCBwbGF5VHlwZSA9IEZsdkRlbXV4ZXIuZ2V0UGxheVR5cGUoaGVhZGVyWzRdKVxuXG4gICAgICBpZiAocGxheVR5cGUuaGFzVmlkZW8pIHtcbiAgICAgICAgdGhpcy5pbml0VmlkZW9UcmFjaygpXG4gICAgICB9XG5cbiAgICAgIGlmIChwbGF5VHlwZS5oYXNBdWRpbykge1xuICAgICAgICB0aGlzLmluaXRBdWRpb1RyYWNrKClcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5kb1BhcnNlRmx2KClcbiAgfVxuXG4gIC8qKlxuICAgKiBpbml0IGRlZmF1bHQgdmlkZW8gdHJhY2sgY29uZmlnc1xuICAgKi9cbiAgaW5pdFZpZGVvVHJhY2sgKCkge1xuICAgIHRoaXMuX3RyYWNrTnVtKytcbiAgICBsZXQgdmlkZW9UcmFjayA9IG5ldyBWaWRlb1RyYWNrKClcbiAgICB2aWRlb1RyYWNrLm1ldGEgPSBuZXcgVmlkZW9UcmFja01ldGEoKVxuICAgIHZpZGVvVHJhY2suaWQgPSB2aWRlb1RyYWNrLm1ldGEuaWQgPSB0aGlzLl90cmFja051bVxuXG4gICAgdGhpcy50cmFja3MudmlkZW9UcmFjayA9IHZpZGVvVHJhY2tcbiAgfVxuXG4gIC8qKlxuICAgKiBpbml0IGRlZmF1bHQgYXVkaW8gdHJhY2sgY29uZmlnc1xuICAgKi9cbiAgaW5pdEF1ZGlvVHJhY2sgKCkge1xuICAgIHRoaXMuX3RyYWNrTnVtKytcbiAgICBsZXQgYXVkaW9UcmFjayA9IG5ldyBBdWRpb1RyYWNrKClcbiAgICBhdWRpb1RyYWNrLm1ldGEgPSBuZXcgQXVkaW9UcmFja01ldGEoKVxuICAgIGF1ZGlvVHJhY2suaWQgPSBhdWRpb1RyYWNrLm1ldGEuaWQgPSB0aGlzLl90cmFja051bVxuXG4gICAgdGhpcy50cmFja3MuYXVkaW9UcmFjayA9IGF1ZGlvVHJhY2tcbiAgfVxuXG4gIC8qKlxuICAgKiBQYWNrYWdlIHRoZSBkYXRhIGFzIHRoZSBmb2xsb3dpbmcgZGF0YSBzdHJ1Y3R1cmVcbiAgICoge1xuICAgKiAgICBkYXRhOiBVaW50OEFycmF5LiB0aGUgU3RyZWFtIGRhdGEuXG4gICAqICAgIGluZm86IFRoZSBmaXJzdCBieXRlIGluZm8gb2YgdGhlIFRhZy5cbiAgICogICAgdGFnVHlwZTogOOOAgTnjgIExOFxuICAgKiAgICB0aW1lU3RhbXA6IHRoZSB0aW1lc3RlbXBcbiAgICogfVxuICAgKi9cbiAgX3BhcnNlRmx2VGFnICgpIHtcbiAgICBpZiAodGhpcy5sb2FkZXJCdWZmZXIubGVuZ3RoIDwgMTEpIHtcbiAgICAgIHJldHVybiBudWxsXG4gICAgfVxuICAgIGxldCBjaHVuayA9IHRoaXMuX3BhcnNlRmx2VGFnSGVhZGVyKClcbiAgICBpZiAoY2h1bmspIHtcbiAgICAgIHRoaXMuX3Byb2Nlc3NDaHVuayhjaHVuaylcbiAgICB9XG4gICAgcmV0dXJuIGNodW5rXG4gIH1cblxuICAvKipcbiAgICogUGFyc2UgdGhlIDExIGJ5dGUgdGFnIEhlYWRlclxuICAgKi9cbiAgX3BhcnNlRmx2VGFnSGVhZGVyICgpIHtcbiAgICBsZXQgb2Zmc2V0ID0gMFxuICAgIGxldCBjaHVuayA9IHt9XG5cbiAgICBsZXQgdGFnVHlwZSA9IHRoaXMubG9hZGVyQnVmZmVyLnRvSW50KG9mZnNldCwgMSlcbiAgICBvZmZzZXQgKz0gMVxuXG4gICAgLy8gMiBiaXQgRk1TIHJlc2VydmVkLCAxIGJpdCBmaWx0ZXJlZCwgNSBiaXQgdGFnIHR5cGVcbiAgICBjaHVuay5maWx0ZXJlZCA9ICh0YWdUeXBlICYgMzIpID4+PiA1XG4gICAgY2h1bmsudGFnVHlwZSA9IHRhZ1R5cGUgJiAzMVxuXG4gICAgLy8gMyBCeXRlIGRhdGFzaXplXG4gICAgY2h1bmsuZGF0YXNpemUgPSB0aGlzLmxvYWRlckJ1ZmZlci50b0ludChvZmZzZXQsIDMpXG4gICAgb2Zmc2V0ICs9IDNcblxuICAgIGlmICgoY2h1bmsudGFnVHlwZSAhPT0gOCAmJiBjaHVuay50YWdUeXBlICE9PSA5ICYmIGNodW5rLnRhZ1R5cGUgIT09IDExICYmIGNodW5rLnRhZ1R5cGUgIT09IDE4KSB8fFxuICAgICAgdGhpcy5sb2FkZXJCdWZmZXIudG9JbnQoOCwgMykgIT09IDApIHtcbiAgICAgIGlmICh0aGlzLmxvYWRlckJ1ZmZlciAmJiB0aGlzLmxvYWRlckJ1ZmZlci5sZW5ndGggPiAwKSB7XG4gICAgICAgIHRoaXMubG9hZGVyQnVmZmVyLnNoaWZ0KDEpXG4gICAgICB9XG4gICAgICB0aGlzLmxvZ2dlci53YXJuKHRoaXMuVEFHLCAndGFnVHlwZSAnICsgY2h1bmsudGFnVHlwZSlcbiAgICAgIHJldHVybiBudWxsXG4gICAgfVxuXG4gICAgaWYgKHRoaXMubG9hZGVyQnVmZmVyLmxlbmd0aCA8IGNodW5rLmRhdGFzaXplICsgMTUpIHtcbiAgICAgIHJldHVybiBudWxsXG4gICAgfVxuXG4gICAgLy8gcmVhZCB0aGUgZGF0YS5cbiAgICB0aGlzLmxvYWRlckJ1ZmZlci5zaGlmdCg0KVxuXG4gICAgLy8gMyBCeXRlIHRpbWVzdGFtcFxuICAgIGxldCB0aW1lc3RhbXAgPSB0aGlzLmxvYWRlckJ1ZmZlci50b0ludCgwLCAzKVxuICAgIHRoaXMubG9hZGVyQnVmZmVyLnNoaWZ0KDMpXG5cbiAgICAvLyAxIEJ5dGUgdGltZXN0YW1wRXh0XG4gICAgbGV0IHRpbWVzdGFtcEV4dCA9IHRoaXMubG9hZGVyQnVmZmVyLnNoaWZ0KDEpWzBdXG4gICAgaWYgKHRpbWVzdGFtcEV4dCA+IDApIHtcbiAgICAgIHRpbWVzdGFtcCArPSB0aW1lc3RhbXBFeHQgKiAweDEwMDAwMDBcbiAgICB9XG5cbiAgICBjaHVuay5kdHMgPSB0aW1lc3RhbXBcblxuICAgIC8vIHN0cmVhbUlkXG4gICAgdGhpcy5sb2FkZXJCdWZmZXIuc2hpZnQoMylcbiAgICByZXR1cm4gY2h1bmtcbiAgfVxuXG4gIF9wcm9jZXNzQ2h1bmsgKGNodW5rKSB7XG4gICAgc3dpdGNoIChjaHVuay50YWdUeXBlKSB7XG4gICAgICBjYXNlIDE4OlxuICAgICAgICB0aGlzLl9wYXJzZVNjcmlwdERhdGEoY2h1bmspXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlIDg6XG4gICAgICAgIHRoaXMuX3BhcnNlQUFDRGF0YShjaHVuaylcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgOTpcbiAgICAgICAgdGhpcy5fcGFyc2VIZXZjRGF0YShjaHVuaylcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgMTE6XG4gICAgICAgIC8vIGZvciBzb21lIENETiB0aGF0IGRpZCBub3QgcHJvY2VzcyB0aGUgY3VycmVjdCBSVE1QIG1lc3NhZ2VzXG4gICAgICAgIHRoaXMubG9hZGVyQnVmZmVyLnNoaWZ0KDMpXG4gICAgICAgIGJyZWFrXG4gICAgICBkZWZhdWx0OlxuICAgICAgICB0aGlzLmxvYWRlckJ1ZmZlci5zaGlmdCgxKVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBwYXJzZSBmbHYgc2NyaXB0IGRhdGFcbiAgICogQHBhcmFtIGNodW5rXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBfcGFyc2VTY3JpcHREYXRhIChjaHVuaykge1xuICAgIGxldCBhdWRpb1RyYWNrID0gdGhpcy50cmFja3MuYXVkaW9UcmFja1xuICAgIGxldCB2aWRlb1RyYWNrID0gdGhpcy50cmFja3MudmlkZW9UcmFja1xuXG4gICAgbGV0IGRhdGEgPSB0aGlzLmxvYWRlckJ1ZmZlci5zaGlmdChjaHVuay5kYXRhc2l6ZSlcblxuICAgIGNvbnN0IGluZm8gPSBuZXcgQU1GUGFyc2VyKCkucmVzb2x2ZShkYXRhLCBkYXRhLmxlbmd0aClcblxuICAgIGNvbnN0IG9uTWV0YURhdGEgPSB0aGlzLl9jb250ZXh0Lm9uTWV0YURhdGEgPSBpbmZvID8gaW5mby5vbk1ldGFEYXRhIDogdW5kZWZpbmVkXG5cbiAgICAvLyBmaWxsIG1lZGlhSW5mb1xuICAgIHRoaXMuX2NvbnRleHQubWVkaWFJbmZvLmR1cmF0aW9uID0gb25NZXRhRGF0YS5kdXJhdGlvblxuICAgIHRoaXMuX2NvbnRleHQubWVkaWFJbmZvLmhhc1ZpZGVvID0gb25NZXRhRGF0YS5oYXNWaWRlb1xuICAgIHRoaXMuX2NvbnRleHQubWVkaWFJbmZvLmhzYUF1ZGlvID0gb25NZXRhRGF0YS5oYXNBdWRpb1xuXG4gICAgbGV0IHZhbGlkYXRlID0gdGhpcy5fZGF0YXNpemVWYWxpZGF0b3IoY2h1bmsuZGF0YXNpemUpXG4gICAgaWYgKHZhbGlkYXRlKSB7XG4gICAgICB0aGlzLmVtaXQoREVNVVhfRVZFTlRTLk1FRElBX0lORk8pXG4gICAgICB0aGlzLl9oYXNTY3JpcHQgPSB0cnVlXG4gICAgfVxuXG4gICAgLy8gRWRpdCBkZWZhdWx0IG1ldGEuXG4gICAgaWYgKGF1ZGlvVHJhY2sgJiYgIWF1ZGlvVHJhY2suaGFzU3BlY2lmaWNDb25maWcpIHtcbiAgICAgIGxldCBtZXRhID0gYXVkaW9UcmFjay5tZXRhXG4gICAgICBpZiAob25NZXRhRGF0YS5hdWRpb3NhbXBsZXJhdGUpIHtcbiAgICAgICAgbWV0YS5zYW1wbGVSYXRlID0gb25NZXRhRGF0YS5hdWRpb3NhbXBsZXJhdGVcbiAgICAgIH1cblxuICAgICAgaWYgKG9uTWV0YURhdGEuYXVkaW9jaGFubmVscykge1xuICAgICAgICBtZXRhLmNoYW5uZWxDb3VudCA9IG9uTWV0YURhdGEuYXVkaW9jaGFubmVsc1xuICAgICAgfVxuXG4gICAgICBzd2l0Y2ggKG9uTWV0YURhdGEuYXVkaW9zYW1wbGVyYXRlKSB7XG4gICAgICAgIGNhc2UgNDQxMDA6XG4gICAgICAgICAgbWV0YS5zYW1wbGVSYXRlSW5kZXggPSA0XG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAyMjA1MDpcbiAgICAgICAgICBtZXRhLnNhbXBsZVJhdGVJbmRleCA9IDdcbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlIDExMDI1OlxuICAgICAgICAgIG1ldGEuc2FtcGxlUmF0ZUluZGV4ID0gMTBcbiAgICAgICAgICBicmVha1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAodmlkZW9UcmFjayAmJiAhdmlkZW9UcmFjay5oYXNTcGVjaWZpY0NvbmZpZykge1xuICAgICAgbGV0IG1ldGEgPSB2aWRlb1RyYWNrLm1ldGFcbiAgICAgIGlmICh0eXBlb2Ygb25NZXRhRGF0YS5mcmFtZXJhdGUgPT09ICdudW1iZXInKSB7XG4gICAgICAgIGxldCBmcHNOdW0gPSBNYXRoLmZsb29yKG9uTWV0YURhdGEuZnJhbWVyYXRlICogMTAwMClcbiAgICAgICAgaWYgKGZwc051bSA+IDApIHtcbiAgICAgICAgICBsZXQgZnBzID0gZnBzTnVtIC8gMTAwMFxuICAgICAgICAgIGlmICghbWV0YS5mcmFtZVJhdGUpIHtcbiAgICAgICAgICAgIG1ldGEuZnJhbWVSYXRlID0ge31cbiAgICAgICAgICB9XG4gICAgICAgICAgbWV0YS5mcmFtZVJhdGUuZml4ZWQgPSB0cnVlXG4gICAgICAgICAgbWV0YS5mcmFtZVJhdGUuZnBzID0gZnBzXG4gICAgICAgICAgbWV0YS5mcmFtZVJhdGUuZnBzX251bSA9IGZwc051bVxuICAgICAgICAgIG1ldGEuZnJhbWVSYXRlLmZwc19kZW4gPSAxMDAwXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBfYWFjU2VxdWVuY2VIZWFkZXJQYXJzZXIgKGRhdGEpIHtcbiAgICBsZXQgcmV0ID0ge31cbiAgICByZXQuaGFzU3BlY2lmaWNDb25maWcgPSB0cnVlXG4gICAgcmV0Lm9iamVjdFR5cGUgPSBkYXRhWzFdID4+PiAzXG4gICAgcmV0LnNhbXBsZVJhdGVJbmRleCA9ICgoZGF0YVsxXSAmIDcpIDw8IDEpIHwgKGRhdGFbMl0gPj4+IDcpXG4gICAgcmV0LmF1ZGlvc2FtcGxlcmF0ZSA9IHRoaXMuX3N3aXRjaEF1ZGlvU2FtcGxlUmF0ZShyZXQuc2FtcGxlUmF0ZUluZGV4KVxuICAgIHJldC5jaGFubmVsQ291bnQgPSAoZGF0YVsyXSAmIDEyMCkgPj4+IDNcbiAgICByZXQuZnJhbWVMZW5ndGggPSAoZGF0YVsyXSAmIDQpID4+PiAyXG4gICAgcmV0LmRlcGVuZHNPbkNvcmVDb2RlciA9IChkYXRhWzJdICYgMikgPj4+IDFcbiAgICByZXQuZXh0ZW5zaW9uRmxhZ0luZGV4ID0gZGF0YVsyXSAmIDFcblxuICAgIHJldC5jb2RlYyA9IGBtcDRhLjQwLiR7cmV0Lm9iamVjdFR5cGV9YFxuICAgIGxldCB1c2VyQWdlbnQgPSB3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpO1xuICAgIGxldCBleHRlbnNpb25TYW1wbGluZ0luZGV4O1xuXG4gICAgbGV0IGNvbmZpZztcbiAgICBsZXQgc2FtcGxpbmdJbmRleCA9IHJldC5zYW1wbGVSYXRlSW5kZXg7XG5cbiAgICBpZiAodXNlckFnZW50LmluZGV4T2YoJ2ZpcmVmb3gnKSAhPT0gLTEpIHtcbiAgICAgIC8vIGZpcmVmb3g6IHVzZSBTQlIgKEhFLUFBQykgaWYgZnJlcSBsZXNzIHRoYW4gMjRrSHpcbiAgICAgIGlmIChyZXQuc2FtcGxlUmF0ZUluZGV4ID49IDYpIHtcbiAgICAgICAgcmV0Lm9iamVjdFR5cGUgPSA1O1xuICAgICAgICBjb25maWcgPSBuZXcgQXJyYXkoNCk7XG4gICAgICAgIGV4dGVuc2lvblNhbXBsaW5nSW5kZXggPSBzYW1wbGluZ0luZGV4IC0gMztcbiAgICAgIH0gZWxzZSB7IC8vIHVzZSBMQy1BQUNcbiAgICAgICAgcmV0Lm9iamVjdFR5cGUgPSAyO1xuICAgICAgICBjb25maWcgPSBuZXcgQXJyYXkoMik7XG4gICAgICAgIGV4dGVuc2lvblNhbXBsaW5nSW5kZXggPSBzYW1wbGluZ0luZGV4O1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodXNlckFnZW50LmluZGV4T2YoJ2FuZHJvaWQnKSAhPT0gLTEpIHtcbiAgICAgIC8vIGFuZHJvaWQ6IGFsd2F5cyB1c2UgTEMtQUFDXG4gICAgICByZXQub2JqZWN0VHlwZSA9IDI7XG4gICAgICBjb25maWcgPSBuZXcgQXJyYXkoMik7XG4gICAgICBleHRlbnNpb25TYW1wbGluZ0luZGV4ID0gc2FtcGxpbmdJbmRleDtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gZm9yIG90aGVyIGJyb3dzZXJzLCBlLmcuIGNocm9tZS4uLlxuICAgICAgLy8gQWx3YXlzIHVzZSBIRS1BQUMgdG8gbWFrZSBpdCBlYXNpZXIgdG8gc3dpdGNoIGFhYyBjb2RlYyBwcm9maWxlXG4gICAgICByZXQub2JqZWN0VHlwZSA9IDU7XG4gICAgICBleHRlbnNpb25TYW1wbGluZ0luZGV4ID0gcmV0LnNhbXBsZVJhdGVJbmRleDtcbiAgICAgIGNvbmZpZyA9IG5ldyBBcnJheSg0KTtcblxuICAgICAgaWYgKHJldC5zYW1wbGVSYXRlSW5kZXggPj0gNikge1xuICAgICAgICBleHRlbnNpb25TYW1wbGluZ0luZGV4ID0gcmV0LnNhbXBsZVJhdGVJbmRleCAtIDM7XG4gICAgICB9IGVsc2UgaWYgKHJldC5jaGFubmVsQ291bnQgPT09IDEpIHsgLy8gTW9ubyBjaGFubmVsXG4gICAgICAgIHJldC5vYmplY3RUeXBlID0gMjtcbiAgICAgICAgY29uZmlnID0gbmV3IEFycmF5KDIpO1xuICAgICAgICBleHRlbnNpb25TYW1wbGluZ0luZGV4ID0gcmV0LnNhbXBsZVJhdGVJbmRleDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25maWdbMF0gPSByZXQub2JqZWN0VHlwZSA8PCAzO1xuICAgIGNvbmZpZ1swXSB8PSAocmV0LnNhbXBsZVJhdGVJbmRleCAmIDB4MEYpID4+PiAxO1xuICAgIGNvbmZpZ1sxXSA9IChyZXQuc2FtcGxlUmF0ZUluZGV4ICYgMHgwRikgPDwgNztcbiAgICBjb25maWdbMV0gfD0gKHJldC5jaGFubmVsQ291bnQgJiAweDBGKSA8PCAzO1xuICAgIGlmIChyZXQub2JqZWN0VHlwZSA9PT0gNSkge1xuICAgICAgY29uZmlnWzFdIHw9ICgoZXh0ZW5zaW9uU2FtcGxpbmdJbmRleCAmIDB4MEYpID4+PiAxKTtcbiAgICAgIGNvbmZpZ1syXSA9IChleHRlbnNpb25TYW1wbGluZ0luZGV4ICYgMHgwMSkgPDwgNztcbiAgICAgIC8vIGV4dGVuZGVkIGF1ZGlvIG9iamVjdCB0eXBlOiBmb3JjZSB0byAyIChMQy1BQUMpXG4gICAgICBjb25maWdbMl0gfD0gKDIgPDwgMik7XG4gICAgICBjb25maWdbM10gPSAwO1xuICAgIH1cbiAgICByZXQuY29uZmlnID0gY29uZmlnXG4gICAgcmV0dXJuIHJldFxuICB9XG5cbiAgX3BhcnNlQUFDRGF0YSAoY2h1bmspIHtcbiAgICBsZXQgdHJhY2sgPSB0aGlzLnRyYWNrcy5hdWRpb1RyYWNrXG4gICAgaWYgKCF0cmFjaykge1xuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgbGV0IG1ldGEgPSB0cmFjay5tZXRhXG5cbiAgICBpZiAoIW1ldGEpIHtcbiAgICAgIG1ldGEgPSBuZXcgQXVkaW9UcmFja01ldGEoKVxuICAgIH1cblxuICAgIGxldCBpbmZvID0gdGhpcy5sb2FkZXJCdWZmZXIuc2hpZnQoMSlbMF1cblxuICAgIGNodW5rLmRhdGEgPSB0aGlzLmxvYWRlckJ1ZmZlci5zaGlmdChjaHVuay5kYXRhc2l6ZSAtIDEpXG5cbiAgICBsZXQgZm9ybWF0ID0gKGluZm8gJiAyNDApID4+PiA0XG5cbiAgICB0cmFjay5mb3JtYXQgPSBmb3JtYXRcblxuICAgIGlmIChmb3JtYXQgIT09IDEwKSB7XG4gICAgICB0aGlzLmVtaXQoREVNVVhfRVZFTlRTLkRFTVVYX0VSUk9SLCBuZXcgRXJyb3IoYGludmFsaWQgYXVkaW8gZm9ybWF0OiAke2Zvcm1hdH1gKSlcbiAgICB9XG5cbiAgICBpZiAoZm9ybWF0ID09PSAxMCAmJiAhdGhpcy5faGFzQXVkaW9TZXF1ZW5jZSkge1xuICAgICAgbWV0YS5zYW1wbGVSYXRlID0gdGhpcy5fc3dpdGNoQXVkaW9TYW1wbGluZ0ZyZXF1ZW5jeShpbmZvKVxuICAgICAgbWV0YS5zYW1wbGVSYXRlSW5kZXggPSAoaW5mbyAmIDEyKSA+Pj4gMlxuICAgICAgbWV0YS5mcmFtZUxlbnRoID0gKGluZm8gJiAyKSA+Pj4gMVxuICAgICAgbWV0YS5jaGFubmVsQ291bnQgPSBpbmZvICYgMVxuICAgICAgbWV0YS5yZWZTYW1wbGVEdXJhdGlvbiA9IE1hdGguZmxvb3IoMTAyNCAvIG1ldGEuYXVkaW9TYW1wbGVSYXRlICogbWV0YS50aW1lc2NhbGUpXG4gICAgfVxuXG4gICAgbGV0IGF1ZGlvU2FtcGxlUmF0ZSA9IG1ldGEuYXVkaW9TYW1wbGVSYXRlXG4gICAgbGV0IGF1ZGlvU2FtcGxlUmF0ZUluZGV4ID0gbWV0YS5zYW1wbGVSYXRlSW5kZXhcbiAgICBsZXQgcmVmU2FtcGxlRHVyYXRpb24gPSBtZXRhLnJlZlNhbXBsZUR1cmF0aW9uXG5cbiAgICBkZWxldGUgY2h1bmsudGFnVHlwZVxuICAgIGxldCB2YWxpZGF0ZSA9IHRoaXMuX2RhdGFzaXplVmFsaWRhdG9yKGNodW5rLmRhdGFzaXplKVxuXG4gICAgaWYgKGNodW5rLmRhdGFbMF0gPT09IDApIHsgLy8gQUFDIFNlcXVlbmNlIEhlYWRlclxuICAgICAgbGV0IGFhY0hlYWRlciA9IHRoaXMuX2FhY1NlcXVlbmNlSGVhZGVyUGFyc2VyKGNodW5rLmRhdGEpXG4gICAgICBhdWRpb1NhbXBsZVJhdGUgPSBhYWNIZWFkZXIuYXVkaW9zYW1wbGVyYXRlIHx8IG1ldGEuYXVkaW9TYW1wbGVSYXRlXG4gICAgICBhdWRpb1NhbXBsZVJhdGVJbmRleCA9IGFhY0hlYWRlci5zYW1wbGVSYXRlSW5kZXggfHwgbWV0YS5zYW1wbGVSYXRlSW5kZXhcbiAgICAgIHJlZlNhbXBsZUR1cmF0aW9uID0gTWF0aC5mbG9vcigxMDI0IC8gYXVkaW9TYW1wbGVSYXRlICogbWV0YS50aW1lc2NhbGUpXG5cbiAgICAgIG1ldGEuY2hhbm5lbENvdW50ID0gYWFjSGVhZGVyLmNoYW5uZWxDb3VudFxuICAgICAgbWV0YS5zYW1wbGVSYXRlID0gYXVkaW9TYW1wbGVSYXRlXG4gICAgICBtZXRhLnNhbXBsZVJhdGVJbmRleCA9IGF1ZGlvU2FtcGxlUmF0ZUluZGV4XG4gICAgICBtZXRhLnJlZlNhbXBsZUR1cmF0aW9uID0gcmVmU2FtcGxlRHVyYXRpb25cbiAgICAgIG1ldGEuZHVyYXRpb24gPSB0aGlzLl9jb250ZXh0Lm1lZGlhSW5mby5kdXJhdGlvbiAqIG1ldGEudGltZXNjYWxlXG4gICAgICBtZXRhLmNvbmZpZyA9IGFhY0hlYWRlci5jb25maWdcbiAgICAgIG1ldGEub2JqZWN0VHlwZSA9IGFhY0hlYWRlci5vYmplY3RUeXBlO1xuXG4gICAgICBjb25zdCBhdWRpb01lZGlhID0gdGhpcy5fY29udGV4dC5tZWRpYUluZm8uYXVkaW9cblxuICAgICAgLy8gZmlsbCBhdWRpbyBtZWRpYSBpbmZvXG4gICAgICBhdWRpb01lZGlhLmNvZGVjID0gYWFjSGVhZGVyLmNvZGVjXG4gICAgICBhdWRpb01lZGlhLmNoYW5uZWxDb3VudCA9IGFhY0hlYWRlci5jaGFubmVsQ291bnRcbiAgICAgIGF1ZGlvTWVkaWEuc2FtcGxlUmF0ZSA9IGF1ZGlvU2FtcGxlUmF0ZVxuICAgICAgYXVkaW9NZWRpYS5zYW1wbGVSYXRlSW5kZXggPSBhYWNIZWFkZXIuYXVkaW9TYW1wbGVSYXRlSW5kZXhcblxuICAgICAgaWYgKHRoaXMuX2hhc1NjcmlwdCAmJiAhdGhpcy5faGFzQXVkaW9TZXF1ZW5jZSkge1xuICAgICAgICB0aGlzLmVtaXQoREVNVVhfRVZFTlRTLk1FVEFEQVRBX1BBUlNFRCwgJ2F1ZGlvJylcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5faGFzU2NyaXB0ICYmIHRoaXMuX2hhc0F1ZGlvU2VxdWVuY2UpIHtcbiAgICAgICAgdGhpcy5lbWl0KERFTVVYX0VWRU5UUy5BVURJT19NRVRBREFUQV9DSEFOR0UpXG4gICAgICB9XG4gICAgICA7XG4gICAgICB0aGlzLl9oYXNBdWRpb1NlcXVlbmNlID0gdHJ1ZVxuICAgIH0gZWxzZSB7XG4gICAgICBjaHVuay5kYXRhID0gY2h1bmsuZGF0YS5zbGljZSgxLCBjaHVuay5kYXRhLmxlbmd0aClcbiAgICAgIHRyYWNrLnNhbXBsZXMucHVzaChjaHVuaylcbiAgICB9XG4gICAgaWYgKCF2YWxpZGF0ZSkge1xuICAgICAgY29uc3QgZXJyb3IgPSBuZXcgRXJyb3IoJ1RBRyBsZW5ndGggZXJyb3IgYXQgJyArIGNodW5rLmRhdGFzaXplKVxuICAgICAgdGhpcy5lbWl0KERFTVVYX0VWRU5UUy5ERU1VWF9FUlJPUiwgZXJyb3IubWVzc2FnZSlcbiAgICAgIHRoaXMubG9nZ2VyLndhcm4odGhpcy5UQUcsIGVycm9yLm1lc3NhZ2UpXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIHBhcnNlIGhldmMvYXZjIHZpZGVvIGRhdGFcbiAgICogQHBhcmFtIGNodW5rXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBfcGFyc2VIZXZjRGF0YSAoY2h1bmspIHtcbiAgICAvLyBoZWFkZXJcbiAgICBsZXQgaW5mbyA9IHRoaXMubG9hZGVyQnVmZmVyLnNoaWZ0KDEpWzBdXG4gICAgY2h1bmsuZnJhbWVUeXBlID0gKGluZm8gJiAweGYwKSA+Pj4gNFxuICAgIGNodW5rLmlzS2V5ZnJhbWUgPSBjaHVuay5mcmFtZVR5cGUgPT09IDFcbiAgICAvLyBsZXQgdGVtcENvZGVjSUQgPSB0aGlzLnRyYWNrcy52aWRlb1RyYWNrLmNvZGVjSURcbiAgICBsZXQgY29kZWNJRCA9IGluZm8gJiAweDBmXG4gICAgdGhpcy50cmFja3MudmlkZW9UcmFjay5jb2RlY0lEID0gY29kZWNJRFxuXG4gICAgLy8gaGV2Y+WSjGF2Y+eahGhlYWRlcuino+aekOaWueW8j+S4gOagt1xuICAgIGNodW5rLmF2Y1BhY2tldFR5cGUgPSB0aGlzLmxvYWRlckJ1ZmZlci5zaGlmdCgxKVswXVxuICAgIGNodW5rLmN0cyA9IHRoaXMubG9hZGVyQnVmZmVyLnRvSW50KDAsIDMpXG4gICAgdGhpcy5sb2FkZXJCdWZmZXIuc2hpZnQoMylcblxuICAgIC8vIDEyIGZvciBoZXZjLCA3IGZvciBhdmNcbiAgICBpZiAoY29kZWNJRCA9PT0gMTIpIHtcbiAgICAgIGNvbnN0IGRhdGEgPSB0aGlzLmxvYWRlckJ1ZmZlci5zaGlmdChjaHVuay5kYXRhc2l6ZSAtIDUpXG4gICAgICBjaHVuay5kYXRhID0gZGF0YVxuXG4gICAgICBpZiAoTnVtYmVyLnBhcnNlSW50KGNodW5rLmF2Y1BhY2tldFR5cGUpICE9PSAwKSB7XG4gICAgICAgIGlmICghdGhpcy5fZGF0YXNpemVWYWxpZGF0b3IoY2h1bmsuZGF0YXNpemUpKSB7XG4gICAgICAgICAgdGhpcy5sb2dnZXIud2Fybih0aGlzLlRBRywgYGludmFsaWQgdmlkZW8gdGFnIGRhdGFzaXplOiAke2NodW5rLmRhdGFzaXplfWApXG4gICAgICAgIH1cbiAgICAgICAgbGV0IG5hbHUgPSB7fVxuICAgICAgICBsZXQgciA9IDBcbiAgICAgICAgbmFsdS5jdHMgPSBjaHVuay5jdHNcbiAgICAgICAgbmFsdS5kdHMgPSBjaHVuay5kdHNcbiAgICAgICAgd2hpbGUgKGNodW5rLmRhdGEubGVuZ3RoID4gcikge1xuICAgICAgICAgIGxldCBzaXplcyA9IGNodW5rLmRhdGEuc2xpY2UoTnVtYmVyLnBhcnNlSW50KHIpLCA0ICsgcilcbiAgICAgICAgICBuYWx1LnNpemUgPSBzaXplc1szXVxuICAgICAgICAgIG5hbHUuc2l6ZSArPSBzaXplc1syXSAqIDI1NlxuICAgICAgICAgIG5hbHUuc2l6ZSArPSBzaXplc1sxXSAqIDI1NiAqIDI1NlxuICAgICAgICAgIG5hbHUuc2l6ZSArPSBzaXplc1swXSAqIDI1NiAqIDI1NiAqIDI1NlxuICAgICAgICAgIHIgKz0gNFxuICAgICAgICAgIG5hbHUuZGF0YSA9IGNodW5rLmRhdGEuc2xpY2UoTnVtYmVyLnBhcnNlSW50KHIpLCBuYWx1LnNpemUgKyByKVxuICAgICAgICAgIHIgKz0gbmFsdS5zaXplXG4gICAgICAgICAgdGhpcy50cmFja3MudmlkZW9UcmFjay5zYW1wbGVzLnB1c2gobmFsdSlcbiAgICAgICAgICB0aGlzLmVtaXQoREVNVVhfRVZFTlRTLk1FVEFEQVRBX1BBUlNFRCwgJ3ZpZGVvJylcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChOdW1iZXIucGFyc2VJbnQoY2h1bmsuYXZjUGFja2V0VHlwZSkgPT09IDApIHtcbiAgICAgICAgaWYgKCF0aGlzLl9kYXRhc2l6ZVZhbGlkYXRvcihjaHVuay5kYXRhc2l6ZSkpIHtcbiAgICAgICAgICB0aGlzLmxvZ2dlci53YXJuKHRoaXMuVEFHLCBgaW52YWxpZCB2aWRlbyB0YWcgZGF0YXNpemU6ICR7Y2h1bmsuZGF0YXNpemV9YClcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLmVtaXQoREVNVVhfRVZFTlRTLk1FVEFEQVRBX1BBUlNFRCwgJ3ZpZGVvJylcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoY29kZWNJRCA9PT0gNykge1xuICAgICAgbGV0IGRhdGEgPSB0aGlzLmxvYWRlckJ1ZmZlci5zaGlmdChjaHVuay5kYXRhc2l6ZSAtIDUpXG4gICAgICBpZiAoZGF0YVs0XSA9PT0gMCAmJiBkYXRhWzVdID09PSAwICYmIGRhdGFbNl0gPT09IDAgJiYgZGF0YVs3XSA9PT0gMSkge1xuICAgICAgICBsZXQgYXZjY2xlbmd0aCA9IDBcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCA0OyBpKyspIHtcbiAgICAgICAgICBhdmNjbGVuZ3RoID0gYXZjY2xlbmd0aCAqIDI1NiArIGRhdGFbaV1cbiAgICAgICAgfVxuICAgICAgICBhdmNjbGVuZ3RoIC09IDRcbiAgICAgICAgZGF0YSA9IGRhdGEuc2xpY2UoNCwgZGF0YS5sZW5ndGgpXG4gICAgICAgIGRhdGFbM10gPSBhdmNjbGVuZ3RoICUgMjU2XG4gICAgICAgIGF2Y2NsZW5ndGggPSAoYXZjY2xlbmd0aCAtIGRhdGFbM10pIC8gMjU2XG4gICAgICAgIGRhdGFbMl0gPSBhdmNjbGVuZ3RoICUgMjU2XG4gICAgICAgIGF2Y2NsZW5ndGggPSAoYXZjY2xlbmd0aCAtIGRhdGFbMl0pIC8gMjU2XG4gICAgICAgIGRhdGFbMV0gPSBhdmNjbGVuZ3RoICUgMjU2XG4gICAgICAgIGRhdGFbMF0gPSAoYXZjY2xlbmd0aCAtIGRhdGFbMV0pIC8gMjU2XG4gICAgICB9XG5cbiAgICAgIGNodW5rLmRhdGEgPSBkYXRhXG4gICAgICAvLyBJZiBpdCBpcyBBVkMgc2VxdWVjZSBIZWFkZXIuXG4gICAgICBpZiAoY2h1bmsuYXZjUGFja2V0VHlwZSA9PT0gMCkge1xuICAgICAgICB0aGlzLl9hdmNTZXF1ZW5jZUhlYWRlclBhcnNlcihjaHVuay5kYXRhKVxuICAgICAgICBsZXQgdmFsaWRhdGUgPSB0aGlzLl9kYXRhc2l6ZVZhbGlkYXRvcihjaHVuay5kYXRhc2l6ZSlcbiAgICAgICAgaWYgKHZhbGlkYXRlKSB7XG4gICAgICAgICAgaWYgKHRoaXMuX2hhc1NjcmlwdCAmJiAhdGhpcy5faGFzVmlkZW9TZXF1ZW5jZSkge1xuICAgICAgICAgICAgdGhpcy5lbWl0KERFTVVYX0VWRU5UUy5NRVRBREFUQV9QQVJTRUQsICd2aWRlbycpXG4gICAgICAgICAgfSBlbHNlIGlmICh0aGlzLl9oYXNTY3JpcHQgJiYgdGhpcy5faGFzVmlkZW9TZXF1ZW5jZSkge1xuICAgICAgICAgICAgdGhpcy5lbWl0KERFTVVYX0VWRU5UUy5WSURFT19NRVRBREFUQV9DSEFOR0UpXG4gICAgICAgICAgfVxuICAgICAgICAgIHRoaXMuX2hhc1ZpZGVvU2VxdWVuY2UgPSB0cnVlXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmICghdGhpcy5fZGF0YXNpemVWYWxpZGF0b3IoY2h1bmsuZGF0YXNpemUpKSB7XG4gICAgICAgICAgdGhpcy5sb2dnZXIud2Fybih0aGlzLlRBRywgYGludmFsaWQgdmlkZW8gdGFnIGRhdGFzaXplOiAke2NodW5rLmRhdGFzaXplfWApXG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudHJhY2tzLnZpZGVvVHJhY2suc2FtcGxlcy5wdXNoKGNodW5rKVxuICAgICAgICAvLyB0aGlzLmVtaXQoREVNVVhfRVZFTlRTLkRFTVVYX0NPTVBMRVRFKVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmxvZ2dlci53YXJuKHRoaXMuVEFHLCBgdmlkZW8gY29kZWlkIGlzICR7Y29kZWNJRH1gKVxuICAgICAgY2h1bmsuZGF0YSA9IHRoaXMubG9hZGVyQnVmZmVyLnNoaWZ0KGNodW5rLmRhdGFzaXplIC0gMSlcbiAgICAgIGlmICghdGhpcy5fZGF0YXNpemVWYWxpZGF0b3IoY2h1bmsuZGF0YXNpemUpKSB7XG4gICAgICAgIHRoaXMubG9nZ2VyLndhcm4odGhpcy5UQUcsIGBpbnZhbGlkIHZpZGVvIHRhZyBkYXRhc2l6ZTogJHtjaHVuay5kYXRhc2l6ZX1gKVxuICAgICAgfVxuICAgICAgdGhpcy50cmFja3MudmlkZW9UcmFjay5zYW1wbGVzLnB1c2goY2h1bmspXG4gICAgICB0aGlzLmVtaXQoREVNVVhfRVZFTlRTLkRFTVVYX0NPTVBMRVRFKVxuICAgIH1cbiAgICBkZWxldGUgY2h1bmsudGFnVHlwZVxuICB9XG5cbiAgLyoqXG4gICAqIHBhcnNlIGF2YyBtZXRhZGF0YVxuICAgKiBAcGFyYW0gZGF0YVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX2F2Y1NlcXVlbmNlSGVhZGVyUGFyc2VyIChkYXRhKSB7XG4gICAgbGV0IHRyYWNrID0gdGhpcy50cmFja3MudmlkZW9UcmFja1xuXG4gICAgaWYgKCF0cmFjaykge1xuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgbGV0IG9mZnNldCA9IDBcblxuICAgIGlmICghdHJhY2subWV0YSkge1xuICAgICAgdHJhY2subWV0YSA9IG5ldyBWaWRlb1RyYWNrTWV0YSgpXG4gICAgfVxuICAgIGxldCBtZXRhID0gdHJhY2subWV0YVxuXG4gICAgbWV0YS5jb25maWd1cmF0aW9uVmVyc2lvbiA9IGRhdGFbMF1cbiAgICBtZXRhLmF2Y1Byb2ZpbGVJbmRpY2F0aW9uID0gZGF0YVsxXVxuICAgIG1ldGEucHJvZmlsZUNvbXBhdGliaWxpdHkgPSBkYXRhWzJdXG4gICAgbWV0YS5hdmNMZXZlbEluZGljYXRpb24gPSBkYXRhWzNdIC8gMTBcbiAgICBtZXRhLm5hbFVuaXRMZW5ndGggPSAoZGF0YVs0XSAmIDB4MDMpICsgMVxuXG4gICAgbGV0IG51bU9mU3BzID0gZGF0YVs1XSAmIDB4MWZcbiAgICBvZmZzZXQgPSA2XG4gICAgbGV0IGNvbmZpZyA9IHt9XG5cbiAgICAvLyBwYXJzZSBTUFNcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bU9mU3BzOyBpKyspIHtcbiAgICAgIGxldCBzaXplID0gZGF0YVtvZmZzZXRdICogMjU1ICsgZGF0YVtvZmZzZXQgKyAxXVxuICAgICAgb2Zmc2V0ICs9IDJcblxuICAgICAgbGV0IHNwcyA9IG5ldyBVaW50OEFycmF5KHNpemUpXG4gICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHNpemU7IGorKykge1xuICAgICAgICBzcHNbal0gPSBkYXRhW29mZnNldCArIGpdXG4gICAgICB9XG5cbiAgICAgIC8vIGNvZGVjIHN0cmluZ1xuICAgICAgbGV0IGNvZGVjU3RyaW5nID0gJ2F2YzEuJ1xuICAgICAgZm9yIChsZXQgaiA9IDE7IGogPCA0OyBqKyspIHtcbiAgICAgICAgbGV0IGggPSBzcHNbal0udG9TdHJpbmcoMTYpXG4gICAgICAgIGlmIChoLmxlbmd0aCA8IDIpIHtcbiAgICAgICAgICBoID0gJzAnICsgaFxuICAgICAgICB9XG4gICAgICAgIGNvZGVjU3RyaW5nICs9IGhcbiAgICAgIH1cblxuICAgICAgbWV0YS5jb2RlYyA9IGNvZGVjU3RyaW5nXG5cbiAgICAgIG9mZnNldCArPSBzaXplXG4gICAgICB0aGlzLnRyYWNrcy52aWRlb1RyYWNrLm1ldGEuc3BzID0gc3BzXG4gICAgICBjb25maWcgPSBTcHNQYXJzZXIucGFyc2VTUFMoc3BzKVxuICAgIH1cblxuICAgIGxldCBudW1PZlBwcyA9IGRhdGFbb2Zmc2V0XVxuXG4gICAgb2Zmc2V0KytcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbnVtT2ZQcHM7IGkrKykge1xuICAgICAgbGV0IHNpemUgPSBkYXRhW29mZnNldF0gKiAyNTUgKyBkYXRhW29mZnNldCArIDFdXG4gICAgICBvZmZzZXQgKz0gMlxuICAgICAgbGV0IHBwcyA9IG5ldyBVaW50OEFycmF5KHNpemUpXG4gICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHNpemU7IGorKykge1xuICAgICAgICBwcHNbal0gPSBkYXRhW29mZnNldCArIGpdXG4gICAgICB9XG4gICAgICBvZmZzZXQgKz0gc2l6ZVxuICAgICAgdGhpcy50cmFja3MudmlkZW9UcmFjay5tZXRhLnBwcyA9IHBwc1xuICAgIH1cblxuICAgIE9iamVjdC5hc3NpZ24obWV0YSwgU3BzUGFyc2VyLnRvVmlkZW9NZXRhKGNvbmZpZykpXG5cbiAgICAvLyBmaWxsIHZpZGVvIG1lZGlhIGluZm9cbiAgICBjb25zdCB2aWRlb01lZGlhID0gdGhpcy5fY29udGV4dC5tZWRpYUluZm8udmlkZW9cblxuICAgIHZpZGVvTWVkaWEuY29kZWMgPSBtZXRhLmNvZGVjXG4gICAgdmlkZW9NZWRpYS5wcm9maWxlID0gbWV0YS5wcm9maWxlXG4gICAgdmlkZW9NZWRpYS5sZXZlbCA9IG1ldGEubGV2ZWxcbiAgICB2aWRlb01lZGlhLmNocm9tYUZvcm1hdCA9IG1ldGEuY2hyb21hRm9ybWF0XG4gICAgdmlkZW9NZWRpYS5mcmFtZVJhdGUgPSBtZXRhLmZyYW1lUmF0ZVxuICAgIHZpZGVvTWVkaWEucGFyUmF0aW8gPSBtZXRhLnBhclJhdGlvXG4gICAgdmlkZW9NZWRpYS53aWR0aCA9IHZpZGVvTWVkaWEud2lkdGggPT09IG1ldGEucHJlc2VudFdpZHRoID8gdmlkZW9NZWRpYS53aWR0aCA6IG1ldGEucHJlc2VudFdpZHRoXG4gICAgdmlkZW9NZWRpYS5oZWlnaHQgPSB2aWRlb01lZGlhLmhlaWdodCA9PT0gbWV0YS5wcmVzZW50SGVpZ2h0ID8gdmlkZW9NZWRpYS53aWR0aCA6IG1ldGEucHJlc2VudEhlaWdodFxuXG4gICAgbWV0YS5kdXJhdGlvbiA9IHRoaXMuX2NvbnRleHQubWVkaWFJbmZvLmR1cmF0aW9uICogbWV0YS50aW1lc2NhbGVcbiAgICBtZXRhLmF2Y2MgPSBuZXcgVWludDhBcnJheShkYXRhLmxlbmd0aClcbiAgICBtZXRhLmF2Y2Muc2V0KGRhdGEpXG4gICAgdHJhY2subWV0YSA9IG1ldGFcbiAgfVxuXG4gIC8qKlxuICAgKiBjaG9vc2UgYXVkaW8gc2FtcGxlIHJhdGVcbiAgICogQHBhcmFtIHNhbXBsaW5nRnJlcXVlbmN5SW5kZXhcbiAgICogQHJldHVybnMge251bWJlcn1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9zd2l0Y2hBdWRpb1NhbXBsZVJhdGUgKHNhbXBsaW5nRnJlcXVlbmN5SW5kZXgpIHtcbiAgICBsZXQgc2FtcGxpbmdGcmVxdWVuY3lMaXN0ID0gWzk2MDAwLCA4ODIwMCwgNjQwMDAsIDQ4MDAwLCA0NDEwMCwgMzIwMDAsIDI0MDAwLCAyMjA1MCwgMTYwMDAsIDEyMDAwLCAxMTAyNSwgODAwMCwgNzM1MF1cbiAgICByZXR1cm4gc2FtcGxpbmdGcmVxdWVuY3lMaXN0W3NhbXBsaW5nRnJlcXVlbmN5SW5kZXhdXG4gIH1cblxuICAvKipcbiAgICogY2hvb3NlIGF1ZGlvIHNhbXBsaW5nIGZyZXF1ZW5jZVxuICAgKiBAcGFyYW0gaW5mb1xuICAgKiBAcmV0dXJucyB7bnVtYmVyfVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX3N3aXRjaEF1ZGlvU2FtcGxpbmdGcmVxdWVuY3kgKGluZm8pIHtcbiAgICBsZXQgc2FtcGxpbmdGcmVxdWVuY3lJbmRleCA9IChpbmZvICYgMTIpID4+PiAyXG4gICAgbGV0IHNhbXBsaW5nRnJlcXVlbmN5TGlzdCA9IFs1NTAwLCAxMTAyNSwgMjIwNTAsIDQ0MTAwLCA0ODAwMF1cbiAgICByZXR1cm4gc2FtcGxpbmdGcmVxdWVuY3lMaXN0W3NhbXBsaW5nRnJlcXVlbmN5SW5kZXhdXG4gIH1cblxuICAvKipcbiAgICogY2hvb3NlIGF1ZGlvIGNoYW5uZWwgY291bnRcbiAgICogQHBhcmFtIGluZm9cbiAgICogQHJldHVybnMge251bWJlcn1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9zd2l0Y2hBdWRpb0NoYW5uZWwgKGluZm8pIHtcbiAgICBsZXQgc2FtcGxlVHJhY2tOdW1JbmRleCA9IGluZm8gJiAxXG4gICAgbGV0IHNhbXBsZVRyYWNrTnVtTGlzdCA9IFsxLCAyXVxuICAgIHJldHVybiBzYW1wbGVUcmFja051bUxpc3Rbc2FtcGxlVHJhY2tOdW1JbmRleF1cbiAgfVxuXG4gIC8qKlxuICAgKiBjaGVjayBkYXRhc2l6ZSBpcyB2YWxpZCB1c2UgNCBCeXRlIGFmdGVyIGN1cnJlbnQgdGFnXG4gICAqIEBwYXJhbSBkYXRhc2l6ZVxuICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9kYXRhc2l6ZVZhbGlkYXRvciAoZGF0YXNpemUpIHtcbiAgICBsZXQgZGF0YXNpemVDb25maXJtID0gdGhpcy5sb2FkZXJCdWZmZXIudG9JbnQoMCwgNClcbiAgICB0aGlzLmxvYWRlckJ1ZmZlci5zaGlmdCg0KVxuICAgIHJldHVybiBkYXRhc2l6ZUNvbmZpcm0gPT09IGRhdGFzaXplICsgMTFcbiAgfVxuXG4gIGdldCBsb2FkZXJCdWZmZXIgKCkge1xuICAgIGlmICh0aGlzLl9jb250ZXh0LmdldEluc3RhbmNlKCdMT0FERVJfQlVGRkVSJykpIHtcbiAgICAgIHJldHVybiB0aGlzLl9jb250ZXh0LmdldEluc3RhbmNlKCdMT0FERVJfQlVGRkVSJylcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5lbWl0KERFTVVYX0VWRU5UUy5ERU1VWF9FUlJPUiwgbmV3IEVycm9yKCfmib7kuI3liLAgbG9hZGVyQnVmZmVyIOWunuS+iycpKVxuICAgIH1cbiAgfVxuXG4gIGdldCB0cmFja3MgKCkge1xuICAgIHJldHVybiB0aGlzLl9jb250ZXh0LmdldEluc3RhbmNlKCdUUkFDS1MnKVxuICB9XG5cbiAgZ2V0IGxvZ2dlciAoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2NvbnRleHQuZ2V0SW5zdGFuY2UoJ0xPR0dFUicpXG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgRmx2RGVtdXhlclxuIiwibW9kdWxlLmV4cG9ydHMgPSB7XG4gIEZldGNoTG9hZGVyOiByZXF1aXJlKCcuL3NyYy9mZXRjaC1sb2FkZXInKS5kZWZhdWx0XG59O1xuIiwiaW1wb3J0IHsgRVZFTlRTIH0gZnJvbSAneGdwbGF5ZXItdXRpbHMnO1xuXG5jb25zdCBMT0FERVJfRVZFTlRTID0gRVZFTlRTLkxPQURFUl9FVkVOVFM7XG5jb25zdCBSRUFEX1NUUkVBTSA9IDA7XG5jb25zdCBSRUFEX1RFWFQgPSAxO1xuY29uc3QgUkVBRF9KU09OID0gMjtcbmNvbnN0IFJFQURfQlVGRkVSID0gMztcbmNsYXNzIEZldGNoTG9hZGVyIHtcbiAgY29uc3RydWN0b3IgKGNvbmZpZ3MpIHtcbiAgICB0aGlzLmNvbmZpZ3MgPSBPYmplY3QuYXNzaWduKHt9LCBjb25maWdzKTtcbiAgICB0aGlzLnVybCA9IG51bGxcbiAgICB0aGlzLnN0YXR1cyA9IDBcbiAgICB0aGlzLmVycm9yID0gbnVsbFxuICAgIHRoaXMuX3JlYWRlciA9IG51bGw7XG4gICAgdGhpcy5fY2FuY2VsZWQgPSBmYWxzZTtcbiAgICB0aGlzLnJlYWR0eXBlID0gdGhpcy5jb25maWdzLnJlYWR0eXBlO1xuICAgIHRoaXMuYnVmZmVyID0gdGhpcy5jb25maWdzLmJ1ZmZlciB8fCAnTE9BREVSX0JVRkZFUic7XG4gICAgdGhpcy5fbG9hZGVyVGFza05vID0gMDtcbiAgfVxuXG4gIGluaXQgKCkge1xuICAgIHRoaXMub24oTE9BREVSX0VWRU5UUy5MQURFUl9TVEFSVCwgdGhpcy5sb2FkLmJpbmQodGhpcykpXG4gIH1cblxuICBzdGF0aWMgZ2V0IHR5cGUgKCkge1xuICAgIHJldHVybiAnbG9hZGVyJ1xuICB9XG5cbiAgbG9hZCAodXJsLCBvcHRzKSB7XG4gICAgbGV0IF90aGlzID0gdGhpcztcbiAgICB0aGlzLnVybCA9IHVybDtcbiAgICB0aGlzLl9jYW5jZWxlZCA9IGZhbHNlO1xuXG4gICAgLy8gVE9ETzogQWRkIFJhbmdlc1xuICAgIGxldCBwYXJhbXMgPSB0aGlzLmdldFBhcmFtcyhvcHRzKVxuICAgIF90aGlzLmxvYWRpbmcgPSB0cnVlXG4gICAgcmV0dXJuIGZldGNoKHRoaXMudXJsLCBwYXJhbXMpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICBpZiAocmVzcG9uc2Uub2spIHtcbiAgICAgICAgX3RoaXMuc3RhdHVzID0gcmVzcG9uc2Uuc3RhdHVzXG4gICAgICAgIHJldHVybiBfdGhpcy5fb25GZXRjaFJlc3BvbnNlKHJlc3BvbnNlKTtcbiAgICAgIH1cbiAgICAgIF90aGlzLmVtaXQoTE9BREVSX0VWRU5UUy5MT0FERVJfRVJST1IsIF90aGlzLCByZXNwb25zZSk7XG4gICAgICBfdGhpcy5sb2FkaW5nID0gZmFsc2U7XG4gICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSAge1xuICAgICAgX3RoaXMuZW1pdChMT0FERVJfRVZFTlRTLkxPQURFUl9FUlJPUiwgX3RoaXMsIGVycm9yKTtcbiAgICAgIF90aGlzLmxvYWRpbmcgPSBmYWxzZTtcbiAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvci5tZXNzYWdlKVxuICAgIH0pXG4gIH1cblxuICBfb25GZXRjaFJlc3BvbnNlIChyZXNwb25zZSkge1xuICAgIGxldCBfdGhpcyA9IHRoaXM7XG4gICAgbGV0IGJ1ZmZlciA9IHRoaXMuX2NvbnRleHQuZ2V0SW5zdGFuY2UodGhpcy5idWZmZXIpO1xuICAgIHRoaXMuX2xvYWRlclRhc2tObysrO1xuICAgIGxldCB0YXNrbm8gPSB0aGlzLl9sb2FkZXJUYXNrTm87XG4gICAgaWYgKHJlc3BvbnNlLm9rID09PSB0cnVlKSB7XG4gICAgICBzd2l0Y2ggKHRoaXMucmVhZHR5cGUpIHtcbiAgICAgICAgY2FzZSBSRUFEX0pTT046XG4gICAgICAgICAgcmVzcG9uc2UuanNvbigpLnRoZW4oKGRhdGEpID0+IHtcbiAgICAgICAgICAgIF90aGlzLmxvYWRpbmcgPSBmYWxzZVxuICAgICAgICAgICAgaWYgKCFfdGhpcy5fY2FuY2VsZWQpIHtcbiAgICAgICAgICAgICAgaWYgKGJ1ZmZlcikge1xuICAgICAgICAgICAgICAgIGJ1ZmZlci5wdXNoKGRhdGEpO1xuICAgICAgICAgICAgICAgIF90aGlzLmVtaXQoTE9BREVSX0VWRU5UUy5MT0FERVJfQ09NUExFVEUsIGJ1ZmZlcik7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgX3RoaXMuZW1pdChMT0FERVJfRVZFTlRTLkxPQURFUl9DT01QTEVURSwgZGF0YSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBSRUFEX1RFWFQ6XG4gICAgICAgICAgcmVzcG9uc2UudGV4dCgpLnRoZW4oKGRhdGEpID0+IHtcbiAgICAgICAgICAgIF90aGlzLmxvYWRpbmcgPSBmYWxzZVxuICAgICAgICAgICAgaWYgKCFfdGhpcy5fY2FuY2VsZWQpIHtcbiAgICAgICAgICAgICAgaWYgKGJ1ZmZlcikge1xuICAgICAgICAgICAgICAgIGJ1ZmZlci5wdXNoKGRhdGEpO1xuICAgICAgICAgICAgICAgIF90aGlzLmVtaXQoTE9BREVSX0VWRU5UUy5MT0FERVJfQ09NUExFVEUsIGJ1ZmZlcik7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgX3RoaXMuZW1pdChMT0FERVJfRVZFTlRTLkxPQURFUl9DT01QTEVURSwgZGF0YSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBSRUFEX0JVRkZFUjpcbiAgICAgICAgICByZXNwb25zZS5hcnJheUJ1ZmZlcigpLnRoZW4oKGRhdGEpID0+IHtcbiAgICAgICAgICAgIF90aGlzLmxvYWRpbmcgPSBmYWxzZVxuICAgICAgICAgICAgaWYgKCFfdGhpcy5fY2FuY2VsZWQpIHtcbiAgICAgICAgICAgICAgaWYgKGJ1ZmZlcikge1xuICAgICAgICAgICAgICAgIGJ1ZmZlci5wdXNoKG5ldyBVaW50OEFycmF5KGRhdGEpKTtcbiAgICAgICAgICAgICAgICBfdGhpcy5lbWl0KExPQURFUl9FVkVOVFMuTE9BREVSX0NPTVBMRVRFLCBidWZmZXIpO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIF90aGlzLmVtaXQoTE9BREVSX0VWRU5UUy5MT0FERVJfQ09NUExFVEUsIGRhdGEpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgUkVBRF9TVFJFQU06XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgcmV0dXJuIHRoaXMuX29uUmVhZGVyKHJlc3BvbnNlLmJvZHkuZ2V0UmVhZGVyKCksIHRhc2tubyk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgX29uUmVhZGVyIChyZWFkZXIsIHRhc2tubykge1xuICAgIGxldCBidWZmZXIgPSB0aGlzLl9jb250ZXh0LmdldEluc3RhbmNlKHRoaXMuYnVmZmVyKTtcblxuICAgIGlmICghYnVmZmVyKSB7XG4gICAgICB0aGlzLl9yZWFkZXIuY2FuY2VsKCk7XG4gICAgfVxuXG4gICAgdGhpcy5fcmVhZGVyID0gcmVhZGVyXG4gICAgaWYgKHRoaXMubG9hZGluZyA9PT0gZmFsc2UpIHtcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGxldCBfdGhpcyA9IHRoaXNcbiAgICAvLyByZWFkZXIgcmVhZCBmdW5jdGlvbiByZXR1cm5zIGEgUHJvbWlzZS4gZ2V0IGRhdGEgd2hlbiBjYWxsYmFjayBhbmQgaGFzIHZhbHVlLmRvbmUgd2hlbiBkaXNjb25uZWN0ZWQuXG4gICAgLy8gcmVhZOaWueazlei/lOWbnuS4gOS4qlByb21pc2UuIOWbnuiwg+S4reWPr+S7peiOt+WPluWIsOaVsOaNruOAguW9k3ZhbHVlLmRvbmXlrZjlnKjml7bvvIzor7TmmI7pk77mjqXmlq3lvIDjgIJcbiAgICB0aGlzLl9yZWFkZXIgJiYgdGhpcy5fcmVhZGVyLnJlYWQoKS50aGVuKGZ1bmN0aW9uICh2YWwpIHtcbiAgICAgIGlmICh2YWwuZG9uZSkge1xuICAgICAgICAvLyBUT0RPOiDlrozmiJDlpITnkIZcbiAgICAgICAgX3RoaXMubG9hZGluZyA9IGZhbHNlXG4gICAgICAgIF90aGlzLnN0YXR1cyA9IDA7XG4gICAgICAgIF90aGlzLmVtaXQoTE9BREVSX0VWRU5UUy5MT0FERVJfQ09NUExFVEUsIGJ1ZmZlcilcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG5cbiAgICAgIGlmIChfdGhpcy5fY2FuY2VsZWQpIHtcbiAgICAgICAgX3RoaXMuX3JlYWRlci5jYW5jZWwoKVxuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBidWZmZXIucHVzaCh2YWwudmFsdWUpXG4gICAgICBfdGhpcy5lbWl0KExPQURFUl9FVkVOVFMuTE9BREVSX0RBVEFMT0FERUQsIGJ1ZmZlcilcbiAgICAgIHJldHVybiBfdGhpcy5fb25SZWFkZXIocmVhZGVyLCB0YXNrbm8pXG4gICAgfSkuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcbiAgICAgIF90aGlzLmVtaXQoTE9BREVSX0VWRU5UUy5MT0FERVJfRVJST1IsIF90aGlzLCBlcnJvcik7XG4gICAgICBfdGhpcy5sb2FkaW5nID0gZmFsc2U7XG4gICAgfSlcbiAgfVxuXG4gIGdldFBhcmFtcyAob3B0cykge1xuICAgIGxldCBvcHRpb25zID0gT2JqZWN0LmFzc2lnbih7fSwgb3B0cylcbiAgICBsZXQgaGVhZGVycyA9IG5ldyBIZWFkZXJzKClcblxuICAgIGxldCBwYXJhbXMgPSB7XG4gICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgaGVhZGVyczogaGVhZGVycyxcbiAgICAgIG1vZGU6ICdjb3JzJyxcbiAgICAgIGNhY2hlOiAnZGVmYXVsdCdcbiAgICB9XG5cbiAgICAvLyBhZGQgY3VzdG1vciBoZWFkZXJzXG4gICAgLy8g5re75Yqg6Ieq5a6a5LmJ5aS0XG4gICAgaWYgKHR5cGVvZiB0aGlzLmNvbmZpZ3MuaGVhZGVycyA9PT0gJ29iamVjdCcpIHtcbiAgICAgIGxldCBjb25maWdIZWFkZXJzID0gdGhpcy5jb25maWdzLmhlYWRlcnNcbiAgICAgIGZvciAobGV0IGtleSBpbiBjb25maWdIZWFkZXJzKSB7XG4gICAgICAgIGlmIChjb25maWdIZWFkZXJzLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgICAgICBoZWFkZXJzLmFwcGVuZChrZXksIGNvbmZpZ0hlYWRlcnNba2V5XSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh0eXBlb2Ygb3B0aW9ucy5oZWFkZXJzID09PSAnb2JqZWN0Jykge1xuICAgICAgbGV0IG9wdEhlYWRlcnMgPSBvcHRpb25zLmhlYWRlcnNcbiAgICAgIGZvciAobGV0IGtleSBpbiBvcHRIZWFkZXJzKSB7XG4gICAgICAgIGlmIChvcHRIZWFkZXJzLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgICAgICBoZWFkZXJzLmFwcGVuZChrZXksIG9wdEhlYWRlcnNba2V5XSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChvcHRpb25zLmNvcnMgPT09IGZhbHNlKSB7XG4gICAgICBwYXJhbXMubW9kZSA9ICdzYW1lLW9yaWdpbidcbiAgICB9XG5cbiAgICAvLyB3aXRoQ3JlZGVudGlhbHMgaXMgZGlzYWJsZWQgYnkgZGVmYXVsdFxuICAgIC8vIHdpdGhDcmVkZW50aWFscyDlnKjpu5jorqTmg4XlhrXkuIvkuI3ooqvkvb/nlKjjgIJcbiAgICBpZiAob3B0aW9ucy53aXRoQ3JlZGVudGlhbHMpIHtcbiAgICAgIHBhcmFtcy5jcmVkZW50aWFscyA9ICdpbmNsdWRlJ1xuICAgIH1cblxuICAgIC8vIFRPRE86IEFkZCByYW5nZXM7XG4gICAgcmV0dXJuIHBhcmFtcztcbiAgfVxuXG4gIGNhbmNlbCAoKSB7XG4gICAgaWYgKHRoaXMuX3JlYWRlcikge1xuICAgICAgdGhpcy5fcmVhZGVyLmNhbmNlbCgpXG4gICAgICB0aGlzLl9yZWFkZXIgPSBudWxsXG4gICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZVxuICAgICAgdGhpcy5fY2FuY2VsZWQgPSB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIGRlc3Ryb3kgKCkge1xuICAgIHRoaXMuY2FuY2VsKCk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgRmV0Y2hMb2FkZXJcbiIsIm1vZHVsZS5leHBvcnRzID0ge1xuICBNcDRSZW11eGVyOiByZXF1aXJlKCcuL3NyYy9tcDQnKS5kZWZhdWx0XG59O1xuIiwiaW1wb3J0IHsgQnVmZmVyIH0gZnJvbSAneGdwbGF5ZXItdXRpbHMnO1xuXG4vLyBjb25zdCBVSU5UMzJfTUFYID0gTWF0aC5wb3coMiwgMzIpIC0gMTtcbmNsYXNzIEZtcDQge1xuICBzdGF0aWMgc2l6ZSAodmFsdWUpIHtcbiAgICByZXR1cm4gQnVmZmVyLndyaXRlVWludDMyKHZhbHVlKVxuICB9XG4gIHN0YXRpYyBpbml0Qm94IChzaXplLCBuYW1lLCAuLi5jb250ZW50KSB7XG4gICAgY29uc3QgYnVmZmVyID0gbmV3IEJ1ZmZlcigpXG4gICAgYnVmZmVyLndyaXRlKEZtcDQuc2l6ZShzaXplKSwgRm1wNC50eXBlKG5hbWUpLCAuLi5jb250ZW50KVxuICAgIHJldHVybiBidWZmZXIuYnVmZmVyXG4gIH1cbiAgc3RhdGljIGV4dGVuc2lvbiAodmVyc2lvbiwgZmxhZykge1xuICAgIHJldHVybiBuZXcgVWludDhBcnJheShbXG4gICAgICB2ZXJzaW9uLFxuICAgICAgKGZsYWcgPj4gMTYpICYgMHhmZixcbiAgICAgIChmbGFnID4+IDgpICYgMHhmZixcbiAgICAgIGZsYWcgJiAweGZmXG4gICAgXSlcbiAgfVxuICBzdGF0aWMgZnR5cCAoKSB7XG4gICAgcmV0dXJuIEZtcDQuaW5pdEJveCgyNCwgJ2Z0eXAnLCBuZXcgVWludDhBcnJheShbXG4gICAgICAweDY5LCAweDczLCAweDZGLCAweDZELCAvLyBpc29tLFxuICAgICAgMHgwLCAweDAsIDB4MDAsIDB4MDEsIC8vIG1pbm9yX3ZlcnNpb246IDB4MDFcbiAgICAgIDB4NjksIDB4NzMsIDB4NkYsIDB4NkQsIC8vIGlzb21cbiAgICAgIDB4NjEsIDB4NzYsIDB4NjMsIDB4MzEgLy8gYXZjMVxuICAgIF0pKVxuICB9XG4gIHN0YXRpYyBtb292ICh7IHR5cGUsIG1ldGEgfSkge1xuICAgIGxldCBzaXplID0gOFxuICAgIGxldCBtdmhkID0gRm1wNC5tdmhkKG1ldGEuZHVyYXRpb24sIG1ldGEudGltZXNjYWxlKVxuICAgIGxldCB0cmFrXG5cbiAgICBpZiAodHlwZSA9PT0gJ3ZpZGVvJykge1xuICAgICAgdHJhayA9IEZtcDQudmlkZW9UcmFrKG1ldGEpXG4gICAgfSBlbHNlIHtcbiAgICAgIHRyYWsgPSBGbXA0LmF1ZGlvVHJhayhtZXRhKVxuICAgIH1cblxuICAgIGxldCBtdmV4ID0gRm1wNC5tdmV4KG1ldGEuZHVyYXRpb24sIG1ldGEudGltZXNjYWxlIHx8IDEwMDAsIG1ldGEuaWQpO1xuICAgIFttdmhkLCB0cmFrLCBtdmV4XS5mb3JFYWNoKGl0ZW0gPT4ge1xuICAgICAgc2l6ZSArPSBpdGVtLmJ5dGVMZW5ndGhcbiAgICB9KVxuICAgIHJldHVybiBGbXA0LmluaXRCb3goc2l6ZSwgJ21vb3YnLCBtdmhkLCB0cmFrLCBtdmV4KVxuICB9XG4gIHN0YXRpYyBtdmhkIChkdXJhdGlvbiwgdGltZXNjYWxlID0gMTAwMCkge1xuICAgIC8vIGR1cmF0aW9uICo9IHRpbWVzY2FsZTtcbiAgICBsZXQgYnl0ZXMgPSBuZXcgVWludDhBcnJheShbXG4gICAgICAweDAwLCAweDAwLCAweDAwLCAweDAwLCAvLyB2ZXJzaW9uKDApICsgZmxhZ3MgICAgIDHkvY3nmoRib3jniYjmnKwrM+S9jWZsYWdzICAgYm9454mI5pys77yMMOaIljHvvIzkuIDoiKzkuLow44CC77yI5Lul5LiL5a2X6IqC5pWw5Z2H5oyJdmVyc2lvbj0w77yJXG4gICAgICAweDAwLCAweDAwLCAweDAwLCAweDAwLCAvLyBjcmVhdGlvbl90aW1lICAgIOWIm+W7uuaXtumXtCAg77yI55u45a+55LqOVVRD5pe26Ze0MTkwNC0wMS0wMembtueCueeahOenkuaVsO+8iVxuICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgLy8gbW9kaWZpY2F0aW9uX3RpbWUgICDkv67mlLnml7bpl7RcblxuICAgICAgLyoqXG4gICAgICAgICAgICAgKiB0aW1lc2NhbGU6IDQgYnl0ZXPmlofku7blqpLkvZPlnKgx56eS5pe26Ze05YaF55qE5Yi75bqm5YC877yM5Y+v5Lul55CG6Kej5Li6MeenkumVv+W6plxuICAgICAgICAgICAgICovXG4gICAgICAodGltZXNjYWxlID4+PiAyNCkgJiAweEZGLFxuICAgICAgKHRpbWVzY2FsZSA+Pj4gMTYpICYgMHhGRixcbiAgICAgICh0aW1lc2NhbGUgPj4+IDgpICYgMHhGRixcbiAgICAgICh0aW1lc2NhbGUpICYgMHhGRixcblxuICAgICAgLyoqXG4gICAgICAgICAgICAgKiBkdXJhdGlvbjogNCBieXRlc+ivpXRyYWNr55qE5pe26Ze06ZW/5bqm77yM55SoZHVyYXRpb27lkox0aW1lIHNjYWxl5YC85Y+v5Lul6K6h566XdHJhY2vml7bplb/vvIzmr5TlpoJhdWRpbyB0cmFja+eahHRpbWUgc2NhbGUgPSA4MDAwLFxuICAgICAgICAgICAgICogZHVyYXRpb24gPSA1NjAxMjjvvIzml7bplb/kuLo3MC4wMTbvvIx2aWRlbyB0cmFja+eahHRpbWUgc2NhbGUgPSA2MDAsIGR1cmF0aW9uID0gNDIwMDDvvIzml7bplb/kuLo3MFxuICAgICAgICAgICAgICovXG4gICAgICAoZHVyYXRpb24gPj4+IDI0KSAmIDB4RkYsXG4gICAgICAoZHVyYXRpb24gPj4+IDE2KSAmIDB4RkYsXG4gICAgICAoZHVyYXRpb24gPj4+IDgpICYgMHhGRixcbiAgICAgIChkdXJhdGlvbikgJiAweEZGLFxuICAgICAgMHgwMCwgMHgwMSwgMHgwMCwgMHgwMCwgLy8gUHJlZmVycmVkIHJhdGU6IDEuMCAgIOaOqOiNkOaSreaUvumAn+eOh++8jOmrmDE25L2N5ZKM5L2OMTbkvY3liIbliKvkuLrlsI/mlbDngrnmlbTmlbDpg6jliIblkozlsI/mlbDpg6jliIbvvIzljbNbMTYuMTZdIOagvOW8j++8jOivpeWAvOS4ujEuMO+8iDB4MDAwMTAwMDDvvInooajnpLrmraPluLjliY3lkJHmkq3mlL5cbiAgICAgIC8qKlxuICAgICAgICAgICAgICogUHJlZmVycmVkVm9sdW1lKDEuMCwgMmJ5dGVzKSArIHJlc2VydmVkKDJieXRlcylcbiAgICAgICAgICAgICAqIOS4jnJhdGXnsbvkvLzvvIxbOC44XSDmoLzlvI/vvIwxLjDvvIgweDAxMDDvvInooajnpLrmnIDlpKfpn7Pph49cbiAgICAgICAgICAgICAqL1xuICAgICAgMHgwMSwgMHgwMCwgMHgwMCwgMHgwMCxcbiAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIC8vICByZXNlcnZlZDogNCArIDQgYnl0ZXPkv53nlZnkvY1cbiAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsXG4gICAgICAweDAwLCAweDAxLCAweDAwLCAweDAwLCAvLyAtLS0tYmVnaW4gY29tcG9zaXRpb24gbWF0cml4LS0tLVxuICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCxcbiAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIC8vIOinhumikeWPmOaNouefqemYtSAgIOe6v+aAp+S7o+aVsFxuICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCxcbiAgICAgIDB4MDAsIDB4MDEsIDB4MDAsIDB4MDAsXG4gICAgICAweDAwLCAweDAwLCAweDAwLCAweDAwLFxuICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCxcbiAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsXG4gICAgICAweDQwLCAweDAwLCAweDAwLCAweDAwLCAvLyAtLS0tZW5kIGNvbXBvc2l0aW9uIG1hdHJpeC0tLS1cbiAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIC8vIC0tLS1iZWdpbiBwcmVfZGVmaW5lZCA2ICogNCBieXRlcy0tLS1cbiAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsXG4gICAgICAweDAwLCAweDAwLCAweDAwLCAweDAwLCAvLyBwcmUtZGVmaW5lZCDkv53nlZnkvY1cbiAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsXG4gICAgICAweDAwLCAweDAwLCAweDAwLCAweDAwLFxuICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgLy8gLS0tLWVuZCBwcmVfZGVmaW5lZCA2ICogNCBieXRlcy0tLS1cbiAgICAgIDB4RkYsIDB4RkYsIDB4RkYsIDB4RkYgLy8gbmV4dF90cmFja19JRCDkuIvkuIDkuKp0cmFja+S9v+eUqOeahGlk5Y+3XG4gICAgXSlcbiAgICByZXR1cm4gRm1wNC5pbml0Qm94KDggKyBieXRlcy5sZW5ndGgsICdtdmhkJywgbmV3IFVpbnQ4QXJyYXkoYnl0ZXMpKVxuICB9XG4gIHN0YXRpYyB2aWRlb1RyYWsgKGRhdGEpIHtcbiAgICBsZXQgc2l6ZSA9IDhcblxuICAgIGxldCB0a2hkID0gRm1wNC50a2hkKHtcbiAgICAgIGlkOiAxLFxuICAgICAgZHVyYXRpb246IGRhdGEuZHVyYXRpb24sXG4gICAgICB0aW1lc2NhbGU6IGRhdGEudGltZXNjYWxlIHx8IDEwMDAsXG4gICAgICB3aWR0aDogZGF0YS5wcmVzZW50V2lkdGgsXG4gICAgICBoZWlnaHQ6IGRhdGEucHJlc2VudEhlaWdodCxcbiAgICAgIHR5cGU6ICd2aWRlbydcbiAgICB9KVxuICAgIGxldCBtZGlhID0gRm1wNC5tZGlhKHtcbiAgICAgIHR5cGU6ICd2aWRlbycsXG4gICAgICB0aW1lc2NhbGU6IGRhdGEudGltZXNjYWxlIHx8IDEwMDAsXG4gICAgICBkdXJhdGlvbjogZGF0YS5kdXJhdGlvbixcbiAgICAgIGF2Y2M6IGRhdGEuYXZjYyxcbiAgICAgIHBhclJhdGlvOiBkYXRhLnBhclJhdGlvLFxuICAgICAgd2lkdGg6IGRhdGEucHJlc2VudFdpZHRoLFxuICAgICAgaGVpZ2h0OiBkYXRhLnByZXNlbnRIZWlnaHRcbiAgICB9KTtcbiAgICBbdGtoZCwgbWRpYV0uZm9yRWFjaChpdGVtID0+IHtcbiAgICAgIHNpemUgKz0gaXRlbS5ieXRlTGVuZ3RoXG4gICAgfSlcbiAgICByZXR1cm4gRm1wNC5pbml0Qm94KHNpemUsICd0cmFrJywgdGtoZCwgbWRpYSlcbiAgfVxuICBzdGF0aWMgYXVkaW9UcmFrIChkYXRhKSB7XG4gICAgbGV0IHNpemUgPSA4XG4gICAgbGV0IHRraGQgPSBGbXA0LnRraGQoe1xuICAgICAgaWQ6IDIsXG4gICAgICBkdXJhdGlvbjogZGF0YS5kdXJhdGlvbixcbiAgICAgIHRpbWVzY2FsZTogZGF0YS50aW1lc2NhbGUgfHwgMTAwMCxcbiAgICAgIHdpZHRoOiAwLFxuICAgICAgaGVpZ2h0OiAwLFxuICAgICAgdHlwZTogJ2F1ZGlvJ1xuICAgIH0pXG4gICAgbGV0IG1kaWEgPSBGbXA0Lm1kaWEoe1xuICAgICAgdHlwZTogJ2F1ZGlvJyxcbiAgICAgIHRpbWVzY2FsZTogZGF0YS50aW1lc2NhbGUgfHwgMTAwMCxcbiAgICAgIGR1cmF0aW9uOiBkYXRhLmR1cmF0aW9uLFxuICAgICAgY2hhbm5lbENvdW50OiBkYXRhLmNoYW5uZWxDb3VudCxcbiAgICAgIHNhbXBsZXJhdGU6IGRhdGEuc2FtcGxlUmF0ZSxcbiAgICAgIGNvbmZpZzogZGF0YS5jb25maWdcbiAgICB9KTtcbiAgICBbdGtoZCwgbWRpYV0uZm9yRWFjaChpdGVtID0+IHtcbiAgICAgIHNpemUgKz0gaXRlbS5ieXRlTGVuZ3RoXG4gICAgfSlcbiAgICByZXR1cm4gRm1wNC5pbml0Qm94KHNpemUsICd0cmFrJywgdGtoZCwgbWRpYSlcbiAgfVxuICBzdGF0aWMgdGtoZCAoZGF0YSkge1xuICAgIGxldCBpZCA9IGRhdGEuaWRcbiAgICBsZXQgZHVyYXRpb24gPSBkYXRhLmR1cmF0aW9uXG4gICAgbGV0IHdpZHRoID0gZGF0YS53aWR0aFxuICAgIGxldCBoZWlnaHQgPSBkYXRhLmhlaWdodFxuICAgIGxldCBjb250ZW50ID0gbmV3IFVpbnQ4QXJyYXkoW1xuICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwNywgLy8gdmVyc2lvbigwKSArIGZsYWdzIDHkvY3niYjmnKwgYm9454mI5pys77yMMOaIljHvvIzkuIDoiKzkuLow44CC77yI5Lul5LiL5a2X6IqC5pWw5Z2H5oyJdmVyc2lvbj0w77yJ5oyJ5L2N5oiW5pON5L2c57uT5p6c5YC877yM6aKE5a6a5LmJ5aaC5LiL77yaXG4gICAgICAvLyAweDAwMDAwMSB0cmFja19lbmFibGVk77yM5ZCm5YiZ6K+ldHJhY2vkuI3ooqvmkq3mlL7vvJtcbiAgICAgIC8vIDB4MDAwMDAyIHRyYWNrX2luX21vdmll77yM6KGo56S66K+ldHJhY2vlnKjmkq3mlL7kuK3ooqvlvJXnlKjvvJtcbiAgICAgIC8vIDB4MDAwMDA0IHRyYWNrX2luX3ByZXZpZXfvvIzooajnpLror6V0cmFja+WcqOmihOiniOaXtuiiq+W8leeUqOOAglxuICAgICAgLy8g5LiA6Iis6K+l5YC85Li6N++8jDErMis0IOWmguaenOS4gOS4quWqkuS9k+aJgOaciXRyYWNr5Z2H5pyq6K6+572udHJhY2tfaW5fbW92aWXlkox0cmFja19pbl9wcmV2aWV377yM5bCG6KKr55CG6Kej5Li65omA5pyJdHJhY2vlnYforr7nva7kuobov5nkuKTpobnvvJvlr7nkuo5oaW50IHRyYWNr77yM6K+l5YC85Li6MFxuICAgICAgLy8gaGludCB0cmFjayDov5nkuKrnibnmrornmoR0cmFja+W5tuS4jeWMheWQq+WqkuS9k+aVsOaNru+8jOiAjOaYr+WMheWQq+S6huS4gOS6m+WwhuWFtuS7luaVsOaNrnRyYWNr5omT5YyF5oiQ5rWB5aqS5L2T55qE5oyH56S65L+h5oGv44CCXG4gICAgICAweDAwLCAweDAwLCAweDAwLCAweDAwLCAvLyBjcmVhdGlvbl90aW1l5Yib5bu65pe26Ze077yI55u45a+55LqOVVRD5pe26Ze0MTkwNC0wMS0wMembtueCueeahOenkuaVsO+8iVxuICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgLy8gbW9kaWZpY2F0aW9uIHRpbWUg5L+u5pS55pe26Ze0XG4gICAgICAoaWQgPj4+IDI0KSAmIDB4RkYsIC8vIHRyYWNrX0lEOiA0IGJ5dGVzIGlk5Y+377yM5LiN6IO96YeN5aSN5LiU5LiN6IO95Li6MFxuICAgICAgKGlkID4+PiAxNikgJiAweEZGLFxuICAgICAgKGlkID4+PiA4KSAmIDB4RkYsXG4gICAgICAoaWQpICYgMHhGRixcbiAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIC8vIHJlc2VydmVkOiA0IGJ5dGVzICAgIOS/neeVmeS9jVxuICAgICAgKGR1cmF0aW9uID4+PiAyNCkgJiAweEZGLCAvLyBkdXJhdGlvbjogNCBieXRlcyB0cmFja+eahOaXtumXtOmVv+W6plxuICAgICAgKGR1cmF0aW9uID4+PiAxNikgJiAweEZGLFxuICAgICAgKGR1cmF0aW9uID4+PiA4KSAmIDB4RkYsXG4gICAgICAoZHVyYXRpb24pICYgMHhGRixcbiAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIC8vIHJlc2VydmVkOiAyICogNCBieXRlcyAgICDkv53nlZnkvY1cbiAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsXG4gICAgICAweDAwLCAweDAwLCAweDAwLCAweDAwLCAvLyBsYXllcigyYnl0ZXMpICsgYWx0ZXJuYXRlX2dyb3VwKDJieXRlcykgIOinhumikeWxgu+8jOm7mOiupOS4ujDvvIzlgLzlsI/nmoTlnKjkuIrlsYIudHJhY2vliIbnu4Tkv6Hmga/vvIzpu5jorqTkuLow6KGo56S66K+ldHJhY2vmnKrkuI7lhbbku5Z0cmFja+aciee+pOe7hOWFs+ezu1xuICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgLy8gdm9sdW1lKDJieXRlcykgKyByZXNlcnZlZCgyYnl0ZXMpICAgIFs4LjhdIOagvOW8j++8jOWmguaenOS4uumfs+mikXRyYWNr77yMMS4w77yIMHgwMTAw77yJ6KGo56S65pyA5aSn6Z+z6YeP77yb5ZCm5YiZ5Li6MCAgICvkv53nlZnkvY1cbiAgICAgIDB4MDAsIDB4MDEsIDB4MDAsIDB4MDAsIC8vIC0tLS1iZWdpbiBjb21wb3NpdGlvbiBtYXRyaXgtLS0tXG4gICAgICAweDAwLCAweDAwLCAweDAwLCAweDAwLFxuICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCxcbiAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsXG4gICAgICAweDAwLCAweDAxLCAweDAwLCAweDAwLCAvLyDop4bpopHlj5jmjaLnn6npmLVcbiAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsXG4gICAgICAweDAwLCAweDAwLCAweDAwLCAweDAwLFxuICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCxcbiAgICAgIDB4NDAsIDB4MDAsIDB4MDAsIDB4MDAsIC8vIC0tLS1lbmQgY29tcG9zaXRpb24gbWF0cml4LS0tLVxuICAgICAgKHdpZHRoID4+PiA4KSAmIDB4RkYsIC8vIC8v5a695bqmXG4gICAgICAod2lkdGgpICYgMHhGRixcbiAgICAgIDB4MDAsIDB4MDAsXG4gICAgICAoaGVpZ2h0ID4+PiA4KSAmIDB4RkYsIC8vIOmrmOW6plxuICAgICAgKGhlaWdodCkgJiAweEZGLFxuICAgICAgMHgwMCwgMHgwMFxuICAgIF0pXG4gICAgcmV0dXJuIEZtcDQuaW5pdEJveCg4ICsgY29udGVudC5ieXRlTGVuZ3RoLCAndGtoZCcsIGNvbnRlbnQpXG4gIH1cbiAgc3RhdGljIGVkdHMgKGRhdGEpIHtcbiAgICBsZXQgYnVmZmVyID0gbmV3IEJ1ZmZlcigpXG4gICAgbGV0IGR1cmF0aW9uID0gZGF0YS5kdXJhdGlvblxuICAgIGxldCBtZWRpYVRpbWUgPSBkYXRhLm1lZGlhVGltZVxuICAgIGJ1ZmZlci53cml0ZShGbXA0LnNpemUoMzYpLCBGbXA0LnR5cGUoJ2VkdHMnKSlcbiAgICAvLyBlbHN0XG4gICAgYnVmZmVyLndyaXRlKEZtcDQuc2l6ZSgyOCksIEZtcDQudHlwZSgnZWxzdCcpKVxuICAgIGJ1ZmZlci53cml0ZShuZXcgVWludDhBcnJheShbXG4gICAgICAweDAwLCAweDAwLCAweDAwLCAweDAxLCAvLyBlbnRyeSBjb3VudFxuICAgICAgKGR1cmF0aW9uID4+IDI0KSAmIDB4ZmYsIChkdXJhdGlvbiA+PiAxNikgJiAweGZmLCAoZHVyYXRpb24gPj4gOCkgJiAweGZmLCBkdXJhdGlvbiAmIDB4ZmYsXG4gICAgICAobWVkaWFUaW1lID4+IDI0KSAmIDB4ZmYsIChtZWRpYVRpbWUgPj4gMTYpICYgMHhmZiwgKG1lZGlhVGltZSA+PiA4KSAmIDB4ZmYsIG1lZGlhVGltZSAmIDB4ZmYsXG4gICAgICAweDAwLCAweDAwLCAweDAwLCAweDAxIC8vIG1lZGlhIHJhdGVcbiAgICBdKSlcbiAgICByZXR1cm4gYnVmZmVyLmJ1ZmZlclxuICB9XG4gIHN0YXRpYyBtZGlhIChkYXRhKSB7XG4gICAgbGV0IHNpemUgPSA4XG4gICAgbGV0IG1kaGQgPSBGbXA0Lm1kaGQoZGF0YS50aW1lc2NhbGUsIGRhdGEuZHVyYXRpb24pXG4gICAgbGV0IGhkbHIgPSBGbXA0LmhkbHIoZGF0YS50eXBlKVxuICAgIGxldCBtaW5mID0gRm1wNC5taW5mKGRhdGEpO1xuICAgIFttZGhkLCBoZGxyLCBtaW5mXS5mb3JFYWNoKGl0ZW0gPT4ge1xuICAgICAgc2l6ZSArPSBpdGVtLmJ5dGVMZW5ndGhcbiAgICB9KVxuICAgIHJldHVybiBGbXA0LmluaXRCb3goc2l6ZSwgJ21kaWEnLCBtZGhkLCBoZGxyLCBtaW5mKVxuICB9XG4gIHN0YXRpYyBtZGhkICh0aW1lc2NhbGUgPSAxMDAwLCBkdXJhdGlvbikge1xuICAgIGxldCBjb250ZW50ID0gbmV3IFVpbnQ4QXJyYXkoW1xuICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgLy8gY3JlYXRpb25fdGltZSAgICDliJvlu7rml7bpl7RcbiAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIC8vIG1vZGlmaWNhdGlvbl90aW1l5L+u5pS55pe26Ze0XG4gICAgICAodGltZXNjYWxlID4+PiAyNCkgJiAweEZGLCAvLyB0aW1lc2NhbGU6IDQgYnl0ZXMgICAg5paH5Lu25aqS5L2T5ZyoMeenkuaXtumXtOWGheeahOWIu+W6puWAvO+8jOWPr+S7peeQhuino+S4ujHnp5Lplb/luqZcbiAgICAgICh0aW1lc2NhbGUgPj4+IDE2KSAmIDB4RkYsXG4gICAgICAodGltZXNjYWxlID4+PiA4KSAmIDB4RkYsXG4gICAgICAodGltZXNjYWxlKSAmIDB4RkYsXG4gICAgICAoZHVyYXRpb24gPj4+IDI0KSAmIDB4RkYsIC8vIGR1cmF0aW9uOiA0IGJ5dGVzICB0cmFja+eahOaXtumXtOmVv+W6plxuICAgICAgKGR1cmF0aW9uID4+PiAxNikgJiAweEZGLFxuICAgICAgKGR1cmF0aW9uID4+PiA4KSAmIDB4RkYsXG4gICAgICAoZHVyYXRpb24pICYgMHhGRixcbiAgICAgIDB4NTUsIDB4QzQsIC8vIGxhbmd1YWdlOiB1bmQgKHVuZGV0ZXJtaW5lZCkg5aqS5L2T6K+t6KiA56CB44CC5pyA6auY5L2N5Li6MO+8jOWQjumdojE15L2N5Li6M+S4quWtl+espu+8iOingUlTTyA2MzktMi9U5qCH5YeG5Lit5a6a5LmJ77yJXG4gICAgICAweDAwLCAweDAwIC8vIHByZV9kZWZpbmVkID0gMFxuICAgIF0pXG4gICAgcmV0dXJuIEZtcDQuaW5pdEJveCgxMiArIGNvbnRlbnQuYnl0ZUxlbmd0aCwgJ21kaGQnLCBGbXA0LmV4dGVuc2lvbigwLCAwKSwgY29udGVudClcbiAgfVxuICBzdGF0aWMgaGRsciAodHlwZSkge1xuICAgIGxldCB2YWx1ZSA9IFsweDAwLCAvLyB2ZXJzaW9uIDBcbiAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIC8vIGZsYWdzXG4gICAgICAweDAwLCAweDAwLCAweDAwLCAweDAwLCAvLyBwcmVfZGVmaW5lZFxuICAgICAgMHg3NiwgMHg2OSwgMHg2NCwgMHg2NSwgLy8gaGFuZGxlcl90eXBlOiAndmlkZSdcbiAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIC8vIHJlc2VydmVkXG4gICAgICAweDAwLCAweDAwLCAweDAwLCAweDAwLCAvLyByZXNlcnZlZFxuICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgLy8gcmVzZXJ2ZWRcbiAgICAgIDB4NTYsIDB4NjksIDB4NjQsIDB4NjUsXG4gICAgICAweDZmLCAweDQ4LCAweDYxLCAweDZlLFxuICAgICAgMHg2NCwgMHg2YywgMHg2NSwgMHg3MiwgMHgwMCAvLyBuYW1lOiAnVmlkZW9IYW5kbGVyJ1xuICAgIF1cbiAgICBpZiAodHlwZSA9PT0gJ2F1ZGlvJykge1xuICAgICAgdmFsdWUuc3BsaWNlKDgsIDQsIC4uLlsweDczLCAweDZmLCAweDc1LCAweDZlXSlcbiAgICAgIHZhbHVlLnNwbGljZSgyNCwgMTMsIC4uLlsweDUzLCAweDZmLCAweDc1LCAweDZlLFxuICAgICAgICAweDY0LCAweDQ4LCAweDYxLCAweDZlLFxuICAgICAgICAweDY0LCAweDZjLCAweDY1LCAweDcyLCAweDAwXSlcbiAgICB9XG4gICAgcmV0dXJuIEZtcDQuaW5pdEJveCg4ICsgdmFsdWUubGVuZ3RoLCAnaGRscicsIG5ldyBVaW50OEFycmF5KHZhbHVlKSlcbiAgfVxuICBzdGF0aWMgbWluZiAoZGF0YSkge1xuICAgIGxldCBzaXplID0gOFxuICAgIGxldCB2bWhkID0gZGF0YS50eXBlID09PSAndmlkZW8nID8gRm1wNC52bWhkKCkgOiBGbXA0LnNtaGQoKVxuICAgIGxldCBkaW5mID0gRm1wNC5kaW5mKClcbiAgICBsZXQgc3RibCA9IEZtcDQuc3RibChkYXRhKTtcbiAgICBbdm1oZCwgZGluZiwgc3RibF0uZm9yRWFjaChpdGVtID0+IHtcbiAgICAgIHNpemUgKz0gaXRlbS5ieXRlTGVuZ3RoXG4gICAgfSlcbiAgICByZXR1cm4gRm1wNC5pbml0Qm94KHNpemUsICdtaW5mJywgdm1oZCwgZGluZiwgc3RibClcbiAgfVxuICBzdGF0aWMgdm1oZCAoKSB7XG4gICAgcmV0dXJuIEZtcDQuaW5pdEJveCgyMCwgJ3ZtaGQnLCBuZXcgVWludDhBcnJheShbXG4gICAgICAweDAwLCAvLyB2ZXJzaW9uXG4gICAgICAweDAwLCAweDAwLCAweDAxLCAvLyBmbGFnc1xuICAgICAgMHgwMCwgMHgwMCwgLy8gZ3JhcGhpY3Ntb2RlXG4gICAgICAweDAwLCAweDAwLFxuICAgICAgMHgwMCwgMHgwMCxcbiAgICAgIDB4MDAsIDB4MDAgLy8gb3Bjb2xvclxuICAgIF0pKVxuICB9XG4gIHN0YXRpYyBzbWhkICgpIHtcbiAgICByZXR1cm4gRm1wNC5pbml0Qm94KDE2LCAnc21oZCcsIG5ldyBVaW50OEFycmF5KFtcbiAgICAgIDB4MDAsIC8vIHZlcnNpb25cbiAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIC8vIGZsYWdzXG4gICAgICAweDAwLCAweDAwLCAvLyBiYWxhbmNlXG4gICAgICAweDAwLCAweDAwIC8vIHJlc2VydmVkXG4gICAgXSkpXG4gIH1cbiAgc3RhdGljIGRpbmYgKCkge1xuICAgIGxldCBidWZmZXIgPSBuZXcgQnVmZmVyKClcbiAgICBsZXQgZHJlZiA9IFsweDAwLCAvLyB2ZXJzaW9uIDBcbiAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIC8vIGZsYWdzXG4gICAgICAweDAwLCAweDAwLCAweDAwLCAweDAxLCAvLyBlbnRyeV9jb3VudFxuICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwYywgLy8gZW50cnlfc2l6ZVxuICAgICAgMHg3NSwgMHg3MiwgMHg2YywgMHgyMCwgLy8gJ3VybCcgdHlwZVxuICAgICAgMHgwMCwgLy8gdmVyc2lvbiAwXG4gICAgICAweDAwLCAweDAwLCAweDAxIC8vIGVudHJ5X2ZsYWdzXG4gICAgXVxuICAgIGJ1ZmZlci53cml0ZShGbXA0LnNpemUoMzYpLCBGbXA0LnR5cGUoJ2RpbmYnKSwgRm1wNC5zaXplKDI4KSwgRm1wNC50eXBlKCdkcmVmJyksIG5ldyBVaW50OEFycmF5KGRyZWYpKVxuICAgIHJldHVybiBidWZmZXIuYnVmZmVyXG4gIH1cbiAgc3RhdGljIHN0YmwgKGRhdGEpIHtcbiAgICBsZXQgc2l6ZSA9IDhcbiAgICBsZXQgc3RzZCA9IEZtcDQuc3RzZChkYXRhKVxuICAgIGxldCBzdHRzID0gRm1wNC5zdHRzKClcbiAgICBsZXQgc3RzYyA9IEZtcDQuc3RzYygpXG4gICAgbGV0IHN0c3ogPSBGbXA0LnN0c3ooKVxuICAgIGxldCBzdGNvID0gRm1wNC5zdGNvKCk7XG4gICAgW3N0c2QsIHN0dHMsIHN0c2MsIHN0c3osIHN0Y29dLmZvckVhY2goaXRlbSA9PiB7XG4gICAgICBzaXplICs9IGl0ZW0uYnl0ZUxlbmd0aFxuICAgIH0pXG4gICAgcmV0dXJuIEZtcDQuaW5pdEJveChzaXplLCAnc3RibCcsIHN0c2QsIHN0dHMsIHN0c2MsIHN0c3osIHN0Y28pXG4gIH1cbiAgc3RhdGljIHN0c2QgKGRhdGEpIHtcbiAgICBsZXQgY29udGVudFxuICAgIGlmIChkYXRhLnR5cGUgPT09ICdhdWRpbycpIHtcbiAgICAgIC8vIGlmICghZGF0YS5pc0FBQyAmJiBkYXRhLmNvZGVjID09PSAnbXA0Jykge1xuICAgICAgLy8gICAgIGNvbnRlbnQgPSBGTVA0Lm1wMyhkYXRhKTtcbiAgICAgIC8vIH0gZWxzZSB7XG4gICAgICAvL1xuICAgICAgLy8gfVxuICAgICAgLy8g5pSv5oyBbXA0YVxuICAgICAgY29udGVudCA9IEZtcDQubXA0YShkYXRhKVxuICAgIH0gZWxzZSB7XG4gICAgICBjb250ZW50ID0gRm1wNC5hdmMxKGRhdGEpXG4gICAgfVxuICAgIHJldHVybiBGbXA0LmluaXRCb3goMTYgKyBjb250ZW50LmJ5dGVMZW5ndGgsICdzdHNkJywgRm1wNC5leHRlbnNpb24oMCwgMCksIG5ldyBVaW50OEFycmF5KFsweDAwLCAweDAwLCAweDAwLCAweDAxXSksIGNvbnRlbnQpXG4gIH1cbiAgc3RhdGljIG1wNGEgKGRhdGEpIHtcbiAgICBsZXQgY29udGVudCA9IG5ldyBVaW50OEFycmF5KFtcbiAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIC8vIHJlc2VydmVkXG4gICAgICAweDAwLCAweDAwLCAweDAwLCAvLyByZXNlcnZlZFxuICAgICAgMHgwMCwgMHgwMSwgLy8gZGF0YV9yZWZlcmVuY2VfaW5kZXhcbiAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsXG4gICAgICAweDAwLCAweDAwLCAweDAwLCAweDAwLCAvLyByZXNlcnZlZFxuICAgICAgMHgwMCwgZGF0YS5jaGFubmVsQ291bnQsIC8vIGNoYW5uZWxjb3VudFxuICAgICAgMHgwMCwgMHgxMCwgLy8gc2FtcGxlU2l6ZToxNmJpdHNcbiAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIC8vIHJlc2VydmVkMlxuICAgICAgKGRhdGEuc2FtcGxlcmF0ZSA+PiA4KSAmIDB4ZmYsXG4gICAgICBkYXRhLnNhbXBsZXJhdGUgJiAweGZmLCAvL1xuICAgICAgMHgwMCwgMHgwMFxuICAgIF0pXG4gICAgbGV0IGVzZHMgPSBGbXA0LmVzZHMoZGF0YS5jb25maWcpXG4gICAgcmV0dXJuIEZtcDQuaW5pdEJveCg4ICsgY29udGVudC5ieXRlTGVuZ3RoICsgZXNkcy5ieXRlTGVuZ3RoLCAnbXA0YScsIGNvbnRlbnQsIGVzZHMpXG4gIH1cbiAgc3RhdGljIGVzZHMgKGNvbmZpZyA9IFs0MywgMTQ2LCA4LCAwXSkge1xuICAgIGNvbnN0IGNvbmZpZ2xlbiA9IGNvbmZpZy5sZW5ndGhcbiAgICBsZXQgYnVmZmVyID0gbmV3IEJ1ZmZlcigpXG4gICAgbGV0IGNvbnRlbnQgPSBuZXcgVWludDhBcnJheShbXG4gICAgICAweDAwLCAvLyB2ZXJzaW9uIDBcbiAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIC8vIGZsYWdzXG5cbiAgICAgIDB4MDMsIC8vIGRlc2NyaXB0b3JfdHlwZVxuICAgICAgMHgxNyArIGNvbmZpZ2xlbiwgLy8gbGVuZ3RoXG4gICAgICAweDAwLCAweDAxLCAvLyBlc19pZFxuICAgICAgMHgwMCwgLy8gc3RyZWFtX3ByaW9yaXR5XG5cbiAgICAgIDB4MDQsIC8vIGRlc2NyaXB0b3JfdHlwZVxuICAgICAgMHgwZiArIGNvbmZpZ2xlbiwgLy8gbGVuZ3RoXG4gICAgICAweDQwLCAvLyBjb2RlYyA6IG1wZWc0X2F1ZGlvXG4gICAgICAweDE1LCAvLyBzdHJlYW1fdHlwZVxuICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgLy8gYnVmZmVyX3NpemVcbiAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIC8vIG1heEJpdHJhdGVcbiAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIC8vIGF2Z0JpdHJhdGVcblxuICAgICAgMHgwNSAvLyBkZXNjcmlwdG9yX3R5cGVcbiAgICBdLmNvbmNhdChbY29uZmlnbGVuXSkuY29uY2F0KGNvbmZpZykuY29uY2F0KFsweDA2LCAweDAxLCAweDAyXSkpXG4gICAgYnVmZmVyLndyaXRlKEZtcDQuc2l6ZSg4ICsgY29udGVudC5ieXRlTGVuZ3RoKSwgRm1wNC50eXBlKCdlc2RzJyksIGNvbnRlbnQpXG4gICAgcmV0dXJuIGJ1ZmZlci5idWZmZXJcbiAgfVxuICBzdGF0aWMgYXZjMSAoZGF0YSkge1xuICAgIGxldCBidWZmZXIgPSBuZXcgQnVmZmVyKClcbiAgICBsZXQgc2l6ZSA9IDQwLy8gOChhdmMxKSs4KGF2Y2MpKzgoYnRydCkrMTYocGFzcClcbiAgICAvLyBsZXQgc3BzID0gZGF0YS5zcHNcbiAgICAvLyBsZXQgcHBzID0gZGF0YS5wcHNcbiAgICBsZXQgd2lkdGggPSBkYXRhLndpZHRoXG4gICAgbGV0IGhlaWdodCA9IGRhdGEuaGVpZ2h0XG4gICAgbGV0IGhTcGFjaW5nID0gZGF0YS5wYXJSYXRpby5oZWlnaHRcbiAgICBsZXQgdlNwYWNpbmcgPSBkYXRhLnBhclJhdGlvLndpZHRoXG4gICAgLy8gbGV0IGF2Y2NCdWZmZXIgPSBuZXcgQnVmZmVyKClcbiAgICAvLyBhdmNjQnVmZmVyLndyaXRlKG5ldyBVaW50OEFycmF5KFtcbiAgICAvLyAgIDB4MDEsIC8vIHZlcnNpb25cbiAgICAvLyAgIHNwc1sxXSwgLy8gcHJvZmlsZVxuICAgIC8vICAgc3BzWzJdLCAvLyBwcm9maWxlIGNvbXBhdGlibGVcbiAgICAvLyAgIHNwc1szXSwgLy8gbGV2ZWxcbiAgICAvLyAgIDB4ZmMgfCAzLFxuICAgIC8vICAgMHhFMCB8IDEgLy8g55uu5YmN5Y+q5aSE55CG5LiA5Liqc3BzXG4gICAgLy8gXS5jb25jYXQoW3Nwcy5sZW5ndGggPj4+IDggJiAweGZmLCBzcHMubGVuZ3RoICYgMHhmZl0pKSlcbiAgICAvLyBhdmNjQnVmZmVyLndyaXRlKHNwcywgbmV3IFVpbnQ4QXJyYXkoWzEsIHBwcy5sZW5ndGggPj4+IDggJiAweGZmLCBwcHMubGVuZ3RoICYgMHhmZl0pLCBwcHMpXG5cbiAgICBsZXQgYXZjYyA9IGRhdGEuYXZjY1xuICAgIGxldCBhdmMxID0gbmV3IFVpbnQ4QXJyYXkoW1xuICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgLy8gcmVzZXJ2ZWRcbiAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIC8vIHJlc2VydmVkXG4gICAgICAweDAwLCAweDAxLCAvLyBkYXRhX3JlZmVyZW5jZV9pbmRleFxuICAgICAgMHgwMCwgMHgwMCwgLy8gcHJlX2RlZmluZWRcbiAgICAgIDB4MDAsIDB4MDAsIC8vIHJlc2VydmVkXG4gICAgICAweDAwLCAweDAwLCAweDAwLCAweDAwLFxuICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCxcbiAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIC8vIHByZV9kZWZpbmVkXG4gICAgICAod2lkdGggPj4gOCkgJiAweGZmLFxuICAgICAgd2lkdGggJiAweGZmLCAvLyB3aWR0aFxuICAgICAgKGhlaWdodCA+PiA4KSAmIDB4ZmYsXG4gICAgICBoZWlnaHQgJiAweGZmLCAvLyBoZWlnaHRcbiAgICAgIDB4MDAsIDB4NDgsIDB4MDAsIDB4MDAsIC8vIGhvcml6cmVzb2x1dGlvblxuICAgICAgMHgwMCwgMHg0OCwgMHgwMCwgMHgwMCwgLy8gdmVydHJlc29sdXRpb25cbiAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIC8vIHJlc2VydmVkXG4gICAgICAweDAwLCAweDAxLCAvLyBmcmFtZV9jb3VudFxuICAgICAgMHgxMixcbiAgICAgIDB4NjQsIDB4NjEsIDB4NjksIDB4NkMsIC8vIGRhaWx5bW90aW9uL2hscy5qc1xuICAgICAgMHg3OSwgMHg2RCwgMHg2RiwgMHg3NCxcbiAgICAgIDB4NjksIDB4NkYsIDB4NkUsIDB4MkYsXG4gICAgICAweDY4LCAweDZDLCAweDczLCAweDJFLFxuICAgICAgMHg2QSwgMHg3MywgMHgwMCwgMHgwMCxcbiAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsXG4gICAgICAweDAwLCAweDAwLCAweDAwLCAweDAwLFxuICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgLy8gY29tcHJlc3Nvcm5hbWVcbiAgICAgIDB4MDAsIDB4MTgsIC8vIGRlcHRoID0gMjRcbiAgICAgIDB4MTEsIDB4MTFdKSAvLyBwcmVfZGVmaW5lZCA9IC0xXG4gICAgbGV0IGJ0cnQgPSBuZXcgVWludDhBcnJheShbXG4gICAgICAweDAwLCAweDFjLCAweDljLCAweDgwLCAvLyBidWZmZXJTaXplREJcbiAgICAgIDB4MDAsIDB4MmQsIDB4YzYsIDB4YzAsIC8vIG1heEJpdHJhdGVcbiAgICAgIDB4MDAsIDB4MmQsIDB4YzYsIDB4YzAgLy8gYXZnQml0cmF0ZVxuICAgIF0pXG4gICAgbGV0IHBhc3AgPSBuZXcgVWludDhBcnJheShbXG4gICAgICAoaFNwYWNpbmcgPj4gMjQpLCAvLyBoU3BhY2luZ1xuICAgICAgKGhTcGFjaW5nID4+IDE2KSAmIDB4ZmYsXG4gICAgICAoaFNwYWNpbmcgPj4gOCkgJiAweGZmLFxuICAgICAgaFNwYWNpbmcgJiAweGZmLFxuICAgICAgKHZTcGFjaW5nID4+IDI0KSwgLy8gdlNwYWNpbmdcbiAgICAgICh2U3BhY2luZyA+PiAxNikgJiAweGZmLFxuICAgICAgKHZTcGFjaW5nID4+IDgpICYgMHhmZixcbiAgICAgIHZTcGFjaW5nICYgMHhmZlxuICAgIF0pXG5cbiAgICBidWZmZXIud3JpdGUoXG4gICAgICBGbXA0LnNpemUoc2l6ZSArIGF2YzEuYnl0ZUxlbmd0aCArIGF2Y2MuYnl0ZUxlbmd0aCArIGJ0cnQuYnl0ZUxlbmd0aCksIEZtcDQudHlwZSgnYXZjMScpLCBhdmMxLFxuICAgICAgRm1wNC5zaXplKDggKyBhdmNjLmJ5dGVMZW5ndGgpLCBGbXA0LnR5cGUoJ2F2Y0MnKSwgYXZjYyxcbiAgICAgIEZtcDQuc2l6ZSgyMCksIEZtcDQudHlwZSgnYnRydCcpLCBidHJ0LFxuICAgICAgRm1wNC5zaXplKDE2KSwgRm1wNC50eXBlKCdwYXNwJyksIHBhc3BcbiAgICApXG4gICAgcmV0dXJuIGJ1ZmZlci5idWZmZXJcbiAgfVxuICBzdGF0aWMgc3R0cyAoKSB7XG4gICAgbGV0IGNvbnRlbnQgPSBuZXcgVWludDhBcnJheShbXG4gICAgICAweDAwLCAvLyB2ZXJzaW9uXG4gICAgICAweDAwLCAweDAwLCAweDAwLCAvLyBmbGFnc1xuICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCAvLyBlbnRyeV9jb3VudFxuICAgIF0pXG4gICAgcmV0dXJuIEZtcDQuaW5pdEJveCgxNiwgJ3N0dHMnLCBjb250ZW50KVxuICB9XG4gIHN0YXRpYyBzdHNjICgpIHtcbiAgICBsZXQgY29udGVudCA9IG5ldyBVaW50OEFycmF5KFtcbiAgICAgIDB4MDAsIC8vIHZlcnNpb25cbiAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIC8vIGZsYWdzXG4gICAgICAweDAwLCAweDAwLCAweDAwLCAweDAwIC8vIGVudHJ5X2NvdW50XG4gICAgXSlcbiAgICByZXR1cm4gRm1wNC5pbml0Qm94KDE2LCAnc3RzYycsIGNvbnRlbnQpXG4gIH1cbiAgc3RhdGljIHN0Y28gKCkge1xuICAgIGxldCBjb250ZW50ID0gbmV3IFVpbnQ4QXJyYXkoW1xuICAgICAgMHgwMCwgLy8gdmVyc2lvblxuICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgLy8gZmxhZ3NcbiAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAgLy8gZW50cnlfY291bnRcbiAgICBdKVxuICAgIHJldHVybiBGbXA0LmluaXRCb3goMTYsICdzdGNvJywgY29udGVudClcbiAgfVxuICBzdGF0aWMgc3RzeiAoKSB7XG4gICAgbGV0IGNvbnRlbnQgPSBuZXcgVWludDhBcnJheShbXG4gICAgICAweDAwLCAvLyB2ZXJzaW9uXG4gICAgICAweDAwLCAweDAwLCAweDAwLCAvLyBmbGFnc1xuICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgLy8gc2FtcGxlX3NpemVcbiAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAgLy8gc2FtcGxlX2NvdW50XG4gICAgXSlcbiAgICByZXR1cm4gRm1wNC5pbml0Qm94KDIwLCAnc3RzeicsIGNvbnRlbnQpXG4gIH1cbiAgc3RhdGljIG12ZXggKGR1cmF0aW9uLCB0aW1lc2NhbGUgPSAxMDAwLCB0cmFja0lEKSB7XG4gICAgbGV0IGJ1ZmZlciA9IG5ldyBCdWZmZXIoKVxuICAgIGxldCBtZWhkID0gQnVmZmVyLndyaXRlVWludDMyKGR1cmF0aW9uKVxuICAgIGJ1ZmZlci53cml0ZShGbXA0LnNpemUoNTYpLCBGbXA0LnR5cGUoJ212ZXgnKSwgRm1wNC5zaXplKDE2KSwgRm1wNC50eXBlKCdtZWhkJyksIEZtcDQuZXh0ZW5zaW9uKDAsIDApLCBtZWhkLCBGbXA0LnRyZXgodHJhY2tJRCkpXG4gICAgcmV0dXJuIGJ1ZmZlci5idWZmZXJcbiAgfVxuICBzdGF0aWMgdHJleCAoaWQpIHtcbiAgICBsZXQgY29udGVudCA9IG5ldyBVaW50OEFycmF5KFtcbiAgICAgIDB4MDAsIC8vIHZlcnNpb24gMFxuICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgLy8gZmxhZ3NcbiAgICAgIChpZCA+PiAyNCksXG4gICAgICAoaWQgPj4gMTYpICYgMHhmZixcbiAgICAgIChpZCA+PiA4KSAmIDB4ZmYsXG4gICAgICAoaWQgJiAweGZmKSwgLy8gdHJhY2tfSURcbiAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDEsIC8vIGRlZmF1bHRfc2FtcGxlX2Rlc2NyaXB0aW9uX2luZGV4XG4gICAgICAweDAwLCAweDAwLCAweDAwLCAweDAwLCAvLyBkZWZhdWx0X3NhbXBsZV9kdXJhdGlvblxuICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgLy8gZGVmYXVsdF9zYW1wbGVfc2l6ZVxuICAgICAgMHgwMCwgMHgwMSwgMHgwMCwgMHgwMSAvLyBkZWZhdWx0X3NhbXBsZV9mbGFnc1xuICAgIF0pXG4gICAgcmV0dXJuIEZtcDQuaW5pdEJveCg4ICsgY29udGVudC5ieXRlTGVuZ3RoLCAndHJleCcsIGNvbnRlbnQpXG4gIH1cbiAgc3RhdGljIG1vb2YgKGRhdGEpIHtcbiAgICBsZXQgc2l6ZSA9IDhcbiAgICBsZXQgbWZoZCA9IEZtcDQubWZoZCgpXG4gICAgbGV0IHRyYWYgPSBGbXA0LnRyYWYoZGF0YSk7XG4gICAgW21maGQsIHRyYWZdLmZvckVhY2goaXRlbSA9PiB7XG4gICAgICBzaXplICs9IGl0ZW0uYnl0ZUxlbmd0aFxuICAgIH0pXG4gICAgcmV0dXJuIEZtcDQuaW5pdEJveChzaXplLCAnbW9vZicsIG1maGQsIHRyYWYpXG4gIH1cbiAgc3RhdGljIG1maGQgKCkge1xuICAgIGxldCBjb250ZW50ID0gQnVmZmVyLndyaXRlVWludDMyKEZtcDQuc2VxdWVuY2UpXG4gICAgRm1wNC5zZXF1ZW5jZSArPSAxXG4gICAgcmV0dXJuIEZtcDQuaW5pdEJveCgxNiwgJ21maGQnLCBGbXA0LmV4dGVuc2lvbigwLCAwKSwgY29udGVudClcbiAgfVxuICBzdGF0aWMgdHJhZiAoZGF0YSkge1xuICAgIGxldCBzaXplID0gOFxuICAgIGxldCB0ZmhkID0gRm1wNC50ZmhkKGRhdGEuaWQpXG4gICAgbGV0IHRmZHQgPSBGbXA0LnRmZHQoZGF0YS50aW1lKVxuICAgIGxldCBzZHRwID0gRm1wNC5zZHRwKGRhdGEpXG4gICAgbGV0IHRydW4gPSBGbXA0LnRydW4oZGF0YSwgc2R0cC5ieXRlTGVuZ3RoKTtcblxuICAgIFt0ZmhkLCB0ZmR0LCB0cnVuLCBzZHRwXS5mb3JFYWNoKGl0ZW0gPT4ge1xuICAgICAgc2l6ZSArPSBpdGVtLmJ5dGVMZW5ndGhcbiAgICB9KVxuICAgIHJldHVybiBGbXA0LmluaXRCb3goc2l6ZSwgJ3RyYWYnLCB0ZmhkLCB0ZmR0LCB0cnVuLCBzZHRwKVxuICB9XG4gIHN0YXRpYyB0ZmhkIChpZCkge1xuICAgIGxldCBjb250ZW50ID0gQnVmZmVyLndyaXRlVWludDMyKGlkKVxuICAgIHJldHVybiBGbXA0LmluaXRCb3goMTYsICd0ZmhkJywgRm1wNC5leHRlbnNpb24oMCwgMCksIGNvbnRlbnQpXG4gIH1cbiAgc3RhdGljIHRmZHQgKHRpbWUpIHtcbiAgICAvLyBsZXQgdXBwZXIgPSBNYXRoLmZsb29yKHRpbWUgLyAoVUlOVDMyX01BWCArIDEpKSxcbiAgICAvLyAgICAgbG93ZXIgPSBNYXRoLmZsb29yKHRpbWUgJSAoVUlOVDMyX01BWCArIDEpKTtcbiAgICByZXR1cm4gRm1wNC5pbml0Qm94KDE2LCAndGZkdCcsIEZtcDQuZXh0ZW5zaW9uKDAsIDApLCBCdWZmZXIud3JpdGVVaW50MzIodGltZSkpXG4gIH1cbiAgc3RhdGljIHRydW4gKGRhdGEsIHNkdHBMZW5ndGgpIHtcbiAgICAvLyBsZXQgaWQgPSBkYXRhLmlkO1xuICAgIC8vIGxldCBjZWlsID0gaWQgPT09IDEgPyAxNiA6IDEyO1xuICAgIGxldCBidWZmZXIgPSBuZXcgQnVmZmVyKClcbiAgICBsZXQgc2FtcGxlQ291bnQgPSBCdWZmZXIud3JpdGVVaW50MzIoZGF0YS5zYW1wbGVzLmxlbmd0aClcbiAgICAvLyBtZGF0LWhlYWRlciA4XG4gICAgLy8gbW9vZi1oZWFkZXIgOFxuICAgIC8vIG1maGQgMTZcbiAgICAvLyB0cmFmLWhlYWRlciA4XG4gICAgLy8gdGhoZCAxNlxuICAgIC8vIHRmZHQgMjBcbiAgICAvLyB0cnVuLWhlYWRlciAxMlxuICAgIC8vIHNhbXBsZUNvdW50IDRcbiAgICAvLyBkYXRhLW9mZnNldCA0XG4gICAgLy8gc2FtcGxlcy5sZW5ndGhcbiAgICBsZXQgb2Zmc2V0ID0gQnVmZmVyLndyaXRlVWludDMyKDggKyA4ICsgMTYgKyA4ICsgMTYgKyAxNiArIDEyICsgNCArIDQgKyAxNiAqIGRhdGEuc2FtcGxlcy5sZW5ndGggKyBzZHRwTGVuZ3RoKVxuICAgIGJ1ZmZlci53cml0ZShGbXA0LnNpemUoMjAgKyAxNiAqIGRhdGEuc2FtcGxlcy5sZW5ndGgpLCBGbXA0LnR5cGUoJ3RydW4nKSwgbmV3IFVpbnQ4QXJyYXkoWzB4MDAsIDB4MDAsIDB4MEYsIDB4MDFdKSwgc2FtcGxlQ291bnQsIG9mZnNldClcblxuICAgIC8vIGxldCBzaXplID0gYnVmZmVyLmJ1ZmZlci5ieXRlTGVuZ3RoXG4gICAgLy8gbGV0IHdyaXRlT2Zmc2V0ID0gMFxuICAgIC8vIGRhdGEuc2FtcGxlcy5mb3JFYWNoKCgpID0+IHtcbiAgICAvLyAgIHNpemUgKz0gMTZcbiAgICAvLyB9KVxuICAgIC8vXG4gICAgLy8gbGV0IHRydW5Cb3ggPSBuZXcgVWludDhBcnJheShzaXplKVxuXG4gICAgLy8gdHJ1bkJveC5zZXQoYnVmZmVyLmJ1ZmZlciwgMClcblxuICAgIGRhdGEuc2FtcGxlcy5mb3JFYWNoKChpdGVtKSA9PiB7XG4gICAgICBjb25zdCBmbGFncyA9IGl0ZW0uZmxhZ3NcbiAgICAgIC8vIGNvbnNvbGUubG9nKGl0ZW0udHlwZSwgaXRlbS5kdHMsIGl0ZW0uZHVyYXRpb24pXG5cbiAgICAgIGJ1ZmZlci53cml0ZShuZXcgVWludDhBcnJheShbXG4gICAgICAgIChpdGVtLmR1cmF0aW9uID4+PiAyNCkgJiAweEZGLCAvLyBzYW1wbGVfZHVyYXRpb25cbiAgICAgICAgKGl0ZW0uZHVyYXRpb24gPj4+IDE2KSAmIDB4RkYsXG4gICAgICAgIChpdGVtLmR1cmF0aW9uID4+PiA4KSAmIDB4RkYsXG4gICAgICAgIChpdGVtLmR1cmF0aW9uKSAmIDB4RkYsXG4gICAgICAgIChpdGVtLnNpemUgPj4+IDI0KSAmIDB4RkYsIC8vIHNhbXBsZV9zaXplXG4gICAgICAgIChpdGVtLnNpemUgPj4+IDE2KSAmIDB4RkYsXG4gICAgICAgIChpdGVtLnNpemUgPj4+IDgpICYgMHhGRixcbiAgICAgICAgKGl0ZW0uc2l6ZSkgJiAweEZGLFxuICAgICAgICAoZmxhZ3MuaXNMZWFkaW5nIDw8IDIpIHwgZmxhZ3MuZGVwZW5kc09uLCAvLyBzYW1wbGVfZmxhZ3NcbiAgICAgICAgKGZsYWdzLmlzRGVwZW5kZWRPbiA8PCA2KSB8IChmbGFncy5oYXNSZWR1bmRhbmN5IDw8IDQpIHwgZmxhZ3MuaXNOb25TeW5jLFxuICAgICAgICAweDAwLCAweDAwLCAvLyBzYW1wbGVfZGVncmFkYXRpb25fcHJpb3JpdHlcbiAgICAgICAgKGl0ZW0uY3RzID4+PiAyNCkgJiAweEZGLCAvLyBzYW1wbGVfY29tcG9zaXRpb25fdGltZV9vZmZzZXRcbiAgICAgICAgKGl0ZW0uY3RzID4+PiAxNikgJiAweEZGLFxuICAgICAgICAoaXRlbS5jdHMgPj4+IDgpICYgMHhGRixcbiAgICAgICAgKGl0ZW0uY3RzKSAmIDB4RkZcbiAgICAgIF0pKVxuICAgICAgLy8gd3JpdGVPZmZzZXQgKz0gMTZcbiAgICAgIC8vIGJ1ZmZlci53cml0ZShCdWZmZXIud3JpdGVVaW50MzIoMCkpO1xuICAgIH0pXG4gICAgcmV0dXJuIGJ1ZmZlci5idWZmZXJcbiAgfVxuICBzdGF0aWMgc2R0cCAoZGF0YSkge1xuICAgIGxldCBidWZmZXIgPSBuZXcgQnVmZmVyKClcbiAgICBidWZmZXIud3JpdGUoRm1wNC5zaXplKDEyICsgZGF0YS5zYW1wbGVzLmxlbmd0aCksIEZtcDQudHlwZSgnc2R0cCcpLCBGbXA0LmV4dGVuc2lvbigwLCAwKSlcbiAgICBkYXRhLnNhbXBsZXMuZm9yRWFjaChpdGVtID0+IHtcbiAgICAgIGNvbnN0IGZsYWdzID0gaXRlbS5mbGFnc1xuICAgICAgY29uc3QgbnVtID0gKGZsYWdzLmlzTGVhZGluZyA8PCA2KSB8IC8vIGlzX2xlYWRpbmc6IDIgKGJpdClcbiAgICAgICAgKGZsYWdzLmRlcGVuZHNPbiA8PCA0KSB8IC8vIHNhbXBsZV9kZXBlbmRzX29uXG4gICAgICAgIChmbGFncy5pc0RlcGVuZGVkT24gPDwgMikgfCAvLyBzYW1wbGVfaXNfZGVwZW5kZWRfb25cbiAgICAgICAgKGZsYWdzLmhhc1JlZHVuZGFuY3kpLy8gc2FtcGxlX2hhc19yZWR1bmRhbmN5XG5cbiAgICAgIGJ1ZmZlci53cml0ZShuZXcgVWludDhBcnJheShbbnVtXSkpXG4gICAgfSlcbiAgICByZXR1cm4gYnVmZmVyLmJ1ZmZlclxuICB9XG4gIHN0YXRpYyBtZGF0IChkYXRhKSB7XG4gICAgbGV0IGJ1ZmZlciA9IG5ldyBCdWZmZXIoKVxuICAgIGxldCBzaXplID0gOFxuICAgIGRhdGEuc2FtcGxlcy5mb3JFYWNoKGl0ZW0gPT4ge1xuICAgICAgc2l6ZSArPSBpdGVtLnNpemVcbiAgICB9KVxuICAgIGJ1ZmZlci53cml0ZShGbXA0LnNpemUoc2l6ZSksIEZtcDQudHlwZSgnbWRhdCcpKVxuICAgIGxldCBtZGF0Qm94ID0gbmV3IFVpbnQ4QXJyYXkoc2l6ZSlcbiAgICBsZXQgb2Zmc2V0ID0gMFxuICAgIG1kYXRCb3guc2V0KGJ1ZmZlci5idWZmZXIsIG9mZnNldClcbiAgICBvZmZzZXQgKz0gOFxuICAgIGRhdGEuc2FtcGxlcy5mb3JFYWNoKGl0ZW0gPT4ge1xuICAgICAgaXRlbS5idWZmZXIuZm9yRWFjaCgodW5pdCkgPT4ge1xuICAgICAgICBtZGF0Qm94LnNldCh1bml0LCBvZmZzZXQpXG4gICAgICAgIG9mZnNldCArPSB1bml0LmJ5dGVMZW5ndGhcbiAgICAgICAgLy8gYnVmZmVyLndyaXRlKHVuaXQuZGF0YSk7XG4gICAgICB9KVxuICAgIH0pXG4gICAgcmV0dXJuIG1kYXRCb3hcbiAgfVxufVxuRm1wNC50eXBlID0gKG5hbWUpID0+IHtcbiAgcmV0dXJuIG5ldyBVaW50OEFycmF5KFtuYW1lLmNoYXJDb2RlQXQoMCksIG5hbWUuY2hhckNvZGVBdCgxKSwgbmFtZS5jaGFyQ29kZUF0KDIpLCBuYW1lLmNoYXJDb2RlQXQoMyldKVxufVxuRm1wNC5zZXF1ZW5jZSA9IDFcblxuZXhwb3J0IGRlZmF1bHQgRm1wNFxuIiwiaW1wb3J0IHtcbiAgRVZFTlRTLFxuICBzbmlmZmVyLFxuICBNZWRpYVNlZ21lbnRMaXN0LFxuICBCdWZmZXJcbn0gZnJvbSAneGdwbGF5ZXItdXRpbHMnO1xuaW1wb3J0IEZtcDQgZnJvbSAnLi9mbXA0J1xuXG5jb25zdCBSRU1VWF9FVkVOVFMgPSBFVkVOVFMuUkVNVVhfRVZFTlRTXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE1wNFJlbXV4ZXIge1xuICBjb25zdHJ1Y3RvciAoKSB7XG4gICAgdGhpcy5fZHRzQmFzZSA9IDBcbiAgICB0aGlzLl9pc0R0c0Jhc2VJbml0ZWQgPSBmYWxzZVxuXG4gICAgdGhpcy52aWRlb0FsbER1cmF0aW9uID0gMFxuICAgIHRoaXMuYXVkaW9BbGxEdXJhdGlvbiA9IDBcbiAgfVxuXG4gIGluaXQgKCkge1xuICAgIHRoaXMub24oUkVNVVhfRVZFTlRTLlJFTVVYX01FRElBLCB0aGlzLnJlbXV4LmJpbmQodGhpcykpXG4gICAgdGhpcy5vbihSRU1VWF9FVkVOVFMuUkVNVVhfTUVUQURBVEEsIHRoaXMub25NZXRhRGF0YVJlYWR5LmJpbmQodGhpcykpXG4gIH1cblxuICBkZXN0cm95ICgpIHtcbiAgICB0aGlzLl9kdHNCYXNlID0gLTFcbiAgICB0aGlzLl9kdHNCYXNlSW5pdGVkID0gZmFsc2VcbiAgfVxuXG4gIHJlc2V0ICgpIHtcbiAgICB0aGlzLl9kdHNCYXNlID0gMFxuICAgIHRoaXMuX2lzRHRzQmFzZUluaXRlZCA9IGZhbHNlXG4gIH1cblxuICByZW11eCAoKSB7XG4gICAgY29uc3QgeyBhdWRpb1RyYWNrLCB2aWRlb1RyYWNrIH0gPSB0aGlzLl9jb250ZXh0LmdldEluc3RhbmNlKCdUUkFDS1MnKVxuICAgICF0aGlzLl9pc0R0c0Jhc2VJbml0ZWQgJiYgdGhpcy5jYWxjRHRzQmFzZShhdWRpb1RyYWNrLCB2aWRlb1RyYWNrKVxuXG4gICAgdGhpcy5fcmVtdXhWaWRlbyh2aWRlb1RyYWNrKVxuICAgIHRoaXMuX3JlbXV4QXVkaW8oYXVkaW9UcmFjaylcbiAgfVxuXG4gIHNlZWsgKCkge1xuXG4gIH1cblxuICBvbk1ldGFEYXRhUmVhZHkgKHR5cGUpIHtcbiAgICBsZXQgaW5pdFNlZ21lbnQgPSBuZXcgQnVmZmVyKClcbiAgICBsZXQgZnR5cCA9IEZtcDQuZnR5cCgpXG4gICAgbGV0IG1vb3ZcbiAgICBsZXQgdHJhY2tcblxuICAgIGlmICh0eXBlID09PSAnYXVkaW8nKSB7XG4gICAgICBjb25zdCB7IGF1ZGlvVHJhY2sgfSA9IHRoaXMuX2NvbnRleHQuZ2V0SW5zdGFuY2UoJ1RSQUNLUycpXG4gICAgICB0cmFjayA9IGF1ZGlvVHJhY2s7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IHsgdmlkZW9UcmFjayB9ID0gdGhpcy5fY29udGV4dC5nZXRJbnN0YW5jZSgnVFJBQ0tTJylcbiAgICAgIHRyYWNrID0gdmlkZW9UcmFjaztcbiAgICB9XG5cbiAgICBtb292ID0gRm1wNC5tb292KHsgdHlwZSwgbWV0YTogdHJhY2subWV0YSB9KVxuXG4gICAgaW5pdFNlZ21lbnQud3JpdGUoZnR5cCwgbW9vdilcblxuICAgIGxldCBwcmVzb3VyY2VidWZmZXIgPSB0aGlzLl9jb250ZXh0LmdldEluc3RhbmNlKCdQUkVfU09VUkNFX0JVRkZFUicpO1xuICAgIGxldCBzb3VyY2UgPSBwcmVzb3VyY2VidWZmZXIuZ2V0U291cmNlKHR5cGUpO1xuICAgIGlmICghc291cmNlKSB7XG4gICAgICBzb3VyY2UgPSBwcmVzb3VyY2VidWZmZXIuY3JlYXRlU291cmNlKHR5cGUpO1xuICAgIH1cblxuICAgIHNvdXJjZS5taW1ldHlwZSA9IHRyYWNrLm1ldGEuY29kZWM7XG4gICAgc291cmNlLmluaXQgPSBpbml0U2VnbWVudDtcbiAgICB0aGlzLmVtaXQoUkVNVVhfRVZFTlRTLklOSVRfU0VHTUVOVCwgdHlwZSlcbiAgfVxuXG4gIGNhbGNEdHNCYXNlIChhdWRpb1RyYWNrLCB2aWRlb1RyYWNrKSB7XG4gICAgaWYgKCFhdWRpb1RyYWNrLnNhbXBsZXMubGVuZ3RoICYmICF2aWRlb1RyYWNrLnNhbXBsZXMubGVuZ3RoKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgbGV0IGF1ZGlvQmFzZSA9IEluZmluaXR5XG4gICAgbGV0IHZpZGVvQmFzZSA9IEluZmluaXR5XG5cbiAgICBpZiAoYXVkaW9UcmFjay5zYW1wbGVzICYmIGF1ZGlvVHJhY2suc2FtcGxlcy5sZW5ndGgpIHtcbiAgICAgIGF1ZGlvQmFzZSA9IGF1ZGlvVHJhY2suc2FtcGxlc1swXS5kdHNcbiAgICB9XG4gICAgaWYgKHZpZGVvVHJhY2suc2FtcGxlcyAmJiB2aWRlb1RyYWNrLnNhbXBsZXMubGVuZ3RoKSB7XG4gICAgICB2aWRlb0Jhc2UgPSB2aWRlb1RyYWNrLnNhbXBsZXNbMF0uZHRzXG4gICAgfVxuXG4gICAgdGhpcy5fZHRzQmFzZSA9IE1hdGgubWluKGF1ZGlvQmFzZSwgdmlkZW9CYXNlKVxuICAgIHRoaXMuX2lzRHRzQmFzZUluaXRlZCA9IHRydWVcbiAgfVxuXG4gIF9yZW11eFZpZGVvICh2aWRlb1RyYWNrKSB7XG4gICAgY29uc3QgdHJhY2sgPSB2aWRlb1RyYWNrXG5cbiAgICBpZiAoIXZpZGVvVHJhY2suc2FtcGxlcyB8fCAhdmlkZW9UcmFjay5zYW1wbGVzLmxlbmd0aCkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgbGV0IHtzYW1wbGVzfSA9IHRyYWNrXG4gICAgbGV0IGZpcnN0RHRzID0gLTFcblxuICAgIGNvbnN0IG1wNFNhbXBsZXMgPSBbXVxuICAgIGNvbnN0IG1kYXRCb3ggPSB7XG4gICAgICBzYW1wbGVzOiBbXVxuICAgIH1cblxuICAgIHdoaWxlIChzYW1wbGVzLmxlbmd0aCkge1xuICAgICAgY29uc3QgYXZjU2FtcGxlID0gc2FtcGxlcy5zaGlmdCgpXG4gICAgICBjb25zdCB7IGlzS2V5ZnJhbWUgfSA9IGF2Y1NhbXBsZVxuICAgICAgbGV0IGR0cyA9IGF2Y1NhbXBsZS5kdHMgLSB0aGlzLl9kdHNCYXNlXG5cbiAgICAgIGlmIChmaXJzdER0cyA9PT0gLTEpIHtcbiAgICAgICAgZmlyc3REdHMgPSBkdHNcbiAgICAgIH1cblxuICAgICAgbGV0IGN0c1xuICAgICAgbGV0IHB0c1xuICAgICAgaWYgKGF2Y1NhbXBsZS5wdHMpIHtcbiAgICAgICAgcHRzID0gYXZjU2FtcGxlLnB0cyAtIHRoaXMuX2R0c0Jhc2VcbiAgICAgICAgY3RzID0gcHRzIC0gZHRzXG4gICAgICB9XG4gICAgICBpZiAoYXZjU2FtcGxlLmN0cykge1xuICAgICAgICBwdHMgPSBhdmNTYW1wbGUuY3RzICsgZHRzXG4gICAgICAgIGN0cyA9IGF2Y1NhbXBsZS5jdHNcbiAgICAgIH1cblxuICAgICAgbGV0IG1kYXRTYW1wbGUgPSB7XG4gICAgICAgIGJ1ZmZlcjogW10sXG4gICAgICAgIHNpemU6IDBcbiAgICAgIH1cbiAgICAgIG1kYXRCb3guc2FtcGxlcy5wdXNoKG1kYXRTYW1wbGUpXG4gICAgICBtZGF0U2FtcGxlLmJ1ZmZlci5wdXNoKGF2Y1NhbXBsZS5kYXRhKVxuICAgICAgbWRhdFNhbXBsZS5zaXplICs9IGF2Y1NhbXBsZS5kYXRhLmJ5dGVMZW5ndGhcblxuICAgICAgbGV0IHNhbXBsZUR1cmF0aW9uID0gMFxuICAgICAgaWYgKHNhbXBsZXMubGVuZ3RoID49IDEpIHtcbiAgICAgICAgY29uc3QgbmV4dER0cyA9IHNhbXBsZXNbMF0uZHRzIC0gdGhpcy5fZHRzQmFzZVxuICAgICAgICBzYW1wbGVEdXJhdGlvbiA9IG5leHREdHMgLSBkdHNcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChtcDRTYW1wbGVzLmxlbmd0aCA+PSAxKSB7IC8vIGxhc3Rlc3Qgc2FtcGxlLCB1c2Ugc2Vjb25kIGxhc3QgZHVyYXRpb25cbiAgICAgICAgICBzYW1wbGVEdXJhdGlvbiA9IG1wNFNhbXBsZXNbbXA0U2FtcGxlcy5sZW5ndGggLSAxXS5kdXJhdGlvblxuICAgICAgICB9IGVsc2UgeyAvLyB0aGUgb25seSBvbmUgc2FtcGxlLCB1c2UgcmVmZXJlbmNlIGR1cmF0aW9uXG4gICAgICAgICAgc2FtcGxlRHVyYXRpb24gPSB0aGlzLnZpZGVvTWV0YS5yZWZTYW1wbGVEdXJhdGlvblxuICAgICAgICB9XG4gICAgICB9XG4gICAgICB0aGlzLnZpZGVvQWxsRHVyYXRpb24gKz0gc2FtcGxlRHVyYXRpb25cbiAgICAgIG1wNFNhbXBsZXMucHVzaCh7XG4gICAgICAgIGR0cyxcbiAgICAgICAgY3RzLFxuICAgICAgICBwdHMsXG4gICAgICAgIGRhdGE6IGF2Y1NhbXBsZS5kYXRhLFxuICAgICAgICBzaXplOiBhdmNTYW1wbGUuZGF0YS5ieXRlTGVuZ3RoLFxuICAgICAgICBpc0tleWZyYW1lLFxuICAgICAgICBkdXJhdGlvbjogc2FtcGxlRHVyYXRpb24sXG4gICAgICAgIGZsYWdzOiB7XG4gICAgICAgICAgaXNMZWFkaW5nOiAwLFxuICAgICAgICAgIGRlcGVuZHNPbjogaXNLZXlmcmFtZSA/IDIgOiAxLFxuICAgICAgICAgIGlzRGVwZW5kZWRPbjogaXNLZXlmcmFtZSA/IDEgOiAwLFxuICAgICAgICAgIGhhc1JlZHVuZGFuY3k6IDAsXG4gICAgICAgICAgaXNOb25TeW5jOiBpc0tleWZyYW1lID8gMCA6IDFcbiAgICAgICAgfSxcbiAgICAgICAgb3JpZ2luRHRzOiBkdHMsXG4gICAgICAgIHR5cGU6ICd2aWRlbydcbiAgICAgIH0pXG4gICAgfVxuXG4gICAgbGV0IG1vb2ZNZGF0ID0gbmV3IEJ1ZmZlcigpXG5cbiAgICBjb25zdCBtb29mID0gRm1wNC5tb29mKHtcbiAgICAgIGlkOiB0cmFjay5tZXRhLmlkLFxuICAgICAgdGltZTogZmlyc3REdHMsXG4gICAgICBzYW1wbGVzOiBtcDRTYW1wbGVzXG4gICAgfSlcbiAgICBjb25zdCBtZGF0ID0gRm1wNC5tZGF0KG1kYXRCb3gpXG4gICAgbW9vZk1kYXQud3JpdGUobW9vZiwgbWRhdClcblxuICAgIHRyYWNrLnNhbXBsZXMgPSBbXVxuICAgIHRyYWNrLmxlbmd0aCA9IDBcblxuICAgIGxldCBwcmVzb3VyY2VidWZmZXIgPSB0aGlzLl9jb250ZXh0LmdldEluc3RhbmNlKCdQUkVfU09VUkNFX0JVRkZFUicpO1xuICAgIGxldCBzb3VyY2UgPSBwcmVzb3VyY2VidWZmZXIuZ2V0U291cmNlKCd2aWRlbycpO1xuICAgIGlmICghc291cmNlKSB7XG4gICAgICBzb3VyY2UgPSBwcmVzb3VyY2VidWZmZXIuY3JlYXRlU291cmNlKCd2aWRlbycpO1xuICAgIH1cblxuICAgIHNvdXJjZS5kYXRhLnB1c2gobW9vZk1kYXQpO1xuXG4gICAgdGhpcy5lbWl0KFJFTVVYX0VWRU5UUy5NRURJQV9TRUdNRU5ULCAndmlkZW8nKVxuICB9XG5cbiAgX3JlbXV4QXVkaW8gKHRyYWNrKSB7XG4gICAgY29uc3Qge3NhbXBsZXN9ID0gdHJhY2tcbiAgICBsZXQgZmlyc3REdHMgPSAtMVxuICAgIGxldCBtcDRTYW1wbGVzID0gW11cblxuICAgIGNvbnN0IG1kYXRCb3ggPSB7XG4gICAgICBzYW1wbGVzOiBbXVxuICAgIH1cbiAgICBpZiAoIXNhbXBsZXMgfHwgIXNhbXBsZXMubGVuZ3RoKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgbGV0IGlzRmlyc3REdHNJbml0ZWQgPSBmYWxzZVxuICAgIHdoaWxlIChzYW1wbGVzLmxlbmd0aCkge1xuICAgICAgbGV0IHNhbXBsZSA9IHNhbXBsZXMuc2hpZnQoKVxuICAgICAgY29uc3QgeyBkYXRhIH0gPSBzYW1wbGVcbiAgICAgIGxldCBkdHMgPSBzYW1wbGUuZHRzIC0gdGhpcy5fZHRzQmFzZVxuICAgICAgY29uc3Qgb3JpZ2luRHRzID0gZHRzXG4gICAgICBpZiAoIWlzRmlyc3REdHNJbml0ZWQpIHtcbiAgICAgICAgZmlyc3REdHMgPSBkdHNcbiAgICAgICAgaXNGaXJzdER0c0luaXRlZCA9IHRydWVcbiAgICAgIH1cblxuICAgICAgbGV0IHNhbXBsZUR1cmF0aW9uID0gMFxuXG4gICAgICBpZiAodGhpcy5hdWRpb01ldGEucmVmU2FtcGxlRHVyYXRpb25GaXhlZCkge1xuICAgICAgICBzYW1wbGVEdXJhdGlvbiA9IHRoaXMuYXVkaW9NZXRhLnJlZlNhbXBsZUR1cmF0aW9uRml4ZWRcbiAgICAgIH0gZWxzZSBpZiAoc2FtcGxlcy5sZW5ndGggPj0gMSkge1xuICAgICAgICBjb25zdCBuZXh0RHRzID0gc2FtcGxlc1swXS5kdHMgLSB0aGlzLl9kdHNCYXNlO1xuICAgICAgICBzYW1wbGVEdXJhdGlvbiA9IG5leHREdHMgLSBkdHNcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChtcDRTYW1wbGVzLmxlbmd0aCA+PSAxKSB7IC8vIHVzZSBzZWNvbmQgbGFzdCBzYW1wbGUgZHVyYXRpb25cbiAgICAgICAgICBzYW1wbGVEdXJhdGlvbiA9IG1wNFNhbXBsZXNbbXA0U2FtcGxlcy5sZW5ndGggLSAxXS5kdXJhdGlvblxuICAgICAgICB9IGVsc2UgeyAvLyB0aGUgb25seSBvbmUgc2FtcGxlLCB1c2UgcmVmZXJlbmNlIHNhbXBsZSBkdXJhdGlvblxuICAgICAgICAgIHNhbXBsZUR1cmF0aW9uID0gdGhpcy5hdWRpb01ldGEucmVmU2FtcGxlRHVyYXRpb25cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBjb25zb2xlLmxvZygncmVtdXggYXVkaW8gJywgZHRzKVxuICAgICAgdGhpcy5hdWRpb0FsbER1cmF0aW9uICs9IHNhbXBsZUR1cmF0aW9uXG4gICAgICBjb25zdCBtcDRTYW1wbGUgPSB7XG4gICAgICAgIGR0cyxcbiAgICAgICAgcHRzOiBkdHMsXG4gICAgICAgIGN0czogMCxcbiAgICAgICAgc2l6ZTogZGF0YS5ieXRlTGVuZ3RoLFxuICAgICAgICBkdXJhdGlvbjogc2FtcGxlLmR1cmF0aW9uID8gc2FtcGxlLmR1cmF0aW9uIDogc2FtcGxlRHVyYXRpb24sXG4gICAgICAgIGZsYWdzOiB7XG4gICAgICAgICAgaXNMZWFkaW5nOiAwLFxuICAgICAgICAgIGRlcGVuZHNPbjogMixcbiAgICAgICAgICBpc0RlcGVuZGVkT246IDEsXG4gICAgICAgICAgaGFzUmVkdW5kYW5jeTogMCxcbiAgICAgICAgICBpc05vblN5bmM6IDBcbiAgICAgICAgfSxcbiAgICAgICAgaXNLZXlmcmFtZTogdHJ1ZSxcbiAgICAgICAgb3JpZ2luRHRzLFxuICAgICAgICB0eXBlOiAnYXVkaW8nXG4gICAgICB9XG5cbiAgICAgIGxldCBtZGF0U2FtcGxlID0ge1xuICAgICAgICBidWZmZXI6IFtdLFxuICAgICAgICBzaXplOiAwXG4gICAgICB9XG4gICAgICBtZGF0U2FtcGxlLmJ1ZmZlci5wdXNoKGRhdGEpXG4gICAgICBtZGF0U2FtcGxlLnNpemUgKz0gZGF0YS5ieXRlTGVuZ3RoXG5cbiAgICAgIG1kYXRCb3guc2FtcGxlcy5wdXNoKG1kYXRTYW1wbGUpXG5cbiAgICAgIG1wNFNhbXBsZXMucHVzaChtcDRTYW1wbGUpXG4gICAgfVxuXG4gICAgY29uc3QgbW9vZk1kYXQgPSBuZXcgQnVmZmVyKClcbiAgICBjb25zdCBtb29mID0gRm1wNC5tb29mKHtcbiAgICAgIGlkOiB0cmFjay5tZXRhLmlkLFxuICAgICAgdGltZTogZmlyc3REdHMsXG4gICAgICBzYW1wbGVzOiBtcDRTYW1wbGVzXG4gICAgfSlcbiAgICBjb25zdCBtZGF0ID0gRm1wNC5tZGF0KG1kYXRCb3gpXG4gICAgbW9vZk1kYXQud3JpdGUobW9vZiwgbWRhdClcblxuICAgIHRyYWNrLnNhbXBsZXMgPSBbXVxuICAgIHRyYWNrLmxlbmd0aCA9IDBcblxuICAgIGxldCBwcmVzb3VyY2VidWZmZXIgPSB0aGlzLl9jb250ZXh0LmdldEluc3RhbmNlKCdQUkVfU09VUkNFX0JVRkZFUicpO1xuICAgIGxldCBzb3VyY2UgPSBwcmVzb3VyY2VidWZmZXIuZ2V0U291cmNlKCdhdWRpbycpO1xuICAgIGlmICghc291cmNlKSB7XG4gICAgICBzb3VyY2UgPSBwcmVzb3VyY2VidWZmZXIuY3JlYXRlU291cmNlKCdhdWRpbycpO1xuICAgIH1cbiAgICBzb3VyY2UuZGF0YS5wdXNoKG1vb2ZNZGF0KTtcbiAgICB0aGlzLmVtaXQoUkVNVVhfRVZFTlRTLk1FRElBX1NFR01FTlQsICdhdWRpbycsIG1vb2ZNZGF0KVxuICB9XG5cbiAgaW5pdFNpbGVudEF1ZGlvIChkdHMsIGR1cmF0aW9uKSB7XG4gICAgY29uc3QgdW5pdCA9IE1wNFJlbXV4ZXIuZ2V0U2lsZW50RnJhbWUodGhpcy5hdWRpb01ldGEuY2hhbm5lbENvdW50KVxuICAgIHJldHVybiB7XG4gICAgICBkdHMsXG4gICAgICBwdHM6IGR0cyxcbiAgICAgIGN0czogMCxcbiAgICAgIGR1cmF0aW9uLFxuICAgICAgdW5pdCxcbiAgICAgIHNpemU6IHVuaXQuYnl0ZUxlbmd0aCxcbiAgICAgIG9yaWdpbkR0czogZHRzLFxuICAgICAgdHlwZTogJ3ZpZGVvJ1xuICAgIH1cbiAgfVxuXG4gIGdldCB2aWRlb01ldGEgKCkge1xuICAgIHJldHVybiB0aGlzLl9jb250ZXh0LmdldEluc3RhbmNlKCdUUkFDS1MnKS52aWRlb1RyYWNrLm1ldGFcbiAgfVxuICBnZXQgYXVkaW9NZXRhICgpIHtcbiAgICByZXR1cm4gdGhpcy5fY29udGV4dC5nZXRJbnN0YW5jZSgnVFJBQ0tTJykuYXVkaW9UcmFjay5tZXRhXG4gIH1cblxuICBzdGF0aWMgZ2V0U2lsZW50RnJhbWUgKGNoYW5uZWxDb3VudCkge1xuICAgIGlmIChjaGFubmVsQ291bnQgPT09IDEpIHtcbiAgICAgIHJldHVybiBuZXcgVWludDhBcnJheShbMHgwMCwgMHhjOCwgMHgwMCwgMHg4MCwgMHgyMywgMHg4MF0pXG4gICAgfSBlbHNlIGlmIChjaGFubmVsQ291bnQgPT09IDIpIHtcbiAgICAgIHJldHVybiBuZXcgVWludDhBcnJheShbMHgyMSwgMHgwMCwgMHg0OSwgMHg5MCwgMHgwMiwgMHgxOSwgMHgwMCwgMHgyMywgMHg4MF0pXG4gICAgfSBlbHNlIGlmIChjaGFubmVsQ291bnQgPT09IDMpIHtcbiAgICAgIHJldHVybiBuZXcgVWludDhBcnJheShbMHgwMCwgMHhjOCwgMHgwMCwgMHg4MCwgMHgyMCwgMHg4NCwgMHgwMSwgMHgyNiwgMHg0MCwgMHgwOCwgMHg2NCwgMHgwMCwgMHg4ZV0pXG4gICAgfSBlbHNlIGlmIChjaGFubmVsQ291bnQgPT09IDQpIHtcbiAgICAgIHJldHVybiBuZXcgVWludDhBcnJheShbMHgwMCwgMHhjOCwgMHgwMCwgMHg4MCwgMHgyMCwgMHg4NCwgMHgwMSwgMHgyNiwgMHg0MCwgMHgwOCwgMHg2NCwgMHgwMCwgMHg4MCwgMHgyYywgMHg4MCwgMHgwOCwgMHgwMiwgMHgzOF0pXG4gICAgfSBlbHNlIGlmIChjaGFubmVsQ291bnQgPT09IDUpIHtcbiAgICAgIHJldHVybiBuZXcgVWludDhBcnJheShbMHgwMCwgMHhjOCwgMHgwMCwgMHg4MCwgMHgyMCwgMHg4NCwgMHgwMSwgMHgyNiwgMHg0MCwgMHgwOCwgMHg2NCwgMHgwMCwgMHg4MiwgMHgzMCwgMHgwNCwgMHg5OSwgMHgwMCwgMHgyMSwgMHg5MCwgMHgwMiwgMHgzOF0pXG4gICAgfSBlbHNlIGlmIChjaGFubmVsQ291bnQgPT09IDYpIHtcbiAgICAgIHJldHVybiBuZXcgVWludDhBcnJheShbMHgwMCwgMHhjOCwgMHgwMCwgMHg4MCwgMHgyMCwgMHg4NCwgMHgwMSwgMHgyNiwgMHg0MCwgMHgwOCwgMHg2NCwgMHgwMCwgMHg4MiwgMHgzMCwgMHgwNCwgMHg5OSwgMHgwMCwgMHgyMSwgMHg5MCwgMHgwMiwgMHgwMCwgMHhiMiwgMHgwMCwgMHgyMCwgMHgwOCwgMHhlMF0pXG4gICAgfVxuICAgIHJldHVybiBudWxsXG4gIH1cbn1cbiIsIm1vZHVsZS5leHBvcnRzID0ge1xuICBDb250ZXh0OiByZXF1aXJlKCcuL3NyYy9jb250ZXh0JykuZGVmYXVsdCxcblxuICAvLyBNb2R1bGVzIGZyb20gY29uc3RhbnRzXG4gIEVWRU5UUzogcmVxdWlyZSgnLi9zcmMvY29uc3RhbnRzL2V2ZW50cycpLmRlZmF1bHQsXG4gIFdPUktFUl9DT01NQU5EUzogcmVxdWlyZSgnLi9zcmMvY29uc3RhbnRzL3dvcmtlci1jb21tYW5kcycpLmRlZmF1bHQsXG5cbiAgLy8gTW9kdWxlcyBmcm9tIGVudlxuICBzbmlmZmVyOiByZXF1aXJlKCcuL3NyYy9lbnYvc25pZmZlcicpLmRlZmF1bHQsXG4gIGlzTGU6IHJlcXVpcmUoJy4vc3JjL2Vudi9pc2xlJykuZGVmYXVsdCxcbiAgVVRGODogcmVxdWlyZSgnLi9zcmMvZW52L3V0ZjgnKS5kZWZhdWx0LFxuXG4gIC8vIE1vZGVsc1xuICBNZWRpYUluZm86IHJlcXVpcmUoJy4vc3JjL21vZGVscy9tZWRpYS1pbmZvJykuZGVmYXVsdCxcbiAgTWVkaWFTYW1wbGU6IHJlcXVpcmUoJy4vc3JjL21vZGVscy9tZWRpYS1zYW1wbGUnKS5kZWZhdWx0LFxuICBNZWRpYVNlZ21lbnQ6IHJlcXVpcmUoJy4vc3JjL21vZGVscy9tZWRpYS1zZWdtZW50JykuZGVmYXVsdCxcbiAgTWVkaWFTZWdtZW50TGlzdDogcmVxdWlyZSgnLi9zcmMvbW9kZWxzL21lZGlhLXNlZ21lbnQtbGlzdCcpLmRlZmF1bHQsXG4gIEF1ZGlvVHJhY2tNZXRhOiByZXF1aXJlKCcuL3NyYy9tb2RlbHMvdHJhY2stbWV0YScpLkF1ZGlvVHJhY2tNZXRhLFxuICBWaWRlb1RyYWNrTWV0YTogcmVxdWlyZSgnLi9zcmMvbW9kZWxzL3RyYWNrLW1ldGEnKS5WaWRlb1RyYWNrTWV0YSxcbiAgQXVkaW9UcmFja1NhbXBsZTogcmVxdWlyZSgnLi9zcmMvbW9kZWxzL3RyYWNrLXNhbXBsZScpLkF1ZGlvVHJhY2tTYW1wbGUsXG4gIFZpZGVvVHJhY2tTYW1wbGU6IHJlcXVpcmUoJy4vc3JjL21vZGVscy90cmFjay1zYW1wbGUnKS5WaWRlb1RyYWNrU2FtcGxlLFxuXG4gIC8vIE1vZHVsZXMgZnJvbSBtc2VcbiAgTXNlOiByZXF1aXJlKCcuL3NyYy9tc2UvaW5kZXgnKS5kZWZhdWx0LFxuXG4gIC8vIE1vZHVsZXMgZnJvbSB3cml0ZVxuICBTdHJlYW06IHJlcXVpcmUoJy4vc3JjL3dyaXRlL3N0cmVhbScpLmRlZmF1bHQsXG4gIEJ1ZmZlcjogcmVxdWlyZSgnLi9zcmMvd3JpdGUvYnVmZmVyJykuZGVmYXVsdCxcblxuICBNb2JpbGVWaWRlbzogcmVxdWlyZSgnLi9zcmMvbW9iaWxlL21vYmlsZS12aWRlbycpXG59O1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbmV4cG9ydHMuZGVmYXVsdCA9IGZ1bmN0aW9uIChSZXN1bHRDb25zdHJ1Y3Rvcikge1xuICB2YXIgdG90YWxMZW5ndGggPSAwO1xuXG4gIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcnJheXMgPSBBcnJheShfbGVuID4gMSA/IF9sZW4gLSAxIDogMCksIF9rZXkgPSAxOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG4gICAgYXJyYXlzW19rZXkgLSAxXSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgfVxuXG4gIHZhciBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uID0gdHJ1ZTtcbiAgdmFyIF9kaWRJdGVyYXRvckVycm9yID0gZmFsc2U7XG4gIHZhciBfaXRlcmF0b3JFcnJvciA9IHVuZGVmaW5lZDtcblxuICB0cnkge1xuICAgIGZvciAodmFyIF9pdGVyYXRvciA9IGFycmF5c1tTeW1ib2wuaXRlcmF0b3JdKCksIF9zdGVwOyAhKF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24gPSAoX3N0ZXAgPSBfaXRlcmF0b3IubmV4dCgpKS5kb25lKTsgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiA9IHRydWUpIHtcbiAgICAgIHZhciBhcnIgPSBfc3RlcC52YWx1ZTtcblxuICAgICAgdG90YWxMZW5ndGggKz0gYXJyLmxlbmd0aDtcbiAgICB9XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIF9kaWRJdGVyYXRvckVycm9yID0gdHJ1ZTtcbiAgICBfaXRlcmF0b3JFcnJvciA9IGVycjtcbiAgfSBmaW5hbGx5IHtcbiAgICB0cnkge1xuICAgICAgaWYgKCFfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uICYmIF9pdGVyYXRvci5yZXR1cm4pIHtcbiAgICAgICAgX2l0ZXJhdG9yLnJldHVybigpO1xuICAgICAgfVxuICAgIH0gZmluYWxseSB7XG4gICAgICBpZiAoX2RpZEl0ZXJhdG9yRXJyb3IpIHtcbiAgICAgICAgdGhyb3cgX2l0ZXJhdG9yRXJyb3I7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgdmFyIHJlc3VsdCA9IG5ldyBSZXN1bHRDb25zdHJ1Y3Rvcih0b3RhbExlbmd0aCk7XG4gIHZhciBvZmZzZXQgPSAwO1xuICB2YXIgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjIgPSB0cnVlO1xuICB2YXIgX2RpZEl0ZXJhdG9yRXJyb3IyID0gZmFsc2U7XG4gIHZhciBfaXRlcmF0b3JFcnJvcjIgPSB1bmRlZmluZWQ7XG5cbiAgdHJ5IHtcbiAgICBmb3IgKHZhciBfaXRlcmF0b3IyID0gYXJyYXlzW1N5bWJvbC5pdGVyYXRvcl0oKSwgX3N0ZXAyOyAhKF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24yID0gKF9zdGVwMiA9IF9pdGVyYXRvcjIubmV4dCgpKS5kb25lKTsgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjIgPSB0cnVlKSB7XG4gICAgICB2YXIgX2FyciA9IF9zdGVwMi52YWx1ZTtcblxuICAgICAgcmVzdWx0LnNldChfYXJyLCBvZmZzZXQpO1xuICAgICAgb2Zmc2V0ICs9IF9hcnIubGVuZ3RoO1xuICAgIH1cbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgX2RpZEl0ZXJhdG9yRXJyb3IyID0gdHJ1ZTtcbiAgICBfaXRlcmF0b3JFcnJvcjIgPSBlcnI7XG4gIH0gZmluYWxseSB7XG4gICAgdHJ5IHtcbiAgICAgIGlmICghX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjIgJiYgX2l0ZXJhdG9yMi5yZXR1cm4pIHtcbiAgICAgICAgX2l0ZXJhdG9yMi5yZXR1cm4oKTtcbiAgICAgIH1cbiAgICB9IGZpbmFsbHkge1xuICAgICAgaWYgKF9kaWRJdGVyYXRvckVycm9yMikge1xuICAgICAgICB0aHJvdyBfaXRlcmF0b3JFcnJvcjI7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHJlc3VsdDtcbn07IiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgX2NvbmNhdCA9IHJlcXVpcmUoJy4vY29uY2F0Jyk7XG5cbnZhciBfY29uY2F0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NvbmNhdCk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbm1vZHVsZS5leHBvcnRzID0gX2NvbmNhdDIuZGVmYXVsdDsiLCJmdW5jdGlvbiB3ZWJwYWNrQm9vdHN0cmFwRnVuYyAobW9kdWxlcykge1xuLyoqKioqKi8gIC8vIFRoZSBtb2R1bGUgY2FjaGVcbi8qKioqKiovICB2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4vKioqKioqLyAgLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbi8qKioqKiovICBmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbi8qKioqKiovICAgIC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuLyoqKioqKi8gICAgaWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pXG4vKioqKioqLyAgICAgIHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuXG4vKioqKioqLyAgICAvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuLyoqKioqKi8gICAgdmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuLyoqKioqKi8gICAgICBpOiBtb2R1bGVJZCxcbi8qKioqKiovICAgICAgbDogZmFsc2UsXG4vKioqKioqLyAgICAgIGV4cG9ydHM6IHt9XG4vKioqKioqLyAgICB9O1xuXG4vKioqKioqLyAgICAvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbi8qKioqKiovICAgIG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4vKioqKioqLyAgICAvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4vKioqKioqLyAgICBtb2R1bGUubCA9IHRydWU7XG5cbi8qKioqKiovICAgIC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4vKioqKioqLyAgICByZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4vKioqKioqLyAgfVxuXG4vKioqKioqLyAgLy8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbi8qKioqKiovICBfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4vKioqKioqLyAgLy8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbi8qKioqKiovICBfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4vKioqKioqLyAgLy8gaWRlbnRpdHkgZnVuY3Rpb24gZm9yIGNhbGxpbmcgaGFybW9ueSBpbXBvcnRzIHdpdGggdGhlIGNvcnJlY3QgY29udGV4dFxuLyoqKioqKi8gIF9fd2VicGFja19yZXF1aXJlX18uaSA9IGZ1bmN0aW9uKHZhbHVlKSB7IHJldHVybiB2YWx1ZTsgfTtcblxuLyoqKioqKi8gIC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuLyoqKioqKi8gIF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuLyoqKioqKi8gICAgaWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuLyoqKioqKi8gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwge1xuLyoqKioqKi8gICAgICAgIGNvbmZpZ3VyYWJsZTogZmFsc2UsXG4vKioqKioqLyAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbi8qKioqKiovICAgICAgICBnZXQ6IGdldHRlclxuLyoqKioqKi8gICAgICB9KTtcbi8qKioqKiovICAgIH1cbi8qKioqKiovICB9O1xuXG4vKioqKioqLyAgLy8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuLyoqKioqKi8gIF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbi8qKioqKiovICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4vKioqKioqLyAgfTtcblxuLyoqKioqKi8gIC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4vKioqKioqLyAgX193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4vKioqKioqLyAgICB2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbi8qKioqKiovICAgICAgZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbi8qKioqKiovICAgICAgZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbi8qKioqKiovICAgIF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbi8qKioqKiovICAgIHJldHVybiBnZXR0ZXI7XG4vKioqKioqLyAgfTtcblxuLyoqKioqKi8gIC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuLyoqKioqKi8gIF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuLyoqKioqKi8gIC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4vKioqKioqLyAgX193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCIvXCI7XG5cbi8qKioqKiovICAvLyBvbiBlcnJvciBmdW5jdGlvbiBmb3IgYXN5bmMgbG9hZGluZ1xuLyoqKioqKi8gIF9fd2VicGFja19yZXF1aXJlX18ub2UgPSBmdW5jdGlvbihlcnIpIHsgY29uc29sZS5lcnJvcihlcnIpOyB0aHJvdyBlcnI7IH07XG5cbiAgdmFyIGYgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IEVOVFJZX01PRFVMRSlcbiAgcmV0dXJuIGYuZGVmYXVsdCB8fCBmIC8vIHRyeSB0byBjYWxsIGRlZmF1bHQgaWYgZGVmaW5lZCB0byBhbHNvIHN1cHBvcnQgYmFiZWwgZXNtb2R1bGUgZXhwb3J0c1xufVxuXG52YXIgbW9kdWxlTmFtZVJlcUV4cCA9ICdbXFxcXC58XFxcXC18XFxcXCt8XFxcXHd8XFwvfEBdKydcbnZhciBkZXBlbmRlbmN5UmVnRXhwID0gJ1xcXFwoXFxcXHMqKFxcL1xcXFwqLio/XFxcXCpcXC8pP1xcXFxzKi4qPygnICsgbW9kdWxlTmFtZVJlcUV4cCArICcpLio/XFxcXCknIC8vIGFkZGl0aW9uYWwgY2hhcnMgd2hlbiBvdXRwdXQucGF0aGluZm8gaXMgdHJ1ZVxuXG4vLyBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8yNTkzNjYxLzEzMDQ0MlxuZnVuY3Rpb24gcXVvdGVSZWdFeHAgKHN0cikge1xuICByZXR1cm4gKHN0ciArICcnKS5yZXBsYWNlKC9bLj8qK14kW1xcXVxcXFwoKXt9fC1dL2csICdcXFxcJCYnKVxufVxuXG5mdW5jdGlvbiBpc051bWVyaWMobikge1xuICByZXR1cm4gIWlzTmFOKDEgKiBuKTsgLy8gMSAqIG4gY29udmVydHMgaW50ZWdlcnMsIGludGVnZXJzIGFzIHN0cmluZyAoXCIxMjNcIiksIDFlMyBhbmQgXCIxZTNcIiB0byBpbnRlZ2VycyBhbmQgc3RyaW5ncyB0byBOYU5cbn1cblxuZnVuY3Rpb24gZ2V0TW9kdWxlRGVwZW5kZW5jaWVzIChzb3VyY2VzLCBtb2R1bGUsIHF1ZXVlTmFtZSkge1xuICB2YXIgcmV0dmFsID0ge31cbiAgcmV0dmFsW3F1ZXVlTmFtZV0gPSBbXVxuXG4gIHZhciBmblN0cmluZyA9IG1vZHVsZS50b1N0cmluZygpXG4gIHZhciB3cmFwcGVyU2lnbmF0dXJlID0gZm5TdHJpbmcubWF0Y2goL15mdW5jdGlvblxccz9cXHcqXFwoXFx3KyxcXHMqXFx3KyxcXHMqKFxcdyspXFwpLylcbiAgaWYgKCF3cmFwcGVyU2lnbmF0dXJlKSByZXR1cm4gcmV0dmFsXG4gIHZhciB3ZWJwYWNrUmVxdWlyZU5hbWUgPSB3cmFwcGVyU2lnbmF0dXJlWzFdXG5cbiAgLy8gbWFpbiBidW5kbGUgZGVwc1xuICB2YXIgcmUgPSBuZXcgUmVnRXhwKCcoXFxcXFxcXFxufFxcXFxXKScgKyBxdW90ZVJlZ0V4cCh3ZWJwYWNrUmVxdWlyZU5hbWUpICsgZGVwZW5kZW5jeVJlZ0V4cCwgJ2cnKVxuICB2YXIgbWF0Y2hcbiAgd2hpbGUgKChtYXRjaCA9IHJlLmV4ZWMoZm5TdHJpbmcpKSkge1xuICAgIGlmIChtYXRjaFszXSA9PT0gJ2RsbC1yZWZlcmVuY2UnKSBjb250aW51ZVxuICAgIHJldHZhbFtxdWV1ZU5hbWVdLnB1c2gobWF0Y2hbM10pXG4gIH1cblxuICAvLyBkbGwgZGVwc1xuICByZSA9IG5ldyBSZWdFeHAoJ1xcXFwoJyArIHF1b3RlUmVnRXhwKHdlYnBhY2tSZXF1aXJlTmFtZSkgKyAnXFxcXChcIihkbGwtcmVmZXJlbmNlXFxcXHMoJyArIG1vZHVsZU5hbWVSZXFFeHAgKyAnKSlcIlxcXFwpXFxcXCknICsgZGVwZW5kZW5jeVJlZ0V4cCwgJ2cnKVxuICB3aGlsZSAoKG1hdGNoID0gcmUuZXhlYyhmblN0cmluZykpKSB7XG4gICAgaWYgKCFzb3VyY2VzW21hdGNoWzJdXSkge1xuICAgICAgcmV0dmFsW3F1ZXVlTmFtZV0ucHVzaChtYXRjaFsxXSlcbiAgICAgIHNvdXJjZXNbbWF0Y2hbMl1dID0gX193ZWJwYWNrX3JlcXVpcmVfXyhtYXRjaFsxXSkubVxuICAgIH1cbiAgICByZXR2YWxbbWF0Y2hbMl1dID0gcmV0dmFsW21hdGNoWzJdXSB8fCBbXVxuICAgIHJldHZhbFttYXRjaFsyXV0ucHVzaChtYXRjaFs0XSlcbiAgfVxuXG4gIC8vIGNvbnZlcnQgMWUzIGJhY2sgdG8gMTAwMCAtIHRoaXMgY2FuIGJlIGltcG9ydGFudCBhZnRlciB1Z2xpZnktanMgY29udmVydGVkIDEwMDAgdG8gMWUzXG4gIHZhciBrZXlzID0gT2JqZWN0LmtleXMocmV0dmFsKTtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgaSsrKSB7XG4gICAgZm9yICh2YXIgaiA9IDA7IGogPCByZXR2YWxba2V5c1tpXV0ubGVuZ3RoOyBqKyspIHtcbiAgICAgIGlmIChpc051bWVyaWMocmV0dmFsW2tleXNbaV1dW2pdKSkge1xuICAgICAgICByZXR2YWxba2V5c1tpXV1bal0gPSAxICogcmV0dmFsW2tleXNbaV1dW2pdO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiByZXR2YWxcbn1cblxuZnVuY3Rpb24gaGFzVmFsdWVzSW5RdWV1ZXMgKHF1ZXVlcykge1xuICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKHF1ZXVlcylcbiAgcmV0dXJuIGtleXMucmVkdWNlKGZ1bmN0aW9uIChoYXNWYWx1ZXMsIGtleSkge1xuICAgIHJldHVybiBoYXNWYWx1ZXMgfHwgcXVldWVzW2tleV0ubGVuZ3RoID4gMFxuICB9LCBmYWxzZSlcbn1cblxuZnVuY3Rpb24gZ2V0UmVxdWlyZWRNb2R1bGVzIChzb3VyY2VzLCBtb2R1bGVJZCkge1xuICB2YXIgbW9kdWxlc1F1ZXVlID0ge1xuICAgIG1haW46IFttb2R1bGVJZF1cbiAgfVxuICB2YXIgcmVxdWlyZWRNb2R1bGVzID0ge1xuICAgIG1haW46IFtdXG4gIH1cbiAgdmFyIHNlZW5Nb2R1bGVzID0ge1xuICAgIG1haW46IHt9XG4gIH1cblxuICB3aGlsZSAoaGFzVmFsdWVzSW5RdWV1ZXMobW9kdWxlc1F1ZXVlKSkge1xuICAgIHZhciBxdWV1ZXMgPSBPYmplY3Qua2V5cyhtb2R1bGVzUXVldWUpXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBxdWV1ZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBxdWV1ZU5hbWUgPSBxdWV1ZXNbaV1cbiAgICAgIHZhciBxdWV1ZSA9IG1vZHVsZXNRdWV1ZVtxdWV1ZU5hbWVdXG4gICAgICB2YXIgbW9kdWxlVG9DaGVjayA9IHF1ZXVlLnBvcCgpXG4gICAgICBzZWVuTW9kdWxlc1txdWV1ZU5hbWVdID0gc2Vlbk1vZHVsZXNbcXVldWVOYW1lXSB8fCB7fVxuICAgICAgaWYgKHNlZW5Nb2R1bGVzW3F1ZXVlTmFtZV1bbW9kdWxlVG9DaGVja10gfHwgIXNvdXJjZXNbcXVldWVOYW1lXVttb2R1bGVUb0NoZWNrXSkgY29udGludWVcbiAgICAgIHNlZW5Nb2R1bGVzW3F1ZXVlTmFtZV1bbW9kdWxlVG9DaGVja10gPSB0cnVlXG4gICAgICByZXF1aXJlZE1vZHVsZXNbcXVldWVOYW1lXSA9IHJlcXVpcmVkTW9kdWxlc1txdWV1ZU5hbWVdIHx8IFtdXG4gICAgICByZXF1aXJlZE1vZHVsZXNbcXVldWVOYW1lXS5wdXNoKG1vZHVsZVRvQ2hlY2spXG4gICAgICB2YXIgbmV3TW9kdWxlcyA9IGdldE1vZHVsZURlcGVuZGVuY2llcyhzb3VyY2VzLCBzb3VyY2VzW3F1ZXVlTmFtZV1bbW9kdWxlVG9DaGVja10sIHF1ZXVlTmFtZSlcbiAgICAgIHZhciBuZXdNb2R1bGVzS2V5cyA9IE9iamVjdC5rZXlzKG5ld01vZHVsZXMpXG4gICAgICBmb3IgKHZhciBqID0gMDsgaiA8IG5ld01vZHVsZXNLZXlzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgIG1vZHVsZXNRdWV1ZVtuZXdNb2R1bGVzS2V5c1tqXV0gPSBtb2R1bGVzUXVldWVbbmV3TW9kdWxlc0tleXNbal1dIHx8IFtdXG4gICAgICAgIG1vZHVsZXNRdWV1ZVtuZXdNb2R1bGVzS2V5c1tqXV0gPSBtb2R1bGVzUXVldWVbbmV3TW9kdWxlc0tleXNbal1dLmNvbmNhdChuZXdNb2R1bGVzW25ld01vZHVsZXNLZXlzW2pdXSlcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gcmVxdWlyZWRNb2R1bGVzXG59XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKG1vZHVsZUlkLCBvcHRpb25zKSB7XG4gIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9XG4gIHZhciBzb3VyY2VzID0ge1xuICAgIG1haW46IF9fd2VicGFja19tb2R1bGVzX19cbiAgfVxuXG4gIHZhciByZXF1aXJlZE1vZHVsZXMgPSBvcHRpb25zLmFsbCA/IHsgbWFpbjogT2JqZWN0LmtleXMoc291cmNlcy5tYWluKSB9IDogZ2V0UmVxdWlyZWRNb2R1bGVzKHNvdXJjZXMsIG1vZHVsZUlkKVxuXG4gIHZhciBzcmMgPSAnJ1xuXG4gIE9iamVjdC5rZXlzKHJlcXVpcmVkTW9kdWxlcykuZmlsdGVyKGZ1bmN0aW9uIChtKSB7IHJldHVybiBtICE9PSAnbWFpbicgfSkuZm9yRWFjaChmdW5jdGlvbiAobW9kdWxlKSB7XG4gICAgdmFyIGVudHJ5TW9kdWxlID0gMFxuICAgIHdoaWxlIChyZXF1aXJlZE1vZHVsZXNbbW9kdWxlXVtlbnRyeU1vZHVsZV0pIHtcbiAgICAgIGVudHJ5TW9kdWxlKytcbiAgICB9XG4gICAgcmVxdWlyZWRNb2R1bGVzW21vZHVsZV0ucHVzaChlbnRyeU1vZHVsZSlcbiAgICBzb3VyY2VzW21vZHVsZV1bZW50cnlNb2R1bGVdID0gJyhmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsgbW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fOyB9KSdcbiAgICBzcmMgPSBzcmMgKyAndmFyICcgKyBtb2R1bGUgKyAnID0gKCcgKyB3ZWJwYWNrQm9vdHN0cmFwRnVuYy50b1N0cmluZygpLnJlcGxhY2UoJ0VOVFJZX01PRFVMRScsIEpTT04uc3RyaW5naWZ5KGVudHJ5TW9kdWxlKSkgKyAnKSh7JyArIHJlcXVpcmVkTW9kdWxlc1ttb2R1bGVdLm1hcChmdW5jdGlvbiAoaWQpIHsgcmV0dXJuICcnICsgSlNPTi5zdHJpbmdpZnkoaWQpICsgJzogJyArIHNvdXJjZXNbbW9kdWxlXVtpZF0udG9TdHJpbmcoKSB9KS5qb2luKCcsJykgKyAnfSk7XFxuJ1xuICB9KVxuXG4gIHNyYyA9IHNyYyArICduZXcgKCgnICsgd2VicGFja0Jvb3RzdHJhcEZ1bmMudG9TdHJpbmcoKS5yZXBsYWNlKCdFTlRSWV9NT0RVTEUnLCBKU09OLnN0cmluZ2lmeShtb2R1bGVJZCkpICsgJykoeycgKyByZXF1aXJlZE1vZHVsZXMubWFpbi5tYXAoZnVuY3Rpb24gKGlkKSB7IHJldHVybiAnJyArIEpTT04uc3RyaW5naWZ5KGlkKSArICc6ICcgKyBzb3VyY2VzLm1haW5baWRdLnRvU3RyaW5nKCkgfSkuam9pbignLCcpICsgJ30pKShzZWxmKTsnXG5cbiAgdmFyIGJsb2IgPSBuZXcgd2luZG93LkJsb2IoW3NyY10sIHsgdHlwZTogJ3RleHQvamF2YXNjcmlwdCcgfSlcbiAgaWYgKG9wdGlvbnMuYmFyZSkgeyByZXR1cm4gYmxvYiB9XG5cbiAgdmFyIFVSTCA9IHdpbmRvdy5VUkwgfHwgd2luZG93LndlYmtpdFVSTCB8fCB3aW5kb3cubW96VVJMIHx8IHdpbmRvdy5tc1VSTFxuXG4gIHZhciB3b3JrZXJVcmwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpXG4gIHZhciB3b3JrZXIgPSBuZXcgd2luZG93Lldvcmtlcih3b3JrZXJVcmwpXG4gIHdvcmtlci5vYmplY3RVUkwgPSB3b3JrZXJVcmxcblxuICByZXR1cm4gd29ya2VyXG59XG4iLCJjb25zdCBMT0FERVJfRVZFTlRTID0ge1xuICBMQURFUl9TVEFSVDogJ0xPQURFUl9TVEFSVCcsXG4gIExPQURFUl9EQVRBTE9BREVEOiAnTE9BREVSX0RBVEFMT0FERUQnLFxuICBMT0FERVJfQ09NUExFVEU6ICdMT0FERVJfQ09NUExFVEUnLFxuICBMT0FERVJfRVJST1I6ICdMT0FERVJfRVJST1InXG59XG5cbmNvbnN0IERFTVVYX0VWRU5UUyA9IHtcbiAgREVNVVhfU1RBUlQ6ICdERU1VWF9TVEFSVCcsXG4gIERFTVVYX0NPTVBMRVRFOiAnREVNVVhfQ09NUExFVEUnLFxuICBERU1VWF9FUlJPUjogJ0RFTVVYX0VSUk9SJyxcbiAgTUVUQURBVEFfUEFSU0VEOiAnTUVUQURBVEFfUEFSU0VEJyxcbiAgVklERU9fTUVUQURBVEFfQ0hBTkdFOiAnVklERU9fTUVUQURBVEFfQ0hBTkdFJyxcbiAgQVVESU9fTUVUQURBVEFfQ0hBTkdFOiAnQVVESU9fTUVUQURBVEFfQ0hBTkdFJyxcbiAgTUVESUFfSU5GTzogJ01FRElBX0lORk8nXG59XG5cbmNvbnN0IFJFTVVYX0VWRU5UUyA9IHtcbiAgUkVNVVhfTUVUQURBVEE6ICdSRU1VWF9NRVRBREFUQScsXG4gIFJFTVVYX01FRElBOiAnUkVNVVhfTUVESUEnLFxuICBNRURJQV9TRUdNRU5UOiAnTUVESUFfU0VHTUVOVCcsXG4gIFJFTVVYX0VSUk9SOiAnUkVNVVhfRVJST1InLFxuICBJTklUX1NFR01FTlQ6ICdJTklUX1NFR01FTlQnXG59XG5cbmNvbnN0IE1TRV9FVkVOVFMgPSB7XG4gIFNPVVJDRV9VUERBVEVfRU5EOiAnU09VUkNFX1VQREFURV9FTkQnXG59XG5cbi8vIGhsc+S4k+aciWV2ZW50c1xuY29uc3QgSExTX0VWRU5UUyA9IHtcbiAgUkVUUllfVElNRV9FWENFRURFRDogJ1JFVFJZX1RJTUVfRVhDRUVERUQnXG59XG5cbmNvbnN0IEFMTEVWRU5UUyA9IE9iamVjdC5hc3NpZ24oe30sIExPQURFUl9FVkVOVFMsIERFTVVYX0VWRU5UUywgUkVNVVhfRVZFTlRTLCBNU0VfRVZFTlRTLCBITFNfRVZFTlRTKVxuXG5jb25zdCBGbHZBbGxvd2VkRXZlbnRzID0gW11cbmNvbnN0IEhsc0FsbG93ZWRFdmVudHMgPSBbXVxuXG5mb3IgKGxldCBrZXkgaW4gQUxMRVZFTlRTKSB7XG4gIGlmIChBTExFVkVOVFMuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgIEZsdkFsbG93ZWRFdmVudHMucHVzaChBTExFVkVOVFNba2V5XSlcbiAgfVxufVxuXG5mb3IgKGxldCBrZXkgaW4gQUxMRVZFTlRTKSB7XG4gIGlmIChBTExFVkVOVFMuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgIEhsc0FsbG93ZWRFdmVudHMucHVzaChBTExFVkVOVFNba2V5XSlcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCB7XG4gIEFMTEVWRU5UUyxcbiAgSExTX0VWRU5UUyxcbiAgUkVNVVhfRVZFTlRTLFxuICBERU1VWF9FVkVOVFMsXG4gIE1TRV9FVkVOVFMsXG4gIExPQURFUl9FVkVOVFMsXG4gIEZsdkFsbG93ZWRFdmVudHMsXG4gIEhsc0FsbG93ZWRFdmVudHNcbn07XG4iLCJleHBvcnQgY29uc3QgQ09OVEVYVF9DT01PTUFORFMgPSB7XG4gIE9OOiAnb24nLFxuICBPTkNFOiAnb25jZScsXG4gIE9GRjogJ29mZicsXG4gIEVNSVQ6ICdlbWl0JyxcbiAgREVTVFJPWTogJ2Rlc3Ryb3knXG59XG4iLCJpbXBvcnQgTWVkaWFJbmZvIGZyb20gJy4vbW9kZWxzL21lZGlhLWluZm8nXG5pbXBvcnQgeyBFdmVudEVtaXR0ZXIgfSBmcm9tICdldmVudHMnXG5cbmNvbnN0IERJUkVDVF9FTUlUX0ZMQUcgPSAnX19UT19fJ1xuXG5jbGFzcyBDb250ZXh0IHtcbiAgY29uc3RydWN0b3IgKGFsbG93ZWRFdmVudHMgPSBbXSkge1xuICAgIHRoaXMuX2VtaXR0ZXIgPSBuZXcgRXZlbnRFbWl0dGVyKClcbiAgICB0aGlzLl9pbnN0YW5jZU1hcCA9IHt9IC8vIOaJgOacieeahOino+eggea1geeoi+WunuS+i1xuICAgIHRoaXMuX2Nsc01hcCA9IHt9IC8vIOaehOmAoOWHveaVsOeahG1hcFxuICAgIHRoaXMuX2luaXRlZCA9IGZhbHNlXG4gICAgdGhpcy5tZWRpYUluZm8gPSBuZXcgTWVkaWFJbmZvKClcbiAgICB0aGlzLmFsbG93ZWRFdmVudHMgPSBhbGxvd2VkRXZlbnRzXG4gICAgdGhpcy5faG9va3MgPSB7fSAvLyDms6jlhozlnKjkuovku7bliY0v5ZCO55qE6ZKp5a2Q77yM5L6L5aaCIGJlZm9yZSgnREVNVVhfQ09NUExFVEUnKVxuICB9XG5cbiAgLyoqXG4gICAqIOS7juS4iuS4i+aWh+S4reiOt+WPluino+eggea1geeoi+WunuS+i++8jOWmguaenOayoeacieWunuS+i++8jOaehOmAoOS4gOS4qlxuICAgKiBAcGFyYW0gdGFnXG4gICAqIEBwYXJhbSBhcmdzXG4gICAqIEByZXR1cm5zIHsqfVxuICAgKi9cbiAgZ2V0SW5zdGFuY2UgKHRhZykge1xuICAgIGlmICh0aGlzLl9pbnN0YW5jZU1hcFt0YWddKSB7XG4gICAgICByZXR1cm4gdGhpcy5faW5zdGFuY2VNYXBbdGFnXVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyB0aHJvdyBuZXcgRXJyb3IoYCR7dGFnfeWunuS+i+WwmuacquWIneWni+WMlmApXG4gICAgICByZXR1cm4gbnVsbFxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiDliJ3lp4vljJblhbfkvZPlrp7kvotcbiAgICogQHBhcmFtIHRhZ1xuICAgKiBAcGFyYW0gYXJnc1xuICAgKi9cbiAgaW5pdEluc3RhbmNlICh0YWcsIC4uLmFyZ3MpIHtcbiAgICBpZiAodGhpcy5fY2xzTWFwW3RhZ10pIHtcbiAgICAgIGNvbnN0IG5ld0luc3RhbmNlID0gbmV3IHRoaXMuX2Nsc01hcFt0YWddKC4uLmFyZ3MpXG4gICAgICB0aGlzLl9pbnN0YW5jZU1hcFt0YWddID0gbmV3SW5zdGFuY2VcbiAgICAgIGlmIChuZXdJbnN0YW5jZS5pbml0KSB7XG4gICAgICAgIG5ld0luc3RhbmNlLmluaXQoKSAvLyBUT0RPOiBsaWZlY2lyY2xlXG4gICAgICB9XG4gICAgICByZXR1cm4gbmV3SW5zdGFuY2VcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGAke3RhZ33mnKrlnKhjb250ZXh05Lit5rOo5YaMYClcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICog6YG/5YWN5aSn6YeP55qEaW5pdEluc3RhbmNl6LCD55So77yM5Yid5aeL5YyW5omA5pyJ55qE57uE5Lu2XG4gICAqIEBwYXJhbSBjb25maWdcbiAgICovXG4gIGluaXQgKGNvbmZpZykge1xuICAgIGlmICh0aGlzLl9pbml0ZWQpIHtcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBmb3IgKGxldCB0YWcgaW4gdGhpcy5fY2xzTWFwKSB7XG4gICAgICAvLyBpZiBub3QgaW5pdGVkLCBpbml0IGFuIGluc3RhbmNlXG4gICAgICBpZiAodGhpcy5fY2xzTWFwLmhhc093blByb3BlcnR5KHRhZykgJiYgIXRoaXMuX2luc3RhbmNlTWFwW3RhZ10pIHtcbiAgICAgICAgdGhpcy5pbml0SW5zdGFuY2UodGFnLCBjb25maWcpXG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMuX2luaXRlZCA9IHRydWVcbiAgfVxuXG4gIC8qKlxuICAgKiDms6jlhozkuIDkuKrkuIrkuIvmlofmtYHnqIvvvIzmj5DkvpvlronlhajnmoTkuovku7blj5HpgIHmnLrliLZcbiAgICogQHBhcmFtIHRhZ1xuICAgKiBAcGFyYW0gY2xzXG4gICAqL1xuICByZWdpc3RyeSAodGFnLCBjbHMpIHtcbiAgICBjb25zdCBlbWl0dGVyID0gdGhpcy5fZW1pdHRlclxuICAgIGNvbnN0IGNoZWNrTWVzc2FnZU5hbWUgPSB0aGlzLl9pc01lc3NhZ2VOYW1lVmFsaWQuYmluZCh0aGlzKVxuICAgIGNvbnN0IHNlbGYgPSB0aGlzXG4gICAgY29uc3QgZW5oYW5jZWQgPSBjbGFzcyBleHRlbmRzIGNscyB7XG4gICAgICBjb25zdHJ1Y3RvciAoLi4uYXJncykge1xuICAgICAgICBzdXBlciguLi5hcmdzKVxuICAgICAgICB0aGlzLmxpc3RlbmVycyA9IHt9XG4gICAgICAgIHRoaXMub25jZUxpc3RlbmVycyA9IHt9XG4gICAgICAgIHRoaXMuVEFHID0gdGFnXG4gICAgICAgIHRoaXMuX2NvbnRleHQgPSBzZWxmXG4gICAgICB9XG5cbiAgICAgIG9uIChtZXNzYWdlTmFtZSwgY2FsbGJhY2spIHtcbiAgICAgICAgY2hlY2tNZXNzYWdlTmFtZShtZXNzYWdlTmFtZSlcblxuICAgICAgICBpZiAodGhpcy5saXN0ZW5lcnNbbWVzc2FnZU5hbWVdKSB7XG4gICAgICAgICAgdGhpcy5saXN0ZW5lcnNbbWVzc2FnZU5hbWVdLnB1c2goY2FsbGJhY2spXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5saXN0ZW5lcnNbbWVzc2FnZU5hbWVdID0gW2NhbGxiYWNrXVxuICAgICAgICB9XG5cbiAgICAgICAgZW1pdHRlci5vbihgJHttZXNzYWdlTmFtZX0ke0RJUkVDVF9FTUlUX0ZMQUd9JHt0YWd9YCwgY2FsbGJhY2spIC8vIOW7uueri+WumuWQkemAmuS/oeebkeWQrFxuICAgICAgICByZXR1cm4gZW1pdHRlci5vbihtZXNzYWdlTmFtZSwgY2FsbGJhY2spXG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICog5Zyo5p+Q5Liq5LqL5Lu26Kem5Y+R5YmN5omn6KGMXG4gICAgICAgKiBAcGFyYW0gbWVzc2FnZU5hbWVcbiAgICAgICAqIEBwYXJhbSBjYWxsYmFja1xuICAgICAgICovXG4gICAgICBiZWZvcmUgKG1lc3NhZ2VOYW1lLCBjYWxsYmFjaykge1xuICAgICAgICBjaGVja01lc3NhZ2VOYW1lKG1lc3NhZ2VOYW1lKVxuICAgICAgICBpZiAoc2VsZi5faG9va3NbbWVzc2FnZU5hbWVdKSB7XG4gICAgICAgICAgc2VsZi5faG9va3NbbWVzc2FnZU5hbWVdLnB1c2goY2FsbGJhY2spXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc2VsZi5faG9va3NbbWVzc2FnZU5hbWVdID0gW2NhbGxiYWNrXVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIG9uY2UgKG1lc3NhZ2VOYW1lLCBjYWxsYmFjaykge1xuICAgICAgICBjaGVja01lc3NhZ2VOYW1lKG1lc3NhZ2VOYW1lKVxuXG4gICAgICAgIGlmICh0aGlzLm9uY2VMaXN0ZW5lcnNbbWVzc2FnZU5hbWVdKSB7XG4gICAgICAgICAgdGhpcy5vbmNlTGlzdGVuZXJzW21lc3NhZ2VOYW1lXS5wdXNoKGNhbGxiYWNrKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMub25jZUxpc3RlbmVyc1ttZXNzYWdlTmFtZV0gPSBbY2FsbGJhY2tdXG4gICAgICAgIH1cblxuICAgICAgICBlbWl0dGVyLm9uY2UoYCR7bWVzc2FnZU5hbWV9JHtESVJFQ1RfRU1JVF9GTEFHfSR7dGFnfWAsIGNhbGxiYWNrKVxuICAgICAgICByZXR1cm4gZW1pdHRlci5vbmNlKG1lc3NhZ2VOYW1lLCBjYWxsYmFjaylcbiAgICAgIH1cblxuICAgICAgZW1pdCAobWVzc2FnZU5hbWUsIC4uLmFyZ3MpIHtcbiAgICAgICAgY2hlY2tNZXNzYWdlTmFtZShtZXNzYWdlTmFtZSlcblxuICAgICAgICBjb25zdCBiZWZvcmVMaXN0ID0gc2VsZi5faG9va3NbbWVzc2FnZU5hbWVdXG4gICAgICAgIGlmIChiZWZvcmVMaXN0KSB7XG4gICAgICAgICAgZm9yIChsZXQgaSA9IDAsIGxlbiA9IGJlZm9yZUxpc3QubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IGNhbGxiYWNrID0gYmVmb3JlTGlzdFtpXVxuICAgICAgICAgICAgY2FsbGJhY2soKVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZW1pdHRlci5lbWl0KG1lc3NhZ2VOYW1lLCAuLi5hcmdzKVxuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIOWumuWQkeWPkemAgee7meafkOS4que7hOS7tuWNleS+i+eahOa2iOaBr1xuICAgICAgICogQHBhcmFtIG1lc3NhZ2VOYW1lXG4gICAgICAgKiBAcGFyYW0gYXJnc1xuICAgICAgICovXG4gICAgICBlbWl0VG8gKHRhZywgbWVzc2FnZU5hbWUsIC4uLmFyZ3MpIHtcbiAgICAgICAgY2hlY2tNZXNzYWdlTmFtZShtZXNzYWdlTmFtZSlcblxuICAgICAgICByZXR1cm4gZW1pdHRlci5lbWl0KGAke21lc3NhZ2VOYW1lfSR7RElSRUNUX0VNSVRfRkxBR30ke3RhZ31gLCAuLi5hcmdzKVxuICAgICAgfVxuXG4gICAgICBvZmYgKG1lc3NhZ2VOYW1lLCBjYWxsYmFjaykge1xuICAgICAgICBjaGVja01lc3NhZ2VOYW1lKG1lc3NhZ2VOYW1lKVxuICAgICAgICByZXR1cm4gZW1pdHRlci5vZmYobWVzc2FnZU5hbWUsIGNhbGxiYWNrKVxuICAgICAgfVxuXG4gICAgICByZW1vdmVMaXN0ZW5lcnMgKCkge1xuICAgICAgICBjb25zdCBoYXNPd24gPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmJpbmQodGhpcy5saXN0ZW5lcnMpXG5cbiAgICAgICAgZm9yIChsZXQgbWVzc2FnZU5hbWUgaW4gdGhpcy5saXN0ZW5lcnMpIHtcbiAgICAgICAgICBpZiAoaGFzT3duKG1lc3NhZ2VOYW1lKSkge1xuICAgICAgICAgICAgY29uc3QgY2FsbGJhY2tzID0gdGhpcy5saXN0ZW5lcnNbbWVzc2FnZU5hbWVdIHx8IFtdXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNhbGxiYWNrcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICBjb25zdCBjYWxsYmFjayA9IGNhbGxiYWNrc1tpXVxuICAgICAgICAgICAgICBlbWl0dGVyLm9mZihtZXNzYWdlTmFtZSwgY2FsbGJhY2spXG4gICAgICAgICAgICAgIGVtaXR0ZXIub2ZmKGAke21lc3NhZ2VOYW1lfSR7RElSRUNUX0VNSVRfRkxBR30ke3RhZ31gLCBjYWxsYmFjaylcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBmb3IgKGxldCBtZXNzYWdlTmFtZSBpbiB0aGlzLm9uY2VMaXN0ZW5lcnMpIHtcbiAgICAgICAgICBpZiAoaGFzT3duKG1lc3NhZ2VOYW1lKSkge1xuICAgICAgICAgICAgY29uc3QgY2FsbGJhY2tzID0gdGhpcy5vbmNlTGlzdGVuZXJzW21lc3NhZ2VOYW1lXSB8fCBbXVxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjYWxsYmFja3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgY29uc3QgY2FsbGJhY2sgPSBjYWxsYmFja3NbaV1cbiAgICAgICAgICAgICAgZW1pdHRlci5vZmYobWVzc2FnZU5hbWUsIGNhbGxiYWNrKVxuICAgICAgICAgICAgICBlbWl0dGVyLm9mZihgJHttZXNzYWdlTmFtZX0ke0RJUkVDVF9FTUlUX0ZMQUd9JHt0YWd9YCwgY2FsbGJhY2spXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICog5Zyo57uE5Lu26ZSA5q+B5pe277yM6buY6K6k5bCG5a6D5rOo5YaM55qE5LqL5Lu25YWo6YOo5Y246L2977yM56Gu5L+d5LiN5Lya6YCg5oiQ5YaF5a2Y5rOE5ryPXG4gICAgICAgKi9cbiAgICAgIGRlc3Ryb3kgKCkge1xuICAgICAgICAvLyBzdGVwMSB1bmxpc3RlbiBldmVudHNcbiAgICAgICAgdGhpcy5yZW1vdmVMaXN0ZW5lcnMoKVxuXG4gICAgICAgIC8vIHN0ZXAyIHJlbGVhc2UgZnJvbSBjb250ZXh0XG4gICAgICAgIGRlbGV0ZSBzZWxmLl9pbnN0YW5jZU1hcFt0YWddXG4gICAgICAgIGlmIChzdXBlci5kZXN0cm95KSB7XG4gICAgICAgICAgc3VwZXIuZGVzdHJveSgpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5fY2xzTWFwW3RhZ10gPSBlbmhhbmNlZFxuXG4gICAgLyoqXG4gICAgICogZ2V0IGluc3RhbmNlIGltbWVkaWF0ZWx5XG4gICAgICogZS5nIGNvbnN0IGluc3RhbmNlID0gY29udGV4dC5yZWdpc3RyeSh0YWcsIENscykoY29uZmlnKVxuICAgICAqICovXG4gICAgcmV0dXJuICguLi5hcmdzKSA9PiB7XG4gICAgICByZXR1cm4gdGhpcy5pbml0SW5zdGFuY2UodGFnLCAuLi5hcmdzKVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiDlr7nlrZjlnKjnmoTlrp7kvovov5vooYxcbiAgICovXG4gIGRlc3Ryb3lJbnN0YW5jZXMgKCkge1xuICAgIE9iamVjdC5rZXlzKHRoaXMuX2luc3RhbmNlTWFwKS5mb3JFYWNoKCh0YWcpID0+IHtcbiAgICAgIGlmICh0aGlzLl9pbnN0YW5jZU1hcFt0YWddLmRlc3Ryb3kpIHtcbiAgICAgICAgdGhpcy5faW5zdGFuY2VNYXBbdGFnXS5kZXN0cm95KClcbiAgICAgIH1cbiAgICB9KVxuICB9XG5cbiAgLyoqXG4gICAqIOe8luino+eggea1geeoi+aXoOmcgOWFs+azqOS6i+S7tueahOino+e7kVxuICAgKi9cbiAgZGVzdHJveSAoKSB7XG4gICAgdGhpcy5fZW1pdHRlciA9IG51bGxcbiAgICB0aGlzLmFsbG93ZWRFdmVudHMgPSBbXVxuICAgIHRoaXMuX2Nsc01hcCA9IG51bGxcbiAgICB0aGlzLl9jb250ZXh0ID0gbnVsbFxuICAgIHRoaXMuZGVzdHJveUluc3RhbmNlcygpXG4gIH1cblxuICAvKipcbiAgICog5a+55L+h6YGT6L+b6KGM5pS25ouiXG4gICAqIEBwYXJhbSBtZXNzYWdlTmFtZVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX2lzTWVzc2FnZU5hbWVWYWxpZCAobWVzc2FnZU5hbWUpIHtcbiAgICBpZiAoIXRoaXMuYWxsb3dlZEV2ZW50cy5pbmRleE9mKG1lc3NhZ2VOYW1lKSA8IDApIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgdW5yZWdpc3RlcmVkIG1lc3NhZ2UgbmFtZTogJHttZXNzYWdlTmFtZX1gKVxuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBDb250ZXh0XG4iLCJjb25zdCBsZSA9IChmdW5jdGlvbiAoKSB7XG4gIGNvbnN0IGJ1ZiA9IG5ldyBBcnJheUJ1ZmZlcigyKTtcbiAgKG5ldyBEYXRhVmlldyhidWYpKS5zZXRJbnQxNigwLCAyNTYsIHRydWUpIC8vIGxpdHRsZS1lbmRpYW4gd3JpdGVcbiAgcmV0dXJuIChuZXcgSW50MTZBcnJheShidWYpKVswXSA9PT0gMjU2IC8vIHBsYXRmb3JtLXNwZWMgcmVhZCwgaWYgZXF1YWwgdGhlbiBMRVxufSkoKVxuXG5leHBvcnQgZGVmYXVsdCBsZVxuIiwiY29uc3QgbGUgPSAoZnVuY3Rpb24gKCkge1xuICBjb25zdCBidWYgPSBuZXcgQXJyYXlCdWZmZXIoMik7XG4gIChuZXcgRGF0YVZpZXcoYnVmKSkuc2V0SW50MTYoMCwgMjU2LCB0cnVlKSAvLyBsaXR0bGUtZW5kaWFuIHdyaXRlXG4gIHJldHVybiAobmV3IEludDE2QXJyYXkoYnVmKSlbMF0gPT09IDI1NiAvLyBwbGF0Zm9ybS1zcGVjIHJlYWQsIGlmIGVxdWFsIHRoZW4gTEVcbn0pKClcblxuY29uc3Qgc25pZmZlciA9IHtcbiAgZ2V0IGRldmljZSAoKSB7XG4gICAgbGV0IHIgPSBzbmlmZmVyLm9zO1xuICAgIHJldHVybiByLmlzUGMgPyAncGMnIDogci5pc1RhYmxldCA/ICd0YWJsZXQnIDogJ21vYmlsZSc7XG4gIH0sXG4gIGdldCBicm93c2VyICgpIHtcbiAgICBsZXQgdWEgPSBuYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCk7XG4gICAgbGV0IHJlZyA9IHtcbiAgICAgIGllOiAvcnY6KFtcXGQuXSspXFwpIGxpa2UgZ2Vja28vLFxuICAgICAgZmlyZm94OiAvZmlyZWZveFxcLyhbXFxkLl0rKS8sXG4gICAgICBjaHJvbWU6IC9jaHJvbWVcXC8oW1xcZC5dKykvLFxuICAgICAgb3BlcmE6IC9vcGVyYS4oW1xcZC5dKykvLFxuICAgICAgc2FmYXJpOiAvdmVyc2lvblxcLyhbXFxkLl0rKS4qc2FmYXJpL1xuICAgIH07XG4gICAgcmV0dXJuIFtdLmNvbmNhdChPYmplY3Qua2V5cyhyZWcpLmZpbHRlcihrZXkgPT4gcmVnW2tleV0udGVzdCh1YSkpKVswXTtcbiAgfSxcbiAgZ2V0IG9zICgpIHtcbiAgICBsZXQgdWEgPSBuYXZpZ2F0b3IudXNlckFnZW50XG4gICAgbGV0IGlzV2luZG93c1Bob25lID0gLyg/OldpbmRvd3MgUGhvbmUpLy50ZXN0KHVhKVxuICAgIGxldCBpc1N5bWJpYW4gPSAvKD86U3ltYmlhbk9TKS8udGVzdCh1YSkgfHwgaXNXaW5kb3dzUGhvbmU7XG4gICAgbGV0IGlzQW5kcm9pZCA9IC8oPzpBbmRyb2lkKS8udGVzdCh1YSk7XG4gICAgbGV0IGlzRmlyZUZveCA9IC8oPzpGaXJlZm94KS8udGVzdCh1YSk7XG4gICAgbGV0IGlzVGFibGV0ID0gLyg/OmlQYWR8UGxheUJvb2spLy50ZXN0KHVhKSB8fCAoaXNBbmRyb2lkICYmICEvKD86TW9iaWxlKS8udGVzdCh1YSkpIHx8IChpc0ZpcmVGb3ggJiYgLyg/OlRhYmxldCkvLnRlc3QodWEpKTtcbiAgICBsZXQgaXNQaG9uZSA9IC8oPzppUGhvbmUpLy50ZXN0KHVhKSAmJiAhaXNUYWJsZXQ7XG4gICAgbGV0IGlzUGMgPSAhaXNQaG9uZSAmJiAhaXNBbmRyb2lkICYmICFpc1N5bWJpYW47XG4gICAgcmV0dXJuIHtcbiAgICAgIGlzVGFibGV0LFxuICAgICAgaXNQaG9uZSxcbiAgICAgIGlzQW5kcm9pZCxcbiAgICAgIGlzUGMsXG4gICAgICBpc1N5bWJpYW4sXG4gICAgICBpc1dpbmRvd3NQaG9uZSxcbiAgICAgIGlzRmlyZUZveFxuICAgIH07XG4gIH0sXG5cbiAgZ2V0IGlzTGUgKCkge1xuICAgIHJldHVybiBsZVxuICB9XG59O1xuXG5leHBvcnQgZGVmYXVsdCBzbmlmZmVyO1xuIiwiY2xhc3MgVVRGOCB7XG4gIHN0YXRpYyBkZWNvZGUgKHVpbnQ4YXJyYXkpIHtcbiAgICBjb25zdCBvdXQgPSBbXTtcbiAgICBjb25zdCBpbnB1dCA9IHVpbnQ4YXJyYXk7XG4gICAgbGV0IGkgPSAwO1xuICAgIGNvbnN0IGxlbmd0aCA9IHVpbnQ4YXJyYXkubGVuZ3RoO1xuXG4gICAgd2hpbGUgKGkgPCBsZW5ndGgpIHtcbiAgICAgIGlmIChpbnB1dFtpXSA8IDB4ODApIHtcbiAgICAgICAgb3V0LnB1c2goU3RyaW5nLmZyb21DaGFyQ29kZShpbnB1dFtpXSkpO1xuICAgICAgICArK2k7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfSBlbHNlIGlmIChpbnB1dFtpXSA8IDB4QzApIHtcbiAgICAgICAgLy8gZmFsbHRocm91Z2hcbiAgICAgIH0gZWxzZSBpZiAoaW5wdXRbaV0gPCAweEUwKSB7XG4gICAgICAgIGlmIChVVEY4Ll9jaGVja0NvbnRpbnVhdGlvbihpbnB1dCwgaSwgMSkpIHtcbiAgICAgICAgICBjb25zdCB1Y3M0ID0gKGlucHV0W2ldICYgMHgxRikgPDwgNiB8IChpbnB1dFtpICsgMV0gJiAweDNGKTtcbiAgICAgICAgICBpZiAodWNzNCA+PSAweDgwKSB7XG4gICAgICAgICAgICBvdXQucHVzaChTdHJpbmcuZnJvbUNoYXJDb2RlKHVjczQgJiAweEZGRkYpKTtcbiAgICAgICAgICAgIGkgKz0gMjtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChpbnB1dFtpXSA8IDB4RjApIHtcbiAgICAgICAgaWYgKFVURjguX2NoZWNrQ29udGludWF0aW9uKGlucHV0LCBpLCAyKSkge1xuICAgICAgICAgIGNvbnN0IHVjczQgPSAoaW5wdXRbaV0gJiAweEYpIDw8IDEyIHwgKGlucHV0W2kgKyAxXSAmIDB4M0YpIDw8IDYgfCBpbnB1dFtpICsgMl0gJiAweDNGO1xuICAgICAgICAgIGlmICh1Y3M0ID49IDB4ODAwICYmICh1Y3M0ICYgMHhGODAwKSAhPT0gMHhEODAwKSB7XG4gICAgICAgICAgICBvdXQucHVzaChTdHJpbmcuZnJvbUNoYXJDb2RlKHVjczQgJiAweEZGRkYpKTtcbiAgICAgICAgICAgIGkgKz0gMztcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChpbnB1dFtpXSA8IDB4RjgpIHtcbiAgICAgICAgaWYgKFVURjguX2NoZWNrQ29udGludWF0aW9uKGlucHV0LCBpLCAzKSkge1xuICAgICAgICAgIGxldCB1Y3M0ID0gKGlucHV0W2ldICYgMHg3KSA8PCAxOCB8IChpbnB1dFtpICsgMV0gJiAweDNGKSA8PCAxMiB8XG4gICAgICAgICAgICAgICAgICAgIChpbnB1dFtpICsgMl0gJiAweDNGKSA8PCA2IHwgKGlucHV0W2kgKyAzXSAmIDB4M0YpO1xuICAgICAgICAgIGlmICh1Y3M0ID4gMHgxMDAwMCAmJiB1Y3M0IDwgMHgxMTAwMDApIHtcbiAgICAgICAgICAgIHVjczQgLT0gMHgxMDAwMDtcbiAgICAgICAgICAgIG91dC5wdXNoKFN0cmluZy5mcm9tQ2hhckNvZGUoKHVjczQgPj4+IDEwKSB8IDB4RDgwMCkpO1xuICAgICAgICAgICAgb3V0LnB1c2goU3RyaW5nLmZyb21DaGFyQ29kZSgodWNzNCAmIDB4M0ZGKSB8IDB4REMwMCkpO1xuICAgICAgICAgICAgaSArPSA0O1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBvdXQucHVzaChTdHJpbmcuZnJvbUNoYXJDb2RlKDB4RkZGRCkpO1xuICAgICAgKytpO1xuICAgIH1cblxuICAgIHJldHVybiBvdXQuam9pbignJyk7XG4gIH1cblxuICBzdGF0aWMgX2NoZWNrQ29udGludWF0aW9uICh1aW50OGFycmF5LCBzdGFydCwgY2hlY2tMZW5ndGgpIHtcbiAgICBsZXQgYXJyYXkgPSB1aW50OGFycmF5O1xuICAgIGlmIChzdGFydCArIGNoZWNrTGVuZ3RoIDwgYXJyYXkubGVuZ3RoKSB7XG4gICAgICB3aGlsZSAoY2hlY2tMZW5ndGgtLSkge1xuICAgICAgICBpZiAoKGFycmF5Wysrc3RhcnRdICYgMHhDMCkgIT09IDB4ODApIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFVURjg7XG4iLCJjbGFzcyBBdWRpb0N0eCB7XG4gIGNvbnN0cnVjdG9yIChjb25maWcpIHtcbiAgICB0aGlzLmNvbmZpZyA9IE9iamVjdC5hc3NpZ24oe30sIGNvbmZpZyk7XG4gICAgbGV0IEF1ZGlvQ29udGV4dCA9ICB3aW5kb3cuQXVkaW9Db250ZXh0IHx8IHdpbmRvdy53ZWJraXRBdWRpb0NvbnRleHQ7XG4gICAgdGhpcy5jb250ZXh0ID0gbmV3IEF1ZGlvQ29udGV4dCgpO1xuICAgIHRoaXMuZ2Fpbk5vZGUgPSB0aGlzLmNvbnRleHQuY3JlYXRlR2FpbigpO1xuICAgIHRoaXMuZ2Fpbk5vZGUuY29ubmVjdCh0aGlzLmNvbnRleHQuZGVzdGluYXRpb24pO1xuICAgIHRoaXMubWV0YSA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLnNhbXBsZXMgPSBbXTtcbiAgICB0aGlzLnByZWxvYWRUaW1lID0gdGhpcy5jb25maWcucHJlbG9hZFRpbWUgfHwgMztcbiAgICB0aGlzLmR1cmF0aW9uID0gMDtcblxuICAgIHRoaXMuX2N1cnJlbnRCdWZmZXIgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5fbmV4dEJ1ZmZlciA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLl9sYXN0cHRzID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuX3ByZURlY29kZSA9IFtdO1xuICAgIHRoaXMuX2N1cnJlbnRUaW1lID0gMDtcbiAgICB0aGlzLl9kZWNvZGluZyA9IGZhbHNlO1xuICAgIFxuICAgIC8vIOiusOW9leWklumDqOS8oOi+k+eahOeKtuaAgVxuICAgIHRoaXMuX3BsYXllZCA9IGZhbHNlO1xuICB9XG5cbiAgZ2V0IGN1cnJlbnRUaW1lKCkge1xuICAgIHJldHVybiB0aGlzLl9jdXJyZW50VGltZTtcbiAgfVxuXG4gIGRlY29kZUF1ZGlvIChhdWRpb1RyYWNrKSB7XG4gICAgbGV0IHtzYW1wbGVzfSA9IGF1ZGlvVHJhY2s7XG4gICAgbGV0IGRhdGEgPSBzYW1wbGVzO1xuICAgIGF1ZGlvVHJhY2suc2FtcGxlcyA9IFtdO1xuICAgIHRoaXMuc2V0QXVkaW9EYXRhKGRhdGEpOyBcbiAgfVxuICBzZXRBdWRpb0RhdGEgKGRhdGEpIHtcbiAgICBmb3IobGV0IGkgPSAwO2kgPCBkYXRhLmxlbmd0aDsgaSsrKSB7XG4gICAgICBkYXRhW2ldLnB0cyA9IChkYXRhW2ldLnB0cyA9PT0gdW5kZWZpbmVkKSA/IGRhdGFbaV0uZHRzIDogZGF0YVtpXS5wdHM7XG4gICAgICB0aGlzLl9wcmVEZWNvZGUucHVzaChkYXRhW2ldKTtcbiAgICB9XG4gICAgaWYodGhpcy5fcHJlRGVjb2RlLmxlbmd0aCA+IDApIHtcbiAgICAgIGlmKHRoaXMuX2xhc3RwdHMgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICB0aGlzLl9sYXN0cHRzID0gdGhpcy5fcHJlRGVjb2RlWzBdLnB0cztcbiAgICAgIH1cbiAgICAgIGlmKCh0aGlzLl9wcmVEZWNvZGVbdGhpcy5fcHJlRGVjb2RlLmxlbmd0aCAtIDFdLnB0cyAtIHRoaXMuX2xhc3RwdHMpIC8gMTAwMCA+IHRoaXMucHJlbG9hZFRpbWUpIHtcbiAgICAgICAgdGhpcy5kZWNvZGVBQUMoKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBkZWNvZGVBQUMoKSB7XG4gICAgaWYodGhpcy5fZGVjb2RpbmcpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5fZGVjb2RpbmcgPSB0cnVlO1xuICAgIGxldCBkYXRhID0gdGhpcy5fcHJlRGVjb2RlO1xuICAgIGxldCBzYW1wbGVzID0gW107XG4gICAgbGV0IF90aGlzID0gdGhpcztcbiAgICBsZXQgc2FtcGxlID0gZGF0YS5zaGlmdCgpO1xuICAgIHdoaWxlKHNhbXBsZSkge1xuICAgICAgbGV0IHNhbXBsZURhdGEgPSBBdWRpb0N0eC5nZXRBQUNEYXRhKHRoaXMubWV0YSwgc2FtcGxlKVxuICAgICAgc2FtcGxlcy5wdXNoKHNhbXBsZURhdGEpO1xuICAgICAgdGhpcy5fbGFzdHB0cyA9IHNhbXBsZS5wdHM7XG4gICAgICBzYW1wbGUgPSBkYXRhLnNoaWZ0KClcbiAgICB9XG4gICAgbGV0IGJ1ZmZlciA9IEF1ZGlvQ3R4LmNvbWJpbGVEYXRhKHNhbXBsZXMpO1xuICAgIHRyeSB7XG4gICAgICB0aGlzLmNvbnRleHQuZGVjb2RlQXVkaW9EYXRhKGJ1ZmZlci5idWZmZXIsIGZ1bmN0aW9uKGJ1ZmZlcikge1xuICAgICAgICBsZXQgYXVkaW9Tb3VyY2UgPSBfdGhpcy5jb250ZXh0LmNyZWF0ZUJ1ZmZlclNvdXJjZSgpO1xuICAgICAgICBhdWRpb1NvdXJjZS5idWZmZXIgPSBidWZmZXI7XG4gICAgICAgIGF1ZGlvU291cmNlLm9uZW5kZWQgPSBfdGhpcy5vblNvdXJjZUVuZGVkLmJpbmQoX3RoaXMpO1xuICAgICAgICBfdGhpcy5zYW1wbGVzLnB1c2goe1xuICAgICAgICAgIHRpbWU6IF90aGlzLmR1cmF0aW9uLFxuICAgICAgICAgIGR1cmF0aW9uOiBidWZmZXIuZHVyYXRpb24sXG4gICAgICAgICAgZGF0YTogYXVkaW9Tb3VyY2VcbiAgICAgICAgfSlcblxuICAgICAgICBfdGhpcy5kdXJhdGlvbiArPSBidWZmZXIuZHVyYXRpb247XG5cbiAgICAgICAgaWYoIV90aGlzLl9jdXJyZW50QnVmZmVyKSB7XG4gICAgICAgICAgX3RoaXMuX2N1cnJlbnRCdWZmZXIgPSBfdGhpcy5nZXRUaW1lQnVmZmVyKF90aGlzLmN1cnJlbnRUaW1lKTtcblxuICAgICAgICAgIGlmKF90aGlzLl9wbGF5ZWQpIHtcbiAgICAgICAgICAgIF90aGlzLnBsYXkoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZighX3RoaXMuX25leHRCdWZmZXIgJiYgX3RoaXMuX2N1cnJlbnRCdWZmZXIpIHtcbiAgICAgICAgICBfdGhpcy5fbmV4dEJ1ZmZlciA9IF90aGlzLmdldFRpbWVCdWZmZXIoX3RoaXMuY3VycmVudFRpbWUgKyBfdGhpcy5fY3VycmVudEJ1ZmZlci5kdXJhdGlvbik7XG4gICAgICAgIH1cbiAgICAgICAgX3RoaXMuX2RlY29kaW5nID0gZmFsc2U7XG5cbiAgICAgICAgaWYoKF90aGlzLl9wcmVEZWNvZGUubGVuZ3RoID4gMCAmJiBfdGhpcy5fcHJlRGVjb2RlW190aGlzLl9wcmVEZWNvZGUubGVuZ3RoIC0gMV0ucHRzIC0gX3RoaXMuX2xhc3RwdHMpIC8gMTAwMCA+PSBfdGhpcy5wcmVsb2FkVGltZSkge1xuICAgICAgICAgIF90aGlzLmRlY29kZUFBQygpO1xuICAgICAgICB9XG4gICAgICB9KVxuICAgIH0gY2F0Y2goZXJyKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGVycik7XG4gICAgfVxuICB9XG5cbiAgb25Tb3VyY2VFbmRlZCgpIHtcbiAgICBpZighdGhpcy5fbmV4dEJ1ZmZlciB8fCAhdGhpcy5fcGxheWVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGxldCBhdWRpb1NvdXJjZSA9IHRoaXMuX25leHRCdWZmZXIuZGF0YTtcbiAgICBhdWRpb1NvdXJjZS5zdGFydCgpO1xuICAgIGF1ZGlvU291cmNlLmNvbm5lY3QodGhpcy5nYWluTm9kZSk7XG4gICAgdGhpcy5fY3VycmVudEJ1ZmZlciA9IHRoaXMuX25leHRCdWZmZXI7XG4gICAgdGhpcy5fY3VycmVudFRpbWUgPSB0aGlzLl9jdXJyZW50QnVmZmVyLnRpbWU7XG4gICAgdGhpcy5fbmV4dEJ1ZmZlciA9IHRoaXMuZ2V0VGltZUJ1ZmZlcih0aGlzLmN1cnJlbnRUaW1lKTtcbiAgICBpZih0aGlzLl9jdXJyZW50QnVmZmVyKSB7XG4gICAgICB0aGlzLl9uZXh0QnVmZmVyID0gdGhpcy5nZXRUaW1lQnVmZmVyKHRoaXMuY3VycmVudFRpbWUgKyB0aGlzLl9jdXJyZW50QnVmZmVyLmR1cmF0aW9uKTtcbiAgICB9XG4gIH1cblxuICBwbGF5KCkge1xuICAgIHRoaXMuX3BsYXllZCA9IHRydWU7XG4gICAgaWYoIXRoaXMuX2N1cnJlbnRCdWZmZXIpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgbGV0IGF1ZGlvU291cmNlID0gdGhpcy5fY3VycmVudEJ1ZmZlci5kYXRhO1xuICAgIGF1ZGlvU291cmNlLmNvbm5lY3QodGhpcy5nYWluTm9kZSk7XG4gICAgYXVkaW9Tb3VyY2Uuc3RhcnQoKTtcbiAgfVxuXG4gIGdldFRpbWVCdWZmZXIodGltZSkge1xuICAgIGxldCByZXQ7XG4gICAgZm9yKGxldCBpID0gMDsgaSA8IHRoaXMuc2FtcGxlcy5sZW5ndGg7IGkrKykge1xuICAgICAgbGV0IHNhbXBsZSA9IHRoaXMuc2FtcGxlc1tpXVxuICAgICAgaWYoc2FtcGxlLnRpbWUgPD0gdGltZSAmJiAoc2FtcGxlLnRpbWUgKyBzYW1wbGUuZHVyYXRpb24pID4gdGltZSkge1xuICAgICAgICByZXQgPSBzYW1wbGU7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmV0O1xuICB9XG5cbiAgc2V0QXVkaW9NZXRhRGF0YShtZXRhKSB7XG4gICAgdGhpcy5tZXRhID0gbWV0YTtcbiAgfVxuXG4gIHN0YXRpYyBnZXRBQUNEYXRhKG1ldGEsIHNhbXBsZSkge1xuICAgIGxldCBidWZmZXIgPSBuZXcgVWludDhBcnJheShzYW1wbGUuZGF0YS5ieXRlTGVuZ3RoICsgNyk7XG4gICAgbGV0IGFkdHMgPSBBdWRpb0N0eC5nZXRBZHRzKG1ldGEsIHNhbXBsZS5kYXRhKTtcbiAgICBidWZmZXIuc2V0KGFkdHMpO1xuICAgIGJ1ZmZlci5zZXQoc2FtcGxlLmRhdGEsIDcpO1xuICAgIHJldHVybiBidWZmZXI7XG4gIH1cblxuICBzdGF0aWMgY29tYmlsZURhdGEoc2FtcGxlcykge1xuICAgIC8vIGdldCBsZW5ndGhcbiAgICBsZXQgbGVuZ3RoID0gMDtcbiAgICBmb3IobGV0IGkgPSAwLGsgPSBzYW1wbGVzLmxlbmd0aDsgaSA8IGs7IGkrKykge1xuICAgICAgbGVuZ3RoICs9IHNhbXBsZXNbaV0uYnl0ZUxlbmd0aDtcbiAgICB9XG4gICAgXG4gICAgbGV0IHJldCA9IG5ldyBVaW50OEFycmF5KGxlbmd0aCk7XG4gICAgbGV0IG9mZnNldCA9IDA7XG4gICAgLy8gY29tYmlsZSBkYXRhO1xuICAgIGZvcihsZXQgaSA9IDAsayA9IHNhbXBsZXMubGVuZ3RoOyBpIDwgazsgaSsrKSB7XG4gICAgICByZXQuc2V0KHNhbXBsZXNbaV0sIG9mZnNldCk7XG4gICAgICBvZmZzZXQgKz0gc2FtcGxlc1tpXS5ieXRlTGVuZ3RoO1xuICAgIH1cbiAgICByZXR1cm4gcmV0O1xuICB9XG5cbiAgc3RhdGljIGdldEFkdHMobWV0YSwgZGF0YSkge1xuICAgIGxldCBhZHRzID0gbmV3IFVpbnQ4QXJyYXkoNyk7XG4gICAgXG4gICAgLy8g6K6+572u5ZCM5q2l5L2NIDB4ZmZmIDEyYml0IFxuICAgIGFkdHNbMF0gPSAweGZmO1xuICAgIGFkdHNbMV0gPSAweGYwO1xuXG4gICAgLy8gT2JqZWN0IGRhdGEgKOayoeS7gOS5iOS6uueUqE1QRUctMuS6hu+8jEhMU+WSjEZMVuS5n+WFqOaYr01QRUctNO+8jOi/memHjOebtOaOpTApICAxYml0IFxuICAgIC8vIExldmVsIGFsd2F5cyAwMCAyYml0IFxuICAgIC8vIENSQyBhbHdheXMgMSAxYml0IFxuICAgIGFkdHNbMV0gPSBhZHRzWzFdIHwgMHgwMTtcblxuICAgIC8vIHByb2ZpbGUgMmJpdFxuICAgIGFkdHNbMl0gPSAweGMwICYgKChtZXRhLm9iamVjdFR5cGUtMSkgPDwgNik7XG5cbiAgICAvL3NhbXBsZUZyZXF1ZW5jeUluZGV4XG4gICAgYWR0c1syXSA9IGFkdHNbMl0gfCAoMHgzYyAmIChtZXRhLnNhbXBsZVJhdGVJbmRleCA8PCAyKSlcblxuICAgIC8vcHJpdmF0ZSBiaXQgMCAxYml0XG4gICAgLy8gY2hhbmVsIGNvbmZpZ3VyYXRpb24gM2JpdFxuICAgIGFkdHNbMl0gPSBhZHRzWzJdIHwgKDB4MDEgJiBtZXRhLmNoYW5uZWxDb3VudCA+PiAyKTtcbiAgICBhZHRzWzNdID0gMHhjMCAmIChtZXRhLmNoYW5uZWxDb3VudCA8PCA2KTtcblxuICAgIC8vIG9yaWdpbmFsX2NvcHk6IDAgMWJpdFxuICAgIC8vIGhvbWU6IDAgMWJpdFxuXG4gICAgLy8gYWR0c192YXJpYWJsZV9oZWFkZXIoKVxuICAgIC8vIGNvcHlyaWdodGVkX2lkX2JpdCAwIDFiaXRcbiAgICAvLyBjb3B5cmlnaHRlZF9pZF9zdGFydCAwIDFiaXRcblxuICAgIC8vIGFhY19mcmFtZV9sZW5ndGggMTNiaXQ7XG4gICAgbGV0IGFhY2ZyYW1lbGVuZ3RoID0gZGF0YS5ieXRlTGVuZ3RoICsgNztcblxuICAgIGFkdHNbM10gPSBhZHRzWzNdIHwgKDB4MDMgJiBhYWNmcmFtZWxlbmd0aCA+PiAxMSk7XG4gICAgYWR0c1s0XSA9IDB4ZmYgJiAoYWFjZnJhbWVsZW5ndGggPj4gMyk7XG4gICAgYWR0c1s1XSA9IDB4ZTAgJiAoYWFjZnJhbWVsZW5ndGggPDwgNSk7XG5cbiAgICAvLyBhZHRzX2J1ZmZlcl9mdWxsbmVzcyAweDdmZiAxMWJpdFxuICAgIGFkdHNbNV0gPSBhZHRzWzVdIHwgMHgxZlxuICAgIGFkdHNbNl0gPSAweGZjO1xuXG4gICAgLy8gbnVtYmVyX29mX3Jhd19kYXRhX2Jsb2Nrc19pbl9mcmFtZSAwIDJiaXQ7XG4gICAgcmV0dXJuIGFkdHM7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgQXVkaW9DdHg7XG4iLCJpbXBvcnQgVmlkZW9DdHggZnJvbSAnLi92aWRlby1jb250ZXh0JztcbmltcG9ydCBBdWRpb0N0eCBmcm9tICcuL2F1ZGlvLWNvbnRleHQnO1xuaW1wb3J0IHsgZ2V0VGlja2VyIH0gZnJvbSAnLi90aWNrZXInO1xuXG4vKipcbiAqIOmfs+eUu+WQjOatpeiwg+WSjOWZqFxuICovXG5jbGFzcyBBVlJlY29uY2lsZXIge1xuICBjb25zdHJ1Y3RvciAocHJvcHMpIHtcbiAgICB0aGlzLmFDdHggPSBwcm9wcy5hQ3R4O1xuICAgIHRoaXMudkN0eCA9IHByb3BzLnZDdHg7XG4gICAgdGhpcy5fdGlja2VyID0gbnVsbDtcbiAgICB0aGlzLm9uVGljayA9IHRoaXMub25UaWNrLmJpbmQodGhpcylcblxuICAgIHRoaXMuaW5pdCgpXG4gIH1cblxuICBpbml0ICgpIHtcbiAgICB0aGlzLl90aWNrZXIgPSBuZXcgKGdldFRpY2tlcigpKSh7IGludGVydmFsOiAxMDAgfSk7XG4gICAgdGhpcy5fdGlja2VyLm5leHRUaWNrKHRoaXMub25UaWNrKVxuICB9XG5cbiAgb25UaWNrICgpIHtcbiAgICB0aGlzLl90aWNrZXIubmV4dFRpY2sodGhpcy5vblRpY2spXG4gIH1cblxuICBkb1JlY29uY2lsZSAoKSB7XG4gICAgY29uc3QgdkN1clRpbWUgPSB0aGlzLnZDdHguY3VycmVudFRpbWU7XG4gICAgY29uc3QgYUN1clRpbWUgPSB0aGlzLmFDdHguY3VycmVudFRpbWU7XG4gICAgY29uc3QgZ2FwID0gdkN1clRpbWUgLSBhQ3VyVGltZTtcbiAgICBpZiAoZ2FwID4gMC4xKSB7IC8vIGF1ZGlvIGRlbGF5ZWQgZm9yIG1vcmUgdGhhbiAxMDBtc1xuICAgICAgdGhpcy52Q3R4LnBhdXNlKClcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICB0aGlzLnZDdHgucGxheSgpXG4gICAgICB9LCBnYXAgKiAxMDAwKVxuICAgIH0gZWxzZSBpZiAoZ2FwIDwgLTAuMDIpIHtcbiAgICAgIHRoaXMudkN0eC5jdXJyZW50VGltZVxuICAgIH1cbiAgfVxufVxuXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW5kZWZcbmNsYXNzIE1vYmlsZVZpZGVvIGV4dGVuZHMgSFRNTEVsZW1lbnQge1xuICBjb25zdHJ1Y3RvciAoY29uZmlnKSB7XG4gICAgc3VwZXIoKTtcbiAgICBsZXQgX3RoaXMgPSB0aGlzO1xuICAgIHRoaXMudkN0eCA9IG5ldyBWaWRlb0N0eCgpO1xuICAgIHRoaXMuYUN0eCA9IG5ldyBBdWRpb0N0eChjb25maWcpO1xuXG4gICAgdGhpcy52Q3R4Lm9uY2FucGxheSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIF90aGlzLmFwcGVuZENoaWxkKF90aGlzLnZDdHguY2FudmFzKTtcbiAgICAgIGNvbnNvbGUubG9nKCdjYW5wbGF5JywgX3RoaXMpO1xuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVuZGVmXG4gICAgICBfdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudCgnY2FucGxheScpKTtcbiAgICB9XG4gICAgdGhpcy5oaXN0b3J5VGltZSA9IDA7XG4gIH1cblxuICBkZXN0cm95ICgpIHtcblxuICB9XG5cbiAgb25EZW11eENvbXBsZXRlICh2aWRlb1RyYWNrLCBhdWRpb1RyYWNrKSB7XG4gICAgdGhpcy5hQ3R4LmRlY29kZUF1ZGlvKGF1ZGlvVHJhY2spO1xuICAgIHRoaXMudkN0eC5kZWNvZGVWaWRlbyh2aWRlb1RyYWNrKTtcbiAgfVxuXG4gIHNldEF1ZGlvTWV0YSAobWV0YSkge1xuICAgIHRoaXMuYUN0eC5zZXRBdWRpb01ldGFEYXRhKG1ldGEpO1xuICB9XG5cbiAgc2V0VmlkZW9NZXRhIChtZXRhKSB7XG4gICAgdGhpcy52Q3R4LnNldFZpZGVvTWV0YURhdGEobWV0YSk7XG4gIH1cblxuICBnZXQgY3VycmVudFRpbWUgKCkge1xuXG4gIH1cblxuICBwbGF5ICgpIHtcbiAgICB0aGlzLmFDdHgucGxheSgpO1xuICAgIHRoaXMudkN0eC5wbGF5KCk7XG4gIH1cbn1cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bmRlZlxuY3VzdG9tRWxlbWVudHMuZGVmaW5lKCdtb2JpbGUtdmlkZW8nLCBNb2JpbGVWaWRlbyk7XG4iLCJjbGFzcyBTb3VyY2VCdWZmZXIge1xuICBjb25zdHJ1Y3RvciAoY29uZmlnKSB7XG4gICAgdGhpcy5jb25maWcgPSBPYmplY3QuYXNzaWduKHt9LCBjb25maWcpO1xuICAgIHRoaXMudHlwZSA9IHRoaXMuY29uZmlnLnR5cGU7XG4gICAgdGhpcy5idWZmZXIgPSBbXTtcbiAgICB0aGlzLmN1cnJlbnRHb3AgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5fbGFzdEdldCA9IHVuZGVmaW5lZDtcbiAgfVxuXG4gIHB1c2ggKGZyYW1lKSB7XG4gICAgaWYgKHRoaXMudHlwZSA9PT0gJ3ZpZGVvJykge1xuICAgICAgaWYgKGZyYW1lLmlzS2V5ZnJhbWUpIHtcbiAgICAgICAgbGV0IGN1cnJlbnRHb3AgPSB7XG4gICAgICAgICAgc2FtcGxlczogW10sXG4gICAgICAgICAgc3RhcnQ6IGZyYW1lLmR0cyxcbiAgICAgICAgICBlbmQ6IGZyYW1lLmR0cyxcbiAgICAgICAgICBuZXh0R29wOiB1bmRlZmluZWRcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKHRoaXMuY3VycmVudEdvcCkge1xuICAgICAgICAgIHRoaXMuY3VycmVudEdvcC5uZXh0R29wID0gY3VycmVudEdvcDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmN1cnJlbnRHb3AgPSBjdXJyZW50R29wO1xuICAgICAgICB0aGlzLmJ1ZmZlci5wdXNoKHRoaXMuY3VycmVudEdvcCk7XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLmN1cnJlbnRHb3ApIHtcbiAgICAgICAgdGhpcy5jdXJyZW50R29wLnNhbXBsZXMucHVzaChmcmFtZSk7XG5cbiAgICAgICAgaWYgKGZyYW1lLmR0cyA8IHRoaXMuY3VycmVudEdvcC5zdGFydCkge1xuICAgICAgICAgIHRoaXMuY3VycmVudEdvcC5zdGFydCA9IGZyYW1lLmR0cztcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChmcmFtZS5kdHMgPiB0aGlzLmN1cnJlbnRHb3AuZW5kKSB7XG4gICAgICAgICAgdGhpcy5jdXJyZW50R29wLmVuZCA9IGZyYW1lLmR0cztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGdldCAodGltZSkge1xuICAgIGlmICh0aGlzLnR5cGUgPT09ICd2aWRlbycpIHtcbiAgICAgIGlmICh0aGlzLmJ1ZmZlci5sZW5ndGggPCAxKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaWYgKHRpbWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBsZXQgc2FtcGxlID0gdGhpcy5fZ2V0TmV4dCgpO1xuICAgICAgICByZXR1cm4gc2FtcGxlO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIF9nZXROZXh0ICgpIHtcbiAgICBpZiAoIXRoaXMuX2xhc3RHZXQpIHtcbiAgICAgIGxldCBnb3AgPSB0aGlzLmJ1ZmZlclswXTtcbiAgICAgIGlmIChnb3Auc2FtcGxlcy5sZW5ndGggPCAxKSB7XG4gICAgICAgIHJldHVyblxuICAgICAgfVxuXG4gICAgICB0aGlzLl9sYXN0R2V0ID0ge1xuICAgICAgICBnb3AsXG4gICAgICAgIGluZGV4OiAwXG4gICAgICB9XG4gICAgICByZXR1cm4gZ29wLnNhbXBsZXNbMF07XG4gICAgfSBlbHNlIHtcbiAgICAgIGxldCBnb3AgPSB0aGlzLl9sYXN0R2V0LmdvcDtcbiAgICAgIGxldCBzYW1wbGUgPSBnb3Auc2FtcGxlc1t0aGlzLl9sYXN0R2V0LmluZGV4ICsgMV07XG4gICAgICBpZiAoc2FtcGxlKSB7XG4gICAgICAgIHRoaXMuX2xhc3RHZXQuaW5kZXggPSB0aGlzLl9sYXN0R2V0LmluZGV4ICsgMTtcbiAgICAgICAgcmV0dXJuIHNhbXBsZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGdvcCA9IGdvcC5uZXh0R29wO1xuICAgICAgICBpZiAoIWdvcCB8fCBnb3Auc2FtcGxlcy5sZW5ndGggPCAxKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHNhbXBsZSA9IGdvcC5zYW1wbGVzWzBdO1xuICAgICAgICB0aGlzLl9sYXN0R2V0ID0ge1xuICAgICAgICAgIGdvcCxcbiAgICAgICAgICBpbmRleDogMFxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzYW1wbGU7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmVtb3ZlIChzdGFydCwgZW5kKSB7XG4gICAgaWYgKHRoaXMuYnVmZmVyLmxlbmd0aCA8IDApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBsZXQgaSA9IDA7XG4gICAgbGV0IGdvcCA9IHRoaXMuYnVmZmVyWzBdO1xuICAgIHdoaWxlIChnb3ApIHtcbiAgICAgIGlmIChnb3AuZW5kIDwgZW5kICYmIGdvcC5zdGFydCA+PSBzdGFydCkge1xuICAgICAgICBkZWxldGUgdGhpcy5idWZmZXJbaV07XG4gICAgICAgIGdvcCA9IHRoaXMuYnVmZmVyW2ldO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaSArPSAxO1xuICAgICAgICBnb3AgPSB0aGlzLmJ1ZmZlcltpXTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgU291cmNlQnVmZmVyO1xuIiwiLyoqXG4gKiBAYXV0aG9yIGZ1eXVoYW9AYnl0ZWRhbmNlLmNvbVxuICovXG5cbmNsYXNzIFRpY2tlciB7XG4gIGNvbnN0cnVjdG9yIChvcHRpb25zKSB7XG4gICAgdGhpcy5vcHRpb25zID0gT2JqZWN0LmFzc2lnbih7fSwgb3B0aW9ucyB8fCB7fSwge1xuICAgICAgaW50ZXJ2YWw6IDQwXG4gICAgfSlcblxuICAgIHRoaXMuY2FsbGJhY2tzID0gW11cbiAgfVxuXG4gIG5leHRUaWNrKC4uLmNhbGxiYWNrcykge1xuICAgIHRoaXMuY2FsbGJhY2tzID0gY2FsbGJhY2tzXG4gIH1cblxuICBvblRpY2sgKCkge1xuICAgIGZvciAobGV0IGkgPSAwLCBsZW4gPSB0aGlzLmNhbGxiYWNrcy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgY29uc3QgY2FsbGJhY2sgPSB0aGlzLmNhbGxiYWNrc1tpXVxuICAgICAgY2FsbGJhY2soKVxuICAgIH1cbiAgfVxuXG4gIHNldEludGVydmFsIChpbnRlcnZhbCkge1xuICAgIHRoaXMub3B0aW9ucy5pbnRlcnZhbCA9IGludGVydmFsXG4gIH1cbn1cblxuLyoqXG4gKiB0aWNrZXIgdXNlIHJlcXVlc3RBbmltYXRpb25GcmFtZVxuICovXG5jbGFzcyBSYWZUaWNrZXIgZXh0ZW5kcyBUaWNrZXIge1xuICBjb25zdHJ1Y3RvciAocHJvcHMpIHtcbiAgICBzdXBlcihwcm9wcyk7XG4gICAgdGhpcy5wcmV2ID0gbnVsbDtcbiAgICB0aGlzLnRpbWVySWQgPSBudWxsXG4gICAgdGhpcy5fc3ViVGltZXJJZCA9IG51bGxcbiAgfVxuXG4gIG5leFRpY2sgKC4uLmNhbGxiYWNrcykge1xuICAgIHN1cGVyLm5leHRUaWNrKC4uLmNhbGxiYWNrcylcbiAgICBjb25zdCB0aWNrRnVuYyA9IFJhZlRpY2tlci5nZXRUaWNrRnVuYygpXG4gICAgdGlja0Z1bmModGhpcy50aWNrLmJpbmQodGhpcykpXG4gIH1cblxuICB0aWNrICh0aW1lc3RhbXApIHtcbiAgICBpZiAoIXRoaXMucHJldikge1xuICAgICAgdGhpcy5wcmV2ID0gdGltZXN0YW1wXG4gICAgfVxuXG4gICAgY29uc3QgeyBpbnRlcnZhbCB9ID0gdGhpcy5vcHRpb25zO1xuICAgIGNvbnN0IHsgZ2V0VGlja0Z1bmMgfSA9IFJhZlRpY2tlcjtcblxuICAgIGNvbnN0IHRpY2tGdW5jID0gZ2V0VGlja0Z1bmMoKVxuICAgIGNvbnN0IHJlc3QgPSAodGhpcy5wcmV2ICsgaW50ZXJ2YWwpIC0gdGltZXN0YW1wXG5cbiAgICBjb25zdCBuZXh0VGljayA9ICgpID0+IHtcbiAgICAgIHRoaXMudGltZXJJZCA9IHRpY2tGdW5jKHRoaXMudGljay5iaW5kKHRoaXMpKVxuICAgIH1cblxuICAgIGNvbnN0IHJ1bkNhbGxiYWNrID0gKCkgPT4ge1xuICAgICAgdGhpcy5wcmV2ID0gbnVsbDtcbiAgICAgIHRoaXMub25UaWNrKClcbiAgICB9XG5cbiAgICBpZiAocmVzdCA8PSAwKSB7XG4gICAgICBpZiAodGhpcy5fc3ViVGltZXJJZCkge1xuICAgICAgICB3aW5kb3cuY2xlYXJUaW1lb3V0KHRoaXMuX3N1YlRpbWVySWQpO1xuICAgICAgICB0aGlzLl9zdWJUaW1lcklkID0gbnVsbFxuICAgICAgfVxuICAgICAgcnVuQ2FsbGJhY2soKVxuICAgIH0gZWxzZSBpZiAocmVzdCA8PSAxMCkge1xuICAgICAgdGhpcy5fc3ViVGltZXJJZCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICBydW5DYWxsYmFjaygpXG4gICAgICB9LCByZXN0KVxuICAgIH0gZWxzZSB7XG4gICAgICBuZXh0VGljaygpXG4gICAgfVxuICB9XG5cbiAgc3RvcCAoKSB7XG4gICAgaWYgKHRoaXMudGltZXJJZCkge1xuICAgICAgY29uc3QgY2FuY2VsRnVuYyA9IFJhZlRpY2tlci5nZXRDYW5jZWxGdW5jKClcblxuICAgICAgY2FuY2VsRnVuYyh0aGlzLnRpbWVySWQpXG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGdldFRpY2tGdW5jICgpIHtcbiAgICByZXR1cm4gd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSB8fCB3aW5kb3cud2Via2l0UmVxdWVzdEFuaW1hdGlvbkZyYW1lXG4gIH1cblxuICBzdGF0aWMgZ2V0Q2FuY2VsRnVuYyAoKSB7XG4gICAgcmV0dXJuIHdpbmRvdy5jYW5jZWxBbmltYXRpb25GcmFtZSB8fCB3aW5kb3cud2Via2l0Q2FuY2VsQW5pbWF0aW9uRnJhbWVcbiAgfVxuXG4gIHN0YXRpYyBpc1N1cHBvcnRlZCAoKSB7XG4gICAgcmV0dXJuIFJhZlRpY2tlci5nZXRUaWNrRnVuYygpICE9PSB1bmRlZmluZWRcbiAgfVxufVxuXG4vKipcbiAqIHVzZSBzZXRUaW1lb3V0IGZvciBicm93c2VycyB3aXRob3V0IHJhZiBzdXBwb3J0XG4gKi9cbmNsYXNzIFRpbWVvdXRUaWNrZXIgZXh0ZW5kcyBUaWNrZXIge1xuICBjb25zdHJ1Y3Rvcihjb25maWcpIHtcbiAgICBzdXBlcihjb25maWcpXG4gICAgdGhpcy50aW1lb3V0SWQgPSBudWxsXG5cbiAgfVxuXG4gIG5leHRUaWNrICguLi5jYWxsYmFja3MpIHtcbiAgICBzdXBlci5uZXh0VGljayguLi5jYWxsYmFja3MpXG4gICAgdGhpcy50aW1lb3V0SWQgPSB3aW5kb3cuc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICB0aGlzLm9uVGljaygpO1xuICAgIH0sIHRoaXMub3B0aW9ucy5pbnRlcnZhbClcbiAgfVxuXG4gIHN0b3AgKCkge1xuICAgIGlmICh0aGlzLnRpbWVvdXRJZCkge1xuICAgICAgd2luZG93LmNsZWFyVGltZW91dCh0aGlzLnRpbWVvdXRJZClcbiAgICB9XG4gIH1cblxufVxuXG4vKipcbiAqIOi/lOWbnlRpY2tlcuaehOmAoOWHveaVsFxuICogQHJldHVybnMge1RpY2tlcn1cbiAqL1xuZXhwb3J0IGNvbnN0IGdldFRpY2tlciA9ICgpID0+IHtcbiAgaWYgKFJhZlRpY2tlci5pc1N1cHBvcnRlZCgpKSB7XG4gICAgcmV0dXJuIFJhZlRpY2tlclxuICB9IGVsc2Uge1xuICAgIHJldHVybiBUaW1lb3V0VGlja2VyXG4gIH1cbn1cbiIsImltcG9ydCBXb3JrZXJpZnkgZnJvbSAnd2Vid29ya2lmeS13ZWJwYWNrJ1xuaW1wb3J0IFN0cmVhbSBmcm9tICcuLi93cml0ZS9zdHJlYW0nO1xuaW1wb3J0IE5hbHVuaXQgZnJvbSAnLi4vLi4vLi4veGdwbGF5ZXItY29kZWMvc3JjL2gyNjQvbmFsdW5pdCc7XG5pbXBvcnQgWVVWQ2FudmFzIGZyb20gJy4veXV2LWNhbnZhcyc7XG5pbXBvcnQgU291cmNlQnVmZmVyIGZyb20gJy4vc291cmNlYnVmZmVyJztcbmNsYXNzIFZpZGVvQ2FudmFzIHtcbiAgY29uc3RydWN0b3IgKGNvbmZpZykge1xuICAgIHRoaXMuY29uZmlnID0gT2JqZWN0LmFzc2lnbih7fSwgY29uZmlnKTtcbiAgICB0aGlzLmNhbnZhcyA9IHRoaXMuY29uZmlnLmNhbnZhcyA/IHRoaXMuY29uZmlnLmNhbnZhcyA6IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xuICAgIHRoaXMuc291cmNlID0gbmV3IFNvdXJjZUJ1ZmZlcih7dHlwZTogJ3ZpZGVvJ30pO1xuICAgIHRoaXMucHJlbG9hZFRpbWUgPSB0aGlzLmNvbmZpZy5wcmVsb2FkVGltZSB8fCAzO1xuICAgIHRoaXMub25jYW5wbGF5ID0gdW5kZWZpbmVkO1xuICAgIHRoaXMubWV0YSA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLnJlYWR5U3RhdHVzID0gMDtcbiAgICB0aGlzLnBhdXNlZCA9IHRydWU7XG4gICAgdGhpcy5jb3VudCA9IDA7XG4gICAgdGhpcy5jdXJyZW50VGltZSA9IDA7XG4gICAgdGhpcy5sYXN0UGxheWVkID0gMDtcblxuICAgIHRoaXMuX2RlY29kZXJJbml0ZWQgPSBmYWxzZTtcbiAgICB0aGlzLl9hdmNjcHVzaGVkID0gZmFsc2U7XG4gICAgdGhpcy5fZGVjb2RlZEZyYW1lcyA9IHt9O1xuICAgIHRoaXMuX2xhc3RTYW1wbGVEdHMgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5fYmFzZUR0cyA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLmluaXRXYXNtV29ya2VyKCk7XG4gIH1cblxuICBwbGF5ICgpIHtcbiAgICB0aGlzLnBhdXNlZCA9IGZhbHNlO1xuICAgIHRoaXMuX29uVGltZXIoKTtcbiAgfVxuXG4gIHBhdXNlICgpIHtcbiAgICB0aGlzLnBhdXNlZCA9IHRydWU7XG4gIH1cblxuICBzZWVrICh0aW1lKSB7XG4gICAgdGhpcy5jdXJyZW50VGltZSA9IHRpbWU7XG4gIH1cblxuICBpbml0V2FzbVdvcmtlciAoKSB7XG4gICAgbGV0IF90aGlzID0gdGhpcztcbiAgICB0aGlzLndhc213b3JrZXIgPSBXb3JrZXJpZnkocmVxdWlyZS5yZXNvbHZlKCcuL3dvcmtlci5qcycpKTtcbiAgICB0aGlzLndhc213b3JrZXIucG9zdE1lc3NhZ2Uoe1xuICAgICAgbXNnOiAnaW5pdCdcbiAgICB9KVxuICAgIHRoaXMud2FzbXdvcmtlci5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgbXNnID0+IHtcbiAgICAgIHN3aXRjaCAobXNnLmRhdGEubXNnKSB7XG4gICAgICAgIGNhc2UgJ0RFQ09ERVJfUkVBRFknOlxuICAgICAgICAgIF90aGlzLl9kZWNvZGVySW5pdGVkID0gdHJ1ZTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnREVDT0RFRCc6XG4gICAgICAgICAgdGhpcy5fb25EZWNvZGVkKG1zZy5kYXRhKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIHNldFZpZGVvTWV0YURhdGEgKG1ldGEpIHtcbiAgICB0aGlzLm1ldGEgPSBtZXRhO1xuICAgIGlmICghdGhpcy5fZGVjb2RlckluaXRlZCkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIHRoaXMuX2F2Y2NwdXNoZWQgPSB0cnVlO1xuICAgIGxldCBkYXRhID0gbmV3IFVpbnQ4QXJyYXkobWV0YS5zcHMuYnl0ZUxlbmd0aCArIDQpO1xuICAgIGRhdGEuc2V0KFswLCAwLCAwLCAxXSlcbiAgICBkYXRhLnNldChtZXRhLnNwcywgNCk7XG4gICAgdGhpcy53YXNtd29ya2VyLnBvc3RNZXNzYWdlKHtcbiAgICAgIG1zZzogJ2RlY29kZScsXG4gICAgICBkYXRhOiBkYXRhXG4gICAgfSlcblxuICAgIGRhdGEgPSBuZXcgVWludDhBcnJheShtZXRhLnBwcy5ieXRlTGVuZ3RoICsgNCk7XG4gICAgZGF0YS5zZXQoWzAsIDAsIDAsIDFdKVxuICAgIGRhdGEuc2V0KG1ldGEucHBzLCA0KTtcbiAgICB0aGlzLndhc213b3JrZXIucG9zdE1lc3NhZ2Uoe1xuICAgICAgbXNnOiAnZGVjb2RlJyxcbiAgICAgIGRhdGE6IGRhdGFcbiAgICB9KVxuXG4gICAgaWYgKCF0aGlzLnl1dkNhbnZhcykge1xuICAgICAgbGV0IGNvbmZpZyA9IE9iamVjdC5hc3NpZ24oe21ldGEsIGNhbnZhczogdGhpcy5jYW52YXN9LCB0aGlzLmNvbmZpZyk7XG4gICAgICB0aGlzLnl1dkNhbnZhcyA9IG5ldyBZVVZDYW52YXMoY29uZmlnKTtcbiAgICB9XG4gICAgdGhpcy5yZWFkeVN0YXR1cyA9IDE7XG4gIH1cblxuICBkZWNvZGVWaWRlbyAodmlkZW9UcmFjaykge1xuICAgIGlmICghdGhpcy5fZGVjb2RlckluaXRlZCkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLl9hdmNjcHVzaGVkKSB7XG4gICAgICB0aGlzLnNldFZpZGVvTWV0YURhdGEodGhpcy5tZXRhKTtcbiAgICB9XG4gICAgbGV0IHsgc2FtcGxlcyB9ID0gdmlkZW9UcmFjaztcbiAgICBsZXQgc2FtcGxlID0gc2FtcGxlcy5zaGlmdCgpO1xuXG4gICAgd2hpbGUgKHNhbXBsZSkge1xuICAgICAgaWYgKCF0aGlzLl9iYXNlRHRzKSB7XG4gICAgICAgIHRoaXMuX2Jhc2VEdHMgPSBzYW1wbGUuZHRzO1xuICAgICAgfVxuICAgICAgdGhpcy5zb3VyY2UucHVzaChzYW1wbGUpO1xuICAgICAgc2FtcGxlID0gc2FtcGxlcy5zaGlmdCgpO1xuICAgIH1cblxuICAgIHRoaXMuX3ByZWxvYWQoKTtcbiAgfVxuXG4gIF9wcmVsb2FkICgpIHtcbiAgICBpZiAoIXRoaXMuX2xhc3RTYW1wbGVEdHMgfHwgdGhpcy5fbGFzdFNhbXBsZUR0cyAtIHRoaXMuX2Jhc2VEdHMgPCB0aGlzLmN1cnJlbnRUaW1lICsgdGhpcy5wcmVsb2FkVGltZSAqIDEwMDApIHtcbiAgICAgIGxldCBzYW1wbGUgPSB0aGlzLnNvdXJjZS5nZXQoKTtcbiAgICAgIGlmIChzYW1wbGUpIHtcbiAgICAgICAgdGhpcy5fbGFzdFNhbXBsZUR0cyA9IHNhbXBsZS5kdHM7XG4gICAgICAgIHRoaXMuX2FuYWx5c2VOYWwoc2FtcGxlKTtcbiAgICAgIH1cblxuICAgICAgd2hpbGUgKHNhbXBsZSAmJiB0aGlzLl9sYXN0U2FtcGxlRHRzIC0gdGhpcy5fYmFzZUR0cyA8IHRoaXMuY3VycmVudFRpbWUgKyB0aGlzLnByZWxvYWRUaW1lICogMTAwMCkge1xuICAgICAgICBzYW1wbGUgPSB0aGlzLnNvdXJjZS5nZXQoKTtcbiAgICAgICAgaWYgKHNhbXBsZSkge1xuICAgICAgICAgIHRoaXMuX2FuYWx5c2VOYWwoc2FtcGxlKTtcbiAgICAgICAgICB0aGlzLl9sYXN0U2FtcGxlRHRzID0gc2FtcGxlLmR0cztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIF9hbmFseXNlTmFsIChzYW1wbGUpIHtcbiAgICBsZXQgbmFscyA9IE5hbHVuaXQuZ2V0QXZjY05hbHMobmV3IFN0cmVhbShzYW1wbGUuZGF0YS5idWZmZXIpKTtcblxuICAgIGxldCBsZW5ndGggPSAwO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbmFscy5sZW5ndGg7IGkrKykge1xuICAgICAgbGV0IG5hbCA9IG5hbHNbaV07XG4gICAgICBsZW5ndGggKz0gbmFsLmJvZHkuYnl0ZUxlbmd0aCArIDQ7XG4gICAgfVxuICAgIGxldCBvZmZzZXQgPSAwO1xuICAgIGxldCBkYXRhID0gbmV3IFVpbnQ4QXJyYXkobGVuZ3RoKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG5hbHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGxldCBuYWwgPSBuYWxzW2ldO1xuICAgICAgZGF0YS5zZXQoWzAsIDAsIDAsIDFdLCBvZmZzZXQpO1xuICAgICAgb2Zmc2V0ICs9IDQ7XG4gICAgICBkYXRhLnNldChuZXcgVWludDhBcnJheShuYWwuYm9keSksIG9mZnNldCk7XG4gICAgICBvZmZzZXQgKz0gbmFsLmJvZHkuYnl0ZUxlbmd0aDtcbiAgICB9XG4gICAgdGhpcy53YXNtd29ya2VyLnBvc3RNZXNzYWdlKHtcbiAgICAgIG1zZzogJ2RlY29kZScsXG4gICAgICBkYXRhOiBkYXRhLFxuICAgICAgaW5mbzoge1xuICAgICAgICBkdHM6IHNhbXBsZS5kdHMsXG4gICAgICAgIHB0czogc2FtcGxlLnB0cyA/IHNhbXBsZS5wdHMgOiBzYW1wbGUuZHRzICsgc2FtcGxlLmN0cyxcbiAgICAgICAga2V5OiBzYW1wbGUuaXNLZXlmcmFtZVxuICAgICAgfVxuICAgIH0pXG4gIH1cblxuICBfb25EZWNvZGVkIChkYXRhKSB7XG4gICAgbGV0IHtkdHN9ID0gZGF0YS5pbmZvXG4gICAgdGhpcy5fZGVjb2RlZEZyYW1lc1tkdHNdID0gZGF0YTtcbiAgfVxuXG4gIF9vblRpbWVyICgpIHtcbiAgICBpZiAodGhpcy5wYXVzZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgbGV0IG5leHRUaW1lID0gMTAwMCAvIDYwO1xuICAgIGlmICh0aGlzLm1ldGEpIHtcbiAgICAgIGlmICh0aGlzLm1ldGEuZnJhbWVSYXRlICYmIHRoaXMubWV0YS5mcmFtZVJhdGUuZml4ZWQgJiYgdGhpcy5tZXRhLmZyYW1lUmF0ZS5mcHMpIHtcbiAgICAgICAgbmV4dFRpbWUgPSBNYXRoLmNlaWwoMTAwMCAvIHRoaXMubWV0YS5mcmFtZVJhdGUuZnBzKTtcbiAgICAgIH1cbiAgICAgIGxldCBmcmFtZVRpbWVzID0gT2JqZWN0LmtleXModGhpcy5fZGVjb2RlZEZyYW1lcyk7XG4gICAgICBpZiAoZnJhbWVUaW1lcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIHRoaXMuY3VycmVudFRpbWUgKz0gbmV4dFRpbWU7XG4gICAgICAgIGxldCBmcmFtZVRpbWUgPSAtMTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBmcmFtZVRpbWVzLmxlbmd0aCAmJiBmcmFtZVRpbWVzW2ldIC0gdGhpcy5fYmFzZUR0cyA8PSB0aGlzLmN1cnJlbnRUaW1lOyBpKyspIHtcbiAgICAgICAgICBmcmFtZVRpbWUgPSBmcmFtZVRpbWVzW2ldO1xuICAgICAgICB9XG4gICAgICAgIGxldCBmcmFtZSA9IHRoaXMuX2RlY29kZWRGcmFtZXNbZnJhbWVUaW1lXTtcbiAgICAgICAgaWYgKGZyYW1lKSB7XG4gICAgICAgICAgaWYgKHRoaXMub25jYW5wbGF5ICYmIHRoaXMucmVhZHlTdGF0dXMgPCA0KSB7XG4gICAgICAgICAgICB0aGlzLm9uY2FucGxheSgpO1xuICAgICAgICAgICAgdGhpcy5yZWFkeVN0YXR1cyA9IDQ7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnN0IGJlZm9yZSA9IERhdGUubm93KCk7XG4gICAgICAgICAgdGhpcy55dXZDYW52YXMucmVuZGVyKGZyYW1lLmJ1ZmZlciwgZnJhbWUud2lkdGgsIGZyYW1lLmhlaWdodCk7XG4gICAgICAgICAgY29uc29sZS5sb2coYCR7ZnJhbWVUaW1lfea4suafk+aXtumVv2AsIERhdGUubm93KCkgLSBiZWZvcmUpXG4gICAgICAgICAgZGVsZXRlIHRoaXMuX2RlY29kZWRGcmFtZXNbZnJhbWVUaW1lXTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBzZXRUaW1lb3V0KHRoaXMuX29uVGltZXIuYmluZCh0aGlzKSwgbmV4dFRpbWUpO1xuICB9XG5cbiAgX2NsZWFuQnVmZmVyICgpIHtcbiAgICB0aGlzLnNvdXJjZS5yZW1vdmUoMCwgdGhpcy5jdXJyZW50VGltZSk7XG4gIH1cblxuICBnZXQgZnBzICgpIHtcblxuICB9XG59XG5leHBvcnQgZGVmYXVsdCBWaWRlb0NhbnZhcztcbiIsImNvbnN0IE1BWF9TVFJFQU1fQlVGRkVSX0xFTkdUSCA9IDEwMjQgKiAxMDI0O1xudmFyIERlY29kZXIgPSBmdW5jdGlvbiAoc2VsZikge1xuICB0aGlzLmluaXRlZCA9IGZhbHNlO1xuICB0aGlzLnNlbGYgPSBzZWxmO1xuICB0aGlzLmluZm9saXN0ID0ge307XG4gIHNlbGYucGFyX2Jyb2Fkd2F5T25Ccm9hZHdheUluaXRlZCA9IHRoaXMuYnJvYWR3YXlPbkJyb2Fkd2F5SW5pdGVkLmJpbmQodGhpcyk7XG4gIHNlbGYucGFyX2Jyb2Fkd2F5T25QaWN0dXJlRGVjb2RlZCA9IHRoaXMuYnJvYWR3YXlPblBpY3R1cmVEZWNvZGVkLmJpbmQodGhpcyk7XG59XG5cbkRlY29kZXIucHJvdG90eXBlLnRvVThBcnJheSA9IGZ1bmN0aW9uIChwdHIsIGxlbmd0aCkge1xuICByZXR1cm4gdGhpcy5zZWxmLkhFQVBVOC5zdWJhcnJheShwdHIsIHB0ciArIGxlbmd0aCk7XG59XG5cbkRlY29kZXIucHJvdG90eXBlLmluaXQgPSBmdW5jdGlvbiAoKSB7XG4gIE1vZHVsZS5fYnJvYWR3YXlJbml0KCk7XG4gIHRoaXMuc3RyZWFtQnVmZmVyID0gdGhpcy50b1U4QXJyYXkoTW9kdWxlLl9icm9hZHdheUNyZWF0ZVN0cmVhbShNQVhfU1RSRUFNX0JVRkZFUl9MRU5HVEgpLCBNQVhfU1RSRUFNX0JVRkZFUl9MRU5HVEgpO1xufVxuXG5EZWNvZGVyLnByb3RvdHlwZS5icm9hZHdheU9uUGljdHVyZURlY29kZWQgPSBmdW5jdGlvbiAob2Zmc2V0LCB3aWR0aCwgaGVpZ2h0LCBpbmZvaWQpIHtcbiAgbGV0IGluZm8gPSBPYmplY3QuYXNzaWduKHt9LCB0aGlzLmluZm9saXN0W2luZm9pZF0pO1xuICBsZXQgZGF0YSA9IHRoaXMudG9VOEFycmF5KG9mZnNldCwgKHdpZHRoICogaGVpZ2h0ICogMykgLyAyKTtcbiAgdGhpcy5pbmZvbGlzdFtpbmZvaWRdID0gbnVsbDtcbiAgbGV0IGRhdGV0ZW1wID0gbmV3IFVpbnQ4QXJyYXkoZGF0YS5sZW5ndGgpO1xuICBkYXRldGVtcC5zZXQoZGF0YSk7XG4gIGxldCBidWZmZXIgPSBkYXRldGVtcC5idWZmZXI7XG4gIHRoaXMuc2VsZi5wb3N0TWVzc2FnZSh7XG4gICAgbXNnOiAnREVDT0RFRCcsXG4gICAgd2lkdGgsXG4gICAgaGVpZ2h0LFxuICAgIGluZm8sXG4gICAgYnVmZmVyXG4gIH0sIFtidWZmZXJdKTtcbn1cblxuRGVjb2Rlci5wcm90b3R5cGUuYnJvYWR3YXlPbkJyb2Fkd2F5SW5pdGVkID0gZnVuY3Rpb24gKCkge1xuICB0aGlzLmluaXRlZCA9IHRydWU7XG4gIHRoaXMuc2VsZi5wb3N0TWVzc2FnZSh7bXNnOiAnREVDT0RFUl9SRUFEWSd9KTtcbn1cblxuRGVjb2Rlci5wcm90b3R5cGUuZGVjb2RlID0gZnVuY3Rpb24gKGRhdGEsIGluZm8pIHtcbiAgbGV0IHRpbWUgPSBwYXJzZUludChuZXcgRGF0ZSgpLmdldFRpbWUoKSk7XG4gIGxldCBpbmZvaWQgPSB0aW1lIC0gKE1hdGguZmxvb3IodGltZSAvIDEwZTkpICogMTBlOSk7XG4gIHRoaXMuaW5mb2xpc3RbaW5mb2lkXSA9IGluZm87XG4gIHRoaXMuc3RyZWFtQnVmZmVyLnNldChkYXRhKTtcbiAgTW9kdWxlLl9icm9hZHdheVBsYXlTdHJlYW0oZGF0YS5sZW5ndGgsIGluZm9pZCk7XG59XG5cbnZhciBkZWNvZGVyO1xuXG5mdW5jdGlvbiBvblBvc3RSdW4gKCkge1xuICBkZWNvZGVyID0gbmV3IERlY29kZXIodGhpcyk7XG4gIGRlY29kZXIuaW5pdCgpO1xufVxuXG5mdW5jdGlvbiBpbml0ICgpIHtcbiAgc2VsZi5pbXBvcnRTY3JpcHRzKCdodHRwOi8vMTAuOTUuNDkuNDE6OTA5MC9leGFtcGxlcy9mbHYvZGVjb2Rlci5qcycpO1xuICBhZGRPblBvc3RSdW4ob25Qb3N0UnVuLmJpbmQoc2VsZikpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChzZWxmKSB7XG4gIHNlbGYuYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIGZ1bmN0aW9uIChlKSB7XG4gICAgdmFyIGRhdGEgPSBlLmRhdGE7XG4gICAgaWYgKCFkYXRhLm1zZykge1xuICAgICAgc2VsZi5wb3N0TWVzc2FnZSh7XG4gICAgICAgIG1zZzogJ0VSUk9SOmludmFsaWQgbWVzc2FnZSdcbiAgICAgIH0pXG4gICAgfSBlbHNlIHtcbiAgICAgIHN3aXRjaCAoZGF0YS5tc2cpIHtcbiAgICAgICAgY2FzZSAnaW5pdCc6XG4gICAgICAgICAgaW5pdChzZWxmKVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdkZWNvZGUnOlxuICAgICAgICAgIGRlY29kZXIuZGVjb2RlKGRhdGEuZGF0YSwgZGF0YS5pbmZvKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gIH0sIGZhbHNlKTtcbn1cbiIsImNsYXNzIFlVVkNhbnZhcyB7XG4gIGNvbnN0cnVjdG9yIChjb25maWdzKSB7XG4gICAgdGhpcy5jb25maWdzID0gT2JqZWN0LmFzc2lnbih7fSwgY29uZmlncyk7XG4gICAgdGhpcy5jYW52YXMgPSB0aGlzLmNvbmZpZ3MuY2FudmFzO1xuICAgIHRoaXMubWV0YSA9IE9iamVjdC5hc3NpZ24oe30sIHRoaXMuY29uZmlncy5tZXRhKTtcbiAgICB0aGlzLmNocm9tYSA9IHRoaXMubWV0YS5jaHJvbWFGb3JtYXQ7XG4gICAgdGhpcy5oZWlnaHQgPSB0aGlzLm1ldGEucHJlc2VudEhlaWdodDtcbiAgICB0aGlzLndpZHRoID0gdGhpcy5tZXRhLnByZXNlbnRXaWR0aDtcbiAgICB0aGlzLmNhbnZhcy53aWR0aCA9IHRoaXMud2lkdGg7XG4gICAgdGhpcy5jYW52YXMuaGVpZ2h0ID0gdGhpcy5oZWlnaHQ7XG4gICAgdGhpcy5jYW52YXMuc3R5bGUud2lkdGggPSAnMTAwJSc7XG4gICAgdGhpcy5jYW52YXMuc3R5bGUuaGVpZ2h0ID0gJzEwMCUnO1xuICAgIHRoaXMuX2luaXRDb250ZXh0R0woKTtcbiAgICBpZiAodGhpcy5jb250ZXh0R0wpIHtcbiAgICAgIHRoaXMuX2luaXRQcm9ncmFtKCk7XG4gICAgICB0aGlzLl9pbml0QnVmZmVycygpO1xuICAgICAgdGhpcy5faW5pdFRleHR1cmVzKCk7XG4gICAgfTtcbiAgfVxuXG4gIF9pbml0Q29udGV4dEdMICgpIHtcbiAgICB2YXIgY2FudmFzID0gdGhpcy5jYW52YXM7XG4gICAgdmFyIGdsID0gbnVsbDtcblxuICAgIHZhciB2YWxpZENvbnRleHROYW1lcyA9IFsnd2ViZ2wnLCAnZXhwZXJpbWVudGFsLXdlYmdsJywgJ21vei13ZWJnbCcsICd3ZWJraXQtM2QnXTtcbiAgICB2YXIgbmFtZUluZGV4ID0gMDtcblxuICAgIHdoaWxlICghZ2wgJiYgbmFtZUluZGV4IDwgdmFsaWRDb250ZXh0TmFtZXMubGVuZ3RoKSB7XG4gICAgICB2YXIgY29udGV4dE5hbWUgPSB2YWxpZENvbnRleHROYW1lc1tuYW1lSW5kZXhdO1xuXG4gICAgICB0cnkge1xuICAgICAgICBpZiAodGhpcy5jb250ZXh0T3B0aW9ucykge1xuICAgICAgICAgIGdsID0gY2FudmFzLmdldENvbnRleHQoY29udGV4dE5hbWUsIHRoaXMuY29udGV4dE9wdGlvbnMpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGdsID0gY2FudmFzLmdldENvbnRleHQoY29udGV4dE5hbWUpO1xuICAgICAgICB9O1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBnbCA9IG51bGw7XG4gICAgICB9XG5cbiAgICAgIGlmICghZ2wgfHwgdHlwZW9mIGdsLmdldFBhcmFtZXRlciAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICBnbCA9IG51bGw7XG4gICAgICB9XG5cbiAgICAgICsrbmFtZUluZGV4O1xuICAgIH07XG5cbiAgICB0aGlzLmNvbnRleHRHTCA9IGdsO1xuICB9O1xuXG4gIF9pbml0UHJvZ3JhbSAoKSB7XG4gICAgdmFyIGdsID0gdGhpcy5jb250ZXh0R0w7XG5cbiAgICAvLyB2ZXJ0ZXggc2hhZGVyIGlzIHRoZSBzYW1lIGZvciBhbGwgdHlwZXNcbiAgICB2YXIgdmVydGV4U2hhZGVyU2NyaXB0O1xuICAgIHZhciBmcmFnbWVudFNoYWRlclNjcmlwdDtcbiAgICBpZiAodGhpcy5jaHJvbWEgPT09IDQyMCkge1xuICAgICAgdmVydGV4U2hhZGVyU2NyaXB0ID0gW1xuICAgICAgICAnYXR0cmlidXRlIHZlYzQgdmVydGV4UG9zOycsXG4gICAgICAgICdhdHRyaWJ1dGUgdmVjNCB0ZXh0dXJlUG9zOycsXG4gICAgICAgICdhdHRyaWJ1dGUgdmVjNCB1VGV4dHVyZVBvczsnLFxuICAgICAgICAnYXR0cmlidXRlIHZlYzQgdlRleHR1cmVQb3M7JyxcbiAgICAgICAgJ3ZhcnlpbmcgdmVjMiB0ZXh0dXJlQ29vcmQ7JyxcbiAgICAgICAgJ3ZhcnlpbmcgdmVjMiB1VGV4dHVyZUNvb3JkOycsXG4gICAgICAgICd2YXJ5aW5nIHZlYzIgdlRleHR1cmVDb29yZDsnLFxuXG4gICAgICAgICd2b2lkIG1haW4oKScsXG4gICAgICAgICd7JyxcbiAgICAgICAgJyAgZ2xfUG9zaXRpb24gPSB2ZXJ0ZXhQb3M7JyxcbiAgICAgICAgJyAgdGV4dHVyZUNvb3JkID0gdGV4dHVyZVBvcy54eTsnLFxuICAgICAgICAnICB1VGV4dHVyZUNvb3JkID0gdVRleHR1cmVQb3MueHk7JyxcbiAgICAgICAgJyAgdlRleHR1cmVDb29yZCA9IHZUZXh0dXJlUG9zLnh5OycsXG4gICAgICAgICd9J1xuICAgICAgXS5qb2luKCdcXG4nKTtcblxuICAgICAgZnJhZ21lbnRTaGFkZXJTY3JpcHQgPSBbXG4gICAgICAgICdwcmVjaXNpb24gaGlnaHAgZmxvYXQ7JyxcbiAgICAgICAgJ3ZhcnlpbmcgaGlnaHAgdmVjMiB0ZXh0dXJlQ29vcmQ7JyxcbiAgICAgICAgJ3ZhcnlpbmcgaGlnaHAgdmVjMiB1VGV4dHVyZUNvb3JkOycsXG4gICAgICAgICd2YXJ5aW5nIGhpZ2hwIHZlYzIgdlRleHR1cmVDb29yZDsnLFxuICAgICAgICAndW5pZm9ybSBzYW1wbGVyMkQgeVNhbXBsZXI7JyxcbiAgICAgICAgJ3VuaWZvcm0gc2FtcGxlcjJEIHVTYW1wbGVyOycsXG4gICAgICAgICd1bmlmb3JtIHNhbXBsZXIyRCB2U2FtcGxlcjsnLFxuICAgICAgICAndW5pZm9ybSBtYXQ0IFlVVjJSR0I7JyxcblxuICAgICAgICAndm9pZCBtYWluKHZvaWQpIHsnLFxuICAgICAgICAnICBoaWdocCBmbG9hdCB5ID0gdGV4dHVyZTJEKHlTYW1wbGVyLCAgdGV4dHVyZUNvb3JkKS5yOycsXG4gICAgICAgICcgIGhpZ2hwIGZsb2F0IHUgPSB0ZXh0dXJlMkQodVNhbXBsZXIsICB1VGV4dHVyZUNvb3JkKS5yOycsXG4gICAgICAgICcgIGhpZ2hwIGZsb2F0IHYgPSB0ZXh0dXJlMkQodlNhbXBsZXIsICB2VGV4dHVyZUNvb3JkKS5yOycsXG4gICAgICAgICcgIGdsX0ZyYWdDb2xvciA9IHZlYzQoeSwgdSwgdiwgMSkgKiBZVVYyUkdCOycsXG4gICAgICAgICd9J1xuICAgICAgXS5qb2luKCdcXG4nKTtcbiAgICB9IGVsc2UgaWYgKHRoaXMuY2hyb21hID09PSA0MjIpIHtcbiAgICAgIHZlcnRleFNoYWRlclNjcmlwdCA9IFtcbiAgICAgICAgJ2F0dHJpYnV0ZSB2ZWM0IHZlcnRleFBvczsnLFxuICAgICAgICAnYXR0cmlidXRlIHZlYzQgdGV4dHVyZVBvczsnLFxuICAgICAgICAndmFyeWluZyB2ZWMyIHRleHR1cmVDb29yZDsnLFxuXG4gICAgICAgICd2b2lkIG1haW4oKScsXG4gICAgICAgICd7JyxcbiAgICAgICAgJyAgZ2xfUG9zaXRpb24gPSB2ZXJ0ZXhQb3M7JyxcbiAgICAgICAgJyAgdGV4dHVyZUNvb3JkID0gdGV4dHVyZVBvcy54eTsnLFxuICAgICAgICAnfSdcbiAgICAgIF0uam9pbignXFxuJyk7XG5cbiAgICAgIGZyYWdtZW50U2hhZGVyU2NyaXB0ID0gW1xuICAgICAgICAncHJlY2lzaW9uIGhpZ2hwIGZsb2F0OycsXG4gICAgICAgICd2YXJ5aW5nIGhpZ2hwIHZlYzIgdGV4dHVyZUNvb3JkOycsXG4gICAgICAgICd1bmlmb3JtIHNhbXBsZXIyRCBzYW1wbGVyOycsXG4gICAgICAgICd1bmlmb3JtIGhpZ2hwIHZlYzIgcmVzb2x1dGlvbjsnLFxuICAgICAgICAndW5pZm9ybSBtYXQ0IFlVVjJSR0I7JyxcblxuICAgICAgICAndm9pZCBtYWluKHZvaWQpIHsnLFxuXG4gICAgICAgICcgIGhpZ2hwIGZsb2F0IHRleFBpeFggPSAxLjAgLyByZXNvbHV0aW9uLng7JyxcbiAgICAgICAgJyAgaGlnaHAgZmxvYXQgbG9nUGl4WCA9IDIuMCAvIHJlc29sdXRpb24ueDsnLCAvLyBoYWxmIHRoZSByZXNvbHV0aW9uIG9mIHRoZSB0ZXh0dXJlXG4gICAgICAgICcgIGhpZ2hwIGZsb2F0IGxvZ0hhbGZQaXhYID0gNC4wIC8gcmVzb2x1dGlvbi54OycsIC8vIGhhbGYgb2YgdGhlIGxvZ2ljYWwgcmVzb2x1dGlvbiBzbyBldmVyeSA0dGggcGl4ZWxcbiAgICAgICAgJyAgaGlnaHAgZmxvYXQgc3RlcHMgPSBmbG9vcih0ZXh0dXJlQ29vcmQueCAvIGxvZ1BpeFgpOycsXG4gICAgICAgICcgIGhpZ2hwIGZsb2F0IHV2U3RlcHMgPSBmbG9vcih0ZXh0dXJlQ29vcmQueCAvIGxvZ0hhbGZQaXhYKTsnLFxuICAgICAgICAnICBoaWdocCBmbG9hdCB5ID0gdGV4dHVyZTJEKHNhbXBsZXIsIHZlYzIoKGxvZ1BpeFggKiBzdGVwcykgKyB0ZXhQaXhYLCB0ZXh0dXJlQ29vcmQueSkpLnI7JyxcbiAgICAgICAgJyAgaGlnaHAgZmxvYXQgdSA9IHRleHR1cmUyRChzYW1wbGVyLCB2ZWMyKChsb2dIYWxmUGl4WCAqIHV2U3RlcHMpLCB0ZXh0dXJlQ29vcmQueSkpLnI7JyxcbiAgICAgICAgJyAgaGlnaHAgZmxvYXQgdiA9IHRleHR1cmUyRChzYW1wbGVyLCB2ZWMyKChsb2dIYWxmUGl4WCAqIHV2U3RlcHMpICsgdGV4UGl4WCArIHRleFBpeFgsIHRleHR1cmVDb29yZC55KSkucjsnLFxuXG4gICAgICAgIC8vICcgIGhpZ2hwIGZsb2F0IHkgPSB0ZXh0dXJlMkQoc2FtcGxlciwgIHRleHR1cmVDb29yZCkucjsnLFxuICAgICAgICAvLyAnICBnbF9GcmFnQ29sb3IgPSB2ZWM0KHksIHUsIHYsIDEpICogWVVWMlJHQjsnLFxuICAgICAgICAnICBnbF9GcmFnQ29sb3IgPSB2ZWM0KHksIHUsIHYsIDEuMCkgKiBZVVYyUkdCOycsXG4gICAgICAgICd9J1xuICAgICAgXS5qb2luKCdcXG4nKTtcbiAgICB9O1xuXG4gICAgdmFyIFlVVjJSR0IgPSBbXG4gICAgICAxLjE2NDM4LCAwLjAwMDAwLCAxLjU5NjAzLCAtMC44NzA3OSxcbiAgICAgIDEuMTY0MzgsIC0wLjM5MTc2LCAtMC44MTI5NywgMC41Mjk1OSxcbiAgICAgIDEuMTY0MzgsIDIuMDE3MjMsIDAuMDAwMDAsIC0xLjA4MTM5LFxuICAgICAgMCwgMCwgMCwgMVxuICAgIF07XG4gICAgdmFyIHZlcnRleFNoYWRlciA9IGdsLmNyZWF0ZVNoYWRlcihnbC5WRVJURVhfU0hBREVSKTtcbiAgICBnbC5zaGFkZXJTb3VyY2UodmVydGV4U2hhZGVyLCB2ZXJ0ZXhTaGFkZXJTY3JpcHQpO1xuICAgIGdsLmNvbXBpbGVTaGFkZXIodmVydGV4U2hhZGVyKTtcbiAgICBpZiAoIWdsLmdldFNoYWRlclBhcmFtZXRlcih2ZXJ0ZXhTaGFkZXIsIGdsLkNPTVBJTEVfU1RBVFVTKSkge1xuICAgICAgY29uc29sZS5sb2coJ1ZlcnRleCBzaGFkZXIgZmFpbGVkIHRvIGNvbXBpbGU6ICcgKyBnbC5nZXRTaGFkZXJJbmZvTG9nKHZlcnRleFNoYWRlcikpO1xuICAgIH1cblxuICAgIHZhciBmcmFnbWVudFNoYWRlciA9IGdsLmNyZWF0ZVNoYWRlcihnbC5GUkFHTUVOVF9TSEFERVIpO1xuICAgIGdsLnNoYWRlclNvdXJjZShmcmFnbWVudFNoYWRlciwgZnJhZ21lbnRTaGFkZXJTY3JpcHQpO1xuICAgIGdsLmNvbXBpbGVTaGFkZXIoZnJhZ21lbnRTaGFkZXIpO1xuICAgIGlmICghZ2wuZ2V0U2hhZGVyUGFyYW1ldGVyKGZyYWdtZW50U2hhZGVyLCBnbC5DT01QSUxFX1NUQVRVUykpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdGcmFnbWVudCBzaGFkZXIgZmFpbGVkIHRvIGNvbXBpbGU6ICcgKyBnbC5nZXRTaGFkZXJJbmZvTG9nKGZyYWdtZW50U2hhZGVyKSk7XG4gICAgfVxuXG4gICAgdmFyIHByb2dyYW0gPSBnbC5jcmVhdGVQcm9ncmFtKCk7XG4gICAgZ2wuYXR0YWNoU2hhZGVyKHByb2dyYW0sIHZlcnRleFNoYWRlcik7XG4gICAgZ2wuYXR0YWNoU2hhZGVyKHByb2dyYW0sIGZyYWdtZW50U2hhZGVyKTtcbiAgICBnbC5saW5rUHJvZ3JhbShwcm9ncmFtKTtcbiAgICBpZiAoIWdsLmdldFByb2dyYW1QYXJhbWV0ZXIocHJvZ3JhbSwgZ2wuTElOS19TVEFUVVMpKSB7XG4gICAgICBjb25zb2xlLmxvZygnUHJvZ3JhbSBmYWlsZWQgdG8gY29tcGlsZTogJyArIGdsLmdldFByb2dyYW1JbmZvTG9nKHByb2dyYW0pKTtcbiAgICB9XG5cbiAgICBnbC51c2VQcm9ncmFtKHByb2dyYW0pO1xuXG4gICAgdmFyIFlVVjJSR0JSZWYgPSBnbC5nZXRVbmlmb3JtTG9jYXRpb24ocHJvZ3JhbSwgJ1lVVjJSR0InKTtcbiAgICBnbC51bmlmb3JtTWF0cml4NGZ2KFlVVjJSR0JSZWYsIGZhbHNlLCBZVVYyUkdCKTtcblxuICAgIHRoaXMuc2hhZGVyUHJvZ3JhbSA9IHByb2dyYW07XG4gIH1cblxuICBfaW5pdEJ1ZmZlcnMgKCkge1xuICAgIHZhciBnbCA9IHRoaXMuY29udGV4dEdMO1xuICAgIHZhciBwcm9ncmFtID0gdGhpcy5zaGFkZXJQcm9ncmFtO1xuXG4gICAgdmFyIHZlcnRleFBvc0J1ZmZlciA9IGdsLmNyZWF0ZUJ1ZmZlcigpO1xuICAgIGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCB2ZXJ0ZXhQb3NCdWZmZXIpO1xuICAgIGdsLmJ1ZmZlckRhdGEoZ2wuQVJSQVlfQlVGRkVSLCBuZXcgRmxvYXQzMkFycmF5KFsxLCAxLCAtMSwgMSwgMSwgLTEsIC0xLCAtMV0pLCBnbC5TVEFUSUNfRFJBVyk7XG5cbiAgICB2YXIgdmVydGV4UG9zUmVmID0gZ2wuZ2V0QXR0cmliTG9jYXRpb24ocHJvZ3JhbSwgJ3ZlcnRleFBvcycpO1xuICAgIGdsLmVuYWJsZVZlcnRleEF0dHJpYkFycmF5KHZlcnRleFBvc1JlZik7XG4gICAgZ2wudmVydGV4QXR0cmliUG9pbnRlcih2ZXJ0ZXhQb3NSZWYsIDIsIGdsLkZMT0FULCBmYWxzZSwgMCwgMCk7XG5cbiAgICB2YXIgdGV4dHVyZVBvc0J1ZmZlciA9IGdsLmNyZWF0ZUJ1ZmZlcigpO1xuICAgIGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCB0ZXh0dXJlUG9zQnVmZmVyKTtcbiAgICBnbC5idWZmZXJEYXRhKGdsLkFSUkFZX0JVRkZFUiwgbmV3IEZsb2F0MzJBcnJheShbMSwgMCwgMCwgMCwgMSwgMSwgMCwgMV0pLCBnbC5TVEFUSUNfRFJBVyk7XG5cbiAgICB2YXIgdGV4dHVyZVBvc1JlZiA9IGdsLmdldEF0dHJpYkxvY2F0aW9uKHByb2dyYW0sICd0ZXh0dXJlUG9zJyk7XG4gICAgZ2wuZW5hYmxlVmVydGV4QXR0cmliQXJyYXkodGV4dHVyZVBvc1JlZik7XG4gICAgZ2wudmVydGV4QXR0cmliUG9pbnRlcih0ZXh0dXJlUG9zUmVmLCAyLCBnbC5GTE9BVCwgZmFsc2UsIDAsIDApO1xuXG4gICAgdGhpcy50ZXh0dXJlUG9zQnVmZmVyID0gdGV4dHVyZVBvc0J1ZmZlcjtcblxuICAgIGlmICh0aGlzLmNocm9tYSA9PT0gNDIwKSB7XG4gICAgICB2YXIgdVRleHR1cmVQb3NCdWZmZXIgPSBnbC5jcmVhdGVCdWZmZXIoKTtcbiAgICAgIGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCB1VGV4dHVyZVBvc0J1ZmZlcik7XG4gICAgICBnbC5idWZmZXJEYXRhKGdsLkFSUkFZX0JVRkZFUiwgbmV3IEZsb2F0MzJBcnJheShbMSwgMCwgMCwgMCwgMSwgMSwgMCwgMV0pLCBnbC5TVEFUSUNfRFJBVyk7XG5cbiAgICAgIHZhciB1VGV4dHVyZVBvc1JlZiA9IGdsLmdldEF0dHJpYkxvY2F0aW9uKHByb2dyYW0sICd1VGV4dHVyZVBvcycpO1xuICAgICAgZ2wuZW5hYmxlVmVydGV4QXR0cmliQXJyYXkodVRleHR1cmVQb3NSZWYpO1xuICAgICAgZ2wudmVydGV4QXR0cmliUG9pbnRlcih1VGV4dHVyZVBvc1JlZiwgMiwgZ2wuRkxPQVQsIGZhbHNlLCAwLCAwKTtcblxuICAgICAgdGhpcy51VGV4dHVyZVBvc0J1ZmZlciA9IHVUZXh0dXJlUG9zQnVmZmVyO1xuXG4gICAgICB2YXIgdlRleHR1cmVQb3NCdWZmZXIgPSBnbC5jcmVhdGVCdWZmZXIoKTtcbiAgICAgIGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCB2VGV4dHVyZVBvc0J1ZmZlcik7XG4gICAgICBnbC5idWZmZXJEYXRhKGdsLkFSUkFZX0JVRkZFUiwgbmV3IEZsb2F0MzJBcnJheShbMSwgMCwgMCwgMCwgMSwgMSwgMCwgMV0pLCBnbC5TVEFUSUNfRFJBVyk7XG5cbiAgICAgIHZhciB2VGV4dHVyZVBvc1JlZiA9IGdsLmdldEF0dHJpYkxvY2F0aW9uKHByb2dyYW0sICd2VGV4dHVyZVBvcycpO1xuICAgICAgZ2wuZW5hYmxlVmVydGV4QXR0cmliQXJyYXkodlRleHR1cmVQb3NSZWYpO1xuICAgICAgZ2wudmVydGV4QXR0cmliUG9pbnRlcih2VGV4dHVyZVBvc1JlZiwgMiwgZ2wuRkxPQVQsIGZhbHNlLCAwLCAwKTtcblxuICAgICAgdGhpcy52VGV4dHVyZVBvc0J1ZmZlciA9IHZUZXh0dXJlUG9zQnVmZmVyO1xuICAgIH07XG4gIH07XG5cbiAgX2luaXRUZXh0dXJlcyAoKSB7XG4gICAgdmFyIGdsID0gdGhpcy5jb250ZXh0R0w7XG4gICAgdmFyIHByb2dyYW0gPSB0aGlzLnNoYWRlclByb2dyYW07XG5cbiAgICBpZiAodGhpcy5jaHJvbWEgPT09IDQyMCkge1xuICAgICAgdmFyIHlUZXh0dXJlUmVmID0gdGhpcy5faW5pdFRleHR1cmUoKTtcbiAgICAgIHZhciB5U2FtcGxlclJlZiA9IGdsLmdldFVuaWZvcm1Mb2NhdGlvbihwcm9ncmFtLCAneVNhbXBsZXInKTtcbiAgICAgIGdsLnVuaWZvcm0xaSh5U2FtcGxlclJlZiwgMCk7XG4gICAgICB0aGlzLnlUZXh0dXJlUmVmID0geVRleHR1cmVSZWY7XG5cbiAgICAgIHZhciB1VGV4dHVyZVJlZiA9IHRoaXMuX2luaXRUZXh0dXJlKCk7XG4gICAgICB2YXIgdVNhbXBsZXJSZWYgPSBnbC5nZXRVbmlmb3JtTG9jYXRpb24ocHJvZ3JhbSwgJ3VTYW1wbGVyJyk7XG4gICAgICBnbC51bmlmb3JtMWkodVNhbXBsZXJSZWYsIDEpO1xuICAgICAgdGhpcy51VGV4dHVyZVJlZiA9IHVUZXh0dXJlUmVmO1xuXG4gICAgICB2YXIgdlRleHR1cmVSZWYgPSB0aGlzLl9pbml0VGV4dHVyZSgpO1xuICAgICAgdmFyIHZTYW1wbGVyUmVmID0gZ2wuZ2V0VW5pZm9ybUxvY2F0aW9uKHByb2dyYW0sICd2U2FtcGxlcicpO1xuICAgICAgZ2wudW5pZm9ybTFpKHZTYW1wbGVyUmVmLCAyKTtcbiAgICAgIHRoaXMudlRleHR1cmVSZWYgPSB2VGV4dHVyZVJlZjtcbiAgICB9IGVsc2UgaWYgKHRoaXMuY2hyb21hID09PSA0MjIpIHtcbiAgICAgIC8vIG9ubHkgb25lIHRleHR1cmUgZm9yIDQyMlxuICAgICAgdmFyIHRleHR1cmVSZWYgPSB0aGlzLl9pbml0VGV4dHVyZSgpO1xuICAgICAgdmFyIHNhbXBsZXJSZWYgPSBnbC5nZXRVbmlmb3JtTG9jYXRpb24ocHJvZ3JhbSwgJ3NhbXBsZXInKTtcbiAgICAgIGdsLnVuaWZvcm0xaShzYW1wbGVyUmVmLCAwKTtcbiAgICAgIHRoaXMudGV4dHVyZVJlZiA9IHRleHR1cmVSZWY7XG4gICAgfTtcbiAgfVxuXG4gIF9pbml0VGV4dHVyZSAoKSB7XG4gICAgdmFyIGdsID0gdGhpcy5jb250ZXh0R0w7XG5cbiAgICB2YXIgdGV4dHVyZVJlZiA9IGdsLmNyZWF0ZVRleHR1cmUoKTtcbiAgICBnbC5iaW5kVGV4dHVyZShnbC5URVhUVVJFXzJELCB0ZXh0dXJlUmVmKTtcbiAgICBnbC50ZXhQYXJhbWV0ZXJpKGdsLlRFWFRVUkVfMkQsIGdsLlRFWFRVUkVfTUFHX0ZJTFRFUiwgZ2wuTkVBUkVTVCk7XG4gICAgZ2wudGV4UGFyYW1ldGVyaShnbC5URVhUVVJFXzJELCBnbC5URVhUVVJFX01JTl9GSUxURVIsIGdsLk5FQVJFU1QpO1xuICAgIGdsLnRleFBhcmFtZXRlcmkoZ2wuVEVYVFVSRV8yRCwgZ2wuVEVYVFVSRV9XUkFQX1MsIGdsLkNMQU1QX1RPX0VER0UpO1xuICAgIGdsLnRleFBhcmFtZXRlcmkoZ2wuVEVYVFVSRV8yRCwgZ2wuVEVYVFVSRV9XUkFQX1QsIGdsLkNMQU1QX1RPX0VER0UpO1xuICAgIGdsLmJpbmRUZXh0dXJlKGdsLlRFWFRVUkVfMkQsIG51bGwpO1xuXG4gICAgcmV0dXJuIHRleHR1cmVSZWY7XG4gIH1cblxuICBfZHJhd1BpY3R1cmVHTCAoZGF0YSwgd2lkdGgsIGhlaWdodCkge1xuICAgIGlmICh0aGlzLmNocm9tYSA9PT0gNDIwKSB7XG4gICAgICBsZXQgbldpZHRoID0gd2lkdGg7XG4gICAgICB2YXIgeWxlbiA9IHdpZHRoICogaGVpZ2h0O1xuICAgICAgdmFyIHV2bGVuID0gKHdpZHRoIC8gMikgKiAoaGVpZ2h0IC8gMik7XG4gICAgICBkYXRhID0gbmV3IFVpbnQ4QXJyYXkoZGF0YSk7XG4gICAgICBsZXQgcmVuZGVyRGF0YSA9IHtcbiAgICAgICAgeURhdGE6IGRhdGEuc3ViYXJyYXkoMCwgeWxlbiksXG4gICAgICAgIHVEYXRhOiBkYXRhLnN1YmFycmF5KHlsZW4sIHlsZW4gKyB1dmxlbiksXG4gICAgICAgIHZEYXRhOiBkYXRhLnN1YmFycmF5KHlsZW4gKyB1dmxlbiwgeWxlbiArIHV2bGVuICsgdXZsZW4pXG4gICAgICB9XG4gICAgICBpZiAod2lkdGggJSA0ID4gMCkge1xuICAgICAgICBuV2lkdGggPSB3aWR0aCArIDQgLSAod2lkdGggJSA0KTtcbiAgICAgICAgbGV0IHlBcnJheSA9IG5ldyBVaW50OEFycmF5KG5XaWR0aCAqIGhlaWdodCk7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaGVpZ2h0OyBpKyspIHtcbiAgICAgICAgICB5QXJyYXkuc2V0KHJlbmRlckRhdGEueURhdGEuc3ViYXJyYXkoaSAqIHdpZHRoLCAoaSArIDEpICogd2lkdGgpLCBpICogbldpZHRoKTtcbiAgICAgICAgfVxuICAgICAgICByZW5kZXJEYXRhLnlEYXRhID0geUFycmF5O1xuICAgICAgfVxuXG4gICAgICBpZiAoKHdpZHRoIC8gMikgJSA0ID4gMCkge1xuICAgICAgICBuV2lkdGggPSAod2lkdGggLyAyKSArIDQgLSAoKHdpZHRoIC8gMikgJSA0KTtcbiAgICAgICAgbGV0IHVBcnJheSA9IG5ldyBVaW50OEFycmF5KG5XaWR0aCAqIGhlaWdodCAvIDIpO1xuICAgICAgICBsZXQgdkFycmF5ID0gbmV3IFVpbnQ4QXJyYXkobldpZHRoICogaGVpZ2h0IC8gMik7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaGVpZ2h0IC8gMjsgaSsrKSB7XG4gICAgICAgICAgdUFycmF5LnNldChyZW5kZXJEYXRhLnVEYXRhLnN1YmFycmF5KGkgKiB3aWR0aCAvIDIsIChpICsgMSkgKiB3aWR0aCAvIDIpLCBpICogbldpZHRoKTtcbiAgICAgICAgICB2QXJyYXkuc2V0KHJlbmRlckRhdGEudkRhdGEuc3ViYXJyYXkoaSAqIHdpZHRoIC8gMiwgKGkgKyAxKSAqIHdpZHRoIC8gMiksIGkgKiBuV2lkdGgpO1xuICAgICAgICB9XG4gICAgICAgIHJlbmRlckRhdGEudURhdGEgPSB1QXJyYXk7XG4gICAgICAgIHJlbmRlckRhdGEudkRhdGEgPSB2QXJyYXk7XG4gICAgICB9XG4gICAgICB0aGlzLl9kcmF3UGljdHVyZUdMNDIwKHJlbmRlckRhdGEsIHdpZHRoLCBoZWlnaHQpO1xuICAgIH0gZWxzZSBpZiAodGhpcy5jaHJvbWEgPT09IDQyMikge1xuICAgICAgZGF0YSA9IG5ldyBVaW50OEFycmF5KGRhdGEpO1xuICAgICAgdGhpcy5fZHJhd1BpY3R1cmVHTDQyMih3aWR0aCwgaGVpZ2h0LCBkYXRhKTtcbiAgICB9XG4gIH1cblxuICBfZHJhd1BpY3R1cmVHTDQyMiAoZGF0YSwgd2lkdGgsIGhlaWdodCkge1xuICAgIHZhciBnbCA9IHRoaXMuY29udGV4dEdMO1xuICAgIHZhciB0ZXh0dXJlUG9zQnVmZmVyID0gdGhpcy50ZXh0dXJlUG9zQnVmZmVyO1xuXG4gICAgdmFyIHRleHR1cmVSZWYgPSB0aGlzLnRleHR1cmVSZWY7XG5cbiAgICB2YXIgZGF0YVBlclJvdyA9IHdpZHRoICogMjtcbiAgICB2YXIgcm93Q250ID0gaGVpZ2h0O1xuXG4gICAgZ2wudmlld3BvcnQoMCwgMCwgd2lkdGgsIGhlaWdodCk7XG5cbiAgICB2YXIgdFRvcCA9IDA7XG4gICAgdmFyIHRMZWZ0ID0gMDtcbiAgICB2YXIgdEJvdHRvbSA9IGhlaWdodCAvIHJvd0NudDtcbiAgICB2YXIgdFJpZ2h0ID0gd2lkdGggLyAoZGF0YVBlclJvdyAvIDIpO1xuICAgIHZhciB0ZXh0dXJlUG9zVmFsdWVzID0gbmV3IEZsb2F0MzJBcnJheShbdFJpZ2h0LCB0VG9wLCB0TGVmdCwgdFRvcCwgdFJpZ2h0LCB0Qm90dG9tLCB0TGVmdCwgdEJvdHRvbV0pO1xuXG4gICAgZ2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZGRVIsIHRleHR1cmVQb3NCdWZmZXIpO1xuICAgIGdsLmJ1ZmZlckRhdGEoZ2wuQVJSQVlfQlVGRkVSLCB0ZXh0dXJlUG9zVmFsdWVzLCBnbC5EWU5BTUlDX0RSQVcpO1xuXG4gICAgZ2wudW5pZm9ybTJmKGdsLmdldFVuaWZvcm1Mb2NhdGlvbih0aGlzLnNoYWRlclByb2dyYW0sICdyZXNvbHV0aW9uJyksIGRhdGFQZXJSb3csIGhlaWdodCk7XG5cbiAgICBnbC5hY3RpdmVUZXh0dXJlKGdsLlRFWFRVUkUwKTtcbiAgICBnbC5iaW5kVGV4dHVyZShnbC5URVhUVVJFXzJELCB0ZXh0dXJlUmVmKTtcbiAgICBnbC50ZXhJbWFnZTJEKGdsLlRFWFRVUkVfMkQsIDAsIGdsLkxVTUlOQU5DRSwgZGF0YVBlclJvdywgcm93Q250LCAwLCBnbC5MVU1JTkFOQ0UsIGdsLlVOU0lHTkVEX0JZVEUsIGRhdGEpO1xuXG4gICAgZ2wuZHJhd0FycmF5cyhnbC5UUklBTkdMRV9TVFJJUCwgMCwgNCk7XG4gIH1cblxuICBfZHJhd1BpY3R1cmVHTDQyMCAoZGF0YSwgd2lkdGgsIGhlaWdodCkge1xuICAgIHZhciBnbCA9IHRoaXMuY29udGV4dEdMO1xuICAgIHZhciB0ZXh0dXJlUG9zQnVmZmVyID0gdGhpcy50ZXh0dXJlUG9zQnVmZmVyO1xuICAgIHZhciB1VGV4dHVyZVBvc0J1ZmZlciA9IHRoaXMudVRleHR1cmVQb3NCdWZmZXI7XG4gICAgdmFyIHZUZXh0dXJlUG9zQnVmZmVyID0gdGhpcy52VGV4dHVyZVBvc0J1ZmZlcjtcblxuICAgIHZhciB5VGV4dHVyZVJlZiA9IHRoaXMueVRleHR1cmVSZWY7XG4gICAgdmFyIHVUZXh0dXJlUmVmID0gdGhpcy51VGV4dHVyZVJlZjtcbiAgICB2YXIgdlRleHR1cmVSZWYgPSB0aGlzLnZUZXh0dXJlUmVmO1xuXG4gICAgdmFyIHlEYXRhID0gZGF0YS55RGF0YTtcbiAgICB2YXIgdURhdGEgPSBkYXRhLnVEYXRhO1xuICAgIHZhciB2RGF0YSA9IGRhdGEudkRhdGE7XG5cbiAgICB2YXIgeURhdGFQZXJSb3cgPSB3aWR0aDtcbiAgICB2YXIgeVJvd0NudCA9IGhlaWdodDtcblxuICAgIHZhciB1RGF0YVBlclJvdyA9IHdpZHRoIC8gMjtcbiAgICB2YXIgdVJvd0NudCA9IGhlaWdodCAvIDI7XG5cbiAgICB2YXIgdkRhdGFQZXJSb3cgPSB1RGF0YVBlclJvdztcbiAgICB2YXIgdlJvd0NudCA9IHVSb3dDbnQ7XG4gICAgZ2wudmlld3BvcnQoMCwgMCwgdGhpcy53aWR0aCwgdGhpcy5oZWlnaHQpO1xuXG4gICAgdmFyIHRUb3AgPSAwO1xuICAgIHZhciB0TGVmdCA9IDA7XG4gICAgdmFyIHRCb3R0b20gPSBoZWlnaHQgLyB5Um93Q250O1xuICAgIHZhciB0UmlnaHQgPSB3aWR0aCAvIHlEYXRhUGVyUm93O1xuICAgIHZhciB0ZXh0dXJlUG9zVmFsdWVzID0gbmV3IEZsb2F0MzJBcnJheShbdFJpZ2h0LCB0VG9wLCB0TGVmdCwgdFRvcCwgdFJpZ2h0LCB0Qm90dG9tLCB0TGVmdCwgdEJvdHRvbV0pO1xuXG4gICAgZ2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZGRVIsIHRleHR1cmVQb3NCdWZmZXIpO1xuICAgIGdsLmJ1ZmZlckRhdGEoZ2wuQVJSQVlfQlVGRkVSLCB0ZXh0dXJlUG9zVmFsdWVzLCBnbC5EWU5BTUlDX0RSQVcpO1xuXG5cbiAgICB0Qm90dG9tID0gKGhlaWdodCAvIDIpIC8gdVJvd0NudDtcbiAgICB0UmlnaHQgPSAod2lkdGggLyAyKSAvIHVEYXRhUGVyUm93O1xuICAgIHZhciB1VGV4dHVyZVBvc1ZhbHVlcyA9IG5ldyBGbG9hdDMyQXJyYXkoW3RSaWdodCwgdFRvcCwgdExlZnQsIHRUb3AsIHRSaWdodCwgdEJvdHRvbSwgdExlZnQsIHRCb3R0b21dKTtcblxuICAgIGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCB1VGV4dHVyZVBvc0J1ZmZlcik7XG4gICAgZ2wuYnVmZmVyRGF0YShnbC5BUlJBWV9CVUZGRVIsIHVUZXh0dXJlUG9zVmFsdWVzLCBnbC5EWU5BTUlDX0RSQVcpO1xuXG4gICAgdEJvdHRvbSA9IChoZWlnaHQgLyAyKSAvIHZSb3dDbnQ7XG4gICAgdFJpZ2h0ID0gKHdpZHRoIC8gMikgLyB2RGF0YVBlclJvdztcblxuICAgIHZhciB2VGV4dHVyZVBvc1ZhbHVlcyA9IG5ldyBGbG9hdDMyQXJyYXkoW3RSaWdodCwgdFRvcCwgdExlZnQsIHRUb3AsIHRSaWdodCwgdEJvdHRvbSwgdExlZnQsIHRCb3R0b21dKTtcblxuICAgIGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCB2VGV4dHVyZVBvc0J1ZmZlcik7XG4gICAgZ2wuYnVmZmVyRGF0YShnbC5BUlJBWV9CVUZGRVIsIHZUZXh0dXJlUG9zVmFsdWVzLCBnbC5EWU5BTUlDX0RSQVcpO1xuICAgIFxuICAgIGdsLmFjdGl2ZVRleHR1cmUoZ2wuVEVYVFVSRTApO1xuICAgIGdsLmJpbmRUZXh0dXJlKGdsLlRFWFRVUkVfMkQsIHlUZXh0dXJlUmVmKTtcbiAgICBnbC50ZXhJbWFnZTJEKGdsLlRFWFRVUkVfMkQsIDAsIGdsLkxVTUlOQU5DRSwgeURhdGFQZXJSb3csIHlSb3dDbnQsIDAsIGdsLkxVTUlOQU5DRSwgZ2wuVU5TSUdORURfQllURSwgeURhdGEpO1xuXG4gICAgZ2wuYWN0aXZlVGV4dHVyZShnbC5URVhUVVJFMSk7XG4gICAgZ2wuYmluZFRleHR1cmUoZ2wuVEVYVFVSRV8yRCwgdVRleHR1cmVSZWYpO1xuICAgIGdsLnRleEltYWdlMkQoZ2wuVEVYVFVSRV8yRCwgMCwgZ2wuTFVNSU5BTkNFLCB1RGF0YVBlclJvdywgdVJvd0NudCwgMCwgZ2wuTFVNSU5BTkNFLCBnbC5VTlNJR05FRF9CWVRFLCB1RGF0YSk7XG5cbiAgICBnbC5hY3RpdmVUZXh0dXJlKGdsLlRFWFRVUkUyKTtcbiAgICBnbC5iaW5kVGV4dHVyZShnbC5URVhUVVJFXzJELCB2VGV4dHVyZVJlZik7XG4gICAgZ2wudGV4SW1hZ2UyRChnbC5URVhUVVJFXzJELCAwLCBnbC5MVU1JTkFOQ0UsIHZEYXRhUGVyUm93LCB2Um93Q250LCAwLCBnbC5MVU1JTkFOQ0UsIGdsLlVOU0lHTkVEX0JZVEUsIHZEYXRhKTtcblxuICAgIGdsLmRyYXdBcnJheXMoZ2wuVFJJQU5HTEVfU1RSSVAsIDAsIDQpO1xuICB9XG5cbiAgX2RyYXdQaWN0dXJlUkdCIChkYXRhKSB7XG5cbiAgfVxuXG4gIHJlbmRlciAoZGF0YSwgd2lkdGgsIGhlaWdodCkge1xuICAgIHZhciBnbCA9IHRoaXMuY29udGV4dEdMO1xuICAgIGlmIChnbCkge1xuICAgICAgdGhpcy5fZHJhd1BpY3R1cmVHTChkYXRhLCB3aWR0aCwgaGVpZ2h0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fZHJhd1BpY3R1cmVSR0IoZGF0YSk7XG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFlVVkNhbnZhcztcbiIsImNvbnN0IGlzT2JqZWN0RmlsbGVkID0gKG9iaikgPT4ge1xuICBmb3IgKGxldCBrZXkgaW4gb2JqKSB7XG4gICAgaWYgKG9iai5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICBpZiAob2JqW2tleV0gPT09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJldHVybiB0cnVlXG59XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE1lZGlhSW5mbyB7XG4gIGNvbnN0cnVjdG9yICgpIHtcbiAgICB0aGlzLm1pbWVUeXBlID0gbnVsbFxuICAgIHRoaXMuZHVyYXRpb24gPSBudWxsXG5cbiAgICB0aGlzLmhhc1ZpZGVvID0gbnVsbFxuICAgIHRoaXMudmlkZW8gPSB7XG4gICAgICBjb2RlYzogbnVsbCxcbiAgICAgIHdpZHRoOiBudWxsLFxuICAgICAgaGVpZ2h0OiBudWxsLFxuICAgICAgcHJvZmlsZTogbnVsbCxcbiAgICAgIGxldmVsOiBudWxsLFxuICAgICAgZnJhbWVSYXRlOiB7XG4gICAgICAgIGZpeGVkOiB0cnVlLFxuICAgICAgICBmcHM6IDI1LFxuICAgICAgICBmcHNfbnVtOiAyNTAwMCxcbiAgICAgICAgZnBzX2RlbjogMTAwMFxuICAgICAgfSxcbiAgICAgIGNocm9tYUZvcm1hdDogbnVsbCxcbiAgICAgIHBhclJhdGlvOiB7XG4gICAgICAgIHdpZHRoOiAxLFxuICAgICAgICBoZWlnaHQ6IDFcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLmhhc0F1ZGlvID0gbnVsbFxuXG4gICAgdGhpcy5hdWRpbyA9IHtcbiAgICAgIGNvZGVjOiBudWxsLFxuICAgICAgc2FtcGxlUmF0ZTogbnVsbCxcbiAgICAgIHNhbXBsZVJhdGVJbmRleDogbnVsbCxcbiAgICAgIGNoYW5uZWxDb3VudDogbnVsbFxuICAgIH1cbiAgfVxuXG4gIGlzQ29tcGxldGUgKCkge1xuICAgIHJldHVybiBNZWRpYUluZm8uaXNCYXNlSW5mb1JlYWR5KHRoaXMpICYmIE1lZGlhSW5mby5pc1ZpZGVvUmVhZHkodGhpcykgJiYgTWVkaWFJbmZvLmlzQXVkaW9SZWFkeSh0aGlzKVxuICB9XG5cbiAgc3RhdGljIGlzQmFzZUluZm9SZWFkeSAobWVkaWFJbmZvKSB7XG4gICAgcmV0dXJuIGlzT2JqZWN0RmlsbGVkKG1lZGlhSW5mbylcbiAgfVxuXG4gIHN0YXRpYyBpc1ZpZGVvUmVhZHkgKG1lZGlhSW5mbykge1xuICAgIGlmICghbWVkaWFJbmZvLmhhc1ZpZGVvKSB7XG4gICAgICByZXR1cm4gdHJ1ZVxuICAgIH1cblxuICAgIHJldHVybiBpc09iamVjdEZpbGxlZChtZWRpYUluZm8udmlkZW8pXG4gIH1cblxuICBzdGF0aWMgaXNBdWRpb1JlYWR5IChtZWRpYUluZm8pIHtcbiAgICBpZiAoIW1lZGlhSW5mby5oYXNBdWRpbykge1xuICAgICAgcmV0dXJuIHRydWVcbiAgICB9XG5cbiAgICByZXR1cm4gaXNPYmplY3RGaWxsZWQobWVkaWFJbmZvLnZpZGVvKVxuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBNZWRpYVNhbXBsZSB7XG4gIGNvbnN0cnVjdG9yIChpbmZvKSB7XG4gICAgbGV0IF9kZWZhdWx0ID0gTWVkaWFTYW1wbGUuZ2V0RGVmYXVsdEluZigpXG5cbiAgICBpZiAoIWluZm8gfHwgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGluZm8pICE9PSAnW29iamVjdCBPYmplY3RdJykge1xuICAgICAgcmV0dXJuIF9kZWZhdWx0XG4gICAgfVxuICAgIGxldCBzYW1wbGUgPSBPYmplY3QuYXNzaWduKHt9LCBfZGVmYXVsdCwgaW5mbylcblxuICAgIE9iamVjdC5lbnRyaWVzKHNhbXBsZSkuZm9yRWFjaCgoW2ssIHZdKSA9PiB7XG4gICAgICB0aGlzW2tdID0gdlxuICAgIH0pXG4gIH1cblxuICBzdGF0aWMgZ2V0RGVmYXVsdEluZiAoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGR0czogbnVsbCxcbiAgICAgIHB0czogbnVsbCxcbiAgICAgIGR1cmF0aW9uOiBudWxsLFxuICAgICAgcG9zaXRpb246IG51bGwsXG4gICAgICBpc1JBUDogZmFsc2UsIC8vIGlzIFJhbmRvbSBhY2Nlc3MgcG9pbnRcbiAgICAgIG9yaWdpbkR0czogbnVsbFxuICAgIH1cbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgTWVkaWFTZWdtZW50TGlzdCB7XG5cbiAgICBjb25zdHJ1Y3RvciAodHlwZSkge1xuICAgICAgICB0aGlzLl90eXBlID0gdHlwZTtcbiAgICAgICAgdGhpcy5fbGlzdCA9IFtdO1xuICAgICAgICB0aGlzLl9sYXN0QXBwZW5kTG9jYXRpb24gPSAtMTsgLy8gY2FjaGVkIGxhc3QgaW5zZXJ0IGxvY2F0aW9uXG4gICAgfVxuXG4gICAgZ2V0IHR5cGUgKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fdHlwZTtcbiAgICB9XG5cbiAgICBnZXQgbGVuZ3RoICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2xpc3QubGVuZ3RoO1xuICAgIH1cblxuICAgIGlzRW1wdHkgKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fbGlzdC5sZW5ndGggPT09IDA7XG4gICAgfVxuXG4gICAgY2xlYXIgKCkge1xuICAgICAgICB0aGlzLl9saXN0ID0gW107XG4gICAgICAgIHRoaXMuX2xhc3RBcHBlbmRMb2NhdGlvbiA9IC0xO1xuICAgIH1cblxuICAgIF9zZWFyY2hOZWFyZXN0U2VnbWVudEJlZm9yZSAoYmVnaW5EdHMpIHtcbiAgICAgICAgbGV0IGxpc3QgPSB0aGlzLl9saXN0O1xuICAgICAgICBpZiAobGlzdC5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybiAtMjtcbiAgICAgICAgfVxuICAgICAgICBsZXQgbGFzdCA9IGxpc3QubGVuZ3RoIC0gMTtcbiAgICAgICAgbGV0IG1pZCA9IDA7XG4gICAgICAgIGxldCBsYm91bmQgPSAwO1xuICAgICAgICBsZXQgdWJvdW5kID0gbGFzdDtcblxuICAgICAgICBsZXQgaWR4ID0gMDtcblxuICAgICAgICBpZiAoYmVnaW5EdHMgPCBsaXN0WzBdLm9yaWdpbkR0cykge1xuICAgICAgICAgICAgaWR4ID0gLTE7XG4gICAgICAgICAgICByZXR1cm4gaWR4O1xuICAgICAgICB9XG5cbiAgICAgICAgd2hpbGUgKGxib3VuZCA8PSB1Ym91bmQpIHtcbiAgICAgICAgICAgIG1pZCA9IGxib3VuZCArIE1hdGguZmxvb3IoKHVib3VuZCAtIGxib3VuZCkgLyAyKTtcbiAgICAgICAgICAgIGlmIChtaWQgPT09IGxhc3QgfHwgKGJlZ2luRHRzID4gbGlzdFttaWRdLmxhc3RTYW1wbGUub3JpZ2luRHRzXG4gICAgICAgICAgICAgICAgICAgICYmIChiZWdpbkR0cyA8IGxpc3RbbWlkICsgMV0ub3JpZ2luRHRzKSkpIHtcbiAgICAgICAgICAgICAgICBpZHggPSBtaWQ7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGxpc3RbbWlkXS5vcmlnaW5EdHMgPCBiZWdpbkR0cykge1xuICAgICAgICAgICAgICAgIGxib3VuZCA9IG1pZCArIDE7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHVib3VuZCA9IG1pZCAtIDE7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGlkeDtcbiAgICB9XG5cbiAgICBfc2VhcmNoTmVhcmVzdFNlZ21lbnRBZnRlciAoYmVnaW5EdHMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NlYXJjaE5lYXJlc3RTZWdtZW50QmVmb3JlKGJlZ2luRHRzKSArIDE7XG4gICAgfVxuXG4gICAgYXBwZW5kIChzZWdtZW50KSB7XG4gICAgICAgIGxldCBsaXN0ID0gdGhpcy5fbGlzdDtcbiAgICAgICAgbGV0IGxhc3RBcHBlbmRJZHggPSB0aGlzLl9sYXN0QXBwZW5kTG9jYXRpb247XG4gICAgICAgIGxldCBpbnNlcnRJZHggPSAwO1xuXG4gICAgICAgIGlmIChsYXN0QXBwZW5kSWR4ICE9PSAtMSAmJiBsYXN0QXBwZW5kSWR4IDwgbGlzdC5sZW5ndGhcbiAgICAgICAgICAgICYmIHNlZ21lbnQub3JpZ2luU3RhcnREdHMgPj0gbGlzdFtsYXN0QXBwZW5kSWR4XS5sYXN0U2FtcGxlLm9yaWdpbkR0c1xuICAgICAgICAgICAgJiYgKChsYXN0QXBwZW5kSWR4ID09PSBsaXN0Lmxlbmd0aCAtIDEpXG4gICAgICAgICAgICAgICAgfHwgKGxhc3RBcHBlbmRJZHggPCBsaXN0Lmxlbmd0aCAtIDFcbiAgICAgICAgICAgICAgICAgICAgJiYgc2VnbWVudC5vcmlnaW5TdGFydER0cyA8IGxpc3RbbGFzdEFwcGVuZElkeCArIDFdLm9yaWdpblN0YXJ0RHRzKSkpIHtcbiAgICAgICAgICAgIGluc2VydElkeCA9IGxhc3RBcHBlbmRJZHggKyAxOyAvLyB1c2UgY2FjaGVkIGxvY2F0aW9uIGlkeFxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKGxpc3QubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGluc2VydElkeCA9IHRoaXMuX3NlYXJjaE5lYXJlc3RTZWdtZW50QmVmb3JlKHNlZ21lbnQub3JpZ2luU3RhcnREdHMpICsgMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuX2xhc3RBcHBlbmRMb2NhdGlvbiA9IGluc2VydElkeDtcbiAgICAgICAgdGhpcy5fbGlzdC5zcGxpY2UoaW5zZXJ0SWR4LCAwLCBzZWdtZW50KTtcbiAgICB9XG5cbiAgICBnZXRMYXN0U2VnbWVudEJlZm9yZSAoYmVnaW5EdHMpIHtcbiAgICAgICAgbGV0IGlkeCA9IHRoaXMuX3NlYXJjaE5lYXJlc3RTZWdtZW50QmVmb3JlKGJlZ2luRHRzKTtcbiAgICAgICAgaWYgKGlkeCA+PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fbGlzdFtpZHhdO1xuICAgICAgICB9IGVsc2UgeyAvLyAtMVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBnZXRMYXN0U2FtcGxlQmVmb3JlIChiZWdpbkR0cykge1xuICAgICAgICBsZXQgc2VnbWVudCA9IHRoaXMuZ2V0TGFzdFNlZ21lbnRCZWZvcmUoYmVnaW5EdHMpO1xuICAgICAgICBpZiAoc2VnbWVudCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuIHNlZ21lbnQubGFzdFNhbXBsZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZ2V0TGFzdFJBUEJlZm9yZSAoYmVnaW5EdHMpIHtcbiAgICAgICAgbGV0IHNlZ21lbnRJZHggPSB0aGlzLl9zZWFyY2hOZWFyZXN0U2VnbWVudEJlZm9yZShiZWdpbkR0cyk7XG4gICAgICAgIGxldCByYW5kb21BY2Nlc3NQb2ludHMgPSB0aGlzLl9saXN0W3NlZ21lbnRJZHhdLnJhbmRvbUFjY2Vzc1BvaW50cztcbiAgICAgICAgd2hpbGUgKHJhbmRvbUFjY2Vzc1BvaW50cy5sZW5ndGggPT09IDAgJiYgc2VnbWVudElkeCA+IDApIHtcbiAgICAgICAgICAgIHNlZ21lbnRJZHgtLTtcbiAgICAgICAgICAgIHJhbmRvbUFjY2Vzc1BvaW50cyA9IHRoaXMuX2xpc3Rbc2VnbWVudElkeF0ucmFuZG9tQWNjZXNzUG9pbnRzO1xuICAgICAgICB9XG4gICAgICAgIGlmIChyYW5kb21BY2Nlc3NQb2ludHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgcmV0dXJuIHJhbmRvbUFjY2Vzc1BvaW50c1tyYW5kb21BY2Nlc3NQb2ludHMubGVuZ3RoIC0gMV07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgIH1cblxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIE1lZGlhU2VnbWVudCB7XG4gICAgY29uc3RydWN0b3IgKCkge1xuICAgICAgICB0aGlzLnN0YXJ0RHRzID0gLTE7XG4gICAgICAgIHRoaXMuZW5kRHRzID0gLTE7XG4gICAgICAgIHRoaXMuc3RhcnRQdHMgPSAtMTtcbiAgICAgICAgdGhpcy5lbmRQdHMgPSAtMTtcbiAgICAgICAgdGhpcy5vcmlnaW5TdGFydER0cyA9IC0xO1xuICAgICAgICB0aGlzLm9yaWdpbkVuZER0cyA9IC0xO1xuICAgICAgICB0aGlzLnJhbmRvbUFjY2Vzc1BvaW50cyA9IFtdO1xuICAgICAgICB0aGlzLmZpcnN0U2FtcGxlID0gbnVsbDtcbiAgICAgICAgdGhpcy5sYXN0U2FtcGxlID0gbnVsbDtcbiAgICB9XG5cbiAgICBhZGRSQVAgKHNhbXBsZSkge1xuICAgICAgICBzYW1wbGUuaXNSQVAgPSB0cnVlO1xuICAgICAgICB0aGlzLnJhbmRvbUFjY2Vzc1BvaW50cy5wdXNoKHNhbXBsZSk7XG4gICAgfVxufSIsImV4cG9ydCBjbGFzcyBBdWRpb1RyYWNrTWV0YSB7XG4gIGNvbnN0cnVjdG9yIChtZXRhKSB7XG4gICAgY29uc3QgX2RlZmF1bHQgPSB7XG4gICAgICBzYW1wbGVSYXRlOiA0ODAwMCxcbiAgICAgIGNoYW5uZWxDb3VudDogMixcbiAgICAgIGNvZGVjOiAnbXA0YS40MC4yJyxcbiAgICAgIGNvbmZpZzogWzQxLCA0MDEsIDEzNiwgMF0sXG4gICAgICBkdXJhdGlvbjogMCxcbiAgICAgIGlkOiAyLFxuICAgICAgcmVmU2FtcGxlRHVyYXRpb246IDIxLFxuICAgICAgc2FtcGxlUmF0ZUluZGV4OiAzLFxuICAgICAgdGltZXNjYWxlOiAxMDAwLFxuICAgICAgdHlwZTogJ2F1ZGlvJ1xuICAgIH1cbiAgICBpZiAobWV0YSkge1xuICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oe30sIF9kZWZhdWx0LCBtZXRhKVxuICAgIH1cbiAgICByZXR1cm4gX2RlZmF1bHRcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgVmlkZW9UcmFja01ldGEge1xuICBjb25zdHJ1Y3RvciAobWV0YSkge1xuICAgIGNvbnN0IF9kZWZhdWx0ID0ge1xuICAgICAgYXZjYzogbnVsbCxcbiAgICAgIHNwczogbmV3IFVpbnQ4QXJyYXkoMCksXG4gICAgICBwcHM6IG5ldyBVaW50OEFycmF5KDApLFxuICAgICAgY2hyb21hRm9ybWF0OiA0MjAsXG4gICAgICBjb2RlYzogJ2F2YzEuNjQwMDIwJyxcbiAgICAgIGNvZGVjSGVpZ2h0OiA3MjAsXG4gICAgICBjb2RlY1dpZHRoOiAxMjgwLFxuICAgICAgZHVyYXRpb246IDAsXG4gICAgICBmcmFtZVJhdGU6IHtcbiAgICAgICAgZml4ZWQ6IHRydWUsXG4gICAgICAgIGZwczogMjUsXG4gICAgICAgIGZwc19udW06IDI1MDAwLFxuICAgICAgICBmcHNfZGVuOiAxMDAwXG4gICAgICB9LFxuICAgICAgaWQ6IDEsXG4gICAgICBsZXZlbDogJzMuMicsXG4gICAgICBwcmVzZW50SGVpZ2h0OiA3MjAsXG4gICAgICBwcmVzZW50V2lkdGg6IDEyODAsXG4gICAgICBwcm9maWxlOiAnSGlnaCcsXG4gICAgICByZWZTYW1wbGVEdXJhdGlvbjogNDAsXG4gICAgICBwYXJSYXRpbzoge1xuICAgICAgICBoZWlnaHQ6IDEsXG4gICAgICAgIHdpZHRoOiAxXG4gICAgICB9LFxuICAgICAgdGltZXNjYWxlOiAxMDAwLFxuICAgICAgdHlwZTogJ3ZpZGVvJ1xuICAgIH1cblxuICAgIGlmIChtZXRhKSB7XG4gICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbih7fSwgX2RlZmF1bHQsIG1ldGEpXG4gICAgfVxuICAgIHJldHVybiBfZGVmYXVsdFxuICB9XG59XG4iLCJleHBvcnQgY2xhc3MgQXVkaW9UcmFja1NhbXBsZSB7XG4gIGNvbnN0cnVjdG9yIChpbmZvKSB7XG4gICAgbGV0IF9kZWZhdWx0ID0gQXVkaW9UcmFja1NhbXBsZS5nZXREZWZhdWx0KClcbiAgICBpZiAoIWluZm8pIHtcbiAgICAgIHJldHVybiBfZGVmYXVsdFxuICAgIH1cbiAgICBsZXQgc2FtcGxlID0gT2JqZWN0LmFzc2lnbih7fSwgX2RlZmF1bHQsIGluZm8pXG5cbiAgICByZXR1cm4gc2FtcGxlXG4gIH1cblxuICBzdGF0aWMgZ2V0RGVmYXVsdCAoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGR0czogbnVsbCxcbiAgICAgIHB0czogbnVsbCxcbiAgICAgIGRhdGE6IG5ldyBVaW50OEFycmF5KClcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIFZpZGVvVHJhY2tTYW1wbGUge1xuICBjb25zdHJ1Y3RvciAoaW5mbykge1xuICAgIGxldCBfZGVmYXVsdCA9IFZpZGVvVHJhY2tTYW1wbGUuZ2V0RGVmYXVsdCgpXG5cbiAgICBpZiAoIWluZm8pIHtcbiAgICAgIHJldHVybiBfZGVmYXVsdFxuICAgIH1cbiAgICBsZXQgc2FtcGxlID0gT2JqZWN0LmFzc2lnbih7fSwgX2RlZmF1bHQsIGluZm8pXG5cbiAgICByZXR1cm4gc2FtcGxlXG4gIH1cblxuICBzdGF0aWMgZ2V0RGVmYXVsdCAoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGR0czogbnVsbCxcbiAgICAgIHB0czogbnVsbCxcbiAgICAgIGlzS2V5ZnJhbWU6IGZhbHNlLCAvLyBpcyBSYW5kb20gYWNjZXNzIHBvaW50XG4gICAgICBvcmlnaW5EdHM6IG51bGwsXG4gICAgICBkYXRhOiBuZXcgVWludDhBcnJheSgpXG4gICAgfVxuICB9XG59XG4iLCJjbGFzcyBNU0Uge1xuICBjb25zdHJ1Y3RvciAoY29uZmlncykge1xuICAgIHRoaXMuY29uZmlncyA9IE9iamVjdC5hc3NpZ24oe30sIGNvbmZpZ3MpO1xuICAgIHRoaXMuY29udGFpbmVyID0gdGhpcy5jb25maWdzLmNvbnRhaW5lcjtcbiAgICB0aGlzLm1lZGlhU291cmNlID0gbnVsbDtcbiAgICB0aGlzLnNvdXJjZUJ1ZmZlcnMgPSB7fTtcbiAgICB0aGlzLnByZWxvYWRUaW1lID0gdGhpcy5jb25maWdzLnByZWxvYWRUaW1lIHx8IDE7XG4gIH1cblxuICBpbml0ICgpIHtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW5kZWZcbiAgICB0aGlzLm1lZGlhU291cmNlID0gbmV3IHNlbGYuTWVkaWFTb3VyY2UoKTtcbiAgICB0aGlzLm1lZGlhU291cmNlLmFkZEV2ZW50TGlzdGVuZXIoJ3NvdXJjZW9wZW4nLCB0aGlzLm9uU291cmNlT3Blbi5iaW5kKHRoaXMpKTtcbiAgICB0aGlzLmNvbnRhaW5lci5zcmMgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKHRoaXMubWVkaWFTb3VyY2UpO1xuICAgIHRoaXMudXJsID0gdGhpcy5jb250YWluZXIuc3JjO1xuICAgIHRoaXMuY29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ3RpbWV1cGRhdGUnLCB0aGlzLm9uVGltZVVwZGF0ZS5iaW5kKHRoaXMpKTtcbiAgICB0aGlzLmNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCd3YWl0aW5nJywgdGhpcy5vbldhaXRpbmcuYmluZCh0aGlzKSk7XG4gIH1cblxuICBvblRpbWVVcGRhdGUgKCkge1xuICAgIHRoaXMuZW1pdCgnVElNRV9VUERBVEUnLCB0aGlzLmNvbnRhaW5lcik7XG4gIH1cbiAgIFxuICBvbldhaXRpbmcgKCkge1xuICAgIHRoaXMuZW1pdCgnV0FJVElORycsIHRoaXMuY29udGFpbmVyKTtcbiAgfVxuXG4gIG9uU291cmNlT3BlbiAoKSB7XG4gICAgdGhpcy5hZGRTb3VyY2VCdWZmZXJzKCk7XG4gIH1cblxuICBvblVwZGF0ZUVuZCAoKSB7XG4gICAgdGhpcy5lbWl0KCdTT1VSQ0VfVVBEQVRFX0VORCcpO1xuICAgIHRoaXMuZG9BcHBlbmQoKVxuICB9XG4gIGFkZFNvdXJjZUJ1ZmZlcnMgKCkge1xuICAgIGlmICh0aGlzLm1lZGlhU291cmNlLnJlYWR5U3RhdGUgIT09ICdvcGVuJykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBsZXQgc291cmNlcyA9IHRoaXMuX2NvbnRleHQuZ2V0SW5zdGFuY2UoJ1BSRV9TT1VSQ0VfQlVGRkVSJyk7XG4gICAgbGV0IHRyYWNrcyA9IHRoaXMuX2NvbnRleHQuZ2V0SW5zdGFuY2UoJ1RSQUNLUycpO1xuICAgIGxldCB0cmFjaztcblxuICAgIHNvdXJjZXMgPSBzb3VyY2VzLnNvdXJjZXM7XG4gICAgbGV0IGFkZCA9IGZhbHNlO1xuICAgIGZvciAobGV0IGkgPSAwLCBrID0gT2JqZWN0LmtleXMoc291cmNlcykubGVuZ3RoOyBpIDwgazsgaSsrKSB7XG4gICAgICBsZXQgdHlwZSA9IE9iamVjdC5rZXlzKHNvdXJjZXMpW2ldO1xuICAgICAgaWYgKHR5cGUgPT09ICdhdWRpbycpIHtcbiAgICAgICAgdHJhY2sgPSB0cmFja3MuYXVkaW9UcmFjaztcbiAgICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gJ3ZpZGVvJykge1xuICAgICAgICB0cmFjayA9IHRyYWNrcy52aWRlb1RyYWNrO1xuICAgICAgfVxuICAgICAgaWYgKHRyYWNrKSB7XG4gICAgICAgIGxldCBkdXIgPSB0eXBlID09PSAnYXVkaW8nID8gMjEgOiA0MDtcbiAgICAgICAgaWYgKHRyYWNrLm1ldGEgJiYgdHJhY2subWV0YS5yZWZTYW1wbGVEdXJhdGlvbikgZHVyID0gdHJhY2subWV0YS5yZWZTYW1wbGVEdXJhdGlvbjtcbiAgICAgICAgaWYgKHNvdXJjZXNbdHlwZV0uZGF0YS5sZW5ndGggPj0gKHRoaXMucHJlbG9hZFRpbWUgLyBkdXIpKSB7XG4gICAgICAgICAgYWRkID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChhZGQpIHtcbiAgICAgIGlmIChPYmplY3Qua2V5cyh0aGlzLnNvdXJjZUJ1ZmZlcnMpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgZm9yIChsZXQgaSA9IDAsIGsgPSBPYmplY3Qua2V5cyhzb3VyY2VzKS5sZW5ndGg7IGkgPCBrOyBpKyspIHtcbiAgICAgICAgbGV0IHR5cGUgPSBPYmplY3Qua2V5cyhzb3VyY2VzKVtpXTtcbiAgICAgICAgbGV0IHNvdXJjZSA9IHNvdXJjZXNbdHlwZV1cbiAgICAgICAgbGV0IG1pbWUgPSAodHlwZSA9PT0gJ3ZpZGVvJykgPyAndmlkZW8vbXA0O2NvZGVjcz0nICsgc291cmNlLm1pbWV0eXBlIDogJ2F1ZGlvL21wNDtjb2RlY3M9JyArIHNvdXJjZS5taW1ldHlwZVxuICAgICAgICBsZXQgc291cmNlQnVmZmVyID0gdGhpcy5tZWRpYVNvdXJjZS5hZGRTb3VyY2VCdWZmZXIobWltZSk7XG4gICAgICAgIHRoaXMuc291cmNlQnVmZmVyc1t0eXBlXSA9IHNvdXJjZUJ1ZmZlcjtcbiAgICAgICAgc291cmNlQnVmZmVyLmFkZEV2ZW50TGlzdGVuZXIoJ3VwZGF0ZWVuZCcsIHRoaXMub25VcGRhdGVFbmQuYmluZCh0aGlzKSk7XG4gICAgICAgIHRoaXMuZG9BcHBlbmQoKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBkb0FwcGVuZCAoKSB7XG4gICAgbGV0IHNvdXJjZXMgPSB0aGlzLl9jb250ZXh0LmdldEluc3RhbmNlKCdQUkVfU09VUkNFX0JVRkZFUicpO1xuICAgIGlmIChzb3VyY2VzKSB7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IE9iamVjdC5rZXlzKHRoaXMuc291cmNlQnVmZmVycykubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgbGV0IHR5cGUgPSBPYmplY3Qua2V5cyh0aGlzLnNvdXJjZUJ1ZmZlcnMpW2ldXG4gICAgICAgIGxldCBzb3VyY2VCdWZmZXIgPSB0aGlzLnNvdXJjZUJ1ZmZlcnNbdHlwZV07XG4gICAgICAgIGlmICghc291cmNlQnVmZmVyLnVwZGF0aW5nKSB7XG4gICAgICAgICAgbGV0IHNvdXJjZSA9IHNvdXJjZXMuc291cmNlc1t0eXBlXTtcbiAgICAgICAgICBpZiAoc291cmNlICYmICFzb3VyY2UuaW5pdGVkKSB7XG4gICAgICAgICAgICBzb3VyY2VCdWZmZXIuYXBwZW5kQnVmZmVyKHNvdXJjZS5pbml0LmJ1ZmZlci5idWZmZXIpO1xuICAgICAgICAgICAgc291cmNlLmluaXRlZCA9IHRydWU7XG4gICAgICAgICAgfSBlbHNlIGlmIChzb3VyY2UpIHtcbiAgICAgICAgICAgIGxldCBkYXRhID0gc291cmNlLmRhdGEuc2hpZnQoKVxuICAgICAgICAgICAgaWYgKGRhdGEpIHtcbiAgICAgICAgICAgICAgc291cmNlQnVmZmVyLmFwcGVuZEJ1ZmZlcihkYXRhLmJ1ZmZlci5idWZmZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGVuZE9mU3RyZWFtICgpIHtcbiAgICBpZiAodGhpcy5tZWRpYVNvdXJjZS5yZWFkeVN0YXRlID09PSAnb3BlbicpIHtcbiAgICAgIHRoaXMubWVkaWFTb3VyY2UuZW5kT2ZTdHJlYW0oKVxuICAgIH1cbiAgfVxuXG4gIHJlbW92ZSAoZW5kKSB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBPYmplY3Qua2V5cyh0aGlzLnNvdXJjZUJ1ZmZlcnMpLmxlbmd0aDsgaSsrKSB7XG4gICAgICBsZXQgYnVmZmVyID0gdGhpcy5zb3VyY2VCdWZmZXJzW09iamVjdC5rZXlzKHRoaXMuc291cmNlQnVmZmVycylbaV1dO1xuICAgICAgaWYgKCFidWZmZXIudXBkYXRpbmcpIHtcbiAgICAgICAgYnVmZmVyLnJlbW92ZSgwLCBlbmQpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGRlc3Ryb3kgKCkge1xuICAgIHRoaXMuY29udGFpbmVyLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RpbWV1cGRhdGUnLCB0aGlzLm9uVGltZVVwZGF0ZSk7XG4gICAgdGhpcy5jb250YWluZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcignd2FpdGluZycsIHRoaXMub25XYWl0aW5nKTtcbiAgICB0aGlzLm1lZGlhU291cmNlLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3NvdXJjZW9wZW4nLCB0aGlzLm9uU291cmNlT3Blbik7XG4gICAgdGhpcy5jb25maWdzID0ge307XG4gICAgdGhpcy5jb250YWluZXIgPSBudWxsO1xuICAgIHRoaXMubWVkaWFTb3VyY2UgPSBudWxsO1xuICAgIHRoaXMuc291cmNlQnVmZmVycyA9IHt9O1xuICAgIHRoaXMucHJlbG9hZFRpbWUgPSAxO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgT2JqZWN0LmtleXModGhpcy5zb3VyY2VCdWZmZXJzKS5sZW5ndGg7IGkrKykge1xuICAgICAgbGV0IGJ1ZmZlciA9IHRoaXMuc291cmNlQnVmZmVyc1tPYmplY3Qua2V5cyh0aGlzLnNvdXJjZUJ1ZmZlcnMpW2ldXTtcbiAgICAgIGJ1ZmZlci5yZW1vdmVFdmVudExpc3RlbmVyKCd1cGRhdGVlbmQnLCB0aGlzLm9uVXBkYXRlRW5kKTtcbiAgICAgIHRoaXMubWVkaWFTb3VyY2UucmVtb3ZlU291cmNlQnVmZmVyKGJ1ZmZlcik7XG4gICAgICBkZWxldGUgdGhpcy5zb3VyY2VCdWZmZXJzW09iamVjdC5rZXlzKHRoaXMuc291cmNlQnVmZmVycylbaV1dO1xuICAgIH1cbiAgfVxufVxuZXhwb3J0IGRlZmF1bHQgTVNFO1xuIiwiaW1wb3J0IENvbmNhdCBmcm9tICdjb25jYXQtdHlwZWQtYXJyYXknXG5cbmNsYXNzIEJ1ZmZlciB7XG4gIGNvbnN0cnVjdG9yIChidWZmZXIpIHtcbiAgICB0aGlzLmJ1ZmZlciA9IGJ1ZmZlciB8fCBuZXcgVWludDhBcnJheSgwKVxuICB9XG5cbiAgd3JpdGUgKC4uLmJ1ZmZlcikge1xuICAgIGJ1ZmZlci5mb3JFYWNoKGl0ZW0gPT4ge1xuICAgICAgdGhpcy5idWZmZXIgPSBDb25jYXQoVWludDhBcnJheSwgdGhpcy5idWZmZXIsIGl0ZW0pXG4gICAgfSlcbiAgfVxuXG4gIHN0YXRpYyB3cml0ZVVpbnQzMiAodmFsdWUpIHtcbiAgICByZXR1cm4gbmV3IFVpbnQ4QXJyYXkoW1xuICAgICAgdmFsdWUgPj4gMjQsXG4gICAgICAodmFsdWUgPj4gMTYpICYgMHhmZixcbiAgICAgICh2YWx1ZSA+PiA4KSAmIDB4ZmYsXG4gICAgICB2YWx1ZSAmIDB4ZmZcbiAgICBdKVxuICB9XG5cbiAgc3RhdGljIHJlYWRBc0ludCAoYXJyKSB7XG4gICAgbGV0IHRlbXAgPSAnJ1xuXG4gICAgZnVuY3Rpb24gcGFkU3RhcnQ0SGV4IChoZXhOdW0pIHtcbiAgICAgIGxldCBoZXhTdHIgPSBoZXhOdW0udG9TdHJpbmcoMTYpXG4gICAgICByZXR1cm4gaGV4U3RyLnBhZFN0YXJ0KDIsICcwJylcbiAgICB9XG5cbiAgICBhcnIuZm9yRWFjaChudW0gPT4ge1xuICAgICAgdGVtcCArPSBwYWRTdGFydDRIZXgobnVtKVxuICAgIH0pXG4gICAgcmV0dXJuIHBhcnNlSW50KHRlbXAsIDE2KVxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEJ1ZmZlclxuIiwiY2xhc3MgU3RyZWFtIHtcbiAgY29uc3RydWN0b3IgKGJ1ZmZlcikge1xuICAgIGlmIChidWZmZXIgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcikge1xuICAgICAgdGhpcy5idWZmZXIgPSBidWZmZXI7XG4gICAgICB0aGlzLmRhdGF2aWV3ID0gbmV3IERhdGFWaWV3KGJ1ZmZlcik7XG4gICAgICB0aGlzLmRhdGF2aWV3LnBvc2l0aW9uID0gMDtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdkYXRhIGlzIGludmFsaWQnKTtcbiAgICB9XG4gIH1cblxuICBnZXQgbGVuZ3RoICgpIHtcbiAgICByZXR1cm4gdGhpcy5idWZmZXIuYnl0ZUxlbmd0aDtcbiAgfVxuXG4gIHNldCBwb3NpdGlvbiAodmFsdWUpIHtcbiAgICB0aGlzLmRhdGF2aWV3LnBvc2l0aW9uID0gdmFsdWU7XG4gIH1cblxuICBnZXQgcG9zaXRpb24gKCkge1xuICAgIHJldHVybiB0aGlzLmRhdGF2aWV3LnBvc2l0aW9uO1xuICB9XG5cbiAgYmFjayAoY291bnQpIHtcbiAgICB0aGlzLnBvc2l0aW9uIC09IGNvdW50O1xuICB9XG5cbiAgc2tpcCAoY291bnQpIHtcbiAgICBsZXQgbG9vcCA9IE1hdGguZmxvb3IoY291bnQgLyA0KTtcbiAgICBsZXQgbGFzdCA9IGNvdW50ICUgNDtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxvb3A7IGkrKykge1xuICAgICAgU3RyZWFtLnJlYWRCeXRlKHRoaXMuZGF0YXZpZXcsIDQpO1xuICAgIH1cbiAgICBpZiAobGFzdCA+IDApIHtcbiAgICAgIFN0cmVhbS5yZWFkQnl0ZSh0aGlzLmRhdGF2aWV3LCBsYXN0KTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogW3JlYWRCeXRlIOS7jkRhdGFWaWV35Lit6K+75Y+W5pWw5o2uXVxuICAgKiBAcGFyYW0gIHtEYXRhVmlld30gYnVmZmVyIFtEYXRhVmlld+WunuS+i11cbiAgICogQHBhcmFtICB7TnVtYmVyfSBzaXplICAgW+ivu+WPluWtl+iKguaVsF1cbiAgICogQHJldHVybiB7TnVtYmVyfSAgICAgICAgW+aVtOaVsF1cbiAgICovXG4gIHN0YXRpYyByZWFkQnl0ZSAoYnVmZmVyLCBzaXplLCBzaWduKSB7XG4gICAgbGV0IHJlcztcbiAgICBzd2l0Y2ggKHNpemUpIHtcbiAgICAgIGNhc2UgMTpcbiAgICAgICAgaWYgKHNpZ24pIHtcbiAgICAgICAgICByZXMgPSBidWZmZXIuZ2V0SW50OChidWZmZXIucG9zaXRpb24pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJlcyA9IGJ1ZmZlci5nZXRVaW50OChidWZmZXIucG9zaXRpb24pO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAyOlxuICAgICAgICBpZiAoc2lnbikge1xuICAgICAgICAgIHJlcyA9IGJ1ZmZlci5nZXRJbnQxNihidWZmZXIucG9zaXRpb24pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJlcyA9IGJ1ZmZlci5nZXRVaW50MTYoYnVmZmVyLnBvc2l0aW9uKTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgMzpcbiAgICAgICAgaWYgKHNpZ24pIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ25vdCBzdXBwb3J0ZWQgZm9yIHJlYWRCeXRlIDMnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXMgPSBidWZmZXIuZ2V0VWludDgoYnVmZmVyLnBvc2l0aW9uKSA8PCAxNjtcbiAgICAgICAgICByZXMgfD0gYnVmZmVyLmdldFVpbnQ4KGJ1ZmZlci5wb3NpdGlvbiArIDEpIDw8IDg7XG4gICAgICAgICAgcmVzIHw9IGJ1ZmZlci5nZXRVaW50OChidWZmZXIucG9zaXRpb24gKyAyKTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgNDpcbiAgICAgICAgaWYgKHNpZ24pIHtcbiAgICAgICAgICByZXMgPSBidWZmZXIuZ2V0SW50MzIoYnVmZmVyLnBvc2l0aW9uKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXMgPSBidWZmZXIuZ2V0VWludDMyKGJ1ZmZlci5wb3NpdGlvbik7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIDg6XG4gICAgICAgIGlmIChzaWduKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdub3Qgc3VwcG9ydGVkIGZvciByZWFkQm9keSA4Jyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmVzID0gYnVmZmVyLmdldFVpbnQzMihidWZmZXIucG9zaXRpb24pIDw8IDMyO1xuICAgICAgICAgIHJlcyB8PSBidWZmZXIuZ2V0VWludDMyKGJ1ZmZlci5wb3NpdGlvbiArIDQpO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmVzID0gJyc7XG4gICAgfVxuICAgIGJ1ZmZlci5wb3NpdGlvbiArPSBzaXplO1xuICAgIHJldHVybiByZXM7XG4gIH1cblxuICByZWFkVWludDggKCkge1xuICAgIHJldHVybiBTdHJlYW0ucmVhZEJ5dGUodGhpcy5kYXRhdmlldywgMSk7XG4gIH1cblxuICByZWFkVWludDE2ICgpIHtcbiAgICByZXR1cm4gU3RyZWFtLnJlYWRCeXRlKHRoaXMuZGF0YXZpZXcsIDIpO1xuICB9XG5cbiAgcmVhZFVpbnQyNCAoKSB7XG4gICAgcmV0dXJuIFN0cmVhbS5yZWFkQnl0ZSh0aGlzLmRhdGF2aWV3LCAzKTtcbiAgfVxuXG4gIHJlYWRVaW50MzIgKCkge1xuICAgIHJldHVybiBTdHJlYW0ucmVhZEJ5dGUodGhpcy5kYXRhdmlldywgNCk7XG4gIH1cblxuICByZWFkVWludDY0ICgpIHtcbiAgICByZXR1cm4gU3RyZWFtLnJlYWRCeXRlKHRoaXMuZGF0YXZpZXcsIDgpO1xuICB9XG5cbiAgcmVhZEludDggKCkge1xuICAgIHJldHVybiBTdHJlYW0ucmVhZEJ5dGUodGhpcy5kYXRhdmlldywgMSwgdHJ1ZSk7XG4gIH1cbiAgcmVhZEludDE2ICgpIHtcbiAgICByZXR1cm4gU3RyZWFtLnJlYWRCeXRlKHRoaXMuZGF0YXZpZXcsIDIsIHRydWUpO1xuICB9XG5cbiAgcmVhZEludDMyICgpIHtcbiAgICByZXR1cm4gU3RyZWFtLnJlYWRCeXRlKHRoaXMuZGF0YXZpZXcsIDQsIHRydWUpO1xuICB9XG5cbiAgd3JpdGVVaW50MzIgKHZhbHVlKSB7XG4gICAgcmV0dXJuIG5ldyBVaW50OEFycmF5KFtcbiAgICAgIHZhbHVlID4+PiAyNCAmIDB4ZmYsXG4gICAgICB2YWx1ZSA+Pj4gMTYgJiAweGZmLFxuICAgICAgdmFsdWUgPj4+IDggJiAweGZmLFxuICAgICAgdmFsdWUgJiAweGZmXG4gICAgXSk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgU3RyZWFtO1xuIiwiaW1wb3J0IEZsdkRlbXV4ZXIgZnJvbSAnLi4vLi4veGdwbGF5ZXItZGVtdXgvc3JjL2ZsdidcbmltcG9ydCBSZW11eGVyIGZyb20gJ3hncGxheWVyLXJlbXV4J1xuaW1wb3J0IHsgRmV0Y2hMb2FkZXIgfSBmcm9tICd4Z3BsYXllci1sb2FkZXInXG5pbXBvcnQgeyBUcmFja3MsIFhnQnVmZmVyLCBQcmVTb3VyY2UgfSBmcm9tICd4Z3BsYXllci1idWZmZXInXG5pbXBvcnQgeyBNc2UsIEVWRU5UUyB9IGZyb20gJ3hncGxheWVyLXV0aWxzJ1xuaW1wb3J0IHsgQ29tcGF0aWJpbGl0eSB9IGZyb20gJ3hncGxheWVyLWNvZGVjJ1xuaW1wb3J0IFBsYXllciBmcm9tICd4Z3BsYXllcidcblxuY29uc3QgUkVNVVhfRVZFTlRTID0gRVZFTlRTLlJFTVVYX0VWRU5UUztcbmNvbnN0IERFTVVYX0VWRU5UUyA9IEVWRU5UUy5ERU1VWF9FVkVOVFM7XG5jb25zdCBMT0FERVJfRVZFTlRTID0gRVZFTlRTLkxPQURFUl9FVkVOVFNcblxuY29uc3QgVGFnID0gJ0ZMVkNvbnRyb2xsZXInXG5cbmNsYXNzIExvZ2dlciB7XG4gIHdhcm4gKCkge31cbn1cblxuY2xhc3MgRmx2Q29udHJvbGxlciB7XG4gIGNvbnN0cnVjdG9yIChwbGF5ZXIpIHtcbiAgICB0aGlzLlRBRyA9IFRhZ1xuICAgIHRoaXMuX3BsYXllciA9IHBsYXllclxuXG4gICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgIGluaXRTZWdtZW50QXJyaXZlZDogZmFsc2UsXG4gICAgICByYW5nZToge1xuICAgICAgICBzdGFydDogMCxcbiAgICAgICAgZW5kOiAnJ1xuICAgICAgfSxcbiAgICAgIHJhbmdlU3VwcG9ydDogdHJ1ZVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBmaW5kRmlsZVBvc2l0aW9uICh0aW1lLCBrZXlmcmFtZXMpIHtcbiAgICBmb3IgKGxldCBpID0gMCwgbGVuID0ga2V5ZnJhbWVzLnRpbWVzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICBjb25zdCBjdXJyZW50S2V5ZnJhbWVUaW1lID0ga2V5ZnJhbWVzLnRpbWVzW2ldXG4gICAgICBjb25zdCBuZXh0S2V5ZnJhbWVUaW1lID0gaSArIDEgPCBsZW4gPyBrZXlmcmFtZXMudGltZXNbaSArIDFdIDogTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVJcblxuICAgICAgaWYgKGN1cnJlbnRLZXlmcmFtZVRpbWUgPD0gdGltZSAmJiB0aW1lIDw9IG5leHRLZXlmcmFtZVRpbWUpIHtcbiAgICAgICAgcmV0dXJuIGtleWZyYW1lcy5maWxlcG9zaXRpb25zW2ldXG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuICcnXG4gIH1cblxuICBpbml0ICgpIHtcbiAgICB0aGlzLl9jb250ZXh0LnJlZ2lzdHJ5KCdGRVRDSF9MT0FERVInLCBGZXRjaExvYWRlcilcbiAgICB0aGlzLl9jb250ZXh0LnJlZ2lzdHJ5KCdMT0FERVJfQlVGRkVSJywgWGdCdWZmZXIpXG5cbiAgICB0aGlzLl9jb250ZXh0LnJlZ2lzdHJ5KCdGTFZfREVNVVhFUicsIEZsdkRlbXV4ZXIpXG4gICAgdGhpcy5fY29udGV4dC5yZWdpc3RyeSgnVFJBQ0tTJywgVHJhY2tzKVxuXG4gICAgdGhpcy5fY29udGV4dC5yZWdpc3RyeSgnTVA0X1JFTVVYRVInLCBSZW11eGVyLk1wNFJlbXV4ZXIpXG4gICAgdGhpcy5fY29udGV4dC5yZWdpc3RyeSgnUFJFX1NPVVJDRV9CVUZGRVInLCBQcmVTb3VyY2UpXG5cbiAgICB0aGlzLl9jb250ZXh0LnJlZ2lzdHJ5KCdDT01QQVRJQklMSVRZJywgQ29tcGF0aWJpbGl0eSlcblxuICAgIHRoaXMuX2NvbnRleHQucmVnaXN0cnkoJ0xPR0dFUicsIExvZ2dlcilcbiAgICB0aGlzLm1zZSA9IHRoaXMuX2NvbnRleHQucmVnaXN0cnkoJ01TRScsIE1zZSkoeyBjb250YWluZXI6IHRoaXMuX3BsYXllci52aWRlbyB9KVxuXG4gICAgdGhpcy5pbml0TGlzdGVuZXJzKClcblxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgdGhpcy5sb2FkTWV0YSgpXG4gICAgfSwgMClcbiAgfVxuXG4gIGluaXRMaXN0ZW5lcnMgKCkge1xuICAgIHRoaXMub24oTE9BREVSX0VWRU5UUy5MT0FERVJfREFUQUxPQURFRCwgdGhpcy5faGFuZGxlTG9hZGVyRGF0YUxvYWRlZC5iaW5kKHRoaXMpKVxuXG4gICAgdGhpcy5vbihERU1VWF9FVkVOVFMuTUVESUFfSU5GTywgdGhpcy5faGFuZGxlTWVkaWFJbmZvLmJpbmQodGhpcykpXG4gICAgdGhpcy5vbihERU1VWF9FVkVOVFMuTUVUQURBVEFfUEFSU0VELCB0aGlzLl9oYW5kbGVNZXRhZGF0YVBhcnNlZC5iaW5kKHRoaXMpKVxuICAgIHRoaXMub24oREVNVVhfRVZFTlRTLkRFTVVYX0NPTVBMRVRFLCB0aGlzLl9oYW5kbGVEZW11eENvbXBsZXRlLmJpbmQodGhpcykpXG4gICAgdGhpcy5vbihERU1VWF9FVkVOVFMuREVNVVhfRVJST1IsIHRoaXMuX2hhbmRsZURlbXV4RXJyb3IuYmluZCh0aGlzKSlcblxuICAgIHRoaXMub24oUkVNVVhfRVZFTlRTLklOSVRfU0VHTUVOVCwgdGhpcy5faGFuZGxlQXBwZW5kSW5pdFNlZ21lbnQuYmluZCh0aGlzKSlcbiAgICB0aGlzLm9uKFJFTVVYX0VWRU5UUy5NRURJQV9TRUdNRU5ULCB0aGlzLl9oYW5kbGVNZWRpYVNlZ21lbnQuYmluZCh0aGlzKSlcbiAgfVxuXG4gIF9oYW5kbGVNZWRpYUluZm8gKCkge1xuICAgIGlmICghdGhpcy5fY29udGV4dC5vbk1ldGFEYXRhKSB7XG4gICAgICB0aGlzLmVtaXQoREVNVVhfRVZFTlRTLkRFTVVYX0VSUk9SLCBuZXcgRXJyb3IoJ2ZhaWxlZCB0byBnZXQgbWVkaWFpbmZvJykpXG4gICAgfVxuICAgIGNvbnN0IGJ1ZmZlciA9IHRoaXMuX2NvbnRleHQuZ2V0SW5zdGFuY2UoJ0xPQURFUl9CVUZGRVInKVxuICAgIGNvbnN0IGxvYWRlciA9IHRoaXMuX2NvbnRleHQuZ2V0SW5zdGFuY2UoJ0ZFVENIX0xPQURFUicpXG4gICAgaWYgKHRoaXMuaXNTZWVrYWJsZSkge1xuICAgICAgbG9hZGVyLmNhbmNlbCgpXG4gICAgICAvLyDliJ3lp4vljJbngrnmkq3nmoRyYW5nZVxuICAgICAgdGhpcy5zdGF0ZS5yYW5nZSA9IHtcbiAgICAgICAgc3RhcnQ6IDAsXG4gICAgICAgIGVuZDogYnVmZmVyLmhpc3RvcnlMZW4gLSAxXG4gICAgICB9XG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgdGhpcy5sb2FkTmV4dCgwKVxuICAgICAgfSlcbiAgICB9XG4gIH1cblxuICBfaGFuZGxlTG9hZGVyRGF0YUxvYWRlZCAoKSB7XG4gICAgdGhpcy5lbWl0VG8oJ0ZMVl9ERU1VWEVSJywgREVNVVhfRVZFTlRTLkRFTVVYX1NUQVJUKVxuICB9XG5cbiAgX2hhbmRsZU1ldGFkYXRhUGFyc2VkICh0eXBlKSB7XG4gICAgdGhpcy5lbWl0KFJFTVVYX0VWRU5UUy5SRU1VWF9NRVRBREFUQSwgdHlwZSlcbiAgfVxuXG4gIF9oYW5kbGVEZW11eENvbXBsZXRlICgpIHtcbiAgICB0aGlzLmVtaXQoUkVNVVhfRVZFTlRTLlJFTVVYX01FRElBKVxuICB9XG5cbiAgX2hhbmRsZUFwcGVuZEluaXRTZWdtZW50ICgpIHtcbiAgICB0aGlzLnN0YXRlLmluaXRTZWdtZW50QXJyaXZlZCA9IHRydWVcbiAgICB0aGlzLm1zZS5hZGRTb3VyY2VCdWZmZXJzKClcbiAgfVxuXG4gIF9oYW5kbGVNZWRpYVNlZ21lbnQgKCkge1xuICAgIHRoaXMubXNlLmFkZFNvdXJjZUJ1ZmZlcnMoKVxuICAgIHRoaXMubXNlLmRvQXBwZW5kKCk7XG4gIH1cblxuICBfaGFuZGxlRGVtdXhFcnJvcigpIHtcbiAgICB0aGlzLl9wbGF5ZXIuZW1pdCgnZXJyb3InLCBuZXcgUGxheWVyLkVycm9ycygncGFyc2UnLCB0aGlzLl9wbGF5ZXIuY29uZmlnLnVybCkpXG4gIH1cblxuICBzZWVrICh0aW1lKSB7XG4gICAgaWYgKCF0aGlzLl9jb250ZXh0Lm9uTWV0YURhdGEpIHtcbiAgICAgIHRoaXMubG9hZE1ldGEoKVxuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIGlmICghdGhpcy5pc1NlZWthYmxlKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBjb25zdCBidWZmZXIgPSB0aGlzLl9jb250ZXh0LmdldEluc3RhbmNlKCdMT0FERVJfQlVGRkVSJylcbiAgICBidWZmZXIuY2xlYXIoKVxuXG4gICAgY29uc3QgeyBwcmVsb2FkVGltZSA9IDE1IH0gPSB0aGlzLl9wbGF5ZXIuY29uZmlnXG4gICAgY29uc3QgcmFuZ2UgPSB0aGlzLmdldFNlZWtSYW5nZSh0aW1lLCBwcmVsb2FkVGltZSlcbiAgICB0aGlzLnN0YXRlLnJhbmdlID0gcmFuZ2VcbiAgICB0aGlzLmxvYWREYXRhKClcbiAgfVxuXG4gIGxvYWROZXh0IChjdXJUaW1lKSB7XG4gICAgaWYgKCF0aGlzLl9jb250ZXh0Lm9uTWV0YURhdGEpIHtcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGlmICh0aGlzLmxvYWRlci5sb2FkaW5nKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuZ2V0TmV4dFJhbmdlKGN1clRpbWUpKSB7XG4gICAgICB0aGlzLmxvYWREYXRhKClcbiAgICB9XG4gIH1cblxuICBsb2FkRGF0YSAoKSB7XG4gICAgY29uc3QgeyBzdGFydCwgZW5kIH0gPSB0aGlzLnN0YXRlLnJhbmdlXG4gICAgdGhpcy5lbWl0KExPQURFUl9FVkVOVFMuTEFERVJfU1RBUlQsIHRoaXMuX3BsYXllci5jb25maWcudXJsLCB7XG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIG1ldGhvZDogJ2dldCcsXG4gICAgICAgIFJhbmdlOiBgYnl0ZXM9JHtzdGFydH0tJHtlbmR9YFxuICAgICAgfVxuICAgIH0pXG4gIH1cblxuICBsb2FkTWV0YSAoKSB7XG4gICAgdGhpcy5sb2FkZXIubG9hZCh0aGlzLl9wbGF5ZXIuY29uZmlnLnVybCwge1xuICAgICAgaGVhZGVyczoge1xuICAgICAgICBSYW5nZTogJ2J5dGVzPTAtJ1xuICAgICAgfVxuICAgIH0pLmNhdGNoKCgpID0+IHtcbiAgICAgIC8vIOWcqOWwneivleiOt+WPluinhumikeaVsOaNruWksei0peaXtu+8jOWwneivleS9v+eUqOebtOaSreaWueW8j+WKoOi9veaVtOS4quinhumikVxuICAgICAgdGhpcy5zdGF0ZS5yYW5nZVN1cHBvcnQgPSBmYWxzZVxuICAgICAgdGhpcy5sb2FkRmFsbGJhY2soKVxuICAgIH0pXG5cbiAgfVxuXG4gIGxvYWRGYWxsYmFjayAoKSB7XG4gICAgdGhpcy5sb2FkZXIubG9hZCh0aGlzLl9wbGF5ZXIuY29uZmlnLnVybCkuY2F0Y2goKCkgPT4ge1xuICAgICAgLy8g5Zyo5bCd6K+V6I635Y+W6KeG6aKR5pWw5o2u5aSx6LSl5pe277yM5bCd6K+V5L2/55So55u05pKt5pa55byP5Yqg6L295pW05Liq6KeG6aKRXG4gICAgICB0aGlzLl9wbGF5ZXIuZW1pdCgnZXJyb3InLCBuZXcgUGxheWVyLkVycm9ycygnbmV0d29yaycsIHRoaXMuX3BsYXllci5jb25maWcudXJsKSlcbiAgICB9KVxuICB9XG5cbiAgZ2V0U2Vla1JhbmdlICh0aW1lLCBwcmVsb2FkVGltZSkge1xuICAgIGNvbnN0IHsga2V5ZnJhbWVzIH0gPSB0aGlzLl9jb250ZXh0Lm9uTWV0YURhdGFcbiAgICBjb25zdCBkdXJhdGlvbiA9IHRoaXMuX2NvbnRleHQubWVkaWFJbmZvLmR1cmF0aW9uXG4gICAgY29uc3Qgc2Vla1N0YXJ0VGltZSA9IHRpbWVcbiAgICBjb25zdCBzZWVrRW5kVGltZSA9IHRpbWUgKyBwcmVsb2FkVGltZVxuXG4gICAgY29uc3Qgc2Vla1N0YXJ0RmlsZVBvcyA9IEZsdkNvbnRyb2xsZXIuZmluZEZpbGVQb3NpdGlvbihzZWVrU3RhcnRUaW1lLCBrZXlmcmFtZXMpXG5cbiAgICBpZiAoc2Vla0VuZFRpbWUgPj0gZHVyYXRpb24gfHwgc2Vla1N0YXJ0VGltZSA+PSBkdXJhdGlvbikge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3RhcnQ6IHNlZWtTdGFydEZpbGVQb3MsXG4gICAgICAgIGVuZDogJydcbiAgICAgIH1cbiAgICB9XG4gICAgY29uc3Qgc2Vla0VuZEZpbGVQb3MgPSBGbHZDb250cm9sbGVyLmZpbmRGaWxlUG9zaXRpb24oc2Vla0VuZFRpbWUsIGtleWZyYW1lcylcblxuICAgIHJldHVybiB7XG4gICAgICBzdGFydDogc2Vla1N0YXJ0RmlsZVBvcyxcbiAgICAgIGVuZDogc2Vla0VuZEZpbGVQb3NcbiAgICB9XG4gIH1cblxuICBnZXROZXh0UmFuZ2UgKHRpbWUpIHtcbiAgICBpZiAodGhpcy5zdGF0ZS5yYW5nZS5lbmQgPT09ICcnKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgeyBlbmQgfSA9IHRoaXMuZ2V0U2Vla1JhbmdlKHRpbWUsIHRoaXMuY29uZmlnLnByZWxvYWRUaW1lIHx8IDE1KVxuICAgIGlmIChlbmQgPD0gdGhpcy5zdGF0ZS5yYW5nZS5lbmQgJiYgZW5kICE9PSAnJykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuc3RhdGUucmFuZ2UgPSB7XG4gICAgICBzdGFydDogdGhpcy5zdGF0ZS5yYW5nZS5lbmQgKyAxLFxuICAgICAgZW5kXG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgZGVzdHJveSAoKSB7XG4gICAgdGhpcy5fcGxheWVyID0gbnVsbFxuICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICBpbml0U2VnbWVudEFycml2ZWQ6IGZhbHNlLFxuICAgICAgcmFuZ2U6IHtcbiAgICAgICAgc3RhcnQ6IDAsXG4gICAgICAgIGVuZDogJydcbiAgICAgIH0sXG4gICAgICByYW5nZVN1cHBvcnQ6IHRydWVcbiAgICB9XG4gIH1cblxuICBnZXQgaXNTZWVrYWJsZSAoKSB7XG4gICAgaWYgKCF0aGlzLnN0YXRlLnJhbmdlU3VwcG9ydCkge1xuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLl9jb250ZXh0IHx8ICF0aGlzLl9jb250ZXh0Lm1lZGlhSW5mby5pc0NvbXBsZXRlKCkpIHtcbiAgICAgIHJldHVybiB0cnVlXG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9jb250ZXh0Lm1lZGlhSW5mby5rZXlmcmFtZXMgIT09IG51bGwgJiYgdGhpcy5fY29udGV4dC5tZWRpYUluZm8ua2V5ZnJhbWVzICE9PSB1bmRlZmluZWRcbiAgfVxuXG4gIGdldCBjb25maWcgKCkge1xuICAgIHJldHVybiB0aGlzLl9wbGF5ZXIuY29uZmlnXG4gIH1cblxuICBnZXQgbG9hZGVyICgpIHtcbiAgICByZXR1cm4gdGhpcy5fY29udGV4dC5nZXRJbnN0YW5jZSgnRkVUQ0hfTE9BREVSJylcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBGbHZDb250cm9sbGVyXG4iLCJpbXBvcnQgUGxheWVyIGZyb20gJ3hncGxheWVyJ1xuaW1wb3J0IHsgQ29udGV4dCwgRVZFTlRTIH0gZnJvbSAneGdwbGF5ZXItdXRpbHMnO1xuaW1wb3J0IEZMViBmcm9tICcuL2Zsdi12b2QnXG5cbmNvbnN0IGZsdkFsbG93ZWRFdmVudHMgPSBFVkVOVFMuRmx2QWxsb3dlZEV2ZW50cztcblxuY29uc3QgaXNFbmRlZCA9IChwbGF5ZXIsIGZsdikgPT4ge1xuICBpZiAoIXBsYXllci5jb25maWcuaXNMaXZlKSB7XG4gICAgaWYgKHBsYXllci5kdXJhdGlvbiAtIHBsYXllci5jdXJyZW50VGltZSA8IDIpIHtcbiAgICAgIGNvbnN0IHJhbmdlID0gcGxheWVyLmdldEJ1ZmZlcmVkUmFuZ2UoKVxuICAgICAgaWYgKHBsYXllci5jdXJyZW50VGltZSAtIHJhbmdlWzFdIDwgMC4xKSB7XG4gICAgICAgIHBsYXllci5lbWl0KCdlbmRlZCcpXG4gICAgICAgIGZsdi5tc2UuZW5kT2ZTdHJlYW0oKVxuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG5jbGFzcyBGbHZQbGF5ZXIgZXh0ZW5kcyBQbGF5ZXIge1xuICBjb25zdHJ1Y3RvciAoY29uZmlnKSB7XG4gICAgc3VwZXIoY29uZmlnKVxuICAgIHRoaXMuY29udGV4dCA9IG5ldyBDb250ZXh0KGZsdkFsbG93ZWRFdmVudHMpXG4gICAgdGhpcy5pbml0RXZlbnRzKClcbiAgICAvLyBjb25zdCBwcmVsb2FkVGltZSA9IHBsYXllci5jb25maWcucHJlbG9hZFRpbWUgfHwgMTVcbiAgfVxuXG4gIHN0YXJ0ICgpIHtcbiAgICBjb25zdCBmbHYgPSB0aGlzLmNvbnRleHQucmVnaXN0cnkoJ0ZMVl9DT05UUk9MTEVSJywgRkxWKSh0aGlzKVxuICAgIHRoaXMuZmx2ID0gZmx2XG4gICAgdGhpcy5jb250ZXh0LmluaXQoKVxuICAgIHN1cGVyLnN0YXJ0KGZsdi5tc2UudXJsKVxuICB9XG5cbiAgaW5pdEV2ZW50cyAoKSB7XG4gICAgdGhpcy5vbigndGltZXVwZGF0ZScsIHRoaXMuaGFuZGxlVGltZVVwZGF0ZS5iaW5kKHRoaXMpKVxuXG4gICAgdGhpcy5vbignc2Vla2luZycsIHRoaXMuaGFuZGxlU2Vlay5iaW5kKHRoaXMpKVxuXG4gICAgdGhpcy5vbmNlKCdkZXN0cm95JywgdGhpcy5fZGVzdHJveS5iaW5kKHRoaXMpKVxuICB9XG5cbiAgaGFuZGxlVGltZVVwZGF0ZSAoKSB7XG4gICAgdGhpcy5sb2FkRGF0YSgpXG4gICAgaXNFbmRlZCh0aGlzLCB0aGlzLmZsdilcbiAgfVxuXG4gIGhhbmRsZVNlZWsgKCkge1xuICAgIGNvbnN0IHRpbWUgPSB0aGlzLmN1cnJlbnRUaW1lXG4gICAgY29uc3QgcmFuZ2UgPSB0aGlzLmdldEJ1ZmZlcmVkUmFuZ2UoKVxuICAgIGlmICh0aW1lID4gcmFuZ2VbMV0gfHwgdGltZSA8IHJhbmdlWzBdKSB7XG4gICAgICB0aGlzLmZsdi5zZWVrKHRoaXMuY3VycmVudFRpbWUpXG4gICAgfVxuICB9XG5cbiAgX2Rlc3Ryb3kgKCkge1xuICAgIHRoaXMuY29udGV4dC5kZXN0cm95KClcbiAgICB0aGlzLmNvbnRleHQgPSBudWxsXG4gICAgdGhpcy5mbHYgPSBudWxsXG4gIH1cblxuICBsb2FkRGF0YSAodGltZSA9IHRoaXMuY3VycmVudFRpbWUpIHtcbiAgICBjb25zdCByYW5nZSA9IHRoaXMuZ2V0QnVmZmVyZWRSYW5nZSgpXG4gICAgaWYgKHJhbmdlWzFdIC0gdGltZSA8ICh0aGlzLmNvbmZpZy5wcmVsb2FkVGltZSB8fCAxNSkgLSA1KSB7XG4gICAgICB0aGlzLmZsdi5sb2FkTmV4dChyYW5nZVsxXSArIDEpXG4gICAgfVxuICB9XG5cbiAgZ2V0IHNyYyAoKSB7XG4gICAgcmV0dXJuIHRoaXMuY3VycmVudFNyY1xuICB9XG5cbiAgc2V0IHNyYyAodXJsKSB7XG4gICAgdGhpcy5wbGF5ZXIuY29uZmlnLnVybCA9IHVybFxuICAgIGlmICghdGhpcy5wYXVzZWQpIHtcbiAgICAgIHRoaXMucGF1c2UoKVxuICAgICAgdGhpcy5vbmNlKCdwYXVzZScsICgpID0+IHtcbiAgICAgICAgdGhpcy5zdGFydCh1cmwpXG4gICAgICB9KVxuICAgICAgdGhpcy5vbmNlKCdjYW5wbGF5JywgKCkgPT4ge1xuICAgICAgICB0aGlzLnBsYXkoKVxuICAgICAgfSlcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5zdGFydCh1cmwpXG4gICAgfVxuICAgIHRoaXMub25jZSgnY2FucGxheScsICgpID0+IHtcbiAgICAgIHRoaXMuY3VycmVudFRpbWUgPSAwXG4gICAgfSlcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IEZsdlBsYXllclxuIiwibW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFX3hncGxheWVyX187IiwiaW1wb3J0IEZsdkxpdmVQbGF5ZXIgZnJvbSAneGdwbGF5ZXItZmx2LWxpdmUnXG5pbXBvcnQgRmx2Vm9kUGxheWVyIGZyb20gJ3hncGxheWVyLWZsdi12b2QnXG5cbmNsYXNzIEZsdlBsYXllcntcbiAgY29uc3RydWN0b3IgKGNvbmZpZykge1xuICAgIGlmIChjb25maWcuaXNMaXZlKSB7XG4gICAgICByZXR1cm4gbmV3IEZsdkxpdmVQbGF5ZXIoY29uZmlnKVxuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gbmV3IEZsdlZvZFBsYXllcihjb25maWcpXG4gICAgfVxuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gRmx2UGxheWVyXG4iLCIoZnVuY3Rpb24oKSB7IG1vZHVsZS5leHBvcnRzID0gd2luZG93W1wiUGxheWVyXCJdOyB9KCkpOyJdLCJzb3VyY2VSb290IjoiIn0=