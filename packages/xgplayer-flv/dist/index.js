!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("xgplayer")):"function"==typeof define&&define.amd?define(["xgplayer"],t):"object"==typeof exports?exports["xgplayer-flv"]=t(require("xgplayer")):e["xgplayer-flv"]=t(e.xgplayer)}(window,(function(__WEBPACK_EXTERNAL_MODULE_xgplayer__){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var s=t[r]={i:r,l:!1,exports:{}};return e[r].call(s.exports,s,s.exports,n),s.l=!0,s.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)n.d(r,s,function(t){return e[t]}.bind(null,s));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}({"../xgplayer-flv-live/dist/index.js":
/*!****************************!*\
  !*** .-live/dist/index.js ***!
  \****************************/
/*! no static exports found */function(module,exports,__webpack_require__){"use strict";var n;window,n=function(__WEBPACK_EXTERNAL_MODULE_xgplayer__){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var s=t[r]={i:r,l:!1,exports:{}};return e[r].call(s.exports,s,s.exports,n),s.l=!0,s.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)n.d(r,s,function(t){return e[t]}.bind(null,s));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}({"../../node_modules/events/events.js":
/*!*****************************************************************************************!*\
      !*** /Users/leonardo/Documents/front-end/player/xgplayer/node_modules/events/events.js ***!
      \*****************************************************************************************/
/*! no static exports found */function(module,exports,__webpack_require__){eval("// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n\n\nvar R = typeof Reflect === 'object' ? Reflect : null;\nvar ReflectApply = R && typeof R.apply === 'function' ? R.apply : function ReflectApply(target, receiver, args) {\n  return Function.prototype.apply.call(target, receiver, args);\n};\n\nvar ReflectOwnKeys;\nif (R && typeof R.ownKeys === 'function') {\n  ReflectOwnKeys = R.ownKeys;\n} else if (Object.getOwnPropertySymbols) {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target).concat(Object.getOwnPropertySymbols(target));\n  };\n} else {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target);\n  };\n}\n\nfunction ProcessEmitWarning(warning) {\n  if (console && console.warn) console.warn(warning);\n}\n\nvar NumberIsNaN = Number.isNaN || function NumberIsNaN(value) {\n  return value !== value;\n};\n\nfunction EventEmitter() {\n  EventEmitter.init.call(this);\n}\nmodule.exports = EventEmitter;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._eventsCount = 0;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nvar defaultMaxListeners = 10;\n\nObject.defineProperty(EventEmitter, 'defaultMaxListeners', {\n  enumerable: true,\n  get: function () {\n    return defaultMaxListeners;\n  },\n  set: function (arg) {\n    if (typeof arg !== 'number' || arg < 0 || NumberIsNaN(arg)) {\n      throw new RangeError('The value of \"defaultMaxListeners\" is out of range. It must be a non-negative number. Received ' + arg + '.');\n    }\n    defaultMaxListeners = arg;\n  }\n});\n\nEventEmitter.init = function () {\n\n  if (this._events === undefined || this._events === Object.getPrototypeOf(this)._events) {\n    this._events = Object.create(null);\n    this._eventsCount = 0;\n  }\n\n  this._maxListeners = this._maxListeners || undefined;\n};\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function setMaxListeners(n) {\n  if (typeof n !== 'number' || n < 0 || NumberIsNaN(n)) {\n    throw new RangeError('The value of \"n\" is out of range. It must be a non-negative number. Received ' + n + '.');\n  }\n  this._maxListeners = n;\n  return this;\n};\n\nfunction $getMaxListeners(that) {\n  if (that._maxListeners === undefined) return EventEmitter.defaultMaxListeners;\n  return that._maxListeners;\n}\n\nEventEmitter.prototype.getMaxListeners = function getMaxListeners() {\n  return $getMaxListeners(this);\n};\n\nEventEmitter.prototype.emit = function emit(type) {\n  var args = [];\n  for (var i = 1; i < arguments.length; i++) args.push(arguments[i]);\n  var doError = type === 'error';\n\n  var events = this._events;\n  if (events !== undefined) doError = doError && events.error === undefined;else if (!doError) return false;\n\n  // If there is no 'error' event listener then throw.\n  if (doError) {\n    var er;\n    if (args.length > 0) er = args[0];\n    if (er instanceof Error) {\n      // Note: The comments on the `throw` lines are intentional, they show\n      // up in Node's output if this results in an unhandled exception.\n      throw er; // Unhandled 'error' event\n    }\n    // At least give some kind of context to the user\n    var err = new Error('Unhandled error.' + (er ? ' (' + er.message + ')' : ''));\n    err.context = er;\n    throw err; // Unhandled 'error' event\n  }\n\n  var handler = events[type];\n\n  if (handler === undefined) return false;\n\n  if (typeof handler === 'function') {\n    ReflectApply(handler, this, args);\n  } else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i) ReflectApply(listeners[i], this, args);\n  }\n\n  return true;\n};\n\nfunction _addListener(target, type, listener, prepend) {\n  var m;\n  var events;\n  var existing;\n\n  if (typeof listener !== 'function') {\n    throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n  }\n\n  events = target._events;\n  if (events === undefined) {\n    events = target._events = Object.create(null);\n    target._eventsCount = 0;\n  } else {\n    // To avoid recursion in the case that type === \"newListener\"! Before\n    // adding it to the listeners, first emit \"newListener\".\n    if (events.newListener !== undefined) {\n      target.emit('newListener', type, listener.listener ? listener.listener : listener);\n\n      // Re-assign `events` because a newListener handler could have caused the\n      // this._events to be assigned to a new object\n      events = target._events;\n    }\n    existing = events[type];\n  }\n\n  if (existing === undefined) {\n    // Optimize the case of one listener. Don't need the extra array object.\n    existing = events[type] = listener;\n    ++target._eventsCount;\n  } else {\n    if (typeof existing === 'function') {\n      // Adding the second element, need to change to array.\n      existing = events[type] = prepend ? [listener, existing] : [existing, listener];\n      // If we've already got an array, just append.\n    } else if (prepend) {\n      existing.unshift(listener);\n    } else {\n      existing.push(listener);\n    }\n\n    // Check for listener leak\n    m = $getMaxListeners(target);\n    if (m > 0 && existing.length > m && !existing.warned) {\n      existing.warned = true;\n      // No error code for this since it is a Warning\n      // eslint-disable-next-line no-restricted-syntax\n      var w = new Error('Possible EventEmitter memory leak detected. ' + existing.length + ' ' + String(type) + ' listeners ' + 'added. Use emitter.setMaxListeners() to ' + 'increase limit');\n      w.name = 'MaxListenersExceededWarning';\n      w.emitter = target;\n      w.type = type;\n      w.count = existing.length;\n      ProcessEmitWarning(w);\n    }\n  }\n\n  return target;\n}\n\nEventEmitter.prototype.addListener = function addListener(type, listener) {\n  return _addListener(this, type, listener, false);\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.prependListener = function prependListener(type, listener) {\n  return _addListener(this, type, listener, true);\n};\n\nfunction onceWrapper() {\n  var args = [];\n  for (var i = 0; i < arguments.length; i++) args.push(arguments[i]);\n  if (!this.fired) {\n    this.target.removeListener(this.type, this.wrapFn);\n    this.fired = true;\n    ReflectApply(this.listener, this.target, args);\n  }\n}\n\nfunction _onceWrap(target, type, listener) {\n  var state = { fired: false, wrapFn: undefined, target: target, type: type, listener: listener };\n  var wrapped = onceWrapper.bind(state);\n  wrapped.listener = listener;\n  state.wrapFn = wrapped;\n  return wrapped;\n}\n\nEventEmitter.prototype.once = function once(type, listener) {\n  if (typeof listener !== 'function') {\n    throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n  }\n  this.on(type, _onceWrap(this, type, listener));\n  return this;\n};\n\nEventEmitter.prototype.prependOnceListener = function prependOnceListener(type, listener) {\n  if (typeof listener !== 'function') {\n    throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n  }\n  this.prependListener(type, _onceWrap(this, type, listener));\n  return this;\n};\n\n// Emits a 'removeListener' event if and only if the listener was removed.\nEventEmitter.prototype.removeListener = function removeListener(type, listener) {\n  var list, events, position, i, originalListener;\n\n  if (typeof listener !== 'function') {\n    throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n  }\n\n  events = this._events;\n  if (events === undefined) return this;\n\n  list = events[type];\n  if (list === undefined) return this;\n\n  if (list === listener || list.listener === listener) {\n    if (--this._eventsCount === 0) this._events = Object.create(null);else {\n      delete events[type];\n      if (events.removeListener) this.emit('removeListener', type, list.listener || listener);\n    }\n  } else if (typeof list !== 'function') {\n    position = -1;\n\n    for (i = list.length - 1; i >= 0; i--) {\n      if (list[i] === listener || list[i].listener === listener) {\n        originalListener = list[i].listener;\n        position = i;\n        break;\n      }\n    }\n\n    if (position < 0) return this;\n\n    if (position === 0) list.shift();else {\n      spliceOne(list, position);\n    }\n\n    if (list.length === 1) events[type] = list[0];\n\n    if (events.removeListener !== undefined) this.emit('removeListener', type, originalListener || listener);\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\n\nEventEmitter.prototype.removeAllListeners = function removeAllListeners(type) {\n  var listeners, events, i;\n\n  events = this._events;\n  if (events === undefined) return this;\n\n  // not listening for removeListener, no need to emit\n  if (events.removeListener === undefined) {\n    if (arguments.length === 0) {\n      this._events = Object.create(null);\n      this._eventsCount = 0;\n    } else if (events[type] !== undefined) {\n      if (--this._eventsCount === 0) this._events = Object.create(null);else delete events[type];\n    }\n    return this;\n  }\n\n  // emit removeListener for all listeners on all events\n  if (arguments.length === 0) {\n    var keys = Object.keys(events);\n    var key;\n    for (i = 0; i < keys.length; ++i) {\n      key = keys[i];\n      if (key === 'removeListener') continue;\n      this.removeAllListeners(key);\n    }\n    this.removeAllListeners('removeListener');\n    this._events = Object.create(null);\n    this._eventsCount = 0;\n    return this;\n  }\n\n  listeners = events[type];\n\n  if (typeof listeners === 'function') {\n    this.removeListener(type, listeners);\n  } else if (listeners !== undefined) {\n    // LIFO order\n    for (i = listeners.length - 1; i >= 0; i--) {\n      this.removeListener(type, listeners[i]);\n    }\n  }\n\n  return this;\n};\n\nfunction _listeners(target, type, unwrap) {\n  var events = target._events;\n\n  if (events === undefined) return [];\n\n  var evlistener = events[type];\n  if (evlistener === undefined) return [];\n\n  if (typeof evlistener === 'function') return unwrap ? [evlistener.listener || evlistener] : [evlistener];\n\n  return unwrap ? unwrapListeners(evlistener) : arrayClone(evlistener, evlistener.length);\n}\n\nEventEmitter.prototype.listeners = function listeners(type) {\n  return _listeners(this, type, true);\n};\n\nEventEmitter.prototype.rawListeners = function rawListeners(type) {\n  return _listeners(this, type, false);\n};\n\nEventEmitter.listenerCount = function (emitter, type) {\n  if (typeof emitter.listenerCount === 'function') {\n    return emitter.listenerCount(type);\n  } else {\n    return listenerCount.call(emitter, type);\n  }\n};\n\nEventEmitter.prototype.listenerCount = listenerCount;\nfunction listenerCount(type) {\n  var events = this._events;\n\n  if (events !== undefined) {\n    var evlistener = events[type];\n\n    if (typeof evlistener === 'function') {\n      return 1;\n    } else if (evlistener !== undefined) {\n      return evlistener.length;\n    }\n  }\n\n  return 0;\n}\n\nEventEmitter.prototype.eventNames = function eventNames() {\n  return this._eventsCount > 0 ? ReflectOwnKeys(this._events) : [];\n};\n\nfunction arrayClone(arr, n) {\n  var copy = new Array(n);\n  for (var i = 0; i < n; ++i) copy[i] = arr[i];\n  return copy;\n}\n\nfunction spliceOne(list, index) {\n  for (; index + 1 < list.length; index++) list[index] = list[index + 1];\n  list.pop();\n}\n\nfunction unwrapListeners(arr) {\n  var ret = new Array(arr.length);\n  for (var i = 0; i < ret.length; ++i) {\n    ret[i] = arr[i].listener || arr[i];\n  }\n  return ret;\n}\n\n//# sourceURL=webpack://xgplayer-flv//Users/leonardo/Documents/front-end/player/xgplayer/node_modules/events/events.js?")},"../xgplayer-buffer/index.js":
/*!***********************************!*\
      !*** ../xgplayer-buffer/index.js ***!
      \***********************************/
/*! no static exports found */function(module,exports,__webpack_require__){eval('\n\nmodule.exports = {\n  Track: __webpack_require__(/*! ./src/track */ "../xgplayer-buffer/src/track.js").default,\n  Tracks: __webpack_require__(/*! ./src/track */ "../xgplayer-buffer/src/track.js").Tracks,\n  AudioTrack: __webpack_require__(/*! ./src/track */ "../xgplayer-buffer/src/track.js").AudioTrack,\n  VideoTrack: __webpack_require__(/*! ./src/track */ "../xgplayer-buffer/src/track.js").VideoTrack,\n\n  XgBuffer: __webpack_require__(/*! ./src/buffer */ "../xgplayer-buffer/src/buffer.js").XgBuffer,\n  RemuxBuffer: __webpack_require__(/*! ./src/buffer */ "../xgplayer-buffer/src/buffer.js").RemuxBuffer,\n\n  PreSource: __webpack_require__(/*! ./src/presouce */ "../xgplayer-buffer/src/presouce.js").default\n};\n\n//# sourceURL=webpack://xgplayer-flv/../xgplayer-buffer/index.js?')},"../xgplayer-buffer/src/buffer.js":
/*!****************************************!*\
      !*** ../xgplayer-buffer/src/buffer.js ***!
      \****************************************/
/*! no static exports found */function(module,exports,__webpack_require__){eval('\n\nObject.defineProperty(exports, "__esModule", {\n  value: true\n});\nclass XgBuffer {\n  /**\n   * A buffer to store loaded data.\n   *\n   * @class LoaderBuffer\n   * @param {number} length - Optional the buffer size\n   */\n  constructor(length) {\n    this.length = length || 0;\n    this.historyLen = length || 0;\n    this.array = [];\n    this.offset = 0;\n  }\n\n  /**\n   * The function to push data.\n   *\n   * @param {number} data - The data to push into the buffer\n   */\n  push(data) {\n    this.array.push(data);\n    this.length += data.byteLength;\n    this.historyLen += data.byteLength;\n  }\n\n  /**\n   * The function to shift data.\n   *\n   * @param {number} length - The size of shift.\n   */\n  shift(length) {\n    if (this.array.length < 1) {\n      return new Uint8Array(0);\n    }\n\n    if (length === undefined) {\n      return this._shiftBuffer();\n    }\n    if (this.offset + length === this.array[0].length) {\n      let ret = this.array[0].slice(this.offset, this.offset + length);\n      this.offset = 0;\n      this.array.shift();\n      this.length -= length;\n      return ret;\n    }\n\n    if (this.offset + length < this.array[0].length) {\n      let ret = this.array[0].slice(this.offset, this.offset + length);\n      this.offset += length;\n      this.length -= length;\n      return ret;\n    }\n\n    let ret = new Uint8Array(length);\n    let tmpoff = 0;\n    while (this.array.length > 0 && length > 0) {\n      if (this.offset + length < this.array[0].length) {\n        let tmp = this.array[0].slice(this.offset, this.offset + length);\n        ret.set(tmp, tmpoff);\n        this.offset += length;\n        this.length -= length;\n        length = 0;\n        break;\n      } else {\n        let templength = this.array[0].length - this.offset;\n        ret.set(this.array[0].slice(this.offset, this.array[0].length), tmpoff);\n        this.array.shift();\n        this.offset = 0;\n        tmpoff += templength;\n        this.length -= templength;\n        length -= templength;\n      }\n    }\n    return ret;\n  }\n\n  /**\n   * Function to clear the buffer.\n   */\n  clear() {\n    this.array = [];\n    this.length = 0;\n    this.offset = 0;\n  }\n\n  destroy() {\n    this.clear();\n    this.historyLen = 0;\n  }\n\n  /**\n   * Function to shift one unit8Array.\n   */\n  _shiftBuffer() {\n    this.length -= this.array[0].length;\n    this.offset = 0;\n    return this.array.shift();\n  }\n\n  /**\n   * Convert uint8 data to number.\n   *\n   * @param {number} start - the start postion.\n   * @param {number} length - the length of data.\n   */\n  toInt(start, length) {\n    let retInt = 0;\n    let i = this.offset + start;\n    while (i < this.offset + length + start) {\n      if (i < this.array[0].length) {\n        retInt = retInt * 256 + this.array[0][i];\n      } else if (this.array[1]) {\n        retInt = retInt * 256 + this.array[1][i - this.array[0].length];\n      }\n\n      i++;\n    }\n    return retInt;\n  }\n}\n\nexports.XgBuffer = XgBuffer;\nclass RemuxBuffer {\n  constructor() {\n    this.video = [];\n    this.audio = [];\n  }\n\n  destroy() {\n    this.video = [];\n    this.audio = [];\n  }\n}\nexports.RemuxBuffer = RemuxBuffer;\n\n//# sourceURL=webpack://xgplayer-flv/../xgplayer-buffer/src/buffer.js?')},"../xgplayer-buffer/src/presouce.js":
/*!******************************************!*\
      !*** ../xgplayer-buffer/src/presouce.js ***!
      \******************************************/
/*! no static exports found */function(module,exports,__webpack_require__){eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nclass Source {\n  constructor() {\n    this.mimetype = '';\n    this.init = null;\n    this.data = [];\n  }\n}\n\nclass PreSource {\n  constructor() {\n    this.sources = {};\n  }\n\n  getSource(source) {\n    return this.sources[source];\n  }\n\n  createSource(name) {\n    this.sources[name] = new Source();\n    return this.sources[name];\n  }\n\n  clear() {\n    this.sources = {};\n  }\n\n  destroy() {\n    this.sources = {};\n  }\n}\n\nexports.default = PreSource;\n\n//# sourceURL=webpack://xgplayer-flv/../xgplayer-buffer/src/presouce.js?")},"../xgplayer-buffer/src/track.js":
/*!***************************************!*\
      !*** ../xgplayer-buffer/src/track.js ***!
      \***************************************/
/*! no static exports found */function(module,exports,__webpack_require__){eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nclass Track {\n  /**\n   * The constructor.\n   */\n  constructor() {\n    this.id = -1;\n    this.sequenceNumber = 0;\n    this.samples = [];\n    this.droppedSamples = [];\n    this.length = 0;\n  }\n\n  /**\n   * Reset the track.\n   */\n  reset() {\n    this.sequenceNumber = 0;\n    this.samples = [];\n    this.length = 0;\n  }\n  /**\n   * destroy the track.\n   */\n  distroy() {\n    this.reset();\n    this.id = -1;\n  }\n}\n\nexports.default = Track;\nclass AudioTrack extends Track {\n  /**\n   * The constructor for audio track.\n   */\n  constructor() {\n    super();\n    this.TAG = 'AudioTrack';\n    this.type = 'audio';\n  }\n}\n\nexports.AudioTrack = AudioTrack;\nclass VideoTrack extends Track {\n  /**\n   * The constructor for video track.\n   */\n  constructor() {\n    super();\n    this.TAG = 'VideoTrack';\n    this.type = 'video';\n    this.dropped = 0;\n  }\n  /**\n   * reset the video track.\n   */\n  reset() {\n    this.sequenceNumber = 0;\n    this.samples = [];\n    this.length = 0;\n    this.dropped = 0;\n  }\n}\n\nexports.VideoTrack = VideoTrack;\nclass Tracks {\n  constructor() {\n    this.audioTrack = null;\n    this.videoTrack = null;\n  }\n}\nexports.Tracks = Tracks;\n\n//# sourceURL=webpack://xgplayer-flv/../xgplayer-buffer/src/track.js?")},"../xgplayer-codec/index.js":
/*!**********************************!*\
      !*** ../xgplayer-codec/index.js ***!
      \**********************************/
/*! no static exports found */function(module,exports,__webpack_require__){eval('\n\nmodule.exports = {\n  Nalunit: __webpack_require__(/*! ./src/h264/nalunit */ "../xgplayer-codec/src/h264/nalunit/index.js").default,\n  SpsParser: __webpack_require__(/*! ./src/h264/nalunit/sps */ "../xgplayer-codec/src/h264/nalunit/sps.js").default,\n\n  Compatibility: __webpack_require__(/*! ./src/compatibility */ "../xgplayer-codec/src/compatibility.js").default\n};\n\n//# sourceURL=webpack://xgplayer-flv/../xgplayer-codec/index.js?')},"../xgplayer-codec/src/aac/aac-helper.js":
/*!***********************************************!*\
      !*** ../xgplayer-codec/src/aac/aac-helper.js ***!
      \***********************************************/
/*! no static exports found */function(module,exports,__webpack_require__){eval('\n\nObject.defineProperty(exports, "__esModule", {\n  value: true\n});\n\nclass AAC {\n\n  static getSilentFrame(codec, channelCount) {\n    if (codec === \'mp4a.40.2\') {\n      // handle LC-AAC\n      if (channelCount === 1) {\n        return new Uint8Array([0x00, 0xc8, 0x00, 0x80, 0x23, 0x80]);\n      } else if (channelCount === 2) {\n        return new Uint8Array([0x21, 0x00, 0x49, 0x90, 0x02, 0x19, 0x00, 0x23, 0x80]);\n      } else if (channelCount === 3) {\n        return new Uint8Array([0x00, 0xc8, 0x00, 0x80, 0x20, 0x84, 0x01, 0x26, 0x40, 0x08, 0x64, 0x00, 0x8e]);\n      } else if (channelCount === 4) {\n        return new Uint8Array([0x00, 0xc8, 0x00, 0x80, 0x20, 0x84, 0x01, 0x26, 0x40, 0x08, 0x64, 0x00, 0x80, 0x2c, 0x80, 0x08, 0x02, 0x38]);\n      } else if (channelCount === 5) {\n        return new Uint8Array([0x00, 0xc8, 0x00, 0x80, 0x20, 0x84, 0x01, 0x26, 0x40, 0x08, 0x64, 0x00, 0x82, 0x30, 0x04, 0x99, 0x00, 0x21, 0x90, 0x02, 0x38]);\n      } else if (channelCount === 6) {\n        return new Uint8Array([0x00, 0xc8, 0x00, 0x80, 0x20, 0x84, 0x01, 0x26, 0x40, 0x08, 0x64, 0x00, 0x82, 0x30, 0x04, 0x99, 0x00, 0x21, 0x90, 0x02, 0x00, 0xb2, 0x00, 0x20, 0x08, 0xe0]);\n      }\n    } else {\n      // handle HE-AAC (mp4a.40.5 / mp4a.40.29)\n      if (channelCount === 1) {\n        // ffmpeg -y -f lavfi -i "aevalsrc=0:d=0.05" -c:a libfdk_aac -profile:a aac_he -b:a 4k output.aac && hexdump -v -e \'16/1 "0x%x," "\\n"\' -v output.aac\n        return new Uint8Array([0x1, 0x40, 0x22, 0x80, 0xa3, 0x4e, 0xe6, 0x80, 0xba, 0x8, 0x0, 0x0, 0x0, 0x1c, 0x6, 0xf1, 0xc1, 0xa, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5e]);\n      } else if (channelCount === 2) {\n        // ffmpeg -y -f lavfi -i "aevalsrc=0|0:d=0.05" -c:a libfdk_aac -profile:a aac_he_v2 -b:a 4k output.aac && hexdump -v -e \'16/1 "0x%x," "\\n"\' -v output.aac\n        return new Uint8Array([0x1, 0x40, 0x22, 0x80, 0xa3, 0x5e, 0xe6, 0x80, 0xba, 0x8, 0x0, 0x0, 0x0, 0x0, 0x95, 0x0, 0x6, 0xf1, 0xa1, 0xa, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5e]);\n      } else if (channelCount === 3) {\n        // ffmpeg -y -f lavfi -i "aevalsrc=0|0|0:d=0.05" -c:a libfdk_aac -profile:a aac_he_v2 -b:a 4k output.aac && hexdump -v -e \'16/1 "0x%x," "\\n"\' -v output.aac\n        return new Uint8Array([0x1, 0x40, 0x22, 0x80, 0xa3, 0x5e, 0xe6, 0x80, 0xba, 0x8, 0x0, 0x0, 0x0, 0x0, 0x95, 0x0, 0x6, 0xf1, 0xa1, 0xa, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5a, 0x5e]);\n      }\n    }\n    return null;\n  }\n\n}\n\nexports.default = AAC;\n\n//# sourceURL=webpack://xgplayer-flv/../xgplayer-codec/src/aac/aac-helper.js?')},"../xgplayer-codec/src/compatibility.js":
/*!**********************************************!*\
      !*** ../xgplayer-codec/src/compatibility.js ***!
      \**********************************************/
/*! no static exports found */function(module,exports,__webpack_require__){eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _xgplayerUtils = __webpack_require__(/*! xgplayer-utils */ \"../xgplayer-utils/index.js\");\n\nvar _aacHelper = __webpack_require__(/*! ./aac/aac-helper */ \"../xgplayer-codec/src/aac/aac-helper.js\");\n\nvar _aacHelper2 = _interopRequireDefault(_aacHelper);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst { REMUX_EVENTS } = _xgplayerUtils.EVENTS;\n\nclass Compatibility {\n  constructor() {\n    this.nextAudioDts = 0; // 模拟下一段音频数据的dts\n    this.nextVideoDts = 0; // 模拟下一段视频数据的dts\n\n    this.lastAudioSamplesLen = 0; // 上一段音频数据的长度\n    this.lastVideoSamplesLen = 0; // 上一段视频数据的长度\n\n    this.lastVideoDts = undefined; // 上一段音频数据的长度\n    this.lastAudioDts = undefined; // 上一段视频数据的长度\n\n    this.allAudioSamplesCount = 0; // 音频总数据量(原始帧)\n    this.allVideoSamplesCount = 0; // 视频总数据量(原始帧)\n\n    this._firstAudioSample = null;\n    this._firstVideoSample = null;\n\n    this.filledAudioSamples = []; // 补充音频帧（）\n    this.filledVideoSamples = []; // 补充视频帧（）\n  }\n\n  init() {\n    this.before(REMUX_EVENTS.REMUX_MEDIA, this.doFix.bind(this));\n  }\n\n  reset() {\n    this.nextAudioDts = 0; // 模拟下一段音频数据的dts\n    this.nextVideoDts = 0; // 模拟下一段视频数据的dts\n\n    this.lastAudioSamplesLen = 0; // 上一段音频数据的长度\n    this.lastVideoSamplesLen = 0; // 上一段视频数据的长度\n\n    this.lastVideoDts = undefined; // 上一段音频数据的长度\n    this.lastAudioDts = undefined; // 上一段视频数据的长度\n\n    this.allAudioSamplesCount = 0; // 音频总数据量(原始帧)\n    this.allVideoSamplesCount = 0; // 视频总数据量(原始帧)\n\n    this._firstAudioSample = null;\n    this._firstVideoSample = null;\n\n    this.filledAudioSamples = []; // 补充音频帧（）\n    this.filledVideoSamples = []; // 补充视频帧（）\n  }\n\n  doFix() {\n    const { isFirstAudioSamples, isFirstVideoSamples } = this.getFirstSample();\n\n    this.removeInvalidSamples();\n\n    this.recordSamplesCount();\n\n    if (this._firstVideoSample) {\n      this.fixRefSampleDuration(this.videoTrack.meta, this.videoTrack.samples);\n    }\n    if (this._firstAudioSample) {\n      this.fixRefSampleDuration(this.audioTrack.meta, this.audioTrack.samples);\n    }\n\n    this.doFixVideo(isFirstVideoSamples);\n    this.doFixAudio(isFirstAudioSamples);\n  }\n\n  doFixVideo(first) {\n    let { samples: videoSamples, meta } = this.videoTrack;\n\n    if (meta.frameRate && meta.frameRate.fixed === false) {\n      return;\n    }\n\n    if (!videoSamples || !videoSamples.length || !this._firstVideoSample) {\n      return;\n    }\n\n    // console.log(`video lastSample, ${videoSamples[videoSamples.length - 1].dts}`)\n\n    const firstSample = videoSamples[0];\n    const firstDts = firstSample.dts;\n\n    const samplesLen = videoSamples.length;\n\n    // step1. 修复与audio首帧差距太大的问题\n    if (first && this._firstAudioSample) {\n      const videoFirstDts = this._firstVideoSample.dts;\n      const audioFirstDts = this._firstAudioSample.dts;\n      const gap = videoFirstDts - audioFirstDts;\n      if (gap > 2 * meta.refSampleDuration) {\n        const fillCount = Math.floor(gap / meta.refSampleDuration);\n\n        for (let i = 0; i < fillCount; i++) {\n          const clonedFirstSample = Object.assign({}, firstSample); // 视频头部帧缺失需要复制第一帧\n          // 重新计算sample的dts和pts\n          clonedFirstSample.dts = videoFirstDts - (i + 1) * meta.refSampleDuration;\n          clonedFirstSample.pts = clonedFirstSample.dts + clonedFirstSample.cts;\n\n          videoSamples.unshift(clonedFirstSample);\n\n          this.filledVideoSamples.push({\n            dts: clonedFirstSample.dts,\n            size: clonedFirstSample.data.byteLength\n          });\n        }\n      }\n    }\n\n    let gap;\n    // step2. 修复samples段之间的间距问题、\n    if (this.nextVideoDts) {\n      // step1. 处理samples段之间的丢帧情况\n      // 当发现duration差距大于2帧时进行补帧\n      gap = firstDts - this.nextVideoDts;\n      const absGap = Math.abs(gap);\n      if (gap > 2 * meta.refSampleDuration) {\n        const fillFrameCount = Math.floor(gap / meta.refSampleDuration);\n\n        for (let i = 0; i < fillFrameCount; i++) {\n          const clonedSample = Object.assign({}, videoSamples[0]);\n          const computed = firstDts - (i + 1) * meta.refSampleDuration;\n\n          clonedSample.dts = computed > this.nextVideoDts ? computed : this.nextVideoDts; // 补的第一帧一定要是nextVideoDts\n          clonedSample.pts = clonedSample.dts + clonedSample.cts;\n\n          this.videoTrack.samples.unshift(clonedSample);\n\n          this.filledVideoSamples.push({\n            dts: clonedSample.dts,\n            size: clonedSample.data.byteLength\n          });\n        }\n      } else if (absGap <= 10 && absGap > 0) {\n        // 当差距在+-一帧之间时将第一帧的dts强行定位到期望位置\n        // console.log('重定位视频帧dts', videoSamples[0].dts, this.nextVideoDts)\n        videoSamples[0].dts = this.nextVideoDts;\n        videoSamples[0].originDts = videoSamples[0].dts;\n        videoSamples[0].cts = videoSamples[0].cts || videoSamples[0].pts - videoSamples[0].dts;\n        videoSamples[0].pts = videoSamples[0].dts + videoSamples[0].cts;\n      }\n    }\n    const lastDts = videoSamples[videoSamples.length - 1].dts;\n\n    const lastSampleDuration = videoSamples.length >= 2 ? lastDts - videoSamples[videoSamples.length - 2].dts : meta.refSampleDuration;\n\n    this.lastVideoSamplesLen = samplesLen;\n    this.nextVideoDts = lastDts + lastSampleDuration;\n    this.lastVideoDts = lastDts;\n\n    // step2. 修复sample段之内的间距问题\n    // step3. 修复samples段内部的dts异常问题\n    for (let i = 0, len = videoSamples.length; i < len; i++) {\n      const current = videoSamples[i];\n      const next = videoSamples[i + 1];\n\n      if (!next) {\n        break;\n      }\n\n      const duration = next.dts - current.dts;\n\n      if (duration > 2 * meta.refSampleDuration) {\n        // 两帧之间间隔太大，需要补空白帧\n        let fillFrameCount = Math.floor(duration / meta.refSampleDuration);\n\n        let fillFrameIdx = 0;\n        while (fillFrameIdx < fillFrameCount) {\n          const fillFrame = Object.assign({}, next);\n          fillFrame.dts = current.dts + (fillFrameIdx + 1) * meta.refSampleDuration;\n          fillFrame.pts = fillFrame.dts + fillFrame.cts;\n          if (fillFrame < next.dts) {\n            videoSamples.splice(i, 0, fillFrame);\n\n            this.filledVideoSamples.push({\n              dts: fillFrame.dts,\n              size: fillFrame.data.byteLength\n            });\n          }\n\n          fillFrameIdx++;\n          i++;\n        }\n      }\n    }\n\n    this.videoTrack.samples = videoSamples;\n  }\n\n  doFixAudio(first) {\n    let { samples: audioSamples, meta } = this.audioTrack;\n\n    if (!audioSamples || !audioSamples.length) {\n      return;\n    }\n    // console.log(`audio lastSample, ${audioSamples[audioSamples.length - 1].dts}`)\n\n    const samplesLen = audioSamples.length;\n    const silentFrame = _aacHelper2.default.getSilentFrame(meta.codec, meta.channelCount);\n\n    const firstSample = this._firstAudioSample;\n\n    // 对audioSamples按照dts做排序\n    audioSamples = Compatibility.sortAudioSamples(audioSamples);\n\n    // step0. 首帧与video首帧间距大的问题\n    if (this._firstVideoSample && first) {\n      const videoFirstPts = this._firstVideoSample.pts ? this._firstVideoSample.pts : this._firstVideoSample.dts + this._firstVideoSample.cts;\n\n      if (firstSample.dts - videoFirstPts > meta.refSampleDuration) {\n        const silentSampleCount = Math.floor((firstSample.dts - videoFirstPts) / meta.refSampleDuration);\n\n        for (let i = 0; i < silentSampleCount; i++) {\n          const silentSample = {\n            data: silentFrame,\n            datasize: silentFrame.byteLength,\n            dts: firstSample.dts - (i + 1) * meta.refSampleDuration,\n            filtered: 0\n          };\n\n          audioSamples.unshift(silentSample);\n\n          this.filledAudioSamples.push({\n            dts: silentSample.dts,\n            size: silentSample.data.byteLength\n          });\n        }\n      }\n    }\n\n    let gap;\n    const firstDts = audioSamples[0].dts;\n\n    if (this.nextAudioDts) {\n      // step1. 处理samples段之间的丢帧情况\n      // 当发现duration差距大于1帧时进行补帧\n      gap = firstDts - this.nextAudioDts;\n      const absGap = Math.abs(gap);\n\n      if (absGap > meta.refSampleDuration && samplesLen === 1 && this.lastAudioSamplesLen === 1) {\n        meta.refSampleDurationFixed = undefined;\n      }\n\n      if (gap > 2 * meta.refSampleDuration) {\n        if (samplesLen === 1 && this.lastAudioSamplesLen === 1) {\n          // 如果sample的length一直是1，而且一直不符合refSampleDuration，需要动态修改refSampleDuration\n          meta.refSampleDurationFixed = meta.refSampleDurationFixed !== undefined ? meta.refSampleDurationFixed + gap : meta.refSampleDuration + gap;\n        } else {\n          const silentFrameCount = Math.floor(gap / meta.refSampleDuration);\n\n          for (let i = 0; i < silentFrameCount; i++) {\n            const computed = firstDts - (i + 1) * meta.refSampleDuration;\n            const silentSample = Object.assign({}, audioSamples[0], {\n              dts: computed > this.nextAudioDts ? computed : this.nextAudioDts\n            });\n\n            this.filledAudioSamples.push({\n              dts: silentSample.dts,\n              size: silentSample.data.byteLength\n            });\n            this.audioTrack.samples.unshift(silentSample);\n          }\n        }\n      } else if (absGap <= 10 && absGap > 0) {\n        // 当差距比较小的时候将音频帧重定位\n        // console.log('重定位音频帧dts', audioSamples[0].dts, this.nextAudioDts)\n        audioSamples[0].dts = this.nextAudioDts;\n        audioSamples[0].pts = this.nextAudioDts;\n      }\n    }\n    const lastDts = audioSamples[audioSamples.length - 1].dts;\n    const lastSampleDuration = audioSamples.length >= 2 ? lastDts - audioSamples[audioSamples.length - 2].dts : meta.refSampleDuration;\n\n    this.lastAudioSamplesLen = samplesLen;\n    this.nextAudioDts = meta.refSampleDurationFixed ? lastDts + meta.refSampleDurationFixed : lastDts + lastSampleDuration;\n    this.lastAudioDts = lastDts;\n\n    // step3. 修复samples段内部的dts异常问题\n    for (let i = 0, len = audioSamples.length; i < len; i++) {\n      const current = audioSamples[i];\n      const next = audioSamples[i + 1];\n\n      if (!next) {\n        break;\n      }\n\n      const duration = next.dts - current.dts;\n      audioSamples[i].duration = duration;\n      /*\n      if (duration > (2 * meta.refSampleDuration)) {\n        // 两帧之间间隔太大，需要补空白帧\n        /**\n        let silentFrameCount = Math.floor(duration / meta.refSampleDuration)\n        let frameIdx = 0\n         while (frameIdx < silentFrameCount) {\n          const silentSample = {\n            data: silentFrame,\n            datasize: silentFrame.byteLength,\n            dts: current.dts + (frameIdx + 1) * meta.refSampleDuration,\n            filtered: 0,\n            isSilent: true\n          }\n           audioSamples.splice(i, 0, silentSample)\n           this.filledAudioSamples.push({\n            dts: silentSample.dts,\n            size: silentSample.data.byteLength\n          })\n           frameIdx++\n          i++ // 不对静音帧做比较\n        }\n      } */\n    }\n\n    this.audioTrack.samples = Compatibility.sortAudioSamples(audioSamples);\n  }\n\n  getFirstSample() {\n    // 获取video和audio的首帧数据\n    let { samples: videoSamples } = this.videoTrack;\n    let { samples: audioSamples } = this.audioTrack;\n\n    let isFirstVideoSamples = false;\n    let isFirstAudioSamples = false;\n\n    if (!this._firstVideoSample && videoSamples.length) {\n      this._firstVideoSample = Compatibility.findFirstVideoSample(videoSamples);\n      isFirstVideoSamples = true;\n    }\n\n    if (!this._firstAudioSample && audioSamples.length) {\n      this._firstAudioSample = Compatibility.findFirstAudioSample(audioSamples); // 寻找dts最小的帧作为首个音频帧\n      isFirstAudioSamples = true;\n    }\n\n    return {\n      isFirstVideoSamples,\n      isFirstAudioSamples\n    };\n  }\n\n  /**\n   * 在没有refSampleDuration的问题流中，\n   */\n  fixRefSampleDuration(meta, samples) {\n    const isVideo = meta.type === 'video';\n    const allSamplesCount = isVideo ? this.allVideoSamplesCount : this.allAudioSamplesCount;\n    const firstDts = isVideo ? this._firstVideoSample.dts : this._firstAudioSample.dts;\n    const filledSamplesCount = isVideo ? this.filledVideoSamples.length : this.filledAudioSamples.length;\n\n    if (!meta.refSampleDuration || meta.refSampleDuration <= 0 || Number.isNaN(meta.refSampleDuration)) {\n      if (samples.length >= 1) {\n        const lastDts = samples[samples.length - 1].dts;\n\n        meta.refSampleDuration = Math.floor((lastDts - firstDts) / (allSamplesCount + filledSamplesCount - 1)); // 将refSampleDuration重置为计算后的平均值\n      }\n    } else if (meta.refSampleDuration) {\n      if (samples.length >= 3) {\n        const lastDts = samples[samples.length - 1].dts;\n        const firstDts = samples[0].dts;\n        const durationAvg = (lastDts - firstDts) / samples.length;\n\n        meta.refSampleDuration = Math.abs(meta.refSampleDuration - durationAvg) <= meta.refSampleDuration ? meta.refSampleDuration : durationAvg; // 将refSampleDuration重置为计算后的平均值\n      }\n    }\n  }\n\n  /**\n   * 记录截止目前一共播放了多少帧\n   */\n  recordSamplesCount() {\n    const { audioTrack, videoTrack } = this;\n\n    this.allAudioSamplesCount += audioTrack.samples.length;\n    this.allVideoSamplesCount += videoTrack.samples.length;\n  }\n\n  /**\n   * 去除不合法的帧（倒退、重复帧）\n   */\n  removeInvalidSamples() {\n    const { _firstVideoSample, _firstAudioSample } = this;\n\n    this.audioTrack.samples = this.audioTrack.samples.filter(sample => {\n      return sample.dts >= _firstAudioSample.dts && (this.lastAudioDts === undefined || sample.dts > this.lastAudioDts);\n    });\n\n    this.videoTrack.samples = this.videoTrack.samples.filter(sample => {\n      return sample.dts >= _firstVideoSample.dts && (this.lastVideoDts === undefined || sample.dts > this.lastVideoDts);\n    });\n  }\n\n  static sortAudioSamples(samples) {\n    if (samples.length === 1) {\n      return samples;\n    }\n\n    return samples.sort((a, b) => {\n      return a.dts - b.dts;\n    });\n  }\n\n  /**\n   * 寻找dts最小的sample\n   * @param samples\n   */\n  static findFirstAudioSample(samples) {\n    if (!samples || samples.length === 0) {\n      return null;\n    }\n\n    return Compatibility.sortAudioSamples(samples)[0];\n  }\n\n  static findFirstVideoSample(samples) {\n    if (!samples.length) {\n      return null;\n    }\n\n    const sorted = samples.sort((a, b) => {\n      return a.dts - b.dts;\n    });\n\n    for (let i = 0, len = sorted.length; i < len; i++) {\n      if (sorted[i].isKeyframe) {\n        return sorted[i];\n      }\n    }\n  }\n\n  get tracks() {\n    return this._context.getInstance('TRACKS');\n  }\n\n  get audioTrack() {\n    if (this.tracks) {\n      return this.tracks.audioTrack;\n    }\n    return null;\n  }\n\n  get videoTrack() {\n    if (this.tracks) {\n      return this.tracks.videoTrack;\n    }\n    return null;\n  }\n}\nexports.default = Compatibility;\n\n//# sourceURL=webpack://xgplayer-flv/../xgplayer-codec/src/compatibility.js?")},"../xgplayer-codec/src/h264/nalunit/golomb.js":
/*!****************************************************!*\
      !*** ../xgplayer-codec/src/h264/nalunit/golomb.js ***!
      \****************************************************/
/*! no static exports found */function(module,exports,__webpack_require__){eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nclass Golomb {\n  constructor(uint8array) {\n    this.TAG = 'Golomb';\n    this._buffer = uint8array;\n    this._bufferIndex = 0;\n    this._totalBytes = uint8array.byteLength;\n    this._totalBits = uint8array.byteLength * 8;\n    this._currentWord = 0;\n    this._currentWordBitsLeft = 0;\n  }\n\n  destroy() {\n    this._buffer = null;\n  }\n\n  _fillCurrentWord() {\n    let bufferBytesLeft = this._totalBytes - this._bufferIndex;\n    if (bufferBytesLeft <= 0) {\n      // TODO 异常处理\n    }\n\n    let bytesRead = Math.min(4, bufferBytesLeft);\n    let word = new Uint8Array(4);\n    word.set(this._buffer.subarray(this._bufferIndex, this._bufferIndex + bytesRead));\n    this._currentWord = new DataView(word.buffer).getUint32(0, false);\n\n    this._bufferIndex += bytesRead;\n    this._currentWordBitsLeft = bytesRead * 8;\n  }\n\n  readBits(bits) {\n    if (bits > 32) {\n      // TODO\n    }\n\n    if (bits <= this._currentWordBitsLeft) {\n      let result = this._currentWord >>> 32 - bits;\n      this._currentWord <<= bits;\n      this._currentWordBitsLeft -= bits;\n      return result;\n    }\n\n    let result = this._currentWordBitsLeft ? this._currentWord : 0;\n    // eslint-disable-next-line\n    result >>> 32 - this._currentWordBitsLeft;\n    let bitsNeedLeft = bits - this._currentWordBitsLeft;\n\n    this._fillCurrentWord();\n    let bitsReadNext = Math.min(bitsNeedLeft, this._currentWordBitsLeft);\n\n    let result2 = this._currentWord >>> 32 - bitsReadNext;\n    this._currentWord <<= bitsReadNext;\n    this._currentWordBitsLeft -= bitsReadNext;\n\n    result = result << bitsReadNext | result2;\n    return result;\n  }\n\n  readBool() {\n    return this.readBits(1) === 1;\n  }\n\n  readByte() {\n    return this.readBits(8);\n  }\n\n  _skipLeadingZero() {\n    let zeroCount;\n    for (zeroCount = 0; zeroCount < this._currentWordBitsLeft; zeroCount++) {\n      if ((this._currentWord & 0x80000000 >>> zeroCount) !== 0) {\n        this._currentWord <<= zeroCount;\n        this._currentWordBitsLeft -= zeroCount;\n        return zeroCount;\n      }\n    }\n    this._fillCurrentWord();\n    return zeroCount + this._skipLeadingZero();\n  }\n\n  readUEG() {\n    // unsigned exponential golomb\n    let leadingZeros = this._skipLeadingZero();\n    return this.readBits(leadingZeros + 1) - 1;\n  }\n\n  readSEG() {\n    // signed exponential golomb\n    let value = this.readUEG();\n    if (value & 0x01) {\n      return value + 1 >>> 1;\n    } else {\n      return -1 * (value >>> 1);\n    }\n  }\n}\n\nexports.default = Golomb;\n\n//# sourceURL=webpack://xgplayer-flv/../xgplayer-codec/src/h264/nalunit/golomb.js?")},"../xgplayer-codec/src/h264/nalunit/index.js":
/*!***************************************************!*\
      !*** ../xgplayer-codec/src/h264/nalunit/index.js ***!
      \***************************************************/
/*! no static exports found */function(module,exports,__webpack_require__){eval('\n\nObject.defineProperty(exports, "__esModule", {\n  value: true\n});\n\nvar _sps = __webpack_require__(/*! ./sps */ "../xgplayer-codec/src/h264/nalunit/sps.js");\n\nvar _sps2 = _interopRequireDefault(_sps);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nclass Nalunit {\n  static getNalunits(buffer) {\n    if (buffer.length - buffer.position < 4) {\n      return [];\n    }\n\n    let buf = buffer.dataview;\n    let position = buffer.position;\n    if (buf.getInt32(position) === 1 || buf.getInt16(position) === 0 && buf.getInt8(position + 2) === 1) {\n      return Nalunit.getAnnexbNals(buffer);\n    } else {\n      return Nalunit.getAvccNals(buffer);\n    }\n  }\n\n  static getAnnexbNals(buffer) {\n    let nals = [];\n    let position = Nalunit.getHeaderPositionAnnexB(buffer);\n    let start = position.pos;\n    let end = start;\n    while (start < buffer.length - 4) {\n      let header = buffer.buffer.slice(start, start + position.headerLength);\n      if (position.pos === buffer.position) {\n        buffer.skip(position.headerLength);\n      }\n      position = Nalunit.getHeaderPositionAnnexB(buffer);\n      end = position.pos;\n      let body = new Uint8Array(buffer.buffer.slice(start + header.byteLength, end));\n      let unit = { header, body };\n      Nalunit.analyseNal(unit);\n      nals.push(unit);\n      buffer.skip(end - buffer.position);\n      start = end;\n    }\n    return nals;\n  }\n\n  static getAvccNals(buffer) {\n    let nals = [];\n    while (buffer.position < buffer.length - 4) {\n      let length = buffer.dataview.getInt32(buffer.position);\n      if (buffer.length - buffer.position >= length) {\n        let header = buffer.buffer.slice(buffer.position, buffer.position + 4);\n        buffer.skip(4);\n        let body = buffer.buffer.slice(buffer.position, buffer.position + length);\n        buffer.skip(length);\n        let unit = { header, body };\n        Nalunit.analyseNal(unit);\n        nals.push(unit);\n      } else {\n        break;\n      }\n    }\n    return nals;\n  }\n\n  static analyseNal(unit) {\n    let type = unit.body[0] & 0x1f;\n    switch (type) {\n      case 1:\n        // NDR\n        unit.ndr = true;\n        break;\n      case 5:\n        // IDR\n        unit.idr = true;\n        break;\n      case 6:\n        // SEI\n        break;\n      case 7:\n        // SPS\n        unit.sps = _sps2.default.parseSPS(unit.body);\n        break;\n      case 8:\n        // PPS\n        unit.pps = true;\n        break;\n      case 9:\n        // AUD\n        break;\n      default:\n        break;\n    }\n  }\n\n  static getHeaderPositionAnnexB(buffer) {\n    // seperate\n    let pos = buffer.position;\n    let headerLength = 0;\n    while (headerLength !== 3 && headerLength !== 4 && pos < buffer.length - 4) {\n      if (buffer.dataview.getInt16(pos) === 0) {\n        if (buffer.dataview.getInt16(pos + 2) === 1) {\n          // 0x000001\n          headerLength = 4;\n        } else if (buffer.dataview.getInt8(pos + 2) === 1) {\n          headerLength = 3;\n        } else {\n          pos++;\n        }\n      } else {\n        pos++;\n      }\n    }\n\n    if (pos === buffer.length - 4) {\n      if (buffer.dataview.getInt16(pos) === 0) {\n        if (buffer.dataview.getInt16(pos + 2) === 1) {\n          // 0x000001\n          headerLength = 4;\n        }\n      } else {\n        pos++;\n        if (buffer.dataview.getInt16(pos) === 0 && buffer.dataview.getInt8(pos) === 1) {\n          // 0x0000001\n          headerLength = 3;\n        } else {\n          pos = buffer.length;\n        }\n      }\n    }\n    return { pos, headerLength };\n  }\n\n  static getAvcc(sps, pps) {\n    let ret = new Uint8Array(sps.byteLength + pps.byteLength + 11);\n    ret[0] = 0x01;\n    ret[1] = sps[1];\n    ret[2] = sps[2];\n    ret[3] = sps[3];\n    ret[4] = 255;\n    ret[5] = 225;\n\n    let offset = 6;\n\n    ret.set(new Uint8Array([sps.byteLength >>> 8 & 0xff, sps.byteLength & 0xff]), offset);\n    offset += 2;\n    ret.set(sps, offset);\n    offset += sps.byteLength;\n\n    ret[offset] = 1;\n    offset++;\n\n    ret.set(new Uint8Array([pps.byteLength >>> 8 & 0xff, pps.byteLength & 0xff]), offset);\n    offset += 2;\n    ret.set(pps, offset);\n    return ret;\n  }\n}\n\nexports.default = Nalunit;\n\n//# sourceURL=webpack://xgplayer-flv/../xgplayer-codec/src/h264/nalunit/index.js?')},"../xgplayer-codec/src/h264/nalunit/sps.js":
/*!*************************************************!*\
      !*** ../xgplayer-codec/src/h264/nalunit/sps.js ***!
      \*************************************************/
/*! no static exports found */function(module,exports,__webpack_require__){eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _golomb = __webpack_require__(/*! ./golomb */ \"../xgplayer-codec/src/h264/nalunit/golomb.js\");\n\nvar _golomb2 = _interopRequireDefault(_golomb);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nclass SPSParser {\n  static _ebsp2rbsp(uint8array) {\n    let src = uint8array;\n    let srcLength = src.byteLength;\n    let dst = new Uint8Array(srcLength);\n    let dstIdx = 0;\n\n    for (let i = 0; i < srcLength; i++) {\n      if (i >= 2) {\n        if (src[i] === 0x03 && src[i - 1] === 0x00 && src[i - 2] === 0x00) {\n          continue;\n        }\n      }\n      dst[dstIdx] = src[i];\n      dstIdx++;\n    }\n\n    return new Uint8Array(dst.buffer, 0, dstIdx);\n  }\n\n  static parseSPS(uint8array) {\n    let rbsp = SPSParser._ebsp2rbsp(uint8array);\n    let gb = new _golomb2.default(rbsp);\n\n    gb.readByte();\n    let profileIdc = gb.readByte();\n    gb.readByte();\n    let levelIdc = gb.readByte();\n    gb.readUEG();\n\n    let profile_string = SPSParser.getProfileString(profileIdc);\n    let level_string = SPSParser.getLevelString(levelIdc);\n    let chroma_format_idc = 1;\n    let chroma_format = 420;\n    let chroma_format_table = [0, 420, 422, 444];\n    let bit_depth = 8;\n\n    if (profileIdc === 100 || profileIdc === 110 || profileIdc === 122 || profileIdc === 244 || profileIdc === 44 || profileIdc === 83 || profileIdc === 86 || profileIdc === 118 || profileIdc === 128 || profileIdc === 138 || profileIdc === 144) {\n      chroma_format_idc = gb.readUEG();\n      if (chroma_format_idc === 3) {\n        gb.readBits(1);\n      }\n      if (chroma_format_idc <= 3) {\n        chroma_format = chroma_format_table[chroma_format_idc];\n      }\n\n      bit_depth = gb.readUEG() + 8;\n      gb.readUEG();\n      gb.readBits(1);\n      if (gb.readBool()) {\n        let scaling_list_count = chroma_format_idc !== 3 ? 8 : 12;\n        for (let i = 0; i < scaling_list_count; i++) {\n          if (gb.readBool()) {\n            if (i < 6) {\n              SPSParser._skipScalingList(gb, 16);\n            } else {\n              SPSParser._skipScalingList(gb, 64);\n            }\n          }\n        }\n      }\n    }\n    gb.readUEG();\n    let pic_order_cnt_type = gb.readUEG();\n    if (pic_order_cnt_type === 0) {\n      gb.readUEG();\n    } else if (pic_order_cnt_type === 1) {\n      gb.readBits(1);\n      gb.readSEG();\n      gb.readSEG();\n      let num_ref_frames_in_pic_order_cnt_cycle = gb.readUEG();\n      for (let i = 0; i < num_ref_frames_in_pic_order_cnt_cycle; i++) {\n        gb.readSEG();\n      }\n    }\n    gb.readUEG();\n    gb.readBits(1);\n\n    let pic_width_in_mbs_minus1 = gb.readUEG();\n    let pic_height_in_map_units_minus1 = gb.readUEG();\n\n    let frame_mbs_only_flag = gb.readBits(1);\n    if (frame_mbs_only_flag === 0) {\n      gb.readBits(1);\n    }\n    gb.readBits(1);\n\n    let frame_crop_left_offset = 0;\n    let frame_crop_right_offset = 0;\n    let frame_crop_top_offset = 0;\n    let frame_crop_bottom_offset = 0;\n\n    let frame_cropping_flag = gb.readBool();\n    if (frame_cropping_flag) {\n      frame_crop_left_offset = gb.readUEG();\n      frame_crop_right_offset = gb.readUEG();\n      frame_crop_top_offset = gb.readUEG();\n      frame_crop_bottom_offset = gb.readUEG();\n    }\n\n    let par_width = 1,\n        par_height = 1;\n    let fps = 0,\n        fps_fixed = true,\n        fps_num = 0,\n        fps_den = 0;\n\n    let vui_parameters_present_flag = gb.readBool();\n    if (vui_parameters_present_flag) {\n      if (gb.readBool()) {\n        // aspect_ratio_info_present_flag\n        let aspect_ratio_idc = gb.readByte();\n        let par_w_table = [1, 12, 10, 16, 40, 24, 20, 32, 80, 18, 15, 64, 160, 4, 3, 2];\n        let par_h_table = [1, 11, 11, 11, 33, 11, 11, 11, 33, 11, 11, 33, 99, 3, 2, 1];\n\n        if (aspect_ratio_idc > 0 && aspect_ratio_idc < 16) {\n          par_width = par_w_table[aspect_ratio_idc - 1];\n          par_height = par_h_table[aspect_ratio_idc - 1];\n        } else if (aspect_ratio_idc === 255) {\n          par_width = gb.readByte() << 8 | gb.readByte();\n          par_height = gb.readByte() << 8 | gb.readByte();\n        }\n      }\n\n      if (gb.readBool()) {\n        gb.readBool();\n      }\n      if (gb.readBool()) {\n        gb.readBits(4);\n        if (gb.readBool()) {\n          gb.readBits(24);\n        }\n      }\n      if (gb.readBool()) {\n        gb.readUEG();\n        gb.readUEG();\n      }\n      if (gb.readBool()) {\n        let num_units_in_tick = gb.readBits(32);\n        let time_scale = gb.readBits(32);\n        fps_fixed = gb.readBool();\n\n        fps_num = time_scale;\n        fps_den = num_units_in_tick * 2;\n        fps = fps_num / fps_den;\n      }\n    }\n\n    let parScale = 1;\n    if (par_width !== 1 || par_height !== 1) {\n      parScale = par_width / par_height;\n    }\n\n    let crop_unit_x = 0,\n        crop_unit_y = 0;\n    if (chroma_format_idc === 0) {\n      crop_unit_x = 1;\n      crop_unit_y = 2 - frame_mbs_only_flag;\n    } else {\n      let sub_wc = chroma_format_idc === 3 ? 1 : 2;\n      let sub_hc = chroma_format_idc === 1 ? 2 : 1;\n      crop_unit_x = sub_wc;\n      crop_unit_y = sub_hc * (2 - frame_mbs_only_flag);\n    }\n\n    let codec_width = (pic_width_in_mbs_minus1 + 1) * 16;\n    let codec_height = (2 - frame_mbs_only_flag) * ((pic_height_in_map_units_minus1 + 1) * 16);\n\n    codec_width -= (frame_crop_left_offset + frame_crop_right_offset) * crop_unit_x;\n    codec_height -= (frame_crop_top_offset + frame_crop_bottom_offset) * crop_unit_y;\n\n    let present_width = Math.ceil(codec_width * parScale);\n\n    gb.destroy();\n    gb = null;\n\n    return {\n      profile_string: profile_string,\n      level_string: level_string,\n      bit_depth: bit_depth,\n      chroma_format: chroma_format,\n      chroma_format_string: SPSParser.getChromaFormatString(chroma_format),\n\n      frame_rate: {\n        fixed: fps_fixed,\n        fps: fps,\n        fps_den: fps_den,\n        fps_num: fps_num\n      },\n\n      par_ratio: {\n        width: par_width,\n        height: par_height\n      },\n\n      codec_size: {\n        width: codec_width,\n        height: codec_height\n      },\n\n      present_size: {\n        width: present_width,\n        height: codec_height\n      }\n    };\n  }\n\n  static _skipScalingList(gb, count) {\n    let last_scale = 8,\n        next_scale = 8;\n    let delta_scale = 0;\n    for (let i = 0; i < count; i++) {\n      if (next_scale !== 0) {\n        delta_scale = gb.readSEG();\n        next_scale = (last_scale + delta_scale + 256) % 256;\n      }\n      last_scale = next_scale === 0 ? last_scale : next_scale;\n    }\n  }\n\n  static getProfileString(profileIdc) {\n    switch (profileIdc) {\n      case 66:\n        return 'Baseline';\n      case 77:\n        return 'Main';\n      case 88:\n        return 'Extended';\n      case 100:\n        return 'High';\n      case 110:\n        return 'High10';\n      case 122:\n        return 'High422';\n      case 244:\n        return 'High444';\n      default:\n        return 'Unknown';\n    }\n  }\n\n  static getLevelString(levelIdc) {\n    return (levelIdc / 10).toFixed(1);\n  }\n\n  static getChromaFormatString(chroma) {\n    switch (chroma) {\n      case 420:\n        return '4:2:0';\n      case 422:\n        return '4:2:2';\n      case 444:\n        return '4:4:4';\n      default:\n        return 'Unknown';\n    }\n  }\n\n  static toVideoMeta(spsConfig) {\n    let meta = {};\n    if (spsConfig && spsConfig.codec_size) {\n      meta.codecWidth = spsConfig.codec_size.width;\n      meta.codecHeight = spsConfig.codec_size.height;\n      meta.presentWidth = spsConfig.present_size.width;\n      meta.presentHeight = spsConfig.present_size.height;\n    }\n\n    meta.profile = spsConfig.profile_string;\n    meta.level = spsConfig.level_string;\n    meta.bitDepth = spsConfig.bit_depth;\n    meta.chromaFormat = spsConfig.chroma_format;\n\n    meta.parRatio = {\n      width: spsConfig.par_ratio.width,\n      height: spsConfig.par_ratio.height\n    };\n\n    meta.frameRate = spsConfig.frame_rate;\n\n    let fpsDen = meta.frameRate.fps_den;\n    let fpsNum = meta.frameRate.fps_num;\n    meta.refSampleDuration = Math.floor(meta.timescale * (fpsDen / fpsNum));\n  }\n} /* eslint-disable camelcase  */\n/* eslint-disable one-var  */\nexports.default = SPSParser;\n\n//# sourceURL=webpack://xgplayer-flv/../xgplayer-codec/src/h264/nalunit/sps.js?")},"../xgplayer-demux/index.js":
/*!**********************************!*\
      !*** ../xgplayer-demux/index.js ***!
      \**********************************/
/*! no static exports found */function(module,exports,__webpack_require__){eval('\n\nmodule.exports = {\n  // HLS\n  M3U8Parser: __webpack_require__(/*! ./src/hls/demuxer/m3u8parser */ "../xgplayer-demux/src/hls/demuxer/m3u8parser.js").default,\n  TsDemuxer: __webpack_require__(/*! ./src/hls/demuxer/ts */ "../xgplayer-demux/src/hls/demuxer/ts.js").default,\n  Playlist: __webpack_require__(/*! ./src/hls/playlist */ "../xgplayer-demux/src/hls/playlist.js").default,\n  FlvDemuxer: __webpack_require__(/*! ./src/flv/index */ "../xgplayer-demux/src/flv/index.js").default\n};\n\n//# sourceURL=webpack://xgplayer-flv/../xgplayer-demux/index.js?')},"../xgplayer-demux/src/flv/amf-parser.js":
/*!***********************************************!*\
      !*** ../xgplayer-demux/src/flv/amf-parser.js ***!
      \***********************************************/
/*! no static exports found */function(module,exports,__webpack_require__){eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _xgplayerUtils = __webpack_require__(/*! xgplayer-utils */ \"../xgplayer-utils/index.js\");\n\nconst DATA_TYPES = {\n  NUMBER: 0,\n  BOOLEAN: 1,\n  STRING: 2,\n  OBJECT: 3,\n  MIX_ARRAY: 8,\n  OBJECT_END: 9,\n  STRICT_ARRAY: 10,\n  DATE: 11,\n  LONE_STRING: 12\n\n  /**\n   * meta信息解析\n   */\n};class AMFParser {\n  constructor() {\n    this.offset = 0;\n    this.readOffset = this.offset;\n  }\n\n  resolve(meta, size) {\n    if (size < 3) {\n      throw new Error('not enough data for metainfo');\n    }\n    const metaData = {};\n    const name = this.parseValue(meta);\n    const value = this.parseValue(meta, size - name.bodySize);\n    metaData[name.data] = value.data;\n\n    this.resetStatus();\n    return metaData;\n  }\n\n  resetStatus() {\n    this.offset = 0;\n    this.readOffset = this.offset;\n  }\n\n  parseString(buffer) {\n    const dv = new DataView(buffer, this.readOffset);\n    const strLen = dv.getUint16(0, !_xgplayerUtils.isLe);\n    let str = '';\n    if (strLen > 0) {\n      str = _xgplayerUtils.UTF8.decode(new Uint8Array(buffer, this.readOffset + 2, strLen));\n    } else {\n      str = '';\n    }\n    let size = strLen + 2;\n    this.readOffset += size;\n    return {\n      data: str,\n      bodySize: strLen + 2\n    };\n  }\n\n  parseDate(buffer, size) {\n    const dv = new DataView(buffer, this.readOffset, size);\n    let ts = dv.getFloat64(0, !_xgplayerUtils.isLe);\n    const timeOffset = dv.getInt16(8, !_xgplayerUtils.isLe);\n    ts += timeOffset * 60 * 1000;\n\n    this.readOffset += 10;\n    return {\n      data: new Date(ts),\n      bodySize: 10\n    };\n  }\n\n  parseObject(buffer, size) {\n    const name = this.parseString(buffer, size);\n    const value = this.parseValue(buffer, size - name.bodySize);\n    return {\n      data: {\n        name: name.data,\n        value: value.data\n      },\n      bodySize: name.bodySize + value.bodySize,\n      isObjEnd: value.isObjEnd\n    };\n  }\n\n  parseLongString(buffer) {\n    const dv = new DataView(buffer, this.readOffset);\n    const strLen = dv.getUint32(0, !_xgplayerUtils.isLe);\n    let str = '';\n    if (strLen > 0) {\n      str = _xgplayerUtils.UTF8.decode(new Uint8Array(buffer, this.readOffset + 2, strLen));\n    } else {\n      str = '';\n    }\n    // const size = strLen + 4;\n    this.readOffset += strLen + 4;\n    return {\n      data: str,\n      bodySize: strLen + 4\n    };\n  }\n\n  /**\n   * 解析meta中的变量\n   */\n  parseValue(data, size) {\n    let buffer = new ArrayBuffer();\n    if (data instanceof ArrayBuffer) {\n      buffer = data;\n    } else {\n      buffer = data.buffer;\n    }\n    const {\n      NUMBER,\n      BOOLEAN,\n      STRING,\n      OBJECT,\n      MIX_ARRAY,\n      OBJECT_END,\n      STRICT_ARRAY,\n      DATE,\n      LONE_STRING\n    } = DATA_TYPES;\n    const dataView = new DataView(buffer, this.readOffset, size);\n    let isObjEnd = false;\n    const type = dataView.getUint8(0);\n    let offset = 1;\n    this.readOffset += 1;\n    let value = null;\n\n    switch (type) {\n      case NUMBER:\n        {\n          value = dataView.getFloat64(1, !_xgplayerUtils.isLe);\n          this.readOffset += 8;\n          offset += 8;\n          break;\n        }\n      case BOOLEAN:\n        {\n          const boolNum = dataView.getUint8(1);\n          value = !!boolNum;\n          this.readOffset += 1;\n          offset += 1;\n          break;\n        }\n      case STRING:\n        {\n          const str = this.parseString(buffer);\n          value = str.data;\n          offset += str.bodySize;\n          break;\n        }\n      case OBJECT:\n        {\n          value = {};\n          let objEndSize = 0;\n          if (dataView.getUint32(size - 4, !_xgplayerUtils.isLe) & 0x00FFFFFF) {\n            objEndSize = 3;\n          }\n          // this.readOffset += offset - 1;\n          while (offset < size - 4) {\n            const amfObj = this.parseObject(buffer, size - offset - objEndSize);\n            if (amfObj.isObjectEnd) {\n              break;\n            }\n            value[amfObj.data.name] = amfObj.data.value;\n            offset += amfObj.bodySize;\n          }\n          if (offset <= size - 3) {\n            const mark = dataView.getUint32(offset - 1, !_xgplayerUtils.isLe) & 0x00FFFFFF;\n            if (mark === 9) {\n              this.readOffset += 3;\n              offset += 3;\n            }\n          }\n          break;\n        }\n      case MIX_ARRAY:\n        {\n          value = {};\n          offset += 4;\n          this.readOffset += 4;\n          let objEndSize = 0;\n          if ((dataView.getUint32(size - 4, !_xgplayerUtils.isLe) & 0x00FFFFFF) === 9) {\n            objEndSize = 3;\n          }\n\n          while (offset < size - 8) {\n            const amfVar = this.parseObject(buffer, size - offset - objEndSize);\n            if (amfVar.isObjectEnd) {\n              break;\n            }\n            value[amfVar.data.name] = amfVar.data.value;\n            offset += amfVar.bodySize;\n          }\n          if (offset <= size - 3) {\n            const marker = dataView.getUint32(offset - 1, !_xgplayerUtils.isLe) & 0x00FFFFFF;\n            if (marker === 9) {\n              offset += 3;\n              this.readOffset += 3;\n            }\n          }\n          break;\n        }\n\n      case OBJECT_END:\n        {\n          value = null;\n          isObjEnd = true;\n          break;\n        }\n\n      case STRICT_ARRAY:\n        {\n          value = [];\n          const arrLength = dataView.getUint32(1, !_xgplayerUtils.isLe);\n          offset += 4;\n          this.readOffset += 4;\n          for (let i = 0; i < arrLength; i++) {\n            const script = this.parseValue(buffer, size - offset);\n            value.push(script.data);\n            offset += script.bodySize;\n          }\n          break;\n        }\n\n      case DATE:\n        {\n          const date = this.parseDate(buffer, size - 1);\n          value = date.data;\n          offset += date.bodySize;\n          break;\n        }\n\n      case LONE_STRING:\n        {\n          const longStr = this.parseLongString(buffer, size - 1);\n          value = longStr.data;\n          offset += longStr.bodySize;\n          break;\n        }\n\n      default:\n        {\n          offset = size;\n        }\n    }\n\n    return {\n      data: value,\n      bodySize: offset,\n      isObjEnd: isObjEnd\n    };\n  }\n}\nexports.default = AMFParser;\n\n//# sourceURL=webpack://xgplayer-flv/../xgplayer-demux/src/flv/amf-parser.js?")},"../xgplayer-demux/src/flv/index.js":
/*!******************************************!*\
      !*** ../xgplayer-demux/src/flv/index.js ***!
      \******************************************/
/*! no static exports found */function(module,exports,__webpack_require__){eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _xgplayerUtils = __webpack_require__(/*! xgplayer-utils */ \"../xgplayer-utils/index.js\");\n\nvar _xgplayerCodec = __webpack_require__(/*! xgplayer-codec */ \"../xgplayer-codec/index.js\");\n\nvar _xgplayerBuffer = __webpack_require__(/*! xgplayer-buffer */ \"../xgplayer-buffer/index.js\");\n\nvar _amfParser = __webpack_require__(/*! ./amf-parser */ \"../xgplayer-demux/src/flv/amf-parser.js\");\n\nvar _amfParser2 = _interopRequireDefault(_amfParser);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst DEMUX_EVENTS = _xgplayerUtils.EVENTS.DEMUX_EVENTS;\n\nclass FlvDemuxer {\n  constructor() {\n    this._firstFragmentLoaded = false;\n    this._trackNum = 0;\n    this._hasScript = false;\n  }\n\n  init() {\n    this.on(DEMUX_EVENTS.DEMUX_START, this.doParseFlv.bind(this));\n  }\n\n  /**\n   * if the flv head is valid\n   * @param data\n   * @returns {boolean}\n   */\n  static isFlvFile(data) {\n    return !(data[0] !== 0x46 || data[1] !== 0x4C || data[2] !== 0x56 || data[3] !== 0x01);\n  }\n\n  /**\n   * If the stream has audio or video.\n   * @param {number} streamFlag - Data from the stream which is define whether the audio / video track is exist.\n   */\n  static getPlayType(streamFlag) {\n    const result = {\n      hasVideo: false,\n      hasAudio: false\n    };\n\n    if (streamFlag & 0x01 > 0) {\n      result.hasVideo = true;\n    }\n\n    if (streamFlag & 0x04 > 0) {\n      result.hasAudio = true;\n    }\n\n    return result;\n  }\n\n  doParseFlv() {\n    if (!this._firstFragmentLoaded) {\n      if (this.loaderBuffer.length < 13) {\n        return;\n      }\n      const header = this.loaderBuffer.shift(13);\n      this.parseFlvHeader(header);\n      this.doParseFlv(); // 递归调用，继续解析flv流\n    } else {\n      if (this.loaderBuffer.length < 11) {\n        return;\n      }\n      let chunk;\n      do {\n        chunk = this._parseFlvTag();\n      } while (chunk);\n\n      this.emit(DEMUX_EVENTS.DEMUX_COMPLETE);\n    }\n  }\n\n  parseFlvHeader(header) {\n    if (!FlvDemuxer.isFlvFile(header)) {\n      this.emit(DEMUX_EVENTS.DEMUX_ERROR, new Error('invalid flv file'));\n      this.doParseFlv();\n    } else {\n      this._firstFragmentLoaded = true;\n      const playType = FlvDemuxer.getPlayType(header[4]);\n\n      if (playType.hasVideo) {\n        this.initVideoTrack();\n      }\n\n      if (playType.hasAudio) {\n        this.initAudioTrack();\n      }\n    }\n    this.doParseFlv();\n  }\n\n  /**\n   * init default video track configs\n   */\n  initVideoTrack() {\n    this._trackNum++;\n    let videoTrack = new _xgplayerBuffer.VideoTrack();\n    videoTrack.meta = new _xgplayerUtils.VideoTrackMeta();\n    videoTrack.id = videoTrack.meta.id = this._trackNum;\n\n    this.tracks.videoTrack = videoTrack;\n  }\n\n  /**\n   * init default audio track configs\n   */\n  initAudioTrack() {\n    this._trackNum++;\n    let audioTrack = new _xgplayerBuffer.AudioTrack();\n    audioTrack.meta = new _xgplayerUtils.AudioTrackMeta();\n    audioTrack.id = audioTrack.meta.id = this._trackNum;\n\n    this.tracks.audioTrack = audioTrack;\n  }\n\n  /**\n   * Package the data as the following data structure\n   * {\n   *    data: Uint8Array. the Stream data.\n   *    info: The first byte info of the Tag.\n   *    tagType: 8、9、18\n   *    timeStamp: the timestemp\n   * }\n   */\n  _parseFlvTag() {\n    if (this.loaderBuffer.length < 11) {\n      return null;\n    }\n    let chunk = this._parseFlvTagHeader();\n    if (chunk) {\n      this._processChunk(chunk);\n    }\n    return chunk;\n  }\n\n  /**\n   * Parse the 11 byte tag Header\n   */\n  _parseFlvTagHeader() {\n    let offset = 0;\n    let chunk = {};\n\n    let tagType = this.loaderBuffer.toInt(offset, 1);\n    offset += 1;\n\n    // 2 bit FMS reserved, 1 bit filtered, 5 bit tag type\n    chunk.filtered = (tagType & 32) >>> 5;\n    chunk.tagType = tagType & 31;\n\n    // 3 Byte datasize\n    chunk.datasize = this.loaderBuffer.toInt(offset, 3);\n    offset += 3;\n\n    if (chunk.tagType !== 8 && chunk.tagType !== 9 && chunk.tagType !== 11 && chunk.tagType !== 18 || this.loaderBuffer.toInt(8, 3) !== 0) {\n      if (this.loaderBuffer && this.loaderBuffer.length > 0) {\n        this.loaderBuffer.shift(1);\n      }\n      this.logger.warn(this.TAG, 'tagType ' + chunk.tagType);\n      return null;\n    }\n\n    if (this.loaderBuffer.length < chunk.datasize + 15) {\n      return null;\n    }\n\n    // read the data.\n    this.loaderBuffer.shift(4);\n\n    // 3 Byte timestamp\n    let timestamp = this.loaderBuffer.toInt(0, 3);\n    this.loaderBuffer.shift(3);\n\n    // 1 Byte timestampExt\n    let timestampExt = this.loaderBuffer.shift(1)[0];\n    if (timestampExt > 0) {\n      timestamp += timestampExt * 0x1000000;\n    }\n\n    chunk.dts = timestamp;\n\n    // streamId\n    this.loaderBuffer.shift(3);\n    return chunk;\n  }\n\n  _processChunk(chunk) {\n    switch (chunk.tagType) {\n      case 18:\n        this._parseScriptData(chunk);\n        break;\n      case 8:\n        this._parseAACData(chunk);\n        break;\n      case 9:\n        this._parseHevcData(chunk);\n        break;\n      case 11:\n        // for some CDN that did not process the currect RTMP messages\n        this.loaderBuffer.shift(3);\n        break;\n      default:\n        this.loaderBuffer.shift(1);\n    }\n  }\n\n  /**\n   * parse flv script data\n   * @param chunk\n   * @private\n   */\n  _parseScriptData(chunk) {\n    let audioTrack = this.tracks.audioTrack;\n    let videoTrack = this.tracks.videoTrack;\n\n    let data = this.loaderBuffer.shift(chunk.datasize);\n\n    const info = new _amfParser2.default().resolve(data, data.length);\n\n    const onMetaData = this._context.onMetaData = info ? info.onMetaData : undefined;\n\n    // fill mediaInfo\n    this._context.mediaInfo.duration = onMetaData.duration;\n    this._context.mediaInfo.hasVideo = onMetaData.hasVideo;\n    this._context.mediaInfo.hsaAudio = onMetaData.hasAudio;\n\n    let validate = this._datasizeValidator(chunk.datasize);\n    if (validate) {\n      this.emit(DEMUX_EVENTS.MEDIA_INFO);\n      this._hasScript = true;\n    }\n\n    // Edit default meta.\n    if (audioTrack && !audioTrack.hasSpecificConfig) {\n      let meta = audioTrack.meta;\n      if (onMetaData.audiosamplerate) {\n        meta.sampleRate = onMetaData.audiosamplerate;\n      }\n\n      if (onMetaData.audiochannels) {\n        meta.channelCount = onMetaData.audiochannels;\n      }\n\n      switch (onMetaData.audiosamplerate) {\n        case 44100:\n          meta.sampleRateIndex = 4;\n          break;\n        case 22050:\n          meta.sampleRateIndex = 7;\n          break;\n        case 11025:\n          meta.sampleRateIndex = 10;\n          break;\n      }\n    }\n    if (videoTrack && !videoTrack.hasSpecificConfig) {\n      let meta = videoTrack.meta;\n      if (typeof onMetaData.framerate === 'number') {\n        let fpsNum = Math.floor(onMetaData.framerate * 1000);\n        if (fpsNum > 0) {\n          let fps = fpsNum / 1000;\n          if (!meta.frameRate) {\n            meta.frameRate = {};\n          }\n          meta.frameRate.fixed = true;\n          meta.frameRate.fps = fps;\n          meta.frameRate.fps_num = fpsNum;\n          meta.frameRate.fps_den = 1000;\n        }\n      }\n    }\n  }\n\n  _aacSequenceHeaderParser(data) {\n    let ret = {};\n    ret.hasSpecificConfig = true;\n    ret.objectType = data[1] >>> 3;\n    ret.sampleRateIndex = (data[1] & 7) << 1 | data[2] >>> 7;\n    ret.audiosamplerate = this._switchAudioSampleRate(ret.sampleRateIndex);\n    ret.channelCount = (data[2] & 120) >>> 3;\n    ret.frameLength = (data[2] & 4) >>> 2;\n    ret.dependsOnCoreCoder = (data[2] & 2) >>> 1;\n    ret.extensionFlagIndex = data[2] & 1;\n\n    ret.codec = `mp4a.40.${ret.objectType}`;\n    let userAgent = window.navigator.userAgent.toLowerCase();\n    let extensionSamplingIndex;\n\n    let config;\n    let samplingIndex = ret.sampleRateIndex;\n\n    if (userAgent.indexOf('firefox') !== -1) {\n      // firefox: use SBR (HE-AAC) if freq less than 24kHz\n      if (ret.sampleRateIndex >= 6) {\n        ret.objectType = 5;\n        config = new Array(4);\n        extensionSamplingIndex = samplingIndex - 3;\n      } else {\n        // use LC-AAC\n        ret.objectType = 2;\n        config = new Array(2);\n        extensionSamplingIndex = samplingIndex;\n      }\n    } else if (userAgent.indexOf('android') !== -1) {\n      // android: always use LC-AAC\n      ret.objectType = 2;\n      config = new Array(2);\n      extensionSamplingIndex = samplingIndex;\n    } else {\n      // for other browsers, e.g. chrome...\n      // Always use HE-AAC to make it easier to switch aac codec profile\n      ret.objectType = 5;\n      extensionSamplingIndex = ret.sampleRateIndex;\n      config = new Array(4);\n\n      if (ret.sampleRateIndex >= 6) {\n        extensionSamplingIndex = ret.sampleRateIndex - 3;\n      } else if (ret.channelCount === 1) {\n        // Mono channel\n        ret.objectType = 2;\n        config = new Array(2);\n        extensionSamplingIndex = ret.sampleRateIndex;\n      }\n    }\n\n    config[0] = ret.objectType << 3;\n    config[0] |= (ret.sampleRateIndex & 0x0F) >>> 1;\n    config[1] = (ret.sampleRateIndex & 0x0F) << 7;\n    config[1] |= (ret.channelCount & 0x0F) << 3;\n    if (ret.objectType === 5) {\n      config[1] |= (extensionSamplingIndex & 0x0F) >>> 1;\n      config[2] = (extensionSamplingIndex & 0x01) << 7;\n      // extended audio object type: force to 2 (LC-AAC)\n      config[2] |= 2 << 2;\n      config[3] = 0;\n    }\n    ret.config = config;\n    return ret;\n  }\n\n  _parseAACData(chunk) {\n    let track = this.tracks.audioTrack;\n    if (!track) {\n      return;\n    }\n\n    let meta = track.meta;\n\n    if (!meta) {\n      meta = new _xgplayerUtils.AudioTrackMeta();\n    }\n\n    let info = this.loaderBuffer.shift(1)[0];\n\n    chunk.data = this.loaderBuffer.shift(chunk.datasize - 1);\n\n    let format = (info & 240) >>> 4;\n\n    track.format = format;\n\n    if (format !== 10) {\n      this.emit(DEMUX_EVENTS.DEMUX_ERROR, new Error(`invalid audio format: ${format}`));\n    }\n\n    if (format === 10 && !this._hasAudioSequence) {\n      meta.sampleRate = this._switchAudioSamplingFrequency(info);\n      meta.sampleRateIndex = (info & 12) >>> 2;\n      meta.frameLenth = (info & 2) >>> 1;\n      meta.channelCount = info & 1;\n      meta.refSampleDuration = Math.floor(1024 / meta.audioSampleRate * meta.timescale);\n    }\n\n    let audioSampleRate = meta.audioSampleRate;\n    let audioSampleRateIndex = meta.sampleRateIndex;\n    let refSampleDuration = meta.refSampleDuration;\n\n    delete chunk.tagType;\n    let validate = this._datasizeValidator(chunk.datasize);\n\n    if (chunk.data[0] === 0) {\n      // AAC Sequence Header\n      let aacHeader = this._aacSequenceHeaderParser(chunk.data);\n      audioSampleRate = aacHeader.audiosamplerate || meta.audioSampleRate;\n      audioSampleRateIndex = aacHeader.sampleRateIndex || meta.sampleRateIndex;\n      refSampleDuration = Math.floor(1024 / audioSampleRate * meta.timescale);\n\n      meta.channelCount = aacHeader.channelCount;\n      meta.sampleRate = audioSampleRate;\n      meta.sampleRateIndex = audioSampleRateIndex;\n      meta.refSampleDuration = refSampleDuration;\n      meta.duration = this._context.mediaInfo.duration * meta.timescale;\n      meta.config = aacHeader.config;\n      meta.objectType = aacHeader.objectType;\n\n      const audioMedia = this._context.mediaInfo.audio;\n\n      // fill audio media info\n      audioMedia.codec = aacHeader.codec;\n      audioMedia.channelCount = aacHeader.channelCount;\n      audioMedia.sampleRate = audioSampleRate;\n      audioMedia.sampleRateIndex = aacHeader.audioSampleRateIndex;\n\n      if (this._hasScript && !this._hasAudioSequence) {\n        this.emit(DEMUX_EVENTS.METADATA_PARSED, 'audio');\n      } else if (this._hasScript && this._hasAudioSequence) {\n        this.emit(DEMUX_EVENTS.AUDIO_METADATA_CHANGE);\n      }\n      ;\n      this._hasAudioSequence = true;\n    } else {\n      chunk.data = chunk.data.slice(1, chunk.data.length);\n      track.samples.push(chunk);\n    }\n    if (!validate) {\n      const error = new Error('TAG length error at ' + chunk.datasize);\n      this.emit(DEMUX_EVENTS.DEMUX_ERROR, error.message);\n      this.logger.warn(this.TAG, error.message);\n    }\n  }\n\n  /**\n   * parse hevc/avc video data\n   * @param chunk\n   * @private\n   */\n  _parseHevcData(chunk) {\n    // header\n    let info = this.loaderBuffer.shift(1)[0];\n    chunk.frameType = (info & 0xf0) >>> 4;\n    chunk.isKeyframe = chunk.frameType === 1;\n    // let tempCodecID = this.tracks.videoTrack.codecID\n    let codecID = info & 0x0f;\n    this.tracks.videoTrack.codecID = codecID;\n\n    // hevc和avc的header解析方式一样\n    chunk.avcPacketType = this.loaderBuffer.shift(1)[0];\n    chunk.cts = this.loaderBuffer.toInt(0, 3);\n    this.loaderBuffer.shift(3);\n\n    // 12 for hevc, 7 for avc\n    if (codecID === 12) {\n      const data = this.loaderBuffer.shift(chunk.datasize - 5);\n      chunk.data = data;\n\n      if (Number.parseInt(chunk.avcPacketType) !== 0) {\n        if (!this._datasizeValidator(chunk.datasize)) {\n          this.logger.warn(this.TAG, `invalid video tag datasize: ${chunk.datasize}`);\n        }\n        let nalu = {};\n        let r = 0;\n        nalu.cts = chunk.cts;\n        nalu.dts = chunk.dts;\n        while (chunk.data.length > r) {\n          let sizes = chunk.data.slice(Number.parseInt(r), 4 + r);\n          nalu.size = sizes[3];\n          nalu.size += sizes[2] * 256;\n          nalu.size += sizes[1] * 256 * 256;\n          nalu.size += sizes[0] * 256 * 256 * 256;\n          r += 4;\n          nalu.data = chunk.data.slice(Number.parseInt(r), nalu.size + r);\n          r += nalu.size;\n          this.tracks.videoTrack.samples.push(nalu);\n          this.emit(DEMUX_EVENTS.METADATA_PARSED, 'video');\n        }\n      } else if (Number.parseInt(chunk.avcPacketType) === 0) {\n        if (!this._datasizeValidator(chunk.datasize)) {\n          this.logger.warn(this.TAG, `invalid video tag datasize: ${chunk.datasize}`);\n        } else {\n          this.emit(DEMUX_EVENTS.METADATA_PARSED, 'video');\n        }\n      }\n    } else if (codecID === 7) {\n      let data = this.loaderBuffer.shift(chunk.datasize - 5);\n      if (data[4] === 0 && data[5] === 0 && data[6] === 0 && data[7] === 1) {\n        let avcclength = 0;\n        for (let i = 0; i < 4; i++) {\n          avcclength = avcclength * 256 + data[i];\n        }\n        avcclength -= 4;\n        data = data.slice(4, data.length);\n        data[3] = avcclength % 256;\n        avcclength = (avcclength - data[3]) / 256;\n        data[2] = avcclength % 256;\n        avcclength = (avcclength - data[2]) / 256;\n        data[1] = avcclength % 256;\n        data[0] = (avcclength - data[1]) / 256;\n      }\n\n      chunk.data = data;\n      // If it is AVC sequece Header.\n      if (chunk.avcPacketType === 0) {\n        this._avcSequenceHeaderParser(chunk.data);\n        let validate = this._datasizeValidator(chunk.datasize);\n        if (validate) {\n          if (this._hasScript && !this._hasVideoSequence) {\n            this.emit(DEMUX_EVENTS.METADATA_PARSED, 'video');\n          } else if (this._hasScript && this._hasVideoSequence) {\n            this.emit(DEMUX_EVENTS.VIDEO_METADATA_CHANGE);\n          }\n          this._hasVideoSequence = true;\n        }\n      } else {\n        if (!this._datasizeValidator(chunk.datasize)) {\n          this.logger.warn(this.TAG, `invalid video tag datasize: ${chunk.datasize}`);\n          return;\n        }\n        this.tracks.videoTrack.samples.push(chunk);\n        // this.emit(DEMUX_EVENTS.DEMUX_COMPLETE)\n      }\n    } else {\n      this.logger.warn(this.TAG, `video codeid is ${codecID}`);\n      chunk.data = this.loaderBuffer.shift(chunk.datasize - 1);\n      if (!this._datasizeValidator(chunk.datasize)) {\n        this.logger.warn(this.TAG, `invalid video tag datasize: ${chunk.datasize}`);\n      }\n      this.tracks.videoTrack.samples.push(chunk);\n      this.emit(DEMUX_EVENTS.DEMUX_COMPLETE);\n    }\n    delete chunk.tagType;\n  }\n\n  /**\n   * parse avc metadata\n   * @param data\n   * @private\n   */\n  _avcSequenceHeaderParser(data) {\n    let track = this.tracks.videoTrack;\n\n    if (!track) {\n      return;\n    }\n\n    let offset = 0;\n\n    if (!track.meta) {\n      track.meta = new _xgplayerUtils.VideoTrackMeta();\n    }\n    let meta = track.meta;\n\n    meta.configurationVersion = data[0];\n    meta.avcProfileIndication = data[1];\n    meta.profileCompatibility = data[2];\n    meta.avcLevelIndication = data[3] / 10;\n    meta.nalUnitLength = (data[4] & 0x03) + 1;\n\n    let numOfSps = data[5] & 0x1f;\n    offset = 6;\n    let config = {};\n\n    // parse SPS\n    for (let i = 0; i < numOfSps; i++) {\n      let size = data[offset] * 255 + data[offset + 1];\n      offset += 2;\n\n      let sps = new Uint8Array(size);\n      for (let j = 0; j < size; j++) {\n        sps[j] = data[offset + j];\n      }\n\n      // codec string\n      let codecString = 'avc1.';\n      for (let j = 1; j < 4; j++) {\n        let h = sps[j].toString(16);\n        if (h.length < 2) {\n          h = '0' + h;\n        }\n        codecString += h;\n      }\n\n      meta.codec = codecString;\n\n      offset += size;\n      this.tracks.videoTrack.meta.sps = sps;\n      config = _xgplayerCodec.SpsParser.parseSPS(sps);\n    }\n\n    let numOfPps = data[offset];\n\n    offset++;\n\n    for (let i = 0; i < numOfPps; i++) {\n      let size = data[offset] * 255 + data[offset + 1];\n      offset += 2;\n      let pps = new Uint8Array(size);\n      for (let j = 0; j < size; j++) {\n        pps[j] = data[offset + j];\n      }\n      offset += size;\n      this.tracks.videoTrack.meta.pps = pps;\n    }\n\n    Object.assign(meta, _xgplayerCodec.SpsParser.toVideoMeta(config));\n\n    // fill video media info\n    const videoMedia = this._context.mediaInfo.video;\n\n    videoMedia.codec = meta.codec;\n    videoMedia.profile = meta.profile;\n    videoMedia.level = meta.level;\n    videoMedia.chromaFormat = meta.chromaFormat;\n    videoMedia.frameRate = meta.frameRate;\n    videoMedia.parRatio = meta.parRatio;\n    videoMedia.width = videoMedia.width === meta.presentWidth ? videoMedia.width : meta.presentWidth;\n    videoMedia.height = videoMedia.height === meta.presentHeight ? videoMedia.width : meta.presentHeight;\n\n    meta.duration = this._context.mediaInfo.duration * meta.timescale;\n    meta.avcc = new Uint8Array(data.length);\n    meta.avcc.set(data);\n    track.meta = meta;\n  }\n\n  /**\n   * choose audio sample rate\n   * @param samplingFrequencyIndex\n   * @returns {number}\n   * @private\n   */\n  _switchAudioSampleRate(samplingFrequencyIndex) {\n    let samplingFrequencyList = [96000, 88200, 64000, 48000, 44100, 32000, 24000, 22050, 16000, 12000, 11025, 8000, 7350];\n    return samplingFrequencyList[samplingFrequencyIndex];\n  }\n\n  /**\n   * choose audio sampling frequence\n   * @param info\n   * @returns {number}\n   * @private\n   */\n  _switchAudioSamplingFrequency(info) {\n    let samplingFrequencyIndex = (info & 12) >>> 2;\n    let samplingFrequencyList = [5500, 11025, 22050, 44100, 48000];\n    return samplingFrequencyList[samplingFrequencyIndex];\n  }\n\n  /**\n   * choose audio channel count\n   * @param info\n   * @returns {number}\n   * @private\n   */\n  _switchAudioChannel(info) {\n    let sampleTrackNumIndex = info & 1;\n    let sampleTrackNumList = [1, 2];\n    return sampleTrackNumList[sampleTrackNumIndex];\n  }\n\n  /**\n   * check datasize is valid use 4 Byte after current tag\n   * @param datasize\n   * @returns {boolean}\n   * @private\n   */\n  _datasizeValidator(datasize) {\n    let datasizeConfirm = this.loaderBuffer.toInt(0, 4);\n    this.loaderBuffer.shift(4);\n    return datasizeConfirm === datasize + 11;\n  }\n\n  get loaderBuffer() {\n    if (this._context.getInstance('LOADER_BUFFER')) {\n      return this._context.getInstance('LOADER_BUFFER');\n    } else {\n      this.emit(DEMUX_EVENTS.DEMUX_ERROR, new Error('找不到 loaderBuffer 实例'));\n    }\n  }\n\n  get tracks() {\n    return this._context.getInstance('TRACKS');\n  }\n\n  get logger() {\n    return this._context.getInstance('LOGGER');\n  }\n}\n\nexports.default = FlvDemuxer;\n\n//# sourceURL=webpack://xgplayer-flv/../xgplayer-demux/src/flv/index.js?")},"../xgplayer-demux/src/hls/demuxer/m3u8parser.js":
/*!*******************************************************!*\
      !*** ../xgplayer-demux/src/hls/demuxer/m3u8parser.js ***!
      \*******************************************************/
/*! no static exports found */function(module,exports,__webpack_require__){eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n/**\n * Reference: https://tools.ietf.org/html/rfc8216#section-4.3\n */\nclass M3U8Parser {\n  static parse(text, baseurl = '') {\n    let ret = {\n      duration: 0\n    };\n    if (!text || !text.split) {\n      return;\n    }\n    let refs = text.split(/\\r|\\n/);\n    refs = refs.filter(ref => {\n      return ref;\n    });\n    let ref = refs.shift();\n    if (!ref.match('#EXTM3U')) {\n      // TODO:M3U格式错误。\n      return null;\n    }\n    ref = refs.shift();\n    while (ref) {\n      let refm = ref.match(/#(.*):(.*)/);\n      if (refm && refm.length > 2) {\n        switch (refm[1]) {\n          case 'EXT-X-VERSION':\n            ret.version = parseInt(refm[2]);\n            break;\n          case 'EXT-X-MEDIA-SEQUENCE':\n            ret.sequence = parseInt(refm[2]);\n            break;\n          case 'EXT-X-TARGETDURATION':\n            ret.targetduration = parseFloat(refm[2]);\n            break;\n          case 'EXTINF':\n            M3U8Parser.parseFrag(refm, refs, ret, baseurl);\n            break;\n          default:\n            break;\n        }\n      }\n      ref = refs.shift();\n    }\n    return ret;\n  }\n\n  static parseFrag(refm, refs, ret, baseurl) {\n    if (!ret.frags) {\n      ret.frags = [];\n    }\n\n    let freg = {\n      start: ret.duration,\n      duration: parseFloat(refm[2]) * 1000\n    };\n\n    ret.duration += freg.duration;\n    let nextline = refs.shift();\n    if (nextline.match(/#(.*):(.*)/)) {\n      nextline = refs.shift();\n    }\n    if (nextline.length > 0 && nextline.charAt(0) === '/' && baseurl.match(/.*\\/\\/.*\\.\\w+/g)) {\n      baseurl = baseurl.match(/.*\\/\\/.*\\.\\w+/g)[0];\n    }\n    if (nextline.match(/.*:\\/\\/.*/)) {\n      freg.url = nextline;\n    } else {\n      freg.url = baseurl + nextline;\n    }\n\n    ret.frags.push(freg);\n  }\n\n  static parseURL(url) {\n    let baseurl = '';\n    let urls = url.match(/(.*\\/).*\\.m3u8/);\n    if (urls && urls.length > 0) {\n      for (let i = 0; i < urls.length; i++) {\n        if (urls[i].match(/.*\\/$/g) && urls[i].length > baseurl.length) {\n          baseurl = urls[i];\n        }\n      }\n    }\n    return baseurl;\n  }\n}\n\nexports.default = M3U8Parser;\n\n//# sourceURL=webpack://xgplayer-flv/../xgplayer-demux/src/hls/demuxer/m3u8parser.js?")},"../xgplayer-demux/src/hls/demuxer/ts.js":
/*!***********************************************!*\
      !*** ../xgplayer-demux/src/hls/demuxer/ts.js ***!
      \***********************************************/
/*! no static exports found */function(module,exports,__webpack_require__){eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _xgplayerCodec = __webpack_require__(/*! xgplayer-codec */ \"../xgplayer-codec/index.js\");\n\nvar _xgplayerBuffer = __webpack_require__(/*! xgplayer-buffer */ \"../xgplayer-buffer/index.js\");\n\nvar _xgplayerUtils = __webpack_require__(/*! xgplayer-utils */ \"../xgplayer-utils/index.js\");\n\nconst DEMUX_EVENTS = _xgplayerUtils.EVENTS.DEMUX_EVENTS;\nconst StreamType = {\n  0x01: ['video', 'MPEG-1'],\n  0x02: ['video', 'MPEG-2'],\n  0x1b: ['video', 'AVC.H264'],\n  0xea: ['video', 'VC-1'],\n  0x03: ['audio', 'MPEG-1'],\n  0x04: ['audio', 'MPEG-2'],\n  0x0f: ['audio', 'MPEG-2.AAC'],\n  0x11: ['audio', 'MPEG-4.AAC'],\n  0x80: ['audio', 'LPCM'],\n  0x81: ['audio', 'AC3'],\n  0x06: ['audio', 'AC3'],\n  0x82: ['audio', 'DTS'],\n  0x83: ['audio', 'Dolby TrueHD'],\n  0x84: ['audio', 'AC3-Plus'],\n  0x85: ['audio', 'DTS-HD'],\n  0x86: ['audio', 'DTS-MA'],\n  0xa1: ['audio', 'AC3-Plus-SEC'],\n  0xa2: ['audio', 'DTS-HD-SEC']\n};\n\nclass TsDemuxer {\n  constructor(configs) {\n    this.configs = Object.assign({}, configs);\n    this.demuxing = false;\n    this.pat = [];\n    this.pmt = [];\n    this._hasVideoMeta = false;\n    this._hasAudioMeta = false;\n  }\n\n  init() {\n    this.on(DEMUX_EVENTS.DEMUX_START, this.demux.bind(this));\n  }\n\n  demux() {\n    if (this.demuxing) {\n      return;\n    }\n\n    let buffer = this.inputBuffer;\n    let frags = { pat: [], pmt: [] };\n    let peses = {};\n\n    // Read TS segment\n    while (buffer.length >= 188) {\n      while (buffer.length >= 1 && buffer.array[0][buffer.offset] !== 71) {\n        buffer.shift(1);\n      }\n      let buf = buffer.shift(188);\n      // console.log(buf);\n      let tsStream = new _xgplayerUtils.Stream(buf.buffer);\n      let ts = {};\n      TsDemuxer.read(tsStream, ts, frags);\n      if (ts.pes) {\n        if (!peses[ts.header.pid]) {\n          peses[ts.header.pid] = [];\n        }\n        peses[ts.header.pid].push(ts.pes);\n        ts.pes.ES.buffer = [ts.pes.ES.buffer];\n      } else if (peses[ts.header.pid]) {\n        peses[ts.header.pid][peses[ts.header.pid].length - 1].ES.buffer.push(ts.payload.stream);\n      }\n    }\n\n    // Get Frames data\n    for (let i = 0; i < Object.keys(peses).length; i++) {\n      let epeses = peses[Object.keys(peses)[i]];\n      for (let j = 0; j < epeses.length; j++) {\n        epeses[j].id = Object.keys(peses)[i];\n        epeses[j].ES.buffer = TsDemuxer.Merge(epeses[j].ES.buffer);\n        if (epeses[j].type === 'audio') {\n          this.pushAudioSample(epeses[j]);\n        } else if (epeses[j].type === 'video') {\n          this.pushVideoSample(epeses[j]);\n        }\n      }\n    }\n\n    if (this._hasAudioMeta) {\n      this.emit(DEMUX_EVENTS.DEMUX_COMPLETE, 'audio');\n    }\n    if (this._hasVideoMeta) {\n      this.emit(DEMUX_EVENTS.DEMUX_COMPLETE, 'video');\n    }\n  }\n\n  pushAudioSample(pes) {\n    let track;\n    if (!this._tracks.audioTrack) {\n      this._tracks.audioTrack = new _xgplayerBuffer.AudioTrack();\n      track = this._tracks.audioTrack;\n      track.meta = new _xgplayerUtils.AudioTrackMeta({\n        audioSampleRate: pes.ES.frequence,\n        sampleRate: pes.ES.frequence,\n        channelCount: pes.ES.channel,\n        codec: 'mp4a.40.' + pes.ES.audioObjectType,\n        config: pes.ES.audioConfig,\n        id: 2,\n        sampleRateIndex: pes.ES.frequencyIndex\n      });\n      track.meta.refSampleDuration = Math.floor(1024 / track.meta.audioSampleRate * track.meta.timescale);\n      if (!this._hasAudioMeta) {\n        this._hasAudioMeta = true;\n        this.emit(DEMUX_EVENTS.METADATA_PARSED, 'audio');\n      }\n    } else {\n      track = this._tracks.audioTrack;\n    }\n    let data = new Uint8Array(pes.ES.buffer.buffer.slice(pes.ES.buffer.position, pes.ES.buffer.length));\n    let dts = parseInt(pes.pts / 90);\n    let pts = parseInt(pes.pts / 90);\n    let sample = new _xgplayerUtils.AudioTrackSample({ dts, pts, data });\n    track.samples.push(sample);\n  }\n\n  pushVideoSample(pes) {\n    let nals = _xgplayerCodec.Nalunit.getNalunits(pes.ES.buffer);\n    let track;\n    if (!this._tracks.videoTrack) {\n      this._tracks.videoTrack = new _xgplayerBuffer.VideoTrack();\n      track = this._tracks.videoTrack;\n      track.meta = new _xgplayerUtils.VideoTrackMeta();\n    } else {\n      track = this._tracks.videoTrack;\n    }\n    let sampleLength = 0;\n    let sps = false;\n    let pps = false;\n    for (let i = 0; i < nals.length; i++) {\n      let nal = nals[i];\n      if (nal.sps) {\n        // TODO：VideoTrack信息 和 Meta 信息\n        if (track.sps && TsDemuxer.compaireUint8(nal.body, track.sps)) {\n          continue;\n        }\n\n        sps = nal;\n        track.sps = nal.body;\n        track.meta.chromaFormat = sps.sps.chroma_format;\n        track.meta.codec = 'avc1.';\n        for (var j = 1; j < 4; j++) {\n          var h = sps.body[j].toString(16);\n          if (h.length < 2) {\n            h = '0' + h;\n          }\n          track.meta.codec += h;\n        }\n        track.meta.codecHeight = sps.sps.codec_size.height;\n        track.meta.codecWidth = sps.sps.codec_size.width;\n        track.meta.frameRate = sps.sps.frame_rate;\n        track.meta.id = 1;\n        track.meta.level = sps.sps.level_string;\n        track.meta.presentHeight = sps.sps.present_size.height;\n        track.meta.presentWidth = sps.sps.present_size.width;\n        track.meta.profile = sps.sps.profile_string;\n        track.meta.refSampleDuration = Math.floor(track.meta.timescale * (sps.sps.frame_rate.fps_den / sps.sps.frame_rate.fps_num));\n        track.meta.sarRatio = sps.sps.sar_ratio ? sps.sps.sar_ratio : sps.sps.par_ratio;\n      } else if (nal.pps) {\n        track.pps = nal.body;\n        pps = nal;\n      } else {\n        sampleLength += 4 + nal.body.byteLength;\n      }\n    }\n\n    if (sps && pps) {\n      track.meta.avcc = _xgplayerCodec.Nalunit.getAvcc(sps.body, pps.body);\n      if (!this._hasVideoMeta) {\n        this._hasVideoMeta = true;\n        this.emit(DEMUX_EVENTS.METADATA_PARSED, 'video');\n      }\n    }\n\n    let data = new Uint8Array(sampleLength);\n    let offset = 0;\n    let isKeyframe = false;\n    for (let i = 0; i < nals.length; i++) {\n      let nal = nals[i];\n      let length = nal.body.byteLength;\n      if (nal.idr) {\n        isKeyframe = true;\n      }\n      if (!nal.pps && !nal.sps) {\n        data.set(new Uint8Array([length >>> 24 & 0xff, length >>> 16 & 0xff, length >>> 8 & 0xff, length & 0xff]), offset);\n        offset += 4;\n        data.set(nal.body, offset);\n        offset += length;\n      }\n    }\n    let sample = new _xgplayerUtils.VideoTrackSample({\n      dts: parseInt(pes.dts / 90),\n      pts: parseInt(pes.pts / 90),\n      cts: (pes.pts - pes.dts) / 90,\n      originDts: pes.dts,\n      isKeyframe,\n      data\n    });\n    track.samples.push(sample);\n  }\n\n  destory() {\n    this.off(DEMUX_EVENTS.DEMUX_START, this.demux);\n    this.configs = {};\n    this.demuxing = false;\n    this.pat = [];\n    this.pmt = [];\n    this._hasVideoMeta = false;\n    this._hasAudioMeta = false;\n  }\n\n  static compaireUint8(a, b) {\n    if (a.byteLength !== b.byteLength) {\n      return false;\n    }\n    let ret = true;\n    for (let i = 0; i < a.byteLength; i++) {\n      if (a[i] !== b[i]) {\n        ret = false;\n      }\n    }\n    return ret;\n  }\n  static Merge(buffers) {\n    let data;\n    let length = 0;\n    let offset = 0;\n    for (let i = 0; i < buffers.length; i++) {\n      length += buffers[i].length - buffers[i].position;\n    }\n\n    data = new Uint8Array(length);\n    for (let i = 0; i < buffers.length; i++) {\n      let buffer = buffers[i];\n      data.set(new Uint8Array(buffer.buffer, buffer.position), offset);\n      offset += buffer.length - buffer.position;\n    }\n    return new _xgplayerUtils.Stream(data.buffer);\n  }\n\n  static read(stream, ts, frags) {\n    TsDemuxer.readHeader(stream, ts);\n    TsDemuxer.readPayload(stream, ts, frags);\n    if (ts.header.packet === 'MEDIA' && ts.header.payload === 1 && !ts.unknownPIDs) {\n      ts.pes = TsDemuxer.PES(ts);\n    }\n  }\n\n  static readPayload(stream, ts, frags) {\n    let header = ts.header;\n    let pid = header.pid;\n    switch (pid) {\n      case 0:\n        TsDemuxer.PAT(stream, ts, frags);\n        break;\n      case 1:\n        TsDemuxer.CAT(stream, ts, frags);\n        break;\n      case 2:\n        TsDemuxer.TSDT(stream, ts, frags);\n        break;\n      case 0x1fff:\n        break;\n      default:\n        // TODO: some的写法不太好，得改\n        if (frags.pat.some(item => {\n          return item.pid === pid;\n        })) {\n          TsDemuxer.PMT(stream, ts, frags);\n        } else {\n          let sts = frags.pmt ? frags.pmt.filter(item => item.pid === pid) : [];\n          if (sts.length > 0) {\n            TsDemuxer.Media(stream, ts, StreamType[sts[0].streamType][0]);\n          } else {\n            ts.unknownPIDs = true;\n          };\n        }\n    }\n  }\n\n  static readHeader(stream, ts) {\n    let header = {};\n    header.sync = stream.readUint8();\n    let next = stream.readUint16();\n    header.error = next >>> 15;\n    header.payload = next >>> 14 & 1;\n    header.priority = next >>> 13 & 1;\n    header.pid = next & 0x1fff;\n\n    next = stream.readUint8();\n\n    header.scrambling = next >> 6 & 0x3; // 是否加密，00表示不加密\n\n    /**\n     * 00 ISO/IEC未来使用保留\n     * 01 没有调整字段，仅含有184B有效净荷\n     * 02 没有有效净荷，仅含有183B调整字段\n     * 03 0~182B调整字段后为有效净荷\n     */\n    header.adaptation = next >> 4 & 0x3;\n    header.continuity = next & 15;\n    header.packet = header.pid === 0 ? 'PAT' : 'MEDIA';\n    ts.header = header;\n  }\n\n  static PAT(stream, ts, frags) {\n    let ret = {};\n    let next = stream.readUint8();\n    stream.skip(next);\n    next = stream.readUint8();\n    ret.tabelID = next;\n    next = stream.readUint16();\n    ret.error = next >>> 7;\n    ret.zero = next >>> 6 & 1;\n    ret.sectionLength = next & 0xfff;\n    ret.streamID = stream.readUint16();\n    ret.current = stream.readUint8() & 1;\n    ret.sectionNumber = stream.readUint8();\n    ret.lastSectionNumber = stream.readUint8();\n    let N = (ret.sectionLength - 9) / 4;\n    let list = [];\n    for (let i = 0; i < N; i++) {\n      let programNumber = stream.readUint16();\n      let pid = stream.readUint16() & 0x1fff;\n      list.push({\n        program: programNumber,\n        pid,\n        type: programNumber === 0 ? 'network' : 'mapPID'\n      });\n    }\n    if (list.length > 0) {\n      frags.pat = frags.pat.concat(list);\n    }\n    ret.list = list;\n    ret.program = stream.readUint16();\n    ret.pid = stream.readUint16() & 0x1fff;\n    ts.payload = ret;\n    // TODO CRC\n  }\n\n  static PMT(stream, ts, frags) {\n    let ret = {};\n    let header = ts.header;\n    header.packet = 'PMT';\n    let next = stream.readUint8();\n    stream.skip(next);\n    next = stream.readUint8();\n    ret.tableID = next;\n    next = stream.readUint16();\n    ret.sectionLength = next & 0xfff;\n    ret.program = stream.readUint16();\n    ret.current = stream.readUint8() & 1;\n    ret.order = stream.readUint8();\n    ret.lastOrder = stream.readUint8();\n    ret.PCR_PID = stream.readUint16() & 0x1fff;\n    ret.programLength = stream.readUint16() & 0xfff;\n    let N = (ret.sectionLength - 13) / 5;\n    let list = [];\n    for (let i = 0; i < N; i++) {\n      list.push({\n        streamType: stream.readUint8(),\n        pid: stream.readUint16() & 0x1fff, // 0x07e5 视频，0x07e6\n        es: stream.readUint16() & 0xfff\n      });\n    }\n    ret.list = list;\n    if (!this.pmt) {\n      this.pmt = [];\n    }\n    frags.pmt = this.pmt.concat(list.map(item => {\n      return {\n        pid: item.pid,\n        es: item.es,\n        streamType: item.streamType,\n        program: ret.program\n      };\n    }));\n    ts.payload = ret;\n  }\n\n  static Media(stream, ts, type) {\n    let header = ts.header;\n    let payload = {};\n    header.type = type;\n    if (header.adaptation === 0x03) {\n      payload.adaptationLength = stream.readUint8();\n      if (payload.adaptationLength > 0) {\n        let next = stream.readUint8();\n        payload.discontinue = next >>> 7;\n        payload.access = next >>> 6 & 0x01;\n        payload.priority = next >>> 5 & 0x01;\n        payload.PCR = next >>> 4 & 0x01;\n        payload.OPCR = next >>> 3 & 0x01;\n        payload.splicePoint = next >>> 2 & 0x01;\n        payload.transportPrivate = next >>> 1 & 0x01;\n        payload.adaptationField = next & 0x01;\n        let _start = stream.position;\n        if (payload.PCR === 1) {\n          payload.programClockBase = stream.readUint32() << 1;\n          next = stream.readUint16();\n          payload.programClockBase |= next >>> 15;\n          payload.programClockExtension = next & 0x1ff;\n        }\n        if (payload.OPCR === 1) {\n          payload.originProgramClockBase = stream.readUint32() << 1;\n          next = stream.readUint16();\n          payload.originProgramClockBase += next >>> 15;\n          payload.originProgramClockExtension = next & 0x1ff;\n        }\n        if (payload.splicePoint === 1) {\n          payload.spliceCountdown = stream.readUint8();\n        }\n        if (payload.transportPrivate === 1) {\n          let length = stream.readUint8();\n          let transportPrivateData = [];\n          for (let i = 0; i < length; i++) {\n            transportPrivateData.push(stream.readUint8());\n          }\n        }\n        if (payload.adaptationField === 1) {\n          let length = stream.readUint8();\n          let next = stream.readUint8();\n          let start = stream.position;\n          let ltw = next >>> 7;\n          let piecewise = next >>> 6 & 0x1;\n          let seamless = next >>> 5 & 0x1;\n          if (ltw === 1) {\n            next = stream.readUint16();\n            payload.ltwValid = next >>> 15;\n            payload.ltwOffset = next & 0xefff;\n          }\n          if (piecewise === 1) {\n            next = stream.readUint24();\n            payload.piecewiseRate = next & 0x3fffff;\n          }\n          if (seamless === 1) {\n            next = stream.readInt8();\n            payload.spliceType = next >>> 4;\n            payload.dtsNextAU1 = next >>> 1 & 0x7;\n            payload.marker1 = next & 0x1;\n            next = stream.readUint16();\n            payload.dtsNextAU2 = next >>> 1;\n            payload.marker2 = next & 0x1;\n            next = stream.readUint16();\n            payload.dtsNextAU3 = next;\n          }\n          stream.skip(length - 1 - (stream.position - start));\n        }\n        let lastStuffing = payload.adaptationLength - 1 - (stream.position - _start);\n        stream.skip(lastStuffing);\n      }\n    }\n    payload.stream = new _xgplayerUtils.Stream(stream.buffer.slice(stream.position));\n    ts.payload = payload;\n  }\n\n  static PES(ts) {\n    let ret = {};\n    let buffer = ts.payload.stream;\n\n    let next = buffer.readUint24();\n    if (next !== 1) {\n      ret.ES = {};\n      ret.ES.buffer = buffer;\n    } else {\n      let streamID = buffer.readUint8();\n      if (streamID >= 0xe0 && streamID <= 0xef) {\n        ret.type = 'video';\n      }\n      if (streamID >= 0xc0 && streamID <= 0xdf) {\n        ret.type = 'audio';\n      }\n      let packetLength = buffer.readUint16();\n      ret.packetLength = packetLength;\n      if (ret.type === 'video' || ret.type === 'audio') {\n        let next = buffer.readUint8();\n        let first = next >>> 6;\n        if (first !== 0x02) {\n          throw new Error('error when parse pes header');\n        }\n        next = buffer.readUint8();\n        ret.ptsDTSFlag = next >>> 6;\n        ret.escrFlag = next >>> 5 & 0x01;\n        ret.esRateFlag = next >>> 4 & 0x01;\n        ret.dsmFlag = next >>> 3 & 0x01;\n        ret.additionalFlag = next >>> 2 & 0x01;\n        ret.crcFlag = next >>> 1 & 0x01;\n        ret.extensionFlag = next & 0x01;\n        ret.pesHeaderLength = buffer.readUint8();\n        let N1 = ret.pesHeaderLength;\n\n        if (ret.ptsDTSFlag === 2) {\n          let pts = [];\n          next = buffer.readUint8();\n          pts.push(next >>> 1 & 0x07);\n          next = buffer.readUint16();\n          pts.push(next >>> 1);\n          next = buffer.readUint16();\n          pts.push(next >>> 1);\n          ret.pts = pts[0] << 30 | pts[1] << 15 | pts[2];\n          N1 -= 5;\n          // 视频如果没有dts用pts\n          if (ret.type === 'video') {\n            ret.dts = ret.pts;\n          }\n        }\n        if (ret.ptsDTSFlag === 3) {\n          let pts = [];\n          next = buffer.readUint8();\n          pts.push(next >>> 1 & 0x07);\n          next = buffer.readUint16();\n          pts.push(next >>> 1);\n          next = buffer.readUint16();\n          pts.push(next >>> 1);\n          ret.pts = pts[0] << 30 | pts[1] << 15 | pts[2];\n          let dts = [];\n          next = buffer.readUint8();\n          dts.push(next >>> 1 & 0x07);\n          next = buffer.readUint16();\n          dts.push(next >>> 1);\n          next = buffer.readUint16();\n          dts.push(next >>> 1);\n          ret.dts = dts[0] << 30 | dts[1] << 15 | dts[2];\n          N1 -= 10;\n        }\n        if (ret.escrFlag === 1) {\n          let escr = [];\n          let ex = [];\n          next = buffer.readUint8();\n          escr.push(next >>> 3 & 0x07);\n          escr.push(next & 0x03);\n          next = buffer.readUint16();\n          escr.push(next >>> 13);\n          escr.push(next & 0x03);\n          next = buffer.readUint16();\n          escr.push(next >>> 13);\n          ex.push(next & 0x03);\n          next = buffer.readUint8();\n          ex.push(next >>> 1);\n          ret.escr = (escr[0] << 30 | escr[1] << 28 | escr[2] << 15 | escr[3] << 13 | escr[4]) * 300 + (ex[0] << 7 | ex[1]);\n          N1 -= 6;\n        }\n        if (ret.esRateFlag === 1) {\n          next = buffer.readUint24();\n          ret.esRate = next >>> 1 & 0x3fffff;\n          N1 -= 3;\n        }\n        if (ret.dsmFlag === 1) {\n          throw new Error('not support DSM_trick_mode');\n        }\n        if (ret.additionalFlag === 1) {\n          next = buffer.readUint8();\n          ret.additionalCopyInfo = next & 0x7f;\n          N1 -= 1;\n        }\n        if (ret.crcFlag === 1) {\n          ret.pesCRC = buffer.readUint16();\n          N1 -= 2;\n        }\n        if (ret.extensionFlag === 1) {\n          throw new Error('not support extension');\n        }\n        if (N1 > 0) {\n          buffer.skip(N1);\n        }\n        ret.ES = TsDemuxer.ES(buffer, ret.type);\n      } else {\n        throw new Error('format is not supported');\n      }\n    }\n    return ret;\n  }\n\n  static ES(buffer, type) {\n    let next;\n    let ret = {};\n    if (type === 'video') {\n      next = buffer.readUint32();\n      if (next !== 1) {\n        buffer.back(4);\n        next = buffer.readUint24();\n        if (next !== 1) {\n          throw new Error('h264 nal header parse failed');\n        }\n      }\n      buffer.skip(2); // 09 F0\n      // TODO readnalu\n      ret.buffer = buffer;\n    } else if (type === 'audio') {\n      next = buffer.readUint16();\n      // adts的同步字节，12位\n      if (next >>> 4 !== 0xfff) {\n        throw new Error('aac ES parse Error');\n      }\n      const fq = [96000, 88200, 64000, 48000, 44100, 32000, 24000, 22050, 16000, 12000, 11025, 8000, 7350];\n      ret.id = (next >>> 3 & 0x01) === 0 ? 'MPEG-4' : 'MPEG-2';\n      ret.layer = next >>> 1 & 0x03;\n      ret.absent = next & 0x01;\n      next = buffer.readUint16();\n      ret.audioObjectType = (next >>> 14 & 0x03) + 1;\n      ret.profile = ret.audioObjectType - 1;\n      ret.frequencyIndex = next >>> 10 & 0x0f;\n      ret.frequence = fq[ret.frequencyIndex];\n      ret.channel = next >>> 6 & 0x07;\n      ret.frameLength = (next & 0x03) << 11 | buffer.readUint16() >>> 5;\n      ret.audioConfig = TsDemuxer.getAudioConfig(ret.audioObjectType, ret.channel, ret.frequencyIndex);\n      buffer.skip(1);\n      ret.buffer = buffer;\n    } else {\n      throw new Error(`ES ${type} is not supported`);\n    }\n\n    return ret;\n  }\n\n  static TSDT(stream, ts, frags) {\n    // TODO\n    ts.payload = {};\n  }\n\n  static CAT(stream, ts, frags) {\n    let ret = {};\n    ret.tableID = stream.readUint8();\n    let next = stream.readUint16();\n    ret.sectionIndicator = next >>> 7;\n    ret.sectionLength = next & 0x0fff;\n    stream.skip(2);\n    next = stream.readUint8();\n    ret.version = next >>> 3;\n    ret.currentNextIndicator = next & 0x01;\n    ret.sectionNumber = stream.readUint8();\n    ret.lastSectionNumber = stream.readUint8();\n    let N = (this.sectionLength - 9) / 4;\n    let list = [];\n    for (let i = 0; i < N; i++) {\n      list.push({});\n    }\n    ret.crc32 = stream.readUint32();\n    ts.payload = ret;\n  }\n\n  static getAudioConfig(audioObjectType, channel, sampleIndex) {\n    let userAgent = navigator.userAgent.toLowerCase();\n    let config;\n    let extensionSampleIndex;\n    if (/firefox/i.test(userAgent)) {\n      if (sampleIndex >= 6) {\n        audioObjectType = 5;\n        config = new Array(4);\n        extensionSampleIndex = sampleIndex - 3;\n      } else {\n        audioObjectType = 2;\n        config = new Array(2);\n        extensionSampleIndex = sampleIndex;\n      }\n    } else if (userAgent.indexOf('android') !== -1) {\n      audioObjectType = 2;\n      config = new Array(2);\n      extensionSampleIndex = sampleIndex;\n    } else {\n      audioObjectType = 5;\n      config = new Array(4);\n      if (sampleIndex >= 6) {\n        extensionSampleIndex = sampleIndex - 3;\n      } else {\n        if (channel === 1) {\n          audioObjectType = 2;\n          config = new Array(2);\n        }\n        extensionSampleIndex = sampleIndex;\n      }\n    }\n\n    config[0] = audioObjectType << 3;\n    config[0] |= (sampleIndex & 0x0e) >> 1;\n    config[1] = (sampleIndex & 0x01) << 7;\n    config[1] |= channel << 3;\n    if (audioObjectType === 5) {\n      config[1] |= (extensionSampleIndex & 0x0e) >> 1;\n      config[2] = (extensionSampleIndex & 0x01) << 7;\n      config[2] |= 2 << 2;\n      config[3] = 0;\n    }\n    return config;\n  }\n\n  get inputBuffer() {\n    return this._context.getInstance(this.configs.inputbuffer);\n  }\n\n  get _tracks() {\n    return this._context.getInstance('TRACKS');\n  }\n}\n\nexports.default = TsDemuxer;\n\n//# sourceURL=webpack://xgplayer-flv/../xgplayer-demux/src/hls/demuxer/ts.js?")},"../xgplayer-demux/src/hls/playlist.js":
/*!*********************************************!*\
      !*** ../xgplayer-demux/src/hls/playlist.js ***!
      \*********************************************/
/*! no static exports found */function(module,exports,__webpack_require__){eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nclass Playlist {\n  constructor(configs) {\n    this._baseURL = '';\n    this._list = {};\n    this._ts = {};\n    this.version = 0;\n    this.sequence = -1;\n    this.targetduration = 0;\n    this.duration = 0;\n    this.fragLength = 0;\n    this._lastget = undefined;\n    this._audoclear = configs.autoclear || false;\n  }\n\n  get list() {\n    return this._list;\n  }\n\n  set baseURL(baseURL) {\n    if (this.baseURL !== baseURL) {\n      this.clear();\n      this._baseURL = baseURL;\n    }\n  }\n\n  get baseURL() {\n    return this._baseURL;\n  }\n\n  push(ts, duration) {\n    if (!this._ts[ts]) {\n      this._ts[ts] = { duration: duration, downloaded: false, downloading: false, start: this.duration };\n      this._list[this.duration] = ts;\n      this.duration += duration;\n      this.fragLength += 1;\n    }\n  }\n\n  deleteFrag(url) {\n    if (this._ts[url]) {\n      if (this._ts[url].start > this._lastget.time) {\n        this._lastget = {\n          duration: this._ts[url].duration,\n          time: this._ts[url].start,\n          downloaded: false,\n          downloading: false,\n          url: url\n        };\n      }\n      delete this._list[this._ts[url].start];\n      delete this._ts[url];\n      this.fragLength -= 1;\n    }\n  }\n\n  pushM3U8(data, deletepre) {\n    // 常规信息替换\n    if (!data) {\n      return;\n    }\n    this.version = data.version;\n    this.targetduration = data.targetduration;\n\n    // 新分片信息\n    if (data.sequence > this.sequence) {\n      this.sequence = data.sequence;\n      let newfraglist = [];\n      for (let i = 0; i < data.frags.length; i++) {\n        let frag = data.frags[i];\n        if (!this._ts[frag.url]) {\n          newfraglist.push(frag.url);\n          this.push(frag.url, frag.duration);\n        }\n      }\n      if (deletepre) {\n        let tslist = this.getTsList();\n        for (let i = 0; i < tslist.length; i++) {\n          if (newfraglist.indexOf(tslist[i]) < 0) {\n            this.deleteFrag(tslist[i]);\n          }\n        }\n      }\n    }\n  }\n\n  getTsList() {\n    return Object.keys(this._ts);\n  }\n\n  downloaded(tsname, isloaded) {\n    let ts = this._ts[tsname];\n    if (ts) {\n      ts.downloaded = isloaded;\n    }\n  }\n\n  downloading(tsname, loading) {\n    let ts = this._ts[tsname];\n    if (ts) {\n      ts.downloading = loading;\n    }\n  }\n\n  getTsByName(name) {\n    return this._ts[name];\n  }\n\n  getTs(time) {\n    let timelist = Object.keys(this._list);\n    let ts;\n\n    if (time === undefined) {\n      if (this._lastget) {\n        time = this._lastget.time + this._lastget.duration;\n      } else {\n        time = 0;\n      }\n    }\n\n    if (timelist.length < 1 || time >= this.duration) {\n      return undefined;\n    }\n    timelist.sort((a, b) => {\n      return parseFloat(a) - parseFloat(b);\n    });\n    for (let i = 0; i < timelist.length; i++) {\n      if (time >= parseInt(timelist[i])) {\n        let url = this._list[timelist[i]];\n        let downloaded = this._ts[url].downloaded;\n        let downloading = this._ts[url].downloading;\n        ts = { url, downloaded, downloading, time: parseInt(timelist[i]), duration: parseInt(this._ts[url].duration) };\n        if (this.autoclear) {\n          delete this._ts[this._lastget.url];\n          delete this._list[this._lastget.time];\n        }\n        this._lastget = ts;\n      } else {\n        break;\n      }\n    }\n    return ts;\n  }\n\n  clear() {\n    this._baseURL = '';\n    this._list = {};\n    this._ts = {};\n    this.version = 0;\n    this.sequence = -1;\n    this.targetduration = 0;\n    this.duration = 0;\n  }\n\n  clearDownloaded() {\n    for (let i = 0, l = Object.keys(this._ts).length; i < l; i++) {\n      let ts = this._ts[Object.keys(this._ts)[i]];\n      ts.downloaded = false;\n      ts.downloading = false;\n    }\n  }\n\n  destroy() {\n    this._baseURL = '';\n    this._list = {};\n    this._ts = {};\n    this.version = 0;\n    this.sequence = -1;\n    this.targetduration = 0;\n    this.duration = 0;\n    this.fragLength = 0;\n    this._lastget = undefined;\n    this._audoclear = false;\n  }\n}\n\nexports.default = Playlist;\n\n//# sourceURL=webpack://xgplayer-flv/../xgplayer-demux/src/hls/playlist.js?")},"../xgplayer-loader/index.js":
/*!***********************************!*\
      !*** ../xgplayer-loader/index.js ***!
      \***********************************/
/*! no static exports found */function(module,exports,__webpack_require__){eval('\n\nmodule.exports = {\n  FetchLoader: __webpack_require__(/*! ./src/fetch-loader */ "../xgplayer-loader/src/fetch-loader.js").default\n};\n\n//# sourceURL=webpack://xgplayer-flv/../xgplayer-loader/index.js?')},"../xgplayer-loader/src/fetch-loader.js":
/*!**********************************************!*\
      !*** ../xgplayer-loader/src/fetch-loader.js ***!
      \**********************************************/
/*! no static exports found */function(module,exports,__webpack_require__){eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _xgplayerUtils = __webpack_require__(/*! xgplayer-utils */ \"../xgplayer-utils/index.js\");\n\nconst LOADER_EVENTS = _xgplayerUtils.EVENTS.LOADER_EVENTS;\nconst READ_STREAM = 0;\nconst READ_TEXT = 1;\nconst READ_JSON = 2;\nconst READ_BUFFER = 3;\nclass FetchLoader {\n  constructor(configs) {\n    this.configs = Object.assign({}, configs);\n    this.url = null;\n    this.status = 0;\n    this.error = null;\n    this._reader = null;\n    this._canceled = false;\n    this.readtype = this.configs.readtype;\n    this.buffer = this.configs.buffer || 'LOADER_BUFFER';\n    this._loaderTaskNo = 0;\n  }\n\n  init() {\n    this.on(LOADER_EVENTS.LADER_START, this.load.bind(this));\n  }\n\n  static get type() {\n    return 'loader';\n  }\n\n  load(url, opts) {\n    let _this = this;\n    this.url = url;\n    this._canceled = false;\n\n    // TODO: Add Ranges\n    let params = this.getParams(opts);\n    _this.loading = true;\n    return fetch(this.url, params).then(function (response) {\n      if (response.ok) {\n        _this.status = response.status;\n        return _this._onFetchResponse(response);\n      }\n      _this.emit(LOADER_EVENTS.LOADER_ERROR, _this, response);\n      _this.loading = false;\n    }).catch(function (error) {\n      _this.emit(LOADER_EVENTS.LOADER_ERROR, _this, error);\n      _this.loading = false;\n      throw new Error(error.message);\n    });\n  }\n\n  _onFetchResponse(response) {\n    let _this = this;\n    let buffer = this._context.getInstance(this.buffer);\n    this._loaderTaskNo++;\n    let taskno = this._loaderTaskNo;\n    if (response.ok === true) {\n      switch (this.readtype) {\n        case READ_JSON:\n          response.json().then(data => {\n            _this.loading = false;\n            if (!_this._canceled) {\n              if (buffer) {\n                buffer.push(data);\n                _this.emit(LOADER_EVENTS.LOADER_COMPLETE, buffer);\n              } else {\n                _this.emit(LOADER_EVENTS.LOADER_COMPLETE, data);\n              }\n            }\n          });\n          break;\n        case READ_TEXT:\n          response.text().then(data => {\n            _this.loading = false;\n            if (!_this._canceled) {\n              if (buffer) {\n                buffer.push(data);\n                _this.emit(LOADER_EVENTS.LOADER_COMPLETE, buffer);\n              } else {\n                _this.emit(LOADER_EVENTS.LOADER_COMPLETE, data);\n              }\n            }\n          });\n          break;\n        case READ_BUFFER:\n          response.arrayBuffer().then(data => {\n            _this.loading = false;\n            if (!_this._canceled) {\n              if (buffer) {\n                buffer.push(new Uint8Array(data));\n                _this.emit(LOADER_EVENTS.LOADER_COMPLETE, buffer);\n              } else {\n                _this.emit(LOADER_EVENTS.LOADER_COMPLETE, data);\n              }\n            }\n          });\n          break;\n        case READ_STREAM:\n        default:\n          return this._onReader(response.body.getReader(), taskno);\n      }\n    }\n  }\n\n  _onReader(reader, taskno) {\n    let buffer = this._context.getInstance(this.buffer);\n\n    if (!buffer) {\n      this._reader.cancel();\n    }\n\n    this._reader = reader;\n    if (this.loading === false) {\n      return;\n    }\n\n    let _this = this;\n    // reader read function returns a Promise. get data when callback and has value.done when disconnected.\n    // read方法返回一个Promise. 回调中可以获取到数据。当value.done存在时，说明链接断开。\n    this._reader && this._reader.read().then(function (val) {\n      if (val.done) {\n        // TODO: 完成处理\n        _this.loading = false;\n        _this.status = 0;\n        _this.emit(LOADER_EVENTS.LOADER_COMPLETE, buffer);\n        return;\n      }\n\n      if (_this._canceled) {\n        _this._reader.cancel();\n        return;\n      }\n      buffer.push(val.value);\n      _this.emit(LOADER_EVENTS.LOADER_DATALOADED, buffer);\n      return _this._onReader(reader, taskno);\n    }).catch(error => {\n      console.error(error);\n      _this.emit(LOADER_EVENTS.LOADER_ERROR, _this, error);\n      _this.loading = false;\n    });\n  }\n\n  getParams(opts) {\n    let options = Object.assign({}, opts);\n    let headers = new Headers();\n\n    let params = {\n      method: 'GET',\n      headers: headers,\n      mode: 'cors',\n      cache: 'default'\n\n      // add custmor headers\n      // 添加自定义头\n    };if (typeof this.configs.headers === 'object') {\n      let configHeaders = this.configs.headers;\n      for (let key in configHeaders) {\n        if (configHeaders.hasOwnProperty(key)) {\n          headers.append(key, configHeaders[key]);\n        }\n      }\n    }\n\n    if (typeof options.headers === 'object') {\n      let optHeaders = options.headers;\n      for (let key in optHeaders) {\n        if (optHeaders.hasOwnProperty(key)) {\n          headers.append(key, optHeaders[key]);\n        }\n      }\n    }\n\n    if (options.cors === false) {\n      params.mode = 'same-origin';\n    }\n\n    // withCredentials is disabled by default\n    // withCredentials 在默认情况下不被使用。\n    if (options.withCredentials) {\n      params.credentials = 'include';\n    }\n\n    // TODO: Add ranges;\n    return params;\n  }\n\n  cancel() {\n    if (this._reader) {\n      this._reader.cancel();\n      this._reader = null;\n      this.loading = false;\n      this._canceled = true;\n    }\n  }\n\n  destroy() {\n    this.cancel();\n  }\n}\n\nexports.default = FetchLoader;\n\n//# sourceURL=webpack://xgplayer-flv/../xgplayer-loader/src/fetch-loader.js?")},"../xgplayer-remux/index.js":
/*!**********************************!*\
      !*** ../xgplayer-remux/index.js ***!
      \**********************************/
/*! no static exports found */function(module,exports,__webpack_require__){eval('\n\nmodule.exports = {\n  Mp4Remuxer: __webpack_require__(/*! ./src/mp4 */ "../xgplayer-remux/src/mp4/index.js").default\n};\n\n//# sourceURL=webpack://xgplayer-flv/../xgplayer-remux/index.js?')},"../xgplayer-remux/src/mp4/fmp4.js":
/*!*****************************************!*\
      !*** ../xgplayer-remux/src/mp4/fmp4.js ***!
      \*****************************************/
/*! no static exports found */function(module,exports,__webpack_require__){eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _xgplayerUtils = __webpack_require__(/*! xgplayer-utils */ \"../xgplayer-utils/index.js\");\n\n// const UINT32_MAX = Math.pow(2, 32) - 1;\nclass Fmp4 {\n  static size(value) {\n    return _xgplayerUtils.Buffer.writeUint32(value);\n  }\n  static initBox(size, name, ...content) {\n    const buffer = new _xgplayerUtils.Buffer();\n    buffer.write(Fmp4.size(size), Fmp4.type(name), ...content);\n    return buffer.buffer;\n  }\n  static extension(version, flag) {\n    return new Uint8Array([version, flag >> 16 & 0xff, flag >> 8 & 0xff, flag & 0xff]);\n  }\n  static ftyp() {\n    return Fmp4.initBox(24, 'ftyp', new Uint8Array([0x69, 0x73, 0x6F, 0x6D, // isom,\n    0x0, 0x0, 0x00, 0x01, // minor_version: 0x01\n    0x69, 0x73, 0x6F, 0x6D, // isom\n    0x61, 0x76, 0x63, 0x31 // avc1\n    ]));\n  }\n  static moov({ type, meta }) {\n    let size = 8;\n    let mvhd = Fmp4.mvhd(meta.duration, meta.timescale);\n    let trak;\n\n    if (type === 'video') {\n      trak = Fmp4.videoTrak(meta);\n    } else {\n      trak = Fmp4.audioTrak(meta);\n    }\n\n    let mvex = Fmp4.mvex(meta.duration, meta.timescale || 1000, meta.id);\n    [mvhd, trak, mvex].forEach(item => {\n      size += item.byteLength;\n    });\n    return Fmp4.initBox(size, 'moov', mvhd, trak, mvex);\n  }\n  static mvhd(duration, timescale = 1000) {\n    // duration *= timescale;\n    let bytes = new Uint8Array([0x00, 0x00, 0x00, 0x00, // version(0) + flags     1位的box版本+3位flags   box版本，0或1，一般为0。（以下字节数均按version=0）\n    0x00, 0x00, 0x00, 0x00, // creation_time    创建时间  （相对于UTC时间1904-01-01零点的秒数）\n    0x00, 0x00, 0x00, 0x00, // modification_time   修改时间\n\n    /**\n           * timescale: 4 bytes文件媒体在1秒时间内的刻度值，可以理解为1秒长度\n           */\n    timescale >>> 24 & 0xFF, timescale >>> 16 & 0xFF, timescale >>> 8 & 0xFF, timescale & 0xFF,\n\n    /**\n           * duration: 4 bytes该track的时间长度，用duration和time scale值可以计算track时长，比如audio track的time scale = 8000,\n           * duration = 560128，时长为70.016，video track的time scale = 600, duration = 42000，时长为70\n           */\n    duration >>> 24 & 0xFF, duration >>> 16 & 0xFF, duration >>> 8 & 0xFF, duration & 0xFF, 0x00, 0x01, 0x00, 0x00, // Preferred rate: 1.0   推荐播放速率，高16位和低16位分别为小数点整数部分和小数部分，即[16.16] 格式，该值为1.0（0x00010000）表示正常前向播放\n    /**\n           * PreferredVolume(1.0, 2bytes) + reserved(2bytes)\n           * 与rate类似，[8.8] 格式，1.0（0x0100）表示最大音量\n           */\n    0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, //  reserved: 4 + 4 bytes保留位\n    0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x00, 0x00, // ----begin composition matrix----\n    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, // 视频变换矩阵   线性代数\n    0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x40, 0x00, 0x00, 0x00, // ----end composition matrix----\n    0x00, 0x00, 0x00, 0x00, // ----begin pre_defined 6 * 4 bytes----\n    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, // pre-defined 保留位\n    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, // ----end pre_defined 6 * 4 bytes----\n    0xFF, 0xFF, 0xFF, 0xFF // next_track_ID 下一个track使用的id号\n    ]);\n    return Fmp4.initBox(8 + bytes.length, 'mvhd', new Uint8Array(bytes));\n  }\n  static videoTrak(data) {\n    let size = 8;\n\n    let tkhd = Fmp4.tkhd({\n      id: 1,\n      duration: data.duration,\n      timescale: data.timescale || 1000,\n      width: data.presentWidth,\n      height: data.presentHeight,\n      type: 'video'\n    });\n    let mdia = Fmp4.mdia({\n      type: 'video',\n      timescale: data.timescale || 1000,\n      duration: data.duration,\n      avcc: data.avcc,\n      parRatio: data.parRatio,\n      width: data.presentWidth,\n      height: data.presentHeight\n    });\n    [tkhd, mdia].forEach(item => {\n      size += item.byteLength;\n    });\n    return Fmp4.initBox(size, 'trak', tkhd, mdia);\n  }\n  static audioTrak(data) {\n    let size = 8;\n    let tkhd = Fmp4.tkhd({\n      id: 2,\n      duration: data.duration,\n      timescale: data.timescale || 1000,\n      width: 0,\n      height: 0,\n      type: 'audio'\n    });\n    let mdia = Fmp4.mdia({\n      type: 'audio',\n      timescale: data.timescale || 1000,\n      duration: data.duration,\n      channelCount: data.channelCount,\n      samplerate: data.sampleRate,\n      config: data.config\n    });\n    [tkhd, mdia].forEach(item => {\n      size += item.byteLength;\n    });\n    return Fmp4.initBox(size, 'trak', tkhd, mdia);\n  }\n  static tkhd(data) {\n    let id = data.id;\n    let duration = data.duration;\n    let width = data.width;\n    let height = data.height;\n    let content = new Uint8Array([0x00, 0x00, 0x00, 0x07, // version(0) + flags 1位版本 box版本，0或1，一般为0。（以下字节数均按version=0）按位或操作结果值，预定义如下：\n    // 0x000001 track_enabled，否则该track不被播放；\n    // 0x000002 track_in_movie，表示该track在播放中被引用；\n    // 0x000004 track_in_preview，表示该track在预览时被引用。\n    // 一般该值为7，1+2+4 如果一个媒体所有track均未设置track_in_movie和track_in_preview，将被理解为所有track均设置了这两项；对于hint track，该值为0\n    // hint track 这个特殊的track并不包含媒体数据，而是包含了一些将其他数据track打包成流媒体的指示信息。\n    0x00, 0x00, 0x00, 0x00, // creation_time创建时间（相对于UTC时间1904-01-01零点的秒数）\n    0x00, 0x00, 0x00, 0x00, // modification time 修改时间\n    id >>> 24 & 0xFF, // track_ID: 4 bytes id号，不能重复且不能为0\n    id >>> 16 & 0xFF, id >>> 8 & 0xFF, id & 0xFF, 0x00, 0x00, 0x00, 0x00, // reserved: 4 bytes    保留位\n    duration >>> 24 & 0xFF, // duration: 4 bytes track的时间长度\n    duration >>> 16 & 0xFF, duration >>> 8 & 0xFF, duration & 0xFF, 0x00, 0x00, 0x00, 0x00, // reserved: 2 * 4 bytes    保留位\n    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, // layer(2bytes) + alternate_group(2bytes)  视频层，默认为0，值小的在上层.track分组信息，默认为0表示该track未与其他track有群组关系\n    0x00, 0x00, 0x00, 0x00, // volume(2bytes) + reserved(2bytes)    [8.8] 格式，如果为音频track，1.0（0x0100）表示最大音量；否则为0   +保留位\n    0x00, 0x01, 0x00, 0x00, // ----begin composition matrix----\n    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x00, 0x00, // 视频变换矩阵\n    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x40, 0x00, 0x00, 0x00, // ----end composition matrix----\n    width >>> 8 & 0xFF, // //宽度\n    width & 0xFF, 0x00, 0x00, height >>> 8 & 0xFF, // 高度\n    height & 0xFF, 0x00, 0x00]);\n    return Fmp4.initBox(8 + content.byteLength, 'tkhd', content);\n  }\n  static edts(data) {\n    let buffer = new _xgplayerUtils.Buffer();\n    let duration = data.duration;\n    let mediaTime = data.mediaTime;\n    buffer.write(Fmp4.size(36), Fmp4.type('edts'));\n    // elst\n    buffer.write(Fmp4.size(28), Fmp4.type('elst'));\n    buffer.write(new Uint8Array([0x00, 0x00, 0x00, 0x01, // entry count\n    duration >> 24 & 0xff, duration >> 16 & 0xff, duration >> 8 & 0xff, duration & 0xff, mediaTime >> 24 & 0xff, mediaTime >> 16 & 0xff, mediaTime >> 8 & 0xff, mediaTime & 0xff, 0x00, 0x00, 0x00, 0x01 // media rate\n    ]));\n    return buffer.buffer;\n  }\n  static mdia(data) {\n    let size = 8;\n    let mdhd = Fmp4.mdhd(data.timescale, data.duration);\n    let hdlr = Fmp4.hdlr(data.type);\n    let minf = Fmp4.minf(data);\n    [mdhd, hdlr, minf].forEach(item => {\n      size += item.byteLength;\n    });\n    return Fmp4.initBox(size, 'mdia', mdhd, hdlr, minf);\n  }\n  static mdhd(timescale = 1000, duration) {\n    let content = new Uint8Array([0x00, 0x00, 0x00, 0x00, // creation_time    创建时间\n    0x00, 0x00, 0x00, 0x00, // modification_time修改时间\n    timescale >>> 24 & 0xFF, // timescale: 4 bytes    文件媒体在1秒时间内的刻度值，可以理解为1秒长度\n    timescale >>> 16 & 0xFF, timescale >>> 8 & 0xFF, timescale & 0xFF, duration >>> 24 & 0xFF, // duration: 4 bytes  track的时间长度\n    duration >>> 16 & 0xFF, duration >>> 8 & 0xFF, duration & 0xFF, 0x55, 0xC4, // language: und (undetermined) 媒体语言码。最高位为0，后面15位为3个字符（见ISO 639-2/T标准中定义）\n    0x00, 0x00 // pre_defined = 0\n    ]);\n    return Fmp4.initBox(12 + content.byteLength, 'mdhd', Fmp4.extension(0, 0), content);\n  }\n  static hdlr(type) {\n    let value = [0x00, // version 0\n    0x00, 0x00, 0x00, // flags\n    0x00, 0x00, 0x00, 0x00, // pre_defined\n    0x76, 0x69, 0x64, 0x65, // handler_type: 'vide'\n    0x00, 0x00, 0x00, 0x00, // reserved\n    0x00, 0x00, 0x00, 0x00, // reserved\n    0x00, 0x00, 0x00, 0x00, // reserved\n    0x56, 0x69, 0x64, 0x65, 0x6f, 0x48, 0x61, 0x6e, 0x64, 0x6c, 0x65, 0x72, 0x00 // name: 'VideoHandler'\n    ];\n    if (type === 'audio') {\n      value.splice(8, 4, ...[0x73, 0x6f, 0x75, 0x6e]);\n      value.splice(24, 13, ...[0x53, 0x6f, 0x75, 0x6e, 0x64, 0x48, 0x61, 0x6e, 0x64, 0x6c, 0x65, 0x72, 0x00]);\n    }\n    return Fmp4.initBox(8 + value.length, 'hdlr', new Uint8Array(value));\n  }\n  static minf(data) {\n    let size = 8;\n    let vmhd = data.type === 'video' ? Fmp4.vmhd() : Fmp4.smhd();\n    let dinf = Fmp4.dinf();\n    let stbl = Fmp4.stbl(data);\n    [vmhd, dinf, stbl].forEach(item => {\n      size += item.byteLength;\n    });\n    return Fmp4.initBox(size, 'minf', vmhd, dinf, stbl);\n  }\n  static vmhd() {\n    return Fmp4.initBox(20, 'vmhd', new Uint8Array([0x00, // version\n    0x00, 0x00, 0x01, // flags\n    0x00, 0x00, // graphicsmode\n    0x00, 0x00, 0x00, 0x00, 0x00, 0x00 // opcolor\n    ]));\n  }\n  static smhd() {\n    return Fmp4.initBox(16, 'smhd', new Uint8Array([0x00, // version\n    0x00, 0x00, 0x00, // flags\n    0x00, 0x00, // balance\n    0x00, 0x00 // reserved\n    ]));\n  }\n  static dinf() {\n    let buffer = new _xgplayerUtils.Buffer();\n    let dref = [0x00, // version 0\n    0x00, 0x00, 0x00, // flags\n    0x00, 0x00, 0x00, 0x01, // entry_count\n    0x00, 0x00, 0x00, 0x0c, // entry_size\n    0x75, 0x72, 0x6c, 0x20, // 'url' type\n    0x00, // version 0\n    0x00, 0x00, 0x01 // entry_flags\n    ];\n    buffer.write(Fmp4.size(36), Fmp4.type('dinf'), Fmp4.size(28), Fmp4.type('dref'), new Uint8Array(dref));\n    return buffer.buffer;\n  }\n  static stbl(data) {\n    let size = 8;\n    let stsd = Fmp4.stsd(data);\n    let stts = Fmp4.stts();\n    let stsc = Fmp4.stsc();\n    let stsz = Fmp4.stsz();\n    let stco = Fmp4.stco();\n    [stsd, stts, stsc, stsz, stco].forEach(item => {\n      size += item.byteLength;\n    });\n    return Fmp4.initBox(size, 'stbl', stsd, stts, stsc, stsz, stco);\n  }\n  static stsd(data) {\n    let content;\n    if (data.type === 'audio') {\n      // if (!data.isAAC && data.codec === 'mp4') {\n      //     content = FMP4.mp3(data);\n      // } else {\n      //\n      // }\n      // 支持mp4a\n      content = Fmp4.mp4a(data);\n    } else {\n      content = Fmp4.avc1(data);\n    }\n    return Fmp4.initBox(16 + content.byteLength, 'stsd', Fmp4.extension(0, 0), new Uint8Array([0x00, 0x00, 0x00, 0x01]), content);\n  }\n  static mp4a(data) {\n    let content = new Uint8Array([0x00, 0x00, 0x00, // reserved\n    0x00, 0x00, 0x00, // reserved\n    0x00, 0x01, // data_reference_index\n    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, // reserved\n    0x00, data.channelCount, // channelcount\n    0x00, 0x10, // sampleSize:16bits\n    0x00, 0x00, 0x00, 0x00, // reserved2\n    data.samplerate >> 8 & 0xff, data.samplerate & 0xff, //\n    0x00, 0x00]);\n    let esds = Fmp4.esds(data.config);\n    return Fmp4.initBox(8 + content.byteLength + esds.byteLength, 'mp4a', content, esds);\n  }\n  static esds(config = [43, 146, 8, 0]) {\n    const configlen = config.length;\n    let buffer = new _xgplayerUtils.Buffer();\n    let content = new Uint8Array([0x00, // version 0\n    0x00, 0x00, 0x00, // flags\n\n    0x03, // descriptor_type\n    0x17 + configlen, // length\n    0x00, 0x01, // es_id\n    0x00, // stream_priority\n\n    0x04, // descriptor_type\n    0x0f + configlen, // length\n    0x40, // codec : mpeg4_audio\n    0x15, // stream_type\n    0x00, 0x00, 0x00, // buffer_size\n    0x00, 0x00, 0x00, 0x00, // maxBitrate\n    0x00, 0x00, 0x00, 0x00, // avgBitrate\n\n    0x05 // descriptor_type\n    ].concat([configlen]).concat(config).concat([0x06, 0x01, 0x02]));\n    buffer.write(Fmp4.size(8 + content.byteLength), Fmp4.type('esds'), content);\n    return buffer.buffer;\n  }\n  static avc1(data) {\n    let buffer = new _xgplayerUtils.Buffer();\n    let size = 40; // 8(avc1)+8(avcc)+8(btrt)+16(pasp)\n    // let sps = data.sps\n    // let pps = data.pps\n    let width = data.width;\n    let height = data.height;\n    let hSpacing = data.parRatio.height;\n    let vSpacing = data.parRatio.width;\n    // let avccBuffer = new Buffer()\n    // avccBuffer.write(new Uint8Array([\n    //   0x01, // version\n    //   sps[1], // profile\n    //   sps[2], // profile compatible\n    //   sps[3], // level\n    //   0xfc | 3,\n    //   0xE0 | 1 // 目前只处理一个sps\n    // ].concat([sps.length >>> 8 & 0xff, sps.length & 0xff])))\n    // avccBuffer.write(sps, new Uint8Array([1, pps.length >>> 8 & 0xff, pps.length & 0xff]), pps)\n\n    let avcc = data.avcc;\n    let avc1 = new Uint8Array([0x00, 0x00, 0x00, // reserved\n    0x00, 0x00, 0x00, // reserved\n    0x00, 0x01, // data_reference_index\n    0x00, 0x00, // pre_defined\n    0x00, 0x00, // reserved\n    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, // pre_defined\n    width >> 8 & 0xff, width & 0xff, // width\n    height >> 8 & 0xff, height & 0xff, // height\n    0x00, 0x48, 0x00, 0x00, // horizresolution\n    0x00, 0x48, 0x00, 0x00, // vertresolution\n    0x00, 0x00, 0x00, 0x00, // reserved\n    0x00, 0x01, // frame_count\n    0x12, 0x64, 0x61, 0x69, 0x6C, // dailymotion/hls.js\n    0x79, 0x6D, 0x6F, 0x74, 0x69, 0x6F, 0x6E, 0x2F, 0x68, 0x6C, 0x73, 0x2E, 0x6A, 0x73, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, // compressorname\n    0x00, 0x18, // depth = 24\n    0x11, 0x11]); // pre_defined = -1\n    let btrt = new Uint8Array([0x00, 0x1c, 0x9c, 0x80, // bufferSizeDB\n    0x00, 0x2d, 0xc6, 0xc0, // maxBitrate\n    0x00, 0x2d, 0xc6, 0xc0 // avgBitrate\n    ]);\n    let pasp = new Uint8Array([hSpacing >> 24, // hSpacing\n    hSpacing >> 16 & 0xff, hSpacing >> 8 & 0xff, hSpacing & 0xff, vSpacing >> 24, // vSpacing\n    vSpacing >> 16 & 0xff, vSpacing >> 8 & 0xff, vSpacing & 0xff]);\n\n    buffer.write(Fmp4.size(size + avc1.byteLength + avcc.byteLength + btrt.byteLength), Fmp4.type('avc1'), avc1, Fmp4.size(8 + avcc.byteLength), Fmp4.type('avcC'), avcc, Fmp4.size(20), Fmp4.type('btrt'), btrt, Fmp4.size(16), Fmp4.type('pasp'), pasp);\n    return buffer.buffer;\n  }\n  static stts() {\n    let content = new Uint8Array([0x00, // version\n    0x00, 0x00, 0x00, // flags\n    0x00, 0x00, 0x00, 0x00 // entry_count\n    ]);\n    return Fmp4.initBox(16, 'stts', content);\n  }\n  static stsc() {\n    let content = new Uint8Array([0x00, // version\n    0x00, 0x00, 0x00, // flags\n    0x00, 0x00, 0x00, 0x00 // entry_count\n    ]);\n    return Fmp4.initBox(16, 'stsc', content);\n  }\n  static stco() {\n    let content = new Uint8Array([0x00, // version\n    0x00, 0x00, 0x00, // flags\n    0x00, 0x00, 0x00, 0x00 // entry_count\n    ]);\n    return Fmp4.initBox(16, 'stco', content);\n  }\n  static stsz() {\n    let content = new Uint8Array([0x00, // version\n    0x00, 0x00, 0x00, // flags\n    0x00, 0x00, 0x00, 0x00, // sample_size\n    0x00, 0x00, 0x00, 0x00 // sample_count\n    ]);\n    return Fmp4.initBox(20, 'stsz', content);\n  }\n  static mvex(duration, timescale = 1000, trackID) {\n    let buffer = new _xgplayerUtils.Buffer();\n    let mehd = _xgplayerUtils.Buffer.writeUint32(duration);\n    buffer.write(Fmp4.size(56), Fmp4.type('mvex'), Fmp4.size(16), Fmp4.type('mehd'), Fmp4.extension(0, 0), mehd, Fmp4.trex(trackID));\n    return buffer.buffer;\n  }\n  static trex(id) {\n    let content = new Uint8Array([0x00, // version 0\n    0x00, 0x00, 0x00, // flags\n    id >> 24, id >> 16 & 0xff, id >> 8 & 0xff, id & 0xff, // track_ID\n    0x00, 0x00, 0x00, 0x01, // default_sample_description_index\n    0x00, 0x00, 0x00, 0x00, // default_sample_duration\n    0x00, 0x00, 0x00, 0x00, // default_sample_size\n    0x00, 0x01, 0x00, 0x01 // default_sample_flags\n    ]);\n    return Fmp4.initBox(8 + content.byteLength, 'trex', content);\n  }\n  static moof(data) {\n    let size = 8;\n    let mfhd = Fmp4.mfhd();\n    let traf = Fmp4.traf(data);\n    [mfhd, traf].forEach(item => {\n      size += item.byteLength;\n    });\n    return Fmp4.initBox(size, 'moof', mfhd, traf);\n  }\n  static mfhd() {\n    let content = _xgplayerUtils.Buffer.writeUint32(Fmp4.sequence);\n    Fmp4.sequence += 1;\n    return Fmp4.initBox(16, 'mfhd', Fmp4.extension(0, 0), content);\n  }\n  static traf(data) {\n    let size = 8;\n    let tfhd = Fmp4.tfhd(data.id);\n    let tfdt = Fmp4.tfdt(data.time);\n    let sdtp = Fmp4.sdtp(data);\n    let trun = Fmp4.trun(data, sdtp.byteLength);\n\n    [tfhd, tfdt, trun, sdtp].forEach(item => {\n      size += item.byteLength;\n    });\n    return Fmp4.initBox(size, 'traf', tfhd, tfdt, trun, sdtp);\n  }\n  static tfhd(id) {\n    let content = _xgplayerUtils.Buffer.writeUint32(id);\n    return Fmp4.initBox(16, 'tfhd', Fmp4.extension(0, 0), content);\n  }\n  static tfdt(time) {\n    // let upper = Math.floor(time / (UINT32_MAX + 1)),\n    //     lower = Math.floor(time % (UINT32_MAX + 1));\n    return Fmp4.initBox(16, 'tfdt', Fmp4.extension(0, 0), _xgplayerUtils.Buffer.writeUint32(time));\n  }\n  static trun(data, sdtpLength) {\n    // let id = data.id;\n    // let ceil = id === 1 ? 16 : 12;\n    let buffer = new _xgplayerUtils.Buffer();\n    let sampleCount = _xgplayerUtils.Buffer.writeUint32(data.samples.length);\n    // mdat-header 8\n    // moof-header 8\n    // mfhd 16\n    // traf-header 8\n    // thhd 16\n    // tfdt 20\n    // trun-header 12\n    // sampleCount 4\n    // data-offset 4\n    // samples.length\n    let offset = _xgplayerUtils.Buffer.writeUint32(8 + 8 + 16 + 8 + 16 + 16 + 12 + 4 + 4 + 16 * data.samples.length + sdtpLength);\n    buffer.write(Fmp4.size(20 + 16 * data.samples.length), Fmp4.type('trun'), new Uint8Array([0x00, 0x00, 0x0F, 0x01]), sampleCount, offset);\n\n    // let size = buffer.buffer.byteLength\n    // let writeOffset = 0\n    // data.samples.forEach(() => {\n    //   size += 16\n    // })\n    //\n    // let trunBox = new Uint8Array(size)\n\n    // trunBox.set(buffer.buffer, 0)\n\n    data.samples.forEach(item => {\n      const flags = item.flags;\n      // console.log(item.type, item.dts, item.duration)\n\n      buffer.write(new Uint8Array([item.duration >>> 24 & 0xFF, // sample_duration\n      item.duration >>> 16 & 0xFF, item.duration >>> 8 & 0xFF, item.duration & 0xFF, item.size >>> 24 & 0xFF, // sample_size\n      item.size >>> 16 & 0xFF, item.size >>> 8 & 0xFF, item.size & 0xFF, flags.isLeading << 2 | flags.dependsOn, // sample_flags\n      flags.isDependedOn << 6 | flags.hasRedundancy << 4 | flags.isNonSync, 0x00, 0x00, // sample_degradation_priority\n      item.cts >>> 24 & 0xFF, // sample_composition_time_offset\n      item.cts >>> 16 & 0xFF, item.cts >>> 8 & 0xFF, item.cts & 0xFF]));\n      // writeOffset += 16\n      // buffer.write(Buffer.writeUint32(0));\n    });\n    return buffer.buffer;\n  }\n  static sdtp(data) {\n    let buffer = new _xgplayerUtils.Buffer();\n    buffer.write(Fmp4.size(12 + data.samples.length), Fmp4.type('sdtp'), Fmp4.extension(0, 0));\n    data.samples.forEach(item => {\n      const flags = item.flags;\n      const num = flags.isLeading << 6 | // is_leading: 2 (bit)\n      flags.dependsOn << 4 | // sample_depends_on\n      flags.isDependedOn << 2 | // sample_is_depended_on\n      flags.hasRedundancy; // sample_has_redundancy\n\n      buffer.write(new Uint8Array([num]));\n    });\n    return buffer.buffer;\n  }\n  static mdat(data) {\n    let buffer = new _xgplayerUtils.Buffer();\n    let size = 8;\n    data.samples.forEach(item => {\n      size += item.size;\n    });\n    buffer.write(Fmp4.size(size), Fmp4.type('mdat'));\n    let mdatBox = new Uint8Array(size);\n    let offset = 0;\n    mdatBox.set(buffer.buffer, offset);\n    offset += 8;\n    data.samples.forEach(item => {\n      item.buffer.forEach(unit => {\n        mdatBox.set(unit, offset);\n        offset += unit.byteLength;\n        // buffer.write(unit.data);\n      });\n    });\n    return mdatBox;\n  }\n}\nFmp4.type = name => {\n  return new Uint8Array([name.charCodeAt(0), name.charCodeAt(1), name.charCodeAt(2), name.charCodeAt(3)]);\n};\nFmp4.sequence = 1;\n\nexports.default = Fmp4;\n\n//# sourceURL=webpack://xgplayer-flv/../xgplayer-remux/src/mp4/fmp4.js?")},"../xgplayer-remux/src/mp4/index.js":
/*!******************************************!*\
      !*** ../xgplayer-remux/src/mp4/index.js ***!
      \******************************************/
/*! no static exports found */function(module,exports,__webpack_require__){eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _xgplayerUtils = __webpack_require__(/*! xgplayer-utils */ \"../xgplayer-utils/index.js\");\n\nvar _fmp = __webpack_require__(/*! ./fmp4 */ \"../xgplayer-remux/src/mp4/fmp4.js\");\n\nvar _fmp2 = _interopRequireDefault(_fmp);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst REMUX_EVENTS = _xgplayerUtils.EVENTS.REMUX_EVENTS;\n\nclass Mp4Remuxer {\n  constructor() {\n    this._dtsBase = 0;\n    this._isDtsBaseInited = false;\n\n    this.videoAllDuration = 0;\n    this.audioAllDuration = 0;\n  }\n\n  init() {\n    this.on(REMUX_EVENTS.REMUX_MEDIA, this.remux.bind(this));\n    this.on(REMUX_EVENTS.REMUX_METADATA, this.onMetaDataReady.bind(this));\n  }\n\n  destroy() {\n    this._dtsBase = -1;\n    this._dtsBaseInited = false;\n  }\n\n  reset() {\n    this._dtsBase = 0;\n    this._isDtsBaseInited = false;\n  }\n\n  remux() {\n    const { audioTrack, videoTrack } = this._context.getInstance('TRACKS');\n    !this._isDtsBaseInited && this.calcDtsBase(audioTrack, videoTrack);\n\n    this._remuxVideo(videoTrack);\n    this._remuxAudio(audioTrack);\n  }\n\n  seek() {}\n\n  onMetaDataReady(type) {\n    let initSegment = new _xgplayerUtils.Buffer();\n    let ftyp = _fmp2.default.ftyp();\n    let moov;\n    let track;\n\n    if (type === 'audio') {\n      const { audioTrack } = this._context.getInstance('TRACKS');\n      track = audioTrack;\n    } else {\n      const { videoTrack } = this._context.getInstance('TRACKS');\n      track = videoTrack;\n    }\n\n    moov = _fmp2.default.moov({ type, meta: track.meta });\n\n    initSegment.write(ftyp, moov);\n\n    let presourcebuffer = this._context.getInstance('PRE_SOURCE_BUFFER');\n    let source = presourcebuffer.getSource(type);\n    if (!source) {\n      source = presourcebuffer.createSource(type);\n    }\n\n    source.mimetype = track.meta.codec;\n    source.init = initSegment;\n    this.emit(REMUX_EVENTS.INIT_SEGMENT, type);\n  }\n\n  calcDtsBase(audioTrack, videoTrack) {\n    if (!audioTrack.samples.length && !videoTrack.samples.length) {\n      return;\n    }\n\n    let audioBase = Infinity;\n    let videoBase = Infinity;\n\n    if (audioTrack.samples && audioTrack.samples.length) {\n      audioBase = audioTrack.samples[0].dts;\n    }\n    if (videoTrack.samples && videoTrack.samples.length) {\n      videoBase = videoTrack.samples[0].dts;\n    }\n\n    this._dtsBase = Math.min(audioBase, videoBase);\n    this._isDtsBaseInited = true;\n  }\n\n  _remuxVideo(videoTrack) {\n    const track = videoTrack;\n\n    if (!videoTrack.samples || !videoTrack.samples.length) {\n      return;\n    }\n\n    let { samples } = track;\n    let firstDts = -1;\n\n    const mp4Samples = [];\n    const mdatBox = {\n      samples: []\n    };\n\n    while (samples.length) {\n      const avcSample = samples.shift();\n      const { isKeyframe } = avcSample;\n      let dts = avcSample.dts - this._dtsBase;\n\n      if (firstDts === -1) {\n        firstDts = dts;\n      }\n\n      let cts;\n      let pts;\n      if (avcSample.pts) {\n        pts = avcSample.pts - this._dtsBase;\n        cts = pts - dts;\n      }\n      if (avcSample.cts) {\n        pts = avcSample.cts + dts;\n        cts = avcSample.cts;\n      }\n\n      let mdatSample = {\n        buffer: [],\n        size: 0\n      };\n      mdatBox.samples.push(mdatSample);\n      mdatSample.buffer.push(avcSample.data);\n      mdatSample.size += avcSample.data.byteLength;\n\n      let sampleDuration = 0;\n      if (samples.length >= 1) {\n        const nextDts = samples[0].dts - this._dtsBase;\n        sampleDuration = nextDts - dts;\n      } else {\n        if (mp4Samples.length >= 1) {\n          // lastest sample, use second last duration\n          sampleDuration = mp4Samples[mp4Samples.length - 1].duration;\n        } else {\n          // the only one sample, use reference duration\n          sampleDuration = this.videoMeta.refSampleDuration;\n        }\n      }\n      this.videoAllDuration += sampleDuration;\n      mp4Samples.push({\n        dts,\n        cts,\n        pts,\n        data: avcSample.data,\n        size: avcSample.data.byteLength,\n        isKeyframe,\n        duration: sampleDuration,\n        flags: {\n          isLeading: 0,\n          dependsOn: isKeyframe ? 2 : 1,\n          isDependedOn: isKeyframe ? 1 : 0,\n          hasRedundancy: 0,\n          isNonSync: isKeyframe ? 0 : 1\n        },\n        originDts: dts,\n        type: 'video'\n      });\n    }\n\n    let moofMdat = new _xgplayerUtils.Buffer();\n\n    const moof = _fmp2.default.moof({\n      id: track.meta.id,\n      time: firstDts,\n      samples: mp4Samples\n    });\n    const mdat = _fmp2.default.mdat(mdatBox);\n    moofMdat.write(moof, mdat);\n\n    track.samples = [];\n    track.length = 0;\n\n    let presourcebuffer = this._context.getInstance('PRE_SOURCE_BUFFER');\n    let source = presourcebuffer.getSource('video');\n    if (!source) {\n      source = presourcebuffer.createSource('video');\n    }\n\n    source.data.push(moofMdat);\n\n    this.emit(REMUX_EVENTS.MEDIA_SEGMENT, 'video');\n  }\n\n  _remuxAudio(track) {\n    const { samples } = track;\n    let firstDts = -1;\n    let mp4Samples = [];\n\n    const mdatBox = {\n      samples: []\n    };\n    if (!samples || !samples.length) {\n      return;\n    }\n    let isFirstDtsInited = false;\n    while (samples.length) {\n      let sample = samples.shift();\n      const { data } = sample;\n      let dts = sample.dts - this._dtsBase;\n      const originDts = dts;\n      if (!isFirstDtsInited) {\n        firstDts = dts;\n        isFirstDtsInited = true;\n      }\n\n      let sampleDuration = 0;\n\n      if (this.audioMeta.refSampleDurationFixed) {\n        sampleDuration = this.audioMeta.refSampleDurationFixed;\n      } else if (samples.length >= 1) {\n        const nextDts = samples[0].dts - this._dtsBase;\n        sampleDuration = nextDts - dts;\n      } else {\n        if (mp4Samples.length >= 1) {\n          // use second last sample duration\n          sampleDuration = mp4Samples[mp4Samples.length - 1].duration;\n        } else {\n          // the only one sample, use reference sample duration\n          sampleDuration = this.audioMeta.refSampleDuration;\n        }\n      }\n\n      // console.log('remux audio ', dts)\n      this.audioAllDuration += sampleDuration;\n      const mp4Sample = {\n        dts,\n        pts: dts,\n        cts: 0,\n        size: data.byteLength,\n        duration: sample.duration ? sample.duration : sampleDuration,\n        flags: {\n          isLeading: 0,\n          dependsOn: 2,\n          isDependedOn: 1,\n          hasRedundancy: 0,\n          isNonSync: 0\n        },\n        isKeyframe: true,\n        originDts,\n        type: 'audio'\n      };\n\n      let mdatSample = {\n        buffer: [],\n        size: 0\n      };\n      mdatSample.buffer.push(data);\n      mdatSample.size += data.byteLength;\n\n      mdatBox.samples.push(mdatSample);\n\n      mp4Samples.push(mp4Sample);\n    }\n\n    const moofMdat = new _xgplayerUtils.Buffer();\n    const moof = _fmp2.default.moof({\n      id: track.meta.id,\n      time: firstDts,\n      samples: mp4Samples\n    });\n    const mdat = _fmp2.default.mdat(mdatBox);\n    moofMdat.write(moof, mdat);\n\n    track.samples = [];\n    track.length = 0;\n\n    let presourcebuffer = this._context.getInstance('PRE_SOURCE_BUFFER');\n    let source = presourcebuffer.getSource('audio');\n    if (!source) {\n      source = presourcebuffer.createSource('audio');\n    }\n    source.data.push(moofMdat);\n    this.emit(REMUX_EVENTS.MEDIA_SEGMENT, 'audio', moofMdat);\n  }\n\n  initSilentAudio(dts, duration) {\n    const unit = Mp4Remuxer.getSilentFrame(this.audioMeta.channelCount);\n    return {\n      dts,\n      pts: dts,\n      cts: 0,\n      duration,\n      unit,\n      size: unit.byteLength,\n      originDts: dts,\n      type: 'video'\n    };\n  }\n\n  get videoMeta() {\n    return this._context.getInstance('TRACKS').videoTrack.meta;\n  }\n  get audioMeta() {\n    return this._context.getInstance('TRACKS').audioTrack.meta;\n  }\n\n  static getSilentFrame(channelCount) {\n    if (channelCount === 1) {\n      return new Uint8Array([0x00, 0xc8, 0x00, 0x80, 0x23, 0x80]);\n    } else if (channelCount === 2) {\n      return new Uint8Array([0x21, 0x00, 0x49, 0x90, 0x02, 0x19, 0x00, 0x23, 0x80]);\n    } else if (channelCount === 3) {\n      return new Uint8Array([0x00, 0xc8, 0x00, 0x80, 0x20, 0x84, 0x01, 0x26, 0x40, 0x08, 0x64, 0x00, 0x8e]);\n    } else if (channelCount === 4) {\n      return new Uint8Array([0x00, 0xc8, 0x00, 0x80, 0x20, 0x84, 0x01, 0x26, 0x40, 0x08, 0x64, 0x00, 0x80, 0x2c, 0x80, 0x08, 0x02, 0x38]);\n    } else if (channelCount === 5) {\n      return new Uint8Array([0x00, 0xc8, 0x00, 0x80, 0x20, 0x84, 0x01, 0x26, 0x40, 0x08, 0x64, 0x00, 0x82, 0x30, 0x04, 0x99, 0x00, 0x21, 0x90, 0x02, 0x38]);\n    } else if (channelCount === 6) {\n      return new Uint8Array([0x00, 0xc8, 0x00, 0x80, 0x20, 0x84, 0x01, 0x26, 0x40, 0x08, 0x64, 0x00, 0x82, 0x30, 0x04, 0x99, 0x00, 0x21, 0x90, 0x02, 0x00, 0xb2, 0x00, 0x20, 0x08, 0xe0]);\n    }\n    return null;\n  }\n}\nexports.default = Mp4Remuxer;\n\n//# sourceURL=webpack://xgplayer-flv/../xgplayer-remux/src/mp4/index.js?")},"../xgplayer-utils/index.js":
/*!**********************************!*\
      !*** ../xgplayer-utils/index.js ***!
      \**********************************/
/*! no static exports found */function(module,exports,__webpack_require__){eval('\n\nmodule.exports = {\n  Context: __webpack_require__(/*! ./src/context */ "../xgplayer-utils/src/context.js").default,\n\n  // Modules from constants\n  EVENTS: __webpack_require__(/*! ./src/constants/events */ "../xgplayer-utils/src/constants/events.js").default,\n  WORKER_COMMANDS: __webpack_require__(/*! ./src/constants/worker-commands */ "../xgplayer-utils/src/constants/worker-commands.js").default,\n\n  // Modules from env\n  sniffer: __webpack_require__(/*! ./src/env/sniffer */ "../xgplayer-utils/src/env/sniffer.js").default,\n  isLe: __webpack_require__(/*! ./src/env/isle */ "../xgplayer-utils/src/env/isle.js").default,\n  UTF8: __webpack_require__(/*! ./src/env/utf8 */ "../xgplayer-utils/src/env/utf8.js").default,\n\n  // Models\n  MediaInfo: __webpack_require__(/*! ./src/models/media-info */ "../xgplayer-utils/src/models/media-info.js").default,\n  MediaSample: __webpack_require__(/*! ./src/models/media-sample */ "../xgplayer-utils/src/models/media-sample.js").default,\n  MediaSegment: __webpack_require__(/*! ./src/models/media-segment */ "../xgplayer-utils/src/models/media-segment.js").default,\n  MediaSegmentList: __webpack_require__(/*! ./src/models/media-segment-list */ "../xgplayer-utils/src/models/media-segment-list.js").default,\n  AudioTrackMeta: __webpack_require__(/*! ./src/models/track-meta */ "../xgplayer-utils/src/models/track-meta.js").AudioTrackMeta,\n  VideoTrackMeta: __webpack_require__(/*! ./src/models/track-meta */ "../xgplayer-utils/src/models/track-meta.js").VideoTrackMeta,\n  AudioTrackSample: __webpack_require__(/*! ./src/models/track-sample */ "../xgplayer-utils/src/models/track-sample.js").AudioTrackSample,\n  VideoTrackSample: __webpack_require__(/*! ./src/models/track-sample */ "../xgplayer-utils/src/models/track-sample.js").VideoTrackSample,\n\n  // Modules from mse\n  Mse: __webpack_require__(/*! ./src/mse/index */ "../xgplayer-utils/src/mse/index.js").default,\n\n  // Modules from write\n  Stream: __webpack_require__(/*! ./src/write/stream */ "../xgplayer-utils/src/write/stream.js").default,\n  Buffer: __webpack_require__(/*! ./src/write/buffer */ "../xgplayer-utils/src/write/buffer.js").default,\n\n  MobileVideo: __webpack_require__(/*! ./src/mobile/mobile-video */ "../xgplayer-utils/src/mobile/mobile-video.js")\n};\n\n//# sourceURL=webpack://xgplayer-flv/../xgplayer-utils/index.js?')},"../xgplayer-utils/node_modules/concat-typed-array/lib/concat.js":
/*!***********************************************************************!*\
      !*** ../xgplayer-utils/node_modules/concat-typed-array/lib/concat.js ***!
      \***********************************************************************/
/*! no static exports found */function(module,exports,__webpack_require__){eval('\n\nObject.defineProperty(exports, "__esModule", {\n  value: true\n});\n\nexports.default = function (ResultConstructor) {\n  var totalLength = 0;\n\n  for (var _len = arguments.length, arrays = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    arrays[_key - 1] = arguments[_key];\n  }\n\n  var _iteratorNormalCompletion = true;\n  var _didIteratorError = false;\n  var _iteratorError = undefined;\n\n  try {\n    for (var _iterator = arrays[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n      var arr = _step.value;\n\n      totalLength += arr.length;\n    }\n  } catch (err) {\n    _didIteratorError = true;\n    _iteratorError = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion && _iterator.return) {\n        _iterator.return();\n      }\n    } finally {\n      if (_didIteratorError) {\n        throw _iteratorError;\n      }\n    }\n  }\n\n  var result = new ResultConstructor(totalLength);\n  var offset = 0;\n  var _iteratorNormalCompletion2 = true;\n  var _didIteratorError2 = false;\n  var _iteratorError2 = undefined;\n\n  try {\n    for (var _iterator2 = arrays[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n      var _arr = _step2.value;\n\n      result.set(_arr, offset);\n      offset += _arr.length;\n    }\n  } catch (err) {\n    _didIteratorError2 = true;\n    _iteratorError2 = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion2 && _iterator2.return) {\n        _iterator2.return();\n      }\n    } finally {\n      if (_didIteratorError2) {\n        throw _iteratorError2;\n      }\n    }\n  }\n\n  return result;\n};\n\n//# sourceURL=webpack://xgplayer-flv/../xgplayer-utils/node_modules/concat-typed-array/lib/concat.js?')},"../xgplayer-utils/node_modules/concat-typed-array/lib/index.js":
/*!**********************************************************************!*\
      !*** ../xgplayer-utils/node_modules/concat-typed-array/lib/index.js ***!
      \**********************************************************************/
/*! no static exports found */function(module,exports,__webpack_require__){eval('\n\nvar _concat = __webpack_require__(/*! ./concat */ "../xgplayer-utils/node_modules/concat-typed-array/lib/concat.js");\n\nvar _concat2 = _interopRequireDefault(_concat);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : { default: obj };\n}\n\nmodule.exports = _concat2.default;\n\n//# sourceURL=webpack://xgplayer-flv/../xgplayer-utils/node_modules/concat-typed-array/lib/index.js?')},"../xgplayer-utils/node_modules/webworkify-webpack/index.js":
/*!******************************************************************!*\
      !*** ../xgplayer-utils/node_modules/webworkify-webpack/index.js ***!
      \******************************************************************/
/*! no static exports found */function(module,exports,__webpack_require__){eval("\n\nfunction webpackBootstrapFunc(modules) {\n  /******/ // The module cache\n  /******/var installedModules = {};\n\n  /******/ // The require function\n  /******/function __webpack_require__(moduleId) {\n\n    /******/ // Check if module is in cache\n    /******/if (installedModules[moduleId])\n      /******/return installedModules[moduleId].exports;\n\n    /******/ // Create a new module (and put it into the cache)\n    /******/var module = installedModules[moduleId] = {\n      /******/i: moduleId,\n      /******/l: false,\n      /******/exports: {}\n      /******/ };\n\n    /******/ // Execute the module function\n    /******/modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n    /******/ // Flag the module as loaded\n    /******/module.l = true;\n\n    /******/ // Return the exports of the module\n    /******/return module.exports;\n    /******/\n  }\n\n  /******/ // expose the modules object (__webpack_modules__)\n  /******/__webpack_require__.m = modules;\n\n  /******/ // expose the module cache\n  /******/__webpack_require__.c = installedModules;\n\n  /******/ // identity function for calling harmony imports with the correct context\n  /******/__webpack_require__.i = function (value) {\n    return value;\n  };\n\n  /******/ // define getter function for harmony exports\n  /******/__webpack_require__.d = function (exports, name, getter) {\n    /******/if (!__webpack_require__.o(exports, name)) {\n      /******/Object.defineProperty(exports, name, {\n        /******/configurable: false,\n        /******/enumerable: true,\n        /******/get: getter\n        /******/ });\n      /******/\n    }\n    /******/\n  };\n\n  /******/ // define __esModule on exports\n  /******/__webpack_require__.r = function (exports) {\n    /******/Object.defineProperty(exports, '__esModule', { value: true });\n    /******/\n  };\n\n  /******/ // getDefaultExport function for compatibility with non-harmony modules\n  /******/__webpack_require__.n = function (module) {\n    /******/var getter = module && module.__esModule ?\n    /******/function getDefault() {\n      return module['default'];\n    } :\n    /******/function getModuleExports() {\n      return module;\n    };\n    /******/__webpack_require__.d(getter, 'a', getter);\n    /******/return getter;\n    /******/\n  };\n\n  /******/ // Object.prototype.hasOwnProperty.call\n  /******/__webpack_require__.o = function (object, property) {\n    return Object.prototype.hasOwnProperty.call(object, property);\n  };\n\n  /******/ // __webpack_public_path__\n  /******/__webpack_require__.p = \"/\";\n\n  /******/ // on error function for async loading\n  /******/__webpack_require__.oe = function (err) {\n    console.error(err);throw err;\n  };\n\n  var f = __webpack_require__(__webpack_require__.s = ENTRY_MODULE);\n  return f.default || f; // try to call default if defined to also support babel esmodule exports\n}\n\nvar moduleNameReqExp = '[\\\\.|\\\\-|\\\\+|\\\\w|\\/|@]+';\nvar dependencyRegExp = '\\\\(\\\\s*(\\/\\\\*.*?\\\\*\\/)?\\\\s*.*?(' + moduleNameReqExp + ').*?\\\\)'; // additional chars when output.pathinfo is true\n\n// http://stackoverflow.com/a/2593661/130442\nfunction quoteRegExp(str) {\n  return (str + '').replace(/[.?*+^$[\\]\\\\(){}|-]/g, '\\\\$&');\n}\n\nfunction isNumeric(n) {\n  return !isNaN(1 * n); // 1 * n converts integers, integers as string (\"123\"), 1e3 and \"1e3\" to integers and strings to NaN\n}\n\nfunction getModuleDependencies(sources, module, queueName) {\n  var retval = {};\n  retval[queueName] = [];\n\n  var fnString = module.toString();\n  var wrapperSignature = fnString.match(/^function\\s?\\w*\\(\\w+,\\s*\\w+,\\s*(\\w+)\\)/);\n  if (!wrapperSignature) return retval;\n  var webpackRequireName = wrapperSignature[1];\n\n  // main bundle deps\n  var re = new RegExp('(\\\\\\\\n|\\\\W)' + quoteRegExp(webpackRequireName) + dependencyRegExp, 'g');\n  var match;\n  while (match = re.exec(fnString)) {\n    if (match[3] === 'dll-reference') continue;\n    retval[queueName].push(match[3]);\n  }\n\n  // dll deps\n  re = new RegExp('\\\\(' + quoteRegExp(webpackRequireName) + '\\\\(\"(dll-reference\\\\s(' + moduleNameReqExp + '))\"\\\\)\\\\)' + dependencyRegExp, 'g');\n  while (match = re.exec(fnString)) {\n    if (!sources[match[2]]) {\n      retval[queueName].push(match[1]);\n      sources[match[2]] = __webpack_require__(match[1]).m;\n    }\n    retval[match[2]] = retval[match[2]] || [];\n    retval[match[2]].push(match[4]);\n  }\n\n  // convert 1e3 back to 1000 - this can be important after uglify-js converted 1000 to 1e3\n  var keys = Object.keys(retval);\n  for (var i = 0; i < keys.length; i++) {\n    for (var j = 0; j < retval[keys[i]].length; j++) {\n      if (isNumeric(retval[keys[i]][j])) {\n        retval[keys[i]][j] = 1 * retval[keys[i]][j];\n      }\n    }\n  }\n\n  return retval;\n}\n\nfunction hasValuesInQueues(queues) {\n  var keys = Object.keys(queues);\n  return keys.reduce(function (hasValues, key) {\n    return hasValues || queues[key].length > 0;\n  }, false);\n}\n\nfunction getRequiredModules(sources, moduleId) {\n  var modulesQueue = {\n    main: [moduleId]\n  };\n  var requiredModules = {\n    main: []\n  };\n  var seenModules = {\n    main: {}\n  };\n\n  while (hasValuesInQueues(modulesQueue)) {\n    var queues = Object.keys(modulesQueue);\n    for (var i = 0; i < queues.length; i++) {\n      var queueName = queues[i];\n      var queue = modulesQueue[queueName];\n      var moduleToCheck = queue.pop();\n      seenModules[queueName] = seenModules[queueName] || {};\n      if (seenModules[queueName][moduleToCheck] || !sources[queueName][moduleToCheck]) continue;\n      seenModules[queueName][moduleToCheck] = true;\n      requiredModules[queueName] = requiredModules[queueName] || [];\n      requiredModules[queueName].push(moduleToCheck);\n      var newModules = getModuleDependencies(sources, sources[queueName][moduleToCheck], queueName);\n      var newModulesKeys = Object.keys(newModules);\n      for (var j = 0; j < newModulesKeys.length; j++) {\n        modulesQueue[newModulesKeys[j]] = modulesQueue[newModulesKeys[j]] || [];\n        modulesQueue[newModulesKeys[j]] = modulesQueue[newModulesKeys[j]].concat(newModules[newModulesKeys[j]]);\n      }\n    }\n  }\n\n  return requiredModules;\n}\n\nmodule.exports = function (moduleId, options) {\n  options = options || {};\n  var sources = {\n    main: __webpack_require__.m\n  };\n\n  var requiredModules = options.all ? { main: Object.keys(sources.main) } : getRequiredModules(sources, moduleId);\n\n  var src = '';\n\n  Object.keys(requiredModules).filter(function (m) {\n    return m !== 'main';\n  }).forEach(function (module) {\n    var entryModule = 0;\n    while (requiredModules[module][entryModule]) {\n      entryModule++;\n    }\n    requiredModules[module].push(entryModule);\n    sources[module][entryModule] = '(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })';\n    src = src + 'var ' + module + ' = (' + webpackBootstrapFunc.toString().replace('ENTRY_MODULE', JSON.stringify(entryModule)) + ')({' + requiredModules[module].map(function (id) {\n      return '' + JSON.stringify(id) + ': ' + sources[module][id].toString();\n    }).join(',') + '});\\n';\n  });\n\n  src = src + 'new ((' + webpackBootstrapFunc.toString().replace('ENTRY_MODULE', JSON.stringify(moduleId)) + ')({' + requiredModules.main.map(function (id) {\n    return '' + JSON.stringify(id) + ': ' + sources.main[id].toString();\n  }).join(',') + '}))(self);';\n\n  var blob = new window.Blob([src], { type: 'text/javascript' });\n  if (options.bare) {\n    return blob;\n  }\n\n  var URL = window.URL || window.webkitURL || window.mozURL || window.msURL;\n\n  var workerUrl = URL.createObjectURL(blob);\n  var worker = new window.Worker(workerUrl);\n  worker.objectURL = workerUrl;\n\n  return worker;\n};\n\n//# sourceURL=webpack://xgplayer-flv/../xgplayer-utils/node_modules/webworkify-webpack/index.js?")},"../xgplayer-utils/src/constants/events.js":
/*!*************************************************!*\
      !*** ../xgplayer-utils/src/constants/events.js ***!
      \*************************************************/
/*! no static exports found */function(module,exports,__webpack_require__){eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst LOADER_EVENTS = {\n  LADER_START: 'LOADER_START',\n  LOADER_DATALOADED: 'LOADER_DATALOADED',\n  LOADER_COMPLETE: 'LOADER_COMPLETE',\n  LOADER_ERROR: 'LOADER_ERROR'\n};\n\nconst DEMUX_EVENTS = {\n  DEMUX_START: 'DEMUX_START',\n  DEMUX_COMPLETE: 'DEMUX_COMPLETE',\n  DEMUX_ERROR: 'DEMUX_ERROR',\n  METADATA_PARSED: 'METADATA_PARSED',\n  VIDEO_METADATA_CHANGE: 'VIDEO_METADATA_CHANGE',\n  AUDIO_METADATA_CHANGE: 'AUDIO_METADATA_CHANGE',\n  MEDIA_INFO: 'MEDIA_INFO'\n};\n\nconst REMUX_EVENTS = {\n  REMUX_METADATA: 'REMUX_METADATA',\n  REMUX_MEDIA: 'REMUX_MEDIA',\n  MEDIA_SEGMENT: 'MEDIA_SEGMENT',\n  REMUX_ERROR: 'REMUX_ERROR',\n  INIT_SEGMENT: 'INIT_SEGMENT'\n};\n\nconst MSE_EVENTS = {\n  SOURCE_UPDATE_END: 'SOURCE_UPDATE_END'\n\n  // hls专有events\n};const HLS_EVENTS = {\n  RETRY_TIME_EXCEEDED: 'RETRY_TIME_EXCEEDED'\n};\n\nconst ALLEVENTS = Object.assign({}, LOADER_EVENTS, DEMUX_EVENTS, REMUX_EVENTS, MSE_EVENTS, HLS_EVENTS);\n\nconst FlvAllowedEvents = [];\nconst HlsAllowedEvents = [];\n\nfor (let key in ALLEVENTS) {\n  if (ALLEVENTS.hasOwnProperty(key)) {\n    FlvAllowedEvents.push(ALLEVENTS[key]);\n  }\n}\n\nfor (let key in ALLEVENTS) {\n  if (ALLEVENTS.hasOwnProperty(key)) {\n    HlsAllowedEvents.push(ALLEVENTS[key]);\n  }\n}\n\nexports.default = {\n  ALLEVENTS,\n  HLS_EVENTS,\n  REMUX_EVENTS,\n  DEMUX_EVENTS,\n  MSE_EVENTS,\n  LOADER_EVENTS,\n  FlvAllowedEvents,\n  HlsAllowedEvents\n};\n\n//# sourceURL=webpack://xgplayer-flv/../xgplayer-utils/src/constants/events.js?")},"../xgplayer-utils/src/constants/worker-commands.js":
/*!**********************************************************!*\
      !*** ../xgplayer-utils/src/constants/worker-commands.js ***!
      \**********************************************************/
/*! no static exports found */function(module,exports,__webpack_require__){eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst CONTEXT_COMOMANDS = exports.CONTEXT_COMOMANDS = {\n  ON: 'on',\n  ONCE: 'once',\n  OFF: 'off',\n  EMIT: 'emit',\n  DESTROY: 'destroy'\n};\n\n//# sourceURL=webpack://xgplayer-flv/../xgplayer-utils/src/constants/worker-commands.js?")},"../xgplayer-utils/src/context.js":
/*!****************************************!*\
      !*** ../xgplayer-utils/src/context.js ***!
      \****************************************/
/*! no static exports found */function(module,exports,__webpack_require__){eval('\n\nObject.defineProperty(exports, "__esModule", {\n  value: true\n});\n\nvar _mediaInfo = __webpack_require__(/*! ./models/media-info */ "../xgplayer-utils/src/models/media-info.js");\n\nvar _mediaInfo2 = _interopRequireDefault(_mediaInfo);\n\nvar _events = __webpack_require__(/*! events */ "../../node_modules/events/events.js");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst DIRECT_EMIT_FLAG = \'__TO__\';\n\nclass Context {\n  constructor(allowedEvents = []) {\n    this._emitter = new _events.EventEmitter();\n    this._instanceMap = {}; // 所有的解码流程实例\n    this._clsMap = {}; // 构造函数的map\n    this._inited = false;\n    this.mediaInfo = new _mediaInfo2.default();\n    this.allowedEvents = allowedEvents;\n    this._hooks = {}; // 注册在事件前/后的钩子，例如 before(\'DEMUX_COMPLETE\')\n  }\n\n  /**\n   * 从上下文中获取解码流程实例，如果没有实例，构造一个\n   * @param tag\n   * @param args\n   * @returns {*}\n   */\n  getInstance(tag) {\n    if (this._instanceMap[tag]) {\n      return this._instanceMap[tag];\n    } else {\n      // throw new Error(`${tag}实例尚未初始化`)\n      return null;\n    }\n  }\n\n  /**\n   * 初始化具体实例\n   * @param tag\n   * @param args\n   */\n  initInstance(tag, ...args) {\n    if (this._clsMap[tag]) {\n      const newInstance = new this._clsMap[tag](...args);\n      this._instanceMap[tag] = newInstance;\n      if (newInstance.init) {\n        newInstance.init(); // TODO: lifecircle\n      }\n      return newInstance;\n    } else {\n      throw new Error(`${tag}未在context中注册`);\n    }\n  }\n\n  /**\n   * 避免大量的initInstance调用，初始化所有的组件\n   * @param config\n   */\n  init(config) {\n    if (this._inited) {\n      return;\n    }\n    for (let tag in this._clsMap) {\n      // if not inited, init an instance\n      if (this._clsMap.hasOwnProperty(tag) && !this._instanceMap[tag]) {\n        this.initInstance(tag, config);\n      }\n    }\n    this._inited = true;\n  }\n\n  /**\n   * 注册一个上下文流程，提供安全的事件发送机制\n   * @param tag\n   * @param cls\n   */\n  registry(tag, cls) {\n    const emitter = this._emitter;\n    const checkMessageName = this._isMessageNameValid.bind(this);\n    const self = this;\n    const enhanced = class extends cls {\n      constructor(...args) {\n        super(...args);\n        this.listeners = {};\n        this.onceListeners = {};\n        this.TAG = tag;\n        this._context = self;\n      }\n\n      on(messageName, callback) {\n        checkMessageName(messageName);\n\n        if (this.listeners[messageName]) {\n          this.listeners[messageName].push(callback);\n        } else {\n          this.listeners[messageName] = [callback];\n        }\n\n        emitter.on(`${messageName}${DIRECT_EMIT_FLAG}${tag}`, callback); // 建立定向通信监听\n        return emitter.on(messageName, callback);\n      }\n\n      /**\n       * 在某个事件触发前执行\n       * @param messageName\n       * @param callback\n       */\n      before(messageName, callback) {\n        checkMessageName(messageName);\n        if (self._hooks[messageName]) {\n          self._hooks[messageName].push(callback);\n        } else {\n          self._hooks[messageName] = [callback];\n        }\n      }\n\n      once(messageName, callback) {\n        checkMessageName(messageName);\n\n        if (this.onceListeners[messageName]) {\n          this.onceListeners[messageName].push(callback);\n        } else {\n          this.onceListeners[messageName] = [callback];\n        }\n\n        emitter.once(`${messageName}${DIRECT_EMIT_FLAG}${tag}`, callback);\n        return emitter.once(messageName, callback);\n      }\n\n      emit(messageName, ...args) {\n        checkMessageName(messageName);\n\n        const beforeList = self._hooks[messageName];\n        if (beforeList) {\n          for (let i = 0, len = beforeList.length; i < len; i++) {\n            const callback = beforeList[i];\n            callback();\n          }\n        }\n        return emitter.emit(messageName, ...args);\n      }\n\n      /**\n       * 定向发送给某个组件单例的消息\n       * @param messageName\n       * @param args\n       */\n      emitTo(tag, messageName, ...args) {\n        checkMessageName(messageName);\n\n        return emitter.emit(`${messageName}${DIRECT_EMIT_FLAG}${tag}`, ...args);\n      }\n\n      off(messageName, callback) {\n        checkMessageName(messageName);\n        return emitter.off(messageName, callback);\n      }\n\n      removeListeners() {\n        const hasOwn = Object.prototype.hasOwnProperty.bind(this.listeners);\n\n        for (let messageName in this.listeners) {\n          if (hasOwn(messageName)) {\n            const callbacks = this.listeners[messageName] || [];\n            for (let i = 0; i < callbacks.length; i++) {\n              const callback = callbacks[i];\n              emitter.off(messageName, callback);\n              emitter.off(`${messageName}${DIRECT_EMIT_FLAG}${tag}`, callback);\n            }\n          }\n        }\n\n        for (let messageName in this.onceListeners) {\n          if (hasOwn(messageName)) {\n            const callbacks = this.onceListeners[messageName] || [];\n            for (let i = 0; i < callbacks.length; i++) {\n              const callback = callbacks[i];\n              emitter.off(messageName, callback);\n              emitter.off(`${messageName}${DIRECT_EMIT_FLAG}${tag}`, callback);\n            }\n          }\n        }\n      }\n\n      /**\n       * 在组件销毁时，默认将它注册的事件全部卸载，确保不会造成内存泄漏\n       */\n      destroy() {\n        // step1 unlisten events\n        this.removeListeners();\n\n        // step2 release from context\n        delete self._instanceMap[tag];\n        if (super.destroy) {\n          super.destroy();\n        }\n      }\n    };\n    this._clsMap[tag] = enhanced;\n\n    /**\n     * get instance immediately\n     * e.g const instance = context.registry(tag, Cls)(config)\n     * */\n    return (...args) => {\n      return this.initInstance(tag, ...args);\n    };\n  }\n\n  /**\n   * 对存在的实例进行\n   */\n  destroyInstances() {\n    Object.keys(this._instanceMap).forEach(tag => {\n      if (this._instanceMap[tag].destroy) {\n        this._instanceMap[tag].destroy();\n      }\n    });\n  }\n\n  /**\n   * 编解码流程无需关注事件的解绑\n   */\n  destroy() {\n    this._emitter = null;\n    this.allowedEvents = [];\n    this._clsMap = null;\n    this._context = null;\n    this.destroyInstances();\n  }\n\n  /**\n   * 对信道进行收拢\n   * @param messageName\n   * @private\n   */\n  _isMessageNameValid(messageName) {\n    if (!this.allowedEvents.indexOf(messageName) < 0) {\n      throw new Error(`unregistered message name: ${messageName}`);\n    }\n  }\n}\n\nexports.default = Context;\n\n//# sourceURL=webpack://xgplayer-flv/../xgplayer-utils/src/context.js?')},"../xgplayer-utils/src/env/isle.js":
/*!*****************************************!*\
      !*** ../xgplayer-utils/src/env/isle.js ***!
      \*****************************************/
/*! no static exports found */function(module,exports,__webpack_require__){eval('\n\nObject.defineProperty(exports, "__esModule", {\n  value: true\n});\nconst le = function () {\n  const buf = new ArrayBuffer(2);\n  new DataView(buf).setInt16(0, 256, true); // little-endian write\n  return new Int16Array(buf)[0] === 256; // platform-spec read, if equal then LE\n}();\n\nexports.default = le;\n\n//# sourceURL=webpack://xgplayer-flv/../xgplayer-utils/src/env/isle.js?')},"../xgplayer-utils/src/env/sniffer.js":
/*!********************************************!*\
      !*** ../xgplayer-utils/src/env/sniffer.js ***!
      \********************************************/
/*! no static exports found */function(module,exports,__webpack_require__){eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst le = function () {\n  const buf = new ArrayBuffer(2);\n  new DataView(buf).setInt16(0, 256, true); // little-endian write\n  return new Int16Array(buf)[0] === 256; // platform-spec read, if equal then LE\n}();\n\nconst sniffer = {\n  get device() {\n    let r = sniffer.os;\n    return r.isPc ? 'pc' : r.isTablet ? 'tablet' : 'mobile';\n  },\n  get browser() {\n    let ua = navigator.userAgent.toLowerCase();\n    let reg = {\n      ie: /rv:([\\d.]+)\\) like gecko/,\n      firfox: /firefox\\/([\\d.]+)/,\n      chrome: /chrome\\/([\\d.]+)/,\n      opera: /opera.([\\d.]+)/,\n      safari: /version\\/([\\d.]+).*safari/\n    };\n    return [].concat(Object.keys(reg).filter(key => reg[key].test(ua)))[0];\n  },\n  get os() {\n    let ua = navigator.userAgent;\n    let isWindowsPhone = /(?:Windows Phone)/.test(ua);\n    let isSymbian = /(?:SymbianOS)/.test(ua) || isWindowsPhone;\n    let isAndroid = /(?:Android)/.test(ua);\n    let isFireFox = /(?:Firefox)/.test(ua);\n    let isTablet = /(?:iPad|PlayBook)/.test(ua) || isAndroid && !/(?:Mobile)/.test(ua) || isFireFox && /(?:Tablet)/.test(ua);\n    let isPhone = /(?:iPhone)/.test(ua) && !isTablet;\n    let isPc = !isPhone && !isAndroid && !isSymbian;\n    return {\n      isTablet,\n      isPhone,\n      isAndroid,\n      isPc,\n      isSymbian,\n      isWindowsPhone,\n      isFireFox\n    };\n  },\n\n  get isLe() {\n    return le;\n  }\n};\n\nexports.default = sniffer;\n\n//# sourceURL=webpack://xgplayer-flv/../xgplayer-utils/src/env/sniffer.js?")},"../xgplayer-utils/src/env/utf8.js":
/*!*****************************************!*\
      !*** ../xgplayer-utils/src/env/utf8.js ***!
      \*****************************************/
/*! no static exports found */function(module,exports,__webpack_require__){eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nclass UTF8 {\n  static decode(uint8array) {\n    const out = [];\n    const input = uint8array;\n    let i = 0;\n    const length = uint8array.length;\n\n    while (i < length) {\n      if (input[i] < 0x80) {\n        out.push(String.fromCharCode(input[i]));\n        ++i;\n        continue;\n      } else if (input[i] < 0xC0) {\n        // fallthrough\n      } else if (input[i] < 0xE0) {\n        if (UTF8._checkContinuation(input, i, 1)) {\n          const ucs4 = (input[i] & 0x1F) << 6 | input[i + 1] & 0x3F;\n          if (ucs4 >= 0x80) {\n            out.push(String.fromCharCode(ucs4 & 0xFFFF));\n            i += 2;\n            continue;\n          }\n        }\n      } else if (input[i] < 0xF0) {\n        if (UTF8._checkContinuation(input, i, 2)) {\n          const ucs4 = (input[i] & 0xF) << 12 | (input[i + 1] & 0x3F) << 6 | input[i + 2] & 0x3F;\n          if (ucs4 >= 0x800 && (ucs4 & 0xF800) !== 0xD800) {\n            out.push(String.fromCharCode(ucs4 & 0xFFFF));\n            i += 3;\n            continue;\n          }\n        }\n      } else if (input[i] < 0xF8) {\n        if (UTF8._checkContinuation(input, i, 3)) {\n          let ucs4 = (input[i] & 0x7) << 18 | (input[i + 1] & 0x3F) << 12 | (input[i + 2] & 0x3F) << 6 | input[i + 3] & 0x3F;\n          if (ucs4 > 0x10000 && ucs4 < 0x110000) {\n            ucs4 -= 0x10000;\n            out.push(String.fromCharCode(ucs4 >>> 10 | 0xD800));\n            out.push(String.fromCharCode(ucs4 & 0x3FF | 0xDC00));\n            i += 4;\n            continue;\n          }\n        }\n      }\n      out.push(String.fromCharCode(0xFFFD));\n      ++i;\n    }\n\n    return out.join('');\n  }\n\n  static _checkContinuation(uint8array, start, checkLength) {\n    let array = uint8array;\n    if (start + checkLength < array.length) {\n      while (checkLength--) {\n        if ((array[++start] & 0xC0) !== 0x80) {\n          return false;\n        }\n      }\n      return true;\n    } else {\n      return false;\n    }\n  }\n}\n\nexports.default = UTF8;\n\n//# sourceURL=webpack://xgplayer-flv/../xgplayer-utils/src/env/utf8.js?")},"../xgplayer-utils/src/mobile/audio-context.js":
/*!*****************************************************!*\
      !*** ../xgplayer-utils/src/mobile/audio-context.js ***!
      \*****************************************************/
/*! no static exports found */function(module,exports,__webpack_require__){eval('\n\nObject.defineProperty(exports, "__esModule", {\n  value: true\n});\nclass AudioCtx {\n  constructor(config) {\n    this.config = Object.assign({}, config);\n    let AudioContext = window.AudioContext || window.webkitAudioContext;\n    this.context = new AudioContext();\n    this.gainNode = this.context.createGain();\n    this.gainNode.connect(this.context.destination);\n    this.meta = undefined;\n    this.samples = [];\n    this.preloadTime = this.config.preloadTime || 3;\n    this.duration = 0;\n\n    this._currentBuffer = undefined;\n    this._nextBuffer = undefined;\n    this._lastpts = undefined;\n    this._preDecode = [];\n    this._currentTime = 0;\n    this._decoding = false;\n    // 记录外部传输的状态\n    this._played = false;\n  }\n\n  get currentTime() {\n    return this._currentTime;\n  }\n\n  decodeAudio(audioTrack) {\n    let { samples } = audioTrack;\n    let data = samples;\n    audioTrack.samples = [];\n    this.setAudioData(data);\n  }\n  setAudioData(data) {\n    for (let i = 0; i < data.length; i++) {\n      data[i].pts = data[i].pts === undefined ? data[i].dts : data[i].pts;\n      this._preDecode.push(data[i]);\n    }\n    if (this._preDecode.length > 0) {\n      if (this._lastpts === undefined) {\n        this._lastpts = this._preDecode[0].pts;\n      }\n      if ((this._preDecode[this._preDecode.length - 1].pts - this._lastpts) / 1000 > this.preloadTime) {\n        this.decodeAAC();\n      }\n    }\n  }\n\n  decodeAAC() {\n    if (this._decoding) {\n      return;\n    }\n    this._decoding = true;\n    let data = this._preDecode;\n    let samples = [];\n    let _this = this;\n    let sample = data.shift();\n    while (sample) {\n      let sampleData = AudioCtx.getAACData(this.meta, sample);\n      samples.push(sampleData);\n      this._lastpts = sample.pts;\n      sample = data.shift();\n    }\n    let buffer = AudioCtx.combileData(samples);\n    try {\n      this.context.decodeAudioData(buffer.buffer, function (buffer) {\n        let audioSource = _this.context.createBufferSource();\n        audioSource.buffer = buffer;\n        audioSource.onended = _this.onSourceEnded.bind(_this);\n        _this.samples.push({\n          time: _this.duration,\n          duration: buffer.duration,\n          data: audioSource\n        });\n\n        _this.duration += buffer.duration;\n\n        if (!_this._currentBuffer) {\n          _this._currentBuffer = _this.getTimeBuffer(_this.currentTime);\n\n          if (_this._played) {\n            _this.play();\n          }\n        }\n\n        if (!_this._nextBuffer && _this._currentBuffer) {\n          _this._nextBuffer = _this.getTimeBuffer(_this.currentTime + _this._currentBuffer.duration);\n        }\n        _this._decoding = false;\n\n        if ((_this._preDecode.length > 0 && _this._preDecode[_this._preDecode.length - 1].pts - _this._lastpts) / 1000 >= _this.preloadTime) {\n          _this.decodeAAC();\n        }\n      });\n    } catch (err) {\n      console.error(err);\n    }\n  }\n\n  onSourceEnded() {\n    if (!this._nextBuffer || !this._played) {\n      return;\n    }\n    let audioSource = this._nextBuffer.data;\n    audioSource.start();\n    audioSource.connect(this.gainNode);\n    this._currentBuffer = this._nextBuffer;\n    this._currentTime = this._currentBuffer.time;\n    this._nextBuffer = this.getTimeBuffer(this.currentTime);\n    if (this._currentBuffer) {\n      this._nextBuffer = this.getTimeBuffer(this.currentTime + this._currentBuffer.duration);\n    }\n  }\n\n  play() {\n    this._played = true;\n    if (!this._currentBuffer) {\n      return;\n    }\n    let audioSource = this._currentBuffer.data;\n    audioSource.connect(this.gainNode);\n    audioSource.start();\n  }\n\n  getTimeBuffer(time) {\n    let ret;\n    for (let i = 0; i < this.samples.length; i++) {\n      let sample = this.samples[i];\n      if (sample.time <= time && sample.time + sample.duration > time) {\n        ret = sample;\n        break;\n      }\n    }\n    return ret;\n  }\n\n  setAudioMetaData(meta) {\n    this.meta = meta;\n  }\n\n  static getAACData(meta, sample) {\n    let buffer = new Uint8Array(sample.data.byteLength + 7);\n    let adts = AudioCtx.getAdts(meta, sample.data);\n    buffer.set(adts);\n    buffer.set(sample.data, 7);\n    return buffer;\n  }\n\n  static combileData(samples) {\n    // get length\n    let length = 0;\n    for (let i = 0, k = samples.length; i < k; i++) {\n      length += samples[i].byteLength;\n    }\n\n    let ret = new Uint8Array(length);\n    let offset = 0;\n    // combile data;\n    for (let i = 0, k = samples.length; i < k; i++) {\n      ret.set(samples[i], offset);\n      offset += samples[i].byteLength;\n    }\n    return ret;\n  }\n\n  static getAdts(meta, data) {\n    let adts = new Uint8Array(7);\n\n    // 设置同步位 0xfff 12bit\n    adts[0] = 0xff;\n    adts[1] = 0xf0;\n\n    // Object data (没什么人用MPEG-2了，HLS和FLV也全是MPEG-4，这里直接0)  1bit\n    // Level always 00 2bit\n    // CRC always 1 1bit\n    adts[1] = adts[1] | 0x01;\n\n    // profile 2bit\n    adts[2] = 0xc0 & meta.objectType - 1 << 6;\n\n    //sampleFrequencyIndex\n    adts[2] = adts[2] | 0x3c & meta.sampleRateIndex << 2;\n\n    //private bit 0 1bit\n    // chanel configuration 3bit\n    adts[2] = adts[2] | 0x01 & meta.channelCount >> 2;\n    adts[3] = 0xc0 & meta.channelCount << 6;\n\n    // original_copy: 0 1bit\n    // home: 0 1bit\n\n    // adts_variable_header()\n    // copyrighted_id_bit 0 1bit\n    // copyrighted_id_start 0 1bit\n\n    // aac_frame_length 13bit;\n    let aacframelength = data.byteLength + 7;\n\n    adts[3] = adts[3] | 0x03 & aacframelength >> 11;\n    adts[4] = 0xff & aacframelength >> 3;\n    adts[5] = 0xe0 & aacframelength << 5;\n\n    // adts_buffer_fullness 0x7ff 11bit\n    adts[5] = adts[5] | 0x1f;\n    adts[6] = 0xfc;\n\n    // number_of_raw_data_blocks_in_frame 0 2bit;\n    return adts;\n  }\n}\n\nexports.default = AudioCtx;\n\n//# sourceURL=webpack://xgplayer-flv/../xgplayer-utils/src/mobile/audio-context.js?')},"../xgplayer-utils/src/mobile/mobile-video.js":
/*!****************************************************!*\
      !*** ../xgplayer-utils/src/mobile/mobile-video.js ***!
      \****************************************************/
/*! no static exports found */function(module,exports,__webpack_require__){eval('\n\nvar _videoContext = __webpack_require__(/*! ./video-context */ "../xgplayer-utils/src/mobile/video-context.js");\n\nvar _videoContext2 = _interopRequireDefault(_videoContext);\n\nvar _audioContext = __webpack_require__(/*! ./audio-context */ "../xgplayer-utils/src/mobile/audio-context.js");\n\nvar _audioContext2 = _interopRequireDefault(_audioContext);\n\nvar _ticker = __webpack_require__(/*! ./ticker */ "../xgplayer-utils/src/mobile/ticker.js");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * 音画同步调和器\n */\nclass AVReconciler {\n  constructor(props) {\n    this.aCtx = props.aCtx;\n    this.vCtx = props.vCtx;\n\n    this.timeoutId = null;\n  }\n\n  doReconcile() {\n    const vCurTime = this.vCtx.currentTime || 0;\n    const aCurTime = (this.aCtx.currentTime || 0) * 1000;\n\n    const gap = vCurTime - aCurTime;\n    if (this.timeoutId) {\n      return;\n    }\n    if (gap > 2000) {// audio delayed for more than 100ms\n      // this.vCtx.pause()\n      // this.timeoutId = setTimeout(() => {\n      //   this.vCtx.play()\n      //   this.timeoutId = null\n      // }, gap)\n    } else if (gap < -200) {\n      this.vCtx.currentTime = this.vCtx.currentTime + Math.abs(gap);\n    }\n  }\n\n  destroy() {\n    this.aCtx = null;\n    this.vCtx = null;\n  }\n}\n\n// eslint-disable-next-line no-undef\nclass MobileVideo extends HTMLElement {\n  constructor(config) {\n    super();\n    let _this = this;\n    this.vCtx = new _videoContext2.default();\n    this.aCtx = new _audioContext2.default(config);\n    this.ticker = new ((0, _ticker.getTicker)())();\n    this.historyTime = 0;\n    this.reconciler = new AVReconciler({\n      vCtx: this.vCtx,\n      aCtx: this.aCtx\n    });\n\n    this.init();\n  }\n\n  init() {\n    this.vCtx.oncanplay = () => {\n      this.appendChild(this.vCtx.canvas);\n      // eslint-disable-next-line no-undef\n      this.dispatchEvent(new Event(\'canplay\'));\n    };\n\n    this.ticker.start(() => {\n      // this.reconciler.doReconcile()\n      console.log(this.aCtx.currentTime);\n    });\n  }\n\n  destroy() {\n    this.reconciler.destroy();\n  }\n\n  onDemuxComplete(videoTrack, audioTrack) {\n    this.aCtx.decodeAudio(audioTrack);\n    this.vCtx.decodeVideo(videoTrack);\n  }\n\n  setAudioMeta(meta) {\n    this.aCtx.setAudioMetaData(meta);\n  }\n\n  setVideoMeta(meta) {\n    this.vCtx.setVideoMetaData(meta);\n  }\n\n  get currentTime() {}\n\n  play() {\n    // if (!this.vCtx.)\n    this.vCtx.play();\n    this.aCtx.play();\n  }\n}\n// eslint-disable-next-line no-undef\ncustomElements.define(\'mobile-video\', MobileVideo);\n\n//# sourceURL=webpack://xgplayer-flv/../xgplayer-utils/src/mobile/mobile-video.js?')},"../xgplayer-utils/src/mobile/sourcebuffer.js":
/*!****************************************************!*\
      !*** ../xgplayer-utils/src/mobile/sourcebuffer.js ***!
      \****************************************************/
/*! no static exports found */function(module,exports,__webpack_require__){eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nclass SourceBuffer {\n  constructor(config) {\n    this.config = Object.assign({}, config);\n    this.type = this.config.type;\n    this.buffer = [];\n    this.currentGop = undefined;\n    this._lastGet = undefined;\n  }\n\n  push(frame) {\n    if (this.type === 'video') {\n      if (frame.isKeyframe) {\n        let currentGop = {\n          samples: [],\n          start: frame.dts,\n          end: frame.dts,\n          nextGop: undefined\n        };\n        if (this.currentGop) {\n          this.currentGop.nextGop = currentGop;\n        }\n        this.currentGop = currentGop;\n        this.buffer.push(this.currentGop);\n      }\n\n      if (this.currentGop) {\n        this.currentGop.samples.push(frame);\n\n        if (frame.dts < this.currentGop.start) {\n          this.currentGop.start = frame.dts;\n        }\n\n        if (frame.dts > this.currentGop.end) {\n          this.currentGop.end = frame.dts;\n        }\n      }\n    }\n  }\n\n  get(time) {\n    if (this.type === 'video') {\n      if (this.buffer.length < 1) {\n        return;\n      }\n\n      if (time === undefined) {\n        let sample = this._getNext();\n        return sample;\n      }\n    }\n  }\n\n  _getNext() {\n    if (!this._lastGet) {\n      let gop = this.buffer[0];\n      if (gop.samples.length < 1) {\n        return;\n      }\n\n      this._lastGet = {\n        gop,\n        index: 0\n      };\n      return gop.samples[0];\n    } else {\n      let gop = this._lastGet.gop;\n      let sample = gop.samples[this._lastGet.index + 1];\n      if (sample) {\n        this._lastGet.index = this._lastGet.index + 1;\n        return sample;\n      } else {\n        gop = gop.nextGop;\n        if (!gop || gop.samples.length < 1) {\n          return;\n        }\n        sample = gop.samples[0];\n        this._lastGet = {\n          gop,\n          index: 0\n        };\n        return sample;\n      }\n    }\n  }\n\n  remove(start, end) {\n    if (this.buffer.length < 0) {\n      return;\n    }\n\n    let i = 0;\n    let gop = this.buffer[0];\n    while (gop) {\n      if (gop.end < end && gop.start >= start) {\n        delete this.buffer[i];\n        gop = this.buffer[i];\n      } else {\n        i += 1;\n        gop = this.buffer[i];\n      }\n    }\n  }\n}\n\nexports.default = SourceBuffer;\n\n//# sourceURL=webpack://xgplayer-flv/../xgplayer-utils/src/mobile/sourcebuffer.js?")},"../xgplayer-utils/src/mobile/ticker.js":
/*!**********************************************!*\
      !*** ../xgplayer-utils/src/mobile/ticker.js ***!
      \**********************************************/
/*! no static exports found */function(module,exports,__webpack_require__){eval('\n\nObject.defineProperty(exports, "__esModule", {\n  value: true\n});\n/**\n * @author fuyuhao@bytedance.com\n */\n\nclass Ticker {\n  constructor(options) {\n    this.options = Object.assign({}, options || {}, {\n      interval: 16\n    });\n\n    this.callbacks = [];\n  }\n\n  start(...callbacks) {\n    this.callbacks = callbacks;\n  }\n\n  onTick() {\n    for (let i = 0, len = this.callbacks.length; i < len; i++) {\n      const callback = this.callbacks[i];\n      callback();\n    }\n  }\n\n  setInterval(interval) {\n    this.options.interval = interval;\n    return this;\n  }\n}\n\n/**\n * ticker use requestAnimationFrame\n */\nclass RafTicker extends Ticker {\n  constructor(props) {\n    super(props);\n    this.prev = null;\n    this.timerId = null;\n    this._subTimerId = null;\n\n    this._tickFunc = RafTicker.getTickFunc();\n    this.tick = this.tick.bind(this);\n  }\n\n  start(...callbacks) {\n    super.start(...callbacks);\n    this.tick();\n  }\n\n  tick(timestamp) {\n    console.log(timestamp);\n    this.nextTick();\n    this.onTick();\n  }\n\n  nextTick() {\n    const { _tickFunc } = this;\n    this.timerId = _tickFunc(this.tick);\n  }\n\n  stop() {\n    if (this.timerId) {\n      const cancelFunc = RafTicker.getCancelFunc();\n\n      cancelFunc(this.timerId);\n    }\n  }\n\n  static getTickFunc() {\n    return window.requestAnimationFrame || window.webkitRequestAnimationFrame;\n  }\n\n  static getCancelFunc() {\n    return window.cancelAnimationFrame || window.webkitCancelAnimationFrame;\n  }\n\n  static isSupported() {\n    return RafTicker.getTickFunc() !== undefined;\n  }\n}\n\n/**\n * use setTimeout for browsers without raf support\n */\nclass TimeoutTicker extends Ticker {\n  constructor(config) {\n    super(config);\n    this.timeoutId = null;\n  }\n\n  start(...callbacks) {\n    super.nextTick(...callbacks);\n    this.timeoutId = window.setInterval(() => {\n      this.onTick();\n    }, this.options.interval || 16);\n  }\n\n  stop() {\n    if (this.timeoutId) {\n      window.clearInterval(this.timeoutId);\n    }\n  }\n\n}\n\n/**\n * 返回Ticker构造函数\n * @returns {Ticker}\n */\nconst getTicker = exports.getTicker = () => {\n  if (RafTicker.isSupported()) {\n    return RafTicker;\n  } else {\n    return TimeoutTicker;\n  }\n};\n\n//# sourceURL=webpack://xgplayer-flv/../xgplayer-utils/src/mobile/ticker.js?')},"../xgplayer-utils/src/mobile/video-context.js":
/*!*****************************************************!*\
      !*** ../xgplayer-utils/src/mobile/video-context.js ***!
      \*****************************************************/
/*! no static exports found */function(module,exports,__webpack_require__){eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _webworkifyWebpack = __webpack_require__(/*! webworkify-webpack */ \"../xgplayer-utils/node_modules/webworkify-webpack/index.js\");\n\nvar _webworkifyWebpack2 = _interopRequireDefault(_webworkifyWebpack);\n\nvar _stream = __webpack_require__(/*! ../write/stream */ \"../xgplayer-utils/src/write/stream.js\");\n\nvar _stream2 = _interopRequireDefault(_stream);\n\nvar _nalunit = __webpack_require__(/*! ../../../xgplayer-codec/src/h264/nalunit */ \"../xgplayer-codec/src/h264/nalunit/index.js\");\n\nvar _nalunit2 = _interopRequireDefault(_nalunit);\n\nvar _yuvCanvas = __webpack_require__(/*! ./yuv-canvas */ \"../xgplayer-utils/src/mobile/yuv-canvas.js\");\n\nvar _yuvCanvas2 = _interopRequireDefault(_yuvCanvas);\n\nvar _sourcebuffer = __webpack_require__(/*! ./sourcebuffer */ \"../xgplayer-utils/src/mobile/sourcebuffer.js\");\n\nvar _sourcebuffer2 = _interopRequireDefault(_sourcebuffer);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nclass VideoCanvas {\n  constructor(config) {\n    this.config = Object.assign({}, config);\n    this.canvas = this.config.canvas ? this.config.canvas : document.createElement('canvas');\n    this.source = new _sourcebuffer2.default({ type: 'video' });\n    this.preloadTime = this.config.preloadTime || 3;\n    this.oncanplay = undefined;\n    this.onFirstFrame = undefined;\n    this.meta = undefined;\n    this.readyStatus = 0;\n    this.paused = true;\n    this.count = 0;\n    this.currentTime = 0;\n    this.lastPlayed = 0;\n\n    this._decoderInited = false;\n    this._avccpushed = false;\n    this._decodedFrames = {};\n    this._lastSampleDts = undefined;\n    this._baseDts = undefined;\n    this.initWasmWorker();\n  }\n\n  initWasmWorker() {\n    let _this = this;\n    this.wasmworker = (0, _webworkifyWebpack2.default)(/*require.resolve*/(/*! ./worker.js */ \"../xgplayer-utils/src/mobile/worker.js\"));\n    this.wasmworker.postMessage({\n      msg: 'init'\n    });\n    this.wasmworker.addEventListener('message', msg => {\n      switch (msg.data.msg) {\n        case 'DECODER_READY':\n          _this._decoderInited = true;\n          break;\n        case 'DECODED':\n          this._onDecoded(msg.data);\n          break;\n      }\n    });\n  }\n\n  setVideoMetaData(meta) {\n    this.meta = meta;\n    if (!this._decoderInited) {\n      return;\n    }\n    this._avccpushed = true;\n    let data = new Uint8Array(meta.sps.byteLength + 4);\n    data.set([0, 0, 0, 1]);\n    data.set(meta.sps, 4);\n    this.wasmworker.postMessage({\n      msg: 'decode',\n      data: data\n    });\n\n    data = new Uint8Array(meta.pps.byteLength + 4);\n    data.set([0, 0, 0, 1]);\n    data.set(meta.pps, 4);\n    this.wasmworker.postMessage({\n      msg: 'decode',\n      data: data\n    });\n\n    if (!this.yuvCanvas) {\n      let config = Object.assign({ meta, canvas: this.canvas }, this.config);\n      this.yuvCanvas = new _yuvCanvas2.default(config);\n    }\n    this.readyStatus = 1;\n  }\n\n  decodeVideo(videoTrack) {\n    if (!this._decoderInited) {\n      return;\n    }\n\n    if (!this._avccpushed) {\n      this.setVideoMetaData(this.meta);\n    }\n    let { samples } = videoTrack;\n    let sample = samples.shift();\n\n    while (sample) {\n      if (!this._baseDts) {\n        this._baseDts = sample.dts;\n      }\n      this.source.push(sample);\n      sample = samples.shift();\n    }\n\n    this._preload();\n  }\n\n  _preload() {\n    if (!this._lastSampleDts || this._lastSampleDts - this._baseDts < this.currentTime + this.preloadTime * 1000) {\n      let sample = this.source.get();\n      if (sample) {\n        this._lastSampleDts = sample.dts;\n        this._analyseNal(sample);\n      }\n\n      while (sample && this._lastSampleDts - this._baseDts < this.currentTime + this.preloadTime * 1000) {\n        sample = this.source.get();\n        if (sample) {\n          this._analyseNal(sample);\n          this._lastSampleDts = sample.dts;\n        }\n      }\n    }\n  }\n\n  _analyseNal(sample) {\n    let nals = _nalunit2.default.getAvccNals(new _stream2.default(sample.data.buffer));\n\n    let length = 0;\n    for (let i = 0; i < nals.length; i++) {\n      let nal = nals[i];\n      length += nal.body.byteLength + 4;\n    }\n    let offset = 0;\n    let data = new Uint8Array(length);\n    for (let i = 0; i < nals.length; i++) {\n      let nal = nals[i];\n      data.set([0, 0, 0, 1], offset);\n      offset += 4;\n      data.set(new Uint8Array(nal.body), offset);\n      offset += nal.body.byteLength;\n    }\n    this.wasmworker.postMessage({\n      msg: 'decode',\n      data: data,\n      info: {\n        dts: sample.dts,\n        pts: sample.pts ? sample.pts : sample.dts + sample.cts,\n        key: sample.isKeyframe\n      }\n    });\n  }\n\n  _onDecoded(data) {\n    let { dts } = data.info;\n    this._decodedFrames[dts] = data;\n  }\n\n  play() {\n    this.paused = false;\n    this._onTimer();\n  }\n\n  _onTimer() {\n    let renderCost = 0;\n    const renderStart = Date.now();\n    if (this.paused) {\n      return;\n    }\n    let nextTime = 1000 / 60;\n    if (this.meta) {\n      if (this.meta.frameRate && this.meta.frameRate.fixed && this.meta.frameRate.fps) {\n        nextTime = Math.ceil(1000 / this.meta.frameRate.fps);\n      }\n      let frameTimes = Object.keys(this._decodedFrames);\n      if (frameTimes.length > 0) {\n        this.currentTime += nextTime;\n        let frameTime = -1;\n        for (let i = 0; i < frameTimes.length && frameTimes[i] - this._baseDts <= this.currentTime; i++) {\n          frameTime = frameTimes[i];\n          break;\n        }\n        let frame = this._decodedFrames[frameTime];\n        if (frame) {\n          if (this.oncanplay && this.readyStatus < 4) {\n            this.oncanplay();\n            this.readyStatus = 4;\n          }\n          console.log('video time', this.currentTime);\n          this.yuvCanvas.render(frame.buffer, frame.width, frame.height);\n          renderCost = Date.now() - renderStart;\n          delete this._decodedFrames[frameTime];\n        }\n      }\n    }\n    this._cleanBuffer();\n    setTimeout(this._onTimer.bind(this), nextTime - renderCost);\n  }\n\n  _cleanBuffer() {\n    this.source.remove(0, this.currentTime);\n  }\n}\nexports.default = VideoCanvas;\n\n//# sourceURL=webpack://xgplayer-flv/../xgplayer-utils/src/mobile/video-context.js?")},"../xgplayer-utils/src/mobile/worker.js":
/*!**********************************************!*\
      !*** ../xgplayer-utils/src/mobile/worker.js ***!
      \**********************************************/
/*! no static exports found */function(module,exports,__webpack_require__){eval("\n\nconst MAX_STREAM_BUFFER_LENGTH = 1024 * 1024;\nvar Decoder = function (self) {\n  this.inited = false;\n  this.self = self;\n  this.infolist = {};\n  self.par_broadwayOnBroadwayInited = this.broadwayOnBroadwayInited.bind(this);\n  self.par_broadwayOnPictureDecoded = this.broadwayOnPictureDecoded.bind(this);\n};\n\nDecoder.prototype.toU8Array = function (ptr, length) {\n  return this.self.HEAPU8.subarray(ptr, ptr + length);\n};\n\nDecoder.prototype.init = function () {\n  Module._broadwayInit();\n  this.streamBuffer = this.toU8Array(Module._broadwayCreateStream(MAX_STREAM_BUFFER_LENGTH), MAX_STREAM_BUFFER_LENGTH);\n};\n\nDecoder.prototype.broadwayOnPictureDecoded = function (offset, width, height, infoid) {\n  let info = Object.assign({}, this.infolist[infoid]);\n  let data = this.toU8Array(offset, width * height * 3 / 2);\n  this.infolist[infoid] = null;\n  let datetemp = new Uint8Array(data.length);\n  datetemp.set(data);\n  let buffer = datetemp.buffer;\n  this.self.postMessage({\n    msg: 'DECODED',\n    width,\n    height,\n    info,\n    buffer\n  }, [buffer]);\n};\n\nDecoder.prototype.broadwayOnBroadwayInited = function () {\n  this.inited = true;\n  this.self.postMessage({ msg: 'DECODER_READY' });\n};\n\nDecoder.prototype.decode = function (data, info) {\n  let time = parseInt(new Date().getTime());\n  let infoid = time - Math.floor(time / 10e9) * 10e9;\n  this.infolist[infoid] = info;\n  this.streamBuffer.set(data);\n  Module._broadwayPlayStream(data.length, infoid);\n};\n\nvar decoder;\n\nfunction onPostRun() {\n  decoder = new Decoder(this);\n  decoder.init();\n}\n\nfunction init() {\n  self.importScripts('http://10.95.45.202:9090/examples/flv/decoder.js');\n  addOnPostRun(onPostRun.bind(self));\n}\n\nmodule.exports = function (self) {\n  self.addEventListener('message', function (e) {\n    var data = e.data;\n    if (!data.msg) {\n      self.postMessage({\n        msg: 'ERROR:invalid message'\n      });\n    } else {\n      switch (data.msg) {\n        case 'init':\n          init(self);\n          break;\n        case 'decode':\n          decoder.decode(data.data, data.info);\n          break;\n        default:\n          break;\n      }\n    }\n  }, false);\n};\n\n//# sourceURL=webpack://xgplayer-flv/../xgplayer-utils/src/mobile/worker.js?")},"../xgplayer-utils/src/mobile/yuv-canvas.js":
/*!**************************************************!*\
      !*** ../xgplayer-utils/src/mobile/yuv-canvas.js ***!
      \**************************************************/
/*! no static exports found */function(module,exports,__webpack_require__){eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nclass YUVCanvas {\n  constructor(configs) {\n    this.configs = Object.assign({}, configs);\n    this.canvas = this.configs.canvas;\n    this.meta = Object.assign({}, this.configs.meta);\n    this.chroma = this.meta.chromaFormat;\n    this.height = this.meta.presentHeight;\n    this.width = this.meta.presentWidth;\n    this.canvas.width = this.width;\n    this.canvas.height = this.height;\n    this.canvas.style.width = '100%';\n    this.canvas.style.height = '100%';\n    this._initContextGL();\n    if (this.contextGL) {\n      this._initProgram();\n      this._initBuffers();\n      this._initTextures();\n    };\n  }\n\n  _initContextGL() {\n    var canvas = this.canvas;\n    var gl = null;\n\n    var validContextNames = ['webgl', 'experimental-webgl', 'moz-webgl', 'webkit-3d'];\n    var nameIndex = 0;\n\n    while (!gl && nameIndex < validContextNames.length) {\n      var contextName = validContextNames[nameIndex];\n\n      try {\n        if (this.contextOptions) {\n          gl = canvas.getContext(contextName, this.contextOptions);\n        } else {\n          gl = canvas.getContext(contextName);\n        };\n      } catch (e) {\n        gl = null;\n      }\n\n      if (!gl || typeof gl.getParameter !== 'function') {\n        gl = null;\n      }\n\n      ++nameIndex;\n    };\n\n    this.contextGL = gl;\n  }\n\n  _initProgram() {\n    var gl = this.contextGL;\n\n    // vertex shader is the same for all types\n    var vertexShaderScript;\n    var fragmentShaderScript;\n    if (this.chroma === 420) {\n      vertexShaderScript = ['attribute vec4 vertexPos;', 'attribute vec4 texturePos;', 'attribute vec4 uTexturePos;', 'attribute vec4 vTexturePos;', 'varying vec2 textureCoord;', 'varying vec2 uTextureCoord;', 'varying vec2 vTextureCoord;', 'void main()', '{', '  gl_Position = vertexPos;', '  textureCoord = texturePos.xy;', '  uTextureCoord = uTexturePos.xy;', '  vTextureCoord = vTexturePos.xy;', '}'].join('\\n');\n\n      fragmentShaderScript = ['precision highp float;', 'varying highp vec2 textureCoord;', 'varying highp vec2 uTextureCoord;', 'varying highp vec2 vTextureCoord;', 'uniform sampler2D ySampler;', 'uniform sampler2D uSampler;', 'uniform sampler2D vSampler;', 'uniform mat4 YUV2RGB;', 'void main(void) {', '  highp float y = texture2D(ySampler,  textureCoord).r;', '  highp float u = texture2D(uSampler,  uTextureCoord).r;', '  highp float v = texture2D(vSampler,  vTextureCoord).r;', '  gl_FragColor = vec4(y, u, v, 1) * YUV2RGB;', '}'].join('\\n');\n    } else if (this.chroma === 422) {\n      vertexShaderScript = ['attribute vec4 vertexPos;', 'attribute vec4 texturePos;', 'varying vec2 textureCoord;', 'void main()', '{', '  gl_Position = vertexPos;', '  textureCoord = texturePos.xy;', '}'].join('\\n');\n\n      fragmentShaderScript = ['precision highp float;', 'varying highp vec2 textureCoord;', 'uniform sampler2D sampler;', 'uniform highp vec2 resolution;', 'uniform mat4 YUV2RGB;', 'void main(void) {', '  highp float texPixX = 1.0 / resolution.x;', '  highp float logPixX = 2.0 / resolution.x;', // half the resolution of the texture\n      '  highp float logHalfPixX = 4.0 / resolution.x;', // half of the logical resolution so every 4th pixel\n      '  highp float steps = floor(textureCoord.x / logPixX);', '  highp float uvSteps = floor(textureCoord.x / logHalfPixX);', '  highp float y = texture2D(sampler, vec2((logPixX * steps) + texPixX, textureCoord.y)).r;', '  highp float u = texture2D(sampler, vec2((logHalfPixX * uvSteps), textureCoord.y)).r;', '  highp float v = texture2D(sampler, vec2((logHalfPixX * uvSteps) + texPixX + texPixX, textureCoord.y)).r;',\n\n      // '  highp float y = texture2D(sampler,  textureCoord).r;',\n      // '  gl_FragColor = vec4(y, u, v, 1) * YUV2RGB;',\n      '  gl_FragColor = vec4(y, u, v, 1.0) * YUV2RGB;', '}'].join('\\n');\n    };\n\n    var YUV2RGB = [1.16438, 0.00000, 1.59603, -0.87079, 1.16438, -0.39176, -0.81297, 0.52959, 1.16438, 2.01723, 0.00000, -1.08139, 0, 0, 0, 1];\n    var vertexShader = gl.createShader(gl.VERTEX_SHADER);\n    gl.shaderSource(vertexShader, vertexShaderScript);\n    gl.compileShader(vertexShader);\n    if (!gl.getShaderParameter(vertexShader, gl.COMPILE_STATUS)) {\n      console.log('Vertex shader failed to compile: ' + gl.getShaderInfoLog(vertexShader));\n    }\n\n    var fragmentShader = gl.createShader(gl.FRAGMENT_SHADER);\n    gl.shaderSource(fragmentShader, fragmentShaderScript);\n    gl.compileShader(fragmentShader);\n    if (!gl.getShaderParameter(fragmentShader, gl.COMPILE_STATUS)) {\n      console.log('Fragment shader failed to compile: ' + gl.getShaderInfoLog(fragmentShader));\n    }\n\n    var program = gl.createProgram();\n    gl.attachShader(program, vertexShader);\n    gl.attachShader(program, fragmentShader);\n    gl.linkProgram(program);\n    if (!gl.getProgramParameter(program, gl.LINK_STATUS)) {\n      console.log('Program failed to compile: ' + gl.getProgramInfoLog(program));\n    }\n\n    gl.useProgram(program);\n\n    var YUV2RGBRef = gl.getUniformLocation(program, 'YUV2RGB');\n    gl.uniformMatrix4fv(YUV2RGBRef, false, YUV2RGB);\n\n    this.shaderProgram = program;\n  }\n\n  _initBuffers() {\n    var gl = this.contextGL;\n    var program = this.shaderProgram;\n\n    var vertexPosBuffer = gl.createBuffer();\n    gl.bindBuffer(gl.ARRAY_BUFFER, vertexPosBuffer);\n    gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([1, 1, -1, 1, 1, -1, -1, -1]), gl.STATIC_DRAW);\n\n    var vertexPosRef = gl.getAttribLocation(program, 'vertexPos');\n    gl.enableVertexAttribArray(vertexPosRef);\n    gl.vertexAttribPointer(vertexPosRef, 2, gl.FLOAT, false, 0, 0);\n\n    var texturePosBuffer = gl.createBuffer();\n    gl.bindBuffer(gl.ARRAY_BUFFER, texturePosBuffer);\n    gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([1, 0, 0, 0, 1, 1, 0, 1]), gl.STATIC_DRAW);\n\n    var texturePosRef = gl.getAttribLocation(program, 'texturePos');\n    gl.enableVertexAttribArray(texturePosRef);\n    gl.vertexAttribPointer(texturePosRef, 2, gl.FLOAT, false, 0, 0);\n\n    this.texturePosBuffer = texturePosBuffer;\n\n    if (this.chroma === 420) {\n      var uTexturePosBuffer = gl.createBuffer();\n      gl.bindBuffer(gl.ARRAY_BUFFER, uTexturePosBuffer);\n      gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([1, 0, 0, 0, 1, 1, 0, 1]), gl.STATIC_DRAW);\n\n      var uTexturePosRef = gl.getAttribLocation(program, 'uTexturePos');\n      gl.enableVertexAttribArray(uTexturePosRef);\n      gl.vertexAttribPointer(uTexturePosRef, 2, gl.FLOAT, false, 0, 0);\n\n      this.uTexturePosBuffer = uTexturePosBuffer;\n\n      var vTexturePosBuffer = gl.createBuffer();\n      gl.bindBuffer(gl.ARRAY_BUFFER, vTexturePosBuffer);\n      gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([1, 0, 0, 0, 1, 1, 0, 1]), gl.STATIC_DRAW);\n\n      var vTexturePosRef = gl.getAttribLocation(program, 'vTexturePos');\n      gl.enableVertexAttribArray(vTexturePosRef);\n      gl.vertexAttribPointer(vTexturePosRef, 2, gl.FLOAT, false, 0, 0);\n\n      this.vTexturePosBuffer = vTexturePosBuffer;\n    };\n  }\n\n  _initTextures() {\n    var gl = this.contextGL;\n    var program = this.shaderProgram;\n\n    if (this.chroma === 420) {\n      var yTextureRef = this._initTexture();\n      var ySamplerRef = gl.getUniformLocation(program, 'ySampler');\n      gl.uniform1i(ySamplerRef, 0);\n      this.yTextureRef = yTextureRef;\n\n      var uTextureRef = this._initTexture();\n      var uSamplerRef = gl.getUniformLocation(program, 'uSampler');\n      gl.uniform1i(uSamplerRef, 1);\n      this.uTextureRef = uTextureRef;\n\n      var vTextureRef = this._initTexture();\n      var vSamplerRef = gl.getUniformLocation(program, 'vSampler');\n      gl.uniform1i(vSamplerRef, 2);\n      this.vTextureRef = vTextureRef;\n    } else if (this.chroma === 422) {\n      // only one texture for 422\n      var textureRef = this._initTexture();\n      var samplerRef = gl.getUniformLocation(program, 'sampler');\n      gl.uniform1i(samplerRef, 0);\n      this.textureRef = textureRef;\n    };\n  }\n\n  _initTexture() {\n    var gl = this.contextGL;\n\n    var textureRef = gl.createTexture();\n    gl.bindTexture(gl.TEXTURE_2D, textureRef);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n    gl.bindTexture(gl.TEXTURE_2D, null);\n\n    return textureRef;\n  }\n\n  _drawPictureGL(data, width, height) {\n    if (this.chroma === 420) {\n      let nWidth = width;\n      var ylen = width * height;\n      var uvlen = width / 2 * (height / 2);\n      data = new Uint8Array(data);\n      let renderData = {\n        yData: data.subarray(0, ylen),\n        uData: data.subarray(ylen, ylen + uvlen),\n        vData: data.subarray(ylen + uvlen, ylen + uvlen + uvlen)\n      };\n      if (width % 4 > 0) {\n        nWidth = width + 4 - width % 4;\n        let yArray = new Uint8Array(nWidth * height);\n        for (let i = 0; i < height; i++) {\n          yArray.set(renderData.yData.subarray(i * width, (i + 1) * width), i * nWidth);\n        }\n        renderData.yData = yArray;\n      }\n\n      if (width / 2 % 4 > 0) {\n        nWidth = width / 2 + 4 - width / 2 % 4;\n        let uArray = new Uint8Array(nWidth * height / 2);\n        let vArray = new Uint8Array(nWidth * height / 2);\n        for (let i = 0; i < height / 2; i++) {\n          uArray.set(renderData.uData.subarray(i * width / 2, (i + 1) * width / 2), i * nWidth);\n          vArray.set(renderData.vData.subarray(i * width / 2, (i + 1) * width / 2), i * nWidth);\n        }\n        renderData.uData = uArray;\n        renderData.vData = vArray;\n      }\n      this._drawPictureGL420(renderData, width, height);\n    } else if (this.chroma === 422) {\n      data = new Uint8Array(data);\n      this._drawPictureGL422(width, height, data);\n    }\n  }\n\n  _drawPictureGL422(data, width, height) {\n    var gl = this.contextGL;\n    var texturePosBuffer = this.texturePosBuffer;\n\n    var textureRef = this.textureRef;\n\n    var dataPerRow = width * 2;\n    var rowCnt = height;\n\n    gl.viewport(0, 0, width, height);\n\n    var tTop = 0;\n    var tLeft = 0;\n    var tBottom = height / rowCnt;\n    var tRight = width / (dataPerRow / 2);\n    var texturePosValues = new Float32Array([tRight, tTop, tLeft, tTop, tRight, tBottom, tLeft, tBottom]);\n\n    gl.bindBuffer(gl.ARRAY_BUFFER, texturePosBuffer);\n    gl.bufferData(gl.ARRAY_BUFFER, texturePosValues, gl.DYNAMIC_DRAW);\n\n    gl.uniform2f(gl.getUniformLocation(this.shaderProgram, 'resolution'), dataPerRow, height);\n\n    gl.activeTexture(gl.TEXTURE0);\n    gl.bindTexture(gl.TEXTURE_2D, textureRef);\n    gl.texImage2D(gl.TEXTURE_2D, 0, gl.LUMINANCE, dataPerRow, rowCnt, 0, gl.LUMINANCE, gl.UNSIGNED_BYTE, data);\n\n    gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);\n  }\n\n  _drawPictureGL420(data, width, height) {\n    var gl = this.contextGL;\n    var texturePosBuffer = this.texturePosBuffer;\n    var uTexturePosBuffer = this.uTexturePosBuffer;\n    var vTexturePosBuffer = this.vTexturePosBuffer;\n\n    var yTextureRef = this.yTextureRef;\n    var uTextureRef = this.uTextureRef;\n    var vTextureRef = this.vTextureRef;\n\n    var yData = data.yData;\n    var uData = data.uData;\n    var vData = data.vData;\n\n    var yDataPerRow = width;\n    var yRowCnt = height;\n\n    var uDataPerRow = width / 2;\n    var uRowCnt = height / 2;\n\n    var vDataPerRow = uDataPerRow;\n    var vRowCnt = uRowCnt;\n    gl.viewport(0, 0, this.width, this.height);\n\n    var tTop = 0;\n    var tLeft = 0;\n    var tBottom = height / yRowCnt;\n    var tRight = width / yDataPerRow;\n    var texturePosValues = new Float32Array([tRight, tTop, tLeft, tTop, tRight, tBottom, tLeft, tBottom]);\n\n    gl.bindBuffer(gl.ARRAY_BUFFER, texturePosBuffer);\n    gl.bufferData(gl.ARRAY_BUFFER, texturePosValues, gl.DYNAMIC_DRAW);\n\n    tBottom = height / 2 / uRowCnt;\n    tRight = width / 2 / uDataPerRow;\n    var uTexturePosValues = new Float32Array([tRight, tTop, tLeft, tTop, tRight, tBottom, tLeft, tBottom]);\n\n    gl.bindBuffer(gl.ARRAY_BUFFER, uTexturePosBuffer);\n    gl.bufferData(gl.ARRAY_BUFFER, uTexturePosValues, gl.DYNAMIC_DRAW);\n\n    tBottom = height / 2 / vRowCnt;\n    tRight = width / 2 / vDataPerRow;\n\n    var vTexturePosValues = new Float32Array([tRight, tTop, tLeft, tTop, tRight, tBottom, tLeft, tBottom]);\n\n    gl.bindBuffer(gl.ARRAY_BUFFER, vTexturePosBuffer);\n    gl.bufferData(gl.ARRAY_BUFFER, vTexturePosValues, gl.DYNAMIC_DRAW);\n\n    gl.activeTexture(gl.TEXTURE0);\n    gl.bindTexture(gl.TEXTURE_2D, yTextureRef);\n    gl.texImage2D(gl.TEXTURE_2D, 0, gl.LUMINANCE, yDataPerRow, yRowCnt, 0, gl.LUMINANCE, gl.UNSIGNED_BYTE, yData);\n\n    gl.activeTexture(gl.TEXTURE1);\n    gl.bindTexture(gl.TEXTURE_2D, uTextureRef);\n    gl.texImage2D(gl.TEXTURE_2D, 0, gl.LUMINANCE, uDataPerRow, uRowCnt, 0, gl.LUMINANCE, gl.UNSIGNED_BYTE, uData);\n\n    gl.activeTexture(gl.TEXTURE2);\n    gl.bindTexture(gl.TEXTURE_2D, vTextureRef);\n    gl.texImage2D(gl.TEXTURE_2D, 0, gl.LUMINANCE, vDataPerRow, vRowCnt, 0, gl.LUMINANCE, gl.UNSIGNED_BYTE, vData);\n\n    gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);\n  }\n\n  _drawPictureRGB(data) {}\n\n  render(data, width, height) {\n    var gl = this.contextGL;\n    if (gl) {\n      this._drawPictureGL(data, width, height);\n    } else {\n      this._drawPictureRGB(data);\n    }\n  }\n}\n\nexports.default = YUVCanvas;\n\n//# sourceURL=webpack://xgplayer-flv/../xgplayer-utils/src/mobile/yuv-canvas.js?")},"../xgplayer-utils/src/models/media-info.js":
/*!**************************************************!*\
      !*** ../xgplayer-utils/src/models/media-info.js ***!
      \**************************************************/
/*! no static exports found */function(module,exports,__webpack_require__){eval('\n\nObject.defineProperty(exports, "__esModule", {\n  value: true\n});\nconst isObjectFilled = obj => {\n  for (let key in obj) {\n    if (obj.hasOwnProperty(key)) {\n      if (obj[key] === null) {\n        return false;\n      }\n    }\n  }\n  return true;\n};\n\nclass MediaInfo {\n  constructor() {\n    this.mimeType = null;\n    this.duration = null;\n\n    this.hasVideo = null;\n    this.video = {\n      codec: null,\n      width: null,\n      height: null,\n      profile: null,\n      level: null,\n      frameRate: {\n        fixed: true,\n        fps: 25,\n        fps_num: 25000,\n        fps_den: 1000\n      },\n      chromaFormat: null,\n      parRatio: {\n        width: 1,\n        height: 1\n      }\n    };\n\n    this.hasAudio = null;\n\n    this.audio = {\n      codec: null,\n      sampleRate: null,\n      sampleRateIndex: null,\n      channelCount: null\n    };\n  }\n\n  isComplete() {\n    return MediaInfo.isBaseInfoReady(this) && MediaInfo.isVideoReady(this) && MediaInfo.isAudioReady(this);\n  }\n\n  static isBaseInfoReady(mediaInfo) {\n    return isObjectFilled(mediaInfo);\n  }\n\n  static isVideoReady(mediaInfo) {\n    if (!mediaInfo.hasVideo) {\n      return true;\n    }\n\n    return isObjectFilled(mediaInfo.video);\n  }\n\n  static isAudioReady(mediaInfo) {\n    if (!mediaInfo.hasAudio) {\n      return true;\n    }\n\n    return isObjectFilled(mediaInfo.video);\n  }\n}\nexports.default = MediaInfo;\n\n//# sourceURL=webpack://xgplayer-flv/../xgplayer-utils/src/models/media-info.js?')},"../xgplayer-utils/src/models/media-sample.js":
/*!****************************************************!*\
      !*** ../xgplayer-utils/src/models/media-sample.js ***!
      \****************************************************/
/*! no static exports found */function(module,exports,__webpack_require__){eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nclass MediaSample {\n  constructor(info) {\n    let _default = MediaSample.getDefaultInf();\n\n    if (!info || Object.prototype.toString.call(info) !== '[object Object]') {\n      return _default;\n    }\n    let sample = Object.assign({}, _default, info);\n\n    Object.entries(sample).forEach(([k, v]) => {\n      this[k] = v;\n    });\n  }\n\n  static getDefaultInf() {\n    return {\n      dts: null,\n      pts: null,\n      duration: null,\n      position: null,\n      isRAP: false, // is Random access point\n      originDts: null\n    };\n  }\n}\nexports.default = MediaSample;\n\n//# sourceURL=webpack://xgplayer-flv/../xgplayer-utils/src/models/media-sample.js?")},"../xgplayer-utils/src/models/media-segment-list.js":
/*!**********************************************************!*\
      !*** ../xgplayer-utils/src/models/media-segment-list.js ***!
      \**********************************************************/
/*! no static exports found */function(module,exports,__webpack_require__){eval('\n\nObject.defineProperty(exports, "__esModule", {\n    value: true\n});\nclass MediaSegmentList {\n\n    constructor(type) {\n        this._type = type;\n        this._list = [];\n        this._lastAppendLocation = -1; // cached last insert location\n    }\n\n    get type() {\n        return this._type;\n    }\n\n    get length() {\n        return this._list.length;\n    }\n\n    isEmpty() {\n        return this._list.length === 0;\n    }\n\n    clear() {\n        this._list = [];\n        this._lastAppendLocation = -1;\n    }\n\n    _searchNearestSegmentBefore(beginDts) {\n        let list = this._list;\n        if (list.length === 0) {\n            return -2;\n        }\n        let last = list.length - 1;\n        let mid = 0;\n        let lbound = 0;\n        let ubound = last;\n\n        let idx = 0;\n\n        if (beginDts < list[0].originDts) {\n            idx = -1;\n            return idx;\n        }\n\n        while (lbound <= ubound) {\n            mid = lbound + Math.floor((ubound - lbound) / 2);\n            if (mid === last || beginDts > list[mid].lastSample.originDts && beginDts < list[mid + 1].originDts) {\n                idx = mid;\n                break;\n            } else if (list[mid].originDts < beginDts) {\n                lbound = mid + 1;\n            } else {\n                ubound = mid - 1;\n            }\n        }\n        return idx;\n    }\n\n    _searchNearestSegmentAfter(beginDts) {\n        return this._searchNearestSegmentBefore(beginDts) + 1;\n    }\n\n    append(segment) {\n        let list = this._list;\n        let lastAppendIdx = this._lastAppendLocation;\n        let insertIdx = 0;\n\n        if (lastAppendIdx !== -1 && lastAppendIdx < list.length && segment.originStartDts >= list[lastAppendIdx].lastSample.originDts && (lastAppendIdx === list.length - 1 || lastAppendIdx < list.length - 1 && segment.originStartDts < list[lastAppendIdx + 1].originStartDts)) {\n            insertIdx = lastAppendIdx + 1; // use cached location idx\n        } else {\n            if (list.length > 0) {\n                insertIdx = this._searchNearestSegmentBefore(segment.originStartDts) + 1;\n            }\n        }\n\n        this._lastAppendLocation = insertIdx;\n        this._list.splice(insertIdx, 0, segment);\n    }\n\n    getLastSegmentBefore(beginDts) {\n        let idx = this._searchNearestSegmentBefore(beginDts);\n        if (idx >= 0) {\n            return this._list[idx];\n        } else {\n            // -1\n            return null;\n        }\n    }\n\n    getLastSampleBefore(beginDts) {\n        let segment = this.getLastSegmentBefore(beginDts);\n        if (segment !== null) {\n            return segment.lastSample;\n        } else {\n            return null;\n        }\n    }\n\n    getLastRAPBefore(beginDts) {\n        let segmentIdx = this._searchNearestSegmentBefore(beginDts);\n        let randomAccessPoints = this._list[segmentIdx].randomAccessPoints;\n        while (randomAccessPoints.length === 0 && segmentIdx > 0) {\n            segmentIdx--;\n            randomAccessPoints = this._list[segmentIdx].randomAccessPoints;\n        }\n        if (randomAccessPoints.length > 0) {\n            return randomAccessPoints[randomAccessPoints.length - 1];\n        } else {\n            return null;\n        }\n    }\n\n}\nexports.default = MediaSegmentList;\n\n//# sourceURL=webpack://xgplayer-flv/../xgplayer-utils/src/models/media-segment-list.js?')},"../xgplayer-utils/src/models/media-segment.js":
/*!*****************************************************!*\
      !*** ../xgplayer-utils/src/models/media-segment.js ***!
      \*****************************************************/
/*! no static exports found */function(module,exports,__webpack_require__){eval('\n\nObject.defineProperty(exports, "__esModule", {\n    value: true\n});\nclass MediaSegment {\n    constructor() {\n        this.startDts = -1;\n        this.endDts = -1;\n        this.startPts = -1;\n        this.endPts = -1;\n        this.originStartDts = -1;\n        this.originEndDts = -1;\n        this.randomAccessPoints = [];\n        this.firstSample = null;\n        this.lastSample = null;\n    }\n\n    addRAP(sample) {\n        sample.isRAP = true;\n        this.randomAccessPoints.push(sample);\n    }\n}\nexports.default = MediaSegment;\n\n//# sourceURL=webpack://xgplayer-flv/../xgplayer-utils/src/models/media-segment.js?')},"../xgplayer-utils/src/models/track-meta.js":
/*!**************************************************!*\
      !*** ../xgplayer-utils/src/models/track-meta.js ***!
      \**************************************************/
/*! no static exports found */function(module,exports,__webpack_require__){eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nclass AudioTrackMeta {\n  constructor(meta) {\n    const _default = {\n      sampleRate: 48000,\n      channelCount: 2,\n      codec: 'mp4a.40.2',\n      config: [41, 401, 136, 0],\n      duration: 0,\n      id: 2,\n      refSampleDuration: 21,\n      sampleRateIndex: 3,\n      timescale: 1000,\n      type: 'audio'\n    };\n    if (meta) {\n      return Object.assign({}, _default, meta);\n    }\n    return _default;\n  }\n}\n\nexports.AudioTrackMeta = AudioTrackMeta;\nclass VideoTrackMeta {\n  constructor(meta) {\n    const _default = {\n      avcc: null,\n      sps: new Uint8Array(0),\n      pps: new Uint8Array(0),\n      chromaFormat: 420,\n      codec: 'avc1.640020',\n      codecHeight: 720,\n      codecWidth: 1280,\n      duration: 0,\n      frameRate: {\n        fixed: true,\n        fps: 25,\n        fps_num: 25000,\n        fps_den: 1000\n      },\n      id: 1,\n      level: '3.2',\n      presentHeight: 720,\n      presentWidth: 1280,\n      profile: 'High',\n      refSampleDuration: 40,\n      parRatio: {\n        height: 1,\n        width: 1\n      },\n      timescale: 1000,\n      type: 'video'\n    };\n\n    if (meta) {\n      return Object.assign({}, _default, meta);\n    }\n    return _default;\n  }\n}\nexports.VideoTrackMeta = VideoTrackMeta;\n\n//# sourceURL=webpack://xgplayer-flv/../xgplayer-utils/src/models/track-meta.js?")},"../xgplayer-utils/src/models/track-sample.js":
/*!****************************************************!*\
      !*** ../xgplayer-utils/src/models/track-sample.js ***!
      \****************************************************/
/*! no static exports found */function(module,exports,__webpack_require__){eval('\n\nObject.defineProperty(exports, "__esModule", {\n  value: true\n});\nclass AudioTrackSample {\n  constructor(info) {\n    let _default = AudioTrackSample.getDefault();\n    if (!info) {\n      return _default;\n    }\n    let sample = Object.assign({}, _default, info);\n\n    return sample;\n  }\n\n  static getDefault() {\n    return {\n      dts: null,\n      pts: null,\n      data: new Uint8Array()\n    };\n  }\n}\n\nexports.AudioTrackSample = AudioTrackSample;\nclass VideoTrackSample {\n  constructor(info) {\n    let _default = VideoTrackSample.getDefault();\n\n    if (!info) {\n      return _default;\n    }\n    let sample = Object.assign({}, _default, info);\n\n    return sample;\n  }\n\n  static getDefault() {\n    return {\n      dts: null,\n      pts: null,\n      isKeyframe: false, // is Random access point\n      originDts: null,\n      data: new Uint8Array()\n    };\n  }\n}\nexports.VideoTrackSample = VideoTrackSample;\n\n//# sourceURL=webpack://xgplayer-flv/../xgplayer-utils/src/models/track-sample.js?')},"../xgplayer-utils/src/mse/index.js":
/*!******************************************!*\
      !*** ../xgplayer-utils/src/mse/index.js ***!
      \******************************************/
/*! no static exports found */function(module,exports,__webpack_require__){eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nclass MSE {\n  constructor(configs) {\n    this.configs = Object.assign({}, configs);\n    this.container = this.configs.container;\n    this.mediaSource = null;\n    this.sourceBuffers = {};\n    this.preloadTime = this.configs.preloadTime || 1;\n  }\n\n  init() {\n    // eslint-disable-next-line no-undef\n    this.mediaSource = new self.MediaSource();\n    this.mediaSource.addEventListener('sourceopen', this.onSourceOpen.bind(this));\n    this.container.src = URL.createObjectURL(this.mediaSource);\n    this.url = this.container.src;\n    this.container.addEventListener('timeupdate', this.onTimeUpdate.bind(this));\n    this.container.addEventListener('waiting', this.onWaiting.bind(this));\n  }\n\n  onTimeUpdate() {\n    this.emit('TIME_UPDATE', this.container);\n  }\n\n  onWaiting() {\n    this.emit('WAITING', this.container);\n  }\n\n  onSourceOpen() {\n    this.addSourceBuffers();\n  }\n\n  onUpdateEnd() {\n    this.emit('SOURCE_UPDATE_END');\n    this.doAppend();\n  }\n  addSourceBuffers() {\n    if (this.mediaSource.readyState !== 'open') {\n      return;\n    }\n    let sources = this._context.getInstance('PRE_SOURCE_BUFFER');\n    let tracks = this._context.getInstance('TRACKS');\n    let track;\n\n    sources = sources.sources;\n    let add = false;\n    for (let i = 0, k = Object.keys(sources).length; i < k; i++) {\n      let type = Object.keys(sources)[i];\n      if (type === 'audio') {\n        track = tracks.audioTrack;\n      } else if (type === 'video') {\n        track = tracks.videoTrack;\n      }\n      if (track) {\n        let dur = type === 'audio' ? 21 : 40;\n        if (track.meta && track.meta.refSampleDuration) dur = track.meta.refSampleDuration;\n        if (sources[type].data.length >= this.preloadTime / dur) {\n          add = true;\n        }\n      }\n    }\n\n    if (add) {\n      if (Object.keys(this.sourceBuffers).length > 0) {\n        return;\n      }\n      for (let i = 0, k = Object.keys(sources).length; i < k; i++) {\n        let type = Object.keys(sources)[i];\n        let source = sources[type];\n        let mime = type === 'video' ? 'video/mp4;codecs=' + source.mimetype : 'audio/mp4;codecs=' + source.mimetype;\n        let sourceBuffer = this.mediaSource.addSourceBuffer(mime);\n        this.sourceBuffers[type] = sourceBuffer;\n        sourceBuffer.addEventListener('updateend', this.onUpdateEnd.bind(this));\n        this.doAppend();\n      }\n    }\n  }\n\n  doAppend() {\n    let sources = this._context.getInstance('PRE_SOURCE_BUFFER');\n    if (sources) {\n      for (let i = 0; i < Object.keys(this.sourceBuffers).length; i++) {\n        let type = Object.keys(this.sourceBuffers)[i];\n        let sourceBuffer = this.sourceBuffers[type];\n        if (!sourceBuffer.updating) {\n          let source = sources.sources[type];\n          if (source && !source.inited) {\n            sourceBuffer.appendBuffer(source.init.buffer.buffer);\n            source.inited = true;\n          } else if (source) {\n            let data = source.data.shift();\n            if (data) {\n              sourceBuffer.appendBuffer(data.buffer.buffer);\n            }\n          }\n        }\n      }\n    }\n  }\n\n  endOfStream() {\n    if (this.mediaSource.readyState === 'open') {\n      this.mediaSource.endOfStream();\n    }\n  }\n\n  remove(end) {\n    for (let i = 0; i < Object.keys(this.sourceBuffers).length; i++) {\n      let buffer = this.sourceBuffers[Object.keys(this.sourceBuffers)[i]];\n      if (!buffer.updating) {\n        buffer.remove(0, end);\n      }\n    }\n  }\n\n  destroy() {\n    this.container.removeEventListener('timeupdate', this.onTimeUpdate);\n    this.container.removeEventListener('waiting', this.onWaiting);\n    this.mediaSource.removeEventListener('sourceopen', this.onSourceOpen);\n    this.configs = {};\n    this.container = null;\n    this.mediaSource = null;\n    this.sourceBuffers = {};\n    this.preloadTime = 1;\n    for (let i = 0; i < Object.keys(this.sourceBuffers).length; i++) {\n      let buffer = this.sourceBuffers[Object.keys(this.sourceBuffers)[i]];\n      buffer.removeEventListener('updateend', this.onUpdateEnd);\n      this.mediaSource.removeSourceBuffer(buffer);\n      delete this.sourceBuffers[Object.keys(this.sourceBuffers)[i]];\n    }\n  }\n}\nexports.default = MSE;\n\n//# sourceURL=webpack://xgplayer-flv/../xgplayer-utils/src/mse/index.js?")},"../xgplayer-utils/src/write/buffer.js":
/*!*********************************************!*\
      !*** ../xgplayer-utils/src/write/buffer.js ***!
      \*********************************************/
/*! no static exports found */function(module,exports,__webpack_require__){eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _concatTypedArray = __webpack_require__(/*! concat-typed-array */ \"../xgplayer-utils/node_modules/concat-typed-array/lib/index.js\");\n\nvar _concatTypedArray2 = _interopRequireDefault(_concatTypedArray);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nclass Buffer {\n  constructor(buffer) {\n    this.buffer = buffer || new Uint8Array(0);\n  }\n\n  write(...buffer) {\n    buffer.forEach(item => {\n      this.buffer = (0, _concatTypedArray2.default)(Uint8Array, this.buffer, item);\n    });\n  }\n\n  static writeUint32(value) {\n    return new Uint8Array([value >> 24, value >> 16 & 0xff, value >> 8 & 0xff, value & 0xff]);\n  }\n\n  static readAsInt(arr) {\n    let temp = '';\n\n    function padStart4Hex(hexNum) {\n      let hexStr = hexNum.toString(16);\n      return hexStr.padStart(2, '0');\n    }\n\n    arr.forEach(num => {\n      temp += padStart4Hex(num);\n    });\n    return parseInt(temp, 16);\n  }\n}\n\nexports.default = Buffer;\n\n//# sourceURL=webpack://xgplayer-flv/../xgplayer-utils/src/write/buffer.js?")},"../xgplayer-utils/src/write/stream.js":
/*!*********************************************!*\
      !*** ../xgplayer-utils/src/write/stream.js ***!
      \*********************************************/
/*! no static exports found */function(module,exports,__webpack_require__){eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nclass Stream {\n  constructor(buffer) {\n    if (buffer instanceof ArrayBuffer) {\n      this.buffer = buffer;\n      this.dataview = new DataView(buffer);\n      this.dataview.position = 0;\n    } else {\n      throw new Error('data is invalid');\n    }\n  }\n\n  get length() {\n    return this.buffer.byteLength;\n  }\n\n  set position(value) {\n    this.dataview.position = value;\n  }\n\n  get position() {\n    return this.dataview.position;\n  }\n\n  back(count) {\n    this.position -= count;\n  }\n\n  skip(count) {\n    let loop = Math.floor(count / 4);\n    let last = count % 4;\n    for (let i = 0; i < loop; i++) {\n      Stream.readByte(this.dataview, 4);\n    }\n    if (last > 0) {\n      Stream.readByte(this.dataview, last);\n    }\n  }\n\n  /**\n   * [readByte 从DataView中读取数据]\n   * @param  {DataView} buffer [DataView实例]\n   * @param  {Number} size   [读取字节数]\n   * @return {Number}        [整数]\n   */\n  static readByte(buffer, size, sign) {\n    let res;\n    switch (size) {\n      case 1:\n        if (sign) {\n          res = buffer.getInt8(buffer.position);\n        } else {\n          res = buffer.getUint8(buffer.position);\n        }\n        break;\n      case 2:\n        if (sign) {\n          res = buffer.getInt16(buffer.position);\n        } else {\n          res = buffer.getUint16(buffer.position);\n        }\n        break;\n      case 3:\n        if (sign) {\n          throw new Error('not supported for readByte 3');\n        } else {\n          res = buffer.getUint8(buffer.position) << 16;\n          res |= buffer.getUint8(buffer.position + 1) << 8;\n          res |= buffer.getUint8(buffer.position + 2);\n        }\n        break;\n      case 4:\n        if (sign) {\n          res = buffer.getInt32(buffer.position);\n        } else {\n          res = buffer.getUint32(buffer.position);\n        }\n        break;\n      case 8:\n        if (sign) {\n          throw new Error('not supported for readBody 8');\n        } else {\n          res = buffer.getUint32(buffer.position) << 32;\n          res |= buffer.getUint32(buffer.position + 4);\n        }\n        break;\n      default:\n        res = '';\n    }\n    buffer.position += size;\n    return res;\n  }\n\n  readUint8() {\n    return Stream.readByte(this.dataview, 1);\n  }\n\n  readUint16() {\n    return Stream.readByte(this.dataview, 2);\n  }\n\n  readUint24() {\n    return Stream.readByte(this.dataview, 3);\n  }\n\n  readUint32() {\n    return Stream.readByte(this.dataview, 4);\n  }\n\n  readUint64() {\n    return Stream.readByte(this.dataview, 8);\n  }\n\n  readInt8() {\n    return Stream.readByte(this.dataview, 1, true);\n  }\n  readInt16() {\n    return Stream.readByte(this.dataview, 2, true);\n  }\n\n  readInt32() {\n    return Stream.readByte(this.dataview, 4, true);\n  }\n\n  writeUint32(value) {\n    return new Uint8Array([value >>> 24 & 0xff, value >>> 16 & 0xff, value >>> 8 & 0xff, value & 0xff]);\n  }\n}\n\nexports.default = Stream;\n\n//# sourceURL=webpack://xgplayer-flv/../xgplayer-utils/src/write/stream.js?")},"./src/flv-live.js":
/*!*************************!*\
      !*** ./src/flv-live.js ***!
      \*************************/
/*! no static exports found */function(module,exports,__webpack_require__){eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _xgplayerRemux = __webpack_require__(/*! xgplayer-remux */ \"../xgplayer-remux/index.js\");\n\nvar _xgplayerRemux2 = _interopRequireDefault(_xgplayerRemux);\n\nvar _xgplayerLoader = __webpack_require__(/*! xgplayer-loader */ \"../xgplayer-loader/index.js\");\n\nvar _xgplayerDemux = __webpack_require__(/*! xgplayer-demux */ \"../xgplayer-demux/index.js\");\n\nvar _xgplayerBuffer = __webpack_require__(/*! xgplayer-buffer */ \"../xgplayer-buffer/index.js\");\n\nvar _xgplayerUtils = __webpack_require__(/*! xgplayer-utils */ \"../xgplayer-utils/index.js\");\n\nvar _xgplayerCodec = __webpack_require__(/*! xgplayer-codec */ \"../xgplayer-codec/index.js\");\n\nvar _xgplayer = __webpack_require__(/*! xgplayer */ \"xgplayer\");\n\nvar _xgplayer2 = _interopRequireDefault(_xgplayer);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst REMUX_EVENTS = _xgplayerUtils.EVENTS.REMUX_EVENTS;\nconst DEMUX_EVENTS = _xgplayerUtils.EVENTS.DEMUX_EVENTS;\nconst LOADER_EVENTS = _xgplayerUtils.EVENTS.LOADER_EVENTS;\nconst MSE_EVENTS = _xgplayerUtils.EVENTS.MSE_EVENTS;\n\nconst Tag = 'FLVController';\n\nclass Logger {\n  warn() {}\n}\n\nclass FlvController {\n  constructor(player) {\n    this.TAG = Tag;\n    this._player = player;\n\n    this.state = {\n      initSegmentArrived: false\n    };\n  }\n\n  init() {\n    this._context.registry('FETCH_LOADER', _xgplayerLoader.FetchLoader);\n    this._context.registry('LOADER_BUFFER', _xgplayerBuffer.XgBuffer);\n\n    this._context.registry('FLV_DEMUXER', _xgplayerDemux.FlvDemuxer);\n    this._context.registry('TRACKS', _xgplayerBuffer.Tracks);\n\n    this._context.registry('MP4_REMUXER', _xgplayerRemux2.default.Mp4Remuxer);\n    this._context.registry('PRE_SOURCE_BUFFER', _xgplayerBuffer.PreSource);\n\n    this._context.registry('COMPATIBILITY', _xgplayerCodec.Compatibility);\n\n    this._context.registry('LOGGER', Logger);\n    this.mse = this._context.registry('MSE', _xgplayerUtils.Mse)({ container: this._player.video });\n\n    this.initListeners();\n  }\n\n  initListeners() {\n    this.on(LOADER_EVENTS.LOADER_DATALOADED, this._handleLoaderDataLoaded.bind(this));\n    this.on(LOADER_EVENTS.LOADER_ERROR, this._handleNetworkError.bind(this));\n\n    this.on(DEMUX_EVENTS.MEDIA_INFO, this._handleMediaInfo.bind(this));\n    this.on(DEMUX_EVENTS.METADATA_PARSED, this._handleMetadataParsed.bind(this));\n    this.on(DEMUX_EVENTS.DEMUX_COMPLETE, this._handleDemuxComplete.bind(this));\n    this.on(DEMUX_EVENTS.DEMUX_ERROR, this._handleDemuxError.bind(this));\n\n    this.on(REMUX_EVENTS.INIT_SEGMENT, this._handleAppendInitSegment.bind(this));\n    this.on(REMUX_EVENTS.MEDIA_SEGMENT, this._handleMediaSegment.bind(this));\n\n    this.on(MSE_EVENTS.SOURCE_UPDATE_END, this._handleSourceUpdateEnd.bind(this));\n\n    this._player.on('timeupdate', this._handleTimeUpdate.bind(this));\n  }\n\n  _handleMediaInfo() {\n    if (!this._context.mediaInfo) {\n      this.emit(DEMUX_EVENTS.DEMUX_ERROR, new Error('failed to get mediainfo'));\n    }\n  }\n\n  _handleLoaderDataLoaded() {\n    this.emitTo('FLV_DEMUXER', DEMUX_EVENTS.DEMUX_START);\n  }\n\n  _handleMetadataParsed(type) {\n    this.emit(REMUX_EVENTS.REMUX_METADATA, type);\n  }\n  _handleDemuxComplete() {\n    this.emit(REMUX_EVENTS.REMUX_MEDIA);\n  }\n\n  _handleAppendInitSegment() {\n    this.state.initSegmentArrived = true;\n    this.mse.addSourceBuffers();\n  }\n\n  _handleMediaSegment() {\n    this.mse.addSourceBuffers();\n    this.mse.doAppend();\n  }\n\n  _handleSourceUpdateEnd() {\n    const time = this._player.currentTime;\n    const video = this._player.video;\n    const preloadTime = this._player.config.preloadTime || 5;\n\n    const { length } = video.buffered;\n\n    if (length === 0) {\n      return;\n    }\n\n    const bufferEnd = video.buffered.end(length - 1);\n    if (bufferEnd - time > preloadTime * 2) {\n      this._player.currentTime = bufferEnd - preloadTime;\n    }\n  }\n\n  _handleTimeUpdate() {\n    const time = this._player.currentTime;\n    if (time > 2) {\n      // 在直播时及时清空buffer，降低直播内存占用\n      this.mse.remove(time - 2);\n    }\n  }\n\n  _handleNetworkError() {\n    this._player.emit('error', new _xgplayer2.default.Errors('network', this._player.config.url));\n  }\n\n  _handleDemuxError() {\n    this._player.emit('error', new _xgplayer2.default.Errors('parse', this._player.config.url));\n  }\n\n  seek() {\n    if (!this.state.initSegmentArrived) {\n      this.loadData();\n    }\n  }\n\n  loadData() {\n    this.emit(LOADER_EVENTS.LADER_START, this._player.config.url);\n  }\n\n  pause() {\n    const loader = this._context.getInstance('FETCH_LOADER');\n\n    if (loader) {\n      loader.cancel();\n    }\n  }\n}\nexports.default = FlvController;\n\n//# sourceURL=webpack://xgplayer-flv/./src/flv-live.js?")},"./src/index.js":
/*!**********************!*\
      !*** ./src/index.js ***!
      \**********************/
/*! no static exports found */function(module,exports,__webpack_require__){eval("\n\nvar _xgplayer = __webpack_require__(/*! xgplayer */ \"xgplayer\");\n\nvar _xgplayer2 = _interopRequireDefault(_xgplayer);\n\nvar _xgplayerUtils = __webpack_require__(/*! xgplayer-utils */ \"../xgplayer-utils/index.js\");\n\nvar _flvLive = __webpack_require__(/*! ./flv-live */ \"./src/flv-live.js\");\n\nvar _flvLive2 = _interopRequireDefault(_flvLive);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst flvAllowedEvents = _xgplayerUtils.EVENTS.FlvAllowedEvents;\n\nclass FlvPlayer extends _xgplayer2.default {\n  constructor(config) {\n    super(config);\n    this.context = new _xgplayerUtils.Context(flvAllowedEvents);\n    this.initEvents();\n    // const preloadTime = player.config.preloadTime || 15\n  }\n\n  start() {\n    this.initFlv();\n    this.context.init();\n    super.start(this.flv.mse.url);\n  }\n\n  initFlvEvents(flv) {\n    const player = this;\n    flv.once(_xgplayerUtils.EVENTS.REMUX_EVENTS.INIT_SEGMENT, () => {\n      _xgplayer2.default.util.addClass(player.root, 'xgplayer-is-live');\n      if (!_xgplayer2.default.util.findDom(this.root, 'xg-live')) {\n        const live = _xgplayer2.default.util.createDom('xg-live', '正在直播', {}, 'xgplayer-live');\n        player.controls.appendChild(live);\n      }\n    });\n\n    flv.once(_xgplayerUtils.EVENTS.LOADER_EVENTS.LOADER_COMPLETE, () => {\n      // 直播完成，待播放器播完缓存后发送关闭事件\n      if (!player.paused) {\n        const timer = setInterval(() => {\n          const end = player.getBufferedRange()[1];\n          if (Math.abs(player.currentTime - end) < 0.5) {\n            player.emit('ended');\n            window.clearInterval(timer);\n          }\n        }, 200);\n      }\n    });\n  }\n\n  initEvents() {\n    this.on('timeupdate', () => {\n      this.loadData();\n    });\n\n    this.on('seeking', () => {\n      const time = this.currentTime;\n      const range = this.getBufferedRange();\n      if (time > range[1] || time < range[0]) {\n        this.flv.seek(this.currentTime);\n      }\n    });\n  }\n\n  initFlv() {\n    const flv = this.context.registry('FLV_CONTROLLER', _flvLive2.default)(this);\n    this.initFlvEvents(flv);\n    this.flv = flv;\n  }\n\n  play() {\n    if (this._hasStart) {\n      this._destroy();\n      this.context = new _xgplayerUtils.Context(flvAllowedEvents);\n      const flv = this.context.registry('FLV_CONTROLLER', _flvLive2.default)(this);\n      this.initFlvEvents(flv);\n      this.flv = flv;\n      this.context.init();\n      super.start(flv.mse.url);\n      super.play();\n    } else {\n      super.play();\n    }\n  }\n\n  pause() {\n    super.pause();\n    if (this.flv) {\n      this.flv.pause();\n    }\n  }\n\n  loadData(time = this.currentTime) {\n    if (this.flv) {\n      this.flv.seek(time);\n    }\n  }\n\n  destroy() {\n    this._destroy();\n    super.destroy();\n  }\n\n  _destroy() {\n    this.context.destroy();\n    this.flv = null;\n    this.context = null;\n  }\n\n  get src() {\n    return this.currentSrc;\n  }\n\n  set src(url) {\n    this.player.config.url = url;\n    if (!this.paused) {\n      this.pause();\n      this.once('pause', () => {\n        this.start(url);\n      });\n      this.once('canplay', () => {\n        this.play();\n      });\n    } else {\n      this.start(url);\n    }\n    this.once('canplay', () => {\n      this.currentTime = 0;\n    });\n  }\n}\n\nmodule.exports = FlvPlayer;\n\n//# sourceURL=webpack://xgplayer-flv/./src/index.js?")},0:
/*!****************************!*\
      !*** multi ./src/index.js ***!
      \****************************/
/*! no static exports found */function(module,exports,__webpack_require__){eval('module.exports = __webpack_require__(/*! ./src/index.js */"./src/index.js");\n\n\n//# sourceURL=webpack://xgplayer-flv/multi_./src/index.js?')},xgplayer:
/*!***************************!*\
      !*** external "xgplayer" ***!
      \***************************/
/*! no static exports found */function(module,exports){eval("module.exports = __WEBPACK_EXTERNAL_MODULE_xgplayer__;\n\n//# sourceURL=webpack://xgplayer-flv/external_%22xgplayer%22?")}})},module.exports=n(__webpack_require__(/*! xgplayer */"xgplayer"))},"../xgplayer-flv-vod/dist/index.js":
/*!***************************!*\
  !*** .-vod/dist/index.js ***!
  \***************************/
/*! no static exports found */function(e,t,n){"use strict";var r;window,e.exports=(r=n(/*! xgplayer */"xgplayer"),function(e){var t={};function n(r){if(t[r])return t[r].exports;var s=t[r]={i:r,l:!1,exports:{}};return e[r].call(s.exports,s,s.exports,n),s.l=!0,s.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)n.d(r,s,function(t){return e[t]}.bind(null,s));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}({"../../node_modules/events/events.js":
/*!*****************************************************************************************!*\
      !*** /Users/leonardo/Documents/front-end/player/xgplayer/node_modules/events/events.js ***!
      \*****************************************************************************************/
/*! no static exports found */function(e,t,n){var r,s="object"==typeof Reflect?Reflect:null,i=s&&"function"==typeof s.apply?s.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};r=s&&"function"==typeof s.ownKeys?s.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var a=Number.isNaN||function(e){return e!=e};function o(){o.init.call(this)}e.exports=o,o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var l=10;function d(e){return void 0===e._maxListeners?o.defaultMaxListeners:e._maxListeners}function u(e,t,n,r){var s,i,a,o;if("function"!=typeof n)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof n);if(void 0===(i=e._events)?(i=e._events=Object.create(null),e._eventsCount=0):(void 0!==i.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),i=e._events),a=i[t]),void 0===a)a=i[t]=n,++e._eventsCount;else if("function"==typeof a?a=i[t]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),(s=d(e))>0&&a.length>s&&!a.warned){a.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=a.length,o=l,console&&console.warn&&console.warn(o)}return e}function f(){for(var e=[],t=0;t<arguments.length;t++)e.push(arguments[t]);this.fired||(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,i(this.listener,this.target,e))}function c(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},s=f.bind(r);return s.listener=n,r.wrapFn=s,s}function h(e,t,n){var r=e._events;if(void 0===r)return[];var s=r[t];return void 0===s?[]:"function"==typeof s?n?[s.listener||s]:[s]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(s):m(s,s.length)}function p(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function m(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return l},set:function(e){if("number"!=typeof e||e<0||a(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");l=e}}),o.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||a(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},o.prototype.getMaxListeners=function(){return d(this)},o.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r="error"===e,s=this._events;if(void 0!==s)r=r&&void 0===s.error;else if(!r)return!1;if(r){var a;if(t.length>0&&(a=t[0]),a instanceof Error)throw a;var o=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw o.context=a,o}var l=s[e];if(void 0===l)return!1;if("function"==typeof l)i(l,this,t);else{var d=l.length,u=m(l,d);for(n=0;n<d;++n)i(u[n],this,t)}return!0},o.prototype.addListener=function(e,t){return u(this,e,t,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(e,t){return u(this,e,t,!0)},o.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);return this.on(e,c(this,e,t)),this},o.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);return this.prependListener(e,c(this,e,t)),this},o.prototype.removeListener=function(e,t){var n,r,s,i,a;if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);if(void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(s=-1,i=n.length-1;i>=0;i--)if(n[i]===t||n[i].listener===t){a=n[i].listener,s=i;break}if(s<0)return this;0===s?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,s),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,a||t)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var s,i=Object.keys(n);for(r=0;r<i.length;++r)"removeListener"!==(s=i[r])&&this.removeAllListeners(s);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},o.prototype.listeners=function(e){return h(this,e,!0)},o.prototype.rawListeners=function(e){return h(this,e,!1)},o.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):p.call(e,t)},o.prototype.listenerCount=p,o.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]}},"../xgplayer-buffer/index.js":
/*!***********************************!*\
      !*** ../xgplayer-buffer/index.js ***!
      \***********************************/
/*! no static exports found */function(e,t,n){e.exports={Track:n(/*! ./src/track */"../xgplayer-buffer/src/track.js").default,Tracks:n(/*! ./src/track */"../xgplayer-buffer/src/track.js").Tracks,AudioTrack:n(/*! ./src/track */"../xgplayer-buffer/src/track.js").AudioTrack,VideoTrack:n(/*! ./src/track */"../xgplayer-buffer/src/track.js").VideoTrack,XgBuffer:n(/*! ./src/buffer */"../xgplayer-buffer/src/buffer.js").XgBuffer,RemuxBuffer:n(/*! ./src/buffer */"../xgplayer-buffer/src/buffer.js").RemuxBuffer,PreSource:n(/*! ./src/presouce */"../xgplayer-buffer/src/presouce.js").default}},"../xgplayer-buffer/src/buffer.js":
/*!****************************************!*\
      !*** ../xgplayer-buffer/src/buffer.js ***!
      \****************************************/
/*! no static exports found */function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.XgBuffer=class{constructor(e){this.length=e||0,this.historyLen=e||0,this.array=[],this.offset=0}push(e){this.array.push(e),this.length+=e.byteLength,this.historyLen+=e.byteLength}shift(e){if(this.array.length<1)return new Uint8Array(0);if(void 0===e)return this._shiftBuffer();if(this.offset+e===this.array[0].length){let t=this.array[0].slice(this.offset,this.offset+e);return this.offset=0,this.array.shift(),this.length-=e,t}if(this.offset+e<this.array[0].length){let t=this.array[0].slice(this.offset,this.offset+e);return this.offset+=e,this.length-=e,t}let t=new Uint8Array(e),n=0;for(;this.array.length>0&&e>0;){if(this.offset+e<this.array[0].length){let r=this.array[0].slice(this.offset,this.offset+e);t.set(r,n),this.offset+=e,this.length-=e,e=0;break}{let r=this.array[0].length-this.offset;t.set(this.array[0].slice(this.offset,this.array[0].length),n),this.array.shift(),this.offset=0,n+=r,this.length-=r,e-=r}}return t}clear(){this.array=[],this.length=0,this.offset=0}destroy(){this.clear(),this.historyLen=0}_shiftBuffer(){return this.length-=this.array[0].length,this.offset=0,this.array.shift()}toInt(e,t){let n=0,r=this.offset+e;for(;r<this.offset+t+e;)r<this.array[0].length?n=256*n+this.array[0][r]:this.array[1]&&(n=256*n+this.array[1][r-this.array[0].length]),r++;return n}},t.RemuxBuffer=class{constructor(){this.video=[],this.audio=[]}destroy(){this.video=[],this.audio=[]}}},"../xgplayer-buffer/src/presouce.js":
/*!******************************************!*\
      !*** ../xgplayer-buffer/src/presouce.js ***!
      \******************************************/
/*! no static exports found */function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});class r{constructor(){this.mimetype="",this.init=null,this.data=[]}}t.default=class{constructor(){this.sources={}}getSource(e){return this.sources[e]}createSource(e){return this.sources[e]=new r,this.sources[e]}clear(){this.sources={}}destroy(){this.sources={}}}},"../xgplayer-buffer/src/track.js":
/*!***************************************!*\
      !*** ../xgplayer-buffer/src/track.js ***!
      \***************************************/
/*! no static exports found */function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});class r{constructor(){this.id=-1,this.sequenceNumber=0,this.samples=[],this.droppedSamples=[],this.length=0}reset(){this.sequenceNumber=0,this.samples=[],this.length=0}distroy(){this.reset(),this.id=-1}}t.default=r,t.AudioTrack=class extends r{constructor(){super(),this.TAG="AudioTrack",this.type="audio"}},t.VideoTrack=class extends r{constructor(){super(),this.TAG="VideoTrack",this.type="video",this.dropped=0}reset(){this.sequenceNumber=0,this.samples=[],this.length=0,this.dropped=0}},t.Tracks=class{constructor(){this.audioTrack=null,this.videoTrack=null}}},"../xgplayer-codec/index.js":
/*!**********************************!*\
      !*** ../xgplayer-codec/index.js ***!
      \**********************************/
/*! no static exports found */function(e,t,n){e.exports={Nalunit:n(/*! ./src/h264/nalunit */"../xgplayer-codec/src/h264/nalunit/index.js").default,SpsParser:n(/*! ./src/h264/nalunit/sps */"../xgplayer-codec/src/h264/nalunit/sps.js").default,Compatibility:n(/*! ./src/compatibility */"../xgplayer-codec/src/compatibility.js").default}},"../xgplayer-codec/src/aac/aac-helper.js":
/*!***********************************************!*\
      !*** ../xgplayer-codec/src/aac/aac-helper.js ***!
      \***********************************************/
/*! no static exports found */function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{static getSilentFrame(e,t){if("mp4a.40.2"===e){if(1===t)return new Uint8Array([0,200,0,128,35,128]);if(2===t)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224])}else{if(1===t)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null}}},"../xgplayer-codec/src/compatibility.js":
/*!**********************************************!*\
      !*** ../xgplayer-codec/src/compatibility.js ***!
      \**********************************************/
/*! no static exports found */function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r,s=n(/*! xgplayer-utils */"../xgplayer-utils/index.js"),i=(r=n(/*! ./aac/aac-helper */"../xgplayer-codec/src/aac/aac-helper.js"))&&r.__esModule?r:{default:r};const{REMUX_EVENTS:a}=s.EVENTS;class o{constructor(){this.nextAudioDts=0,this.nextVideoDts=0,this.lastAudioSamplesLen=0,this.lastVideoSamplesLen=0,this.lastVideoDts=void 0,this.lastAudioDts=void 0,this.allAudioSamplesCount=0,this.allVideoSamplesCount=0,this._firstAudioSample=null,this._firstVideoSample=null,this.filledAudioSamples=[],this.filledVideoSamples=[]}init(){this.before(a.REMUX_MEDIA,this.doFix.bind(this))}reset(){this.nextAudioDts=0,this.nextVideoDts=0,this.lastAudioSamplesLen=0,this.lastVideoSamplesLen=0,this.lastVideoDts=void 0,this.lastAudioDts=void 0,this.allAudioSamplesCount=0,this.allVideoSamplesCount=0,this._firstAudioSample=null,this._firstVideoSample=null,this.filledAudioSamples=[],this.filledVideoSamples=[]}doFix(){const{isFirstAudioSamples:e,isFirstVideoSamples:t}=this.getFirstSample();this.removeInvalidSamples(),this.recordSamplesCount(),this._firstVideoSample&&this.fixRefSampleDuration(this.videoTrack.meta,this.videoTrack.samples),this._firstAudioSample&&this.fixRefSampleDuration(this.audioTrack.meta,this.audioTrack.samples),this.doFixVideo(t),this.doFixAudio(e)}doFixVideo(e){let{samples:t,meta:n}=this.videoTrack;if(n.frameRate&&!1===n.frameRate.fixed)return;if(!t||!t.length||!this._firstVideoSample)return;const r=t[0],s=r.dts,i=t.length;if(e&&this._firstAudioSample){const e=this._firstVideoSample.dts,s=e-this._firstAudioSample.dts;if(s>2*n.refSampleDuration){const i=Math.floor(s/n.refSampleDuration);for(let s=0;s<i;s++){const i=Object.assign({},r);i.dts=e-(s+1)*n.refSampleDuration,i.pts=i.dts+i.cts,t.unshift(i),this.filledVideoSamples.push({dts:i.dts,size:i.data.byteLength})}}}let a;if(this.nextVideoDts){a=s-this.nextVideoDts;const e=Math.abs(a);if(a>2*n.refSampleDuration){const e=Math.floor(a/n.refSampleDuration);for(let r=0;r<e;r++){const e=Object.assign({},t[0]),i=s-(r+1)*n.refSampleDuration;e.dts=i>this.nextVideoDts?i:this.nextVideoDts,e.pts=e.dts+e.cts,this.videoTrack.samples.unshift(e),this.filledVideoSamples.push({dts:e.dts,size:e.data.byteLength})}}else e<=10&&e>0&&(t[0].dts=this.nextVideoDts,t[0].originDts=t[0].dts,t[0].cts=t[0].cts||t[0].pts-t[0].dts,t[0].pts=t[0].dts+t[0].cts)}const o=t[t.length-1].dts,l=t.length>=2?o-t[t.length-2].dts:n.refSampleDuration;this.lastVideoSamplesLen=i,this.nextVideoDts=o+l,this.lastVideoDts=o;for(let e=0,r=t.length;e<r;e++){const r=t[e],s=t[e+1];if(!s)break;const i=s.dts-r.dts;if(i>2*n.refSampleDuration){let a=Math.floor(i/n.refSampleDuration),o=0;for(;o<a;){const i=Object.assign({},s);i.dts=r.dts+(o+1)*n.refSampleDuration,i.pts=i.dts+i.cts,i<s.dts&&(t.splice(e,0,i),this.filledVideoSamples.push({dts:i.dts,size:i.data.byteLength})),o++,e++}}}this.videoTrack.samples=t}doFixAudio(e){let{samples:t,meta:n}=this.audioTrack;if(!t||!t.length)return;const r=t.length,s=i.default.getSilentFrame(n.codec,n.channelCount),a=this._firstAudioSample;if(t=o.sortAudioSamples(t),this._firstVideoSample&&e){const e=this._firstVideoSample.pts?this._firstVideoSample.pts:this._firstVideoSample.dts+this._firstVideoSample.cts;if(a.dts-e>n.refSampleDuration){const r=Math.floor((a.dts-e)/n.refSampleDuration);for(let e=0;e<r;e++){const r={data:s,datasize:s.byteLength,dts:a.dts-(e+1)*n.refSampleDuration,filtered:0};t.unshift(r),this.filledAudioSamples.push({dts:r.dts,size:r.data.byteLength})}}}let l;const d=t[0].dts;if(this.nextAudioDts){l=d-this.nextAudioDts;const e=Math.abs(l);if(e>n.refSampleDuration&&1===r&&1===this.lastAudioSamplesLen&&(n.refSampleDurationFixed=void 0),l>2*n.refSampleDuration)if(1===r&&1===this.lastAudioSamplesLen)n.refSampleDurationFixed=void 0!==n.refSampleDurationFixed?n.refSampleDurationFixed+l:n.refSampleDuration+l;else{const e=Math.floor(l/n.refSampleDuration);for(let r=0;r<e;r++){const e=d-(r+1)*n.refSampleDuration,s=Object.assign({},t[0],{dts:e>this.nextAudioDts?e:this.nextAudioDts});this.filledAudioSamples.push({dts:s.dts,size:s.data.byteLength}),this.audioTrack.samples.unshift(s)}}else e<=10&&e>0&&(t[0].dts=this.nextAudioDts,t[0].pts=this.nextAudioDts)}const u=t[t.length-1].dts,f=t.length>=2?u-t[t.length-2].dts:n.refSampleDuration;this.lastAudioSamplesLen=r,this.nextAudioDts=n.refSampleDurationFixed?u+n.refSampleDurationFixed:u+f,this.lastAudioDts=u;for(let e=0,n=t.length;e<n;e++){const n=t[e],r=t[e+1];if(!r)break;const s=r.dts-n.dts;t[e].duration=s}this.audioTrack.samples=o.sortAudioSamples(t)}getFirstSample(){let{samples:e}=this.videoTrack,{samples:t}=this.audioTrack,n=!1,r=!1;return!this._firstVideoSample&&e.length&&(this._firstVideoSample=o.findFirstVideoSample(e),n=!0),!this._firstAudioSample&&t.length&&(this._firstAudioSample=o.findFirstAudioSample(t),r=!0),{isFirstVideoSamples:n,isFirstAudioSamples:r}}fixRefSampleDuration(e,t){const n="video"===e.type,r=n?this.allVideoSamplesCount:this.allAudioSamplesCount,s=n?this._firstVideoSample.dts:this._firstAudioSample.dts,i=n?this.filledVideoSamples.length:this.filledAudioSamples.length;if(!e.refSampleDuration||e.refSampleDuration<=0||Number.isNaN(e.refSampleDuration)){if(t.length>=1){const n=t[t.length-1].dts;e.refSampleDuration=Math.floor((n-s)/(r+i-1))}}else if(e.refSampleDuration&&t.length>=3){const n=(t[t.length-1].dts-t[0].dts)/t.length;e.refSampleDuration=Math.abs(e.refSampleDuration-n)<=e.refSampleDuration?e.refSampleDuration:n}}recordSamplesCount(){const{audioTrack:e,videoTrack:t}=this;this.allAudioSamplesCount+=e.samples.length,this.allVideoSamplesCount+=t.samples.length}removeInvalidSamples(){const{_firstVideoSample:e,_firstAudioSample:t}=this;this.audioTrack.samples=this.audioTrack.samples.filter(e=>e.dts>=t.dts&&(void 0===this.lastAudioDts||e.dts>this.lastAudioDts)),this.videoTrack.samples=this.videoTrack.samples.filter(t=>t.dts>=e.dts&&(void 0===this.lastVideoDts||t.dts>this.lastVideoDts))}static sortAudioSamples(e){return 1===e.length?e:e.sort((e,t)=>e.dts-t.dts)}static findFirstAudioSample(e){return e&&0!==e.length?o.sortAudioSamples(e)[0]:null}static findFirstVideoSample(e){if(!e.length)return null;const t=e.sort((e,t)=>e.dts-t.dts);for(let e=0,n=t.length;e<n;e++)if(t[e].isKeyframe)return t[e]}get tracks(){return this._context.getInstance("TRACKS")}get audioTrack(){return this.tracks?this.tracks.audioTrack:null}get videoTrack(){return this.tracks?this.tracks.videoTrack:null}}t.default=o},"../xgplayer-codec/src/h264/nalunit/golomb.js":
/*!****************************************************!*\
      !*** ../xgplayer-codec/src/h264/nalunit/golomb.js ***!
      \****************************************************/
/*! no static exports found */function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(e){this.TAG="Golomb",this._buffer=e,this._bufferIndex=0,this._totalBytes=e.byteLength,this._totalBits=8*e.byteLength,this._currentWord=0,this._currentWordBitsLeft=0}destroy(){this._buffer=null}_fillCurrentWord(){let e=this._totalBytes-this._bufferIndex,t=Math.min(4,e),n=new Uint8Array(4);n.set(this._buffer.subarray(this._bufferIndex,this._bufferIndex+t)),this._currentWord=new DataView(n.buffer).getUint32(0,!1),this._bufferIndex+=t,this._currentWordBitsLeft=8*t}readBits(e){if(e<=this._currentWordBitsLeft){let t=this._currentWord>>>32-e;return this._currentWord<<=e,this._currentWordBitsLeft-=e,t}let t=this._currentWordBitsLeft?this._currentWord:0;this._currentWordBitsLeft;let n=e-this._currentWordBitsLeft;this._fillCurrentWord();let r=Math.min(n,this._currentWordBitsLeft),s=this._currentWord>>>32-r;return this._currentWord<<=r,this._currentWordBitsLeft-=r,t<<r|s}readBool(){return 1===this.readBits(1)}readByte(){return this.readBits(8)}_skipLeadingZero(){let e;for(e=0;e<this._currentWordBitsLeft;e++)if(0!=(this._currentWord&2147483648>>>e))return this._currentWord<<=e,this._currentWordBitsLeft-=e,e;return this._fillCurrentWord(),e+this._skipLeadingZero()}readUEG(){let e=this._skipLeadingZero();return this.readBits(e+1)-1}readSEG(){let e=this.readUEG();return 1&e?e+1>>>1:-1*(e>>>1)}}},"../xgplayer-codec/src/h264/nalunit/index.js":
/*!***************************************************!*\
      !*** ../xgplayer-codec/src/h264/nalunit/index.js ***!
      \***************************************************/
/*! no static exports found */function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r,s=(r=n(/*! ./sps */"../xgplayer-codec/src/h264/nalunit/sps.js"))&&r.__esModule?r:{default:r};class i{static getNalunits(e){if(e.length-e.position<4)return[];let t=e.dataview,n=e.position;return 1===t.getInt32(n)||0===t.getInt16(n)&&1===t.getInt8(n+2)?i.getAnnexbNals(e):i.getAvccNals(e)}static getAnnexbNals(e){let t=[],n=i.getHeaderPositionAnnexB(e),r=n.pos,s=r;for(;r<e.length-4;){let a=e.buffer.slice(r,r+n.headerLength);n.pos===e.position&&e.skip(n.headerLength),s=(n=i.getHeaderPositionAnnexB(e)).pos;let o={header:a,body:new Uint8Array(e.buffer.slice(r+a.byteLength,s))};i.analyseNal(o),t.push(o),e.skip(s-e.position),r=s}return t}static getAvccNals(e){let t=[];for(;e.position<e.length-4;){let n=e.dataview.getInt32(e.position);if(!(e.length-e.position>=n))break;{let r=e.buffer.slice(e.position,e.position+4);e.skip(4);let s=e.buffer.slice(e.position,e.position+n);e.skip(n);let a={header:r,body:s};i.analyseNal(a),t.push(a)}}return t}static analyseNal(e){switch(31&e.body[0]){case 1:e.ndr=!0;break;case 5:e.idr=!0;break;case 6:break;case 7:e.sps=s.default.parseSPS(e.body);break;case 8:e.pps=!0}}static getHeaderPositionAnnexB(e){let t=e.position,n=0;for(;3!==n&&4!==n&&t<e.length-4;)0===e.dataview.getInt16(t)?1===e.dataview.getInt16(t+2)?n=4:1===e.dataview.getInt8(t+2)?n=3:t++:t++;return t===e.length-4&&(0===e.dataview.getInt16(t)?1===e.dataview.getInt16(t+2)&&(n=4):(t++,0===e.dataview.getInt16(t)&&1===e.dataview.getInt8(t)?n=3:t=e.length)),{pos:t,headerLength:n}}static getAvcc(e,t){let n=new Uint8Array(e.byteLength+t.byteLength+11);n[0]=1,n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=255,n[5]=225;let r=6;return n.set(new Uint8Array([e.byteLength>>>8&255,255&e.byteLength]),r),r+=2,n.set(e,r),n[r+=e.byteLength]=1,r++,n.set(new Uint8Array([t.byteLength>>>8&255,255&t.byteLength]),r),r+=2,n.set(t,r),n}}t.default=i},"../xgplayer-codec/src/h264/nalunit/sps.js":
/*!*************************************************!*\
      !*** ../xgplayer-codec/src/h264/nalunit/sps.js ***!
      \*************************************************/
/*! no static exports found */function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r,s=(r=n(/*! ./golomb */"../xgplayer-codec/src/h264/nalunit/golomb.js"))&&r.__esModule?r:{default:r};class i{static _ebsp2rbsp(e){let t=e,n=t.byteLength,r=new Uint8Array(n),s=0;for(let e=0;e<n;e++)e>=2&&3===t[e]&&0===t[e-1]&&0===t[e-2]||(r[s]=t[e],s++);return new Uint8Array(r.buffer,0,s)}static parseSPS(e){let t=i._ebsp2rbsp(e),n=new s.default(t);n.readByte();let r=n.readByte();n.readByte();let a=n.readByte();n.readUEG();let o=i.getProfileString(r),l=i.getLevelString(a),d=1,u=420,f=8;if((100===r||110===r||122===r||244===r||44===r||83===r||86===r||118===r||128===r||138===r||144===r)&&(3===(d=n.readUEG())&&n.readBits(1),d<=3&&(u=[0,420,422,444][d]),f=n.readUEG()+8,n.readUEG(),n.readBits(1),n.readBool())){let e=3!==d?8:12;for(let t=0;t<e;t++)n.readBool()&&(t<6?i._skipScalingList(n,16):i._skipScalingList(n,64))}n.readUEG();let c=n.readUEG();if(0===c)n.readUEG();else if(1===c){n.readBits(1),n.readSEG(),n.readSEG();let e=n.readUEG();for(let t=0;t<e;t++)n.readSEG()}n.readUEG(),n.readBits(1);let h=n.readUEG(),p=n.readUEG(),m=n.readBits(1);0===m&&n.readBits(1),n.readBits(1);let g=0,x=0,_=0,y=0;n.readBool()&&(g=n.readUEG(),x=n.readUEG(),_=n.readUEG(),y=n.readUEG());let b=1,v=1,E=0,T=!0,S=0,w=0;if(n.readBool()){if(n.readBool()){let e=n.readByte(),t=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2],r=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1];e>0&&e<16?(b=t[e-1],v=r[e-1]):255===e&&(b=n.readByte()<<8|n.readByte(),v=n.readByte()<<8|n.readByte())}if(n.readBool()&&n.readBool(),n.readBool()&&(n.readBits(4),n.readBool()&&n.readBits(24)),n.readBool()&&(n.readUEG(),n.readUEG()),n.readBool()){let e=n.readBits(32),t=n.readBits(32);T=n.readBool(),E=(S=t)/(w=2*e)}}let A=1;1===b&&1===v||(A=b/v);let k=0,R=0;0===d?(k=1,R=2-m):(k=3===d?1:2,R=(1===d?2:1)*(2-m));let D=16*(h+1),L=16*(p+1)*(2-m);D-=(g+x)*k,L-=(_+y)*R;let U=Math.ceil(D*A);return n.destroy(),n=null,{profile_string:o,level_string:l,bit_depth:f,chroma_format:u,chroma_format_string:i.getChromaFormatString(u),frame_rate:{fixed:T,fps:E,fps_den:w,fps_num:S},par_ratio:{width:b,height:v},codec_size:{width:D,height:L},present_size:{width:U,height:L}}}static _skipScalingList(e,t){let n=8,r=8,s=0;for(let i=0;i<t;i++)0!==r&&(r=(n+(s=e.readSEG())+256)%256),n=0===r?n:r}static getProfileString(e){switch(e){case 66:return"Baseline";case 77:return"Main";case 88:return"Extended";case 100:return"High";case 110:return"High10";case 122:return"High422";case 244:return"High444";default:return"Unknown"}}static getLevelString(e){return(e/10).toFixed(1)}static getChromaFormatString(e){switch(e){case 420:return"4:2:0";case 422:return"4:2:2";case 444:return"4:4:4";default:return"Unknown"}}static toVideoMeta(e){let t={};e&&e.codec_size&&(t.codecWidth=e.codec_size.width,t.codecHeight=e.codec_size.height,t.presentWidth=e.present_size.width,t.presentHeight=e.present_size.height),t.profile=e.profile_string,t.level=e.level_string,t.bitDepth=e.bit_depth,t.chromaFormat=e.chroma_format,t.parRatio={width:e.par_ratio.width,height:e.par_ratio.height},t.frameRate=e.frame_rate;let n=t.frameRate.fps_den,r=t.frameRate.fps_num;t.refSampleDuration=Math.floor(t.timescale*(n/r))}}t.default=i},"../xgplayer-demux/src/flv/amf-parser.js":
/*!***********************************************!*\
      !*** ../xgplayer-demux/src/flv/amf-parser.js ***!
      \***********************************************/
/*! no static exports found */function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(/*! xgplayer-utils */"../xgplayer-utils/index.js");const s={NUMBER:0,BOOLEAN:1,STRING:2,OBJECT:3,MIX_ARRAY:8,OBJECT_END:9,STRICT_ARRAY:10,DATE:11,LONE_STRING:12};t.default=class{constructor(){this.offset=0,this.readOffset=this.offset}resolve(e,t){if(t<3)throw new Error("not enough data for metainfo");const n={},r=this.parseValue(e),s=this.parseValue(e,t-r.bodySize);return n[r.data]=s.data,this.resetStatus(),n}resetStatus(){this.offset=0,this.readOffset=this.offset}parseString(e){const t=new DataView(e,this.readOffset).getUint16(0,!r.isLe);let n="";n=t>0?r.UTF8.decode(new Uint8Array(e,this.readOffset+2,t)):"";let s=t+2;return this.readOffset+=s,{data:n,bodySize:t+2}}parseDate(e,t){const n=new DataView(e,this.readOffset,t);let s=n.getFloat64(0,!r.isLe);return s+=60*n.getInt16(8,!r.isLe)*1e3,this.readOffset+=10,{data:new Date(s),bodySize:10}}parseObject(e,t){const n=this.parseString(e,t),r=this.parseValue(e,t-n.bodySize);return{data:{name:n.data,value:r.data},bodySize:n.bodySize+r.bodySize,isObjEnd:r.isObjEnd}}parseLongString(e){const t=new DataView(e,this.readOffset).getUint32(0,!r.isLe);let n="";return n=t>0?r.UTF8.decode(new Uint8Array(e,this.readOffset+2,t)):"",this.readOffset+=t+4,{data:n,bodySize:t+4}}parseValue(e,t){let n=new ArrayBuffer;n=e instanceof ArrayBuffer?e:e.buffer;const{NUMBER:i,BOOLEAN:a,STRING:o,OBJECT:l,MIX_ARRAY:d,OBJECT_END:u,STRICT_ARRAY:f,DATE:c,LONE_STRING:h}=s,p=new DataView(n,this.readOffset,t);let m=!1;const g=p.getUint8(0);let x=1;this.readOffset+=1;let _=null;switch(g){case i:_=p.getFloat64(1,!r.isLe),this.readOffset+=8,x+=8;break;case a:_=!!p.getUint8(1),this.readOffset+=1,x+=1;break;case o:{const e=this.parseString(n);_=e.data,x+=e.bodySize;break}case l:{_={};let e=0;for(16777215&p.getUint32(t-4,!r.isLe)&&(e=3);x<t-4;){const r=this.parseObject(n,t-x-e);if(r.isObjectEnd)break;_[r.data.name]=r.data.value,x+=r.bodySize}x<=t-3&&9==(16777215&p.getUint32(x-1,!r.isLe))&&(this.readOffset+=3,x+=3);break}case d:{_={},x+=4,this.readOffset+=4;let e=0;for(9==(16777215&p.getUint32(t-4,!r.isLe))&&(e=3);x<t-8;){const r=this.parseObject(n,t-x-e);if(r.isObjectEnd)break;_[r.data.name]=r.data.value,x+=r.bodySize}x<=t-3&&9==(16777215&p.getUint32(x-1,!r.isLe))&&(x+=3,this.readOffset+=3);break}case u:_=null,m=!0;break;case f:{_=[];const e=p.getUint32(1,!r.isLe);x+=4,this.readOffset+=4;for(let r=0;r<e;r++){const e=this.parseValue(n,t-x);_.push(e.data),x+=e.bodySize}break}case c:{const e=this.parseDate(n,t-1);_=e.data,x+=e.bodySize;break}case h:{const e=this.parseLongString(n,t-1);_=e.data,x+=e.bodySize;break}default:x=t}return{data:_,bodySize:x,isObjEnd:m}}}},"../xgplayer-demux/src/flv/index.js":
/*!******************************************!*\
      !*** ../xgplayer-demux/src/flv/index.js ***!
      \******************************************/
/*! no static exports found */function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r,s=n(/*! xgplayer-utils */"../xgplayer-utils/index.js"),i=n(/*! xgplayer-codec */"../xgplayer-codec/index.js"),a=n(/*! xgplayer-buffer */"../xgplayer-buffer/index.js"),o=(r=n(/*! ./amf-parser */"../xgplayer-demux/src/flv/amf-parser.js"))&&r.__esModule?r:{default:r};const l=s.EVENTS.DEMUX_EVENTS;class d{constructor(){this._firstFragmentLoaded=!1,this._trackNum=0,this._hasScript=!1}init(){this.on(l.DEMUX_START,this.doParseFlv.bind(this))}static isFlvFile(e){return!(70!==e[0]||76!==e[1]||86!==e[2]||1!==e[3])}static getPlayType(e){const t={hasVideo:!1,hasAudio:!1};return!0&e&&(t.hasVideo=!0),!0&e&&(t.hasAudio=!0),t}doParseFlv(){if(this._firstFragmentLoaded){if(this.loaderBuffer.length<11)return;let e;do{e=this._parseFlvTag()}while(e);this.emit(l.DEMUX_COMPLETE)}else{if(this.loaderBuffer.length<13)return;const e=this.loaderBuffer.shift(13);this.parseFlvHeader(e),this.doParseFlv()}}parseFlvHeader(e){if(d.isFlvFile(e)){this._firstFragmentLoaded=!0;const t=d.getPlayType(e[4]);t.hasVideo&&this.initVideoTrack(),t.hasAudio&&this.initAudioTrack()}else this.emit(l.DEMUX_ERROR,new Error("invalid flv file")),this.doParseFlv();this.doParseFlv()}initVideoTrack(){this._trackNum++;let e=new a.VideoTrack;e.meta=new s.VideoTrackMeta,e.id=e.meta.id=this._trackNum,this.tracks.videoTrack=e}initAudioTrack(){this._trackNum++;let e=new a.AudioTrack;e.meta=new s.AudioTrackMeta,e.id=e.meta.id=this._trackNum,this.tracks.audioTrack=e}_parseFlvTag(){if(this.loaderBuffer.length<11)return null;let e=this._parseFlvTagHeader();return e&&this._processChunk(e),e}_parseFlvTagHeader(){let e=0,t={},n=this.loaderBuffer.toInt(e,1);if(e+=1,t.filtered=(32&n)>>>5,t.tagType=31&n,t.datasize=this.loaderBuffer.toInt(e,3),e+=3,8!==t.tagType&&9!==t.tagType&&11!==t.tagType&&18!==t.tagType||0!==this.loaderBuffer.toInt(8,3))return this.loaderBuffer&&this.loaderBuffer.length>0&&this.loaderBuffer.shift(1),this.logger.warn(this.TAG,"tagType "+t.tagType),null;if(this.loaderBuffer.length<t.datasize+15)return null;this.loaderBuffer.shift(4);let r=this.loaderBuffer.toInt(0,3);this.loaderBuffer.shift(3);let s=this.loaderBuffer.shift(1)[0];return s>0&&(r+=16777216*s),t.dts=r,this.loaderBuffer.shift(3),t}_processChunk(e){switch(e.tagType){case 18:this._parseScriptData(e);break;case 8:this._parseAACData(e);break;case 9:this._parseHevcData(e);break;case 11:this.loaderBuffer.shift(3);break;default:this.loaderBuffer.shift(1)}}_parseScriptData(e){let t=this.tracks.audioTrack,n=this.tracks.videoTrack,r=this.loaderBuffer.shift(e.datasize);const s=(new o.default).resolve(r,r.length),i=this._context.onMetaData=s?s.onMetaData:void 0;if(this._context.mediaInfo.duration=i.duration,this._context.mediaInfo.hasVideo=i.hasVideo,this._context.mediaInfo.hsaAudio=i.hasAudio,this._datasizeValidator(e.datasize)&&(this.emit(l.MEDIA_INFO),this._hasScript=!0),t&&!t.hasSpecificConfig){let e=t.meta;switch(i.audiosamplerate&&(e.sampleRate=i.audiosamplerate),i.audiochannels&&(e.channelCount=i.audiochannels),i.audiosamplerate){case 44100:e.sampleRateIndex=4;break;case 22050:e.sampleRateIndex=7;break;case 11025:e.sampleRateIndex=10}}if(n&&!n.hasSpecificConfig){let e=n.meta;if("number"==typeof i.framerate){let t=Math.floor(1e3*i.framerate);if(t>0){let n=t/1e3;e.frameRate||(e.frameRate={}),e.frameRate.fixed=!0,e.frameRate.fps=n,e.frameRate.fps_num=t,e.frameRate.fps_den=1e3}}}}_aacSequenceHeaderParser(e){let t={hasSpecificConfig:!0};t.objectType=e[1]>>>3,t.sampleRateIndex=(7&e[1])<<1|e[2]>>>7,t.audiosamplerate=this._switchAudioSampleRate(t.sampleRateIndex),t.channelCount=(120&e[2])>>>3,t.frameLength=(4&e[2])>>>2,t.dependsOnCoreCoder=(2&e[2])>>>1,t.extensionFlagIndex=1&e[2],t.codec=`mp4a.40.${t.objectType}`;let n,r,s=window.navigator.userAgent.toLowerCase(),i=t.sampleRateIndex;return-1!==s.indexOf("firefox")?t.sampleRateIndex>=6?(t.objectType=5,r=new Array(4),n=i-3):(t.objectType=2,r=new Array(2),n=i):-1!==s.indexOf("android")?(t.objectType=2,r=new Array(2),n=i):(t.objectType=5,n=t.sampleRateIndex,r=new Array(4),t.sampleRateIndex>=6?n=t.sampleRateIndex-3:1===t.channelCount&&(t.objectType=2,r=new Array(2),n=t.sampleRateIndex)),r[0]=t.objectType<<3,r[0]|=(15&t.sampleRateIndex)>>>1,r[1]=(15&t.sampleRateIndex)<<7,r[1]|=(15&t.channelCount)<<3,5===t.objectType&&(r[1]|=(15&n)>>>1,r[2]=(1&n)<<7,r[2]|=8,r[3]=0),t.config=r,t}_parseAACData(e){let t=this.tracks.audioTrack;if(!t)return;let n=t.meta;n||(n=new s.AudioTrackMeta);let r=this.loaderBuffer.shift(1)[0];e.data=this.loaderBuffer.shift(e.datasize-1);let i=(240&r)>>>4;t.format=i,10!==i&&this.emit(l.DEMUX_ERROR,new Error(`invalid audio format: ${i}`)),10!==i||this._hasAudioSequence||(n.sampleRate=this._switchAudioSamplingFrequency(r),n.sampleRateIndex=(12&r)>>>2,n.frameLenth=(2&r)>>>1,n.channelCount=1&r,n.refSampleDuration=Math.floor(1024/n.audioSampleRate*n.timescale));let a=n.audioSampleRate,o=n.sampleRateIndex,d=n.refSampleDuration;delete e.tagType;let u=this._datasizeValidator(e.datasize);if(0===e.data[0]){let t=this._aacSequenceHeaderParser(e.data);a=t.audiosamplerate||n.audioSampleRate,o=t.sampleRateIndex||n.sampleRateIndex,d=Math.floor(1024/a*n.timescale),n.channelCount=t.channelCount,n.sampleRate=a,n.sampleRateIndex=o,n.refSampleDuration=d,n.duration=this._context.mediaInfo.duration*n.timescale,n.config=t.config,n.objectType=t.objectType;const r=this._context.mediaInfo.audio;r.codec=t.codec,r.channelCount=t.channelCount,r.sampleRate=a,r.sampleRateIndex=t.audioSampleRateIndex,this._hasScript&&!this._hasAudioSequence?this.emit(l.METADATA_PARSED,"audio"):this._hasScript&&this._hasAudioSequence&&this.emit(l.AUDIO_METADATA_CHANGE),this._hasAudioSequence=!0}else e.data=e.data.slice(1,e.data.length),t.samples.push(e);if(!u){const t=new Error("TAG length error at "+e.datasize);this.emit(l.DEMUX_ERROR,t.message),this.logger.warn(this.TAG,t.message)}}_parseHevcData(e){let t=this.loaderBuffer.shift(1)[0];e.frameType=(240&t)>>>4,e.isKeyframe=1===e.frameType;let n=15&t;if(this.tracks.videoTrack.codecID=n,e.avcPacketType=this.loaderBuffer.shift(1)[0],e.cts=this.loaderBuffer.toInt(0,3),this.loaderBuffer.shift(3),12===n){const t=this.loaderBuffer.shift(e.datasize-5);if(e.data=t,0!==Number.parseInt(e.avcPacketType)){this._datasizeValidator(e.datasize)||this.logger.warn(this.TAG,`invalid video tag datasize: ${e.datasize}`);let t={},n=0;for(t.cts=e.cts,t.dts=e.dts;e.data.length>n;){let r=e.data.slice(Number.parseInt(n),4+n);t.size=r[3],t.size+=256*r[2],t.size+=256*r[1]*256,t.size+=256*r[0]*256*256,n+=4,t.data=e.data.slice(Number.parseInt(n),t.size+n),n+=t.size,this.tracks.videoTrack.samples.push(t),this.emit(l.METADATA_PARSED,"video")}}else 0===Number.parseInt(e.avcPacketType)&&(this._datasizeValidator(e.datasize)?this.emit(l.METADATA_PARSED,"video"):this.logger.warn(this.TAG,`invalid video tag datasize: ${e.datasize}`))}else if(7===n){let t=this.loaderBuffer.shift(e.datasize-5);if(0===t[4]&&0===t[5]&&0===t[6]&&1===t[7]){let e=0;for(let n=0;n<4;n++)e=256*e+t[n];e-=4,(t=t.slice(4,t.length))[3]=e%256,e=(e-t[3])/256,t[2]=e%256,e=(e-t[2])/256,t[1]=e%256,t[0]=(e-t[1])/256}if(e.data=t,0===e.avcPacketType)this._avcSequenceHeaderParser(e.data),this._datasizeValidator(e.datasize)&&(this._hasScript&&!this._hasVideoSequence?this.emit(l.METADATA_PARSED,"video"):this._hasScript&&this._hasVideoSequence&&this.emit(l.VIDEO_METADATA_CHANGE),this._hasVideoSequence=!0);else{if(!this._datasizeValidator(e.datasize))return void this.logger.warn(this.TAG,`invalid video tag datasize: ${e.datasize}`);this.tracks.videoTrack.samples.push(e)}}else this.logger.warn(this.TAG,`video codeid is ${n}`),e.data=this.loaderBuffer.shift(e.datasize-1),this._datasizeValidator(e.datasize)||this.logger.warn(this.TAG,`invalid video tag datasize: ${e.datasize}`),this.tracks.videoTrack.samples.push(e),this.emit(l.DEMUX_COMPLETE);delete e.tagType}_avcSequenceHeaderParser(e){let t=this.tracks.videoTrack;if(!t)return;let n=0;t.meta||(t.meta=new s.VideoTrackMeta);let r=t.meta;r.configurationVersion=e[0],r.avcProfileIndication=e[1],r.profileCompatibility=e[2],r.avcLevelIndication=e[3]/10,r.nalUnitLength=1+(3&e[4]);let a=31&e[5];n=6;let o={};for(let t=0;t<a;t++){let t=255*e[n]+e[n+1];n+=2;let s=new Uint8Array(t);for(let r=0;r<t;r++)s[r]=e[n+r];let a="avc1.";for(let e=1;e<4;e++){let t=s[e].toString(16);t.length<2&&(t="0"+t),a+=t}r.codec=a,n+=t,this.tracks.videoTrack.meta.sps=s,o=i.SpsParser.parseSPS(s)}let l=e[n];n++;for(let t=0;t<l;t++){let t=255*e[n]+e[n+1];n+=2;let r=new Uint8Array(t);for(let s=0;s<t;s++)r[s]=e[n+s];n+=t,this.tracks.videoTrack.meta.pps=r}Object.assign(r,i.SpsParser.toVideoMeta(o));const d=this._context.mediaInfo.video;d.codec=r.codec,d.profile=r.profile,d.level=r.level,d.chromaFormat=r.chromaFormat,d.frameRate=r.frameRate,d.parRatio=r.parRatio,d.width=d.width===r.presentWidth?d.width:r.presentWidth,d.height=d.height===r.presentHeight?d.width:r.presentHeight,r.duration=this._context.mediaInfo.duration*r.timescale,r.avcc=new Uint8Array(e.length),r.avcc.set(e),t.meta=r}_switchAudioSampleRate(e){return[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350][e]}_switchAudioSamplingFrequency(e){return[5500,11025,22050,44100,48e3][(12&e)>>>2]}_switchAudioChannel(e){return[1,2][1&e]}_datasizeValidator(e){let t=this.loaderBuffer.toInt(0,4);return this.loaderBuffer.shift(4),t===e+11}get loaderBuffer(){if(this._context.getInstance("LOADER_BUFFER"))return this._context.getInstance("LOADER_BUFFER");this.emit(l.DEMUX_ERROR,new Error("找不到 loaderBuffer 实例"))}get tracks(){return this._context.getInstance("TRACKS")}get logger(){return this._context.getInstance("LOGGER")}}t.default=d},"../xgplayer-loader/index.js":
/*!***********************************!*\
      !*** ../xgplayer-loader/index.js ***!
      \***********************************/
/*! no static exports found */function(e,t,n){e.exports={FetchLoader:n(/*! ./src/fetch-loader */"../xgplayer-loader/src/fetch-loader.js").default}},"../xgplayer-loader/src/fetch-loader.js":
/*!**********************************************!*\
      !*** ../xgplayer-loader/src/fetch-loader.js ***!
      \**********************************************/
/*! no static exports found */function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});const r=n(/*! xgplayer-utils */"../xgplayer-utils/index.js").EVENTS.LOADER_EVENTS;t.default=class{constructor(e){this.configs=Object.assign({},e),this.url=null,this.status=0,this.error=null,this._reader=null,this._canceled=!1,this.readtype=this.configs.readtype,this.buffer=this.configs.buffer||"LOADER_BUFFER",this._loaderTaskNo=0}init(){this.on(r.LADER_START,this.load.bind(this))}static get type(){return"loader"}load(e,t){let n=this;this.url=e,this._canceled=!1;let s=this.getParams(t);return n.loading=!0,fetch(this.url,s).then((function(e){if(e.ok)return n.status=e.status,n._onFetchResponse(e);n.emit(r.LOADER_ERROR,n,e),n.loading=!1})).catch((function(e){throw n.emit(r.LOADER_ERROR,n,e),n.loading=!1,new Error(e.message)}))}_onFetchResponse(e){let t=this,n=this._context.getInstance(this.buffer);this._loaderTaskNo++;let s=this._loaderTaskNo;if(!0===e.ok)switch(this.readtype){case 2:e.json().then(e=>{t.loading=!1,t._canceled||(n?(n.push(e),t.emit(r.LOADER_COMPLETE,n)):t.emit(r.LOADER_COMPLETE,e))});break;case 1:e.text().then(e=>{t.loading=!1,t._canceled||(n?(n.push(e),t.emit(r.LOADER_COMPLETE,n)):t.emit(r.LOADER_COMPLETE,e))});break;case 3:e.arrayBuffer().then(e=>{t.loading=!1,t._canceled||(n?(n.push(new Uint8Array(e)),t.emit(r.LOADER_COMPLETE,n)):t.emit(r.LOADER_COMPLETE,e))});break;case 0:default:return this._onReader(e.body.getReader(),s)}}_onReader(e,t){let n=this._context.getInstance(this.buffer);if(n||this._reader.cancel(),this._reader=e,!1===this.loading)return;let s=this;this._reader&&this._reader.read().then((function(i){return i.done?(s.loading=!1,s.status=0,void s.emit(r.LOADER_COMPLETE,n)):s._canceled?void s._reader.cancel():(n.push(i.value),s.emit(r.LOADER_DATALOADED,n),s._onReader(e,t))})).catch(e=>{console.error(e),s.emit(r.LOADER_ERROR,s,e),s.loading=!1})}getParams(e){let t=Object.assign({},e),n=new Headers,r={method:"GET",headers:n,mode:"cors",cache:"default"};if("object"==typeof this.configs.headers){let e=this.configs.headers;for(let t in e)e.hasOwnProperty(t)&&n.append(t,e[t])}if("object"==typeof t.headers){let e=t.headers;for(let t in e)e.hasOwnProperty(t)&&n.append(t,e[t])}return!1===t.cors&&(r.mode="same-origin"),t.withCredentials&&(r.credentials="include"),r}cancel(){this._reader&&(this._reader.cancel(),this._reader=null,this.loading=!1,this._canceled=!0)}destroy(){this.cancel()}}},"../xgplayer-remux/index.js":
/*!**********************************!*\
      !*** ../xgplayer-remux/index.js ***!
      \**********************************/
/*! no static exports found */function(e,t,n){e.exports={Mp4Remuxer:n(/*! ./src/mp4 */"../xgplayer-remux/src/mp4/index.js").default}},"../xgplayer-remux/src/mp4/fmp4.js":
/*!*****************************************!*\
      !*** ../xgplayer-remux/src/mp4/fmp4.js ***!
      \*****************************************/
/*! no static exports found */function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(/*! xgplayer-utils */"../xgplayer-utils/index.js");class s{static size(e){return r.Buffer.writeUint32(e)}static initBox(e,t,...n){const i=new r.Buffer;return i.write(s.size(e),s.type(t),...n),i.buffer}static extension(e,t){return new Uint8Array([e,t>>16&255,t>>8&255,255&t])}static ftyp(){return s.initBox(24,"ftyp",new Uint8Array([105,115,111,109,0,0,0,1,105,115,111,109,97,118,99,49]))}static moov({type:e,meta:t}){let n,r=8,i=s.mvhd(t.duration,t.timescale);n="video"===e?s.videoTrak(t):s.audioTrak(t);let a=s.mvex(t.duration,t.timescale||1e3,t.id);return[i,n,a].forEach(e=>{r+=e.byteLength}),s.initBox(r,"moov",i,n,a)}static mvhd(e,t=1e3){let n=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,t>>>24&255,t>>>16&255,t>>>8&255,255&t,e>>>24&255,e>>>16&255,e>>>8&255,255&e,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return s.initBox(8+n.length,"mvhd",new Uint8Array(n))}static videoTrak(e){let t=8,n=s.tkhd({id:1,duration:e.duration,timescale:e.timescale||1e3,width:e.presentWidth,height:e.presentHeight,type:"video"}),r=s.mdia({type:"video",timescale:e.timescale||1e3,duration:e.duration,avcc:e.avcc,parRatio:e.parRatio,width:e.presentWidth,height:e.presentHeight});return[n,r].forEach(e=>{t+=e.byteLength}),s.initBox(t,"trak",n,r)}static audioTrak(e){let t=8,n=s.tkhd({id:2,duration:e.duration,timescale:e.timescale||1e3,width:0,height:0,type:"audio"}),r=s.mdia({type:"audio",timescale:e.timescale||1e3,duration:e.duration,channelCount:e.channelCount,samplerate:e.sampleRate,config:e.config});return[n,r].forEach(e=>{t+=e.byteLength}),s.initBox(t,"trak",n,r)}static tkhd(e){let t=e.id,n=e.duration,r=e.width,i=e.height,a=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,t>>>24&255,t>>>16&255,t>>>8&255,255&t,0,0,0,0,n>>>24&255,n>>>16&255,n>>>8&255,255&n,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,r>>>8&255,255&r,0,0,i>>>8&255,255&i,0,0]);return s.initBox(8+a.byteLength,"tkhd",a)}static edts(e){let t=new r.Buffer,n=e.duration,i=e.mediaTime;return t.write(s.size(36),s.type("edts")),t.write(s.size(28),s.type("elst")),t.write(new Uint8Array([0,0,0,1,n>>24&255,n>>16&255,n>>8&255,255&n,i>>24&255,i>>16&255,i>>8&255,255&i,0,0,0,1])),t.buffer}static mdia(e){let t=8,n=s.mdhd(e.timescale,e.duration),r=s.hdlr(e.type),i=s.minf(e);return[n,r,i].forEach(e=>{t+=e.byteLength}),s.initBox(t,"mdia",n,r,i)}static mdhd(e=1e3,t){let n=new Uint8Array([0,0,0,0,0,0,0,0,e>>>24&255,e>>>16&255,e>>>8&255,255&e,t>>>24&255,t>>>16&255,t>>>8&255,255&t,85,196,0,0]);return s.initBox(12+n.byteLength,"mdhd",s.extension(0,0),n)}static hdlr(e){let t=[0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0];return"audio"===e&&(t.splice(8,4,115,111,117,110),t.splice(24,13,83,111,117,110,100,72,97,110,100,108,101,114,0)),s.initBox(8+t.length,"hdlr",new Uint8Array(t))}static minf(e){let t=8,n="video"===e.type?s.vmhd():s.smhd(),r=s.dinf(),i=s.stbl(e);return[n,r,i].forEach(e=>{t+=e.byteLength}),s.initBox(t,"minf",n,r,i)}static vmhd(){return s.initBox(20,"vmhd",new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]))}static smhd(){return s.initBox(16,"smhd",new Uint8Array([0,0,0,0,0,0,0,0]))}static dinf(){let e=new r.Buffer;return e.write(s.size(36),s.type("dinf"),s.size(28),s.type("dref"),new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1])),e.buffer}static stbl(e){let t=8,n=s.stsd(e),r=s.stts(),i=s.stsc(),a=s.stsz(),o=s.stco();return[n,r,i,a,o].forEach(e=>{t+=e.byteLength}),s.initBox(t,"stbl",n,r,i,a,o)}static stsd(e){let t;return t="audio"===e.type?s.mp4a(e):s.avc1(e),s.initBox(16+t.byteLength,"stsd",s.extension(0,0),new Uint8Array([0,0,0,1]),t)}static mp4a(e){let t=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,e.samplerate>>8&255,255&e.samplerate,0,0]),n=s.esds(e.config);return s.initBox(8+t.byteLength+n.byteLength,"mp4a",t,n)}static esds(e=[43,146,8,0]){const t=e.length;let n=new r.Buffer,i=new Uint8Array([0,0,0,0,3,23+t,0,1,0,4,15+t,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([t]).concat(e).concat([6,1,2]));return n.write(s.size(8+i.byteLength),s.type("esds"),i),n.buffer}static avc1(e){let t=new r.Buffer,n=e.width,i=e.height,a=e.parRatio.height,o=e.parRatio.width,l=e.avcc,d=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,n>>8&255,255&n,i>>8&255,255&i,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),u=new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]),f=new Uint8Array([a>>24,a>>16&255,a>>8&255,255&a,o>>24,o>>16&255,o>>8&255,255&o]);return t.write(s.size(40+d.byteLength+l.byteLength+u.byteLength),s.type("avc1"),d,s.size(8+l.byteLength),s.type("avcC"),l,s.size(20),s.type("btrt"),u,s.size(16),s.type("pasp"),f),t.buffer}static stts(){let e=new Uint8Array([0,0,0,0,0,0,0,0]);return s.initBox(16,"stts",e)}static stsc(){let e=new Uint8Array([0,0,0,0,0,0,0,0]);return s.initBox(16,"stsc",e)}static stco(){let e=new Uint8Array([0,0,0,0,0,0,0,0]);return s.initBox(16,"stco",e)}static stsz(){let e=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]);return s.initBox(20,"stsz",e)}static mvex(e,t=1e3,n){let i=new r.Buffer,a=r.Buffer.writeUint32(e);return i.write(s.size(56),s.type("mvex"),s.size(16),s.type("mehd"),s.extension(0,0),a,s.trex(n)),i.buffer}static trex(e){let t=new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,255&e,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return s.initBox(8+t.byteLength,"trex",t)}static moof(e){let t=8,n=s.mfhd(),r=s.traf(e);return[n,r].forEach(e=>{t+=e.byteLength}),s.initBox(t,"moof",n,r)}static mfhd(){let e=r.Buffer.writeUint32(s.sequence);return s.sequence+=1,s.initBox(16,"mfhd",s.extension(0,0),e)}static traf(e){let t=8,n=s.tfhd(e.id),r=s.tfdt(e.time),i=s.sdtp(e),a=s.trun(e,i.byteLength);return[n,r,a,i].forEach(e=>{t+=e.byteLength}),s.initBox(t,"traf",n,r,a,i)}static tfhd(e){let t=r.Buffer.writeUint32(e);return s.initBox(16,"tfhd",s.extension(0,0),t)}static tfdt(e){return s.initBox(16,"tfdt",s.extension(0,0),r.Buffer.writeUint32(e))}static trun(e,t){let n=new r.Buffer,i=r.Buffer.writeUint32(e.samples.length),a=r.Buffer.writeUint32(92+16*e.samples.length+t);return n.write(s.size(20+16*e.samples.length),s.type("trun"),new Uint8Array([0,0,15,1]),i,a),e.samples.forEach(e=>{const t=e.flags;n.write(new Uint8Array([e.duration>>>24&255,e.duration>>>16&255,e.duration>>>8&255,255&e.duration,e.size>>>24&255,e.size>>>16&255,e.size>>>8&255,255&e.size,t.isLeading<<2|t.dependsOn,t.isDependedOn<<6|t.hasRedundancy<<4|t.isNonSync,0,0,e.cts>>>24&255,e.cts>>>16&255,e.cts>>>8&255,255&e.cts]))}),n.buffer}static sdtp(e){let t=new r.Buffer;return t.write(s.size(12+e.samples.length),s.type("sdtp"),s.extension(0,0)),e.samples.forEach(e=>{const n=e.flags,r=n.isLeading<<6|n.dependsOn<<4|n.isDependedOn<<2|n.hasRedundancy;t.write(new Uint8Array([r]))}),t.buffer}static mdat(e){let t=new r.Buffer,n=8;e.samples.forEach(e=>{n+=e.size}),t.write(s.size(n),s.type("mdat"));let i=new Uint8Array(n),a=0;return i.set(t.buffer,a),a+=8,e.samples.forEach(e=>{e.buffer.forEach(e=>{i.set(e,a),a+=e.byteLength})}),i}}s.type=e=>new Uint8Array([e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]),s.sequence=1,t.default=s},"../xgplayer-remux/src/mp4/index.js":
/*!******************************************!*\
      !*** ../xgplayer-remux/src/mp4/index.js ***!
      \******************************************/
/*! no static exports found */function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r,s=n(/*! xgplayer-utils */"../xgplayer-utils/index.js"),i=(r=n(/*! ./fmp4 */"../xgplayer-remux/src/mp4/fmp4.js"))&&r.__esModule?r:{default:r};const a=s.EVENTS.REMUX_EVENTS;class o{constructor(){this._dtsBase=0,this._isDtsBaseInited=!1,this.videoAllDuration=0,this.audioAllDuration=0}init(){this.on(a.REMUX_MEDIA,this.remux.bind(this)),this.on(a.REMUX_METADATA,this.onMetaDataReady.bind(this))}destroy(){this._dtsBase=-1,this._dtsBaseInited=!1}reset(){this._dtsBase=0,this._isDtsBaseInited=!1}remux(){const{audioTrack:e,videoTrack:t}=this._context.getInstance("TRACKS");!this._isDtsBaseInited&&this.calcDtsBase(e,t),this._remuxVideo(t),this._remuxAudio(e)}seek(){}onMetaDataReady(e){let t,n,r=new s.Buffer,o=i.default.ftyp();if("audio"===e){const{audioTrack:e}=this._context.getInstance("TRACKS");n=e}else{const{videoTrack:e}=this._context.getInstance("TRACKS");n=e}t=i.default.moov({type:e,meta:n.meta}),r.write(o,t);let l=this._context.getInstance("PRE_SOURCE_BUFFER"),d=l.getSource(e);d||(d=l.createSource(e)),d.mimetype=n.meta.codec,d.init=r,this.emit(a.INIT_SEGMENT,e)}calcDtsBase(e,t){if(!e.samples.length&&!t.samples.length)return;let n=1/0,r=1/0;e.samples&&e.samples.length&&(n=e.samples[0].dts),t.samples&&t.samples.length&&(r=t.samples[0].dts),this._dtsBase=Math.min(n,r),this._isDtsBaseInited=!0}_remuxVideo(e){const t=e;if(!e.samples||!e.samples.length)return;let{samples:n}=t,r=-1;const o=[],l={samples:[]};for(;n.length;){const e=n.shift(),{isKeyframe:t}=e;let s,i,a=e.dts-this._dtsBase;-1===r&&(r=a),e.pts&&(s=(i=e.pts-this._dtsBase)-a),e.cts&&(i=e.cts+a,s=e.cts);let d={buffer:[],size:0};l.samples.push(d),d.buffer.push(e.data),d.size+=e.data.byteLength;let u=0;u=n.length>=1?n[0].dts-this._dtsBase-a:o.length>=1?o[o.length-1].duration:this.videoMeta.refSampleDuration,this.videoAllDuration+=u,o.push({dts:a,cts:s,pts:i,data:e.data,size:e.data.byteLength,isKeyframe:t,duration:u,flags:{isLeading:0,dependsOn:t?2:1,isDependedOn:t?1:0,hasRedundancy:0,isNonSync:t?0:1},originDts:a,type:"video"})}let d=new s.Buffer;const u=i.default.moof({id:t.meta.id,time:r,samples:o}),f=i.default.mdat(l);d.write(u,f),t.samples=[],t.length=0;let c=this._context.getInstance("PRE_SOURCE_BUFFER"),h=c.getSource("video");h||(h=c.createSource("video")),h.data.push(d),this.emit(a.MEDIA_SEGMENT,"video")}_remuxAudio(e){const{samples:t}=e;let n=-1,r=[];const o={samples:[]};if(!t||!t.length)return;let l=!1;for(;t.length;){let e=t.shift();const{data:s}=e;let i=e.dts-this._dtsBase;const a=i;l||(n=i,l=!0);let d=0;d=this.audioMeta.refSampleDurationFixed?this.audioMeta.refSampleDurationFixed:t.length>=1?t[0].dts-this._dtsBase-i:r.length>=1?r[r.length-1].duration:this.audioMeta.refSampleDuration,this.audioAllDuration+=d;const u={dts:i,pts:i,cts:0,size:s.byteLength,duration:e.duration?e.duration:d,flags:{isLeading:0,dependsOn:2,isDependedOn:1,hasRedundancy:0,isNonSync:0},isKeyframe:!0,originDts:a,type:"audio"};let f={buffer:[],size:0};f.buffer.push(s),f.size+=s.byteLength,o.samples.push(f),r.push(u)}const d=new s.Buffer,u=i.default.moof({id:e.meta.id,time:n,samples:r}),f=i.default.mdat(o);d.write(u,f),e.samples=[],e.length=0;let c=this._context.getInstance("PRE_SOURCE_BUFFER"),h=c.getSource("audio");h||(h=c.createSource("audio")),h.data.push(d),this.emit(a.MEDIA_SEGMENT,"audio",d)}initSilentAudio(e,t){const n=o.getSilentFrame(this.audioMeta.channelCount);return{dts:e,pts:e,cts:0,duration:t,unit:n,size:n.byteLength,originDts:e,type:"video"}}get videoMeta(){return this._context.getInstance("TRACKS").videoTrack.meta}get audioMeta(){return this._context.getInstance("TRACKS").audioTrack.meta}static getSilentFrame(e){return 1===e?new Uint8Array([0,200,0,128,35,128]):2===e?new Uint8Array([33,0,73,144,2,25,0,35,128]):3===e?new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]):4===e?new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]):5===e?new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]):6===e?new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]):null}}t.default=o},"../xgplayer-utils/index.js":
/*!**********************************!*\
      !*** ../xgplayer-utils/index.js ***!
      \**********************************/
/*! no static exports found */function(e,t,n){e.exports={Context:n(/*! ./src/context */"../xgplayer-utils/src/context.js").default,EVENTS:n(/*! ./src/constants/events */"../xgplayer-utils/src/constants/events.js").default,WORKER_COMMANDS:n(/*! ./src/constants/worker-commands */"../xgplayer-utils/src/constants/worker-commands.js").default,sniffer:n(/*! ./src/env/sniffer */"../xgplayer-utils/src/env/sniffer.js").default,isLe:n(/*! ./src/env/isle */"../xgplayer-utils/src/env/isle.js").default,UTF8:n(/*! ./src/env/utf8 */"../xgplayer-utils/src/env/utf8.js").default,MediaInfo:n(/*! ./src/models/media-info */"../xgplayer-utils/src/models/media-info.js").default,MediaSample:n(/*! ./src/models/media-sample */"../xgplayer-utils/src/models/media-sample.js").default,MediaSegment:n(/*! ./src/models/media-segment */"../xgplayer-utils/src/models/media-segment.js").default,MediaSegmentList:n(/*! ./src/models/media-segment-list */"../xgplayer-utils/src/models/media-segment-list.js").default,AudioTrackMeta:n(/*! ./src/models/track-meta */"../xgplayer-utils/src/models/track-meta.js").AudioTrackMeta,VideoTrackMeta:n(/*! ./src/models/track-meta */"../xgplayer-utils/src/models/track-meta.js").VideoTrackMeta,AudioTrackSample:n(/*! ./src/models/track-sample */"../xgplayer-utils/src/models/track-sample.js").AudioTrackSample,VideoTrackSample:n(/*! ./src/models/track-sample */"../xgplayer-utils/src/models/track-sample.js").VideoTrackSample,Mse:n(/*! ./src/mse/index */"../xgplayer-utils/src/mse/index.js").default,Stream:n(/*! ./src/write/stream */"../xgplayer-utils/src/write/stream.js").default,Buffer:n(/*! ./src/write/buffer */"../xgplayer-utils/src/write/buffer.js").default,MobileVideo:n(/*! ./src/mobile/mobile-video */"../xgplayer-utils/src/mobile/mobile-video.js")}},"../xgplayer-utils/node_modules/concat-typed-array/lib/concat.js":
/*!***********************************************************************!*\
      !*** ../xgplayer-utils/node_modules/concat-typed-array/lib/concat.js ***!
      \***********************************************************************/
/*! no static exports found */function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){for(var t=0,n=arguments.length,r=Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];var i=!0,a=!1,o=void 0;try{for(var l,d=r[Symbol.iterator]();!(i=(l=d.next()).done);i=!0){var u=l.value;t+=u.length}}catch(e){a=!0,o=e}finally{try{!i&&d.return&&d.return()}finally{if(a)throw o}}var f=new e(t),c=0,h=!0,p=!1,m=void 0;try{for(var g,x=r[Symbol.iterator]();!(h=(g=x.next()).done);h=!0){var _=g.value;f.set(_,c),c+=_.length}}catch(e){p=!0,m=e}finally{try{!h&&x.return&&x.return()}finally{if(p)throw m}}return f}},"../xgplayer-utils/node_modules/concat-typed-array/lib/index.js":
/*!**********************************************************************!*\
      !*** ../xgplayer-utils/node_modules/concat-typed-array/lib/index.js ***!
      \**********************************************************************/
/*! no static exports found */function(e,t,n){var r,s=(r=n(/*! ./concat */"../xgplayer-utils/node_modules/concat-typed-array/lib/concat.js"))&&r.__esModule?r:{default:r};e.exports=s.default},"../xgplayer-utils/node_modules/webworkify-webpack/index.js":
/*!******************************************************************!*\
      !*** ../xgplayer-utils/node_modules/webworkify-webpack/index.js ***!
      \******************************************************************/
/*! no static exports found */function(e,t,n){function r(e){var t={};function n(r){if(t[r])return t[r].exports;var s=t[r]={i:r,l:!1,exports:{}};return e[r].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=e,n.c=t,n.i=function(e){return e},n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n.oe=function(e){throw console.error(e),e};var r=n(n.s=ENTRY_MODULE);return r.default||r}var s="[\\.|\\-|\\+|\\w|/|@]+",i="\\(\\s*(/\\*.*?\\*/)?\\s*.*?("+s+").*?\\)";function a(e){return(e+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function o(e,t,r){var o={};o[r]=[];var l=t.toString(),d=l.match(/^function\s?\w*\(\w+,\s*\w+,\s*(\w+)\)/);if(!d)return o;for(var u,f=d[1],c=new RegExp("(\\\\n|\\W)"+a(f)+i,"g");u=c.exec(l);)"dll-reference"!==u[3]&&o[r].push(u[3]);for(c=new RegExp("\\("+a(f)+'\\("(dll-reference\\s('+s+'))"\\)\\)'+i,"g");u=c.exec(l);)e[u[2]]||(o[r].push(u[1]),e[u[2]]=n(u[1]).m),o[u[2]]=o[u[2]]||[],o[u[2]].push(u[4]);for(var h,p=Object.keys(o),m=0;m<p.length;m++)for(var g=0;g<o[p[m]].length;g++)h=o[p[m]][g],isNaN(1*h)||(o[p[m]][g]=1*o[p[m]][g]);return o}function l(e){return Object.keys(e).reduce((function(t,n){return t||e[n].length>0}),!1)}e.exports=function(e,t){t=t||{};var s={main:n.m},i=t.all?{main:Object.keys(s.main)}:function(e,t){for(var n={main:[t]},r={main:[]},s={main:{}};l(n);)for(var i=Object.keys(n),a=0;a<i.length;a++){var d=i[a],u=n[d].pop();if(s[d]=s[d]||{},!s[d][u]&&e[d][u]){s[d][u]=!0,r[d]=r[d]||[],r[d].push(u);for(var f=o(e,e[d][u],d),c=Object.keys(f),h=0;h<c.length;h++)n[c[h]]=n[c[h]]||[],n[c[h]]=n[c[h]].concat(f[c[h]])}}return r}(s,e),a="";Object.keys(i).filter((function(e){return"main"!==e})).forEach((function(e){for(var t=0;i[e][t];)t++;i[e].push(t),s[e][t]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",a=a+"var "+e+" = ("+r.toString().replace("ENTRY_MODULE",JSON.stringify(t))+")({"+i[e].map((function(t){return JSON.stringify(t)+": "+s[e][t].toString()})).join(",")+"});\n"})),a=a+"new (("+r.toString().replace("ENTRY_MODULE",JSON.stringify(e))+")({"+i.main.map((function(e){return JSON.stringify(e)+": "+s.main[e].toString()})).join(",")+"}))(self);";var d=new window.Blob([a],{type:"text/javascript"});if(t.bare)return d;var u=(window.URL||window.webkitURL||window.mozURL||window.msURL).createObjectURL(d),f=new window.Worker(u);return f.objectURL=u,f}},"../xgplayer-utils/src/constants/events.js":
/*!*************************************************!*\
      !*** ../xgplayer-utils/src/constants/events.js ***!
      \*************************************************/
/*! no static exports found */function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});const r={LADER_START:"LOADER_START",LOADER_DATALOADED:"LOADER_DATALOADED",LOADER_COMPLETE:"LOADER_COMPLETE",LOADER_ERROR:"LOADER_ERROR"},s={DEMUX_START:"DEMUX_START",DEMUX_COMPLETE:"DEMUX_COMPLETE",DEMUX_ERROR:"DEMUX_ERROR",METADATA_PARSED:"METADATA_PARSED",VIDEO_METADATA_CHANGE:"VIDEO_METADATA_CHANGE",AUDIO_METADATA_CHANGE:"AUDIO_METADATA_CHANGE",MEDIA_INFO:"MEDIA_INFO"},i={REMUX_METADATA:"REMUX_METADATA",REMUX_MEDIA:"REMUX_MEDIA",MEDIA_SEGMENT:"MEDIA_SEGMENT",REMUX_ERROR:"REMUX_ERROR",INIT_SEGMENT:"INIT_SEGMENT"},a={SOURCE_UPDATE_END:"SOURCE_UPDATE_END"},o={RETRY_TIME_EXCEEDED:"RETRY_TIME_EXCEEDED"},l=Object.assign({},r,s,i,a,o),d=[],u=[];for(let e in l)l.hasOwnProperty(e)&&d.push(l[e]);for(let e in l)l.hasOwnProperty(e)&&u.push(l[e]);t.default={ALLEVENTS:l,HLS_EVENTS:o,REMUX_EVENTS:i,DEMUX_EVENTS:s,MSE_EVENTS:a,LOADER_EVENTS:r,FlvAllowedEvents:d,HlsAllowedEvents:u}},"../xgplayer-utils/src/constants/worker-commands.js":
/*!**********************************************************!*\
      !*** ../xgplayer-utils/src/constants/worker-commands.js ***!
      \**********************************************************/
/*! no static exports found */function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CONTEXT_COMOMANDS={ON:"on",ONCE:"once",OFF:"off",EMIT:"emit",DESTROY:"destroy"}},"../xgplayer-utils/src/context.js":
/*!****************************************!*\
      !*** ../xgplayer-utils/src/context.js ***!
      \****************************************/
/*! no static exports found */function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r,s=(r=n(/*! ./models/media-info */"../xgplayer-utils/src/models/media-info.js"))&&r.__esModule?r:{default:r},i=n(/*! events */"../../node_modules/events/events.js");const a="__TO__";t.default=class{constructor(e=[]){this._emitter=new i.EventEmitter,this._instanceMap={},this._clsMap={},this._inited=!1,this.mediaInfo=new s.default,this.allowedEvents=e,this._hooks={}}getInstance(e){return this._instanceMap[e]?this._instanceMap[e]:null}initInstance(e,...t){if(this._clsMap[e]){const n=new this._clsMap[e](...t);return this._instanceMap[e]=n,n.init&&n.init(),n}throw new Error(`${e}未在context中注册`)}init(e){if(!this._inited){for(let t in this._clsMap)this._clsMap.hasOwnProperty(t)&&!this._instanceMap[t]&&this.initInstance(t,e);this._inited=!0}}registry(e,t){const n=this._emitter,r=this._isMessageNameValid.bind(this),s=this;return this._clsMap[e]=class extends t{constructor(...t){super(...t),this.listeners={},this.onceListeners={},this.TAG=e,this._context=s}on(t,s){return r(t),this.listeners[t]?this.listeners[t].push(s):this.listeners[t]=[s],n.on(`${t}${a}${e}`,s),n.on(t,s)}before(e,t){r(e),s._hooks[e]?s._hooks[e].push(t):s._hooks[e]=[t]}once(t,s){return r(t),this.onceListeners[t]?this.onceListeners[t].push(s):this.onceListeners[t]=[s],n.once(`${t}${a}${e}`,s),n.once(t,s)}emit(e,...t){r(e);const i=s._hooks[e];if(i)for(let e=0,t=i.length;e<t;e++)(0,i[e])();return n.emit(e,...t)}emitTo(e,t,...s){return r(t),n.emit(`${t}${a}${e}`,...s)}off(e,t){return r(e),n.off(e,t)}removeListeners(){const t=Object.prototype.hasOwnProperty.bind(this.listeners);for(let r in this.listeners)if(t(r)){const t=this.listeners[r]||[];for(let s=0;s<t.length;s++){const i=t[s];n.off(r,i),n.off(`${r}${a}${e}`,i)}}for(let r in this.onceListeners)if(t(r)){const t=this.onceListeners[r]||[];for(let s=0;s<t.length;s++){const i=t[s];n.off(r,i),n.off(`${r}${a}${e}`,i)}}}destroy(){this.removeListeners(),delete s._instanceMap[e],super.destroy&&super.destroy()}},(...t)=>this.initInstance(e,...t)}destroyInstances(){Object.keys(this._instanceMap).forEach(e=>{this._instanceMap[e].destroy&&this._instanceMap[e].destroy()})}destroy(){this._emitter=null,this.allowedEvents=[],this._clsMap=null,this._context=null,this.destroyInstances()}_isMessageNameValid(e){if(!this.allowedEvents.indexOf(e)<0)throw new Error(`unregistered message name: ${e}`)}}},"../xgplayer-utils/src/env/isle.js":
/*!*****************************************!*\
      !*** ../xgplayer-utils/src/env/isle.js ***!
      \*****************************************/
/*! no static exports found */function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});const r=function(){const e=new ArrayBuffer(2);return new DataView(e).setInt16(0,256,!0),256===new Int16Array(e)[0]}();t.default=r},"../xgplayer-utils/src/env/sniffer.js":
/*!********************************************!*\
      !*** ../xgplayer-utils/src/env/sniffer.js ***!
      \********************************************/
/*! no static exports found */function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});const r=function(){const e=new ArrayBuffer(2);return new DataView(e).setInt16(0,256,!0),256===new Int16Array(e)[0]}(),s={get device(){let e=s.os;return e.isPc?"pc":e.isTablet?"tablet":"mobile"},get browser(){let e=navigator.userAgent.toLowerCase(),t={ie:/rv:([\d.]+)\) like gecko/,firfox:/firefox\/([\d.]+)/,chrome:/chrome\/([\d.]+)/,opera:/opera.([\d.]+)/,safari:/version\/([\d.]+).*safari/};return[].concat(Object.keys(t).filter(n=>t[n].test(e)))[0]},get os(){let e=navigator.userAgent,t=/(?:Windows Phone)/.test(e),n=/(?:SymbianOS)/.test(e)||t,r=/(?:Android)/.test(e),s=/(?:Firefox)/.test(e),i=/(?:iPad|PlayBook)/.test(e)||r&&!/(?:Mobile)/.test(e)||s&&/(?:Tablet)/.test(e),a=/(?:iPhone)/.test(e)&&!i;return{isTablet:i,isPhone:a,isAndroid:r,isPc:!a&&!r&&!n,isSymbian:n,isWindowsPhone:t,isFireFox:s}},get isLe(){return r}};t.default=s},"../xgplayer-utils/src/env/utf8.js":
/*!*****************************************!*\
      !*** ../xgplayer-utils/src/env/utf8.js ***!
      \*****************************************/
/*! no static exports found */function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});class r{static decode(e){const t=[],n=e;let s=0;const i=e.length;for(;s<i;)if(n[s]<128)t.push(String.fromCharCode(n[s])),++s;else{if(n[s]<192);else if(n[s]<224){if(r._checkContinuation(n,s,1)){const e=(31&n[s])<<6|63&n[s+1];if(e>=128){t.push(String.fromCharCode(65535&e)),s+=2;continue}}}else if(n[s]<240){if(r._checkContinuation(n,s,2)){const e=(15&n[s])<<12|(63&n[s+1])<<6|63&n[s+2];if(e>=2048&&55296!=(63488&e)){t.push(String.fromCharCode(65535&e)),s+=3;continue}}}else if(n[s]<248&&r._checkContinuation(n,s,3)){let e=(7&n[s])<<18|(63&n[s+1])<<12|(63&n[s+2])<<6|63&n[s+3];if(e>65536&&e<1114112){e-=65536,t.push(String.fromCharCode(e>>>10|55296)),t.push(String.fromCharCode(1023&e|56320)),s+=4;continue}}t.push(String.fromCharCode(65533)),++s}return t.join("")}static _checkContinuation(e,t,n){let r=e;if(t+n<r.length){for(;n--;)if(128!=(192&r[++t]))return!1;return!0}return!1}}t.default=r},"../xgplayer-utils/src/mobile/audio-context.js":
/*!*****************************************************!*\
      !*** ../xgplayer-utils/src/mobile/audio-context.js ***!
      \*****************************************************/
/*! no static exports found */function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});class r{constructor(e){this.config=Object.assign({},e);let t=window.AudioContext||window.webkitAudioContext;this.context=new t,this.gainNode=this.context.createGain(),this.gainNode.connect(this.context.destination),this.meta=void 0,this.samples=[],this.preloadTime=this.config.preloadTime||3,this.duration=0,this._currentBuffer=void 0,this._nextBuffer=void 0,this._lastpts=void 0,this._preDecode=[],this._currentTime=0,this._decoding=!1,this._played=!1}get currentTime(){return this._currentTime}decodeAudio(e){let{samples:t}=e,n=t;e.samples=[],this.setAudioData(n)}setAudioData(e){for(let t=0;t<e.length;t++)e[t].pts=void 0===e[t].pts?e[t].dts:e[t].pts,this._preDecode.push(e[t]);this._preDecode.length>0&&(void 0===this._lastpts&&(this._lastpts=this._preDecode[0].pts),(this._preDecode[this._preDecode.length-1].pts-this._lastpts)/1e3>this.preloadTime&&this.decodeAAC())}decodeAAC(){if(this._decoding)return;this._decoding=!0;let e=this._preDecode,t=[],n=this,s=e.shift();for(;s;){let n=r.getAACData(this.meta,s);t.push(n),this._lastpts=s.pts,s=e.shift()}let i=r.combileData(t);try{this.context.decodeAudioData(i.buffer,(function(e){let t=n.context.createBufferSource();t.buffer=e,t.onended=n.onSourceEnded.bind(n),n.samples.push({time:n.duration,duration:e.duration,data:t}),n.duration+=e.duration,n._currentBuffer||(n._currentBuffer=n.getTimeBuffer(n.currentTime),n._played&&n.play()),!n._nextBuffer&&n._currentBuffer&&(n._nextBuffer=n.getTimeBuffer(n.currentTime+n._currentBuffer.duration)),n._decoding=!1,(n._preDecode.length>0&&n._preDecode[n._preDecode.length-1].pts-n._lastpts)/1e3>=n.preloadTime&&n.decodeAAC()}))}catch(e){console.error(e)}}onSourceEnded(){if(!this._nextBuffer||!this._played)return;let e=this._nextBuffer.data;e.start(),e.connect(this.gainNode),this._currentBuffer=this._nextBuffer,this._currentTime=this._currentBuffer.time,this._nextBuffer=this.getTimeBuffer(this.currentTime),this._currentBuffer&&(this._nextBuffer=this.getTimeBuffer(this.currentTime+this._currentBuffer.duration))}play(){if(this._played=!0,!this._currentBuffer)return;let e=this._currentBuffer.data;e.connect(this.gainNode),e.start()}getTimeBuffer(e){let t;for(let n=0;n<this.samples.length;n++){let r=this.samples[n];if(r.time<=e&&r.time+r.duration>e){t=r;break}}return t}setAudioMetaData(e){this.meta=e}static getAACData(e,t){let n=new Uint8Array(t.data.byteLength+7),s=r.getAdts(e,t.data);return n.set(s),n.set(t.data,7),n}static combileData(e){let t=0;for(let n=0,r=e.length;n<r;n++)t+=e[n].byteLength;let n=new Uint8Array(t),r=0;for(let t=0,s=e.length;t<s;t++)n.set(e[t],r),r+=e[t].byteLength;return n}static getAdts(e,t){let n=new Uint8Array(7);n[0]=255,n[1]=240,n[1]=1|n[1],n[2]=192&e.objectType-1<<6,n[2]=n[2]|60&e.sampleRateIndex<<2,n[2]=n[2]|1&e.channelCount>>2,n[3]=192&e.channelCount<<6;let r=t.byteLength+7;return n[3]=n[3]|3&r>>11,n[4]=255&r>>3,n[5]=224&r<<5,n[5]=31|n[5],n[6]=252,n}}t.default=r},"../xgplayer-utils/src/mobile/mobile-video.js":
/*!****************************************************!*\
      !*** ../xgplayer-utils/src/mobile/mobile-video.js ***!
      \****************************************************/
/*! no static exports found */function(e,t,n){var r=i(n(/*! ./video-context */"../xgplayer-utils/src/mobile/video-context.js")),s=i(n(/*! ./audio-context */"../xgplayer-utils/src/mobile/audio-context.js"));function i(e){return e&&e.__esModule?e:{default:e}}n(/*! ./ticker */"../xgplayer-utils/src/mobile/ticker.js");class a extends HTMLElement{constructor(e){super();let t=this;this.vCtx=new r.default,this.aCtx=new s.default(e),this.vCtx.oncanplay=function(){t.appendChild(t.vCtx.canvas),console.log("canplay",t),t.dispatchEvent(new Event("canplay"))},this.historyTime=0}destroy(){}onDemuxComplete(e,t){this.aCtx.decodeAudio(t),this.vCtx.decodeVideo(e)}setAudioMeta(e){this.aCtx.setAudioMetaData(e)}setVideoMeta(e){this.vCtx.setVideoMetaData(e)}get currentTime(){}play(){this.aCtx.play(),this.vCtx.play()}}customElements.define("mobile-video",a)},"../xgplayer-utils/src/mobile/sourcebuffer.js":
/*!****************************************************!*\
      !*** ../xgplayer-utils/src/mobile/sourcebuffer.js ***!
      \****************************************************/
/*! no static exports found */function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(e){this.config=Object.assign({},e),this.type=this.config.type,this.buffer=[],this.currentGop=void 0,this._lastGet=void 0}push(e){if("video"===this.type){if(e.isKeyframe){let t={samples:[],start:e.dts,end:e.dts,nextGop:void 0};this.currentGop&&(this.currentGop.nextGop=t),this.currentGop=t,this.buffer.push(this.currentGop)}this.currentGop&&(this.currentGop.samples.push(e),e.dts<this.currentGop.start&&(this.currentGop.start=e.dts),e.dts>this.currentGop.end&&(this.currentGop.end=e.dts))}}get(e){if("video"===this.type){if(this.buffer.length<1)return;if(void 0===e)return this._getNext()}}_getNext(){if(this._lastGet){let e=this._lastGet.gop,t=e.samples[this._lastGet.index+1];if(t)return this._lastGet.index=this._lastGet.index+1,t;if(!(e=e.nextGop)||e.samples.length<1)return;return t=e.samples[0],this._lastGet={gop:e,index:0},t}{let e=this.buffer[0];if(e.samples.length<1)return;return this._lastGet={gop:e,index:0},e.samples[0]}}remove(e,t){if(this.buffer.length<0)return;let n=0,r=this.buffer[0];for(;r;)r.end<t&&r.start>=e?(delete this.buffer[n],r=this.buffer[n]):(n+=1,r=this.buffer[n])}}},"../xgplayer-utils/src/mobile/ticker.js":
/*!**********************************************!*\
      !*** ../xgplayer-utils/src/mobile/ticker.js ***!
      \**********************************************/
/*! no static exports found */function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});class r{constructor(e){this.options=Object.assign({},e||{},{interval:40}),this.callbacks=[]}nextTick(...e){this.callbacks=e}onTick(){for(let e=0,t=this.callbacks.length;e<t;e++)(0,this.callbacks[e])()}setInterval(e){this.options.interval=e}}class s extends r{constructor(e){super(e),this.prev=null,this.timerId=null,this._subTimerId=null}nexTick(...e){super.nextTick(...e),s.getTickFunc()(this.tick.bind(this))}tick(e){this.prev||(this.prev=e);const{interval:t}=this.options,{getTickFunc:n}=s,r=n(),i=this.prev+t-e,a=()=>{this.prev=null,this.onTick()};i<=0?(this._subTimerId&&(window.clearTimeout(this._subTimerId),this._subTimerId=null),a()):i<=10?this._subTimerId=setTimeout(()=>{a()},i):(()=>{this.timerId=r(this.tick.bind(this))})()}stop(){this.timerId&&s.getCancelFunc()(this.timerId)}static getTickFunc(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame}static getCancelFunc(){return window.cancelAnimationFrame||window.webkitCancelAnimationFrame}static isSupported(){return void 0!==s.getTickFunc()}}class i extends r{constructor(e){super(e),this.timeoutId=null}nextTick(...e){super.nextTick(...e),this.timeoutId=window.setTimeout(()=>{this.onTick()},this.options.interval)}stop(){this.timeoutId&&window.clearTimeout(this.timeoutId)}}t.getTicker=()=>s.isSupported()?s:i},"../xgplayer-utils/src/mobile/video-context.js":
/*!*****************************************************!*\
      !*** ../xgplayer-utils/src/mobile/video-context.js ***!
      \*****************************************************/
/*! no static exports found */function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=l(n(/*! webworkify-webpack */"../xgplayer-utils/node_modules/webworkify-webpack/index.js")),s=l(n(/*! ../write/stream */"../xgplayer-utils/src/write/stream.js")),i=l(n(/*! ../../../xgplayer-codec/src/h264/nalunit */"../xgplayer-codec/src/h264/nalunit/index.js")),a=l(n(/*! ./yuv-canvas */"../xgplayer-utils/src/mobile/yuv-canvas.js")),o=l(n(/*! ./sourcebuffer */"../xgplayer-utils/src/mobile/sourcebuffer.js"));function l(e){return e&&e.__esModule?e:{default:e}}t.default=class{constructor(e){this.config=Object.assign({},e),this.canvas=this.config.canvas?this.config.canvas:document.createElement("canvas"),this.source=new o.default({type:"video"}),this.preloadTime=this.config.preloadTime||3,this.oncanplay=void 0,this.meta=void 0,this.readyStatus=0,this.paused=!0,this.count=0,this.currentTime=0,this.lastPlayed=0,this._decoderInited=!1,this._avccpushed=!1,this._decodedFrames={},this._lastSampleDts=void 0,this._baseDts=void 0,this.initWasmWorker()}play(){this.paused=!1,this._onTimer()}pause(){this.paused=!0}seek(e){this.currentTime=e}initWasmWorker(){let e=this;this.wasmworker=(0,r.default)(/*! ./worker.js */"../xgplayer-utils/src/mobile/worker.js"),this.wasmworker.postMessage({msg:"init"}),this.wasmworker.addEventListener("message",t=>{switch(t.data.msg){case"DECODER_READY":e._decoderInited=!0;break;case"DECODED":this._onDecoded(t.data)}})}setVideoMetaData(e){if(this.meta=e,!this._decoderInited)return;this._avccpushed=!0;let t=new Uint8Array(e.sps.byteLength+4);if(t.set([0,0,0,1]),t.set(e.sps,4),this.wasmworker.postMessage({msg:"decode",data:t}),(t=new Uint8Array(e.pps.byteLength+4)).set([0,0,0,1]),t.set(e.pps,4),this.wasmworker.postMessage({msg:"decode",data:t}),!this.yuvCanvas){let t=Object.assign({meta:e,canvas:this.canvas},this.config);this.yuvCanvas=new a.default(t)}this.readyStatus=1}decodeVideo(e){if(!this._decoderInited)return;this._avccpushed||this.setVideoMetaData(this.meta);let{samples:t}=e,n=t.shift();for(;n;)this._baseDts||(this._baseDts=n.dts),this.source.push(n),n=t.shift();this._preload()}_preload(){if(!this._lastSampleDts||this._lastSampleDts-this._baseDts<this.currentTime+1e3*this.preloadTime){let e=this.source.get();for(e&&(this._lastSampleDts=e.dts,this._analyseNal(e));e&&this._lastSampleDts-this._baseDts<this.currentTime+1e3*this.preloadTime;)(e=this.source.get())&&(this._analyseNal(e),this._lastSampleDts=e.dts)}}_analyseNal(e){let t=i.default.getAvccNals(new s.default(e.data.buffer)),n=0;for(let e=0;e<t.length;e++)n+=t[e].body.byteLength+4;let r=0,a=new Uint8Array(n);for(let e=0;e<t.length;e++){let n=t[e];a.set([0,0,0,1],r),r+=4,a.set(new Uint8Array(n.body),r),r+=n.body.byteLength}this.wasmworker.postMessage({msg:"decode",data:a,info:{dts:e.dts,pts:e.pts?e.pts:e.dts+e.cts,key:e.isKeyframe}})}_onDecoded(e){let{dts:t}=e.info;this._decodedFrames[t]=e}_onTimer(){if(this.paused)return;let e=1e3/60;if(this.meta){this.meta.frameRate&&this.meta.frameRate.fixed&&this.meta.frameRate.fps&&(e=Math.ceil(1e3/this.meta.frameRate.fps));let t=Object.keys(this._decodedFrames);if(t.length>0){this.currentTime+=e;let n=-1;for(let e=0;e<t.length&&t[e]-this._baseDts<=this.currentTime;e++)n=t[e];let r=this._decodedFrames[n];if(r){this.oncanplay&&this.readyStatus<4&&(this.oncanplay(),this.readyStatus=4);const e=Date.now();this.yuvCanvas.render(r.buffer,r.width,r.height),console.log(`${n}渲染时长`,Date.now()-e),delete this._decodedFrames[n]}}}setTimeout(this._onTimer.bind(this),e)}_cleanBuffer(){this.source.remove(0,this.currentTime)}get fps(){}}},"../xgplayer-utils/src/mobile/worker.js":
/*!**********************************************!*\
      !*** ../xgplayer-utils/src/mobile/worker.js ***!
      \**********************************************/
/*! no static exports found */function(e,t,n){var r,s=function(e){this.inited=!1,this.self=e,this.infolist={},e.par_broadwayOnBroadwayInited=this.broadwayOnBroadwayInited.bind(this),e.par_broadwayOnPictureDecoded=this.broadwayOnPictureDecoded.bind(this)};function i(){(r=new s(this)).init()}function a(){self.importScripts("http://10.95.49.41:9090/examples/flv/decoder.js"),addOnPostRun(i.bind(self))}s.prototype.toU8Array=function(e,t){return this.self.HEAPU8.subarray(e,e+t)},s.prototype.init=function(){Module._broadwayInit(),this.streamBuffer=this.toU8Array(Module._broadwayCreateStream(1048576),1048576)},s.prototype.broadwayOnPictureDecoded=function(e,t,n,r){let s=Object.assign({},this.infolist[r]),i=this.toU8Array(e,t*n*3/2);this.infolist[r]=null;let a=new Uint8Array(i.length);a.set(i);let o=a.buffer;this.self.postMessage({msg:"DECODED",width:t,height:n,info:s,buffer:o},[o])},s.prototype.broadwayOnBroadwayInited=function(){this.inited=!0,this.self.postMessage({msg:"DECODER_READY"})},s.prototype.decode=function(e,t){let n=parseInt((new Date).getTime()),r=n-1e10*Math.floor(n/1e10);this.infolist[r]=t,this.streamBuffer.set(e),Module._broadwayPlayStream(e.length,r)},e.exports=function(e){e.addEventListener("message",(function(t){var n=t.data;if(n.msg)switch(n.msg){case"init":a();break;case"decode":r.decode(n.data,n.info)}else e.postMessage({msg:"ERROR:invalid message"})}),!1)}},"../xgplayer-utils/src/mobile/yuv-canvas.js":
/*!**************************************************!*\
      !*** ../xgplayer-utils/src/mobile/yuv-canvas.js ***!
      \**************************************************/
/*! no static exports found */function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(e){this.configs=Object.assign({},e),this.canvas=this.configs.canvas,this.meta=Object.assign({},this.configs.meta),this.chroma=this.meta.chromaFormat,this.height=this.meta.presentHeight,this.width=this.meta.presentWidth,this.canvas.width=this.width,this.canvas.height=this.height,this.canvas.style.width="100%",this.canvas.style.height="100%",this._initContextGL(),this.contextGL&&(this._initProgram(),this._initBuffers(),this._initTextures())}_initContextGL(){for(var e=this.canvas,t=null,n=["webgl","experimental-webgl","moz-webgl","webkit-3d"],r=0;!t&&r<n.length;){var s=n[r];try{t=this.contextOptions?e.getContext(s,this.contextOptions):e.getContext(s)}catch(e){t=null}t&&"function"==typeof t.getParameter||(t=null),++r}this.contextGL=t}_initProgram(){var e,t,n=this.contextGL;420===this.chroma?(e=["attribute vec4 vertexPos;","attribute vec4 texturePos;","attribute vec4 uTexturePos;","attribute vec4 vTexturePos;","varying vec2 textureCoord;","varying vec2 uTextureCoord;","varying vec2 vTextureCoord;","void main()","{","  gl_Position = vertexPos;","  textureCoord = texturePos.xy;","  uTextureCoord = uTexturePos.xy;","  vTextureCoord = vTexturePos.xy;","}"].join("\n"),t=["precision highp float;","varying highp vec2 textureCoord;","varying highp vec2 uTextureCoord;","varying highp vec2 vTextureCoord;","uniform sampler2D ySampler;","uniform sampler2D uSampler;","uniform sampler2D vSampler;","uniform mat4 YUV2RGB;","void main(void) {","  highp float y = texture2D(ySampler,  textureCoord).r;","  highp float u = texture2D(uSampler,  uTextureCoord).r;","  highp float v = texture2D(vSampler,  vTextureCoord).r;","  gl_FragColor = vec4(y, u, v, 1) * YUV2RGB;","}"].join("\n")):422===this.chroma&&(e=["attribute vec4 vertexPos;","attribute vec4 texturePos;","varying vec2 textureCoord;","void main()","{","  gl_Position = vertexPos;","  textureCoord = texturePos.xy;","}"].join("\n"),t=["precision highp float;","varying highp vec2 textureCoord;","uniform sampler2D sampler;","uniform highp vec2 resolution;","uniform mat4 YUV2RGB;","void main(void) {","  highp float texPixX = 1.0 / resolution.x;","  highp float logPixX = 2.0 / resolution.x;","  highp float logHalfPixX = 4.0 / resolution.x;","  highp float steps = floor(textureCoord.x / logPixX);","  highp float uvSteps = floor(textureCoord.x / logHalfPixX);","  highp float y = texture2D(sampler, vec2((logPixX * steps) + texPixX, textureCoord.y)).r;","  highp float u = texture2D(sampler, vec2((logHalfPixX * uvSteps), textureCoord.y)).r;","  highp float v = texture2D(sampler, vec2((logHalfPixX * uvSteps) + texPixX + texPixX, textureCoord.y)).r;","  gl_FragColor = vec4(y, u, v, 1.0) * YUV2RGB;","}"].join("\n"));var r=n.createShader(n.VERTEX_SHADER);n.shaderSource(r,e),n.compileShader(r),n.getShaderParameter(r,n.COMPILE_STATUS)||console.log("Vertex shader failed to compile: "+n.getShaderInfoLog(r));var s=n.createShader(n.FRAGMENT_SHADER);n.shaderSource(s,t),n.compileShader(s),n.getShaderParameter(s,n.COMPILE_STATUS)||console.log("Fragment shader failed to compile: "+n.getShaderInfoLog(s));var i=n.createProgram();n.attachShader(i,r),n.attachShader(i,s),n.linkProgram(i),n.getProgramParameter(i,n.LINK_STATUS)||console.log("Program failed to compile: "+n.getProgramInfoLog(i)),n.useProgram(i);var a=n.getUniformLocation(i,"YUV2RGB");n.uniformMatrix4fv(a,!1,[1.16438,0,1.59603,-.87079,1.16438,-.39176,-.81297,.52959,1.16438,2.01723,0,-1.08139,0,0,0,1]),this.shaderProgram=i}_initBuffers(){var e=this.contextGL,t=this.shaderProgram,n=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,n),e.bufferData(e.ARRAY_BUFFER,new Float32Array([1,1,-1,1,1,-1,-1,-1]),e.STATIC_DRAW);var r=e.getAttribLocation(t,"vertexPos");e.enableVertexAttribArray(r),e.vertexAttribPointer(r,2,e.FLOAT,!1,0,0);var s=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,s),e.bufferData(e.ARRAY_BUFFER,new Float32Array([1,0,0,0,1,1,0,1]),e.STATIC_DRAW);var i=e.getAttribLocation(t,"texturePos");if(e.enableVertexAttribArray(i),e.vertexAttribPointer(i,2,e.FLOAT,!1,0,0),this.texturePosBuffer=s,420===this.chroma){var a=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,a),e.bufferData(e.ARRAY_BUFFER,new Float32Array([1,0,0,0,1,1,0,1]),e.STATIC_DRAW);var o=e.getAttribLocation(t,"uTexturePos");e.enableVertexAttribArray(o),e.vertexAttribPointer(o,2,e.FLOAT,!1,0,0),this.uTexturePosBuffer=a;var l=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,l),e.bufferData(e.ARRAY_BUFFER,new Float32Array([1,0,0,0,1,1,0,1]),e.STATIC_DRAW);var d=e.getAttribLocation(t,"vTexturePos");e.enableVertexAttribArray(d),e.vertexAttribPointer(d,2,e.FLOAT,!1,0,0),this.vTexturePosBuffer=l}}_initTextures(){var e=this.contextGL,t=this.shaderProgram;if(420===this.chroma){var n=this._initTexture(),r=e.getUniformLocation(t,"ySampler");e.uniform1i(r,0),this.yTextureRef=n;var s=this._initTexture(),i=e.getUniformLocation(t,"uSampler");e.uniform1i(i,1),this.uTextureRef=s;var a=this._initTexture(),o=e.getUniformLocation(t,"vSampler");e.uniform1i(o,2),this.vTextureRef=a}else if(422===this.chroma){var l=this._initTexture(),d=e.getUniformLocation(t,"sampler");e.uniform1i(d,0),this.textureRef=l}}_initTexture(){var e=this.contextGL,t=e.createTexture();return e.bindTexture(e.TEXTURE_2D,t),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.bindTexture(e.TEXTURE_2D,null),t}_drawPictureGL(e,t,n){if(420===this.chroma){let i=t;var r=t*n,s=t/2*(n/2);let a={yData:(e=new Uint8Array(e)).subarray(0,r),uData:e.subarray(r,r+s),vData:e.subarray(r+s,r+s+s)};if(t%4>0){i=t+4-t%4;let e=new Uint8Array(i*n);for(let r=0;r<n;r++)e.set(a.yData.subarray(r*t,(r+1)*t),r*i);a.yData=e}if(t/2%4>0){i=t/2+4-t/2%4;let e=new Uint8Array(i*n/2),r=new Uint8Array(i*n/2);for(let s=0;s<n/2;s++)e.set(a.uData.subarray(s*t/2,(s+1)*t/2),s*i),r.set(a.vData.subarray(s*t/2,(s+1)*t/2),s*i);a.uData=e,a.vData=r}this._drawPictureGL420(a,t,n)}else 422===this.chroma&&(e=new Uint8Array(e),this._drawPictureGL422(t,n,e))}_drawPictureGL422(e,t,n){var r=this.contextGL,s=this.texturePosBuffer,i=this.textureRef,a=2*t,o=n;r.viewport(0,0,t,n);var l=n/o,d=t/(a/2),u=new Float32Array([d,0,0,0,d,l,0,l]);r.bindBuffer(r.ARRAY_BUFFER,s),r.bufferData(r.ARRAY_BUFFER,u,r.DYNAMIC_DRAW),r.uniform2f(r.getUniformLocation(this.shaderProgram,"resolution"),a,n),r.activeTexture(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,i),r.texImage2D(r.TEXTURE_2D,0,r.LUMINANCE,a,o,0,r.LUMINANCE,r.UNSIGNED_BYTE,e),r.drawArrays(r.TRIANGLE_STRIP,0,4)}_drawPictureGL420(e,t,n){var r=this.contextGL,s=this.texturePosBuffer,i=this.uTexturePosBuffer,a=this.vTexturePosBuffer,o=this.yTextureRef,l=this.uTextureRef,d=this.vTextureRef,u=e.yData,f=e.uData,c=e.vData,h=t,p=n,m=t/2,g=n/2,x=m,_=g;r.viewport(0,0,this.width,this.height);var y=n/p,b=t/h,v=new Float32Array([b,0,0,0,b,y,0,y]);r.bindBuffer(r.ARRAY_BUFFER,s),r.bufferData(r.ARRAY_BUFFER,v,r.DYNAMIC_DRAW),y=n/2/g,b=t/2/m;var E=new Float32Array([b,0,0,0,b,y,0,y]);r.bindBuffer(r.ARRAY_BUFFER,i),r.bufferData(r.ARRAY_BUFFER,E,r.DYNAMIC_DRAW),y=n/2/_,b=t/2/x;var T=new Float32Array([b,0,0,0,b,y,0,y]);r.bindBuffer(r.ARRAY_BUFFER,a),r.bufferData(r.ARRAY_BUFFER,T,r.DYNAMIC_DRAW),r.activeTexture(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,o),r.texImage2D(r.TEXTURE_2D,0,r.LUMINANCE,h,p,0,r.LUMINANCE,r.UNSIGNED_BYTE,u),r.activeTexture(r.TEXTURE1),r.bindTexture(r.TEXTURE_2D,l),r.texImage2D(r.TEXTURE_2D,0,r.LUMINANCE,m,g,0,r.LUMINANCE,r.UNSIGNED_BYTE,f),r.activeTexture(r.TEXTURE2),r.bindTexture(r.TEXTURE_2D,d),r.texImage2D(r.TEXTURE_2D,0,r.LUMINANCE,x,_,0,r.LUMINANCE,r.UNSIGNED_BYTE,c),r.drawArrays(r.TRIANGLE_STRIP,0,4)}_drawPictureRGB(e){}render(e,t,n){this.contextGL?this._drawPictureGL(e,t,n):this._drawPictureRGB(e)}}},"../xgplayer-utils/src/models/media-info.js":
/*!**************************************************!*\
      !*** ../xgplayer-utils/src/models/media-info.js ***!
      \**************************************************/
/*! no static exports found */function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});const r=e=>{for(let t in e)if(e.hasOwnProperty(t)&&null===e[t])return!1;return!0};class s{constructor(){this.mimeType=null,this.duration=null,this.hasVideo=null,this.video={codec:null,width:null,height:null,profile:null,level:null,frameRate:{fixed:!0,fps:25,fps_num:25e3,fps_den:1e3},chromaFormat:null,parRatio:{width:1,height:1}},this.hasAudio=null,this.audio={codec:null,sampleRate:null,sampleRateIndex:null,channelCount:null}}isComplete(){return s.isBaseInfoReady(this)&&s.isVideoReady(this)&&s.isAudioReady(this)}static isBaseInfoReady(e){return r(e)}static isVideoReady(e){return!e.hasVideo||r(e.video)}static isAudioReady(e){return!e.hasAudio||r(e.video)}}t.default=s},"../xgplayer-utils/src/models/media-sample.js":
/*!****************************************************!*\
      !*** ../xgplayer-utils/src/models/media-sample.js ***!
      \****************************************************/
/*! no static exports found */function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});class r{constructor(e){let t=r.getDefaultInf();if(!e||"[object Object]"!==Object.prototype.toString.call(e))return t;let n=Object.assign({},t,e);Object.entries(n).forEach(([e,t])=>{this[e]=t})}static getDefaultInf(){return{dts:null,pts:null,duration:null,position:null,isRAP:!1,originDts:null}}}t.default=r},"../xgplayer-utils/src/models/media-segment-list.js":
/*!**********************************************************!*\
      !*** ../xgplayer-utils/src/models/media-segment-list.js ***!
      \**********************************************************/
/*! no static exports found */function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(e){this._type=e,this._list=[],this._lastAppendLocation=-1}get type(){return this._type}get length(){return this._list.length}isEmpty(){return 0===this._list.length}clear(){this._list=[],this._lastAppendLocation=-1}_searchNearestSegmentBefore(e){let t=this._list;if(0===t.length)return-2;let n=t.length-1,r=0,s=0,i=n,a=0;if(e<t[0].originDts)return-1;for(;s<=i;){if((r=s+Math.floor((i-s)/2))===n||e>t[r].lastSample.originDts&&e<t[r+1].originDts){a=r;break}t[r].originDts<e?s=r+1:i=r-1}return a}_searchNearestSegmentAfter(e){return this._searchNearestSegmentBefore(e)+1}append(e){let t=this._list,n=this._lastAppendLocation,r=0;-1!==n&&n<t.length&&e.originStartDts>=t[n].lastSample.originDts&&(n===t.length-1||n<t.length-1&&e.originStartDts<t[n+1].originStartDts)?r=n+1:t.length>0&&(r=this._searchNearestSegmentBefore(e.originStartDts)+1),this._lastAppendLocation=r,this._list.splice(r,0,e)}getLastSegmentBefore(e){let t=this._searchNearestSegmentBefore(e);return t>=0?this._list[t]:null}getLastSampleBefore(e){let t=this.getLastSegmentBefore(e);return null!==t?t.lastSample:null}getLastRAPBefore(e){let t=this._searchNearestSegmentBefore(e),n=this._list[t].randomAccessPoints;for(;0===n.length&&t>0;)t--,n=this._list[t].randomAccessPoints;return n.length>0?n[n.length-1]:null}}},"../xgplayer-utils/src/models/media-segment.js":
/*!*****************************************************!*\
      !*** ../xgplayer-utils/src/models/media-segment.js ***!
      \*****************************************************/
/*! no static exports found */function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(){this.startDts=-1,this.endDts=-1,this.startPts=-1,this.endPts=-1,this.originStartDts=-1,this.originEndDts=-1,this.randomAccessPoints=[],this.firstSample=null,this.lastSample=null}addRAP(e){e.isRAP=!0,this.randomAccessPoints.push(e)}}},"../xgplayer-utils/src/models/track-meta.js":
/*!**************************************************!*\
      !*** ../xgplayer-utils/src/models/track-meta.js ***!
      \**************************************************/
/*! no static exports found */function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.AudioTrackMeta=class{constructor(e){const t={sampleRate:48e3,channelCount:2,codec:"mp4a.40.2",config:[41,401,136,0],duration:0,id:2,refSampleDuration:21,sampleRateIndex:3,timescale:1e3,type:"audio"};return e?Object.assign({},t,e):t}},t.VideoTrackMeta=class{constructor(e){const t={avcc:null,sps:new Uint8Array(0),pps:new Uint8Array(0),chromaFormat:420,codec:"avc1.640020",codecHeight:720,codecWidth:1280,duration:0,frameRate:{fixed:!0,fps:25,fps_num:25e3,fps_den:1e3},id:1,level:"3.2",presentHeight:720,presentWidth:1280,profile:"High",refSampleDuration:40,parRatio:{height:1,width:1},timescale:1e3,type:"video"};return e?Object.assign({},t,e):t}}},"../xgplayer-utils/src/models/track-sample.js":
/*!****************************************************!*\
      !*** ../xgplayer-utils/src/models/track-sample.js ***!
      \****************************************************/
/*! no static exports found */function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});class r{constructor(e){let t=r.getDefault();return e?Object.assign({},t,e):t}static getDefault(){return{dts:null,pts:null,data:new Uint8Array}}}t.AudioTrackSample=r;class s{constructor(e){let t=s.getDefault();return e?Object.assign({},t,e):t}static getDefault(){return{dts:null,pts:null,isKeyframe:!1,originDts:null,data:new Uint8Array}}}t.VideoTrackSample=s},"../xgplayer-utils/src/mse/index.js":
/*!******************************************!*\
      !*** ../xgplayer-utils/src/mse/index.js ***!
      \******************************************/
/*! no static exports found */function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(e){this.configs=Object.assign({},e),this.container=this.configs.container,this.mediaSource=null,this.sourceBuffers={},this.preloadTime=this.configs.preloadTime||1}init(){this.mediaSource=new self.MediaSource,this.mediaSource.addEventListener("sourceopen",this.onSourceOpen.bind(this)),this.container.src=URL.createObjectURL(this.mediaSource),this.url=this.container.src,this.container.addEventListener("timeupdate",this.onTimeUpdate.bind(this)),this.container.addEventListener("waiting",this.onWaiting.bind(this))}onTimeUpdate(){this.emit("TIME_UPDATE",this.container)}onWaiting(){this.emit("WAITING",this.container)}onSourceOpen(){this.addSourceBuffers()}onUpdateEnd(){this.emit("SOURCE_UPDATE_END"),this.doAppend()}addSourceBuffers(){if("open"!==this.mediaSource.readyState)return;let e,t=this._context.getInstance("PRE_SOURCE_BUFFER"),n=this._context.getInstance("TRACKS");t=t.sources;let r=!1;for(let s=0,i=Object.keys(t).length;s<i;s++){let i=Object.keys(t)[s];if("audio"===i?e=n.audioTrack:"video"===i&&(e=n.videoTrack),e){let n="audio"===i?21:40;e.meta&&e.meta.refSampleDuration&&(n=e.meta.refSampleDuration),t[i].data.length>=this.preloadTime/n&&(r=!0)}}if(r){if(Object.keys(this.sourceBuffers).length>0)return;for(let e=0,n=Object.keys(t).length;e<n;e++){let n=Object.keys(t)[e],r=t[n],s="video"===n?"video/mp4;codecs="+r.mimetype:"audio/mp4;codecs="+r.mimetype,i=this.mediaSource.addSourceBuffer(s);this.sourceBuffers[n]=i,i.addEventListener("updateend",this.onUpdateEnd.bind(this)),this.doAppend()}}}doAppend(){let e=this._context.getInstance("PRE_SOURCE_BUFFER");if(e)for(let t=0;t<Object.keys(this.sourceBuffers).length;t++){let n=Object.keys(this.sourceBuffers)[t],r=this.sourceBuffers[n];if(!r.updating){let t=e.sources[n];if(t&&!t.inited)r.appendBuffer(t.init.buffer.buffer),t.inited=!0;else if(t){let e=t.data.shift();e&&r.appendBuffer(e.buffer.buffer)}}}}endOfStream(){"open"===this.mediaSource.readyState&&this.mediaSource.endOfStream()}remove(e){for(let t=0;t<Object.keys(this.sourceBuffers).length;t++){let n=this.sourceBuffers[Object.keys(this.sourceBuffers)[t]];n.updating||n.remove(0,e)}}destroy(){this.container.removeEventListener("timeupdate",this.onTimeUpdate),this.container.removeEventListener("waiting",this.onWaiting),this.mediaSource.removeEventListener("sourceopen",this.onSourceOpen),this.configs={},this.container=null,this.mediaSource=null,this.sourceBuffers={},this.preloadTime=1;for(let e=0;e<Object.keys(this.sourceBuffers).length;e++){let t=this.sourceBuffers[Object.keys(this.sourceBuffers)[e]];t.removeEventListener("updateend",this.onUpdateEnd),this.mediaSource.removeSourceBuffer(t),delete this.sourceBuffers[Object.keys(this.sourceBuffers)[e]]}}}},"../xgplayer-utils/src/write/buffer.js":
/*!*********************************************!*\
      !*** ../xgplayer-utils/src/write/buffer.js ***!
      \*********************************************/
/*! no static exports found */function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r,s=(r=n(/*! concat-typed-array */"../xgplayer-utils/node_modules/concat-typed-array/lib/index.js"))&&r.__esModule?r:{default:r};t.default=class{constructor(e){this.buffer=e||new Uint8Array(0)}write(...e){e.forEach(e=>{this.buffer=(0,s.default)(Uint8Array,this.buffer,e)})}static writeUint32(e){return new Uint8Array([e>>24,e>>16&255,e>>8&255,255&e])}static readAsInt(e){let t="";return e.forEach(e=>{t+=function(e){return e.toString(16).padStart(2,"0")}(e)}),parseInt(t,16)}}},"../xgplayer-utils/src/write/stream.js":
/*!*********************************************!*\
      !*** ../xgplayer-utils/src/write/stream.js ***!
      \*********************************************/
/*! no static exports found */function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});class r{constructor(e){if(!(e instanceof ArrayBuffer))throw new Error("data is invalid");this.buffer=e,this.dataview=new DataView(e),this.dataview.position=0}get length(){return this.buffer.byteLength}set position(e){this.dataview.position=e}get position(){return this.dataview.position}back(e){this.position-=e}skip(e){let t=Math.floor(e/4),n=e%4;for(let e=0;e<t;e++)r.readByte(this.dataview,4);n>0&&r.readByte(this.dataview,n)}static readByte(e,t,n){let r;switch(t){case 1:r=n?e.getInt8(e.position):e.getUint8(e.position);break;case 2:r=n?e.getInt16(e.position):e.getUint16(e.position);break;case 3:if(n)throw new Error("not supported for readByte 3");r=e.getUint8(e.position)<<16,r|=e.getUint8(e.position+1)<<8,r|=e.getUint8(e.position+2);break;case 4:r=n?e.getInt32(e.position):e.getUint32(e.position);break;case 8:if(n)throw new Error("not supported for readBody 8");r=e.getUint32(e.position)<<32,r|=e.getUint32(e.position+4);break;default:r=""}return e.position+=t,r}readUint8(){return r.readByte(this.dataview,1)}readUint16(){return r.readByte(this.dataview,2)}readUint24(){return r.readByte(this.dataview,3)}readUint32(){return r.readByte(this.dataview,4)}readUint64(){return r.readByte(this.dataview,8)}readInt8(){return r.readByte(this.dataview,1,!0)}readInt16(){return r.readByte(this.dataview,2,!0)}readInt32(){return r.readByte(this.dataview,4,!0)}writeUint32(e){return new Uint8Array([e>>>24&255,e>>>16&255,e>>>8&255,255&e])}}t.default=r},"./src/flv-vod.js":
/*!************************!*\
      !*** ./src/flv-vod.js ***!
      \************************/
/*! no static exports found */function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=u(n(/*! ../../xgplayer-demux/src/flv */"../xgplayer-demux/src/flv/index.js")),s=u(n(/*! xgplayer-remux */"../xgplayer-remux/index.js")),i=n(/*! xgplayer-loader */"../xgplayer-loader/index.js"),a=n(/*! xgplayer-buffer */"../xgplayer-buffer/index.js"),o=n(/*! xgplayer-utils */"../xgplayer-utils/index.js"),l=n(/*! xgplayer-codec */"../xgplayer-codec/index.js"),d=u(n(/*! xgplayer */"xgplayer"));function u(e){return e&&e.__esModule?e:{default:e}}const f=o.EVENTS.REMUX_EVENTS,c=o.EVENTS.DEMUX_EVENTS,h=o.EVENTS.LOADER_EVENTS,p="FLVController";class m{warn(){}}class g{constructor(e){this.TAG=p,this._player=e,this.state={initSegmentArrived:!1,range:{start:0,end:""},rangeSupport:!0}}static findFilePosition(e,t){for(let n=0,r=t.times.length;n<r;n++){const s=t.times[n],i=n+1<r?t.times[n+1]:Number.MAX_SAFE_INTEGER;if(s<=e&&e<=i)return t.filepositions[n]}return""}init(){this._context.registry("FETCH_LOADER",i.FetchLoader),this._context.registry("LOADER_BUFFER",a.XgBuffer),this._context.registry("FLV_DEMUXER",r.default),this._context.registry("TRACKS",a.Tracks),this._context.registry("MP4_REMUXER",s.default.Mp4Remuxer),this._context.registry("PRE_SOURCE_BUFFER",a.PreSource),this._context.registry("COMPATIBILITY",l.Compatibility),this._context.registry("LOGGER",m),this.mse=this._context.registry("MSE",o.Mse)({container:this._player.video}),this.initListeners(),setTimeout(()=>{this.loadMeta()},0)}initListeners(){this.on(h.LOADER_DATALOADED,this._handleLoaderDataLoaded.bind(this)),this.on(c.MEDIA_INFO,this._handleMediaInfo.bind(this)),this.on(c.METADATA_PARSED,this._handleMetadataParsed.bind(this)),this.on(c.DEMUX_COMPLETE,this._handleDemuxComplete.bind(this)),this.on(c.DEMUX_ERROR,this._handleDemuxError.bind(this)),this.on(f.INIT_SEGMENT,this._handleAppendInitSegment.bind(this)),this.on(f.MEDIA_SEGMENT,this._handleMediaSegment.bind(this))}_handleMediaInfo(){this._context.onMetaData||this.emit(c.DEMUX_ERROR,new Error("failed to get mediainfo"));const e=this._context.getInstance("LOADER_BUFFER"),t=this._context.getInstance("FETCH_LOADER");this.isSeekable&&(t.cancel(),this.state.range={start:0,end:e.historyLen-1},setTimeout(()=>{this.loadNext(0)}))}_handleLoaderDataLoaded(){this.emitTo("FLV_DEMUXER",c.DEMUX_START)}_handleMetadataParsed(e){this.emit(f.REMUX_METADATA,e)}_handleDemuxComplete(){this.emit(f.REMUX_MEDIA)}_handleAppendInitSegment(){this.state.initSegmentArrived=!0,this.mse.addSourceBuffers()}_handleMediaSegment(){this.mse.addSourceBuffers(),this.mse.doAppend()}_handleDemuxError(){this._player.emit("error",new d.default.Errors("parse",this._player.config.url))}seek(e){if(!this._context.onMetaData)return void this.loadMeta();if(!this.isSeekable)return;this._context.getInstance("LOADER_BUFFER").clear();const{preloadTime:t=15}=this._player.config,n=this.getSeekRange(e,t);this.state.range=n,this.loadData()}loadNext(e){this._context.onMetaData&&(this.loader.loading||this.getNextRange(e)&&this.loadData())}loadData(){const{start:e,end:t}=this.state.range;this.emit(h.LADER_START,this._player.config.url,{headers:{method:"get",Range:`bytes=${e}-${t}`}})}loadMeta(){this.loader.load(this._player.config.url,{headers:{Range:"bytes=0-"}}).catch(()=>{this.state.rangeSupport=!1,this.loadFallback()})}loadFallback(){this.loader.load(this._player.config.url).catch(()=>{this._player.emit("error",new d.default.Errors("network",this._player.config.url))})}getSeekRange(e,t){const{keyframes:n}=this._context.onMetaData,r=this._context.mediaInfo.duration,s=e,i=e+t,a=g.findFilePosition(s,n);return i>=r||s>=r?{start:a,end:""}:{start:a,end:g.findFilePosition(i,n)}}getNextRange(e){if(""===this.state.range.end)return;const{end:t}=this.getSeekRange(e,this.config.preloadTime||15);return t<=this.state.range.end&&""!==t?void 0:(this.state.range={start:this.state.range.end+1,end:t},!0)}destroy(){this._player=null,this.state={initSegmentArrived:!1,range:{start:0,end:""},rangeSupport:!0}}get isSeekable(){return!!this.state.rangeSupport&&(!this._context||!this._context.mediaInfo.isComplete()||null!==this._context.mediaInfo.keyframes&&void 0!==this._context.mediaInfo.keyframes)}get config(){return this._player.config}get loader(){return this._context.getInstance("FETCH_LOADER")}}t.default=g},"./src/index.js":
/*!**********************!*\
      !*** ./src/index.js ***!
      \**********************/
/*! no static exports found */function(e,t,n){var r=a(n(/*! xgplayer */"xgplayer")),s=n(/*! xgplayer-utils */"../xgplayer-utils/index.js"),i=a(n(/*! ./flv-vod */"./src/flv-vod.js"));function a(e){return e&&e.__esModule?e:{default:e}}const o=s.EVENTS.FlvAllowedEvents,l=(e,t)=>{if(!e.config.isLive&&e.duration-e.currentTime<2){const n=e.getBufferedRange();e.currentTime-n[1]<.1&&(e.emit("ended"),t.mse.endOfStream())}};class d extends r.default{constructor(e){super(e),this.context=new s.Context(o),this.initEvents()}start(){const e=this.context.registry("FLV_CONTROLLER",i.default)(this);this.flv=e,this.context.init(),super.start(e.mse.url)}initEvents(){this.on("timeupdate",this.handleTimeUpdate.bind(this)),this.on("seeking",this.handleSeek.bind(this)),this.once("destroy",this._destroy.bind(this))}handleTimeUpdate(){this.loadData(),l(this,this.flv)}handleSeek(){const e=this.currentTime,t=this.getBufferedRange();(e>t[1]||e<t[0])&&this.flv.seek(this.currentTime)}_destroy(){this.context.destroy(),this.context=null,this.flv=null}loadData(e=this.currentTime){const t=this.getBufferedRange();t[1]-e<(this.config.preloadTime||15)-5&&this.flv.loadNext(t[1]+1)}get src(){return this.currentSrc}set src(e){this.player.config.url=e,this.paused?this.start(e):(this.pause(),this.once("pause",()=>{this.start(e)}),this.once("canplay",()=>{this.play()})),this.once("canplay",()=>{this.currentTime=0})}}e.exports=d},0:
/*!****************************!*\
      !*** multi ./src/index.js ***!
      \****************************/
/*! no static exports found */function(e,t,n){e.exports=n(/*! ./src/index.js */"./src/index.js")},xgplayer:
/*!***************************!*\
      !*** external "xgplayer" ***!
      \***************************/
/*! no static exports found */function(e,t){e.exports=r}}))},"./src/index.js":
/*!**********************!*\
  !*** ./src/index.js ***!
  \**********************/
/*! no static exports found */function(e,t,n){"use strict";var r=i(n(/*! xgplayer-flv-live */"../xgplayer-flv-live/dist/index.js")),s=i(n(/*! xgplayer-flv-vod */"../xgplayer-flv-vod/dist/index.js"));function i(e){return e&&e.__esModule?e:{default:e}}e.exports=function e(t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t.isLive?new r.default(t):new s.default(t)}},0:
/*!****************************!*\
  !*** multi ./src/index.js ***!
  \****************************/
/*! no static exports found */function(e,t,n){e.exports=n(/*! ./src/index.js */"./src/index.js")},xgplayer:
/*!***************************!*\
  !*** external "xgplayer" ***!
  \***************************/
/*! no static exports found */function(e,t){e.exports=__WEBPACK_EXTERNAL_MODULE_xgplayer__}})}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly94Z3BsYXllci1mbHYvd2VicGFjay91bml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uIiwid2VicGFjazovL3hncGxheWVyLWZsdi93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly94Z3BsYXllci1mbHYvLi1saXZlL2Rpc3QvaW5kZXguanMiLCJ3ZWJwYWNrOi8veGdwbGF5ZXItZmx2L3dlYnBhY2s6Ly94Z3BsYXllci1mbHYvd2VicGFjay91bml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uIiwid2VicGFjazovL3hncGxheWVyLWZsdi93ZWJwYWNrOi8veGdwbGF5ZXItZmx2L3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL3hncGxheWVyLWZsdi93ZWJwYWNrOi8veGdwbGF5ZXItZmx2L1VzZXJzL2xlb25hcmRvL0RvY3VtZW50cy9mcm9udC1lbmQvcGxheWVyL3hncGxheWVyL25vZGVfbW9kdWxlcy9ldmVudHMvZXZlbnRzLmpzIiwid2VicGFjazovL3hncGxheWVyLWZsdi93ZWJwYWNrOi8veGdwbGF5ZXJ4Z3BsYXllci1idWZmZXIvaW5kZXguanMiLCJ3ZWJwYWNrOi8veGdwbGF5ZXItZmx2L3dlYnBhY2s6Ly94Z3BsYXllcnhncGxheWVyLWJ1ZmZlci9zcmMvYnVmZmVyLmpzIiwid2VicGFjazovL3hncGxheWVyLWZsdi93ZWJwYWNrOi8veGdwbGF5ZXJ4Z3BsYXllci1idWZmZXIvc3JjL3ByZXNvdWNlLmpzIiwid2VicGFjazovL3hncGxheWVyLWZsdi93ZWJwYWNrOi8veGdwbGF5ZXJ4Z3BsYXllci1idWZmZXIvc3JjL3RyYWNrLmpzIiwid2VicGFjazovL3hncGxheWVyLWZsdi93ZWJwYWNrOi8veGdwbGF5ZXJ4Z3BsYXllci1jb2RlYy9pbmRleC5qcyIsIndlYnBhY2s6Ly94Z3BsYXllci1mbHYvd2VicGFjazovL3hncGxheWVyeGdwbGF5ZXItY29kZWMvc3JjL2FhYy9hYWMtaGVscGVyLmpzIiwid2VicGFjazovL3hncGxheWVyLWZsdi93ZWJwYWNrOi8veGdwbGF5ZXJ4Z3BsYXllci1jb2RlYy9zcmMvY29tcGF0aWJpbGl0eS5qcyIsIndlYnBhY2s6Ly94Z3BsYXllci1mbHYvd2VicGFjazovL3hncGxheWVyeGdwbGF5ZXItY29kZWMvc3JjL2gyNjQvbmFsdW5pdC9nb2xvbWIuanMiLCJ3ZWJwYWNrOi8veGdwbGF5ZXItZmx2L3dlYnBhY2s6Ly94Z3BsYXllcnhncGxheWVyLWNvZGVjL3NyYy9oMjY0L25hbHVuaXQvaW5kZXguanMiLCJ3ZWJwYWNrOi8veGdwbGF5ZXItZmx2L3dlYnBhY2s6Ly94Z3BsYXllcnhncGxheWVyLWNvZGVjL3NyYy9oMjY0L25hbHVuaXQvc3BzLmpzIiwid2VicGFjazovL3hncGxheWVyLWZsdi93ZWJwYWNrOi8veGdwbGF5ZXJ4Z3BsYXllci1kZW11eC9zcmMvZmx2L2FtZi1wYXJzZXIuanMiLCJ3ZWJwYWNrOi8veGdwbGF5ZXItZmx2L3dlYnBhY2s6Ly94Z3BsYXllcnhncGxheWVyLWRlbXV4L3NyYy9mbHYvaW5kZXguanMiLCJ3ZWJwYWNrOi8veGdwbGF5ZXItZmx2L3dlYnBhY2s6Ly94Z3BsYXllcnhncGxheWVyLWxvYWRlci9pbmRleC5qcyIsIndlYnBhY2s6Ly94Z3BsYXllci1mbHYvd2VicGFjazovL3hncGxheWVyeGdwbGF5ZXItbG9hZGVyL3NyYy9mZXRjaC1sb2FkZXIuanMiLCJ3ZWJwYWNrOi8veGdwbGF5ZXItZmx2L3dlYnBhY2s6Ly94Z3BsYXllcnhncGxheWVyLXJlbXV4L2luZGV4LmpzIiwid2VicGFjazovL3hncGxheWVyLWZsdi93ZWJwYWNrOi8veGdwbGF5ZXJ4Z3BsYXllci1yZW11eC9zcmMvbXA0L2ZtcDQuanMiLCJ3ZWJwYWNrOi8veGdwbGF5ZXItZmx2L3dlYnBhY2s6Ly94Z3BsYXllcnhncGxheWVyLXJlbXV4L3NyYy9tcDQvaW5kZXguanMiLCJ3ZWJwYWNrOi8veGdwbGF5ZXItZmx2L3dlYnBhY2s6Ly94Z3BsYXllcnhncGxheWVyLXV0aWxzL2luZGV4LmpzIiwid2VicGFjazovL3hncGxheWVyLWZsdi93ZWJwYWNrOi8veGdwbGF5ZXJ4Z3BsYXllci11dGlscy9ub2RlX21vZHVsZXMvY29uY2F0LXR5cGVkLWFycmF5L2xpYi9jb25jYXQuanMiLCJ3ZWJwYWNrOi8veGdwbGF5ZXItZmx2L3dlYnBhY2s6Ly94Z3BsYXllcnhncGxheWVyLXV0aWxzL25vZGVfbW9kdWxlcy9jb25jYXQtdHlwZWQtYXJyYXkvbGliL2luZGV4LmpzIiwid2VicGFjazovL3hncGxheWVyLWZsdi93ZWJwYWNrOi8veGdwbGF5ZXJ4Z3BsYXllci11dGlscy9ub2RlX21vZHVsZXMvd2Vid29ya2lmeS13ZWJwYWNrL2luZGV4LmpzIiwid2VicGFjazovL3hncGxheWVyLWZsdi93ZWJwYWNrOi8veGdwbGF5ZXJ4Z3BsYXllci11dGlscy9zcmMvY29uc3RhbnRzL2V2ZW50cy5qcyIsIndlYnBhY2s6Ly94Z3BsYXllci1mbHYvd2VicGFjazovL3hncGxheWVyeGdwbGF5ZXItdXRpbHMvc3JjL2NvbnN0YW50cy93b3JrZXItY29tbWFuZHMuanMiLCJ3ZWJwYWNrOi8veGdwbGF5ZXItZmx2L3dlYnBhY2s6Ly94Z3BsYXllcnhncGxheWVyLXV0aWxzL3NyYy9jb250ZXh0LmpzIiwid2VicGFjazovL3hncGxheWVyLWZsdi93ZWJwYWNrOi8veGdwbGF5ZXJ4Z3BsYXllci11dGlscy9zcmMvZW52L2lzbGUuanMiLCJ3ZWJwYWNrOi8veGdwbGF5ZXItZmx2L3dlYnBhY2s6Ly94Z3BsYXllcnhncGxheWVyLXV0aWxzL3NyYy9lbnYvc25pZmZlci5qcyIsIndlYnBhY2s6Ly94Z3BsYXllci1mbHYvd2VicGFjazovL3hncGxheWVyeGdwbGF5ZXItdXRpbHMvc3JjL2Vudi91dGY4LmpzIiwid2VicGFjazovL3hncGxheWVyLWZsdi93ZWJwYWNrOi8veGdwbGF5ZXJ4Z3BsYXllci11dGlscy9zcmMvbW9iaWxlL2F1ZGlvLWNvbnRleHQuanMiLCJ3ZWJwYWNrOi8veGdwbGF5ZXItZmx2L3dlYnBhY2s6Ly94Z3BsYXllcnhncGxheWVyLXV0aWxzL3NyYy9tb2JpbGUvbW9iaWxlLXZpZGVvLmpzIiwid2VicGFjazovL3hncGxheWVyLWZsdi93ZWJwYWNrOi8veGdwbGF5ZXJ4Z3BsYXllci11dGlscy9zcmMvbW9iaWxlL3NvdXJjZWJ1ZmZlci5qcyIsIndlYnBhY2s6Ly94Z3BsYXllci1mbHYvd2VicGFjazovL3hncGxheWVyeGdwbGF5ZXItdXRpbHMvc3JjL21vYmlsZS90aWNrZXIuanMiLCJ3ZWJwYWNrOi8veGdwbGF5ZXItZmx2L3dlYnBhY2s6Ly94Z3BsYXllcnhncGxheWVyLXV0aWxzL3NyYy9tb2JpbGUvdmlkZW8tY29udGV4dC5qcyIsIndlYnBhY2s6Ly94Z3BsYXllci1mbHYvd2VicGFjazovL3hncGxheWVyeGdwbGF5ZXItdXRpbHMvc3JjL21vYmlsZS93b3JrZXIuanMiLCJ3ZWJwYWNrOi8veGdwbGF5ZXItZmx2L3dlYnBhY2s6Ly94Z3BsYXllcnhncGxheWVyLXV0aWxzL3NyYy9tb2JpbGUveXV2LWNhbnZhcy5qcyIsIndlYnBhY2s6Ly94Z3BsYXllci1mbHYvd2VicGFjazovL3hncGxheWVyeGdwbGF5ZXItdXRpbHMvc3JjL21vZGVscy9tZWRpYS1pbmZvLmpzIiwid2VicGFjazovL3hncGxheWVyLWZsdi93ZWJwYWNrOi8veGdwbGF5ZXJ4Z3BsYXllci11dGlscy9zcmMvbW9kZWxzL21lZGlhLXNhbXBsZS5qcyIsIndlYnBhY2s6Ly94Z3BsYXllci1mbHYvd2VicGFjazovL3hncGxheWVyeGdwbGF5ZXItdXRpbHMvc3JjL21vZGVscy9tZWRpYS1zZWdtZW50LWxpc3QuanMiLCJ3ZWJwYWNrOi8veGdwbGF5ZXItZmx2L3dlYnBhY2s6Ly94Z3BsYXllcnhncGxheWVyLXV0aWxzL3NyYy9tb2RlbHMvbWVkaWEtc2VnbWVudC5qcyIsIndlYnBhY2s6Ly94Z3BsYXllci1mbHYvd2VicGFjazovL3hncGxheWVyeGdwbGF5ZXItdXRpbHMvc3JjL21vZGVscy90cmFjay1tZXRhLmpzIiwid2VicGFjazovL3hncGxheWVyLWZsdi93ZWJwYWNrOi8veGdwbGF5ZXJ4Z3BsYXllci11dGlscy9zcmMvbW9kZWxzL3RyYWNrLXNhbXBsZS5qcyIsIndlYnBhY2s6Ly94Z3BsYXllci1mbHYvd2VicGFjazovL3hncGxheWVyeGdwbGF5ZXItdXRpbHMvc3JjL21zZS9pbmRleC5qcyIsIndlYnBhY2s6Ly94Z3BsYXllci1mbHYvd2VicGFjazovL3hncGxheWVyeGdwbGF5ZXItdXRpbHMvc3JjL3dyaXRlL2J1ZmZlci5qcyIsIndlYnBhY2s6Ly94Z3BsYXllci1mbHYvd2VicGFjazovL3hncGxheWVyeGdwbGF5ZXItdXRpbHMvc3JjL3dyaXRlL3N0cmVhbS5qcyIsIndlYnBhY2s6Ly94Z3BsYXllci1mbHYvd2VicGFjazovL3hncGxheWVyLWZsdi9zcmMvZmx2LXZvZC5qcyIsIndlYnBhY2s6Ly94Z3BsYXllci1mbHYvd2VicGFjazovL3hncGxheWVyLWZsdi9zcmMvaW5kZXguanMiLCJ3ZWJwYWNrOi8veGdwbGF5ZXItZmx2L3dlYnBhY2s6L3hncGxheWVyLWZsdi9leHRlcm5hbCBcInhncGxheWVyXCIiLCJ3ZWJwYWNrOi8veGdwbGF5ZXItZmx2Ly4vc3JjL2luZGV4LmpzIiwid2VicGFjazovL3hncGxheWVyLWZsdi9leHRlcm5hbCBcInhncGxheWVyXCIiXSwibmFtZXMiOlsicm9vdCIsImZhY3RvcnkiLCJleHBvcnRzIiwibW9kdWxlIiwicmVxdWlyZSIsImRlZmluZSIsImFtZCIsIndpbmRvdyIsIl9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfeGdwbGF5ZXJfXyIsImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJlIiwiYSIsImRlZmF1bHQiLCJldmFsIiwiMCIsInhncGxheWVyIiwiUmVmbGVjdE93bktleXMiLCJSIiwiUmVmbGVjdCIsIlJlZmxlY3RBcHBseSIsImFwcGx5IiwidGFyZ2V0IiwicmVjZWl2ZXIiLCJhcmdzIiwiRnVuY3Rpb24iLCJvd25LZXlzIiwiZ2V0T3duUHJvcGVydHlTeW1ib2xzIiwiZ2V0T3duUHJvcGVydHlOYW1lcyIsImNvbmNhdCIsIk51bWJlcklzTmFOIiwiTnVtYmVyIiwiaXNOYU4iLCJFdmVudEVtaXR0ZXIiLCJpbml0IiwidGhpcyIsIl9ldmVudHMiLCJfZXZlbnRzQ291bnQiLCJfbWF4TGlzdGVuZXJzIiwiZGVmYXVsdE1heExpc3RlbmVycyIsIiRnZXRNYXhMaXN0ZW5lcnMiLCJ0aGF0IiwiX2FkZExpc3RlbmVyIiwidHlwZSIsImxpc3RlbmVyIiwicHJlcGVuZCIsImV2ZW50cyIsImV4aXN0aW5nIiwid2FybmluZyIsIlR5cGVFcnJvciIsIm5ld0xpc3RlbmVyIiwiZW1pdCIsInVuc2hpZnQiLCJwdXNoIiwibGVuZ3RoIiwid2FybmVkIiwidyIsIkVycm9yIiwiU3RyaW5nIiwiZW1pdHRlciIsImNvdW50IiwiY29uc29sZSIsIndhcm4iLCJvbmNlV3JhcHBlciIsImFyZ3VtZW50cyIsImZpcmVkIiwicmVtb3ZlTGlzdGVuZXIiLCJ3cmFwRm4iLCJfb25jZVdyYXAiLCJzdGF0ZSIsIndyYXBwZWQiLCJfbGlzdGVuZXJzIiwidW53cmFwIiwiZXZsaXN0ZW5lciIsImFyciIsInJldCIsIkFycmF5IiwiYXJyYXlDbG9uZSIsImxpc3RlbmVyQ291bnQiLCJjb3B5Iiwic2V0IiwiYXJnIiwiUmFuZ2VFcnJvciIsImdldFByb3RvdHlwZU9mIiwic2V0TWF4TGlzdGVuZXJzIiwiZ2V0TWF4TGlzdGVuZXJzIiwiZG9FcnJvciIsImVycm9yIiwiZXIiLCJlcnIiLCJtZXNzYWdlIiwiY29udGV4dCIsImhhbmRsZXIiLCJsZW4iLCJsaXN0ZW5lcnMiLCJhZGRMaXN0ZW5lciIsIm9uIiwicHJlcGVuZExpc3RlbmVyIiwib25jZSIsInByZXBlbmRPbmNlTGlzdGVuZXIiLCJsaXN0IiwicG9zaXRpb24iLCJvcmlnaW5hbExpc3RlbmVyIiwic2hpZnQiLCJpbmRleCIsInBvcCIsIm9mZiIsInJlbW92ZUFsbExpc3RlbmVycyIsImtleXMiLCJyYXdMaXN0ZW5lcnMiLCJldmVudE5hbWVzIiwiVHJhY2siLCJUcmFja3MiLCJBdWRpb1RyYWNrIiwiVmlkZW9UcmFjayIsIlhnQnVmZmVyIiwiUmVtdXhCdWZmZXIiLCJQcmVTb3VyY2UiLCJjb25zdHJ1Y3RvciIsImhpc3RvcnlMZW4iLCJhcnJheSIsIm9mZnNldCIsImRhdGEiLCJieXRlTGVuZ3RoIiwiVWludDhBcnJheSIsIl9zaGlmdEJ1ZmZlciIsInNsaWNlIiwidG1wb2ZmIiwidG1wIiwidGVtcGxlbmd0aCIsImNsZWFyIiwiZGVzdHJveSIsInRvSW50Iiwic3RhcnQiLCJyZXRJbnQiLCJ2aWRlbyIsImF1ZGlvIiwiU291cmNlIiwibWltZXR5cGUiLCJzb3VyY2VzIiwiZ2V0U291cmNlIiwic291cmNlIiwiY3JlYXRlU291cmNlIiwiaWQiLCJzZXF1ZW5jZU51bWJlciIsInNhbXBsZXMiLCJkcm9wcGVkU2FtcGxlcyIsInJlc2V0IiwiZGlzdHJveSIsInN1cGVyIiwiVEFHIiwiZHJvcHBlZCIsImF1ZGlvVHJhY2siLCJ2aWRlb1RyYWNrIiwiTmFsdW5pdCIsIlNwc1BhcnNlciIsIkNvbXBhdGliaWxpdHkiLCJjb2RlYyIsImNoYW5uZWxDb3VudCIsIlJFTVVYX0VWRU5UUyIsIkVWRU5UUyIsIm5leHRBdWRpb0R0cyIsIm5leHRWaWRlb0R0cyIsImxhc3RBdWRpb1NhbXBsZXNMZW4iLCJsYXN0VmlkZW9TYW1wbGVzTGVuIiwibGFzdFZpZGVvRHRzIiwibGFzdEF1ZGlvRHRzIiwiYWxsQXVkaW9TYW1wbGVzQ291bnQiLCJhbGxWaWRlb1NhbXBsZXNDb3VudCIsIl9maXJzdEF1ZGlvU2FtcGxlIiwiX2ZpcnN0VmlkZW9TYW1wbGUiLCJmaWxsZWRBdWRpb1NhbXBsZXMiLCJmaWxsZWRWaWRlb1NhbXBsZXMiLCJiZWZvcmUiLCJSRU1VWF9NRURJQSIsImRvRml4IiwiaXNGaXJzdEF1ZGlvU2FtcGxlcyIsImlzRmlyc3RWaWRlb1NhbXBsZXMiLCJnZXRGaXJzdFNhbXBsZSIsInJlbW92ZUludmFsaWRTYW1wbGVzIiwicmVjb3JkU2FtcGxlc0NvdW50IiwiZml4UmVmU2FtcGxlRHVyYXRpb24iLCJtZXRhIiwiZG9GaXhWaWRlbyIsImRvRml4QXVkaW8iLCJmaXJzdCIsInZpZGVvU2FtcGxlcyIsImZyYW1lUmF0ZSIsImZpeGVkIiwiZmlyc3RTYW1wbGUiLCJmaXJzdER0cyIsImR0cyIsInNhbXBsZXNMZW4iLCJ2aWRlb0ZpcnN0RHRzIiwiZ2FwIiwicmVmU2FtcGxlRHVyYXRpb24iLCJmaWxsQ291bnQiLCJNYXRoIiwiZmxvb3IiLCJjbG9uZWRGaXJzdFNhbXBsZSIsImFzc2lnbiIsInB0cyIsImN0cyIsInNpemUiLCJhYnNHYXAiLCJhYnMiLCJmaWxsRnJhbWVDb3VudCIsImNsb25lZFNhbXBsZSIsImNvbXB1dGVkIiwib3JpZ2luRHRzIiwibGFzdER0cyIsImxhc3RTYW1wbGVEdXJhdGlvbiIsImN1cnJlbnQiLCJuZXh0IiwiZHVyYXRpb24iLCJmaWxsRnJhbWVJZHgiLCJmaWxsRnJhbWUiLCJzcGxpY2UiLCJhdWRpb1NhbXBsZXMiLCJzaWxlbnRGcmFtZSIsIkFBQyIsImdldFNpbGVudEZyYW1lIiwic29ydEF1ZGlvU2FtcGxlcyIsInZpZGVvRmlyc3RQdHMiLCJzaWxlbnRTYW1wbGVDb3VudCIsInNpbGVudFNhbXBsZSIsImRhdGFzaXplIiwiZmlsdGVyZWQiLCJyZWZTYW1wbGVEdXJhdGlvbkZpeGVkIiwic2lsZW50RnJhbWVDb3VudCIsImZpbmRGaXJzdFZpZGVvU2FtcGxlIiwiZmluZEZpcnN0QXVkaW9TYW1wbGUiLCJpc1ZpZGVvIiwiYWxsU2FtcGxlc0NvdW50IiwiZmlsbGVkU2FtcGxlc0NvdW50IiwiZHVyYXRpb25BdmciLCJmaWx0ZXIiLCJzYW1wbGUiLCJzb3J0IiwiYiIsInNvcnRlZCIsImlzS2V5ZnJhbWUiLCJfY29udGV4dCIsImdldEluc3RhbmNlIiwidHJhY2tzIiwidWludDhhcnJheSIsIl9idWZmZXIiLCJfYnVmZmVySW5kZXgiLCJfdG90YWxCeXRlcyIsIl90b3RhbEJpdHMiLCJfY3VycmVudFdvcmQiLCJfY3VycmVudFdvcmRCaXRzTGVmdCIsIl9maWxsQ3VycmVudFdvcmQiLCJidWZmZXJCeXRlc0xlZnQiLCJieXRlc1JlYWQiLCJtaW4iLCJ3b3JkIiwic3ViYXJyYXkiLCJEYXRhVmlldyIsImJ1ZmZlciIsImdldFVpbnQzMiIsInJlYWRCaXRzIiwiYml0cyIsInJlc3VsdCIsImJpdHNOZWVkTGVmdCIsImJpdHNSZWFkTmV4dCIsInJlc3VsdDIiLCJyZWFkQm9vbCIsInJlYWRCeXRlIiwiX3NraXBMZWFkaW5nWmVybyIsInplcm9Db3VudCIsInJlYWRVRUciLCJsZWFkaW5nWmVyb3MiLCJyZWFkU0VHIiwiYnVmIiwiZGF0YXZpZXciLCJnZXRJbnQzMiIsImdldEludDE2IiwiZ2V0SW50OCIsImdldEFubmV4Yk5hbHMiLCJnZXRBdmNjTmFscyIsIm5hbHMiLCJnZXRIZWFkZXJQb3NpdGlvbkFubmV4QiIsInBvcyIsImVuZCIsImhlYWRlciIsImhlYWRlckxlbmd0aCIsInNraXAiLCJ1bml0IiwiYm9keSIsImFuYWx5c2VOYWwiLCJuZHIiLCJpZHIiLCJzcHMiLCJwYXJzZVNQUyIsInBwcyIsIlNQU1BhcnNlciIsInNyYyIsInNyY0xlbmd0aCIsImRzdCIsImRzdElkeCIsInJic3AiLCJfZWJzcDJyYnNwIiwiZ2IiLCJHb2xvbWIiLCJwcm9maWxlSWRjIiwibGV2ZWxJZGMiLCJwcm9maWxlX3N0cmluZyIsImdldFByb2ZpbGVTdHJpbmciLCJsZXZlbF9zdHJpbmciLCJnZXRMZXZlbFN0cmluZyIsImNocm9tYV9mb3JtYXRfaWRjIiwiY2hyb21hX2Zvcm1hdCIsImJpdF9kZXB0aCIsInNjYWxpbmdfbGlzdF9jb3VudCIsIl9za2lwU2NhbGluZ0xpc3QiLCJwaWNfb3JkZXJfY250X3R5cGUiLCJudW1fcmVmX2ZyYW1lc19pbl9waWNfb3JkZXJfY250X2N5Y2xlIiwicGljX3dpZHRoX2luX21ic19taW51czEiLCJwaWNfaGVpZ2h0X2luX21hcF91bml0c19taW51czEiLCJmcmFtZV9tYnNfb25seV9mbGFnIiwiZnJhbWVfY3JvcF9sZWZ0X29mZnNldCIsImZyYW1lX2Nyb3BfcmlnaHRfb2Zmc2V0IiwiZnJhbWVfY3JvcF90b3Bfb2Zmc2V0IiwiZnJhbWVfY3JvcF9ib3R0b21fb2Zmc2V0IiwicGFyX3dpZHRoIiwicGFyX2hlaWdodCIsImZwcyIsImZwc19maXhlZCIsImZwc19udW0iLCJmcHNfZGVuIiwiYXNwZWN0X3JhdGlvX2lkYyIsInBhcl93X3RhYmxlIiwicGFyX2hfdGFibGUiLCJudW1fdW5pdHNfaW5fdGljayIsInRpbWVfc2NhbGUiLCJwYXJTY2FsZSIsImNyb3BfdW5pdF94IiwiY3JvcF91bml0X3kiLCJjb2RlY193aWR0aCIsImNvZGVjX2hlaWdodCIsInByZXNlbnRfd2lkdGgiLCJjZWlsIiwiY2hyb21hX2Zvcm1hdF9zdHJpbmciLCJnZXRDaHJvbWFGb3JtYXRTdHJpbmciLCJmcmFtZV9yYXRlIiwicGFyX3JhdGlvIiwid2lkdGgiLCJoZWlnaHQiLCJjb2RlY19zaXplIiwicHJlc2VudF9zaXplIiwibGFzdF9zY2FsZSIsIm5leHRfc2NhbGUiLCJkZWx0YV9zY2FsZSIsInRvRml4ZWQiLCJjaHJvbWEiLCJzcHNDb25maWciLCJjb2RlY1dpZHRoIiwiY29kZWNIZWlnaHQiLCJwcmVzZW50V2lkdGgiLCJwcmVzZW50SGVpZ2h0IiwicHJvZmlsZSIsImxldmVsIiwiYml0RGVwdGgiLCJjaHJvbWFGb3JtYXQiLCJwYXJSYXRpbyIsImZwc0RlbiIsImZwc051bSIsInRpbWVzY2FsZSIsIkRBVEFfVFlQRVMiLCJOVU1CRVIiLCJCT09MRUFOIiwiU1RSSU5HIiwiT0JKRUNUIiwiTUlYX0FSUkFZIiwiT0JKRUNUX0VORCIsIlNUUklDVF9BUlJBWSIsIkRBVEUiLCJMT05FX1NUUklORyIsInJlYWRPZmZzZXQiLCJyZXNvbHZlIiwibWV0YURhdGEiLCJwYXJzZVZhbHVlIiwiYm9keVNpemUiLCJyZXNldFN0YXR1cyIsInBhcnNlU3RyaW5nIiwic3RyTGVuIiwiZ2V0VWludDE2IiwiaXNMZSIsInN0ciIsIlVURjgiLCJkZWNvZGUiLCJwYXJzZURhdGUiLCJkdiIsInRzIiwiZ2V0RmxvYXQ2NCIsIkRhdGUiLCJwYXJzZU9iamVjdCIsImlzT2JqRW5kIiwicGFyc2VMb25nU3RyaW5nIiwiQXJyYXlCdWZmZXIiLCJkYXRhVmlldyIsImdldFVpbnQ4Iiwib2JqRW5kU2l6ZSIsImFtZk9iaiIsImlzT2JqZWN0RW5kIiwiYW1mVmFyIiwiYXJyTGVuZ3RoIiwic2NyaXB0IiwiZGF0ZSIsImxvbmdTdHIiLCJERU1VWF9FVkVOVFMiLCJGbHZEZW11eGVyIiwiX2ZpcnN0RnJhZ21lbnRMb2FkZWQiLCJfdHJhY2tOdW0iLCJfaGFzU2NyaXB0IiwiREVNVVhfU1RBUlQiLCJkb1BhcnNlRmx2Iiwic3RyZWFtRmxhZyIsImhhc1ZpZGVvIiwiaGFzQXVkaW8iLCJsb2FkZXJCdWZmZXIiLCJjaHVuayIsIl9wYXJzZUZsdlRhZyIsIkRFTVVYX0NPTVBMRVRFIiwicGFyc2VGbHZIZWFkZXIiLCJpc0ZsdkZpbGUiLCJwbGF5VHlwZSIsImdldFBsYXlUeXBlIiwiaW5pdFZpZGVvVHJhY2siLCJpbml0QXVkaW9UcmFjayIsIkRFTVVYX0VSUk9SIiwiVmlkZW9UcmFja01ldGEiLCJBdWRpb1RyYWNrTWV0YSIsIl9wYXJzZUZsdlRhZ0hlYWRlciIsIl9wcm9jZXNzQ2h1bmsiLCJ0YWdUeXBlIiwibG9nZ2VyIiwidGltZXN0YW1wIiwidGltZXN0YW1wRXh0IiwiX3BhcnNlU2NyaXB0RGF0YSIsIl9wYXJzZUFBQ0RhdGEiLCJfcGFyc2VIZXZjRGF0YSIsImluZm8iLCJBTUZQYXJzZXIiLCJvbk1ldGFEYXRhIiwibWVkaWFJbmZvIiwiaHNhQXVkaW8iLCJfZGF0YXNpemVWYWxpZGF0b3IiLCJNRURJQV9JTkZPIiwiaGFzU3BlY2lmaWNDb25maWciLCJhdWRpb3NhbXBsZXJhdGUiLCJzYW1wbGVSYXRlIiwiYXVkaW9jaGFubmVscyIsInNhbXBsZVJhdGVJbmRleCIsImZyYW1lcmF0ZSIsIl9hYWNTZXF1ZW5jZUhlYWRlclBhcnNlciIsIm9iamVjdFR5cGUiLCJfc3dpdGNoQXVkaW9TYW1wbGVSYXRlIiwiZnJhbWVMZW5ndGgiLCJkZXBlbmRzT25Db3JlQ29kZXIiLCJleHRlbnNpb25GbGFnSW5kZXgiLCJleHRlbnNpb25TYW1wbGluZ0luZGV4IiwiY29uZmlnIiwidXNlckFnZW50IiwibmF2aWdhdG9yIiwidG9Mb3dlckNhc2UiLCJzYW1wbGluZ0luZGV4IiwiaW5kZXhPZiIsInRyYWNrIiwiZm9ybWF0IiwiX2hhc0F1ZGlvU2VxdWVuY2UiLCJfc3dpdGNoQXVkaW9TYW1wbGluZ0ZyZXF1ZW5jeSIsImZyYW1lTGVudGgiLCJhdWRpb1NhbXBsZVJhdGUiLCJhdWRpb1NhbXBsZVJhdGVJbmRleCIsInZhbGlkYXRlIiwiYWFjSGVhZGVyIiwiYXVkaW9NZWRpYSIsIk1FVEFEQVRBX1BBUlNFRCIsIkFVRElPX01FVEFEQVRBX0NIQU5HRSIsImZyYW1lVHlwZSIsImNvZGVjSUQiLCJhdmNQYWNrZXRUeXBlIiwicGFyc2VJbnQiLCJuYWx1Iiwic2l6ZXMiLCJhdmNjbGVuZ3RoIiwiX2F2Y1NlcXVlbmNlSGVhZGVyUGFyc2VyIiwiX2hhc1ZpZGVvU2VxdWVuY2UiLCJWSURFT19NRVRBREFUQV9DSEFOR0UiLCJjb25maWd1cmF0aW9uVmVyc2lvbiIsImF2Y1Byb2ZpbGVJbmRpY2F0aW9uIiwicHJvZmlsZUNvbXBhdGliaWxpdHkiLCJhdmNMZXZlbEluZGljYXRpb24iLCJuYWxVbml0TGVuZ3RoIiwibnVtT2ZTcHMiLCJqIiwiY29kZWNTdHJpbmciLCJoIiwidG9TdHJpbmciLCJudW1PZlBwcyIsInRvVmlkZW9NZXRhIiwidmlkZW9NZWRpYSIsImF2Y2MiLCJzYW1wbGluZ0ZyZXF1ZW5jeUluZGV4IiwiX3N3aXRjaEF1ZGlvQ2hhbm5lbCIsImRhdGFzaXplQ29uZmlybSIsIkZldGNoTG9hZGVyIiwiTE9BREVSX0VWRU5UUyIsImNvbmZpZ3MiLCJ1cmwiLCJzdGF0dXMiLCJfcmVhZGVyIiwiX2NhbmNlbGVkIiwicmVhZHR5cGUiLCJfbG9hZGVyVGFza05vIiwiTEFERVJfU1RBUlQiLCJsb2FkIiwib3B0cyIsIl90aGlzIiwicGFyYW1zIiwiZ2V0UGFyYW1zIiwibG9hZGluZyIsImZldGNoIiwidGhlbiIsInJlc3BvbnNlIiwib2siLCJfb25GZXRjaFJlc3BvbnNlIiwiTE9BREVSX0VSUk9SIiwiY2F0Y2giLCJ0YXNrbm8iLCJqc29uIiwiTE9BREVSX0NPTVBMRVRFIiwidGV4dCIsImFycmF5QnVmZmVyIiwiX29uUmVhZGVyIiwiZ2V0UmVhZGVyIiwicmVhZGVyIiwiY2FuY2VsIiwicmVhZCIsInZhbCIsImRvbmUiLCJMT0FERVJfREFUQUxPQURFRCIsIm9wdGlvbnMiLCJoZWFkZXJzIiwiSGVhZGVycyIsIm1ldGhvZCIsImNhY2hlIiwiY29uZmlnSGVhZGVycyIsImFwcGVuZCIsIm9wdEhlYWRlcnMiLCJjb3JzIiwid2l0aENyZWRlbnRpYWxzIiwiY3JlZGVudGlhbHMiLCJNcDRSZW11eGVyIiwiRm1wNCIsIkJ1ZmZlciIsIndyaXRlVWludDMyIiwiY29udGVudCIsIndyaXRlIiwidmVyc2lvbiIsImZsYWciLCJpbml0Qm94IiwidHJhayIsIm12aGQiLCJ2aWRlb1RyYWsiLCJhdWRpb1RyYWsiLCJtdmV4IiwiZm9yRWFjaCIsIml0ZW0iLCJieXRlcyIsInRraGQiLCJtZGlhIiwic2FtcGxlcmF0ZSIsIm1lZGlhVGltZSIsIm1kaGQiLCJoZGxyIiwibWluZiIsImV4dGVuc2lvbiIsInZtaGQiLCJzbWhkIiwiZGluZiIsInN0YmwiLCJzdHNkIiwic3R0cyIsInN0c2MiLCJzdHN6Iiwic3RjbyIsIm1wNGEiLCJhdmMxIiwiZXNkcyIsImNvbmZpZ2xlbiIsImhTcGFjaW5nIiwidlNwYWNpbmciLCJidHJ0IiwicGFzcCIsInRyYWNrSUQiLCJtZWhkIiwidHJleCIsIm1maGQiLCJ0cmFmIiwic2VxdWVuY2UiLCJ0ZmhkIiwidGZkdCIsInRpbWUiLCJzZHRwIiwidHJ1biIsInNkdHBMZW5ndGgiLCJzYW1wbGVDb3VudCIsImZsYWdzIiwiaXNMZWFkaW5nIiwiZGVwZW5kc09uIiwiaXNEZXBlbmRlZE9uIiwiaGFzUmVkdW5kYW5jeSIsImlzTm9uU3luYyIsIm51bSIsIm1kYXRCb3giLCJjaGFyQ29kZUF0IiwiX2R0c0Jhc2UiLCJfaXNEdHNCYXNlSW5pdGVkIiwidmlkZW9BbGxEdXJhdGlvbiIsImF1ZGlvQWxsRHVyYXRpb24iLCJyZW11eCIsIlJFTVVYX01FVEFEQVRBIiwib25NZXRhRGF0YVJlYWR5IiwiX2R0c0Jhc2VJbml0ZWQiLCJjYWxjRHRzQmFzZSIsIl9yZW11eFZpZGVvIiwiX3JlbXV4QXVkaW8iLCJzZWVrIiwibW9vdiIsImluaXRTZWdtZW50IiwiZnR5cCIsInByZXNvdXJjZWJ1ZmZlciIsIklOSVRfU0VHTUVOVCIsImF1ZGlvQmFzZSIsIkluZmluaXR5IiwidmlkZW9CYXNlIiwibXA0U2FtcGxlcyIsImF2Y1NhbXBsZSIsIm1kYXRTYW1wbGUiLCJzYW1wbGVEdXJhdGlvbiIsInZpZGVvTWV0YSIsIm1vb2ZNZGF0IiwibW9vZiIsIm1kYXQiLCJNRURJQV9TRUdNRU5UIiwiaXNGaXJzdER0c0luaXRlZCIsImF1ZGlvTWV0YSIsIm1wNFNhbXBsZSIsImluaXRTaWxlbnRBdWRpbyIsIkNvbnRleHQiLCJXT1JLRVJfQ09NTUFORFMiLCJzbmlmZmVyIiwiTWVkaWFJbmZvIiwiTWVkaWFTYW1wbGUiLCJNZWRpYVNlZ21lbnQiLCJNZWRpYVNlZ21lbnRMaXN0IiwiQXVkaW9UcmFja1NhbXBsZSIsIlZpZGVvVHJhY2tTYW1wbGUiLCJNc2UiLCJTdHJlYW0iLCJNb2JpbGVWaWRlbyIsIlJlc3VsdENvbnN0cnVjdG9yIiwidG90YWxMZW5ndGgiLCJfbGVuIiwiYXJyYXlzIiwiX2tleSIsIl9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24iLCJfZGlkSXRlcmF0b3JFcnJvciIsIl9pdGVyYXRvckVycm9yIiwiX3N0ZXAiLCJfaXRlcmF0b3IiLCJpdGVyYXRvciIsInJldHVybiIsIl9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24yIiwiX2RpZEl0ZXJhdG9yRXJyb3IyIiwiX2l0ZXJhdG9yRXJyb3IyIiwiX3N0ZXAyIiwiX2l0ZXJhdG9yMiIsIl9hcnIiLCJvYmoiLCJfY29uY2F0MiIsIndlYnBhY2tCb290c3RyYXBGdW5jIiwiY29uZmlndXJhYmxlIiwib2UiLCJmIiwiRU5UUllfTU9EVUxFIiwibW9kdWxlTmFtZVJlcUV4cCIsImRlcGVuZGVuY3lSZWdFeHAiLCJxdW90ZVJlZ0V4cCIsInJlcGxhY2UiLCJnZXRNb2R1bGVEZXBlbmRlbmNpZXMiLCJxdWV1ZU5hbWUiLCJyZXR2YWwiLCJmblN0cmluZyIsIndyYXBwZXJTaWduYXR1cmUiLCJtYXRjaCIsIndlYnBhY2tSZXF1aXJlTmFtZSIsInJlIiwiUmVnRXhwIiwiZXhlYyIsImhhc1ZhbHVlc0luUXVldWVzIiwicXVldWVzIiwicmVkdWNlIiwiaGFzVmFsdWVzIiwibWFpbiIsIl9fd2VicGFja19tb2R1bGVzX18iLCJyZXF1aXJlZE1vZHVsZXMiLCJhbGwiLCJtb2R1bGVzUXVldWUiLCJzZWVuTW9kdWxlcyIsIm1vZHVsZVRvQ2hlY2siLCJuZXdNb2R1bGVzIiwibmV3TW9kdWxlc0tleXMiLCJlbnRyeU1vZHVsZSIsIkpTT04iLCJzdHJpbmdpZnkiLCJtYXAiLCJqb2luIiwiYmxvYiIsIkJsb2IiLCJiYXJlIiwid29ya2VyVXJsIiwiVVJMIiwid2Via2l0VVJMIiwibW96VVJMIiwibXNVUkwiLCJjcmVhdGVPYmplY3RVUkwiLCJ3b3JrZXIiLCJXb3JrZXIiLCJvYmplY3RVUkwiLCJSRU1VWF9FUlJPUiIsIk1TRV9FVkVOVFMiLCJTT1VSQ0VfVVBEQVRFX0VORCIsIkhMU19FVkVOVFMiLCJSRVRSWV9USU1FX0VYQ0VFREVEIiwiQUxMRVZFTlRTIiwiRmx2QWxsb3dlZEV2ZW50cyIsIkhsc0FsbG93ZWRFdmVudHMiLCJDT05URVhUX0NPTU9NQU5EUyIsIk9OIiwiT05DRSIsIk9GRiIsIkVNSVQiLCJERVNUUk9ZIiwiRElSRUNUX0VNSVRfRkxBRyIsImFsbG93ZWRFdmVudHMiLCJfZW1pdHRlciIsIl9pbnN0YW5jZU1hcCIsIl9jbHNNYXAiLCJfaW5pdGVkIiwiX2hvb2tzIiwidGFnIiwiaW5pdEluc3RhbmNlIiwibmV3SW5zdGFuY2UiLCJyZWdpc3RyeSIsImNscyIsImNoZWNrTWVzc2FnZU5hbWUiLCJfaXNNZXNzYWdlTmFtZVZhbGlkIiwic2VsZiIsIm9uY2VMaXN0ZW5lcnMiLCJtZXNzYWdlTmFtZSIsImNhbGxiYWNrIiwiYmVmb3JlTGlzdCIsImVtaXRUbyIsInJlbW92ZUxpc3RlbmVycyIsImhhc093biIsImNhbGxiYWNrcyIsImRlc3Ryb3lJbnN0YW5jZXMiLCJsZSIsInNldEludDE2IiwiSW50MTZBcnJheSIsIm9zIiwiaXNQYyIsImlzVGFibGV0IiwidWEiLCJyZWciLCJpZSIsImZpcmZveCIsImNocm9tZSIsIm9wZXJhIiwic2FmYXJpIiwidGVzdCIsImlzV2luZG93c1Bob25lIiwiaXNTeW1iaWFuIiwiaXNBbmRyb2lkIiwiaXNGaXJlRm94IiwiaXNQaG9uZSIsIm91dCIsImlucHV0IiwiZnJvbUNoYXJDb2RlIiwiX2NoZWNrQ29udGludWF0aW9uIiwidWNzNCIsImNoZWNrTGVuZ3RoIiwiQXVkaW9DdHgiLCJBdWRpb0NvbnRleHQiLCJ3ZWJraXRBdWRpb0NvbnRleHQiLCJnYWluTm9kZSIsImNyZWF0ZUdhaW4iLCJjb25uZWN0IiwiZGVzdGluYXRpb24iLCJwcmVsb2FkVGltZSIsIl9jdXJyZW50QnVmZmVyIiwiX25leHRCdWZmZXIiLCJfbGFzdHB0cyIsIl9wcmVEZWNvZGUiLCJfY3VycmVudFRpbWUiLCJfZGVjb2RpbmciLCJfcGxheWVkIiwiZGVjb2RlQXVkaW8iLCJzZXRBdWRpb0RhdGEiLCJkZWNvZGVBQUMiLCJzYW1wbGVEYXRhIiwiZ2V0QUFDRGF0YSIsImNvbWJpbGVEYXRhIiwiZGVjb2RlQXVkaW9EYXRhIiwiYXVkaW9Tb3VyY2UiLCJjcmVhdGVCdWZmZXJTb3VyY2UiLCJvbmVuZGVkIiwib25Tb3VyY2VFbmRlZCIsImdldFRpbWVCdWZmZXIiLCJjdXJyZW50VGltZSIsInBsYXkiLCJzZXRBdWRpb01ldGFEYXRhIiwiYWR0cyIsImdldEFkdHMiLCJrIiwiYWFjZnJhbWVsZW5ndGgiLCJIVE1MRWxlbWVudCIsInZDdHgiLCJWaWRlb0N0eCIsImFDdHgiLCJvbmNhbnBsYXkiLCJhcHBlbmRDaGlsZCIsImNhbnZhcyIsImxvZyIsImRpc3BhdGNoRXZlbnQiLCJFdmVudCIsImhpc3RvcnlUaW1lIiwib25EZW11eENvbXBsZXRlIiwiZGVjb2RlVmlkZW8iLCJzZXRBdWRpb01ldGEiLCJzZXRWaWRlb01ldGEiLCJzZXRWaWRlb01ldGFEYXRhIiwiY3VzdG9tRWxlbWVudHMiLCJjdXJyZW50R29wIiwiX2xhc3RHZXQiLCJmcmFtZSIsIm5leHRHb3AiLCJfZ2V0TmV4dCIsImdvcCIsInJlbW92ZSIsIlRpY2tlciIsImludGVydmFsIiwibmV4dFRpY2siLCJvblRpY2siLCJzZXRJbnRlcnZhbCIsIlJhZlRpY2tlciIsInByb3BzIiwicHJldiIsInRpbWVySWQiLCJfc3ViVGltZXJJZCIsIm5leFRpY2siLCJnZXRUaWNrRnVuYyIsInRpY2siLCJ0aWNrRnVuYyIsInJlc3QiLCJydW5DYWxsYmFjayIsImNsZWFyVGltZW91dCIsInNldFRpbWVvdXQiLCJzdG9wIiwiZ2V0Q2FuY2VsRnVuYyIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsIndlYmtpdFJlcXVlc3RBbmltYXRpb25GcmFtZSIsImNhbmNlbEFuaW1hdGlvbkZyYW1lIiwid2Via2l0Q2FuY2VsQW5pbWF0aW9uRnJhbWUiLCJUaW1lb3V0VGlja2VyIiwidGltZW91dElkIiwiZ2V0VGlja2VyIiwiaXNTdXBwb3J0ZWQiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJTb3VyY2VCdWZmZXIiLCJyZWFkeVN0YXR1cyIsInBhdXNlZCIsImxhc3RQbGF5ZWQiLCJfZGVjb2RlckluaXRlZCIsIl9hdmNjcHVzaGVkIiwiX2RlY29kZWRGcmFtZXMiLCJfbGFzdFNhbXBsZUR0cyIsIl9iYXNlRHRzIiwiaW5pdFdhc21Xb3JrZXIiLCJfb25UaW1lciIsInBhdXNlIiwid2FzbXdvcmtlciIsInBvc3RNZXNzYWdlIiwibXNnIiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9vbkRlY29kZWQiLCJ5dXZDYW52YXMiLCJZVVZDYW52YXMiLCJfcHJlbG9hZCIsIl9hbmFseXNlTmFsIiwibmFsIiwibmV4dFRpbWUiLCJmcmFtZVRpbWVzIiwiZnJhbWVUaW1lIiwibm93IiwicmVuZGVyIiwiX2NsZWFuQnVmZmVyIiwiZGVjb2RlciIsIkRlY29kZXIiLCJpbml0ZWQiLCJpbmZvbGlzdCIsInBhcl9icm9hZHdheU9uQnJvYWR3YXlJbml0ZWQiLCJicm9hZHdheU9uQnJvYWR3YXlJbml0ZWQiLCJwYXJfYnJvYWR3YXlPblBpY3R1cmVEZWNvZGVkIiwiYnJvYWR3YXlPblBpY3R1cmVEZWNvZGVkIiwib25Qb3N0UnVuIiwiaW1wb3J0U2NyaXB0cyIsImFkZE9uUG9zdFJ1biIsInRvVThBcnJheSIsInB0ciIsIkhFQVBVOCIsIk1vZHVsZSIsIl9icm9hZHdheUluaXQiLCJzdHJlYW1CdWZmZXIiLCJfYnJvYWR3YXlDcmVhdGVTdHJlYW0iLCJpbmZvaWQiLCJkYXRldGVtcCIsImdldFRpbWUiLCJfYnJvYWR3YXlQbGF5U3RyZWFtIiwic3R5bGUiLCJfaW5pdENvbnRleHRHTCIsImNvbnRleHRHTCIsIl9pbml0UHJvZ3JhbSIsIl9pbml0QnVmZmVycyIsIl9pbml0VGV4dHVyZXMiLCJnbCIsInZhbGlkQ29udGV4dE5hbWVzIiwibmFtZUluZGV4IiwiY29udGV4dE5hbWUiLCJjb250ZXh0T3B0aW9ucyIsImdldENvbnRleHQiLCJnZXRQYXJhbWV0ZXIiLCJ2ZXJ0ZXhTaGFkZXJTY3JpcHQiLCJmcmFnbWVudFNoYWRlclNjcmlwdCIsInZlcnRleFNoYWRlciIsImNyZWF0ZVNoYWRlciIsIlZFUlRFWF9TSEFERVIiLCJzaGFkZXJTb3VyY2UiLCJjb21waWxlU2hhZGVyIiwiZ2V0U2hhZGVyUGFyYW1ldGVyIiwiQ09NUElMRV9TVEFUVVMiLCJnZXRTaGFkZXJJbmZvTG9nIiwiZnJhZ21lbnRTaGFkZXIiLCJGUkFHTUVOVF9TSEFERVIiLCJwcm9ncmFtIiwiY3JlYXRlUHJvZ3JhbSIsImF0dGFjaFNoYWRlciIsImxpbmtQcm9ncmFtIiwiZ2V0UHJvZ3JhbVBhcmFtZXRlciIsIkxJTktfU1RBVFVTIiwiZ2V0UHJvZ3JhbUluZm9Mb2ciLCJ1c2VQcm9ncmFtIiwiWVVWMlJHQlJlZiIsImdldFVuaWZvcm1Mb2NhdGlvbiIsInVuaWZvcm1NYXRyaXg0ZnYiLCJzaGFkZXJQcm9ncmFtIiwidmVydGV4UG9zQnVmZmVyIiwiY3JlYXRlQnVmZmVyIiwiYmluZEJ1ZmZlciIsIkFSUkFZX0JVRkZFUiIsImJ1ZmZlckRhdGEiLCJGbG9hdDMyQXJyYXkiLCJTVEFUSUNfRFJBVyIsInZlcnRleFBvc1JlZiIsImdldEF0dHJpYkxvY2F0aW9uIiwiZW5hYmxlVmVydGV4QXR0cmliQXJyYXkiLCJ2ZXJ0ZXhBdHRyaWJQb2ludGVyIiwiRkxPQVQiLCJ0ZXh0dXJlUG9zQnVmZmVyIiwidGV4dHVyZVBvc1JlZiIsInVUZXh0dXJlUG9zQnVmZmVyIiwidVRleHR1cmVQb3NSZWYiLCJ2VGV4dHVyZVBvc0J1ZmZlciIsInZUZXh0dXJlUG9zUmVmIiwieVRleHR1cmVSZWYiLCJfaW5pdFRleHR1cmUiLCJ5U2FtcGxlclJlZiIsInVuaWZvcm0xaSIsInVUZXh0dXJlUmVmIiwidVNhbXBsZXJSZWYiLCJ2VGV4dHVyZVJlZiIsInZTYW1wbGVyUmVmIiwidGV4dHVyZVJlZiIsInNhbXBsZXJSZWYiLCJjcmVhdGVUZXh0dXJlIiwiYmluZFRleHR1cmUiLCJURVhUVVJFXzJEIiwidGV4UGFyYW1ldGVyaSIsIlRFWFRVUkVfTUFHX0ZJTFRFUiIsIk5FQVJFU1QiLCJURVhUVVJFX01JTl9GSUxURVIiLCJURVhUVVJFX1dSQVBfUyIsIkNMQU1QX1RPX0VER0UiLCJURVhUVVJFX1dSQVBfVCIsIl9kcmF3UGljdHVyZUdMIiwibldpZHRoIiwieWxlbiIsInV2bGVuIiwicmVuZGVyRGF0YSIsInlEYXRhIiwidURhdGEiLCJ2RGF0YSIsInlBcnJheSIsInVBcnJheSIsInZBcnJheSIsIl9kcmF3UGljdHVyZUdMNDIwIiwiX2RyYXdQaWN0dXJlR0w0MjIiLCJkYXRhUGVyUm93Iiwicm93Q250Iiwidmlld3BvcnQiLCJ0Qm90dG9tIiwidFJpZ2h0IiwidGV4dHVyZVBvc1ZhbHVlcyIsIkRZTkFNSUNfRFJBVyIsInVuaWZvcm0yZiIsImFjdGl2ZVRleHR1cmUiLCJURVhUVVJFMCIsInRleEltYWdlMkQiLCJMVU1JTkFOQ0UiLCJVTlNJR05FRF9CWVRFIiwiZHJhd0FycmF5cyIsIlRSSUFOR0xFX1NUUklQIiwieURhdGFQZXJSb3ciLCJ5Um93Q250IiwidURhdGFQZXJSb3ciLCJ1Um93Q250IiwidkRhdGFQZXJSb3ciLCJ2Um93Q250IiwidVRleHR1cmVQb3NWYWx1ZXMiLCJ2VGV4dHVyZVBvc1ZhbHVlcyIsIlRFWFRVUkUxIiwiVEVYVFVSRTIiLCJfZHJhd1BpY3R1cmVSR0IiLCJpc09iamVjdEZpbGxlZCIsIm1pbWVUeXBlIiwiaXNDb21wbGV0ZSIsImlzQmFzZUluZm9SZWFkeSIsImlzVmlkZW9SZWFkeSIsImlzQXVkaW9SZWFkeSIsIl9kZWZhdWx0IiwiZ2V0RGVmYXVsdEluZiIsImVudHJpZXMiLCJ2IiwiaXNSQVAiLCJfdHlwZSIsIl9saXN0IiwiX2xhc3RBcHBlbmRMb2NhdGlvbiIsImlzRW1wdHkiLCJfc2VhcmNoTmVhcmVzdFNlZ21lbnRCZWZvcmUiLCJiZWdpbkR0cyIsImxhc3QiLCJtaWQiLCJsYm91bmQiLCJ1Ym91bmQiLCJpZHgiLCJsYXN0U2FtcGxlIiwiX3NlYXJjaE5lYXJlc3RTZWdtZW50QWZ0ZXIiLCJzZWdtZW50IiwibGFzdEFwcGVuZElkeCIsImluc2VydElkeCIsIm9yaWdpblN0YXJ0RHRzIiwiZ2V0TGFzdFNlZ21lbnRCZWZvcmUiLCJnZXRMYXN0U2FtcGxlQmVmb3JlIiwiZ2V0TGFzdFJBUEJlZm9yZSIsInNlZ21lbnRJZHgiLCJyYW5kb21BY2Nlc3NQb2ludHMiLCJzdGFydER0cyIsImVuZER0cyIsInN0YXJ0UHRzIiwiZW5kUHRzIiwib3JpZ2luRW5kRHRzIiwiYWRkUkFQIiwiZ2V0RGVmYXVsdCIsImNvbnRhaW5lciIsIm1lZGlhU291cmNlIiwic291cmNlQnVmZmVycyIsIk1lZGlhU291cmNlIiwib25Tb3VyY2VPcGVuIiwib25UaW1lVXBkYXRlIiwib25XYWl0aW5nIiwiYWRkU291cmNlQnVmZmVycyIsIm9uVXBkYXRlRW5kIiwiZG9BcHBlbmQiLCJyZWFkeVN0YXRlIiwiYWRkIiwiZHVyIiwibWltZSIsInNvdXJjZUJ1ZmZlciIsImFkZFNvdXJjZUJ1ZmZlciIsInVwZGF0aW5nIiwiYXBwZW5kQnVmZmVyIiwiZW5kT2ZTdHJlYW0iLCJyZW1vdmVFdmVudExpc3RlbmVyIiwicmVtb3ZlU291cmNlQnVmZmVyIiwidGVtcCIsImhleE51bSIsInBhZFN0YXJ0IiwiYmFjayIsImxvb3AiLCJzaWduIiwicmVzIiwicmVhZFVpbnQ4IiwicmVhZFVpbnQxNiIsInJlYWRVaW50MjQiLCJyZWFkVWludDMyIiwicmVhZFVpbnQ2NCIsInJlYWRJbnQ4IiwicmVhZEludDE2IiwicmVhZEludDMyIiwiVGFnIiwiTG9nZ2VyIiwiRmx2Q29udHJvbGxlciIsInBsYXllciIsIl9wbGF5ZXIiLCJpbml0U2VnbWVudEFycml2ZWQiLCJyYW5nZSIsInJhbmdlU3VwcG9ydCIsImtleWZyYW1lcyIsInRpbWVzIiwiY3VycmVudEtleWZyYW1lVGltZSIsIm5leHRLZXlmcmFtZVRpbWUiLCJNQVhfU0FGRV9JTlRFR0VSIiwiZmlsZXBvc2l0aW9ucyIsIlJlbXV4ZXIiLCJtc2UiLCJpbml0TGlzdGVuZXJzIiwibG9hZE1ldGEiLCJfaGFuZGxlTG9hZGVyRGF0YUxvYWRlZCIsIl9oYW5kbGVNZWRpYUluZm8iLCJfaGFuZGxlTWV0YWRhdGFQYXJzZWQiLCJfaGFuZGxlRGVtdXhDb21wbGV0ZSIsIl9oYW5kbGVEZW11eEVycm9yIiwiX2hhbmRsZUFwcGVuZEluaXRTZWdtZW50IiwiX2hhbmRsZU1lZGlhU2VnbWVudCIsImxvYWRlciIsImlzU2Vla2FibGUiLCJsb2FkTmV4dCIsIlBsYXllciIsIkVycm9ycyIsImdldFNlZWtSYW5nZSIsImxvYWREYXRhIiwiY3VyVGltZSIsImdldE5leHRSYW5nZSIsIlJhbmdlIiwibG9hZEZhbGxiYWNrIiwic2Vla1N0YXJ0VGltZSIsInNlZWtFbmRUaW1lIiwic2Vla1N0YXJ0RmlsZVBvcyIsImZpbmRGaWxlUG9zaXRpb24iLCJmbHZBbGxvd2VkRXZlbnRzIiwiaXNFbmRlZCIsImZsdiIsImlzTGl2ZSIsImdldEJ1ZmZlcmVkUmFuZ2UiLCJGbHZQbGF5ZXIiLCJpbml0RXZlbnRzIiwiRkxWIiwiaGFuZGxlVGltZVVwZGF0ZSIsImhhbmRsZVNlZWsiLCJfZGVzdHJveSIsImN1cnJlbnRTcmMiLCJGbHZMaXZlUGxheWVyIiwiRmx2Vm9kUGxheWVyIl0sIm1hcHBpbmdzIjoiQ0FBQSxTQUEyQ0EsRUFBTUMsR0FDMUIsaUJBQVpDLFNBQTBDLGlCQUFYQyxPQUN4Q0EsT0FBT0QsUUFBVUQsRUFBUUcsUUFBUSxhQUNSLG1CQUFYQyxRQUF5QkEsT0FBT0MsSUFDOUNELE9BQU8sQ0FBQyxZQUFhSixHQUNLLGlCQUFaQyxRQUNkQSxRQUFRLGdCQUFrQkQsRUFBUUcsUUFBUSxhQUUxQ0osRUFBSyxnQkFBa0JDLEVBQVFELEVBQWUsVUFSaEQsQ0FTR08sUUFBUSxTQUFTQyxzQ0FDcEIsTyxZQ1RFLElBQUlDLEVBQW1CLEdBR3ZCLFNBQVNDLEVBQW9CQyxHQUc1QixHQUFH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QixFQUFNLElBQU03Z0IsRUFBTzZnQixFQUFNLEtBQ2xDdmtDLEtBQUsybUMsSUFBSXhoQixLQUFLbmxCLEtBQUtveEIsYUFJdkIrVixXQUNFbm5DLEtBQUt3RCxRQUFRd0MsVUFDYmhHLEtBQUt3RCxRQUFVLEtBQ2Z4RCxLQUFLMm1DLElBQU0sS0FHYlgsU0FBVXRpQixFQUFPMWpCLEtBQUtveEIsYUFDcEIsTUFBTW1ULEVBQVF2a0MsS0FBSzZtQyxtQkFDZnRDLEVBQU0sR0FBSzdnQixHQUFRMWpCLEtBQUs0YSxPQUFPb1YsYUFBZSxJQUFNLEdBQ3REaHdCLEtBQUsybUMsSUFBSWYsU0FBU3JCLEVBQU0sR0FBSyxHQUlqQyxVQUNFLE9BQU92a0MsS0FBS29uQyxXQUdkLFFBQVN4cEIsR0FDUDVkLEtBQUtva0MsT0FBT3hwQixPQUFPZ0QsSUFBTUEsRUFDcEI1ZCxLQUFLbTFCLE9BU1JuMUIsS0FBS2tHLE1BQU0wWCxJQVJYNWQsS0FBSzQxQixRQUNMNTFCLEtBQUsrRCxLQUFLLFFBQVMsS0FDakIvRCxLQUFLa0csTUFBTTBYLEtBRWI1ZCxLQUFLK0QsS0FBSyxVQUFXLEtBQ25CL0QsS0FBS3F4QixVQUtUcnhCLEtBQUsrRCxLQUFLLFVBQVcsS0FDbkIvRCxLQUFLb3hCLFlBQWMsS0FLekJyMUIsRUFBT0QsUUFBVWdyQyxHOzs7Ozs7Ozs0Q0MxRmpCL3FDLEVBQU9ELFFBQVVNLE87Ozs7MkRDQWpCLEksSUFBQSxpRSxJQUNBLCtELG1EQVlBTCxFQUFPRCxRQVRMLFdBQWE4ZSxHQUNYLE8sNEZBRG1CLFNBQ2ZBLEVBQU9nc0IsT0FDRixJQUFJUyxVQUFjenNCLEdBRWxCLElBQUkwc0IsVUFBYTFzQixLOzs7Ozs7Ozs0Q0NSOUI3ZSxFQUFPRCxRQUFVTSIsImZpbGUiOiJpbmRleC5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiB3ZWJwYWNrVW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbihyb290LCBmYWN0b3J5KSB7XG5cdGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlID09PSAnb2JqZWN0Jylcblx0XHRtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkocmVxdWlyZShcInhncGxheWVyXCIpKTtcblx0ZWxzZSBpZih0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpXG5cdFx0ZGVmaW5lKFtcInhncGxheWVyXCJdLCBmYWN0b3J5KTtcblx0ZWxzZSBpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcpXG5cdFx0ZXhwb3J0c1tcInhncGxheWVyLWZsdlwiXSA9IGZhY3RvcnkocmVxdWlyZShcInhncGxheWVyXCIpKTtcblx0ZWxzZVxuXHRcdHJvb3RbXCJ4Z3BsYXllci1mbHZcIl0gPSBmYWN0b3J5KHJvb3RbXCJ4Z3BsYXllclwiXSk7XG59KSh3aW5kb3csIGZ1bmN0aW9uKF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfeGdwbGF5ZXJfXykge1xucmV0dXJuICIsIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAwKTtcbiIsIiFmdW5jdGlvbihlLG4pe1wib2JqZWN0XCI9PXR5cGVvZiBleHBvcnRzJiZcIm9iamVjdFwiPT10eXBlb2YgbW9kdWxlP21vZHVsZS5leHBvcnRzPW4ocmVxdWlyZShcInhncGxheWVyXCIpKTpcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKFtcInhncGxheWVyXCJdLG4pOlwib2JqZWN0XCI9PXR5cGVvZiBleHBvcnRzP2V4cG9ydHNbXCJ4Z3BsYXllci1mbHZcIl09bihyZXF1aXJlKFwieGdwbGF5ZXJcIikpOmVbXCJ4Z3BsYXllci1mbHZcIl09bihlLnhncGxheWVyKX0od2luZG93LChmdW5jdGlvbihfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFX3hncGxheWVyX18pe3JldHVybiBmdW5jdGlvbihlKXt2YXIgbj17fTtmdW5jdGlvbiB0KHIpe2lmKG5bcl0pcmV0dXJuIG5bcl0uZXhwb3J0czt2YXIgYT1uW3JdPXtpOnIsbDohMSxleHBvcnRzOnt9fTtyZXR1cm4gZVtyXS5jYWxsKGEuZXhwb3J0cyxhLGEuZXhwb3J0cyx0KSxhLmw9ITAsYS5leHBvcnRzfXJldHVybiB0Lm09ZSx0LmM9bix0LmQ9ZnVuY3Rpb24oZSxuLHIpe3QubyhlLG4pfHxPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxuLHtlbnVtZXJhYmxlOiEwLGdldDpyfSl9LHQucj1mdW5jdGlvbihlKXtcInVuZGVmaW5lZFwiIT10eXBlb2YgU3ltYm9sJiZTeW1ib2wudG9TdHJpbmdUYWcmJk9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFN5bWJvbC50b1N0cmluZ1RhZyx7dmFsdWU6XCJNb2R1bGVcIn0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pfSx0LnQ9ZnVuY3Rpb24oZSxuKXtpZigxJm4mJihlPXQoZSkpLDgmbilyZXR1cm4gZTtpZig0Jm4mJlwib2JqZWN0XCI9PXR5cGVvZiBlJiZlJiZlLl9fZXNNb2R1bGUpcmV0dXJuIGU7dmFyIHI9T2JqZWN0LmNyZWF0ZShudWxsKTtpZih0LnIociksT2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJkZWZhdWx0XCIse2VudW1lcmFibGU6ITAsdmFsdWU6ZX0pLDImbiYmXCJzdHJpbmdcIiE9dHlwZW9mIGUpZm9yKHZhciBhIGluIGUpdC5kKHIsYSxmdW5jdGlvbihuKXtyZXR1cm4gZVtuXX0uYmluZChudWxsLGEpKTtyZXR1cm4gcn0sdC5uPWZ1bmN0aW9uKGUpe3ZhciBuPWUmJmUuX19lc01vZHVsZT9mdW5jdGlvbigpe3JldHVybiBlLmRlZmF1bHR9OmZ1bmN0aW9uKCl7cmV0dXJuIGV9O3JldHVybiB0LmQobixcImFcIixuKSxufSx0Lm89ZnVuY3Rpb24oZSxuKXtyZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsbil9LHQucD1cIlwiLHQodC5zPTApfSh7XCIuLi8uLi9ub2RlX21vZHVsZXMvZXZlbnRzL2V2ZW50cy5qc1wiOlxuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogL1VzZXJzL2xlb25hcmRvL0RvY3VtZW50cy9mcm9udC1lbmQvcGxheWVyL3hncGxheWVyL25vZGVfbW9kdWxlcy9ldmVudHMvZXZlbnRzLmpzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBubyBzdGF0aWMgZXhwb3J0cyBmb3VuZCAqL2Z1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pe1widXNlIHN0cmljdFwiO2V2YWwoXCIvLyBDb3B5cmlnaHQgSm95ZW50LCBJbmMuIGFuZCBvdGhlciBOb2RlIGNvbnRyaWJ1dG9ycy5cXG4vL1xcbi8vIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhXFxuLy8gY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZVxcbi8vIFxcXCJTb2Z0d2FyZVxcXCIpLCB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmdcXG4vLyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsXFxuLy8gZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdFxcbi8vIHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZVxcbi8vIGZvbGxvd2luZyBjb25kaXRpb25zOlxcbi8vXFxuLy8gVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWRcXG4vLyBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cXG4vL1xcbi8vIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcXFwiQVMgSVNcXFwiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTXFxuLy8gT1IgSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRlxcbi8vIE1FUkNIQU5UQUJJTElUWSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU5cXG4vLyBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSxcXG4vLyBEQU1BR0VTIE9SIE9USEVSIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1JcXG4vLyBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFXFxuLy8gVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cXG5cXG5cXG5cXG52YXIgUiA9IHR5cGVvZiBSZWZsZWN0ID09PSAnb2JqZWN0JyA/IFJlZmxlY3QgOiBudWxsO1xcbnZhciBSZWZsZWN0QXBwbHkgPSBSICYmIHR5cGVvZiBSLmFwcGx5ID09PSAnZnVuY3Rpb24nID8gUi5hcHBseSA6IGZ1bmN0aW9uIFJlZmxlY3RBcHBseSh0YXJnZXQsIHJlY2VpdmVyLCBhcmdzKSB7XFxuICByZXR1cm4gRnVuY3Rpb24ucHJvdG90eXBlLmFwcGx5LmNhbGwodGFyZ2V0LCByZWNlaXZlciwgYXJncyk7XFxufTtcXG5cXG52YXIgUmVmbGVjdE93bktleXM7XFxuaWYgKFIgJiYgdHlwZW9mIFIub3duS2V5cyA9PT0gJ2Z1bmN0aW9uJykge1xcbiAgUmVmbGVjdE93bktleXMgPSBSLm93bktleXM7XFxufSBlbHNlIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7XFxuICBSZWZsZWN0T3duS2V5cyA9IGZ1bmN0aW9uIFJlZmxlY3RPd25LZXlzKHRhcmdldCkge1xcbiAgICByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXModGFyZ2V0KS5jb25jYXQoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyh0YXJnZXQpKTtcXG4gIH07XFxufSBlbHNlIHtcXG4gIFJlZmxlY3RPd25LZXlzID0gZnVuY3Rpb24gUmVmbGVjdE93bktleXModGFyZ2V0KSB7XFxuICAgIHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyh0YXJnZXQpO1xcbiAgfTtcXG59XFxuXFxuZnVuY3Rpb24gUHJvY2Vzc0VtaXRXYXJuaW5nKHdhcm5pbmcpIHtcXG4gIGlmIChjb25zb2xlICYmIGNvbnNvbGUud2FybikgY29uc29sZS53YXJuKHdhcm5pbmcpO1xcbn1cXG5cXG52YXIgTnVtYmVySXNOYU4gPSBOdW1iZXIuaXNOYU4gfHwgZnVuY3Rpb24gTnVtYmVySXNOYU4odmFsdWUpIHtcXG4gIHJldHVybiB2YWx1ZSAhPT0gdmFsdWU7XFxufTtcXG5cXG5mdW5jdGlvbiBFdmVudEVtaXR0ZXIoKSB7XFxuICBFdmVudEVtaXR0ZXIuaW5pdC5jYWxsKHRoaXMpO1xcbn1cXG5tb2R1bGUuZXhwb3J0cyA9IEV2ZW50RW1pdHRlcjtcXG5cXG4vLyBCYWNrd2FyZHMtY29tcGF0IHdpdGggbm9kZSAwLjEwLnhcXG5FdmVudEVtaXR0ZXIuRXZlbnRFbWl0dGVyID0gRXZlbnRFbWl0dGVyO1xcblxcbkV2ZW50RW1pdHRlci5wcm90b3R5cGUuX2V2ZW50cyA9IHVuZGVmaW5lZDtcXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLl9ldmVudHNDb3VudCA9IDA7XFxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5fbWF4TGlzdGVuZXJzID0gdW5kZWZpbmVkO1xcblxcbi8vIEJ5IGRlZmF1bHQgRXZlbnRFbWl0dGVycyB3aWxsIHByaW50IGEgd2FybmluZyBpZiBtb3JlIHRoYW4gMTAgbGlzdGVuZXJzIGFyZVxcbi8vIGFkZGVkIHRvIGl0LiBUaGlzIGlzIGEgdXNlZnVsIGRlZmF1bHQgd2hpY2ggaGVscHMgZmluZGluZyBtZW1vcnkgbGVha3MuXFxudmFyIGRlZmF1bHRNYXhMaXN0ZW5lcnMgPSAxMDtcXG5cXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoRXZlbnRFbWl0dGVyLCAnZGVmYXVsdE1heExpc3RlbmVycycsIHtcXG4gIGVudW1lcmFibGU6IHRydWUsXFxuICBnZXQ6IGZ1bmN0aW9uICgpIHtcXG4gICAgcmV0dXJuIGRlZmF1bHRNYXhMaXN0ZW5lcnM7XFxuICB9LFxcbiAgc2V0OiBmdW5jdGlvbiAoYXJnKSB7XFxuICAgIGlmICh0eXBlb2YgYXJnICE9PSAnbnVtYmVyJyB8fCBhcmcgPCAwIHx8IE51bWJlcklzTmFOKGFyZykpIHtcXG4gICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignVGhlIHZhbHVlIG9mIFxcXCJkZWZhdWx0TWF4TGlzdGVuZXJzXFxcIiBpcyBvdXQgb2YgcmFuZ2UuIEl0IG11c3QgYmUgYSBub24tbmVnYXRpdmUgbnVtYmVyLiBSZWNlaXZlZCAnICsgYXJnICsgJy4nKTtcXG4gICAgfVxcbiAgICBkZWZhdWx0TWF4TGlzdGVuZXJzID0gYXJnO1xcbiAgfVxcbn0pO1xcblxcbkV2ZW50RW1pdHRlci5pbml0ID0gZnVuY3Rpb24gKCkge1xcblxcbiAgaWYgKHRoaXMuX2V2ZW50cyA9PT0gdW5kZWZpbmVkIHx8IHRoaXMuX2V2ZW50cyA9PT0gT2JqZWN0LmdldFByb3RvdHlwZU9mKHRoaXMpLl9ldmVudHMpIHtcXG4gICAgdGhpcy5fZXZlbnRzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcXG4gICAgdGhpcy5fZXZlbnRzQ291bnQgPSAwO1xcbiAgfVxcblxcbiAgdGhpcy5fbWF4TGlzdGVuZXJzID0gdGhpcy5fbWF4TGlzdGVuZXJzIHx8IHVuZGVmaW5lZDtcXG59O1xcblxcbi8vIE9idmlvdXNseSBub3QgYWxsIEVtaXR0ZXJzIHNob3VsZCBiZSBsaW1pdGVkIHRvIDEwLiBUaGlzIGZ1bmN0aW9uIGFsbG93c1xcbi8vIHRoYXQgdG8gYmUgaW5jcmVhc2VkLiBTZXQgdG8gemVybyBmb3IgdW5saW1pdGVkLlxcbkV2ZW50RW1pdHRlci5wcm90b3R5cGUuc2V0TWF4TGlzdGVuZXJzID0gZnVuY3Rpb24gc2V0TWF4TGlzdGVuZXJzKG4pIHtcXG4gIGlmICh0eXBlb2YgbiAhPT0gJ251bWJlcicgfHwgbiA8IDAgfHwgTnVtYmVySXNOYU4obikpIHtcXG4gICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ1RoZSB2YWx1ZSBvZiBcXFwiblxcXCIgaXMgb3V0IG9mIHJhbmdlLiBJdCBtdXN0IGJlIGEgbm9uLW5lZ2F0aXZlIG51bWJlci4gUmVjZWl2ZWQgJyArIG4gKyAnLicpO1xcbiAgfVxcbiAgdGhpcy5fbWF4TGlzdGVuZXJzID0gbjtcXG4gIHJldHVybiB0aGlzO1xcbn07XFxuXFxuZnVuY3Rpb24gJGdldE1heExpc3RlbmVycyh0aGF0KSB7XFxuICBpZiAodGhhdC5fbWF4TGlzdGVuZXJzID09PSB1bmRlZmluZWQpIHJldHVybiBFdmVudEVtaXR0ZXIuZGVmYXVsdE1heExpc3RlbmVycztcXG4gIHJldHVybiB0aGF0Ll9tYXhMaXN0ZW5lcnM7XFxufVxcblxcbkV2ZW50RW1pdHRlci5wcm90b3R5cGUuZ2V0TWF4TGlzdGVuZXJzID0gZnVuY3Rpb24gZ2V0TWF4TGlzdGVuZXJzKCkge1xcbiAgcmV0dXJuICRnZXRNYXhMaXN0ZW5lcnModGhpcyk7XFxufTtcXG5cXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLmVtaXQgPSBmdW5jdGlvbiBlbWl0KHR5cGUpIHtcXG4gIHZhciBhcmdzID0gW107XFxuICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgYXJncy5wdXNoKGFyZ3VtZW50c1tpXSk7XFxuICB2YXIgZG9FcnJvciA9IHR5cGUgPT09ICdlcnJvcic7XFxuXFxuICB2YXIgZXZlbnRzID0gdGhpcy5fZXZlbnRzO1xcbiAgaWYgKGV2ZW50cyAhPT0gdW5kZWZpbmVkKSBkb0Vycm9yID0gZG9FcnJvciAmJiBldmVudHMuZXJyb3IgPT09IHVuZGVmaW5lZDtlbHNlIGlmICghZG9FcnJvcikgcmV0dXJuIGZhbHNlO1xcblxcbiAgLy8gSWYgdGhlcmUgaXMgbm8gJ2Vycm9yJyBldmVudCBsaXN0ZW5lciB0aGVuIHRocm93LlxcbiAgaWYgKGRvRXJyb3IpIHtcXG4gICAgdmFyIGVyO1xcbiAgICBpZiAoYXJncy5sZW5ndGggPiAwKSBlciA9IGFyZ3NbMF07XFxuICAgIGlmIChlciBpbnN0YW5jZW9mIEVycm9yKSB7XFxuICAgICAgLy8gTm90ZTogVGhlIGNvbW1lbnRzIG9uIHRoZSBgdGhyb3dgIGxpbmVzIGFyZSBpbnRlbnRpb25hbCwgdGhleSBzaG93XFxuICAgICAgLy8gdXAgaW4gTm9kZSdzIG91dHB1dCBpZiB0aGlzIHJlc3VsdHMgaW4gYW4gdW5oYW5kbGVkIGV4Y2VwdGlvbi5cXG4gICAgICB0aHJvdyBlcjsgLy8gVW5oYW5kbGVkICdlcnJvcicgZXZlbnRcXG4gICAgfVxcbiAgICAvLyBBdCBsZWFzdCBnaXZlIHNvbWUga2luZCBvZiBjb250ZXh0IHRvIHRoZSB1c2VyXFxuICAgIHZhciBlcnIgPSBuZXcgRXJyb3IoJ1VuaGFuZGxlZCBlcnJvci4nICsgKGVyID8gJyAoJyArIGVyLm1lc3NhZ2UgKyAnKScgOiAnJykpO1xcbiAgICBlcnIuY29udGV4dCA9IGVyO1xcbiAgICB0aHJvdyBlcnI7IC8vIFVuaGFuZGxlZCAnZXJyb3InIGV2ZW50XFxuICB9XFxuXFxuICB2YXIgaGFuZGxlciA9IGV2ZW50c1t0eXBlXTtcXG5cXG4gIGlmIChoYW5kbGVyID09PSB1bmRlZmluZWQpIHJldHVybiBmYWxzZTtcXG5cXG4gIGlmICh0eXBlb2YgaGFuZGxlciA9PT0gJ2Z1bmN0aW9uJykge1xcbiAgICBSZWZsZWN0QXBwbHkoaGFuZGxlciwgdGhpcywgYXJncyk7XFxuICB9IGVsc2Uge1xcbiAgICB2YXIgbGVuID0gaGFuZGxlci5sZW5ndGg7XFxuICAgIHZhciBsaXN0ZW5lcnMgPSBhcnJheUNsb25lKGhhbmRsZXIsIGxlbik7XFxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyArK2kpIFJlZmxlY3RBcHBseShsaXN0ZW5lcnNbaV0sIHRoaXMsIGFyZ3MpO1xcbiAgfVxcblxcbiAgcmV0dXJuIHRydWU7XFxufTtcXG5cXG5mdW5jdGlvbiBfYWRkTGlzdGVuZXIodGFyZ2V0LCB0eXBlLCBsaXN0ZW5lciwgcHJlcGVuZCkge1xcbiAgdmFyIG07XFxuICB2YXIgZXZlbnRzO1xcbiAgdmFyIGV4aXN0aW5nO1xcblxcbiAgaWYgKHR5cGVvZiBsaXN0ZW5lciAhPT0gJ2Z1bmN0aW9uJykge1xcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdUaGUgXFxcImxpc3RlbmVyXFxcIiBhcmd1bWVudCBtdXN0IGJlIG9mIHR5cGUgRnVuY3Rpb24uIFJlY2VpdmVkIHR5cGUgJyArIHR5cGVvZiBsaXN0ZW5lcik7XFxuICB9XFxuXFxuICBldmVudHMgPSB0YXJnZXQuX2V2ZW50cztcXG4gIGlmIChldmVudHMgPT09IHVuZGVmaW5lZCkge1xcbiAgICBldmVudHMgPSB0YXJnZXQuX2V2ZW50cyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XFxuICAgIHRhcmdldC5fZXZlbnRzQ291bnQgPSAwO1xcbiAgfSBlbHNlIHtcXG4gICAgLy8gVG8gYXZvaWQgcmVjdXJzaW9uIGluIHRoZSBjYXNlIHRoYXQgdHlwZSA9PT0gXFxcIm5ld0xpc3RlbmVyXFxcIiEgQmVmb3JlXFxuICAgIC8vIGFkZGluZyBpdCB0byB0aGUgbGlzdGVuZXJzLCBmaXJzdCBlbWl0IFxcXCJuZXdMaXN0ZW5lclxcXCIuXFxuICAgIGlmIChldmVudHMubmV3TGlzdGVuZXIgIT09IHVuZGVmaW5lZCkge1xcbiAgICAgIHRhcmdldC5lbWl0KCduZXdMaXN0ZW5lcicsIHR5cGUsIGxpc3RlbmVyLmxpc3RlbmVyID8gbGlzdGVuZXIubGlzdGVuZXIgOiBsaXN0ZW5lcik7XFxuXFxuICAgICAgLy8gUmUtYXNzaWduIGBldmVudHNgIGJlY2F1c2UgYSBuZXdMaXN0ZW5lciBoYW5kbGVyIGNvdWxkIGhhdmUgY2F1c2VkIHRoZVxcbiAgICAgIC8vIHRoaXMuX2V2ZW50cyB0byBiZSBhc3NpZ25lZCB0byBhIG5ldyBvYmplY3RcXG4gICAgICBldmVudHMgPSB0YXJnZXQuX2V2ZW50cztcXG4gICAgfVxcbiAgICBleGlzdGluZyA9IGV2ZW50c1t0eXBlXTtcXG4gIH1cXG5cXG4gIGlmIChleGlzdGluZyA9PT0gdW5kZWZpbmVkKSB7XFxuICAgIC8vIE9wdGltaXplIHRoZSBjYXNlIG9mIG9uZSBsaXN0ZW5lci4gRG9uJ3QgbmVlZCB0aGUgZXh0cmEgYXJyYXkgb2JqZWN0LlxcbiAgICBleGlzdGluZyA9IGV2ZW50c1t0eXBlXSA9IGxpc3RlbmVyO1xcbiAgICArK3RhcmdldC5fZXZlbnRzQ291bnQ7XFxuICB9IGVsc2Uge1xcbiAgICBpZiAodHlwZW9mIGV4aXN0aW5nID09PSAnZnVuY3Rpb24nKSB7XFxuICAgICAgLy8gQWRkaW5nIHRoZSBzZWNvbmQgZWxlbWVudCwgbmVlZCB0byBjaGFuZ2UgdG8gYXJyYXkuXFxuICAgICAgZXhpc3RpbmcgPSBldmVudHNbdHlwZV0gPSBwcmVwZW5kID8gW2xpc3RlbmVyLCBleGlzdGluZ10gOiBbZXhpc3RpbmcsIGxpc3RlbmVyXTtcXG4gICAgICAvLyBJZiB3ZSd2ZSBhbHJlYWR5IGdvdCBhbiBhcnJheSwganVzdCBhcHBlbmQuXFxuICAgIH0gZWxzZSBpZiAocHJlcGVuZCkge1xcbiAgICAgIGV4aXN0aW5nLnVuc2hpZnQobGlzdGVuZXIpO1xcbiAgICB9IGVsc2Uge1xcbiAgICAgIGV4aXN0aW5nLnB1c2gobGlzdGVuZXIpO1xcbiAgICB9XFxuXFxuICAgIC8vIENoZWNrIGZvciBsaXN0ZW5lciBsZWFrXFxuICAgIG0gPSAkZ2V0TWF4TGlzdGVuZXJzKHRhcmdldCk7XFxuICAgIGlmIChtID4gMCAmJiBleGlzdGluZy5sZW5ndGggPiBtICYmICFleGlzdGluZy53YXJuZWQpIHtcXG4gICAgICBleGlzdGluZy53YXJuZWQgPSB0cnVlO1xcbiAgICAgIC8vIE5vIGVycm9yIGNvZGUgZm9yIHRoaXMgc2luY2UgaXQgaXMgYSBXYXJuaW5nXFxuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXJlc3RyaWN0ZWQtc3ludGF4XFxuICAgICAgdmFyIHcgPSBuZXcgRXJyb3IoJ1Bvc3NpYmxlIEV2ZW50RW1pdHRlciBtZW1vcnkgbGVhayBkZXRlY3RlZC4gJyArIGV4aXN0aW5nLmxlbmd0aCArICcgJyArIFN0cmluZyh0eXBlKSArICcgbGlzdGVuZXJzICcgKyAnYWRkZWQuIFVzZSBlbWl0dGVyLnNldE1heExpc3RlbmVycygpIHRvICcgKyAnaW5jcmVhc2UgbGltaXQnKTtcXG4gICAgICB3Lm5hbWUgPSAnTWF4TGlzdGVuZXJzRXhjZWVkZWRXYXJuaW5nJztcXG4gICAgICB3LmVtaXR0ZXIgPSB0YXJnZXQ7XFxuICAgICAgdy50eXBlID0gdHlwZTtcXG4gICAgICB3LmNvdW50ID0gZXhpc3RpbmcubGVuZ3RoO1xcbiAgICAgIFByb2Nlc3NFbWl0V2FybmluZyh3KTtcXG4gICAgfVxcbiAgfVxcblxcbiAgcmV0dXJuIHRhcmdldDtcXG59XFxuXFxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5hZGRMaXN0ZW5lciA9IGZ1bmN0aW9uIGFkZExpc3RlbmVyKHR5cGUsIGxpc3RlbmVyKSB7XFxuICByZXR1cm4gX2FkZExpc3RlbmVyKHRoaXMsIHR5cGUsIGxpc3RlbmVyLCBmYWxzZSk7XFxufTtcXG5cXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLm9uID0gRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5hZGRMaXN0ZW5lcjtcXG5cXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLnByZXBlbmRMaXN0ZW5lciA9IGZ1bmN0aW9uIHByZXBlbmRMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcikge1xcbiAgcmV0dXJuIF9hZGRMaXN0ZW5lcih0aGlzLCB0eXBlLCBsaXN0ZW5lciwgdHJ1ZSk7XFxufTtcXG5cXG5mdW5jdGlvbiBvbmNlV3JhcHBlcigpIHtcXG4gIHZhciBhcmdzID0gW107XFxuICBmb3IgKHZhciBpID0gMDsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgYXJncy5wdXNoKGFyZ3VtZW50c1tpXSk7XFxuICBpZiAoIXRoaXMuZmlyZWQpIHtcXG4gICAgdGhpcy50YXJnZXQucmVtb3ZlTGlzdGVuZXIodGhpcy50eXBlLCB0aGlzLndyYXBGbik7XFxuICAgIHRoaXMuZmlyZWQgPSB0cnVlO1xcbiAgICBSZWZsZWN0QXBwbHkodGhpcy5saXN0ZW5lciwgdGhpcy50YXJnZXQsIGFyZ3MpO1xcbiAgfVxcbn1cXG5cXG5mdW5jdGlvbiBfb25jZVdyYXAodGFyZ2V0LCB0eXBlLCBsaXN0ZW5lcikge1xcbiAgdmFyIHN0YXRlID0geyBmaXJlZDogZmFsc2UsIHdyYXBGbjogdW5kZWZpbmVkLCB0YXJnZXQ6IHRhcmdldCwgdHlwZTogdHlwZSwgbGlzdGVuZXI6IGxpc3RlbmVyIH07XFxuICB2YXIgd3JhcHBlZCA9IG9uY2VXcmFwcGVyLmJpbmQoc3RhdGUpO1xcbiAgd3JhcHBlZC5saXN0ZW5lciA9IGxpc3RlbmVyO1xcbiAgc3RhdGUud3JhcEZuID0gd3JhcHBlZDtcXG4gIHJldHVybiB3cmFwcGVkO1xcbn1cXG5cXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLm9uY2UgPSBmdW5jdGlvbiBvbmNlKHR5cGUsIGxpc3RlbmVyKSB7XFxuICBpZiAodHlwZW9mIGxpc3RlbmVyICE9PSAnZnVuY3Rpb24nKSB7XFxuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1RoZSBcXFwibGlzdGVuZXJcXFwiIGFyZ3VtZW50IG11c3QgYmUgb2YgdHlwZSBGdW5jdGlvbi4gUmVjZWl2ZWQgdHlwZSAnICsgdHlwZW9mIGxpc3RlbmVyKTtcXG4gIH1cXG4gIHRoaXMub24odHlwZSwgX29uY2VXcmFwKHRoaXMsIHR5cGUsIGxpc3RlbmVyKSk7XFxuICByZXR1cm4gdGhpcztcXG59O1xcblxcbkV2ZW50RW1pdHRlci5wcm90b3R5cGUucHJlcGVuZE9uY2VMaXN0ZW5lciA9IGZ1bmN0aW9uIHByZXBlbmRPbmNlTGlzdGVuZXIodHlwZSwgbGlzdGVuZXIpIHtcXG4gIGlmICh0eXBlb2YgbGlzdGVuZXIgIT09ICdmdW5jdGlvbicpIHtcXG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignVGhlIFxcXCJsaXN0ZW5lclxcXCIgYXJndW1lbnQgbXVzdCBiZSBvZiB0eXBlIEZ1bmN0aW9uLiBSZWNlaXZlZCB0eXBlICcgKyB0eXBlb2YgbGlzdGVuZXIpO1xcbiAgfVxcbiAgdGhpcy5wcmVwZW5kTGlzdGVuZXIodHlwZSwgX29uY2VXcmFwKHRoaXMsIHR5cGUsIGxpc3RlbmVyKSk7XFxuICByZXR1cm4gdGhpcztcXG59O1xcblxcbi8vIEVtaXRzIGEgJ3JlbW92ZUxpc3RlbmVyJyBldmVudCBpZiBhbmQgb25seSBpZiB0aGUgbGlzdGVuZXIgd2FzIHJlbW92ZWQuXFxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5yZW1vdmVMaXN0ZW5lciA9IGZ1bmN0aW9uIHJlbW92ZUxpc3RlbmVyKHR5cGUsIGxpc3RlbmVyKSB7XFxuICB2YXIgbGlzdCwgZXZlbnRzLCBwb3NpdGlvbiwgaSwgb3JpZ2luYWxMaXN0ZW5lcjtcXG5cXG4gIGlmICh0eXBlb2YgbGlzdGVuZXIgIT09ICdmdW5jdGlvbicpIHtcXG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignVGhlIFxcXCJsaXN0ZW5lclxcXCIgYXJndW1lbnQgbXVzdCBiZSBvZiB0eXBlIEZ1bmN0aW9uLiBSZWNlaXZlZCB0eXBlICcgKyB0eXBlb2YgbGlzdGVuZXIpO1xcbiAgfVxcblxcbiAgZXZlbnRzID0gdGhpcy5fZXZlbnRzO1xcbiAgaWYgKGV2ZW50cyA9PT0gdW5kZWZpbmVkKSByZXR1cm4gdGhpcztcXG5cXG4gIGxpc3QgPSBldmVudHNbdHlwZV07XFxuICBpZiAobGlzdCA9PT0gdW5kZWZpbmVkKSByZXR1cm4gdGhpcztcXG5cXG4gIGlmIChsaXN0ID09PSBsaXN0ZW5lciB8fCBsaXN0Lmxpc3RlbmVyID09PSBsaXN0ZW5lcikge1xcbiAgICBpZiAoLS10aGlzLl9ldmVudHNDb3VudCA9PT0gMCkgdGhpcy5fZXZlbnRzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtlbHNlIHtcXG4gICAgICBkZWxldGUgZXZlbnRzW3R5cGVdO1xcbiAgICAgIGlmIChldmVudHMucmVtb3ZlTGlzdGVuZXIpIHRoaXMuZW1pdCgncmVtb3ZlTGlzdGVuZXInLCB0eXBlLCBsaXN0Lmxpc3RlbmVyIHx8IGxpc3RlbmVyKTtcXG4gICAgfVxcbiAgfSBlbHNlIGlmICh0eXBlb2YgbGlzdCAhPT0gJ2Z1bmN0aW9uJykge1xcbiAgICBwb3NpdGlvbiA9IC0xO1xcblxcbiAgICBmb3IgKGkgPSBsaXN0Lmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XFxuICAgICAgaWYgKGxpc3RbaV0gPT09IGxpc3RlbmVyIHx8IGxpc3RbaV0ubGlzdGVuZXIgPT09IGxpc3RlbmVyKSB7XFxuICAgICAgICBvcmlnaW5hbExpc3RlbmVyID0gbGlzdFtpXS5saXN0ZW5lcjtcXG4gICAgICAgIHBvc2l0aW9uID0gaTtcXG4gICAgICAgIGJyZWFrO1xcbiAgICAgIH1cXG4gICAgfVxcblxcbiAgICBpZiAocG9zaXRpb24gPCAwKSByZXR1cm4gdGhpcztcXG5cXG4gICAgaWYgKHBvc2l0aW9uID09PSAwKSBsaXN0LnNoaWZ0KCk7ZWxzZSB7XFxuICAgICAgc3BsaWNlT25lKGxpc3QsIHBvc2l0aW9uKTtcXG4gICAgfVxcblxcbiAgICBpZiAobGlzdC5sZW5ndGggPT09IDEpIGV2ZW50c1t0eXBlXSA9IGxpc3RbMF07XFxuXFxuICAgIGlmIChldmVudHMucmVtb3ZlTGlzdGVuZXIgIT09IHVuZGVmaW5lZCkgdGhpcy5lbWl0KCdyZW1vdmVMaXN0ZW5lcicsIHR5cGUsIG9yaWdpbmFsTGlzdGVuZXIgfHwgbGlzdGVuZXIpO1xcbiAgfVxcblxcbiAgcmV0dXJuIHRoaXM7XFxufTtcXG5cXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLm9mZiA9IEV2ZW50RW1pdHRlci5wcm90b3R5cGUucmVtb3ZlTGlzdGVuZXI7XFxuXFxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5yZW1vdmVBbGxMaXN0ZW5lcnMgPSBmdW5jdGlvbiByZW1vdmVBbGxMaXN0ZW5lcnModHlwZSkge1xcbiAgdmFyIGxpc3RlbmVycywgZXZlbnRzLCBpO1xcblxcbiAgZXZlbnRzID0gdGhpcy5fZXZlbnRzO1xcbiAgaWYgKGV2ZW50cyA9PT0gdW5kZWZpbmVkKSByZXR1cm4gdGhpcztcXG5cXG4gIC8vIG5vdCBsaXN0ZW5pbmcgZm9yIHJlbW92ZUxpc3RlbmVyLCBubyBuZWVkIHRvIGVtaXRcXG4gIGlmIChldmVudHMucmVtb3ZlTGlzdGVuZXIgPT09IHVuZGVmaW5lZCkge1xcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMCkge1xcbiAgICAgIHRoaXMuX2V2ZW50cyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XFxuICAgICAgdGhpcy5fZXZlbnRzQ291bnQgPSAwO1xcbiAgICB9IGVsc2UgaWYgKGV2ZW50c1t0eXBlXSAhPT0gdW5kZWZpbmVkKSB7XFxuICAgICAgaWYgKC0tdGhpcy5fZXZlbnRzQ291bnQgPT09IDApIHRoaXMuX2V2ZW50cyA9IE9iamVjdC5jcmVhdGUobnVsbCk7ZWxzZSBkZWxldGUgZXZlbnRzW3R5cGVdO1xcbiAgICB9XFxuICAgIHJldHVybiB0aGlzO1xcbiAgfVxcblxcbiAgLy8gZW1pdCByZW1vdmVMaXN0ZW5lciBmb3IgYWxsIGxpc3RlbmVycyBvbiBhbGwgZXZlbnRzXFxuICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMCkge1xcbiAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKGV2ZW50cyk7XFxuICAgIHZhciBrZXk7XFxuICAgIGZvciAoaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgKytpKSB7XFxuICAgICAga2V5ID0ga2V5c1tpXTtcXG4gICAgICBpZiAoa2V5ID09PSAncmVtb3ZlTGlzdGVuZXInKSBjb250aW51ZTtcXG4gICAgICB0aGlzLnJlbW92ZUFsbExpc3RlbmVycyhrZXkpO1xcbiAgICB9XFxuICAgIHRoaXMucmVtb3ZlQWxsTGlzdGVuZXJzKCdyZW1vdmVMaXN0ZW5lcicpO1xcbiAgICB0aGlzLl9ldmVudHMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xcbiAgICB0aGlzLl9ldmVudHNDb3VudCA9IDA7XFxuICAgIHJldHVybiB0aGlzO1xcbiAgfVxcblxcbiAgbGlzdGVuZXJzID0gZXZlbnRzW3R5cGVdO1xcblxcbiAgaWYgKHR5cGVvZiBsaXN0ZW5lcnMgPT09ICdmdW5jdGlvbicpIHtcXG4gICAgdGhpcy5yZW1vdmVMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcnMpO1xcbiAgfSBlbHNlIGlmIChsaXN0ZW5lcnMgIT09IHVuZGVmaW5lZCkge1xcbiAgICAvLyBMSUZPIG9yZGVyXFxuICAgIGZvciAoaSA9IGxpc3RlbmVycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xcbiAgICAgIHRoaXMucmVtb3ZlTGlzdGVuZXIodHlwZSwgbGlzdGVuZXJzW2ldKTtcXG4gICAgfVxcbiAgfVxcblxcbiAgcmV0dXJuIHRoaXM7XFxufTtcXG5cXG5mdW5jdGlvbiBfbGlzdGVuZXJzKHRhcmdldCwgdHlwZSwgdW53cmFwKSB7XFxuICB2YXIgZXZlbnRzID0gdGFyZ2V0Ll9ldmVudHM7XFxuXFxuICBpZiAoZXZlbnRzID09PSB1bmRlZmluZWQpIHJldHVybiBbXTtcXG5cXG4gIHZhciBldmxpc3RlbmVyID0gZXZlbnRzW3R5cGVdO1xcbiAgaWYgKGV2bGlzdGVuZXIgPT09IHVuZGVmaW5lZCkgcmV0dXJuIFtdO1xcblxcbiAgaWYgKHR5cGVvZiBldmxpc3RlbmVyID09PSAnZnVuY3Rpb24nKSByZXR1cm4gdW53cmFwID8gW2V2bGlzdGVuZXIubGlzdGVuZXIgfHwgZXZsaXN0ZW5lcl0gOiBbZXZsaXN0ZW5lcl07XFxuXFxuICByZXR1cm4gdW53cmFwID8gdW53cmFwTGlzdGVuZXJzKGV2bGlzdGVuZXIpIDogYXJyYXlDbG9uZShldmxpc3RlbmVyLCBldmxpc3RlbmVyLmxlbmd0aCk7XFxufVxcblxcbkV2ZW50RW1pdHRlci5wcm90b3R5cGUubGlzdGVuZXJzID0gZnVuY3Rpb24gbGlzdGVuZXJzKHR5cGUpIHtcXG4gIHJldHVybiBfbGlzdGVuZXJzKHRoaXMsIHR5cGUsIHRydWUpO1xcbn07XFxuXFxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5yYXdMaXN0ZW5lcnMgPSBmdW5jdGlvbiByYXdMaXN0ZW5lcnModHlwZSkge1xcbiAgcmV0dXJuIF9saXN0ZW5lcnModGhpcywgdHlwZSwgZmFsc2UpO1xcbn07XFxuXFxuRXZlbnRFbWl0dGVyLmxpc3RlbmVyQ291bnQgPSBmdW5jdGlvbiAoZW1pdHRlciwgdHlwZSkge1xcbiAgaWYgKHR5cGVvZiBlbWl0dGVyLmxpc3RlbmVyQ291bnQgPT09ICdmdW5jdGlvbicpIHtcXG4gICAgcmV0dXJuIGVtaXR0ZXIubGlzdGVuZXJDb3VudCh0eXBlKTtcXG4gIH0gZWxzZSB7XFxuICAgIHJldHVybiBsaXN0ZW5lckNvdW50LmNhbGwoZW1pdHRlciwgdHlwZSk7XFxuICB9XFxufTtcXG5cXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLmxpc3RlbmVyQ291bnQgPSBsaXN0ZW5lckNvdW50O1xcbmZ1bmN0aW9uIGxpc3RlbmVyQ291bnQodHlwZSkge1xcbiAgdmFyIGV2ZW50cyA9IHRoaXMuX2V2ZW50cztcXG5cXG4gIGlmIChldmVudHMgIT09IHVuZGVmaW5lZCkge1xcbiAgICB2YXIgZXZsaXN0ZW5lciA9IGV2ZW50c1t0eXBlXTtcXG5cXG4gICAgaWYgKHR5cGVvZiBldmxpc3RlbmVyID09PSAnZnVuY3Rpb24nKSB7XFxuICAgICAgcmV0dXJuIDE7XFxuICAgIH0gZWxzZSBpZiAoZXZsaXN0ZW5lciAhPT0gdW5kZWZpbmVkKSB7XFxuICAgICAgcmV0dXJuIGV2bGlzdGVuZXIubGVuZ3RoO1xcbiAgICB9XFxuICB9XFxuXFxuICByZXR1cm4gMDtcXG59XFxuXFxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5ldmVudE5hbWVzID0gZnVuY3Rpb24gZXZlbnROYW1lcygpIHtcXG4gIHJldHVybiB0aGlzLl9ldmVudHNDb3VudCA+IDAgPyBSZWZsZWN0T3duS2V5cyh0aGlzLl9ldmVudHMpIDogW107XFxufTtcXG5cXG5mdW5jdGlvbiBhcnJheUNsb25lKGFyciwgbikge1xcbiAgdmFyIGNvcHkgPSBuZXcgQXJyYXkobik7XFxuICBmb3IgKHZhciBpID0gMDsgaSA8IG47ICsraSkgY29weVtpXSA9IGFycltpXTtcXG4gIHJldHVybiBjb3B5O1xcbn1cXG5cXG5mdW5jdGlvbiBzcGxpY2VPbmUobGlzdCwgaW5kZXgpIHtcXG4gIGZvciAoOyBpbmRleCArIDEgPCBsaXN0Lmxlbmd0aDsgaW5kZXgrKykgbGlzdFtpbmRleF0gPSBsaXN0W2luZGV4ICsgMV07XFxuICBsaXN0LnBvcCgpO1xcbn1cXG5cXG5mdW5jdGlvbiB1bndyYXBMaXN0ZW5lcnMoYXJyKSB7XFxuICB2YXIgcmV0ID0gbmV3IEFycmF5KGFyci5sZW5ndGgpO1xcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCByZXQubGVuZ3RoOyArK2kpIHtcXG4gICAgcmV0W2ldID0gYXJyW2ldLmxpc3RlbmVyIHx8IGFycltpXTtcXG4gIH1cXG4gIHJldHVybiByZXQ7XFxufVxcblxcbi8vIyBzb3VyY2VVUkw9d2VicGFjazovL3hncGxheWVyLWZsdi8vVXNlcnMvbGVvbmFyZG8vRG9jdW1lbnRzL2Zyb250LWVuZC9wbGF5ZXIveGdwbGF5ZXIvbm9kZV9tb2R1bGVzL2V2ZW50cy9ldmVudHMuanM/XCIpfSxcIi4uL3hncGxheWVyLWJ1ZmZlci9pbmRleC5qc1wiOlxuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi4veGdwbGF5ZXItYnVmZmVyL2luZGV4LmpzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBubyBzdGF0aWMgZXhwb3J0cyBmb3VuZCAqL2Z1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pe1widXNlIHN0cmljdFwiO2V2YWwoJ1xcblxcbm1vZHVsZS5leHBvcnRzID0ge1xcbiAgVHJhY2s6IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vc3JjL3RyYWNrICovIFwiLi4veGdwbGF5ZXItYnVmZmVyL3NyYy90cmFjay5qc1wiKS5kZWZhdWx0LFxcbiAgVHJhY2tzOiBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL3NyYy90cmFjayAqLyBcIi4uL3hncGxheWVyLWJ1ZmZlci9zcmMvdHJhY2suanNcIikuVHJhY2tzLFxcbiAgQXVkaW9UcmFjazogX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9zcmMvdHJhY2sgKi8gXCIuLi94Z3BsYXllci1idWZmZXIvc3JjL3RyYWNrLmpzXCIpLkF1ZGlvVHJhY2ssXFxuICBWaWRlb1RyYWNrOiBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL3NyYy90cmFjayAqLyBcIi4uL3hncGxheWVyLWJ1ZmZlci9zcmMvdHJhY2suanNcIikuVmlkZW9UcmFjayxcXG5cXG4gIFhnQnVmZmVyOiBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL3NyYy9idWZmZXIgKi8gXCIuLi94Z3BsYXllci1idWZmZXIvc3JjL2J1ZmZlci5qc1wiKS5YZ0J1ZmZlcixcXG4gIFJlbXV4QnVmZmVyOiBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL3NyYy9idWZmZXIgKi8gXCIuLi94Z3BsYXllci1idWZmZXIvc3JjL2J1ZmZlci5qc1wiKS5SZW11eEJ1ZmZlcixcXG5cXG4gIFByZVNvdXJjZTogX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9zcmMvcHJlc291Y2UgKi8gXCIuLi94Z3BsYXllci1idWZmZXIvc3JjL3ByZXNvdWNlLmpzXCIpLmRlZmF1bHRcXG59O1xcblxcbi8vIyBzb3VyY2VVUkw9d2VicGFjazovL3hncGxheWVyLWZsdi8uLi94Z3BsYXllci1idWZmZXIvaW5kZXguanM/Jyl9LFwiLi4veGdwbGF5ZXItYnVmZmVyL3NyYy9idWZmZXIuanNcIjpcbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi4veGdwbGF5ZXItYnVmZmVyL3NyYy9idWZmZXIuanMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgbm8gc3RhdGljIGV4cG9ydHMgZm91bmQgKi9mdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXtcInVzZSBzdHJpY3RcIjtldmFsKCdcXG5cXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcXG4gIHZhbHVlOiB0cnVlXFxufSk7XFxuY2xhc3MgWGdCdWZmZXIge1xcbiAgLyoqXFxuICAgKiBBIGJ1ZmZlciB0byBzdG9yZSBsb2FkZWQgZGF0YS5cXG4gICAqXFxuICAgKiBAY2xhc3MgTG9hZGVyQnVmZmVyXFxuICAgKiBAcGFyYW0ge251bWJlcn0gbGVuZ3RoIC0gT3B0aW9uYWwgdGhlIGJ1ZmZlciBzaXplXFxuICAgKi9cXG4gIGNvbnN0cnVjdG9yKGxlbmd0aCkge1xcbiAgICB0aGlzLmxlbmd0aCA9IGxlbmd0aCB8fCAwO1xcbiAgICB0aGlzLmhpc3RvcnlMZW4gPSBsZW5ndGggfHwgMDtcXG4gICAgdGhpcy5hcnJheSA9IFtdO1xcbiAgICB0aGlzLm9mZnNldCA9IDA7XFxuICB9XFxuXFxuICAvKipcXG4gICAqIFRoZSBmdW5jdGlvbiB0byBwdXNoIGRhdGEuXFxuICAgKlxcbiAgICogQHBhcmFtIHtudW1iZXJ9IGRhdGEgLSBUaGUgZGF0YSB0byBwdXNoIGludG8gdGhlIGJ1ZmZlclxcbiAgICovXFxuICBwdXNoKGRhdGEpIHtcXG4gICAgdGhpcy5hcnJheS5wdXNoKGRhdGEpO1xcbiAgICB0aGlzLmxlbmd0aCArPSBkYXRhLmJ5dGVMZW5ndGg7XFxuICAgIHRoaXMuaGlzdG9yeUxlbiArPSBkYXRhLmJ5dGVMZW5ndGg7XFxuICB9XFxuXFxuICAvKipcXG4gICAqIFRoZSBmdW5jdGlvbiB0byBzaGlmdCBkYXRhLlxcbiAgICpcXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBsZW5ndGggLSBUaGUgc2l6ZSBvZiBzaGlmdC5cXG4gICAqL1xcbiAgc2hpZnQobGVuZ3RoKSB7XFxuICAgIGlmICh0aGlzLmFycmF5Lmxlbmd0aCA8IDEpIHtcXG4gICAgICByZXR1cm4gbmV3IFVpbnQ4QXJyYXkoMCk7XFxuICAgIH1cXG5cXG4gICAgaWYgKGxlbmd0aCA9PT0gdW5kZWZpbmVkKSB7XFxuICAgICAgcmV0dXJuIHRoaXMuX3NoaWZ0QnVmZmVyKCk7XFxuICAgIH1cXG4gICAgaWYgKHRoaXMub2Zmc2V0ICsgbGVuZ3RoID09PSB0aGlzLmFycmF5WzBdLmxlbmd0aCkge1xcbiAgICAgIGxldCByZXQgPSB0aGlzLmFycmF5WzBdLnNsaWNlKHRoaXMub2Zmc2V0LCB0aGlzLm9mZnNldCArIGxlbmd0aCk7XFxuICAgICAgdGhpcy5vZmZzZXQgPSAwO1xcbiAgICAgIHRoaXMuYXJyYXkuc2hpZnQoKTtcXG4gICAgICB0aGlzLmxlbmd0aCAtPSBsZW5ndGg7XFxuICAgICAgcmV0dXJuIHJldDtcXG4gICAgfVxcblxcbiAgICBpZiAodGhpcy5vZmZzZXQgKyBsZW5ndGggPCB0aGlzLmFycmF5WzBdLmxlbmd0aCkge1xcbiAgICAgIGxldCByZXQgPSB0aGlzLmFycmF5WzBdLnNsaWNlKHRoaXMub2Zmc2V0LCB0aGlzLm9mZnNldCArIGxlbmd0aCk7XFxuICAgICAgdGhpcy5vZmZzZXQgKz0gbGVuZ3RoO1xcbiAgICAgIHRoaXMubGVuZ3RoIC09IGxlbmd0aDtcXG4gICAgICByZXR1cm4gcmV0O1xcbiAgICB9XFxuXFxuICAgIGxldCByZXQgPSBuZXcgVWludDhBcnJheShsZW5ndGgpO1xcbiAgICBsZXQgdG1wb2ZmID0gMDtcXG4gICAgd2hpbGUgKHRoaXMuYXJyYXkubGVuZ3RoID4gMCAmJiBsZW5ndGggPiAwKSB7XFxuICAgICAgaWYgKHRoaXMub2Zmc2V0ICsgbGVuZ3RoIDwgdGhpcy5hcnJheVswXS5sZW5ndGgpIHtcXG4gICAgICAgIGxldCB0bXAgPSB0aGlzLmFycmF5WzBdLnNsaWNlKHRoaXMub2Zmc2V0LCB0aGlzLm9mZnNldCArIGxlbmd0aCk7XFxuICAgICAgICByZXQuc2V0KHRtcCwgdG1wb2ZmKTtcXG4gICAgICAgIHRoaXMub2Zmc2V0ICs9IGxlbmd0aDtcXG4gICAgICAgIHRoaXMubGVuZ3RoIC09IGxlbmd0aDtcXG4gICAgICAgIGxlbmd0aCA9IDA7XFxuICAgICAgICBicmVhaztcXG4gICAgICB9IGVsc2Uge1xcbiAgICAgICAgbGV0IHRlbXBsZW5ndGggPSB0aGlzLmFycmF5WzBdLmxlbmd0aCAtIHRoaXMub2Zmc2V0O1xcbiAgICAgICAgcmV0LnNldCh0aGlzLmFycmF5WzBdLnNsaWNlKHRoaXMub2Zmc2V0LCB0aGlzLmFycmF5WzBdLmxlbmd0aCksIHRtcG9mZik7XFxuICAgICAgICB0aGlzLmFycmF5LnNoaWZ0KCk7XFxuICAgICAgICB0aGlzLm9mZnNldCA9IDA7XFxuICAgICAgICB0bXBvZmYgKz0gdGVtcGxlbmd0aDtcXG4gICAgICAgIHRoaXMubGVuZ3RoIC09IHRlbXBsZW5ndGg7XFxuICAgICAgICBsZW5ndGggLT0gdGVtcGxlbmd0aDtcXG4gICAgICB9XFxuICAgIH1cXG4gICAgcmV0dXJuIHJldDtcXG4gIH1cXG5cXG4gIC8qKlxcbiAgICogRnVuY3Rpb24gdG8gY2xlYXIgdGhlIGJ1ZmZlci5cXG4gICAqL1xcbiAgY2xlYXIoKSB7XFxuICAgIHRoaXMuYXJyYXkgPSBbXTtcXG4gICAgdGhpcy5sZW5ndGggPSAwO1xcbiAgICB0aGlzLm9mZnNldCA9IDA7XFxuICB9XFxuXFxuICBkZXN0cm95KCkge1xcbiAgICB0aGlzLmNsZWFyKCk7XFxuICAgIHRoaXMuaGlzdG9yeUxlbiA9IDA7XFxuICB9XFxuXFxuICAvKipcXG4gICAqIEZ1bmN0aW9uIHRvIHNoaWZ0IG9uZSB1bml0OEFycmF5LlxcbiAgICovXFxuICBfc2hpZnRCdWZmZXIoKSB7XFxuICAgIHRoaXMubGVuZ3RoIC09IHRoaXMuYXJyYXlbMF0ubGVuZ3RoO1xcbiAgICB0aGlzLm9mZnNldCA9IDA7XFxuICAgIHJldHVybiB0aGlzLmFycmF5LnNoaWZ0KCk7XFxuICB9XFxuXFxuICAvKipcXG4gICAqIENvbnZlcnQgdWludDggZGF0YSB0byBudW1iZXIuXFxuICAgKlxcbiAgICogQHBhcmFtIHtudW1iZXJ9IHN0YXJ0IC0gdGhlIHN0YXJ0IHBvc3Rpb24uXFxuICAgKiBAcGFyYW0ge251bWJlcn0gbGVuZ3RoIC0gdGhlIGxlbmd0aCBvZiBkYXRhLlxcbiAgICovXFxuICB0b0ludChzdGFydCwgbGVuZ3RoKSB7XFxuICAgIGxldCByZXRJbnQgPSAwO1xcbiAgICBsZXQgaSA9IHRoaXMub2Zmc2V0ICsgc3RhcnQ7XFxuICAgIHdoaWxlIChpIDwgdGhpcy5vZmZzZXQgKyBsZW5ndGggKyBzdGFydCkge1xcbiAgICAgIGlmIChpIDwgdGhpcy5hcnJheVswXS5sZW5ndGgpIHtcXG4gICAgICAgIHJldEludCA9IHJldEludCAqIDI1NiArIHRoaXMuYXJyYXlbMF1baV07XFxuICAgICAgfSBlbHNlIGlmICh0aGlzLmFycmF5WzFdKSB7XFxuICAgICAgICByZXRJbnQgPSByZXRJbnQgKiAyNTYgKyB0aGlzLmFycmF5WzFdW2kgLSB0aGlzLmFycmF5WzBdLmxlbmd0aF07XFxuICAgICAgfVxcblxcbiAgICAgIGkrKztcXG4gICAgfVxcbiAgICByZXR1cm4gcmV0SW50O1xcbiAgfVxcbn1cXG5cXG5leHBvcnRzLlhnQnVmZmVyID0gWGdCdWZmZXI7XFxuY2xhc3MgUmVtdXhCdWZmZXIge1xcbiAgY29uc3RydWN0b3IoKSB7XFxuICAgIHRoaXMudmlkZW8gPSBbXTtcXG4gICAgdGhpcy5hdWRpbyA9IFtdO1xcbiAgfVxcblxcbiAgZGVzdHJveSgpIHtcXG4gICAgdGhpcy52aWRlbyA9IFtdO1xcbiAgICB0aGlzLmF1ZGlvID0gW107XFxuICB9XFxufVxcbmV4cG9ydHMuUmVtdXhCdWZmZXIgPSBSZW11eEJ1ZmZlcjtcXG5cXG4vLyMgc291cmNlVVJMPXdlYnBhY2s6Ly94Z3BsYXllci1mbHYvLi4veGdwbGF5ZXItYnVmZmVyL3NyYy9idWZmZXIuanM/Jyl9LFwiLi4veGdwbGF5ZXItYnVmZmVyL3NyYy9wcmVzb3VjZS5qc1wiOlxuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4uL3hncGxheWVyLWJ1ZmZlci9zcmMvcHJlc291Y2UuanMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBubyBzdGF0aWMgZXhwb3J0cyBmb3VuZCAqL2Z1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pe1widXNlIHN0cmljdFwiO2V2YWwoXCJcXG5cXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXFxcIl9fZXNNb2R1bGVcXFwiLCB7XFxuICB2YWx1ZTogdHJ1ZVxcbn0pO1xcbmNsYXNzIFNvdXJjZSB7XFxuICBjb25zdHJ1Y3RvcigpIHtcXG4gICAgdGhpcy5taW1ldHlwZSA9ICcnO1xcbiAgICB0aGlzLmluaXQgPSBudWxsO1xcbiAgICB0aGlzLmRhdGEgPSBbXTtcXG4gIH1cXG59XFxuXFxuY2xhc3MgUHJlU291cmNlIHtcXG4gIGNvbnN0cnVjdG9yKCkge1xcbiAgICB0aGlzLnNvdXJjZXMgPSB7fTtcXG4gIH1cXG5cXG4gIGdldFNvdXJjZShzb3VyY2UpIHtcXG4gICAgcmV0dXJuIHRoaXMuc291cmNlc1tzb3VyY2VdO1xcbiAgfVxcblxcbiAgY3JlYXRlU291cmNlKG5hbWUpIHtcXG4gICAgdGhpcy5zb3VyY2VzW25hbWVdID0gbmV3IFNvdXJjZSgpO1xcbiAgICByZXR1cm4gdGhpcy5zb3VyY2VzW25hbWVdO1xcbiAgfVxcblxcbiAgY2xlYXIoKSB7XFxuICAgIHRoaXMuc291cmNlcyA9IHt9O1xcbiAgfVxcblxcbiAgZGVzdHJveSgpIHtcXG4gICAgdGhpcy5zb3VyY2VzID0ge307XFxuICB9XFxufVxcblxcbmV4cG9ydHMuZGVmYXVsdCA9IFByZVNvdXJjZTtcXG5cXG4vLyMgc291cmNlVVJMPXdlYnBhY2s6Ly94Z3BsYXllci1mbHYvLi4veGdwbGF5ZXItYnVmZmVyL3NyYy9wcmVzb3VjZS5qcz9cIil9LFwiLi4veGdwbGF5ZXItYnVmZmVyL3NyYy90cmFjay5qc1wiOlxuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4uL3hncGxheWVyLWJ1ZmZlci9zcmMvdHJhY2suanMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBubyBzdGF0aWMgZXhwb3J0cyBmb3VuZCAqL2Z1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pe1widXNlIHN0cmljdFwiO2V2YWwoXCJcXG5cXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXFxcIl9fZXNNb2R1bGVcXFwiLCB7XFxuICB2YWx1ZTogdHJ1ZVxcbn0pO1xcbmNsYXNzIFRyYWNrIHtcXG4gIC8qKlxcbiAgICogVGhlIGNvbnN0cnVjdG9yLlxcbiAgICovXFxuICBjb25zdHJ1Y3RvcigpIHtcXG4gICAgdGhpcy5pZCA9IC0xO1xcbiAgICB0aGlzLnNlcXVlbmNlTnVtYmVyID0gMDtcXG4gICAgdGhpcy5zYW1wbGVzID0gW107XFxuICAgIHRoaXMuZHJvcHBlZFNhbXBsZXMgPSBbXTtcXG4gICAgdGhpcy5sZW5ndGggPSAwO1xcbiAgfVxcblxcbiAgLyoqXFxuICAgKiBSZXNldCB0aGUgdHJhY2suXFxuICAgKi9cXG4gIHJlc2V0KCkge1xcbiAgICB0aGlzLnNlcXVlbmNlTnVtYmVyID0gMDtcXG4gICAgdGhpcy5zYW1wbGVzID0gW107XFxuICAgIHRoaXMubGVuZ3RoID0gMDtcXG4gIH1cXG4gIC8qKlxcbiAgICogZGVzdHJveSB0aGUgdHJhY2suXFxuICAgKi9cXG4gIGRpc3Ryb3koKSB7XFxuICAgIHRoaXMucmVzZXQoKTtcXG4gICAgdGhpcy5pZCA9IC0xO1xcbiAgfVxcbn1cXG5cXG5leHBvcnRzLmRlZmF1bHQgPSBUcmFjaztcXG5jbGFzcyBBdWRpb1RyYWNrIGV4dGVuZHMgVHJhY2sge1xcbiAgLyoqXFxuICAgKiBUaGUgY29uc3RydWN0b3IgZm9yIGF1ZGlvIHRyYWNrLlxcbiAgICovXFxuICBjb25zdHJ1Y3RvcigpIHtcXG4gICAgc3VwZXIoKTtcXG4gICAgdGhpcy5UQUcgPSAnQXVkaW9UcmFjayc7XFxuICAgIHRoaXMudHlwZSA9ICdhdWRpbyc7XFxuICB9XFxufVxcblxcbmV4cG9ydHMuQXVkaW9UcmFjayA9IEF1ZGlvVHJhY2s7XFxuY2xhc3MgVmlkZW9UcmFjayBleHRlbmRzIFRyYWNrIHtcXG4gIC8qKlxcbiAgICogVGhlIGNvbnN0cnVjdG9yIGZvciB2aWRlbyB0cmFjay5cXG4gICAqL1xcbiAgY29uc3RydWN0b3IoKSB7XFxuICAgIHN1cGVyKCk7XFxuICAgIHRoaXMuVEFHID0gJ1ZpZGVvVHJhY2snO1xcbiAgICB0aGlzLnR5cGUgPSAndmlkZW8nO1xcbiAgICB0aGlzLmRyb3BwZWQgPSAwO1xcbiAgfVxcbiAgLyoqXFxuICAgKiByZXNldCB0aGUgdmlkZW8gdHJhY2suXFxuICAgKi9cXG4gIHJlc2V0KCkge1xcbiAgICB0aGlzLnNlcXVlbmNlTnVtYmVyID0gMDtcXG4gICAgdGhpcy5zYW1wbGVzID0gW107XFxuICAgIHRoaXMubGVuZ3RoID0gMDtcXG4gICAgdGhpcy5kcm9wcGVkID0gMDtcXG4gIH1cXG59XFxuXFxuZXhwb3J0cy5WaWRlb1RyYWNrID0gVmlkZW9UcmFjaztcXG5jbGFzcyBUcmFja3Mge1xcbiAgY29uc3RydWN0b3IoKSB7XFxuICAgIHRoaXMuYXVkaW9UcmFjayA9IG51bGw7XFxuICAgIHRoaXMudmlkZW9UcmFjayA9IG51bGw7XFxuICB9XFxufVxcbmV4cG9ydHMuVHJhY2tzID0gVHJhY2tzO1xcblxcbi8vIyBzb3VyY2VVUkw9d2VicGFjazovL3hncGxheWVyLWZsdi8uLi94Z3BsYXllci1idWZmZXIvc3JjL3RyYWNrLmpzP1wiKX0sXCIuLi94Z3BsYXllci1jb2RlYy9pbmRleC5qc1wiOlxuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuLi94Z3BsYXllci1jb2RlYy9pbmRleC5qcyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBubyBzdGF0aWMgZXhwb3J0cyBmb3VuZCAqL2Z1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pe1widXNlIHN0cmljdFwiO2V2YWwoJ1xcblxcbm1vZHVsZS5leHBvcnRzID0ge1xcbiAgTmFsdW5pdDogX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9zcmMvaDI2NC9uYWx1bml0ICovIFwiLi4veGdwbGF5ZXItY29kZWMvc3JjL2gyNjQvbmFsdW5pdC9pbmRleC5qc1wiKS5kZWZhdWx0LFxcbiAgU3BzUGFyc2VyOiBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL3NyYy9oMjY0L25hbHVuaXQvc3BzICovIFwiLi4veGdwbGF5ZXItY29kZWMvc3JjL2gyNjQvbmFsdW5pdC9zcHMuanNcIikuZGVmYXVsdCxcXG5cXG4gIENvbXBhdGliaWxpdHk6IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vc3JjL2NvbXBhdGliaWxpdHkgKi8gXCIuLi94Z3BsYXllci1jb2RlYy9zcmMvY29tcGF0aWJpbGl0eS5qc1wiKS5kZWZhdWx0XFxufTtcXG5cXG4vLyMgc291cmNlVVJMPXdlYnBhY2s6Ly94Z3BsYXllci1mbHYvLi4veGdwbGF5ZXItY29kZWMvaW5kZXguanM/Jyl9LFwiLi4veGdwbGF5ZXItY29kZWMvc3JjL2FhYy9hYWMtaGVscGVyLmpzXCI6XG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuLi94Z3BsYXllci1jb2RlYy9zcmMvYWFjL2FhYy1oZWxwZXIuanMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIG5vIHN0YXRpYyBleHBvcnRzIGZvdW5kICovZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7XCJ1c2Ugc3RyaWN0XCI7ZXZhbCgnXFxuXFxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XFxuICB2YWx1ZTogdHJ1ZVxcbn0pO1xcblxcbmNsYXNzIEFBQyB7XFxuXFxuICBzdGF0aWMgZ2V0U2lsZW50RnJhbWUoY29kZWMsIGNoYW5uZWxDb3VudCkge1xcbiAgICBpZiAoY29kZWMgPT09IFxcJ21wNGEuNDAuMlxcJykge1xcbiAgICAgIC8vIGhhbmRsZSBMQy1BQUNcXG4gICAgICBpZiAoY2hhbm5lbENvdW50ID09PSAxKSB7XFxuICAgICAgICByZXR1cm4gbmV3IFVpbnQ4QXJyYXkoWzB4MDAsIDB4YzgsIDB4MDAsIDB4ODAsIDB4MjMsIDB4ODBdKTtcXG4gICAgICB9IGVsc2UgaWYgKGNoYW5uZWxDb3VudCA9PT0gMikge1xcbiAgICAgICAgcmV0dXJuIG5ldyBVaW50OEFycmF5KFsweDIxLCAweDAwLCAweDQ5LCAweDkwLCAweDAyLCAweDE5LCAweDAwLCAweDIzLCAweDgwXSk7XFxuICAgICAgfSBlbHNlIGlmIChjaGFubmVsQ291bnQgPT09IDMpIHtcXG4gICAgICAgIHJldHVybiBuZXcgVWludDhBcnJheShbMHgwMCwgMHhjOCwgMHgwMCwgMHg4MCwgMHgyMCwgMHg4NCwgMHgwMSwgMHgyNiwgMHg0MCwgMHgwOCwgMHg2NCwgMHgwMCwgMHg4ZV0pO1xcbiAgICAgIH0gZWxzZSBpZiAoY2hhbm5lbENvdW50ID09PSA0KSB7XFxuICAgICAgICByZXR1cm4gbmV3IFVpbnQ4QXJyYXkoWzB4MDAsIDB4YzgsIDB4MDAsIDB4ODAsIDB4MjAsIDB4ODQsIDB4MDEsIDB4MjYsIDB4NDAsIDB4MDgsIDB4NjQsIDB4MDAsIDB4ODAsIDB4MmMsIDB4ODAsIDB4MDgsIDB4MDIsIDB4MzhdKTtcXG4gICAgICB9IGVsc2UgaWYgKGNoYW5uZWxDb3VudCA9PT0gNSkge1xcbiAgICAgICAgcmV0dXJuIG5ldyBVaW50OEFycmF5KFsweDAwLCAweGM4LCAweDAwLCAweDgwLCAweDIwLCAweDg0LCAweDAxLCAweDI2LCAweDQwLCAweDA4LCAweDY0LCAweDAwLCAweDgyLCAweDMwLCAweDA0LCAweDk5LCAweDAwLCAweDIxLCAweDkwLCAweDAyLCAweDM4XSk7XFxuICAgICAgfSBlbHNlIGlmIChjaGFubmVsQ291bnQgPT09IDYpIHtcXG4gICAgICAgIHJldHVybiBuZXcgVWludDhBcnJheShbMHgwMCwgMHhjOCwgMHgwMCwgMHg4MCwgMHgyMCwgMHg4NCwgMHgwMSwgMHgyNiwgMHg0MCwgMHgwOCwgMHg2NCwgMHgwMCwgMHg4MiwgMHgzMCwgMHgwNCwgMHg5OSwgMHgwMCwgMHgyMSwgMHg5MCwgMHgwMiwgMHgwMCwgMHhiMiwgMHgwMCwgMHgyMCwgMHgwOCwgMHhlMF0pO1xcbiAgICAgIH1cXG4gICAgfSBlbHNlIHtcXG4gICAgICAvLyBoYW5kbGUgSEUtQUFDIChtcDRhLjQwLjUgLyBtcDRhLjQwLjI5KVxcbiAgICAgIGlmIChjaGFubmVsQ291bnQgPT09IDEpIHtcXG4gICAgICAgIC8vIGZmbXBlZyAteSAtZiBsYXZmaSAtaSBcImFldmFsc3JjPTA6ZD0wLjA1XCIgLWM6YSBsaWJmZGtfYWFjIC1wcm9maWxlOmEgYWFjX2hlIC1iOmEgNGsgb3V0cHV0LmFhYyAmJiBoZXhkdW1wIC12IC1lIFxcJzE2LzEgXCIweCV4LFwiIFwiXFxcXG5cIlxcJyAtdiBvdXRwdXQuYWFjXFxuICAgICAgICByZXR1cm4gbmV3IFVpbnQ4QXJyYXkoWzB4MSwgMHg0MCwgMHgyMiwgMHg4MCwgMHhhMywgMHg0ZSwgMHhlNiwgMHg4MCwgMHhiYSwgMHg4LCAweDAsIDB4MCwgMHgwLCAweDFjLCAweDYsIDB4ZjEsIDB4YzEsIDB4YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1ZV0pO1xcbiAgICAgIH0gZWxzZSBpZiAoY2hhbm5lbENvdW50ID09PSAyKSB7XFxuICAgICAgICAvLyBmZm1wZWcgLXkgLWYgbGF2ZmkgLWkgXCJhZXZhbHNyYz0wfDA6ZD0wLjA1XCIgLWM6YSBsaWJmZGtfYWFjIC1wcm9maWxlOmEgYWFjX2hlX3YyIC1iOmEgNGsgb3V0cHV0LmFhYyAmJiBoZXhkdW1wIC12IC1lIFxcJzE2LzEgXCIweCV4LFwiIFwiXFxcXG5cIlxcJyAtdiBvdXRwdXQuYWFjXFxuICAgICAgICByZXR1cm4gbmV3IFVpbnQ4QXJyYXkoWzB4MSwgMHg0MCwgMHgyMiwgMHg4MCwgMHhhMywgMHg1ZSwgMHhlNiwgMHg4MCwgMHhiYSwgMHg4LCAweDAsIDB4MCwgMHgwLCAweDAsIDB4OTUsIDB4MCwgMHg2LCAweGYxLCAweGExLCAweGEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWVdKTtcXG4gICAgICB9IGVsc2UgaWYgKGNoYW5uZWxDb3VudCA9PT0gMykge1xcbiAgICAgICAgLy8gZmZtcGVnIC15IC1mIGxhdmZpIC1pIFwiYWV2YWxzcmM9MHwwfDA6ZD0wLjA1XCIgLWM6YSBsaWJmZGtfYWFjIC1wcm9maWxlOmEgYWFjX2hlX3YyIC1iOmEgNGsgb3V0cHV0LmFhYyAmJiBoZXhkdW1wIC12IC1lIFxcJzE2LzEgXCIweCV4LFwiIFwiXFxcXG5cIlxcJyAtdiBvdXRwdXQuYWFjXFxuICAgICAgICByZXR1cm4gbmV3IFVpbnQ4QXJyYXkoWzB4MSwgMHg0MCwgMHgyMiwgMHg4MCwgMHhhMywgMHg1ZSwgMHhlNiwgMHg4MCwgMHhiYSwgMHg4LCAweDAsIDB4MCwgMHgwLCAweDAsIDB4OTUsIDB4MCwgMHg2LCAweGYxLCAweGExLCAweGEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWEsIDB4NWVdKTtcXG4gICAgICB9XFxuICAgIH1cXG4gICAgcmV0dXJuIG51bGw7XFxuICB9XFxuXFxufVxcblxcbmV4cG9ydHMuZGVmYXVsdCA9IEFBQztcXG5cXG4vLyMgc291cmNlVVJMPXdlYnBhY2s6Ly94Z3BsYXllci1mbHYvLi4veGdwbGF5ZXItY29kZWMvc3JjL2FhYy9hYWMtaGVscGVyLmpzPycpfSxcIi4uL3hncGxheWVyLWNvZGVjL3NyYy9jb21wYXRpYmlsaXR5LmpzXCI6XG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4uL3hncGxheWVyLWNvZGVjL3NyYy9jb21wYXRpYmlsaXR5LmpzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIG5vIHN0YXRpYyBleHBvcnRzIGZvdW5kICovZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7XCJ1c2Ugc3RyaWN0XCI7ZXZhbChcIlxcblxcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcXFwiX19lc01vZHVsZVxcXCIsIHtcXG4gIHZhbHVlOiB0cnVlXFxufSk7XFxuXFxudmFyIF94Z3BsYXllclV0aWxzID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgeGdwbGF5ZXItdXRpbHMgKi8gXFxcIi4uL3hncGxheWVyLXV0aWxzL2luZGV4LmpzXFxcIik7XFxuXFxudmFyIF9hYWNIZWxwZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL2FhYy9hYWMtaGVscGVyICovIFxcXCIuLi94Z3BsYXllci1jb2RlYy9zcmMvYWFjL2FhYy1oZWxwZXIuanNcXFwiKTtcXG5cXG52YXIgX2FhY0hlbHBlcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9hYWNIZWxwZXIpO1xcblxcbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XFxuXFxuY29uc3QgeyBSRU1VWF9FVkVOVFMgfSA9IF94Z3BsYXllclV0aWxzLkVWRU5UUztcXG5cXG5jbGFzcyBDb21wYXRpYmlsaXR5IHtcXG4gIGNvbnN0cnVjdG9yKCkge1xcbiAgICB0aGlzLm5leHRBdWRpb0R0cyA9IDA7IC8vIOaooeaLn+S4i+S4gOautemfs+mikeaVsOaNrueahGR0c1xcbiAgICB0aGlzLm5leHRWaWRlb0R0cyA9IDA7IC8vIOaooeaLn+S4i+S4gOauteinhumikeaVsOaNrueahGR0c1xcblxcbiAgICB0aGlzLmxhc3RBdWRpb1NhbXBsZXNMZW4gPSAwOyAvLyDkuIrkuIDmrrXpn7PpopHmlbDmja7nmoTplb/luqZcXG4gICAgdGhpcy5sYXN0VmlkZW9TYW1wbGVzTGVuID0gMDsgLy8g5LiK5LiA5q616KeG6aKR5pWw5o2u55qE6ZW/5bqmXFxuXFxuICAgIHRoaXMubGFzdFZpZGVvRHRzID0gdW5kZWZpbmVkOyAvLyDkuIrkuIDmrrXpn7PpopHmlbDmja7nmoTplb/luqZcXG4gICAgdGhpcy5sYXN0QXVkaW9EdHMgPSB1bmRlZmluZWQ7IC8vIOS4iuS4gOauteinhumikeaVsOaNrueahOmVv+W6plxcblxcbiAgICB0aGlzLmFsbEF1ZGlvU2FtcGxlc0NvdW50ID0gMDsgLy8g6Z+z6aKR5oC75pWw5o2u6YePKOWOn+Wni+W4pylcXG4gICAgdGhpcy5hbGxWaWRlb1NhbXBsZXNDb3VudCA9IDA7IC8vIOinhumikeaAu+aVsOaNrumHjyjljp/lp4vluKcpXFxuXFxuICAgIHRoaXMuX2ZpcnN0QXVkaW9TYW1wbGUgPSBudWxsO1xcbiAgICB0aGlzLl9maXJzdFZpZGVvU2FtcGxlID0gbnVsbDtcXG5cXG4gICAgdGhpcy5maWxsZWRBdWRpb1NhbXBsZXMgPSBbXTsgLy8g6KGl5YWF6Z+z6aKR5bin77yI77yJXFxuICAgIHRoaXMuZmlsbGVkVmlkZW9TYW1wbGVzID0gW107IC8vIOihpeWFheinhumikeW4p++8iO+8iVxcbiAgfVxcblxcbiAgaW5pdCgpIHtcXG4gICAgdGhpcy5iZWZvcmUoUkVNVVhfRVZFTlRTLlJFTVVYX01FRElBLCB0aGlzLmRvRml4LmJpbmQodGhpcykpO1xcbiAgfVxcblxcbiAgcmVzZXQoKSB7XFxuICAgIHRoaXMubmV4dEF1ZGlvRHRzID0gMDsgLy8g5qih5ouf5LiL5LiA5q616Z+z6aKR5pWw5o2u55qEZHRzXFxuICAgIHRoaXMubmV4dFZpZGVvRHRzID0gMDsgLy8g5qih5ouf5LiL5LiA5q616KeG6aKR5pWw5o2u55qEZHRzXFxuXFxuICAgIHRoaXMubGFzdEF1ZGlvU2FtcGxlc0xlbiA9IDA7IC8vIOS4iuS4gOautemfs+mikeaVsOaNrueahOmVv+W6plxcbiAgICB0aGlzLmxhc3RWaWRlb1NhbXBsZXNMZW4gPSAwOyAvLyDkuIrkuIDmrrXop4bpopHmlbDmja7nmoTplb/luqZcXG5cXG4gICAgdGhpcy5sYXN0VmlkZW9EdHMgPSB1bmRlZmluZWQ7IC8vIOS4iuS4gOautemfs+mikeaVsOaNrueahOmVv+W6plxcbiAgICB0aGlzLmxhc3RBdWRpb0R0cyA9IHVuZGVmaW5lZDsgLy8g5LiK5LiA5q616KeG6aKR5pWw5o2u55qE6ZW/5bqmXFxuXFxuICAgIHRoaXMuYWxsQXVkaW9TYW1wbGVzQ291bnQgPSAwOyAvLyDpn7PpopHmgLvmlbDmja7ph48o5Y6f5aeL5binKVxcbiAgICB0aGlzLmFsbFZpZGVvU2FtcGxlc0NvdW50ID0gMDsgLy8g6KeG6aKR5oC75pWw5o2u6YePKOWOn+Wni+W4pylcXG5cXG4gICAgdGhpcy5fZmlyc3RBdWRpb1NhbXBsZSA9IG51bGw7XFxuICAgIHRoaXMuX2ZpcnN0VmlkZW9TYW1wbGUgPSBudWxsO1xcblxcbiAgICB0aGlzLmZpbGxlZEF1ZGlvU2FtcGxlcyA9IFtdOyAvLyDooaXlhYXpn7PpopHluKfvvIjvvIlcXG4gICAgdGhpcy5maWxsZWRWaWRlb1NhbXBsZXMgPSBbXTsgLy8g6KGl5YWF6KeG6aKR5bin77yI77yJXFxuICB9XFxuXFxuICBkb0ZpeCgpIHtcXG4gICAgY29uc3QgeyBpc0ZpcnN0QXVkaW9TYW1wbGVzLCBpc0ZpcnN0VmlkZW9TYW1wbGVzIH0gPSB0aGlzLmdldEZpcnN0U2FtcGxlKCk7XFxuXFxuICAgIHRoaXMucmVtb3ZlSW52YWxpZFNhbXBsZXMoKTtcXG5cXG4gICAgdGhpcy5yZWNvcmRTYW1wbGVzQ291bnQoKTtcXG5cXG4gICAgaWYgKHRoaXMuX2ZpcnN0VmlkZW9TYW1wbGUpIHtcXG4gICAgICB0aGlzLmZpeFJlZlNhbXBsZUR1cmF0aW9uKHRoaXMudmlkZW9UcmFjay5tZXRhLCB0aGlzLnZpZGVvVHJhY2suc2FtcGxlcyk7XFxuICAgIH1cXG4gICAgaWYgKHRoaXMuX2ZpcnN0QXVkaW9TYW1wbGUpIHtcXG4gICAgICB0aGlzLmZpeFJlZlNhbXBsZUR1cmF0aW9uKHRoaXMuYXVkaW9UcmFjay5tZXRhLCB0aGlzLmF1ZGlvVHJhY2suc2FtcGxlcyk7XFxuICAgIH1cXG5cXG4gICAgdGhpcy5kb0ZpeFZpZGVvKGlzRmlyc3RWaWRlb1NhbXBsZXMpO1xcbiAgICB0aGlzLmRvRml4QXVkaW8oaXNGaXJzdEF1ZGlvU2FtcGxlcyk7XFxuICB9XFxuXFxuICBkb0ZpeFZpZGVvKGZpcnN0KSB7XFxuICAgIGxldCB7IHNhbXBsZXM6IHZpZGVvU2FtcGxlcywgbWV0YSB9ID0gdGhpcy52aWRlb1RyYWNrO1xcblxcbiAgICBpZiAobWV0YS5mcmFtZVJhdGUgJiYgbWV0YS5mcmFtZVJhdGUuZml4ZWQgPT09IGZhbHNlKSB7XFxuICAgICAgcmV0dXJuO1xcbiAgICB9XFxuXFxuICAgIGlmICghdmlkZW9TYW1wbGVzIHx8ICF2aWRlb1NhbXBsZXMubGVuZ3RoIHx8ICF0aGlzLl9maXJzdFZpZGVvU2FtcGxlKSB7XFxuICAgICAgcmV0dXJuO1xcbiAgICB9XFxuXFxuICAgIC8vIGNvbnNvbGUubG9nKGB2aWRlbyBsYXN0U2FtcGxlLCAke3ZpZGVvU2FtcGxlc1t2aWRlb1NhbXBsZXMubGVuZ3RoIC0gMV0uZHRzfWApXFxuXFxuICAgIGNvbnN0IGZpcnN0U2FtcGxlID0gdmlkZW9TYW1wbGVzWzBdO1xcbiAgICBjb25zdCBmaXJzdER0cyA9IGZpcnN0U2FtcGxlLmR0cztcXG5cXG4gICAgY29uc3Qgc2FtcGxlc0xlbiA9IHZpZGVvU2FtcGxlcy5sZW5ndGg7XFxuXFxuICAgIC8vIHN0ZXAxLiDkv67lpI3kuI5hdWRpb+mmluW4p+W3rui3neWkquWkp+eahOmXrumimFxcbiAgICBpZiAoZmlyc3QgJiYgdGhpcy5fZmlyc3RBdWRpb1NhbXBsZSkge1xcbiAgICAgIGNvbnN0IHZpZGVvRmlyc3REdHMgPSB0aGlzLl9maXJzdFZpZGVvU2FtcGxlLmR0cztcXG4gICAgICBjb25zdCBhdWRpb0ZpcnN0RHRzID0gdGhpcy5fZmlyc3RBdWRpb1NhbXBsZS5kdHM7XFxuICAgICAgY29uc3QgZ2FwID0gdmlkZW9GaXJzdER0cyAtIGF1ZGlvRmlyc3REdHM7XFxuICAgICAgaWYgKGdhcCA+IDIgKiBtZXRhLnJlZlNhbXBsZUR1cmF0aW9uKSB7XFxuICAgICAgICBjb25zdCBmaWxsQ291bnQgPSBNYXRoLmZsb29yKGdhcCAvIG1ldGEucmVmU2FtcGxlRHVyYXRpb24pO1xcblxcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBmaWxsQ291bnQ7IGkrKykge1xcbiAgICAgICAgICBjb25zdCBjbG9uZWRGaXJzdFNhbXBsZSA9IE9iamVjdC5hc3NpZ24oe30sIGZpcnN0U2FtcGxlKTsgLy8g6KeG6aKR5aS06YOo5bin57y65aSx6ZyA6KaB5aSN5Yi256ys5LiA5binXFxuICAgICAgICAgIC8vIOmHjeaWsOiuoeeul3NhbXBsZeeahGR0c+WSjHB0c1xcbiAgICAgICAgICBjbG9uZWRGaXJzdFNhbXBsZS5kdHMgPSB2aWRlb0ZpcnN0RHRzIC0gKGkgKyAxKSAqIG1ldGEucmVmU2FtcGxlRHVyYXRpb247XFxuICAgICAgICAgIGNsb25lZEZpcnN0U2FtcGxlLnB0cyA9IGNsb25lZEZpcnN0U2FtcGxlLmR0cyArIGNsb25lZEZpcnN0U2FtcGxlLmN0cztcXG5cXG4gICAgICAgICAgdmlkZW9TYW1wbGVzLnVuc2hpZnQoY2xvbmVkRmlyc3RTYW1wbGUpO1xcblxcbiAgICAgICAgICB0aGlzLmZpbGxlZFZpZGVvU2FtcGxlcy5wdXNoKHtcXG4gICAgICAgICAgICBkdHM6IGNsb25lZEZpcnN0U2FtcGxlLmR0cyxcXG4gICAgICAgICAgICBzaXplOiBjbG9uZWRGaXJzdFNhbXBsZS5kYXRhLmJ5dGVMZW5ndGhcXG4gICAgICAgICAgfSk7XFxuICAgICAgICB9XFxuICAgICAgfVxcbiAgICB9XFxuXFxuICAgIGxldCBnYXA7XFxuICAgIC8vIHN0ZXAyLiDkv67lpI1zYW1wbGVz5q615LmL6Ze055qE6Ze06Led6Zeu6aKY44CBXFxuICAgIGlmICh0aGlzLm5leHRWaWRlb0R0cykge1xcbiAgICAgIC8vIHN0ZXAxLiDlpITnkIZzYW1wbGVz5q615LmL6Ze055qE5Lii5bin5oOF5Ya1XFxuICAgICAgLy8g5b2T5Y+R546wZHVyYXRpb27lt67ot53lpKfkuo4y5bin5pe26L+b6KGM6KGl5binXFxuICAgICAgZ2FwID0gZmlyc3REdHMgLSB0aGlzLm5leHRWaWRlb0R0cztcXG4gICAgICBjb25zdCBhYnNHYXAgPSBNYXRoLmFicyhnYXApO1xcbiAgICAgIGlmIChnYXAgPiAyICogbWV0YS5yZWZTYW1wbGVEdXJhdGlvbikge1xcbiAgICAgICAgY29uc3QgZmlsbEZyYW1lQ291bnQgPSBNYXRoLmZsb29yKGdhcCAvIG1ldGEucmVmU2FtcGxlRHVyYXRpb24pO1xcblxcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBmaWxsRnJhbWVDb3VudDsgaSsrKSB7XFxuICAgICAgICAgIGNvbnN0IGNsb25lZFNhbXBsZSA9IE9iamVjdC5hc3NpZ24oe30sIHZpZGVvU2FtcGxlc1swXSk7XFxuICAgICAgICAgIGNvbnN0IGNvbXB1dGVkID0gZmlyc3REdHMgLSAoaSArIDEpICogbWV0YS5yZWZTYW1wbGVEdXJhdGlvbjtcXG5cXG4gICAgICAgICAgY2xvbmVkU2FtcGxlLmR0cyA9IGNvbXB1dGVkID4gdGhpcy5uZXh0VmlkZW9EdHMgPyBjb21wdXRlZCA6IHRoaXMubmV4dFZpZGVvRHRzOyAvLyDooaXnmoTnrKzkuIDluKfkuIDlrpropoHmmK9uZXh0VmlkZW9EdHNcXG4gICAgICAgICAgY2xvbmVkU2FtcGxlLnB0cyA9IGNsb25lZFNhbXBsZS5kdHMgKyBjbG9uZWRTYW1wbGUuY3RzO1xcblxcbiAgICAgICAgICB0aGlzLnZpZGVvVHJhY2suc2FtcGxlcy51bnNoaWZ0KGNsb25lZFNhbXBsZSk7XFxuXFxuICAgICAgICAgIHRoaXMuZmlsbGVkVmlkZW9TYW1wbGVzLnB1c2goe1xcbiAgICAgICAgICAgIGR0czogY2xvbmVkU2FtcGxlLmR0cyxcXG4gICAgICAgICAgICBzaXplOiBjbG9uZWRTYW1wbGUuZGF0YS5ieXRlTGVuZ3RoXFxuICAgICAgICAgIH0pO1xcbiAgICAgICAgfVxcbiAgICAgIH0gZWxzZSBpZiAoYWJzR2FwIDw9IDEwICYmIGFic0dhcCA+IDApIHtcXG4gICAgICAgIC8vIOW9k+W3rui3neWcqCst5LiA5bin5LmL6Ze05pe25bCG56ys5LiA5bin55qEZHRz5by66KGM5a6a5L2N5Yiw5pyf5pyb5L2N572uXFxuICAgICAgICAvLyBjb25zb2xlLmxvZygn6YeN5a6a5L2N6KeG6aKR5binZHRzJywgdmlkZW9TYW1wbGVzWzBdLmR0cywgdGhpcy5uZXh0VmlkZW9EdHMpXFxuICAgICAgICB2aWRlb1NhbXBsZXNbMF0uZHRzID0gdGhpcy5uZXh0VmlkZW9EdHM7XFxuICAgICAgICB2aWRlb1NhbXBsZXNbMF0ub3JpZ2luRHRzID0gdmlkZW9TYW1wbGVzWzBdLmR0cztcXG4gICAgICAgIHZpZGVvU2FtcGxlc1swXS5jdHMgPSB2aWRlb1NhbXBsZXNbMF0uY3RzIHx8IHZpZGVvU2FtcGxlc1swXS5wdHMgLSB2aWRlb1NhbXBsZXNbMF0uZHRzO1xcbiAgICAgICAgdmlkZW9TYW1wbGVzWzBdLnB0cyA9IHZpZGVvU2FtcGxlc1swXS5kdHMgKyB2aWRlb1NhbXBsZXNbMF0uY3RzO1xcbiAgICAgIH1cXG4gICAgfVxcbiAgICBjb25zdCBsYXN0RHRzID0gdmlkZW9TYW1wbGVzW3ZpZGVvU2FtcGxlcy5sZW5ndGggLSAxXS5kdHM7XFxuXFxuICAgIGNvbnN0IGxhc3RTYW1wbGVEdXJhdGlvbiA9IHZpZGVvU2FtcGxlcy5sZW5ndGggPj0gMiA/IGxhc3REdHMgLSB2aWRlb1NhbXBsZXNbdmlkZW9TYW1wbGVzLmxlbmd0aCAtIDJdLmR0cyA6IG1ldGEucmVmU2FtcGxlRHVyYXRpb247XFxuXFxuICAgIHRoaXMubGFzdFZpZGVvU2FtcGxlc0xlbiA9IHNhbXBsZXNMZW47XFxuICAgIHRoaXMubmV4dFZpZGVvRHRzID0gbGFzdER0cyArIGxhc3RTYW1wbGVEdXJhdGlvbjtcXG4gICAgdGhpcy5sYXN0VmlkZW9EdHMgPSBsYXN0RHRzO1xcblxcbiAgICAvLyBzdGVwMi4g5L+u5aSNc2FtcGxl5q615LmL5YaF55qE6Ze06Led6Zeu6aKYXFxuICAgIC8vIHN0ZXAzLiDkv67lpI1zYW1wbGVz5q615YaF6YOo55qEZHRz5byC5bi46Zeu6aKYXFxuICAgIGZvciAobGV0IGkgPSAwLCBsZW4gPSB2aWRlb1NhbXBsZXMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcXG4gICAgICBjb25zdCBjdXJyZW50ID0gdmlkZW9TYW1wbGVzW2ldO1xcbiAgICAgIGNvbnN0IG5leHQgPSB2aWRlb1NhbXBsZXNbaSArIDFdO1xcblxcbiAgICAgIGlmICghbmV4dCkge1xcbiAgICAgICAgYnJlYWs7XFxuICAgICAgfVxcblxcbiAgICAgIGNvbnN0IGR1cmF0aW9uID0gbmV4dC5kdHMgLSBjdXJyZW50LmR0cztcXG5cXG4gICAgICBpZiAoZHVyYXRpb24gPiAyICogbWV0YS5yZWZTYW1wbGVEdXJhdGlvbikge1xcbiAgICAgICAgLy8g5Lik5bin5LmL6Ze06Ze06ZqU5aSq5aSn77yM6ZyA6KaB6KGl56m655m95binXFxuICAgICAgICBsZXQgZmlsbEZyYW1lQ291bnQgPSBNYXRoLmZsb29yKGR1cmF0aW9uIC8gbWV0YS5yZWZTYW1wbGVEdXJhdGlvbik7XFxuXFxuICAgICAgICBsZXQgZmlsbEZyYW1lSWR4ID0gMDtcXG4gICAgICAgIHdoaWxlIChmaWxsRnJhbWVJZHggPCBmaWxsRnJhbWVDb3VudCkge1xcbiAgICAgICAgICBjb25zdCBmaWxsRnJhbWUgPSBPYmplY3QuYXNzaWduKHt9LCBuZXh0KTtcXG4gICAgICAgICAgZmlsbEZyYW1lLmR0cyA9IGN1cnJlbnQuZHRzICsgKGZpbGxGcmFtZUlkeCArIDEpICogbWV0YS5yZWZTYW1wbGVEdXJhdGlvbjtcXG4gICAgICAgICAgZmlsbEZyYW1lLnB0cyA9IGZpbGxGcmFtZS5kdHMgKyBmaWxsRnJhbWUuY3RzO1xcbiAgICAgICAgICBpZiAoZmlsbEZyYW1lIDwgbmV4dC5kdHMpIHtcXG4gICAgICAgICAgICB2aWRlb1NhbXBsZXMuc3BsaWNlKGksIDAsIGZpbGxGcmFtZSk7XFxuXFxuICAgICAgICAgICAgdGhpcy5maWxsZWRWaWRlb1NhbXBsZXMucHVzaCh7XFxuICAgICAgICAgICAgICBkdHM6IGZpbGxGcmFtZS5kdHMsXFxuICAgICAgICAgICAgICBzaXplOiBmaWxsRnJhbWUuZGF0YS5ieXRlTGVuZ3RoXFxuICAgICAgICAgICAgfSk7XFxuICAgICAgICAgIH1cXG5cXG4gICAgICAgICAgZmlsbEZyYW1lSWR4Kys7XFxuICAgICAgICAgIGkrKztcXG4gICAgICAgIH1cXG4gICAgICB9XFxuICAgIH1cXG5cXG4gICAgdGhpcy52aWRlb1RyYWNrLnNhbXBsZXMgPSB2aWRlb1NhbXBsZXM7XFxuICB9XFxuXFxuICBkb0ZpeEF1ZGlvKGZpcnN0KSB7XFxuICAgIGxldCB7IHNhbXBsZXM6IGF1ZGlvU2FtcGxlcywgbWV0YSB9ID0gdGhpcy5hdWRpb1RyYWNrO1xcblxcbiAgICBpZiAoIWF1ZGlvU2FtcGxlcyB8fCAhYXVkaW9TYW1wbGVzLmxlbmd0aCkge1xcbiAgICAgIHJldHVybjtcXG4gICAgfVxcbiAgICAvLyBjb25zb2xlLmxvZyhgYXVkaW8gbGFzdFNhbXBsZSwgJHthdWRpb1NhbXBsZXNbYXVkaW9TYW1wbGVzLmxlbmd0aCAtIDFdLmR0c31gKVxcblxcbiAgICBjb25zdCBzYW1wbGVzTGVuID0gYXVkaW9TYW1wbGVzLmxlbmd0aDtcXG4gICAgY29uc3Qgc2lsZW50RnJhbWUgPSBfYWFjSGVscGVyMi5kZWZhdWx0LmdldFNpbGVudEZyYW1lKG1ldGEuY29kZWMsIG1ldGEuY2hhbm5lbENvdW50KTtcXG5cXG4gICAgY29uc3QgZmlyc3RTYW1wbGUgPSB0aGlzLl9maXJzdEF1ZGlvU2FtcGxlO1xcblxcbiAgICAvLyDlr7lhdWRpb1NhbXBsZXPmjInnhadkdHPlgZrmjpLluo9cXG4gICAgYXVkaW9TYW1wbGVzID0gQ29tcGF0aWJpbGl0eS5zb3J0QXVkaW9TYW1wbGVzKGF1ZGlvU2FtcGxlcyk7XFxuXFxuICAgIC8vIHN0ZXAwLiDpppbluKfkuI52aWRlb+mmluW4p+mXtOi3neWkp+eahOmXrumimFxcbiAgICBpZiAodGhpcy5fZmlyc3RWaWRlb1NhbXBsZSAmJiBmaXJzdCkge1xcbiAgICAgIGNvbnN0IHZpZGVvRmlyc3RQdHMgPSB0aGlzLl9maXJzdFZpZGVvU2FtcGxlLnB0cyA/IHRoaXMuX2ZpcnN0VmlkZW9TYW1wbGUucHRzIDogdGhpcy5fZmlyc3RWaWRlb1NhbXBsZS5kdHMgKyB0aGlzLl9maXJzdFZpZGVvU2FtcGxlLmN0cztcXG5cXG4gICAgICBpZiAoZmlyc3RTYW1wbGUuZHRzIC0gdmlkZW9GaXJzdFB0cyA+IG1ldGEucmVmU2FtcGxlRHVyYXRpb24pIHtcXG4gICAgICAgIGNvbnN0IHNpbGVudFNhbXBsZUNvdW50ID0gTWF0aC5mbG9vcigoZmlyc3RTYW1wbGUuZHRzIC0gdmlkZW9GaXJzdFB0cykgLyBtZXRhLnJlZlNhbXBsZUR1cmF0aW9uKTtcXG5cXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2lsZW50U2FtcGxlQ291bnQ7IGkrKykge1xcbiAgICAgICAgICBjb25zdCBzaWxlbnRTYW1wbGUgPSB7XFxuICAgICAgICAgICAgZGF0YTogc2lsZW50RnJhbWUsXFxuICAgICAgICAgICAgZGF0YXNpemU6IHNpbGVudEZyYW1lLmJ5dGVMZW5ndGgsXFxuICAgICAgICAgICAgZHRzOiBmaXJzdFNhbXBsZS5kdHMgLSAoaSArIDEpICogbWV0YS5yZWZTYW1wbGVEdXJhdGlvbixcXG4gICAgICAgICAgICBmaWx0ZXJlZDogMFxcbiAgICAgICAgICB9O1xcblxcbiAgICAgICAgICBhdWRpb1NhbXBsZXMudW5zaGlmdChzaWxlbnRTYW1wbGUpO1xcblxcbiAgICAgICAgICB0aGlzLmZpbGxlZEF1ZGlvU2FtcGxlcy5wdXNoKHtcXG4gICAgICAgICAgICBkdHM6IHNpbGVudFNhbXBsZS5kdHMsXFxuICAgICAgICAgICAgc2l6ZTogc2lsZW50U2FtcGxlLmRhdGEuYnl0ZUxlbmd0aFxcbiAgICAgICAgICB9KTtcXG4gICAgICAgIH1cXG4gICAgICB9XFxuICAgIH1cXG5cXG4gICAgbGV0IGdhcDtcXG4gICAgY29uc3QgZmlyc3REdHMgPSBhdWRpb1NhbXBsZXNbMF0uZHRzO1xcblxcbiAgICBpZiAodGhpcy5uZXh0QXVkaW9EdHMpIHtcXG4gICAgICAvLyBzdGVwMS4g5aSE55CGc2FtcGxlc+auteS5i+mXtOeahOS4ouW4p+aDheWGtVxcbiAgICAgIC8vIOW9k+WPkeeOsGR1cmF0aW9u5beu6Led5aSn5LqOMeW4p+aXtui/m+ihjOihpeW4p1xcbiAgICAgIGdhcCA9IGZpcnN0RHRzIC0gdGhpcy5uZXh0QXVkaW9EdHM7XFxuICAgICAgY29uc3QgYWJzR2FwID0gTWF0aC5hYnMoZ2FwKTtcXG5cXG4gICAgICBpZiAoYWJzR2FwID4gbWV0YS5yZWZTYW1wbGVEdXJhdGlvbiAmJiBzYW1wbGVzTGVuID09PSAxICYmIHRoaXMubGFzdEF1ZGlvU2FtcGxlc0xlbiA9PT0gMSkge1xcbiAgICAgICAgbWV0YS5yZWZTYW1wbGVEdXJhdGlvbkZpeGVkID0gdW5kZWZpbmVkO1xcbiAgICAgIH1cXG5cXG4gICAgICBpZiAoZ2FwID4gMiAqIG1ldGEucmVmU2FtcGxlRHVyYXRpb24pIHtcXG4gICAgICAgIGlmIChzYW1wbGVzTGVuID09PSAxICYmIHRoaXMubGFzdEF1ZGlvU2FtcGxlc0xlbiA9PT0gMSkge1xcbiAgICAgICAgICAvLyDlpoLmnpxzYW1wbGXnmoRsZW5ndGjkuIDnm7TmmK8x77yM6ICM5LiU5LiA55u05LiN56ym5ZCIcmVmU2FtcGxlRHVyYXRpb27vvIzpnIDopoHliqjmgIHkv67mlLlyZWZTYW1wbGVEdXJhdGlvblxcbiAgICAgICAgICBtZXRhLnJlZlNhbXBsZUR1cmF0aW9uRml4ZWQgPSBtZXRhLnJlZlNhbXBsZUR1cmF0aW9uRml4ZWQgIT09IHVuZGVmaW5lZCA/IG1ldGEucmVmU2FtcGxlRHVyYXRpb25GaXhlZCArIGdhcCA6IG1ldGEucmVmU2FtcGxlRHVyYXRpb24gKyBnYXA7XFxuICAgICAgICB9IGVsc2Uge1xcbiAgICAgICAgICBjb25zdCBzaWxlbnRGcmFtZUNvdW50ID0gTWF0aC5mbG9vcihnYXAgLyBtZXRhLnJlZlNhbXBsZUR1cmF0aW9uKTtcXG5cXG4gICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzaWxlbnRGcmFtZUNvdW50OyBpKyspIHtcXG4gICAgICAgICAgICBjb25zdCBjb21wdXRlZCA9IGZpcnN0RHRzIC0gKGkgKyAxKSAqIG1ldGEucmVmU2FtcGxlRHVyYXRpb247XFxuICAgICAgICAgICAgY29uc3Qgc2lsZW50U2FtcGxlID0gT2JqZWN0LmFzc2lnbih7fSwgYXVkaW9TYW1wbGVzWzBdLCB7XFxuICAgICAgICAgICAgICBkdHM6IGNvbXB1dGVkID4gdGhpcy5uZXh0QXVkaW9EdHMgPyBjb21wdXRlZCA6IHRoaXMubmV4dEF1ZGlvRHRzXFxuICAgICAgICAgICAgfSk7XFxuXFxuICAgICAgICAgICAgdGhpcy5maWxsZWRBdWRpb1NhbXBsZXMucHVzaCh7XFxuICAgICAgICAgICAgICBkdHM6IHNpbGVudFNhbXBsZS5kdHMsXFxuICAgICAgICAgICAgICBzaXplOiBzaWxlbnRTYW1wbGUuZGF0YS5ieXRlTGVuZ3RoXFxuICAgICAgICAgICAgfSk7XFxuICAgICAgICAgICAgdGhpcy5hdWRpb1RyYWNrLnNhbXBsZXMudW5zaGlmdChzaWxlbnRTYW1wbGUpO1xcbiAgICAgICAgICB9XFxuICAgICAgICB9XFxuICAgICAgfSBlbHNlIGlmIChhYnNHYXAgPD0gMTAgJiYgYWJzR2FwID4gMCkge1xcbiAgICAgICAgLy8g5b2T5beu6Led5q+U6L6D5bCP55qE5pe25YCZ5bCG6Z+z6aKR5bin6YeN5a6a5L2NXFxuICAgICAgICAvLyBjb25zb2xlLmxvZygn6YeN5a6a5L2N6Z+z6aKR5binZHRzJywgYXVkaW9TYW1wbGVzWzBdLmR0cywgdGhpcy5uZXh0QXVkaW9EdHMpXFxuICAgICAgICBhdWRpb1NhbXBsZXNbMF0uZHRzID0gdGhpcy5uZXh0QXVkaW9EdHM7XFxuICAgICAgICBhdWRpb1NhbXBsZXNbMF0ucHRzID0gdGhpcy5uZXh0QXVkaW9EdHM7XFxuICAgICAgfVxcbiAgICB9XFxuICAgIGNvbnN0IGxhc3REdHMgPSBhdWRpb1NhbXBsZXNbYXVkaW9TYW1wbGVzLmxlbmd0aCAtIDFdLmR0cztcXG4gICAgY29uc3QgbGFzdFNhbXBsZUR1cmF0aW9uID0gYXVkaW9TYW1wbGVzLmxlbmd0aCA+PSAyID8gbGFzdER0cyAtIGF1ZGlvU2FtcGxlc1thdWRpb1NhbXBsZXMubGVuZ3RoIC0gMl0uZHRzIDogbWV0YS5yZWZTYW1wbGVEdXJhdGlvbjtcXG5cXG4gICAgdGhpcy5sYXN0QXVkaW9TYW1wbGVzTGVuID0gc2FtcGxlc0xlbjtcXG4gICAgdGhpcy5uZXh0QXVkaW9EdHMgPSBtZXRhLnJlZlNhbXBsZUR1cmF0aW9uRml4ZWQgPyBsYXN0RHRzICsgbWV0YS5yZWZTYW1wbGVEdXJhdGlvbkZpeGVkIDogbGFzdER0cyArIGxhc3RTYW1wbGVEdXJhdGlvbjtcXG4gICAgdGhpcy5sYXN0QXVkaW9EdHMgPSBsYXN0RHRzO1xcblxcbiAgICAvLyBzdGVwMy4g5L+u5aSNc2FtcGxlc+auteWGhemDqOeahGR0c+W8guW4uOmXrumimFxcbiAgICBmb3IgKGxldCBpID0gMCwgbGVuID0gYXVkaW9TYW1wbGVzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XFxuICAgICAgY29uc3QgY3VycmVudCA9IGF1ZGlvU2FtcGxlc1tpXTtcXG4gICAgICBjb25zdCBuZXh0ID0gYXVkaW9TYW1wbGVzW2kgKyAxXTtcXG5cXG4gICAgICBpZiAoIW5leHQpIHtcXG4gICAgICAgIGJyZWFrO1xcbiAgICAgIH1cXG5cXG4gICAgICBjb25zdCBkdXJhdGlvbiA9IG5leHQuZHRzIC0gY3VycmVudC5kdHM7XFxuICAgICAgYXVkaW9TYW1wbGVzW2ldLmR1cmF0aW9uID0gZHVyYXRpb247XFxuICAgICAgLypcXG4gICAgICBpZiAoZHVyYXRpb24gPiAoMiAqIG1ldGEucmVmU2FtcGxlRHVyYXRpb24pKSB7XFxuICAgICAgICAvLyDkuKTluKfkuYvpl7Tpl7TpmpTlpKrlpKfvvIzpnIDopoHooaXnqbrnmb3luKdcXG4gICAgICAgIC8qKlxcbiAgICAgICAgbGV0IHNpbGVudEZyYW1lQ291bnQgPSBNYXRoLmZsb29yKGR1cmF0aW9uIC8gbWV0YS5yZWZTYW1wbGVEdXJhdGlvbilcXG4gICAgICAgIGxldCBmcmFtZUlkeCA9IDBcXG4gICAgICAgICB3aGlsZSAoZnJhbWVJZHggPCBzaWxlbnRGcmFtZUNvdW50KSB7XFxuICAgICAgICAgIGNvbnN0IHNpbGVudFNhbXBsZSA9IHtcXG4gICAgICAgICAgICBkYXRhOiBzaWxlbnRGcmFtZSxcXG4gICAgICAgICAgICBkYXRhc2l6ZTogc2lsZW50RnJhbWUuYnl0ZUxlbmd0aCxcXG4gICAgICAgICAgICBkdHM6IGN1cnJlbnQuZHRzICsgKGZyYW1lSWR4ICsgMSkgKiBtZXRhLnJlZlNhbXBsZUR1cmF0aW9uLFxcbiAgICAgICAgICAgIGZpbHRlcmVkOiAwLFxcbiAgICAgICAgICAgIGlzU2lsZW50OiB0cnVlXFxuICAgICAgICAgIH1cXG4gICAgICAgICAgIGF1ZGlvU2FtcGxlcy5zcGxpY2UoaSwgMCwgc2lsZW50U2FtcGxlKVxcbiAgICAgICAgICAgdGhpcy5maWxsZWRBdWRpb1NhbXBsZXMucHVzaCh7XFxuICAgICAgICAgICAgZHRzOiBzaWxlbnRTYW1wbGUuZHRzLFxcbiAgICAgICAgICAgIHNpemU6IHNpbGVudFNhbXBsZS5kYXRhLmJ5dGVMZW5ndGhcXG4gICAgICAgICAgfSlcXG4gICAgICAgICAgIGZyYW1lSWR4KytcXG4gICAgICAgICAgaSsrIC8vIOS4jeWvuemdmemfs+W4p+WBmuavlOi+g1xcbiAgICAgICAgfVxcbiAgICAgIH0gKi9cXG4gICAgfVxcblxcbiAgICB0aGlzLmF1ZGlvVHJhY2suc2FtcGxlcyA9IENvbXBhdGliaWxpdHkuc29ydEF1ZGlvU2FtcGxlcyhhdWRpb1NhbXBsZXMpO1xcbiAgfVxcblxcbiAgZ2V0Rmlyc3RTYW1wbGUoKSB7XFxuICAgIC8vIOiOt+WPlnZpZGVv5ZKMYXVkaW/nmoTpppbluKfmlbDmja5cXG4gICAgbGV0IHsgc2FtcGxlczogdmlkZW9TYW1wbGVzIH0gPSB0aGlzLnZpZGVvVHJhY2s7XFxuICAgIGxldCB7IHNhbXBsZXM6IGF1ZGlvU2FtcGxlcyB9ID0gdGhpcy5hdWRpb1RyYWNrO1xcblxcbiAgICBsZXQgaXNGaXJzdFZpZGVvU2FtcGxlcyA9IGZhbHNlO1xcbiAgICBsZXQgaXNGaXJzdEF1ZGlvU2FtcGxlcyA9IGZhbHNlO1xcblxcbiAgICBpZiAoIXRoaXMuX2ZpcnN0VmlkZW9TYW1wbGUgJiYgdmlkZW9TYW1wbGVzLmxlbmd0aCkge1xcbiAgICAgIHRoaXMuX2ZpcnN0VmlkZW9TYW1wbGUgPSBDb21wYXRpYmlsaXR5LmZpbmRGaXJzdFZpZGVvU2FtcGxlKHZpZGVvU2FtcGxlcyk7XFxuICAgICAgaXNGaXJzdFZpZGVvU2FtcGxlcyA9IHRydWU7XFxuICAgIH1cXG5cXG4gICAgaWYgKCF0aGlzLl9maXJzdEF1ZGlvU2FtcGxlICYmIGF1ZGlvU2FtcGxlcy5sZW5ndGgpIHtcXG4gICAgICB0aGlzLl9maXJzdEF1ZGlvU2FtcGxlID0gQ29tcGF0aWJpbGl0eS5maW5kRmlyc3RBdWRpb1NhbXBsZShhdWRpb1NhbXBsZXMpOyAvLyDlr7vmib5kdHPmnIDlsI/nmoTluKfkvZzkuLrpppbkuKrpn7PpopHluKdcXG4gICAgICBpc0ZpcnN0QXVkaW9TYW1wbGVzID0gdHJ1ZTtcXG4gICAgfVxcblxcbiAgICByZXR1cm4ge1xcbiAgICAgIGlzRmlyc3RWaWRlb1NhbXBsZXMsXFxuICAgICAgaXNGaXJzdEF1ZGlvU2FtcGxlc1xcbiAgICB9O1xcbiAgfVxcblxcbiAgLyoqXFxuICAgKiDlnKjmsqHmnIlyZWZTYW1wbGVEdXJhdGlvbueahOmXrumimOa1geS4re+8jFxcbiAgICovXFxuICBmaXhSZWZTYW1wbGVEdXJhdGlvbihtZXRhLCBzYW1wbGVzKSB7XFxuICAgIGNvbnN0IGlzVmlkZW8gPSBtZXRhLnR5cGUgPT09ICd2aWRlbyc7XFxuICAgIGNvbnN0IGFsbFNhbXBsZXNDb3VudCA9IGlzVmlkZW8gPyB0aGlzLmFsbFZpZGVvU2FtcGxlc0NvdW50IDogdGhpcy5hbGxBdWRpb1NhbXBsZXNDb3VudDtcXG4gICAgY29uc3QgZmlyc3REdHMgPSBpc1ZpZGVvID8gdGhpcy5fZmlyc3RWaWRlb1NhbXBsZS5kdHMgOiB0aGlzLl9maXJzdEF1ZGlvU2FtcGxlLmR0cztcXG4gICAgY29uc3QgZmlsbGVkU2FtcGxlc0NvdW50ID0gaXNWaWRlbyA/IHRoaXMuZmlsbGVkVmlkZW9TYW1wbGVzLmxlbmd0aCA6IHRoaXMuZmlsbGVkQXVkaW9TYW1wbGVzLmxlbmd0aDtcXG5cXG4gICAgaWYgKCFtZXRhLnJlZlNhbXBsZUR1cmF0aW9uIHx8IG1ldGEucmVmU2FtcGxlRHVyYXRpb24gPD0gMCB8fCBOdW1iZXIuaXNOYU4obWV0YS5yZWZTYW1wbGVEdXJhdGlvbikpIHtcXG4gICAgICBpZiAoc2FtcGxlcy5sZW5ndGggPj0gMSkge1xcbiAgICAgICAgY29uc3QgbGFzdER0cyA9IHNhbXBsZXNbc2FtcGxlcy5sZW5ndGggLSAxXS5kdHM7XFxuXFxuICAgICAgICBtZXRhLnJlZlNhbXBsZUR1cmF0aW9uID0gTWF0aC5mbG9vcigobGFzdER0cyAtIGZpcnN0RHRzKSAvIChhbGxTYW1wbGVzQ291bnQgKyBmaWxsZWRTYW1wbGVzQ291bnQgLSAxKSk7IC8vIOWwhnJlZlNhbXBsZUR1cmF0aW9u6YeN572u5Li66K6h566X5ZCO55qE5bmz5Z2H5YC8XFxuICAgICAgfVxcbiAgICB9IGVsc2UgaWYgKG1ldGEucmVmU2FtcGxlRHVyYXRpb24pIHtcXG4gICAgICBpZiAoc2FtcGxlcy5sZW5ndGggPj0gMykge1xcbiAgICAgICAgY29uc3QgbGFzdER0cyA9IHNhbXBsZXNbc2FtcGxlcy5sZW5ndGggLSAxXS5kdHM7XFxuICAgICAgICBjb25zdCBmaXJzdER0cyA9IHNhbXBsZXNbMF0uZHRzO1xcbiAgICAgICAgY29uc3QgZHVyYXRpb25BdmcgPSAobGFzdER0cyAtIGZpcnN0RHRzKSAvIHNhbXBsZXMubGVuZ3RoO1xcblxcbiAgICAgICAgbWV0YS5yZWZTYW1wbGVEdXJhdGlvbiA9IE1hdGguYWJzKG1ldGEucmVmU2FtcGxlRHVyYXRpb24gLSBkdXJhdGlvbkF2ZykgPD0gbWV0YS5yZWZTYW1wbGVEdXJhdGlvbiA/IG1ldGEucmVmU2FtcGxlRHVyYXRpb24gOiBkdXJhdGlvbkF2ZzsgLy8g5bCGcmVmU2FtcGxlRHVyYXRpb27ph43nva7kuLrorqHnrpflkI7nmoTlubPlnYflgLxcXG4gICAgICB9XFxuICAgIH1cXG4gIH1cXG5cXG4gIC8qKlxcbiAgICog6K6w5b2V5oiq5q2i55uu5YmN5LiA5YWx5pKt5pS+5LqG5aSa5bCR5binXFxuICAgKi9cXG4gIHJlY29yZFNhbXBsZXNDb3VudCgpIHtcXG4gICAgY29uc3QgeyBhdWRpb1RyYWNrLCB2aWRlb1RyYWNrIH0gPSB0aGlzO1xcblxcbiAgICB0aGlzLmFsbEF1ZGlvU2FtcGxlc0NvdW50ICs9IGF1ZGlvVHJhY2suc2FtcGxlcy5sZW5ndGg7XFxuICAgIHRoaXMuYWxsVmlkZW9TYW1wbGVzQ291bnQgKz0gdmlkZW9UcmFjay5zYW1wbGVzLmxlbmd0aDtcXG4gIH1cXG5cXG4gIC8qKlxcbiAgICog5Y676Zmk5LiN5ZCI5rOV55qE5bin77yI5YCS6YCA44CB6YeN5aSN5bin77yJXFxuICAgKi9cXG4gIHJlbW92ZUludmFsaWRTYW1wbGVzKCkge1xcbiAgICBjb25zdCB7IF9maXJzdFZpZGVvU2FtcGxlLCBfZmlyc3RBdWRpb1NhbXBsZSB9ID0gdGhpcztcXG5cXG4gICAgdGhpcy5hdWRpb1RyYWNrLnNhbXBsZXMgPSB0aGlzLmF1ZGlvVHJhY2suc2FtcGxlcy5maWx0ZXIoc2FtcGxlID0+IHtcXG4gICAgICByZXR1cm4gc2FtcGxlLmR0cyA+PSBfZmlyc3RBdWRpb1NhbXBsZS5kdHMgJiYgKHRoaXMubGFzdEF1ZGlvRHRzID09PSB1bmRlZmluZWQgfHwgc2FtcGxlLmR0cyA+IHRoaXMubGFzdEF1ZGlvRHRzKTtcXG4gICAgfSk7XFxuXFxuICAgIHRoaXMudmlkZW9UcmFjay5zYW1wbGVzID0gdGhpcy52aWRlb1RyYWNrLnNhbXBsZXMuZmlsdGVyKHNhbXBsZSA9PiB7XFxuICAgICAgcmV0dXJuIHNhbXBsZS5kdHMgPj0gX2ZpcnN0VmlkZW9TYW1wbGUuZHRzICYmICh0aGlzLmxhc3RWaWRlb0R0cyA9PT0gdW5kZWZpbmVkIHx8IHNhbXBsZS5kdHMgPiB0aGlzLmxhc3RWaWRlb0R0cyk7XFxuICAgIH0pO1xcbiAgfVxcblxcbiAgc3RhdGljIHNvcnRBdWRpb1NhbXBsZXMoc2FtcGxlcykge1xcbiAgICBpZiAoc2FtcGxlcy5sZW5ndGggPT09IDEpIHtcXG4gICAgICByZXR1cm4gc2FtcGxlcztcXG4gICAgfVxcblxcbiAgICByZXR1cm4gc2FtcGxlcy5zb3J0KChhLCBiKSA9PiB7XFxuICAgICAgcmV0dXJuIGEuZHRzIC0gYi5kdHM7XFxuICAgIH0pO1xcbiAgfVxcblxcbiAgLyoqXFxuICAgKiDlr7vmib5kdHPmnIDlsI/nmoRzYW1wbGVcXG4gICAqIEBwYXJhbSBzYW1wbGVzXFxuICAgKi9cXG4gIHN0YXRpYyBmaW5kRmlyc3RBdWRpb1NhbXBsZShzYW1wbGVzKSB7XFxuICAgIGlmICghc2FtcGxlcyB8fCBzYW1wbGVzLmxlbmd0aCA9PT0gMCkge1xcbiAgICAgIHJldHVybiBudWxsO1xcbiAgICB9XFxuXFxuICAgIHJldHVybiBDb21wYXRpYmlsaXR5LnNvcnRBdWRpb1NhbXBsZXMoc2FtcGxlcylbMF07XFxuICB9XFxuXFxuICBzdGF0aWMgZmluZEZpcnN0VmlkZW9TYW1wbGUoc2FtcGxlcykge1xcbiAgICBpZiAoIXNhbXBsZXMubGVuZ3RoKSB7XFxuICAgICAgcmV0dXJuIG51bGw7XFxuICAgIH1cXG5cXG4gICAgY29uc3Qgc29ydGVkID0gc2FtcGxlcy5zb3J0KChhLCBiKSA9PiB7XFxuICAgICAgcmV0dXJuIGEuZHRzIC0gYi5kdHM7XFxuICAgIH0pO1xcblxcbiAgICBmb3IgKGxldCBpID0gMCwgbGVuID0gc29ydGVkLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XFxuICAgICAgaWYgKHNvcnRlZFtpXS5pc0tleWZyYW1lKSB7XFxuICAgICAgICByZXR1cm4gc29ydGVkW2ldO1xcbiAgICAgIH1cXG4gICAgfVxcbiAgfVxcblxcbiAgZ2V0IHRyYWNrcygpIHtcXG4gICAgcmV0dXJuIHRoaXMuX2NvbnRleHQuZ2V0SW5zdGFuY2UoJ1RSQUNLUycpO1xcbiAgfVxcblxcbiAgZ2V0IGF1ZGlvVHJhY2soKSB7XFxuICAgIGlmICh0aGlzLnRyYWNrcykge1xcbiAgICAgIHJldHVybiB0aGlzLnRyYWNrcy5hdWRpb1RyYWNrO1xcbiAgICB9XFxuICAgIHJldHVybiBudWxsO1xcbiAgfVxcblxcbiAgZ2V0IHZpZGVvVHJhY2soKSB7XFxuICAgIGlmICh0aGlzLnRyYWNrcykge1xcbiAgICAgIHJldHVybiB0aGlzLnRyYWNrcy52aWRlb1RyYWNrO1xcbiAgICB9XFxuICAgIHJldHVybiBudWxsO1xcbiAgfVxcbn1cXG5leHBvcnRzLmRlZmF1bHQgPSBDb21wYXRpYmlsaXR5O1xcblxcbi8vIyBzb3VyY2VVUkw9d2VicGFjazovL3hncGxheWVyLWZsdi8uLi94Z3BsYXllci1jb2RlYy9zcmMvY29tcGF0aWJpbGl0eS5qcz9cIil9LFwiLi4veGdwbGF5ZXItY29kZWMvc3JjL2gyNjQvbmFsdW5pdC9nb2xvbWIuanNcIjpcbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi4veGdwbGF5ZXItY29kZWMvc3JjL2gyNjQvbmFsdW5pdC9nb2xvbWIuanMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgbm8gc3RhdGljIGV4cG9ydHMgZm91bmQgKi9mdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXtcInVzZSBzdHJpY3RcIjtldmFsKFwiXFxuXFxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFxcXCJfX2VzTW9kdWxlXFxcIiwge1xcbiAgdmFsdWU6IHRydWVcXG59KTtcXG5jbGFzcyBHb2xvbWIge1xcbiAgY29uc3RydWN0b3IodWludDhhcnJheSkge1xcbiAgICB0aGlzLlRBRyA9ICdHb2xvbWInO1xcbiAgICB0aGlzLl9idWZmZXIgPSB1aW50OGFycmF5O1xcbiAgICB0aGlzLl9idWZmZXJJbmRleCA9IDA7XFxuICAgIHRoaXMuX3RvdGFsQnl0ZXMgPSB1aW50OGFycmF5LmJ5dGVMZW5ndGg7XFxuICAgIHRoaXMuX3RvdGFsQml0cyA9IHVpbnQ4YXJyYXkuYnl0ZUxlbmd0aCAqIDg7XFxuICAgIHRoaXMuX2N1cnJlbnRXb3JkID0gMDtcXG4gICAgdGhpcy5fY3VycmVudFdvcmRCaXRzTGVmdCA9IDA7XFxuICB9XFxuXFxuICBkZXN0cm95KCkge1xcbiAgICB0aGlzLl9idWZmZXIgPSBudWxsO1xcbiAgfVxcblxcbiAgX2ZpbGxDdXJyZW50V29yZCgpIHtcXG4gICAgbGV0IGJ1ZmZlckJ5dGVzTGVmdCA9IHRoaXMuX3RvdGFsQnl0ZXMgLSB0aGlzLl9idWZmZXJJbmRleDtcXG4gICAgaWYgKGJ1ZmZlckJ5dGVzTGVmdCA8PSAwKSB7XFxuICAgICAgLy8gVE9ETyDlvILluLjlpITnkIZcXG4gICAgfVxcblxcbiAgICBsZXQgYnl0ZXNSZWFkID0gTWF0aC5taW4oNCwgYnVmZmVyQnl0ZXNMZWZ0KTtcXG4gICAgbGV0IHdvcmQgPSBuZXcgVWludDhBcnJheSg0KTtcXG4gICAgd29yZC5zZXQodGhpcy5fYnVmZmVyLnN1YmFycmF5KHRoaXMuX2J1ZmZlckluZGV4LCB0aGlzLl9idWZmZXJJbmRleCArIGJ5dGVzUmVhZCkpO1xcbiAgICB0aGlzLl9jdXJyZW50V29yZCA9IG5ldyBEYXRhVmlldyh3b3JkLmJ1ZmZlcikuZ2V0VWludDMyKDAsIGZhbHNlKTtcXG5cXG4gICAgdGhpcy5fYnVmZmVySW5kZXggKz0gYnl0ZXNSZWFkO1xcbiAgICB0aGlzLl9jdXJyZW50V29yZEJpdHNMZWZ0ID0gYnl0ZXNSZWFkICogODtcXG4gIH1cXG5cXG4gIHJlYWRCaXRzKGJpdHMpIHtcXG4gICAgaWYgKGJpdHMgPiAzMikge1xcbiAgICAgIC8vIFRPRE9cXG4gICAgfVxcblxcbiAgICBpZiAoYml0cyA8PSB0aGlzLl9jdXJyZW50V29yZEJpdHNMZWZ0KSB7XFxuICAgICAgbGV0IHJlc3VsdCA9IHRoaXMuX2N1cnJlbnRXb3JkID4+PiAzMiAtIGJpdHM7XFxuICAgICAgdGhpcy5fY3VycmVudFdvcmQgPDw9IGJpdHM7XFxuICAgICAgdGhpcy5fY3VycmVudFdvcmRCaXRzTGVmdCAtPSBiaXRzO1xcbiAgICAgIHJldHVybiByZXN1bHQ7XFxuICAgIH1cXG5cXG4gICAgbGV0IHJlc3VsdCA9IHRoaXMuX2N1cnJlbnRXb3JkQml0c0xlZnQgPyB0aGlzLl9jdXJyZW50V29yZCA6IDA7XFxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZVxcbiAgICByZXN1bHQgPj4+IDMyIC0gdGhpcy5fY3VycmVudFdvcmRCaXRzTGVmdDtcXG4gICAgbGV0IGJpdHNOZWVkTGVmdCA9IGJpdHMgLSB0aGlzLl9jdXJyZW50V29yZEJpdHNMZWZ0O1xcblxcbiAgICB0aGlzLl9maWxsQ3VycmVudFdvcmQoKTtcXG4gICAgbGV0IGJpdHNSZWFkTmV4dCA9IE1hdGgubWluKGJpdHNOZWVkTGVmdCwgdGhpcy5fY3VycmVudFdvcmRCaXRzTGVmdCk7XFxuXFxuICAgIGxldCByZXN1bHQyID0gdGhpcy5fY3VycmVudFdvcmQgPj4+IDMyIC0gYml0c1JlYWROZXh0O1xcbiAgICB0aGlzLl9jdXJyZW50V29yZCA8PD0gYml0c1JlYWROZXh0O1xcbiAgICB0aGlzLl9jdXJyZW50V29yZEJpdHNMZWZ0IC09IGJpdHNSZWFkTmV4dDtcXG5cXG4gICAgcmVzdWx0ID0gcmVzdWx0IDw8IGJpdHNSZWFkTmV4dCB8IHJlc3VsdDI7XFxuICAgIHJldHVybiByZXN1bHQ7XFxuICB9XFxuXFxuICByZWFkQm9vbCgpIHtcXG4gICAgcmV0dXJuIHRoaXMucmVhZEJpdHMoMSkgPT09IDE7XFxuICB9XFxuXFxuICByZWFkQnl0ZSgpIHtcXG4gICAgcmV0dXJuIHRoaXMucmVhZEJpdHMoOCk7XFxuICB9XFxuXFxuICBfc2tpcExlYWRpbmdaZXJvKCkge1xcbiAgICBsZXQgemVyb0NvdW50O1xcbiAgICBmb3IgKHplcm9Db3VudCA9IDA7IHplcm9Db3VudCA8IHRoaXMuX2N1cnJlbnRXb3JkQml0c0xlZnQ7IHplcm9Db3VudCsrKSB7XFxuICAgICAgaWYgKCh0aGlzLl9jdXJyZW50V29yZCAmIDB4ODAwMDAwMDAgPj4+IHplcm9Db3VudCkgIT09IDApIHtcXG4gICAgICAgIHRoaXMuX2N1cnJlbnRXb3JkIDw8PSB6ZXJvQ291bnQ7XFxuICAgICAgICB0aGlzLl9jdXJyZW50V29yZEJpdHNMZWZ0IC09IHplcm9Db3VudDtcXG4gICAgICAgIHJldHVybiB6ZXJvQ291bnQ7XFxuICAgICAgfVxcbiAgICB9XFxuICAgIHRoaXMuX2ZpbGxDdXJyZW50V29yZCgpO1xcbiAgICByZXR1cm4gemVyb0NvdW50ICsgdGhpcy5fc2tpcExlYWRpbmdaZXJvKCk7XFxuICB9XFxuXFxuICByZWFkVUVHKCkge1xcbiAgICAvLyB1bnNpZ25lZCBleHBvbmVudGlhbCBnb2xvbWJcXG4gICAgbGV0IGxlYWRpbmdaZXJvcyA9IHRoaXMuX3NraXBMZWFkaW5nWmVybygpO1xcbiAgICByZXR1cm4gdGhpcy5yZWFkQml0cyhsZWFkaW5nWmVyb3MgKyAxKSAtIDE7XFxuICB9XFxuXFxuICByZWFkU0VHKCkge1xcbiAgICAvLyBzaWduZWQgZXhwb25lbnRpYWwgZ29sb21iXFxuICAgIGxldCB2YWx1ZSA9IHRoaXMucmVhZFVFRygpO1xcbiAgICBpZiAodmFsdWUgJiAweDAxKSB7XFxuICAgICAgcmV0dXJuIHZhbHVlICsgMSA+Pj4gMTtcXG4gICAgfSBlbHNlIHtcXG4gICAgICByZXR1cm4gLTEgKiAodmFsdWUgPj4+IDEpO1xcbiAgICB9XFxuICB9XFxufVxcblxcbmV4cG9ydHMuZGVmYXVsdCA9IEdvbG9tYjtcXG5cXG4vLyMgc291cmNlVVJMPXdlYnBhY2s6Ly94Z3BsYXllci1mbHYvLi4veGdwbGF5ZXItY29kZWMvc3JjL2gyNjQvbmFsdW5pdC9nb2xvbWIuanM/XCIpfSxcIi4uL3hncGxheWVyLWNvZGVjL3NyYy9oMjY0L25hbHVuaXQvaW5kZXguanNcIjpcbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuLi94Z3BsYXllci1jb2RlYy9zcmMvaDI2NC9uYWx1bml0L2luZGV4LmpzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgbm8gc3RhdGljIGV4cG9ydHMgZm91bmQgKi9mdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXtcInVzZSBzdHJpY3RcIjtldmFsKCdcXG5cXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcXG4gIHZhbHVlOiB0cnVlXFxufSk7XFxuXFxudmFyIF9zcHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL3NwcyAqLyBcIi4uL3hncGxheWVyLWNvZGVjL3NyYy9oMjY0L25hbHVuaXQvc3BzLmpzXCIpO1xcblxcbnZhciBfc3BzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3Nwcyk7XFxuXFxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cXG5cXG5jbGFzcyBOYWx1bml0IHtcXG4gIHN0YXRpYyBnZXROYWx1bml0cyhidWZmZXIpIHtcXG4gICAgaWYgKGJ1ZmZlci5sZW5ndGggLSBidWZmZXIucG9zaXRpb24gPCA0KSB7XFxuICAgICAgcmV0dXJuIFtdO1xcbiAgICB9XFxuXFxuICAgIGxldCBidWYgPSBidWZmZXIuZGF0YXZpZXc7XFxuICAgIGxldCBwb3NpdGlvbiA9IGJ1ZmZlci5wb3NpdGlvbjtcXG4gICAgaWYgKGJ1Zi5nZXRJbnQzMihwb3NpdGlvbikgPT09IDEgfHwgYnVmLmdldEludDE2KHBvc2l0aW9uKSA9PT0gMCAmJiBidWYuZ2V0SW50OChwb3NpdGlvbiArIDIpID09PSAxKSB7XFxuICAgICAgcmV0dXJuIE5hbHVuaXQuZ2V0QW5uZXhiTmFscyhidWZmZXIpO1xcbiAgICB9IGVsc2Uge1xcbiAgICAgIHJldHVybiBOYWx1bml0LmdldEF2Y2NOYWxzKGJ1ZmZlcik7XFxuICAgIH1cXG4gIH1cXG5cXG4gIHN0YXRpYyBnZXRBbm5leGJOYWxzKGJ1ZmZlcikge1xcbiAgICBsZXQgbmFscyA9IFtdO1xcbiAgICBsZXQgcG9zaXRpb24gPSBOYWx1bml0LmdldEhlYWRlclBvc2l0aW9uQW5uZXhCKGJ1ZmZlcik7XFxuICAgIGxldCBzdGFydCA9IHBvc2l0aW9uLnBvcztcXG4gICAgbGV0IGVuZCA9IHN0YXJ0O1xcbiAgICB3aGlsZSAoc3RhcnQgPCBidWZmZXIubGVuZ3RoIC0gNCkge1xcbiAgICAgIGxldCBoZWFkZXIgPSBidWZmZXIuYnVmZmVyLnNsaWNlKHN0YXJ0LCBzdGFydCArIHBvc2l0aW9uLmhlYWRlckxlbmd0aCk7XFxuICAgICAgaWYgKHBvc2l0aW9uLnBvcyA9PT0gYnVmZmVyLnBvc2l0aW9uKSB7XFxuICAgICAgICBidWZmZXIuc2tpcChwb3NpdGlvbi5oZWFkZXJMZW5ndGgpO1xcbiAgICAgIH1cXG4gICAgICBwb3NpdGlvbiA9IE5hbHVuaXQuZ2V0SGVhZGVyUG9zaXRpb25Bbm5leEIoYnVmZmVyKTtcXG4gICAgICBlbmQgPSBwb3NpdGlvbi5wb3M7XFxuICAgICAgbGV0IGJvZHkgPSBuZXcgVWludDhBcnJheShidWZmZXIuYnVmZmVyLnNsaWNlKHN0YXJ0ICsgaGVhZGVyLmJ5dGVMZW5ndGgsIGVuZCkpO1xcbiAgICAgIGxldCB1bml0ID0geyBoZWFkZXIsIGJvZHkgfTtcXG4gICAgICBOYWx1bml0LmFuYWx5c2VOYWwodW5pdCk7XFxuICAgICAgbmFscy5wdXNoKHVuaXQpO1xcbiAgICAgIGJ1ZmZlci5za2lwKGVuZCAtIGJ1ZmZlci5wb3NpdGlvbik7XFxuICAgICAgc3RhcnQgPSBlbmQ7XFxuICAgIH1cXG4gICAgcmV0dXJuIG5hbHM7XFxuICB9XFxuXFxuICBzdGF0aWMgZ2V0QXZjY05hbHMoYnVmZmVyKSB7XFxuICAgIGxldCBuYWxzID0gW107XFxuICAgIHdoaWxlIChidWZmZXIucG9zaXRpb24gPCBidWZmZXIubGVuZ3RoIC0gNCkge1xcbiAgICAgIGxldCBsZW5ndGggPSBidWZmZXIuZGF0YXZpZXcuZ2V0SW50MzIoYnVmZmVyLnBvc2l0aW9uKTtcXG4gICAgICBpZiAoYnVmZmVyLmxlbmd0aCAtIGJ1ZmZlci5wb3NpdGlvbiA+PSBsZW5ndGgpIHtcXG4gICAgICAgIGxldCBoZWFkZXIgPSBidWZmZXIuYnVmZmVyLnNsaWNlKGJ1ZmZlci5wb3NpdGlvbiwgYnVmZmVyLnBvc2l0aW9uICsgNCk7XFxuICAgICAgICBidWZmZXIuc2tpcCg0KTtcXG4gICAgICAgIGxldCBib2R5ID0gYnVmZmVyLmJ1ZmZlci5zbGljZShidWZmZXIucG9zaXRpb24sIGJ1ZmZlci5wb3NpdGlvbiArIGxlbmd0aCk7XFxuICAgICAgICBidWZmZXIuc2tpcChsZW5ndGgpO1xcbiAgICAgICAgbGV0IHVuaXQgPSB7IGhlYWRlciwgYm9keSB9O1xcbiAgICAgICAgTmFsdW5pdC5hbmFseXNlTmFsKHVuaXQpO1xcbiAgICAgICAgbmFscy5wdXNoKHVuaXQpO1xcbiAgICAgIH0gZWxzZSB7XFxuICAgICAgICBicmVhaztcXG4gICAgICB9XFxuICAgIH1cXG4gICAgcmV0dXJuIG5hbHM7XFxuICB9XFxuXFxuICBzdGF0aWMgYW5hbHlzZU5hbCh1bml0KSB7XFxuICAgIGxldCB0eXBlID0gdW5pdC5ib2R5WzBdICYgMHgxZjtcXG4gICAgc3dpdGNoICh0eXBlKSB7XFxuICAgICAgY2FzZSAxOlxcbiAgICAgICAgLy8gTkRSXFxuICAgICAgICB1bml0Lm5kciA9IHRydWU7XFxuICAgICAgICBicmVhaztcXG4gICAgICBjYXNlIDU6XFxuICAgICAgICAvLyBJRFJcXG4gICAgICAgIHVuaXQuaWRyID0gdHJ1ZTtcXG4gICAgICAgIGJyZWFrO1xcbiAgICAgIGNhc2UgNjpcXG4gICAgICAgIC8vIFNFSVxcbiAgICAgICAgYnJlYWs7XFxuICAgICAgY2FzZSA3OlxcbiAgICAgICAgLy8gU1BTXFxuICAgICAgICB1bml0LnNwcyA9IF9zcHMyLmRlZmF1bHQucGFyc2VTUFModW5pdC5ib2R5KTtcXG4gICAgICAgIGJyZWFrO1xcbiAgICAgIGNhc2UgODpcXG4gICAgICAgIC8vIFBQU1xcbiAgICAgICAgdW5pdC5wcHMgPSB0cnVlO1xcbiAgICAgICAgYnJlYWs7XFxuICAgICAgY2FzZSA5OlxcbiAgICAgICAgLy8gQVVEXFxuICAgICAgICBicmVhaztcXG4gICAgICBkZWZhdWx0OlxcbiAgICAgICAgYnJlYWs7XFxuICAgIH1cXG4gIH1cXG5cXG4gIHN0YXRpYyBnZXRIZWFkZXJQb3NpdGlvbkFubmV4QihidWZmZXIpIHtcXG4gICAgLy8gc2VwZXJhdGVcXG4gICAgbGV0IHBvcyA9IGJ1ZmZlci5wb3NpdGlvbjtcXG4gICAgbGV0IGhlYWRlckxlbmd0aCA9IDA7XFxuICAgIHdoaWxlIChoZWFkZXJMZW5ndGggIT09IDMgJiYgaGVhZGVyTGVuZ3RoICE9PSA0ICYmIHBvcyA8IGJ1ZmZlci5sZW5ndGggLSA0KSB7XFxuICAgICAgaWYgKGJ1ZmZlci5kYXRhdmlldy5nZXRJbnQxNihwb3MpID09PSAwKSB7XFxuICAgICAgICBpZiAoYnVmZmVyLmRhdGF2aWV3LmdldEludDE2KHBvcyArIDIpID09PSAxKSB7XFxuICAgICAgICAgIC8vIDB4MDAwMDAxXFxuICAgICAgICAgIGhlYWRlckxlbmd0aCA9IDQ7XFxuICAgICAgICB9IGVsc2UgaWYgKGJ1ZmZlci5kYXRhdmlldy5nZXRJbnQ4KHBvcyArIDIpID09PSAxKSB7XFxuICAgICAgICAgIGhlYWRlckxlbmd0aCA9IDM7XFxuICAgICAgICB9IGVsc2Uge1xcbiAgICAgICAgICBwb3MrKztcXG4gICAgICAgIH1cXG4gICAgICB9IGVsc2Uge1xcbiAgICAgICAgcG9zKys7XFxuICAgICAgfVxcbiAgICB9XFxuXFxuICAgIGlmIChwb3MgPT09IGJ1ZmZlci5sZW5ndGggLSA0KSB7XFxuICAgICAgaWYgKGJ1ZmZlci5kYXRhdmlldy5nZXRJbnQxNihwb3MpID09PSAwKSB7XFxuICAgICAgICBpZiAoYnVmZmVyLmRhdGF2aWV3LmdldEludDE2KHBvcyArIDIpID09PSAxKSB7XFxuICAgICAgICAgIC8vIDB4MDAwMDAxXFxuICAgICAgICAgIGhlYWRlckxlbmd0aCA9IDQ7XFxuICAgICAgICB9XFxuICAgICAgfSBlbHNlIHtcXG4gICAgICAgIHBvcysrO1xcbiAgICAgICAgaWYgKGJ1ZmZlci5kYXRhdmlldy5nZXRJbnQxNihwb3MpID09PSAwICYmIGJ1ZmZlci5kYXRhdmlldy5nZXRJbnQ4KHBvcykgPT09IDEpIHtcXG4gICAgICAgICAgLy8gMHgwMDAwMDAxXFxuICAgICAgICAgIGhlYWRlckxlbmd0aCA9IDM7XFxuICAgICAgICB9IGVsc2Uge1xcbiAgICAgICAgICBwb3MgPSBidWZmZXIubGVuZ3RoO1xcbiAgICAgICAgfVxcbiAgICAgIH1cXG4gICAgfVxcbiAgICByZXR1cm4geyBwb3MsIGhlYWRlckxlbmd0aCB9O1xcbiAgfVxcblxcbiAgc3RhdGljIGdldEF2Y2Moc3BzLCBwcHMpIHtcXG4gICAgbGV0IHJldCA9IG5ldyBVaW50OEFycmF5KHNwcy5ieXRlTGVuZ3RoICsgcHBzLmJ5dGVMZW5ndGggKyAxMSk7XFxuICAgIHJldFswXSA9IDB4MDE7XFxuICAgIHJldFsxXSA9IHNwc1sxXTtcXG4gICAgcmV0WzJdID0gc3BzWzJdO1xcbiAgICByZXRbM10gPSBzcHNbM107XFxuICAgIHJldFs0XSA9IDI1NTtcXG4gICAgcmV0WzVdID0gMjI1O1xcblxcbiAgICBsZXQgb2Zmc2V0ID0gNjtcXG5cXG4gICAgcmV0LnNldChuZXcgVWludDhBcnJheShbc3BzLmJ5dGVMZW5ndGggPj4+IDggJiAweGZmLCBzcHMuYnl0ZUxlbmd0aCAmIDB4ZmZdKSwgb2Zmc2V0KTtcXG4gICAgb2Zmc2V0ICs9IDI7XFxuICAgIHJldC5zZXQoc3BzLCBvZmZzZXQpO1xcbiAgICBvZmZzZXQgKz0gc3BzLmJ5dGVMZW5ndGg7XFxuXFxuICAgIHJldFtvZmZzZXRdID0gMTtcXG4gICAgb2Zmc2V0Kys7XFxuXFxuICAgIHJldC5zZXQobmV3IFVpbnQ4QXJyYXkoW3Bwcy5ieXRlTGVuZ3RoID4+PiA4ICYgMHhmZiwgcHBzLmJ5dGVMZW5ndGggJiAweGZmXSksIG9mZnNldCk7XFxuICAgIG9mZnNldCArPSAyO1xcbiAgICByZXQuc2V0KHBwcywgb2Zmc2V0KTtcXG4gICAgcmV0dXJuIHJldDtcXG4gIH1cXG59XFxuXFxuZXhwb3J0cy5kZWZhdWx0ID0gTmFsdW5pdDtcXG5cXG4vLyMgc291cmNlVVJMPXdlYnBhY2s6Ly94Z3BsYXllci1mbHYvLi4veGdwbGF5ZXItY29kZWMvc3JjL2gyNjQvbmFsdW5pdC9pbmRleC5qcz8nKX0sXCIuLi94Z3BsYXllci1jb2RlYy9zcmMvaDI2NC9uYWx1bml0L3Nwcy5qc1wiOlxuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuLi94Z3BsYXllci1jb2RlYy9zcmMvaDI2NC9uYWx1bml0L3Nwcy5qcyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBubyBzdGF0aWMgZXhwb3J0cyBmb3VuZCAqL2Z1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pe1widXNlIHN0cmljdFwiO2V2YWwoXCJcXG5cXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXFxcIl9fZXNNb2R1bGVcXFwiLCB7XFxuICB2YWx1ZTogdHJ1ZVxcbn0pO1xcblxcbnZhciBfZ29sb21iID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9nb2xvbWIgKi8gXFxcIi4uL3hncGxheWVyLWNvZGVjL3NyYy9oMjY0L25hbHVuaXQvZ29sb21iLmpzXFxcIik7XFxuXFxudmFyIF9nb2xvbWIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZ29sb21iKTtcXG5cXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxcblxcbmNsYXNzIFNQU1BhcnNlciB7XFxuICBzdGF0aWMgX2Vic3AycmJzcCh1aW50OGFycmF5KSB7XFxuICAgIGxldCBzcmMgPSB1aW50OGFycmF5O1xcbiAgICBsZXQgc3JjTGVuZ3RoID0gc3JjLmJ5dGVMZW5ndGg7XFxuICAgIGxldCBkc3QgPSBuZXcgVWludDhBcnJheShzcmNMZW5ndGgpO1xcbiAgICBsZXQgZHN0SWR4ID0gMDtcXG5cXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzcmNMZW5ndGg7IGkrKykge1xcbiAgICAgIGlmIChpID49IDIpIHtcXG4gICAgICAgIGlmIChzcmNbaV0gPT09IDB4MDMgJiYgc3JjW2kgLSAxXSA9PT0gMHgwMCAmJiBzcmNbaSAtIDJdID09PSAweDAwKSB7XFxuICAgICAgICAgIGNvbnRpbnVlO1xcbiAgICAgICAgfVxcbiAgICAgIH1cXG4gICAgICBkc3RbZHN0SWR4XSA9IHNyY1tpXTtcXG4gICAgICBkc3RJZHgrKztcXG4gICAgfVxcblxcbiAgICByZXR1cm4gbmV3IFVpbnQ4QXJyYXkoZHN0LmJ1ZmZlciwgMCwgZHN0SWR4KTtcXG4gIH1cXG5cXG4gIHN0YXRpYyBwYXJzZVNQUyh1aW50OGFycmF5KSB7XFxuICAgIGxldCByYnNwID0gU1BTUGFyc2VyLl9lYnNwMnJic3AodWludDhhcnJheSk7XFxuICAgIGxldCBnYiA9IG5ldyBfZ29sb21iMi5kZWZhdWx0KHJic3ApO1xcblxcbiAgICBnYi5yZWFkQnl0ZSgpO1xcbiAgICBsZXQgcHJvZmlsZUlkYyA9IGdiLnJlYWRCeXRlKCk7XFxuICAgIGdiLnJlYWRCeXRlKCk7XFxuICAgIGxldCBsZXZlbElkYyA9IGdiLnJlYWRCeXRlKCk7XFxuICAgIGdiLnJlYWRVRUcoKTtcXG5cXG4gICAgbGV0IHByb2ZpbGVfc3RyaW5nID0gU1BTUGFyc2VyLmdldFByb2ZpbGVTdHJpbmcocHJvZmlsZUlkYyk7XFxuICAgIGxldCBsZXZlbF9zdHJpbmcgPSBTUFNQYXJzZXIuZ2V0TGV2ZWxTdHJpbmcobGV2ZWxJZGMpO1xcbiAgICBsZXQgY2hyb21hX2Zvcm1hdF9pZGMgPSAxO1xcbiAgICBsZXQgY2hyb21hX2Zvcm1hdCA9IDQyMDtcXG4gICAgbGV0IGNocm9tYV9mb3JtYXRfdGFibGUgPSBbMCwgNDIwLCA0MjIsIDQ0NF07XFxuICAgIGxldCBiaXRfZGVwdGggPSA4O1xcblxcbiAgICBpZiAocHJvZmlsZUlkYyA9PT0gMTAwIHx8IHByb2ZpbGVJZGMgPT09IDExMCB8fCBwcm9maWxlSWRjID09PSAxMjIgfHwgcHJvZmlsZUlkYyA9PT0gMjQ0IHx8IHByb2ZpbGVJZGMgPT09IDQ0IHx8IHByb2ZpbGVJZGMgPT09IDgzIHx8IHByb2ZpbGVJZGMgPT09IDg2IHx8IHByb2ZpbGVJZGMgPT09IDExOCB8fCBwcm9maWxlSWRjID09PSAxMjggfHwgcHJvZmlsZUlkYyA9PT0gMTM4IHx8IHByb2ZpbGVJZGMgPT09IDE0NCkge1xcbiAgICAgIGNocm9tYV9mb3JtYXRfaWRjID0gZ2IucmVhZFVFRygpO1xcbiAgICAgIGlmIChjaHJvbWFfZm9ybWF0X2lkYyA9PT0gMykge1xcbiAgICAgICAgZ2IucmVhZEJpdHMoMSk7XFxuICAgICAgfVxcbiAgICAgIGlmIChjaHJvbWFfZm9ybWF0X2lkYyA8PSAzKSB7XFxuICAgICAgICBjaHJvbWFfZm9ybWF0ID0gY2hyb21hX2Zvcm1hdF90YWJsZVtjaHJvbWFfZm9ybWF0X2lkY107XFxuICAgICAgfVxcblxcbiAgICAgIGJpdF9kZXB0aCA9IGdiLnJlYWRVRUcoKSArIDg7XFxuICAgICAgZ2IucmVhZFVFRygpO1xcbiAgICAgIGdiLnJlYWRCaXRzKDEpO1xcbiAgICAgIGlmIChnYi5yZWFkQm9vbCgpKSB7XFxuICAgICAgICBsZXQgc2NhbGluZ19saXN0X2NvdW50ID0gY2hyb21hX2Zvcm1hdF9pZGMgIT09IDMgPyA4IDogMTI7XFxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNjYWxpbmdfbGlzdF9jb3VudDsgaSsrKSB7XFxuICAgICAgICAgIGlmIChnYi5yZWFkQm9vbCgpKSB7XFxuICAgICAgICAgICAgaWYgKGkgPCA2KSB7XFxuICAgICAgICAgICAgICBTUFNQYXJzZXIuX3NraXBTY2FsaW5nTGlzdChnYiwgMTYpO1xcbiAgICAgICAgICAgIH0gZWxzZSB7XFxuICAgICAgICAgICAgICBTUFNQYXJzZXIuX3NraXBTY2FsaW5nTGlzdChnYiwgNjQpO1xcbiAgICAgICAgICAgIH1cXG4gICAgICAgICAgfVxcbiAgICAgICAgfVxcbiAgICAgIH1cXG4gICAgfVxcbiAgICBnYi5yZWFkVUVHKCk7XFxuICAgIGxldCBwaWNfb3JkZXJfY250X3R5cGUgPSBnYi5yZWFkVUVHKCk7XFxuICAgIGlmIChwaWNfb3JkZXJfY250X3R5cGUgPT09IDApIHtcXG4gICAgICBnYi5yZWFkVUVHKCk7XFxuICAgIH0gZWxzZSBpZiAocGljX29yZGVyX2NudF90eXBlID09PSAxKSB7XFxuICAgICAgZ2IucmVhZEJpdHMoMSk7XFxuICAgICAgZ2IucmVhZFNFRygpO1xcbiAgICAgIGdiLnJlYWRTRUcoKTtcXG4gICAgICBsZXQgbnVtX3JlZl9mcmFtZXNfaW5fcGljX29yZGVyX2NudF9jeWNsZSA9IGdiLnJlYWRVRUcoKTtcXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bV9yZWZfZnJhbWVzX2luX3BpY19vcmRlcl9jbnRfY3ljbGU7IGkrKykge1xcbiAgICAgICAgZ2IucmVhZFNFRygpO1xcbiAgICAgIH1cXG4gICAgfVxcbiAgICBnYi5yZWFkVUVHKCk7XFxuICAgIGdiLnJlYWRCaXRzKDEpO1xcblxcbiAgICBsZXQgcGljX3dpZHRoX2luX21ic19taW51czEgPSBnYi5yZWFkVUVHKCk7XFxuICAgIGxldCBwaWNfaGVpZ2h0X2luX21hcF91bml0c19taW51czEgPSBnYi5yZWFkVUVHKCk7XFxuXFxuICAgIGxldCBmcmFtZV9tYnNfb25seV9mbGFnID0gZ2IucmVhZEJpdHMoMSk7XFxuICAgIGlmIChmcmFtZV9tYnNfb25seV9mbGFnID09PSAwKSB7XFxuICAgICAgZ2IucmVhZEJpdHMoMSk7XFxuICAgIH1cXG4gICAgZ2IucmVhZEJpdHMoMSk7XFxuXFxuICAgIGxldCBmcmFtZV9jcm9wX2xlZnRfb2Zmc2V0ID0gMDtcXG4gICAgbGV0IGZyYW1lX2Nyb3BfcmlnaHRfb2Zmc2V0ID0gMDtcXG4gICAgbGV0IGZyYW1lX2Nyb3BfdG9wX29mZnNldCA9IDA7XFxuICAgIGxldCBmcmFtZV9jcm9wX2JvdHRvbV9vZmZzZXQgPSAwO1xcblxcbiAgICBsZXQgZnJhbWVfY3JvcHBpbmdfZmxhZyA9IGdiLnJlYWRCb29sKCk7XFxuICAgIGlmIChmcmFtZV9jcm9wcGluZ19mbGFnKSB7XFxuICAgICAgZnJhbWVfY3JvcF9sZWZ0X29mZnNldCA9IGdiLnJlYWRVRUcoKTtcXG4gICAgICBmcmFtZV9jcm9wX3JpZ2h0X29mZnNldCA9IGdiLnJlYWRVRUcoKTtcXG4gICAgICBmcmFtZV9jcm9wX3RvcF9vZmZzZXQgPSBnYi5yZWFkVUVHKCk7XFxuICAgICAgZnJhbWVfY3JvcF9ib3R0b21fb2Zmc2V0ID0gZ2IucmVhZFVFRygpO1xcbiAgICB9XFxuXFxuICAgIGxldCBwYXJfd2lkdGggPSAxLFxcbiAgICAgICAgcGFyX2hlaWdodCA9IDE7XFxuICAgIGxldCBmcHMgPSAwLFxcbiAgICAgICAgZnBzX2ZpeGVkID0gdHJ1ZSxcXG4gICAgICAgIGZwc19udW0gPSAwLFxcbiAgICAgICAgZnBzX2RlbiA9IDA7XFxuXFxuICAgIGxldCB2dWlfcGFyYW1ldGVyc19wcmVzZW50X2ZsYWcgPSBnYi5yZWFkQm9vbCgpO1xcbiAgICBpZiAodnVpX3BhcmFtZXRlcnNfcHJlc2VudF9mbGFnKSB7XFxuICAgICAgaWYgKGdiLnJlYWRCb29sKCkpIHtcXG4gICAgICAgIC8vIGFzcGVjdF9yYXRpb19pbmZvX3ByZXNlbnRfZmxhZ1xcbiAgICAgICAgbGV0IGFzcGVjdF9yYXRpb19pZGMgPSBnYi5yZWFkQnl0ZSgpO1xcbiAgICAgICAgbGV0IHBhcl93X3RhYmxlID0gWzEsIDEyLCAxMCwgMTYsIDQwLCAyNCwgMjAsIDMyLCA4MCwgMTgsIDE1LCA2NCwgMTYwLCA0LCAzLCAyXTtcXG4gICAgICAgIGxldCBwYXJfaF90YWJsZSA9IFsxLCAxMSwgMTEsIDExLCAzMywgMTEsIDExLCAxMSwgMzMsIDExLCAxMSwgMzMsIDk5LCAzLCAyLCAxXTtcXG5cXG4gICAgICAgIGlmIChhc3BlY3RfcmF0aW9faWRjID4gMCAmJiBhc3BlY3RfcmF0aW9faWRjIDwgMTYpIHtcXG4gICAgICAgICAgcGFyX3dpZHRoID0gcGFyX3dfdGFibGVbYXNwZWN0X3JhdGlvX2lkYyAtIDFdO1xcbiAgICAgICAgICBwYXJfaGVpZ2h0ID0gcGFyX2hfdGFibGVbYXNwZWN0X3JhdGlvX2lkYyAtIDFdO1xcbiAgICAgICAgfSBlbHNlIGlmIChhc3BlY3RfcmF0aW9faWRjID09PSAyNTUpIHtcXG4gICAgICAgICAgcGFyX3dpZHRoID0gZ2IucmVhZEJ5dGUoKSA8PCA4IHwgZ2IucmVhZEJ5dGUoKTtcXG4gICAgICAgICAgcGFyX2hlaWdodCA9IGdiLnJlYWRCeXRlKCkgPDwgOCB8IGdiLnJlYWRCeXRlKCk7XFxuICAgICAgICB9XFxuICAgICAgfVxcblxcbiAgICAgIGlmIChnYi5yZWFkQm9vbCgpKSB7XFxuICAgICAgICBnYi5yZWFkQm9vbCgpO1xcbiAgICAgIH1cXG4gICAgICBpZiAoZ2IucmVhZEJvb2woKSkge1xcbiAgICAgICAgZ2IucmVhZEJpdHMoNCk7XFxuICAgICAgICBpZiAoZ2IucmVhZEJvb2woKSkge1xcbiAgICAgICAgICBnYi5yZWFkQml0cygyNCk7XFxuICAgICAgICB9XFxuICAgICAgfVxcbiAgICAgIGlmIChnYi5yZWFkQm9vbCgpKSB7XFxuICAgICAgICBnYi5yZWFkVUVHKCk7XFxuICAgICAgICBnYi5yZWFkVUVHKCk7XFxuICAgICAgfVxcbiAgICAgIGlmIChnYi5yZWFkQm9vbCgpKSB7XFxuICAgICAgICBsZXQgbnVtX3VuaXRzX2luX3RpY2sgPSBnYi5yZWFkQml0cygzMik7XFxuICAgICAgICBsZXQgdGltZV9zY2FsZSA9IGdiLnJlYWRCaXRzKDMyKTtcXG4gICAgICAgIGZwc19maXhlZCA9IGdiLnJlYWRCb29sKCk7XFxuXFxuICAgICAgICBmcHNfbnVtID0gdGltZV9zY2FsZTtcXG4gICAgICAgIGZwc19kZW4gPSBudW1fdW5pdHNfaW5fdGljayAqIDI7XFxuICAgICAgICBmcHMgPSBmcHNfbnVtIC8gZnBzX2RlbjtcXG4gICAgICB9XFxuICAgIH1cXG5cXG4gICAgbGV0IHBhclNjYWxlID0gMTtcXG4gICAgaWYgKHBhcl93aWR0aCAhPT0gMSB8fCBwYXJfaGVpZ2h0ICE9PSAxKSB7XFxuICAgICAgcGFyU2NhbGUgPSBwYXJfd2lkdGggLyBwYXJfaGVpZ2h0O1xcbiAgICB9XFxuXFxuICAgIGxldCBjcm9wX3VuaXRfeCA9IDAsXFxuICAgICAgICBjcm9wX3VuaXRfeSA9IDA7XFxuICAgIGlmIChjaHJvbWFfZm9ybWF0X2lkYyA9PT0gMCkge1xcbiAgICAgIGNyb3BfdW5pdF94ID0gMTtcXG4gICAgICBjcm9wX3VuaXRfeSA9IDIgLSBmcmFtZV9tYnNfb25seV9mbGFnO1xcbiAgICB9IGVsc2Uge1xcbiAgICAgIGxldCBzdWJfd2MgPSBjaHJvbWFfZm9ybWF0X2lkYyA9PT0gMyA/IDEgOiAyO1xcbiAgICAgIGxldCBzdWJfaGMgPSBjaHJvbWFfZm9ybWF0X2lkYyA9PT0gMSA/IDIgOiAxO1xcbiAgICAgIGNyb3BfdW5pdF94ID0gc3ViX3djO1xcbiAgICAgIGNyb3BfdW5pdF95ID0gc3ViX2hjICogKDIgLSBmcmFtZV9tYnNfb25seV9mbGFnKTtcXG4gICAgfVxcblxcbiAgICBsZXQgY29kZWNfd2lkdGggPSAocGljX3dpZHRoX2luX21ic19taW51czEgKyAxKSAqIDE2O1xcbiAgICBsZXQgY29kZWNfaGVpZ2h0ID0gKDIgLSBmcmFtZV9tYnNfb25seV9mbGFnKSAqICgocGljX2hlaWdodF9pbl9tYXBfdW5pdHNfbWludXMxICsgMSkgKiAxNik7XFxuXFxuICAgIGNvZGVjX3dpZHRoIC09IChmcmFtZV9jcm9wX2xlZnRfb2Zmc2V0ICsgZnJhbWVfY3JvcF9yaWdodF9vZmZzZXQpICogY3JvcF91bml0X3g7XFxuICAgIGNvZGVjX2hlaWdodCAtPSAoZnJhbWVfY3JvcF90b3Bfb2Zmc2V0ICsgZnJhbWVfY3JvcF9ib3R0b21fb2Zmc2V0KSAqIGNyb3BfdW5pdF95O1xcblxcbiAgICBsZXQgcHJlc2VudF93aWR0aCA9IE1hdGguY2VpbChjb2RlY193aWR0aCAqIHBhclNjYWxlKTtcXG5cXG4gICAgZ2IuZGVzdHJveSgpO1xcbiAgICBnYiA9IG51bGw7XFxuXFxuICAgIHJldHVybiB7XFxuICAgICAgcHJvZmlsZV9zdHJpbmc6IHByb2ZpbGVfc3RyaW5nLFxcbiAgICAgIGxldmVsX3N0cmluZzogbGV2ZWxfc3RyaW5nLFxcbiAgICAgIGJpdF9kZXB0aDogYml0X2RlcHRoLFxcbiAgICAgIGNocm9tYV9mb3JtYXQ6IGNocm9tYV9mb3JtYXQsXFxuICAgICAgY2hyb21hX2Zvcm1hdF9zdHJpbmc6IFNQU1BhcnNlci5nZXRDaHJvbWFGb3JtYXRTdHJpbmcoY2hyb21hX2Zvcm1hdCksXFxuXFxuICAgICAgZnJhbWVfcmF0ZToge1xcbiAgICAgICAgZml4ZWQ6IGZwc19maXhlZCxcXG4gICAgICAgIGZwczogZnBzLFxcbiAgICAgICAgZnBzX2RlbjogZnBzX2RlbixcXG4gICAgICAgIGZwc19udW06IGZwc19udW1cXG4gICAgICB9LFxcblxcbiAgICAgIHBhcl9yYXRpbzoge1xcbiAgICAgICAgd2lkdGg6IHBhcl93aWR0aCxcXG4gICAgICAgIGhlaWdodDogcGFyX2hlaWdodFxcbiAgICAgIH0sXFxuXFxuICAgICAgY29kZWNfc2l6ZToge1xcbiAgICAgICAgd2lkdGg6IGNvZGVjX3dpZHRoLFxcbiAgICAgICAgaGVpZ2h0OiBjb2RlY19oZWlnaHRcXG4gICAgICB9LFxcblxcbiAgICAgIHByZXNlbnRfc2l6ZToge1xcbiAgICAgICAgd2lkdGg6IHByZXNlbnRfd2lkdGgsXFxuICAgICAgICBoZWlnaHQ6IGNvZGVjX2hlaWdodFxcbiAgICAgIH1cXG4gICAgfTtcXG4gIH1cXG5cXG4gIHN0YXRpYyBfc2tpcFNjYWxpbmdMaXN0KGdiLCBjb3VudCkge1xcbiAgICBsZXQgbGFzdF9zY2FsZSA9IDgsXFxuICAgICAgICBuZXh0X3NjYWxlID0gODtcXG4gICAgbGV0IGRlbHRhX3NjYWxlID0gMDtcXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb3VudDsgaSsrKSB7XFxuICAgICAgaWYgKG5leHRfc2NhbGUgIT09IDApIHtcXG4gICAgICAgIGRlbHRhX3NjYWxlID0gZ2IucmVhZFNFRygpO1xcbiAgICAgICAgbmV4dF9zY2FsZSA9IChsYXN0X3NjYWxlICsgZGVsdGFfc2NhbGUgKyAyNTYpICUgMjU2O1xcbiAgICAgIH1cXG4gICAgICBsYXN0X3NjYWxlID0gbmV4dF9zY2FsZSA9PT0gMCA/IGxhc3Rfc2NhbGUgOiBuZXh0X3NjYWxlO1xcbiAgICB9XFxuICB9XFxuXFxuICBzdGF0aWMgZ2V0UHJvZmlsZVN0cmluZyhwcm9maWxlSWRjKSB7XFxuICAgIHN3aXRjaCAocHJvZmlsZUlkYykge1xcbiAgICAgIGNhc2UgNjY6XFxuICAgICAgICByZXR1cm4gJ0Jhc2VsaW5lJztcXG4gICAgICBjYXNlIDc3OlxcbiAgICAgICAgcmV0dXJuICdNYWluJztcXG4gICAgICBjYXNlIDg4OlxcbiAgICAgICAgcmV0dXJuICdFeHRlbmRlZCc7XFxuICAgICAgY2FzZSAxMDA6XFxuICAgICAgICByZXR1cm4gJ0hpZ2gnO1xcbiAgICAgIGNhc2UgMTEwOlxcbiAgICAgICAgcmV0dXJuICdIaWdoMTAnO1xcbiAgICAgIGNhc2UgMTIyOlxcbiAgICAgICAgcmV0dXJuICdIaWdoNDIyJztcXG4gICAgICBjYXNlIDI0NDpcXG4gICAgICAgIHJldHVybiAnSGlnaDQ0NCc7XFxuICAgICAgZGVmYXVsdDpcXG4gICAgICAgIHJldHVybiAnVW5rbm93bic7XFxuICAgIH1cXG4gIH1cXG5cXG4gIHN0YXRpYyBnZXRMZXZlbFN0cmluZyhsZXZlbElkYykge1xcbiAgICByZXR1cm4gKGxldmVsSWRjIC8gMTApLnRvRml4ZWQoMSk7XFxuICB9XFxuXFxuICBzdGF0aWMgZ2V0Q2hyb21hRm9ybWF0U3RyaW5nKGNocm9tYSkge1xcbiAgICBzd2l0Y2ggKGNocm9tYSkge1xcbiAgICAgIGNhc2UgNDIwOlxcbiAgICAgICAgcmV0dXJuICc0OjI6MCc7XFxuICAgICAgY2FzZSA0MjI6XFxuICAgICAgICByZXR1cm4gJzQ6MjoyJztcXG4gICAgICBjYXNlIDQ0NDpcXG4gICAgICAgIHJldHVybiAnNDo0OjQnO1xcbiAgICAgIGRlZmF1bHQ6XFxuICAgICAgICByZXR1cm4gJ1Vua25vd24nO1xcbiAgICB9XFxuICB9XFxuXFxuICBzdGF0aWMgdG9WaWRlb01ldGEoc3BzQ29uZmlnKSB7XFxuICAgIGxldCBtZXRhID0ge307XFxuICAgIGlmIChzcHNDb25maWcgJiYgc3BzQ29uZmlnLmNvZGVjX3NpemUpIHtcXG4gICAgICBtZXRhLmNvZGVjV2lkdGggPSBzcHNDb25maWcuY29kZWNfc2l6ZS53aWR0aDtcXG4gICAgICBtZXRhLmNvZGVjSGVpZ2h0ID0gc3BzQ29uZmlnLmNvZGVjX3NpemUuaGVpZ2h0O1xcbiAgICAgIG1ldGEucHJlc2VudFdpZHRoID0gc3BzQ29uZmlnLnByZXNlbnRfc2l6ZS53aWR0aDtcXG4gICAgICBtZXRhLnByZXNlbnRIZWlnaHQgPSBzcHNDb25maWcucHJlc2VudF9zaXplLmhlaWdodDtcXG4gICAgfVxcblxcbiAgICBtZXRhLnByb2ZpbGUgPSBzcHNDb25maWcucHJvZmlsZV9zdHJpbmc7XFxuICAgIG1ldGEubGV2ZWwgPSBzcHNDb25maWcubGV2ZWxfc3RyaW5nO1xcbiAgICBtZXRhLmJpdERlcHRoID0gc3BzQ29uZmlnLmJpdF9kZXB0aDtcXG4gICAgbWV0YS5jaHJvbWFGb3JtYXQgPSBzcHNDb25maWcuY2hyb21hX2Zvcm1hdDtcXG5cXG4gICAgbWV0YS5wYXJSYXRpbyA9IHtcXG4gICAgICB3aWR0aDogc3BzQ29uZmlnLnBhcl9yYXRpby53aWR0aCxcXG4gICAgICBoZWlnaHQ6IHNwc0NvbmZpZy5wYXJfcmF0aW8uaGVpZ2h0XFxuICAgIH07XFxuXFxuICAgIG1ldGEuZnJhbWVSYXRlID0gc3BzQ29uZmlnLmZyYW1lX3JhdGU7XFxuXFxuICAgIGxldCBmcHNEZW4gPSBtZXRhLmZyYW1lUmF0ZS5mcHNfZGVuO1xcbiAgICBsZXQgZnBzTnVtID0gbWV0YS5mcmFtZVJhdGUuZnBzX251bTtcXG4gICAgbWV0YS5yZWZTYW1wbGVEdXJhdGlvbiA9IE1hdGguZmxvb3IobWV0YS50aW1lc2NhbGUgKiAoZnBzRGVuIC8gZnBzTnVtKSk7XFxuICB9XFxufSAvKiBlc2xpbnQtZGlzYWJsZSBjYW1lbGNhc2UgICovXFxuLyogZXNsaW50LWRpc2FibGUgb25lLXZhciAgKi9cXG5leHBvcnRzLmRlZmF1bHQgPSBTUFNQYXJzZXI7XFxuXFxuLy8jIHNvdXJjZVVSTD13ZWJwYWNrOi8veGdwbGF5ZXItZmx2Ly4uL3hncGxheWVyLWNvZGVjL3NyYy9oMjY0L25hbHVuaXQvc3BzLmpzP1wiKX0sXCIuLi94Z3BsYXllci1kZW11eC9pbmRleC5qc1wiOlxuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuLi94Z3BsYXllci1kZW11eC9pbmRleC5qcyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBubyBzdGF0aWMgZXhwb3J0cyBmb3VuZCAqL2Z1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pe1widXNlIHN0cmljdFwiO2V2YWwoJ1xcblxcbm1vZHVsZS5leHBvcnRzID0ge1xcbiAgLy8gSExTXFxuICBNM1U4UGFyc2VyOiBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL3NyYy9obHMvZGVtdXhlci9tM3U4cGFyc2VyICovIFwiLi4veGdwbGF5ZXItZGVtdXgvc3JjL2hscy9kZW11eGVyL20zdThwYXJzZXIuanNcIikuZGVmYXVsdCxcXG4gIFRzRGVtdXhlcjogX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9zcmMvaGxzL2RlbXV4ZXIvdHMgKi8gXCIuLi94Z3BsYXllci1kZW11eC9zcmMvaGxzL2RlbXV4ZXIvdHMuanNcIikuZGVmYXVsdCxcXG4gIFBsYXlsaXN0OiBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL3NyYy9obHMvcGxheWxpc3QgKi8gXCIuLi94Z3BsYXllci1kZW11eC9zcmMvaGxzL3BsYXlsaXN0LmpzXCIpLmRlZmF1bHQsXFxuICBGbHZEZW11eGVyOiBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL3NyYy9mbHYvaW5kZXggKi8gXCIuLi94Z3BsYXllci1kZW11eC9zcmMvZmx2L2luZGV4LmpzXCIpLmRlZmF1bHRcXG59O1xcblxcbi8vIyBzb3VyY2VVUkw9d2VicGFjazovL3hncGxheWVyLWZsdi8uLi94Z3BsYXllci1kZW11eC9pbmRleC5qcz8nKX0sXCIuLi94Z3BsYXllci1kZW11eC9zcmMvZmx2L2FtZi1wYXJzZXIuanNcIjpcbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4uL3hncGxheWVyLWRlbXV4L3NyYy9mbHYvYW1mLXBhcnNlci5qcyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgbm8gc3RhdGljIGV4cG9ydHMgZm91bmQgKi9mdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXtcInVzZSBzdHJpY3RcIjtldmFsKFwiXFxuXFxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFxcXCJfX2VzTW9kdWxlXFxcIiwge1xcbiAgdmFsdWU6IHRydWVcXG59KTtcXG5cXG52YXIgX3hncGxheWVyVXRpbHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISB4Z3BsYXllci11dGlscyAqLyBcXFwiLi4veGdwbGF5ZXItdXRpbHMvaW5kZXguanNcXFwiKTtcXG5cXG5jb25zdCBEQVRBX1RZUEVTID0ge1xcbiAgTlVNQkVSOiAwLFxcbiAgQk9PTEVBTjogMSxcXG4gIFNUUklORzogMixcXG4gIE9CSkVDVDogMyxcXG4gIE1JWF9BUlJBWTogOCxcXG4gIE9CSkVDVF9FTkQ6IDksXFxuICBTVFJJQ1RfQVJSQVk6IDEwLFxcbiAgREFURTogMTEsXFxuICBMT05FX1NUUklORzogMTJcXG5cXG4gIC8qKlxcbiAgICogbWV0YeS/oeaBr+ino+aekFxcbiAgICovXFxufTtjbGFzcyBBTUZQYXJzZXIge1xcbiAgY29uc3RydWN0b3IoKSB7XFxuICAgIHRoaXMub2Zmc2V0ID0gMDtcXG4gICAgdGhpcy5yZWFkT2Zmc2V0ID0gdGhpcy5vZmZzZXQ7XFxuICB9XFxuXFxuICByZXNvbHZlKG1ldGEsIHNpemUpIHtcXG4gICAgaWYgKHNpemUgPCAzKSB7XFxuICAgICAgdGhyb3cgbmV3IEVycm9yKCdub3QgZW5vdWdoIGRhdGEgZm9yIG1ldGFpbmZvJyk7XFxuICAgIH1cXG4gICAgY29uc3QgbWV0YURhdGEgPSB7fTtcXG4gICAgY29uc3QgbmFtZSA9IHRoaXMucGFyc2VWYWx1ZShtZXRhKTtcXG4gICAgY29uc3QgdmFsdWUgPSB0aGlzLnBhcnNlVmFsdWUobWV0YSwgc2l6ZSAtIG5hbWUuYm9keVNpemUpO1xcbiAgICBtZXRhRGF0YVtuYW1lLmRhdGFdID0gdmFsdWUuZGF0YTtcXG5cXG4gICAgdGhpcy5yZXNldFN0YXR1cygpO1xcbiAgICByZXR1cm4gbWV0YURhdGE7XFxuICB9XFxuXFxuICByZXNldFN0YXR1cygpIHtcXG4gICAgdGhpcy5vZmZzZXQgPSAwO1xcbiAgICB0aGlzLnJlYWRPZmZzZXQgPSB0aGlzLm9mZnNldDtcXG4gIH1cXG5cXG4gIHBhcnNlU3RyaW5nKGJ1ZmZlcikge1xcbiAgICBjb25zdCBkdiA9IG5ldyBEYXRhVmlldyhidWZmZXIsIHRoaXMucmVhZE9mZnNldCk7XFxuICAgIGNvbnN0IHN0ckxlbiA9IGR2LmdldFVpbnQxNigwLCAhX3hncGxheWVyVXRpbHMuaXNMZSk7XFxuICAgIGxldCBzdHIgPSAnJztcXG4gICAgaWYgKHN0ckxlbiA+IDApIHtcXG4gICAgICBzdHIgPSBfeGdwbGF5ZXJVdGlscy5VVEY4LmRlY29kZShuZXcgVWludDhBcnJheShidWZmZXIsIHRoaXMucmVhZE9mZnNldCArIDIsIHN0ckxlbikpO1xcbiAgICB9IGVsc2Uge1xcbiAgICAgIHN0ciA9ICcnO1xcbiAgICB9XFxuICAgIGxldCBzaXplID0gc3RyTGVuICsgMjtcXG4gICAgdGhpcy5yZWFkT2Zmc2V0ICs9IHNpemU7XFxuICAgIHJldHVybiB7XFxuICAgICAgZGF0YTogc3RyLFxcbiAgICAgIGJvZHlTaXplOiBzdHJMZW4gKyAyXFxuICAgIH07XFxuICB9XFxuXFxuICBwYXJzZURhdGUoYnVmZmVyLCBzaXplKSB7XFxuICAgIGNvbnN0IGR2ID0gbmV3IERhdGFWaWV3KGJ1ZmZlciwgdGhpcy5yZWFkT2Zmc2V0LCBzaXplKTtcXG4gICAgbGV0IHRzID0gZHYuZ2V0RmxvYXQ2NCgwLCAhX3hncGxheWVyVXRpbHMuaXNMZSk7XFxuICAgIGNvbnN0IHRpbWVPZmZzZXQgPSBkdi5nZXRJbnQxNig4LCAhX3hncGxheWVyVXRpbHMuaXNMZSk7XFxuICAgIHRzICs9IHRpbWVPZmZzZXQgKiA2MCAqIDEwMDA7XFxuXFxuICAgIHRoaXMucmVhZE9mZnNldCArPSAxMDtcXG4gICAgcmV0dXJuIHtcXG4gICAgICBkYXRhOiBuZXcgRGF0ZSh0cyksXFxuICAgICAgYm9keVNpemU6IDEwXFxuICAgIH07XFxuICB9XFxuXFxuICBwYXJzZU9iamVjdChidWZmZXIsIHNpemUpIHtcXG4gICAgY29uc3QgbmFtZSA9IHRoaXMucGFyc2VTdHJpbmcoYnVmZmVyLCBzaXplKTtcXG4gICAgY29uc3QgdmFsdWUgPSB0aGlzLnBhcnNlVmFsdWUoYnVmZmVyLCBzaXplIC0gbmFtZS5ib2R5U2l6ZSk7XFxuICAgIHJldHVybiB7XFxuICAgICAgZGF0YToge1xcbiAgICAgICAgbmFtZTogbmFtZS5kYXRhLFxcbiAgICAgICAgdmFsdWU6IHZhbHVlLmRhdGFcXG4gICAgICB9LFxcbiAgICAgIGJvZHlTaXplOiBuYW1lLmJvZHlTaXplICsgdmFsdWUuYm9keVNpemUsXFxuICAgICAgaXNPYmpFbmQ6IHZhbHVlLmlzT2JqRW5kXFxuICAgIH07XFxuICB9XFxuXFxuICBwYXJzZUxvbmdTdHJpbmcoYnVmZmVyKSB7XFxuICAgIGNvbnN0IGR2ID0gbmV3IERhdGFWaWV3KGJ1ZmZlciwgdGhpcy5yZWFkT2Zmc2V0KTtcXG4gICAgY29uc3Qgc3RyTGVuID0gZHYuZ2V0VWludDMyKDAsICFfeGdwbGF5ZXJVdGlscy5pc0xlKTtcXG4gICAgbGV0IHN0ciA9ICcnO1xcbiAgICBpZiAoc3RyTGVuID4gMCkge1xcbiAgICAgIHN0ciA9IF94Z3BsYXllclV0aWxzLlVURjguZGVjb2RlKG5ldyBVaW50OEFycmF5KGJ1ZmZlciwgdGhpcy5yZWFkT2Zmc2V0ICsgMiwgc3RyTGVuKSk7XFxuICAgIH0gZWxzZSB7XFxuICAgICAgc3RyID0gJyc7XFxuICAgIH1cXG4gICAgLy8gY29uc3Qgc2l6ZSA9IHN0ckxlbiArIDQ7XFxuICAgIHRoaXMucmVhZE9mZnNldCArPSBzdHJMZW4gKyA0O1xcbiAgICByZXR1cm4ge1xcbiAgICAgIGRhdGE6IHN0cixcXG4gICAgICBib2R5U2l6ZTogc3RyTGVuICsgNFxcbiAgICB9O1xcbiAgfVxcblxcbiAgLyoqXFxuICAgKiDop6PmnpBtZXRh5Lit55qE5Y+Y6YePXFxuICAgKi9cXG4gIHBhcnNlVmFsdWUoZGF0YSwgc2l6ZSkge1xcbiAgICBsZXQgYnVmZmVyID0gbmV3IEFycmF5QnVmZmVyKCk7XFxuICAgIGlmIChkYXRhIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpIHtcXG4gICAgICBidWZmZXIgPSBkYXRhO1xcbiAgICB9IGVsc2Uge1xcbiAgICAgIGJ1ZmZlciA9IGRhdGEuYnVmZmVyO1xcbiAgICB9XFxuICAgIGNvbnN0IHtcXG4gICAgICBOVU1CRVIsXFxuICAgICAgQk9PTEVBTixcXG4gICAgICBTVFJJTkcsXFxuICAgICAgT0JKRUNULFxcbiAgICAgIE1JWF9BUlJBWSxcXG4gICAgICBPQkpFQ1RfRU5ELFxcbiAgICAgIFNUUklDVF9BUlJBWSxcXG4gICAgICBEQVRFLFxcbiAgICAgIExPTkVfU1RSSU5HXFxuICAgIH0gPSBEQVRBX1RZUEVTO1xcbiAgICBjb25zdCBkYXRhVmlldyA9IG5ldyBEYXRhVmlldyhidWZmZXIsIHRoaXMucmVhZE9mZnNldCwgc2l6ZSk7XFxuICAgIGxldCBpc09iakVuZCA9IGZhbHNlO1xcbiAgICBjb25zdCB0eXBlID0gZGF0YVZpZXcuZ2V0VWludDgoMCk7XFxuICAgIGxldCBvZmZzZXQgPSAxO1xcbiAgICB0aGlzLnJlYWRPZmZzZXQgKz0gMTtcXG4gICAgbGV0IHZhbHVlID0gbnVsbDtcXG5cXG4gICAgc3dpdGNoICh0eXBlKSB7XFxuICAgICAgY2FzZSBOVU1CRVI6XFxuICAgICAgICB7XFxuICAgICAgICAgIHZhbHVlID0gZGF0YVZpZXcuZ2V0RmxvYXQ2NCgxLCAhX3hncGxheWVyVXRpbHMuaXNMZSk7XFxuICAgICAgICAgIHRoaXMucmVhZE9mZnNldCArPSA4O1xcbiAgICAgICAgICBvZmZzZXQgKz0gODtcXG4gICAgICAgICAgYnJlYWs7XFxuICAgICAgICB9XFxuICAgICAgY2FzZSBCT09MRUFOOlxcbiAgICAgICAge1xcbiAgICAgICAgICBjb25zdCBib29sTnVtID0gZGF0YVZpZXcuZ2V0VWludDgoMSk7XFxuICAgICAgICAgIHZhbHVlID0gISFib29sTnVtO1xcbiAgICAgICAgICB0aGlzLnJlYWRPZmZzZXQgKz0gMTtcXG4gICAgICAgICAgb2Zmc2V0ICs9IDE7XFxuICAgICAgICAgIGJyZWFrO1xcbiAgICAgICAgfVxcbiAgICAgIGNhc2UgU1RSSU5HOlxcbiAgICAgICAge1xcbiAgICAgICAgICBjb25zdCBzdHIgPSB0aGlzLnBhcnNlU3RyaW5nKGJ1ZmZlcik7XFxuICAgICAgICAgIHZhbHVlID0gc3RyLmRhdGE7XFxuICAgICAgICAgIG9mZnNldCArPSBzdHIuYm9keVNpemU7XFxuICAgICAgICAgIGJyZWFrO1xcbiAgICAgICAgfVxcbiAgICAgIGNhc2UgT0JKRUNUOlxcbiAgICAgICAge1xcbiAgICAgICAgICB2YWx1ZSA9IHt9O1xcbiAgICAgICAgICBsZXQgb2JqRW5kU2l6ZSA9IDA7XFxuICAgICAgICAgIGlmIChkYXRhVmlldy5nZXRVaW50MzIoc2l6ZSAtIDQsICFfeGdwbGF5ZXJVdGlscy5pc0xlKSAmIDB4MDBGRkZGRkYpIHtcXG4gICAgICAgICAgICBvYmpFbmRTaXplID0gMztcXG4gICAgICAgICAgfVxcbiAgICAgICAgICAvLyB0aGlzLnJlYWRPZmZzZXQgKz0gb2Zmc2V0IC0gMTtcXG4gICAgICAgICAgd2hpbGUgKG9mZnNldCA8IHNpemUgLSA0KSB7XFxuICAgICAgICAgICAgY29uc3QgYW1mT2JqID0gdGhpcy5wYXJzZU9iamVjdChidWZmZXIsIHNpemUgLSBvZmZzZXQgLSBvYmpFbmRTaXplKTtcXG4gICAgICAgICAgICBpZiAoYW1mT2JqLmlzT2JqZWN0RW5kKSB7XFxuICAgICAgICAgICAgICBicmVhaztcXG4gICAgICAgICAgICB9XFxuICAgICAgICAgICAgdmFsdWVbYW1mT2JqLmRhdGEubmFtZV0gPSBhbWZPYmouZGF0YS52YWx1ZTtcXG4gICAgICAgICAgICBvZmZzZXQgKz0gYW1mT2JqLmJvZHlTaXplO1xcbiAgICAgICAgICB9XFxuICAgICAgICAgIGlmIChvZmZzZXQgPD0gc2l6ZSAtIDMpIHtcXG4gICAgICAgICAgICBjb25zdCBtYXJrID0gZGF0YVZpZXcuZ2V0VWludDMyKG9mZnNldCAtIDEsICFfeGdwbGF5ZXJVdGlscy5pc0xlKSAmIDB4MDBGRkZGRkY7XFxuICAgICAgICAgICAgaWYgKG1hcmsgPT09IDkpIHtcXG4gICAgICAgICAgICAgIHRoaXMucmVhZE9mZnNldCArPSAzO1xcbiAgICAgICAgICAgICAgb2Zmc2V0ICs9IDM7XFxuICAgICAgICAgICAgfVxcbiAgICAgICAgICB9XFxuICAgICAgICAgIGJyZWFrO1xcbiAgICAgICAgfVxcbiAgICAgIGNhc2UgTUlYX0FSUkFZOlxcbiAgICAgICAge1xcbiAgICAgICAgICB2YWx1ZSA9IHt9O1xcbiAgICAgICAgICBvZmZzZXQgKz0gNDtcXG4gICAgICAgICAgdGhpcy5yZWFkT2Zmc2V0ICs9IDQ7XFxuICAgICAgICAgIGxldCBvYmpFbmRTaXplID0gMDtcXG4gICAgICAgICAgaWYgKChkYXRhVmlldy5nZXRVaW50MzIoc2l6ZSAtIDQsICFfeGdwbGF5ZXJVdGlscy5pc0xlKSAmIDB4MDBGRkZGRkYpID09PSA5KSB7XFxuICAgICAgICAgICAgb2JqRW5kU2l6ZSA9IDM7XFxuICAgICAgICAgIH1cXG5cXG4gICAgICAgICAgd2hpbGUgKG9mZnNldCA8IHNpemUgLSA4KSB7XFxuICAgICAgICAgICAgY29uc3QgYW1mVmFyID0gdGhpcy5wYXJzZU9iamVjdChidWZmZXIsIHNpemUgLSBvZmZzZXQgLSBvYmpFbmRTaXplKTtcXG4gICAgICAgICAgICBpZiAoYW1mVmFyLmlzT2JqZWN0RW5kKSB7XFxuICAgICAgICAgICAgICBicmVhaztcXG4gICAgICAgICAgICB9XFxuICAgICAgICAgICAgdmFsdWVbYW1mVmFyLmRhdGEubmFtZV0gPSBhbWZWYXIuZGF0YS52YWx1ZTtcXG4gICAgICAgICAgICBvZmZzZXQgKz0gYW1mVmFyLmJvZHlTaXplO1xcbiAgICAgICAgICB9XFxuICAgICAgICAgIGlmIChvZmZzZXQgPD0gc2l6ZSAtIDMpIHtcXG4gICAgICAgICAgICBjb25zdCBtYXJrZXIgPSBkYXRhVmlldy5nZXRVaW50MzIob2Zmc2V0IC0gMSwgIV94Z3BsYXllclV0aWxzLmlzTGUpICYgMHgwMEZGRkZGRjtcXG4gICAgICAgICAgICBpZiAobWFya2VyID09PSA5KSB7XFxuICAgICAgICAgICAgICBvZmZzZXQgKz0gMztcXG4gICAgICAgICAgICAgIHRoaXMucmVhZE9mZnNldCArPSAzO1xcbiAgICAgICAgICAgIH1cXG4gICAgICAgICAgfVxcbiAgICAgICAgICBicmVhaztcXG4gICAgICAgIH1cXG5cXG4gICAgICBjYXNlIE9CSkVDVF9FTkQ6XFxuICAgICAgICB7XFxuICAgICAgICAgIHZhbHVlID0gbnVsbDtcXG4gICAgICAgICAgaXNPYmpFbmQgPSB0cnVlO1xcbiAgICAgICAgICBicmVhaztcXG4gICAgICAgIH1cXG5cXG4gICAgICBjYXNlIFNUUklDVF9BUlJBWTpcXG4gICAgICAgIHtcXG4gICAgICAgICAgdmFsdWUgPSBbXTtcXG4gICAgICAgICAgY29uc3QgYXJyTGVuZ3RoID0gZGF0YVZpZXcuZ2V0VWludDMyKDEsICFfeGdwbGF5ZXJVdGlscy5pc0xlKTtcXG4gICAgICAgICAgb2Zmc2V0ICs9IDQ7XFxuICAgICAgICAgIHRoaXMucmVhZE9mZnNldCArPSA0O1xcbiAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFyckxlbmd0aDsgaSsrKSB7XFxuICAgICAgICAgICAgY29uc3Qgc2NyaXB0ID0gdGhpcy5wYXJzZVZhbHVlKGJ1ZmZlciwgc2l6ZSAtIG9mZnNldCk7XFxuICAgICAgICAgICAgdmFsdWUucHVzaChzY3JpcHQuZGF0YSk7XFxuICAgICAgICAgICAgb2Zmc2V0ICs9IHNjcmlwdC5ib2R5U2l6ZTtcXG4gICAgICAgICAgfVxcbiAgICAgICAgICBicmVhaztcXG4gICAgICAgIH1cXG5cXG4gICAgICBjYXNlIERBVEU6XFxuICAgICAgICB7XFxuICAgICAgICAgIGNvbnN0IGRhdGUgPSB0aGlzLnBhcnNlRGF0ZShidWZmZXIsIHNpemUgLSAxKTtcXG4gICAgICAgICAgdmFsdWUgPSBkYXRlLmRhdGE7XFxuICAgICAgICAgIG9mZnNldCArPSBkYXRlLmJvZHlTaXplO1xcbiAgICAgICAgICBicmVhaztcXG4gICAgICAgIH1cXG5cXG4gICAgICBjYXNlIExPTkVfU1RSSU5HOlxcbiAgICAgICAge1xcbiAgICAgICAgICBjb25zdCBsb25nU3RyID0gdGhpcy5wYXJzZUxvbmdTdHJpbmcoYnVmZmVyLCBzaXplIC0gMSk7XFxuICAgICAgICAgIHZhbHVlID0gbG9uZ1N0ci5kYXRhO1xcbiAgICAgICAgICBvZmZzZXQgKz0gbG9uZ1N0ci5ib2R5U2l6ZTtcXG4gICAgICAgICAgYnJlYWs7XFxuICAgICAgICB9XFxuXFxuICAgICAgZGVmYXVsdDpcXG4gICAgICAgIHtcXG4gICAgICAgICAgb2Zmc2V0ID0gc2l6ZTtcXG4gICAgICAgIH1cXG4gICAgfVxcblxcbiAgICByZXR1cm4ge1xcbiAgICAgIGRhdGE6IHZhbHVlLFxcbiAgICAgIGJvZHlTaXplOiBvZmZzZXQsXFxuICAgICAgaXNPYmpFbmQ6IGlzT2JqRW5kXFxuICAgIH07XFxuICB9XFxufVxcbmV4cG9ydHMuZGVmYXVsdCA9IEFNRlBhcnNlcjtcXG5cXG4vLyMgc291cmNlVVJMPXdlYnBhY2s6Ly94Z3BsYXllci1mbHYvLi4veGdwbGF5ZXItZGVtdXgvc3JjL2Zsdi9hbWYtcGFyc2VyLmpzP1wiKX0sXCIuLi94Z3BsYXllci1kZW11eC9zcmMvZmx2L2luZGV4LmpzXCI6XG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi4veGdwbGF5ZXItZGVtdXgvc3JjL2Zsdi9pbmRleC5qcyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIG5vIHN0YXRpYyBleHBvcnRzIGZvdW5kICovZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7XCJ1c2Ugc3RyaWN0XCI7ZXZhbChcIlxcblxcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcXFwiX19lc01vZHVsZVxcXCIsIHtcXG4gIHZhbHVlOiB0cnVlXFxufSk7XFxuXFxudmFyIF94Z3BsYXllclV0aWxzID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgeGdwbGF5ZXItdXRpbHMgKi8gXFxcIi4uL3hncGxheWVyLXV0aWxzL2luZGV4LmpzXFxcIik7XFxuXFxudmFyIF94Z3BsYXllckNvZGVjID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgeGdwbGF5ZXItY29kZWMgKi8gXFxcIi4uL3hncGxheWVyLWNvZGVjL2luZGV4LmpzXFxcIik7XFxuXFxudmFyIF94Z3BsYXllckJ1ZmZlciA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIHhncGxheWVyLWJ1ZmZlciAqLyBcXFwiLi4veGdwbGF5ZXItYnVmZmVyL2luZGV4LmpzXFxcIik7XFxuXFxudmFyIF9hbWZQYXJzZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL2FtZi1wYXJzZXIgKi8gXFxcIi4uL3hncGxheWVyLWRlbXV4L3NyYy9mbHYvYW1mLXBhcnNlci5qc1xcXCIpO1xcblxcbnZhciBfYW1mUGFyc2VyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2FtZlBhcnNlcik7XFxuXFxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cXG5cXG5jb25zdCBERU1VWF9FVkVOVFMgPSBfeGdwbGF5ZXJVdGlscy5FVkVOVFMuREVNVVhfRVZFTlRTO1xcblxcbmNsYXNzIEZsdkRlbXV4ZXIge1xcbiAgY29uc3RydWN0b3IoKSB7XFxuICAgIHRoaXMuX2ZpcnN0RnJhZ21lbnRMb2FkZWQgPSBmYWxzZTtcXG4gICAgdGhpcy5fdHJhY2tOdW0gPSAwO1xcbiAgICB0aGlzLl9oYXNTY3JpcHQgPSBmYWxzZTtcXG4gIH1cXG5cXG4gIGluaXQoKSB7XFxuICAgIHRoaXMub24oREVNVVhfRVZFTlRTLkRFTVVYX1NUQVJULCB0aGlzLmRvUGFyc2VGbHYuYmluZCh0aGlzKSk7XFxuICB9XFxuXFxuICAvKipcXG4gICAqIGlmIHRoZSBmbHYgaGVhZCBpcyB2YWxpZFxcbiAgICogQHBhcmFtIGRhdGFcXG4gICAqIEByZXR1cm5zIHtib29sZWFufVxcbiAgICovXFxuICBzdGF0aWMgaXNGbHZGaWxlKGRhdGEpIHtcXG4gICAgcmV0dXJuICEoZGF0YVswXSAhPT0gMHg0NiB8fCBkYXRhWzFdICE9PSAweDRDIHx8IGRhdGFbMl0gIT09IDB4NTYgfHwgZGF0YVszXSAhPT0gMHgwMSk7XFxuICB9XFxuXFxuICAvKipcXG4gICAqIElmIHRoZSBzdHJlYW0gaGFzIGF1ZGlvIG9yIHZpZGVvLlxcbiAgICogQHBhcmFtIHtudW1iZXJ9IHN0cmVhbUZsYWcgLSBEYXRhIGZyb20gdGhlIHN0cmVhbSB3aGljaCBpcyBkZWZpbmUgd2hldGhlciB0aGUgYXVkaW8gLyB2aWRlbyB0cmFjayBpcyBleGlzdC5cXG4gICAqL1xcbiAgc3RhdGljIGdldFBsYXlUeXBlKHN0cmVhbUZsYWcpIHtcXG4gICAgY29uc3QgcmVzdWx0ID0ge1xcbiAgICAgIGhhc1ZpZGVvOiBmYWxzZSxcXG4gICAgICBoYXNBdWRpbzogZmFsc2VcXG4gICAgfTtcXG5cXG4gICAgaWYgKHN0cmVhbUZsYWcgJiAweDAxID4gMCkge1xcbiAgICAgIHJlc3VsdC5oYXNWaWRlbyA9IHRydWU7XFxuICAgIH1cXG5cXG4gICAgaWYgKHN0cmVhbUZsYWcgJiAweDA0ID4gMCkge1xcbiAgICAgIHJlc3VsdC5oYXNBdWRpbyA9IHRydWU7XFxuICAgIH1cXG5cXG4gICAgcmV0dXJuIHJlc3VsdDtcXG4gIH1cXG5cXG4gIGRvUGFyc2VGbHYoKSB7XFxuICAgIGlmICghdGhpcy5fZmlyc3RGcmFnbWVudExvYWRlZCkge1xcbiAgICAgIGlmICh0aGlzLmxvYWRlckJ1ZmZlci5sZW5ndGggPCAxMykge1xcbiAgICAgICAgcmV0dXJuO1xcbiAgICAgIH1cXG4gICAgICBjb25zdCBoZWFkZXIgPSB0aGlzLmxvYWRlckJ1ZmZlci5zaGlmdCgxMyk7XFxuICAgICAgdGhpcy5wYXJzZUZsdkhlYWRlcihoZWFkZXIpO1xcbiAgICAgIHRoaXMuZG9QYXJzZUZsdigpOyAvLyDpgJLlvZLosIPnlKjvvIznu6fnu63op6PmnpBmbHbmtYFcXG4gICAgfSBlbHNlIHtcXG4gICAgICBpZiAodGhpcy5sb2FkZXJCdWZmZXIubGVuZ3RoIDwgMTEpIHtcXG4gICAgICAgIHJldHVybjtcXG4gICAgICB9XFxuICAgICAgbGV0IGNodW5rO1xcbiAgICAgIGRvIHtcXG4gICAgICAgIGNodW5rID0gdGhpcy5fcGFyc2VGbHZUYWcoKTtcXG4gICAgICB9IHdoaWxlIChjaHVuayk7XFxuXFxuICAgICAgdGhpcy5lbWl0KERFTVVYX0VWRU5UUy5ERU1VWF9DT01QTEVURSk7XFxuICAgIH1cXG4gIH1cXG5cXG4gIHBhcnNlRmx2SGVhZGVyKGhlYWRlcikge1xcbiAgICBpZiAoIUZsdkRlbXV4ZXIuaXNGbHZGaWxlKGhlYWRlcikpIHtcXG4gICAgICB0aGlzLmVtaXQoREVNVVhfRVZFTlRTLkRFTVVYX0VSUk9SLCBuZXcgRXJyb3IoJ2ludmFsaWQgZmx2IGZpbGUnKSk7XFxuICAgICAgdGhpcy5kb1BhcnNlRmx2KCk7XFxuICAgIH0gZWxzZSB7XFxuICAgICAgdGhpcy5fZmlyc3RGcmFnbWVudExvYWRlZCA9IHRydWU7XFxuICAgICAgY29uc3QgcGxheVR5cGUgPSBGbHZEZW11eGVyLmdldFBsYXlUeXBlKGhlYWRlcls0XSk7XFxuXFxuICAgICAgaWYgKHBsYXlUeXBlLmhhc1ZpZGVvKSB7XFxuICAgICAgICB0aGlzLmluaXRWaWRlb1RyYWNrKCk7XFxuICAgICAgfVxcblxcbiAgICAgIGlmIChwbGF5VHlwZS5oYXNBdWRpbykge1xcbiAgICAgICAgdGhpcy5pbml0QXVkaW9UcmFjaygpO1xcbiAgICAgIH1cXG4gICAgfVxcbiAgICB0aGlzLmRvUGFyc2VGbHYoKTtcXG4gIH1cXG5cXG4gIC8qKlxcbiAgICogaW5pdCBkZWZhdWx0IHZpZGVvIHRyYWNrIGNvbmZpZ3NcXG4gICAqL1xcbiAgaW5pdFZpZGVvVHJhY2soKSB7XFxuICAgIHRoaXMuX3RyYWNrTnVtKys7XFxuICAgIGxldCB2aWRlb1RyYWNrID0gbmV3IF94Z3BsYXllckJ1ZmZlci5WaWRlb1RyYWNrKCk7XFxuICAgIHZpZGVvVHJhY2subWV0YSA9IG5ldyBfeGdwbGF5ZXJVdGlscy5WaWRlb1RyYWNrTWV0YSgpO1xcbiAgICB2aWRlb1RyYWNrLmlkID0gdmlkZW9UcmFjay5tZXRhLmlkID0gdGhpcy5fdHJhY2tOdW07XFxuXFxuICAgIHRoaXMudHJhY2tzLnZpZGVvVHJhY2sgPSB2aWRlb1RyYWNrO1xcbiAgfVxcblxcbiAgLyoqXFxuICAgKiBpbml0IGRlZmF1bHQgYXVkaW8gdHJhY2sgY29uZmlnc1xcbiAgICovXFxuICBpbml0QXVkaW9UcmFjaygpIHtcXG4gICAgdGhpcy5fdHJhY2tOdW0rKztcXG4gICAgbGV0IGF1ZGlvVHJhY2sgPSBuZXcgX3hncGxheWVyQnVmZmVyLkF1ZGlvVHJhY2soKTtcXG4gICAgYXVkaW9UcmFjay5tZXRhID0gbmV3IF94Z3BsYXllclV0aWxzLkF1ZGlvVHJhY2tNZXRhKCk7XFxuICAgIGF1ZGlvVHJhY2suaWQgPSBhdWRpb1RyYWNrLm1ldGEuaWQgPSB0aGlzLl90cmFja051bTtcXG5cXG4gICAgdGhpcy50cmFja3MuYXVkaW9UcmFjayA9IGF1ZGlvVHJhY2s7XFxuICB9XFxuXFxuICAvKipcXG4gICAqIFBhY2thZ2UgdGhlIGRhdGEgYXMgdGhlIGZvbGxvd2luZyBkYXRhIHN0cnVjdHVyZVxcbiAgICoge1xcbiAgICogICAgZGF0YTogVWludDhBcnJheS4gdGhlIFN0cmVhbSBkYXRhLlxcbiAgICogICAgaW5mbzogVGhlIGZpcnN0IGJ5dGUgaW5mbyBvZiB0aGUgVGFnLlxcbiAgICogICAgdGFnVHlwZTogOOOAgTnjgIExOFxcbiAgICogICAgdGltZVN0YW1wOiB0aGUgdGltZXN0ZW1wXFxuICAgKiB9XFxuICAgKi9cXG4gIF9wYXJzZUZsdlRhZygpIHtcXG4gICAgaWYgKHRoaXMubG9hZGVyQnVmZmVyLmxlbmd0aCA8IDExKSB7XFxuICAgICAgcmV0dXJuIG51bGw7XFxuICAgIH1cXG4gICAgbGV0IGNodW5rID0gdGhpcy5fcGFyc2VGbHZUYWdIZWFkZXIoKTtcXG4gICAgaWYgKGNodW5rKSB7XFxuICAgICAgdGhpcy5fcHJvY2Vzc0NodW5rKGNodW5rKTtcXG4gICAgfVxcbiAgICByZXR1cm4gY2h1bms7XFxuICB9XFxuXFxuICAvKipcXG4gICAqIFBhcnNlIHRoZSAxMSBieXRlIHRhZyBIZWFkZXJcXG4gICAqL1xcbiAgX3BhcnNlRmx2VGFnSGVhZGVyKCkge1xcbiAgICBsZXQgb2Zmc2V0ID0gMDtcXG4gICAgbGV0IGNodW5rID0ge307XFxuXFxuICAgIGxldCB0YWdUeXBlID0gdGhpcy5sb2FkZXJCdWZmZXIudG9JbnQob2Zmc2V0LCAxKTtcXG4gICAgb2Zmc2V0ICs9IDE7XFxuXFxuICAgIC8vIDIgYml0IEZNUyByZXNlcnZlZCwgMSBiaXQgZmlsdGVyZWQsIDUgYml0IHRhZyB0eXBlXFxuICAgIGNodW5rLmZpbHRlcmVkID0gKHRhZ1R5cGUgJiAzMikgPj4+IDU7XFxuICAgIGNodW5rLnRhZ1R5cGUgPSB0YWdUeXBlICYgMzE7XFxuXFxuICAgIC8vIDMgQnl0ZSBkYXRhc2l6ZVxcbiAgICBjaHVuay5kYXRhc2l6ZSA9IHRoaXMubG9hZGVyQnVmZmVyLnRvSW50KG9mZnNldCwgMyk7XFxuICAgIG9mZnNldCArPSAzO1xcblxcbiAgICBpZiAoY2h1bmsudGFnVHlwZSAhPT0gOCAmJiBjaHVuay50YWdUeXBlICE9PSA5ICYmIGNodW5rLnRhZ1R5cGUgIT09IDExICYmIGNodW5rLnRhZ1R5cGUgIT09IDE4IHx8IHRoaXMubG9hZGVyQnVmZmVyLnRvSW50KDgsIDMpICE9PSAwKSB7XFxuICAgICAgaWYgKHRoaXMubG9hZGVyQnVmZmVyICYmIHRoaXMubG9hZGVyQnVmZmVyLmxlbmd0aCA+IDApIHtcXG4gICAgICAgIHRoaXMubG9hZGVyQnVmZmVyLnNoaWZ0KDEpO1xcbiAgICAgIH1cXG4gICAgICB0aGlzLmxvZ2dlci53YXJuKHRoaXMuVEFHLCAndGFnVHlwZSAnICsgY2h1bmsudGFnVHlwZSk7XFxuICAgICAgcmV0dXJuIG51bGw7XFxuICAgIH1cXG5cXG4gICAgaWYgKHRoaXMubG9hZGVyQnVmZmVyLmxlbmd0aCA8IGNodW5rLmRhdGFzaXplICsgMTUpIHtcXG4gICAgICByZXR1cm4gbnVsbDtcXG4gICAgfVxcblxcbiAgICAvLyByZWFkIHRoZSBkYXRhLlxcbiAgICB0aGlzLmxvYWRlckJ1ZmZlci5zaGlmdCg0KTtcXG5cXG4gICAgLy8gMyBCeXRlIHRpbWVzdGFtcFxcbiAgICBsZXQgdGltZXN0YW1wID0gdGhpcy5sb2FkZXJCdWZmZXIudG9JbnQoMCwgMyk7XFxuICAgIHRoaXMubG9hZGVyQnVmZmVyLnNoaWZ0KDMpO1xcblxcbiAgICAvLyAxIEJ5dGUgdGltZXN0YW1wRXh0XFxuICAgIGxldCB0aW1lc3RhbXBFeHQgPSB0aGlzLmxvYWRlckJ1ZmZlci5zaGlmdCgxKVswXTtcXG4gICAgaWYgKHRpbWVzdGFtcEV4dCA+IDApIHtcXG4gICAgICB0aW1lc3RhbXAgKz0gdGltZXN0YW1wRXh0ICogMHgxMDAwMDAwO1xcbiAgICB9XFxuXFxuICAgIGNodW5rLmR0cyA9IHRpbWVzdGFtcDtcXG5cXG4gICAgLy8gc3RyZWFtSWRcXG4gICAgdGhpcy5sb2FkZXJCdWZmZXIuc2hpZnQoMyk7XFxuICAgIHJldHVybiBjaHVuaztcXG4gIH1cXG5cXG4gIF9wcm9jZXNzQ2h1bmsoY2h1bmspIHtcXG4gICAgc3dpdGNoIChjaHVuay50YWdUeXBlKSB7XFxuICAgICAgY2FzZSAxODpcXG4gICAgICAgIHRoaXMuX3BhcnNlU2NyaXB0RGF0YShjaHVuayk7XFxuICAgICAgICBicmVhaztcXG4gICAgICBjYXNlIDg6XFxuICAgICAgICB0aGlzLl9wYXJzZUFBQ0RhdGEoY2h1bmspO1xcbiAgICAgICAgYnJlYWs7XFxuICAgICAgY2FzZSA5OlxcbiAgICAgICAgdGhpcy5fcGFyc2VIZXZjRGF0YShjaHVuayk7XFxuICAgICAgICBicmVhaztcXG4gICAgICBjYXNlIDExOlxcbiAgICAgICAgLy8gZm9yIHNvbWUgQ0ROIHRoYXQgZGlkIG5vdCBwcm9jZXNzIHRoZSBjdXJyZWN0IFJUTVAgbWVzc2FnZXNcXG4gICAgICAgIHRoaXMubG9hZGVyQnVmZmVyLnNoaWZ0KDMpO1xcbiAgICAgICAgYnJlYWs7XFxuICAgICAgZGVmYXVsdDpcXG4gICAgICAgIHRoaXMubG9hZGVyQnVmZmVyLnNoaWZ0KDEpO1xcbiAgICB9XFxuICB9XFxuXFxuICAvKipcXG4gICAqIHBhcnNlIGZsdiBzY3JpcHQgZGF0YVxcbiAgICogQHBhcmFtIGNodW5rXFxuICAgKiBAcHJpdmF0ZVxcbiAgICovXFxuICBfcGFyc2VTY3JpcHREYXRhKGNodW5rKSB7XFxuICAgIGxldCBhdWRpb1RyYWNrID0gdGhpcy50cmFja3MuYXVkaW9UcmFjaztcXG4gICAgbGV0IHZpZGVvVHJhY2sgPSB0aGlzLnRyYWNrcy52aWRlb1RyYWNrO1xcblxcbiAgICBsZXQgZGF0YSA9IHRoaXMubG9hZGVyQnVmZmVyLnNoaWZ0KGNodW5rLmRhdGFzaXplKTtcXG5cXG4gICAgY29uc3QgaW5mbyA9IG5ldyBfYW1mUGFyc2VyMi5kZWZhdWx0KCkucmVzb2x2ZShkYXRhLCBkYXRhLmxlbmd0aCk7XFxuXFxuICAgIGNvbnN0IG9uTWV0YURhdGEgPSB0aGlzLl9jb250ZXh0Lm9uTWV0YURhdGEgPSBpbmZvID8gaW5mby5vbk1ldGFEYXRhIDogdW5kZWZpbmVkO1xcblxcbiAgICAvLyBmaWxsIG1lZGlhSW5mb1xcbiAgICB0aGlzLl9jb250ZXh0Lm1lZGlhSW5mby5kdXJhdGlvbiA9IG9uTWV0YURhdGEuZHVyYXRpb247XFxuICAgIHRoaXMuX2NvbnRleHQubWVkaWFJbmZvLmhhc1ZpZGVvID0gb25NZXRhRGF0YS5oYXNWaWRlbztcXG4gICAgdGhpcy5fY29udGV4dC5tZWRpYUluZm8uaHNhQXVkaW8gPSBvbk1ldGFEYXRhLmhhc0F1ZGlvO1xcblxcbiAgICBsZXQgdmFsaWRhdGUgPSB0aGlzLl9kYXRhc2l6ZVZhbGlkYXRvcihjaHVuay5kYXRhc2l6ZSk7XFxuICAgIGlmICh2YWxpZGF0ZSkge1xcbiAgICAgIHRoaXMuZW1pdChERU1VWF9FVkVOVFMuTUVESUFfSU5GTyk7XFxuICAgICAgdGhpcy5faGFzU2NyaXB0ID0gdHJ1ZTtcXG4gICAgfVxcblxcbiAgICAvLyBFZGl0IGRlZmF1bHQgbWV0YS5cXG4gICAgaWYgKGF1ZGlvVHJhY2sgJiYgIWF1ZGlvVHJhY2suaGFzU3BlY2lmaWNDb25maWcpIHtcXG4gICAgICBsZXQgbWV0YSA9IGF1ZGlvVHJhY2subWV0YTtcXG4gICAgICBpZiAob25NZXRhRGF0YS5hdWRpb3NhbXBsZXJhdGUpIHtcXG4gICAgICAgIG1ldGEuc2FtcGxlUmF0ZSA9IG9uTWV0YURhdGEuYXVkaW9zYW1wbGVyYXRlO1xcbiAgICAgIH1cXG5cXG4gICAgICBpZiAob25NZXRhRGF0YS5hdWRpb2NoYW5uZWxzKSB7XFxuICAgICAgICBtZXRhLmNoYW5uZWxDb3VudCA9IG9uTWV0YURhdGEuYXVkaW9jaGFubmVscztcXG4gICAgICB9XFxuXFxuICAgICAgc3dpdGNoIChvbk1ldGFEYXRhLmF1ZGlvc2FtcGxlcmF0ZSkge1xcbiAgICAgICAgY2FzZSA0NDEwMDpcXG4gICAgICAgICAgbWV0YS5zYW1wbGVSYXRlSW5kZXggPSA0O1xcbiAgICAgICAgICBicmVhaztcXG4gICAgICAgIGNhc2UgMjIwNTA6XFxuICAgICAgICAgIG1ldGEuc2FtcGxlUmF0ZUluZGV4ID0gNztcXG4gICAgICAgICAgYnJlYWs7XFxuICAgICAgICBjYXNlIDExMDI1OlxcbiAgICAgICAgICBtZXRhLnNhbXBsZVJhdGVJbmRleCA9IDEwO1xcbiAgICAgICAgICBicmVhaztcXG4gICAgICB9XFxuICAgIH1cXG4gICAgaWYgKHZpZGVvVHJhY2sgJiYgIXZpZGVvVHJhY2suaGFzU3BlY2lmaWNDb25maWcpIHtcXG4gICAgICBsZXQgbWV0YSA9IHZpZGVvVHJhY2subWV0YTtcXG4gICAgICBpZiAodHlwZW9mIG9uTWV0YURhdGEuZnJhbWVyYXRlID09PSAnbnVtYmVyJykge1xcbiAgICAgICAgbGV0IGZwc051bSA9IE1hdGguZmxvb3Iob25NZXRhRGF0YS5mcmFtZXJhdGUgKiAxMDAwKTtcXG4gICAgICAgIGlmIChmcHNOdW0gPiAwKSB7XFxuICAgICAgICAgIGxldCBmcHMgPSBmcHNOdW0gLyAxMDAwO1xcbiAgICAgICAgICBpZiAoIW1ldGEuZnJhbWVSYXRlKSB7XFxuICAgICAgICAgICAgbWV0YS5mcmFtZVJhdGUgPSB7fTtcXG4gICAgICAgICAgfVxcbiAgICAgICAgICBtZXRhLmZyYW1lUmF0ZS5maXhlZCA9IHRydWU7XFxuICAgICAgICAgIG1ldGEuZnJhbWVSYXRlLmZwcyA9IGZwcztcXG4gICAgICAgICAgbWV0YS5mcmFtZVJhdGUuZnBzX251bSA9IGZwc051bTtcXG4gICAgICAgICAgbWV0YS5mcmFtZVJhdGUuZnBzX2RlbiA9IDEwMDA7XFxuICAgICAgICB9XFxuICAgICAgfVxcbiAgICB9XFxuICB9XFxuXFxuICBfYWFjU2VxdWVuY2VIZWFkZXJQYXJzZXIoZGF0YSkge1xcbiAgICBsZXQgcmV0ID0ge307XFxuICAgIHJldC5oYXNTcGVjaWZpY0NvbmZpZyA9IHRydWU7XFxuICAgIHJldC5vYmplY3RUeXBlID0gZGF0YVsxXSA+Pj4gMztcXG4gICAgcmV0LnNhbXBsZVJhdGVJbmRleCA9IChkYXRhWzFdICYgNykgPDwgMSB8IGRhdGFbMl0gPj4+IDc7XFxuICAgIHJldC5hdWRpb3NhbXBsZXJhdGUgPSB0aGlzLl9zd2l0Y2hBdWRpb1NhbXBsZVJhdGUocmV0LnNhbXBsZVJhdGVJbmRleCk7XFxuICAgIHJldC5jaGFubmVsQ291bnQgPSAoZGF0YVsyXSAmIDEyMCkgPj4+IDM7XFxuICAgIHJldC5mcmFtZUxlbmd0aCA9IChkYXRhWzJdICYgNCkgPj4+IDI7XFxuICAgIHJldC5kZXBlbmRzT25Db3JlQ29kZXIgPSAoZGF0YVsyXSAmIDIpID4+PiAxO1xcbiAgICByZXQuZXh0ZW5zaW9uRmxhZ0luZGV4ID0gZGF0YVsyXSAmIDE7XFxuXFxuICAgIHJldC5jb2RlYyA9IGBtcDRhLjQwLiR7cmV0Lm9iamVjdFR5cGV9YDtcXG4gICAgbGV0IHVzZXJBZ2VudCA9IHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCk7XFxuICAgIGxldCBleHRlbnNpb25TYW1wbGluZ0luZGV4O1xcblxcbiAgICBsZXQgY29uZmlnO1xcbiAgICBsZXQgc2FtcGxpbmdJbmRleCA9IHJldC5zYW1wbGVSYXRlSW5kZXg7XFxuXFxuICAgIGlmICh1c2VyQWdlbnQuaW5kZXhPZignZmlyZWZveCcpICE9PSAtMSkge1xcbiAgICAgIC8vIGZpcmVmb3g6IHVzZSBTQlIgKEhFLUFBQykgaWYgZnJlcSBsZXNzIHRoYW4gMjRrSHpcXG4gICAgICBpZiAocmV0LnNhbXBsZVJhdGVJbmRleCA+PSA2KSB7XFxuICAgICAgICByZXQub2JqZWN0VHlwZSA9IDU7XFxuICAgICAgICBjb25maWcgPSBuZXcgQXJyYXkoNCk7XFxuICAgICAgICBleHRlbnNpb25TYW1wbGluZ0luZGV4ID0gc2FtcGxpbmdJbmRleCAtIDM7XFxuICAgICAgfSBlbHNlIHtcXG4gICAgICAgIC8vIHVzZSBMQy1BQUNcXG4gICAgICAgIHJldC5vYmplY3RUeXBlID0gMjtcXG4gICAgICAgIGNvbmZpZyA9IG5ldyBBcnJheSgyKTtcXG4gICAgICAgIGV4dGVuc2lvblNhbXBsaW5nSW5kZXggPSBzYW1wbGluZ0luZGV4O1xcbiAgICAgIH1cXG4gICAgfSBlbHNlIGlmICh1c2VyQWdlbnQuaW5kZXhPZignYW5kcm9pZCcpICE9PSAtMSkge1xcbiAgICAgIC8vIGFuZHJvaWQ6IGFsd2F5cyB1c2UgTEMtQUFDXFxuICAgICAgcmV0Lm9iamVjdFR5cGUgPSAyO1xcbiAgICAgIGNvbmZpZyA9IG5ldyBBcnJheSgyKTtcXG4gICAgICBleHRlbnNpb25TYW1wbGluZ0luZGV4ID0gc2FtcGxpbmdJbmRleDtcXG4gICAgfSBlbHNlIHtcXG4gICAgICAvLyBmb3Igb3RoZXIgYnJvd3NlcnMsIGUuZy4gY2hyb21lLi4uXFxuICAgICAgLy8gQWx3YXlzIHVzZSBIRS1BQUMgdG8gbWFrZSBpdCBlYXNpZXIgdG8gc3dpdGNoIGFhYyBjb2RlYyBwcm9maWxlXFxuICAgICAgcmV0Lm9iamVjdFR5cGUgPSA1O1xcbiAgICAgIGV4dGVuc2lvblNhbXBsaW5nSW5kZXggPSByZXQuc2FtcGxlUmF0ZUluZGV4O1xcbiAgICAgIGNvbmZpZyA9IG5ldyBBcnJheSg0KTtcXG5cXG4gICAgICBpZiAocmV0LnNhbXBsZVJhdGVJbmRleCA+PSA2KSB7XFxuICAgICAgICBleHRlbnNpb25TYW1wbGluZ0luZGV4ID0gcmV0LnNhbXBsZVJhdGVJbmRleCAtIDM7XFxuICAgICAgfSBlbHNlIGlmIChyZXQuY2hhbm5lbENvdW50ID09PSAxKSB7XFxuICAgICAgICAvLyBNb25vIGNoYW5uZWxcXG4gICAgICAgIHJldC5vYmplY3RUeXBlID0gMjtcXG4gICAgICAgIGNvbmZpZyA9IG5ldyBBcnJheSgyKTtcXG4gICAgICAgIGV4dGVuc2lvblNhbXBsaW5nSW5kZXggPSByZXQuc2FtcGxlUmF0ZUluZGV4O1xcbiAgICAgIH1cXG4gICAgfVxcblxcbiAgICBjb25maWdbMF0gPSByZXQub2JqZWN0VHlwZSA8PCAzO1xcbiAgICBjb25maWdbMF0gfD0gKHJldC5zYW1wbGVSYXRlSW5kZXggJiAweDBGKSA+Pj4gMTtcXG4gICAgY29uZmlnWzFdID0gKHJldC5zYW1wbGVSYXRlSW5kZXggJiAweDBGKSA8PCA3O1xcbiAgICBjb25maWdbMV0gfD0gKHJldC5jaGFubmVsQ291bnQgJiAweDBGKSA8PCAzO1xcbiAgICBpZiAocmV0Lm9iamVjdFR5cGUgPT09IDUpIHtcXG4gICAgICBjb25maWdbMV0gfD0gKGV4dGVuc2lvblNhbXBsaW5nSW5kZXggJiAweDBGKSA+Pj4gMTtcXG4gICAgICBjb25maWdbMl0gPSAoZXh0ZW5zaW9uU2FtcGxpbmdJbmRleCAmIDB4MDEpIDw8IDc7XFxuICAgICAgLy8gZXh0ZW5kZWQgYXVkaW8gb2JqZWN0IHR5cGU6IGZvcmNlIHRvIDIgKExDLUFBQylcXG4gICAgICBjb25maWdbMl0gfD0gMiA8PCAyO1xcbiAgICAgIGNvbmZpZ1szXSA9IDA7XFxuICAgIH1cXG4gICAgcmV0LmNvbmZpZyA9IGNvbmZpZztcXG4gICAgcmV0dXJuIHJldDtcXG4gIH1cXG5cXG4gIF9wYXJzZUFBQ0RhdGEoY2h1bmspIHtcXG4gICAgbGV0IHRyYWNrID0gdGhpcy50cmFja3MuYXVkaW9UcmFjaztcXG4gICAgaWYgKCF0cmFjaykge1xcbiAgICAgIHJldHVybjtcXG4gICAgfVxcblxcbiAgICBsZXQgbWV0YSA9IHRyYWNrLm1ldGE7XFxuXFxuICAgIGlmICghbWV0YSkge1xcbiAgICAgIG1ldGEgPSBuZXcgX3hncGxheWVyVXRpbHMuQXVkaW9UcmFja01ldGEoKTtcXG4gICAgfVxcblxcbiAgICBsZXQgaW5mbyA9IHRoaXMubG9hZGVyQnVmZmVyLnNoaWZ0KDEpWzBdO1xcblxcbiAgICBjaHVuay5kYXRhID0gdGhpcy5sb2FkZXJCdWZmZXIuc2hpZnQoY2h1bmsuZGF0YXNpemUgLSAxKTtcXG5cXG4gICAgbGV0IGZvcm1hdCA9IChpbmZvICYgMjQwKSA+Pj4gNDtcXG5cXG4gICAgdHJhY2suZm9ybWF0ID0gZm9ybWF0O1xcblxcbiAgICBpZiAoZm9ybWF0ICE9PSAxMCkge1xcbiAgICAgIHRoaXMuZW1pdChERU1VWF9FVkVOVFMuREVNVVhfRVJST1IsIG5ldyBFcnJvcihgaW52YWxpZCBhdWRpbyBmb3JtYXQ6ICR7Zm9ybWF0fWApKTtcXG4gICAgfVxcblxcbiAgICBpZiAoZm9ybWF0ID09PSAxMCAmJiAhdGhpcy5faGFzQXVkaW9TZXF1ZW5jZSkge1xcbiAgICAgIG1ldGEuc2FtcGxlUmF0ZSA9IHRoaXMuX3N3aXRjaEF1ZGlvU2FtcGxpbmdGcmVxdWVuY3koaW5mbyk7XFxuICAgICAgbWV0YS5zYW1wbGVSYXRlSW5kZXggPSAoaW5mbyAmIDEyKSA+Pj4gMjtcXG4gICAgICBtZXRhLmZyYW1lTGVudGggPSAoaW5mbyAmIDIpID4+PiAxO1xcbiAgICAgIG1ldGEuY2hhbm5lbENvdW50ID0gaW5mbyAmIDE7XFxuICAgICAgbWV0YS5yZWZTYW1wbGVEdXJhdGlvbiA9IE1hdGguZmxvb3IoMTAyNCAvIG1ldGEuYXVkaW9TYW1wbGVSYXRlICogbWV0YS50aW1lc2NhbGUpO1xcbiAgICB9XFxuXFxuICAgIGxldCBhdWRpb1NhbXBsZVJhdGUgPSBtZXRhLmF1ZGlvU2FtcGxlUmF0ZTtcXG4gICAgbGV0IGF1ZGlvU2FtcGxlUmF0ZUluZGV4ID0gbWV0YS5zYW1wbGVSYXRlSW5kZXg7XFxuICAgIGxldCByZWZTYW1wbGVEdXJhdGlvbiA9IG1ldGEucmVmU2FtcGxlRHVyYXRpb247XFxuXFxuICAgIGRlbGV0ZSBjaHVuay50YWdUeXBlO1xcbiAgICBsZXQgdmFsaWRhdGUgPSB0aGlzLl9kYXRhc2l6ZVZhbGlkYXRvcihjaHVuay5kYXRhc2l6ZSk7XFxuXFxuICAgIGlmIChjaHVuay5kYXRhWzBdID09PSAwKSB7XFxuICAgICAgLy8gQUFDIFNlcXVlbmNlIEhlYWRlclxcbiAgICAgIGxldCBhYWNIZWFkZXIgPSB0aGlzLl9hYWNTZXF1ZW5jZUhlYWRlclBhcnNlcihjaHVuay5kYXRhKTtcXG4gICAgICBhdWRpb1NhbXBsZVJhdGUgPSBhYWNIZWFkZXIuYXVkaW9zYW1wbGVyYXRlIHx8IG1ldGEuYXVkaW9TYW1wbGVSYXRlO1xcbiAgICAgIGF1ZGlvU2FtcGxlUmF0ZUluZGV4ID0gYWFjSGVhZGVyLnNhbXBsZVJhdGVJbmRleCB8fCBtZXRhLnNhbXBsZVJhdGVJbmRleDtcXG4gICAgICByZWZTYW1wbGVEdXJhdGlvbiA9IE1hdGguZmxvb3IoMTAyNCAvIGF1ZGlvU2FtcGxlUmF0ZSAqIG1ldGEudGltZXNjYWxlKTtcXG5cXG4gICAgICBtZXRhLmNoYW5uZWxDb3VudCA9IGFhY0hlYWRlci5jaGFubmVsQ291bnQ7XFxuICAgICAgbWV0YS5zYW1wbGVSYXRlID0gYXVkaW9TYW1wbGVSYXRlO1xcbiAgICAgIG1ldGEuc2FtcGxlUmF0ZUluZGV4ID0gYXVkaW9TYW1wbGVSYXRlSW5kZXg7XFxuICAgICAgbWV0YS5yZWZTYW1wbGVEdXJhdGlvbiA9IHJlZlNhbXBsZUR1cmF0aW9uO1xcbiAgICAgIG1ldGEuZHVyYXRpb24gPSB0aGlzLl9jb250ZXh0Lm1lZGlhSW5mby5kdXJhdGlvbiAqIG1ldGEudGltZXNjYWxlO1xcbiAgICAgIG1ldGEuY29uZmlnID0gYWFjSGVhZGVyLmNvbmZpZztcXG4gICAgICBtZXRhLm9iamVjdFR5cGUgPSBhYWNIZWFkZXIub2JqZWN0VHlwZTtcXG5cXG4gICAgICBjb25zdCBhdWRpb01lZGlhID0gdGhpcy5fY29udGV4dC5tZWRpYUluZm8uYXVkaW87XFxuXFxuICAgICAgLy8gZmlsbCBhdWRpbyBtZWRpYSBpbmZvXFxuICAgICAgYXVkaW9NZWRpYS5jb2RlYyA9IGFhY0hlYWRlci5jb2RlYztcXG4gICAgICBhdWRpb01lZGlhLmNoYW5uZWxDb3VudCA9IGFhY0hlYWRlci5jaGFubmVsQ291bnQ7XFxuICAgICAgYXVkaW9NZWRpYS5zYW1wbGVSYXRlID0gYXVkaW9TYW1wbGVSYXRlO1xcbiAgICAgIGF1ZGlvTWVkaWEuc2FtcGxlUmF0ZUluZGV4ID0gYWFjSGVhZGVyLmF1ZGlvU2FtcGxlUmF0ZUluZGV4O1xcblxcbiAgICAgIGlmICh0aGlzLl9oYXNTY3JpcHQgJiYgIXRoaXMuX2hhc0F1ZGlvU2VxdWVuY2UpIHtcXG4gICAgICAgIHRoaXMuZW1pdChERU1VWF9FVkVOVFMuTUVUQURBVEFfUEFSU0VELCAnYXVkaW8nKTtcXG4gICAgICB9IGVsc2UgaWYgKHRoaXMuX2hhc1NjcmlwdCAmJiB0aGlzLl9oYXNBdWRpb1NlcXVlbmNlKSB7XFxuICAgICAgICB0aGlzLmVtaXQoREVNVVhfRVZFTlRTLkFVRElPX01FVEFEQVRBX0NIQU5HRSk7XFxuICAgICAgfVxcbiAgICAgIDtcXG4gICAgICB0aGlzLl9oYXNBdWRpb1NlcXVlbmNlID0gdHJ1ZTtcXG4gICAgfSBlbHNlIHtcXG4gICAgICBjaHVuay5kYXRhID0gY2h1bmsuZGF0YS5zbGljZSgxLCBjaHVuay5kYXRhLmxlbmd0aCk7XFxuICAgICAgdHJhY2suc2FtcGxlcy5wdXNoKGNodW5rKTtcXG4gICAgfVxcbiAgICBpZiAoIXZhbGlkYXRlKSB7XFxuICAgICAgY29uc3QgZXJyb3IgPSBuZXcgRXJyb3IoJ1RBRyBsZW5ndGggZXJyb3IgYXQgJyArIGNodW5rLmRhdGFzaXplKTtcXG4gICAgICB0aGlzLmVtaXQoREVNVVhfRVZFTlRTLkRFTVVYX0VSUk9SLCBlcnJvci5tZXNzYWdlKTtcXG4gICAgICB0aGlzLmxvZ2dlci53YXJuKHRoaXMuVEFHLCBlcnJvci5tZXNzYWdlKTtcXG4gICAgfVxcbiAgfVxcblxcbiAgLyoqXFxuICAgKiBwYXJzZSBoZXZjL2F2YyB2aWRlbyBkYXRhXFxuICAgKiBAcGFyYW0gY2h1bmtcXG4gICAqIEBwcml2YXRlXFxuICAgKi9cXG4gIF9wYXJzZUhldmNEYXRhKGNodW5rKSB7XFxuICAgIC8vIGhlYWRlclxcbiAgICBsZXQgaW5mbyA9IHRoaXMubG9hZGVyQnVmZmVyLnNoaWZ0KDEpWzBdO1xcbiAgICBjaHVuay5mcmFtZVR5cGUgPSAoaW5mbyAmIDB4ZjApID4+PiA0O1xcbiAgICBjaHVuay5pc0tleWZyYW1lID0gY2h1bmsuZnJhbWVUeXBlID09PSAxO1xcbiAgICAvLyBsZXQgdGVtcENvZGVjSUQgPSB0aGlzLnRyYWNrcy52aWRlb1RyYWNrLmNvZGVjSURcXG4gICAgbGV0IGNvZGVjSUQgPSBpbmZvICYgMHgwZjtcXG4gICAgdGhpcy50cmFja3MudmlkZW9UcmFjay5jb2RlY0lEID0gY29kZWNJRDtcXG5cXG4gICAgLy8gaGV2Y+WSjGF2Y+eahGhlYWRlcuino+aekOaWueW8j+S4gOagt1xcbiAgICBjaHVuay5hdmNQYWNrZXRUeXBlID0gdGhpcy5sb2FkZXJCdWZmZXIuc2hpZnQoMSlbMF07XFxuICAgIGNodW5rLmN0cyA9IHRoaXMubG9hZGVyQnVmZmVyLnRvSW50KDAsIDMpO1xcbiAgICB0aGlzLmxvYWRlckJ1ZmZlci5zaGlmdCgzKTtcXG5cXG4gICAgLy8gMTIgZm9yIGhldmMsIDcgZm9yIGF2Y1xcbiAgICBpZiAoY29kZWNJRCA9PT0gMTIpIHtcXG4gICAgICBjb25zdCBkYXRhID0gdGhpcy5sb2FkZXJCdWZmZXIuc2hpZnQoY2h1bmsuZGF0YXNpemUgLSA1KTtcXG4gICAgICBjaHVuay5kYXRhID0gZGF0YTtcXG5cXG4gICAgICBpZiAoTnVtYmVyLnBhcnNlSW50KGNodW5rLmF2Y1BhY2tldFR5cGUpICE9PSAwKSB7XFxuICAgICAgICBpZiAoIXRoaXMuX2RhdGFzaXplVmFsaWRhdG9yKGNodW5rLmRhdGFzaXplKSkge1xcbiAgICAgICAgICB0aGlzLmxvZ2dlci53YXJuKHRoaXMuVEFHLCBgaW52YWxpZCB2aWRlbyB0YWcgZGF0YXNpemU6ICR7Y2h1bmsuZGF0YXNpemV9YCk7XFxuICAgICAgICB9XFxuICAgICAgICBsZXQgbmFsdSA9IHt9O1xcbiAgICAgICAgbGV0IHIgPSAwO1xcbiAgICAgICAgbmFsdS5jdHMgPSBjaHVuay5jdHM7XFxuICAgICAgICBuYWx1LmR0cyA9IGNodW5rLmR0cztcXG4gICAgICAgIHdoaWxlIChjaHVuay5kYXRhLmxlbmd0aCA+IHIpIHtcXG4gICAgICAgICAgbGV0IHNpemVzID0gY2h1bmsuZGF0YS5zbGljZShOdW1iZXIucGFyc2VJbnQociksIDQgKyByKTtcXG4gICAgICAgICAgbmFsdS5zaXplID0gc2l6ZXNbM107XFxuICAgICAgICAgIG5hbHUuc2l6ZSArPSBzaXplc1syXSAqIDI1NjtcXG4gICAgICAgICAgbmFsdS5zaXplICs9IHNpemVzWzFdICogMjU2ICogMjU2O1xcbiAgICAgICAgICBuYWx1LnNpemUgKz0gc2l6ZXNbMF0gKiAyNTYgKiAyNTYgKiAyNTY7XFxuICAgICAgICAgIHIgKz0gNDtcXG4gICAgICAgICAgbmFsdS5kYXRhID0gY2h1bmsuZGF0YS5zbGljZShOdW1iZXIucGFyc2VJbnQociksIG5hbHUuc2l6ZSArIHIpO1xcbiAgICAgICAgICByICs9IG5hbHUuc2l6ZTtcXG4gICAgICAgICAgdGhpcy50cmFja3MudmlkZW9UcmFjay5zYW1wbGVzLnB1c2gobmFsdSk7XFxuICAgICAgICAgIHRoaXMuZW1pdChERU1VWF9FVkVOVFMuTUVUQURBVEFfUEFSU0VELCAndmlkZW8nKTtcXG4gICAgICAgIH1cXG4gICAgICB9IGVsc2UgaWYgKE51bWJlci5wYXJzZUludChjaHVuay5hdmNQYWNrZXRUeXBlKSA9PT0gMCkge1xcbiAgICAgICAgaWYgKCF0aGlzLl9kYXRhc2l6ZVZhbGlkYXRvcihjaHVuay5kYXRhc2l6ZSkpIHtcXG4gICAgICAgICAgdGhpcy5sb2dnZXIud2Fybih0aGlzLlRBRywgYGludmFsaWQgdmlkZW8gdGFnIGRhdGFzaXplOiAke2NodW5rLmRhdGFzaXplfWApO1xcbiAgICAgICAgfSBlbHNlIHtcXG4gICAgICAgICAgdGhpcy5lbWl0KERFTVVYX0VWRU5UUy5NRVRBREFUQV9QQVJTRUQsICd2aWRlbycpO1xcbiAgICAgICAgfVxcbiAgICAgIH1cXG4gICAgfSBlbHNlIGlmIChjb2RlY0lEID09PSA3KSB7XFxuICAgICAgbGV0IGRhdGEgPSB0aGlzLmxvYWRlckJ1ZmZlci5zaGlmdChjaHVuay5kYXRhc2l6ZSAtIDUpO1xcbiAgICAgIGlmIChkYXRhWzRdID09PSAwICYmIGRhdGFbNV0gPT09IDAgJiYgZGF0YVs2XSA9PT0gMCAmJiBkYXRhWzddID09PSAxKSB7XFxuICAgICAgICBsZXQgYXZjY2xlbmd0aCA9IDA7XFxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDQ7IGkrKykge1xcbiAgICAgICAgICBhdmNjbGVuZ3RoID0gYXZjY2xlbmd0aCAqIDI1NiArIGRhdGFbaV07XFxuICAgICAgICB9XFxuICAgICAgICBhdmNjbGVuZ3RoIC09IDQ7XFxuICAgICAgICBkYXRhID0gZGF0YS5zbGljZSg0LCBkYXRhLmxlbmd0aCk7XFxuICAgICAgICBkYXRhWzNdID0gYXZjY2xlbmd0aCAlIDI1NjtcXG4gICAgICAgIGF2Y2NsZW5ndGggPSAoYXZjY2xlbmd0aCAtIGRhdGFbM10pIC8gMjU2O1xcbiAgICAgICAgZGF0YVsyXSA9IGF2Y2NsZW5ndGggJSAyNTY7XFxuICAgICAgICBhdmNjbGVuZ3RoID0gKGF2Y2NsZW5ndGggLSBkYXRhWzJdKSAvIDI1NjtcXG4gICAgICAgIGRhdGFbMV0gPSBhdmNjbGVuZ3RoICUgMjU2O1xcbiAgICAgICAgZGF0YVswXSA9IChhdmNjbGVuZ3RoIC0gZGF0YVsxXSkgLyAyNTY7XFxuICAgICAgfVxcblxcbiAgICAgIGNodW5rLmRhdGEgPSBkYXRhO1xcbiAgICAgIC8vIElmIGl0IGlzIEFWQyBzZXF1ZWNlIEhlYWRlci5cXG4gICAgICBpZiAoY2h1bmsuYXZjUGFja2V0VHlwZSA9PT0gMCkge1xcbiAgICAgICAgdGhpcy5fYXZjU2VxdWVuY2VIZWFkZXJQYXJzZXIoY2h1bmsuZGF0YSk7XFxuICAgICAgICBsZXQgdmFsaWRhdGUgPSB0aGlzLl9kYXRhc2l6ZVZhbGlkYXRvcihjaHVuay5kYXRhc2l6ZSk7XFxuICAgICAgICBpZiAodmFsaWRhdGUpIHtcXG4gICAgICAgICAgaWYgKHRoaXMuX2hhc1NjcmlwdCAmJiAhdGhpcy5faGFzVmlkZW9TZXF1ZW5jZSkge1xcbiAgICAgICAgICAgIHRoaXMuZW1pdChERU1VWF9FVkVOVFMuTUVUQURBVEFfUEFSU0VELCAndmlkZW8nKTtcXG4gICAgICAgICAgfSBlbHNlIGlmICh0aGlzLl9oYXNTY3JpcHQgJiYgdGhpcy5faGFzVmlkZW9TZXF1ZW5jZSkge1xcbiAgICAgICAgICAgIHRoaXMuZW1pdChERU1VWF9FVkVOVFMuVklERU9fTUVUQURBVEFfQ0hBTkdFKTtcXG4gICAgICAgICAgfVxcbiAgICAgICAgICB0aGlzLl9oYXNWaWRlb1NlcXVlbmNlID0gdHJ1ZTtcXG4gICAgICAgIH1cXG4gICAgICB9IGVsc2Uge1xcbiAgICAgICAgaWYgKCF0aGlzLl9kYXRhc2l6ZVZhbGlkYXRvcihjaHVuay5kYXRhc2l6ZSkpIHtcXG4gICAgICAgICAgdGhpcy5sb2dnZXIud2Fybih0aGlzLlRBRywgYGludmFsaWQgdmlkZW8gdGFnIGRhdGFzaXplOiAke2NodW5rLmRhdGFzaXplfWApO1xcbiAgICAgICAgICByZXR1cm47XFxuICAgICAgICB9XFxuICAgICAgICB0aGlzLnRyYWNrcy52aWRlb1RyYWNrLnNhbXBsZXMucHVzaChjaHVuayk7XFxuICAgICAgICAvLyB0aGlzLmVtaXQoREVNVVhfRVZFTlRTLkRFTVVYX0NPTVBMRVRFKVxcbiAgICAgIH1cXG4gICAgfSBlbHNlIHtcXG4gICAgICB0aGlzLmxvZ2dlci53YXJuKHRoaXMuVEFHLCBgdmlkZW8gY29kZWlkIGlzICR7Y29kZWNJRH1gKTtcXG4gICAgICBjaHVuay5kYXRhID0gdGhpcy5sb2FkZXJCdWZmZXIuc2hpZnQoY2h1bmsuZGF0YXNpemUgLSAxKTtcXG4gICAgICBpZiAoIXRoaXMuX2RhdGFzaXplVmFsaWRhdG9yKGNodW5rLmRhdGFzaXplKSkge1xcbiAgICAgICAgdGhpcy5sb2dnZXIud2Fybih0aGlzLlRBRywgYGludmFsaWQgdmlkZW8gdGFnIGRhdGFzaXplOiAke2NodW5rLmRhdGFzaXplfWApO1xcbiAgICAgIH1cXG4gICAgICB0aGlzLnRyYWNrcy52aWRlb1RyYWNrLnNhbXBsZXMucHVzaChjaHVuayk7XFxuICAgICAgdGhpcy5lbWl0KERFTVVYX0VWRU5UUy5ERU1VWF9DT01QTEVURSk7XFxuICAgIH1cXG4gICAgZGVsZXRlIGNodW5rLnRhZ1R5cGU7XFxuICB9XFxuXFxuICAvKipcXG4gICAqIHBhcnNlIGF2YyBtZXRhZGF0YVxcbiAgICogQHBhcmFtIGRhdGFcXG4gICAqIEBwcml2YXRlXFxuICAgKi9cXG4gIF9hdmNTZXF1ZW5jZUhlYWRlclBhcnNlcihkYXRhKSB7XFxuICAgIGxldCB0cmFjayA9IHRoaXMudHJhY2tzLnZpZGVvVHJhY2s7XFxuXFxuICAgIGlmICghdHJhY2spIHtcXG4gICAgICByZXR1cm47XFxuICAgIH1cXG5cXG4gICAgbGV0IG9mZnNldCA9IDA7XFxuXFxuICAgIGlmICghdHJhY2subWV0YSkge1xcbiAgICAgIHRyYWNrLm1ldGEgPSBuZXcgX3hncGxheWVyVXRpbHMuVmlkZW9UcmFja01ldGEoKTtcXG4gICAgfVxcbiAgICBsZXQgbWV0YSA9IHRyYWNrLm1ldGE7XFxuXFxuICAgIG1ldGEuY29uZmlndXJhdGlvblZlcnNpb24gPSBkYXRhWzBdO1xcbiAgICBtZXRhLmF2Y1Byb2ZpbGVJbmRpY2F0aW9uID0gZGF0YVsxXTtcXG4gICAgbWV0YS5wcm9maWxlQ29tcGF0aWJpbGl0eSA9IGRhdGFbMl07XFxuICAgIG1ldGEuYXZjTGV2ZWxJbmRpY2F0aW9uID0gZGF0YVszXSAvIDEwO1xcbiAgICBtZXRhLm5hbFVuaXRMZW5ndGggPSAoZGF0YVs0XSAmIDB4MDMpICsgMTtcXG5cXG4gICAgbGV0IG51bU9mU3BzID0gZGF0YVs1XSAmIDB4MWY7XFxuICAgIG9mZnNldCA9IDY7XFxuICAgIGxldCBjb25maWcgPSB7fTtcXG5cXG4gICAgLy8gcGFyc2UgU1BTXFxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbnVtT2ZTcHM7IGkrKykge1xcbiAgICAgIGxldCBzaXplID0gZGF0YVtvZmZzZXRdICogMjU1ICsgZGF0YVtvZmZzZXQgKyAxXTtcXG4gICAgICBvZmZzZXQgKz0gMjtcXG5cXG4gICAgICBsZXQgc3BzID0gbmV3IFVpbnQ4QXJyYXkoc2l6ZSk7XFxuICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBzaXplOyBqKyspIHtcXG4gICAgICAgIHNwc1tqXSA9IGRhdGFbb2Zmc2V0ICsgal07XFxuICAgICAgfVxcblxcbiAgICAgIC8vIGNvZGVjIHN0cmluZ1xcbiAgICAgIGxldCBjb2RlY1N0cmluZyA9ICdhdmMxLic7XFxuICAgICAgZm9yIChsZXQgaiA9IDE7IGogPCA0OyBqKyspIHtcXG4gICAgICAgIGxldCBoID0gc3BzW2pdLnRvU3RyaW5nKDE2KTtcXG4gICAgICAgIGlmIChoLmxlbmd0aCA8IDIpIHtcXG4gICAgICAgICAgaCA9ICcwJyArIGg7XFxuICAgICAgICB9XFxuICAgICAgICBjb2RlY1N0cmluZyArPSBoO1xcbiAgICAgIH1cXG5cXG4gICAgICBtZXRhLmNvZGVjID0gY29kZWNTdHJpbmc7XFxuXFxuICAgICAgb2Zmc2V0ICs9IHNpemU7XFxuICAgICAgdGhpcy50cmFja3MudmlkZW9UcmFjay5tZXRhLnNwcyA9IHNwcztcXG4gICAgICBjb25maWcgPSBfeGdwbGF5ZXJDb2RlYy5TcHNQYXJzZXIucGFyc2VTUFMoc3BzKTtcXG4gICAgfVxcblxcbiAgICBsZXQgbnVtT2ZQcHMgPSBkYXRhW29mZnNldF07XFxuXFxuICAgIG9mZnNldCsrO1xcblxcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bU9mUHBzOyBpKyspIHtcXG4gICAgICBsZXQgc2l6ZSA9IGRhdGFbb2Zmc2V0XSAqIDI1NSArIGRhdGFbb2Zmc2V0ICsgMV07XFxuICAgICAgb2Zmc2V0ICs9IDI7XFxuICAgICAgbGV0IHBwcyA9IG5ldyBVaW50OEFycmF5KHNpemUpO1xcbiAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgc2l6ZTsgaisrKSB7XFxuICAgICAgICBwcHNbal0gPSBkYXRhW29mZnNldCArIGpdO1xcbiAgICAgIH1cXG4gICAgICBvZmZzZXQgKz0gc2l6ZTtcXG4gICAgICB0aGlzLnRyYWNrcy52aWRlb1RyYWNrLm1ldGEucHBzID0gcHBzO1xcbiAgICB9XFxuXFxuICAgIE9iamVjdC5hc3NpZ24obWV0YSwgX3hncGxheWVyQ29kZWMuU3BzUGFyc2VyLnRvVmlkZW9NZXRhKGNvbmZpZykpO1xcblxcbiAgICAvLyBmaWxsIHZpZGVvIG1lZGlhIGluZm9cXG4gICAgY29uc3QgdmlkZW9NZWRpYSA9IHRoaXMuX2NvbnRleHQubWVkaWFJbmZvLnZpZGVvO1xcblxcbiAgICB2aWRlb01lZGlhLmNvZGVjID0gbWV0YS5jb2RlYztcXG4gICAgdmlkZW9NZWRpYS5wcm9maWxlID0gbWV0YS5wcm9maWxlO1xcbiAgICB2aWRlb01lZGlhLmxldmVsID0gbWV0YS5sZXZlbDtcXG4gICAgdmlkZW9NZWRpYS5jaHJvbWFGb3JtYXQgPSBtZXRhLmNocm9tYUZvcm1hdDtcXG4gICAgdmlkZW9NZWRpYS5mcmFtZVJhdGUgPSBtZXRhLmZyYW1lUmF0ZTtcXG4gICAgdmlkZW9NZWRpYS5wYXJSYXRpbyA9IG1ldGEucGFyUmF0aW87XFxuICAgIHZpZGVvTWVkaWEud2lkdGggPSB2aWRlb01lZGlhLndpZHRoID09PSBtZXRhLnByZXNlbnRXaWR0aCA/IHZpZGVvTWVkaWEud2lkdGggOiBtZXRhLnByZXNlbnRXaWR0aDtcXG4gICAgdmlkZW9NZWRpYS5oZWlnaHQgPSB2aWRlb01lZGlhLmhlaWdodCA9PT0gbWV0YS5wcmVzZW50SGVpZ2h0ID8gdmlkZW9NZWRpYS53aWR0aCA6IG1ldGEucHJlc2VudEhlaWdodDtcXG5cXG4gICAgbWV0YS5kdXJhdGlvbiA9IHRoaXMuX2NvbnRleHQubWVkaWFJbmZvLmR1cmF0aW9uICogbWV0YS50aW1lc2NhbGU7XFxuICAgIG1ldGEuYXZjYyA9IG5ldyBVaW50OEFycmF5KGRhdGEubGVuZ3RoKTtcXG4gICAgbWV0YS5hdmNjLnNldChkYXRhKTtcXG4gICAgdHJhY2subWV0YSA9IG1ldGE7XFxuICB9XFxuXFxuICAvKipcXG4gICAqIGNob29zZSBhdWRpbyBzYW1wbGUgcmF0ZVxcbiAgICogQHBhcmFtIHNhbXBsaW5nRnJlcXVlbmN5SW5kZXhcXG4gICAqIEByZXR1cm5zIHtudW1iZXJ9XFxuICAgKiBAcHJpdmF0ZVxcbiAgICovXFxuICBfc3dpdGNoQXVkaW9TYW1wbGVSYXRlKHNhbXBsaW5nRnJlcXVlbmN5SW5kZXgpIHtcXG4gICAgbGV0IHNhbXBsaW5nRnJlcXVlbmN5TGlzdCA9IFs5NjAwMCwgODgyMDAsIDY0MDAwLCA0ODAwMCwgNDQxMDAsIDMyMDAwLCAyNDAwMCwgMjIwNTAsIDE2MDAwLCAxMjAwMCwgMTEwMjUsIDgwMDAsIDczNTBdO1xcbiAgICByZXR1cm4gc2FtcGxpbmdGcmVxdWVuY3lMaXN0W3NhbXBsaW5nRnJlcXVlbmN5SW5kZXhdO1xcbiAgfVxcblxcbiAgLyoqXFxuICAgKiBjaG9vc2UgYXVkaW8gc2FtcGxpbmcgZnJlcXVlbmNlXFxuICAgKiBAcGFyYW0gaW5mb1xcbiAgICogQHJldHVybnMge251bWJlcn1cXG4gICAqIEBwcml2YXRlXFxuICAgKi9cXG4gIF9zd2l0Y2hBdWRpb1NhbXBsaW5nRnJlcXVlbmN5KGluZm8pIHtcXG4gICAgbGV0IHNhbXBsaW5nRnJlcXVlbmN5SW5kZXggPSAoaW5mbyAmIDEyKSA+Pj4gMjtcXG4gICAgbGV0IHNhbXBsaW5nRnJlcXVlbmN5TGlzdCA9IFs1NTAwLCAxMTAyNSwgMjIwNTAsIDQ0MTAwLCA0ODAwMF07XFxuICAgIHJldHVybiBzYW1wbGluZ0ZyZXF1ZW5jeUxpc3Rbc2FtcGxpbmdGcmVxdWVuY3lJbmRleF07XFxuICB9XFxuXFxuICAvKipcXG4gICAqIGNob29zZSBhdWRpbyBjaGFubmVsIGNvdW50XFxuICAgKiBAcGFyYW0gaW5mb1xcbiAgICogQHJldHVybnMge251bWJlcn1cXG4gICAqIEBwcml2YXRlXFxuICAgKi9cXG4gIF9zd2l0Y2hBdWRpb0NoYW5uZWwoaW5mbykge1xcbiAgICBsZXQgc2FtcGxlVHJhY2tOdW1JbmRleCA9IGluZm8gJiAxO1xcbiAgICBsZXQgc2FtcGxlVHJhY2tOdW1MaXN0ID0gWzEsIDJdO1xcbiAgICByZXR1cm4gc2FtcGxlVHJhY2tOdW1MaXN0W3NhbXBsZVRyYWNrTnVtSW5kZXhdO1xcbiAgfVxcblxcbiAgLyoqXFxuICAgKiBjaGVjayBkYXRhc2l6ZSBpcyB2YWxpZCB1c2UgNCBCeXRlIGFmdGVyIGN1cnJlbnQgdGFnXFxuICAgKiBAcGFyYW0gZGF0YXNpemVcXG4gICAqIEByZXR1cm5zIHtib29sZWFufVxcbiAgICogQHByaXZhdGVcXG4gICAqL1xcbiAgX2RhdGFzaXplVmFsaWRhdG9yKGRhdGFzaXplKSB7XFxuICAgIGxldCBkYXRhc2l6ZUNvbmZpcm0gPSB0aGlzLmxvYWRlckJ1ZmZlci50b0ludCgwLCA0KTtcXG4gICAgdGhpcy5sb2FkZXJCdWZmZXIuc2hpZnQoNCk7XFxuICAgIHJldHVybiBkYXRhc2l6ZUNvbmZpcm0gPT09IGRhdGFzaXplICsgMTE7XFxuICB9XFxuXFxuICBnZXQgbG9hZGVyQnVmZmVyKCkge1xcbiAgICBpZiAodGhpcy5fY29udGV4dC5nZXRJbnN0YW5jZSgnTE9BREVSX0JVRkZFUicpKSB7XFxuICAgICAgcmV0dXJuIHRoaXMuX2NvbnRleHQuZ2V0SW5zdGFuY2UoJ0xPQURFUl9CVUZGRVInKTtcXG4gICAgfSBlbHNlIHtcXG4gICAgICB0aGlzLmVtaXQoREVNVVhfRVZFTlRTLkRFTVVYX0VSUk9SLCBuZXcgRXJyb3IoJ+aJvuS4jeWIsCBsb2FkZXJCdWZmZXIg5a6e5L6LJykpO1xcbiAgICB9XFxuICB9XFxuXFxuICBnZXQgdHJhY2tzKCkge1xcbiAgICByZXR1cm4gdGhpcy5fY29udGV4dC5nZXRJbnN0YW5jZSgnVFJBQ0tTJyk7XFxuICB9XFxuXFxuICBnZXQgbG9nZ2VyKCkge1xcbiAgICByZXR1cm4gdGhpcy5fY29udGV4dC5nZXRJbnN0YW5jZSgnTE9HR0VSJyk7XFxuICB9XFxufVxcblxcbmV4cG9ydHMuZGVmYXVsdCA9IEZsdkRlbXV4ZXI7XFxuXFxuLy8jIHNvdXJjZVVSTD13ZWJwYWNrOi8veGdwbGF5ZXItZmx2Ly4uL3hncGxheWVyLWRlbXV4L3NyYy9mbHYvaW5kZXguanM/XCIpfSxcIi4uL3hncGxheWVyLWRlbXV4L3NyYy9obHMvZGVtdXhlci9tM3U4cGFyc2VyLmpzXCI6XG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4uL3hncGxheWVyLWRlbXV4L3NyYy9obHMvZGVtdXhlci9tM3U4cGFyc2VyLmpzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIG5vIHN0YXRpYyBleHBvcnRzIGZvdW5kICovZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7XCJ1c2Ugc3RyaWN0XCI7ZXZhbChcIlxcblxcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcXFwiX19lc01vZHVsZVxcXCIsIHtcXG4gIHZhbHVlOiB0cnVlXFxufSk7XFxuLyoqXFxuICogUmVmZXJlbmNlOiBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjODIxNiNzZWN0aW9uLTQuM1xcbiAqL1xcbmNsYXNzIE0zVThQYXJzZXIge1xcbiAgc3RhdGljIHBhcnNlKHRleHQsIGJhc2V1cmwgPSAnJykge1xcbiAgICBsZXQgcmV0ID0ge1xcbiAgICAgIGR1cmF0aW9uOiAwXFxuICAgIH07XFxuICAgIGlmICghdGV4dCB8fCAhdGV4dC5zcGxpdCkge1xcbiAgICAgIHJldHVybjtcXG4gICAgfVxcbiAgICBsZXQgcmVmcyA9IHRleHQuc3BsaXQoL1xcXFxyfFxcXFxuLyk7XFxuICAgIHJlZnMgPSByZWZzLmZpbHRlcihyZWYgPT4ge1xcbiAgICAgIHJldHVybiByZWY7XFxuICAgIH0pO1xcbiAgICBsZXQgcmVmID0gcmVmcy5zaGlmdCgpO1xcbiAgICBpZiAoIXJlZi5tYXRjaCgnI0VYVE0zVScpKSB7XFxuICAgICAgLy8gVE9ETzpNM1XmoLzlvI/plJnor6/jgIJcXG4gICAgICByZXR1cm4gbnVsbDtcXG4gICAgfVxcbiAgICByZWYgPSByZWZzLnNoaWZ0KCk7XFxuICAgIHdoaWxlIChyZWYpIHtcXG4gICAgICBsZXQgcmVmbSA9IHJlZi5tYXRjaCgvIyguKik6KC4qKS8pO1xcbiAgICAgIGlmIChyZWZtICYmIHJlZm0ubGVuZ3RoID4gMikge1xcbiAgICAgICAgc3dpdGNoIChyZWZtWzFdKSB7XFxuICAgICAgICAgIGNhc2UgJ0VYVC1YLVZFUlNJT04nOlxcbiAgICAgICAgICAgIHJldC52ZXJzaW9uID0gcGFyc2VJbnQocmVmbVsyXSk7XFxuICAgICAgICAgICAgYnJlYWs7XFxuICAgICAgICAgIGNhc2UgJ0VYVC1YLU1FRElBLVNFUVVFTkNFJzpcXG4gICAgICAgICAgICByZXQuc2VxdWVuY2UgPSBwYXJzZUludChyZWZtWzJdKTtcXG4gICAgICAgICAgICBicmVhaztcXG4gICAgICAgICAgY2FzZSAnRVhULVgtVEFSR0VURFVSQVRJT04nOlxcbiAgICAgICAgICAgIHJldC50YXJnZXRkdXJhdGlvbiA9IHBhcnNlRmxvYXQocmVmbVsyXSk7XFxuICAgICAgICAgICAgYnJlYWs7XFxuICAgICAgICAgIGNhc2UgJ0VYVElORic6XFxuICAgICAgICAgICAgTTNVOFBhcnNlci5wYXJzZUZyYWcocmVmbSwgcmVmcywgcmV0LCBiYXNldXJsKTtcXG4gICAgICAgICAgICBicmVhaztcXG4gICAgICAgICAgZGVmYXVsdDpcXG4gICAgICAgICAgICBicmVhaztcXG4gICAgICAgIH1cXG4gICAgICB9XFxuICAgICAgcmVmID0gcmVmcy5zaGlmdCgpO1xcbiAgICB9XFxuICAgIHJldHVybiByZXQ7XFxuICB9XFxuXFxuICBzdGF0aWMgcGFyc2VGcmFnKHJlZm0sIHJlZnMsIHJldCwgYmFzZXVybCkge1xcbiAgICBpZiAoIXJldC5mcmFncykge1xcbiAgICAgIHJldC5mcmFncyA9IFtdO1xcbiAgICB9XFxuXFxuICAgIGxldCBmcmVnID0ge1xcbiAgICAgIHN0YXJ0OiByZXQuZHVyYXRpb24sXFxuICAgICAgZHVyYXRpb246IHBhcnNlRmxvYXQocmVmbVsyXSkgKiAxMDAwXFxuICAgIH07XFxuXFxuICAgIHJldC5kdXJhdGlvbiArPSBmcmVnLmR1cmF0aW9uO1xcbiAgICBsZXQgbmV4dGxpbmUgPSByZWZzLnNoaWZ0KCk7XFxuICAgIGlmIChuZXh0bGluZS5tYXRjaCgvIyguKik6KC4qKS8pKSB7XFxuICAgICAgbmV4dGxpbmUgPSByZWZzLnNoaWZ0KCk7XFxuICAgIH1cXG4gICAgaWYgKG5leHRsaW5lLmxlbmd0aCA+IDAgJiYgbmV4dGxpbmUuY2hhckF0KDApID09PSAnLycgJiYgYmFzZXVybC5tYXRjaCgvLipcXFxcL1xcXFwvLipcXFxcLlxcXFx3Ky9nKSkge1xcbiAgICAgIGJhc2V1cmwgPSBiYXNldXJsLm1hdGNoKC8uKlxcXFwvXFxcXC8uKlxcXFwuXFxcXHcrL2cpWzBdO1xcbiAgICB9XFxuICAgIGlmIChuZXh0bGluZS5tYXRjaCgvLio6XFxcXC9cXFxcLy4qLykpIHtcXG4gICAgICBmcmVnLnVybCA9IG5leHRsaW5lO1xcbiAgICB9IGVsc2Uge1xcbiAgICAgIGZyZWcudXJsID0gYmFzZXVybCArIG5leHRsaW5lO1xcbiAgICB9XFxuXFxuICAgIHJldC5mcmFncy5wdXNoKGZyZWcpO1xcbiAgfVxcblxcbiAgc3RhdGljIHBhcnNlVVJMKHVybCkge1xcbiAgICBsZXQgYmFzZXVybCA9ICcnO1xcbiAgICBsZXQgdXJscyA9IHVybC5tYXRjaCgvKC4qXFxcXC8pLipcXFxcLm0zdTgvKTtcXG4gICAgaWYgKHVybHMgJiYgdXJscy5sZW5ndGggPiAwKSB7XFxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB1cmxzLmxlbmd0aDsgaSsrKSB7XFxuICAgICAgICBpZiAodXJsc1tpXS5tYXRjaCgvLipcXFxcLyQvZykgJiYgdXJsc1tpXS5sZW5ndGggPiBiYXNldXJsLmxlbmd0aCkge1xcbiAgICAgICAgICBiYXNldXJsID0gdXJsc1tpXTtcXG4gICAgICAgIH1cXG4gICAgICB9XFxuICAgIH1cXG4gICAgcmV0dXJuIGJhc2V1cmw7XFxuICB9XFxufVxcblxcbmV4cG9ydHMuZGVmYXVsdCA9IE0zVThQYXJzZXI7XFxuXFxuLy8jIHNvdXJjZVVSTD13ZWJwYWNrOi8veGdwbGF5ZXItZmx2Ly4uL3hncGxheWVyLWRlbXV4L3NyYy9obHMvZGVtdXhlci9tM3U4cGFyc2VyLmpzP1wiKX0sXCIuLi94Z3BsYXllci1kZW11eC9zcmMvaGxzL2RlbXV4ZXIvdHMuanNcIjpcbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4uL3hncGxheWVyLWRlbXV4L3NyYy9obHMvZGVtdXhlci90cy5qcyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgbm8gc3RhdGljIGV4cG9ydHMgZm91bmQgKi9mdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXtcInVzZSBzdHJpY3RcIjtldmFsKFwiXFxuXFxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFxcXCJfX2VzTW9kdWxlXFxcIiwge1xcbiAgdmFsdWU6IHRydWVcXG59KTtcXG5cXG52YXIgX3hncGxheWVyQ29kZWMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISB4Z3BsYXllci1jb2RlYyAqLyBcXFwiLi4veGdwbGF5ZXItY29kZWMvaW5kZXguanNcXFwiKTtcXG5cXG52YXIgX3hncGxheWVyQnVmZmVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgeGdwbGF5ZXItYnVmZmVyICovIFxcXCIuLi94Z3BsYXllci1idWZmZXIvaW5kZXguanNcXFwiKTtcXG5cXG52YXIgX3hncGxheWVyVXRpbHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISB4Z3BsYXllci11dGlscyAqLyBcXFwiLi4veGdwbGF5ZXItdXRpbHMvaW5kZXguanNcXFwiKTtcXG5cXG5jb25zdCBERU1VWF9FVkVOVFMgPSBfeGdwbGF5ZXJVdGlscy5FVkVOVFMuREVNVVhfRVZFTlRTO1xcbmNvbnN0IFN0cmVhbVR5cGUgPSB7XFxuICAweDAxOiBbJ3ZpZGVvJywgJ01QRUctMSddLFxcbiAgMHgwMjogWyd2aWRlbycsICdNUEVHLTInXSxcXG4gIDB4MWI6IFsndmlkZW8nLCAnQVZDLkgyNjQnXSxcXG4gIDB4ZWE6IFsndmlkZW8nLCAnVkMtMSddLFxcbiAgMHgwMzogWydhdWRpbycsICdNUEVHLTEnXSxcXG4gIDB4MDQ6IFsnYXVkaW8nLCAnTVBFRy0yJ10sXFxuICAweDBmOiBbJ2F1ZGlvJywgJ01QRUctMi5BQUMnXSxcXG4gIDB4MTE6IFsnYXVkaW8nLCAnTVBFRy00LkFBQyddLFxcbiAgMHg4MDogWydhdWRpbycsICdMUENNJ10sXFxuICAweDgxOiBbJ2F1ZGlvJywgJ0FDMyddLFxcbiAgMHgwNjogWydhdWRpbycsICdBQzMnXSxcXG4gIDB4ODI6IFsnYXVkaW8nLCAnRFRTJ10sXFxuICAweDgzOiBbJ2F1ZGlvJywgJ0RvbGJ5IFRydWVIRCddLFxcbiAgMHg4NDogWydhdWRpbycsICdBQzMtUGx1cyddLFxcbiAgMHg4NTogWydhdWRpbycsICdEVFMtSEQnXSxcXG4gIDB4ODY6IFsnYXVkaW8nLCAnRFRTLU1BJ10sXFxuICAweGExOiBbJ2F1ZGlvJywgJ0FDMy1QbHVzLVNFQyddLFxcbiAgMHhhMjogWydhdWRpbycsICdEVFMtSEQtU0VDJ11cXG59O1xcblxcbmNsYXNzIFRzRGVtdXhlciB7XFxuICBjb25zdHJ1Y3Rvcihjb25maWdzKSB7XFxuICAgIHRoaXMuY29uZmlncyA9IE9iamVjdC5hc3NpZ24oe30sIGNvbmZpZ3MpO1xcbiAgICB0aGlzLmRlbXV4aW5nID0gZmFsc2U7XFxuICAgIHRoaXMucGF0ID0gW107XFxuICAgIHRoaXMucG10ID0gW107XFxuICAgIHRoaXMuX2hhc1ZpZGVvTWV0YSA9IGZhbHNlO1xcbiAgICB0aGlzLl9oYXNBdWRpb01ldGEgPSBmYWxzZTtcXG4gIH1cXG5cXG4gIGluaXQoKSB7XFxuICAgIHRoaXMub24oREVNVVhfRVZFTlRTLkRFTVVYX1NUQVJULCB0aGlzLmRlbXV4LmJpbmQodGhpcykpO1xcbiAgfVxcblxcbiAgZGVtdXgoKSB7XFxuICAgIGlmICh0aGlzLmRlbXV4aW5nKSB7XFxuICAgICAgcmV0dXJuO1xcbiAgICB9XFxuXFxuICAgIGxldCBidWZmZXIgPSB0aGlzLmlucHV0QnVmZmVyO1xcbiAgICBsZXQgZnJhZ3MgPSB7IHBhdDogW10sIHBtdDogW10gfTtcXG4gICAgbGV0IHBlc2VzID0ge307XFxuXFxuICAgIC8vIFJlYWQgVFMgc2VnbWVudFxcbiAgICB3aGlsZSAoYnVmZmVyLmxlbmd0aCA+PSAxODgpIHtcXG4gICAgICB3aGlsZSAoYnVmZmVyLmxlbmd0aCA+PSAxICYmIGJ1ZmZlci5hcnJheVswXVtidWZmZXIub2Zmc2V0XSAhPT0gNzEpIHtcXG4gICAgICAgIGJ1ZmZlci5zaGlmdCgxKTtcXG4gICAgICB9XFxuICAgICAgbGV0IGJ1ZiA9IGJ1ZmZlci5zaGlmdCgxODgpO1xcbiAgICAgIC8vIGNvbnNvbGUubG9nKGJ1Zik7XFxuICAgICAgbGV0IHRzU3RyZWFtID0gbmV3IF94Z3BsYXllclV0aWxzLlN0cmVhbShidWYuYnVmZmVyKTtcXG4gICAgICBsZXQgdHMgPSB7fTtcXG4gICAgICBUc0RlbXV4ZXIucmVhZCh0c1N0cmVhbSwgdHMsIGZyYWdzKTtcXG4gICAgICBpZiAodHMucGVzKSB7XFxuICAgICAgICBpZiAoIXBlc2VzW3RzLmhlYWRlci5waWRdKSB7XFxuICAgICAgICAgIHBlc2VzW3RzLmhlYWRlci5waWRdID0gW107XFxuICAgICAgICB9XFxuICAgICAgICBwZXNlc1t0cy5oZWFkZXIucGlkXS5wdXNoKHRzLnBlcyk7XFxuICAgICAgICB0cy5wZXMuRVMuYnVmZmVyID0gW3RzLnBlcy5FUy5idWZmZXJdO1xcbiAgICAgIH0gZWxzZSBpZiAocGVzZXNbdHMuaGVhZGVyLnBpZF0pIHtcXG4gICAgICAgIHBlc2VzW3RzLmhlYWRlci5waWRdW3Blc2VzW3RzLmhlYWRlci5waWRdLmxlbmd0aCAtIDFdLkVTLmJ1ZmZlci5wdXNoKHRzLnBheWxvYWQuc3RyZWFtKTtcXG4gICAgICB9XFxuICAgIH1cXG5cXG4gICAgLy8gR2V0IEZyYW1lcyBkYXRhXFxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgT2JqZWN0LmtleXMocGVzZXMpLmxlbmd0aDsgaSsrKSB7XFxuICAgICAgbGV0IGVwZXNlcyA9IHBlc2VzW09iamVjdC5rZXlzKHBlc2VzKVtpXV07XFxuICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBlcGVzZXMubGVuZ3RoOyBqKyspIHtcXG4gICAgICAgIGVwZXNlc1tqXS5pZCA9IE9iamVjdC5rZXlzKHBlc2VzKVtpXTtcXG4gICAgICAgIGVwZXNlc1tqXS5FUy5idWZmZXIgPSBUc0RlbXV4ZXIuTWVyZ2UoZXBlc2VzW2pdLkVTLmJ1ZmZlcik7XFxuICAgICAgICBpZiAoZXBlc2VzW2pdLnR5cGUgPT09ICdhdWRpbycpIHtcXG4gICAgICAgICAgdGhpcy5wdXNoQXVkaW9TYW1wbGUoZXBlc2VzW2pdKTtcXG4gICAgICAgIH0gZWxzZSBpZiAoZXBlc2VzW2pdLnR5cGUgPT09ICd2aWRlbycpIHtcXG4gICAgICAgICAgdGhpcy5wdXNoVmlkZW9TYW1wbGUoZXBlc2VzW2pdKTtcXG4gICAgICAgIH1cXG4gICAgICB9XFxuICAgIH1cXG5cXG4gICAgaWYgKHRoaXMuX2hhc0F1ZGlvTWV0YSkge1xcbiAgICAgIHRoaXMuZW1pdChERU1VWF9FVkVOVFMuREVNVVhfQ09NUExFVEUsICdhdWRpbycpO1xcbiAgICB9XFxuICAgIGlmICh0aGlzLl9oYXNWaWRlb01ldGEpIHtcXG4gICAgICB0aGlzLmVtaXQoREVNVVhfRVZFTlRTLkRFTVVYX0NPTVBMRVRFLCAndmlkZW8nKTtcXG4gICAgfVxcbiAgfVxcblxcbiAgcHVzaEF1ZGlvU2FtcGxlKHBlcykge1xcbiAgICBsZXQgdHJhY2s7XFxuICAgIGlmICghdGhpcy5fdHJhY2tzLmF1ZGlvVHJhY2spIHtcXG4gICAgICB0aGlzLl90cmFja3MuYXVkaW9UcmFjayA9IG5ldyBfeGdwbGF5ZXJCdWZmZXIuQXVkaW9UcmFjaygpO1xcbiAgICAgIHRyYWNrID0gdGhpcy5fdHJhY2tzLmF1ZGlvVHJhY2s7XFxuICAgICAgdHJhY2subWV0YSA9IG5ldyBfeGdwbGF5ZXJVdGlscy5BdWRpb1RyYWNrTWV0YSh7XFxuICAgICAgICBhdWRpb1NhbXBsZVJhdGU6IHBlcy5FUy5mcmVxdWVuY2UsXFxuICAgICAgICBzYW1wbGVSYXRlOiBwZXMuRVMuZnJlcXVlbmNlLFxcbiAgICAgICAgY2hhbm5lbENvdW50OiBwZXMuRVMuY2hhbm5lbCxcXG4gICAgICAgIGNvZGVjOiAnbXA0YS40MC4nICsgcGVzLkVTLmF1ZGlvT2JqZWN0VHlwZSxcXG4gICAgICAgIGNvbmZpZzogcGVzLkVTLmF1ZGlvQ29uZmlnLFxcbiAgICAgICAgaWQ6IDIsXFxuICAgICAgICBzYW1wbGVSYXRlSW5kZXg6IHBlcy5FUy5mcmVxdWVuY3lJbmRleFxcbiAgICAgIH0pO1xcbiAgICAgIHRyYWNrLm1ldGEucmVmU2FtcGxlRHVyYXRpb24gPSBNYXRoLmZsb29yKDEwMjQgLyB0cmFjay5tZXRhLmF1ZGlvU2FtcGxlUmF0ZSAqIHRyYWNrLm1ldGEudGltZXNjYWxlKTtcXG4gICAgICBpZiAoIXRoaXMuX2hhc0F1ZGlvTWV0YSkge1xcbiAgICAgICAgdGhpcy5faGFzQXVkaW9NZXRhID0gdHJ1ZTtcXG4gICAgICAgIHRoaXMuZW1pdChERU1VWF9FVkVOVFMuTUVUQURBVEFfUEFSU0VELCAnYXVkaW8nKTtcXG4gICAgICB9XFxuICAgIH0gZWxzZSB7XFxuICAgICAgdHJhY2sgPSB0aGlzLl90cmFja3MuYXVkaW9UcmFjaztcXG4gICAgfVxcbiAgICBsZXQgZGF0YSA9IG5ldyBVaW50OEFycmF5KHBlcy5FUy5idWZmZXIuYnVmZmVyLnNsaWNlKHBlcy5FUy5idWZmZXIucG9zaXRpb24sIHBlcy5FUy5idWZmZXIubGVuZ3RoKSk7XFxuICAgIGxldCBkdHMgPSBwYXJzZUludChwZXMucHRzIC8gOTApO1xcbiAgICBsZXQgcHRzID0gcGFyc2VJbnQocGVzLnB0cyAvIDkwKTtcXG4gICAgbGV0IHNhbXBsZSA9IG5ldyBfeGdwbGF5ZXJVdGlscy5BdWRpb1RyYWNrU2FtcGxlKHsgZHRzLCBwdHMsIGRhdGEgfSk7XFxuICAgIHRyYWNrLnNhbXBsZXMucHVzaChzYW1wbGUpO1xcbiAgfVxcblxcbiAgcHVzaFZpZGVvU2FtcGxlKHBlcykge1xcbiAgICBsZXQgbmFscyA9IF94Z3BsYXllckNvZGVjLk5hbHVuaXQuZ2V0TmFsdW5pdHMocGVzLkVTLmJ1ZmZlcik7XFxuICAgIGxldCB0cmFjaztcXG4gICAgaWYgKCF0aGlzLl90cmFja3MudmlkZW9UcmFjaykge1xcbiAgICAgIHRoaXMuX3RyYWNrcy52aWRlb1RyYWNrID0gbmV3IF94Z3BsYXllckJ1ZmZlci5WaWRlb1RyYWNrKCk7XFxuICAgICAgdHJhY2sgPSB0aGlzLl90cmFja3MudmlkZW9UcmFjaztcXG4gICAgICB0cmFjay5tZXRhID0gbmV3IF94Z3BsYXllclV0aWxzLlZpZGVvVHJhY2tNZXRhKCk7XFxuICAgIH0gZWxzZSB7XFxuICAgICAgdHJhY2sgPSB0aGlzLl90cmFja3MudmlkZW9UcmFjaztcXG4gICAgfVxcbiAgICBsZXQgc2FtcGxlTGVuZ3RoID0gMDtcXG4gICAgbGV0IHNwcyA9IGZhbHNlO1xcbiAgICBsZXQgcHBzID0gZmFsc2U7XFxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbmFscy5sZW5ndGg7IGkrKykge1xcbiAgICAgIGxldCBuYWwgPSBuYWxzW2ldO1xcbiAgICAgIGlmIChuYWwuc3BzKSB7XFxuICAgICAgICAvLyBUT0RP77yaVmlkZW9UcmFja+S/oeaBryDlkowgTWV0YSDkv6Hmga9cXG4gICAgICAgIGlmICh0cmFjay5zcHMgJiYgVHNEZW11eGVyLmNvbXBhaXJlVWludDgobmFsLmJvZHksIHRyYWNrLnNwcykpIHtcXG4gICAgICAgICAgY29udGludWU7XFxuICAgICAgICB9XFxuXFxuICAgICAgICBzcHMgPSBuYWw7XFxuICAgICAgICB0cmFjay5zcHMgPSBuYWwuYm9keTtcXG4gICAgICAgIHRyYWNrLm1ldGEuY2hyb21hRm9ybWF0ID0gc3BzLnNwcy5jaHJvbWFfZm9ybWF0O1xcbiAgICAgICAgdHJhY2subWV0YS5jb2RlYyA9ICdhdmMxLic7XFxuICAgICAgICBmb3IgKHZhciBqID0gMTsgaiA8IDQ7IGorKykge1xcbiAgICAgICAgICB2YXIgaCA9IHNwcy5ib2R5W2pdLnRvU3RyaW5nKDE2KTtcXG4gICAgICAgICAgaWYgKGgubGVuZ3RoIDwgMikge1xcbiAgICAgICAgICAgIGggPSAnMCcgKyBoO1xcbiAgICAgICAgICB9XFxuICAgICAgICAgIHRyYWNrLm1ldGEuY29kZWMgKz0gaDtcXG4gICAgICAgIH1cXG4gICAgICAgIHRyYWNrLm1ldGEuY29kZWNIZWlnaHQgPSBzcHMuc3BzLmNvZGVjX3NpemUuaGVpZ2h0O1xcbiAgICAgICAgdHJhY2subWV0YS5jb2RlY1dpZHRoID0gc3BzLnNwcy5jb2RlY19zaXplLndpZHRoO1xcbiAgICAgICAgdHJhY2subWV0YS5mcmFtZVJhdGUgPSBzcHMuc3BzLmZyYW1lX3JhdGU7XFxuICAgICAgICB0cmFjay5tZXRhLmlkID0gMTtcXG4gICAgICAgIHRyYWNrLm1ldGEubGV2ZWwgPSBzcHMuc3BzLmxldmVsX3N0cmluZztcXG4gICAgICAgIHRyYWNrLm1ldGEucHJlc2VudEhlaWdodCA9IHNwcy5zcHMucHJlc2VudF9zaXplLmhlaWdodDtcXG4gICAgICAgIHRyYWNrLm1ldGEucHJlc2VudFdpZHRoID0gc3BzLnNwcy5wcmVzZW50X3NpemUud2lkdGg7XFxuICAgICAgICB0cmFjay5tZXRhLnByb2ZpbGUgPSBzcHMuc3BzLnByb2ZpbGVfc3RyaW5nO1xcbiAgICAgICAgdHJhY2subWV0YS5yZWZTYW1wbGVEdXJhdGlvbiA9IE1hdGguZmxvb3IodHJhY2subWV0YS50aW1lc2NhbGUgKiAoc3BzLnNwcy5mcmFtZV9yYXRlLmZwc19kZW4gLyBzcHMuc3BzLmZyYW1lX3JhdGUuZnBzX251bSkpO1xcbiAgICAgICAgdHJhY2subWV0YS5zYXJSYXRpbyA9IHNwcy5zcHMuc2FyX3JhdGlvID8gc3BzLnNwcy5zYXJfcmF0aW8gOiBzcHMuc3BzLnBhcl9yYXRpbztcXG4gICAgICB9IGVsc2UgaWYgKG5hbC5wcHMpIHtcXG4gICAgICAgIHRyYWNrLnBwcyA9IG5hbC5ib2R5O1xcbiAgICAgICAgcHBzID0gbmFsO1xcbiAgICAgIH0gZWxzZSB7XFxuICAgICAgICBzYW1wbGVMZW5ndGggKz0gNCArIG5hbC5ib2R5LmJ5dGVMZW5ndGg7XFxuICAgICAgfVxcbiAgICB9XFxuXFxuICAgIGlmIChzcHMgJiYgcHBzKSB7XFxuICAgICAgdHJhY2subWV0YS5hdmNjID0gX3hncGxheWVyQ29kZWMuTmFsdW5pdC5nZXRBdmNjKHNwcy5ib2R5LCBwcHMuYm9keSk7XFxuICAgICAgaWYgKCF0aGlzLl9oYXNWaWRlb01ldGEpIHtcXG4gICAgICAgIHRoaXMuX2hhc1ZpZGVvTWV0YSA9IHRydWU7XFxuICAgICAgICB0aGlzLmVtaXQoREVNVVhfRVZFTlRTLk1FVEFEQVRBX1BBUlNFRCwgJ3ZpZGVvJyk7XFxuICAgICAgfVxcbiAgICB9XFxuXFxuICAgIGxldCBkYXRhID0gbmV3IFVpbnQ4QXJyYXkoc2FtcGxlTGVuZ3RoKTtcXG4gICAgbGV0IG9mZnNldCA9IDA7XFxuICAgIGxldCBpc0tleWZyYW1lID0gZmFsc2U7XFxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbmFscy5sZW5ndGg7IGkrKykge1xcbiAgICAgIGxldCBuYWwgPSBuYWxzW2ldO1xcbiAgICAgIGxldCBsZW5ndGggPSBuYWwuYm9keS5ieXRlTGVuZ3RoO1xcbiAgICAgIGlmIChuYWwuaWRyKSB7XFxuICAgICAgICBpc0tleWZyYW1lID0gdHJ1ZTtcXG4gICAgICB9XFxuICAgICAgaWYgKCFuYWwucHBzICYmICFuYWwuc3BzKSB7XFxuICAgICAgICBkYXRhLnNldChuZXcgVWludDhBcnJheShbbGVuZ3RoID4+PiAyNCAmIDB4ZmYsIGxlbmd0aCA+Pj4gMTYgJiAweGZmLCBsZW5ndGggPj4+IDggJiAweGZmLCBsZW5ndGggJiAweGZmXSksIG9mZnNldCk7XFxuICAgICAgICBvZmZzZXQgKz0gNDtcXG4gICAgICAgIGRhdGEuc2V0KG5hbC5ib2R5LCBvZmZzZXQpO1xcbiAgICAgICAgb2Zmc2V0ICs9IGxlbmd0aDtcXG4gICAgICB9XFxuICAgIH1cXG4gICAgbGV0IHNhbXBsZSA9IG5ldyBfeGdwbGF5ZXJVdGlscy5WaWRlb1RyYWNrU2FtcGxlKHtcXG4gICAgICBkdHM6IHBhcnNlSW50KHBlcy5kdHMgLyA5MCksXFxuICAgICAgcHRzOiBwYXJzZUludChwZXMucHRzIC8gOTApLFxcbiAgICAgIGN0czogKHBlcy5wdHMgLSBwZXMuZHRzKSAvIDkwLFxcbiAgICAgIG9yaWdpbkR0czogcGVzLmR0cyxcXG4gICAgICBpc0tleWZyYW1lLFxcbiAgICAgIGRhdGFcXG4gICAgfSk7XFxuICAgIHRyYWNrLnNhbXBsZXMucHVzaChzYW1wbGUpO1xcbiAgfVxcblxcbiAgZGVzdG9yeSgpIHtcXG4gICAgdGhpcy5vZmYoREVNVVhfRVZFTlRTLkRFTVVYX1NUQVJULCB0aGlzLmRlbXV4KTtcXG4gICAgdGhpcy5jb25maWdzID0ge307XFxuICAgIHRoaXMuZGVtdXhpbmcgPSBmYWxzZTtcXG4gICAgdGhpcy5wYXQgPSBbXTtcXG4gICAgdGhpcy5wbXQgPSBbXTtcXG4gICAgdGhpcy5faGFzVmlkZW9NZXRhID0gZmFsc2U7XFxuICAgIHRoaXMuX2hhc0F1ZGlvTWV0YSA9IGZhbHNlO1xcbiAgfVxcblxcbiAgc3RhdGljIGNvbXBhaXJlVWludDgoYSwgYikge1xcbiAgICBpZiAoYS5ieXRlTGVuZ3RoICE9PSBiLmJ5dGVMZW5ndGgpIHtcXG4gICAgICByZXR1cm4gZmFsc2U7XFxuICAgIH1cXG4gICAgbGV0IHJldCA9IHRydWU7XFxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYS5ieXRlTGVuZ3RoOyBpKyspIHtcXG4gICAgICBpZiAoYVtpXSAhPT0gYltpXSkge1xcbiAgICAgICAgcmV0ID0gZmFsc2U7XFxuICAgICAgfVxcbiAgICB9XFxuICAgIHJldHVybiByZXQ7XFxuICB9XFxuICBzdGF0aWMgTWVyZ2UoYnVmZmVycykge1xcbiAgICBsZXQgZGF0YTtcXG4gICAgbGV0IGxlbmd0aCA9IDA7XFxuICAgIGxldCBvZmZzZXQgPSAwO1xcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGJ1ZmZlcnMubGVuZ3RoOyBpKyspIHtcXG4gICAgICBsZW5ndGggKz0gYnVmZmVyc1tpXS5sZW5ndGggLSBidWZmZXJzW2ldLnBvc2l0aW9uO1xcbiAgICB9XFxuXFxuICAgIGRhdGEgPSBuZXcgVWludDhBcnJheShsZW5ndGgpO1xcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGJ1ZmZlcnMubGVuZ3RoOyBpKyspIHtcXG4gICAgICBsZXQgYnVmZmVyID0gYnVmZmVyc1tpXTtcXG4gICAgICBkYXRhLnNldChuZXcgVWludDhBcnJheShidWZmZXIuYnVmZmVyLCBidWZmZXIucG9zaXRpb24pLCBvZmZzZXQpO1xcbiAgICAgIG9mZnNldCArPSBidWZmZXIubGVuZ3RoIC0gYnVmZmVyLnBvc2l0aW9uO1xcbiAgICB9XFxuICAgIHJldHVybiBuZXcgX3hncGxheWVyVXRpbHMuU3RyZWFtKGRhdGEuYnVmZmVyKTtcXG4gIH1cXG5cXG4gIHN0YXRpYyByZWFkKHN0cmVhbSwgdHMsIGZyYWdzKSB7XFxuICAgIFRzRGVtdXhlci5yZWFkSGVhZGVyKHN0cmVhbSwgdHMpO1xcbiAgICBUc0RlbXV4ZXIucmVhZFBheWxvYWQoc3RyZWFtLCB0cywgZnJhZ3MpO1xcbiAgICBpZiAodHMuaGVhZGVyLnBhY2tldCA9PT0gJ01FRElBJyAmJiB0cy5oZWFkZXIucGF5bG9hZCA9PT0gMSAmJiAhdHMudW5rbm93blBJRHMpIHtcXG4gICAgICB0cy5wZXMgPSBUc0RlbXV4ZXIuUEVTKHRzKTtcXG4gICAgfVxcbiAgfVxcblxcbiAgc3RhdGljIHJlYWRQYXlsb2FkKHN0cmVhbSwgdHMsIGZyYWdzKSB7XFxuICAgIGxldCBoZWFkZXIgPSB0cy5oZWFkZXI7XFxuICAgIGxldCBwaWQgPSBoZWFkZXIucGlkO1xcbiAgICBzd2l0Y2ggKHBpZCkge1xcbiAgICAgIGNhc2UgMDpcXG4gICAgICAgIFRzRGVtdXhlci5QQVQoc3RyZWFtLCB0cywgZnJhZ3MpO1xcbiAgICAgICAgYnJlYWs7XFxuICAgICAgY2FzZSAxOlxcbiAgICAgICAgVHNEZW11eGVyLkNBVChzdHJlYW0sIHRzLCBmcmFncyk7XFxuICAgICAgICBicmVhaztcXG4gICAgICBjYXNlIDI6XFxuICAgICAgICBUc0RlbXV4ZXIuVFNEVChzdHJlYW0sIHRzLCBmcmFncyk7XFxuICAgICAgICBicmVhaztcXG4gICAgICBjYXNlIDB4MWZmZjpcXG4gICAgICAgIGJyZWFrO1xcbiAgICAgIGRlZmF1bHQ6XFxuICAgICAgICAvLyBUT0RPOiBzb21l55qE5YaZ5rOV5LiN5aSq5aW977yM5b6X5pS5XFxuICAgICAgICBpZiAoZnJhZ3MucGF0LnNvbWUoaXRlbSA9PiB7XFxuICAgICAgICAgIHJldHVybiBpdGVtLnBpZCA9PT0gcGlkO1xcbiAgICAgICAgfSkpIHtcXG4gICAgICAgICAgVHNEZW11eGVyLlBNVChzdHJlYW0sIHRzLCBmcmFncyk7XFxuICAgICAgICB9IGVsc2Uge1xcbiAgICAgICAgICBsZXQgc3RzID0gZnJhZ3MucG10ID8gZnJhZ3MucG10LmZpbHRlcihpdGVtID0+IGl0ZW0ucGlkID09PSBwaWQpIDogW107XFxuICAgICAgICAgIGlmIChzdHMubGVuZ3RoID4gMCkge1xcbiAgICAgICAgICAgIFRzRGVtdXhlci5NZWRpYShzdHJlYW0sIHRzLCBTdHJlYW1UeXBlW3N0c1swXS5zdHJlYW1UeXBlXVswXSk7XFxuICAgICAgICAgIH0gZWxzZSB7XFxuICAgICAgICAgICAgdHMudW5rbm93blBJRHMgPSB0cnVlO1xcbiAgICAgICAgICB9O1xcbiAgICAgICAgfVxcbiAgICB9XFxuICB9XFxuXFxuICBzdGF0aWMgcmVhZEhlYWRlcihzdHJlYW0sIHRzKSB7XFxuICAgIGxldCBoZWFkZXIgPSB7fTtcXG4gICAgaGVhZGVyLnN5bmMgPSBzdHJlYW0ucmVhZFVpbnQ4KCk7XFxuICAgIGxldCBuZXh0ID0gc3RyZWFtLnJlYWRVaW50MTYoKTtcXG4gICAgaGVhZGVyLmVycm9yID0gbmV4dCA+Pj4gMTU7XFxuICAgIGhlYWRlci5wYXlsb2FkID0gbmV4dCA+Pj4gMTQgJiAxO1xcbiAgICBoZWFkZXIucHJpb3JpdHkgPSBuZXh0ID4+PiAxMyAmIDE7XFxuICAgIGhlYWRlci5waWQgPSBuZXh0ICYgMHgxZmZmO1xcblxcbiAgICBuZXh0ID0gc3RyZWFtLnJlYWRVaW50OCgpO1xcblxcbiAgICBoZWFkZXIuc2NyYW1ibGluZyA9IG5leHQgPj4gNiAmIDB4MzsgLy8g5piv5ZCm5Yqg5a+G77yMMDDooajnpLrkuI3liqDlr4ZcXG5cXG4gICAgLyoqXFxuICAgICAqIDAwIElTTy9JRUPmnKrmnaXkvb/nlKjkv53nlZlcXG4gICAgICogMDEg5rKh5pyJ6LCD5pW05a2X5q6177yM5LuF5ZCr5pyJMTg0QuacieaViOWHgOiNt1xcbiAgICAgKiAwMiDmsqHmnInmnInmlYjlh4DojbfvvIzku4XlkKvmnIkxODNC6LCD5pW05a2X5q61XFxuICAgICAqIDAzIDB+MTgyQuiwg+aVtOWtl+auteWQjuS4uuacieaViOWHgOiNt1xcbiAgICAgKi9cXG4gICAgaGVhZGVyLmFkYXB0YXRpb24gPSBuZXh0ID4+IDQgJiAweDM7XFxuICAgIGhlYWRlci5jb250aW51aXR5ID0gbmV4dCAmIDE1O1xcbiAgICBoZWFkZXIucGFja2V0ID0gaGVhZGVyLnBpZCA9PT0gMCA/ICdQQVQnIDogJ01FRElBJztcXG4gICAgdHMuaGVhZGVyID0gaGVhZGVyO1xcbiAgfVxcblxcbiAgc3RhdGljIFBBVChzdHJlYW0sIHRzLCBmcmFncykge1xcbiAgICBsZXQgcmV0ID0ge307XFxuICAgIGxldCBuZXh0ID0gc3RyZWFtLnJlYWRVaW50OCgpO1xcbiAgICBzdHJlYW0uc2tpcChuZXh0KTtcXG4gICAgbmV4dCA9IHN0cmVhbS5yZWFkVWludDgoKTtcXG4gICAgcmV0LnRhYmVsSUQgPSBuZXh0O1xcbiAgICBuZXh0ID0gc3RyZWFtLnJlYWRVaW50MTYoKTtcXG4gICAgcmV0LmVycm9yID0gbmV4dCA+Pj4gNztcXG4gICAgcmV0Lnplcm8gPSBuZXh0ID4+PiA2ICYgMTtcXG4gICAgcmV0LnNlY3Rpb25MZW5ndGggPSBuZXh0ICYgMHhmZmY7XFxuICAgIHJldC5zdHJlYW1JRCA9IHN0cmVhbS5yZWFkVWludDE2KCk7XFxuICAgIHJldC5jdXJyZW50ID0gc3RyZWFtLnJlYWRVaW50OCgpICYgMTtcXG4gICAgcmV0LnNlY3Rpb25OdW1iZXIgPSBzdHJlYW0ucmVhZFVpbnQ4KCk7XFxuICAgIHJldC5sYXN0U2VjdGlvbk51bWJlciA9IHN0cmVhbS5yZWFkVWludDgoKTtcXG4gICAgbGV0IE4gPSAocmV0LnNlY3Rpb25MZW5ndGggLSA5KSAvIDQ7XFxuICAgIGxldCBsaXN0ID0gW107XFxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgTjsgaSsrKSB7XFxuICAgICAgbGV0IHByb2dyYW1OdW1iZXIgPSBzdHJlYW0ucmVhZFVpbnQxNigpO1xcbiAgICAgIGxldCBwaWQgPSBzdHJlYW0ucmVhZFVpbnQxNigpICYgMHgxZmZmO1xcbiAgICAgIGxpc3QucHVzaCh7XFxuICAgICAgICBwcm9ncmFtOiBwcm9ncmFtTnVtYmVyLFxcbiAgICAgICAgcGlkLFxcbiAgICAgICAgdHlwZTogcHJvZ3JhbU51bWJlciA9PT0gMCA/ICduZXR3b3JrJyA6ICdtYXBQSUQnXFxuICAgICAgfSk7XFxuICAgIH1cXG4gICAgaWYgKGxpc3QubGVuZ3RoID4gMCkge1xcbiAgICAgIGZyYWdzLnBhdCA9IGZyYWdzLnBhdC5jb25jYXQobGlzdCk7XFxuICAgIH1cXG4gICAgcmV0Lmxpc3QgPSBsaXN0O1xcbiAgICByZXQucHJvZ3JhbSA9IHN0cmVhbS5yZWFkVWludDE2KCk7XFxuICAgIHJldC5waWQgPSBzdHJlYW0ucmVhZFVpbnQxNigpICYgMHgxZmZmO1xcbiAgICB0cy5wYXlsb2FkID0gcmV0O1xcbiAgICAvLyBUT0RPIENSQ1xcbiAgfVxcblxcbiAgc3RhdGljIFBNVChzdHJlYW0sIHRzLCBmcmFncykge1xcbiAgICBsZXQgcmV0ID0ge307XFxuICAgIGxldCBoZWFkZXIgPSB0cy5oZWFkZXI7XFxuICAgIGhlYWRlci5wYWNrZXQgPSAnUE1UJztcXG4gICAgbGV0IG5leHQgPSBzdHJlYW0ucmVhZFVpbnQ4KCk7XFxuICAgIHN0cmVhbS5za2lwKG5leHQpO1xcbiAgICBuZXh0ID0gc3RyZWFtLnJlYWRVaW50OCgpO1xcbiAgICByZXQudGFibGVJRCA9IG5leHQ7XFxuICAgIG5leHQgPSBzdHJlYW0ucmVhZFVpbnQxNigpO1xcbiAgICByZXQuc2VjdGlvbkxlbmd0aCA9IG5leHQgJiAweGZmZjtcXG4gICAgcmV0LnByb2dyYW0gPSBzdHJlYW0ucmVhZFVpbnQxNigpO1xcbiAgICByZXQuY3VycmVudCA9IHN0cmVhbS5yZWFkVWludDgoKSAmIDE7XFxuICAgIHJldC5vcmRlciA9IHN0cmVhbS5yZWFkVWludDgoKTtcXG4gICAgcmV0Lmxhc3RPcmRlciA9IHN0cmVhbS5yZWFkVWludDgoKTtcXG4gICAgcmV0LlBDUl9QSUQgPSBzdHJlYW0ucmVhZFVpbnQxNigpICYgMHgxZmZmO1xcbiAgICByZXQucHJvZ3JhbUxlbmd0aCA9IHN0cmVhbS5yZWFkVWludDE2KCkgJiAweGZmZjtcXG4gICAgbGV0IE4gPSAocmV0LnNlY3Rpb25MZW5ndGggLSAxMykgLyA1O1xcbiAgICBsZXQgbGlzdCA9IFtdO1xcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IE47IGkrKykge1xcbiAgICAgIGxpc3QucHVzaCh7XFxuICAgICAgICBzdHJlYW1UeXBlOiBzdHJlYW0ucmVhZFVpbnQ4KCksXFxuICAgICAgICBwaWQ6IHN0cmVhbS5yZWFkVWludDE2KCkgJiAweDFmZmYsIC8vIDB4MDdlNSDop4bpopHvvIwweDA3ZTZcXG4gICAgICAgIGVzOiBzdHJlYW0ucmVhZFVpbnQxNigpICYgMHhmZmZcXG4gICAgICB9KTtcXG4gICAgfVxcbiAgICByZXQubGlzdCA9IGxpc3Q7XFxuICAgIGlmICghdGhpcy5wbXQpIHtcXG4gICAgICB0aGlzLnBtdCA9IFtdO1xcbiAgICB9XFxuICAgIGZyYWdzLnBtdCA9IHRoaXMucG10LmNvbmNhdChsaXN0Lm1hcChpdGVtID0+IHtcXG4gICAgICByZXR1cm4ge1xcbiAgICAgICAgcGlkOiBpdGVtLnBpZCxcXG4gICAgICAgIGVzOiBpdGVtLmVzLFxcbiAgICAgICAgc3RyZWFtVHlwZTogaXRlbS5zdHJlYW1UeXBlLFxcbiAgICAgICAgcHJvZ3JhbTogcmV0LnByb2dyYW1cXG4gICAgICB9O1xcbiAgICB9KSk7XFxuICAgIHRzLnBheWxvYWQgPSByZXQ7XFxuICB9XFxuXFxuICBzdGF0aWMgTWVkaWEoc3RyZWFtLCB0cywgdHlwZSkge1xcbiAgICBsZXQgaGVhZGVyID0gdHMuaGVhZGVyO1xcbiAgICBsZXQgcGF5bG9hZCA9IHt9O1xcbiAgICBoZWFkZXIudHlwZSA9IHR5cGU7XFxuICAgIGlmIChoZWFkZXIuYWRhcHRhdGlvbiA9PT0gMHgwMykge1xcbiAgICAgIHBheWxvYWQuYWRhcHRhdGlvbkxlbmd0aCA9IHN0cmVhbS5yZWFkVWludDgoKTtcXG4gICAgICBpZiAocGF5bG9hZC5hZGFwdGF0aW9uTGVuZ3RoID4gMCkge1xcbiAgICAgICAgbGV0IG5leHQgPSBzdHJlYW0ucmVhZFVpbnQ4KCk7XFxuICAgICAgICBwYXlsb2FkLmRpc2NvbnRpbnVlID0gbmV4dCA+Pj4gNztcXG4gICAgICAgIHBheWxvYWQuYWNjZXNzID0gbmV4dCA+Pj4gNiAmIDB4MDE7XFxuICAgICAgICBwYXlsb2FkLnByaW9yaXR5ID0gbmV4dCA+Pj4gNSAmIDB4MDE7XFxuICAgICAgICBwYXlsb2FkLlBDUiA9IG5leHQgPj4+IDQgJiAweDAxO1xcbiAgICAgICAgcGF5bG9hZC5PUENSID0gbmV4dCA+Pj4gMyAmIDB4MDE7XFxuICAgICAgICBwYXlsb2FkLnNwbGljZVBvaW50ID0gbmV4dCA+Pj4gMiAmIDB4MDE7XFxuICAgICAgICBwYXlsb2FkLnRyYW5zcG9ydFByaXZhdGUgPSBuZXh0ID4+PiAxICYgMHgwMTtcXG4gICAgICAgIHBheWxvYWQuYWRhcHRhdGlvbkZpZWxkID0gbmV4dCAmIDB4MDE7XFxuICAgICAgICBsZXQgX3N0YXJ0ID0gc3RyZWFtLnBvc2l0aW9uO1xcbiAgICAgICAgaWYgKHBheWxvYWQuUENSID09PSAxKSB7XFxuICAgICAgICAgIHBheWxvYWQucHJvZ3JhbUNsb2NrQmFzZSA9IHN0cmVhbS5yZWFkVWludDMyKCkgPDwgMTtcXG4gICAgICAgICAgbmV4dCA9IHN0cmVhbS5yZWFkVWludDE2KCk7XFxuICAgICAgICAgIHBheWxvYWQucHJvZ3JhbUNsb2NrQmFzZSB8PSBuZXh0ID4+PiAxNTtcXG4gICAgICAgICAgcGF5bG9hZC5wcm9ncmFtQ2xvY2tFeHRlbnNpb24gPSBuZXh0ICYgMHgxZmY7XFxuICAgICAgICB9XFxuICAgICAgICBpZiAocGF5bG9hZC5PUENSID09PSAxKSB7XFxuICAgICAgICAgIHBheWxvYWQub3JpZ2luUHJvZ3JhbUNsb2NrQmFzZSA9IHN0cmVhbS5yZWFkVWludDMyKCkgPDwgMTtcXG4gICAgICAgICAgbmV4dCA9IHN0cmVhbS5yZWFkVWludDE2KCk7XFxuICAgICAgICAgIHBheWxvYWQub3JpZ2luUHJvZ3JhbUNsb2NrQmFzZSArPSBuZXh0ID4+PiAxNTtcXG4gICAgICAgICAgcGF5bG9hZC5vcmlnaW5Qcm9ncmFtQ2xvY2tFeHRlbnNpb24gPSBuZXh0ICYgMHgxZmY7XFxuICAgICAgICB9XFxuICAgICAgICBpZiAocGF5bG9hZC5zcGxpY2VQb2ludCA9PT0gMSkge1xcbiAgICAgICAgICBwYXlsb2FkLnNwbGljZUNvdW50ZG93biA9IHN0cmVhbS5yZWFkVWludDgoKTtcXG4gICAgICAgIH1cXG4gICAgICAgIGlmIChwYXlsb2FkLnRyYW5zcG9ydFByaXZhdGUgPT09IDEpIHtcXG4gICAgICAgICAgbGV0IGxlbmd0aCA9IHN0cmVhbS5yZWFkVWludDgoKTtcXG4gICAgICAgICAgbGV0IHRyYW5zcG9ydFByaXZhdGVEYXRhID0gW107XFxuICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcXG4gICAgICAgICAgICB0cmFuc3BvcnRQcml2YXRlRGF0YS5wdXNoKHN0cmVhbS5yZWFkVWludDgoKSk7XFxuICAgICAgICAgIH1cXG4gICAgICAgIH1cXG4gICAgICAgIGlmIChwYXlsb2FkLmFkYXB0YXRpb25GaWVsZCA9PT0gMSkge1xcbiAgICAgICAgICBsZXQgbGVuZ3RoID0gc3RyZWFtLnJlYWRVaW50OCgpO1xcbiAgICAgICAgICBsZXQgbmV4dCA9IHN0cmVhbS5yZWFkVWludDgoKTtcXG4gICAgICAgICAgbGV0IHN0YXJ0ID0gc3RyZWFtLnBvc2l0aW9uO1xcbiAgICAgICAgICBsZXQgbHR3ID0gbmV4dCA+Pj4gNztcXG4gICAgICAgICAgbGV0IHBpZWNld2lzZSA9IG5leHQgPj4+IDYgJiAweDE7XFxuICAgICAgICAgIGxldCBzZWFtbGVzcyA9IG5leHQgPj4+IDUgJiAweDE7XFxuICAgICAgICAgIGlmIChsdHcgPT09IDEpIHtcXG4gICAgICAgICAgICBuZXh0ID0gc3RyZWFtLnJlYWRVaW50MTYoKTtcXG4gICAgICAgICAgICBwYXlsb2FkLmx0d1ZhbGlkID0gbmV4dCA+Pj4gMTU7XFxuICAgICAgICAgICAgcGF5bG9hZC5sdHdPZmZzZXQgPSBuZXh0ICYgMHhlZmZmO1xcbiAgICAgICAgICB9XFxuICAgICAgICAgIGlmIChwaWVjZXdpc2UgPT09IDEpIHtcXG4gICAgICAgICAgICBuZXh0ID0gc3RyZWFtLnJlYWRVaW50MjQoKTtcXG4gICAgICAgICAgICBwYXlsb2FkLnBpZWNld2lzZVJhdGUgPSBuZXh0ICYgMHgzZmZmZmY7XFxuICAgICAgICAgIH1cXG4gICAgICAgICAgaWYgKHNlYW1sZXNzID09PSAxKSB7XFxuICAgICAgICAgICAgbmV4dCA9IHN0cmVhbS5yZWFkSW50OCgpO1xcbiAgICAgICAgICAgIHBheWxvYWQuc3BsaWNlVHlwZSA9IG5leHQgPj4+IDQ7XFxuICAgICAgICAgICAgcGF5bG9hZC5kdHNOZXh0QVUxID0gbmV4dCA+Pj4gMSAmIDB4NztcXG4gICAgICAgICAgICBwYXlsb2FkLm1hcmtlcjEgPSBuZXh0ICYgMHgxO1xcbiAgICAgICAgICAgIG5leHQgPSBzdHJlYW0ucmVhZFVpbnQxNigpO1xcbiAgICAgICAgICAgIHBheWxvYWQuZHRzTmV4dEFVMiA9IG5leHQgPj4+IDE7XFxuICAgICAgICAgICAgcGF5bG9hZC5tYXJrZXIyID0gbmV4dCAmIDB4MTtcXG4gICAgICAgICAgICBuZXh0ID0gc3RyZWFtLnJlYWRVaW50MTYoKTtcXG4gICAgICAgICAgICBwYXlsb2FkLmR0c05leHRBVTMgPSBuZXh0O1xcbiAgICAgICAgICB9XFxuICAgICAgICAgIHN0cmVhbS5za2lwKGxlbmd0aCAtIDEgLSAoc3RyZWFtLnBvc2l0aW9uIC0gc3RhcnQpKTtcXG4gICAgICAgIH1cXG4gICAgICAgIGxldCBsYXN0U3R1ZmZpbmcgPSBwYXlsb2FkLmFkYXB0YXRpb25MZW5ndGggLSAxIC0gKHN0cmVhbS5wb3NpdGlvbiAtIF9zdGFydCk7XFxuICAgICAgICBzdHJlYW0uc2tpcChsYXN0U3R1ZmZpbmcpO1xcbiAgICAgIH1cXG4gICAgfVxcbiAgICBwYXlsb2FkLnN0cmVhbSA9IG5ldyBfeGdwbGF5ZXJVdGlscy5TdHJlYW0oc3RyZWFtLmJ1ZmZlci5zbGljZShzdHJlYW0ucG9zaXRpb24pKTtcXG4gICAgdHMucGF5bG9hZCA9IHBheWxvYWQ7XFxuICB9XFxuXFxuICBzdGF0aWMgUEVTKHRzKSB7XFxuICAgIGxldCByZXQgPSB7fTtcXG4gICAgbGV0IGJ1ZmZlciA9IHRzLnBheWxvYWQuc3RyZWFtO1xcblxcbiAgICBsZXQgbmV4dCA9IGJ1ZmZlci5yZWFkVWludDI0KCk7XFxuICAgIGlmIChuZXh0ICE9PSAxKSB7XFxuICAgICAgcmV0LkVTID0ge307XFxuICAgICAgcmV0LkVTLmJ1ZmZlciA9IGJ1ZmZlcjtcXG4gICAgfSBlbHNlIHtcXG4gICAgICBsZXQgc3RyZWFtSUQgPSBidWZmZXIucmVhZFVpbnQ4KCk7XFxuICAgICAgaWYgKHN0cmVhbUlEID49IDB4ZTAgJiYgc3RyZWFtSUQgPD0gMHhlZikge1xcbiAgICAgICAgcmV0LnR5cGUgPSAndmlkZW8nO1xcbiAgICAgIH1cXG4gICAgICBpZiAoc3RyZWFtSUQgPj0gMHhjMCAmJiBzdHJlYW1JRCA8PSAweGRmKSB7XFxuICAgICAgICByZXQudHlwZSA9ICdhdWRpbyc7XFxuICAgICAgfVxcbiAgICAgIGxldCBwYWNrZXRMZW5ndGggPSBidWZmZXIucmVhZFVpbnQxNigpO1xcbiAgICAgIHJldC5wYWNrZXRMZW5ndGggPSBwYWNrZXRMZW5ndGg7XFxuICAgICAgaWYgKHJldC50eXBlID09PSAndmlkZW8nIHx8IHJldC50eXBlID09PSAnYXVkaW8nKSB7XFxuICAgICAgICBsZXQgbmV4dCA9IGJ1ZmZlci5yZWFkVWludDgoKTtcXG4gICAgICAgIGxldCBmaXJzdCA9IG5leHQgPj4+IDY7XFxuICAgICAgICBpZiAoZmlyc3QgIT09IDB4MDIpIHtcXG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdlcnJvciB3aGVuIHBhcnNlIHBlcyBoZWFkZXInKTtcXG4gICAgICAgIH1cXG4gICAgICAgIG5leHQgPSBidWZmZXIucmVhZFVpbnQ4KCk7XFxuICAgICAgICByZXQucHRzRFRTRmxhZyA9IG5leHQgPj4+IDY7XFxuICAgICAgICByZXQuZXNjckZsYWcgPSBuZXh0ID4+PiA1ICYgMHgwMTtcXG4gICAgICAgIHJldC5lc1JhdGVGbGFnID0gbmV4dCA+Pj4gNCAmIDB4MDE7XFxuICAgICAgICByZXQuZHNtRmxhZyA9IG5leHQgPj4+IDMgJiAweDAxO1xcbiAgICAgICAgcmV0LmFkZGl0aW9uYWxGbGFnID0gbmV4dCA+Pj4gMiAmIDB4MDE7XFxuICAgICAgICByZXQuY3JjRmxhZyA9IG5leHQgPj4+IDEgJiAweDAxO1xcbiAgICAgICAgcmV0LmV4dGVuc2lvbkZsYWcgPSBuZXh0ICYgMHgwMTtcXG4gICAgICAgIHJldC5wZXNIZWFkZXJMZW5ndGggPSBidWZmZXIucmVhZFVpbnQ4KCk7XFxuICAgICAgICBsZXQgTjEgPSByZXQucGVzSGVhZGVyTGVuZ3RoO1xcblxcbiAgICAgICAgaWYgKHJldC5wdHNEVFNGbGFnID09PSAyKSB7XFxuICAgICAgICAgIGxldCBwdHMgPSBbXTtcXG4gICAgICAgICAgbmV4dCA9IGJ1ZmZlci5yZWFkVWludDgoKTtcXG4gICAgICAgICAgcHRzLnB1c2gobmV4dCA+Pj4gMSAmIDB4MDcpO1xcbiAgICAgICAgICBuZXh0ID0gYnVmZmVyLnJlYWRVaW50MTYoKTtcXG4gICAgICAgICAgcHRzLnB1c2gobmV4dCA+Pj4gMSk7XFxuICAgICAgICAgIG5leHQgPSBidWZmZXIucmVhZFVpbnQxNigpO1xcbiAgICAgICAgICBwdHMucHVzaChuZXh0ID4+PiAxKTtcXG4gICAgICAgICAgcmV0LnB0cyA9IHB0c1swXSA8PCAzMCB8IHB0c1sxXSA8PCAxNSB8IHB0c1syXTtcXG4gICAgICAgICAgTjEgLT0gNTtcXG4gICAgICAgICAgLy8g6KeG6aKR5aaC5p6c5rKh5pyJZHRz55SocHRzXFxuICAgICAgICAgIGlmIChyZXQudHlwZSA9PT0gJ3ZpZGVvJykge1xcbiAgICAgICAgICAgIHJldC5kdHMgPSByZXQucHRzO1xcbiAgICAgICAgICB9XFxuICAgICAgICB9XFxuICAgICAgICBpZiAocmV0LnB0c0RUU0ZsYWcgPT09IDMpIHtcXG4gICAgICAgICAgbGV0IHB0cyA9IFtdO1xcbiAgICAgICAgICBuZXh0ID0gYnVmZmVyLnJlYWRVaW50OCgpO1xcbiAgICAgICAgICBwdHMucHVzaChuZXh0ID4+PiAxICYgMHgwNyk7XFxuICAgICAgICAgIG5leHQgPSBidWZmZXIucmVhZFVpbnQxNigpO1xcbiAgICAgICAgICBwdHMucHVzaChuZXh0ID4+PiAxKTtcXG4gICAgICAgICAgbmV4dCA9IGJ1ZmZlci5yZWFkVWludDE2KCk7XFxuICAgICAgICAgIHB0cy5wdXNoKG5leHQgPj4+IDEpO1xcbiAgICAgICAgICByZXQucHRzID0gcHRzWzBdIDw8IDMwIHwgcHRzWzFdIDw8IDE1IHwgcHRzWzJdO1xcbiAgICAgICAgICBsZXQgZHRzID0gW107XFxuICAgICAgICAgIG5leHQgPSBidWZmZXIucmVhZFVpbnQ4KCk7XFxuICAgICAgICAgIGR0cy5wdXNoKG5leHQgPj4+IDEgJiAweDA3KTtcXG4gICAgICAgICAgbmV4dCA9IGJ1ZmZlci5yZWFkVWludDE2KCk7XFxuICAgICAgICAgIGR0cy5wdXNoKG5leHQgPj4+IDEpO1xcbiAgICAgICAgICBuZXh0ID0gYnVmZmVyLnJlYWRVaW50MTYoKTtcXG4gICAgICAgICAgZHRzLnB1c2gobmV4dCA+Pj4gMSk7XFxuICAgICAgICAgIHJldC5kdHMgPSBkdHNbMF0gPDwgMzAgfCBkdHNbMV0gPDwgMTUgfCBkdHNbMl07XFxuICAgICAgICAgIE4xIC09IDEwO1xcbiAgICAgICAgfVxcbiAgICAgICAgaWYgKHJldC5lc2NyRmxhZyA9PT0gMSkge1xcbiAgICAgICAgICBsZXQgZXNjciA9IFtdO1xcbiAgICAgICAgICBsZXQgZXggPSBbXTtcXG4gICAgICAgICAgbmV4dCA9IGJ1ZmZlci5yZWFkVWludDgoKTtcXG4gICAgICAgICAgZXNjci5wdXNoKG5leHQgPj4+IDMgJiAweDA3KTtcXG4gICAgICAgICAgZXNjci5wdXNoKG5leHQgJiAweDAzKTtcXG4gICAgICAgICAgbmV4dCA9IGJ1ZmZlci5yZWFkVWludDE2KCk7XFxuICAgICAgICAgIGVzY3IucHVzaChuZXh0ID4+PiAxMyk7XFxuICAgICAgICAgIGVzY3IucHVzaChuZXh0ICYgMHgwMyk7XFxuICAgICAgICAgIG5leHQgPSBidWZmZXIucmVhZFVpbnQxNigpO1xcbiAgICAgICAgICBlc2NyLnB1c2gobmV4dCA+Pj4gMTMpO1xcbiAgICAgICAgICBleC5wdXNoKG5leHQgJiAweDAzKTtcXG4gICAgICAgICAgbmV4dCA9IGJ1ZmZlci5yZWFkVWludDgoKTtcXG4gICAgICAgICAgZXgucHVzaChuZXh0ID4+PiAxKTtcXG4gICAgICAgICAgcmV0LmVzY3IgPSAoZXNjclswXSA8PCAzMCB8IGVzY3JbMV0gPDwgMjggfCBlc2NyWzJdIDw8IDE1IHwgZXNjclszXSA8PCAxMyB8IGVzY3JbNF0pICogMzAwICsgKGV4WzBdIDw8IDcgfCBleFsxXSk7XFxuICAgICAgICAgIE4xIC09IDY7XFxuICAgICAgICB9XFxuICAgICAgICBpZiAocmV0LmVzUmF0ZUZsYWcgPT09IDEpIHtcXG4gICAgICAgICAgbmV4dCA9IGJ1ZmZlci5yZWFkVWludDI0KCk7XFxuICAgICAgICAgIHJldC5lc1JhdGUgPSBuZXh0ID4+PiAxICYgMHgzZmZmZmY7XFxuICAgICAgICAgIE4xIC09IDM7XFxuICAgICAgICB9XFxuICAgICAgICBpZiAocmV0LmRzbUZsYWcgPT09IDEpIHtcXG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdub3Qgc3VwcG9ydCBEU01fdHJpY2tfbW9kZScpO1xcbiAgICAgICAgfVxcbiAgICAgICAgaWYgKHJldC5hZGRpdGlvbmFsRmxhZyA9PT0gMSkge1xcbiAgICAgICAgICBuZXh0ID0gYnVmZmVyLnJlYWRVaW50OCgpO1xcbiAgICAgICAgICByZXQuYWRkaXRpb25hbENvcHlJbmZvID0gbmV4dCAmIDB4N2Y7XFxuICAgICAgICAgIE4xIC09IDE7XFxuICAgICAgICB9XFxuICAgICAgICBpZiAocmV0LmNyY0ZsYWcgPT09IDEpIHtcXG4gICAgICAgICAgcmV0LnBlc0NSQyA9IGJ1ZmZlci5yZWFkVWludDE2KCk7XFxuICAgICAgICAgIE4xIC09IDI7XFxuICAgICAgICB9XFxuICAgICAgICBpZiAocmV0LmV4dGVuc2lvbkZsYWcgPT09IDEpIHtcXG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdub3Qgc3VwcG9ydCBleHRlbnNpb24nKTtcXG4gICAgICAgIH1cXG4gICAgICAgIGlmIChOMSA+IDApIHtcXG4gICAgICAgICAgYnVmZmVyLnNraXAoTjEpO1xcbiAgICAgICAgfVxcbiAgICAgICAgcmV0LkVTID0gVHNEZW11eGVyLkVTKGJ1ZmZlciwgcmV0LnR5cGUpO1xcbiAgICAgIH0gZWxzZSB7XFxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2Zvcm1hdCBpcyBub3Qgc3VwcG9ydGVkJyk7XFxuICAgICAgfVxcbiAgICB9XFxuICAgIHJldHVybiByZXQ7XFxuICB9XFxuXFxuICBzdGF0aWMgRVMoYnVmZmVyLCB0eXBlKSB7XFxuICAgIGxldCBuZXh0O1xcbiAgICBsZXQgcmV0ID0ge307XFxuICAgIGlmICh0eXBlID09PSAndmlkZW8nKSB7XFxuICAgICAgbmV4dCA9IGJ1ZmZlci5yZWFkVWludDMyKCk7XFxuICAgICAgaWYgKG5leHQgIT09IDEpIHtcXG4gICAgICAgIGJ1ZmZlci5iYWNrKDQpO1xcbiAgICAgICAgbmV4dCA9IGJ1ZmZlci5yZWFkVWludDI0KCk7XFxuICAgICAgICBpZiAobmV4dCAhPT0gMSkge1xcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2gyNjQgbmFsIGhlYWRlciBwYXJzZSBmYWlsZWQnKTtcXG4gICAgICAgIH1cXG4gICAgICB9XFxuICAgICAgYnVmZmVyLnNraXAoMik7IC8vIDA5IEYwXFxuICAgICAgLy8gVE9ETyByZWFkbmFsdVxcbiAgICAgIHJldC5idWZmZXIgPSBidWZmZXI7XFxuICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gJ2F1ZGlvJykge1xcbiAgICAgIG5leHQgPSBidWZmZXIucmVhZFVpbnQxNigpO1xcbiAgICAgIC8vIGFkdHPnmoTlkIzmraXlrZfoioLvvIwxMuS9jVxcbiAgICAgIGlmIChuZXh0ID4+PiA0ICE9PSAweGZmZikge1xcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdhYWMgRVMgcGFyc2UgRXJyb3InKTtcXG4gICAgICB9XFxuICAgICAgY29uc3QgZnEgPSBbOTYwMDAsIDg4MjAwLCA2NDAwMCwgNDgwMDAsIDQ0MTAwLCAzMjAwMCwgMjQwMDAsIDIyMDUwLCAxNjAwMCwgMTIwMDAsIDExMDI1LCA4MDAwLCA3MzUwXTtcXG4gICAgICByZXQuaWQgPSAobmV4dCA+Pj4gMyAmIDB4MDEpID09PSAwID8gJ01QRUctNCcgOiAnTVBFRy0yJztcXG4gICAgICByZXQubGF5ZXIgPSBuZXh0ID4+PiAxICYgMHgwMztcXG4gICAgICByZXQuYWJzZW50ID0gbmV4dCAmIDB4MDE7XFxuICAgICAgbmV4dCA9IGJ1ZmZlci5yZWFkVWludDE2KCk7XFxuICAgICAgcmV0LmF1ZGlvT2JqZWN0VHlwZSA9IChuZXh0ID4+PiAxNCAmIDB4MDMpICsgMTtcXG4gICAgICByZXQucHJvZmlsZSA9IHJldC5hdWRpb09iamVjdFR5cGUgLSAxO1xcbiAgICAgIHJldC5mcmVxdWVuY3lJbmRleCA9IG5leHQgPj4+IDEwICYgMHgwZjtcXG4gICAgICByZXQuZnJlcXVlbmNlID0gZnFbcmV0LmZyZXF1ZW5jeUluZGV4XTtcXG4gICAgICByZXQuY2hhbm5lbCA9IG5leHQgPj4+IDYgJiAweDA3O1xcbiAgICAgIHJldC5mcmFtZUxlbmd0aCA9IChuZXh0ICYgMHgwMykgPDwgMTEgfCBidWZmZXIucmVhZFVpbnQxNigpID4+PiA1O1xcbiAgICAgIHJldC5hdWRpb0NvbmZpZyA9IFRzRGVtdXhlci5nZXRBdWRpb0NvbmZpZyhyZXQuYXVkaW9PYmplY3RUeXBlLCByZXQuY2hhbm5lbCwgcmV0LmZyZXF1ZW5jeUluZGV4KTtcXG4gICAgICBidWZmZXIuc2tpcCgxKTtcXG4gICAgICByZXQuYnVmZmVyID0gYnVmZmVyO1xcbiAgICB9IGVsc2Uge1xcbiAgICAgIHRocm93IG5ldyBFcnJvcihgRVMgJHt0eXBlfSBpcyBub3Qgc3VwcG9ydGVkYCk7XFxuICAgIH1cXG5cXG4gICAgcmV0dXJuIHJldDtcXG4gIH1cXG5cXG4gIHN0YXRpYyBUU0RUKHN0cmVhbSwgdHMsIGZyYWdzKSB7XFxuICAgIC8vIFRPRE9cXG4gICAgdHMucGF5bG9hZCA9IHt9O1xcbiAgfVxcblxcbiAgc3RhdGljIENBVChzdHJlYW0sIHRzLCBmcmFncykge1xcbiAgICBsZXQgcmV0ID0ge307XFxuICAgIHJldC50YWJsZUlEID0gc3RyZWFtLnJlYWRVaW50OCgpO1xcbiAgICBsZXQgbmV4dCA9IHN0cmVhbS5yZWFkVWludDE2KCk7XFxuICAgIHJldC5zZWN0aW9uSW5kaWNhdG9yID0gbmV4dCA+Pj4gNztcXG4gICAgcmV0LnNlY3Rpb25MZW5ndGggPSBuZXh0ICYgMHgwZmZmO1xcbiAgICBzdHJlYW0uc2tpcCgyKTtcXG4gICAgbmV4dCA9IHN0cmVhbS5yZWFkVWludDgoKTtcXG4gICAgcmV0LnZlcnNpb24gPSBuZXh0ID4+PiAzO1xcbiAgICByZXQuY3VycmVudE5leHRJbmRpY2F0b3IgPSBuZXh0ICYgMHgwMTtcXG4gICAgcmV0LnNlY3Rpb25OdW1iZXIgPSBzdHJlYW0ucmVhZFVpbnQ4KCk7XFxuICAgIHJldC5sYXN0U2VjdGlvbk51bWJlciA9IHN0cmVhbS5yZWFkVWludDgoKTtcXG4gICAgbGV0IE4gPSAodGhpcy5zZWN0aW9uTGVuZ3RoIC0gOSkgLyA0O1xcbiAgICBsZXQgbGlzdCA9IFtdO1xcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IE47IGkrKykge1xcbiAgICAgIGxpc3QucHVzaCh7fSk7XFxuICAgIH1cXG4gICAgcmV0LmNyYzMyID0gc3RyZWFtLnJlYWRVaW50MzIoKTtcXG4gICAgdHMucGF5bG9hZCA9IHJldDtcXG4gIH1cXG5cXG4gIHN0YXRpYyBnZXRBdWRpb0NvbmZpZyhhdWRpb09iamVjdFR5cGUsIGNoYW5uZWwsIHNhbXBsZUluZGV4KSB7XFxuICAgIGxldCB1c2VyQWdlbnQgPSBuYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCk7XFxuICAgIGxldCBjb25maWc7XFxuICAgIGxldCBleHRlbnNpb25TYW1wbGVJbmRleDtcXG4gICAgaWYgKC9maXJlZm94L2kudGVzdCh1c2VyQWdlbnQpKSB7XFxuICAgICAgaWYgKHNhbXBsZUluZGV4ID49IDYpIHtcXG4gICAgICAgIGF1ZGlvT2JqZWN0VHlwZSA9IDU7XFxuICAgICAgICBjb25maWcgPSBuZXcgQXJyYXkoNCk7XFxuICAgICAgICBleHRlbnNpb25TYW1wbGVJbmRleCA9IHNhbXBsZUluZGV4IC0gMztcXG4gICAgICB9IGVsc2Uge1xcbiAgICAgICAgYXVkaW9PYmplY3RUeXBlID0gMjtcXG4gICAgICAgIGNvbmZpZyA9IG5ldyBBcnJheSgyKTtcXG4gICAgICAgIGV4dGVuc2lvblNhbXBsZUluZGV4ID0gc2FtcGxlSW5kZXg7XFxuICAgICAgfVxcbiAgICB9IGVsc2UgaWYgKHVzZXJBZ2VudC5pbmRleE9mKCdhbmRyb2lkJykgIT09IC0xKSB7XFxuICAgICAgYXVkaW9PYmplY3RUeXBlID0gMjtcXG4gICAgICBjb25maWcgPSBuZXcgQXJyYXkoMik7XFxuICAgICAgZXh0ZW5zaW9uU2FtcGxlSW5kZXggPSBzYW1wbGVJbmRleDtcXG4gICAgfSBlbHNlIHtcXG4gICAgICBhdWRpb09iamVjdFR5cGUgPSA1O1xcbiAgICAgIGNvbmZpZyA9IG5ldyBBcnJheSg0KTtcXG4gICAgICBpZiAoc2FtcGxlSW5kZXggPj0gNikge1xcbiAgICAgICAgZXh0ZW5zaW9uU2FtcGxlSW5kZXggPSBzYW1wbGVJbmRleCAtIDM7XFxuICAgICAgfSBlbHNlIHtcXG4gICAgICAgIGlmIChjaGFubmVsID09PSAxKSB7XFxuICAgICAgICAgIGF1ZGlvT2JqZWN0VHlwZSA9IDI7XFxuICAgICAgICAgIGNvbmZpZyA9IG5ldyBBcnJheSgyKTtcXG4gICAgICAgIH1cXG4gICAgICAgIGV4dGVuc2lvblNhbXBsZUluZGV4ID0gc2FtcGxlSW5kZXg7XFxuICAgICAgfVxcbiAgICB9XFxuXFxuICAgIGNvbmZpZ1swXSA9IGF1ZGlvT2JqZWN0VHlwZSA8PCAzO1xcbiAgICBjb25maWdbMF0gfD0gKHNhbXBsZUluZGV4ICYgMHgwZSkgPj4gMTtcXG4gICAgY29uZmlnWzFdID0gKHNhbXBsZUluZGV4ICYgMHgwMSkgPDwgNztcXG4gICAgY29uZmlnWzFdIHw9IGNoYW5uZWwgPDwgMztcXG4gICAgaWYgKGF1ZGlvT2JqZWN0VHlwZSA9PT0gNSkge1xcbiAgICAgIGNvbmZpZ1sxXSB8PSAoZXh0ZW5zaW9uU2FtcGxlSW5kZXggJiAweDBlKSA+PiAxO1xcbiAgICAgIGNvbmZpZ1syXSA9IChleHRlbnNpb25TYW1wbGVJbmRleCAmIDB4MDEpIDw8IDc7XFxuICAgICAgY29uZmlnWzJdIHw9IDIgPDwgMjtcXG4gICAgICBjb25maWdbM10gPSAwO1xcbiAgICB9XFxuICAgIHJldHVybiBjb25maWc7XFxuICB9XFxuXFxuICBnZXQgaW5wdXRCdWZmZXIoKSB7XFxuICAgIHJldHVybiB0aGlzLl9jb250ZXh0LmdldEluc3RhbmNlKHRoaXMuY29uZmlncy5pbnB1dGJ1ZmZlcik7XFxuICB9XFxuXFxuICBnZXQgX3RyYWNrcygpIHtcXG4gICAgcmV0dXJuIHRoaXMuX2NvbnRleHQuZ2V0SW5zdGFuY2UoJ1RSQUNLUycpO1xcbiAgfVxcbn1cXG5cXG5leHBvcnRzLmRlZmF1bHQgPSBUc0RlbXV4ZXI7XFxuXFxuLy8jIHNvdXJjZVVSTD13ZWJwYWNrOi8veGdwbGF5ZXItZmx2Ly4uL3hncGxheWVyLWRlbXV4L3NyYy9obHMvZGVtdXhlci90cy5qcz9cIil9LFwiLi4veGdwbGF5ZXItZGVtdXgvc3JjL2hscy9wbGF5bGlzdC5qc1wiOlxuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4uL3hncGxheWVyLWRlbXV4L3NyYy9obHMvcGxheWxpc3QuanMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBubyBzdGF0aWMgZXhwb3J0cyBmb3VuZCAqL2Z1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pe1widXNlIHN0cmljdFwiO2V2YWwoXCJcXG5cXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXFxcIl9fZXNNb2R1bGVcXFwiLCB7XFxuICB2YWx1ZTogdHJ1ZVxcbn0pO1xcbmNsYXNzIFBsYXlsaXN0IHtcXG4gIGNvbnN0cnVjdG9yKGNvbmZpZ3MpIHtcXG4gICAgdGhpcy5fYmFzZVVSTCA9ICcnO1xcbiAgICB0aGlzLl9saXN0ID0ge307XFxuICAgIHRoaXMuX3RzID0ge307XFxuICAgIHRoaXMudmVyc2lvbiA9IDA7XFxuICAgIHRoaXMuc2VxdWVuY2UgPSAtMTtcXG4gICAgdGhpcy50YXJnZXRkdXJhdGlvbiA9IDA7XFxuICAgIHRoaXMuZHVyYXRpb24gPSAwO1xcbiAgICB0aGlzLmZyYWdMZW5ndGggPSAwO1xcbiAgICB0aGlzLl9sYXN0Z2V0ID0gdW5kZWZpbmVkO1xcbiAgICB0aGlzLl9hdWRvY2xlYXIgPSBjb25maWdzLmF1dG9jbGVhciB8fCBmYWxzZTtcXG4gIH1cXG5cXG4gIGdldCBsaXN0KCkge1xcbiAgICByZXR1cm4gdGhpcy5fbGlzdDtcXG4gIH1cXG5cXG4gIHNldCBiYXNlVVJMKGJhc2VVUkwpIHtcXG4gICAgaWYgKHRoaXMuYmFzZVVSTCAhPT0gYmFzZVVSTCkge1xcbiAgICAgIHRoaXMuY2xlYXIoKTtcXG4gICAgICB0aGlzLl9iYXNlVVJMID0gYmFzZVVSTDtcXG4gICAgfVxcbiAgfVxcblxcbiAgZ2V0IGJhc2VVUkwoKSB7XFxuICAgIHJldHVybiB0aGlzLl9iYXNlVVJMO1xcbiAgfVxcblxcbiAgcHVzaCh0cywgZHVyYXRpb24pIHtcXG4gICAgaWYgKCF0aGlzLl90c1t0c10pIHtcXG4gICAgICB0aGlzLl90c1t0c10gPSB7IGR1cmF0aW9uOiBkdXJhdGlvbiwgZG93bmxvYWRlZDogZmFsc2UsIGRvd25sb2FkaW5nOiBmYWxzZSwgc3RhcnQ6IHRoaXMuZHVyYXRpb24gfTtcXG4gICAgICB0aGlzLl9saXN0W3RoaXMuZHVyYXRpb25dID0gdHM7XFxuICAgICAgdGhpcy5kdXJhdGlvbiArPSBkdXJhdGlvbjtcXG4gICAgICB0aGlzLmZyYWdMZW5ndGggKz0gMTtcXG4gICAgfVxcbiAgfVxcblxcbiAgZGVsZXRlRnJhZyh1cmwpIHtcXG4gICAgaWYgKHRoaXMuX3RzW3VybF0pIHtcXG4gICAgICBpZiAodGhpcy5fdHNbdXJsXS5zdGFydCA+IHRoaXMuX2xhc3RnZXQudGltZSkge1xcbiAgICAgICAgdGhpcy5fbGFzdGdldCA9IHtcXG4gICAgICAgICAgZHVyYXRpb246IHRoaXMuX3RzW3VybF0uZHVyYXRpb24sXFxuICAgICAgICAgIHRpbWU6IHRoaXMuX3RzW3VybF0uc3RhcnQsXFxuICAgICAgICAgIGRvd25sb2FkZWQ6IGZhbHNlLFxcbiAgICAgICAgICBkb3dubG9hZGluZzogZmFsc2UsXFxuICAgICAgICAgIHVybDogdXJsXFxuICAgICAgICB9O1xcbiAgICAgIH1cXG4gICAgICBkZWxldGUgdGhpcy5fbGlzdFt0aGlzLl90c1t1cmxdLnN0YXJ0XTtcXG4gICAgICBkZWxldGUgdGhpcy5fdHNbdXJsXTtcXG4gICAgICB0aGlzLmZyYWdMZW5ndGggLT0gMTtcXG4gICAgfVxcbiAgfVxcblxcbiAgcHVzaE0zVTgoZGF0YSwgZGVsZXRlcHJlKSB7XFxuICAgIC8vIOW4uOinhOS/oeaBr+abv+aNolxcbiAgICBpZiAoIWRhdGEpIHtcXG4gICAgICByZXR1cm47XFxuICAgIH1cXG4gICAgdGhpcy52ZXJzaW9uID0gZGF0YS52ZXJzaW9uO1xcbiAgICB0aGlzLnRhcmdldGR1cmF0aW9uID0gZGF0YS50YXJnZXRkdXJhdGlvbjtcXG5cXG4gICAgLy8g5paw5YiG54mH5L+h5oGvXFxuICAgIGlmIChkYXRhLnNlcXVlbmNlID4gdGhpcy5zZXF1ZW5jZSkge1xcbiAgICAgIHRoaXMuc2VxdWVuY2UgPSBkYXRhLnNlcXVlbmNlO1xcbiAgICAgIGxldCBuZXdmcmFnbGlzdCA9IFtdO1xcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGF0YS5mcmFncy5sZW5ndGg7IGkrKykge1xcbiAgICAgICAgbGV0IGZyYWcgPSBkYXRhLmZyYWdzW2ldO1xcbiAgICAgICAgaWYgKCF0aGlzLl90c1tmcmFnLnVybF0pIHtcXG4gICAgICAgICAgbmV3ZnJhZ2xpc3QucHVzaChmcmFnLnVybCk7XFxuICAgICAgICAgIHRoaXMucHVzaChmcmFnLnVybCwgZnJhZy5kdXJhdGlvbik7XFxuICAgICAgICB9XFxuICAgICAgfVxcbiAgICAgIGlmIChkZWxldGVwcmUpIHtcXG4gICAgICAgIGxldCB0c2xpc3QgPSB0aGlzLmdldFRzTGlzdCgpO1xcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0c2xpc3QubGVuZ3RoOyBpKyspIHtcXG4gICAgICAgICAgaWYgKG5ld2ZyYWdsaXN0LmluZGV4T2YodHNsaXN0W2ldKSA8IDApIHtcXG4gICAgICAgICAgICB0aGlzLmRlbGV0ZUZyYWcodHNsaXN0W2ldKTtcXG4gICAgICAgICAgfVxcbiAgICAgICAgfVxcbiAgICAgIH1cXG4gICAgfVxcbiAgfVxcblxcbiAgZ2V0VHNMaXN0KCkge1xcbiAgICByZXR1cm4gT2JqZWN0LmtleXModGhpcy5fdHMpO1xcbiAgfVxcblxcbiAgZG93bmxvYWRlZCh0c25hbWUsIGlzbG9hZGVkKSB7XFxuICAgIGxldCB0cyA9IHRoaXMuX3RzW3RzbmFtZV07XFxuICAgIGlmICh0cykge1xcbiAgICAgIHRzLmRvd25sb2FkZWQgPSBpc2xvYWRlZDtcXG4gICAgfVxcbiAgfVxcblxcbiAgZG93bmxvYWRpbmcodHNuYW1lLCBsb2FkaW5nKSB7XFxuICAgIGxldCB0cyA9IHRoaXMuX3RzW3RzbmFtZV07XFxuICAgIGlmICh0cykge1xcbiAgICAgIHRzLmRvd25sb2FkaW5nID0gbG9hZGluZztcXG4gICAgfVxcbiAgfVxcblxcbiAgZ2V0VHNCeU5hbWUobmFtZSkge1xcbiAgICByZXR1cm4gdGhpcy5fdHNbbmFtZV07XFxuICB9XFxuXFxuICBnZXRUcyh0aW1lKSB7XFxuICAgIGxldCB0aW1lbGlzdCA9IE9iamVjdC5rZXlzKHRoaXMuX2xpc3QpO1xcbiAgICBsZXQgdHM7XFxuXFxuICAgIGlmICh0aW1lID09PSB1bmRlZmluZWQpIHtcXG4gICAgICBpZiAodGhpcy5fbGFzdGdldCkge1xcbiAgICAgICAgdGltZSA9IHRoaXMuX2xhc3RnZXQudGltZSArIHRoaXMuX2xhc3RnZXQuZHVyYXRpb247XFxuICAgICAgfSBlbHNlIHtcXG4gICAgICAgIHRpbWUgPSAwO1xcbiAgICAgIH1cXG4gICAgfVxcblxcbiAgICBpZiAodGltZWxpc3QubGVuZ3RoIDwgMSB8fCB0aW1lID49IHRoaXMuZHVyYXRpb24pIHtcXG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xcbiAgICB9XFxuICAgIHRpbWVsaXN0LnNvcnQoKGEsIGIpID0+IHtcXG4gICAgICByZXR1cm4gcGFyc2VGbG9hdChhKSAtIHBhcnNlRmxvYXQoYik7XFxuICAgIH0pO1xcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRpbWVsaXN0Lmxlbmd0aDsgaSsrKSB7XFxuICAgICAgaWYgKHRpbWUgPj0gcGFyc2VJbnQodGltZWxpc3RbaV0pKSB7XFxuICAgICAgICBsZXQgdXJsID0gdGhpcy5fbGlzdFt0aW1lbGlzdFtpXV07XFxuICAgICAgICBsZXQgZG93bmxvYWRlZCA9IHRoaXMuX3RzW3VybF0uZG93bmxvYWRlZDtcXG4gICAgICAgIGxldCBkb3dubG9hZGluZyA9IHRoaXMuX3RzW3VybF0uZG93bmxvYWRpbmc7XFxuICAgICAgICB0cyA9IHsgdXJsLCBkb3dubG9hZGVkLCBkb3dubG9hZGluZywgdGltZTogcGFyc2VJbnQodGltZWxpc3RbaV0pLCBkdXJhdGlvbjogcGFyc2VJbnQodGhpcy5fdHNbdXJsXS5kdXJhdGlvbikgfTtcXG4gICAgICAgIGlmICh0aGlzLmF1dG9jbGVhcikge1xcbiAgICAgICAgICBkZWxldGUgdGhpcy5fdHNbdGhpcy5fbGFzdGdldC51cmxdO1xcbiAgICAgICAgICBkZWxldGUgdGhpcy5fbGlzdFt0aGlzLl9sYXN0Z2V0LnRpbWVdO1xcbiAgICAgICAgfVxcbiAgICAgICAgdGhpcy5fbGFzdGdldCA9IHRzO1xcbiAgICAgIH0gZWxzZSB7XFxuICAgICAgICBicmVhaztcXG4gICAgICB9XFxuICAgIH1cXG4gICAgcmV0dXJuIHRzO1xcbiAgfVxcblxcbiAgY2xlYXIoKSB7XFxuICAgIHRoaXMuX2Jhc2VVUkwgPSAnJztcXG4gICAgdGhpcy5fbGlzdCA9IHt9O1xcbiAgICB0aGlzLl90cyA9IHt9O1xcbiAgICB0aGlzLnZlcnNpb24gPSAwO1xcbiAgICB0aGlzLnNlcXVlbmNlID0gLTE7XFxuICAgIHRoaXMudGFyZ2V0ZHVyYXRpb24gPSAwO1xcbiAgICB0aGlzLmR1cmF0aW9uID0gMDtcXG4gIH1cXG5cXG4gIGNsZWFyRG93bmxvYWRlZCgpIHtcXG4gICAgZm9yIChsZXQgaSA9IDAsIGwgPSBPYmplY3Qua2V5cyh0aGlzLl90cykubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XFxuICAgICAgbGV0IHRzID0gdGhpcy5fdHNbT2JqZWN0LmtleXModGhpcy5fdHMpW2ldXTtcXG4gICAgICB0cy5kb3dubG9hZGVkID0gZmFsc2U7XFxuICAgICAgdHMuZG93bmxvYWRpbmcgPSBmYWxzZTtcXG4gICAgfVxcbiAgfVxcblxcbiAgZGVzdHJveSgpIHtcXG4gICAgdGhpcy5fYmFzZVVSTCA9ICcnO1xcbiAgICB0aGlzLl9saXN0ID0ge307XFxuICAgIHRoaXMuX3RzID0ge307XFxuICAgIHRoaXMudmVyc2lvbiA9IDA7XFxuICAgIHRoaXMuc2VxdWVuY2UgPSAtMTtcXG4gICAgdGhpcy50YXJnZXRkdXJhdGlvbiA9IDA7XFxuICAgIHRoaXMuZHVyYXRpb24gPSAwO1xcbiAgICB0aGlzLmZyYWdMZW5ndGggPSAwO1xcbiAgICB0aGlzLl9sYXN0Z2V0ID0gdW5kZWZpbmVkO1xcbiAgICB0aGlzLl9hdWRvY2xlYXIgPSBmYWxzZTtcXG4gIH1cXG59XFxuXFxuZXhwb3J0cy5kZWZhdWx0ID0gUGxheWxpc3Q7XFxuXFxuLy8jIHNvdXJjZVVSTD13ZWJwYWNrOi8veGdwbGF5ZXItZmx2Ly4uL3hncGxheWVyLWRlbXV4L3NyYy9obHMvcGxheWxpc3QuanM/XCIpfSxcIi4uL3hncGxheWVyLWxvYWRlci9pbmRleC5qc1wiOlxuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi4veGdwbGF5ZXItbG9hZGVyL2luZGV4LmpzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBubyBzdGF0aWMgZXhwb3J0cyBmb3VuZCAqL2Z1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pe1widXNlIHN0cmljdFwiO2V2YWwoJ1xcblxcbm1vZHVsZS5leHBvcnRzID0ge1xcbiAgRmV0Y2hMb2FkZXI6IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vc3JjL2ZldGNoLWxvYWRlciAqLyBcIi4uL3hncGxheWVyLWxvYWRlci9zcmMvZmV0Y2gtbG9hZGVyLmpzXCIpLmRlZmF1bHRcXG59O1xcblxcbi8vIyBzb3VyY2VVUkw9d2VicGFjazovL3hncGxheWVyLWZsdi8uLi94Z3BsYXllci1sb2FkZXIvaW5kZXguanM/Jyl9LFwiLi4veGdwbGF5ZXItbG9hZGVyL3NyYy9mZXRjaC1sb2FkZXIuanNcIjpcbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi4veGdwbGF5ZXItbG9hZGVyL3NyYy9mZXRjaC1sb2FkZXIuanMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgbm8gc3RhdGljIGV4cG9ydHMgZm91bmQgKi9mdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXtcInVzZSBzdHJpY3RcIjtldmFsKFwiXFxuXFxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFxcXCJfX2VzTW9kdWxlXFxcIiwge1xcbiAgdmFsdWU6IHRydWVcXG59KTtcXG5cXG52YXIgX3hncGxheWVyVXRpbHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISB4Z3BsYXllci11dGlscyAqLyBcXFwiLi4veGdwbGF5ZXItdXRpbHMvaW5kZXguanNcXFwiKTtcXG5cXG5jb25zdCBMT0FERVJfRVZFTlRTID0gX3hncGxheWVyVXRpbHMuRVZFTlRTLkxPQURFUl9FVkVOVFM7XFxuY29uc3QgUkVBRF9TVFJFQU0gPSAwO1xcbmNvbnN0IFJFQURfVEVYVCA9IDE7XFxuY29uc3QgUkVBRF9KU09OID0gMjtcXG5jb25zdCBSRUFEX0JVRkZFUiA9IDM7XFxuY2xhc3MgRmV0Y2hMb2FkZXIge1xcbiAgY29uc3RydWN0b3IoY29uZmlncykge1xcbiAgICB0aGlzLmNvbmZpZ3MgPSBPYmplY3QuYXNzaWduKHt9LCBjb25maWdzKTtcXG4gICAgdGhpcy51cmwgPSBudWxsO1xcbiAgICB0aGlzLnN0YXR1cyA9IDA7XFxuICAgIHRoaXMuZXJyb3IgPSBudWxsO1xcbiAgICB0aGlzLl9yZWFkZXIgPSBudWxsO1xcbiAgICB0aGlzLl9jYW5jZWxlZCA9IGZhbHNlO1xcbiAgICB0aGlzLnJlYWR0eXBlID0gdGhpcy5jb25maWdzLnJlYWR0eXBlO1xcbiAgICB0aGlzLmJ1ZmZlciA9IHRoaXMuY29uZmlncy5idWZmZXIgfHwgJ0xPQURFUl9CVUZGRVInO1xcbiAgICB0aGlzLl9sb2FkZXJUYXNrTm8gPSAwO1xcbiAgfVxcblxcbiAgaW5pdCgpIHtcXG4gICAgdGhpcy5vbihMT0FERVJfRVZFTlRTLkxBREVSX1NUQVJULCB0aGlzLmxvYWQuYmluZCh0aGlzKSk7XFxuICB9XFxuXFxuICBzdGF0aWMgZ2V0IHR5cGUoKSB7XFxuICAgIHJldHVybiAnbG9hZGVyJztcXG4gIH1cXG5cXG4gIGxvYWQodXJsLCBvcHRzKSB7XFxuICAgIGxldCBfdGhpcyA9IHRoaXM7XFxuICAgIHRoaXMudXJsID0gdXJsO1xcbiAgICB0aGlzLl9jYW5jZWxlZCA9IGZhbHNlO1xcblxcbiAgICAvLyBUT0RPOiBBZGQgUmFuZ2VzXFxuICAgIGxldCBwYXJhbXMgPSB0aGlzLmdldFBhcmFtcyhvcHRzKTtcXG4gICAgX3RoaXMubG9hZGluZyA9IHRydWU7XFxuICAgIHJldHVybiBmZXRjaCh0aGlzLnVybCwgcGFyYW1zKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xcbiAgICAgIGlmIChyZXNwb25zZS5vaykge1xcbiAgICAgICAgX3RoaXMuc3RhdHVzID0gcmVzcG9uc2Uuc3RhdHVzO1xcbiAgICAgICAgcmV0dXJuIF90aGlzLl9vbkZldGNoUmVzcG9uc2UocmVzcG9uc2UpO1xcbiAgICAgIH1cXG4gICAgICBfdGhpcy5lbWl0KExPQURFUl9FVkVOVFMuTE9BREVSX0VSUk9SLCBfdGhpcywgcmVzcG9uc2UpO1xcbiAgICAgIF90aGlzLmxvYWRpbmcgPSBmYWxzZTtcXG4gICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7XFxuICAgICAgX3RoaXMuZW1pdChMT0FERVJfRVZFTlRTLkxPQURFUl9FUlJPUiwgX3RoaXMsIGVycm9yKTtcXG4gICAgICBfdGhpcy5sb2FkaW5nID0gZmFsc2U7XFxuICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yLm1lc3NhZ2UpO1xcbiAgICB9KTtcXG4gIH1cXG5cXG4gIF9vbkZldGNoUmVzcG9uc2UocmVzcG9uc2UpIHtcXG4gICAgbGV0IF90aGlzID0gdGhpcztcXG4gICAgbGV0IGJ1ZmZlciA9IHRoaXMuX2NvbnRleHQuZ2V0SW5zdGFuY2UodGhpcy5idWZmZXIpO1xcbiAgICB0aGlzLl9sb2FkZXJUYXNrTm8rKztcXG4gICAgbGV0IHRhc2tubyA9IHRoaXMuX2xvYWRlclRhc2tObztcXG4gICAgaWYgKHJlc3BvbnNlLm9rID09PSB0cnVlKSB7XFxuICAgICAgc3dpdGNoICh0aGlzLnJlYWR0eXBlKSB7XFxuICAgICAgICBjYXNlIFJFQURfSlNPTjpcXG4gICAgICAgICAgcmVzcG9uc2UuanNvbigpLnRoZW4oZGF0YSA9PiB7XFxuICAgICAgICAgICAgX3RoaXMubG9hZGluZyA9IGZhbHNlO1xcbiAgICAgICAgICAgIGlmICghX3RoaXMuX2NhbmNlbGVkKSB7XFxuICAgICAgICAgICAgICBpZiAoYnVmZmVyKSB7XFxuICAgICAgICAgICAgICAgIGJ1ZmZlci5wdXNoKGRhdGEpO1xcbiAgICAgICAgICAgICAgICBfdGhpcy5lbWl0KExPQURFUl9FVkVOVFMuTE9BREVSX0NPTVBMRVRFLCBidWZmZXIpO1xcbiAgICAgICAgICAgICAgfSBlbHNlIHtcXG4gICAgICAgICAgICAgICAgX3RoaXMuZW1pdChMT0FERVJfRVZFTlRTLkxPQURFUl9DT01QTEVURSwgZGF0YSk7XFxuICAgICAgICAgICAgICB9XFxuICAgICAgICAgICAgfVxcbiAgICAgICAgICB9KTtcXG4gICAgICAgICAgYnJlYWs7XFxuICAgICAgICBjYXNlIFJFQURfVEVYVDpcXG4gICAgICAgICAgcmVzcG9uc2UudGV4dCgpLnRoZW4oZGF0YSA9PiB7XFxuICAgICAgICAgICAgX3RoaXMubG9hZGluZyA9IGZhbHNlO1xcbiAgICAgICAgICAgIGlmICghX3RoaXMuX2NhbmNlbGVkKSB7XFxuICAgICAgICAgICAgICBpZiAoYnVmZmVyKSB7XFxuICAgICAgICAgICAgICAgIGJ1ZmZlci5wdXNoKGRhdGEpO1xcbiAgICAgICAgICAgICAgICBfdGhpcy5lbWl0KExPQURFUl9FVkVOVFMuTE9BREVSX0NPTVBMRVRFLCBidWZmZXIpO1xcbiAgICAgICAgICAgICAgfSBlbHNlIHtcXG4gICAgICAgICAgICAgICAgX3RoaXMuZW1pdChMT0FERVJfRVZFTlRTLkxPQURFUl9DT01QTEVURSwgZGF0YSk7XFxuICAgICAgICAgICAgICB9XFxuICAgICAgICAgICAgfVxcbiAgICAgICAgICB9KTtcXG4gICAgICAgICAgYnJlYWs7XFxuICAgICAgICBjYXNlIFJFQURfQlVGRkVSOlxcbiAgICAgICAgICByZXNwb25zZS5hcnJheUJ1ZmZlcigpLnRoZW4oZGF0YSA9PiB7XFxuICAgICAgICAgICAgX3RoaXMubG9hZGluZyA9IGZhbHNlO1xcbiAgICAgICAgICAgIGlmICghX3RoaXMuX2NhbmNlbGVkKSB7XFxuICAgICAgICAgICAgICBpZiAoYnVmZmVyKSB7XFxuICAgICAgICAgICAgICAgIGJ1ZmZlci5wdXNoKG5ldyBVaW50OEFycmF5KGRhdGEpKTtcXG4gICAgICAgICAgICAgICAgX3RoaXMuZW1pdChMT0FERVJfRVZFTlRTLkxPQURFUl9DT01QTEVURSwgYnVmZmVyKTtcXG4gICAgICAgICAgICAgIH0gZWxzZSB7XFxuICAgICAgICAgICAgICAgIF90aGlzLmVtaXQoTE9BREVSX0VWRU5UUy5MT0FERVJfQ09NUExFVEUsIGRhdGEpO1xcbiAgICAgICAgICAgICAgfVxcbiAgICAgICAgICAgIH1cXG4gICAgICAgICAgfSk7XFxuICAgICAgICAgIGJyZWFrO1xcbiAgICAgICAgY2FzZSBSRUFEX1NUUkVBTTpcXG4gICAgICAgIGRlZmF1bHQ6XFxuICAgICAgICAgIHJldHVybiB0aGlzLl9vblJlYWRlcihyZXNwb25zZS5ib2R5LmdldFJlYWRlcigpLCB0YXNrbm8pO1xcbiAgICAgIH1cXG4gICAgfVxcbiAgfVxcblxcbiAgX29uUmVhZGVyKHJlYWRlciwgdGFza25vKSB7XFxuICAgIGxldCBidWZmZXIgPSB0aGlzLl9jb250ZXh0LmdldEluc3RhbmNlKHRoaXMuYnVmZmVyKTtcXG5cXG4gICAgaWYgKCFidWZmZXIpIHtcXG4gICAgICB0aGlzLl9yZWFkZXIuY2FuY2VsKCk7XFxuICAgIH1cXG5cXG4gICAgdGhpcy5fcmVhZGVyID0gcmVhZGVyO1xcbiAgICBpZiAodGhpcy5sb2FkaW5nID09PSBmYWxzZSkge1xcbiAgICAgIHJldHVybjtcXG4gICAgfVxcblxcbiAgICBsZXQgX3RoaXMgPSB0aGlzO1xcbiAgICAvLyByZWFkZXIgcmVhZCBmdW5jdGlvbiByZXR1cm5zIGEgUHJvbWlzZS4gZ2V0IGRhdGEgd2hlbiBjYWxsYmFjayBhbmQgaGFzIHZhbHVlLmRvbmUgd2hlbiBkaXNjb25uZWN0ZWQuXFxuICAgIC8vIHJlYWTmlrnms5Xov5Tlm57kuIDkuKpQcm9taXNlLiDlm57osIPkuK3lj6/ku6Xojrflj5bliLDmlbDmja7jgILlvZN2YWx1ZS5kb25l5a2Y5Zyo5pe277yM6K+05piO6ZO+5o6l5pat5byA44CCXFxuICAgIHRoaXMuX3JlYWRlciAmJiB0aGlzLl9yZWFkZXIucmVhZCgpLnRoZW4oZnVuY3Rpb24gKHZhbCkge1xcbiAgICAgIGlmICh2YWwuZG9uZSkge1xcbiAgICAgICAgLy8gVE9ETzog5a6M5oiQ5aSE55CGXFxuICAgICAgICBfdGhpcy5sb2FkaW5nID0gZmFsc2U7XFxuICAgICAgICBfdGhpcy5zdGF0dXMgPSAwO1xcbiAgICAgICAgX3RoaXMuZW1pdChMT0FERVJfRVZFTlRTLkxPQURFUl9DT01QTEVURSwgYnVmZmVyKTtcXG4gICAgICAgIHJldHVybjtcXG4gICAgICB9XFxuXFxuICAgICAgaWYgKF90aGlzLl9jYW5jZWxlZCkge1xcbiAgICAgICAgX3RoaXMuX3JlYWRlci5jYW5jZWwoKTtcXG4gICAgICAgIHJldHVybjtcXG4gICAgICB9XFxuICAgICAgYnVmZmVyLnB1c2godmFsLnZhbHVlKTtcXG4gICAgICBfdGhpcy5lbWl0KExPQURFUl9FVkVOVFMuTE9BREVSX0RBVEFMT0FERUQsIGJ1ZmZlcik7XFxuICAgICAgcmV0dXJuIF90aGlzLl9vblJlYWRlcihyZWFkZXIsIHRhc2tubyk7XFxuICAgIH0pLmNhdGNoKGVycm9yID0+IHtcXG4gICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcXG4gICAgICBfdGhpcy5lbWl0KExPQURFUl9FVkVOVFMuTE9BREVSX0VSUk9SLCBfdGhpcywgZXJyb3IpO1xcbiAgICAgIF90aGlzLmxvYWRpbmcgPSBmYWxzZTtcXG4gICAgfSk7XFxuICB9XFxuXFxuICBnZXRQYXJhbXMob3B0cykge1xcbiAgICBsZXQgb3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oe30sIG9wdHMpO1xcbiAgICBsZXQgaGVhZGVycyA9IG5ldyBIZWFkZXJzKCk7XFxuXFxuICAgIGxldCBwYXJhbXMgPSB7XFxuICAgICAgbWV0aG9kOiAnR0VUJyxcXG4gICAgICBoZWFkZXJzOiBoZWFkZXJzLFxcbiAgICAgIG1vZGU6ICdjb3JzJyxcXG4gICAgICBjYWNoZTogJ2RlZmF1bHQnXFxuXFxuICAgICAgLy8gYWRkIGN1c3Rtb3IgaGVhZGVyc1xcbiAgICAgIC8vIOa3u+WKoOiHquWumuS5ieWktFxcbiAgICB9O2lmICh0eXBlb2YgdGhpcy5jb25maWdzLmhlYWRlcnMgPT09ICdvYmplY3QnKSB7XFxuICAgICAgbGV0IGNvbmZpZ0hlYWRlcnMgPSB0aGlzLmNvbmZpZ3MuaGVhZGVycztcXG4gICAgICBmb3IgKGxldCBrZXkgaW4gY29uZmlnSGVhZGVycykge1xcbiAgICAgICAgaWYgKGNvbmZpZ0hlYWRlcnMuaGFzT3duUHJvcGVydHkoa2V5KSkge1xcbiAgICAgICAgICBoZWFkZXJzLmFwcGVuZChrZXksIGNvbmZpZ0hlYWRlcnNba2V5XSk7XFxuICAgICAgICB9XFxuICAgICAgfVxcbiAgICB9XFxuXFxuICAgIGlmICh0eXBlb2Ygb3B0aW9ucy5oZWFkZXJzID09PSAnb2JqZWN0Jykge1xcbiAgICAgIGxldCBvcHRIZWFkZXJzID0gb3B0aW9ucy5oZWFkZXJzO1xcbiAgICAgIGZvciAobGV0IGtleSBpbiBvcHRIZWFkZXJzKSB7XFxuICAgICAgICBpZiAob3B0SGVhZGVycy5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XFxuICAgICAgICAgIGhlYWRlcnMuYXBwZW5kKGtleSwgb3B0SGVhZGVyc1trZXldKTtcXG4gICAgICAgIH1cXG4gICAgICB9XFxuICAgIH1cXG5cXG4gICAgaWYgKG9wdGlvbnMuY29ycyA9PT0gZmFsc2UpIHtcXG4gICAgICBwYXJhbXMubW9kZSA9ICdzYW1lLW9yaWdpbic7XFxuICAgIH1cXG5cXG4gICAgLy8gd2l0aENyZWRlbnRpYWxzIGlzIGRpc2FibGVkIGJ5IGRlZmF1bHRcXG4gICAgLy8gd2l0aENyZWRlbnRpYWxzIOWcqOm7mOiupOaDheWGteS4i+S4jeiiq+S9v+eUqOOAglxcbiAgICBpZiAob3B0aW9ucy53aXRoQ3JlZGVudGlhbHMpIHtcXG4gICAgICBwYXJhbXMuY3JlZGVudGlhbHMgPSAnaW5jbHVkZSc7XFxuICAgIH1cXG5cXG4gICAgLy8gVE9ETzogQWRkIHJhbmdlcztcXG4gICAgcmV0dXJuIHBhcmFtcztcXG4gIH1cXG5cXG4gIGNhbmNlbCgpIHtcXG4gICAgaWYgKHRoaXMuX3JlYWRlcikge1xcbiAgICAgIHRoaXMuX3JlYWRlci5jYW5jZWwoKTtcXG4gICAgICB0aGlzLl9yZWFkZXIgPSBudWxsO1xcbiAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlO1xcbiAgICAgIHRoaXMuX2NhbmNlbGVkID0gdHJ1ZTtcXG4gICAgfVxcbiAgfVxcblxcbiAgZGVzdHJveSgpIHtcXG4gICAgdGhpcy5jYW5jZWwoKTtcXG4gIH1cXG59XFxuXFxuZXhwb3J0cy5kZWZhdWx0ID0gRmV0Y2hMb2FkZXI7XFxuXFxuLy8jIHNvdXJjZVVSTD13ZWJwYWNrOi8veGdwbGF5ZXItZmx2Ly4uL3hncGxheWVyLWxvYWRlci9zcmMvZmV0Y2gtbG9hZGVyLmpzP1wiKX0sXCIuLi94Z3BsYXllci1yZW11eC9pbmRleC5qc1wiOlxuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuLi94Z3BsYXllci1yZW11eC9pbmRleC5qcyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBubyBzdGF0aWMgZXhwb3J0cyBmb3VuZCAqL2Z1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pe1widXNlIHN0cmljdFwiO2V2YWwoJ1xcblxcbm1vZHVsZS5leHBvcnRzID0ge1xcbiAgTXA0UmVtdXhlcjogX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9zcmMvbXA0ICovIFwiLi4veGdwbGF5ZXItcmVtdXgvc3JjL21wNC9pbmRleC5qc1wiKS5kZWZhdWx0XFxufTtcXG5cXG4vLyMgc291cmNlVVJMPXdlYnBhY2s6Ly94Z3BsYXllci1mbHYvLi4veGdwbGF5ZXItcmVtdXgvaW5kZXguanM/Jyl9LFwiLi4veGdwbGF5ZXItcmVtdXgvc3JjL21wNC9mbXA0LmpzXCI6XG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuLi94Z3BsYXllci1yZW11eC9zcmMvbXA0L2ZtcDQuanMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIG5vIHN0YXRpYyBleHBvcnRzIGZvdW5kICovZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7XCJ1c2Ugc3RyaWN0XCI7ZXZhbChcIlxcblxcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcXFwiX19lc01vZHVsZVxcXCIsIHtcXG4gIHZhbHVlOiB0cnVlXFxufSk7XFxuXFxudmFyIF94Z3BsYXllclV0aWxzID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgeGdwbGF5ZXItdXRpbHMgKi8gXFxcIi4uL3hncGxheWVyLXV0aWxzL2luZGV4LmpzXFxcIik7XFxuXFxuLy8gY29uc3QgVUlOVDMyX01BWCA9IE1hdGgucG93KDIsIDMyKSAtIDE7XFxuY2xhc3MgRm1wNCB7XFxuICBzdGF0aWMgc2l6ZSh2YWx1ZSkge1xcbiAgICByZXR1cm4gX3hncGxheWVyVXRpbHMuQnVmZmVyLndyaXRlVWludDMyKHZhbHVlKTtcXG4gIH1cXG4gIHN0YXRpYyBpbml0Qm94KHNpemUsIG5hbWUsIC4uLmNvbnRlbnQpIHtcXG4gICAgY29uc3QgYnVmZmVyID0gbmV3IF94Z3BsYXllclV0aWxzLkJ1ZmZlcigpO1xcbiAgICBidWZmZXIud3JpdGUoRm1wNC5zaXplKHNpemUpLCBGbXA0LnR5cGUobmFtZSksIC4uLmNvbnRlbnQpO1xcbiAgICByZXR1cm4gYnVmZmVyLmJ1ZmZlcjtcXG4gIH1cXG4gIHN0YXRpYyBleHRlbnNpb24odmVyc2lvbiwgZmxhZykge1xcbiAgICByZXR1cm4gbmV3IFVpbnQ4QXJyYXkoW3ZlcnNpb24sIGZsYWcgPj4gMTYgJiAweGZmLCBmbGFnID4+IDggJiAweGZmLCBmbGFnICYgMHhmZl0pO1xcbiAgfVxcbiAgc3RhdGljIGZ0eXAoKSB7XFxuICAgIHJldHVybiBGbXA0LmluaXRCb3goMjQsICdmdHlwJywgbmV3IFVpbnQ4QXJyYXkoWzB4NjksIDB4NzMsIDB4NkYsIDB4NkQsIC8vIGlzb20sXFxuICAgIDB4MCwgMHgwLCAweDAwLCAweDAxLCAvLyBtaW5vcl92ZXJzaW9uOiAweDAxXFxuICAgIDB4NjksIDB4NzMsIDB4NkYsIDB4NkQsIC8vIGlzb21cXG4gICAgMHg2MSwgMHg3NiwgMHg2MywgMHgzMSAvLyBhdmMxXFxuICAgIF0pKTtcXG4gIH1cXG4gIHN0YXRpYyBtb292KHsgdHlwZSwgbWV0YSB9KSB7XFxuICAgIGxldCBzaXplID0gODtcXG4gICAgbGV0IG12aGQgPSBGbXA0Lm12aGQobWV0YS5kdXJhdGlvbiwgbWV0YS50aW1lc2NhbGUpO1xcbiAgICBsZXQgdHJhaztcXG5cXG4gICAgaWYgKHR5cGUgPT09ICd2aWRlbycpIHtcXG4gICAgICB0cmFrID0gRm1wNC52aWRlb1RyYWsobWV0YSk7XFxuICAgIH0gZWxzZSB7XFxuICAgICAgdHJhayA9IEZtcDQuYXVkaW9UcmFrKG1ldGEpO1xcbiAgICB9XFxuXFxuICAgIGxldCBtdmV4ID0gRm1wNC5tdmV4KG1ldGEuZHVyYXRpb24sIG1ldGEudGltZXNjYWxlIHx8IDEwMDAsIG1ldGEuaWQpO1xcbiAgICBbbXZoZCwgdHJhaywgbXZleF0uZm9yRWFjaChpdGVtID0+IHtcXG4gICAgICBzaXplICs9IGl0ZW0uYnl0ZUxlbmd0aDtcXG4gICAgfSk7XFxuICAgIHJldHVybiBGbXA0LmluaXRCb3goc2l6ZSwgJ21vb3YnLCBtdmhkLCB0cmFrLCBtdmV4KTtcXG4gIH1cXG4gIHN0YXRpYyBtdmhkKGR1cmF0aW9uLCB0aW1lc2NhbGUgPSAxMDAwKSB7XFxuICAgIC8vIGR1cmF0aW9uICo9IHRpbWVzY2FsZTtcXG4gICAgbGV0IGJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkoWzB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIC8vIHZlcnNpb24oMCkgKyBmbGFncyAgICAgMeS9jeeahGJveOeJiOacrCsz5L2NZmxhZ3MgICBib3jniYjmnKzvvIww5oiWMe+8jOS4gOiIrOS4ujDjgILvvIjku6XkuIvlrZfoioLmlbDlnYfmjIl2ZXJzaW9uPTDvvIlcXG4gICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgLy8gY3JlYXRpb25fdGltZSAgICDliJvlu7rml7bpl7QgIO+8iOebuOWvueS6jlVUQ+aXtumXtDE5MDQtMDEtMDHpm7bngrnnmoTnp5LmlbDvvIlcXG4gICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgLy8gbW9kaWZpY2F0aW9uX3RpbWUgICDkv67mlLnml7bpl7RcXG5cXG4gICAgLyoqXFxuICAgICAgICAgICAqIHRpbWVzY2FsZTogNCBieXRlc+aWh+S7tuWqkuS9k+WcqDHnp5Lml7bpl7TlhoXnmoTliLvluqblgLzvvIzlj6/ku6XnkIbop6PkuLox56eS6ZW/5bqmXFxuICAgICAgICAgICAqL1xcbiAgICB0aW1lc2NhbGUgPj4+IDI0ICYgMHhGRiwgdGltZXNjYWxlID4+PiAxNiAmIDB4RkYsIHRpbWVzY2FsZSA+Pj4gOCAmIDB4RkYsIHRpbWVzY2FsZSAmIDB4RkYsXFxuXFxuICAgIC8qKlxcbiAgICAgICAgICAgKiBkdXJhdGlvbjogNCBieXRlc+ivpXRyYWNr55qE5pe26Ze06ZW/5bqm77yM55SoZHVyYXRpb27lkox0aW1lIHNjYWxl5YC85Y+v5Lul6K6h566XdHJhY2vml7bplb/vvIzmr5TlpoJhdWRpbyB0cmFja+eahHRpbWUgc2NhbGUgPSA4MDAwLFxcbiAgICAgICAgICAgKiBkdXJhdGlvbiA9IDU2MDEyOO+8jOaXtumVv+S4ujcwLjAxNu+8jHZpZGVvIHRyYWNr55qEdGltZSBzY2FsZSA9IDYwMCwgZHVyYXRpb24gPSA0MjAwMO+8jOaXtumVv+S4ujcwXFxuICAgICAgICAgICAqL1xcbiAgICBkdXJhdGlvbiA+Pj4gMjQgJiAweEZGLCBkdXJhdGlvbiA+Pj4gMTYgJiAweEZGLCBkdXJhdGlvbiA+Pj4gOCAmIDB4RkYsIGR1cmF0aW9uICYgMHhGRiwgMHgwMCwgMHgwMSwgMHgwMCwgMHgwMCwgLy8gUHJlZmVycmVkIHJhdGU6IDEuMCAgIOaOqOiNkOaSreaUvumAn+eOh++8jOmrmDE25L2N5ZKM5L2OMTbkvY3liIbliKvkuLrlsI/mlbDngrnmlbTmlbDpg6jliIblkozlsI/mlbDpg6jliIbvvIzljbNbMTYuMTZdIOagvOW8j++8jOivpeWAvOS4ujEuMO+8iDB4MDAwMTAwMDDvvInooajnpLrmraPluLjliY3lkJHmkq3mlL5cXG4gICAgLyoqXFxuICAgICAgICAgICAqIFByZWZlcnJlZFZvbHVtZSgxLjAsIDJieXRlcykgKyByZXNlcnZlZCgyYnl0ZXMpXFxuICAgICAgICAgICAqIOS4jnJhdGXnsbvkvLzvvIxbOC44XSDmoLzlvI/vvIwxLjDvvIgweDAxMDDvvInooajnpLrmnIDlpKfpn7Pph49cXG4gICAgICAgICAgICovXFxuICAgIDB4MDEsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIC8vICByZXNlcnZlZDogNCArIDQgYnl0ZXPkv53nlZnkvY1cXG4gICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMSwgMHgwMCwgMHgwMCwgLy8gLS0tLWJlZ2luIGNvbXBvc2l0aW9uIG1hdHJpeC0tLS1cXG4gICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgLy8g6KeG6aKR5Y+Y5o2i55+p6Zi1ICAg57q/5oCn5Luj5pWwXFxuICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDEsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4NDAsIDB4MDAsIDB4MDAsIDB4MDAsIC8vIC0tLS1lbmQgY29tcG9zaXRpb24gbWF0cml4LS0tLVxcbiAgICAweDAwLCAweDAwLCAweDAwLCAweDAwLCAvLyAtLS0tYmVnaW4gcHJlX2RlZmluZWQgNiAqIDQgYnl0ZXMtLS0tXFxuICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIC8vIHByZS1kZWZpbmVkIOS/neeVmeS9jVxcbiAgICAweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAwLCAvLyAtLS0tZW5kIHByZV9kZWZpbmVkIDYgKiA0IGJ5dGVzLS0tLVxcbiAgICAweEZGLCAweEZGLCAweEZGLCAweEZGIC8vIG5leHRfdHJhY2tfSUQg5LiL5LiA5LiqdHJhY2vkvb/nlKjnmoRpZOWPt1xcbiAgICBdKTtcXG4gICAgcmV0dXJuIEZtcDQuaW5pdEJveCg4ICsgYnl0ZXMubGVuZ3RoLCAnbXZoZCcsIG5ldyBVaW50OEFycmF5KGJ5dGVzKSk7XFxuICB9XFxuICBzdGF0aWMgdmlkZW9UcmFrKGRhdGEpIHtcXG4gICAgbGV0IHNpemUgPSA4O1xcblxcbiAgICBsZXQgdGtoZCA9IEZtcDQudGtoZCh7XFxuICAgICAgaWQ6IDEsXFxuICAgICAgZHVyYXRpb246IGRhdGEuZHVyYXRpb24sXFxuICAgICAgdGltZXNjYWxlOiBkYXRhLnRpbWVzY2FsZSB8fCAxMDAwLFxcbiAgICAgIHdpZHRoOiBkYXRhLnByZXNlbnRXaWR0aCxcXG4gICAgICBoZWlnaHQ6IGRhdGEucHJlc2VudEhlaWdodCxcXG4gICAgICB0eXBlOiAndmlkZW8nXFxuICAgIH0pO1xcbiAgICBsZXQgbWRpYSA9IEZtcDQubWRpYSh7XFxuICAgICAgdHlwZTogJ3ZpZGVvJyxcXG4gICAgICB0aW1lc2NhbGU6IGRhdGEudGltZXNjYWxlIHx8IDEwMDAsXFxuICAgICAgZHVyYXRpb246IGRhdGEuZHVyYXRpb24sXFxuICAgICAgYXZjYzogZGF0YS5hdmNjLFxcbiAgICAgIHBhclJhdGlvOiBkYXRhLnBhclJhdGlvLFxcbiAgICAgIHdpZHRoOiBkYXRhLnByZXNlbnRXaWR0aCxcXG4gICAgICBoZWlnaHQ6IGRhdGEucHJlc2VudEhlaWdodFxcbiAgICB9KTtcXG4gICAgW3RraGQsIG1kaWFdLmZvckVhY2goaXRlbSA9PiB7XFxuICAgICAgc2l6ZSArPSBpdGVtLmJ5dGVMZW5ndGg7XFxuICAgIH0pO1xcbiAgICByZXR1cm4gRm1wNC5pbml0Qm94KHNpemUsICd0cmFrJywgdGtoZCwgbWRpYSk7XFxuICB9XFxuICBzdGF0aWMgYXVkaW9UcmFrKGRhdGEpIHtcXG4gICAgbGV0IHNpemUgPSA4O1xcbiAgICBsZXQgdGtoZCA9IEZtcDQudGtoZCh7XFxuICAgICAgaWQ6IDIsXFxuICAgICAgZHVyYXRpb246IGRhdGEuZHVyYXRpb24sXFxuICAgICAgdGltZXNjYWxlOiBkYXRhLnRpbWVzY2FsZSB8fCAxMDAwLFxcbiAgICAgIHdpZHRoOiAwLFxcbiAgICAgIGhlaWdodDogMCxcXG4gICAgICB0eXBlOiAnYXVkaW8nXFxuICAgIH0pO1xcbiAgICBsZXQgbWRpYSA9IEZtcDQubWRpYSh7XFxuICAgICAgdHlwZTogJ2F1ZGlvJyxcXG4gICAgICB0aW1lc2NhbGU6IGRhdGEudGltZXNjYWxlIHx8IDEwMDAsXFxuICAgICAgZHVyYXRpb246IGRhdGEuZHVyYXRpb24sXFxuICAgICAgY2hhbm5lbENvdW50OiBkYXRhLmNoYW5uZWxDb3VudCxcXG4gICAgICBzYW1wbGVyYXRlOiBkYXRhLnNhbXBsZVJhdGUsXFxuICAgICAgY29uZmlnOiBkYXRhLmNvbmZpZ1xcbiAgICB9KTtcXG4gICAgW3RraGQsIG1kaWFdLmZvckVhY2goaXRlbSA9PiB7XFxuICAgICAgc2l6ZSArPSBpdGVtLmJ5dGVMZW5ndGg7XFxuICAgIH0pO1xcbiAgICByZXR1cm4gRm1wNC5pbml0Qm94KHNpemUsICd0cmFrJywgdGtoZCwgbWRpYSk7XFxuICB9XFxuICBzdGF0aWMgdGtoZChkYXRhKSB7XFxuICAgIGxldCBpZCA9IGRhdGEuaWQ7XFxuICAgIGxldCBkdXJhdGlvbiA9IGRhdGEuZHVyYXRpb247XFxuICAgIGxldCB3aWR0aCA9IGRhdGEud2lkdGg7XFxuICAgIGxldCBoZWlnaHQgPSBkYXRhLmhlaWdodDtcXG4gICAgbGV0IGNvbnRlbnQgPSBuZXcgVWludDhBcnJheShbMHgwMCwgMHgwMCwgMHgwMCwgMHgwNywgLy8gdmVyc2lvbigwKSArIGZsYWdzIDHkvY3niYjmnKwgYm9454mI5pys77yMMOaIljHvvIzkuIDoiKzkuLow44CC77yI5Lul5LiL5a2X6IqC5pWw5Z2H5oyJdmVyc2lvbj0w77yJ5oyJ5L2N5oiW5pON5L2c57uT5p6c5YC877yM6aKE5a6a5LmJ5aaC5LiL77yaXFxuICAgIC8vIDB4MDAwMDAxIHRyYWNrX2VuYWJsZWTvvIzlkKbliJnor6V0cmFja+S4jeiiq+aSreaUvu+8m1xcbiAgICAvLyAweDAwMDAwMiB0cmFja19pbl9tb3ZpZe+8jOihqOekuuivpXRyYWNr5Zyo5pKt5pS+5Lit6KKr5byV55So77ybXFxuICAgIC8vIDB4MDAwMDA0IHRyYWNrX2luX3ByZXZpZXfvvIzooajnpLror6V0cmFja+WcqOmihOiniOaXtuiiq+W8leeUqOOAglxcbiAgICAvLyDkuIDoiKzor6XlgLzkuLo377yMMSsyKzQg5aaC5p6c5LiA5Liq5aqS5L2T5omA5pyJdHJhY2vlnYfmnKrorr7nva50cmFja19pbl9tb3ZpZeWSjHRyYWNrX2luX3ByZXZpZXfvvIzlsIbooqvnkIbop6PkuLrmiYDmnIl0cmFja+Wdh+iuvue9ruS6hui/meS4pOmhue+8m+WvueS6jmhpbnQgdHJhY2vvvIzor6XlgLzkuLowXFxuICAgIC8vIGhpbnQgdHJhY2sg6L+Z5Liq54m55q6K55qEdHJhY2vlubbkuI3ljIXlkKvlqpLkvZPmlbDmja7vvIzogIzmmK/ljIXlkKvkuobkuIDkupvlsIblhbbku5bmlbDmja50cmFja+aJk+WMheaIkOa1geWqkuS9k+eahOaMh+ekuuS/oeaBr+OAglxcbiAgICAweDAwLCAweDAwLCAweDAwLCAweDAwLCAvLyBjcmVhdGlvbl90aW1l5Yib5bu65pe26Ze077yI55u45a+55LqOVVRD5pe26Ze0MTkwNC0wMS0wMembtueCueeahOenkuaVsO+8iVxcbiAgICAweDAwLCAweDAwLCAweDAwLCAweDAwLCAvLyBtb2RpZmljYXRpb24gdGltZSDkv67mlLnml7bpl7RcXG4gICAgaWQgPj4+IDI0ICYgMHhGRiwgLy8gdHJhY2tfSUQ6IDQgYnl0ZXMgaWTlj7fvvIzkuI3og73ph43lpI3kuJTkuI3og73kuLowXFxuICAgIGlkID4+PiAxNiAmIDB4RkYsIGlkID4+PiA4ICYgMHhGRiwgaWQgJiAweEZGLCAweDAwLCAweDAwLCAweDAwLCAweDAwLCAvLyByZXNlcnZlZDogNCBieXRlcyAgICDkv53nlZnkvY1cXG4gICAgZHVyYXRpb24gPj4+IDI0ICYgMHhGRiwgLy8gZHVyYXRpb246IDQgYnl0ZXMgdHJhY2vnmoTml7bpl7Tplb/luqZcXG4gICAgZHVyYXRpb24gPj4+IDE2ICYgMHhGRiwgZHVyYXRpb24gPj4+IDggJiAweEZGLCBkdXJhdGlvbiAmIDB4RkYsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIC8vIHJlc2VydmVkOiAyICogNCBieXRlcyAgICDkv53nlZnkvY1cXG4gICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgLy8gbGF5ZXIoMmJ5dGVzKSArIGFsdGVybmF0ZV9ncm91cCgyYnl0ZXMpICDop4bpopHlsYLvvIzpu5jorqTkuLow77yM5YC85bCP55qE5Zyo5LiK5bGCLnRyYWNr5YiG57uE5L+h5oGv77yM6buY6K6k5Li6MOihqOekuuivpXRyYWNr5pyq5LiO5YW25LuWdHJhY2vmnInnvqTnu4TlhbPns7tcXG4gICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgLy8gdm9sdW1lKDJieXRlcykgKyByZXNlcnZlZCgyYnl0ZXMpICAgIFs4LjhdIOagvOW8j++8jOWmguaenOS4uumfs+mikXRyYWNr77yMMS4w77yIMHgwMTAw77yJ6KGo56S65pyA5aSn6Z+z6YeP77yb5ZCm5YiZ5Li6MCAgICvkv53nlZnkvY1cXG4gICAgMHgwMCwgMHgwMSwgMHgwMCwgMHgwMCwgLy8gLS0tLWJlZ2luIGNvbXBvc2l0aW9uIG1hdHJpeC0tLS1cXG4gICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMSwgMHgwMCwgMHgwMCwgLy8g6KeG6aKR5Y+Y5o2i55+p6Zi1XFxuICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4NDAsIDB4MDAsIDB4MDAsIDB4MDAsIC8vIC0tLS1lbmQgY29tcG9zaXRpb24gbWF0cml4LS0tLVxcbiAgICB3aWR0aCA+Pj4gOCAmIDB4RkYsIC8vIC8v5a695bqmXFxuICAgIHdpZHRoICYgMHhGRiwgMHgwMCwgMHgwMCwgaGVpZ2h0ID4+PiA4ICYgMHhGRiwgLy8g6auY5bqmXFxuICAgIGhlaWdodCAmIDB4RkYsIDB4MDAsIDB4MDBdKTtcXG4gICAgcmV0dXJuIEZtcDQuaW5pdEJveCg4ICsgY29udGVudC5ieXRlTGVuZ3RoLCAndGtoZCcsIGNvbnRlbnQpO1xcbiAgfVxcbiAgc3RhdGljIGVkdHMoZGF0YSkge1xcbiAgICBsZXQgYnVmZmVyID0gbmV3IF94Z3BsYXllclV0aWxzLkJ1ZmZlcigpO1xcbiAgICBsZXQgZHVyYXRpb24gPSBkYXRhLmR1cmF0aW9uO1xcbiAgICBsZXQgbWVkaWFUaW1lID0gZGF0YS5tZWRpYVRpbWU7XFxuICAgIGJ1ZmZlci53cml0ZShGbXA0LnNpemUoMzYpLCBGbXA0LnR5cGUoJ2VkdHMnKSk7XFxuICAgIC8vIGVsc3RcXG4gICAgYnVmZmVyLndyaXRlKEZtcDQuc2l6ZSgyOCksIEZtcDQudHlwZSgnZWxzdCcpKTtcXG4gICAgYnVmZmVyLndyaXRlKG5ldyBVaW50OEFycmF5KFsweDAwLCAweDAwLCAweDAwLCAweDAxLCAvLyBlbnRyeSBjb3VudFxcbiAgICBkdXJhdGlvbiA+PiAyNCAmIDB4ZmYsIGR1cmF0aW9uID4+IDE2ICYgMHhmZiwgZHVyYXRpb24gPj4gOCAmIDB4ZmYsIGR1cmF0aW9uICYgMHhmZiwgbWVkaWFUaW1lID4+IDI0ICYgMHhmZiwgbWVkaWFUaW1lID4+IDE2ICYgMHhmZiwgbWVkaWFUaW1lID4+IDggJiAweGZmLCBtZWRpYVRpbWUgJiAweGZmLCAweDAwLCAweDAwLCAweDAwLCAweDAxIC8vIG1lZGlhIHJhdGVcXG4gICAgXSkpO1xcbiAgICByZXR1cm4gYnVmZmVyLmJ1ZmZlcjtcXG4gIH1cXG4gIHN0YXRpYyBtZGlhKGRhdGEpIHtcXG4gICAgbGV0IHNpemUgPSA4O1xcbiAgICBsZXQgbWRoZCA9IEZtcDQubWRoZChkYXRhLnRpbWVzY2FsZSwgZGF0YS5kdXJhdGlvbik7XFxuICAgIGxldCBoZGxyID0gRm1wNC5oZGxyKGRhdGEudHlwZSk7XFxuICAgIGxldCBtaW5mID0gRm1wNC5taW5mKGRhdGEpO1xcbiAgICBbbWRoZCwgaGRsciwgbWluZl0uZm9yRWFjaChpdGVtID0+IHtcXG4gICAgICBzaXplICs9IGl0ZW0uYnl0ZUxlbmd0aDtcXG4gICAgfSk7XFxuICAgIHJldHVybiBGbXA0LmluaXRCb3goc2l6ZSwgJ21kaWEnLCBtZGhkLCBoZGxyLCBtaW5mKTtcXG4gIH1cXG4gIHN0YXRpYyBtZGhkKHRpbWVzY2FsZSA9IDEwMDAsIGR1cmF0aW9uKSB7XFxuICAgIGxldCBjb250ZW50ID0gbmV3IFVpbnQ4QXJyYXkoWzB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIC8vIGNyZWF0aW9uX3RpbWUgICAg5Yib5bu65pe26Ze0XFxuICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIC8vIG1vZGlmaWNhdGlvbl90aW1l5L+u5pS55pe26Ze0XFxuICAgIHRpbWVzY2FsZSA+Pj4gMjQgJiAweEZGLCAvLyB0aW1lc2NhbGU6IDQgYnl0ZXMgICAg5paH5Lu25aqS5L2T5ZyoMeenkuaXtumXtOWGheeahOWIu+W6puWAvO+8jOWPr+S7peeQhuino+S4ujHnp5Lplb/luqZcXG4gICAgdGltZXNjYWxlID4+PiAxNiAmIDB4RkYsIHRpbWVzY2FsZSA+Pj4gOCAmIDB4RkYsIHRpbWVzY2FsZSAmIDB4RkYsIGR1cmF0aW9uID4+PiAyNCAmIDB4RkYsIC8vIGR1cmF0aW9uOiA0IGJ5dGVzICB0cmFja+eahOaXtumXtOmVv+W6plxcbiAgICBkdXJhdGlvbiA+Pj4gMTYgJiAweEZGLCBkdXJhdGlvbiA+Pj4gOCAmIDB4RkYsIGR1cmF0aW9uICYgMHhGRiwgMHg1NSwgMHhDNCwgLy8gbGFuZ3VhZ2U6IHVuZCAodW5kZXRlcm1pbmVkKSDlqpLkvZPor63oqIDnoIHjgILmnIDpq5jkvY3kuLow77yM5ZCO6Z2iMTXkvY3kuLoz5Liq5a2X56ym77yI6KeBSVNPIDYzOS0yL1TmoIflh4bkuK3lrprkuYnvvIlcXG4gICAgMHgwMCwgMHgwMCAvLyBwcmVfZGVmaW5lZCA9IDBcXG4gICAgXSk7XFxuICAgIHJldHVybiBGbXA0LmluaXRCb3goMTIgKyBjb250ZW50LmJ5dGVMZW5ndGgsICdtZGhkJywgRm1wNC5leHRlbnNpb24oMCwgMCksIGNvbnRlbnQpO1xcbiAgfVxcbiAgc3RhdGljIGhkbHIodHlwZSkge1xcbiAgICBsZXQgdmFsdWUgPSBbMHgwMCwgLy8gdmVyc2lvbiAwXFxuICAgIDB4MDAsIDB4MDAsIDB4MDAsIC8vIGZsYWdzXFxuICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIC8vIHByZV9kZWZpbmVkXFxuICAgIDB4NzYsIDB4NjksIDB4NjQsIDB4NjUsIC8vIGhhbmRsZXJfdHlwZTogJ3ZpZGUnXFxuICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIC8vIHJlc2VydmVkXFxuICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIC8vIHJlc2VydmVkXFxuICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIC8vIHJlc2VydmVkXFxuICAgIDB4NTYsIDB4NjksIDB4NjQsIDB4NjUsIDB4NmYsIDB4NDgsIDB4NjEsIDB4NmUsIDB4NjQsIDB4NmMsIDB4NjUsIDB4NzIsIDB4MDAgLy8gbmFtZTogJ1ZpZGVvSGFuZGxlcidcXG4gICAgXTtcXG4gICAgaWYgKHR5cGUgPT09ICdhdWRpbycpIHtcXG4gICAgICB2YWx1ZS5zcGxpY2UoOCwgNCwgLi4uWzB4NzMsIDB4NmYsIDB4NzUsIDB4NmVdKTtcXG4gICAgICB2YWx1ZS5zcGxpY2UoMjQsIDEzLCAuLi5bMHg1MywgMHg2ZiwgMHg3NSwgMHg2ZSwgMHg2NCwgMHg0OCwgMHg2MSwgMHg2ZSwgMHg2NCwgMHg2YywgMHg2NSwgMHg3MiwgMHgwMF0pO1xcbiAgICB9XFxuICAgIHJldHVybiBGbXA0LmluaXRCb3goOCArIHZhbHVlLmxlbmd0aCwgJ2hkbHInLCBuZXcgVWludDhBcnJheSh2YWx1ZSkpO1xcbiAgfVxcbiAgc3RhdGljIG1pbmYoZGF0YSkge1xcbiAgICBsZXQgc2l6ZSA9IDg7XFxuICAgIGxldCB2bWhkID0gZGF0YS50eXBlID09PSAndmlkZW8nID8gRm1wNC52bWhkKCkgOiBGbXA0LnNtaGQoKTtcXG4gICAgbGV0IGRpbmYgPSBGbXA0LmRpbmYoKTtcXG4gICAgbGV0IHN0YmwgPSBGbXA0LnN0YmwoZGF0YSk7XFxuICAgIFt2bWhkLCBkaW5mLCBzdGJsXS5mb3JFYWNoKGl0ZW0gPT4ge1xcbiAgICAgIHNpemUgKz0gaXRlbS5ieXRlTGVuZ3RoO1xcbiAgICB9KTtcXG4gICAgcmV0dXJuIEZtcDQuaW5pdEJveChzaXplLCAnbWluZicsIHZtaGQsIGRpbmYsIHN0YmwpO1xcbiAgfVxcbiAgc3RhdGljIHZtaGQoKSB7XFxuICAgIHJldHVybiBGbXA0LmluaXRCb3goMjAsICd2bWhkJywgbmV3IFVpbnQ4QXJyYXkoWzB4MDAsIC8vIHZlcnNpb25cXG4gICAgMHgwMCwgMHgwMCwgMHgwMSwgLy8gZmxhZ3NcXG4gICAgMHgwMCwgMHgwMCwgLy8gZ3JhcGhpY3Ntb2RlXFxuICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAgLy8gb3Bjb2xvclxcbiAgICBdKSk7XFxuICB9XFxuICBzdGF0aWMgc21oZCgpIHtcXG4gICAgcmV0dXJuIEZtcDQuaW5pdEJveCgxNiwgJ3NtaGQnLCBuZXcgVWludDhBcnJheShbMHgwMCwgLy8gdmVyc2lvblxcbiAgICAweDAwLCAweDAwLCAweDAwLCAvLyBmbGFnc1xcbiAgICAweDAwLCAweDAwLCAvLyBiYWxhbmNlXFxuICAgIDB4MDAsIDB4MDAgLy8gcmVzZXJ2ZWRcXG4gICAgXSkpO1xcbiAgfVxcbiAgc3RhdGljIGRpbmYoKSB7XFxuICAgIGxldCBidWZmZXIgPSBuZXcgX3hncGxheWVyVXRpbHMuQnVmZmVyKCk7XFxuICAgIGxldCBkcmVmID0gWzB4MDAsIC8vIHZlcnNpb24gMFxcbiAgICAweDAwLCAweDAwLCAweDAwLCAvLyBmbGFnc1xcbiAgICAweDAwLCAweDAwLCAweDAwLCAweDAxLCAvLyBlbnRyeV9jb3VudFxcbiAgICAweDAwLCAweDAwLCAweDAwLCAweDBjLCAvLyBlbnRyeV9zaXplXFxuICAgIDB4NzUsIDB4NzIsIDB4NmMsIDB4MjAsIC8vICd1cmwnIHR5cGVcXG4gICAgMHgwMCwgLy8gdmVyc2lvbiAwXFxuICAgIDB4MDAsIDB4MDAsIDB4MDEgLy8gZW50cnlfZmxhZ3NcXG4gICAgXTtcXG4gICAgYnVmZmVyLndyaXRlKEZtcDQuc2l6ZSgzNiksIEZtcDQudHlwZSgnZGluZicpLCBGbXA0LnNpemUoMjgpLCBGbXA0LnR5cGUoJ2RyZWYnKSwgbmV3IFVpbnQ4QXJyYXkoZHJlZikpO1xcbiAgICByZXR1cm4gYnVmZmVyLmJ1ZmZlcjtcXG4gIH1cXG4gIHN0YXRpYyBzdGJsKGRhdGEpIHtcXG4gICAgbGV0IHNpemUgPSA4O1xcbiAgICBsZXQgc3RzZCA9IEZtcDQuc3RzZChkYXRhKTtcXG4gICAgbGV0IHN0dHMgPSBGbXA0LnN0dHMoKTtcXG4gICAgbGV0IHN0c2MgPSBGbXA0LnN0c2MoKTtcXG4gICAgbGV0IHN0c3ogPSBGbXA0LnN0c3ooKTtcXG4gICAgbGV0IHN0Y28gPSBGbXA0LnN0Y28oKTtcXG4gICAgW3N0c2QsIHN0dHMsIHN0c2MsIHN0c3osIHN0Y29dLmZvckVhY2goaXRlbSA9PiB7XFxuICAgICAgc2l6ZSArPSBpdGVtLmJ5dGVMZW5ndGg7XFxuICAgIH0pO1xcbiAgICByZXR1cm4gRm1wNC5pbml0Qm94KHNpemUsICdzdGJsJywgc3RzZCwgc3R0cywgc3RzYywgc3Rzeiwgc3Rjbyk7XFxuICB9XFxuICBzdGF0aWMgc3RzZChkYXRhKSB7XFxuICAgIGxldCBjb250ZW50O1xcbiAgICBpZiAoZGF0YS50eXBlID09PSAnYXVkaW8nKSB7XFxuICAgICAgLy8gaWYgKCFkYXRhLmlzQUFDICYmIGRhdGEuY29kZWMgPT09ICdtcDQnKSB7XFxuICAgICAgLy8gICAgIGNvbnRlbnQgPSBGTVA0Lm1wMyhkYXRhKTtcXG4gICAgICAvLyB9IGVsc2Uge1xcbiAgICAgIC8vXFxuICAgICAgLy8gfVxcbiAgICAgIC8vIOaUr+aMgW1wNGFcXG4gICAgICBjb250ZW50ID0gRm1wNC5tcDRhKGRhdGEpO1xcbiAgICB9IGVsc2Uge1xcbiAgICAgIGNvbnRlbnQgPSBGbXA0LmF2YzEoZGF0YSk7XFxuICAgIH1cXG4gICAgcmV0dXJuIEZtcDQuaW5pdEJveCgxNiArIGNvbnRlbnQuYnl0ZUxlbmd0aCwgJ3N0c2QnLCBGbXA0LmV4dGVuc2lvbigwLCAwKSwgbmV3IFVpbnQ4QXJyYXkoWzB4MDAsIDB4MDAsIDB4MDAsIDB4MDFdKSwgY29udGVudCk7XFxuICB9XFxuICBzdGF0aWMgbXA0YShkYXRhKSB7XFxuICAgIGxldCBjb250ZW50ID0gbmV3IFVpbnQ4QXJyYXkoWzB4MDAsIDB4MDAsIDB4MDAsIC8vIHJlc2VydmVkXFxuICAgIDB4MDAsIDB4MDAsIDB4MDAsIC8vIHJlc2VydmVkXFxuICAgIDB4MDAsIDB4MDEsIC8vIGRhdGFfcmVmZXJlbmNlX2luZGV4XFxuICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIC8vIHJlc2VydmVkXFxuICAgIDB4MDAsIGRhdGEuY2hhbm5lbENvdW50LCAvLyBjaGFubmVsY291bnRcXG4gICAgMHgwMCwgMHgxMCwgLy8gc2FtcGxlU2l6ZToxNmJpdHNcXG4gICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgLy8gcmVzZXJ2ZWQyXFxuICAgIGRhdGEuc2FtcGxlcmF0ZSA+PiA4ICYgMHhmZiwgZGF0YS5zYW1wbGVyYXRlICYgMHhmZiwgLy9cXG4gICAgMHgwMCwgMHgwMF0pO1xcbiAgICBsZXQgZXNkcyA9IEZtcDQuZXNkcyhkYXRhLmNvbmZpZyk7XFxuICAgIHJldHVybiBGbXA0LmluaXRCb3goOCArIGNvbnRlbnQuYnl0ZUxlbmd0aCArIGVzZHMuYnl0ZUxlbmd0aCwgJ21wNGEnLCBjb250ZW50LCBlc2RzKTtcXG4gIH1cXG4gIHN0YXRpYyBlc2RzKGNvbmZpZyA9IFs0MywgMTQ2LCA4LCAwXSkge1xcbiAgICBjb25zdCBjb25maWdsZW4gPSBjb25maWcubGVuZ3RoO1xcbiAgICBsZXQgYnVmZmVyID0gbmV3IF94Z3BsYXllclV0aWxzLkJ1ZmZlcigpO1xcbiAgICBsZXQgY29udGVudCA9IG5ldyBVaW50OEFycmF5KFsweDAwLCAvLyB2ZXJzaW9uIDBcXG4gICAgMHgwMCwgMHgwMCwgMHgwMCwgLy8gZmxhZ3NcXG5cXG4gICAgMHgwMywgLy8gZGVzY3JpcHRvcl90eXBlXFxuICAgIDB4MTcgKyBjb25maWdsZW4sIC8vIGxlbmd0aFxcbiAgICAweDAwLCAweDAxLCAvLyBlc19pZFxcbiAgICAweDAwLCAvLyBzdHJlYW1fcHJpb3JpdHlcXG5cXG4gICAgMHgwNCwgLy8gZGVzY3JpcHRvcl90eXBlXFxuICAgIDB4MGYgKyBjb25maWdsZW4sIC8vIGxlbmd0aFxcbiAgICAweDQwLCAvLyBjb2RlYyA6IG1wZWc0X2F1ZGlvXFxuICAgIDB4MTUsIC8vIHN0cmVhbV90eXBlXFxuICAgIDB4MDAsIDB4MDAsIDB4MDAsIC8vIGJ1ZmZlcl9zaXplXFxuICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIC8vIG1heEJpdHJhdGVcXG4gICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgLy8gYXZnQml0cmF0ZVxcblxcbiAgICAweDA1IC8vIGRlc2NyaXB0b3JfdHlwZVxcbiAgICBdLmNvbmNhdChbY29uZmlnbGVuXSkuY29uY2F0KGNvbmZpZykuY29uY2F0KFsweDA2LCAweDAxLCAweDAyXSkpO1xcbiAgICBidWZmZXIud3JpdGUoRm1wNC5zaXplKDggKyBjb250ZW50LmJ5dGVMZW5ndGgpLCBGbXA0LnR5cGUoJ2VzZHMnKSwgY29udGVudCk7XFxuICAgIHJldHVybiBidWZmZXIuYnVmZmVyO1xcbiAgfVxcbiAgc3RhdGljIGF2YzEoZGF0YSkge1xcbiAgICBsZXQgYnVmZmVyID0gbmV3IF94Z3BsYXllclV0aWxzLkJ1ZmZlcigpO1xcbiAgICBsZXQgc2l6ZSA9IDQwOyAvLyA4KGF2YzEpKzgoYXZjYykrOChidHJ0KSsxNihwYXNwKVxcbiAgICAvLyBsZXQgc3BzID0gZGF0YS5zcHNcXG4gICAgLy8gbGV0IHBwcyA9IGRhdGEucHBzXFxuICAgIGxldCB3aWR0aCA9IGRhdGEud2lkdGg7XFxuICAgIGxldCBoZWlnaHQgPSBkYXRhLmhlaWdodDtcXG4gICAgbGV0IGhTcGFjaW5nID0gZGF0YS5wYXJSYXRpby5oZWlnaHQ7XFxuICAgIGxldCB2U3BhY2luZyA9IGRhdGEucGFyUmF0aW8ud2lkdGg7XFxuICAgIC8vIGxldCBhdmNjQnVmZmVyID0gbmV3IEJ1ZmZlcigpXFxuICAgIC8vIGF2Y2NCdWZmZXIud3JpdGUobmV3IFVpbnQ4QXJyYXkoW1xcbiAgICAvLyAgIDB4MDEsIC8vIHZlcnNpb25cXG4gICAgLy8gICBzcHNbMV0sIC8vIHByb2ZpbGVcXG4gICAgLy8gICBzcHNbMl0sIC8vIHByb2ZpbGUgY29tcGF0aWJsZVxcbiAgICAvLyAgIHNwc1szXSwgLy8gbGV2ZWxcXG4gICAgLy8gICAweGZjIHwgMyxcXG4gICAgLy8gICAweEUwIHwgMSAvLyDnm67liY3lj6rlpITnkIbkuIDkuKpzcHNcXG4gICAgLy8gXS5jb25jYXQoW3Nwcy5sZW5ndGggPj4+IDggJiAweGZmLCBzcHMubGVuZ3RoICYgMHhmZl0pKSlcXG4gICAgLy8gYXZjY0J1ZmZlci53cml0ZShzcHMsIG5ldyBVaW50OEFycmF5KFsxLCBwcHMubGVuZ3RoID4+PiA4ICYgMHhmZiwgcHBzLmxlbmd0aCAmIDB4ZmZdKSwgcHBzKVxcblxcbiAgICBsZXQgYXZjYyA9IGRhdGEuYXZjYztcXG4gICAgbGV0IGF2YzEgPSBuZXcgVWludDhBcnJheShbMHgwMCwgMHgwMCwgMHgwMCwgLy8gcmVzZXJ2ZWRcXG4gICAgMHgwMCwgMHgwMCwgMHgwMCwgLy8gcmVzZXJ2ZWRcXG4gICAgMHgwMCwgMHgwMSwgLy8gZGF0YV9yZWZlcmVuY2VfaW5kZXhcXG4gICAgMHgwMCwgMHgwMCwgLy8gcHJlX2RlZmluZWRcXG4gICAgMHgwMCwgMHgwMCwgLy8gcmVzZXJ2ZWRcXG4gICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgLy8gcHJlX2RlZmluZWRcXG4gICAgd2lkdGggPj4gOCAmIDB4ZmYsIHdpZHRoICYgMHhmZiwgLy8gd2lkdGhcXG4gICAgaGVpZ2h0ID4+IDggJiAweGZmLCBoZWlnaHQgJiAweGZmLCAvLyBoZWlnaHRcXG4gICAgMHgwMCwgMHg0OCwgMHgwMCwgMHgwMCwgLy8gaG9yaXpyZXNvbHV0aW9uXFxuICAgIDB4MDAsIDB4NDgsIDB4MDAsIDB4MDAsIC8vIHZlcnRyZXNvbHV0aW9uXFxuICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIC8vIHJlc2VydmVkXFxuICAgIDB4MDAsIDB4MDEsIC8vIGZyYW1lX2NvdW50XFxuICAgIDB4MTIsIDB4NjQsIDB4NjEsIDB4NjksIDB4NkMsIC8vIGRhaWx5bW90aW9uL2hscy5qc1xcbiAgICAweDc5LCAweDZELCAweDZGLCAweDc0LCAweDY5LCAweDZGLCAweDZFLCAweDJGLCAweDY4LCAweDZDLCAweDczLCAweDJFLCAweDZBLCAweDczLCAweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAwLCAvLyBjb21wcmVzc29ybmFtZVxcbiAgICAweDAwLCAweDE4LCAvLyBkZXB0aCA9IDI0XFxuICAgIDB4MTEsIDB4MTFdKTsgLy8gcHJlX2RlZmluZWQgPSAtMVxcbiAgICBsZXQgYnRydCA9IG5ldyBVaW50OEFycmF5KFsweDAwLCAweDFjLCAweDljLCAweDgwLCAvLyBidWZmZXJTaXplREJcXG4gICAgMHgwMCwgMHgyZCwgMHhjNiwgMHhjMCwgLy8gbWF4Qml0cmF0ZVxcbiAgICAweDAwLCAweDJkLCAweGM2LCAweGMwIC8vIGF2Z0JpdHJhdGVcXG4gICAgXSk7XFxuICAgIGxldCBwYXNwID0gbmV3IFVpbnQ4QXJyYXkoW2hTcGFjaW5nID4+IDI0LCAvLyBoU3BhY2luZ1xcbiAgICBoU3BhY2luZyA+PiAxNiAmIDB4ZmYsIGhTcGFjaW5nID4+IDggJiAweGZmLCBoU3BhY2luZyAmIDB4ZmYsIHZTcGFjaW5nID4+IDI0LCAvLyB2U3BhY2luZ1xcbiAgICB2U3BhY2luZyA+PiAxNiAmIDB4ZmYsIHZTcGFjaW5nID4+IDggJiAweGZmLCB2U3BhY2luZyAmIDB4ZmZdKTtcXG5cXG4gICAgYnVmZmVyLndyaXRlKEZtcDQuc2l6ZShzaXplICsgYXZjMS5ieXRlTGVuZ3RoICsgYXZjYy5ieXRlTGVuZ3RoICsgYnRydC5ieXRlTGVuZ3RoKSwgRm1wNC50eXBlKCdhdmMxJyksIGF2YzEsIEZtcDQuc2l6ZSg4ICsgYXZjYy5ieXRlTGVuZ3RoKSwgRm1wNC50eXBlKCdhdmNDJyksIGF2Y2MsIEZtcDQuc2l6ZSgyMCksIEZtcDQudHlwZSgnYnRydCcpLCBidHJ0LCBGbXA0LnNpemUoMTYpLCBGbXA0LnR5cGUoJ3Bhc3AnKSwgcGFzcCk7XFxuICAgIHJldHVybiBidWZmZXIuYnVmZmVyO1xcbiAgfVxcbiAgc3RhdGljIHN0dHMoKSB7XFxuICAgIGxldCBjb250ZW50ID0gbmV3IFVpbnQ4QXJyYXkoWzB4MDAsIC8vIHZlcnNpb25cXG4gICAgMHgwMCwgMHgwMCwgMHgwMCwgLy8gZmxhZ3NcXG4gICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCAvLyBlbnRyeV9jb3VudFxcbiAgICBdKTtcXG4gICAgcmV0dXJuIEZtcDQuaW5pdEJveCgxNiwgJ3N0dHMnLCBjb250ZW50KTtcXG4gIH1cXG4gIHN0YXRpYyBzdHNjKCkge1xcbiAgICBsZXQgY29udGVudCA9IG5ldyBVaW50OEFycmF5KFsweDAwLCAvLyB2ZXJzaW9uXFxuICAgIDB4MDAsIDB4MDAsIDB4MDAsIC8vIGZsYWdzXFxuICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAgLy8gZW50cnlfY291bnRcXG4gICAgXSk7XFxuICAgIHJldHVybiBGbXA0LmluaXRCb3goMTYsICdzdHNjJywgY29udGVudCk7XFxuICB9XFxuICBzdGF0aWMgc3RjbygpIHtcXG4gICAgbGV0IGNvbnRlbnQgPSBuZXcgVWludDhBcnJheShbMHgwMCwgLy8gdmVyc2lvblxcbiAgICAweDAwLCAweDAwLCAweDAwLCAvLyBmbGFnc1xcbiAgICAweDAwLCAweDAwLCAweDAwLCAweDAwIC8vIGVudHJ5X2NvdW50XFxuICAgIF0pO1xcbiAgICByZXR1cm4gRm1wNC5pbml0Qm94KDE2LCAnc3RjbycsIGNvbnRlbnQpO1xcbiAgfVxcbiAgc3RhdGljIHN0c3ooKSB7XFxuICAgIGxldCBjb250ZW50ID0gbmV3IFVpbnQ4QXJyYXkoWzB4MDAsIC8vIHZlcnNpb25cXG4gICAgMHgwMCwgMHgwMCwgMHgwMCwgLy8gZmxhZ3NcXG4gICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgLy8gc2FtcGxlX3NpemVcXG4gICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCAvLyBzYW1wbGVfY291bnRcXG4gICAgXSk7XFxuICAgIHJldHVybiBGbXA0LmluaXRCb3goMjAsICdzdHN6JywgY29udGVudCk7XFxuICB9XFxuICBzdGF0aWMgbXZleChkdXJhdGlvbiwgdGltZXNjYWxlID0gMTAwMCwgdHJhY2tJRCkge1xcbiAgICBsZXQgYnVmZmVyID0gbmV3IF94Z3BsYXllclV0aWxzLkJ1ZmZlcigpO1xcbiAgICBsZXQgbWVoZCA9IF94Z3BsYXllclV0aWxzLkJ1ZmZlci53cml0ZVVpbnQzMihkdXJhdGlvbik7XFxuICAgIGJ1ZmZlci53cml0ZShGbXA0LnNpemUoNTYpLCBGbXA0LnR5cGUoJ212ZXgnKSwgRm1wNC5zaXplKDE2KSwgRm1wNC50eXBlKCdtZWhkJyksIEZtcDQuZXh0ZW5zaW9uKDAsIDApLCBtZWhkLCBGbXA0LnRyZXgodHJhY2tJRCkpO1xcbiAgICByZXR1cm4gYnVmZmVyLmJ1ZmZlcjtcXG4gIH1cXG4gIHN0YXRpYyB0cmV4KGlkKSB7XFxuICAgIGxldCBjb250ZW50ID0gbmV3IFVpbnQ4QXJyYXkoWzB4MDAsIC8vIHZlcnNpb24gMFxcbiAgICAweDAwLCAweDAwLCAweDAwLCAvLyBmbGFnc1xcbiAgICBpZCA+PiAyNCwgaWQgPj4gMTYgJiAweGZmLCBpZCA+PiA4ICYgMHhmZiwgaWQgJiAweGZmLCAvLyB0cmFja19JRFxcbiAgICAweDAwLCAweDAwLCAweDAwLCAweDAxLCAvLyBkZWZhdWx0X3NhbXBsZV9kZXNjcmlwdGlvbl9pbmRleFxcbiAgICAweDAwLCAweDAwLCAweDAwLCAweDAwLCAvLyBkZWZhdWx0X3NhbXBsZV9kdXJhdGlvblxcbiAgICAweDAwLCAweDAwLCAweDAwLCAweDAwLCAvLyBkZWZhdWx0X3NhbXBsZV9zaXplXFxuICAgIDB4MDAsIDB4MDEsIDB4MDAsIDB4MDEgLy8gZGVmYXVsdF9zYW1wbGVfZmxhZ3NcXG4gICAgXSk7XFxuICAgIHJldHVybiBGbXA0LmluaXRCb3goOCArIGNvbnRlbnQuYnl0ZUxlbmd0aCwgJ3RyZXgnLCBjb250ZW50KTtcXG4gIH1cXG4gIHN0YXRpYyBtb29mKGRhdGEpIHtcXG4gICAgbGV0IHNpemUgPSA4O1xcbiAgICBsZXQgbWZoZCA9IEZtcDQubWZoZCgpO1xcbiAgICBsZXQgdHJhZiA9IEZtcDQudHJhZihkYXRhKTtcXG4gICAgW21maGQsIHRyYWZdLmZvckVhY2goaXRlbSA9PiB7XFxuICAgICAgc2l6ZSArPSBpdGVtLmJ5dGVMZW5ndGg7XFxuICAgIH0pO1xcbiAgICByZXR1cm4gRm1wNC5pbml0Qm94KHNpemUsICdtb29mJywgbWZoZCwgdHJhZik7XFxuICB9XFxuICBzdGF0aWMgbWZoZCgpIHtcXG4gICAgbGV0IGNvbnRlbnQgPSBfeGdwbGF5ZXJVdGlscy5CdWZmZXIud3JpdGVVaW50MzIoRm1wNC5zZXF1ZW5jZSk7XFxuICAgIEZtcDQuc2VxdWVuY2UgKz0gMTtcXG4gICAgcmV0dXJuIEZtcDQuaW5pdEJveCgxNiwgJ21maGQnLCBGbXA0LmV4dGVuc2lvbigwLCAwKSwgY29udGVudCk7XFxuICB9XFxuICBzdGF0aWMgdHJhZihkYXRhKSB7XFxuICAgIGxldCBzaXplID0gODtcXG4gICAgbGV0IHRmaGQgPSBGbXA0LnRmaGQoZGF0YS5pZCk7XFxuICAgIGxldCB0ZmR0ID0gRm1wNC50ZmR0KGRhdGEudGltZSk7XFxuICAgIGxldCBzZHRwID0gRm1wNC5zZHRwKGRhdGEpO1xcbiAgICBsZXQgdHJ1biA9IEZtcDQudHJ1bihkYXRhLCBzZHRwLmJ5dGVMZW5ndGgpO1xcblxcbiAgICBbdGZoZCwgdGZkdCwgdHJ1biwgc2R0cF0uZm9yRWFjaChpdGVtID0+IHtcXG4gICAgICBzaXplICs9IGl0ZW0uYnl0ZUxlbmd0aDtcXG4gICAgfSk7XFxuICAgIHJldHVybiBGbXA0LmluaXRCb3goc2l6ZSwgJ3RyYWYnLCB0ZmhkLCB0ZmR0LCB0cnVuLCBzZHRwKTtcXG4gIH1cXG4gIHN0YXRpYyB0ZmhkKGlkKSB7XFxuICAgIGxldCBjb250ZW50ID0gX3hncGxheWVyVXRpbHMuQnVmZmVyLndyaXRlVWludDMyKGlkKTtcXG4gICAgcmV0dXJuIEZtcDQuaW5pdEJveCgxNiwgJ3RmaGQnLCBGbXA0LmV4dGVuc2lvbigwLCAwKSwgY29udGVudCk7XFxuICB9XFxuICBzdGF0aWMgdGZkdCh0aW1lKSB7XFxuICAgIC8vIGxldCB1cHBlciA9IE1hdGguZmxvb3IodGltZSAvIChVSU5UMzJfTUFYICsgMSkpLFxcbiAgICAvLyAgICAgbG93ZXIgPSBNYXRoLmZsb29yKHRpbWUgJSAoVUlOVDMyX01BWCArIDEpKTtcXG4gICAgcmV0dXJuIEZtcDQuaW5pdEJveCgxNiwgJ3RmZHQnLCBGbXA0LmV4dGVuc2lvbigwLCAwKSwgX3hncGxheWVyVXRpbHMuQnVmZmVyLndyaXRlVWludDMyKHRpbWUpKTtcXG4gIH1cXG4gIHN0YXRpYyB0cnVuKGRhdGEsIHNkdHBMZW5ndGgpIHtcXG4gICAgLy8gbGV0IGlkID0gZGF0YS5pZDtcXG4gICAgLy8gbGV0IGNlaWwgPSBpZCA9PT0gMSA/IDE2IDogMTI7XFxuICAgIGxldCBidWZmZXIgPSBuZXcgX3hncGxheWVyVXRpbHMuQnVmZmVyKCk7XFxuICAgIGxldCBzYW1wbGVDb3VudCA9IF94Z3BsYXllclV0aWxzLkJ1ZmZlci53cml0ZVVpbnQzMihkYXRhLnNhbXBsZXMubGVuZ3RoKTtcXG4gICAgLy8gbWRhdC1oZWFkZXIgOFxcbiAgICAvLyBtb29mLWhlYWRlciA4XFxuICAgIC8vIG1maGQgMTZcXG4gICAgLy8gdHJhZi1oZWFkZXIgOFxcbiAgICAvLyB0aGhkIDE2XFxuICAgIC8vIHRmZHQgMjBcXG4gICAgLy8gdHJ1bi1oZWFkZXIgMTJcXG4gICAgLy8gc2FtcGxlQ291bnQgNFxcbiAgICAvLyBkYXRhLW9mZnNldCA0XFxuICAgIC8vIHNhbXBsZXMubGVuZ3RoXFxuICAgIGxldCBvZmZzZXQgPSBfeGdwbGF5ZXJVdGlscy5CdWZmZXIud3JpdGVVaW50MzIoOCArIDggKyAxNiArIDggKyAxNiArIDE2ICsgMTIgKyA0ICsgNCArIDE2ICogZGF0YS5zYW1wbGVzLmxlbmd0aCArIHNkdHBMZW5ndGgpO1xcbiAgICBidWZmZXIud3JpdGUoRm1wNC5zaXplKDIwICsgMTYgKiBkYXRhLnNhbXBsZXMubGVuZ3RoKSwgRm1wNC50eXBlKCd0cnVuJyksIG5ldyBVaW50OEFycmF5KFsweDAwLCAweDAwLCAweDBGLCAweDAxXSksIHNhbXBsZUNvdW50LCBvZmZzZXQpO1xcblxcbiAgICAvLyBsZXQgc2l6ZSA9IGJ1ZmZlci5idWZmZXIuYnl0ZUxlbmd0aFxcbiAgICAvLyBsZXQgd3JpdGVPZmZzZXQgPSAwXFxuICAgIC8vIGRhdGEuc2FtcGxlcy5mb3JFYWNoKCgpID0+IHtcXG4gICAgLy8gICBzaXplICs9IDE2XFxuICAgIC8vIH0pXFxuICAgIC8vXFxuICAgIC8vIGxldCB0cnVuQm94ID0gbmV3IFVpbnQ4QXJyYXkoc2l6ZSlcXG5cXG4gICAgLy8gdHJ1bkJveC5zZXQoYnVmZmVyLmJ1ZmZlciwgMClcXG5cXG4gICAgZGF0YS5zYW1wbGVzLmZvckVhY2goaXRlbSA9PiB7XFxuICAgICAgY29uc3QgZmxhZ3MgPSBpdGVtLmZsYWdzO1xcbiAgICAgIC8vIGNvbnNvbGUubG9nKGl0ZW0udHlwZSwgaXRlbS5kdHMsIGl0ZW0uZHVyYXRpb24pXFxuXFxuICAgICAgYnVmZmVyLndyaXRlKG5ldyBVaW50OEFycmF5KFtpdGVtLmR1cmF0aW9uID4+PiAyNCAmIDB4RkYsIC8vIHNhbXBsZV9kdXJhdGlvblxcbiAgICAgIGl0ZW0uZHVyYXRpb24gPj4+IDE2ICYgMHhGRiwgaXRlbS5kdXJhdGlvbiA+Pj4gOCAmIDB4RkYsIGl0ZW0uZHVyYXRpb24gJiAweEZGLCBpdGVtLnNpemUgPj4+IDI0ICYgMHhGRiwgLy8gc2FtcGxlX3NpemVcXG4gICAgICBpdGVtLnNpemUgPj4+IDE2ICYgMHhGRiwgaXRlbS5zaXplID4+PiA4ICYgMHhGRiwgaXRlbS5zaXplICYgMHhGRiwgZmxhZ3MuaXNMZWFkaW5nIDw8IDIgfCBmbGFncy5kZXBlbmRzT24sIC8vIHNhbXBsZV9mbGFnc1xcbiAgICAgIGZsYWdzLmlzRGVwZW5kZWRPbiA8PCA2IHwgZmxhZ3MuaGFzUmVkdW5kYW5jeSA8PCA0IHwgZmxhZ3MuaXNOb25TeW5jLCAweDAwLCAweDAwLCAvLyBzYW1wbGVfZGVncmFkYXRpb25fcHJpb3JpdHlcXG4gICAgICBpdGVtLmN0cyA+Pj4gMjQgJiAweEZGLCAvLyBzYW1wbGVfY29tcG9zaXRpb25fdGltZV9vZmZzZXRcXG4gICAgICBpdGVtLmN0cyA+Pj4gMTYgJiAweEZGLCBpdGVtLmN0cyA+Pj4gOCAmIDB4RkYsIGl0ZW0uY3RzICYgMHhGRl0pKTtcXG4gICAgICAvLyB3cml0ZU9mZnNldCArPSAxNlxcbiAgICAgIC8vIGJ1ZmZlci53cml0ZShCdWZmZXIud3JpdGVVaW50MzIoMCkpO1xcbiAgICB9KTtcXG4gICAgcmV0dXJuIGJ1ZmZlci5idWZmZXI7XFxuICB9XFxuICBzdGF0aWMgc2R0cChkYXRhKSB7XFxuICAgIGxldCBidWZmZXIgPSBuZXcgX3hncGxheWVyVXRpbHMuQnVmZmVyKCk7XFxuICAgIGJ1ZmZlci53cml0ZShGbXA0LnNpemUoMTIgKyBkYXRhLnNhbXBsZXMubGVuZ3RoKSwgRm1wNC50eXBlKCdzZHRwJyksIEZtcDQuZXh0ZW5zaW9uKDAsIDApKTtcXG4gICAgZGF0YS5zYW1wbGVzLmZvckVhY2goaXRlbSA9PiB7XFxuICAgICAgY29uc3QgZmxhZ3MgPSBpdGVtLmZsYWdzO1xcbiAgICAgIGNvbnN0IG51bSA9IGZsYWdzLmlzTGVhZGluZyA8PCA2IHwgLy8gaXNfbGVhZGluZzogMiAoYml0KVxcbiAgICAgIGZsYWdzLmRlcGVuZHNPbiA8PCA0IHwgLy8gc2FtcGxlX2RlcGVuZHNfb25cXG4gICAgICBmbGFncy5pc0RlcGVuZGVkT24gPDwgMiB8IC8vIHNhbXBsZV9pc19kZXBlbmRlZF9vblxcbiAgICAgIGZsYWdzLmhhc1JlZHVuZGFuY3k7IC8vIHNhbXBsZV9oYXNfcmVkdW5kYW5jeVxcblxcbiAgICAgIGJ1ZmZlci53cml0ZShuZXcgVWludDhBcnJheShbbnVtXSkpO1xcbiAgICB9KTtcXG4gICAgcmV0dXJuIGJ1ZmZlci5idWZmZXI7XFxuICB9XFxuICBzdGF0aWMgbWRhdChkYXRhKSB7XFxuICAgIGxldCBidWZmZXIgPSBuZXcgX3hncGxheWVyVXRpbHMuQnVmZmVyKCk7XFxuICAgIGxldCBzaXplID0gODtcXG4gICAgZGF0YS5zYW1wbGVzLmZvckVhY2goaXRlbSA9PiB7XFxuICAgICAgc2l6ZSArPSBpdGVtLnNpemU7XFxuICAgIH0pO1xcbiAgICBidWZmZXIud3JpdGUoRm1wNC5zaXplKHNpemUpLCBGbXA0LnR5cGUoJ21kYXQnKSk7XFxuICAgIGxldCBtZGF0Qm94ID0gbmV3IFVpbnQ4QXJyYXkoc2l6ZSk7XFxuICAgIGxldCBvZmZzZXQgPSAwO1xcbiAgICBtZGF0Qm94LnNldChidWZmZXIuYnVmZmVyLCBvZmZzZXQpO1xcbiAgICBvZmZzZXQgKz0gODtcXG4gICAgZGF0YS5zYW1wbGVzLmZvckVhY2goaXRlbSA9PiB7XFxuICAgICAgaXRlbS5idWZmZXIuZm9yRWFjaCh1bml0ID0+IHtcXG4gICAgICAgIG1kYXRCb3guc2V0KHVuaXQsIG9mZnNldCk7XFxuICAgICAgICBvZmZzZXQgKz0gdW5pdC5ieXRlTGVuZ3RoO1xcbiAgICAgICAgLy8gYnVmZmVyLndyaXRlKHVuaXQuZGF0YSk7XFxuICAgICAgfSk7XFxuICAgIH0pO1xcbiAgICByZXR1cm4gbWRhdEJveDtcXG4gIH1cXG59XFxuRm1wNC50eXBlID0gbmFtZSA9PiB7XFxuICByZXR1cm4gbmV3IFVpbnQ4QXJyYXkoW25hbWUuY2hhckNvZGVBdCgwKSwgbmFtZS5jaGFyQ29kZUF0KDEpLCBuYW1lLmNoYXJDb2RlQXQoMiksIG5hbWUuY2hhckNvZGVBdCgzKV0pO1xcbn07XFxuRm1wNC5zZXF1ZW5jZSA9IDE7XFxuXFxuZXhwb3J0cy5kZWZhdWx0ID0gRm1wNDtcXG5cXG4vLyMgc291cmNlVVJMPXdlYnBhY2s6Ly94Z3BsYXllci1mbHYvLi4veGdwbGF5ZXItcmVtdXgvc3JjL21wNC9mbXA0LmpzP1wiKX0sXCIuLi94Z3BsYXllci1yZW11eC9zcmMvbXA0L2luZGV4LmpzXCI6XG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi4veGdwbGF5ZXItcmVtdXgvc3JjL21wNC9pbmRleC5qcyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIG5vIHN0YXRpYyBleHBvcnRzIGZvdW5kICovZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7XCJ1c2Ugc3RyaWN0XCI7ZXZhbChcIlxcblxcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcXFwiX19lc01vZHVsZVxcXCIsIHtcXG4gIHZhbHVlOiB0cnVlXFxufSk7XFxuXFxudmFyIF94Z3BsYXllclV0aWxzID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgeGdwbGF5ZXItdXRpbHMgKi8gXFxcIi4uL3hncGxheWVyLXV0aWxzL2luZGV4LmpzXFxcIik7XFxuXFxudmFyIF9mbXAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL2ZtcDQgKi8gXFxcIi4uL3hncGxheWVyLXJlbXV4L3NyYy9tcDQvZm1wNC5qc1xcXCIpO1xcblxcbnZhciBfZm1wMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2ZtcCk7XFxuXFxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cXG5cXG5jb25zdCBSRU1VWF9FVkVOVFMgPSBfeGdwbGF5ZXJVdGlscy5FVkVOVFMuUkVNVVhfRVZFTlRTO1xcblxcbmNsYXNzIE1wNFJlbXV4ZXIge1xcbiAgY29uc3RydWN0b3IoKSB7XFxuICAgIHRoaXMuX2R0c0Jhc2UgPSAwO1xcbiAgICB0aGlzLl9pc0R0c0Jhc2VJbml0ZWQgPSBmYWxzZTtcXG5cXG4gICAgdGhpcy52aWRlb0FsbER1cmF0aW9uID0gMDtcXG4gICAgdGhpcy5hdWRpb0FsbER1cmF0aW9uID0gMDtcXG4gIH1cXG5cXG4gIGluaXQoKSB7XFxuICAgIHRoaXMub24oUkVNVVhfRVZFTlRTLlJFTVVYX01FRElBLCB0aGlzLnJlbXV4LmJpbmQodGhpcykpO1xcbiAgICB0aGlzLm9uKFJFTVVYX0VWRU5UUy5SRU1VWF9NRVRBREFUQSwgdGhpcy5vbk1ldGFEYXRhUmVhZHkuYmluZCh0aGlzKSk7XFxuICB9XFxuXFxuICBkZXN0cm95KCkge1xcbiAgICB0aGlzLl9kdHNCYXNlID0gLTE7XFxuICAgIHRoaXMuX2R0c0Jhc2VJbml0ZWQgPSBmYWxzZTtcXG4gIH1cXG5cXG4gIHJlc2V0KCkge1xcbiAgICB0aGlzLl9kdHNCYXNlID0gMDtcXG4gICAgdGhpcy5faXNEdHNCYXNlSW5pdGVkID0gZmFsc2U7XFxuICB9XFxuXFxuICByZW11eCgpIHtcXG4gICAgY29uc3QgeyBhdWRpb1RyYWNrLCB2aWRlb1RyYWNrIH0gPSB0aGlzLl9jb250ZXh0LmdldEluc3RhbmNlKCdUUkFDS1MnKTtcXG4gICAgIXRoaXMuX2lzRHRzQmFzZUluaXRlZCAmJiB0aGlzLmNhbGNEdHNCYXNlKGF1ZGlvVHJhY2ssIHZpZGVvVHJhY2spO1xcblxcbiAgICB0aGlzLl9yZW11eFZpZGVvKHZpZGVvVHJhY2spO1xcbiAgICB0aGlzLl9yZW11eEF1ZGlvKGF1ZGlvVHJhY2spO1xcbiAgfVxcblxcbiAgc2VlaygpIHt9XFxuXFxuICBvbk1ldGFEYXRhUmVhZHkodHlwZSkge1xcbiAgICBsZXQgaW5pdFNlZ21lbnQgPSBuZXcgX3hncGxheWVyVXRpbHMuQnVmZmVyKCk7XFxuICAgIGxldCBmdHlwID0gX2ZtcDIuZGVmYXVsdC5mdHlwKCk7XFxuICAgIGxldCBtb292O1xcbiAgICBsZXQgdHJhY2s7XFxuXFxuICAgIGlmICh0eXBlID09PSAnYXVkaW8nKSB7XFxuICAgICAgY29uc3QgeyBhdWRpb1RyYWNrIH0gPSB0aGlzLl9jb250ZXh0LmdldEluc3RhbmNlKCdUUkFDS1MnKTtcXG4gICAgICB0cmFjayA9IGF1ZGlvVHJhY2s7XFxuICAgIH0gZWxzZSB7XFxuICAgICAgY29uc3QgeyB2aWRlb1RyYWNrIH0gPSB0aGlzLl9jb250ZXh0LmdldEluc3RhbmNlKCdUUkFDS1MnKTtcXG4gICAgICB0cmFjayA9IHZpZGVvVHJhY2s7XFxuICAgIH1cXG5cXG4gICAgbW9vdiA9IF9mbXAyLmRlZmF1bHQubW9vdih7IHR5cGUsIG1ldGE6IHRyYWNrLm1ldGEgfSk7XFxuXFxuICAgIGluaXRTZWdtZW50LndyaXRlKGZ0eXAsIG1vb3YpO1xcblxcbiAgICBsZXQgcHJlc291cmNlYnVmZmVyID0gdGhpcy5fY29udGV4dC5nZXRJbnN0YW5jZSgnUFJFX1NPVVJDRV9CVUZGRVInKTtcXG4gICAgbGV0IHNvdXJjZSA9IHByZXNvdXJjZWJ1ZmZlci5nZXRTb3VyY2UodHlwZSk7XFxuICAgIGlmICghc291cmNlKSB7XFxuICAgICAgc291cmNlID0gcHJlc291cmNlYnVmZmVyLmNyZWF0ZVNvdXJjZSh0eXBlKTtcXG4gICAgfVxcblxcbiAgICBzb3VyY2UubWltZXR5cGUgPSB0cmFjay5tZXRhLmNvZGVjO1xcbiAgICBzb3VyY2UuaW5pdCA9IGluaXRTZWdtZW50O1xcbiAgICB0aGlzLmVtaXQoUkVNVVhfRVZFTlRTLklOSVRfU0VHTUVOVCwgdHlwZSk7XFxuICB9XFxuXFxuICBjYWxjRHRzQmFzZShhdWRpb1RyYWNrLCB2aWRlb1RyYWNrKSB7XFxuICAgIGlmICghYXVkaW9UcmFjay5zYW1wbGVzLmxlbmd0aCAmJiAhdmlkZW9UcmFjay5zYW1wbGVzLmxlbmd0aCkge1xcbiAgICAgIHJldHVybjtcXG4gICAgfVxcblxcbiAgICBsZXQgYXVkaW9CYXNlID0gSW5maW5pdHk7XFxuICAgIGxldCB2aWRlb0Jhc2UgPSBJbmZpbml0eTtcXG5cXG4gICAgaWYgKGF1ZGlvVHJhY2suc2FtcGxlcyAmJiBhdWRpb1RyYWNrLnNhbXBsZXMubGVuZ3RoKSB7XFxuICAgICAgYXVkaW9CYXNlID0gYXVkaW9UcmFjay5zYW1wbGVzWzBdLmR0cztcXG4gICAgfVxcbiAgICBpZiAodmlkZW9UcmFjay5zYW1wbGVzICYmIHZpZGVvVHJhY2suc2FtcGxlcy5sZW5ndGgpIHtcXG4gICAgICB2aWRlb0Jhc2UgPSB2aWRlb1RyYWNrLnNhbXBsZXNbMF0uZHRzO1xcbiAgICB9XFxuXFxuICAgIHRoaXMuX2R0c0Jhc2UgPSBNYXRoLm1pbihhdWRpb0Jhc2UsIHZpZGVvQmFzZSk7XFxuICAgIHRoaXMuX2lzRHRzQmFzZUluaXRlZCA9IHRydWU7XFxuICB9XFxuXFxuICBfcmVtdXhWaWRlbyh2aWRlb1RyYWNrKSB7XFxuICAgIGNvbnN0IHRyYWNrID0gdmlkZW9UcmFjaztcXG5cXG4gICAgaWYgKCF2aWRlb1RyYWNrLnNhbXBsZXMgfHwgIXZpZGVvVHJhY2suc2FtcGxlcy5sZW5ndGgpIHtcXG4gICAgICByZXR1cm47XFxuICAgIH1cXG5cXG4gICAgbGV0IHsgc2FtcGxlcyB9ID0gdHJhY2s7XFxuICAgIGxldCBmaXJzdER0cyA9IC0xO1xcblxcbiAgICBjb25zdCBtcDRTYW1wbGVzID0gW107XFxuICAgIGNvbnN0IG1kYXRCb3ggPSB7XFxuICAgICAgc2FtcGxlczogW11cXG4gICAgfTtcXG5cXG4gICAgd2hpbGUgKHNhbXBsZXMubGVuZ3RoKSB7XFxuICAgICAgY29uc3QgYXZjU2FtcGxlID0gc2FtcGxlcy5zaGlmdCgpO1xcbiAgICAgIGNvbnN0IHsgaXNLZXlmcmFtZSB9ID0gYXZjU2FtcGxlO1xcbiAgICAgIGxldCBkdHMgPSBhdmNTYW1wbGUuZHRzIC0gdGhpcy5fZHRzQmFzZTtcXG5cXG4gICAgICBpZiAoZmlyc3REdHMgPT09IC0xKSB7XFxuICAgICAgICBmaXJzdER0cyA9IGR0cztcXG4gICAgICB9XFxuXFxuICAgICAgbGV0IGN0cztcXG4gICAgICBsZXQgcHRzO1xcbiAgICAgIGlmIChhdmNTYW1wbGUucHRzKSB7XFxuICAgICAgICBwdHMgPSBhdmNTYW1wbGUucHRzIC0gdGhpcy5fZHRzQmFzZTtcXG4gICAgICAgIGN0cyA9IHB0cyAtIGR0cztcXG4gICAgICB9XFxuICAgICAgaWYgKGF2Y1NhbXBsZS5jdHMpIHtcXG4gICAgICAgIHB0cyA9IGF2Y1NhbXBsZS5jdHMgKyBkdHM7XFxuICAgICAgICBjdHMgPSBhdmNTYW1wbGUuY3RzO1xcbiAgICAgIH1cXG5cXG4gICAgICBsZXQgbWRhdFNhbXBsZSA9IHtcXG4gICAgICAgIGJ1ZmZlcjogW10sXFxuICAgICAgICBzaXplOiAwXFxuICAgICAgfTtcXG4gICAgICBtZGF0Qm94LnNhbXBsZXMucHVzaChtZGF0U2FtcGxlKTtcXG4gICAgICBtZGF0U2FtcGxlLmJ1ZmZlci5wdXNoKGF2Y1NhbXBsZS5kYXRhKTtcXG4gICAgICBtZGF0U2FtcGxlLnNpemUgKz0gYXZjU2FtcGxlLmRhdGEuYnl0ZUxlbmd0aDtcXG5cXG4gICAgICBsZXQgc2FtcGxlRHVyYXRpb24gPSAwO1xcbiAgICAgIGlmIChzYW1wbGVzLmxlbmd0aCA+PSAxKSB7XFxuICAgICAgICBjb25zdCBuZXh0RHRzID0gc2FtcGxlc1swXS5kdHMgLSB0aGlzLl9kdHNCYXNlO1xcbiAgICAgICAgc2FtcGxlRHVyYXRpb24gPSBuZXh0RHRzIC0gZHRzO1xcbiAgICAgIH0gZWxzZSB7XFxuICAgICAgICBpZiAobXA0U2FtcGxlcy5sZW5ndGggPj0gMSkge1xcbiAgICAgICAgICAvLyBsYXN0ZXN0IHNhbXBsZSwgdXNlIHNlY29uZCBsYXN0IGR1cmF0aW9uXFxuICAgICAgICAgIHNhbXBsZUR1cmF0aW9uID0gbXA0U2FtcGxlc1ttcDRTYW1wbGVzLmxlbmd0aCAtIDFdLmR1cmF0aW9uO1xcbiAgICAgICAgfSBlbHNlIHtcXG4gICAgICAgICAgLy8gdGhlIG9ubHkgb25lIHNhbXBsZSwgdXNlIHJlZmVyZW5jZSBkdXJhdGlvblxcbiAgICAgICAgICBzYW1wbGVEdXJhdGlvbiA9IHRoaXMudmlkZW9NZXRhLnJlZlNhbXBsZUR1cmF0aW9uO1xcbiAgICAgICAgfVxcbiAgICAgIH1cXG4gICAgICB0aGlzLnZpZGVvQWxsRHVyYXRpb24gKz0gc2FtcGxlRHVyYXRpb247XFxuICAgICAgbXA0U2FtcGxlcy5wdXNoKHtcXG4gICAgICAgIGR0cyxcXG4gICAgICAgIGN0cyxcXG4gICAgICAgIHB0cyxcXG4gICAgICAgIGRhdGE6IGF2Y1NhbXBsZS5kYXRhLFxcbiAgICAgICAgc2l6ZTogYXZjU2FtcGxlLmRhdGEuYnl0ZUxlbmd0aCxcXG4gICAgICAgIGlzS2V5ZnJhbWUsXFxuICAgICAgICBkdXJhdGlvbjogc2FtcGxlRHVyYXRpb24sXFxuICAgICAgICBmbGFnczoge1xcbiAgICAgICAgICBpc0xlYWRpbmc6IDAsXFxuICAgICAgICAgIGRlcGVuZHNPbjogaXNLZXlmcmFtZSA/IDIgOiAxLFxcbiAgICAgICAgICBpc0RlcGVuZGVkT246IGlzS2V5ZnJhbWUgPyAxIDogMCxcXG4gICAgICAgICAgaGFzUmVkdW5kYW5jeTogMCxcXG4gICAgICAgICAgaXNOb25TeW5jOiBpc0tleWZyYW1lID8gMCA6IDFcXG4gICAgICAgIH0sXFxuICAgICAgICBvcmlnaW5EdHM6IGR0cyxcXG4gICAgICAgIHR5cGU6ICd2aWRlbydcXG4gICAgICB9KTtcXG4gICAgfVxcblxcbiAgICBsZXQgbW9vZk1kYXQgPSBuZXcgX3hncGxheWVyVXRpbHMuQnVmZmVyKCk7XFxuXFxuICAgIGNvbnN0IG1vb2YgPSBfZm1wMi5kZWZhdWx0Lm1vb2Yoe1xcbiAgICAgIGlkOiB0cmFjay5tZXRhLmlkLFxcbiAgICAgIHRpbWU6IGZpcnN0RHRzLFxcbiAgICAgIHNhbXBsZXM6IG1wNFNhbXBsZXNcXG4gICAgfSk7XFxuICAgIGNvbnN0IG1kYXQgPSBfZm1wMi5kZWZhdWx0Lm1kYXQobWRhdEJveCk7XFxuICAgIG1vb2ZNZGF0LndyaXRlKG1vb2YsIG1kYXQpO1xcblxcbiAgICB0cmFjay5zYW1wbGVzID0gW107XFxuICAgIHRyYWNrLmxlbmd0aCA9IDA7XFxuXFxuICAgIGxldCBwcmVzb3VyY2VidWZmZXIgPSB0aGlzLl9jb250ZXh0LmdldEluc3RhbmNlKCdQUkVfU09VUkNFX0JVRkZFUicpO1xcbiAgICBsZXQgc291cmNlID0gcHJlc291cmNlYnVmZmVyLmdldFNvdXJjZSgndmlkZW8nKTtcXG4gICAgaWYgKCFzb3VyY2UpIHtcXG4gICAgICBzb3VyY2UgPSBwcmVzb3VyY2VidWZmZXIuY3JlYXRlU291cmNlKCd2aWRlbycpO1xcbiAgICB9XFxuXFxuICAgIHNvdXJjZS5kYXRhLnB1c2gobW9vZk1kYXQpO1xcblxcbiAgICB0aGlzLmVtaXQoUkVNVVhfRVZFTlRTLk1FRElBX1NFR01FTlQsICd2aWRlbycpO1xcbiAgfVxcblxcbiAgX3JlbXV4QXVkaW8odHJhY2spIHtcXG4gICAgY29uc3QgeyBzYW1wbGVzIH0gPSB0cmFjaztcXG4gICAgbGV0IGZpcnN0RHRzID0gLTE7XFxuICAgIGxldCBtcDRTYW1wbGVzID0gW107XFxuXFxuICAgIGNvbnN0IG1kYXRCb3ggPSB7XFxuICAgICAgc2FtcGxlczogW11cXG4gICAgfTtcXG4gICAgaWYgKCFzYW1wbGVzIHx8ICFzYW1wbGVzLmxlbmd0aCkge1xcbiAgICAgIHJldHVybjtcXG4gICAgfVxcbiAgICBsZXQgaXNGaXJzdER0c0luaXRlZCA9IGZhbHNlO1xcbiAgICB3aGlsZSAoc2FtcGxlcy5sZW5ndGgpIHtcXG4gICAgICBsZXQgc2FtcGxlID0gc2FtcGxlcy5zaGlmdCgpO1xcbiAgICAgIGNvbnN0IHsgZGF0YSB9ID0gc2FtcGxlO1xcbiAgICAgIGxldCBkdHMgPSBzYW1wbGUuZHRzIC0gdGhpcy5fZHRzQmFzZTtcXG4gICAgICBjb25zdCBvcmlnaW5EdHMgPSBkdHM7XFxuICAgICAgaWYgKCFpc0ZpcnN0RHRzSW5pdGVkKSB7XFxuICAgICAgICBmaXJzdER0cyA9IGR0cztcXG4gICAgICAgIGlzRmlyc3REdHNJbml0ZWQgPSB0cnVlO1xcbiAgICAgIH1cXG5cXG4gICAgICBsZXQgc2FtcGxlRHVyYXRpb24gPSAwO1xcblxcbiAgICAgIGlmICh0aGlzLmF1ZGlvTWV0YS5yZWZTYW1wbGVEdXJhdGlvbkZpeGVkKSB7XFxuICAgICAgICBzYW1wbGVEdXJhdGlvbiA9IHRoaXMuYXVkaW9NZXRhLnJlZlNhbXBsZUR1cmF0aW9uRml4ZWQ7XFxuICAgICAgfSBlbHNlIGlmIChzYW1wbGVzLmxlbmd0aCA+PSAxKSB7XFxuICAgICAgICBjb25zdCBuZXh0RHRzID0gc2FtcGxlc1swXS5kdHMgLSB0aGlzLl9kdHNCYXNlO1xcbiAgICAgICAgc2FtcGxlRHVyYXRpb24gPSBuZXh0RHRzIC0gZHRzO1xcbiAgICAgIH0gZWxzZSB7XFxuICAgICAgICBpZiAobXA0U2FtcGxlcy5sZW5ndGggPj0gMSkge1xcbiAgICAgICAgICAvLyB1c2Ugc2Vjb25kIGxhc3Qgc2FtcGxlIGR1cmF0aW9uXFxuICAgICAgICAgIHNhbXBsZUR1cmF0aW9uID0gbXA0U2FtcGxlc1ttcDRTYW1wbGVzLmxlbmd0aCAtIDFdLmR1cmF0aW9uO1xcbiAgICAgICAgfSBlbHNlIHtcXG4gICAgICAgICAgLy8gdGhlIG9ubHkgb25lIHNhbXBsZSwgdXNlIHJlZmVyZW5jZSBzYW1wbGUgZHVyYXRpb25cXG4gICAgICAgICAgc2FtcGxlRHVyYXRpb24gPSB0aGlzLmF1ZGlvTWV0YS5yZWZTYW1wbGVEdXJhdGlvbjtcXG4gICAgICAgIH1cXG4gICAgICB9XFxuXFxuICAgICAgLy8gY29uc29sZS5sb2coJ3JlbXV4IGF1ZGlvICcsIGR0cylcXG4gICAgICB0aGlzLmF1ZGlvQWxsRHVyYXRpb24gKz0gc2FtcGxlRHVyYXRpb247XFxuICAgICAgY29uc3QgbXA0U2FtcGxlID0ge1xcbiAgICAgICAgZHRzLFxcbiAgICAgICAgcHRzOiBkdHMsXFxuICAgICAgICBjdHM6IDAsXFxuICAgICAgICBzaXplOiBkYXRhLmJ5dGVMZW5ndGgsXFxuICAgICAgICBkdXJhdGlvbjogc2FtcGxlLmR1cmF0aW9uID8gc2FtcGxlLmR1cmF0aW9uIDogc2FtcGxlRHVyYXRpb24sXFxuICAgICAgICBmbGFnczoge1xcbiAgICAgICAgICBpc0xlYWRpbmc6IDAsXFxuICAgICAgICAgIGRlcGVuZHNPbjogMixcXG4gICAgICAgICAgaXNEZXBlbmRlZE9uOiAxLFxcbiAgICAgICAgICBoYXNSZWR1bmRhbmN5OiAwLFxcbiAgICAgICAgICBpc05vblN5bmM6IDBcXG4gICAgICAgIH0sXFxuICAgICAgICBpc0tleWZyYW1lOiB0cnVlLFxcbiAgICAgICAgb3JpZ2luRHRzLFxcbiAgICAgICAgdHlwZTogJ2F1ZGlvJ1xcbiAgICAgIH07XFxuXFxuICAgICAgbGV0IG1kYXRTYW1wbGUgPSB7XFxuICAgICAgICBidWZmZXI6IFtdLFxcbiAgICAgICAgc2l6ZTogMFxcbiAgICAgIH07XFxuICAgICAgbWRhdFNhbXBsZS5idWZmZXIucHVzaChkYXRhKTtcXG4gICAgICBtZGF0U2FtcGxlLnNpemUgKz0gZGF0YS5ieXRlTGVuZ3RoO1xcblxcbiAgICAgIG1kYXRCb3guc2FtcGxlcy5wdXNoKG1kYXRTYW1wbGUpO1xcblxcbiAgICAgIG1wNFNhbXBsZXMucHVzaChtcDRTYW1wbGUpO1xcbiAgICB9XFxuXFxuICAgIGNvbnN0IG1vb2ZNZGF0ID0gbmV3IF94Z3BsYXllclV0aWxzLkJ1ZmZlcigpO1xcbiAgICBjb25zdCBtb29mID0gX2ZtcDIuZGVmYXVsdC5tb29mKHtcXG4gICAgICBpZDogdHJhY2subWV0YS5pZCxcXG4gICAgICB0aW1lOiBmaXJzdER0cyxcXG4gICAgICBzYW1wbGVzOiBtcDRTYW1wbGVzXFxuICAgIH0pO1xcbiAgICBjb25zdCBtZGF0ID0gX2ZtcDIuZGVmYXVsdC5tZGF0KG1kYXRCb3gpO1xcbiAgICBtb29mTWRhdC53cml0ZShtb29mLCBtZGF0KTtcXG5cXG4gICAgdHJhY2suc2FtcGxlcyA9IFtdO1xcbiAgICB0cmFjay5sZW5ndGggPSAwO1xcblxcbiAgICBsZXQgcHJlc291cmNlYnVmZmVyID0gdGhpcy5fY29udGV4dC5nZXRJbnN0YW5jZSgnUFJFX1NPVVJDRV9CVUZGRVInKTtcXG4gICAgbGV0IHNvdXJjZSA9IHByZXNvdXJjZWJ1ZmZlci5nZXRTb3VyY2UoJ2F1ZGlvJyk7XFxuICAgIGlmICghc291cmNlKSB7XFxuICAgICAgc291cmNlID0gcHJlc291cmNlYnVmZmVyLmNyZWF0ZVNvdXJjZSgnYXVkaW8nKTtcXG4gICAgfVxcbiAgICBzb3VyY2UuZGF0YS5wdXNoKG1vb2ZNZGF0KTtcXG4gICAgdGhpcy5lbWl0KFJFTVVYX0VWRU5UUy5NRURJQV9TRUdNRU5ULCAnYXVkaW8nLCBtb29mTWRhdCk7XFxuICB9XFxuXFxuICBpbml0U2lsZW50QXVkaW8oZHRzLCBkdXJhdGlvbikge1xcbiAgICBjb25zdCB1bml0ID0gTXA0UmVtdXhlci5nZXRTaWxlbnRGcmFtZSh0aGlzLmF1ZGlvTWV0YS5jaGFubmVsQ291bnQpO1xcbiAgICByZXR1cm4ge1xcbiAgICAgIGR0cyxcXG4gICAgICBwdHM6IGR0cyxcXG4gICAgICBjdHM6IDAsXFxuICAgICAgZHVyYXRpb24sXFxuICAgICAgdW5pdCxcXG4gICAgICBzaXplOiB1bml0LmJ5dGVMZW5ndGgsXFxuICAgICAgb3JpZ2luRHRzOiBkdHMsXFxuICAgICAgdHlwZTogJ3ZpZGVvJ1xcbiAgICB9O1xcbiAgfVxcblxcbiAgZ2V0IHZpZGVvTWV0YSgpIHtcXG4gICAgcmV0dXJuIHRoaXMuX2NvbnRleHQuZ2V0SW5zdGFuY2UoJ1RSQUNLUycpLnZpZGVvVHJhY2subWV0YTtcXG4gIH1cXG4gIGdldCBhdWRpb01ldGEoKSB7XFxuICAgIHJldHVybiB0aGlzLl9jb250ZXh0LmdldEluc3RhbmNlKCdUUkFDS1MnKS5hdWRpb1RyYWNrLm1ldGE7XFxuICB9XFxuXFxuICBzdGF0aWMgZ2V0U2lsZW50RnJhbWUoY2hhbm5lbENvdW50KSB7XFxuICAgIGlmIChjaGFubmVsQ291bnQgPT09IDEpIHtcXG4gICAgICByZXR1cm4gbmV3IFVpbnQ4QXJyYXkoWzB4MDAsIDB4YzgsIDB4MDAsIDB4ODAsIDB4MjMsIDB4ODBdKTtcXG4gICAgfSBlbHNlIGlmIChjaGFubmVsQ291bnQgPT09IDIpIHtcXG4gICAgICByZXR1cm4gbmV3IFVpbnQ4QXJyYXkoWzB4MjEsIDB4MDAsIDB4NDksIDB4OTAsIDB4MDIsIDB4MTksIDB4MDAsIDB4MjMsIDB4ODBdKTtcXG4gICAgfSBlbHNlIGlmIChjaGFubmVsQ291bnQgPT09IDMpIHtcXG4gICAgICByZXR1cm4gbmV3IFVpbnQ4QXJyYXkoWzB4MDAsIDB4YzgsIDB4MDAsIDB4ODAsIDB4MjAsIDB4ODQsIDB4MDEsIDB4MjYsIDB4NDAsIDB4MDgsIDB4NjQsIDB4MDAsIDB4OGVdKTtcXG4gICAgfSBlbHNlIGlmIChjaGFubmVsQ291bnQgPT09IDQpIHtcXG4gICAgICByZXR1cm4gbmV3IFVpbnQ4QXJyYXkoWzB4MDAsIDB4YzgsIDB4MDAsIDB4ODAsIDB4MjAsIDB4ODQsIDB4MDEsIDB4MjYsIDB4NDAsIDB4MDgsIDB4NjQsIDB4MDAsIDB4ODAsIDB4MmMsIDB4ODAsIDB4MDgsIDB4MDIsIDB4MzhdKTtcXG4gICAgfSBlbHNlIGlmIChjaGFubmVsQ291bnQgPT09IDUpIHtcXG4gICAgICByZXR1cm4gbmV3IFVpbnQ4QXJyYXkoWzB4MDAsIDB4YzgsIDB4MDAsIDB4ODAsIDB4MjAsIDB4ODQsIDB4MDEsIDB4MjYsIDB4NDAsIDB4MDgsIDB4NjQsIDB4MDAsIDB4ODIsIDB4MzAsIDB4MDQsIDB4OTksIDB4MDAsIDB4MjEsIDB4OTAsIDB4MDIsIDB4MzhdKTtcXG4gICAgfSBlbHNlIGlmIChjaGFubmVsQ291bnQgPT09IDYpIHtcXG4gICAgICByZXR1cm4gbmV3IFVpbnQ4QXJyYXkoWzB4MDAsIDB4YzgsIDB4MDAsIDB4ODAsIDB4MjAsIDB4ODQsIDB4MDEsIDB4MjYsIDB4NDAsIDB4MDgsIDB4NjQsIDB4MDAsIDB4ODIsIDB4MzAsIDB4MDQsIDB4OTksIDB4MDAsIDB4MjEsIDB4OTAsIDB4MDIsIDB4MDAsIDB4YjIsIDB4MDAsIDB4MjAsIDB4MDgsIDB4ZTBdKTtcXG4gICAgfVxcbiAgICByZXR1cm4gbnVsbDtcXG4gIH1cXG59XFxuZXhwb3J0cy5kZWZhdWx0ID0gTXA0UmVtdXhlcjtcXG5cXG4vLyMgc291cmNlVVJMPXdlYnBhY2s6Ly94Z3BsYXllci1mbHYvLi4veGdwbGF5ZXItcmVtdXgvc3JjL21wNC9pbmRleC5qcz9cIil9LFwiLi4veGdwbGF5ZXItdXRpbHMvaW5kZXguanNcIjpcbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi4veGdwbGF5ZXItdXRpbHMvaW5kZXguanMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgbm8gc3RhdGljIGV4cG9ydHMgZm91bmQgKi9mdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXtcInVzZSBzdHJpY3RcIjtldmFsKCdcXG5cXG5tb2R1bGUuZXhwb3J0cyA9IHtcXG4gIENvbnRleHQ6IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vc3JjL2NvbnRleHQgKi8gXCIuLi94Z3BsYXllci11dGlscy9zcmMvY29udGV4dC5qc1wiKS5kZWZhdWx0LFxcblxcbiAgLy8gTW9kdWxlcyBmcm9tIGNvbnN0YW50c1xcbiAgRVZFTlRTOiBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL3NyYy9jb25zdGFudHMvZXZlbnRzICovIFwiLi4veGdwbGF5ZXItdXRpbHMvc3JjL2NvbnN0YW50cy9ldmVudHMuanNcIikuZGVmYXVsdCxcXG4gIFdPUktFUl9DT01NQU5EUzogX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9zcmMvY29uc3RhbnRzL3dvcmtlci1jb21tYW5kcyAqLyBcIi4uL3hncGxheWVyLXV0aWxzL3NyYy9jb25zdGFudHMvd29ya2VyLWNvbW1hbmRzLmpzXCIpLmRlZmF1bHQsXFxuXFxuICAvLyBNb2R1bGVzIGZyb20gZW52XFxuICBzbmlmZmVyOiBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL3NyYy9lbnYvc25pZmZlciAqLyBcIi4uL3hncGxheWVyLXV0aWxzL3NyYy9lbnYvc25pZmZlci5qc1wiKS5kZWZhdWx0LFxcbiAgaXNMZTogX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9zcmMvZW52L2lzbGUgKi8gXCIuLi94Z3BsYXllci11dGlscy9zcmMvZW52L2lzbGUuanNcIikuZGVmYXVsdCxcXG4gIFVURjg6IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vc3JjL2Vudi91dGY4ICovIFwiLi4veGdwbGF5ZXItdXRpbHMvc3JjL2Vudi91dGY4LmpzXCIpLmRlZmF1bHQsXFxuXFxuICAvLyBNb2RlbHNcXG4gIE1lZGlhSW5mbzogX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9zcmMvbW9kZWxzL21lZGlhLWluZm8gKi8gXCIuLi94Z3BsYXllci11dGlscy9zcmMvbW9kZWxzL21lZGlhLWluZm8uanNcIikuZGVmYXVsdCxcXG4gIE1lZGlhU2FtcGxlOiBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL3NyYy9tb2RlbHMvbWVkaWEtc2FtcGxlICovIFwiLi4veGdwbGF5ZXItdXRpbHMvc3JjL21vZGVscy9tZWRpYS1zYW1wbGUuanNcIikuZGVmYXVsdCxcXG4gIE1lZGlhU2VnbWVudDogX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9zcmMvbW9kZWxzL21lZGlhLXNlZ21lbnQgKi8gXCIuLi94Z3BsYXllci11dGlscy9zcmMvbW9kZWxzL21lZGlhLXNlZ21lbnQuanNcIikuZGVmYXVsdCxcXG4gIE1lZGlhU2VnbWVudExpc3Q6IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vc3JjL21vZGVscy9tZWRpYS1zZWdtZW50LWxpc3QgKi8gXCIuLi94Z3BsYXllci11dGlscy9zcmMvbW9kZWxzL21lZGlhLXNlZ21lbnQtbGlzdC5qc1wiKS5kZWZhdWx0LFxcbiAgQXVkaW9UcmFja01ldGE6IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vc3JjL21vZGVscy90cmFjay1tZXRhICovIFwiLi4veGdwbGF5ZXItdXRpbHMvc3JjL21vZGVscy90cmFjay1tZXRhLmpzXCIpLkF1ZGlvVHJhY2tNZXRhLFxcbiAgVmlkZW9UcmFja01ldGE6IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vc3JjL21vZGVscy90cmFjay1tZXRhICovIFwiLi4veGdwbGF5ZXItdXRpbHMvc3JjL21vZGVscy90cmFjay1tZXRhLmpzXCIpLlZpZGVvVHJhY2tNZXRhLFxcbiAgQXVkaW9UcmFja1NhbXBsZTogX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9zcmMvbW9kZWxzL3RyYWNrLXNhbXBsZSAqLyBcIi4uL3hncGxheWVyLXV0aWxzL3NyYy9tb2RlbHMvdHJhY2stc2FtcGxlLmpzXCIpLkF1ZGlvVHJhY2tTYW1wbGUsXFxuICBWaWRlb1RyYWNrU2FtcGxlOiBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL3NyYy9tb2RlbHMvdHJhY2stc2FtcGxlICovIFwiLi4veGdwbGF5ZXItdXRpbHMvc3JjL21vZGVscy90cmFjay1zYW1wbGUuanNcIikuVmlkZW9UcmFja1NhbXBsZSxcXG5cXG4gIC8vIE1vZHVsZXMgZnJvbSBtc2VcXG4gIE1zZTogX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9zcmMvbXNlL2luZGV4ICovIFwiLi4veGdwbGF5ZXItdXRpbHMvc3JjL21zZS9pbmRleC5qc1wiKS5kZWZhdWx0LFxcblxcbiAgLy8gTW9kdWxlcyBmcm9tIHdyaXRlXFxuICBTdHJlYW06IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vc3JjL3dyaXRlL3N0cmVhbSAqLyBcIi4uL3hncGxheWVyLXV0aWxzL3NyYy93cml0ZS9zdHJlYW0uanNcIikuZGVmYXVsdCxcXG4gIEJ1ZmZlcjogX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9zcmMvd3JpdGUvYnVmZmVyICovIFwiLi4veGdwbGF5ZXItdXRpbHMvc3JjL3dyaXRlL2J1ZmZlci5qc1wiKS5kZWZhdWx0LFxcblxcbiAgTW9iaWxlVmlkZW86IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vc3JjL21vYmlsZS9tb2JpbGUtdmlkZW8gKi8gXCIuLi94Z3BsYXllci11dGlscy9zcmMvbW9iaWxlL21vYmlsZS12aWRlby5qc1wiKVxcbn07XFxuXFxuLy8jIHNvdXJjZVVSTD13ZWJwYWNrOi8veGdwbGF5ZXItZmx2Ly4uL3hncGxheWVyLXV0aWxzL2luZGV4LmpzPycpfSxcIi4uL3hncGxheWVyLXV0aWxzL25vZGVfbW9kdWxlcy9jb25jYXQtdHlwZWQtYXJyYXkvbGliL2NvbmNhdC5qc1wiOlxuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi4veGdwbGF5ZXItdXRpbHMvbm9kZV9tb2R1bGVzL2NvbmNhdC10eXBlZC1hcnJheS9saWIvY29uY2F0LmpzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBubyBzdGF0aWMgZXhwb3J0cyBmb3VuZCAqL2Z1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pe1widXNlIHN0cmljdFwiO2V2YWwoJ1xcblxcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xcbiAgdmFsdWU6IHRydWVcXG59KTtcXG5cXG5leHBvcnRzLmRlZmF1bHQgPSBmdW5jdGlvbiAoUmVzdWx0Q29uc3RydWN0b3IpIHtcXG4gIHZhciB0b3RhbExlbmd0aCA9IDA7XFxuXFxuICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJyYXlzID0gQXJyYXkoX2xlbiA+IDEgPyBfbGVuIC0gMSA6IDApLCBfa2V5ID0gMTsgX2tleSA8IF9sZW47IF9rZXkrKykge1xcbiAgICBhcnJheXNbX2tleSAtIDFdID0gYXJndW1lbnRzW19rZXldO1xcbiAgfVxcblxcbiAgdmFyIF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24gPSB0cnVlO1xcbiAgdmFyIF9kaWRJdGVyYXRvckVycm9yID0gZmFsc2U7XFxuICB2YXIgX2l0ZXJhdG9yRXJyb3IgPSB1bmRlZmluZWQ7XFxuXFxuICB0cnkge1xcbiAgICBmb3IgKHZhciBfaXRlcmF0b3IgPSBhcnJheXNbU3ltYm9sLml0ZXJhdG9yXSgpLCBfc3RlcDsgIShfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uID0gKF9zdGVwID0gX2l0ZXJhdG9yLm5leHQoKSkuZG9uZSk7IF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24gPSB0cnVlKSB7XFxuICAgICAgdmFyIGFyciA9IF9zdGVwLnZhbHVlO1xcblxcbiAgICAgIHRvdGFsTGVuZ3RoICs9IGFyci5sZW5ndGg7XFxuICAgIH1cXG4gIH0gY2F0Y2ggKGVycikge1xcbiAgICBfZGlkSXRlcmF0b3JFcnJvciA9IHRydWU7XFxuICAgIF9pdGVyYXRvckVycm9yID0gZXJyO1xcbiAgfSBmaW5hbGx5IHtcXG4gICAgdHJ5IHtcXG4gICAgICBpZiAoIV9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24gJiYgX2l0ZXJhdG9yLnJldHVybikge1xcbiAgICAgICAgX2l0ZXJhdG9yLnJldHVybigpO1xcbiAgICAgIH1cXG4gICAgfSBmaW5hbGx5IHtcXG4gICAgICBpZiAoX2RpZEl0ZXJhdG9yRXJyb3IpIHtcXG4gICAgICAgIHRocm93IF9pdGVyYXRvckVycm9yO1xcbiAgICAgIH1cXG4gICAgfVxcbiAgfVxcblxcbiAgdmFyIHJlc3VsdCA9IG5ldyBSZXN1bHRDb25zdHJ1Y3Rvcih0b3RhbExlbmd0aCk7XFxuICB2YXIgb2Zmc2V0ID0gMDtcXG4gIHZhciBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uMiA9IHRydWU7XFxuICB2YXIgX2RpZEl0ZXJhdG9yRXJyb3IyID0gZmFsc2U7XFxuICB2YXIgX2l0ZXJhdG9yRXJyb3IyID0gdW5kZWZpbmVkO1xcblxcbiAgdHJ5IHtcXG4gICAgZm9yICh2YXIgX2l0ZXJhdG9yMiA9IGFycmF5c1tTeW1ib2wuaXRlcmF0b3JdKCksIF9zdGVwMjsgIShfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uMiA9IChfc3RlcDIgPSBfaXRlcmF0b3IyLm5leHQoKSkuZG9uZSk7IF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24yID0gdHJ1ZSkge1xcbiAgICAgIHZhciBfYXJyID0gX3N0ZXAyLnZhbHVlO1xcblxcbiAgICAgIHJlc3VsdC5zZXQoX2Fyciwgb2Zmc2V0KTtcXG4gICAgICBvZmZzZXQgKz0gX2Fyci5sZW5ndGg7XFxuICAgIH1cXG4gIH0gY2F0Y2ggKGVycikge1xcbiAgICBfZGlkSXRlcmF0b3JFcnJvcjIgPSB0cnVlO1xcbiAgICBfaXRlcmF0b3JFcnJvcjIgPSBlcnI7XFxuICB9IGZpbmFsbHkge1xcbiAgICB0cnkge1xcbiAgICAgIGlmICghX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjIgJiYgX2l0ZXJhdG9yMi5yZXR1cm4pIHtcXG4gICAgICAgIF9pdGVyYXRvcjIucmV0dXJuKCk7XFxuICAgICAgfVxcbiAgICB9IGZpbmFsbHkge1xcbiAgICAgIGlmIChfZGlkSXRlcmF0b3JFcnJvcjIpIHtcXG4gICAgICAgIHRocm93IF9pdGVyYXRvckVycm9yMjtcXG4gICAgICB9XFxuICAgIH1cXG4gIH1cXG5cXG4gIHJldHVybiByZXN1bHQ7XFxufTtcXG5cXG4vLyMgc291cmNlVVJMPXdlYnBhY2s6Ly94Z3BsYXllci1mbHYvLi4veGdwbGF5ZXItdXRpbHMvbm9kZV9tb2R1bGVzL2NvbmNhdC10eXBlZC1hcnJheS9saWIvY29uY2F0LmpzPycpfSxcIi4uL3hncGxheWVyLXV0aWxzL25vZGVfbW9kdWxlcy9jb25jYXQtdHlwZWQtYXJyYXkvbGliL2luZGV4LmpzXCI6XG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4uL3hncGxheWVyLXV0aWxzL25vZGVfbW9kdWxlcy9jb25jYXQtdHlwZWQtYXJyYXkvbGliL2luZGV4LmpzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIG5vIHN0YXRpYyBleHBvcnRzIGZvdW5kICovZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7XCJ1c2Ugc3RyaWN0XCI7ZXZhbCgnXFxuXFxudmFyIF9jb25jYXQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL2NvbmNhdCAqLyBcIi4uL3hncGxheWVyLXV0aWxzL25vZGVfbW9kdWxlcy9jb25jYXQtdHlwZWQtYXJyYXkvbGliL2NvbmNhdC5qc1wiKTtcXG5cXG52YXIgX2NvbmNhdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jb25jYXQpO1xcblxcbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7XFxuICByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTtcXG59XFxuXFxubW9kdWxlLmV4cG9ydHMgPSBfY29uY2F0Mi5kZWZhdWx0O1xcblxcbi8vIyBzb3VyY2VVUkw9d2VicGFjazovL3hncGxheWVyLWZsdi8uLi94Z3BsYXllci11dGlscy9ub2RlX21vZHVsZXMvY29uY2F0LXR5cGVkLWFycmF5L2xpYi9pbmRleC5qcz8nKX0sXCIuLi94Z3BsYXllci11dGlscy9ub2RlX21vZHVsZXMvd2Vid29ya2lmeS13ZWJwYWNrL2luZGV4LmpzXCI6XG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi4veGdwbGF5ZXItdXRpbHMvbm9kZV9tb2R1bGVzL3dlYndvcmtpZnktd2VicGFjay9pbmRleC5qcyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIG5vIHN0YXRpYyBleHBvcnRzIGZvdW5kICovZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7XCJ1c2Ugc3RyaWN0XCI7ZXZhbChcIlxcblxcbmZ1bmN0aW9uIHdlYnBhY2tCb290c3RyYXBGdW5jKG1vZHVsZXMpIHtcXG4gIC8qKioqKiovIC8vIFRoZSBtb2R1bGUgY2FjaGVcXG4gIC8qKioqKiovdmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcXG5cXG4gIC8qKioqKiovIC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXFxuICAvKioqKioqL2Z1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcXG5cXG4gICAgLyoqKioqKi8gLy8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXFxuICAgIC8qKioqKiovaWYgKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKVxcbiAgICAgIC8qKioqKiovcmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XFxuXFxuICAgIC8qKioqKiovIC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXFxuICAgIC8qKioqKiovdmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xcbiAgICAgIC8qKioqKiovaTogbW9kdWxlSWQsXFxuICAgICAgLyoqKioqKi9sOiBmYWxzZSxcXG4gICAgICAvKioqKioqL2V4cG9ydHM6IHt9XFxuICAgICAgLyoqKioqKi8gfTtcXG5cXG4gICAgLyoqKioqKi8gLy8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXFxuICAgIC8qKioqKiovbW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XFxuXFxuICAgIC8qKioqKiovIC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcXG4gICAgLyoqKioqKi9tb2R1bGUubCA9IHRydWU7XFxuXFxuICAgIC8qKioqKiovIC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXFxuICAgIC8qKioqKiovcmV0dXJuIG1vZHVsZS5leHBvcnRzO1xcbiAgICAvKioqKioqL1xcbiAgfVxcblxcbiAgLyoqKioqKi8gLy8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcXG4gIC8qKioqKiovX193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcXG5cXG4gIC8qKioqKiovIC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXFxuICAvKioqKioqL19fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XFxuXFxuICAvKioqKioqLyAvLyBpZGVudGl0eSBmdW5jdGlvbiBmb3IgY2FsbGluZyBoYXJtb255IGltcG9ydHMgd2l0aCB0aGUgY29ycmVjdCBjb250ZXh0XFxuICAvKioqKioqL19fd2VicGFja19yZXF1aXJlX18uaSA9IGZ1bmN0aW9uICh2YWx1ZSkge1xcbiAgICByZXR1cm4gdmFsdWU7XFxuICB9O1xcblxcbiAgLyoqKioqKi8gLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXFxuICAvKioqKioqL19fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uIChleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcXG4gICAgLyoqKioqKi9pZiAoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xcbiAgICAgIC8qKioqKiovT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHtcXG4gICAgICAgIC8qKioqKiovY29uZmlndXJhYmxlOiBmYWxzZSxcXG4gICAgICAgIC8qKioqKiovZW51bWVyYWJsZTogdHJ1ZSxcXG4gICAgICAgIC8qKioqKiovZ2V0OiBnZXR0ZXJcXG4gICAgICAgIC8qKioqKiovIH0pO1xcbiAgICAgIC8qKioqKiovXFxuICAgIH1cXG4gICAgLyoqKioqKi9cXG4gIH07XFxuXFxuICAvKioqKioqLyAvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXFxuICAvKioqKioqL19fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uIChleHBvcnRzKSB7XFxuICAgIC8qKioqKiovT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcXG4gICAgLyoqKioqKi9cXG4gIH07XFxuXFxuICAvKioqKioqLyAvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xcbiAgLyoqKioqKi9fX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbiAobW9kdWxlKSB7XFxuICAgIC8qKioqKiovdmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XFxuICAgIC8qKioqKiovZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHtcXG4gICAgICByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107XFxuICAgIH0gOlxcbiAgICAvKioqKioqL2Z1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7XFxuICAgICAgcmV0dXJuIG1vZHVsZTtcXG4gICAgfTtcXG4gICAgLyoqKioqKi9fX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XFxuICAgIC8qKioqKiovcmV0dXJuIGdldHRlcjtcXG4gICAgLyoqKioqKi9cXG4gIH07XFxuXFxuICAvKioqKioqLyAvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcXG4gIC8qKioqKiovX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24gKG9iamVjdCwgcHJvcGVydHkpIHtcXG4gICAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTtcXG4gIH07XFxuXFxuICAvKioqKioqLyAvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xcbiAgLyoqKioqKi9fX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcXFwiL1xcXCI7XFxuXFxuICAvKioqKioqLyAvLyBvbiBlcnJvciBmdW5jdGlvbiBmb3IgYXN5bmMgbG9hZGluZ1xcbiAgLyoqKioqKi9fX3dlYnBhY2tfcmVxdWlyZV9fLm9lID0gZnVuY3Rpb24gKGVycikge1xcbiAgICBjb25zb2xlLmVycm9yKGVycik7dGhyb3cgZXJyO1xcbiAgfTtcXG5cXG4gIHZhciBmID0gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSBFTlRSWV9NT0RVTEUpO1xcbiAgcmV0dXJuIGYuZGVmYXVsdCB8fCBmOyAvLyB0cnkgdG8gY2FsbCBkZWZhdWx0IGlmIGRlZmluZWQgdG8gYWxzbyBzdXBwb3J0IGJhYmVsIGVzbW9kdWxlIGV4cG9ydHNcXG59XFxuXFxudmFyIG1vZHVsZU5hbWVSZXFFeHAgPSAnW1xcXFxcXFxcLnxcXFxcXFxcXC18XFxcXFxcXFwrfFxcXFxcXFxcd3xcXFxcL3xAXSsnO1xcbnZhciBkZXBlbmRlbmN5UmVnRXhwID0gJ1xcXFxcXFxcKFxcXFxcXFxccyooXFxcXC9cXFxcXFxcXCouKj9cXFxcXFxcXCpcXFxcLyk/XFxcXFxcXFxzKi4qPygnICsgbW9kdWxlTmFtZVJlcUV4cCArICcpLio/XFxcXFxcXFwpJzsgLy8gYWRkaXRpb25hbCBjaGFycyB3aGVuIG91dHB1dC5wYXRoaW5mbyBpcyB0cnVlXFxuXFxuLy8gaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL2EvMjU5MzY2MS8xMzA0NDJcXG5mdW5jdGlvbiBxdW90ZVJlZ0V4cChzdHIpIHtcXG4gIHJldHVybiAoc3RyICsgJycpLnJlcGxhY2UoL1suPyorXiRbXFxcXF1cXFxcXFxcXCgpe318LV0vZywgJ1xcXFxcXFxcJCYnKTtcXG59XFxuXFxuZnVuY3Rpb24gaXNOdW1lcmljKG4pIHtcXG4gIHJldHVybiAhaXNOYU4oMSAqIG4pOyAvLyAxICogbiBjb252ZXJ0cyBpbnRlZ2VycywgaW50ZWdlcnMgYXMgc3RyaW5nIChcXFwiMTIzXFxcIiksIDFlMyBhbmQgXFxcIjFlM1xcXCIgdG8gaW50ZWdlcnMgYW5kIHN0cmluZ3MgdG8gTmFOXFxufVxcblxcbmZ1bmN0aW9uIGdldE1vZHVsZURlcGVuZGVuY2llcyhzb3VyY2VzLCBtb2R1bGUsIHF1ZXVlTmFtZSkge1xcbiAgdmFyIHJldHZhbCA9IHt9O1xcbiAgcmV0dmFsW3F1ZXVlTmFtZV0gPSBbXTtcXG5cXG4gIHZhciBmblN0cmluZyA9IG1vZHVsZS50b1N0cmluZygpO1xcbiAgdmFyIHdyYXBwZXJTaWduYXR1cmUgPSBmblN0cmluZy5tYXRjaCgvXmZ1bmN0aW9uXFxcXHM/XFxcXHcqXFxcXChcXFxcdyssXFxcXHMqXFxcXHcrLFxcXFxzKihcXFxcdyspXFxcXCkvKTtcXG4gIGlmICghd3JhcHBlclNpZ25hdHVyZSkgcmV0dXJuIHJldHZhbDtcXG4gIHZhciB3ZWJwYWNrUmVxdWlyZU5hbWUgPSB3cmFwcGVyU2lnbmF0dXJlWzFdO1xcblxcbiAgLy8gbWFpbiBidW5kbGUgZGVwc1xcbiAgdmFyIHJlID0gbmV3IFJlZ0V4cCgnKFxcXFxcXFxcXFxcXFxcXFxufFxcXFxcXFxcVyknICsgcXVvdGVSZWdFeHAod2VicGFja1JlcXVpcmVOYW1lKSArIGRlcGVuZGVuY3lSZWdFeHAsICdnJyk7XFxuICB2YXIgbWF0Y2g7XFxuICB3aGlsZSAobWF0Y2ggPSByZS5leGVjKGZuU3RyaW5nKSkge1xcbiAgICBpZiAobWF0Y2hbM10gPT09ICdkbGwtcmVmZXJlbmNlJykgY29udGludWU7XFxuICAgIHJldHZhbFtxdWV1ZU5hbWVdLnB1c2gobWF0Y2hbM10pO1xcbiAgfVxcblxcbiAgLy8gZGxsIGRlcHNcXG4gIHJlID0gbmV3IFJlZ0V4cCgnXFxcXFxcXFwoJyArIHF1b3RlUmVnRXhwKHdlYnBhY2tSZXF1aXJlTmFtZSkgKyAnXFxcXFxcXFwoXFxcIihkbGwtcmVmZXJlbmNlXFxcXFxcXFxzKCcgKyBtb2R1bGVOYW1lUmVxRXhwICsgJykpXFxcIlxcXFxcXFxcKVxcXFxcXFxcKScgKyBkZXBlbmRlbmN5UmVnRXhwLCAnZycpO1xcbiAgd2hpbGUgKG1hdGNoID0gcmUuZXhlYyhmblN0cmluZykpIHtcXG4gICAgaWYgKCFzb3VyY2VzW21hdGNoWzJdXSkge1xcbiAgICAgIHJldHZhbFtxdWV1ZU5hbWVdLnB1c2gobWF0Y2hbMV0pO1xcbiAgICAgIHNvdXJjZXNbbWF0Y2hbMl1dID0gX193ZWJwYWNrX3JlcXVpcmVfXyhtYXRjaFsxXSkubTtcXG4gICAgfVxcbiAgICByZXR2YWxbbWF0Y2hbMl1dID0gcmV0dmFsW21hdGNoWzJdXSB8fCBbXTtcXG4gICAgcmV0dmFsW21hdGNoWzJdXS5wdXNoKG1hdGNoWzRdKTtcXG4gIH1cXG5cXG4gIC8vIGNvbnZlcnQgMWUzIGJhY2sgdG8gMTAwMCAtIHRoaXMgY2FuIGJlIGltcG9ydGFudCBhZnRlciB1Z2xpZnktanMgY29udmVydGVkIDEwMDAgdG8gMWUzXFxuICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKHJldHZhbCk7XFxuICBmb3IgKHZhciBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyBpKyspIHtcXG4gICAgZm9yICh2YXIgaiA9IDA7IGogPCByZXR2YWxba2V5c1tpXV0ubGVuZ3RoOyBqKyspIHtcXG4gICAgICBpZiAoaXNOdW1lcmljKHJldHZhbFtrZXlzW2ldXVtqXSkpIHtcXG4gICAgICAgIHJldHZhbFtrZXlzW2ldXVtqXSA9IDEgKiByZXR2YWxba2V5c1tpXV1bal07XFxuICAgICAgfVxcbiAgICB9XFxuICB9XFxuXFxuICByZXR1cm4gcmV0dmFsO1xcbn1cXG5cXG5mdW5jdGlvbiBoYXNWYWx1ZXNJblF1ZXVlcyhxdWV1ZXMpIHtcXG4gIHZhciBrZXlzID0gT2JqZWN0LmtleXMocXVldWVzKTtcXG4gIHJldHVybiBrZXlzLnJlZHVjZShmdW5jdGlvbiAoaGFzVmFsdWVzLCBrZXkpIHtcXG4gICAgcmV0dXJuIGhhc1ZhbHVlcyB8fCBxdWV1ZXNba2V5XS5sZW5ndGggPiAwO1xcbiAgfSwgZmFsc2UpO1xcbn1cXG5cXG5mdW5jdGlvbiBnZXRSZXF1aXJlZE1vZHVsZXMoc291cmNlcywgbW9kdWxlSWQpIHtcXG4gIHZhciBtb2R1bGVzUXVldWUgPSB7XFxuICAgIG1haW46IFttb2R1bGVJZF1cXG4gIH07XFxuICB2YXIgcmVxdWlyZWRNb2R1bGVzID0ge1xcbiAgICBtYWluOiBbXVxcbiAgfTtcXG4gIHZhciBzZWVuTW9kdWxlcyA9IHtcXG4gICAgbWFpbjoge31cXG4gIH07XFxuXFxuICB3aGlsZSAoaGFzVmFsdWVzSW5RdWV1ZXMobW9kdWxlc1F1ZXVlKSkge1xcbiAgICB2YXIgcXVldWVzID0gT2JqZWN0LmtleXMobW9kdWxlc1F1ZXVlKTtcXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBxdWV1ZXMubGVuZ3RoOyBpKyspIHtcXG4gICAgICB2YXIgcXVldWVOYW1lID0gcXVldWVzW2ldO1xcbiAgICAgIHZhciBxdWV1ZSA9IG1vZHVsZXNRdWV1ZVtxdWV1ZU5hbWVdO1xcbiAgICAgIHZhciBtb2R1bGVUb0NoZWNrID0gcXVldWUucG9wKCk7XFxuICAgICAgc2Vlbk1vZHVsZXNbcXVldWVOYW1lXSA9IHNlZW5Nb2R1bGVzW3F1ZXVlTmFtZV0gfHwge307XFxuICAgICAgaWYgKHNlZW5Nb2R1bGVzW3F1ZXVlTmFtZV1bbW9kdWxlVG9DaGVja10gfHwgIXNvdXJjZXNbcXVldWVOYW1lXVttb2R1bGVUb0NoZWNrXSkgY29udGludWU7XFxuICAgICAgc2Vlbk1vZHVsZXNbcXVldWVOYW1lXVttb2R1bGVUb0NoZWNrXSA9IHRydWU7XFxuICAgICAgcmVxdWlyZWRNb2R1bGVzW3F1ZXVlTmFtZV0gPSByZXF1aXJlZE1vZHVsZXNbcXVldWVOYW1lXSB8fCBbXTtcXG4gICAgICByZXF1aXJlZE1vZHVsZXNbcXVldWVOYW1lXS5wdXNoKG1vZHVsZVRvQ2hlY2spO1xcbiAgICAgIHZhciBuZXdNb2R1bGVzID0gZ2V0TW9kdWxlRGVwZW5kZW5jaWVzKHNvdXJjZXMsIHNvdXJjZXNbcXVldWVOYW1lXVttb2R1bGVUb0NoZWNrXSwgcXVldWVOYW1lKTtcXG4gICAgICB2YXIgbmV3TW9kdWxlc0tleXMgPSBPYmplY3Qua2V5cyhuZXdNb2R1bGVzKTtcXG4gICAgICBmb3IgKHZhciBqID0gMDsgaiA8IG5ld01vZHVsZXNLZXlzLmxlbmd0aDsgaisrKSB7XFxuICAgICAgICBtb2R1bGVzUXVldWVbbmV3TW9kdWxlc0tleXNbal1dID0gbW9kdWxlc1F1ZXVlW25ld01vZHVsZXNLZXlzW2pdXSB8fCBbXTtcXG4gICAgICAgIG1vZHVsZXNRdWV1ZVtuZXdNb2R1bGVzS2V5c1tqXV0gPSBtb2R1bGVzUXVldWVbbmV3TW9kdWxlc0tleXNbal1dLmNvbmNhdChuZXdNb2R1bGVzW25ld01vZHVsZXNLZXlzW2pdXSk7XFxuICAgICAgfVxcbiAgICB9XFxuICB9XFxuXFxuICByZXR1cm4gcmVxdWlyZWRNb2R1bGVzO1xcbn1cXG5cXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChtb2R1bGVJZCwgb3B0aW9ucykge1xcbiAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XFxuICB2YXIgc291cmNlcyA9IHtcXG4gICAgbWFpbjogX193ZWJwYWNrX3JlcXVpcmVfXy5tXFxuICB9O1xcblxcbiAgdmFyIHJlcXVpcmVkTW9kdWxlcyA9IG9wdGlvbnMuYWxsID8geyBtYWluOiBPYmplY3Qua2V5cyhzb3VyY2VzLm1haW4pIH0gOiBnZXRSZXF1aXJlZE1vZHVsZXMoc291cmNlcywgbW9kdWxlSWQpO1xcblxcbiAgdmFyIHNyYyA9ICcnO1xcblxcbiAgT2JqZWN0LmtleXMocmVxdWlyZWRNb2R1bGVzKS5maWx0ZXIoZnVuY3Rpb24gKG0pIHtcXG4gICAgcmV0dXJuIG0gIT09ICdtYWluJztcXG4gIH0pLmZvckVhY2goZnVuY3Rpb24gKG1vZHVsZSkge1xcbiAgICB2YXIgZW50cnlNb2R1bGUgPSAwO1xcbiAgICB3aGlsZSAocmVxdWlyZWRNb2R1bGVzW21vZHVsZV1bZW50cnlNb2R1bGVdKSB7XFxuICAgICAgZW50cnlNb2R1bGUrKztcXG4gICAgfVxcbiAgICByZXF1aXJlZE1vZHVsZXNbbW9kdWxlXS5wdXNoKGVudHJ5TW9kdWxlKTtcXG4gICAgc291cmNlc1ttb2R1bGVdW2VudHJ5TW9kdWxlXSA9ICcoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7IG1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXzsgfSknO1xcbiAgICBzcmMgPSBzcmMgKyAndmFyICcgKyBtb2R1bGUgKyAnID0gKCcgKyB3ZWJwYWNrQm9vdHN0cmFwRnVuYy50b1N0cmluZygpLnJlcGxhY2UoJ0VOVFJZX01PRFVMRScsIEpTT04uc3RyaW5naWZ5KGVudHJ5TW9kdWxlKSkgKyAnKSh7JyArIHJlcXVpcmVkTW9kdWxlc1ttb2R1bGVdLm1hcChmdW5jdGlvbiAoaWQpIHtcXG4gICAgICByZXR1cm4gJycgKyBKU09OLnN0cmluZ2lmeShpZCkgKyAnOiAnICsgc291cmNlc1ttb2R1bGVdW2lkXS50b1N0cmluZygpO1xcbiAgICB9KS5qb2luKCcsJykgKyAnfSk7XFxcXG4nO1xcbiAgfSk7XFxuXFxuICBzcmMgPSBzcmMgKyAnbmV3ICgoJyArIHdlYnBhY2tCb290c3RyYXBGdW5jLnRvU3RyaW5nKCkucmVwbGFjZSgnRU5UUllfTU9EVUxFJywgSlNPTi5zdHJpbmdpZnkobW9kdWxlSWQpKSArICcpKHsnICsgcmVxdWlyZWRNb2R1bGVzLm1haW4ubWFwKGZ1bmN0aW9uIChpZCkge1xcbiAgICByZXR1cm4gJycgKyBKU09OLnN0cmluZ2lmeShpZCkgKyAnOiAnICsgc291cmNlcy5tYWluW2lkXS50b1N0cmluZygpO1xcbiAgfSkuam9pbignLCcpICsgJ30pKShzZWxmKTsnO1xcblxcbiAgdmFyIGJsb2IgPSBuZXcgd2luZG93LkJsb2IoW3NyY10sIHsgdHlwZTogJ3RleHQvamF2YXNjcmlwdCcgfSk7XFxuICBpZiAob3B0aW9ucy5iYXJlKSB7XFxuICAgIHJldHVybiBibG9iO1xcbiAgfVxcblxcbiAgdmFyIFVSTCA9IHdpbmRvdy5VUkwgfHwgd2luZG93LndlYmtpdFVSTCB8fCB3aW5kb3cubW96VVJMIHx8IHdpbmRvdy5tc1VSTDtcXG5cXG4gIHZhciB3b3JrZXJVcmwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpO1xcbiAgdmFyIHdvcmtlciA9IG5ldyB3aW5kb3cuV29ya2VyKHdvcmtlclVybCk7XFxuICB3b3JrZXIub2JqZWN0VVJMID0gd29ya2VyVXJsO1xcblxcbiAgcmV0dXJuIHdvcmtlcjtcXG59O1xcblxcbi8vIyBzb3VyY2VVUkw9d2VicGFjazovL3hncGxheWVyLWZsdi8uLi94Z3BsYXllci11dGlscy9ub2RlX21vZHVsZXMvd2Vid29ya2lmeS13ZWJwYWNrL2luZGV4LmpzP1wiKX0sXCIuLi94Z3BsYXllci11dGlscy9zcmMvY29uc3RhbnRzL2V2ZW50cy5qc1wiOlxuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuLi94Z3BsYXllci11dGlscy9zcmMvY29uc3RhbnRzL2V2ZW50cy5qcyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBubyBzdGF0aWMgZXhwb3J0cyBmb3VuZCAqL2Z1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pe1widXNlIHN0cmljdFwiO2V2YWwoXCJcXG5cXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXFxcIl9fZXNNb2R1bGVcXFwiLCB7XFxuICB2YWx1ZTogdHJ1ZVxcbn0pO1xcbmNvbnN0IExPQURFUl9FVkVOVFMgPSB7XFxuICBMQURFUl9TVEFSVDogJ0xPQURFUl9TVEFSVCcsXFxuICBMT0FERVJfREFUQUxPQURFRDogJ0xPQURFUl9EQVRBTE9BREVEJyxcXG4gIExPQURFUl9DT01QTEVURTogJ0xPQURFUl9DT01QTEVURScsXFxuICBMT0FERVJfRVJST1I6ICdMT0FERVJfRVJST1InXFxufTtcXG5cXG5jb25zdCBERU1VWF9FVkVOVFMgPSB7XFxuICBERU1VWF9TVEFSVDogJ0RFTVVYX1NUQVJUJyxcXG4gIERFTVVYX0NPTVBMRVRFOiAnREVNVVhfQ09NUExFVEUnLFxcbiAgREVNVVhfRVJST1I6ICdERU1VWF9FUlJPUicsXFxuICBNRVRBREFUQV9QQVJTRUQ6ICdNRVRBREFUQV9QQVJTRUQnLFxcbiAgVklERU9fTUVUQURBVEFfQ0hBTkdFOiAnVklERU9fTUVUQURBVEFfQ0hBTkdFJyxcXG4gIEFVRElPX01FVEFEQVRBX0NIQU5HRTogJ0FVRElPX01FVEFEQVRBX0NIQU5HRScsXFxuICBNRURJQV9JTkZPOiAnTUVESUFfSU5GTydcXG59O1xcblxcbmNvbnN0IFJFTVVYX0VWRU5UUyA9IHtcXG4gIFJFTVVYX01FVEFEQVRBOiAnUkVNVVhfTUVUQURBVEEnLFxcbiAgUkVNVVhfTUVESUE6ICdSRU1VWF9NRURJQScsXFxuICBNRURJQV9TRUdNRU5UOiAnTUVESUFfU0VHTUVOVCcsXFxuICBSRU1VWF9FUlJPUjogJ1JFTVVYX0VSUk9SJyxcXG4gIElOSVRfU0VHTUVOVDogJ0lOSVRfU0VHTUVOVCdcXG59O1xcblxcbmNvbnN0IE1TRV9FVkVOVFMgPSB7XFxuICBTT1VSQ0VfVVBEQVRFX0VORDogJ1NPVVJDRV9VUERBVEVfRU5EJ1xcblxcbiAgLy8gaGxz5LiT5pyJZXZlbnRzXFxufTtjb25zdCBITFNfRVZFTlRTID0ge1xcbiAgUkVUUllfVElNRV9FWENFRURFRDogJ1JFVFJZX1RJTUVfRVhDRUVERUQnXFxufTtcXG5cXG5jb25zdCBBTExFVkVOVFMgPSBPYmplY3QuYXNzaWduKHt9LCBMT0FERVJfRVZFTlRTLCBERU1VWF9FVkVOVFMsIFJFTVVYX0VWRU5UUywgTVNFX0VWRU5UUywgSExTX0VWRU5UUyk7XFxuXFxuY29uc3QgRmx2QWxsb3dlZEV2ZW50cyA9IFtdO1xcbmNvbnN0IEhsc0FsbG93ZWRFdmVudHMgPSBbXTtcXG5cXG5mb3IgKGxldCBrZXkgaW4gQUxMRVZFTlRTKSB7XFxuICBpZiAoQUxMRVZFTlRTLmhhc093blByb3BlcnR5KGtleSkpIHtcXG4gICAgRmx2QWxsb3dlZEV2ZW50cy5wdXNoKEFMTEVWRU5UU1trZXldKTtcXG4gIH1cXG59XFxuXFxuZm9yIChsZXQga2V5IGluIEFMTEVWRU5UUykge1xcbiAgaWYgKEFMTEVWRU5UUy5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XFxuICAgIEhsc0FsbG93ZWRFdmVudHMucHVzaChBTExFVkVOVFNba2V5XSk7XFxuICB9XFxufVxcblxcbmV4cG9ydHMuZGVmYXVsdCA9IHtcXG4gIEFMTEVWRU5UUyxcXG4gIEhMU19FVkVOVFMsXFxuICBSRU1VWF9FVkVOVFMsXFxuICBERU1VWF9FVkVOVFMsXFxuICBNU0VfRVZFTlRTLFxcbiAgTE9BREVSX0VWRU5UUyxcXG4gIEZsdkFsbG93ZWRFdmVudHMsXFxuICBIbHNBbGxvd2VkRXZlbnRzXFxufTtcXG5cXG4vLyMgc291cmNlVVJMPXdlYnBhY2s6Ly94Z3BsYXllci1mbHYvLi4veGdwbGF5ZXItdXRpbHMvc3JjL2NvbnN0YW50cy9ldmVudHMuanM/XCIpfSxcIi4uL3hncGxheWVyLXV0aWxzL3NyYy9jb25zdGFudHMvd29ya2VyLWNvbW1hbmRzLmpzXCI6XG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4uL3hncGxheWVyLXV0aWxzL3NyYy9jb25zdGFudHMvd29ya2VyLWNvbW1hbmRzLmpzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIG5vIHN0YXRpYyBleHBvcnRzIGZvdW5kICovZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7XCJ1c2Ugc3RyaWN0XCI7ZXZhbChcIlxcblxcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcXFwiX19lc01vZHVsZVxcXCIsIHtcXG4gIHZhbHVlOiB0cnVlXFxufSk7XFxuY29uc3QgQ09OVEVYVF9DT01PTUFORFMgPSBleHBvcnRzLkNPTlRFWFRfQ09NT01BTkRTID0ge1xcbiAgT046ICdvbicsXFxuICBPTkNFOiAnb25jZScsXFxuICBPRkY6ICdvZmYnLFxcbiAgRU1JVDogJ2VtaXQnLFxcbiAgREVTVFJPWTogJ2Rlc3Ryb3knXFxufTtcXG5cXG4vLyMgc291cmNlVVJMPXdlYnBhY2s6Ly94Z3BsYXllci1mbHYvLi4veGdwbGF5ZXItdXRpbHMvc3JjL2NvbnN0YW50cy93b3JrZXItY29tbWFuZHMuanM/XCIpfSxcIi4uL3hncGxheWVyLXV0aWxzL3NyYy9jb250ZXh0LmpzXCI6XG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4uL3hncGxheWVyLXV0aWxzL3NyYy9jb250ZXh0LmpzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIG5vIHN0YXRpYyBleHBvcnRzIGZvdW5kICovZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7XCJ1c2Ugc3RyaWN0XCI7ZXZhbCgnXFxuXFxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XFxuICB2YWx1ZTogdHJ1ZVxcbn0pO1xcblxcbnZhciBfbWVkaWFJbmZvID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9tb2RlbHMvbWVkaWEtaW5mbyAqLyBcIi4uL3hncGxheWVyLXV0aWxzL3NyYy9tb2RlbHMvbWVkaWEtaW5mby5qc1wiKTtcXG5cXG52YXIgX21lZGlhSW5mbzIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9tZWRpYUluZm8pO1xcblxcbnZhciBfZXZlbnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgZXZlbnRzICovIFwiLi4vLi4vbm9kZV9tb2R1bGVzL2V2ZW50cy9ldmVudHMuanNcIik7XFxuXFxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cXG5cXG5jb25zdCBESVJFQ1RfRU1JVF9GTEFHID0gXFwnX19UT19fXFwnO1xcblxcbmNsYXNzIENvbnRleHQge1xcbiAgY29uc3RydWN0b3IoYWxsb3dlZEV2ZW50cyA9IFtdKSB7XFxuICAgIHRoaXMuX2VtaXR0ZXIgPSBuZXcgX2V2ZW50cy5FdmVudEVtaXR0ZXIoKTtcXG4gICAgdGhpcy5faW5zdGFuY2VNYXAgPSB7fTsgLy8g5omA5pyJ55qE6Kej56CB5rWB56iL5a6e5L6LXFxuICAgIHRoaXMuX2Nsc01hcCA9IHt9OyAvLyDmnoTpgKDlh73mlbDnmoRtYXBcXG4gICAgdGhpcy5faW5pdGVkID0gZmFsc2U7XFxuICAgIHRoaXMubWVkaWFJbmZvID0gbmV3IF9tZWRpYUluZm8yLmRlZmF1bHQoKTtcXG4gICAgdGhpcy5hbGxvd2VkRXZlbnRzID0gYWxsb3dlZEV2ZW50cztcXG4gICAgdGhpcy5faG9va3MgPSB7fTsgLy8g5rOo5YaM5Zyo5LqL5Lu25YmNL+WQjueahOmSqeWtkO+8jOS+i+WmgiBiZWZvcmUoXFwnREVNVVhfQ09NUExFVEVcXCcpXFxuICB9XFxuXFxuICAvKipcXG4gICAqIOS7juS4iuS4i+aWh+S4reiOt+WPluino+eggea1geeoi+WunuS+i++8jOWmguaenOayoeacieWunuS+i++8jOaehOmAoOS4gOS4qlxcbiAgICogQHBhcmFtIHRhZ1xcbiAgICogQHBhcmFtIGFyZ3NcXG4gICAqIEByZXR1cm5zIHsqfVxcbiAgICovXFxuICBnZXRJbnN0YW5jZSh0YWcpIHtcXG4gICAgaWYgKHRoaXMuX2luc3RhbmNlTWFwW3RhZ10pIHtcXG4gICAgICByZXR1cm4gdGhpcy5faW5zdGFuY2VNYXBbdGFnXTtcXG4gICAgfSBlbHNlIHtcXG4gICAgICAvLyB0aHJvdyBuZXcgRXJyb3IoYCR7dGFnfeWunuS+i+WwmuacquWIneWni+WMlmApXFxuICAgICAgcmV0dXJuIG51bGw7XFxuICAgIH1cXG4gIH1cXG5cXG4gIC8qKlxcbiAgICog5Yid5aeL5YyW5YW35L2T5a6e5L6LXFxuICAgKiBAcGFyYW0gdGFnXFxuICAgKiBAcGFyYW0gYXJnc1xcbiAgICovXFxuICBpbml0SW5zdGFuY2UodGFnLCAuLi5hcmdzKSB7XFxuICAgIGlmICh0aGlzLl9jbHNNYXBbdGFnXSkge1xcbiAgICAgIGNvbnN0IG5ld0luc3RhbmNlID0gbmV3IHRoaXMuX2Nsc01hcFt0YWddKC4uLmFyZ3MpO1xcbiAgICAgIHRoaXMuX2luc3RhbmNlTWFwW3RhZ10gPSBuZXdJbnN0YW5jZTtcXG4gICAgICBpZiAobmV3SW5zdGFuY2UuaW5pdCkge1xcbiAgICAgICAgbmV3SW5zdGFuY2UuaW5pdCgpOyAvLyBUT0RPOiBsaWZlY2lyY2xlXFxuICAgICAgfVxcbiAgICAgIHJldHVybiBuZXdJbnN0YW5jZTtcXG4gICAgfSBlbHNlIHtcXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYCR7dGFnfeacquWcqGNvbnRleHTkuK3ms6jlhoxgKTtcXG4gICAgfVxcbiAgfVxcblxcbiAgLyoqXFxuICAgKiDpgb/lhY3lpKfph4/nmoRpbml0SW5zdGFuY2XosIPnlKjvvIzliJ3lp4vljJbmiYDmnInnmoTnu4Tku7ZcXG4gICAqIEBwYXJhbSBjb25maWdcXG4gICAqL1xcbiAgaW5pdChjb25maWcpIHtcXG4gICAgaWYgKHRoaXMuX2luaXRlZCkge1xcbiAgICAgIHJldHVybjtcXG4gICAgfVxcbiAgICBmb3IgKGxldCB0YWcgaW4gdGhpcy5fY2xzTWFwKSB7XFxuICAgICAgLy8gaWYgbm90IGluaXRlZCwgaW5pdCBhbiBpbnN0YW5jZVxcbiAgICAgIGlmICh0aGlzLl9jbHNNYXAuaGFzT3duUHJvcGVydHkodGFnKSAmJiAhdGhpcy5faW5zdGFuY2VNYXBbdGFnXSkge1xcbiAgICAgICAgdGhpcy5pbml0SW5zdGFuY2UodGFnLCBjb25maWcpO1xcbiAgICAgIH1cXG4gICAgfVxcbiAgICB0aGlzLl9pbml0ZWQgPSB0cnVlO1xcbiAgfVxcblxcbiAgLyoqXFxuICAgKiDms6jlhozkuIDkuKrkuIrkuIvmlofmtYHnqIvvvIzmj5DkvpvlronlhajnmoTkuovku7blj5HpgIHmnLrliLZcXG4gICAqIEBwYXJhbSB0YWdcXG4gICAqIEBwYXJhbSBjbHNcXG4gICAqL1xcbiAgcmVnaXN0cnkodGFnLCBjbHMpIHtcXG4gICAgY29uc3QgZW1pdHRlciA9IHRoaXMuX2VtaXR0ZXI7XFxuICAgIGNvbnN0IGNoZWNrTWVzc2FnZU5hbWUgPSB0aGlzLl9pc01lc3NhZ2VOYW1lVmFsaWQuYmluZCh0aGlzKTtcXG4gICAgY29uc3Qgc2VsZiA9IHRoaXM7XFxuICAgIGNvbnN0IGVuaGFuY2VkID0gY2xhc3MgZXh0ZW5kcyBjbHMge1xcbiAgICAgIGNvbnN0cnVjdG9yKC4uLmFyZ3MpIHtcXG4gICAgICAgIHN1cGVyKC4uLmFyZ3MpO1xcbiAgICAgICAgdGhpcy5saXN0ZW5lcnMgPSB7fTtcXG4gICAgICAgIHRoaXMub25jZUxpc3RlbmVycyA9IHt9O1xcbiAgICAgICAgdGhpcy5UQUcgPSB0YWc7XFxuICAgICAgICB0aGlzLl9jb250ZXh0ID0gc2VsZjtcXG4gICAgICB9XFxuXFxuICAgICAgb24obWVzc2FnZU5hbWUsIGNhbGxiYWNrKSB7XFxuICAgICAgICBjaGVja01lc3NhZ2VOYW1lKG1lc3NhZ2VOYW1lKTtcXG5cXG4gICAgICAgIGlmICh0aGlzLmxpc3RlbmVyc1ttZXNzYWdlTmFtZV0pIHtcXG4gICAgICAgICAgdGhpcy5saXN0ZW5lcnNbbWVzc2FnZU5hbWVdLnB1c2goY2FsbGJhY2spO1xcbiAgICAgICAgfSBlbHNlIHtcXG4gICAgICAgICAgdGhpcy5saXN0ZW5lcnNbbWVzc2FnZU5hbWVdID0gW2NhbGxiYWNrXTtcXG4gICAgICAgIH1cXG5cXG4gICAgICAgIGVtaXR0ZXIub24oYCR7bWVzc2FnZU5hbWV9JHtESVJFQ1RfRU1JVF9GTEFHfSR7dGFnfWAsIGNhbGxiYWNrKTsgLy8g5bu656uL5a6a5ZCR6YCa5L+h55uR5ZCsXFxuICAgICAgICByZXR1cm4gZW1pdHRlci5vbihtZXNzYWdlTmFtZSwgY2FsbGJhY2spO1xcbiAgICAgIH1cXG5cXG4gICAgICAvKipcXG4gICAgICAgKiDlnKjmn5DkuKrkuovku7bop6blj5HliY3miafooYxcXG4gICAgICAgKiBAcGFyYW0gbWVzc2FnZU5hbWVcXG4gICAgICAgKiBAcGFyYW0gY2FsbGJhY2tcXG4gICAgICAgKi9cXG4gICAgICBiZWZvcmUobWVzc2FnZU5hbWUsIGNhbGxiYWNrKSB7XFxuICAgICAgICBjaGVja01lc3NhZ2VOYW1lKG1lc3NhZ2VOYW1lKTtcXG4gICAgICAgIGlmIChzZWxmLl9ob29rc1ttZXNzYWdlTmFtZV0pIHtcXG4gICAgICAgICAgc2VsZi5faG9va3NbbWVzc2FnZU5hbWVdLnB1c2goY2FsbGJhY2spO1xcbiAgICAgICAgfSBlbHNlIHtcXG4gICAgICAgICAgc2VsZi5faG9va3NbbWVzc2FnZU5hbWVdID0gW2NhbGxiYWNrXTtcXG4gICAgICAgIH1cXG4gICAgICB9XFxuXFxuICAgICAgb25jZShtZXNzYWdlTmFtZSwgY2FsbGJhY2spIHtcXG4gICAgICAgIGNoZWNrTWVzc2FnZU5hbWUobWVzc2FnZU5hbWUpO1xcblxcbiAgICAgICAgaWYgKHRoaXMub25jZUxpc3RlbmVyc1ttZXNzYWdlTmFtZV0pIHtcXG4gICAgICAgICAgdGhpcy5vbmNlTGlzdGVuZXJzW21lc3NhZ2VOYW1lXS5wdXNoKGNhbGxiYWNrKTtcXG4gICAgICAgIH0gZWxzZSB7XFxuICAgICAgICAgIHRoaXMub25jZUxpc3RlbmVyc1ttZXNzYWdlTmFtZV0gPSBbY2FsbGJhY2tdO1xcbiAgICAgICAgfVxcblxcbiAgICAgICAgZW1pdHRlci5vbmNlKGAke21lc3NhZ2VOYW1lfSR7RElSRUNUX0VNSVRfRkxBR30ke3RhZ31gLCBjYWxsYmFjayk7XFxuICAgICAgICByZXR1cm4gZW1pdHRlci5vbmNlKG1lc3NhZ2VOYW1lLCBjYWxsYmFjayk7XFxuICAgICAgfVxcblxcbiAgICAgIGVtaXQobWVzc2FnZU5hbWUsIC4uLmFyZ3MpIHtcXG4gICAgICAgIGNoZWNrTWVzc2FnZU5hbWUobWVzc2FnZU5hbWUpO1xcblxcbiAgICAgICAgY29uc3QgYmVmb3JlTGlzdCA9IHNlbGYuX2hvb2tzW21lc3NhZ2VOYW1lXTtcXG4gICAgICAgIGlmIChiZWZvcmVMaXN0KSB7XFxuICAgICAgICAgIGZvciAobGV0IGkgPSAwLCBsZW4gPSBiZWZvcmVMaXN0Lmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XFxuICAgICAgICAgICAgY29uc3QgY2FsbGJhY2sgPSBiZWZvcmVMaXN0W2ldO1xcbiAgICAgICAgICAgIGNhbGxiYWNrKCk7XFxuICAgICAgICAgIH1cXG4gICAgICAgIH1cXG4gICAgICAgIHJldHVybiBlbWl0dGVyLmVtaXQobWVzc2FnZU5hbWUsIC4uLmFyZ3MpO1xcbiAgICAgIH1cXG5cXG4gICAgICAvKipcXG4gICAgICAgKiDlrprlkJHlj5HpgIHnu5nmn5DkuKrnu4Tku7bljZXkvovnmoTmtojmga9cXG4gICAgICAgKiBAcGFyYW0gbWVzc2FnZU5hbWVcXG4gICAgICAgKiBAcGFyYW0gYXJnc1xcbiAgICAgICAqL1xcbiAgICAgIGVtaXRUbyh0YWcsIG1lc3NhZ2VOYW1lLCAuLi5hcmdzKSB7XFxuICAgICAgICBjaGVja01lc3NhZ2VOYW1lKG1lc3NhZ2VOYW1lKTtcXG5cXG4gICAgICAgIHJldHVybiBlbWl0dGVyLmVtaXQoYCR7bWVzc2FnZU5hbWV9JHtESVJFQ1RfRU1JVF9GTEFHfSR7dGFnfWAsIC4uLmFyZ3MpO1xcbiAgICAgIH1cXG5cXG4gICAgICBvZmYobWVzc2FnZU5hbWUsIGNhbGxiYWNrKSB7XFxuICAgICAgICBjaGVja01lc3NhZ2VOYW1lKG1lc3NhZ2VOYW1lKTtcXG4gICAgICAgIHJldHVybiBlbWl0dGVyLm9mZihtZXNzYWdlTmFtZSwgY2FsbGJhY2spO1xcbiAgICAgIH1cXG5cXG4gICAgICByZW1vdmVMaXN0ZW5lcnMoKSB7XFxuICAgICAgICBjb25zdCBoYXNPd24gPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmJpbmQodGhpcy5saXN0ZW5lcnMpO1xcblxcbiAgICAgICAgZm9yIChsZXQgbWVzc2FnZU5hbWUgaW4gdGhpcy5saXN0ZW5lcnMpIHtcXG4gICAgICAgICAgaWYgKGhhc093bihtZXNzYWdlTmFtZSkpIHtcXG4gICAgICAgICAgICBjb25zdCBjYWxsYmFja3MgPSB0aGlzLmxpc3RlbmVyc1ttZXNzYWdlTmFtZV0gfHwgW107XFxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjYWxsYmFja3MubGVuZ3RoOyBpKyspIHtcXG4gICAgICAgICAgICAgIGNvbnN0IGNhbGxiYWNrID0gY2FsbGJhY2tzW2ldO1xcbiAgICAgICAgICAgICAgZW1pdHRlci5vZmYobWVzc2FnZU5hbWUsIGNhbGxiYWNrKTtcXG4gICAgICAgICAgICAgIGVtaXR0ZXIub2ZmKGAke21lc3NhZ2VOYW1lfSR7RElSRUNUX0VNSVRfRkxBR30ke3RhZ31gLCBjYWxsYmFjayk7XFxuICAgICAgICAgICAgfVxcbiAgICAgICAgICB9XFxuICAgICAgICB9XFxuXFxuICAgICAgICBmb3IgKGxldCBtZXNzYWdlTmFtZSBpbiB0aGlzLm9uY2VMaXN0ZW5lcnMpIHtcXG4gICAgICAgICAgaWYgKGhhc093bihtZXNzYWdlTmFtZSkpIHtcXG4gICAgICAgICAgICBjb25zdCBjYWxsYmFja3MgPSB0aGlzLm9uY2VMaXN0ZW5lcnNbbWVzc2FnZU5hbWVdIHx8IFtdO1xcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY2FsbGJhY2tzLmxlbmd0aDsgaSsrKSB7XFxuICAgICAgICAgICAgICBjb25zdCBjYWxsYmFjayA9IGNhbGxiYWNrc1tpXTtcXG4gICAgICAgICAgICAgIGVtaXR0ZXIub2ZmKG1lc3NhZ2VOYW1lLCBjYWxsYmFjayk7XFxuICAgICAgICAgICAgICBlbWl0dGVyLm9mZihgJHttZXNzYWdlTmFtZX0ke0RJUkVDVF9FTUlUX0ZMQUd9JHt0YWd9YCwgY2FsbGJhY2spO1xcbiAgICAgICAgICAgIH1cXG4gICAgICAgICAgfVxcbiAgICAgICAgfVxcbiAgICAgIH1cXG5cXG4gICAgICAvKipcXG4gICAgICAgKiDlnKjnu4Tku7bplIDmr4Hml7bvvIzpu5jorqTlsIblroPms6jlhoznmoTkuovku7blhajpg6jljbjovb3vvIznoa7kv53kuI3kvJrpgKDmiJDlhoXlrZjms4TmvI9cXG4gICAgICAgKi9cXG4gICAgICBkZXN0cm95KCkge1xcbiAgICAgICAgLy8gc3RlcDEgdW5saXN0ZW4gZXZlbnRzXFxuICAgICAgICB0aGlzLnJlbW92ZUxpc3RlbmVycygpO1xcblxcbiAgICAgICAgLy8gc3RlcDIgcmVsZWFzZSBmcm9tIGNvbnRleHRcXG4gICAgICAgIGRlbGV0ZSBzZWxmLl9pbnN0YW5jZU1hcFt0YWddO1xcbiAgICAgICAgaWYgKHN1cGVyLmRlc3Ryb3kpIHtcXG4gICAgICAgICAgc3VwZXIuZGVzdHJveSgpO1xcbiAgICAgICAgfVxcbiAgICAgIH1cXG4gICAgfTtcXG4gICAgdGhpcy5fY2xzTWFwW3RhZ10gPSBlbmhhbmNlZDtcXG5cXG4gICAgLyoqXFxuICAgICAqIGdldCBpbnN0YW5jZSBpbW1lZGlhdGVseVxcbiAgICAgKiBlLmcgY29uc3QgaW5zdGFuY2UgPSBjb250ZXh0LnJlZ2lzdHJ5KHRhZywgQ2xzKShjb25maWcpXFxuICAgICAqICovXFxuICAgIHJldHVybiAoLi4uYXJncykgPT4ge1xcbiAgICAgIHJldHVybiB0aGlzLmluaXRJbnN0YW5jZSh0YWcsIC4uLmFyZ3MpO1xcbiAgICB9O1xcbiAgfVxcblxcbiAgLyoqXFxuICAgKiDlr7nlrZjlnKjnmoTlrp7kvovov5vooYxcXG4gICAqL1xcbiAgZGVzdHJveUluc3RhbmNlcygpIHtcXG4gICAgT2JqZWN0LmtleXModGhpcy5faW5zdGFuY2VNYXApLmZvckVhY2godGFnID0+IHtcXG4gICAgICBpZiAodGhpcy5faW5zdGFuY2VNYXBbdGFnXS5kZXN0cm95KSB7XFxuICAgICAgICB0aGlzLl9pbnN0YW5jZU1hcFt0YWddLmRlc3Ryb3koKTtcXG4gICAgICB9XFxuICAgIH0pO1xcbiAgfVxcblxcbiAgLyoqXFxuICAgKiDnvJbop6PnoIHmtYHnqIvml6DpnIDlhbPms6jkuovku7bnmoTop6Pnu5FcXG4gICAqL1xcbiAgZGVzdHJveSgpIHtcXG4gICAgdGhpcy5fZW1pdHRlciA9IG51bGw7XFxuICAgIHRoaXMuYWxsb3dlZEV2ZW50cyA9IFtdO1xcbiAgICB0aGlzLl9jbHNNYXAgPSBudWxsO1xcbiAgICB0aGlzLl9jb250ZXh0ID0gbnVsbDtcXG4gICAgdGhpcy5kZXN0cm95SW5zdGFuY2VzKCk7XFxuICB9XFxuXFxuICAvKipcXG4gICAqIOWvueS/oemBk+i/m+ihjOaUtuaLolxcbiAgICogQHBhcmFtIG1lc3NhZ2VOYW1lXFxuICAgKiBAcHJpdmF0ZVxcbiAgICovXFxuICBfaXNNZXNzYWdlTmFtZVZhbGlkKG1lc3NhZ2VOYW1lKSB7XFxuICAgIGlmICghdGhpcy5hbGxvd2VkRXZlbnRzLmluZGV4T2YobWVzc2FnZU5hbWUpIDwgMCkge1xcbiAgICAgIHRocm93IG5ldyBFcnJvcihgdW5yZWdpc3RlcmVkIG1lc3NhZ2UgbmFtZTogJHttZXNzYWdlTmFtZX1gKTtcXG4gICAgfVxcbiAgfVxcbn1cXG5cXG5leHBvcnRzLmRlZmF1bHQgPSBDb250ZXh0O1xcblxcbi8vIyBzb3VyY2VVUkw9d2VicGFjazovL3hncGxheWVyLWZsdi8uLi94Z3BsYXllci11dGlscy9zcmMvY29udGV4dC5qcz8nKX0sXCIuLi94Z3BsYXllci11dGlscy9zcmMvZW52L2lzbGUuanNcIjpcbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4uL3hncGxheWVyLXV0aWxzL3NyYy9lbnYvaXNsZS5qcyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgbm8gc3RhdGljIGV4cG9ydHMgZm91bmQgKi9mdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXtcInVzZSBzdHJpY3RcIjtldmFsKCdcXG5cXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcXG4gIHZhbHVlOiB0cnVlXFxufSk7XFxuY29uc3QgbGUgPSBmdW5jdGlvbiAoKSB7XFxuICBjb25zdCBidWYgPSBuZXcgQXJyYXlCdWZmZXIoMik7XFxuICBuZXcgRGF0YVZpZXcoYnVmKS5zZXRJbnQxNigwLCAyNTYsIHRydWUpOyAvLyBsaXR0bGUtZW5kaWFuIHdyaXRlXFxuICByZXR1cm4gbmV3IEludDE2QXJyYXkoYnVmKVswXSA9PT0gMjU2OyAvLyBwbGF0Zm9ybS1zcGVjIHJlYWQsIGlmIGVxdWFsIHRoZW4gTEVcXG59KCk7XFxuXFxuZXhwb3J0cy5kZWZhdWx0ID0gbGU7XFxuXFxuLy8jIHNvdXJjZVVSTD13ZWJwYWNrOi8veGdwbGF5ZXItZmx2Ly4uL3hncGxheWVyLXV0aWxzL3NyYy9lbnYvaXNsZS5qcz8nKX0sXCIuLi94Z3BsYXllci11dGlscy9zcmMvZW52L3NuaWZmZXIuanNcIjpcbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4uL3hncGxheWVyLXV0aWxzL3NyYy9lbnYvc25pZmZlci5qcyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgbm8gc3RhdGljIGV4cG9ydHMgZm91bmQgKi9mdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXtcInVzZSBzdHJpY3RcIjtldmFsKFwiXFxuXFxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFxcXCJfX2VzTW9kdWxlXFxcIiwge1xcbiAgdmFsdWU6IHRydWVcXG59KTtcXG5jb25zdCBsZSA9IGZ1bmN0aW9uICgpIHtcXG4gIGNvbnN0IGJ1ZiA9IG5ldyBBcnJheUJ1ZmZlcigyKTtcXG4gIG5ldyBEYXRhVmlldyhidWYpLnNldEludDE2KDAsIDI1NiwgdHJ1ZSk7IC8vIGxpdHRsZS1lbmRpYW4gd3JpdGVcXG4gIHJldHVybiBuZXcgSW50MTZBcnJheShidWYpWzBdID09PSAyNTY7IC8vIHBsYXRmb3JtLXNwZWMgcmVhZCwgaWYgZXF1YWwgdGhlbiBMRVxcbn0oKTtcXG5cXG5jb25zdCBzbmlmZmVyID0ge1xcbiAgZ2V0IGRldmljZSgpIHtcXG4gICAgbGV0IHIgPSBzbmlmZmVyLm9zO1xcbiAgICByZXR1cm4gci5pc1BjID8gJ3BjJyA6IHIuaXNUYWJsZXQgPyAndGFibGV0JyA6ICdtb2JpbGUnO1xcbiAgfSxcXG4gIGdldCBicm93c2VyKCkge1xcbiAgICBsZXQgdWEgPSBuYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCk7XFxuICAgIGxldCByZWcgPSB7XFxuICAgICAgaWU6IC9ydjooW1xcXFxkLl0rKVxcXFwpIGxpa2UgZ2Vja28vLFxcbiAgICAgIGZpcmZveDogL2ZpcmVmb3hcXFxcLyhbXFxcXGQuXSspLyxcXG4gICAgICBjaHJvbWU6IC9jaHJvbWVcXFxcLyhbXFxcXGQuXSspLyxcXG4gICAgICBvcGVyYTogL29wZXJhLihbXFxcXGQuXSspLyxcXG4gICAgICBzYWZhcmk6IC92ZXJzaW9uXFxcXC8oW1xcXFxkLl0rKS4qc2FmYXJpL1xcbiAgICB9O1xcbiAgICByZXR1cm4gW10uY29uY2F0KE9iamVjdC5rZXlzKHJlZykuZmlsdGVyKGtleSA9PiByZWdba2V5XS50ZXN0KHVhKSkpWzBdO1xcbiAgfSxcXG4gIGdldCBvcygpIHtcXG4gICAgbGV0IHVhID0gbmF2aWdhdG9yLnVzZXJBZ2VudDtcXG4gICAgbGV0IGlzV2luZG93c1Bob25lID0gLyg/OldpbmRvd3MgUGhvbmUpLy50ZXN0KHVhKTtcXG4gICAgbGV0IGlzU3ltYmlhbiA9IC8oPzpTeW1iaWFuT1MpLy50ZXN0KHVhKSB8fCBpc1dpbmRvd3NQaG9uZTtcXG4gICAgbGV0IGlzQW5kcm9pZCA9IC8oPzpBbmRyb2lkKS8udGVzdCh1YSk7XFxuICAgIGxldCBpc0ZpcmVGb3ggPSAvKD86RmlyZWZveCkvLnRlc3QodWEpO1xcbiAgICBsZXQgaXNUYWJsZXQgPSAvKD86aVBhZHxQbGF5Qm9vaykvLnRlc3QodWEpIHx8IGlzQW5kcm9pZCAmJiAhLyg/Ok1vYmlsZSkvLnRlc3QodWEpIHx8IGlzRmlyZUZveCAmJiAvKD86VGFibGV0KS8udGVzdCh1YSk7XFxuICAgIGxldCBpc1Bob25lID0gLyg/OmlQaG9uZSkvLnRlc3QodWEpICYmICFpc1RhYmxldDtcXG4gICAgbGV0IGlzUGMgPSAhaXNQaG9uZSAmJiAhaXNBbmRyb2lkICYmICFpc1N5bWJpYW47XFxuICAgIHJldHVybiB7XFxuICAgICAgaXNUYWJsZXQsXFxuICAgICAgaXNQaG9uZSxcXG4gICAgICBpc0FuZHJvaWQsXFxuICAgICAgaXNQYyxcXG4gICAgICBpc1N5bWJpYW4sXFxuICAgICAgaXNXaW5kb3dzUGhvbmUsXFxuICAgICAgaXNGaXJlRm94XFxuICAgIH07XFxuICB9LFxcblxcbiAgZ2V0IGlzTGUoKSB7XFxuICAgIHJldHVybiBsZTtcXG4gIH1cXG59O1xcblxcbmV4cG9ydHMuZGVmYXVsdCA9IHNuaWZmZXI7XFxuXFxuLy8jIHNvdXJjZVVSTD13ZWJwYWNrOi8veGdwbGF5ZXItZmx2Ly4uL3hncGxheWVyLXV0aWxzL3NyYy9lbnYvc25pZmZlci5qcz9cIil9LFwiLi4veGdwbGF5ZXItdXRpbHMvc3JjL2Vudi91dGY4LmpzXCI6XG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuLi94Z3BsYXllci11dGlscy9zcmMvZW52L3V0ZjguanMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIG5vIHN0YXRpYyBleHBvcnRzIGZvdW5kICovZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7XCJ1c2Ugc3RyaWN0XCI7ZXZhbChcIlxcblxcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcXFwiX19lc01vZHVsZVxcXCIsIHtcXG4gIHZhbHVlOiB0cnVlXFxufSk7XFxuY2xhc3MgVVRGOCB7XFxuICBzdGF0aWMgZGVjb2RlKHVpbnQ4YXJyYXkpIHtcXG4gICAgY29uc3Qgb3V0ID0gW107XFxuICAgIGNvbnN0IGlucHV0ID0gdWludDhhcnJheTtcXG4gICAgbGV0IGkgPSAwO1xcbiAgICBjb25zdCBsZW5ndGggPSB1aW50OGFycmF5Lmxlbmd0aDtcXG5cXG4gICAgd2hpbGUgKGkgPCBsZW5ndGgpIHtcXG4gICAgICBpZiAoaW5wdXRbaV0gPCAweDgwKSB7XFxuICAgICAgICBvdXQucHVzaChTdHJpbmcuZnJvbUNoYXJDb2RlKGlucHV0W2ldKSk7XFxuICAgICAgICArK2k7XFxuICAgICAgICBjb250aW51ZTtcXG4gICAgICB9IGVsc2UgaWYgKGlucHV0W2ldIDwgMHhDMCkge1xcbiAgICAgICAgLy8gZmFsbHRocm91Z2hcXG4gICAgICB9IGVsc2UgaWYgKGlucHV0W2ldIDwgMHhFMCkge1xcbiAgICAgICAgaWYgKFVURjguX2NoZWNrQ29udGludWF0aW9uKGlucHV0LCBpLCAxKSkge1xcbiAgICAgICAgICBjb25zdCB1Y3M0ID0gKGlucHV0W2ldICYgMHgxRikgPDwgNiB8IGlucHV0W2kgKyAxXSAmIDB4M0Y7XFxuICAgICAgICAgIGlmICh1Y3M0ID49IDB4ODApIHtcXG4gICAgICAgICAgICBvdXQucHVzaChTdHJpbmcuZnJvbUNoYXJDb2RlKHVjczQgJiAweEZGRkYpKTtcXG4gICAgICAgICAgICBpICs9IDI7XFxuICAgICAgICAgICAgY29udGludWU7XFxuICAgICAgICAgIH1cXG4gICAgICAgIH1cXG4gICAgICB9IGVsc2UgaWYgKGlucHV0W2ldIDwgMHhGMCkge1xcbiAgICAgICAgaWYgKFVURjguX2NoZWNrQ29udGludWF0aW9uKGlucHV0LCBpLCAyKSkge1xcbiAgICAgICAgICBjb25zdCB1Y3M0ID0gKGlucHV0W2ldICYgMHhGKSA8PCAxMiB8IChpbnB1dFtpICsgMV0gJiAweDNGKSA8PCA2IHwgaW5wdXRbaSArIDJdICYgMHgzRjtcXG4gICAgICAgICAgaWYgKHVjczQgPj0gMHg4MDAgJiYgKHVjczQgJiAweEY4MDApICE9PSAweEQ4MDApIHtcXG4gICAgICAgICAgICBvdXQucHVzaChTdHJpbmcuZnJvbUNoYXJDb2RlKHVjczQgJiAweEZGRkYpKTtcXG4gICAgICAgICAgICBpICs9IDM7XFxuICAgICAgICAgICAgY29udGludWU7XFxuICAgICAgICAgIH1cXG4gICAgICAgIH1cXG4gICAgICB9IGVsc2UgaWYgKGlucHV0W2ldIDwgMHhGOCkge1xcbiAgICAgICAgaWYgKFVURjguX2NoZWNrQ29udGludWF0aW9uKGlucHV0LCBpLCAzKSkge1xcbiAgICAgICAgICBsZXQgdWNzNCA9IChpbnB1dFtpXSAmIDB4NykgPDwgMTggfCAoaW5wdXRbaSArIDFdICYgMHgzRikgPDwgMTIgfCAoaW5wdXRbaSArIDJdICYgMHgzRikgPDwgNiB8IGlucHV0W2kgKyAzXSAmIDB4M0Y7XFxuICAgICAgICAgIGlmICh1Y3M0ID4gMHgxMDAwMCAmJiB1Y3M0IDwgMHgxMTAwMDApIHtcXG4gICAgICAgICAgICB1Y3M0IC09IDB4MTAwMDA7XFxuICAgICAgICAgICAgb3V0LnB1c2goU3RyaW5nLmZyb21DaGFyQ29kZSh1Y3M0ID4+PiAxMCB8IDB4RDgwMCkpO1xcbiAgICAgICAgICAgIG91dC5wdXNoKFN0cmluZy5mcm9tQ2hhckNvZGUodWNzNCAmIDB4M0ZGIHwgMHhEQzAwKSk7XFxuICAgICAgICAgICAgaSArPSA0O1xcbiAgICAgICAgICAgIGNvbnRpbnVlO1xcbiAgICAgICAgICB9XFxuICAgICAgICB9XFxuICAgICAgfVxcbiAgICAgIG91dC5wdXNoKFN0cmluZy5mcm9tQ2hhckNvZGUoMHhGRkZEKSk7XFxuICAgICAgKytpO1xcbiAgICB9XFxuXFxuICAgIHJldHVybiBvdXQuam9pbignJyk7XFxuICB9XFxuXFxuICBzdGF0aWMgX2NoZWNrQ29udGludWF0aW9uKHVpbnQ4YXJyYXksIHN0YXJ0LCBjaGVja0xlbmd0aCkge1xcbiAgICBsZXQgYXJyYXkgPSB1aW50OGFycmF5O1xcbiAgICBpZiAoc3RhcnQgKyBjaGVja0xlbmd0aCA8IGFycmF5Lmxlbmd0aCkge1xcbiAgICAgIHdoaWxlIChjaGVja0xlbmd0aC0tKSB7XFxuICAgICAgICBpZiAoKGFycmF5Wysrc3RhcnRdICYgMHhDMCkgIT09IDB4ODApIHtcXG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xcbiAgICAgICAgfVxcbiAgICAgIH1cXG4gICAgICByZXR1cm4gdHJ1ZTtcXG4gICAgfSBlbHNlIHtcXG4gICAgICByZXR1cm4gZmFsc2U7XFxuICAgIH1cXG4gIH1cXG59XFxuXFxuZXhwb3J0cy5kZWZhdWx0ID0gVVRGODtcXG5cXG4vLyMgc291cmNlVVJMPXdlYnBhY2s6Ly94Z3BsYXllci1mbHYvLi4veGdwbGF5ZXItdXRpbHMvc3JjL2Vudi91dGY4LmpzP1wiKX0sXCIuLi94Z3BsYXllci11dGlscy9zcmMvbW9iaWxlL2F1ZGlvLWNvbnRleHQuanNcIjpcbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4uL3hncGxheWVyLXV0aWxzL3NyYy9tb2JpbGUvYXVkaW8tY29udGV4dC5qcyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgbm8gc3RhdGljIGV4cG9ydHMgZm91bmQgKi9mdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXtcInVzZSBzdHJpY3RcIjtldmFsKCdcXG5cXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcXG4gIHZhbHVlOiB0cnVlXFxufSk7XFxuY2xhc3MgQXVkaW9DdHgge1xcbiAgY29uc3RydWN0b3IoY29uZmlnKSB7XFxuICAgIHRoaXMuY29uZmlnID0gT2JqZWN0LmFzc2lnbih7fSwgY29uZmlnKTtcXG4gICAgbGV0IEF1ZGlvQ29udGV4dCA9IHdpbmRvdy5BdWRpb0NvbnRleHQgfHwgd2luZG93LndlYmtpdEF1ZGlvQ29udGV4dDtcXG4gICAgdGhpcy5jb250ZXh0ID0gbmV3IEF1ZGlvQ29udGV4dCgpO1xcbiAgICB0aGlzLmdhaW5Ob2RlID0gdGhpcy5jb250ZXh0LmNyZWF0ZUdhaW4oKTtcXG4gICAgdGhpcy5nYWluTm9kZS5jb25uZWN0KHRoaXMuY29udGV4dC5kZXN0aW5hdGlvbik7XFxuICAgIHRoaXMubWV0YSA9IHVuZGVmaW5lZDtcXG4gICAgdGhpcy5zYW1wbGVzID0gW107XFxuICAgIHRoaXMucHJlbG9hZFRpbWUgPSB0aGlzLmNvbmZpZy5wcmVsb2FkVGltZSB8fCAzO1xcbiAgICB0aGlzLmR1cmF0aW9uID0gMDtcXG5cXG4gICAgdGhpcy5fY3VycmVudEJ1ZmZlciA9IHVuZGVmaW5lZDtcXG4gICAgdGhpcy5fbmV4dEJ1ZmZlciA9IHVuZGVmaW5lZDtcXG4gICAgdGhpcy5fbGFzdHB0cyA9IHVuZGVmaW5lZDtcXG4gICAgdGhpcy5fcHJlRGVjb2RlID0gW107XFxuICAgIHRoaXMuX2N1cnJlbnRUaW1lID0gMDtcXG4gICAgdGhpcy5fZGVjb2RpbmcgPSBmYWxzZTtcXG4gICAgLy8g6K6w5b2V5aSW6YOo5Lyg6L6T55qE54q25oCBXFxuICAgIHRoaXMuX3BsYXllZCA9IGZhbHNlO1xcbiAgfVxcblxcbiAgZ2V0IGN1cnJlbnRUaW1lKCkge1xcbiAgICByZXR1cm4gdGhpcy5fY3VycmVudFRpbWU7XFxuICB9XFxuXFxuICBkZWNvZGVBdWRpbyhhdWRpb1RyYWNrKSB7XFxuICAgIGxldCB7IHNhbXBsZXMgfSA9IGF1ZGlvVHJhY2s7XFxuICAgIGxldCBkYXRhID0gc2FtcGxlcztcXG4gICAgYXVkaW9UcmFjay5zYW1wbGVzID0gW107XFxuICAgIHRoaXMuc2V0QXVkaW9EYXRhKGRhdGEpO1xcbiAgfVxcbiAgc2V0QXVkaW9EYXRhKGRhdGEpIHtcXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkYXRhLmxlbmd0aDsgaSsrKSB7XFxuICAgICAgZGF0YVtpXS5wdHMgPSBkYXRhW2ldLnB0cyA9PT0gdW5kZWZpbmVkID8gZGF0YVtpXS5kdHMgOiBkYXRhW2ldLnB0cztcXG4gICAgICB0aGlzLl9wcmVEZWNvZGUucHVzaChkYXRhW2ldKTtcXG4gICAgfVxcbiAgICBpZiAodGhpcy5fcHJlRGVjb2RlLmxlbmd0aCA+IDApIHtcXG4gICAgICBpZiAodGhpcy5fbGFzdHB0cyA9PT0gdW5kZWZpbmVkKSB7XFxuICAgICAgICB0aGlzLl9sYXN0cHRzID0gdGhpcy5fcHJlRGVjb2RlWzBdLnB0cztcXG4gICAgICB9XFxuICAgICAgaWYgKCh0aGlzLl9wcmVEZWNvZGVbdGhpcy5fcHJlRGVjb2RlLmxlbmd0aCAtIDFdLnB0cyAtIHRoaXMuX2xhc3RwdHMpIC8gMTAwMCA+IHRoaXMucHJlbG9hZFRpbWUpIHtcXG4gICAgICAgIHRoaXMuZGVjb2RlQUFDKCk7XFxuICAgICAgfVxcbiAgICB9XFxuICB9XFxuXFxuICBkZWNvZGVBQUMoKSB7XFxuICAgIGlmICh0aGlzLl9kZWNvZGluZykge1xcbiAgICAgIHJldHVybjtcXG4gICAgfVxcbiAgICB0aGlzLl9kZWNvZGluZyA9IHRydWU7XFxuICAgIGxldCBkYXRhID0gdGhpcy5fcHJlRGVjb2RlO1xcbiAgICBsZXQgc2FtcGxlcyA9IFtdO1xcbiAgICBsZXQgX3RoaXMgPSB0aGlzO1xcbiAgICBsZXQgc2FtcGxlID0gZGF0YS5zaGlmdCgpO1xcbiAgICB3aGlsZSAoc2FtcGxlKSB7XFxuICAgICAgbGV0IHNhbXBsZURhdGEgPSBBdWRpb0N0eC5nZXRBQUNEYXRhKHRoaXMubWV0YSwgc2FtcGxlKTtcXG4gICAgICBzYW1wbGVzLnB1c2goc2FtcGxlRGF0YSk7XFxuICAgICAgdGhpcy5fbGFzdHB0cyA9IHNhbXBsZS5wdHM7XFxuICAgICAgc2FtcGxlID0gZGF0YS5zaGlmdCgpO1xcbiAgICB9XFxuICAgIGxldCBidWZmZXIgPSBBdWRpb0N0eC5jb21iaWxlRGF0YShzYW1wbGVzKTtcXG4gICAgdHJ5IHtcXG4gICAgICB0aGlzLmNvbnRleHQuZGVjb2RlQXVkaW9EYXRhKGJ1ZmZlci5idWZmZXIsIGZ1bmN0aW9uIChidWZmZXIpIHtcXG4gICAgICAgIGxldCBhdWRpb1NvdXJjZSA9IF90aGlzLmNvbnRleHQuY3JlYXRlQnVmZmVyU291cmNlKCk7XFxuICAgICAgICBhdWRpb1NvdXJjZS5idWZmZXIgPSBidWZmZXI7XFxuICAgICAgICBhdWRpb1NvdXJjZS5vbmVuZGVkID0gX3RoaXMub25Tb3VyY2VFbmRlZC5iaW5kKF90aGlzKTtcXG4gICAgICAgIF90aGlzLnNhbXBsZXMucHVzaCh7XFxuICAgICAgICAgIHRpbWU6IF90aGlzLmR1cmF0aW9uLFxcbiAgICAgICAgICBkdXJhdGlvbjogYnVmZmVyLmR1cmF0aW9uLFxcbiAgICAgICAgICBkYXRhOiBhdWRpb1NvdXJjZVxcbiAgICAgICAgfSk7XFxuXFxuICAgICAgICBfdGhpcy5kdXJhdGlvbiArPSBidWZmZXIuZHVyYXRpb247XFxuXFxuICAgICAgICBpZiAoIV90aGlzLl9jdXJyZW50QnVmZmVyKSB7XFxuICAgICAgICAgIF90aGlzLl9jdXJyZW50QnVmZmVyID0gX3RoaXMuZ2V0VGltZUJ1ZmZlcihfdGhpcy5jdXJyZW50VGltZSk7XFxuXFxuICAgICAgICAgIGlmIChfdGhpcy5fcGxheWVkKSB7XFxuICAgICAgICAgICAgX3RoaXMucGxheSgpO1xcbiAgICAgICAgICB9XFxuICAgICAgICB9XFxuXFxuICAgICAgICBpZiAoIV90aGlzLl9uZXh0QnVmZmVyICYmIF90aGlzLl9jdXJyZW50QnVmZmVyKSB7XFxuICAgICAgICAgIF90aGlzLl9uZXh0QnVmZmVyID0gX3RoaXMuZ2V0VGltZUJ1ZmZlcihfdGhpcy5jdXJyZW50VGltZSArIF90aGlzLl9jdXJyZW50QnVmZmVyLmR1cmF0aW9uKTtcXG4gICAgICAgIH1cXG4gICAgICAgIF90aGlzLl9kZWNvZGluZyA9IGZhbHNlO1xcblxcbiAgICAgICAgaWYgKChfdGhpcy5fcHJlRGVjb2RlLmxlbmd0aCA+IDAgJiYgX3RoaXMuX3ByZURlY29kZVtfdGhpcy5fcHJlRGVjb2RlLmxlbmd0aCAtIDFdLnB0cyAtIF90aGlzLl9sYXN0cHRzKSAvIDEwMDAgPj0gX3RoaXMucHJlbG9hZFRpbWUpIHtcXG4gICAgICAgICAgX3RoaXMuZGVjb2RlQUFDKCk7XFxuICAgICAgICB9XFxuICAgICAgfSk7XFxuICAgIH0gY2F0Y2ggKGVycikge1xcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcXG4gICAgfVxcbiAgfVxcblxcbiAgb25Tb3VyY2VFbmRlZCgpIHtcXG4gICAgaWYgKCF0aGlzLl9uZXh0QnVmZmVyIHx8ICF0aGlzLl9wbGF5ZWQpIHtcXG4gICAgICByZXR1cm47XFxuICAgIH1cXG4gICAgbGV0IGF1ZGlvU291cmNlID0gdGhpcy5fbmV4dEJ1ZmZlci5kYXRhO1xcbiAgICBhdWRpb1NvdXJjZS5zdGFydCgpO1xcbiAgICBhdWRpb1NvdXJjZS5jb25uZWN0KHRoaXMuZ2Fpbk5vZGUpO1xcbiAgICB0aGlzLl9jdXJyZW50QnVmZmVyID0gdGhpcy5fbmV4dEJ1ZmZlcjtcXG4gICAgdGhpcy5fY3VycmVudFRpbWUgPSB0aGlzLl9jdXJyZW50QnVmZmVyLnRpbWU7XFxuICAgIHRoaXMuX25leHRCdWZmZXIgPSB0aGlzLmdldFRpbWVCdWZmZXIodGhpcy5jdXJyZW50VGltZSk7XFxuICAgIGlmICh0aGlzLl9jdXJyZW50QnVmZmVyKSB7XFxuICAgICAgdGhpcy5fbmV4dEJ1ZmZlciA9IHRoaXMuZ2V0VGltZUJ1ZmZlcih0aGlzLmN1cnJlbnRUaW1lICsgdGhpcy5fY3VycmVudEJ1ZmZlci5kdXJhdGlvbik7XFxuICAgIH1cXG4gIH1cXG5cXG4gIHBsYXkoKSB7XFxuICAgIHRoaXMuX3BsYXllZCA9IHRydWU7XFxuICAgIGlmICghdGhpcy5fY3VycmVudEJ1ZmZlcikge1xcbiAgICAgIHJldHVybjtcXG4gICAgfVxcbiAgICBsZXQgYXVkaW9Tb3VyY2UgPSB0aGlzLl9jdXJyZW50QnVmZmVyLmRhdGE7XFxuICAgIGF1ZGlvU291cmNlLmNvbm5lY3QodGhpcy5nYWluTm9kZSk7XFxuICAgIGF1ZGlvU291cmNlLnN0YXJ0KCk7XFxuICB9XFxuXFxuICBnZXRUaW1lQnVmZmVyKHRpbWUpIHtcXG4gICAgbGV0IHJldDtcXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnNhbXBsZXMubGVuZ3RoOyBpKyspIHtcXG4gICAgICBsZXQgc2FtcGxlID0gdGhpcy5zYW1wbGVzW2ldO1xcbiAgICAgIGlmIChzYW1wbGUudGltZSA8PSB0aW1lICYmIHNhbXBsZS50aW1lICsgc2FtcGxlLmR1cmF0aW9uID4gdGltZSkge1xcbiAgICAgICAgcmV0ID0gc2FtcGxlO1xcbiAgICAgICAgYnJlYWs7XFxuICAgICAgfVxcbiAgICB9XFxuICAgIHJldHVybiByZXQ7XFxuICB9XFxuXFxuICBzZXRBdWRpb01ldGFEYXRhKG1ldGEpIHtcXG4gICAgdGhpcy5tZXRhID0gbWV0YTtcXG4gIH1cXG5cXG4gIHN0YXRpYyBnZXRBQUNEYXRhKG1ldGEsIHNhbXBsZSkge1xcbiAgICBsZXQgYnVmZmVyID0gbmV3IFVpbnQ4QXJyYXkoc2FtcGxlLmRhdGEuYnl0ZUxlbmd0aCArIDcpO1xcbiAgICBsZXQgYWR0cyA9IEF1ZGlvQ3R4LmdldEFkdHMobWV0YSwgc2FtcGxlLmRhdGEpO1xcbiAgICBidWZmZXIuc2V0KGFkdHMpO1xcbiAgICBidWZmZXIuc2V0KHNhbXBsZS5kYXRhLCA3KTtcXG4gICAgcmV0dXJuIGJ1ZmZlcjtcXG4gIH1cXG5cXG4gIHN0YXRpYyBjb21iaWxlRGF0YShzYW1wbGVzKSB7XFxuICAgIC8vIGdldCBsZW5ndGhcXG4gICAgbGV0IGxlbmd0aCA9IDA7XFxuICAgIGZvciAobGV0IGkgPSAwLCBrID0gc2FtcGxlcy5sZW5ndGg7IGkgPCBrOyBpKyspIHtcXG4gICAgICBsZW5ndGggKz0gc2FtcGxlc1tpXS5ieXRlTGVuZ3RoO1xcbiAgICB9XFxuXFxuICAgIGxldCByZXQgPSBuZXcgVWludDhBcnJheShsZW5ndGgpO1xcbiAgICBsZXQgb2Zmc2V0ID0gMDtcXG4gICAgLy8gY29tYmlsZSBkYXRhO1xcbiAgICBmb3IgKGxldCBpID0gMCwgayA9IHNhbXBsZXMubGVuZ3RoOyBpIDwgazsgaSsrKSB7XFxuICAgICAgcmV0LnNldChzYW1wbGVzW2ldLCBvZmZzZXQpO1xcbiAgICAgIG9mZnNldCArPSBzYW1wbGVzW2ldLmJ5dGVMZW5ndGg7XFxuICAgIH1cXG4gICAgcmV0dXJuIHJldDtcXG4gIH1cXG5cXG4gIHN0YXRpYyBnZXRBZHRzKG1ldGEsIGRhdGEpIHtcXG4gICAgbGV0IGFkdHMgPSBuZXcgVWludDhBcnJheSg3KTtcXG5cXG4gICAgLy8g6K6+572u5ZCM5q2l5L2NIDB4ZmZmIDEyYml0XFxuICAgIGFkdHNbMF0gPSAweGZmO1xcbiAgICBhZHRzWzFdID0gMHhmMDtcXG5cXG4gICAgLy8gT2JqZWN0IGRhdGEgKOayoeS7gOS5iOS6uueUqE1QRUctMuS6hu+8jEhMU+WSjEZMVuS5n+WFqOaYr01QRUctNO+8jOi/memHjOebtOaOpTApICAxYml0XFxuICAgIC8vIExldmVsIGFsd2F5cyAwMCAyYml0XFxuICAgIC8vIENSQyBhbHdheXMgMSAxYml0XFxuICAgIGFkdHNbMV0gPSBhZHRzWzFdIHwgMHgwMTtcXG5cXG4gICAgLy8gcHJvZmlsZSAyYml0XFxuICAgIGFkdHNbMl0gPSAweGMwICYgbWV0YS5vYmplY3RUeXBlIC0gMSA8PCA2O1xcblxcbiAgICAvL3NhbXBsZUZyZXF1ZW5jeUluZGV4XFxuICAgIGFkdHNbMl0gPSBhZHRzWzJdIHwgMHgzYyAmIG1ldGEuc2FtcGxlUmF0ZUluZGV4IDw8IDI7XFxuXFxuICAgIC8vcHJpdmF0ZSBiaXQgMCAxYml0XFxuICAgIC8vIGNoYW5lbCBjb25maWd1cmF0aW9uIDNiaXRcXG4gICAgYWR0c1syXSA9IGFkdHNbMl0gfCAweDAxICYgbWV0YS5jaGFubmVsQ291bnQgPj4gMjtcXG4gICAgYWR0c1szXSA9IDB4YzAgJiBtZXRhLmNoYW5uZWxDb3VudCA8PCA2O1xcblxcbiAgICAvLyBvcmlnaW5hbF9jb3B5OiAwIDFiaXRcXG4gICAgLy8gaG9tZTogMCAxYml0XFxuXFxuICAgIC8vIGFkdHNfdmFyaWFibGVfaGVhZGVyKClcXG4gICAgLy8gY29weXJpZ2h0ZWRfaWRfYml0IDAgMWJpdFxcbiAgICAvLyBjb3B5cmlnaHRlZF9pZF9zdGFydCAwIDFiaXRcXG5cXG4gICAgLy8gYWFjX2ZyYW1lX2xlbmd0aCAxM2JpdDtcXG4gICAgbGV0IGFhY2ZyYW1lbGVuZ3RoID0gZGF0YS5ieXRlTGVuZ3RoICsgNztcXG5cXG4gICAgYWR0c1szXSA9IGFkdHNbM10gfCAweDAzICYgYWFjZnJhbWVsZW5ndGggPj4gMTE7XFxuICAgIGFkdHNbNF0gPSAweGZmICYgYWFjZnJhbWVsZW5ndGggPj4gMztcXG4gICAgYWR0c1s1XSA9IDB4ZTAgJiBhYWNmcmFtZWxlbmd0aCA8PCA1O1xcblxcbiAgICAvLyBhZHRzX2J1ZmZlcl9mdWxsbmVzcyAweDdmZiAxMWJpdFxcbiAgICBhZHRzWzVdID0gYWR0c1s1XSB8IDB4MWY7XFxuICAgIGFkdHNbNl0gPSAweGZjO1xcblxcbiAgICAvLyBudW1iZXJfb2ZfcmF3X2RhdGFfYmxvY2tzX2luX2ZyYW1lIDAgMmJpdDtcXG4gICAgcmV0dXJuIGFkdHM7XFxuICB9XFxufVxcblxcbmV4cG9ydHMuZGVmYXVsdCA9IEF1ZGlvQ3R4O1xcblxcbi8vIyBzb3VyY2VVUkw9d2VicGFjazovL3hncGxheWVyLWZsdi8uLi94Z3BsYXllci11dGlscy9zcmMvbW9iaWxlL2F1ZGlvLWNvbnRleHQuanM/Jyl9LFwiLi4veGdwbGF5ZXItdXRpbHMvc3JjL21vYmlsZS9tb2JpbGUtdmlkZW8uanNcIjpcbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi4veGdwbGF5ZXItdXRpbHMvc3JjL21vYmlsZS9tb2JpbGUtdmlkZW8uanMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgbm8gc3RhdGljIGV4cG9ydHMgZm91bmQgKi9mdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXtcInVzZSBzdHJpY3RcIjtldmFsKCdcXG5cXG52YXIgX3ZpZGVvQ29udGV4dCA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vdmlkZW8tY29udGV4dCAqLyBcIi4uL3hncGxheWVyLXV0aWxzL3NyYy9tb2JpbGUvdmlkZW8tY29udGV4dC5qc1wiKTtcXG5cXG52YXIgX3ZpZGVvQ29udGV4dDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF92aWRlb0NvbnRleHQpO1xcblxcbnZhciBfYXVkaW9Db250ZXh0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9hdWRpby1jb250ZXh0ICovIFwiLi4veGdwbGF5ZXItdXRpbHMvc3JjL21vYmlsZS9hdWRpby1jb250ZXh0LmpzXCIpO1xcblxcbnZhciBfYXVkaW9Db250ZXh0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2F1ZGlvQ29udGV4dCk7XFxuXFxudmFyIF90aWNrZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL3RpY2tlciAqLyBcIi4uL3hncGxheWVyLXV0aWxzL3NyYy9tb2JpbGUvdGlja2VyLmpzXCIpO1xcblxcbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XFxuXFxuLyoqXFxuICog6Z+z55S75ZCM5q2l6LCD5ZKM5ZmoXFxuICovXFxuY2xhc3MgQVZSZWNvbmNpbGVyIHtcXG4gIGNvbnN0cnVjdG9yKHByb3BzKSB7XFxuICAgIHRoaXMuYUN0eCA9IHByb3BzLmFDdHg7XFxuICAgIHRoaXMudkN0eCA9IHByb3BzLnZDdHg7XFxuXFxuICAgIHRoaXMudGltZW91dElkID0gbnVsbDtcXG4gIH1cXG5cXG4gIGRvUmVjb25jaWxlKCkge1xcbiAgICBjb25zdCB2Q3VyVGltZSA9IHRoaXMudkN0eC5jdXJyZW50VGltZSB8fCAwO1xcbiAgICBjb25zdCBhQ3VyVGltZSA9ICh0aGlzLmFDdHguY3VycmVudFRpbWUgfHwgMCkgKiAxMDAwO1xcblxcbiAgICBjb25zdCBnYXAgPSB2Q3VyVGltZSAtIGFDdXJUaW1lO1xcbiAgICBpZiAodGhpcy50aW1lb3V0SWQpIHtcXG4gICAgICByZXR1cm47XFxuICAgIH1cXG4gICAgaWYgKGdhcCA+IDIwMDApIHsvLyBhdWRpbyBkZWxheWVkIGZvciBtb3JlIHRoYW4gMTAwbXNcXG4gICAgICAvLyB0aGlzLnZDdHgucGF1c2UoKVxcbiAgICAgIC8vIHRoaXMudGltZW91dElkID0gc2V0VGltZW91dCgoKSA9PiB7XFxuICAgICAgLy8gICB0aGlzLnZDdHgucGxheSgpXFxuICAgICAgLy8gICB0aGlzLnRpbWVvdXRJZCA9IG51bGxcXG4gICAgICAvLyB9LCBnYXApXFxuICAgIH0gZWxzZSBpZiAoZ2FwIDwgLTIwMCkge1xcbiAgICAgIHRoaXMudkN0eC5jdXJyZW50VGltZSA9IHRoaXMudkN0eC5jdXJyZW50VGltZSArIE1hdGguYWJzKGdhcCk7XFxuICAgIH1cXG4gIH1cXG5cXG4gIGRlc3Ryb3koKSB7XFxuICAgIHRoaXMuYUN0eCA9IG51bGw7XFxuICAgIHRoaXMudkN0eCA9IG51bGw7XFxuICB9XFxufVxcblxcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bmRlZlxcbmNsYXNzIE1vYmlsZVZpZGVvIGV4dGVuZHMgSFRNTEVsZW1lbnQge1xcbiAgY29uc3RydWN0b3IoY29uZmlnKSB7XFxuICAgIHN1cGVyKCk7XFxuICAgIGxldCBfdGhpcyA9IHRoaXM7XFxuICAgIHRoaXMudkN0eCA9IG5ldyBfdmlkZW9Db250ZXh0Mi5kZWZhdWx0KCk7XFxuICAgIHRoaXMuYUN0eCA9IG5ldyBfYXVkaW9Db250ZXh0Mi5kZWZhdWx0KGNvbmZpZyk7XFxuICAgIHRoaXMudGlja2VyID0gbmV3ICgoMCwgX3RpY2tlci5nZXRUaWNrZXIpKCkpKCk7XFxuICAgIHRoaXMuaGlzdG9yeVRpbWUgPSAwO1xcbiAgICB0aGlzLnJlY29uY2lsZXIgPSBuZXcgQVZSZWNvbmNpbGVyKHtcXG4gICAgICB2Q3R4OiB0aGlzLnZDdHgsXFxuICAgICAgYUN0eDogdGhpcy5hQ3R4XFxuICAgIH0pO1xcblxcbiAgICB0aGlzLmluaXQoKTtcXG4gIH1cXG5cXG4gIGluaXQoKSB7XFxuICAgIHRoaXMudkN0eC5vbmNhbnBsYXkgPSAoKSA9PiB7XFxuICAgICAgdGhpcy5hcHBlbmRDaGlsZCh0aGlzLnZDdHguY2FudmFzKTtcXG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW5kZWZcXG4gICAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KFxcJ2NhbnBsYXlcXCcpKTtcXG4gICAgfTtcXG5cXG4gICAgdGhpcy50aWNrZXIuc3RhcnQoKCkgPT4ge1xcbiAgICAgIC8vIHRoaXMucmVjb25jaWxlci5kb1JlY29uY2lsZSgpXFxuICAgICAgY29uc29sZS5sb2codGhpcy5hQ3R4LmN1cnJlbnRUaW1lKTtcXG4gICAgfSk7XFxuICB9XFxuXFxuICBkZXN0cm95KCkge1xcbiAgICB0aGlzLnJlY29uY2lsZXIuZGVzdHJveSgpO1xcbiAgfVxcblxcbiAgb25EZW11eENvbXBsZXRlKHZpZGVvVHJhY2ssIGF1ZGlvVHJhY2spIHtcXG4gICAgdGhpcy5hQ3R4LmRlY29kZUF1ZGlvKGF1ZGlvVHJhY2spO1xcbiAgICB0aGlzLnZDdHguZGVjb2RlVmlkZW8odmlkZW9UcmFjayk7XFxuICB9XFxuXFxuICBzZXRBdWRpb01ldGEobWV0YSkge1xcbiAgICB0aGlzLmFDdHguc2V0QXVkaW9NZXRhRGF0YShtZXRhKTtcXG4gIH1cXG5cXG4gIHNldFZpZGVvTWV0YShtZXRhKSB7XFxuICAgIHRoaXMudkN0eC5zZXRWaWRlb01ldGFEYXRhKG1ldGEpO1xcbiAgfVxcblxcbiAgZ2V0IGN1cnJlbnRUaW1lKCkge31cXG5cXG4gIHBsYXkoKSB7XFxuICAgIC8vIGlmICghdGhpcy52Q3R4LilcXG4gICAgdGhpcy52Q3R4LnBsYXkoKTtcXG4gICAgdGhpcy5hQ3R4LnBsYXkoKTtcXG4gIH1cXG59XFxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVuZGVmXFxuY3VzdG9tRWxlbWVudHMuZGVmaW5lKFxcJ21vYmlsZS12aWRlb1xcJywgTW9iaWxlVmlkZW8pO1xcblxcbi8vIyBzb3VyY2VVUkw9d2VicGFjazovL3hncGxheWVyLWZsdi8uLi94Z3BsYXllci11dGlscy9zcmMvbW9iaWxlL21vYmlsZS12aWRlby5qcz8nKX0sXCIuLi94Z3BsYXllci11dGlscy9zcmMvbW9iaWxlL3NvdXJjZWJ1ZmZlci5qc1wiOlxuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuLi94Z3BsYXllci11dGlscy9zcmMvbW9iaWxlL3NvdXJjZWJ1ZmZlci5qcyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBubyBzdGF0aWMgZXhwb3J0cyBmb3VuZCAqL2Z1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pe1widXNlIHN0cmljdFwiO2V2YWwoXCJcXG5cXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXFxcIl9fZXNNb2R1bGVcXFwiLCB7XFxuICB2YWx1ZTogdHJ1ZVxcbn0pO1xcbmNsYXNzIFNvdXJjZUJ1ZmZlciB7XFxuICBjb25zdHJ1Y3Rvcihjb25maWcpIHtcXG4gICAgdGhpcy5jb25maWcgPSBPYmplY3QuYXNzaWduKHt9LCBjb25maWcpO1xcbiAgICB0aGlzLnR5cGUgPSB0aGlzLmNvbmZpZy50eXBlO1xcbiAgICB0aGlzLmJ1ZmZlciA9IFtdO1xcbiAgICB0aGlzLmN1cnJlbnRHb3AgPSB1bmRlZmluZWQ7XFxuICAgIHRoaXMuX2xhc3RHZXQgPSB1bmRlZmluZWQ7XFxuICB9XFxuXFxuICBwdXNoKGZyYW1lKSB7XFxuICAgIGlmICh0aGlzLnR5cGUgPT09ICd2aWRlbycpIHtcXG4gICAgICBpZiAoZnJhbWUuaXNLZXlmcmFtZSkge1xcbiAgICAgICAgbGV0IGN1cnJlbnRHb3AgPSB7XFxuICAgICAgICAgIHNhbXBsZXM6IFtdLFxcbiAgICAgICAgICBzdGFydDogZnJhbWUuZHRzLFxcbiAgICAgICAgICBlbmQ6IGZyYW1lLmR0cyxcXG4gICAgICAgICAgbmV4dEdvcDogdW5kZWZpbmVkXFxuICAgICAgICB9O1xcbiAgICAgICAgaWYgKHRoaXMuY3VycmVudEdvcCkge1xcbiAgICAgICAgICB0aGlzLmN1cnJlbnRHb3AubmV4dEdvcCA9IGN1cnJlbnRHb3A7XFxuICAgICAgICB9XFxuICAgICAgICB0aGlzLmN1cnJlbnRHb3AgPSBjdXJyZW50R29wO1xcbiAgICAgICAgdGhpcy5idWZmZXIucHVzaCh0aGlzLmN1cnJlbnRHb3ApO1xcbiAgICAgIH1cXG5cXG4gICAgICBpZiAodGhpcy5jdXJyZW50R29wKSB7XFxuICAgICAgICB0aGlzLmN1cnJlbnRHb3Auc2FtcGxlcy5wdXNoKGZyYW1lKTtcXG5cXG4gICAgICAgIGlmIChmcmFtZS5kdHMgPCB0aGlzLmN1cnJlbnRHb3Auc3RhcnQpIHtcXG4gICAgICAgICAgdGhpcy5jdXJyZW50R29wLnN0YXJ0ID0gZnJhbWUuZHRzO1xcbiAgICAgICAgfVxcblxcbiAgICAgICAgaWYgKGZyYW1lLmR0cyA+IHRoaXMuY3VycmVudEdvcC5lbmQpIHtcXG4gICAgICAgICAgdGhpcy5jdXJyZW50R29wLmVuZCA9IGZyYW1lLmR0cztcXG4gICAgICAgIH1cXG4gICAgICB9XFxuICAgIH1cXG4gIH1cXG5cXG4gIGdldCh0aW1lKSB7XFxuICAgIGlmICh0aGlzLnR5cGUgPT09ICd2aWRlbycpIHtcXG4gICAgICBpZiAodGhpcy5idWZmZXIubGVuZ3RoIDwgMSkge1xcbiAgICAgICAgcmV0dXJuO1xcbiAgICAgIH1cXG5cXG4gICAgICBpZiAodGltZSA9PT0gdW5kZWZpbmVkKSB7XFxuICAgICAgICBsZXQgc2FtcGxlID0gdGhpcy5fZ2V0TmV4dCgpO1xcbiAgICAgICAgcmV0dXJuIHNhbXBsZTtcXG4gICAgICB9XFxuICAgIH1cXG4gIH1cXG5cXG4gIF9nZXROZXh0KCkge1xcbiAgICBpZiAoIXRoaXMuX2xhc3RHZXQpIHtcXG4gICAgICBsZXQgZ29wID0gdGhpcy5idWZmZXJbMF07XFxuICAgICAgaWYgKGdvcC5zYW1wbGVzLmxlbmd0aCA8IDEpIHtcXG4gICAgICAgIHJldHVybjtcXG4gICAgICB9XFxuXFxuICAgICAgdGhpcy5fbGFzdEdldCA9IHtcXG4gICAgICAgIGdvcCxcXG4gICAgICAgIGluZGV4OiAwXFxuICAgICAgfTtcXG4gICAgICByZXR1cm4gZ29wLnNhbXBsZXNbMF07XFxuICAgIH0gZWxzZSB7XFxuICAgICAgbGV0IGdvcCA9IHRoaXMuX2xhc3RHZXQuZ29wO1xcbiAgICAgIGxldCBzYW1wbGUgPSBnb3Auc2FtcGxlc1t0aGlzLl9sYXN0R2V0LmluZGV4ICsgMV07XFxuICAgICAgaWYgKHNhbXBsZSkge1xcbiAgICAgICAgdGhpcy5fbGFzdEdldC5pbmRleCA9IHRoaXMuX2xhc3RHZXQuaW5kZXggKyAxO1xcbiAgICAgICAgcmV0dXJuIHNhbXBsZTtcXG4gICAgICB9IGVsc2Uge1xcbiAgICAgICAgZ29wID0gZ29wLm5leHRHb3A7XFxuICAgICAgICBpZiAoIWdvcCB8fCBnb3Auc2FtcGxlcy5sZW5ndGggPCAxKSB7XFxuICAgICAgICAgIHJldHVybjtcXG4gICAgICAgIH1cXG4gICAgICAgIHNhbXBsZSA9IGdvcC5zYW1wbGVzWzBdO1xcbiAgICAgICAgdGhpcy5fbGFzdEdldCA9IHtcXG4gICAgICAgICAgZ29wLFxcbiAgICAgICAgICBpbmRleDogMFxcbiAgICAgICAgfTtcXG4gICAgICAgIHJldHVybiBzYW1wbGU7XFxuICAgICAgfVxcbiAgICB9XFxuICB9XFxuXFxuICByZW1vdmUoc3RhcnQsIGVuZCkge1xcbiAgICBpZiAodGhpcy5idWZmZXIubGVuZ3RoIDwgMCkge1xcbiAgICAgIHJldHVybjtcXG4gICAgfVxcblxcbiAgICBsZXQgaSA9IDA7XFxuICAgIGxldCBnb3AgPSB0aGlzLmJ1ZmZlclswXTtcXG4gICAgd2hpbGUgKGdvcCkge1xcbiAgICAgIGlmIChnb3AuZW5kIDwgZW5kICYmIGdvcC5zdGFydCA+PSBzdGFydCkge1xcbiAgICAgICAgZGVsZXRlIHRoaXMuYnVmZmVyW2ldO1xcbiAgICAgICAgZ29wID0gdGhpcy5idWZmZXJbaV07XFxuICAgICAgfSBlbHNlIHtcXG4gICAgICAgIGkgKz0gMTtcXG4gICAgICAgIGdvcCA9IHRoaXMuYnVmZmVyW2ldO1xcbiAgICAgIH1cXG4gICAgfVxcbiAgfVxcbn1cXG5cXG5leHBvcnRzLmRlZmF1bHQgPSBTb3VyY2VCdWZmZXI7XFxuXFxuLy8jIHNvdXJjZVVSTD13ZWJwYWNrOi8veGdwbGF5ZXItZmx2Ly4uL3hncGxheWVyLXV0aWxzL3NyYy9tb2JpbGUvc291cmNlYnVmZmVyLmpzP1wiKX0sXCIuLi94Z3BsYXllci11dGlscy9zcmMvbW9iaWxlL3RpY2tlci5qc1wiOlxuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuLi94Z3BsYXllci11dGlscy9zcmMvbW9iaWxlL3RpY2tlci5qcyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBubyBzdGF0aWMgZXhwb3J0cyBmb3VuZCAqL2Z1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pe1widXNlIHN0cmljdFwiO2V2YWwoJ1xcblxcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xcbiAgdmFsdWU6IHRydWVcXG59KTtcXG4vKipcXG4gKiBAYXV0aG9yIGZ1eXVoYW9AYnl0ZWRhbmNlLmNvbVxcbiAqL1xcblxcbmNsYXNzIFRpY2tlciB7XFxuICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XFxuICAgIHRoaXMub3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oe30sIG9wdGlvbnMgfHwge30sIHtcXG4gICAgICBpbnRlcnZhbDogMTZcXG4gICAgfSk7XFxuXFxuICAgIHRoaXMuY2FsbGJhY2tzID0gW107XFxuICB9XFxuXFxuICBzdGFydCguLi5jYWxsYmFja3MpIHtcXG4gICAgdGhpcy5jYWxsYmFja3MgPSBjYWxsYmFja3M7XFxuICB9XFxuXFxuICBvblRpY2soKSB7XFxuICAgIGZvciAobGV0IGkgPSAwLCBsZW4gPSB0aGlzLmNhbGxiYWNrcy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xcbiAgICAgIGNvbnN0IGNhbGxiYWNrID0gdGhpcy5jYWxsYmFja3NbaV07XFxuICAgICAgY2FsbGJhY2soKTtcXG4gICAgfVxcbiAgfVxcblxcbiAgc2V0SW50ZXJ2YWwoaW50ZXJ2YWwpIHtcXG4gICAgdGhpcy5vcHRpb25zLmludGVydmFsID0gaW50ZXJ2YWw7XFxuICAgIHJldHVybiB0aGlzO1xcbiAgfVxcbn1cXG5cXG4vKipcXG4gKiB0aWNrZXIgdXNlIHJlcXVlc3RBbmltYXRpb25GcmFtZVxcbiAqL1xcbmNsYXNzIFJhZlRpY2tlciBleHRlbmRzIFRpY2tlciB7XFxuICBjb25zdHJ1Y3Rvcihwcm9wcykge1xcbiAgICBzdXBlcihwcm9wcyk7XFxuICAgIHRoaXMucHJldiA9IG51bGw7XFxuICAgIHRoaXMudGltZXJJZCA9IG51bGw7XFxuICAgIHRoaXMuX3N1YlRpbWVySWQgPSBudWxsO1xcblxcbiAgICB0aGlzLl90aWNrRnVuYyA9IFJhZlRpY2tlci5nZXRUaWNrRnVuYygpO1xcbiAgICB0aGlzLnRpY2sgPSB0aGlzLnRpY2suYmluZCh0aGlzKTtcXG4gIH1cXG5cXG4gIHN0YXJ0KC4uLmNhbGxiYWNrcykge1xcbiAgICBzdXBlci5zdGFydCguLi5jYWxsYmFja3MpO1xcbiAgICB0aGlzLnRpY2soKTtcXG4gIH1cXG5cXG4gIHRpY2sodGltZXN0YW1wKSB7XFxuICAgIGNvbnNvbGUubG9nKHRpbWVzdGFtcCk7XFxuICAgIHRoaXMubmV4dFRpY2soKTtcXG4gICAgdGhpcy5vblRpY2soKTtcXG4gIH1cXG5cXG4gIG5leHRUaWNrKCkge1xcbiAgICBjb25zdCB7IF90aWNrRnVuYyB9ID0gdGhpcztcXG4gICAgdGhpcy50aW1lcklkID0gX3RpY2tGdW5jKHRoaXMudGljayk7XFxuICB9XFxuXFxuICBzdG9wKCkge1xcbiAgICBpZiAodGhpcy50aW1lcklkKSB7XFxuICAgICAgY29uc3QgY2FuY2VsRnVuYyA9IFJhZlRpY2tlci5nZXRDYW5jZWxGdW5jKCk7XFxuXFxuICAgICAgY2FuY2VsRnVuYyh0aGlzLnRpbWVySWQpO1xcbiAgICB9XFxuICB9XFxuXFxuICBzdGF0aWMgZ2V0VGlja0Z1bmMoKSB7XFxuICAgIHJldHVybiB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lIHx8IHdpbmRvdy53ZWJraXRSZXF1ZXN0QW5pbWF0aW9uRnJhbWU7XFxuICB9XFxuXFxuICBzdGF0aWMgZ2V0Q2FuY2VsRnVuYygpIHtcXG4gICAgcmV0dXJuIHdpbmRvdy5jYW5jZWxBbmltYXRpb25GcmFtZSB8fCB3aW5kb3cud2Via2l0Q2FuY2VsQW5pbWF0aW9uRnJhbWU7XFxuICB9XFxuXFxuICBzdGF0aWMgaXNTdXBwb3J0ZWQoKSB7XFxuICAgIHJldHVybiBSYWZUaWNrZXIuZ2V0VGlja0Z1bmMoKSAhPT0gdW5kZWZpbmVkO1xcbiAgfVxcbn1cXG5cXG4vKipcXG4gKiB1c2Ugc2V0VGltZW91dCBmb3IgYnJvd3NlcnMgd2l0aG91dCByYWYgc3VwcG9ydFxcbiAqL1xcbmNsYXNzIFRpbWVvdXRUaWNrZXIgZXh0ZW5kcyBUaWNrZXIge1xcbiAgY29uc3RydWN0b3IoY29uZmlnKSB7XFxuICAgIHN1cGVyKGNvbmZpZyk7XFxuICAgIHRoaXMudGltZW91dElkID0gbnVsbDtcXG4gIH1cXG5cXG4gIHN0YXJ0KC4uLmNhbGxiYWNrcykge1xcbiAgICBzdXBlci5uZXh0VGljayguLi5jYWxsYmFja3MpO1xcbiAgICB0aGlzLnRpbWVvdXRJZCA9IHdpbmRvdy5zZXRJbnRlcnZhbCgoKSA9PiB7XFxuICAgICAgdGhpcy5vblRpY2soKTtcXG4gICAgfSwgdGhpcy5vcHRpb25zLmludGVydmFsIHx8IDE2KTtcXG4gIH1cXG5cXG4gIHN0b3AoKSB7XFxuICAgIGlmICh0aGlzLnRpbWVvdXRJZCkge1xcbiAgICAgIHdpbmRvdy5jbGVhckludGVydmFsKHRoaXMudGltZW91dElkKTtcXG4gICAgfVxcbiAgfVxcblxcbn1cXG5cXG4vKipcXG4gKiDov5Tlm55UaWNrZXLmnoTpgKDlh73mlbBcXG4gKiBAcmV0dXJucyB7VGlja2VyfVxcbiAqL1xcbmNvbnN0IGdldFRpY2tlciA9IGV4cG9ydHMuZ2V0VGlja2VyID0gKCkgPT4ge1xcbiAgaWYgKFJhZlRpY2tlci5pc1N1cHBvcnRlZCgpKSB7XFxuICAgIHJldHVybiBSYWZUaWNrZXI7XFxuICB9IGVsc2Uge1xcbiAgICByZXR1cm4gVGltZW91dFRpY2tlcjtcXG4gIH1cXG59O1xcblxcbi8vIyBzb3VyY2VVUkw9d2VicGFjazovL3hncGxheWVyLWZsdi8uLi94Z3BsYXllci11dGlscy9zcmMvbW9iaWxlL3RpY2tlci5qcz8nKX0sXCIuLi94Z3BsYXllci11dGlscy9zcmMvbW9iaWxlL3ZpZGVvLWNvbnRleHQuanNcIjpcbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4uL3hncGxheWVyLXV0aWxzL3NyYy9tb2JpbGUvdmlkZW8tY29udGV4dC5qcyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgbm8gc3RhdGljIGV4cG9ydHMgZm91bmQgKi9mdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXtcInVzZSBzdHJpY3RcIjtldmFsKFwiXFxuXFxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFxcXCJfX2VzTW9kdWxlXFxcIiwge1xcbiAgdmFsdWU6IHRydWVcXG59KTtcXG5cXG52YXIgX3dlYndvcmtpZnlXZWJwYWNrID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgd2Vid29ya2lmeS13ZWJwYWNrICovIFxcXCIuLi94Z3BsYXllci11dGlscy9ub2RlX21vZHVsZXMvd2Vid29ya2lmeS13ZWJwYWNrL2luZGV4LmpzXFxcIik7XFxuXFxudmFyIF93ZWJ3b3JraWZ5V2VicGFjazIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF93ZWJ3b3JraWZ5V2VicGFjayk7XFxuXFxudmFyIF9zdHJlYW0gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuLi93cml0ZS9zdHJlYW0gKi8gXFxcIi4uL3hncGxheWVyLXV0aWxzL3NyYy93cml0ZS9zdHJlYW0uanNcXFwiKTtcXG5cXG52YXIgX3N0cmVhbTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9zdHJlYW0pO1xcblxcbnZhciBfbmFsdW5pdCA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4uLy4uLy4uL3hncGxheWVyLWNvZGVjL3NyYy9oMjY0L25hbHVuaXQgKi8gXFxcIi4uL3hncGxheWVyLWNvZGVjL3NyYy9oMjY0L25hbHVuaXQvaW5kZXguanNcXFwiKTtcXG5cXG52YXIgX25hbHVuaXQyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfbmFsdW5pdCk7XFxuXFxudmFyIF95dXZDYW52YXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL3l1di1jYW52YXMgKi8gXFxcIi4uL3hncGxheWVyLXV0aWxzL3NyYy9tb2JpbGUveXV2LWNhbnZhcy5qc1xcXCIpO1xcblxcbnZhciBfeXV2Q2FudmFzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3l1dkNhbnZhcyk7XFxuXFxudmFyIF9zb3VyY2VidWZmZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL3NvdXJjZWJ1ZmZlciAqLyBcXFwiLi4veGdwbGF5ZXItdXRpbHMvc3JjL21vYmlsZS9zb3VyY2VidWZmZXIuanNcXFwiKTtcXG5cXG52YXIgX3NvdXJjZWJ1ZmZlcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9zb3VyY2VidWZmZXIpO1xcblxcbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XFxuXFxuY2xhc3MgVmlkZW9DYW52YXMge1xcbiAgY29uc3RydWN0b3IoY29uZmlnKSB7XFxuICAgIHRoaXMuY29uZmlnID0gT2JqZWN0LmFzc2lnbih7fSwgY29uZmlnKTtcXG4gICAgdGhpcy5jYW52YXMgPSB0aGlzLmNvbmZpZy5jYW52YXMgPyB0aGlzLmNvbmZpZy5jYW52YXMgOiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcXG4gICAgdGhpcy5zb3VyY2UgPSBuZXcgX3NvdXJjZWJ1ZmZlcjIuZGVmYXVsdCh7IHR5cGU6ICd2aWRlbycgfSk7XFxuICAgIHRoaXMucHJlbG9hZFRpbWUgPSB0aGlzLmNvbmZpZy5wcmVsb2FkVGltZSB8fCAzO1xcbiAgICB0aGlzLm9uY2FucGxheSA9IHVuZGVmaW5lZDtcXG4gICAgdGhpcy5vbkZpcnN0RnJhbWUgPSB1bmRlZmluZWQ7XFxuICAgIHRoaXMubWV0YSA9IHVuZGVmaW5lZDtcXG4gICAgdGhpcy5yZWFkeVN0YXR1cyA9IDA7XFxuICAgIHRoaXMucGF1c2VkID0gdHJ1ZTtcXG4gICAgdGhpcy5jb3VudCA9IDA7XFxuICAgIHRoaXMuY3VycmVudFRpbWUgPSAwO1xcbiAgICB0aGlzLmxhc3RQbGF5ZWQgPSAwO1xcblxcbiAgICB0aGlzLl9kZWNvZGVySW5pdGVkID0gZmFsc2U7XFxuICAgIHRoaXMuX2F2Y2NwdXNoZWQgPSBmYWxzZTtcXG4gICAgdGhpcy5fZGVjb2RlZEZyYW1lcyA9IHt9O1xcbiAgICB0aGlzLl9sYXN0U2FtcGxlRHRzID0gdW5kZWZpbmVkO1xcbiAgICB0aGlzLl9iYXNlRHRzID0gdW5kZWZpbmVkO1xcbiAgICB0aGlzLmluaXRXYXNtV29ya2VyKCk7XFxuICB9XFxuXFxuICBpbml0V2FzbVdvcmtlcigpIHtcXG4gICAgbGV0IF90aGlzID0gdGhpcztcXG4gICAgdGhpcy53YXNtd29ya2VyID0gKDAsIF93ZWJ3b3JraWZ5V2VicGFjazIuZGVmYXVsdCkoLypyZXF1aXJlLnJlc29sdmUqLygvKiEgLi93b3JrZXIuanMgKi8gXFxcIi4uL3hncGxheWVyLXV0aWxzL3NyYy9tb2JpbGUvd29ya2VyLmpzXFxcIikpO1xcbiAgICB0aGlzLndhc213b3JrZXIucG9zdE1lc3NhZ2Uoe1xcbiAgICAgIG1zZzogJ2luaXQnXFxuICAgIH0pO1xcbiAgICB0aGlzLndhc213b3JrZXIuYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIG1zZyA9PiB7XFxuICAgICAgc3dpdGNoIChtc2cuZGF0YS5tc2cpIHtcXG4gICAgICAgIGNhc2UgJ0RFQ09ERVJfUkVBRFknOlxcbiAgICAgICAgICBfdGhpcy5fZGVjb2RlckluaXRlZCA9IHRydWU7XFxuICAgICAgICAgIGJyZWFrO1xcbiAgICAgICAgY2FzZSAnREVDT0RFRCc6XFxuICAgICAgICAgIHRoaXMuX29uRGVjb2RlZChtc2cuZGF0YSk7XFxuICAgICAgICAgIGJyZWFrO1xcbiAgICAgIH1cXG4gICAgfSk7XFxuICB9XFxuXFxuICBzZXRWaWRlb01ldGFEYXRhKG1ldGEpIHtcXG4gICAgdGhpcy5tZXRhID0gbWV0YTtcXG4gICAgaWYgKCF0aGlzLl9kZWNvZGVySW5pdGVkKSB7XFxuICAgICAgcmV0dXJuO1xcbiAgICB9XFxuICAgIHRoaXMuX2F2Y2NwdXNoZWQgPSB0cnVlO1xcbiAgICBsZXQgZGF0YSA9IG5ldyBVaW50OEFycmF5KG1ldGEuc3BzLmJ5dGVMZW5ndGggKyA0KTtcXG4gICAgZGF0YS5zZXQoWzAsIDAsIDAsIDFdKTtcXG4gICAgZGF0YS5zZXQobWV0YS5zcHMsIDQpO1xcbiAgICB0aGlzLndhc213b3JrZXIucG9zdE1lc3NhZ2Uoe1xcbiAgICAgIG1zZzogJ2RlY29kZScsXFxuICAgICAgZGF0YTogZGF0YVxcbiAgICB9KTtcXG5cXG4gICAgZGF0YSA9IG5ldyBVaW50OEFycmF5KG1ldGEucHBzLmJ5dGVMZW5ndGggKyA0KTtcXG4gICAgZGF0YS5zZXQoWzAsIDAsIDAsIDFdKTtcXG4gICAgZGF0YS5zZXQobWV0YS5wcHMsIDQpO1xcbiAgICB0aGlzLndhc213b3JrZXIucG9zdE1lc3NhZ2Uoe1xcbiAgICAgIG1zZzogJ2RlY29kZScsXFxuICAgICAgZGF0YTogZGF0YVxcbiAgICB9KTtcXG5cXG4gICAgaWYgKCF0aGlzLnl1dkNhbnZhcykge1xcbiAgICAgIGxldCBjb25maWcgPSBPYmplY3QuYXNzaWduKHsgbWV0YSwgY2FudmFzOiB0aGlzLmNhbnZhcyB9LCB0aGlzLmNvbmZpZyk7XFxuICAgICAgdGhpcy55dXZDYW52YXMgPSBuZXcgX3l1dkNhbnZhczIuZGVmYXVsdChjb25maWcpO1xcbiAgICB9XFxuICAgIHRoaXMucmVhZHlTdGF0dXMgPSAxO1xcbiAgfVxcblxcbiAgZGVjb2RlVmlkZW8odmlkZW9UcmFjaykge1xcbiAgICBpZiAoIXRoaXMuX2RlY29kZXJJbml0ZWQpIHtcXG4gICAgICByZXR1cm47XFxuICAgIH1cXG5cXG4gICAgaWYgKCF0aGlzLl9hdmNjcHVzaGVkKSB7XFxuICAgICAgdGhpcy5zZXRWaWRlb01ldGFEYXRhKHRoaXMubWV0YSk7XFxuICAgIH1cXG4gICAgbGV0IHsgc2FtcGxlcyB9ID0gdmlkZW9UcmFjaztcXG4gICAgbGV0IHNhbXBsZSA9IHNhbXBsZXMuc2hpZnQoKTtcXG5cXG4gICAgd2hpbGUgKHNhbXBsZSkge1xcbiAgICAgIGlmICghdGhpcy5fYmFzZUR0cykge1xcbiAgICAgICAgdGhpcy5fYmFzZUR0cyA9IHNhbXBsZS5kdHM7XFxuICAgICAgfVxcbiAgICAgIHRoaXMuc291cmNlLnB1c2goc2FtcGxlKTtcXG4gICAgICBzYW1wbGUgPSBzYW1wbGVzLnNoaWZ0KCk7XFxuICAgIH1cXG5cXG4gICAgdGhpcy5fcHJlbG9hZCgpO1xcbiAgfVxcblxcbiAgX3ByZWxvYWQoKSB7XFxuICAgIGlmICghdGhpcy5fbGFzdFNhbXBsZUR0cyB8fCB0aGlzLl9sYXN0U2FtcGxlRHRzIC0gdGhpcy5fYmFzZUR0cyA8IHRoaXMuY3VycmVudFRpbWUgKyB0aGlzLnByZWxvYWRUaW1lICogMTAwMCkge1xcbiAgICAgIGxldCBzYW1wbGUgPSB0aGlzLnNvdXJjZS5nZXQoKTtcXG4gICAgICBpZiAoc2FtcGxlKSB7XFxuICAgICAgICB0aGlzLl9sYXN0U2FtcGxlRHRzID0gc2FtcGxlLmR0cztcXG4gICAgICAgIHRoaXMuX2FuYWx5c2VOYWwoc2FtcGxlKTtcXG4gICAgICB9XFxuXFxuICAgICAgd2hpbGUgKHNhbXBsZSAmJiB0aGlzLl9sYXN0U2FtcGxlRHRzIC0gdGhpcy5fYmFzZUR0cyA8IHRoaXMuY3VycmVudFRpbWUgKyB0aGlzLnByZWxvYWRUaW1lICogMTAwMCkge1xcbiAgICAgICAgc2FtcGxlID0gdGhpcy5zb3VyY2UuZ2V0KCk7XFxuICAgICAgICBpZiAoc2FtcGxlKSB7XFxuICAgICAgICAgIHRoaXMuX2FuYWx5c2VOYWwoc2FtcGxlKTtcXG4gICAgICAgICAgdGhpcy5fbGFzdFNhbXBsZUR0cyA9IHNhbXBsZS5kdHM7XFxuICAgICAgICB9XFxuICAgICAgfVxcbiAgICB9XFxuICB9XFxuXFxuICBfYW5hbHlzZU5hbChzYW1wbGUpIHtcXG4gICAgbGV0IG5hbHMgPSBfbmFsdW5pdDIuZGVmYXVsdC5nZXRBdmNjTmFscyhuZXcgX3N0cmVhbTIuZGVmYXVsdChzYW1wbGUuZGF0YS5idWZmZXIpKTtcXG5cXG4gICAgbGV0IGxlbmd0aCA9IDA7XFxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbmFscy5sZW5ndGg7IGkrKykge1xcbiAgICAgIGxldCBuYWwgPSBuYWxzW2ldO1xcbiAgICAgIGxlbmd0aCArPSBuYWwuYm9keS5ieXRlTGVuZ3RoICsgNDtcXG4gICAgfVxcbiAgICBsZXQgb2Zmc2V0ID0gMDtcXG4gICAgbGV0IGRhdGEgPSBuZXcgVWludDhBcnJheShsZW5ndGgpO1xcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG5hbHMubGVuZ3RoOyBpKyspIHtcXG4gICAgICBsZXQgbmFsID0gbmFsc1tpXTtcXG4gICAgICBkYXRhLnNldChbMCwgMCwgMCwgMV0sIG9mZnNldCk7XFxuICAgICAgb2Zmc2V0ICs9IDQ7XFxuICAgICAgZGF0YS5zZXQobmV3IFVpbnQ4QXJyYXkobmFsLmJvZHkpLCBvZmZzZXQpO1xcbiAgICAgIG9mZnNldCArPSBuYWwuYm9keS5ieXRlTGVuZ3RoO1xcbiAgICB9XFxuICAgIHRoaXMud2FzbXdvcmtlci5wb3N0TWVzc2FnZSh7XFxuICAgICAgbXNnOiAnZGVjb2RlJyxcXG4gICAgICBkYXRhOiBkYXRhLFxcbiAgICAgIGluZm86IHtcXG4gICAgICAgIGR0czogc2FtcGxlLmR0cyxcXG4gICAgICAgIHB0czogc2FtcGxlLnB0cyA/IHNhbXBsZS5wdHMgOiBzYW1wbGUuZHRzICsgc2FtcGxlLmN0cyxcXG4gICAgICAgIGtleTogc2FtcGxlLmlzS2V5ZnJhbWVcXG4gICAgICB9XFxuICAgIH0pO1xcbiAgfVxcblxcbiAgX29uRGVjb2RlZChkYXRhKSB7XFxuICAgIGxldCB7IGR0cyB9ID0gZGF0YS5pbmZvO1xcbiAgICB0aGlzLl9kZWNvZGVkRnJhbWVzW2R0c10gPSBkYXRhO1xcbiAgfVxcblxcbiAgcGxheSgpIHtcXG4gICAgdGhpcy5wYXVzZWQgPSBmYWxzZTtcXG4gICAgdGhpcy5fb25UaW1lcigpO1xcbiAgfVxcblxcbiAgX29uVGltZXIoKSB7XFxuICAgIGxldCByZW5kZXJDb3N0ID0gMDtcXG4gICAgY29uc3QgcmVuZGVyU3RhcnQgPSBEYXRlLm5vdygpO1xcbiAgICBpZiAodGhpcy5wYXVzZWQpIHtcXG4gICAgICByZXR1cm47XFxuICAgIH1cXG4gICAgbGV0IG5leHRUaW1lID0gMTAwMCAvIDYwO1xcbiAgICBpZiAodGhpcy5tZXRhKSB7XFxuICAgICAgaWYgKHRoaXMubWV0YS5mcmFtZVJhdGUgJiYgdGhpcy5tZXRhLmZyYW1lUmF0ZS5maXhlZCAmJiB0aGlzLm1ldGEuZnJhbWVSYXRlLmZwcykge1xcbiAgICAgICAgbmV4dFRpbWUgPSBNYXRoLmNlaWwoMTAwMCAvIHRoaXMubWV0YS5mcmFtZVJhdGUuZnBzKTtcXG4gICAgICB9XFxuICAgICAgbGV0IGZyYW1lVGltZXMgPSBPYmplY3Qua2V5cyh0aGlzLl9kZWNvZGVkRnJhbWVzKTtcXG4gICAgICBpZiAoZnJhbWVUaW1lcy5sZW5ndGggPiAwKSB7XFxuICAgICAgICB0aGlzLmN1cnJlbnRUaW1lICs9IG5leHRUaW1lO1xcbiAgICAgICAgbGV0IGZyYW1lVGltZSA9IC0xO1xcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBmcmFtZVRpbWVzLmxlbmd0aCAmJiBmcmFtZVRpbWVzW2ldIC0gdGhpcy5fYmFzZUR0cyA8PSB0aGlzLmN1cnJlbnRUaW1lOyBpKyspIHtcXG4gICAgICAgICAgZnJhbWVUaW1lID0gZnJhbWVUaW1lc1tpXTtcXG4gICAgICAgICAgYnJlYWs7XFxuICAgICAgICB9XFxuICAgICAgICBsZXQgZnJhbWUgPSB0aGlzLl9kZWNvZGVkRnJhbWVzW2ZyYW1lVGltZV07XFxuICAgICAgICBpZiAoZnJhbWUpIHtcXG4gICAgICAgICAgaWYgKHRoaXMub25jYW5wbGF5ICYmIHRoaXMucmVhZHlTdGF0dXMgPCA0KSB7XFxuICAgICAgICAgICAgdGhpcy5vbmNhbnBsYXkoKTtcXG4gICAgICAgICAgICB0aGlzLnJlYWR5U3RhdHVzID0gNDtcXG4gICAgICAgICAgfVxcbiAgICAgICAgICBjb25zb2xlLmxvZygndmlkZW8gdGltZScsIHRoaXMuY3VycmVudFRpbWUpO1xcbiAgICAgICAgICB0aGlzLnl1dkNhbnZhcy5yZW5kZXIoZnJhbWUuYnVmZmVyLCBmcmFtZS53aWR0aCwgZnJhbWUuaGVpZ2h0KTtcXG4gICAgICAgICAgcmVuZGVyQ29zdCA9IERhdGUubm93KCkgLSByZW5kZXJTdGFydDtcXG4gICAgICAgICAgZGVsZXRlIHRoaXMuX2RlY29kZWRGcmFtZXNbZnJhbWVUaW1lXTtcXG4gICAgICAgIH1cXG4gICAgICB9XFxuICAgIH1cXG4gICAgdGhpcy5fY2xlYW5CdWZmZXIoKTtcXG4gICAgc2V0VGltZW91dCh0aGlzLl9vblRpbWVyLmJpbmQodGhpcyksIG5leHRUaW1lIC0gcmVuZGVyQ29zdCk7XFxuICB9XFxuXFxuICBfY2xlYW5CdWZmZXIoKSB7XFxuICAgIHRoaXMuc291cmNlLnJlbW92ZSgwLCB0aGlzLmN1cnJlbnRUaW1lKTtcXG4gIH1cXG59XFxuZXhwb3J0cy5kZWZhdWx0ID0gVmlkZW9DYW52YXM7XFxuXFxuLy8jIHNvdXJjZVVSTD13ZWJwYWNrOi8veGdwbGF5ZXItZmx2Ly4uL3hncGxheWVyLXV0aWxzL3NyYy9tb2JpbGUvdmlkZW8tY29udGV4dC5qcz9cIil9LFwiLi4veGdwbGF5ZXItdXRpbHMvc3JjL21vYmlsZS93b3JrZXIuanNcIjpcbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi4veGdwbGF5ZXItdXRpbHMvc3JjL21vYmlsZS93b3JrZXIuanMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgbm8gc3RhdGljIGV4cG9ydHMgZm91bmQgKi9mdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXtcInVzZSBzdHJpY3RcIjtldmFsKFwiXFxuXFxuY29uc3QgTUFYX1NUUkVBTV9CVUZGRVJfTEVOR1RIID0gMTAyNCAqIDEwMjQ7XFxudmFyIERlY29kZXIgPSBmdW5jdGlvbiAoc2VsZikge1xcbiAgdGhpcy5pbml0ZWQgPSBmYWxzZTtcXG4gIHRoaXMuc2VsZiA9IHNlbGY7XFxuICB0aGlzLmluZm9saXN0ID0ge307XFxuICBzZWxmLnBhcl9icm9hZHdheU9uQnJvYWR3YXlJbml0ZWQgPSB0aGlzLmJyb2Fkd2F5T25Ccm9hZHdheUluaXRlZC5iaW5kKHRoaXMpO1xcbiAgc2VsZi5wYXJfYnJvYWR3YXlPblBpY3R1cmVEZWNvZGVkID0gdGhpcy5icm9hZHdheU9uUGljdHVyZURlY29kZWQuYmluZCh0aGlzKTtcXG59O1xcblxcbkRlY29kZXIucHJvdG90eXBlLnRvVThBcnJheSA9IGZ1bmN0aW9uIChwdHIsIGxlbmd0aCkge1xcbiAgcmV0dXJuIHRoaXMuc2VsZi5IRUFQVTguc3ViYXJyYXkocHRyLCBwdHIgKyBsZW5ndGgpO1xcbn07XFxuXFxuRGVjb2Rlci5wcm90b3R5cGUuaW5pdCA9IGZ1bmN0aW9uICgpIHtcXG4gIE1vZHVsZS5fYnJvYWR3YXlJbml0KCk7XFxuICB0aGlzLnN0cmVhbUJ1ZmZlciA9IHRoaXMudG9VOEFycmF5KE1vZHVsZS5fYnJvYWR3YXlDcmVhdGVTdHJlYW0oTUFYX1NUUkVBTV9CVUZGRVJfTEVOR1RIKSwgTUFYX1NUUkVBTV9CVUZGRVJfTEVOR1RIKTtcXG59O1xcblxcbkRlY29kZXIucHJvdG90eXBlLmJyb2Fkd2F5T25QaWN0dXJlRGVjb2RlZCA9IGZ1bmN0aW9uIChvZmZzZXQsIHdpZHRoLCBoZWlnaHQsIGluZm9pZCkge1xcbiAgbGV0IGluZm8gPSBPYmplY3QuYXNzaWduKHt9LCB0aGlzLmluZm9saXN0W2luZm9pZF0pO1xcbiAgbGV0IGRhdGEgPSB0aGlzLnRvVThBcnJheShvZmZzZXQsIHdpZHRoICogaGVpZ2h0ICogMyAvIDIpO1xcbiAgdGhpcy5pbmZvbGlzdFtpbmZvaWRdID0gbnVsbDtcXG4gIGxldCBkYXRldGVtcCA9IG5ldyBVaW50OEFycmF5KGRhdGEubGVuZ3RoKTtcXG4gIGRhdGV0ZW1wLnNldChkYXRhKTtcXG4gIGxldCBidWZmZXIgPSBkYXRldGVtcC5idWZmZXI7XFxuICB0aGlzLnNlbGYucG9zdE1lc3NhZ2Uoe1xcbiAgICBtc2c6ICdERUNPREVEJyxcXG4gICAgd2lkdGgsXFxuICAgIGhlaWdodCxcXG4gICAgaW5mbyxcXG4gICAgYnVmZmVyXFxuICB9LCBbYnVmZmVyXSk7XFxufTtcXG5cXG5EZWNvZGVyLnByb3RvdHlwZS5icm9hZHdheU9uQnJvYWR3YXlJbml0ZWQgPSBmdW5jdGlvbiAoKSB7XFxuICB0aGlzLmluaXRlZCA9IHRydWU7XFxuICB0aGlzLnNlbGYucG9zdE1lc3NhZ2UoeyBtc2c6ICdERUNPREVSX1JFQURZJyB9KTtcXG59O1xcblxcbkRlY29kZXIucHJvdG90eXBlLmRlY29kZSA9IGZ1bmN0aW9uIChkYXRhLCBpbmZvKSB7XFxuICBsZXQgdGltZSA9IHBhcnNlSW50KG5ldyBEYXRlKCkuZ2V0VGltZSgpKTtcXG4gIGxldCBpbmZvaWQgPSB0aW1lIC0gTWF0aC5mbG9vcih0aW1lIC8gMTBlOSkgKiAxMGU5O1xcbiAgdGhpcy5pbmZvbGlzdFtpbmZvaWRdID0gaW5mbztcXG4gIHRoaXMuc3RyZWFtQnVmZmVyLnNldChkYXRhKTtcXG4gIE1vZHVsZS5fYnJvYWR3YXlQbGF5U3RyZWFtKGRhdGEubGVuZ3RoLCBpbmZvaWQpO1xcbn07XFxuXFxudmFyIGRlY29kZXI7XFxuXFxuZnVuY3Rpb24gb25Qb3N0UnVuKCkge1xcbiAgZGVjb2RlciA9IG5ldyBEZWNvZGVyKHRoaXMpO1xcbiAgZGVjb2Rlci5pbml0KCk7XFxufVxcblxcbmZ1bmN0aW9uIGluaXQoKSB7XFxuICBzZWxmLmltcG9ydFNjcmlwdHMoJ2h0dHA6Ly8xMC45NS40NS4yMDI6OTA5MC9leGFtcGxlcy9mbHYvZGVjb2Rlci5qcycpO1xcbiAgYWRkT25Qb3N0UnVuKG9uUG9zdFJ1bi5iaW5kKHNlbGYpKTtcXG59XFxuXFxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoc2VsZikge1xcbiAgc2VsZi5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgZnVuY3Rpb24gKGUpIHtcXG4gICAgdmFyIGRhdGEgPSBlLmRhdGE7XFxuICAgIGlmICghZGF0YS5tc2cpIHtcXG4gICAgICBzZWxmLnBvc3RNZXNzYWdlKHtcXG4gICAgICAgIG1zZzogJ0VSUk9SOmludmFsaWQgbWVzc2FnZSdcXG4gICAgICB9KTtcXG4gICAgfSBlbHNlIHtcXG4gICAgICBzd2l0Y2ggKGRhdGEubXNnKSB7XFxuICAgICAgICBjYXNlICdpbml0JzpcXG4gICAgICAgICAgaW5pdChzZWxmKTtcXG4gICAgICAgICAgYnJlYWs7XFxuICAgICAgICBjYXNlICdkZWNvZGUnOlxcbiAgICAgICAgICBkZWNvZGVyLmRlY29kZShkYXRhLmRhdGEsIGRhdGEuaW5mbyk7XFxuICAgICAgICAgIGJyZWFrO1xcbiAgICAgICAgZGVmYXVsdDpcXG4gICAgICAgICAgYnJlYWs7XFxuICAgICAgfVxcbiAgICB9XFxuICB9LCBmYWxzZSk7XFxufTtcXG5cXG4vLyMgc291cmNlVVJMPXdlYnBhY2s6Ly94Z3BsYXllci1mbHYvLi4veGdwbGF5ZXItdXRpbHMvc3JjL21vYmlsZS93b3JrZXIuanM/XCIpfSxcIi4uL3hncGxheWVyLXV0aWxzL3NyYy9tb2JpbGUveXV2LWNhbnZhcy5qc1wiOlxuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi4veGdwbGF5ZXItdXRpbHMvc3JjL21vYmlsZS95dXYtY2FudmFzLmpzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBubyBzdGF0aWMgZXhwb3J0cyBmb3VuZCAqL2Z1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pe1widXNlIHN0cmljdFwiO2V2YWwoXCJcXG5cXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXFxcIl9fZXNNb2R1bGVcXFwiLCB7XFxuICB2YWx1ZTogdHJ1ZVxcbn0pO1xcbmNsYXNzIFlVVkNhbnZhcyB7XFxuICBjb25zdHJ1Y3Rvcihjb25maWdzKSB7XFxuICAgIHRoaXMuY29uZmlncyA9IE9iamVjdC5hc3NpZ24oe30sIGNvbmZpZ3MpO1xcbiAgICB0aGlzLmNhbnZhcyA9IHRoaXMuY29uZmlncy5jYW52YXM7XFxuICAgIHRoaXMubWV0YSA9IE9iamVjdC5hc3NpZ24oe30sIHRoaXMuY29uZmlncy5tZXRhKTtcXG4gICAgdGhpcy5jaHJvbWEgPSB0aGlzLm1ldGEuY2hyb21hRm9ybWF0O1xcbiAgICB0aGlzLmhlaWdodCA9IHRoaXMubWV0YS5wcmVzZW50SGVpZ2h0O1xcbiAgICB0aGlzLndpZHRoID0gdGhpcy5tZXRhLnByZXNlbnRXaWR0aDtcXG4gICAgdGhpcy5jYW52YXMud2lkdGggPSB0aGlzLndpZHRoO1xcbiAgICB0aGlzLmNhbnZhcy5oZWlnaHQgPSB0aGlzLmhlaWdodDtcXG4gICAgdGhpcy5jYW52YXMuc3R5bGUud2lkdGggPSAnMTAwJSc7XFxuICAgIHRoaXMuY2FudmFzLnN0eWxlLmhlaWdodCA9ICcxMDAlJztcXG4gICAgdGhpcy5faW5pdENvbnRleHRHTCgpO1xcbiAgICBpZiAodGhpcy5jb250ZXh0R0wpIHtcXG4gICAgICB0aGlzLl9pbml0UHJvZ3JhbSgpO1xcbiAgICAgIHRoaXMuX2luaXRCdWZmZXJzKCk7XFxuICAgICAgdGhpcy5faW5pdFRleHR1cmVzKCk7XFxuICAgIH07XFxuICB9XFxuXFxuICBfaW5pdENvbnRleHRHTCgpIHtcXG4gICAgdmFyIGNhbnZhcyA9IHRoaXMuY2FudmFzO1xcbiAgICB2YXIgZ2wgPSBudWxsO1xcblxcbiAgICB2YXIgdmFsaWRDb250ZXh0TmFtZXMgPSBbJ3dlYmdsJywgJ2V4cGVyaW1lbnRhbC13ZWJnbCcsICdtb3otd2ViZ2wnLCAnd2Via2l0LTNkJ107XFxuICAgIHZhciBuYW1lSW5kZXggPSAwO1xcblxcbiAgICB3aGlsZSAoIWdsICYmIG5hbWVJbmRleCA8IHZhbGlkQ29udGV4dE5hbWVzLmxlbmd0aCkge1xcbiAgICAgIHZhciBjb250ZXh0TmFtZSA9IHZhbGlkQ29udGV4dE5hbWVzW25hbWVJbmRleF07XFxuXFxuICAgICAgdHJ5IHtcXG4gICAgICAgIGlmICh0aGlzLmNvbnRleHRPcHRpb25zKSB7XFxuICAgICAgICAgIGdsID0gY2FudmFzLmdldENvbnRleHQoY29udGV4dE5hbWUsIHRoaXMuY29udGV4dE9wdGlvbnMpO1xcbiAgICAgICAgfSBlbHNlIHtcXG4gICAgICAgICAgZ2wgPSBjYW52YXMuZ2V0Q29udGV4dChjb250ZXh0TmFtZSk7XFxuICAgICAgICB9O1xcbiAgICAgIH0gY2F0Y2ggKGUpIHtcXG4gICAgICAgIGdsID0gbnVsbDtcXG4gICAgICB9XFxuXFxuICAgICAgaWYgKCFnbCB8fCB0eXBlb2YgZ2wuZ2V0UGFyYW1ldGVyICE9PSAnZnVuY3Rpb24nKSB7XFxuICAgICAgICBnbCA9IG51bGw7XFxuICAgICAgfVxcblxcbiAgICAgICsrbmFtZUluZGV4O1xcbiAgICB9O1xcblxcbiAgICB0aGlzLmNvbnRleHRHTCA9IGdsO1xcbiAgfVxcblxcbiAgX2luaXRQcm9ncmFtKCkge1xcbiAgICB2YXIgZ2wgPSB0aGlzLmNvbnRleHRHTDtcXG5cXG4gICAgLy8gdmVydGV4IHNoYWRlciBpcyB0aGUgc2FtZSBmb3IgYWxsIHR5cGVzXFxuICAgIHZhciB2ZXJ0ZXhTaGFkZXJTY3JpcHQ7XFxuICAgIHZhciBmcmFnbWVudFNoYWRlclNjcmlwdDtcXG4gICAgaWYgKHRoaXMuY2hyb21hID09PSA0MjApIHtcXG4gICAgICB2ZXJ0ZXhTaGFkZXJTY3JpcHQgPSBbJ2F0dHJpYnV0ZSB2ZWM0IHZlcnRleFBvczsnLCAnYXR0cmlidXRlIHZlYzQgdGV4dHVyZVBvczsnLCAnYXR0cmlidXRlIHZlYzQgdVRleHR1cmVQb3M7JywgJ2F0dHJpYnV0ZSB2ZWM0IHZUZXh0dXJlUG9zOycsICd2YXJ5aW5nIHZlYzIgdGV4dHVyZUNvb3JkOycsICd2YXJ5aW5nIHZlYzIgdVRleHR1cmVDb29yZDsnLCAndmFyeWluZyB2ZWMyIHZUZXh0dXJlQ29vcmQ7JywgJ3ZvaWQgbWFpbigpJywgJ3snLCAnICBnbF9Qb3NpdGlvbiA9IHZlcnRleFBvczsnLCAnICB0ZXh0dXJlQ29vcmQgPSB0ZXh0dXJlUG9zLnh5OycsICcgIHVUZXh0dXJlQ29vcmQgPSB1VGV4dHVyZVBvcy54eTsnLCAnICB2VGV4dHVyZUNvb3JkID0gdlRleHR1cmVQb3MueHk7JywgJ30nXS5qb2luKCdcXFxcbicpO1xcblxcbiAgICAgIGZyYWdtZW50U2hhZGVyU2NyaXB0ID0gWydwcmVjaXNpb24gaGlnaHAgZmxvYXQ7JywgJ3ZhcnlpbmcgaGlnaHAgdmVjMiB0ZXh0dXJlQ29vcmQ7JywgJ3ZhcnlpbmcgaGlnaHAgdmVjMiB1VGV4dHVyZUNvb3JkOycsICd2YXJ5aW5nIGhpZ2hwIHZlYzIgdlRleHR1cmVDb29yZDsnLCAndW5pZm9ybSBzYW1wbGVyMkQgeVNhbXBsZXI7JywgJ3VuaWZvcm0gc2FtcGxlcjJEIHVTYW1wbGVyOycsICd1bmlmb3JtIHNhbXBsZXIyRCB2U2FtcGxlcjsnLCAndW5pZm9ybSBtYXQ0IFlVVjJSR0I7JywgJ3ZvaWQgbWFpbih2b2lkKSB7JywgJyAgaGlnaHAgZmxvYXQgeSA9IHRleHR1cmUyRCh5U2FtcGxlciwgIHRleHR1cmVDb29yZCkucjsnLCAnICBoaWdocCBmbG9hdCB1ID0gdGV4dHVyZTJEKHVTYW1wbGVyLCAgdVRleHR1cmVDb29yZCkucjsnLCAnICBoaWdocCBmbG9hdCB2ID0gdGV4dHVyZTJEKHZTYW1wbGVyLCAgdlRleHR1cmVDb29yZCkucjsnLCAnICBnbF9GcmFnQ29sb3IgPSB2ZWM0KHksIHUsIHYsIDEpICogWVVWMlJHQjsnLCAnfSddLmpvaW4oJ1xcXFxuJyk7XFxuICAgIH0gZWxzZSBpZiAodGhpcy5jaHJvbWEgPT09IDQyMikge1xcbiAgICAgIHZlcnRleFNoYWRlclNjcmlwdCA9IFsnYXR0cmlidXRlIHZlYzQgdmVydGV4UG9zOycsICdhdHRyaWJ1dGUgdmVjNCB0ZXh0dXJlUG9zOycsICd2YXJ5aW5nIHZlYzIgdGV4dHVyZUNvb3JkOycsICd2b2lkIG1haW4oKScsICd7JywgJyAgZ2xfUG9zaXRpb24gPSB2ZXJ0ZXhQb3M7JywgJyAgdGV4dHVyZUNvb3JkID0gdGV4dHVyZVBvcy54eTsnLCAnfSddLmpvaW4oJ1xcXFxuJyk7XFxuXFxuICAgICAgZnJhZ21lbnRTaGFkZXJTY3JpcHQgPSBbJ3ByZWNpc2lvbiBoaWdocCBmbG9hdDsnLCAndmFyeWluZyBoaWdocCB2ZWMyIHRleHR1cmVDb29yZDsnLCAndW5pZm9ybSBzYW1wbGVyMkQgc2FtcGxlcjsnLCAndW5pZm9ybSBoaWdocCB2ZWMyIHJlc29sdXRpb247JywgJ3VuaWZvcm0gbWF0NCBZVVYyUkdCOycsICd2b2lkIG1haW4odm9pZCkgeycsICcgIGhpZ2hwIGZsb2F0IHRleFBpeFggPSAxLjAgLyByZXNvbHV0aW9uLng7JywgJyAgaGlnaHAgZmxvYXQgbG9nUGl4WCA9IDIuMCAvIHJlc29sdXRpb24ueDsnLCAvLyBoYWxmIHRoZSByZXNvbHV0aW9uIG9mIHRoZSB0ZXh0dXJlXFxuICAgICAgJyAgaGlnaHAgZmxvYXQgbG9nSGFsZlBpeFggPSA0LjAgLyByZXNvbHV0aW9uLng7JywgLy8gaGFsZiBvZiB0aGUgbG9naWNhbCByZXNvbHV0aW9uIHNvIGV2ZXJ5IDR0aCBwaXhlbFxcbiAgICAgICcgIGhpZ2hwIGZsb2F0IHN0ZXBzID0gZmxvb3IodGV4dHVyZUNvb3JkLnggLyBsb2dQaXhYKTsnLCAnICBoaWdocCBmbG9hdCB1dlN0ZXBzID0gZmxvb3IodGV4dHVyZUNvb3JkLnggLyBsb2dIYWxmUGl4WCk7JywgJyAgaGlnaHAgZmxvYXQgeSA9IHRleHR1cmUyRChzYW1wbGVyLCB2ZWMyKChsb2dQaXhYICogc3RlcHMpICsgdGV4UGl4WCwgdGV4dHVyZUNvb3JkLnkpKS5yOycsICcgIGhpZ2hwIGZsb2F0IHUgPSB0ZXh0dXJlMkQoc2FtcGxlciwgdmVjMigobG9nSGFsZlBpeFggKiB1dlN0ZXBzKSwgdGV4dHVyZUNvb3JkLnkpKS5yOycsICcgIGhpZ2hwIGZsb2F0IHYgPSB0ZXh0dXJlMkQoc2FtcGxlciwgdmVjMigobG9nSGFsZlBpeFggKiB1dlN0ZXBzKSArIHRleFBpeFggKyB0ZXhQaXhYLCB0ZXh0dXJlQ29vcmQueSkpLnI7JyxcXG5cXG4gICAgICAvLyAnICBoaWdocCBmbG9hdCB5ID0gdGV4dHVyZTJEKHNhbXBsZXIsICB0ZXh0dXJlQ29vcmQpLnI7JyxcXG4gICAgICAvLyAnICBnbF9GcmFnQ29sb3IgPSB2ZWM0KHksIHUsIHYsIDEpICogWVVWMlJHQjsnLFxcbiAgICAgICcgIGdsX0ZyYWdDb2xvciA9IHZlYzQoeSwgdSwgdiwgMS4wKSAqIFlVVjJSR0I7JywgJ30nXS5qb2luKCdcXFxcbicpO1xcbiAgICB9O1xcblxcbiAgICB2YXIgWVVWMlJHQiA9IFsxLjE2NDM4LCAwLjAwMDAwLCAxLjU5NjAzLCAtMC44NzA3OSwgMS4xNjQzOCwgLTAuMzkxNzYsIC0wLjgxMjk3LCAwLjUyOTU5LCAxLjE2NDM4LCAyLjAxNzIzLCAwLjAwMDAwLCAtMS4wODEzOSwgMCwgMCwgMCwgMV07XFxuICAgIHZhciB2ZXJ0ZXhTaGFkZXIgPSBnbC5jcmVhdGVTaGFkZXIoZ2wuVkVSVEVYX1NIQURFUik7XFxuICAgIGdsLnNoYWRlclNvdXJjZSh2ZXJ0ZXhTaGFkZXIsIHZlcnRleFNoYWRlclNjcmlwdCk7XFxuICAgIGdsLmNvbXBpbGVTaGFkZXIodmVydGV4U2hhZGVyKTtcXG4gICAgaWYgKCFnbC5nZXRTaGFkZXJQYXJhbWV0ZXIodmVydGV4U2hhZGVyLCBnbC5DT01QSUxFX1NUQVRVUykpIHtcXG4gICAgICBjb25zb2xlLmxvZygnVmVydGV4IHNoYWRlciBmYWlsZWQgdG8gY29tcGlsZTogJyArIGdsLmdldFNoYWRlckluZm9Mb2codmVydGV4U2hhZGVyKSk7XFxuICAgIH1cXG5cXG4gICAgdmFyIGZyYWdtZW50U2hhZGVyID0gZ2wuY3JlYXRlU2hhZGVyKGdsLkZSQUdNRU5UX1NIQURFUik7XFxuICAgIGdsLnNoYWRlclNvdXJjZShmcmFnbWVudFNoYWRlciwgZnJhZ21lbnRTaGFkZXJTY3JpcHQpO1xcbiAgICBnbC5jb21waWxlU2hhZGVyKGZyYWdtZW50U2hhZGVyKTtcXG4gICAgaWYgKCFnbC5nZXRTaGFkZXJQYXJhbWV0ZXIoZnJhZ21lbnRTaGFkZXIsIGdsLkNPTVBJTEVfU1RBVFVTKSkge1xcbiAgICAgIGNvbnNvbGUubG9nKCdGcmFnbWVudCBzaGFkZXIgZmFpbGVkIHRvIGNvbXBpbGU6ICcgKyBnbC5nZXRTaGFkZXJJbmZvTG9nKGZyYWdtZW50U2hhZGVyKSk7XFxuICAgIH1cXG5cXG4gICAgdmFyIHByb2dyYW0gPSBnbC5jcmVhdGVQcm9ncmFtKCk7XFxuICAgIGdsLmF0dGFjaFNoYWRlcihwcm9ncmFtLCB2ZXJ0ZXhTaGFkZXIpO1xcbiAgICBnbC5hdHRhY2hTaGFkZXIocHJvZ3JhbSwgZnJhZ21lbnRTaGFkZXIpO1xcbiAgICBnbC5saW5rUHJvZ3JhbShwcm9ncmFtKTtcXG4gICAgaWYgKCFnbC5nZXRQcm9ncmFtUGFyYW1ldGVyKHByb2dyYW0sIGdsLkxJTktfU1RBVFVTKSkge1xcbiAgICAgIGNvbnNvbGUubG9nKCdQcm9ncmFtIGZhaWxlZCB0byBjb21waWxlOiAnICsgZ2wuZ2V0UHJvZ3JhbUluZm9Mb2cocHJvZ3JhbSkpO1xcbiAgICB9XFxuXFxuICAgIGdsLnVzZVByb2dyYW0ocHJvZ3JhbSk7XFxuXFxuICAgIHZhciBZVVYyUkdCUmVmID0gZ2wuZ2V0VW5pZm9ybUxvY2F0aW9uKHByb2dyYW0sICdZVVYyUkdCJyk7XFxuICAgIGdsLnVuaWZvcm1NYXRyaXg0ZnYoWVVWMlJHQlJlZiwgZmFsc2UsIFlVVjJSR0IpO1xcblxcbiAgICB0aGlzLnNoYWRlclByb2dyYW0gPSBwcm9ncmFtO1xcbiAgfVxcblxcbiAgX2luaXRCdWZmZXJzKCkge1xcbiAgICB2YXIgZ2wgPSB0aGlzLmNvbnRleHRHTDtcXG4gICAgdmFyIHByb2dyYW0gPSB0aGlzLnNoYWRlclByb2dyYW07XFxuXFxuICAgIHZhciB2ZXJ0ZXhQb3NCdWZmZXIgPSBnbC5jcmVhdGVCdWZmZXIoKTtcXG4gICAgZ2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZGRVIsIHZlcnRleFBvc0J1ZmZlcik7XFxuICAgIGdsLmJ1ZmZlckRhdGEoZ2wuQVJSQVlfQlVGRkVSLCBuZXcgRmxvYXQzMkFycmF5KFsxLCAxLCAtMSwgMSwgMSwgLTEsIC0xLCAtMV0pLCBnbC5TVEFUSUNfRFJBVyk7XFxuXFxuICAgIHZhciB2ZXJ0ZXhQb3NSZWYgPSBnbC5nZXRBdHRyaWJMb2NhdGlvbihwcm9ncmFtLCAndmVydGV4UG9zJyk7XFxuICAgIGdsLmVuYWJsZVZlcnRleEF0dHJpYkFycmF5KHZlcnRleFBvc1JlZik7XFxuICAgIGdsLnZlcnRleEF0dHJpYlBvaW50ZXIodmVydGV4UG9zUmVmLCAyLCBnbC5GTE9BVCwgZmFsc2UsIDAsIDApO1xcblxcbiAgICB2YXIgdGV4dHVyZVBvc0J1ZmZlciA9IGdsLmNyZWF0ZUJ1ZmZlcigpO1xcbiAgICBnbC5iaW5kQnVmZmVyKGdsLkFSUkFZX0JVRkZFUiwgdGV4dHVyZVBvc0J1ZmZlcik7XFxuICAgIGdsLmJ1ZmZlckRhdGEoZ2wuQVJSQVlfQlVGRkVSLCBuZXcgRmxvYXQzMkFycmF5KFsxLCAwLCAwLCAwLCAxLCAxLCAwLCAxXSksIGdsLlNUQVRJQ19EUkFXKTtcXG5cXG4gICAgdmFyIHRleHR1cmVQb3NSZWYgPSBnbC5nZXRBdHRyaWJMb2NhdGlvbihwcm9ncmFtLCAndGV4dHVyZVBvcycpO1xcbiAgICBnbC5lbmFibGVWZXJ0ZXhBdHRyaWJBcnJheSh0ZXh0dXJlUG9zUmVmKTtcXG4gICAgZ2wudmVydGV4QXR0cmliUG9pbnRlcih0ZXh0dXJlUG9zUmVmLCAyLCBnbC5GTE9BVCwgZmFsc2UsIDAsIDApO1xcblxcbiAgICB0aGlzLnRleHR1cmVQb3NCdWZmZXIgPSB0ZXh0dXJlUG9zQnVmZmVyO1xcblxcbiAgICBpZiAodGhpcy5jaHJvbWEgPT09IDQyMCkge1xcbiAgICAgIHZhciB1VGV4dHVyZVBvc0J1ZmZlciA9IGdsLmNyZWF0ZUJ1ZmZlcigpO1xcbiAgICAgIGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCB1VGV4dHVyZVBvc0J1ZmZlcik7XFxuICAgICAgZ2wuYnVmZmVyRGF0YShnbC5BUlJBWV9CVUZGRVIsIG5ldyBGbG9hdDMyQXJyYXkoWzEsIDAsIDAsIDAsIDEsIDEsIDAsIDFdKSwgZ2wuU1RBVElDX0RSQVcpO1xcblxcbiAgICAgIHZhciB1VGV4dHVyZVBvc1JlZiA9IGdsLmdldEF0dHJpYkxvY2F0aW9uKHByb2dyYW0sICd1VGV4dHVyZVBvcycpO1xcbiAgICAgIGdsLmVuYWJsZVZlcnRleEF0dHJpYkFycmF5KHVUZXh0dXJlUG9zUmVmKTtcXG4gICAgICBnbC52ZXJ0ZXhBdHRyaWJQb2ludGVyKHVUZXh0dXJlUG9zUmVmLCAyLCBnbC5GTE9BVCwgZmFsc2UsIDAsIDApO1xcblxcbiAgICAgIHRoaXMudVRleHR1cmVQb3NCdWZmZXIgPSB1VGV4dHVyZVBvc0J1ZmZlcjtcXG5cXG4gICAgICB2YXIgdlRleHR1cmVQb3NCdWZmZXIgPSBnbC5jcmVhdGVCdWZmZXIoKTtcXG4gICAgICBnbC5iaW5kQnVmZmVyKGdsLkFSUkFZX0JVRkZFUiwgdlRleHR1cmVQb3NCdWZmZXIpO1xcbiAgICAgIGdsLmJ1ZmZlckRhdGEoZ2wuQVJSQVlfQlVGRkVSLCBuZXcgRmxvYXQzMkFycmF5KFsxLCAwLCAwLCAwLCAxLCAxLCAwLCAxXSksIGdsLlNUQVRJQ19EUkFXKTtcXG5cXG4gICAgICB2YXIgdlRleHR1cmVQb3NSZWYgPSBnbC5nZXRBdHRyaWJMb2NhdGlvbihwcm9ncmFtLCAndlRleHR1cmVQb3MnKTtcXG4gICAgICBnbC5lbmFibGVWZXJ0ZXhBdHRyaWJBcnJheSh2VGV4dHVyZVBvc1JlZik7XFxuICAgICAgZ2wudmVydGV4QXR0cmliUG9pbnRlcih2VGV4dHVyZVBvc1JlZiwgMiwgZ2wuRkxPQVQsIGZhbHNlLCAwLCAwKTtcXG5cXG4gICAgICB0aGlzLnZUZXh0dXJlUG9zQnVmZmVyID0gdlRleHR1cmVQb3NCdWZmZXI7XFxuICAgIH07XFxuICB9XFxuXFxuICBfaW5pdFRleHR1cmVzKCkge1xcbiAgICB2YXIgZ2wgPSB0aGlzLmNvbnRleHRHTDtcXG4gICAgdmFyIHByb2dyYW0gPSB0aGlzLnNoYWRlclByb2dyYW07XFxuXFxuICAgIGlmICh0aGlzLmNocm9tYSA9PT0gNDIwKSB7XFxuICAgICAgdmFyIHlUZXh0dXJlUmVmID0gdGhpcy5faW5pdFRleHR1cmUoKTtcXG4gICAgICB2YXIgeVNhbXBsZXJSZWYgPSBnbC5nZXRVbmlmb3JtTG9jYXRpb24ocHJvZ3JhbSwgJ3lTYW1wbGVyJyk7XFxuICAgICAgZ2wudW5pZm9ybTFpKHlTYW1wbGVyUmVmLCAwKTtcXG4gICAgICB0aGlzLnlUZXh0dXJlUmVmID0geVRleHR1cmVSZWY7XFxuXFxuICAgICAgdmFyIHVUZXh0dXJlUmVmID0gdGhpcy5faW5pdFRleHR1cmUoKTtcXG4gICAgICB2YXIgdVNhbXBsZXJSZWYgPSBnbC5nZXRVbmlmb3JtTG9jYXRpb24ocHJvZ3JhbSwgJ3VTYW1wbGVyJyk7XFxuICAgICAgZ2wudW5pZm9ybTFpKHVTYW1wbGVyUmVmLCAxKTtcXG4gICAgICB0aGlzLnVUZXh0dXJlUmVmID0gdVRleHR1cmVSZWY7XFxuXFxuICAgICAgdmFyIHZUZXh0dXJlUmVmID0gdGhpcy5faW5pdFRleHR1cmUoKTtcXG4gICAgICB2YXIgdlNhbXBsZXJSZWYgPSBnbC5nZXRVbmlmb3JtTG9jYXRpb24ocHJvZ3JhbSwgJ3ZTYW1wbGVyJyk7XFxuICAgICAgZ2wudW5pZm9ybTFpKHZTYW1wbGVyUmVmLCAyKTtcXG4gICAgICB0aGlzLnZUZXh0dXJlUmVmID0gdlRleHR1cmVSZWY7XFxuICAgIH0gZWxzZSBpZiAodGhpcy5jaHJvbWEgPT09IDQyMikge1xcbiAgICAgIC8vIG9ubHkgb25lIHRleHR1cmUgZm9yIDQyMlxcbiAgICAgIHZhciB0ZXh0dXJlUmVmID0gdGhpcy5faW5pdFRleHR1cmUoKTtcXG4gICAgICB2YXIgc2FtcGxlclJlZiA9IGdsLmdldFVuaWZvcm1Mb2NhdGlvbihwcm9ncmFtLCAnc2FtcGxlcicpO1xcbiAgICAgIGdsLnVuaWZvcm0xaShzYW1wbGVyUmVmLCAwKTtcXG4gICAgICB0aGlzLnRleHR1cmVSZWYgPSB0ZXh0dXJlUmVmO1xcbiAgICB9O1xcbiAgfVxcblxcbiAgX2luaXRUZXh0dXJlKCkge1xcbiAgICB2YXIgZ2wgPSB0aGlzLmNvbnRleHRHTDtcXG5cXG4gICAgdmFyIHRleHR1cmVSZWYgPSBnbC5jcmVhdGVUZXh0dXJlKCk7XFxuICAgIGdsLmJpbmRUZXh0dXJlKGdsLlRFWFRVUkVfMkQsIHRleHR1cmVSZWYpO1xcbiAgICBnbC50ZXhQYXJhbWV0ZXJpKGdsLlRFWFRVUkVfMkQsIGdsLlRFWFRVUkVfTUFHX0ZJTFRFUiwgZ2wuTkVBUkVTVCk7XFxuICAgIGdsLnRleFBhcmFtZXRlcmkoZ2wuVEVYVFVSRV8yRCwgZ2wuVEVYVFVSRV9NSU5fRklMVEVSLCBnbC5ORUFSRVNUKTtcXG4gICAgZ2wudGV4UGFyYW1ldGVyaShnbC5URVhUVVJFXzJELCBnbC5URVhUVVJFX1dSQVBfUywgZ2wuQ0xBTVBfVE9fRURHRSk7XFxuICAgIGdsLnRleFBhcmFtZXRlcmkoZ2wuVEVYVFVSRV8yRCwgZ2wuVEVYVFVSRV9XUkFQX1QsIGdsLkNMQU1QX1RPX0VER0UpO1xcbiAgICBnbC5iaW5kVGV4dHVyZShnbC5URVhUVVJFXzJELCBudWxsKTtcXG5cXG4gICAgcmV0dXJuIHRleHR1cmVSZWY7XFxuICB9XFxuXFxuICBfZHJhd1BpY3R1cmVHTChkYXRhLCB3aWR0aCwgaGVpZ2h0KSB7XFxuICAgIGlmICh0aGlzLmNocm9tYSA9PT0gNDIwKSB7XFxuICAgICAgbGV0IG5XaWR0aCA9IHdpZHRoO1xcbiAgICAgIHZhciB5bGVuID0gd2lkdGggKiBoZWlnaHQ7XFxuICAgICAgdmFyIHV2bGVuID0gd2lkdGggLyAyICogKGhlaWdodCAvIDIpO1xcbiAgICAgIGRhdGEgPSBuZXcgVWludDhBcnJheShkYXRhKTtcXG4gICAgICBsZXQgcmVuZGVyRGF0YSA9IHtcXG4gICAgICAgIHlEYXRhOiBkYXRhLnN1YmFycmF5KDAsIHlsZW4pLFxcbiAgICAgICAgdURhdGE6IGRhdGEuc3ViYXJyYXkoeWxlbiwgeWxlbiArIHV2bGVuKSxcXG4gICAgICAgIHZEYXRhOiBkYXRhLnN1YmFycmF5KHlsZW4gKyB1dmxlbiwgeWxlbiArIHV2bGVuICsgdXZsZW4pXFxuICAgICAgfTtcXG4gICAgICBpZiAod2lkdGggJSA0ID4gMCkge1xcbiAgICAgICAgbldpZHRoID0gd2lkdGggKyA0IC0gd2lkdGggJSA0O1xcbiAgICAgICAgbGV0IHlBcnJheSA9IG5ldyBVaW50OEFycmF5KG5XaWR0aCAqIGhlaWdodCk7XFxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGhlaWdodDsgaSsrKSB7XFxuICAgICAgICAgIHlBcnJheS5zZXQocmVuZGVyRGF0YS55RGF0YS5zdWJhcnJheShpICogd2lkdGgsIChpICsgMSkgKiB3aWR0aCksIGkgKiBuV2lkdGgpO1xcbiAgICAgICAgfVxcbiAgICAgICAgcmVuZGVyRGF0YS55RGF0YSA9IHlBcnJheTtcXG4gICAgICB9XFxuXFxuICAgICAgaWYgKHdpZHRoIC8gMiAlIDQgPiAwKSB7XFxuICAgICAgICBuV2lkdGggPSB3aWR0aCAvIDIgKyA0IC0gd2lkdGggLyAyICUgNDtcXG4gICAgICAgIGxldCB1QXJyYXkgPSBuZXcgVWludDhBcnJheShuV2lkdGggKiBoZWlnaHQgLyAyKTtcXG4gICAgICAgIGxldCB2QXJyYXkgPSBuZXcgVWludDhBcnJheShuV2lkdGggKiBoZWlnaHQgLyAyKTtcXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaGVpZ2h0IC8gMjsgaSsrKSB7XFxuICAgICAgICAgIHVBcnJheS5zZXQocmVuZGVyRGF0YS51RGF0YS5zdWJhcnJheShpICogd2lkdGggLyAyLCAoaSArIDEpICogd2lkdGggLyAyKSwgaSAqIG5XaWR0aCk7XFxuICAgICAgICAgIHZBcnJheS5zZXQocmVuZGVyRGF0YS52RGF0YS5zdWJhcnJheShpICogd2lkdGggLyAyLCAoaSArIDEpICogd2lkdGggLyAyKSwgaSAqIG5XaWR0aCk7XFxuICAgICAgICB9XFxuICAgICAgICByZW5kZXJEYXRhLnVEYXRhID0gdUFycmF5O1xcbiAgICAgICAgcmVuZGVyRGF0YS52RGF0YSA9IHZBcnJheTtcXG4gICAgICB9XFxuICAgICAgdGhpcy5fZHJhd1BpY3R1cmVHTDQyMChyZW5kZXJEYXRhLCB3aWR0aCwgaGVpZ2h0KTtcXG4gICAgfSBlbHNlIGlmICh0aGlzLmNocm9tYSA9PT0gNDIyKSB7XFxuICAgICAgZGF0YSA9IG5ldyBVaW50OEFycmF5KGRhdGEpO1xcbiAgICAgIHRoaXMuX2RyYXdQaWN0dXJlR0w0MjIod2lkdGgsIGhlaWdodCwgZGF0YSk7XFxuICAgIH1cXG4gIH1cXG5cXG4gIF9kcmF3UGljdHVyZUdMNDIyKGRhdGEsIHdpZHRoLCBoZWlnaHQpIHtcXG4gICAgdmFyIGdsID0gdGhpcy5jb250ZXh0R0w7XFxuICAgIHZhciB0ZXh0dXJlUG9zQnVmZmVyID0gdGhpcy50ZXh0dXJlUG9zQnVmZmVyO1xcblxcbiAgICB2YXIgdGV4dHVyZVJlZiA9IHRoaXMudGV4dHVyZVJlZjtcXG5cXG4gICAgdmFyIGRhdGFQZXJSb3cgPSB3aWR0aCAqIDI7XFxuICAgIHZhciByb3dDbnQgPSBoZWlnaHQ7XFxuXFxuICAgIGdsLnZpZXdwb3J0KDAsIDAsIHdpZHRoLCBoZWlnaHQpO1xcblxcbiAgICB2YXIgdFRvcCA9IDA7XFxuICAgIHZhciB0TGVmdCA9IDA7XFxuICAgIHZhciB0Qm90dG9tID0gaGVpZ2h0IC8gcm93Q250O1xcbiAgICB2YXIgdFJpZ2h0ID0gd2lkdGggLyAoZGF0YVBlclJvdyAvIDIpO1xcbiAgICB2YXIgdGV4dHVyZVBvc1ZhbHVlcyA9IG5ldyBGbG9hdDMyQXJyYXkoW3RSaWdodCwgdFRvcCwgdExlZnQsIHRUb3AsIHRSaWdodCwgdEJvdHRvbSwgdExlZnQsIHRCb3R0b21dKTtcXG5cXG4gICAgZ2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZGRVIsIHRleHR1cmVQb3NCdWZmZXIpO1xcbiAgICBnbC5idWZmZXJEYXRhKGdsLkFSUkFZX0JVRkZFUiwgdGV4dHVyZVBvc1ZhbHVlcywgZ2wuRFlOQU1JQ19EUkFXKTtcXG5cXG4gICAgZ2wudW5pZm9ybTJmKGdsLmdldFVuaWZvcm1Mb2NhdGlvbih0aGlzLnNoYWRlclByb2dyYW0sICdyZXNvbHV0aW9uJyksIGRhdGFQZXJSb3csIGhlaWdodCk7XFxuXFxuICAgIGdsLmFjdGl2ZVRleHR1cmUoZ2wuVEVYVFVSRTApO1xcbiAgICBnbC5iaW5kVGV4dHVyZShnbC5URVhUVVJFXzJELCB0ZXh0dXJlUmVmKTtcXG4gICAgZ2wudGV4SW1hZ2UyRChnbC5URVhUVVJFXzJELCAwLCBnbC5MVU1JTkFOQ0UsIGRhdGFQZXJSb3csIHJvd0NudCwgMCwgZ2wuTFVNSU5BTkNFLCBnbC5VTlNJR05FRF9CWVRFLCBkYXRhKTtcXG5cXG4gICAgZ2wuZHJhd0FycmF5cyhnbC5UUklBTkdMRV9TVFJJUCwgMCwgNCk7XFxuICB9XFxuXFxuICBfZHJhd1BpY3R1cmVHTDQyMChkYXRhLCB3aWR0aCwgaGVpZ2h0KSB7XFxuICAgIHZhciBnbCA9IHRoaXMuY29udGV4dEdMO1xcbiAgICB2YXIgdGV4dHVyZVBvc0J1ZmZlciA9IHRoaXMudGV4dHVyZVBvc0J1ZmZlcjtcXG4gICAgdmFyIHVUZXh0dXJlUG9zQnVmZmVyID0gdGhpcy51VGV4dHVyZVBvc0J1ZmZlcjtcXG4gICAgdmFyIHZUZXh0dXJlUG9zQnVmZmVyID0gdGhpcy52VGV4dHVyZVBvc0J1ZmZlcjtcXG5cXG4gICAgdmFyIHlUZXh0dXJlUmVmID0gdGhpcy55VGV4dHVyZVJlZjtcXG4gICAgdmFyIHVUZXh0dXJlUmVmID0gdGhpcy51VGV4dHVyZVJlZjtcXG4gICAgdmFyIHZUZXh0dXJlUmVmID0gdGhpcy52VGV4dHVyZVJlZjtcXG5cXG4gICAgdmFyIHlEYXRhID0gZGF0YS55RGF0YTtcXG4gICAgdmFyIHVEYXRhID0gZGF0YS51RGF0YTtcXG4gICAgdmFyIHZEYXRhID0gZGF0YS52RGF0YTtcXG5cXG4gICAgdmFyIHlEYXRhUGVyUm93ID0gd2lkdGg7XFxuICAgIHZhciB5Um93Q250ID0gaGVpZ2h0O1xcblxcbiAgICB2YXIgdURhdGFQZXJSb3cgPSB3aWR0aCAvIDI7XFxuICAgIHZhciB1Um93Q250ID0gaGVpZ2h0IC8gMjtcXG5cXG4gICAgdmFyIHZEYXRhUGVyUm93ID0gdURhdGFQZXJSb3c7XFxuICAgIHZhciB2Um93Q250ID0gdVJvd0NudDtcXG4gICAgZ2wudmlld3BvcnQoMCwgMCwgdGhpcy53aWR0aCwgdGhpcy5oZWlnaHQpO1xcblxcbiAgICB2YXIgdFRvcCA9IDA7XFxuICAgIHZhciB0TGVmdCA9IDA7XFxuICAgIHZhciB0Qm90dG9tID0gaGVpZ2h0IC8geVJvd0NudDtcXG4gICAgdmFyIHRSaWdodCA9IHdpZHRoIC8geURhdGFQZXJSb3c7XFxuICAgIHZhciB0ZXh0dXJlUG9zVmFsdWVzID0gbmV3IEZsb2F0MzJBcnJheShbdFJpZ2h0LCB0VG9wLCB0TGVmdCwgdFRvcCwgdFJpZ2h0LCB0Qm90dG9tLCB0TGVmdCwgdEJvdHRvbV0pO1xcblxcbiAgICBnbC5iaW5kQnVmZmVyKGdsLkFSUkFZX0JVRkZFUiwgdGV4dHVyZVBvc0J1ZmZlcik7XFxuICAgIGdsLmJ1ZmZlckRhdGEoZ2wuQVJSQVlfQlVGRkVSLCB0ZXh0dXJlUG9zVmFsdWVzLCBnbC5EWU5BTUlDX0RSQVcpO1xcblxcbiAgICB0Qm90dG9tID0gaGVpZ2h0IC8gMiAvIHVSb3dDbnQ7XFxuICAgIHRSaWdodCA9IHdpZHRoIC8gMiAvIHVEYXRhUGVyUm93O1xcbiAgICB2YXIgdVRleHR1cmVQb3NWYWx1ZXMgPSBuZXcgRmxvYXQzMkFycmF5KFt0UmlnaHQsIHRUb3AsIHRMZWZ0LCB0VG9wLCB0UmlnaHQsIHRCb3R0b20sIHRMZWZ0LCB0Qm90dG9tXSk7XFxuXFxuICAgIGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCB1VGV4dHVyZVBvc0J1ZmZlcik7XFxuICAgIGdsLmJ1ZmZlckRhdGEoZ2wuQVJSQVlfQlVGRkVSLCB1VGV4dHVyZVBvc1ZhbHVlcywgZ2wuRFlOQU1JQ19EUkFXKTtcXG5cXG4gICAgdEJvdHRvbSA9IGhlaWdodCAvIDIgLyB2Um93Q250O1xcbiAgICB0UmlnaHQgPSB3aWR0aCAvIDIgLyB2RGF0YVBlclJvdztcXG5cXG4gICAgdmFyIHZUZXh0dXJlUG9zVmFsdWVzID0gbmV3IEZsb2F0MzJBcnJheShbdFJpZ2h0LCB0VG9wLCB0TGVmdCwgdFRvcCwgdFJpZ2h0LCB0Qm90dG9tLCB0TGVmdCwgdEJvdHRvbV0pO1xcblxcbiAgICBnbC5iaW5kQnVmZmVyKGdsLkFSUkFZX0JVRkZFUiwgdlRleHR1cmVQb3NCdWZmZXIpO1xcbiAgICBnbC5idWZmZXJEYXRhKGdsLkFSUkFZX0JVRkZFUiwgdlRleHR1cmVQb3NWYWx1ZXMsIGdsLkRZTkFNSUNfRFJBVyk7XFxuXFxuICAgIGdsLmFjdGl2ZVRleHR1cmUoZ2wuVEVYVFVSRTApO1xcbiAgICBnbC5iaW5kVGV4dHVyZShnbC5URVhUVVJFXzJELCB5VGV4dHVyZVJlZik7XFxuICAgIGdsLnRleEltYWdlMkQoZ2wuVEVYVFVSRV8yRCwgMCwgZ2wuTFVNSU5BTkNFLCB5RGF0YVBlclJvdywgeVJvd0NudCwgMCwgZ2wuTFVNSU5BTkNFLCBnbC5VTlNJR05FRF9CWVRFLCB5RGF0YSk7XFxuXFxuICAgIGdsLmFjdGl2ZVRleHR1cmUoZ2wuVEVYVFVSRTEpO1xcbiAgICBnbC5iaW5kVGV4dHVyZShnbC5URVhUVVJFXzJELCB1VGV4dHVyZVJlZik7XFxuICAgIGdsLnRleEltYWdlMkQoZ2wuVEVYVFVSRV8yRCwgMCwgZ2wuTFVNSU5BTkNFLCB1RGF0YVBlclJvdywgdVJvd0NudCwgMCwgZ2wuTFVNSU5BTkNFLCBnbC5VTlNJR05FRF9CWVRFLCB1RGF0YSk7XFxuXFxuICAgIGdsLmFjdGl2ZVRleHR1cmUoZ2wuVEVYVFVSRTIpO1xcbiAgICBnbC5iaW5kVGV4dHVyZShnbC5URVhUVVJFXzJELCB2VGV4dHVyZVJlZik7XFxuICAgIGdsLnRleEltYWdlMkQoZ2wuVEVYVFVSRV8yRCwgMCwgZ2wuTFVNSU5BTkNFLCB2RGF0YVBlclJvdywgdlJvd0NudCwgMCwgZ2wuTFVNSU5BTkNFLCBnbC5VTlNJR05FRF9CWVRFLCB2RGF0YSk7XFxuXFxuICAgIGdsLmRyYXdBcnJheXMoZ2wuVFJJQU5HTEVfU1RSSVAsIDAsIDQpO1xcbiAgfVxcblxcbiAgX2RyYXdQaWN0dXJlUkdCKGRhdGEpIHt9XFxuXFxuICByZW5kZXIoZGF0YSwgd2lkdGgsIGhlaWdodCkge1xcbiAgICB2YXIgZ2wgPSB0aGlzLmNvbnRleHRHTDtcXG4gICAgaWYgKGdsKSB7XFxuICAgICAgdGhpcy5fZHJhd1BpY3R1cmVHTChkYXRhLCB3aWR0aCwgaGVpZ2h0KTtcXG4gICAgfSBlbHNlIHtcXG4gICAgICB0aGlzLl9kcmF3UGljdHVyZVJHQihkYXRhKTtcXG4gICAgfVxcbiAgfVxcbn1cXG5cXG5leHBvcnRzLmRlZmF1bHQgPSBZVVZDYW52YXM7XFxuXFxuLy8jIHNvdXJjZVVSTD13ZWJwYWNrOi8veGdwbGF5ZXItZmx2Ly4uL3hncGxheWVyLXV0aWxzL3NyYy9tb2JpbGUveXV2LWNhbnZhcy5qcz9cIil9LFwiLi4veGdwbGF5ZXItdXRpbHMvc3JjL21vZGVscy9tZWRpYS1pbmZvLmpzXCI6XG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuLi94Z3BsYXllci11dGlscy9zcmMvbW9kZWxzL21lZGlhLWluZm8uanMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIG5vIHN0YXRpYyBleHBvcnRzIGZvdW5kICovZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7XCJ1c2Ugc3RyaWN0XCI7ZXZhbCgnXFxuXFxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XFxuICB2YWx1ZTogdHJ1ZVxcbn0pO1xcbmNvbnN0IGlzT2JqZWN0RmlsbGVkID0gb2JqID0+IHtcXG4gIGZvciAobGV0IGtleSBpbiBvYmopIHtcXG4gICAgaWYgKG9iai5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XFxuICAgICAgaWYgKG9ialtrZXldID09PSBudWxsKSB7XFxuICAgICAgICByZXR1cm4gZmFsc2U7XFxuICAgICAgfVxcbiAgICB9XFxuICB9XFxuICByZXR1cm4gdHJ1ZTtcXG59O1xcblxcbmNsYXNzIE1lZGlhSW5mbyB7XFxuICBjb25zdHJ1Y3RvcigpIHtcXG4gICAgdGhpcy5taW1lVHlwZSA9IG51bGw7XFxuICAgIHRoaXMuZHVyYXRpb24gPSBudWxsO1xcblxcbiAgICB0aGlzLmhhc1ZpZGVvID0gbnVsbDtcXG4gICAgdGhpcy52aWRlbyA9IHtcXG4gICAgICBjb2RlYzogbnVsbCxcXG4gICAgICB3aWR0aDogbnVsbCxcXG4gICAgICBoZWlnaHQ6IG51bGwsXFxuICAgICAgcHJvZmlsZTogbnVsbCxcXG4gICAgICBsZXZlbDogbnVsbCxcXG4gICAgICBmcmFtZVJhdGU6IHtcXG4gICAgICAgIGZpeGVkOiB0cnVlLFxcbiAgICAgICAgZnBzOiAyNSxcXG4gICAgICAgIGZwc19udW06IDI1MDAwLFxcbiAgICAgICAgZnBzX2RlbjogMTAwMFxcbiAgICAgIH0sXFxuICAgICAgY2hyb21hRm9ybWF0OiBudWxsLFxcbiAgICAgIHBhclJhdGlvOiB7XFxuICAgICAgICB3aWR0aDogMSxcXG4gICAgICAgIGhlaWdodDogMVxcbiAgICAgIH1cXG4gICAgfTtcXG5cXG4gICAgdGhpcy5oYXNBdWRpbyA9IG51bGw7XFxuXFxuICAgIHRoaXMuYXVkaW8gPSB7XFxuICAgICAgY29kZWM6IG51bGwsXFxuICAgICAgc2FtcGxlUmF0ZTogbnVsbCxcXG4gICAgICBzYW1wbGVSYXRlSW5kZXg6IG51bGwsXFxuICAgICAgY2hhbm5lbENvdW50OiBudWxsXFxuICAgIH07XFxuICB9XFxuXFxuICBpc0NvbXBsZXRlKCkge1xcbiAgICByZXR1cm4gTWVkaWFJbmZvLmlzQmFzZUluZm9SZWFkeSh0aGlzKSAmJiBNZWRpYUluZm8uaXNWaWRlb1JlYWR5KHRoaXMpICYmIE1lZGlhSW5mby5pc0F1ZGlvUmVhZHkodGhpcyk7XFxuICB9XFxuXFxuICBzdGF0aWMgaXNCYXNlSW5mb1JlYWR5KG1lZGlhSW5mbykge1xcbiAgICByZXR1cm4gaXNPYmplY3RGaWxsZWQobWVkaWFJbmZvKTtcXG4gIH1cXG5cXG4gIHN0YXRpYyBpc1ZpZGVvUmVhZHkobWVkaWFJbmZvKSB7XFxuICAgIGlmICghbWVkaWFJbmZvLmhhc1ZpZGVvKSB7XFxuICAgICAgcmV0dXJuIHRydWU7XFxuICAgIH1cXG5cXG4gICAgcmV0dXJuIGlzT2JqZWN0RmlsbGVkKG1lZGlhSW5mby52aWRlbyk7XFxuICB9XFxuXFxuICBzdGF0aWMgaXNBdWRpb1JlYWR5KG1lZGlhSW5mbykge1xcbiAgICBpZiAoIW1lZGlhSW5mby5oYXNBdWRpbykge1xcbiAgICAgIHJldHVybiB0cnVlO1xcbiAgICB9XFxuXFxuICAgIHJldHVybiBpc09iamVjdEZpbGxlZChtZWRpYUluZm8udmlkZW8pO1xcbiAgfVxcbn1cXG5leHBvcnRzLmRlZmF1bHQgPSBNZWRpYUluZm87XFxuXFxuLy8jIHNvdXJjZVVSTD13ZWJwYWNrOi8veGdwbGF5ZXItZmx2Ly4uL3hncGxheWVyLXV0aWxzL3NyYy9tb2RlbHMvbWVkaWEtaW5mby5qcz8nKX0sXCIuLi94Z3BsYXllci11dGlscy9zcmMvbW9kZWxzL21lZGlhLXNhbXBsZS5qc1wiOlxuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuLi94Z3BsYXllci11dGlscy9zcmMvbW9kZWxzL21lZGlhLXNhbXBsZS5qcyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBubyBzdGF0aWMgZXhwb3J0cyBmb3VuZCAqL2Z1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pe1widXNlIHN0cmljdFwiO2V2YWwoXCJcXG5cXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXFxcIl9fZXNNb2R1bGVcXFwiLCB7XFxuICB2YWx1ZTogdHJ1ZVxcbn0pO1xcbmNsYXNzIE1lZGlhU2FtcGxlIHtcXG4gIGNvbnN0cnVjdG9yKGluZm8pIHtcXG4gICAgbGV0IF9kZWZhdWx0ID0gTWVkaWFTYW1wbGUuZ2V0RGVmYXVsdEluZigpO1xcblxcbiAgICBpZiAoIWluZm8gfHwgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGluZm8pICE9PSAnW29iamVjdCBPYmplY3RdJykge1xcbiAgICAgIHJldHVybiBfZGVmYXVsdDtcXG4gICAgfVxcbiAgICBsZXQgc2FtcGxlID0gT2JqZWN0LmFzc2lnbih7fSwgX2RlZmF1bHQsIGluZm8pO1xcblxcbiAgICBPYmplY3QuZW50cmllcyhzYW1wbGUpLmZvckVhY2goKFtrLCB2XSkgPT4ge1xcbiAgICAgIHRoaXNba10gPSB2O1xcbiAgICB9KTtcXG4gIH1cXG5cXG4gIHN0YXRpYyBnZXREZWZhdWx0SW5mKCkge1xcbiAgICByZXR1cm4ge1xcbiAgICAgIGR0czogbnVsbCxcXG4gICAgICBwdHM6IG51bGwsXFxuICAgICAgZHVyYXRpb246IG51bGwsXFxuICAgICAgcG9zaXRpb246IG51bGwsXFxuICAgICAgaXNSQVA6IGZhbHNlLCAvLyBpcyBSYW5kb20gYWNjZXNzIHBvaW50XFxuICAgICAgb3JpZ2luRHRzOiBudWxsXFxuICAgIH07XFxuICB9XFxufVxcbmV4cG9ydHMuZGVmYXVsdCA9IE1lZGlhU2FtcGxlO1xcblxcbi8vIyBzb3VyY2VVUkw9d2VicGFjazovL3hncGxheWVyLWZsdi8uLi94Z3BsYXllci11dGlscy9zcmMvbW9kZWxzL21lZGlhLXNhbXBsZS5qcz9cIil9LFwiLi4veGdwbGF5ZXItdXRpbHMvc3JjL21vZGVscy9tZWRpYS1zZWdtZW50LWxpc3QuanNcIjpcbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi4veGdwbGF5ZXItdXRpbHMvc3JjL21vZGVscy9tZWRpYS1zZWdtZW50LWxpc3QuanMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgbm8gc3RhdGljIGV4cG9ydHMgZm91bmQgKi9mdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXtcInVzZSBzdHJpY3RcIjtldmFsKCdcXG5cXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcXG4gICAgdmFsdWU6IHRydWVcXG59KTtcXG5jbGFzcyBNZWRpYVNlZ21lbnRMaXN0IHtcXG5cXG4gICAgY29uc3RydWN0b3IodHlwZSkge1xcbiAgICAgICAgdGhpcy5fdHlwZSA9IHR5cGU7XFxuICAgICAgICB0aGlzLl9saXN0ID0gW107XFxuICAgICAgICB0aGlzLl9sYXN0QXBwZW5kTG9jYXRpb24gPSAtMTsgLy8gY2FjaGVkIGxhc3QgaW5zZXJ0IGxvY2F0aW9uXFxuICAgIH1cXG5cXG4gICAgZ2V0IHR5cGUoKSB7XFxuICAgICAgICByZXR1cm4gdGhpcy5fdHlwZTtcXG4gICAgfVxcblxcbiAgICBnZXQgbGVuZ3RoKCkge1xcbiAgICAgICAgcmV0dXJuIHRoaXMuX2xpc3QubGVuZ3RoO1xcbiAgICB9XFxuXFxuICAgIGlzRW1wdHkoKSB7XFxuICAgICAgICByZXR1cm4gdGhpcy5fbGlzdC5sZW5ndGggPT09IDA7XFxuICAgIH1cXG5cXG4gICAgY2xlYXIoKSB7XFxuICAgICAgICB0aGlzLl9saXN0ID0gW107XFxuICAgICAgICB0aGlzLl9sYXN0QXBwZW5kTG9jYXRpb24gPSAtMTtcXG4gICAgfVxcblxcbiAgICBfc2VhcmNoTmVhcmVzdFNlZ21lbnRCZWZvcmUoYmVnaW5EdHMpIHtcXG4gICAgICAgIGxldCBsaXN0ID0gdGhpcy5fbGlzdDtcXG4gICAgICAgIGlmIChsaXN0Lmxlbmd0aCA9PT0gMCkge1xcbiAgICAgICAgICAgIHJldHVybiAtMjtcXG4gICAgICAgIH1cXG4gICAgICAgIGxldCBsYXN0ID0gbGlzdC5sZW5ndGggLSAxO1xcbiAgICAgICAgbGV0IG1pZCA9IDA7XFxuICAgICAgICBsZXQgbGJvdW5kID0gMDtcXG4gICAgICAgIGxldCB1Ym91bmQgPSBsYXN0O1xcblxcbiAgICAgICAgbGV0IGlkeCA9IDA7XFxuXFxuICAgICAgICBpZiAoYmVnaW5EdHMgPCBsaXN0WzBdLm9yaWdpbkR0cykge1xcbiAgICAgICAgICAgIGlkeCA9IC0xO1xcbiAgICAgICAgICAgIHJldHVybiBpZHg7XFxuICAgICAgICB9XFxuXFxuICAgICAgICB3aGlsZSAobGJvdW5kIDw9IHVib3VuZCkge1xcbiAgICAgICAgICAgIG1pZCA9IGxib3VuZCArIE1hdGguZmxvb3IoKHVib3VuZCAtIGxib3VuZCkgLyAyKTtcXG4gICAgICAgICAgICBpZiAobWlkID09PSBsYXN0IHx8IGJlZ2luRHRzID4gbGlzdFttaWRdLmxhc3RTYW1wbGUub3JpZ2luRHRzICYmIGJlZ2luRHRzIDwgbGlzdFttaWQgKyAxXS5vcmlnaW5EdHMpIHtcXG4gICAgICAgICAgICAgICAgaWR4ID0gbWlkO1xcbiAgICAgICAgICAgICAgICBicmVhaztcXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGxpc3RbbWlkXS5vcmlnaW5EdHMgPCBiZWdpbkR0cykge1xcbiAgICAgICAgICAgICAgICBsYm91bmQgPSBtaWQgKyAxO1xcbiAgICAgICAgICAgIH0gZWxzZSB7XFxuICAgICAgICAgICAgICAgIHVib3VuZCA9IG1pZCAtIDE7XFxuICAgICAgICAgICAgfVxcbiAgICAgICAgfVxcbiAgICAgICAgcmV0dXJuIGlkeDtcXG4gICAgfVxcblxcbiAgICBfc2VhcmNoTmVhcmVzdFNlZ21lbnRBZnRlcihiZWdpbkR0cykge1xcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NlYXJjaE5lYXJlc3RTZWdtZW50QmVmb3JlKGJlZ2luRHRzKSArIDE7XFxuICAgIH1cXG5cXG4gICAgYXBwZW5kKHNlZ21lbnQpIHtcXG4gICAgICAgIGxldCBsaXN0ID0gdGhpcy5fbGlzdDtcXG4gICAgICAgIGxldCBsYXN0QXBwZW5kSWR4ID0gdGhpcy5fbGFzdEFwcGVuZExvY2F0aW9uO1xcbiAgICAgICAgbGV0IGluc2VydElkeCA9IDA7XFxuXFxuICAgICAgICBpZiAobGFzdEFwcGVuZElkeCAhPT0gLTEgJiYgbGFzdEFwcGVuZElkeCA8IGxpc3QubGVuZ3RoICYmIHNlZ21lbnQub3JpZ2luU3RhcnREdHMgPj0gbGlzdFtsYXN0QXBwZW5kSWR4XS5sYXN0U2FtcGxlLm9yaWdpbkR0cyAmJiAobGFzdEFwcGVuZElkeCA9PT0gbGlzdC5sZW5ndGggLSAxIHx8IGxhc3RBcHBlbmRJZHggPCBsaXN0Lmxlbmd0aCAtIDEgJiYgc2VnbWVudC5vcmlnaW5TdGFydER0cyA8IGxpc3RbbGFzdEFwcGVuZElkeCArIDFdLm9yaWdpblN0YXJ0RHRzKSkge1xcbiAgICAgICAgICAgIGluc2VydElkeCA9IGxhc3RBcHBlbmRJZHggKyAxOyAvLyB1c2UgY2FjaGVkIGxvY2F0aW9uIGlkeFxcbiAgICAgICAgfSBlbHNlIHtcXG4gICAgICAgICAgICBpZiAobGlzdC5sZW5ndGggPiAwKSB7XFxuICAgICAgICAgICAgICAgIGluc2VydElkeCA9IHRoaXMuX3NlYXJjaE5lYXJlc3RTZWdtZW50QmVmb3JlKHNlZ21lbnQub3JpZ2luU3RhcnREdHMpICsgMTtcXG4gICAgICAgICAgICB9XFxuICAgICAgICB9XFxuXFxuICAgICAgICB0aGlzLl9sYXN0QXBwZW5kTG9jYXRpb24gPSBpbnNlcnRJZHg7XFxuICAgICAgICB0aGlzLl9saXN0LnNwbGljZShpbnNlcnRJZHgsIDAsIHNlZ21lbnQpO1xcbiAgICB9XFxuXFxuICAgIGdldExhc3RTZWdtZW50QmVmb3JlKGJlZ2luRHRzKSB7XFxuICAgICAgICBsZXQgaWR4ID0gdGhpcy5fc2VhcmNoTmVhcmVzdFNlZ21lbnRCZWZvcmUoYmVnaW5EdHMpO1xcbiAgICAgICAgaWYgKGlkeCA+PSAwKSB7XFxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2xpc3RbaWR4XTtcXG4gICAgICAgIH0gZWxzZSB7XFxuICAgICAgICAgICAgLy8gLTFcXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcXG4gICAgICAgIH1cXG4gICAgfVxcblxcbiAgICBnZXRMYXN0U2FtcGxlQmVmb3JlKGJlZ2luRHRzKSB7XFxuICAgICAgICBsZXQgc2VnbWVudCA9IHRoaXMuZ2V0TGFzdFNlZ21lbnRCZWZvcmUoYmVnaW5EdHMpO1xcbiAgICAgICAgaWYgKHNlZ21lbnQgIT09IG51bGwpIHtcXG4gICAgICAgICAgICByZXR1cm4gc2VnbWVudC5sYXN0U2FtcGxlO1xcbiAgICAgICAgfSBlbHNlIHtcXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcXG4gICAgICAgIH1cXG4gICAgfVxcblxcbiAgICBnZXRMYXN0UkFQQmVmb3JlKGJlZ2luRHRzKSB7XFxuICAgICAgICBsZXQgc2VnbWVudElkeCA9IHRoaXMuX3NlYXJjaE5lYXJlc3RTZWdtZW50QmVmb3JlKGJlZ2luRHRzKTtcXG4gICAgICAgIGxldCByYW5kb21BY2Nlc3NQb2ludHMgPSB0aGlzLl9saXN0W3NlZ21lbnRJZHhdLnJhbmRvbUFjY2Vzc1BvaW50cztcXG4gICAgICAgIHdoaWxlIChyYW5kb21BY2Nlc3NQb2ludHMubGVuZ3RoID09PSAwICYmIHNlZ21lbnRJZHggPiAwKSB7XFxuICAgICAgICAgICAgc2VnbWVudElkeC0tO1xcbiAgICAgICAgICAgIHJhbmRvbUFjY2Vzc1BvaW50cyA9IHRoaXMuX2xpc3Rbc2VnbWVudElkeF0ucmFuZG9tQWNjZXNzUG9pbnRzO1xcbiAgICAgICAgfVxcbiAgICAgICAgaWYgKHJhbmRvbUFjY2Vzc1BvaW50cy5sZW5ndGggPiAwKSB7XFxuICAgICAgICAgICAgcmV0dXJuIHJhbmRvbUFjY2Vzc1BvaW50c1tyYW5kb21BY2Nlc3NQb2ludHMubGVuZ3RoIC0gMV07XFxuICAgICAgICB9IGVsc2Uge1xcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xcbiAgICAgICAgfVxcbiAgICB9XFxuXFxufVxcbmV4cG9ydHMuZGVmYXVsdCA9IE1lZGlhU2VnbWVudExpc3Q7XFxuXFxuLy8jIHNvdXJjZVVSTD13ZWJwYWNrOi8veGdwbGF5ZXItZmx2Ly4uL3hncGxheWVyLXV0aWxzL3NyYy9tb2RlbHMvbWVkaWEtc2VnbWVudC1saXN0LmpzPycpfSxcIi4uL3hncGxheWVyLXV0aWxzL3NyYy9tb2RlbHMvbWVkaWEtc2VnbWVudC5qc1wiOlxuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi4veGdwbGF5ZXItdXRpbHMvc3JjL21vZGVscy9tZWRpYS1zZWdtZW50LmpzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBubyBzdGF0aWMgZXhwb3J0cyBmb3VuZCAqL2Z1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pe1widXNlIHN0cmljdFwiO2V2YWwoJ1xcblxcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xcbiAgICB2YWx1ZTogdHJ1ZVxcbn0pO1xcbmNsYXNzIE1lZGlhU2VnbWVudCB7XFxuICAgIGNvbnN0cnVjdG9yKCkge1xcbiAgICAgICAgdGhpcy5zdGFydER0cyA9IC0xO1xcbiAgICAgICAgdGhpcy5lbmREdHMgPSAtMTtcXG4gICAgICAgIHRoaXMuc3RhcnRQdHMgPSAtMTtcXG4gICAgICAgIHRoaXMuZW5kUHRzID0gLTE7XFxuICAgICAgICB0aGlzLm9yaWdpblN0YXJ0RHRzID0gLTE7XFxuICAgICAgICB0aGlzLm9yaWdpbkVuZER0cyA9IC0xO1xcbiAgICAgICAgdGhpcy5yYW5kb21BY2Nlc3NQb2ludHMgPSBbXTtcXG4gICAgICAgIHRoaXMuZmlyc3RTYW1wbGUgPSBudWxsO1xcbiAgICAgICAgdGhpcy5sYXN0U2FtcGxlID0gbnVsbDtcXG4gICAgfVxcblxcbiAgICBhZGRSQVAoc2FtcGxlKSB7XFxuICAgICAgICBzYW1wbGUuaXNSQVAgPSB0cnVlO1xcbiAgICAgICAgdGhpcy5yYW5kb21BY2Nlc3NQb2ludHMucHVzaChzYW1wbGUpO1xcbiAgICB9XFxufVxcbmV4cG9ydHMuZGVmYXVsdCA9IE1lZGlhU2VnbWVudDtcXG5cXG4vLyMgc291cmNlVVJMPXdlYnBhY2s6Ly94Z3BsYXllci1mbHYvLi4veGdwbGF5ZXItdXRpbHMvc3JjL21vZGVscy9tZWRpYS1zZWdtZW50LmpzPycpfSxcIi4uL3hncGxheWVyLXV0aWxzL3NyYy9tb2RlbHMvdHJhY2stbWV0YS5qc1wiOlxuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi4veGdwbGF5ZXItdXRpbHMvc3JjL21vZGVscy90cmFjay1tZXRhLmpzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBubyBzdGF0aWMgZXhwb3J0cyBmb3VuZCAqL2Z1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pe1widXNlIHN0cmljdFwiO2V2YWwoXCJcXG5cXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXFxcIl9fZXNNb2R1bGVcXFwiLCB7XFxuICB2YWx1ZTogdHJ1ZVxcbn0pO1xcbmNsYXNzIEF1ZGlvVHJhY2tNZXRhIHtcXG4gIGNvbnN0cnVjdG9yKG1ldGEpIHtcXG4gICAgY29uc3QgX2RlZmF1bHQgPSB7XFxuICAgICAgc2FtcGxlUmF0ZTogNDgwMDAsXFxuICAgICAgY2hhbm5lbENvdW50OiAyLFxcbiAgICAgIGNvZGVjOiAnbXA0YS40MC4yJyxcXG4gICAgICBjb25maWc6IFs0MSwgNDAxLCAxMzYsIDBdLFxcbiAgICAgIGR1cmF0aW9uOiAwLFxcbiAgICAgIGlkOiAyLFxcbiAgICAgIHJlZlNhbXBsZUR1cmF0aW9uOiAyMSxcXG4gICAgICBzYW1wbGVSYXRlSW5kZXg6IDMsXFxuICAgICAgdGltZXNjYWxlOiAxMDAwLFxcbiAgICAgIHR5cGU6ICdhdWRpbydcXG4gICAgfTtcXG4gICAgaWYgKG1ldGEpIHtcXG4gICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbih7fSwgX2RlZmF1bHQsIG1ldGEpO1xcbiAgICB9XFxuICAgIHJldHVybiBfZGVmYXVsdDtcXG4gIH1cXG59XFxuXFxuZXhwb3J0cy5BdWRpb1RyYWNrTWV0YSA9IEF1ZGlvVHJhY2tNZXRhO1xcbmNsYXNzIFZpZGVvVHJhY2tNZXRhIHtcXG4gIGNvbnN0cnVjdG9yKG1ldGEpIHtcXG4gICAgY29uc3QgX2RlZmF1bHQgPSB7XFxuICAgICAgYXZjYzogbnVsbCxcXG4gICAgICBzcHM6IG5ldyBVaW50OEFycmF5KDApLFxcbiAgICAgIHBwczogbmV3IFVpbnQ4QXJyYXkoMCksXFxuICAgICAgY2hyb21hRm9ybWF0OiA0MjAsXFxuICAgICAgY29kZWM6ICdhdmMxLjY0MDAyMCcsXFxuICAgICAgY29kZWNIZWlnaHQ6IDcyMCxcXG4gICAgICBjb2RlY1dpZHRoOiAxMjgwLFxcbiAgICAgIGR1cmF0aW9uOiAwLFxcbiAgICAgIGZyYW1lUmF0ZToge1xcbiAgICAgICAgZml4ZWQ6IHRydWUsXFxuICAgICAgICBmcHM6IDI1LFxcbiAgICAgICAgZnBzX251bTogMjUwMDAsXFxuICAgICAgICBmcHNfZGVuOiAxMDAwXFxuICAgICAgfSxcXG4gICAgICBpZDogMSxcXG4gICAgICBsZXZlbDogJzMuMicsXFxuICAgICAgcHJlc2VudEhlaWdodDogNzIwLFxcbiAgICAgIHByZXNlbnRXaWR0aDogMTI4MCxcXG4gICAgICBwcm9maWxlOiAnSGlnaCcsXFxuICAgICAgcmVmU2FtcGxlRHVyYXRpb246IDQwLFxcbiAgICAgIHBhclJhdGlvOiB7XFxuICAgICAgICBoZWlnaHQ6IDEsXFxuICAgICAgICB3aWR0aDogMVxcbiAgICAgIH0sXFxuICAgICAgdGltZXNjYWxlOiAxMDAwLFxcbiAgICAgIHR5cGU6ICd2aWRlbydcXG4gICAgfTtcXG5cXG4gICAgaWYgKG1ldGEpIHtcXG4gICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbih7fSwgX2RlZmF1bHQsIG1ldGEpO1xcbiAgICB9XFxuICAgIHJldHVybiBfZGVmYXVsdDtcXG4gIH1cXG59XFxuZXhwb3J0cy5WaWRlb1RyYWNrTWV0YSA9IFZpZGVvVHJhY2tNZXRhO1xcblxcbi8vIyBzb3VyY2VVUkw9d2VicGFjazovL3hncGxheWVyLWZsdi8uLi94Z3BsYXllci11dGlscy9zcmMvbW9kZWxzL3RyYWNrLW1ldGEuanM/XCIpfSxcIi4uL3hncGxheWVyLXV0aWxzL3NyYy9tb2RlbHMvdHJhY2stc2FtcGxlLmpzXCI6XG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4uL3hncGxheWVyLXV0aWxzL3NyYy9tb2RlbHMvdHJhY2stc2FtcGxlLmpzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIG5vIHN0YXRpYyBleHBvcnRzIGZvdW5kICovZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7XCJ1c2Ugc3RyaWN0XCI7ZXZhbCgnXFxuXFxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XFxuICB2YWx1ZTogdHJ1ZVxcbn0pO1xcbmNsYXNzIEF1ZGlvVHJhY2tTYW1wbGUge1xcbiAgY29uc3RydWN0b3IoaW5mbykge1xcbiAgICBsZXQgX2RlZmF1bHQgPSBBdWRpb1RyYWNrU2FtcGxlLmdldERlZmF1bHQoKTtcXG4gICAgaWYgKCFpbmZvKSB7XFxuICAgICAgcmV0dXJuIF9kZWZhdWx0O1xcbiAgICB9XFxuICAgIGxldCBzYW1wbGUgPSBPYmplY3QuYXNzaWduKHt9LCBfZGVmYXVsdCwgaW5mbyk7XFxuXFxuICAgIHJldHVybiBzYW1wbGU7XFxuICB9XFxuXFxuICBzdGF0aWMgZ2V0RGVmYXVsdCgpIHtcXG4gICAgcmV0dXJuIHtcXG4gICAgICBkdHM6IG51bGwsXFxuICAgICAgcHRzOiBudWxsLFxcbiAgICAgIGRhdGE6IG5ldyBVaW50OEFycmF5KClcXG4gICAgfTtcXG4gIH1cXG59XFxuXFxuZXhwb3J0cy5BdWRpb1RyYWNrU2FtcGxlID0gQXVkaW9UcmFja1NhbXBsZTtcXG5jbGFzcyBWaWRlb1RyYWNrU2FtcGxlIHtcXG4gIGNvbnN0cnVjdG9yKGluZm8pIHtcXG4gICAgbGV0IF9kZWZhdWx0ID0gVmlkZW9UcmFja1NhbXBsZS5nZXREZWZhdWx0KCk7XFxuXFxuICAgIGlmICghaW5mbykge1xcbiAgICAgIHJldHVybiBfZGVmYXVsdDtcXG4gICAgfVxcbiAgICBsZXQgc2FtcGxlID0gT2JqZWN0LmFzc2lnbih7fSwgX2RlZmF1bHQsIGluZm8pO1xcblxcbiAgICByZXR1cm4gc2FtcGxlO1xcbiAgfVxcblxcbiAgc3RhdGljIGdldERlZmF1bHQoKSB7XFxuICAgIHJldHVybiB7XFxuICAgICAgZHRzOiBudWxsLFxcbiAgICAgIHB0czogbnVsbCxcXG4gICAgICBpc0tleWZyYW1lOiBmYWxzZSwgLy8gaXMgUmFuZG9tIGFjY2VzcyBwb2ludFxcbiAgICAgIG9yaWdpbkR0czogbnVsbCxcXG4gICAgICBkYXRhOiBuZXcgVWludDhBcnJheSgpXFxuICAgIH07XFxuICB9XFxufVxcbmV4cG9ydHMuVmlkZW9UcmFja1NhbXBsZSA9IFZpZGVvVHJhY2tTYW1wbGU7XFxuXFxuLy8jIHNvdXJjZVVSTD13ZWJwYWNrOi8veGdwbGF5ZXItZmx2Ly4uL3hncGxheWVyLXV0aWxzL3NyYy9tb2RlbHMvdHJhY2stc2FtcGxlLmpzPycpfSxcIi4uL3hncGxheWVyLXV0aWxzL3NyYy9tc2UvaW5kZXguanNcIjpcbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuLi94Z3BsYXllci11dGlscy9zcmMvbXNlL2luZGV4LmpzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgbm8gc3RhdGljIGV4cG9ydHMgZm91bmQgKi9mdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXtcInVzZSBzdHJpY3RcIjtldmFsKFwiXFxuXFxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFxcXCJfX2VzTW9kdWxlXFxcIiwge1xcbiAgdmFsdWU6IHRydWVcXG59KTtcXG5jbGFzcyBNU0Uge1xcbiAgY29uc3RydWN0b3IoY29uZmlncykge1xcbiAgICB0aGlzLmNvbmZpZ3MgPSBPYmplY3QuYXNzaWduKHt9LCBjb25maWdzKTtcXG4gICAgdGhpcy5jb250YWluZXIgPSB0aGlzLmNvbmZpZ3MuY29udGFpbmVyO1xcbiAgICB0aGlzLm1lZGlhU291cmNlID0gbnVsbDtcXG4gICAgdGhpcy5zb3VyY2VCdWZmZXJzID0ge307XFxuICAgIHRoaXMucHJlbG9hZFRpbWUgPSB0aGlzLmNvbmZpZ3MucHJlbG9hZFRpbWUgfHwgMTtcXG4gIH1cXG5cXG4gIGluaXQoKSB7XFxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bmRlZlxcbiAgICB0aGlzLm1lZGlhU291cmNlID0gbmV3IHNlbGYuTWVkaWFTb3VyY2UoKTtcXG4gICAgdGhpcy5tZWRpYVNvdXJjZS5hZGRFdmVudExpc3RlbmVyKCdzb3VyY2VvcGVuJywgdGhpcy5vblNvdXJjZU9wZW4uYmluZCh0aGlzKSk7XFxuICAgIHRoaXMuY29udGFpbmVyLnNyYyA9IFVSTC5jcmVhdGVPYmplY3RVUkwodGhpcy5tZWRpYVNvdXJjZSk7XFxuICAgIHRoaXMudXJsID0gdGhpcy5jb250YWluZXIuc3JjO1xcbiAgICB0aGlzLmNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCd0aW1ldXBkYXRlJywgdGhpcy5vblRpbWVVcGRhdGUuYmluZCh0aGlzKSk7XFxuICAgIHRoaXMuY29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ3dhaXRpbmcnLCB0aGlzLm9uV2FpdGluZy5iaW5kKHRoaXMpKTtcXG4gIH1cXG5cXG4gIG9uVGltZVVwZGF0ZSgpIHtcXG4gICAgdGhpcy5lbWl0KCdUSU1FX1VQREFURScsIHRoaXMuY29udGFpbmVyKTtcXG4gIH1cXG5cXG4gIG9uV2FpdGluZygpIHtcXG4gICAgdGhpcy5lbWl0KCdXQUlUSU5HJywgdGhpcy5jb250YWluZXIpO1xcbiAgfVxcblxcbiAgb25Tb3VyY2VPcGVuKCkge1xcbiAgICB0aGlzLmFkZFNvdXJjZUJ1ZmZlcnMoKTtcXG4gIH1cXG5cXG4gIG9uVXBkYXRlRW5kKCkge1xcbiAgICB0aGlzLmVtaXQoJ1NPVVJDRV9VUERBVEVfRU5EJyk7XFxuICAgIHRoaXMuZG9BcHBlbmQoKTtcXG4gIH1cXG4gIGFkZFNvdXJjZUJ1ZmZlcnMoKSB7XFxuICAgIGlmICh0aGlzLm1lZGlhU291cmNlLnJlYWR5U3RhdGUgIT09ICdvcGVuJykge1xcbiAgICAgIHJldHVybjtcXG4gICAgfVxcbiAgICBsZXQgc291cmNlcyA9IHRoaXMuX2NvbnRleHQuZ2V0SW5zdGFuY2UoJ1BSRV9TT1VSQ0VfQlVGRkVSJyk7XFxuICAgIGxldCB0cmFja3MgPSB0aGlzLl9jb250ZXh0LmdldEluc3RhbmNlKCdUUkFDS1MnKTtcXG4gICAgbGV0IHRyYWNrO1xcblxcbiAgICBzb3VyY2VzID0gc291cmNlcy5zb3VyY2VzO1xcbiAgICBsZXQgYWRkID0gZmFsc2U7XFxuICAgIGZvciAobGV0IGkgPSAwLCBrID0gT2JqZWN0LmtleXMoc291cmNlcykubGVuZ3RoOyBpIDwgazsgaSsrKSB7XFxuICAgICAgbGV0IHR5cGUgPSBPYmplY3Qua2V5cyhzb3VyY2VzKVtpXTtcXG4gICAgICBpZiAodHlwZSA9PT0gJ2F1ZGlvJykge1xcbiAgICAgICAgdHJhY2sgPSB0cmFja3MuYXVkaW9UcmFjaztcXG4gICAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICd2aWRlbycpIHtcXG4gICAgICAgIHRyYWNrID0gdHJhY2tzLnZpZGVvVHJhY2s7XFxuICAgICAgfVxcbiAgICAgIGlmICh0cmFjaykge1xcbiAgICAgICAgbGV0IGR1ciA9IHR5cGUgPT09ICdhdWRpbycgPyAyMSA6IDQwO1xcbiAgICAgICAgaWYgKHRyYWNrLm1ldGEgJiYgdHJhY2subWV0YS5yZWZTYW1wbGVEdXJhdGlvbikgZHVyID0gdHJhY2subWV0YS5yZWZTYW1wbGVEdXJhdGlvbjtcXG4gICAgICAgIGlmIChzb3VyY2VzW3R5cGVdLmRhdGEubGVuZ3RoID49IHRoaXMucHJlbG9hZFRpbWUgLyBkdXIpIHtcXG4gICAgICAgICAgYWRkID0gdHJ1ZTtcXG4gICAgICAgIH1cXG4gICAgICB9XFxuICAgIH1cXG5cXG4gICAgaWYgKGFkZCkge1xcbiAgICAgIGlmIChPYmplY3Qua2V5cyh0aGlzLnNvdXJjZUJ1ZmZlcnMpLmxlbmd0aCA+IDApIHtcXG4gICAgICAgIHJldHVybjtcXG4gICAgICB9XFxuICAgICAgZm9yIChsZXQgaSA9IDAsIGsgPSBPYmplY3Qua2V5cyhzb3VyY2VzKS5sZW5ndGg7IGkgPCBrOyBpKyspIHtcXG4gICAgICAgIGxldCB0eXBlID0gT2JqZWN0LmtleXMoc291cmNlcylbaV07XFxuICAgICAgICBsZXQgc291cmNlID0gc291cmNlc1t0eXBlXTtcXG4gICAgICAgIGxldCBtaW1lID0gdHlwZSA9PT0gJ3ZpZGVvJyA/ICd2aWRlby9tcDQ7Y29kZWNzPScgKyBzb3VyY2UubWltZXR5cGUgOiAnYXVkaW8vbXA0O2NvZGVjcz0nICsgc291cmNlLm1pbWV0eXBlO1xcbiAgICAgICAgbGV0IHNvdXJjZUJ1ZmZlciA9IHRoaXMubWVkaWFTb3VyY2UuYWRkU291cmNlQnVmZmVyKG1pbWUpO1xcbiAgICAgICAgdGhpcy5zb3VyY2VCdWZmZXJzW3R5cGVdID0gc291cmNlQnVmZmVyO1xcbiAgICAgICAgc291cmNlQnVmZmVyLmFkZEV2ZW50TGlzdGVuZXIoJ3VwZGF0ZWVuZCcsIHRoaXMub25VcGRhdGVFbmQuYmluZCh0aGlzKSk7XFxuICAgICAgICB0aGlzLmRvQXBwZW5kKCk7XFxuICAgICAgfVxcbiAgICB9XFxuICB9XFxuXFxuICBkb0FwcGVuZCgpIHtcXG4gICAgbGV0IHNvdXJjZXMgPSB0aGlzLl9jb250ZXh0LmdldEluc3RhbmNlKCdQUkVfU09VUkNFX0JVRkZFUicpO1xcbiAgICBpZiAoc291cmNlcykge1xcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgT2JqZWN0LmtleXModGhpcy5zb3VyY2VCdWZmZXJzKS5sZW5ndGg7IGkrKykge1xcbiAgICAgICAgbGV0IHR5cGUgPSBPYmplY3Qua2V5cyh0aGlzLnNvdXJjZUJ1ZmZlcnMpW2ldO1xcbiAgICAgICAgbGV0IHNvdXJjZUJ1ZmZlciA9IHRoaXMuc291cmNlQnVmZmVyc1t0eXBlXTtcXG4gICAgICAgIGlmICghc291cmNlQnVmZmVyLnVwZGF0aW5nKSB7XFxuICAgICAgICAgIGxldCBzb3VyY2UgPSBzb3VyY2VzLnNvdXJjZXNbdHlwZV07XFxuICAgICAgICAgIGlmIChzb3VyY2UgJiYgIXNvdXJjZS5pbml0ZWQpIHtcXG4gICAgICAgICAgICBzb3VyY2VCdWZmZXIuYXBwZW5kQnVmZmVyKHNvdXJjZS5pbml0LmJ1ZmZlci5idWZmZXIpO1xcbiAgICAgICAgICAgIHNvdXJjZS5pbml0ZWQgPSB0cnVlO1xcbiAgICAgICAgICB9IGVsc2UgaWYgKHNvdXJjZSkge1xcbiAgICAgICAgICAgIGxldCBkYXRhID0gc291cmNlLmRhdGEuc2hpZnQoKTtcXG4gICAgICAgICAgICBpZiAoZGF0YSkge1xcbiAgICAgICAgICAgICAgc291cmNlQnVmZmVyLmFwcGVuZEJ1ZmZlcihkYXRhLmJ1ZmZlci5idWZmZXIpO1xcbiAgICAgICAgICAgIH1cXG4gICAgICAgICAgfVxcbiAgICAgICAgfVxcbiAgICAgIH1cXG4gICAgfVxcbiAgfVxcblxcbiAgZW5kT2ZTdHJlYW0oKSB7XFxuICAgIGlmICh0aGlzLm1lZGlhU291cmNlLnJlYWR5U3RhdGUgPT09ICdvcGVuJykge1xcbiAgICAgIHRoaXMubWVkaWFTb3VyY2UuZW5kT2ZTdHJlYW0oKTtcXG4gICAgfVxcbiAgfVxcblxcbiAgcmVtb3ZlKGVuZCkge1xcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IE9iamVjdC5rZXlzKHRoaXMuc291cmNlQnVmZmVycykubGVuZ3RoOyBpKyspIHtcXG4gICAgICBsZXQgYnVmZmVyID0gdGhpcy5zb3VyY2VCdWZmZXJzW09iamVjdC5rZXlzKHRoaXMuc291cmNlQnVmZmVycylbaV1dO1xcbiAgICAgIGlmICghYnVmZmVyLnVwZGF0aW5nKSB7XFxuICAgICAgICBidWZmZXIucmVtb3ZlKDAsIGVuZCk7XFxuICAgICAgfVxcbiAgICB9XFxuICB9XFxuXFxuICBkZXN0cm95KCkge1xcbiAgICB0aGlzLmNvbnRhaW5lci5yZW1vdmVFdmVudExpc3RlbmVyKCd0aW1ldXBkYXRlJywgdGhpcy5vblRpbWVVcGRhdGUpO1xcbiAgICB0aGlzLmNvbnRhaW5lci5yZW1vdmVFdmVudExpc3RlbmVyKCd3YWl0aW5nJywgdGhpcy5vbldhaXRpbmcpO1xcbiAgICB0aGlzLm1lZGlhU291cmNlLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3NvdXJjZW9wZW4nLCB0aGlzLm9uU291cmNlT3Blbik7XFxuICAgIHRoaXMuY29uZmlncyA9IHt9O1xcbiAgICB0aGlzLmNvbnRhaW5lciA9IG51bGw7XFxuICAgIHRoaXMubWVkaWFTb3VyY2UgPSBudWxsO1xcbiAgICB0aGlzLnNvdXJjZUJ1ZmZlcnMgPSB7fTtcXG4gICAgdGhpcy5wcmVsb2FkVGltZSA9IDE7XFxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgT2JqZWN0LmtleXModGhpcy5zb3VyY2VCdWZmZXJzKS5sZW5ndGg7IGkrKykge1xcbiAgICAgIGxldCBidWZmZXIgPSB0aGlzLnNvdXJjZUJ1ZmZlcnNbT2JqZWN0LmtleXModGhpcy5zb3VyY2VCdWZmZXJzKVtpXV07XFxuICAgICAgYnVmZmVyLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3VwZGF0ZWVuZCcsIHRoaXMub25VcGRhdGVFbmQpO1xcbiAgICAgIHRoaXMubWVkaWFTb3VyY2UucmVtb3ZlU291cmNlQnVmZmVyKGJ1ZmZlcik7XFxuICAgICAgZGVsZXRlIHRoaXMuc291cmNlQnVmZmVyc1tPYmplY3Qua2V5cyh0aGlzLnNvdXJjZUJ1ZmZlcnMpW2ldXTtcXG4gICAgfVxcbiAgfVxcbn1cXG5leHBvcnRzLmRlZmF1bHQgPSBNU0U7XFxuXFxuLy8jIHNvdXJjZVVSTD13ZWJwYWNrOi8veGdwbGF5ZXItZmx2Ly4uL3hncGxheWVyLXV0aWxzL3NyYy9tc2UvaW5kZXguanM/XCIpfSxcIi4uL3hncGxheWVyLXV0aWxzL3NyYy93cml0ZS9idWZmZXIuanNcIjpcbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuLi94Z3BsYXllci11dGlscy9zcmMvd3JpdGUvYnVmZmVyLmpzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgbm8gc3RhdGljIGV4cG9ydHMgZm91bmQgKi9mdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXtcInVzZSBzdHJpY3RcIjtldmFsKFwiXFxuXFxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFxcXCJfX2VzTW9kdWxlXFxcIiwge1xcbiAgdmFsdWU6IHRydWVcXG59KTtcXG5cXG52YXIgX2NvbmNhdFR5cGVkQXJyYXkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISBjb25jYXQtdHlwZWQtYXJyYXkgKi8gXFxcIi4uL3hncGxheWVyLXV0aWxzL25vZGVfbW9kdWxlcy9jb25jYXQtdHlwZWQtYXJyYXkvbGliL2luZGV4LmpzXFxcIik7XFxuXFxudmFyIF9jb25jYXRUeXBlZEFycmF5MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NvbmNhdFR5cGVkQXJyYXkpO1xcblxcbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XFxuXFxuY2xhc3MgQnVmZmVyIHtcXG4gIGNvbnN0cnVjdG9yKGJ1ZmZlcikge1xcbiAgICB0aGlzLmJ1ZmZlciA9IGJ1ZmZlciB8fCBuZXcgVWludDhBcnJheSgwKTtcXG4gIH1cXG5cXG4gIHdyaXRlKC4uLmJ1ZmZlcikge1xcbiAgICBidWZmZXIuZm9yRWFjaChpdGVtID0+IHtcXG4gICAgICB0aGlzLmJ1ZmZlciA9ICgwLCBfY29uY2F0VHlwZWRBcnJheTIuZGVmYXVsdCkoVWludDhBcnJheSwgdGhpcy5idWZmZXIsIGl0ZW0pO1xcbiAgICB9KTtcXG4gIH1cXG5cXG4gIHN0YXRpYyB3cml0ZVVpbnQzMih2YWx1ZSkge1xcbiAgICByZXR1cm4gbmV3IFVpbnQ4QXJyYXkoW3ZhbHVlID4+IDI0LCB2YWx1ZSA+PiAxNiAmIDB4ZmYsIHZhbHVlID4+IDggJiAweGZmLCB2YWx1ZSAmIDB4ZmZdKTtcXG4gIH1cXG5cXG4gIHN0YXRpYyByZWFkQXNJbnQoYXJyKSB7XFxuICAgIGxldCB0ZW1wID0gJyc7XFxuXFxuICAgIGZ1bmN0aW9uIHBhZFN0YXJ0NEhleChoZXhOdW0pIHtcXG4gICAgICBsZXQgaGV4U3RyID0gaGV4TnVtLnRvU3RyaW5nKDE2KTtcXG4gICAgICByZXR1cm4gaGV4U3RyLnBhZFN0YXJ0KDIsICcwJyk7XFxuICAgIH1cXG5cXG4gICAgYXJyLmZvckVhY2gobnVtID0+IHtcXG4gICAgICB0ZW1wICs9IHBhZFN0YXJ0NEhleChudW0pO1xcbiAgICB9KTtcXG4gICAgcmV0dXJuIHBhcnNlSW50KHRlbXAsIDE2KTtcXG4gIH1cXG59XFxuXFxuZXhwb3J0cy5kZWZhdWx0ID0gQnVmZmVyO1xcblxcbi8vIyBzb3VyY2VVUkw9d2VicGFjazovL3hncGxheWVyLWZsdi8uLi94Z3BsYXllci11dGlscy9zcmMvd3JpdGUvYnVmZmVyLmpzP1wiKX0sXCIuLi94Z3BsYXllci11dGlscy9zcmMvd3JpdGUvc3RyZWFtLmpzXCI6XG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi4veGdwbGF5ZXItdXRpbHMvc3JjL3dyaXRlL3N0cmVhbS5qcyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIG5vIHN0YXRpYyBleHBvcnRzIGZvdW5kICovZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7XCJ1c2Ugc3RyaWN0XCI7ZXZhbChcIlxcblxcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcXFwiX19lc01vZHVsZVxcXCIsIHtcXG4gIHZhbHVlOiB0cnVlXFxufSk7XFxuY2xhc3MgU3RyZWFtIHtcXG4gIGNvbnN0cnVjdG9yKGJ1ZmZlcikge1xcbiAgICBpZiAoYnVmZmVyIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpIHtcXG4gICAgICB0aGlzLmJ1ZmZlciA9IGJ1ZmZlcjtcXG4gICAgICB0aGlzLmRhdGF2aWV3ID0gbmV3IERhdGFWaWV3KGJ1ZmZlcik7XFxuICAgICAgdGhpcy5kYXRhdmlldy5wb3NpdGlvbiA9IDA7XFxuICAgIH0gZWxzZSB7XFxuICAgICAgdGhyb3cgbmV3IEVycm9yKCdkYXRhIGlzIGludmFsaWQnKTtcXG4gICAgfVxcbiAgfVxcblxcbiAgZ2V0IGxlbmd0aCgpIHtcXG4gICAgcmV0dXJuIHRoaXMuYnVmZmVyLmJ5dGVMZW5ndGg7XFxuICB9XFxuXFxuICBzZXQgcG9zaXRpb24odmFsdWUpIHtcXG4gICAgdGhpcy5kYXRhdmlldy5wb3NpdGlvbiA9IHZhbHVlO1xcbiAgfVxcblxcbiAgZ2V0IHBvc2l0aW9uKCkge1xcbiAgICByZXR1cm4gdGhpcy5kYXRhdmlldy5wb3NpdGlvbjtcXG4gIH1cXG5cXG4gIGJhY2soY291bnQpIHtcXG4gICAgdGhpcy5wb3NpdGlvbiAtPSBjb3VudDtcXG4gIH1cXG5cXG4gIHNraXAoY291bnQpIHtcXG4gICAgbGV0IGxvb3AgPSBNYXRoLmZsb29yKGNvdW50IC8gNCk7XFxuICAgIGxldCBsYXN0ID0gY291bnQgJSA0O1xcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxvb3A7IGkrKykge1xcbiAgICAgIFN0cmVhbS5yZWFkQnl0ZSh0aGlzLmRhdGF2aWV3LCA0KTtcXG4gICAgfVxcbiAgICBpZiAobGFzdCA+IDApIHtcXG4gICAgICBTdHJlYW0ucmVhZEJ5dGUodGhpcy5kYXRhdmlldywgbGFzdCk7XFxuICAgIH1cXG4gIH1cXG5cXG4gIC8qKlxcbiAgICogW3JlYWRCeXRlIOS7jkRhdGFWaWV35Lit6K+75Y+W5pWw5o2uXVxcbiAgICogQHBhcmFtICB7RGF0YVZpZXd9IGJ1ZmZlciBbRGF0YVZpZXflrp7kvotdXFxuICAgKiBAcGFyYW0gIHtOdW1iZXJ9IHNpemUgICBb6K+75Y+W5a2X6IqC5pWwXVxcbiAgICogQHJldHVybiB7TnVtYmVyfSAgICAgICAgW+aVtOaVsF1cXG4gICAqL1xcbiAgc3RhdGljIHJlYWRCeXRlKGJ1ZmZlciwgc2l6ZSwgc2lnbikge1xcbiAgICBsZXQgcmVzO1xcbiAgICBzd2l0Y2ggKHNpemUpIHtcXG4gICAgICBjYXNlIDE6XFxuICAgICAgICBpZiAoc2lnbikge1xcbiAgICAgICAgICByZXMgPSBidWZmZXIuZ2V0SW50OChidWZmZXIucG9zaXRpb24pO1xcbiAgICAgICAgfSBlbHNlIHtcXG4gICAgICAgICAgcmVzID0gYnVmZmVyLmdldFVpbnQ4KGJ1ZmZlci5wb3NpdGlvbik7XFxuICAgICAgICB9XFxuICAgICAgICBicmVhaztcXG4gICAgICBjYXNlIDI6XFxuICAgICAgICBpZiAoc2lnbikge1xcbiAgICAgICAgICByZXMgPSBidWZmZXIuZ2V0SW50MTYoYnVmZmVyLnBvc2l0aW9uKTtcXG4gICAgICAgIH0gZWxzZSB7XFxuICAgICAgICAgIHJlcyA9IGJ1ZmZlci5nZXRVaW50MTYoYnVmZmVyLnBvc2l0aW9uKTtcXG4gICAgICAgIH1cXG4gICAgICAgIGJyZWFrO1xcbiAgICAgIGNhc2UgMzpcXG4gICAgICAgIGlmIChzaWduKSB7XFxuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignbm90IHN1cHBvcnRlZCBmb3IgcmVhZEJ5dGUgMycpO1xcbiAgICAgICAgfSBlbHNlIHtcXG4gICAgICAgICAgcmVzID0gYnVmZmVyLmdldFVpbnQ4KGJ1ZmZlci5wb3NpdGlvbikgPDwgMTY7XFxuICAgICAgICAgIHJlcyB8PSBidWZmZXIuZ2V0VWludDgoYnVmZmVyLnBvc2l0aW9uICsgMSkgPDwgODtcXG4gICAgICAgICAgcmVzIHw9IGJ1ZmZlci5nZXRVaW50OChidWZmZXIucG9zaXRpb24gKyAyKTtcXG4gICAgICAgIH1cXG4gICAgICAgIGJyZWFrO1xcbiAgICAgIGNhc2UgNDpcXG4gICAgICAgIGlmIChzaWduKSB7XFxuICAgICAgICAgIHJlcyA9IGJ1ZmZlci5nZXRJbnQzMihidWZmZXIucG9zaXRpb24pO1xcbiAgICAgICAgfSBlbHNlIHtcXG4gICAgICAgICAgcmVzID0gYnVmZmVyLmdldFVpbnQzMihidWZmZXIucG9zaXRpb24pO1xcbiAgICAgICAgfVxcbiAgICAgICAgYnJlYWs7XFxuICAgICAgY2FzZSA4OlxcbiAgICAgICAgaWYgKHNpZ24pIHtcXG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdub3Qgc3VwcG9ydGVkIGZvciByZWFkQm9keSA4Jyk7XFxuICAgICAgICB9IGVsc2Uge1xcbiAgICAgICAgICByZXMgPSBidWZmZXIuZ2V0VWludDMyKGJ1ZmZlci5wb3NpdGlvbikgPDwgMzI7XFxuICAgICAgICAgIHJlcyB8PSBidWZmZXIuZ2V0VWludDMyKGJ1ZmZlci5wb3NpdGlvbiArIDQpO1xcbiAgICAgICAgfVxcbiAgICAgICAgYnJlYWs7XFxuICAgICAgZGVmYXVsdDpcXG4gICAgICAgIHJlcyA9ICcnO1xcbiAgICB9XFxuICAgIGJ1ZmZlci5wb3NpdGlvbiArPSBzaXplO1xcbiAgICByZXR1cm4gcmVzO1xcbiAgfVxcblxcbiAgcmVhZFVpbnQ4KCkge1xcbiAgICByZXR1cm4gU3RyZWFtLnJlYWRCeXRlKHRoaXMuZGF0YXZpZXcsIDEpO1xcbiAgfVxcblxcbiAgcmVhZFVpbnQxNigpIHtcXG4gICAgcmV0dXJuIFN0cmVhbS5yZWFkQnl0ZSh0aGlzLmRhdGF2aWV3LCAyKTtcXG4gIH1cXG5cXG4gIHJlYWRVaW50MjQoKSB7XFxuICAgIHJldHVybiBTdHJlYW0ucmVhZEJ5dGUodGhpcy5kYXRhdmlldywgMyk7XFxuICB9XFxuXFxuICByZWFkVWludDMyKCkge1xcbiAgICByZXR1cm4gU3RyZWFtLnJlYWRCeXRlKHRoaXMuZGF0YXZpZXcsIDQpO1xcbiAgfVxcblxcbiAgcmVhZFVpbnQ2NCgpIHtcXG4gICAgcmV0dXJuIFN0cmVhbS5yZWFkQnl0ZSh0aGlzLmRhdGF2aWV3LCA4KTtcXG4gIH1cXG5cXG4gIHJlYWRJbnQ4KCkge1xcbiAgICByZXR1cm4gU3RyZWFtLnJlYWRCeXRlKHRoaXMuZGF0YXZpZXcsIDEsIHRydWUpO1xcbiAgfVxcbiAgcmVhZEludDE2KCkge1xcbiAgICByZXR1cm4gU3RyZWFtLnJlYWRCeXRlKHRoaXMuZGF0YXZpZXcsIDIsIHRydWUpO1xcbiAgfVxcblxcbiAgcmVhZEludDMyKCkge1xcbiAgICByZXR1cm4gU3RyZWFtLnJlYWRCeXRlKHRoaXMuZGF0YXZpZXcsIDQsIHRydWUpO1xcbiAgfVxcblxcbiAgd3JpdGVVaW50MzIodmFsdWUpIHtcXG4gICAgcmV0dXJuIG5ldyBVaW50OEFycmF5KFt2YWx1ZSA+Pj4gMjQgJiAweGZmLCB2YWx1ZSA+Pj4gMTYgJiAweGZmLCB2YWx1ZSA+Pj4gOCAmIDB4ZmYsIHZhbHVlICYgMHhmZl0pO1xcbiAgfVxcbn1cXG5cXG5leHBvcnRzLmRlZmF1bHQgPSBTdHJlYW07XFxuXFxuLy8jIHNvdXJjZVVSTD13ZWJwYWNrOi8veGdwbGF5ZXItZmx2Ly4uL3hncGxheWVyLXV0aWxzL3NyYy93cml0ZS9zdHJlYW0uanM/XCIpfSxcIi4vc3JjL2Zsdi1saXZlLmpzXCI6XG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vc3JjL2Zsdi1saXZlLmpzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIG5vIHN0YXRpYyBleHBvcnRzIGZvdW5kICovZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7XCJ1c2Ugc3RyaWN0XCI7ZXZhbChcIlxcblxcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcXFwiX19lc01vZHVsZVxcXCIsIHtcXG4gIHZhbHVlOiB0cnVlXFxufSk7XFxuXFxudmFyIF94Z3BsYXllclJlbXV4ID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgeGdwbGF5ZXItcmVtdXggKi8gXFxcIi4uL3hncGxheWVyLXJlbXV4L2luZGV4LmpzXFxcIik7XFxuXFxudmFyIF94Z3BsYXllclJlbXV4MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3hncGxheWVyUmVtdXgpO1xcblxcbnZhciBfeGdwbGF5ZXJMb2FkZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISB4Z3BsYXllci1sb2FkZXIgKi8gXFxcIi4uL3hncGxheWVyLWxvYWRlci9pbmRleC5qc1xcXCIpO1xcblxcbnZhciBfeGdwbGF5ZXJEZW11eCA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIHhncGxheWVyLWRlbXV4ICovIFxcXCIuLi94Z3BsYXllci1kZW11eC9pbmRleC5qc1xcXCIpO1xcblxcbnZhciBfeGdwbGF5ZXJCdWZmZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISB4Z3BsYXllci1idWZmZXIgKi8gXFxcIi4uL3hncGxheWVyLWJ1ZmZlci9pbmRleC5qc1xcXCIpO1xcblxcbnZhciBfeGdwbGF5ZXJVdGlscyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIHhncGxheWVyLXV0aWxzICovIFxcXCIuLi94Z3BsYXllci11dGlscy9pbmRleC5qc1xcXCIpO1xcblxcbnZhciBfeGdwbGF5ZXJDb2RlYyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIHhncGxheWVyLWNvZGVjICovIFxcXCIuLi94Z3BsYXllci1jb2RlYy9pbmRleC5qc1xcXCIpO1xcblxcbnZhciBfeGdwbGF5ZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISB4Z3BsYXllciAqLyBcXFwieGdwbGF5ZXJcXFwiKTtcXG5cXG52YXIgX3hncGxheWVyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3hncGxheWVyKTtcXG5cXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxcblxcbmNvbnN0IFJFTVVYX0VWRU5UUyA9IF94Z3BsYXllclV0aWxzLkVWRU5UUy5SRU1VWF9FVkVOVFM7XFxuY29uc3QgREVNVVhfRVZFTlRTID0gX3hncGxheWVyVXRpbHMuRVZFTlRTLkRFTVVYX0VWRU5UUztcXG5jb25zdCBMT0FERVJfRVZFTlRTID0gX3hncGxheWVyVXRpbHMuRVZFTlRTLkxPQURFUl9FVkVOVFM7XFxuY29uc3QgTVNFX0VWRU5UUyA9IF94Z3BsYXllclV0aWxzLkVWRU5UUy5NU0VfRVZFTlRTO1xcblxcbmNvbnN0IFRhZyA9ICdGTFZDb250cm9sbGVyJztcXG5cXG5jbGFzcyBMb2dnZXIge1xcbiAgd2FybigpIHt9XFxufVxcblxcbmNsYXNzIEZsdkNvbnRyb2xsZXIge1xcbiAgY29uc3RydWN0b3IocGxheWVyKSB7XFxuICAgIHRoaXMuVEFHID0gVGFnO1xcbiAgICB0aGlzLl9wbGF5ZXIgPSBwbGF5ZXI7XFxuXFxuICAgIHRoaXMuc3RhdGUgPSB7XFxuICAgICAgaW5pdFNlZ21lbnRBcnJpdmVkOiBmYWxzZVxcbiAgICB9O1xcbiAgfVxcblxcbiAgaW5pdCgpIHtcXG4gICAgdGhpcy5fY29udGV4dC5yZWdpc3RyeSgnRkVUQ0hfTE9BREVSJywgX3hncGxheWVyTG9hZGVyLkZldGNoTG9hZGVyKTtcXG4gICAgdGhpcy5fY29udGV4dC5yZWdpc3RyeSgnTE9BREVSX0JVRkZFUicsIF94Z3BsYXllckJ1ZmZlci5YZ0J1ZmZlcik7XFxuXFxuICAgIHRoaXMuX2NvbnRleHQucmVnaXN0cnkoJ0ZMVl9ERU1VWEVSJywgX3hncGxheWVyRGVtdXguRmx2RGVtdXhlcik7XFxuICAgIHRoaXMuX2NvbnRleHQucmVnaXN0cnkoJ1RSQUNLUycsIF94Z3BsYXllckJ1ZmZlci5UcmFja3MpO1xcblxcbiAgICB0aGlzLl9jb250ZXh0LnJlZ2lzdHJ5KCdNUDRfUkVNVVhFUicsIF94Z3BsYXllclJlbXV4Mi5kZWZhdWx0Lk1wNFJlbXV4ZXIpO1xcbiAgICB0aGlzLl9jb250ZXh0LnJlZ2lzdHJ5KCdQUkVfU09VUkNFX0JVRkZFUicsIF94Z3BsYXllckJ1ZmZlci5QcmVTb3VyY2UpO1xcblxcbiAgICB0aGlzLl9jb250ZXh0LnJlZ2lzdHJ5KCdDT01QQVRJQklMSVRZJywgX3hncGxheWVyQ29kZWMuQ29tcGF0aWJpbGl0eSk7XFxuXFxuICAgIHRoaXMuX2NvbnRleHQucmVnaXN0cnkoJ0xPR0dFUicsIExvZ2dlcik7XFxuICAgIHRoaXMubXNlID0gdGhpcy5fY29udGV4dC5yZWdpc3RyeSgnTVNFJywgX3hncGxheWVyVXRpbHMuTXNlKSh7IGNvbnRhaW5lcjogdGhpcy5fcGxheWVyLnZpZGVvIH0pO1xcblxcbiAgICB0aGlzLmluaXRMaXN0ZW5lcnMoKTtcXG4gIH1cXG5cXG4gIGluaXRMaXN0ZW5lcnMoKSB7XFxuICAgIHRoaXMub24oTE9BREVSX0VWRU5UUy5MT0FERVJfREFUQUxPQURFRCwgdGhpcy5faGFuZGxlTG9hZGVyRGF0YUxvYWRlZC5iaW5kKHRoaXMpKTtcXG4gICAgdGhpcy5vbihMT0FERVJfRVZFTlRTLkxPQURFUl9FUlJPUiwgdGhpcy5faGFuZGxlTmV0d29ya0Vycm9yLmJpbmQodGhpcykpO1xcblxcbiAgICB0aGlzLm9uKERFTVVYX0VWRU5UUy5NRURJQV9JTkZPLCB0aGlzLl9oYW5kbGVNZWRpYUluZm8uYmluZCh0aGlzKSk7XFxuICAgIHRoaXMub24oREVNVVhfRVZFTlRTLk1FVEFEQVRBX1BBUlNFRCwgdGhpcy5faGFuZGxlTWV0YWRhdGFQYXJzZWQuYmluZCh0aGlzKSk7XFxuICAgIHRoaXMub24oREVNVVhfRVZFTlRTLkRFTVVYX0NPTVBMRVRFLCB0aGlzLl9oYW5kbGVEZW11eENvbXBsZXRlLmJpbmQodGhpcykpO1xcbiAgICB0aGlzLm9uKERFTVVYX0VWRU5UUy5ERU1VWF9FUlJPUiwgdGhpcy5faGFuZGxlRGVtdXhFcnJvci5iaW5kKHRoaXMpKTtcXG5cXG4gICAgdGhpcy5vbihSRU1VWF9FVkVOVFMuSU5JVF9TRUdNRU5ULCB0aGlzLl9oYW5kbGVBcHBlbmRJbml0U2VnbWVudC5iaW5kKHRoaXMpKTtcXG4gICAgdGhpcy5vbihSRU1VWF9FVkVOVFMuTUVESUFfU0VHTUVOVCwgdGhpcy5faGFuZGxlTWVkaWFTZWdtZW50LmJpbmQodGhpcykpO1xcblxcbiAgICB0aGlzLm9uKE1TRV9FVkVOVFMuU09VUkNFX1VQREFURV9FTkQsIHRoaXMuX2hhbmRsZVNvdXJjZVVwZGF0ZUVuZC5iaW5kKHRoaXMpKTtcXG5cXG4gICAgdGhpcy5fcGxheWVyLm9uKCd0aW1ldXBkYXRlJywgdGhpcy5faGFuZGxlVGltZVVwZGF0ZS5iaW5kKHRoaXMpKTtcXG4gIH1cXG5cXG4gIF9oYW5kbGVNZWRpYUluZm8oKSB7XFxuICAgIGlmICghdGhpcy5fY29udGV4dC5tZWRpYUluZm8pIHtcXG4gICAgICB0aGlzLmVtaXQoREVNVVhfRVZFTlRTLkRFTVVYX0VSUk9SLCBuZXcgRXJyb3IoJ2ZhaWxlZCB0byBnZXQgbWVkaWFpbmZvJykpO1xcbiAgICB9XFxuICB9XFxuXFxuICBfaGFuZGxlTG9hZGVyRGF0YUxvYWRlZCgpIHtcXG4gICAgdGhpcy5lbWl0VG8oJ0ZMVl9ERU1VWEVSJywgREVNVVhfRVZFTlRTLkRFTVVYX1NUQVJUKTtcXG4gIH1cXG5cXG4gIF9oYW5kbGVNZXRhZGF0YVBhcnNlZCh0eXBlKSB7XFxuICAgIHRoaXMuZW1pdChSRU1VWF9FVkVOVFMuUkVNVVhfTUVUQURBVEEsIHR5cGUpO1xcbiAgfVxcbiAgX2hhbmRsZURlbXV4Q29tcGxldGUoKSB7XFxuICAgIHRoaXMuZW1pdChSRU1VWF9FVkVOVFMuUkVNVVhfTUVESUEpO1xcbiAgfVxcblxcbiAgX2hhbmRsZUFwcGVuZEluaXRTZWdtZW50KCkge1xcbiAgICB0aGlzLnN0YXRlLmluaXRTZWdtZW50QXJyaXZlZCA9IHRydWU7XFxuICAgIHRoaXMubXNlLmFkZFNvdXJjZUJ1ZmZlcnMoKTtcXG4gIH1cXG5cXG4gIF9oYW5kbGVNZWRpYVNlZ21lbnQoKSB7XFxuICAgIHRoaXMubXNlLmFkZFNvdXJjZUJ1ZmZlcnMoKTtcXG4gICAgdGhpcy5tc2UuZG9BcHBlbmQoKTtcXG4gIH1cXG5cXG4gIF9oYW5kbGVTb3VyY2VVcGRhdGVFbmQoKSB7XFxuICAgIGNvbnN0IHRpbWUgPSB0aGlzLl9wbGF5ZXIuY3VycmVudFRpbWU7XFxuICAgIGNvbnN0IHZpZGVvID0gdGhpcy5fcGxheWVyLnZpZGVvO1xcbiAgICBjb25zdCBwcmVsb2FkVGltZSA9IHRoaXMuX3BsYXllci5jb25maWcucHJlbG9hZFRpbWUgfHwgNTtcXG5cXG4gICAgY29uc3QgeyBsZW5ndGggfSA9IHZpZGVvLmJ1ZmZlcmVkO1xcblxcbiAgICBpZiAobGVuZ3RoID09PSAwKSB7XFxuICAgICAgcmV0dXJuO1xcbiAgICB9XFxuXFxuICAgIGNvbnN0IGJ1ZmZlckVuZCA9IHZpZGVvLmJ1ZmZlcmVkLmVuZChsZW5ndGggLSAxKTtcXG4gICAgaWYgKGJ1ZmZlckVuZCAtIHRpbWUgPiBwcmVsb2FkVGltZSAqIDIpIHtcXG4gICAgICB0aGlzLl9wbGF5ZXIuY3VycmVudFRpbWUgPSBidWZmZXJFbmQgLSBwcmVsb2FkVGltZTtcXG4gICAgfVxcbiAgfVxcblxcbiAgX2hhbmRsZVRpbWVVcGRhdGUoKSB7XFxuICAgIGNvbnN0IHRpbWUgPSB0aGlzLl9wbGF5ZXIuY3VycmVudFRpbWU7XFxuICAgIGlmICh0aW1lID4gMikge1xcbiAgICAgIC8vIOWcqOebtOaSreaXtuWPiuaXtua4heepumJ1ZmZlcu+8jOmZjeS9juebtOaSreWGheWtmOWNoOeUqFxcbiAgICAgIHRoaXMubXNlLnJlbW92ZSh0aW1lIC0gMik7XFxuICAgIH1cXG4gIH1cXG5cXG4gIF9oYW5kbGVOZXR3b3JrRXJyb3IoKSB7XFxuICAgIHRoaXMuX3BsYXllci5lbWl0KCdlcnJvcicsIG5ldyBfeGdwbGF5ZXIyLmRlZmF1bHQuRXJyb3JzKCduZXR3b3JrJywgdGhpcy5fcGxheWVyLmNvbmZpZy51cmwpKTtcXG4gIH1cXG5cXG4gIF9oYW5kbGVEZW11eEVycm9yKCkge1xcbiAgICB0aGlzLl9wbGF5ZXIuZW1pdCgnZXJyb3InLCBuZXcgX3hncGxheWVyMi5kZWZhdWx0LkVycm9ycygncGFyc2UnLCB0aGlzLl9wbGF5ZXIuY29uZmlnLnVybCkpO1xcbiAgfVxcblxcbiAgc2VlaygpIHtcXG4gICAgaWYgKCF0aGlzLnN0YXRlLmluaXRTZWdtZW50QXJyaXZlZCkge1xcbiAgICAgIHRoaXMubG9hZERhdGEoKTtcXG4gICAgfVxcbiAgfVxcblxcbiAgbG9hZERhdGEoKSB7XFxuICAgIHRoaXMuZW1pdChMT0FERVJfRVZFTlRTLkxBREVSX1NUQVJULCB0aGlzLl9wbGF5ZXIuY29uZmlnLnVybCk7XFxuICB9XFxuXFxuICBwYXVzZSgpIHtcXG4gICAgY29uc3QgbG9hZGVyID0gdGhpcy5fY29udGV4dC5nZXRJbnN0YW5jZSgnRkVUQ0hfTE9BREVSJyk7XFxuXFxuICAgIGlmIChsb2FkZXIpIHtcXG4gICAgICBsb2FkZXIuY2FuY2VsKCk7XFxuICAgIH1cXG4gIH1cXG59XFxuZXhwb3J0cy5kZWZhdWx0ID0gRmx2Q29udHJvbGxlcjtcXG5cXG4vLyMgc291cmNlVVJMPXdlYnBhY2s6Ly94Z3BsYXllci1mbHYvLi9zcmMvZmx2LWxpdmUuanM/XCIpfSxcIi4vc3JjL2luZGV4LmpzXCI6XG4vKiEqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vc3JjL2luZGV4LmpzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIG5vIHN0YXRpYyBleHBvcnRzIGZvdW5kICovZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7XCJ1c2Ugc3RyaWN0XCI7ZXZhbChcIlxcblxcbnZhciBfeGdwbGF5ZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISB4Z3BsYXllciAqLyBcXFwieGdwbGF5ZXJcXFwiKTtcXG5cXG52YXIgX3hncGxheWVyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3hncGxheWVyKTtcXG5cXG52YXIgX3hncGxheWVyVXRpbHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISB4Z3BsYXllci11dGlscyAqLyBcXFwiLi4veGdwbGF5ZXItdXRpbHMvaW5kZXguanNcXFwiKTtcXG5cXG52YXIgX2ZsdkxpdmUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL2Zsdi1saXZlICovIFxcXCIuL3NyYy9mbHYtbGl2ZS5qc1xcXCIpO1xcblxcbnZhciBfZmx2TGl2ZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9mbHZMaXZlKTtcXG5cXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxcblxcbmNvbnN0IGZsdkFsbG93ZWRFdmVudHMgPSBfeGdwbGF5ZXJVdGlscy5FVkVOVFMuRmx2QWxsb3dlZEV2ZW50cztcXG5cXG5jbGFzcyBGbHZQbGF5ZXIgZXh0ZW5kcyBfeGdwbGF5ZXIyLmRlZmF1bHQge1xcbiAgY29uc3RydWN0b3IoY29uZmlnKSB7XFxuICAgIHN1cGVyKGNvbmZpZyk7XFxuICAgIHRoaXMuY29udGV4dCA9IG5ldyBfeGdwbGF5ZXJVdGlscy5Db250ZXh0KGZsdkFsbG93ZWRFdmVudHMpO1xcbiAgICB0aGlzLmluaXRFdmVudHMoKTtcXG4gICAgLy8gY29uc3QgcHJlbG9hZFRpbWUgPSBwbGF5ZXIuY29uZmlnLnByZWxvYWRUaW1lIHx8IDE1XFxuICB9XFxuXFxuICBzdGFydCgpIHtcXG4gICAgdGhpcy5pbml0Rmx2KCk7XFxuICAgIHRoaXMuY29udGV4dC5pbml0KCk7XFxuICAgIHN1cGVyLnN0YXJ0KHRoaXMuZmx2Lm1zZS51cmwpO1xcbiAgfVxcblxcbiAgaW5pdEZsdkV2ZW50cyhmbHYpIHtcXG4gICAgY29uc3QgcGxheWVyID0gdGhpcztcXG4gICAgZmx2Lm9uY2UoX3hncGxheWVyVXRpbHMuRVZFTlRTLlJFTVVYX0VWRU5UUy5JTklUX1NFR01FTlQsICgpID0+IHtcXG4gICAgICBfeGdwbGF5ZXIyLmRlZmF1bHQudXRpbC5hZGRDbGFzcyhwbGF5ZXIucm9vdCwgJ3hncGxheWVyLWlzLWxpdmUnKTtcXG4gICAgICBpZiAoIV94Z3BsYXllcjIuZGVmYXVsdC51dGlsLmZpbmREb20odGhpcy5yb290LCAneGctbGl2ZScpKSB7XFxuICAgICAgICBjb25zdCBsaXZlID0gX3hncGxheWVyMi5kZWZhdWx0LnV0aWwuY3JlYXRlRG9tKCd4Zy1saXZlJywgJ+ato+WcqOebtOaSrScsIHt9LCAneGdwbGF5ZXItbGl2ZScpO1xcbiAgICAgICAgcGxheWVyLmNvbnRyb2xzLmFwcGVuZENoaWxkKGxpdmUpO1xcbiAgICAgIH1cXG4gICAgfSk7XFxuXFxuICAgIGZsdi5vbmNlKF94Z3BsYXllclV0aWxzLkVWRU5UUy5MT0FERVJfRVZFTlRTLkxPQURFUl9DT01QTEVURSwgKCkgPT4ge1xcbiAgICAgIC8vIOebtOaSreWujOaIkO+8jOW+heaSreaUvuWZqOaSreWujOe8k+WtmOWQjuWPkemAgeWFs+mXreS6i+S7tlxcbiAgICAgIGlmICghcGxheWVyLnBhdXNlZCkge1xcbiAgICAgICAgY29uc3QgdGltZXIgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XFxuICAgICAgICAgIGNvbnN0IGVuZCA9IHBsYXllci5nZXRCdWZmZXJlZFJhbmdlKClbMV07XFxuICAgICAgICAgIGlmIChNYXRoLmFicyhwbGF5ZXIuY3VycmVudFRpbWUgLSBlbmQpIDwgMC41KSB7XFxuICAgICAgICAgICAgcGxheWVyLmVtaXQoJ2VuZGVkJyk7XFxuICAgICAgICAgICAgd2luZG93LmNsZWFySW50ZXJ2YWwodGltZXIpO1xcbiAgICAgICAgICB9XFxuICAgICAgICB9LCAyMDApO1xcbiAgICAgIH1cXG4gICAgfSk7XFxuICB9XFxuXFxuICBpbml0RXZlbnRzKCkge1xcbiAgICB0aGlzLm9uKCd0aW1ldXBkYXRlJywgKCkgPT4ge1xcbiAgICAgIHRoaXMubG9hZERhdGEoKTtcXG4gICAgfSk7XFxuXFxuICAgIHRoaXMub24oJ3NlZWtpbmcnLCAoKSA9PiB7XFxuICAgICAgY29uc3QgdGltZSA9IHRoaXMuY3VycmVudFRpbWU7XFxuICAgICAgY29uc3QgcmFuZ2UgPSB0aGlzLmdldEJ1ZmZlcmVkUmFuZ2UoKTtcXG4gICAgICBpZiAodGltZSA+IHJhbmdlWzFdIHx8IHRpbWUgPCByYW5nZVswXSkge1xcbiAgICAgICAgdGhpcy5mbHYuc2Vlayh0aGlzLmN1cnJlbnRUaW1lKTtcXG4gICAgICB9XFxuICAgIH0pO1xcbiAgfVxcblxcbiAgaW5pdEZsdigpIHtcXG4gICAgY29uc3QgZmx2ID0gdGhpcy5jb250ZXh0LnJlZ2lzdHJ5KCdGTFZfQ09OVFJPTExFUicsIF9mbHZMaXZlMi5kZWZhdWx0KSh0aGlzKTtcXG4gICAgdGhpcy5pbml0Rmx2RXZlbnRzKGZsdik7XFxuICAgIHRoaXMuZmx2ID0gZmx2O1xcbiAgfVxcblxcbiAgcGxheSgpIHtcXG4gICAgaWYgKHRoaXMuX2hhc1N0YXJ0KSB7XFxuICAgICAgdGhpcy5fZGVzdHJveSgpO1xcbiAgICAgIHRoaXMuY29udGV4dCA9IG5ldyBfeGdwbGF5ZXJVdGlscy5Db250ZXh0KGZsdkFsbG93ZWRFdmVudHMpO1xcbiAgICAgIGNvbnN0IGZsdiA9IHRoaXMuY29udGV4dC5yZWdpc3RyeSgnRkxWX0NPTlRST0xMRVInLCBfZmx2TGl2ZTIuZGVmYXVsdCkodGhpcyk7XFxuICAgICAgdGhpcy5pbml0Rmx2RXZlbnRzKGZsdik7XFxuICAgICAgdGhpcy5mbHYgPSBmbHY7XFxuICAgICAgdGhpcy5jb250ZXh0LmluaXQoKTtcXG4gICAgICBzdXBlci5zdGFydChmbHYubXNlLnVybCk7XFxuICAgICAgc3VwZXIucGxheSgpO1xcbiAgICB9IGVsc2Uge1xcbiAgICAgIHN1cGVyLnBsYXkoKTtcXG4gICAgfVxcbiAgfVxcblxcbiAgcGF1c2UoKSB7XFxuICAgIHN1cGVyLnBhdXNlKCk7XFxuICAgIGlmICh0aGlzLmZsdikge1xcbiAgICAgIHRoaXMuZmx2LnBhdXNlKCk7XFxuICAgIH1cXG4gIH1cXG5cXG4gIGxvYWREYXRhKHRpbWUgPSB0aGlzLmN1cnJlbnRUaW1lKSB7XFxuICAgIGlmICh0aGlzLmZsdikge1xcbiAgICAgIHRoaXMuZmx2LnNlZWsodGltZSk7XFxuICAgIH1cXG4gIH1cXG5cXG4gIGRlc3Ryb3koKSB7XFxuICAgIHRoaXMuX2Rlc3Ryb3koKTtcXG4gICAgc3VwZXIuZGVzdHJveSgpO1xcbiAgfVxcblxcbiAgX2Rlc3Ryb3koKSB7XFxuICAgIHRoaXMuY29udGV4dC5kZXN0cm95KCk7XFxuICAgIHRoaXMuZmx2ID0gbnVsbDtcXG4gICAgdGhpcy5jb250ZXh0ID0gbnVsbDtcXG4gIH1cXG5cXG4gIGdldCBzcmMoKSB7XFxuICAgIHJldHVybiB0aGlzLmN1cnJlbnRTcmM7XFxuICB9XFxuXFxuICBzZXQgc3JjKHVybCkge1xcbiAgICB0aGlzLnBsYXllci5jb25maWcudXJsID0gdXJsO1xcbiAgICBpZiAoIXRoaXMucGF1c2VkKSB7XFxuICAgICAgdGhpcy5wYXVzZSgpO1xcbiAgICAgIHRoaXMub25jZSgncGF1c2UnLCAoKSA9PiB7XFxuICAgICAgICB0aGlzLnN0YXJ0KHVybCk7XFxuICAgICAgfSk7XFxuICAgICAgdGhpcy5vbmNlKCdjYW5wbGF5JywgKCkgPT4ge1xcbiAgICAgICAgdGhpcy5wbGF5KCk7XFxuICAgICAgfSk7XFxuICAgIH0gZWxzZSB7XFxuICAgICAgdGhpcy5zdGFydCh1cmwpO1xcbiAgICB9XFxuICAgIHRoaXMub25jZSgnY2FucGxheScsICgpID0+IHtcXG4gICAgICB0aGlzLmN1cnJlbnRUaW1lID0gMDtcXG4gICAgfSk7XFxuICB9XFxufVxcblxcbm1vZHVsZS5leHBvcnRzID0gRmx2UGxheWVyO1xcblxcbi8vIyBzb3VyY2VVUkw9d2VicGFjazovL3hncGxheWVyLWZsdi8uL3NyYy9pbmRleC5qcz9cIil9LDA6XG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIG11bHRpIC4vc3JjL2luZGV4LmpzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIG5vIHN0YXRpYyBleHBvcnRzIGZvdW5kICovZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7ZXZhbCgnbW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL3NyYy9pbmRleC5qcyAqL1wiLi9zcmMvaW5kZXguanNcIik7XFxuXFxuXFxuLy8jIHNvdXJjZVVSTD13ZWJwYWNrOi8veGdwbGF5ZXItZmx2L211bHRpXy4vc3JjL2luZGV4LmpzPycpfSx4Z3BsYXllcjpcbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiBleHRlcm5hbCBcInhncGxheWVyXCIgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBubyBzdGF0aWMgZXhwb3J0cyBmb3VuZCAqL2Z1bmN0aW9uKG1vZHVsZSxleHBvcnRzKXtldmFsKFwibW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFX3hncGxheWVyX187XFxuXFxuLy8jIHNvdXJjZVVSTD13ZWJwYWNrOi8veGdwbGF5ZXItZmx2L2V4dGVybmFsXyUyMnhncGxheWVyJTIyP1wiKX19KX0pKTsiLCIoZnVuY3Rpb24gd2VicGFja1VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24ocm9vdCwgZmFjdG9yeSkge1xuXHRpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcpXG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KHJlcXVpcmUoXCJ4Z3BsYXllclwiKSk7XG5cdGVsc2UgaWYodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKVxuXHRcdGRlZmluZShbXCJ4Z3BsYXllclwiXSwgZmFjdG9yeSk7XG5cdGVsc2UgaWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKVxuXHRcdGV4cG9ydHNbXCJ4Z3BsYXllci1mbHZcIl0gPSBmYWN0b3J5KHJlcXVpcmUoXCJ4Z3BsYXllclwiKSk7XG5cdGVsc2Vcblx0XHRyb290W1wieGdwbGF5ZXItZmx2XCJdID0gZmFjdG9yeShyb290W1wieGdwbGF5ZXJcIl0pO1xufSkod2luZG93LCBmdW5jdGlvbihfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFX3hncGxheWVyX18pIHtcbnJldHVybiAiLCIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMCk7XG4iLCIvLyBDb3B5cmlnaHQgSm95ZW50LCBJbmMuIGFuZCBvdGhlciBOb2RlIGNvbnRyaWJ1dG9ycy5cbi8vXG4vLyBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYVxuLy8gY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZVxuLy8gXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nXG4vLyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsXG4vLyBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0XG4vLyBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGVcbi8vIGZvbGxvd2luZyBjb25kaXRpb25zOlxuLy9cbi8vIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkXG4vLyBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cbi8vXG4vLyBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTXG4vLyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GXG4vLyBNRVJDSEFOVEFCSUxJVFksIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOXG4vLyBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSxcbi8vIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUlxuLy8gT1RIRVJXSVNFLCBBUklTSU5HIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRVxuLy8gVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgUiA9IHR5cGVvZiBSZWZsZWN0ID09PSAnb2JqZWN0JyA/IFJlZmxlY3QgOiBudWxsXG52YXIgUmVmbGVjdEFwcGx5ID0gUiAmJiB0eXBlb2YgUi5hcHBseSA9PT0gJ2Z1bmN0aW9uJ1xuICA/IFIuYXBwbHlcbiAgOiBmdW5jdGlvbiBSZWZsZWN0QXBwbHkodGFyZ2V0LCByZWNlaXZlciwgYXJncykge1xuICAgIHJldHVybiBGdW5jdGlvbi5wcm90b3R5cGUuYXBwbHkuY2FsbCh0YXJnZXQsIHJlY2VpdmVyLCBhcmdzKTtcbiAgfVxuXG52YXIgUmVmbGVjdE93bktleXNcbmlmIChSICYmIHR5cGVvZiBSLm93bktleXMgPT09ICdmdW5jdGlvbicpIHtcbiAgUmVmbGVjdE93bktleXMgPSBSLm93bktleXNcbn0gZWxzZSBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykge1xuICBSZWZsZWN0T3duS2V5cyA9IGZ1bmN0aW9uIFJlZmxlY3RPd25LZXlzKHRhcmdldCkge1xuICAgIHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyh0YXJnZXQpXG4gICAgICAuY29uY2F0KE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHModGFyZ2V0KSk7XG4gIH07XG59IGVsc2Uge1xuICBSZWZsZWN0T3duS2V5cyA9IGZ1bmN0aW9uIFJlZmxlY3RPd25LZXlzKHRhcmdldCkge1xuICAgIHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyh0YXJnZXQpO1xuICB9O1xufVxuXG5mdW5jdGlvbiBQcm9jZXNzRW1pdFdhcm5pbmcod2FybmluZykge1xuICBpZiAoY29uc29sZSAmJiBjb25zb2xlLndhcm4pIGNvbnNvbGUud2Fybih3YXJuaW5nKTtcbn1cblxudmFyIE51bWJlcklzTmFOID0gTnVtYmVyLmlzTmFOIHx8IGZ1bmN0aW9uIE51bWJlcklzTmFOKHZhbHVlKSB7XG4gIHJldHVybiB2YWx1ZSAhPT0gdmFsdWU7XG59XG5cbmZ1bmN0aW9uIEV2ZW50RW1pdHRlcigpIHtcbiAgRXZlbnRFbWl0dGVyLmluaXQuY2FsbCh0aGlzKTtcbn1cbm1vZHVsZS5leHBvcnRzID0gRXZlbnRFbWl0dGVyO1xuXG4vLyBCYWNrd2FyZHMtY29tcGF0IHdpdGggbm9kZSAwLjEwLnhcbkV2ZW50RW1pdHRlci5FdmVudEVtaXR0ZXIgPSBFdmVudEVtaXR0ZXI7XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUuX2V2ZW50cyA9IHVuZGVmaW5lZDtcbkV2ZW50RW1pdHRlci5wcm90b3R5cGUuX2V2ZW50c0NvdW50ID0gMDtcbkV2ZW50RW1pdHRlci5wcm90b3R5cGUuX21heExpc3RlbmVycyA9IHVuZGVmaW5lZDtcblxuLy8gQnkgZGVmYXVsdCBFdmVudEVtaXR0ZXJzIHdpbGwgcHJpbnQgYSB3YXJuaW5nIGlmIG1vcmUgdGhhbiAxMCBsaXN0ZW5lcnMgYXJlXG4vLyBhZGRlZCB0byBpdC4gVGhpcyBpcyBhIHVzZWZ1bCBkZWZhdWx0IHdoaWNoIGhlbHBzIGZpbmRpbmcgbWVtb3J5IGxlYWtzLlxudmFyIGRlZmF1bHRNYXhMaXN0ZW5lcnMgPSAxMDtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KEV2ZW50RW1pdHRlciwgJ2RlZmF1bHRNYXhMaXN0ZW5lcnMnLCB7XG4gIGVudW1lcmFibGU6IHRydWUsXG4gIGdldDogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGRlZmF1bHRNYXhMaXN0ZW5lcnM7XG4gIH0sXG4gIHNldDogZnVuY3Rpb24oYXJnKSB7XG4gICAgaWYgKHR5cGVvZiBhcmcgIT09ICdudW1iZXInIHx8IGFyZyA8IDAgfHwgTnVtYmVySXNOYU4oYXJnKSkge1xuICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ1RoZSB2YWx1ZSBvZiBcImRlZmF1bHRNYXhMaXN0ZW5lcnNcIiBpcyBvdXQgb2YgcmFuZ2UuIEl0IG11c3QgYmUgYSBub24tbmVnYXRpdmUgbnVtYmVyLiBSZWNlaXZlZCAnICsgYXJnICsgJy4nKTtcbiAgICB9XG4gICAgZGVmYXVsdE1heExpc3RlbmVycyA9IGFyZztcbiAgfVxufSk7XG5cbkV2ZW50RW1pdHRlci5pbml0ID0gZnVuY3Rpb24oKSB7XG5cbiAgaWYgKHRoaXMuX2V2ZW50cyA9PT0gdW5kZWZpbmVkIHx8XG4gICAgICB0aGlzLl9ldmVudHMgPT09IE9iamVjdC5nZXRQcm90b3R5cGVPZih0aGlzKS5fZXZlbnRzKSB7XG4gICAgdGhpcy5fZXZlbnRzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICB0aGlzLl9ldmVudHNDb3VudCA9IDA7XG4gIH1cblxuICB0aGlzLl9tYXhMaXN0ZW5lcnMgPSB0aGlzLl9tYXhMaXN0ZW5lcnMgfHwgdW5kZWZpbmVkO1xufTtcblxuLy8gT2J2aW91c2x5IG5vdCBhbGwgRW1pdHRlcnMgc2hvdWxkIGJlIGxpbWl0ZWQgdG8gMTAuIFRoaXMgZnVuY3Rpb24gYWxsb3dzXG4vLyB0aGF0IHRvIGJlIGluY3JlYXNlZC4gU2V0IHRvIHplcm8gZm9yIHVubGltaXRlZC5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUuc2V0TWF4TGlzdGVuZXJzID0gZnVuY3Rpb24gc2V0TWF4TGlzdGVuZXJzKG4pIHtcbiAgaWYgKHR5cGVvZiBuICE9PSAnbnVtYmVyJyB8fCBuIDwgMCB8fCBOdW1iZXJJc05hTihuKSkge1xuICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdUaGUgdmFsdWUgb2YgXCJuXCIgaXMgb3V0IG9mIHJhbmdlLiBJdCBtdXN0IGJlIGEgbm9uLW5lZ2F0aXZlIG51bWJlci4gUmVjZWl2ZWQgJyArIG4gKyAnLicpO1xuICB9XG4gIHRoaXMuX21heExpc3RlbmVycyA9IG47XG4gIHJldHVybiB0aGlzO1xufTtcblxuZnVuY3Rpb24gJGdldE1heExpc3RlbmVycyh0aGF0KSB7XG4gIGlmICh0aGF0Ll9tYXhMaXN0ZW5lcnMgPT09IHVuZGVmaW5lZClcbiAgICByZXR1cm4gRXZlbnRFbWl0dGVyLmRlZmF1bHRNYXhMaXN0ZW5lcnM7XG4gIHJldHVybiB0aGF0Ll9tYXhMaXN0ZW5lcnM7XG59XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUuZ2V0TWF4TGlzdGVuZXJzID0gZnVuY3Rpb24gZ2V0TWF4TGlzdGVuZXJzKCkge1xuICByZXR1cm4gJGdldE1heExpc3RlbmVycyh0aGlzKTtcbn07XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUuZW1pdCA9IGZ1bmN0aW9uIGVtaXQodHlwZSkge1xuICB2YXIgYXJncyA9IFtdO1xuICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgYXJncy5wdXNoKGFyZ3VtZW50c1tpXSk7XG4gIHZhciBkb0Vycm9yID0gKHR5cGUgPT09ICdlcnJvcicpO1xuXG4gIHZhciBldmVudHMgPSB0aGlzLl9ldmVudHM7XG4gIGlmIChldmVudHMgIT09IHVuZGVmaW5lZClcbiAgICBkb0Vycm9yID0gKGRvRXJyb3IgJiYgZXZlbnRzLmVycm9yID09PSB1bmRlZmluZWQpO1xuICBlbHNlIGlmICghZG9FcnJvcilcbiAgICByZXR1cm4gZmFsc2U7XG5cbiAgLy8gSWYgdGhlcmUgaXMgbm8gJ2Vycm9yJyBldmVudCBsaXN0ZW5lciB0aGVuIHRocm93LlxuICBpZiAoZG9FcnJvcikge1xuICAgIHZhciBlcjtcbiAgICBpZiAoYXJncy5sZW5ndGggPiAwKVxuICAgICAgZXIgPSBhcmdzWzBdO1xuICAgIGlmIChlciBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICAvLyBOb3RlOiBUaGUgY29tbWVudHMgb24gdGhlIGB0aHJvd2AgbGluZXMgYXJlIGludGVudGlvbmFsLCB0aGV5IHNob3dcbiAgICAgIC8vIHVwIGluIE5vZGUncyBvdXRwdXQgaWYgdGhpcyByZXN1bHRzIGluIGFuIHVuaGFuZGxlZCBleGNlcHRpb24uXG4gICAgICB0aHJvdyBlcjsgLy8gVW5oYW5kbGVkICdlcnJvcicgZXZlbnRcbiAgICB9XG4gICAgLy8gQXQgbGVhc3QgZ2l2ZSBzb21lIGtpbmQgb2YgY29udGV4dCB0byB0aGUgdXNlclxuICAgIHZhciBlcnIgPSBuZXcgRXJyb3IoJ1VuaGFuZGxlZCBlcnJvci4nICsgKGVyID8gJyAoJyArIGVyLm1lc3NhZ2UgKyAnKScgOiAnJykpO1xuICAgIGVyci5jb250ZXh0ID0gZXI7XG4gICAgdGhyb3cgZXJyOyAvLyBVbmhhbmRsZWQgJ2Vycm9yJyBldmVudFxuICB9XG5cbiAgdmFyIGhhbmRsZXIgPSBldmVudHNbdHlwZV07XG5cbiAgaWYgKGhhbmRsZXIgPT09IHVuZGVmaW5lZClcbiAgICByZXR1cm4gZmFsc2U7XG5cbiAgaWYgKHR5cGVvZiBoYW5kbGVyID09PSAnZnVuY3Rpb24nKSB7XG4gICAgUmVmbGVjdEFwcGx5KGhhbmRsZXIsIHRoaXMsIGFyZ3MpO1xuICB9IGVsc2Uge1xuICAgIHZhciBsZW4gPSBoYW5kbGVyLmxlbmd0aDtcbiAgICB2YXIgbGlzdGVuZXJzID0gYXJyYXlDbG9uZShoYW5kbGVyLCBsZW4pO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyArK2kpXG4gICAgICBSZWZsZWN0QXBwbHkobGlzdGVuZXJzW2ldLCB0aGlzLCBhcmdzKTtcbiAgfVxuXG4gIHJldHVybiB0cnVlO1xufTtcblxuZnVuY3Rpb24gX2FkZExpc3RlbmVyKHRhcmdldCwgdHlwZSwgbGlzdGVuZXIsIHByZXBlbmQpIHtcbiAgdmFyIG07XG4gIHZhciBldmVudHM7XG4gIHZhciBleGlzdGluZztcblxuICBpZiAodHlwZW9mIGxpc3RlbmVyICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignVGhlIFwibGlzdGVuZXJcIiBhcmd1bWVudCBtdXN0IGJlIG9mIHR5cGUgRnVuY3Rpb24uIFJlY2VpdmVkIHR5cGUgJyArIHR5cGVvZiBsaXN0ZW5lcik7XG4gIH1cblxuICBldmVudHMgPSB0YXJnZXQuX2V2ZW50cztcbiAgaWYgKGV2ZW50cyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgZXZlbnRzID0gdGFyZ2V0Ll9ldmVudHMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgIHRhcmdldC5fZXZlbnRzQ291bnQgPSAwO1xuICB9IGVsc2Uge1xuICAgIC8vIFRvIGF2b2lkIHJlY3Vyc2lvbiBpbiB0aGUgY2FzZSB0aGF0IHR5cGUgPT09IFwibmV3TGlzdGVuZXJcIiEgQmVmb3JlXG4gICAgLy8gYWRkaW5nIGl0IHRvIHRoZSBsaXN0ZW5lcnMsIGZpcnN0IGVtaXQgXCJuZXdMaXN0ZW5lclwiLlxuICAgIGlmIChldmVudHMubmV3TGlzdGVuZXIgIT09IHVuZGVmaW5lZCkge1xuICAgICAgdGFyZ2V0LmVtaXQoJ25ld0xpc3RlbmVyJywgdHlwZSxcbiAgICAgICAgICAgICAgICAgIGxpc3RlbmVyLmxpc3RlbmVyID8gbGlzdGVuZXIubGlzdGVuZXIgOiBsaXN0ZW5lcik7XG5cbiAgICAgIC8vIFJlLWFzc2lnbiBgZXZlbnRzYCBiZWNhdXNlIGEgbmV3TGlzdGVuZXIgaGFuZGxlciBjb3VsZCBoYXZlIGNhdXNlZCB0aGVcbiAgICAgIC8vIHRoaXMuX2V2ZW50cyB0byBiZSBhc3NpZ25lZCB0byBhIG5ldyBvYmplY3RcbiAgICAgIGV2ZW50cyA9IHRhcmdldC5fZXZlbnRzO1xuICAgIH1cbiAgICBleGlzdGluZyA9IGV2ZW50c1t0eXBlXTtcbiAgfVxuXG4gIGlmIChleGlzdGluZyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgLy8gT3B0aW1pemUgdGhlIGNhc2Ugb2Ygb25lIGxpc3RlbmVyLiBEb24ndCBuZWVkIHRoZSBleHRyYSBhcnJheSBvYmplY3QuXG4gICAgZXhpc3RpbmcgPSBldmVudHNbdHlwZV0gPSBsaXN0ZW5lcjtcbiAgICArK3RhcmdldC5fZXZlbnRzQ291bnQ7XG4gIH0gZWxzZSB7XG4gICAgaWYgKHR5cGVvZiBleGlzdGluZyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgLy8gQWRkaW5nIHRoZSBzZWNvbmQgZWxlbWVudCwgbmVlZCB0byBjaGFuZ2UgdG8gYXJyYXkuXG4gICAgICBleGlzdGluZyA9IGV2ZW50c1t0eXBlXSA9XG4gICAgICAgIHByZXBlbmQgPyBbbGlzdGVuZXIsIGV4aXN0aW5nXSA6IFtleGlzdGluZywgbGlzdGVuZXJdO1xuICAgICAgLy8gSWYgd2UndmUgYWxyZWFkeSBnb3QgYW4gYXJyYXksIGp1c3QgYXBwZW5kLlxuICAgIH0gZWxzZSBpZiAocHJlcGVuZCkge1xuICAgICAgZXhpc3RpbmcudW5zaGlmdChsaXN0ZW5lcik7XG4gICAgfSBlbHNlIHtcbiAgICAgIGV4aXN0aW5nLnB1c2gobGlzdGVuZXIpO1xuICAgIH1cblxuICAgIC8vIENoZWNrIGZvciBsaXN0ZW5lciBsZWFrXG4gICAgbSA9ICRnZXRNYXhMaXN0ZW5lcnModGFyZ2V0KTtcbiAgICBpZiAobSA+IDAgJiYgZXhpc3RpbmcubGVuZ3RoID4gbSAmJiAhZXhpc3Rpbmcud2FybmVkKSB7XG4gICAgICBleGlzdGluZy53YXJuZWQgPSB0cnVlO1xuICAgICAgLy8gTm8gZXJyb3IgY29kZSBmb3IgdGhpcyBzaW5jZSBpdCBpcyBhIFdhcm5pbmdcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZXN0cmljdGVkLXN5bnRheFxuICAgICAgdmFyIHcgPSBuZXcgRXJyb3IoJ1Bvc3NpYmxlIEV2ZW50RW1pdHRlciBtZW1vcnkgbGVhayBkZXRlY3RlZC4gJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGV4aXN0aW5nLmxlbmd0aCArICcgJyArIFN0cmluZyh0eXBlKSArICcgbGlzdGVuZXJzICcgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAnYWRkZWQuIFVzZSBlbWl0dGVyLnNldE1heExpc3RlbmVycygpIHRvICcgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAnaW5jcmVhc2UgbGltaXQnKTtcbiAgICAgIHcubmFtZSA9ICdNYXhMaXN0ZW5lcnNFeGNlZWRlZFdhcm5pbmcnO1xuICAgICAgdy5lbWl0dGVyID0gdGFyZ2V0O1xuICAgICAgdy50eXBlID0gdHlwZTtcbiAgICAgIHcuY291bnQgPSBleGlzdGluZy5sZW5ndGg7XG4gICAgICBQcm9jZXNzRW1pdFdhcm5pbmcodyk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHRhcmdldDtcbn1cblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5hZGRMaXN0ZW5lciA9IGZ1bmN0aW9uIGFkZExpc3RlbmVyKHR5cGUsIGxpc3RlbmVyKSB7XG4gIHJldHVybiBfYWRkTGlzdGVuZXIodGhpcywgdHlwZSwgbGlzdGVuZXIsIGZhbHNlKTtcbn07XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUub24gPSBFdmVudEVtaXR0ZXIucHJvdG90eXBlLmFkZExpc3RlbmVyO1xuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLnByZXBlbmRMaXN0ZW5lciA9XG4gICAgZnVuY3Rpb24gcHJlcGVuZExpc3RlbmVyKHR5cGUsIGxpc3RlbmVyKSB7XG4gICAgICByZXR1cm4gX2FkZExpc3RlbmVyKHRoaXMsIHR5cGUsIGxpc3RlbmVyLCB0cnVlKTtcbiAgICB9O1xuXG5mdW5jdGlvbiBvbmNlV3JhcHBlcigpIHtcbiAgdmFyIGFyZ3MgPSBbXTtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIGFyZ3MucHVzaChhcmd1bWVudHNbaV0pO1xuICBpZiAoIXRoaXMuZmlyZWQpIHtcbiAgICB0aGlzLnRhcmdldC5yZW1vdmVMaXN0ZW5lcih0aGlzLnR5cGUsIHRoaXMud3JhcEZuKTtcbiAgICB0aGlzLmZpcmVkID0gdHJ1ZTtcbiAgICBSZWZsZWN0QXBwbHkodGhpcy5saXN0ZW5lciwgdGhpcy50YXJnZXQsIGFyZ3MpO1xuICB9XG59XG5cbmZ1bmN0aW9uIF9vbmNlV3JhcCh0YXJnZXQsIHR5cGUsIGxpc3RlbmVyKSB7XG4gIHZhciBzdGF0ZSA9IHsgZmlyZWQ6IGZhbHNlLCB3cmFwRm46IHVuZGVmaW5lZCwgdGFyZ2V0OiB0YXJnZXQsIHR5cGU6IHR5cGUsIGxpc3RlbmVyOiBsaXN0ZW5lciB9O1xuICB2YXIgd3JhcHBlZCA9IG9uY2VXcmFwcGVyLmJpbmQoc3RhdGUpO1xuICB3cmFwcGVkLmxpc3RlbmVyID0gbGlzdGVuZXI7XG4gIHN0YXRlLndyYXBGbiA9IHdyYXBwZWQ7XG4gIHJldHVybiB3cmFwcGVkO1xufVxuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLm9uY2UgPSBmdW5jdGlvbiBvbmNlKHR5cGUsIGxpc3RlbmVyKSB7XG4gIGlmICh0eXBlb2YgbGlzdGVuZXIgIT09ICdmdW5jdGlvbicpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdUaGUgXCJsaXN0ZW5lclwiIGFyZ3VtZW50IG11c3QgYmUgb2YgdHlwZSBGdW5jdGlvbi4gUmVjZWl2ZWQgdHlwZSAnICsgdHlwZW9mIGxpc3RlbmVyKTtcbiAgfVxuICB0aGlzLm9uKHR5cGUsIF9vbmNlV3JhcCh0aGlzLCB0eXBlLCBsaXN0ZW5lcikpO1xuICByZXR1cm4gdGhpcztcbn07XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUucHJlcGVuZE9uY2VMaXN0ZW5lciA9XG4gICAgZnVuY3Rpb24gcHJlcGVuZE9uY2VMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcikge1xuICAgICAgaWYgKHR5cGVvZiBsaXN0ZW5lciAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdUaGUgXCJsaXN0ZW5lclwiIGFyZ3VtZW50IG11c3QgYmUgb2YgdHlwZSBGdW5jdGlvbi4gUmVjZWl2ZWQgdHlwZSAnICsgdHlwZW9mIGxpc3RlbmVyKTtcbiAgICAgIH1cbiAgICAgIHRoaXMucHJlcGVuZExpc3RlbmVyKHR5cGUsIF9vbmNlV3JhcCh0aGlzLCB0eXBlLCBsaXN0ZW5lcikpO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuLy8gRW1pdHMgYSAncmVtb3ZlTGlzdGVuZXInIGV2ZW50IGlmIGFuZCBvbmx5IGlmIHRoZSBsaXN0ZW5lciB3YXMgcmVtb3ZlZC5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUucmVtb3ZlTGlzdGVuZXIgPVxuICAgIGZ1bmN0aW9uIHJlbW92ZUxpc3RlbmVyKHR5cGUsIGxpc3RlbmVyKSB7XG4gICAgICB2YXIgbGlzdCwgZXZlbnRzLCBwb3NpdGlvbiwgaSwgb3JpZ2luYWxMaXN0ZW5lcjtcblxuICAgICAgaWYgKHR5cGVvZiBsaXN0ZW5lciAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdUaGUgXCJsaXN0ZW5lclwiIGFyZ3VtZW50IG11c3QgYmUgb2YgdHlwZSBGdW5jdGlvbi4gUmVjZWl2ZWQgdHlwZSAnICsgdHlwZW9mIGxpc3RlbmVyKTtcbiAgICAgIH1cblxuICAgICAgZXZlbnRzID0gdGhpcy5fZXZlbnRzO1xuICAgICAgaWYgKGV2ZW50cyA9PT0gdW5kZWZpbmVkKVxuICAgICAgICByZXR1cm4gdGhpcztcblxuICAgICAgbGlzdCA9IGV2ZW50c1t0eXBlXTtcbiAgICAgIGlmIChsaXN0ID09PSB1bmRlZmluZWQpXG4gICAgICAgIHJldHVybiB0aGlzO1xuXG4gICAgICBpZiAobGlzdCA9PT0gbGlzdGVuZXIgfHwgbGlzdC5saXN0ZW5lciA9PT0gbGlzdGVuZXIpIHtcbiAgICAgICAgaWYgKC0tdGhpcy5fZXZlbnRzQ291bnQgPT09IDApXG4gICAgICAgICAgdGhpcy5fZXZlbnRzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgZGVsZXRlIGV2ZW50c1t0eXBlXTtcbiAgICAgICAgICBpZiAoZXZlbnRzLnJlbW92ZUxpc3RlbmVyKVxuICAgICAgICAgICAgdGhpcy5lbWl0KCdyZW1vdmVMaXN0ZW5lcicsIHR5cGUsIGxpc3QubGlzdGVuZXIgfHwgbGlzdGVuZXIpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHR5cGVvZiBsaXN0ICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHBvc2l0aW9uID0gLTE7XG5cbiAgICAgICAgZm9yIChpID0gbGlzdC5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgICAgIGlmIChsaXN0W2ldID09PSBsaXN0ZW5lciB8fCBsaXN0W2ldLmxpc3RlbmVyID09PSBsaXN0ZW5lcikge1xuICAgICAgICAgICAgb3JpZ2luYWxMaXN0ZW5lciA9IGxpc3RbaV0ubGlzdGVuZXI7XG4gICAgICAgICAgICBwb3NpdGlvbiA9IGk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAocG9zaXRpb24gPCAwKVxuICAgICAgICAgIHJldHVybiB0aGlzO1xuXG4gICAgICAgIGlmIChwb3NpdGlvbiA9PT0gMClcbiAgICAgICAgICBsaXN0LnNoaWZ0KCk7XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgIHNwbGljZU9uZShsaXN0LCBwb3NpdGlvbik7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAobGlzdC5sZW5ndGggPT09IDEpXG4gICAgICAgICAgZXZlbnRzW3R5cGVdID0gbGlzdFswXTtcblxuICAgICAgICBpZiAoZXZlbnRzLnJlbW92ZUxpc3RlbmVyICE9PSB1bmRlZmluZWQpXG4gICAgICAgICAgdGhpcy5lbWl0KCdyZW1vdmVMaXN0ZW5lcicsIHR5cGUsIG9yaWdpbmFsTGlzdGVuZXIgfHwgbGlzdGVuZXIpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLm9mZiA9IEV2ZW50RW1pdHRlci5wcm90b3R5cGUucmVtb3ZlTGlzdGVuZXI7XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUucmVtb3ZlQWxsTGlzdGVuZXJzID1cbiAgICBmdW5jdGlvbiByZW1vdmVBbGxMaXN0ZW5lcnModHlwZSkge1xuICAgICAgdmFyIGxpc3RlbmVycywgZXZlbnRzLCBpO1xuXG4gICAgICBldmVudHMgPSB0aGlzLl9ldmVudHM7XG4gICAgICBpZiAoZXZlbnRzID09PSB1bmRlZmluZWQpXG4gICAgICAgIHJldHVybiB0aGlzO1xuXG4gICAgICAvLyBub3QgbGlzdGVuaW5nIGZvciByZW1vdmVMaXN0ZW5lciwgbm8gbmVlZCB0byBlbWl0XG4gICAgICBpZiAoZXZlbnRzLnJlbW92ZUxpc3RlbmVyID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICB0aGlzLl9ldmVudHMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgICAgICAgIHRoaXMuX2V2ZW50c0NvdW50ID0gMDtcbiAgICAgICAgfSBlbHNlIGlmIChldmVudHNbdHlwZV0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIGlmICgtLXRoaXMuX2V2ZW50c0NvdW50ID09PSAwKVxuICAgICAgICAgICAgdGhpcy5fZXZlbnRzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICAgICAgICBlbHNlXG4gICAgICAgICAgICBkZWxldGUgZXZlbnRzW3R5cGVdO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfVxuXG4gICAgICAvLyBlbWl0IHJlbW92ZUxpc3RlbmVyIGZvciBhbGwgbGlzdGVuZXJzIG9uIGFsbCBldmVudHNcbiAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXMoZXZlbnRzKTtcbiAgICAgICAgdmFyIGtleTtcbiAgICAgICAgZm9yIChpID0gMDsgaSA8IGtleXMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICBrZXkgPSBrZXlzW2ldO1xuICAgICAgICAgIGlmIChrZXkgPT09ICdyZW1vdmVMaXN0ZW5lcicpIGNvbnRpbnVlO1xuICAgICAgICAgIHRoaXMucmVtb3ZlQWxsTGlzdGVuZXJzKGtleSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5yZW1vdmVBbGxMaXN0ZW5lcnMoJ3JlbW92ZUxpc3RlbmVyJyk7XG4gICAgICAgIHRoaXMuX2V2ZW50cyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgICAgIHRoaXMuX2V2ZW50c0NvdW50ID0gMDtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9XG5cbiAgICAgIGxpc3RlbmVycyA9IGV2ZW50c1t0eXBlXTtcblxuICAgICAgaWYgKHR5cGVvZiBsaXN0ZW5lcnMgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgdGhpcy5yZW1vdmVMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcnMpO1xuICAgICAgfSBlbHNlIGlmIChsaXN0ZW5lcnMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAvLyBMSUZPIG9yZGVyXG4gICAgICAgIGZvciAoaSA9IGxpc3RlbmVycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgICAgIHRoaXMucmVtb3ZlTGlzdGVuZXIodHlwZSwgbGlzdGVuZXJzW2ldKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG5mdW5jdGlvbiBfbGlzdGVuZXJzKHRhcmdldCwgdHlwZSwgdW53cmFwKSB7XG4gIHZhciBldmVudHMgPSB0YXJnZXQuX2V2ZW50cztcblxuICBpZiAoZXZlbnRzID09PSB1bmRlZmluZWQpXG4gICAgcmV0dXJuIFtdO1xuXG4gIHZhciBldmxpc3RlbmVyID0gZXZlbnRzW3R5cGVdO1xuICBpZiAoZXZsaXN0ZW5lciA9PT0gdW5kZWZpbmVkKVxuICAgIHJldHVybiBbXTtcblxuICBpZiAodHlwZW9mIGV2bGlzdGVuZXIgPT09ICdmdW5jdGlvbicpXG4gICAgcmV0dXJuIHVud3JhcCA/IFtldmxpc3RlbmVyLmxpc3RlbmVyIHx8IGV2bGlzdGVuZXJdIDogW2V2bGlzdGVuZXJdO1xuXG4gIHJldHVybiB1bndyYXAgP1xuICAgIHVud3JhcExpc3RlbmVycyhldmxpc3RlbmVyKSA6IGFycmF5Q2xvbmUoZXZsaXN0ZW5lciwgZXZsaXN0ZW5lci5sZW5ndGgpO1xufVxuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLmxpc3RlbmVycyA9IGZ1bmN0aW9uIGxpc3RlbmVycyh0eXBlKSB7XG4gIHJldHVybiBfbGlzdGVuZXJzKHRoaXMsIHR5cGUsIHRydWUpO1xufTtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5yYXdMaXN0ZW5lcnMgPSBmdW5jdGlvbiByYXdMaXN0ZW5lcnModHlwZSkge1xuICByZXR1cm4gX2xpc3RlbmVycyh0aGlzLCB0eXBlLCBmYWxzZSk7XG59O1xuXG5FdmVudEVtaXR0ZXIubGlzdGVuZXJDb3VudCA9IGZ1bmN0aW9uKGVtaXR0ZXIsIHR5cGUpIHtcbiAgaWYgKHR5cGVvZiBlbWl0dGVyLmxpc3RlbmVyQ291bnQgPT09ICdmdW5jdGlvbicpIHtcbiAgICByZXR1cm4gZW1pdHRlci5saXN0ZW5lckNvdW50KHR5cGUpO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBsaXN0ZW5lckNvdW50LmNhbGwoZW1pdHRlciwgdHlwZSk7XG4gIH1cbn07XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUubGlzdGVuZXJDb3VudCA9IGxpc3RlbmVyQ291bnQ7XG5mdW5jdGlvbiBsaXN0ZW5lckNvdW50KHR5cGUpIHtcbiAgdmFyIGV2ZW50cyA9IHRoaXMuX2V2ZW50cztcblxuICBpZiAoZXZlbnRzICE9PSB1bmRlZmluZWQpIHtcbiAgICB2YXIgZXZsaXN0ZW5lciA9IGV2ZW50c1t0eXBlXTtcblxuICAgIGlmICh0eXBlb2YgZXZsaXN0ZW5lciA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgcmV0dXJuIDE7XG4gICAgfSBlbHNlIGlmIChldmxpc3RlbmVyICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybiBldmxpc3RlbmVyLmxlbmd0aDtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gMDtcbn1cblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5ldmVudE5hbWVzID0gZnVuY3Rpb24gZXZlbnROYW1lcygpIHtcbiAgcmV0dXJuIHRoaXMuX2V2ZW50c0NvdW50ID4gMCA/IFJlZmxlY3RPd25LZXlzKHRoaXMuX2V2ZW50cykgOiBbXTtcbn07XG5cbmZ1bmN0aW9uIGFycmF5Q2xvbmUoYXJyLCBuKSB7XG4gIHZhciBjb3B5ID0gbmV3IEFycmF5KG4pO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IG47ICsraSlcbiAgICBjb3B5W2ldID0gYXJyW2ldO1xuICByZXR1cm4gY29weTtcbn1cblxuZnVuY3Rpb24gc3BsaWNlT25lKGxpc3QsIGluZGV4KSB7XG4gIGZvciAoOyBpbmRleCArIDEgPCBsaXN0Lmxlbmd0aDsgaW5kZXgrKylcbiAgICBsaXN0W2luZGV4XSA9IGxpc3RbaW5kZXggKyAxXTtcbiAgbGlzdC5wb3AoKTtcbn1cblxuZnVuY3Rpb24gdW53cmFwTGlzdGVuZXJzKGFycikge1xuICB2YXIgcmV0ID0gbmV3IEFycmF5KGFyci5sZW5ndGgpO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IHJldC5sZW5ndGg7ICsraSkge1xuICAgIHJldFtpXSA9IGFycltpXS5saXN0ZW5lciB8fCBhcnJbaV07XG4gIH1cbiAgcmV0dXJuIHJldDtcbn1cbiIsIm1vZHVsZS5leHBvcnRzID0ge1xuICBUcmFjazogcmVxdWlyZSgnLi9zcmMvdHJhY2snKS5kZWZhdWx0LFxuICBUcmFja3M6IHJlcXVpcmUoJy4vc3JjL3RyYWNrJykuVHJhY2tzLFxuICBBdWRpb1RyYWNrOiByZXF1aXJlKCcuL3NyYy90cmFjaycpLkF1ZGlvVHJhY2ssXG4gIFZpZGVvVHJhY2s6IHJlcXVpcmUoJy4vc3JjL3RyYWNrJykuVmlkZW9UcmFjayxcblxuICBYZ0J1ZmZlcjogcmVxdWlyZSgnLi9zcmMvYnVmZmVyJykuWGdCdWZmZXIsXG4gIFJlbXV4QnVmZmVyOiByZXF1aXJlKCcuL3NyYy9idWZmZXInKS5SZW11eEJ1ZmZlcixcblxuICBQcmVTb3VyY2U6IHJlcXVpcmUoJy4vc3JjL3ByZXNvdWNlJykuZGVmYXVsdFxufTtcbiIsImV4cG9ydCBjbGFzcyBYZ0J1ZmZlciB7XG4gIC8qKlxuICAgKiBBIGJ1ZmZlciB0byBzdG9yZSBsb2FkZWQgZGF0YS5cbiAgICpcbiAgICogQGNsYXNzIExvYWRlckJ1ZmZlclxuICAgKiBAcGFyYW0ge251bWJlcn0gbGVuZ3RoIC0gT3B0aW9uYWwgdGhlIGJ1ZmZlciBzaXplXG4gICAqL1xuICBjb25zdHJ1Y3RvciAobGVuZ3RoKSB7XG4gICAgdGhpcy5sZW5ndGggPSBsZW5ndGggfHwgMFxuICAgIHRoaXMuaGlzdG9yeUxlbiA9IGxlbmd0aCB8fCAwXG4gICAgdGhpcy5hcnJheSA9IFtdXG4gICAgdGhpcy5vZmZzZXQgPSAwXG4gIH1cblxuICAvKipcbiAgICogVGhlIGZ1bmN0aW9uIHRvIHB1c2ggZGF0YS5cbiAgICpcbiAgICogQHBhcmFtIHtudW1iZXJ9IGRhdGEgLSBUaGUgZGF0YSB0byBwdXNoIGludG8gdGhlIGJ1ZmZlclxuICAgKi9cbiAgcHVzaCAoZGF0YSkge1xuICAgIHRoaXMuYXJyYXkucHVzaChkYXRhKVxuICAgIHRoaXMubGVuZ3RoICs9IGRhdGEuYnl0ZUxlbmd0aFxuICAgIHRoaXMuaGlzdG9yeUxlbiArPSBkYXRhLmJ5dGVMZW5ndGhcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgZnVuY3Rpb24gdG8gc2hpZnQgZGF0YS5cbiAgICpcbiAgICogQHBhcmFtIHtudW1iZXJ9IGxlbmd0aCAtIFRoZSBzaXplIG9mIHNoaWZ0LlxuICAgKi9cbiAgc2hpZnQgKGxlbmd0aCkge1xuICAgIGlmICh0aGlzLmFycmF5Lmxlbmd0aCA8IDEpIHtcbiAgICAgIHJldHVybiBuZXcgVWludDhBcnJheSgwKVxuICAgIH1cblxuICAgIGlmIChsZW5ndGggPT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIHRoaXMuX3NoaWZ0QnVmZmVyKClcbiAgICB9XG4gICAgaWYgKCh0aGlzLm9mZnNldCArIGxlbmd0aCkgPT09IHRoaXMuYXJyYXlbMF0ubGVuZ3RoKSB7XG4gICAgICBsZXQgcmV0ID0gdGhpcy5hcnJheVswXS5zbGljZSh0aGlzLm9mZnNldCwgdGhpcy5vZmZzZXQgKyBsZW5ndGgpXG4gICAgICB0aGlzLm9mZnNldCA9IDBcbiAgICAgIHRoaXMuYXJyYXkuc2hpZnQoKVxuICAgICAgdGhpcy5sZW5ndGggLT0gbGVuZ3RoXG4gICAgICByZXR1cm4gcmV0XG4gICAgfVxuXG4gICAgaWYgKCh0aGlzLm9mZnNldCArIGxlbmd0aCkgPCB0aGlzLmFycmF5WzBdLmxlbmd0aCkge1xuICAgICAgbGV0IHJldCA9IHRoaXMuYXJyYXlbMF0uc2xpY2UodGhpcy5vZmZzZXQsIHRoaXMub2Zmc2V0ICsgbGVuZ3RoKVxuICAgICAgdGhpcy5vZmZzZXQgKz0gbGVuZ3RoXG4gICAgICB0aGlzLmxlbmd0aCAtPSBsZW5ndGhcbiAgICAgIHJldHVybiByZXRcbiAgICB9XG5cbiAgICBsZXQgcmV0ID0gbmV3IFVpbnQ4QXJyYXkobGVuZ3RoKVxuICAgIGxldCB0bXBvZmYgPSAwXG4gICAgd2hpbGUgKHRoaXMuYXJyYXkubGVuZ3RoID4gMCAmJiBsZW5ndGggPiAwKSB7XG4gICAgICBpZiAoKHRoaXMub2Zmc2V0ICsgbGVuZ3RoKSA8IHRoaXMuYXJyYXlbMF0ubGVuZ3RoKSB7XG4gICAgICAgIGxldCB0bXAgPSB0aGlzLmFycmF5WzBdLnNsaWNlKHRoaXMub2Zmc2V0LCB0aGlzLm9mZnNldCArIGxlbmd0aClcbiAgICAgICAgcmV0LnNldCh0bXAsIHRtcG9mZilcbiAgICAgICAgdGhpcy5vZmZzZXQgKz0gbGVuZ3RoXG4gICAgICAgIHRoaXMubGVuZ3RoIC09IGxlbmd0aFxuICAgICAgICBsZW5ndGggPSAwXG4gICAgICAgIGJyZWFrXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBsZXQgdGVtcGxlbmd0aCA9IHRoaXMuYXJyYXlbMF0ubGVuZ3RoIC0gdGhpcy5vZmZzZXRcbiAgICAgICAgcmV0LnNldCh0aGlzLmFycmF5WzBdLnNsaWNlKHRoaXMub2Zmc2V0LCB0aGlzLmFycmF5WzBdLmxlbmd0aCksIHRtcG9mZilcbiAgICAgICAgdGhpcy5hcnJheS5zaGlmdCgpXG4gICAgICAgIHRoaXMub2Zmc2V0ID0gMFxuICAgICAgICB0bXBvZmYgKz0gdGVtcGxlbmd0aFxuICAgICAgICB0aGlzLmxlbmd0aCAtPSB0ZW1wbGVuZ3RoXG4gICAgICAgIGxlbmd0aCAtPSB0ZW1wbGVuZ3RoXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiByZXRcbiAgfVxuXG4gIC8qKlxuICAgKiBGdW5jdGlvbiB0byBjbGVhciB0aGUgYnVmZmVyLlxuICAgKi9cbiAgY2xlYXIgKCkge1xuICAgIHRoaXMuYXJyYXkgPSBbXVxuICAgIHRoaXMubGVuZ3RoID0gMFxuICAgIHRoaXMub2Zmc2V0ID0gMFxuICB9XG5cbiAgZGVzdHJveSAoKSB7XG4gICAgdGhpcy5jbGVhcigpXG4gICAgdGhpcy5oaXN0b3J5TGVuID0gMFxuICB9XG5cbiAgLyoqXG4gICAqIEZ1bmN0aW9uIHRvIHNoaWZ0IG9uZSB1bml0OEFycmF5LlxuICAgKi9cbiAgX3NoaWZ0QnVmZmVyICgpIHtcbiAgICB0aGlzLmxlbmd0aCAtPSB0aGlzLmFycmF5WzBdLmxlbmd0aFxuICAgIHRoaXMub2Zmc2V0ID0gMFxuICAgIHJldHVybiB0aGlzLmFycmF5LnNoaWZ0KClcbiAgfVxuXG4gIC8qKlxuICAgKiBDb252ZXJ0IHVpbnQ4IGRhdGEgdG8gbnVtYmVyLlxuICAgKlxuICAgKiBAcGFyYW0ge251bWJlcn0gc3RhcnQgLSB0aGUgc3RhcnQgcG9zdGlvbi5cbiAgICogQHBhcmFtIHtudW1iZXJ9IGxlbmd0aCAtIHRoZSBsZW5ndGggb2YgZGF0YS5cbiAgICovXG4gIHRvSW50IChzdGFydCwgbGVuZ3RoKSB7XG4gICAgbGV0IHJldEludCA9IDBcbiAgICBsZXQgaSA9IHRoaXMub2Zmc2V0ICsgc3RhcnRcbiAgICB3aGlsZSAoaSA8IHRoaXMub2Zmc2V0ICsgbGVuZ3RoICsgc3RhcnQpIHtcbiAgICAgIGlmIChpIDwgdGhpcy5hcnJheVswXS5sZW5ndGgpIHtcbiAgICAgICAgcmV0SW50ID0gcmV0SW50ICogMjU2ICsgdGhpcy5hcnJheVswXVtpXVxuICAgICAgfSBlbHNlIGlmICh0aGlzLmFycmF5WzFdKSB7XG4gICAgICAgIHJldEludCA9IHJldEludCAqIDI1NiArIHRoaXMuYXJyYXlbMV1baSAtIHRoaXMuYXJyYXlbMF0ubGVuZ3RoXVxuICAgICAgfVxuXG4gICAgICBpKytcbiAgICB9XG4gICAgcmV0dXJuIHJldEludFxuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBSZW11eEJ1ZmZlciB7XG4gIGNvbnN0cnVjdG9yICgpIHtcbiAgICB0aGlzLnZpZGVvID0gW11cbiAgICB0aGlzLmF1ZGlvID0gW11cbiAgfVxuXG4gIGRlc3Ryb3kgKCkge1xuICAgIHRoaXMudmlkZW8gPSBbXVxuICAgIHRoaXMuYXVkaW8gPSBbXVxuICB9XG59XG4iLCJjbGFzcyBTb3VyY2Uge1xuICBjb25zdHJ1Y3RvciAoKSB7XG4gICAgdGhpcy5taW1ldHlwZSA9ICcnO1xuICAgIHRoaXMuaW5pdCA9IG51bGw7XG4gICAgdGhpcy5kYXRhID0gW107XG4gIH1cbn1cblxuY2xhc3MgUHJlU291cmNlIHtcbiAgY29uc3RydWN0b3IgKCkge1xuICAgIHRoaXMuc291cmNlcyA9IHt9O1xuICB9XG5cbiAgZ2V0U291cmNlIChzb3VyY2UpIHtcbiAgICByZXR1cm4gdGhpcy5zb3VyY2VzW3NvdXJjZV07XG4gIH1cblxuICBjcmVhdGVTb3VyY2UgKG5hbWUpIHtcbiAgICB0aGlzLnNvdXJjZXNbbmFtZV0gPSBuZXcgU291cmNlKCk7XG4gICAgcmV0dXJuIHRoaXMuc291cmNlc1tuYW1lXTtcbiAgfVxuXG4gIGNsZWFyICgpIHtcbiAgICB0aGlzLnNvdXJjZXMgPSB7fTtcbiAgfVxuXG4gIGRlc3Ryb3kgKCkge1xuICAgIHRoaXMuc291cmNlcyA9IHt9O1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFByZVNvdXJjZTtcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFRyYWNrIHtcbiAgLyoqXG4gICAqIFRoZSBjb25zdHJ1Y3Rvci5cbiAgICovXG4gIGNvbnN0cnVjdG9yICgpIHtcbiAgICB0aGlzLmlkID0gLTFcbiAgICB0aGlzLnNlcXVlbmNlTnVtYmVyID0gMFxuICAgIHRoaXMuc2FtcGxlcyA9IFtdXG4gICAgdGhpcy5kcm9wcGVkU2FtcGxlcyA9IFtdXG4gICAgdGhpcy5sZW5ndGggPSAwXG4gIH1cblxuICAvKipcbiAgICogUmVzZXQgdGhlIHRyYWNrLlxuICAgKi9cbiAgcmVzZXQgKCkge1xuICAgIHRoaXMuc2VxdWVuY2VOdW1iZXIgPSAwXG4gICAgdGhpcy5zYW1wbGVzID0gW11cbiAgICB0aGlzLmxlbmd0aCA9IDBcbiAgfVxuICAvKipcbiAgICogZGVzdHJveSB0aGUgdHJhY2suXG4gICAqL1xuICBkaXN0cm95ICgpIHtcbiAgICB0aGlzLnJlc2V0KClcbiAgICB0aGlzLmlkID0gLTFcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgQXVkaW9UcmFjayBleHRlbmRzIFRyYWNrIHtcbiAgLyoqXG4gICAqIFRoZSBjb25zdHJ1Y3RvciBmb3IgYXVkaW8gdHJhY2suXG4gICAqL1xuICBjb25zdHJ1Y3RvciAoKSB7XG4gICAgc3VwZXIoKVxuICAgIHRoaXMuVEFHID0gJ0F1ZGlvVHJhY2snXG4gICAgdGhpcy50eXBlID0gJ2F1ZGlvJ1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBWaWRlb1RyYWNrIGV4dGVuZHMgVHJhY2sge1xuICAvKipcbiAgICogVGhlIGNvbnN0cnVjdG9yIGZvciB2aWRlbyB0cmFjay5cbiAgICovXG4gIGNvbnN0cnVjdG9yICgpIHtcbiAgICBzdXBlcigpXG4gICAgdGhpcy5UQUcgPSAnVmlkZW9UcmFjaydcbiAgICB0aGlzLnR5cGUgPSAndmlkZW8nXG4gICAgdGhpcy5kcm9wcGVkID0gMFxuICB9XG4gIC8qKlxuICAgKiByZXNldCB0aGUgdmlkZW8gdHJhY2suXG4gICAqL1xuICByZXNldCAoKSB7XG4gICAgdGhpcy5zZXF1ZW5jZU51bWJlciA9IDBcbiAgICB0aGlzLnNhbXBsZXMgPSBbXVxuICAgIHRoaXMubGVuZ3RoID0gMFxuICAgIHRoaXMuZHJvcHBlZCA9IDBcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgVHJhY2tzIHtcbiAgY29uc3RydWN0b3IgKCkge1xuICAgIHRoaXMuYXVkaW9UcmFjayA9IG51bGxcbiAgICB0aGlzLnZpZGVvVHJhY2sgPSBudWxsXG4gIH1cbn1cbiIsIm1vZHVsZS5leHBvcnRzID0ge1xuICBOYWx1bml0OiByZXF1aXJlKCcuL3NyYy9oMjY0L25hbHVuaXQnKS5kZWZhdWx0LFxuICBTcHNQYXJzZXI6IHJlcXVpcmUoJy4vc3JjL2gyNjQvbmFsdW5pdC9zcHMnKS5kZWZhdWx0LFxuXG4gIENvbXBhdGliaWxpdHk6IHJlcXVpcmUoJy4vc3JjL2NvbXBhdGliaWxpdHknKS5kZWZhdWx0XG59O1xuIiwiXG5jbGFzcyBBQUMge1xuXG4gIHN0YXRpYyBnZXRTaWxlbnRGcmFtZShjb2RlYywgY2hhbm5lbENvdW50KSB7XG4gICAgaWYgKGNvZGVjID09PSAnbXA0YS40MC4yJykge1xuICAgICAgLy8gaGFuZGxlIExDLUFBQ1xuICAgICAgaWYgKGNoYW5uZWxDb3VudCA9PT0gMSkge1xuICAgICAgICByZXR1cm4gbmV3IFVpbnQ4QXJyYXkoWzB4MDAsIDB4YzgsIDB4MDAsIDB4ODAsIDB4MjMsIDB4ODBdKTtcbiAgICAgIH0gZWxzZSBpZiAoY2hhbm5lbENvdW50ID09PSAyKSB7XG4gICAgICAgIHJldHVybiBuZXcgVWludDhBcnJheShbMHgyMSwgMHgwMCwgMHg0OSwgMHg5MCwgMHgwMiwgMHgxOSwgMHgwMCwgMHgyMywgMHg4MF0pO1xuICAgICAgfSBlbHNlIGlmIChjaGFubmVsQ291bnQgPT09IDMpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBVaW50OEFycmF5KFsweDAwLCAweGM4LCAweDAwLCAweDgwLCAweDIwLCAweDg0LCAweDAxLCAweDI2LCAweDQwLCAweDA4LCAweDY0LCAweDAwLCAweDhlXSk7XG4gICAgICB9IGVsc2UgaWYgKGNoYW5uZWxDb3VudCA9PT0gNCkge1xuICAgICAgICByZXR1cm4gbmV3IFVpbnQ4QXJyYXkoWzB4MDAsIDB4YzgsIDB4MDAsIDB4ODAsIDB4MjAsIDB4ODQsIDB4MDEsIDB4MjYsIDB4NDAsIDB4MDgsIDB4NjQsIDB4MDAsIDB4ODAsIDB4MmMsIDB4ODAsIDB4MDgsIDB4MDIsIDB4MzhdKTtcbiAgICAgIH0gZWxzZSBpZiAoY2hhbm5lbENvdW50ID09PSA1KSB7XG4gICAgICAgIHJldHVybiBuZXcgVWludDhBcnJheShbMHgwMCwgMHhjOCwgMHgwMCwgMHg4MCwgMHgyMCwgMHg4NCwgMHgwMSwgMHgyNiwgMHg0MCwgMHgwOCwgMHg2NCwgMHgwMCwgMHg4MiwgMHgzMCwgMHgwNCwgMHg5OSwgMHgwMCwgMHgyMSwgMHg5MCwgMHgwMiwgMHgzOF0pO1xuICAgICAgfSBlbHNlIGlmIChjaGFubmVsQ291bnQgPT09IDYpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBVaW50OEFycmF5KFsweDAwLCAweGM4LCAweDAwLCAweDgwLCAweDIwLCAweDg0LCAweDAxLCAweDI2LCAweDQwLCAweDA4LCAweDY0LCAweDAwLCAweDgyLCAweDMwLCAweDA0LCAweDk5LCAweDAwLCAweDIxLCAweDkwLCAweDAyLCAweDAwLCAweGIyLCAweDAwLCAweDIwLCAweDA4LCAweGUwXSk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIGhhbmRsZSBIRS1BQUMgKG1wNGEuNDAuNSAvIG1wNGEuNDAuMjkpXG4gICAgICBpZiAoY2hhbm5lbENvdW50ID09PSAxKSB7XG4gICAgICAgIC8vIGZmbXBlZyAteSAtZiBsYXZmaSAtaSBcImFldmFsc3JjPTA6ZD0wLjA1XCIgLWM6YSBsaWJmZGtfYWFjIC1wcm9maWxlOmEgYWFjX2hlIC1iOmEgNGsgb3V0cHV0LmFhYyAmJiBoZXhkdW1wIC12IC1lICcxNi8xIFwiMHgleCxcIiBcIlxcblwiJyAtdiBvdXRwdXQuYWFjXG4gICAgICAgIHJldHVybiBuZXcgVWludDhBcnJheShbMHgxLCAweDQwLCAweDIyLCAweDgwLCAweGEzLCAweDRlLCAweGU2LCAweDgwLCAweGJhLCAweDgsIDB4MCwgMHgwLCAweDAsIDB4MWMsIDB4NiwgMHhmMSwgMHhjMSwgMHhhLCAweDVhLCAweDVhLCAweDVhLCAweDVhLCAweDVhLCAweDVhLCAweDVhLCAweDVhLCAweDVhLCAweDVhLCAweDVhLCAweDVhLCAweDVhLCAweDVhLCAweDVhLCAweDVhLCAweDVhLCAweDVhLCAweDVhLCAweDVhLCAweDVhLCAweDVhLCAweDVhLCAweDVhLCAweDVhLCAweDVhLCAweDVhLCAweDVhLCAweDVhLCAweDVhLCAweDVhLCAweDVhLCAweDVhLCAweDVhLCAweDVhLCAweDVhLCAweDVhLCAweDVhLCAweDVhLCAweDVhLCAweDVlXSk7XG4gICAgICB9IGVsc2UgaWYgKGNoYW5uZWxDb3VudCA9PT0gMikge1xuICAgICAgICAvLyBmZm1wZWcgLXkgLWYgbGF2ZmkgLWkgXCJhZXZhbHNyYz0wfDA6ZD0wLjA1XCIgLWM6YSBsaWJmZGtfYWFjIC1wcm9maWxlOmEgYWFjX2hlX3YyIC1iOmEgNGsgb3V0cHV0LmFhYyAmJiBoZXhkdW1wIC12IC1lICcxNi8xIFwiMHgleCxcIiBcIlxcblwiJyAtdiBvdXRwdXQuYWFjXG4gICAgICAgIHJldHVybiBuZXcgVWludDhBcnJheShbMHgxLCAweDQwLCAweDIyLCAweDgwLCAweGEzLCAweDVlLCAweGU2LCAweDgwLCAweGJhLCAweDgsIDB4MCwgMHgwLCAweDAsIDB4MCwgMHg5NSwgMHgwLCAweDYsIDB4ZjEsIDB4YTEsIDB4YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1ZV0pO1xuICAgICAgfSBlbHNlIGlmIChjaGFubmVsQ291bnQgPT09IDMpIHtcbiAgICAgICAgLy8gZmZtcGVnIC15IC1mIGxhdmZpIC1pIFwiYWV2YWxzcmM9MHwwfDA6ZD0wLjA1XCIgLWM6YSBsaWJmZGtfYWFjIC1wcm9maWxlOmEgYWFjX2hlX3YyIC1iOmEgNGsgb3V0cHV0LmFhYyAmJiBoZXhkdW1wIC12IC1lICcxNi8xIFwiMHgleCxcIiBcIlxcblwiJyAtdiBvdXRwdXQuYWFjXG4gICAgICAgIHJldHVybiBuZXcgVWludDhBcnJheShbMHgxLCAweDQwLCAweDIyLCAweDgwLCAweGEzLCAweDVlLCAweGU2LCAweDgwLCAweGJhLCAweDgsIDB4MCwgMHgwLCAweDAsIDB4MCwgMHg5NSwgMHgwLCAweDYsIDB4ZjEsIDB4YTEsIDB4YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1YSwgMHg1ZV0pO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG59XG5cbmV4cG9ydCBkZWZhdWx0IEFBQztcbiIsImltcG9ydCB7RVZFTlRTfSBmcm9tICd4Z3BsYXllci11dGlscydcbmltcG9ydCBBQUMgZnJvbSAnLi9hYWMvYWFjLWhlbHBlcidcblxuY29uc3Qge1JFTVVYX0VWRU5UU30gPSBFVkVOVFNcblxuY2xhc3MgQ29tcGF0aWJpbGl0eSB7XG4gIGNvbnN0cnVjdG9yICgpIHtcbiAgICB0aGlzLm5leHRBdWRpb0R0cyA9IDAgLy8g5qih5ouf5LiL5LiA5q616Z+z6aKR5pWw5o2u55qEZHRzXG4gICAgdGhpcy5uZXh0VmlkZW9EdHMgPSAwIC8vIOaooeaLn+S4i+S4gOauteinhumikeaVsOaNrueahGR0c1xuXG4gICAgdGhpcy5sYXN0QXVkaW9TYW1wbGVzTGVuID0gMCAvLyDkuIrkuIDmrrXpn7PpopHmlbDmja7nmoTplb/luqZcbiAgICB0aGlzLmxhc3RWaWRlb1NhbXBsZXNMZW4gPSAwIC8vIOS4iuS4gOauteinhumikeaVsOaNrueahOmVv+W6plxuXG4gICAgdGhpcy5sYXN0VmlkZW9EdHMgPSB1bmRlZmluZWQgLy8g5LiK5LiA5q616Z+z6aKR5pWw5o2u55qE6ZW/5bqmXG4gICAgdGhpcy5sYXN0QXVkaW9EdHMgPSB1bmRlZmluZWQgLy8g5LiK5LiA5q616KeG6aKR5pWw5o2u55qE6ZW/5bqmXG5cbiAgICB0aGlzLmFsbEF1ZGlvU2FtcGxlc0NvdW50ID0gMCAvLyDpn7PpopHmgLvmlbDmja7ph48o5Y6f5aeL5binKVxuICAgIHRoaXMuYWxsVmlkZW9TYW1wbGVzQ291bnQgPSAwIC8vIOinhumikeaAu+aVsOaNrumHjyjljp/lp4vluKcpXG5cbiAgICB0aGlzLl9maXJzdEF1ZGlvU2FtcGxlID0gbnVsbFxuICAgIHRoaXMuX2ZpcnN0VmlkZW9TYW1wbGUgPSBudWxsXG5cbiAgICB0aGlzLmZpbGxlZEF1ZGlvU2FtcGxlcyA9IFtdIC8vIOihpeWFhemfs+mikeW4p++8iO+8iVxuICAgIHRoaXMuZmlsbGVkVmlkZW9TYW1wbGVzID0gW10gLy8g6KGl5YWF6KeG6aKR5bin77yI77yJXG4gIH1cblxuICBpbml0ICgpIHtcbiAgICB0aGlzLmJlZm9yZShSRU1VWF9FVkVOVFMuUkVNVVhfTUVESUEsIHRoaXMuZG9GaXguYmluZCh0aGlzKSlcbiAgfVxuXG4gIHJlc2V0ICgpIHtcbiAgICB0aGlzLm5leHRBdWRpb0R0cyA9IDAgLy8g5qih5ouf5LiL5LiA5q616Z+z6aKR5pWw5o2u55qEZHRzXG4gICAgdGhpcy5uZXh0VmlkZW9EdHMgPSAwIC8vIOaooeaLn+S4i+S4gOauteinhumikeaVsOaNrueahGR0c1xuXG4gICAgdGhpcy5sYXN0QXVkaW9TYW1wbGVzTGVuID0gMCAvLyDkuIrkuIDmrrXpn7PpopHmlbDmja7nmoTplb/luqZcbiAgICB0aGlzLmxhc3RWaWRlb1NhbXBsZXNMZW4gPSAwIC8vIOS4iuS4gOauteinhumikeaVsOaNrueahOmVv+W6plxuXG4gICAgdGhpcy5sYXN0VmlkZW9EdHMgPSB1bmRlZmluZWQgLy8g5LiK5LiA5q616Z+z6aKR5pWw5o2u55qE6ZW/5bqmXG4gICAgdGhpcy5sYXN0QXVkaW9EdHMgPSB1bmRlZmluZWQgLy8g5LiK5LiA5q616KeG6aKR5pWw5o2u55qE6ZW/5bqmXG5cbiAgICB0aGlzLmFsbEF1ZGlvU2FtcGxlc0NvdW50ID0gMCAvLyDpn7PpopHmgLvmlbDmja7ph48o5Y6f5aeL5binKVxuICAgIHRoaXMuYWxsVmlkZW9TYW1wbGVzQ291bnQgPSAwIC8vIOinhumikeaAu+aVsOaNrumHjyjljp/lp4vluKcpXG5cbiAgICB0aGlzLl9maXJzdEF1ZGlvU2FtcGxlID0gbnVsbFxuICAgIHRoaXMuX2ZpcnN0VmlkZW9TYW1wbGUgPSBudWxsXG5cbiAgICB0aGlzLmZpbGxlZEF1ZGlvU2FtcGxlcyA9IFtdIC8vIOihpeWFhemfs+mikeW4p++8iO+8iVxuICAgIHRoaXMuZmlsbGVkVmlkZW9TYW1wbGVzID0gW10gLy8g6KGl5YWF6KeG6aKR5bin77yI77yJXG4gIH1cblxuICBkb0ZpeCAoKSB7XG4gICAgY29uc3QgeyBpc0ZpcnN0QXVkaW9TYW1wbGVzLCBpc0ZpcnN0VmlkZW9TYW1wbGVzIH0gPSB0aGlzLmdldEZpcnN0U2FtcGxlKClcblxuICAgIHRoaXMucmVtb3ZlSW52YWxpZFNhbXBsZXMoKVxuXG4gICAgdGhpcy5yZWNvcmRTYW1wbGVzQ291bnQoKVxuXG4gICAgaWYgKHRoaXMuX2ZpcnN0VmlkZW9TYW1wbGUpIHtcbiAgICAgIHRoaXMuZml4UmVmU2FtcGxlRHVyYXRpb24odGhpcy52aWRlb1RyYWNrLm1ldGEsIHRoaXMudmlkZW9UcmFjay5zYW1wbGVzKVxuICAgIH1cbiAgICBpZiAodGhpcy5fZmlyc3RBdWRpb1NhbXBsZSkge1xuICAgICAgdGhpcy5maXhSZWZTYW1wbGVEdXJhdGlvbih0aGlzLmF1ZGlvVHJhY2subWV0YSwgdGhpcy5hdWRpb1RyYWNrLnNhbXBsZXMpXG4gICAgfVxuXG4gICAgdGhpcy5kb0ZpeFZpZGVvKGlzRmlyc3RWaWRlb1NhbXBsZXMpXG4gICAgdGhpcy5kb0ZpeEF1ZGlvKGlzRmlyc3RBdWRpb1NhbXBsZXMpXG4gIH1cblxuICBkb0ZpeFZpZGVvIChmaXJzdCkge1xuICAgIGxldCB7c2FtcGxlczogdmlkZW9TYW1wbGVzLCBtZXRhfSA9IHRoaXMudmlkZW9UcmFja1xuXG4gICAgaWYgKG1ldGEuZnJhbWVSYXRlICYmIG1ldGEuZnJhbWVSYXRlLmZpeGVkID09PSBmYWxzZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICghdmlkZW9TYW1wbGVzIHx8ICF2aWRlb1NhbXBsZXMubGVuZ3RoIHx8ICF0aGlzLl9maXJzdFZpZGVvU2FtcGxlKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICAvLyBjb25zb2xlLmxvZyhgdmlkZW8gbGFzdFNhbXBsZSwgJHt2aWRlb1NhbXBsZXNbdmlkZW9TYW1wbGVzLmxlbmd0aCAtIDFdLmR0c31gKVxuXG4gICAgY29uc3QgZmlyc3RTYW1wbGUgPSB2aWRlb1NhbXBsZXNbMF1cbiAgICBjb25zdCBmaXJzdER0cyA9IGZpcnN0U2FtcGxlLmR0c1xuXG4gICAgY29uc3Qgc2FtcGxlc0xlbiA9IHZpZGVvU2FtcGxlcy5sZW5ndGg7XG5cbiAgICAvLyBzdGVwMS4g5L+u5aSN5LiOYXVkaW/pppbluKflt67ot53lpKrlpKfnmoTpl67pophcbiAgICBpZiAoZmlyc3QgJiYgdGhpcy5fZmlyc3RBdWRpb1NhbXBsZSkge1xuICAgICAgY29uc3QgdmlkZW9GaXJzdER0cyA9IHRoaXMuX2ZpcnN0VmlkZW9TYW1wbGUuZHRzXG4gICAgICBjb25zdCBhdWRpb0ZpcnN0RHRzID0gdGhpcy5fZmlyc3RBdWRpb1NhbXBsZS5kdHNcbiAgICAgIGNvbnN0IGdhcCA9IHZpZGVvRmlyc3REdHMgLSBhdWRpb0ZpcnN0RHRzXG4gICAgICBpZiAoZ2FwID4gKDIgKiBtZXRhLnJlZlNhbXBsZUR1cmF0aW9uKSkge1xuICAgICAgICBjb25zdCBmaWxsQ291bnQgPSBNYXRoLmZsb29yKGdhcCAvIG1ldGEucmVmU2FtcGxlRHVyYXRpb24pXG5cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBmaWxsQ291bnQ7IGkrKykge1xuICAgICAgICAgIGNvbnN0IGNsb25lZEZpcnN0U2FtcGxlID0gT2JqZWN0LmFzc2lnbih7fSwgZmlyc3RTYW1wbGUpIC8vIOinhumikeWktOmDqOW4p+e8uuWksemcgOimgeWkjeWItuesrOS4gOW4p1xuICAgICAgICAgIC8vIOmHjeaWsOiuoeeul3NhbXBsZeeahGR0c+WSjHB0c1xuICAgICAgICAgIGNsb25lZEZpcnN0U2FtcGxlLmR0cyA9IHZpZGVvRmlyc3REdHMgLSAoaSArIDEpICogbWV0YS5yZWZTYW1wbGVEdXJhdGlvblxuICAgICAgICAgIGNsb25lZEZpcnN0U2FtcGxlLnB0cyA9IGNsb25lZEZpcnN0U2FtcGxlLmR0cyArIGNsb25lZEZpcnN0U2FtcGxlLmN0c1xuXG4gICAgICAgICAgdmlkZW9TYW1wbGVzLnVuc2hpZnQoY2xvbmVkRmlyc3RTYW1wbGUpXG5cbiAgICAgICAgICB0aGlzLmZpbGxlZFZpZGVvU2FtcGxlcy5wdXNoKHtcbiAgICAgICAgICAgIGR0czogY2xvbmVkRmlyc3RTYW1wbGUuZHRzLFxuICAgICAgICAgICAgc2l6ZTogY2xvbmVkRmlyc3RTYW1wbGUuZGF0YS5ieXRlTGVuZ3RoXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGxldCBnYXBcbiAgICAvLyBzdGVwMi4g5L+u5aSNc2FtcGxlc+auteS5i+mXtOeahOmXtOi3nemXrumimOOAgVxuICAgIGlmICh0aGlzLm5leHRWaWRlb0R0cykge1xuICAgICAgLy8gc3RlcDEuIOWkhOeQhnNhbXBsZXPmrrXkuYvpl7TnmoTkuKLluKfmg4XlhrVcbiAgICAgIC8vIOW9k+WPkeeOsGR1cmF0aW9u5beu6Led5aSn5LqOMuW4p+aXtui/m+ihjOihpeW4p1xuICAgICAgZ2FwID0gZmlyc3REdHMgLSB0aGlzLm5leHRWaWRlb0R0c1xuICAgICAgY29uc3QgYWJzR2FwID0gTWF0aC5hYnMoZ2FwKVxuICAgICAgaWYgKGdhcCA+ICgyICogbWV0YS5yZWZTYW1wbGVEdXJhdGlvbikpIHtcbiAgICAgICAgY29uc3QgZmlsbEZyYW1lQ291bnQgPSBNYXRoLmZsb29yKGdhcCAvIG1ldGEucmVmU2FtcGxlRHVyYXRpb24pXG5cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBmaWxsRnJhbWVDb3VudDsgaSsrKSB7XG4gICAgICAgICAgY29uc3QgY2xvbmVkU2FtcGxlID0gT2JqZWN0LmFzc2lnbih7fSwgdmlkZW9TYW1wbGVzWzBdKVxuICAgICAgICAgIGNvbnN0IGNvbXB1dGVkID0gZmlyc3REdHMgLSAoaSArIDEpICogbWV0YS5yZWZTYW1wbGVEdXJhdGlvblxuXG4gICAgICAgICAgY2xvbmVkU2FtcGxlLmR0cyA9IGNvbXB1dGVkID4gdGhpcy5uZXh0VmlkZW9EdHMgPyBjb21wdXRlZCA6IHRoaXMubmV4dFZpZGVvRHRzIC8vIOihpeeahOesrOS4gOW4p+S4gOWumuimgeaYr25leHRWaWRlb0R0c1xuICAgICAgICAgIGNsb25lZFNhbXBsZS5wdHMgPSBjbG9uZWRTYW1wbGUuZHRzICsgY2xvbmVkU2FtcGxlLmN0c1xuXG4gICAgICAgICAgdGhpcy52aWRlb1RyYWNrLnNhbXBsZXMudW5zaGlmdChjbG9uZWRTYW1wbGUpXG5cbiAgICAgICAgICB0aGlzLmZpbGxlZFZpZGVvU2FtcGxlcy5wdXNoKHtcbiAgICAgICAgICAgIGR0czogY2xvbmVkU2FtcGxlLmR0cyxcbiAgICAgICAgICAgIHNpemU6IGNsb25lZFNhbXBsZS5kYXRhLmJ5dGVMZW5ndGhcbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGFic0dhcCA8PSAxMCAmJiBhYnNHYXAgPiAwKSB7XG4gICAgICAgIC8vIOW9k+W3rui3neWcqCst5LiA5bin5LmL6Ze05pe25bCG56ys5LiA5bin55qEZHRz5by66KGM5a6a5L2N5Yiw5pyf5pyb5L2N572uXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCfph43lrprkvY3op4bpopHluKdkdHMnLCB2aWRlb1NhbXBsZXNbMF0uZHRzLCB0aGlzLm5leHRWaWRlb0R0cylcbiAgICAgICAgdmlkZW9TYW1wbGVzWzBdLmR0cyA9IHRoaXMubmV4dFZpZGVvRHRzXG4gICAgICAgIHZpZGVvU2FtcGxlc1swXS5vcmlnaW5EdHMgPSB2aWRlb1NhbXBsZXNbMF0uZHRzXG4gICAgICAgIHZpZGVvU2FtcGxlc1swXS5jdHMgPSB2aWRlb1NhbXBsZXNbMF0uY3RzIHx8IHZpZGVvU2FtcGxlc1swXS5wdHMgLSB2aWRlb1NhbXBsZXNbMF0uZHRzXG4gICAgICAgIHZpZGVvU2FtcGxlc1swXS5wdHMgPSB2aWRlb1NhbXBsZXNbMF0uZHRzICsgdmlkZW9TYW1wbGVzWzBdLmN0c1xuICAgICAgfVxuICAgIH1cbiAgICBjb25zdCBsYXN0RHRzID0gdmlkZW9TYW1wbGVzW3ZpZGVvU2FtcGxlcy5sZW5ndGggLSAxXS5kdHM7XG5cbiAgICBjb25zdCBsYXN0U2FtcGxlRHVyYXRpb24gPSB2aWRlb1NhbXBsZXMubGVuZ3RoID49IDIgPyBsYXN0RHRzIC0gdmlkZW9TYW1wbGVzW3ZpZGVvU2FtcGxlcy5sZW5ndGggLSAyXS5kdHMgOiBtZXRhLnJlZlNhbXBsZUR1cmF0aW9uXG5cbiAgICB0aGlzLmxhc3RWaWRlb1NhbXBsZXNMZW4gPSBzYW1wbGVzTGVuXG4gICAgdGhpcy5uZXh0VmlkZW9EdHMgPSBsYXN0RHRzICsgbGFzdFNhbXBsZUR1cmF0aW9uXG4gICAgdGhpcy5sYXN0VmlkZW9EdHMgPSBsYXN0RHRzXG5cbiAgICAvLyBzdGVwMi4g5L+u5aSNc2FtcGxl5q615LmL5YaF55qE6Ze06Led6Zeu6aKYXG4gICAgLy8gc3RlcDMuIOS/ruWkjXNhbXBsZXPmrrXlhoXpg6jnmoRkdHPlvILluLjpl67pophcbiAgICBmb3IgKGxldCBpID0gMCwgbGVuID0gdmlkZW9TYW1wbGVzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICBjb25zdCBjdXJyZW50ID0gdmlkZW9TYW1wbGVzW2ldXG4gICAgICBjb25zdCBuZXh0ID0gdmlkZW9TYW1wbGVzW2kgKyAxXVxuXG4gICAgICBpZiAoIW5leHQpIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGR1cmF0aW9uID0gbmV4dC5kdHMgLSBjdXJyZW50LmR0cztcblxuICAgICAgaWYgKGR1cmF0aW9uID4gKDIgKiBtZXRhLnJlZlNhbXBsZUR1cmF0aW9uKSkge1xuICAgICAgICAvLyDkuKTluKfkuYvpl7Tpl7TpmpTlpKrlpKfvvIzpnIDopoHooaXnqbrnmb3luKdcbiAgICAgICAgbGV0IGZpbGxGcmFtZUNvdW50ID0gTWF0aC5mbG9vcihkdXJhdGlvbiAvIG1ldGEucmVmU2FtcGxlRHVyYXRpb24pXG5cbiAgICAgICAgbGV0IGZpbGxGcmFtZUlkeCA9IDBcbiAgICAgICAgd2hpbGUgKGZpbGxGcmFtZUlkeCA8IGZpbGxGcmFtZUNvdW50KSB7XG4gICAgICAgICAgY29uc3QgZmlsbEZyYW1lID0gT2JqZWN0LmFzc2lnbih7fSwgbmV4dClcbiAgICAgICAgICBmaWxsRnJhbWUuZHRzID0gY3VycmVudC5kdHMgKyAoZmlsbEZyYW1lSWR4ICsgMSkgKiBtZXRhLnJlZlNhbXBsZUR1cmF0aW9uXG4gICAgICAgICAgZmlsbEZyYW1lLnB0cyA9IGZpbGxGcmFtZS5kdHMgKyBmaWxsRnJhbWUuY3RzXG4gICAgICAgICAgaWYgKGZpbGxGcmFtZSA8IG5leHQuZHRzKSB7XG4gICAgICAgICAgICB2aWRlb1NhbXBsZXMuc3BsaWNlKGksIDAsIGZpbGxGcmFtZSlcblxuICAgICAgICAgICAgdGhpcy5maWxsZWRWaWRlb1NhbXBsZXMucHVzaCh7XG4gICAgICAgICAgICAgIGR0czogZmlsbEZyYW1lLmR0cyxcbiAgICAgICAgICAgICAgc2l6ZTogZmlsbEZyYW1lLmRhdGEuYnl0ZUxlbmd0aFxuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBmaWxsRnJhbWVJZHgrK1xuICAgICAgICAgIGkrKztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMudmlkZW9UcmFjay5zYW1wbGVzID0gdmlkZW9TYW1wbGVzO1xuICB9XG5cbiAgZG9GaXhBdWRpbyAoZmlyc3QpIHtcbiAgICBsZXQge3NhbXBsZXM6IGF1ZGlvU2FtcGxlcywgbWV0YX0gPSB0aGlzLmF1ZGlvVHJhY2tcblxuICAgIGlmICghYXVkaW9TYW1wbGVzIHx8ICFhdWRpb1NhbXBsZXMubGVuZ3RoKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgLy8gY29uc29sZS5sb2coYGF1ZGlvIGxhc3RTYW1wbGUsICR7YXVkaW9TYW1wbGVzW2F1ZGlvU2FtcGxlcy5sZW5ndGggLSAxXS5kdHN9YClcblxuICAgIGNvbnN0IHNhbXBsZXNMZW4gPSBhdWRpb1NhbXBsZXMubGVuZ3RoO1xuICAgIGNvbnN0IHNpbGVudEZyYW1lID0gQUFDLmdldFNpbGVudEZyYW1lKG1ldGEuY29kZWMsIG1ldGEuY2hhbm5lbENvdW50KVxuXG4gICAgY29uc3QgZmlyc3RTYW1wbGUgPSB0aGlzLl9maXJzdEF1ZGlvU2FtcGxlXG5cbiAgICAvLyDlr7lhdWRpb1NhbXBsZXPmjInnhadkdHPlgZrmjpLluo9cbiAgICBhdWRpb1NhbXBsZXMgPSBDb21wYXRpYmlsaXR5LnNvcnRBdWRpb1NhbXBsZXMoYXVkaW9TYW1wbGVzKVxuXG4gICAgLy8gc3RlcDAuIOmmluW4p+S4jnZpZGVv6aaW5bin6Ze06Led5aSn55qE6Zeu6aKYXG4gICAgaWYgKHRoaXMuX2ZpcnN0VmlkZW9TYW1wbGUgJiYgZmlyc3QpIHtcbiAgICAgIGNvbnN0IHZpZGVvRmlyc3RQdHMgPSB0aGlzLl9maXJzdFZpZGVvU2FtcGxlLnB0cyA/IHRoaXMuX2ZpcnN0VmlkZW9TYW1wbGUucHRzIDogdGhpcy5fZmlyc3RWaWRlb1NhbXBsZS5kdHMgKyB0aGlzLl9maXJzdFZpZGVvU2FtcGxlLmN0c1xuXG4gICAgICBpZiAoZmlyc3RTYW1wbGUuZHRzIC0gdmlkZW9GaXJzdFB0cyA+IG1ldGEucmVmU2FtcGxlRHVyYXRpb24pIHtcbiAgICAgICAgY29uc3Qgc2lsZW50U2FtcGxlQ291bnQgPSBNYXRoLmZsb29yKChmaXJzdFNhbXBsZS5kdHMgLSB2aWRlb0ZpcnN0UHRzKSAvIG1ldGEucmVmU2FtcGxlRHVyYXRpb24pXG5cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzaWxlbnRTYW1wbGVDb3VudDsgaSsrKSB7XG4gICAgICAgICAgY29uc3Qgc2lsZW50U2FtcGxlID0ge1xuICAgICAgICAgICAgZGF0YTogc2lsZW50RnJhbWUsXG4gICAgICAgICAgICBkYXRhc2l6ZTogc2lsZW50RnJhbWUuYnl0ZUxlbmd0aCxcbiAgICAgICAgICAgIGR0czogZmlyc3RTYW1wbGUuZHRzIC0gKGkgKyAxKSAqIG1ldGEucmVmU2FtcGxlRHVyYXRpb24sXG4gICAgICAgICAgICBmaWx0ZXJlZDogMFxuICAgICAgICAgIH1cblxuICAgICAgICAgIGF1ZGlvU2FtcGxlcy51bnNoaWZ0KHNpbGVudFNhbXBsZSlcblxuICAgICAgICAgIHRoaXMuZmlsbGVkQXVkaW9TYW1wbGVzLnB1c2goe1xuICAgICAgICAgICAgZHRzOiBzaWxlbnRTYW1wbGUuZHRzLFxuICAgICAgICAgICAgc2l6ZTogc2lsZW50U2FtcGxlLmRhdGEuYnl0ZUxlbmd0aFxuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBsZXQgZ2FwXG4gICAgY29uc3QgZmlyc3REdHMgPSBhdWRpb1NhbXBsZXNbMF0uZHRzXG5cbiAgICBpZiAodGhpcy5uZXh0QXVkaW9EdHMpIHtcbiAgICAgIC8vIHN0ZXAxLiDlpITnkIZzYW1wbGVz5q615LmL6Ze055qE5Lii5bin5oOF5Ya1XG4gICAgICAvLyDlvZPlj5HnjrBkdXJhdGlvbuW3rui3neWkp+S6jjHluKfml7bov5vooYzooaXluKdcbiAgICAgIGdhcCA9IGZpcnN0RHRzIC0gdGhpcy5uZXh0QXVkaW9EdHNcbiAgICAgIGNvbnN0IGFic0dhcCA9IE1hdGguYWJzKGdhcClcblxuICAgICAgaWYgKGFic0dhcCA+IG1ldGEucmVmU2FtcGxlRHVyYXRpb24gJiYgc2FtcGxlc0xlbiA9PT0gMSAmJiB0aGlzLmxhc3RBdWRpb1NhbXBsZXNMZW4gPT09IDEpIHtcbiAgICAgICAgbWV0YS5yZWZTYW1wbGVEdXJhdGlvbkZpeGVkID0gdW5kZWZpbmVkXG4gICAgICB9XG5cbiAgICAgIGlmIChnYXAgPiAoMiAqIG1ldGEucmVmU2FtcGxlRHVyYXRpb24pKSB7XG4gICAgICAgIGlmIChzYW1wbGVzTGVuID09PSAxICYmIHRoaXMubGFzdEF1ZGlvU2FtcGxlc0xlbiA9PT0gMSkge1xuICAgICAgICAgIC8vIOWmguaenHNhbXBsZeeahGxlbmd0aOS4gOebtOaYrzHvvIzogIzkuJTkuIDnm7TkuI3nrKblkIhyZWZTYW1wbGVEdXJhdGlvbu+8jOmcgOimgeWKqOaAgeS/ruaUuXJlZlNhbXBsZUR1cmF0aW9uXG4gICAgICAgICAgbWV0YS5yZWZTYW1wbGVEdXJhdGlvbkZpeGVkID0gbWV0YS5yZWZTYW1wbGVEdXJhdGlvbkZpeGVkICE9PSB1bmRlZmluZWQgPyBtZXRhLnJlZlNhbXBsZUR1cmF0aW9uRml4ZWQgKyBnYXAgOiBtZXRhLnJlZlNhbXBsZUR1cmF0aW9uICsgZ2FwXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc3Qgc2lsZW50RnJhbWVDb3VudCA9IE1hdGguZmxvb3IoZ2FwIC8gbWV0YS5yZWZTYW1wbGVEdXJhdGlvbilcblxuICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2lsZW50RnJhbWVDb3VudDsgaSsrKSB7XG4gICAgICAgICAgICBjb25zdCBjb21wdXRlZCA9IGZpcnN0RHRzIC0gKGkgKyAxKSAqIG1ldGEucmVmU2FtcGxlRHVyYXRpb25cbiAgICAgICAgICAgIGNvbnN0IHNpbGVudFNhbXBsZSA9IE9iamVjdC5hc3NpZ24oe30sIGF1ZGlvU2FtcGxlc1swXSwge1xuICAgICAgICAgICAgICBkdHM6IGNvbXB1dGVkID4gdGhpcy5uZXh0QXVkaW9EdHMgPyBjb21wdXRlZCA6IHRoaXMubmV4dEF1ZGlvRHRzXG4gICAgICAgICAgICB9KVxuXG4gICAgICAgICAgICB0aGlzLmZpbGxlZEF1ZGlvU2FtcGxlcy5wdXNoKHtcbiAgICAgICAgICAgICAgZHRzOiBzaWxlbnRTYW1wbGUuZHRzLFxuICAgICAgICAgICAgICBzaXplOiBzaWxlbnRTYW1wbGUuZGF0YS5ieXRlTGVuZ3RoXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgdGhpcy5hdWRpb1RyYWNrLnNhbXBsZXMudW5zaGlmdChzaWxlbnRTYW1wbGUpXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGFic0dhcCA8PSAxMCAmJiBhYnNHYXAgPiAwKSB7XG4gICAgICAgIC8vIOW9k+W3rui3neavlOi+g+Wwj+eahOaXtuWAmeWwhumfs+mikeW4p+mHjeWumuS9jVxuICAgICAgICAvLyBjb25zb2xlLmxvZygn6YeN5a6a5L2N6Z+z6aKR5binZHRzJywgYXVkaW9TYW1wbGVzWzBdLmR0cywgdGhpcy5uZXh0QXVkaW9EdHMpXG4gICAgICAgIGF1ZGlvU2FtcGxlc1swXS5kdHMgPSB0aGlzLm5leHRBdWRpb0R0c1xuICAgICAgICBhdWRpb1NhbXBsZXNbMF0ucHRzID0gdGhpcy5uZXh0QXVkaW9EdHNcbiAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgbGFzdER0cyA9IGF1ZGlvU2FtcGxlc1thdWRpb1NhbXBsZXMubGVuZ3RoIC0gMV0uZHRzO1xuICAgIGNvbnN0IGxhc3RTYW1wbGVEdXJhdGlvbiA9IGF1ZGlvU2FtcGxlcy5sZW5ndGggPj0gMiA/IGxhc3REdHMgLSBhdWRpb1NhbXBsZXNbYXVkaW9TYW1wbGVzLmxlbmd0aCAtIDJdLmR0cyA6IG1ldGEucmVmU2FtcGxlRHVyYXRpb25cblxuICAgIHRoaXMubGFzdEF1ZGlvU2FtcGxlc0xlbiA9IHNhbXBsZXNMZW47XG4gICAgdGhpcy5uZXh0QXVkaW9EdHMgPSBtZXRhLnJlZlNhbXBsZUR1cmF0aW9uRml4ZWQgPyBsYXN0RHRzICsgbWV0YS5yZWZTYW1wbGVEdXJhdGlvbkZpeGVkIDogbGFzdER0cyArIGxhc3RTYW1wbGVEdXJhdGlvblxuICAgIHRoaXMubGFzdEF1ZGlvRHRzID0gbGFzdER0c1xuXG4gICAgLy8gc3RlcDMuIOS/ruWkjXNhbXBsZXPmrrXlhoXpg6jnmoRkdHPlvILluLjpl67pophcbiAgICBmb3IgKGxldCBpID0gMCwgbGVuID0gYXVkaW9TYW1wbGVzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICBjb25zdCBjdXJyZW50ID0gYXVkaW9TYW1wbGVzW2ldXG4gICAgICBjb25zdCBuZXh0ID0gYXVkaW9TYW1wbGVzW2kgKyAxXVxuXG4gICAgICBpZiAoIW5leHQpIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGR1cmF0aW9uID0gbmV4dC5kdHMgLSBjdXJyZW50LmR0cztcbiAgICAgIGF1ZGlvU2FtcGxlc1tpXS5kdXJhdGlvbiA9IGR1cmF0aW9uO1xuICAgICAgLypcbiAgICAgIGlmIChkdXJhdGlvbiA+ICgyICogbWV0YS5yZWZTYW1wbGVEdXJhdGlvbikpIHtcbiAgICAgICAgLy8g5Lik5bin5LmL6Ze06Ze06ZqU5aSq5aSn77yM6ZyA6KaB6KGl56m655m95binXG4gICAgICAgIC8qKlxuICAgICAgICBsZXQgc2lsZW50RnJhbWVDb3VudCA9IE1hdGguZmxvb3IoZHVyYXRpb24gLyBtZXRhLnJlZlNhbXBsZUR1cmF0aW9uKVxuICAgICAgICBsZXQgZnJhbWVJZHggPSAwXG5cbiAgICAgICAgd2hpbGUgKGZyYW1lSWR4IDwgc2lsZW50RnJhbWVDb3VudCkge1xuICAgICAgICAgIGNvbnN0IHNpbGVudFNhbXBsZSA9IHtcbiAgICAgICAgICAgIGRhdGE6IHNpbGVudEZyYW1lLFxuICAgICAgICAgICAgZGF0YXNpemU6IHNpbGVudEZyYW1lLmJ5dGVMZW5ndGgsXG4gICAgICAgICAgICBkdHM6IGN1cnJlbnQuZHRzICsgKGZyYW1lSWR4ICsgMSkgKiBtZXRhLnJlZlNhbXBsZUR1cmF0aW9uLFxuICAgICAgICAgICAgZmlsdGVyZWQ6IDAsXG4gICAgICAgICAgICBpc1NpbGVudDogdHJ1ZVxuICAgICAgICAgIH1cblxuICAgICAgICAgIGF1ZGlvU2FtcGxlcy5zcGxpY2UoaSwgMCwgc2lsZW50U2FtcGxlKVxuXG4gICAgICAgICAgdGhpcy5maWxsZWRBdWRpb1NhbXBsZXMucHVzaCh7XG4gICAgICAgICAgICBkdHM6IHNpbGVudFNhbXBsZS5kdHMsXG4gICAgICAgICAgICBzaXplOiBzaWxlbnRTYW1wbGUuZGF0YS5ieXRlTGVuZ3RoXG4gICAgICAgICAgfSlcblxuICAgICAgICAgIGZyYW1lSWR4KytcbiAgICAgICAgICBpKysgLy8g5LiN5a+56Z2Z6Z+z5bin5YGa5q+U6L6DXG4gICAgICAgIH1cbiAgICAgIH0gKi9cbiAgICB9XG5cbiAgICB0aGlzLmF1ZGlvVHJhY2suc2FtcGxlcyA9IENvbXBhdGliaWxpdHkuc29ydEF1ZGlvU2FtcGxlcyhhdWRpb1NhbXBsZXMpXG4gIH1cblxuICBnZXRGaXJzdFNhbXBsZSAoKSB7XG4gICAgLy8g6I635Y+WdmlkZW/lkoxhdWRpb+eahOmmluW4p+aVsOaNrlxuICAgIGxldCB7c2FtcGxlczogdmlkZW9TYW1wbGVzfSA9IHRoaXMudmlkZW9UcmFja1xuICAgIGxldCB7c2FtcGxlczogYXVkaW9TYW1wbGVzfSA9IHRoaXMuYXVkaW9UcmFja1xuXG4gICAgbGV0IGlzRmlyc3RWaWRlb1NhbXBsZXMgPSBmYWxzZTtcbiAgICBsZXQgaXNGaXJzdEF1ZGlvU2FtcGxlcyA9IGZhbHNlO1xuXG4gICAgaWYgKCF0aGlzLl9maXJzdFZpZGVvU2FtcGxlICYmIHZpZGVvU2FtcGxlcy5sZW5ndGgpIHtcbiAgICAgIHRoaXMuX2ZpcnN0VmlkZW9TYW1wbGUgPSBDb21wYXRpYmlsaXR5LmZpbmRGaXJzdFZpZGVvU2FtcGxlKHZpZGVvU2FtcGxlcylcbiAgICAgIGlzRmlyc3RWaWRlb1NhbXBsZXMgPSB0cnVlXG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLl9maXJzdEF1ZGlvU2FtcGxlICYmIGF1ZGlvU2FtcGxlcy5sZW5ndGgpIHtcbiAgICAgIHRoaXMuX2ZpcnN0QXVkaW9TYW1wbGUgPSBDb21wYXRpYmlsaXR5LmZpbmRGaXJzdEF1ZGlvU2FtcGxlKGF1ZGlvU2FtcGxlcykgLy8g5a+75om+ZHRz5pyA5bCP55qE5bin5L2c5Li66aaW5Liq6Z+z6aKR5binXG4gICAgICBpc0ZpcnN0QXVkaW9TYW1wbGVzID0gdHJ1ZVxuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICBpc0ZpcnN0VmlkZW9TYW1wbGVzLFxuICAgICAgaXNGaXJzdEF1ZGlvU2FtcGxlc1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiDlnKjmsqHmnIlyZWZTYW1wbGVEdXJhdGlvbueahOmXrumimOa1geS4re+8jFxuICAgKi9cbiAgZml4UmVmU2FtcGxlRHVyYXRpb24gKG1ldGEsIHNhbXBsZXMpIHtcbiAgICBjb25zdCBpc1ZpZGVvID0gbWV0YS50eXBlID09PSAndmlkZW8nXG4gICAgY29uc3QgYWxsU2FtcGxlc0NvdW50ID0gaXNWaWRlbyA/IHRoaXMuYWxsVmlkZW9TYW1wbGVzQ291bnQgOiB0aGlzLmFsbEF1ZGlvU2FtcGxlc0NvdW50XG4gICAgY29uc3QgZmlyc3REdHMgPSBpc1ZpZGVvID8gdGhpcy5fZmlyc3RWaWRlb1NhbXBsZS5kdHMgOiB0aGlzLl9maXJzdEF1ZGlvU2FtcGxlLmR0c1xuICAgIGNvbnN0IGZpbGxlZFNhbXBsZXNDb3VudCA9IGlzVmlkZW8gPyB0aGlzLmZpbGxlZFZpZGVvU2FtcGxlcy5sZW5ndGggOiB0aGlzLmZpbGxlZEF1ZGlvU2FtcGxlcy5sZW5ndGhcblxuICAgIGlmICghbWV0YS5yZWZTYW1wbGVEdXJhdGlvbiB8fCBtZXRhLnJlZlNhbXBsZUR1cmF0aW9uIDw9IDAgfHwgTnVtYmVyLmlzTmFOKG1ldGEucmVmU2FtcGxlRHVyYXRpb24pKSB7XG4gICAgICBpZiAoc2FtcGxlcy5sZW5ndGggPj0gMSkge1xuICAgICAgICBjb25zdCBsYXN0RHRzID0gc2FtcGxlc1tzYW1wbGVzLmxlbmd0aCAtIDFdLmR0c1xuXG4gICAgICAgIG1ldGEucmVmU2FtcGxlRHVyYXRpb24gPSBNYXRoLmZsb29yKChsYXN0RHRzIC0gZmlyc3REdHMpIC8gKChhbGxTYW1wbGVzQ291bnQgKyBmaWxsZWRTYW1wbGVzQ291bnQpIC0gMSkpOyAvLyDlsIZyZWZTYW1wbGVEdXJhdGlvbumHjee9ruS4uuiuoeeul+WQjueahOW5s+Wdh+WAvFxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAobWV0YS5yZWZTYW1wbGVEdXJhdGlvbikge1xuICAgICAgaWYgKHNhbXBsZXMubGVuZ3RoID49IDMpIHtcbiAgICAgICAgY29uc3QgbGFzdER0cyA9IHNhbXBsZXNbc2FtcGxlcy5sZW5ndGggLSAxXS5kdHNcbiAgICAgICAgY29uc3QgZmlyc3REdHMgPSBzYW1wbGVzWzBdLmR0c1xuICAgICAgICBjb25zdCBkdXJhdGlvbkF2ZyA9IChsYXN0RHRzIC0gZmlyc3REdHMpIC8gc2FtcGxlcy5sZW5ndGhcblxuICAgICAgICBtZXRhLnJlZlNhbXBsZUR1cmF0aW9uID0gTWF0aC5hYnMobWV0YS5yZWZTYW1wbGVEdXJhdGlvbiAtIGR1cmF0aW9uQXZnKSA8PSBtZXRhLnJlZlNhbXBsZUR1cmF0aW9uID8gbWV0YS5yZWZTYW1wbGVEdXJhdGlvbiA6IGR1cmF0aW9uQXZnOyAvLyDlsIZyZWZTYW1wbGVEdXJhdGlvbumHjee9ruS4uuiuoeeul+WQjueahOW5s+Wdh+WAvFxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiDorrDlvZXmiKrmraLnm67liY3kuIDlhbHmkq3mlL7kuoblpJrlsJHluKdcbiAgICovXG4gIHJlY29yZFNhbXBsZXNDb3VudCAoKSB7XG4gICAgY29uc3QgeyBhdWRpb1RyYWNrLCB2aWRlb1RyYWNrIH0gPSB0aGlzXG5cbiAgICB0aGlzLmFsbEF1ZGlvU2FtcGxlc0NvdW50ICs9IGF1ZGlvVHJhY2suc2FtcGxlcy5sZW5ndGhcbiAgICB0aGlzLmFsbFZpZGVvU2FtcGxlc0NvdW50ICs9IHZpZGVvVHJhY2suc2FtcGxlcy5sZW5ndGhcbiAgfVxuXG4gIC8qKlxuICAgKiDljrvpmaTkuI3lkIjms5XnmoTluKfvvIjlgJLpgIDjgIHph43lpI3luKfvvIlcbiAgICovXG4gIHJlbW92ZUludmFsaWRTYW1wbGVzICgpIHtcbiAgICBjb25zdCB7IF9maXJzdFZpZGVvU2FtcGxlLCBfZmlyc3RBdWRpb1NhbXBsZSB9ID0gdGhpc1xuXG4gICAgdGhpcy5hdWRpb1RyYWNrLnNhbXBsZXMgPSB0aGlzLmF1ZGlvVHJhY2suc2FtcGxlcy5maWx0ZXIoKHNhbXBsZSkgPT4ge1xuICAgICAgcmV0dXJuIHNhbXBsZS5kdHMgPj0gX2ZpcnN0QXVkaW9TYW1wbGUuZHRzICYmICh0aGlzLmxhc3RBdWRpb0R0cyA9PT0gdW5kZWZpbmVkIHx8IHNhbXBsZS5kdHMgPiB0aGlzLmxhc3RBdWRpb0R0cylcbiAgICB9KVxuXG4gICAgdGhpcy52aWRlb1RyYWNrLnNhbXBsZXMgPSB0aGlzLnZpZGVvVHJhY2suc2FtcGxlcy5maWx0ZXIoKHNhbXBsZSkgPT4ge1xuICAgICAgcmV0dXJuIHNhbXBsZS5kdHMgPj0gX2ZpcnN0VmlkZW9TYW1wbGUuZHRzICYmICh0aGlzLmxhc3RWaWRlb0R0cyA9PT0gdW5kZWZpbmVkIHx8IHNhbXBsZS5kdHMgPiB0aGlzLmxhc3RWaWRlb0R0cylcbiAgICB9KVxuICB9XG5cbiAgc3RhdGljIHNvcnRBdWRpb1NhbXBsZXMgKHNhbXBsZXMpIHtcbiAgICBpZiAoc2FtcGxlcy5sZW5ndGggPT09IDEpIHtcbiAgICAgIHJldHVybiBzYW1wbGVzXG4gICAgfVxuXG4gICAgcmV0dXJuIHNhbXBsZXMuc29ydCgoYSwgYikgPT4ge1xuICAgICAgcmV0dXJuIGEuZHRzIC0gYi5kdHNcbiAgICB9KVxuICB9XG5cbiAgLyoqXG4gICAqIOWvu+aJvmR0c+acgOWwj+eahHNhbXBsZVxuICAgKiBAcGFyYW0gc2FtcGxlc1xuICAgKi9cbiAgc3RhdGljIGZpbmRGaXJzdEF1ZGlvU2FtcGxlIChzYW1wbGVzKSB7XG4gICAgaWYgKCFzYW1wbGVzIHx8IHNhbXBsZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gbnVsbFxuICAgIH1cblxuICAgIHJldHVybiBDb21wYXRpYmlsaXR5LnNvcnRBdWRpb1NhbXBsZXMoc2FtcGxlcylbMF1cbiAgfVxuXG4gIHN0YXRpYyBmaW5kRmlyc3RWaWRlb1NhbXBsZSAoc2FtcGxlcykge1xuICAgIGlmICghc2FtcGxlcy5sZW5ndGgpIHtcbiAgICAgIHJldHVybiBudWxsXG4gICAgfVxuXG4gICAgY29uc3Qgc29ydGVkID0gc2FtcGxlcy5zb3J0KChhLCBiKSA9PiB7XG4gICAgICByZXR1cm4gYS5kdHMgLSBiLmR0cztcbiAgICB9KVxuXG4gICAgZm9yIChsZXQgaSA9IDAsIGxlbiA9IHNvcnRlZC5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgaWYgKHNvcnRlZFtpXS5pc0tleWZyYW1lKSB7XG4gICAgICAgIHJldHVybiBzb3J0ZWRbaV1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBnZXQgdHJhY2tzICgpIHtcbiAgICByZXR1cm4gdGhpcy5fY29udGV4dC5nZXRJbnN0YW5jZSgnVFJBQ0tTJylcbiAgfVxuXG4gIGdldCBhdWRpb1RyYWNrICgpIHtcbiAgICBpZiAodGhpcy50cmFja3MpIHtcbiAgICAgIHJldHVybiB0aGlzLnRyYWNrcy5hdWRpb1RyYWNrXG4gICAgfVxuICAgIHJldHVybiBudWxsXG4gIH1cblxuICBnZXQgdmlkZW9UcmFjayAoKSB7XG4gICAgaWYgKHRoaXMudHJhY2tzKSB7XG4gICAgICByZXR1cm4gdGhpcy50cmFja3MudmlkZW9UcmFja1xuICAgIH1cbiAgICByZXR1cm4gbnVsbFxuICB9XG59XG5leHBvcnQgZGVmYXVsdCBDb21wYXRpYmlsaXR5O1xuIiwiY2xhc3MgR29sb21iIHtcbiAgY29uc3RydWN0b3IgKHVpbnQ4YXJyYXkpIHtcbiAgICB0aGlzLlRBRyA9ICdHb2xvbWInXG4gICAgdGhpcy5fYnVmZmVyID0gdWludDhhcnJheVxuICAgIHRoaXMuX2J1ZmZlckluZGV4ID0gMFxuICAgIHRoaXMuX3RvdGFsQnl0ZXMgPSB1aW50OGFycmF5LmJ5dGVMZW5ndGhcbiAgICB0aGlzLl90b3RhbEJpdHMgPSB1aW50OGFycmF5LmJ5dGVMZW5ndGggKiA4XG4gICAgdGhpcy5fY3VycmVudFdvcmQgPSAwXG4gICAgdGhpcy5fY3VycmVudFdvcmRCaXRzTGVmdCA9IDBcbiAgfVxuXG4gIGRlc3Ryb3kgKCkge1xuICAgIHRoaXMuX2J1ZmZlciA9IG51bGxcbiAgfVxuXG4gIF9maWxsQ3VycmVudFdvcmQgKCkge1xuICAgIGxldCBidWZmZXJCeXRlc0xlZnQgPSB0aGlzLl90b3RhbEJ5dGVzIC0gdGhpcy5fYnVmZmVySW5kZXhcbiAgICBpZiAoYnVmZmVyQnl0ZXNMZWZ0IDw9IDApIHtcbiAgICAgIC8vIFRPRE8g5byC5bi45aSE55CGXG4gICAgfVxuXG4gICAgbGV0IGJ5dGVzUmVhZCA9IE1hdGgubWluKDQsIGJ1ZmZlckJ5dGVzTGVmdClcbiAgICBsZXQgd29yZCA9IG5ldyBVaW50OEFycmF5KDQpXG4gICAgd29yZC5zZXQodGhpcy5fYnVmZmVyLnN1YmFycmF5KHRoaXMuX2J1ZmZlckluZGV4LCB0aGlzLl9idWZmZXJJbmRleCArIGJ5dGVzUmVhZCkpXG4gICAgdGhpcy5fY3VycmVudFdvcmQgPSBuZXcgRGF0YVZpZXcod29yZC5idWZmZXIpLmdldFVpbnQzMigwLCBmYWxzZSlcblxuICAgIHRoaXMuX2J1ZmZlckluZGV4ICs9IGJ5dGVzUmVhZFxuICAgIHRoaXMuX2N1cnJlbnRXb3JkQml0c0xlZnQgPSBieXRlc1JlYWQgKiA4XG4gIH1cblxuICByZWFkQml0cyAoYml0cykge1xuICAgIGlmIChiaXRzID4gMzIpIHtcbiAgICAgIC8vIFRPRE9cbiAgICB9XG5cbiAgICBpZiAoYml0cyA8PSB0aGlzLl9jdXJyZW50V29yZEJpdHNMZWZ0KSB7XG4gICAgICBsZXQgcmVzdWx0ID0gdGhpcy5fY3VycmVudFdvcmQgPj4+ICgzMiAtIGJpdHMpXG4gICAgICB0aGlzLl9jdXJyZW50V29yZCA8PD0gYml0c1xuICAgICAgdGhpcy5fY3VycmVudFdvcmRCaXRzTGVmdCAtPSBiaXRzXG4gICAgICByZXR1cm4gcmVzdWx0XG4gICAgfVxuXG4gICAgbGV0IHJlc3VsdCA9IHRoaXMuX2N1cnJlbnRXb3JkQml0c0xlZnQgPyB0aGlzLl9jdXJyZW50V29yZCA6IDBcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmVcbiAgICByZXN1bHQgPj4+ICgzMiAtIHRoaXMuX2N1cnJlbnRXb3JkQml0c0xlZnQpXG4gICAgbGV0IGJpdHNOZWVkTGVmdCA9IGJpdHMgLSB0aGlzLl9jdXJyZW50V29yZEJpdHNMZWZ0XG5cbiAgICB0aGlzLl9maWxsQ3VycmVudFdvcmQoKVxuICAgIGxldCBiaXRzUmVhZE5leHQgPSBNYXRoLm1pbihiaXRzTmVlZExlZnQsIHRoaXMuX2N1cnJlbnRXb3JkQml0c0xlZnQpXG5cbiAgICBsZXQgcmVzdWx0MiA9IHRoaXMuX2N1cnJlbnRXb3JkID4+PiAoMzIgLSBiaXRzUmVhZE5leHQpXG4gICAgdGhpcy5fY3VycmVudFdvcmQgPDw9IGJpdHNSZWFkTmV4dFxuICAgIHRoaXMuX2N1cnJlbnRXb3JkQml0c0xlZnQgLT0gYml0c1JlYWROZXh0XG5cbiAgICByZXN1bHQgPSAocmVzdWx0IDw8IGJpdHNSZWFkTmV4dCkgfCByZXN1bHQyXG4gICAgcmV0dXJuIHJlc3VsdFxuICB9XG5cbiAgcmVhZEJvb2wgKCkge1xuICAgIHJldHVybiB0aGlzLnJlYWRCaXRzKDEpID09PSAxXG4gIH1cblxuICByZWFkQnl0ZSAoKSB7XG4gICAgcmV0dXJuIHRoaXMucmVhZEJpdHMoOClcbiAgfVxuXG4gIF9za2lwTGVhZGluZ1plcm8gKCkge1xuICAgIGxldCB6ZXJvQ291bnRcbiAgICBmb3IgKHplcm9Db3VudCA9IDA7IHplcm9Db3VudCA8IHRoaXMuX2N1cnJlbnRXb3JkQml0c0xlZnQ7IHplcm9Db3VudCsrKSB7XG4gICAgICBpZiAoKHRoaXMuX2N1cnJlbnRXb3JkICYgKDB4ODAwMDAwMDAgPj4+IHplcm9Db3VudCkpICE9PSAwKSB7XG4gICAgICAgIHRoaXMuX2N1cnJlbnRXb3JkIDw8PSB6ZXJvQ291bnRcbiAgICAgICAgdGhpcy5fY3VycmVudFdvcmRCaXRzTGVmdCAtPSB6ZXJvQ291bnRcbiAgICAgICAgcmV0dXJuIHplcm9Db3VudFxuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLl9maWxsQ3VycmVudFdvcmQoKVxuICAgIHJldHVybiB6ZXJvQ291bnQgKyB0aGlzLl9za2lwTGVhZGluZ1plcm8oKVxuICB9XG5cbiAgcmVhZFVFRyAoKSB7IC8vIHVuc2lnbmVkIGV4cG9uZW50aWFsIGdvbG9tYlxuICAgIGxldCBsZWFkaW5nWmVyb3MgPSB0aGlzLl9za2lwTGVhZGluZ1plcm8oKVxuICAgIHJldHVybiB0aGlzLnJlYWRCaXRzKGxlYWRpbmdaZXJvcyArIDEpIC0gMVxuICB9XG5cbiAgcmVhZFNFRyAoKSB7IC8vIHNpZ25lZCBleHBvbmVudGlhbCBnb2xvbWJcbiAgICBsZXQgdmFsdWUgPSB0aGlzLnJlYWRVRUcoKVxuICAgIGlmICh2YWx1ZSAmIDB4MDEpIHtcbiAgICAgIHJldHVybiAodmFsdWUgKyAxKSA+Pj4gMVxuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gLTEgKiAodmFsdWUgPj4+IDEpXG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEdvbG9tYlxuIiwiaW1wb3J0IFNwc1BhcnNlciBmcm9tICcuL3Nwcyc7XG5jbGFzcyBOYWx1bml0IHtcbiAgc3RhdGljIGdldE5hbHVuaXRzIChidWZmZXIpIHtcbiAgICBpZiAoYnVmZmVyLmxlbmd0aCAtIGJ1ZmZlci5wb3NpdGlvbiA8IDQpIHtcbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG5cbiAgICBsZXQgYnVmID0gYnVmZmVyLmRhdGF2aWV3O1xuICAgIGxldCBwb3NpdGlvbiA9IGJ1ZmZlci5wb3NpdGlvbjtcbiAgICBpZiAoYnVmLmdldEludDMyKHBvc2l0aW9uKSA9PT0gMSB8fFxuICAgIChidWYuZ2V0SW50MTYocG9zaXRpb24pID09PSAwICYmIGJ1Zi5nZXRJbnQ4KHBvc2l0aW9uICsgMikgPT09IDEpKSB7XG4gICAgICByZXR1cm4gTmFsdW5pdC5nZXRBbm5leGJOYWxzKGJ1ZmZlcik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBOYWx1bml0LmdldEF2Y2NOYWxzKGJ1ZmZlcik7XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGdldEFubmV4Yk5hbHMgKGJ1ZmZlcikge1xuICAgIGxldCBuYWxzID0gW107XG4gICAgbGV0IHBvc2l0aW9uID0gTmFsdW5pdC5nZXRIZWFkZXJQb3NpdGlvbkFubmV4QihidWZmZXIpO1xuICAgIGxldCBzdGFydCA9IHBvc2l0aW9uLnBvcztcbiAgICBsZXQgZW5kID0gc3RhcnQ7XG4gICAgd2hpbGUgKHN0YXJ0IDwgYnVmZmVyLmxlbmd0aCAtIDQpIHtcbiAgICAgIGxldCBoZWFkZXIgPSBidWZmZXIuYnVmZmVyLnNsaWNlKHN0YXJ0LCBzdGFydCArIHBvc2l0aW9uLmhlYWRlckxlbmd0aCk7XG4gICAgICBpZiAocG9zaXRpb24ucG9zID09PSBidWZmZXIucG9zaXRpb24pIHtcbiAgICAgICAgYnVmZmVyLnNraXAocG9zaXRpb24uaGVhZGVyTGVuZ3RoKTtcbiAgICAgIH1cbiAgICAgIHBvc2l0aW9uID0gTmFsdW5pdC5nZXRIZWFkZXJQb3NpdGlvbkFubmV4QihidWZmZXIpO1xuICAgICAgZW5kID0gcG9zaXRpb24ucG9zO1xuICAgICAgbGV0IGJvZHkgPSBuZXcgVWludDhBcnJheShidWZmZXIuYnVmZmVyLnNsaWNlKHN0YXJ0ICsgaGVhZGVyLmJ5dGVMZW5ndGgsIGVuZCkpO1xuICAgICAgbGV0IHVuaXQgPSB7aGVhZGVyLCBib2R5fTtcbiAgICAgIE5hbHVuaXQuYW5hbHlzZU5hbCh1bml0KTtcbiAgICAgIG5hbHMucHVzaCh1bml0KTtcbiAgICAgIGJ1ZmZlci5za2lwKGVuZCAtIGJ1ZmZlci5wb3NpdGlvbik7XG4gICAgICBzdGFydCA9IGVuZDtcbiAgICB9XG4gICAgcmV0dXJuIG5hbHM7XG4gIH1cblxuICBzdGF0aWMgZ2V0QXZjY05hbHMgKGJ1ZmZlcikge1xuICAgIGxldCBuYWxzID0gW107XG4gICAgd2hpbGUgKGJ1ZmZlci5wb3NpdGlvbiA8IGJ1ZmZlci5sZW5ndGggLSA0KSB7XG4gICAgICBsZXQgbGVuZ3RoID0gYnVmZmVyLmRhdGF2aWV3LmdldEludDMyKGJ1ZmZlci5wb3NpdGlvbik7XG4gICAgICBpZiAoYnVmZmVyLmxlbmd0aCAtIGJ1ZmZlci5wb3NpdGlvbiA+PSBsZW5ndGgpIHtcbiAgICAgICAgbGV0IGhlYWRlciA9IGJ1ZmZlci5idWZmZXIuc2xpY2UoYnVmZmVyLnBvc2l0aW9uLCBidWZmZXIucG9zaXRpb24gKyA0KTtcbiAgICAgICAgYnVmZmVyLnNraXAoNClcbiAgICAgICAgbGV0IGJvZHkgPSBidWZmZXIuYnVmZmVyLnNsaWNlKGJ1ZmZlci5wb3NpdGlvbiwgYnVmZmVyLnBvc2l0aW9uICsgbGVuZ3RoKTtcbiAgICAgICAgYnVmZmVyLnNraXAobGVuZ3RoKTtcbiAgICAgICAgbGV0IHVuaXQgPSB7aGVhZGVyLCBib2R5fTtcbiAgICAgICAgTmFsdW5pdC5hbmFseXNlTmFsKHVuaXQpO1xuICAgICAgICBuYWxzLnB1c2godW5pdCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG5hbHM7XG4gIH1cblxuICBzdGF0aWMgYW5hbHlzZU5hbCAodW5pdCkge1xuICAgIGxldCB0eXBlID0gdW5pdC5ib2R5WzBdICYgMHgxZjtcbiAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgIGNhc2UgMTpcbiAgICAgICAgLy8gTkRSXG4gICAgICAgIHVuaXQubmRyID0gdHJ1ZTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIDU6XG4gICAgICAgIC8vIElEUlxuICAgICAgICB1bml0LmlkciA9IHRydWU7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSA2OlxuICAgICAgICAvLyBTRUlcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIDc6XG4gICAgICAgIC8vIFNQU1xuICAgICAgICB1bml0LnNwcyA9IFNwc1BhcnNlci5wYXJzZVNQUyh1bml0LmJvZHkpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgODpcbiAgICAgICAgLy8gUFBTXG4gICAgICAgIHVuaXQucHBzID0gdHJ1ZTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIDk6XG4gICAgICAgIC8vIEFVRFxuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBnZXRIZWFkZXJQb3NpdGlvbkFubmV4QiAoYnVmZmVyKSB7XG4gICAgLy8gc2VwZXJhdGVcbiAgICBsZXQgcG9zID0gYnVmZmVyLnBvc2l0aW9uO1xuICAgIGxldCBoZWFkZXJMZW5ndGggPSAwO1xuICAgIHdoaWxlIChoZWFkZXJMZW5ndGggIT09IDMgJiYgaGVhZGVyTGVuZ3RoICE9PSA0ICYmIHBvcyA8IGJ1ZmZlci5sZW5ndGggLSA0KSB7XG4gICAgICBpZiAoYnVmZmVyLmRhdGF2aWV3LmdldEludDE2KHBvcykgPT09IDApIHtcbiAgICAgICAgaWYgKGJ1ZmZlci5kYXRhdmlldy5nZXRJbnQxNihwb3MgKyAyKSA9PT0gMSkge1xuICAgICAgICAgIC8vIDB4MDAwMDAxXG4gICAgICAgICAgaGVhZGVyTGVuZ3RoID0gNDtcbiAgICAgICAgfSBlbHNlIGlmIChidWZmZXIuZGF0YXZpZXcuZ2V0SW50OChwb3MgKyAyKSA9PT0gMSkge1xuICAgICAgICAgIGhlYWRlckxlbmd0aCA9IDM7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcG9zKys7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHBvcysrO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChwb3MgPT09IGJ1ZmZlci5sZW5ndGggLSA0KSB7XG4gICAgICBpZiAoYnVmZmVyLmRhdGF2aWV3LmdldEludDE2KHBvcykgPT09IDApIHtcbiAgICAgICAgaWYgKGJ1ZmZlci5kYXRhdmlldy5nZXRJbnQxNihwb3MgKyAyKSA9PT0gMSkge1xuICAgICAgICAgIC8vIDB4MDAwMDAxXG4gICAgICAgICAgaGVhZGVyTGVuZ3RoID0gNDtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcG9zKys7XG4gICAgICAgIGlmIChidWZmZXIuZGF0YXZpZXcuZ2V0SW50MTYocG9zKSA9PT0gMCAmJiBidWZmZXIuZGF0YXZpZXcuZ2V0SW50OChwb3MpID09PSAxKSB7XG4gICAgICAgICAgLy8gMHgwMDAwMDAxXG4gICAgICAgICAgaGVhZGVyTGVuZ3RoID0gMztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBwb3MgPSBidWZmZXIubGVuZ3RoO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB7cG9zLCBoZWFkZXJMZW5ndGh9O1xuICB9XG5cbiAgc3RhdGljIGdldEF2Y2MgKHNwcywgcHBzKSB7XG4gICAgbGV0IHJldCA9IG5ldyBVaW50OEFycmF5KHNwcy5ieXRlTGVuZ3RoICsgcHBzLmJ5dGVMZW5ndGggKyAxMSk7XG4gICAgcmV0WzBdID0gMHgwMTtcbiAgICByZXRbMV0gPSBzcHNbMV07XG4gICAgcmV0WzJdID0gc3BzWzJdO1xuICAgIHJldFszXSA9IHNwc1szXTtcbiAgICByZXRbNF0gPSAyNTU7XG4gICAgcmV0WzVdID0gMjI1O1xuXG4gICAgbGV0IG9mZnNldCA9IDY7XG5cbiAgICByZXQuc2V0KG5ldyBVaW50OEFycmF5KFsoc3BzLmJ5dGVMZW5ndGggPj4+IDgpICYgMHhmZiwgc3BzLmJ5dGVMZW5ndGggJiAweGZmXSksIG9mZnNldCk7XG4gICAgb2Zmc2V0ICs9IDI7XG4gICAgcmV0LnNldChzcHMsIG9mZnNldCk7XG4gICAgb2Zmc2V0ICs9IHNwcy5ieXRlTGVuZ3RoO1xuXG4gICAgcmV0W29mZnNldF0gPSAxO1xuICAgIG9mZnNldCsrO1xuXG4gICAgcmV0LnNldChuZXcgVWludDhBcnJheShbKHBwcy5ieXRlTGVuZ3RoID4+PiA4KSAmIDB4ZmYsIHBwcy5ieXRlTGVuZ3RoICYgMHhmZl0pLCBvZmZzZXQpO1xuICAgIG9mZnNldCArPSAyO1xuICAgIHJldC5zZXQocHBzLCBvZmZzZXQpO1xuICAgIHJldHVybiByZXQ7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgTmFsdW5pdDtcbiIsIi8qIGVzbGludC1kaXNhYmxlIGNhbWVsY2FzZSAgKi9cbi8qIGVzbGludC1kaXNhYmxlIG9uZS12YXIgICovXG5pbXBvcnQgR29sb21iIGZyb20gJy4vZ29sb21iJ1xuXG5jbGFzcyBTUFNQYXJzZXIge1xuICBzdGF0aWMgX2Vic3AycmJzcCAodWludDhhcnJheSkge1xuICAgIGxldCBzcmMgPSB1aW50OGFycmF5XG4gICAgbGV0IHNyY0xlbmd0aCA9IHNyYy5ieXRlTGVuZ3RoXG4gICAgbGV0IGRzdCA9IG5ldyBVaW50OEFycmF5KHNyY0xlbmd0aClcbiAgICBsZXQgZHN0SWR4ID0gMFxuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzcmNMZW5ndGg7IGkrKykge1xuICAgICAgaWYgKGkgPj0gMikge1xuICAgICAgICBpZiAoc3JjW2ldID09PSAweDAzICYmIHNyY1tpIC0gMV0gPT09IDB4MDAgJiYgc3JjW2kgLSAyXSA9PT0gMHgwMCkge1xuICAgICAgICAgIGNvbnRpbnVlXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGRzdFtkc3RJZHhdID0gc3JjW2ldXG4gICAgICBkc3RJZHgrK1xuICAgIH1cblxuICAgIHJldHVybiBuZXcgVWludDhBcnJheShkc3QuYnVmZmVyLCAwLCBkc3RJZHgpXG4gIH1cblxuICBzdGF0aWMgcGFyc2VTUFMgKHVpbnQ4YXJyYXkpIHtcbiAgICBsZXQgcmJzcCA9IFNQU1BhcnNlci5fZWJzcDJyYnNwKHVpbnQ4YXJyYXkpXG4gICAgbGV0IGdiID0gbmV3IEdvbG9tYihyYnNwKVxuXG4gICAgZ2IucmVhZEJ5dGUoKVxuICAgIGxldCBwcm9maWxlSWRjID0gZ2IucmVhZEJ5dGUoKVxuICAgIGdiLnJlYWRCeXRlKClcbiAgICBsZXQgbGV2ZWxJZGMgPSBnYi5yZWFkQnl0ZSgpXG4gICAgZ2IucmVhZFVFRygpXG5cbiAgICBsZXQgcHJvZmlsZV9zdHJpbmcgPSBTUFNQYXJzZXIuZ2V0UHJvZmlsZVN0cmluZyhwcm9maWxlSWRjKVxuICAgIGxldCBsZXZlbF9zdHJpbmcgPSBTUFNQYXJzZXIuZ2V0TGV2ZWxTdHJpbmcobGV2ZWxJZGMpXG4gICAgbGV0IGNocm9tYV9mb3JtYXRfaWRjID0gMVxuICAgIGxldCBjaHJvbWFfZm9ybWF0ID0gNDIwXG4gICAgbGV0IGNocm9tYV9mb3JtYXRfdGFibGUgPSBbMCwgNDIwLCA0MjIsIDQ0NF1cbiAgICBsZXQgYml0X2RlcHRoID0gOFxuXG4gICAgaWYgKHByb2ZpbGVJZGMgPT09IDEwMCB8fCBwcm9maWxlSWRjID09PSAxMTAgfHwgcHJvZmlsZUlkYyA9PT0gMTIyIHx8XG4gICAgICBwcm9maWxlSWRjID09PSAyNDQgfHwgcHJvZmlsZUlkYyA9PT0gNDQgfHwgcHJvZmlsZUlkYyA9PT0gODMgfHxcbiAgICAgIHByb2ZpbGVJZGMgPT09IDg2IHx8IHByb2ZpbGVJZGMgPT09IDExOCB8fCBwcm9maWxlSWRjID09PSAxMjggfHxcbiAgICAgIHByb2ZpbGVJZGMgPT09IDEzOCB8fCBwcm9maWxlSWRjID09PSAxNDQpIHtcbiAgICAgIGNocm9tYV9mb3JtYXRfaWRjID0gZ2IucmVhZFVFRygpXG4gICAgICBpZiAoY2hyb21hX2Zvcm1hdF9pZGMgPT09IDMpIHtcbiAgICAgICAgZ2IucmVhZEJpdHMoMSlcbiAgICAgIH1cbiAgICAgIGlmIChjaHJvbWFfZm9ybWF0X2lkYyA8PSAzKSB7XG4gICAgICAgIGNocm9tYV9mb3JtYXQgPSBjaHJvbWFfZm9ybWF0X3RhYmxlW2Nocm9tYV9mb3JtYXRfaWRjXVxuICAgICAgfVxuXG4gICAgICBiaXRfZGVwdGggPSBnYi5yZWFkVUVHKCkgKyA4XG4gICAgICBnYi5yZWFkVUVHKClcbiAgICAgIGdiLnJlYWRCaXRzKDEpXG4gICAgICBpZiAoZ2IucmVhZEJvb2woKSkge1xuICAgICAgICBsZXQgc2NhbGluZ19saXN0X2NvdW50ID0gKGNocm9tYV9mb3JtYXRfaWRjICE9PSAzKSA/IDggOiAxMlxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNjYWxpbmdfbGlzdF9jb3VudDsgaSsrKSB7XG4gICAgICAgICAgaWYgKGdiLnJlYWRCb29sKCkpIHtcbiAgICAgICAgICAgIGlmIChpIDwgNikge1xuICAgICAgICAgICAgICBTUFNQYXJzZXIuX3NraXBTY2FsaW5nTGlzdChnYiwgMTYpXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBTUFNQYXJzZXIuX3NraXBTY2FsaW5nTGlzdChnYiwgNjQpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGdiLnJlYWRVRUcoKVxuICAgIGxldCBwaWNfb3JkZXJfY250X3R5cGUgPSBnYi5yZWFkVUVHKClcbiAgICBpZiAocGljX29yZGVyX2NudF90eXBlID09PSAwKSB7XG4gICAgICBnYi5yZWFkVUVHKClcbiAgICB9IGVsc2UgaWYgKHBpY19vcmRlcl9jbnRfdHlwZSA9PT0gMSkge1xuICAgICAgZ2IucmVhZEJpdHMoMSlcbiAgICAgIGdiLnJlYWRTRUcoKVxuICAgICAgZ2IucmVhZFNFRygpXG4gICAgICBsZXQgbnVtX3JlZl9mcmFtZXNfaW5fcGljX29yZGVyX2NudF9jeWNsZSA9IGdiLnJlYWRVRUcoKVxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBudW1fcmVmX2ZyYW1lc19pbl9waWNfb3JkZXJfY250X2N5Y2xlOyBpKyspIHtcbiAgICAgICAgZ2IucmVhZFNFRygpXG4gICAgICB9XG4gICAgfVxuICAgIGdiLnJlYWRVRUcoKVxuICAgIGdiLnJlYWRCaXRzKDEpXG5cbiAgICBsZXQgcGljX3dpZHRoX2luX21ic19taW51czEgPSBnYi5yZWFkVUVHKClcbiAgICBsZXQgcGljX2hlaWdodF9pbl9tYXBfdW5pdHNfbWludXMxID0gZ2IucmVhZFVFRygpXG5cbiAgICBsZXQgZnJhbWVfbWJzX29ubHlfZmxhZyA9IGdiLnJlYWRCaXRzKDEpXG4gICAgaWYgKGZyYW1lX21ic19vbmx5X2ZsYWcgPT09IDApIHtcbiAgICAgIGdiLnJlYWRCaXRzKDEpXG4gICAgfVxuICAgIGdiLnJlYWRCaXRzKDEpXG5cbiAgICBsZXQgZnJhbWVfY3JvcF9sZWZ0X29mZnNldCA9IDBcbiAgICBsZXQgZnJhbWVfY3JvcF9yaWdodF9vZmZzZXQgPSAwXG4gICAgbGV0IGZyYW1lX2Nyb3BfdG9wX29mZnNldCA9IDBcbiAgICBsZXQgZnJhbWVfY3JvcF9ib3R0b21fb2Zmc2V0ID0gMFxuXG4gICAgbGV0IGZyYW1lX2Nyb3BwaW5nX2ZsYWcgPSBnYi5yZWFkQm9vbCgpXG4gICAgaWYgKGZyYW1lX2Nyb3BwaW5nX2ZsYWcpIHtcbiAgICAgIGZyYW1lX2Nyb3BfbGVmdF9vZmZzZXQgPSBnYi5yZWFkVUVHKClcbiAgICAgIGZyYW1lX2Nyb3BfcmlnaHRfb2Zmc2V0ID0gZ2IucmVhZFVFRygpXG4gICAgICBmcmFtZV9jcm9wX3RvcF9vZmZzZXQgPSBnYi5yZWFkVUVHKClcbiAgICAgIGZyYW1lX2Nyb3BfYm90dG9tX29mZnNldCA9IGdiLnJlYWRVRUcoKVxuICAgIH1cblxuICAgIGxldCBwYXJfd2lkdGggPSAxLCBwYXJfaGVpZ2h0ID0gMVxuICAgIGxldCBmcHMgPSAwLCBmcHNfZml4ZWQgPSB0cnVlLCBmcHNfbnVtID0gMCwgZnBzX2RlbiA9IDBcblxuICAgIGxldCB2dWlfcGFyYW1ldGVyc19wcmVzZW50X2ZsYWcgPSBnYi5yZWFkQm9vbCgpXG4gICAgaWYgKHZ1aV9wYXJhbWV0ZXJzX3ByZXNlbnRfZmxhZykge1xuICAgICAgaWYgKGdiLnJlYWRCb29sKCkpIHsgLy8gYXNwZWN0X3JhdGlvX2luZm9fcHJlc2VudF9mbGFnXG4gICAgICAgIGxldCBhc3BlY3RfcmF0aW9faWRjID0gZ2IucmVhZEJ5dGUoKVxuICAgICAgICBsZXQgcGFyX3dfdGFibGUgPSBbMSwgMTIsIDEwLCAxNiwgNDAsIDI0LCAyMCwgMzIsIDgwLCAxOCwgMTUsIDY0LCAxNjAsIDQsIDMsIDJdXG4gICAgICAgIGxldCBwYXJfaF90YWJsZSA9IFsxLCAxMSwgMTEsIDExLCAzMywgMTEsIDExLCAxMSwgMzMsIDExLCAxMSwgMzMsIDk5LCAzLCAyLCAxXVxuXG4gICAgICAgIGlmIChhc3BlY3RfcmF0aW9faWRjID4gMCAmJiBhc3BlY3RfcmF0aW9faWRjIDwgMTYpIHtcbiAgICAgICAgICBwYXJfd2lkdGggPSBwYXJfd190YWJsZVthc3BlY3RfcmF0aW9faWRjIC0gMV1cbiAgICAgICAgICBwYXJfaGVpZ2h0ID0gcGFyX2hfdGFibGVbYXNwZWN0X3JhdGlvX2lkYyAtIDFdXG4gICAgICAgIH0gZWxzZSBpZiAoYXNwZWN0X3JhdGlvX2lkYyA9PT0gMjU1KSB7XG4gICAgICAgICAgcGFyX3dpZHRoID0gZ2IucmVhZEJ5dGUoKSA8PCA4IHwgZ2IucmVhZEJ5dGUoKVxuICAgICAgICAgIHBhcl9oZWlnaHQgPSBnYi5yZWFkQnl0ZSgpIDw8IDggfCBnYi5yZWFkQnl0ZSgpXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKGdiLnJlYWRCb29sKCkpIHtcbiAgICAgICAgZ2IucmVhZEJvb2woKVxuICAgICAgfVxuICAgICAgaWYgKGdiLnJlYWRCb29sKCkpIHtcbiAgICAgICAgZ2IucmVhZEJpdHMoNClcbiAgICAgICAgaWYgKGdiLnJlYWRCb29sKCkpIHtcbiAgICAgICAgICBnYi5yZWFkQml0cygyNClcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKGdiLnJlYWRCb29sKCkpIHtcbiAgICAgICAgZ2IucmVhZFVFRygpXG4gICAgICAgIGdiLnJlYWRVRUcoKVxuICAgICAgfVxuICAgICAgaWYgKGdiLnJlYWRCb29sKCkpIHtcbiAgICAgICAgbGV0IG51bV91bml0c19pbl90aWNrID0gZ2IucmVhZEJpdHMoMzIpXG4gICAgICAgIGxldCB0aW1lX3NjYWxlID0gZ2IucmVhZEJpdHMoMzIpXG4gICAgICAgIGZwc19maXhlZCA9IGdiLnJlYWRCb29sKClcblxuICAgICAgICBmcHNfbnVtID0gdGltZV9zY2FsZVxuICAgICAgICBmcHNfZGVuID0gbnVtX3VuaXRzX2luX3RpY2sgKiAyXG4gICAgICAgIGZwcyA9IGZwc19udW0gLyBmcHNfZGVuXG4gICAgICB9XG4gICAgfVxuXG4gICAgbGV0IHBhclNjYWxlID0gMVxuICAgIGlmIChwYXJfd2lkdGggIT09IDEgfHwgcGFyX2hlaWdodCAhPT0gMSkge1xuICAgICAgcGFyU2NhbGUgPSBwYXJfd2lkdGggLyBwYXJfaGVpZ2h0XG4gICAgfVxuXG4gICAgbGV0IGNyb3BfdW5pdF94ID0gMCwgY3JvcF91bml0X3kgPSAwXG4gICAgaWYgKGNocm9tYV9mb3JtYXRfaWRjID09PSAwKSB7XG4gICAgICBjcm9wX3VuaXRfeCA9IDFcbiAgICAgIGNyb3BfdW5pdF95ID0gMiAtIGZyYW1lX21ic19vbmx5X2ZsYWdcbiAgICB9IGVsc2Uge1xuICAgICAgbGV0IHN1Yl93YyA9IChjaHJvbWFfZm9ybWF0X2lkYyA9PT0gMykgPyAxIDogMlxuICAgICAgbGV0IHN1Yl9oYyA9IChjaHJvbWFfZm9ybWF0X2lkYyA9PT0gMSkgPyAyIDogMVxuICAgICAgY3JvcF91bml0X3ggPSBzdWJfd2NcbiAgICAgIGNyb3BfdW5pdF95ID0gc3ViX2hjICogKDIgLSBmcmFtZV9tYnNfb25seV9mbGFnKVxuICAgIH1cblxuICAgIGxldCBjb2RlY193aWR0aCA9IChwaWNfd2lkdGhfaW5fbWJzX21pbnVzMSArIDEpICogMTZcbiAgICBsZXQgY29kZWNfaGVpZ2h0ID0gKDIgLSBmcmFtZV9tYnNfb25seV9mbGFnKSAqICgocGljX2hlaWdodF9pbl9tYXBfdW5pdHNfbWludXMxICsgMSkgKiAxNilcblxuICAgIGNvZGVjX3dpZHRoIC09IChmcmFtZV9jcm9wX2xlZnRfb2Zmc2V0ICsgZnJhbWVfY3JvcF9yaWdodF9vZmZzZXQpICogY3JvcF91bml0X3hcbiAgICBjb2RlY19oZWlnaHQgLT0gKGZyYW1lX2Nyb3BfdG9wX29mZnNldCArIGZyYW1lX2Nyb3BfYm90dG9tX29mZnNldCkgKiBjcm9wX3VuaXRfeVxuXG4gICAgbGV0IHByZXNlbnRfd2lkdGggPSBNYXRoLmNlaWwoY29kZWNfd2lkdGggKiBwYXJTY2FsZSlcblxuICAgIGdiLmRlc3Ryb3koKVxuICAgIGdiID0gbnVsbFxuXG4gICAgcmV0dXJuIHtcbiAgICAgIHByb2ZpbGVfc3RyaW5nOiBwcm9maWxlX3N0cmluZyxcbiAgICAgIGxldmVsX3N0cmluZzogbGV2ZWxfc3RyaW5nLFxuICAgICAgYml0X2RlcHRoOiBiaXRfZGVwdGgsXG4gICAgICBjaHJvbWFfZm9ybWF0OiBjaHJvbWFfZm9ybWF0LFxuICAgICAgY2hyb21hX2Zvcm1hdF9zdHJpbmc6IFNQU1BhcnNlci5nZXRDaHJvbWFGb3JtYXRTdHJpbmcoY2hyb21hX2Zvcm1hdCksXG5cbiAgICAgIGZyYW1lX3JhdGU6IHtcbiAgICAgICAgZml4ZWQ6IGZwc19maXhlZCxcbiAgICAgICAgZnBzOiBmcHMsXG4gICAgICAgIGZwc19kZW46IGZwc19kZW4sXG4gICAgICAgIGZwc19udW06IGZwc19udW1cbiAgICAgIH0sXG5cbiAgICAgIHBhcl9yYXRpbzoge1xuICAgICAgICB3aWR0aDogcGFyX3dpZHRoLFxuICAgICAgICBoZWlnaHQ6IHBhcl9oZWlnaHRcbiAgICAgIH0sXG5cbiAgICAgIGNvZGVjX3NpemU6IHtcbiAgICAgICAgd2lkdGg6IGNvZGVjX3dpZHRoLFxuICAgICAgICBoZWlnaHQ6IGNvZGVjX2hlaWdodFxuICAgICAgfSxcblxuICAgICAgcHJlc2VudF9zaXplOiB7XG4gICAgICAgIHdpZHRoOiBwcmVzZW50X3dpZHRoLFxuICAgICAgICBoZWlnaHQ6IGNvZGVjX2hlaWdodFxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBfc2tpcFNjYWxpbmdMaXN0IChnYiwgY291bnQpIHtcbiAgICBsZXQgbGFzdF9zY2FsZSA9IDgsIG5leHRfc2NhbGUgPSA4XG4gICAgbGV0IGRlbHRhX3NjYWxlID0gMFxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY291bnQ7IGkrKykge1xuICAgICAgaWYgKG5leHRfc2NhbGUgIT09IDApIHtcbiAgICAgICAgZGVsdGFfc2NhbGUgPSBnYi5yZWFkU0VHKClcbiAgICAgICAgbmV4dF9zY2FsZSA9IChsYXN0X3NjYWxlICsgZGVsdGFfc2NhbGUgKyAyNTYpICUgMjU2XG4gICAgICB9XG4gICAgICBsYXN0X3NjYWxlID0gKG5leHRfc2NhbGUgPT09IDApID8gbGFzdF9zY2FsZSA6IG5leHRfc2NhbGVcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgZ2V0UHJvZmlsZVN0cmluZyAocHJvZmlsZUlkYykge1xuICAgIHN3aXRjaCAocHJvZmlsZUlkYykge1xuICAgICAgY2FzZSA2NjpcbiAgICAgICAgcmV0dXJuICdCYXNlbGluZSdcbiAgICAgIGNhc2UgNzc6XG4gICAgICAgIHJldHVybiAnTWFpbidcbiAgICAgIGNhc2UgODg6XG4gICAgICAgIHJldHVybiAnRXh0ZW5kZWQnXG4gICAgICBjYXNlIDEwMDpcbiAgICAgICAgcmV0dXJuICdIaWdoJ1xuICAgICAgY2FzZSAxMTA6XG4gICAgICAgIHJldHVybiAnSGlnaDEwJ1xuICAgICAgY2FzZSAxMjI6XG4gICAgICAgIHJldHVybiAnSGlnaDQyMidcbiAgICAgIGNhc2UgMjQ0OlxuICAgICAgICByZXR1cm4gJ0hpZ2g0NDQnXG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gJ1Vua25vd24nXG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGdldExldmVsU3RyaW5nIChsZXZlbElkYykge1xuICAgIHJldHVybiAobGV2ZWxJZGMgLyAxMCkudG9GaXhlZCgxKVxuICB9XG5cbiAgc3RhdGljIGdldENocm9tYUZvcm1hdFN0cmluZyAoY2hyb21hKSB7XG4gICAgc3dpdGNoIChjaHJvbWEpIHtcbiAgICAgIGNhc2UgNDIwOlxuICAgICAgICByZXR1cm4gJzQ6MjowJ1xuICAgICAgY2FzZSA0MjI6XG4gICAgICAgIHJldHVybiAnNDoyOjInXG4gICAgICBjYXNlIDQ0NDpcbiAgICAgICAgcmV0dXJuICc0OjQ6NCdcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiAnVW5rbm93bidcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgdG9WaWRlb01ldGEgKHNwc0NvbmZpZykge1xuICAgIGxldCBtZXRhID0ge31cbiAgICBpZiAoc3BzQ29uZmlnICYmIHNwc0NvbmZpZy5jb2RlY19zaXplKSB7XG4gICAgICBtZXRhLmNvZGVjV2lkdGggPSBzcHNDb25maWcuY29kZWNfc2l6ZS53aWR0aFxuICAgICAgbWV0YS5jb2RlY0hlaWdodCA9IHNwc0NvbmZpZy5jb2RlY19zaXplLmhlaWdodFxuICAgICAgbWV0YS5wcmVzZW50V2lkdGggPSBzcHNDb25maWcucHJlc2VudF9zaXplLndpZHRoXG4gICAgICBtZXRhLnByZXNlbnRIZWlnaHQgPSBzcHNDb25maWcucHJlc2VudF9zaXplLmhlaWdodFxuICAgIH1cblxuICAgIG1ldGEucHJvZmlsZSA9IHNwc0NvbmZpZy5wcm9maWxlX3N0cmluZ1xuICAgIG1ldGEubGV2ZWwgPSBzcHNDb25maWcubGV2ZWxfc3RyaW5nXG4gICAgbWV0YS5iaXREZXB0aCA9IHNwc0NvbmZpZy5iaXRfZGVwdGhcbiAgICBtZXRhLmNocm9tYUZvcm1hdCA9IHNwc0NvbmZpZy5jaHJvbWFfZm9ybWF0XG5cbiAgICBtZXRhLnBhclJhdGlvID0ge1xuICAgICAgd2lkdGg6IHNwc0NvbmZpZy5wYXJfcmF0aW8ud2lkdGgsXG4gICAgICBoZWlnaHQ6IHNwc0NvbmZpZy5wYXJfcmF0aW8uaGVpZ2h0XG4gICAgfVxuXG4gICAgbWV0YS5mcmFtZVJhdGUgPSBzcHNDb25maWcuZnJhbWVfcmF0ZVxuXG4gICAgbGV0IGZwc0RlbiA9IG1ldGEuZnJhbWVSYXRlLmZwc19kZW5cbiAgICBsZXQgZnBzTnVtID0gbWV0YS5mcmFtZVJhdGUuZnBzX251bVxuICAgIG1ldGEucmVmU2FtcGxlRHVyYXRpb24gPSBNYXRoLmZsb29yKG1ldGEudGltZXNjYWxlICogKGZwc0RlbiAvIGZwc051bSkpXG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgU1BTUGFyc2VyXG4iLCJpbXBvcnQgeyBpc0xlLCBVVEY4IH0gZnJvbSAneGdwbGF5ZXItdXRpbHMnXG5cbmNvbnN0IERBVEFfVFlQRVMgPSB7XG4gIE5VTUJFUjogMCxcbiAgQk9PTEVBTjogMSxcbiAgU1RSSU5HOiAyLFxuICBPQkpFQ1Q6IDMsXG4gIE1JWF9BUlJBWTogOCxcbiAgT0JKRUNUX0VORDogOSxcbiAgU1RSSUNUX0FSUkFZOiAxMCxcbiAgREFURTogMTEsXG4gIExPTkVfU1RSSU5HOiAxMlxufVxuXG4vKipcbiAqIG1ldGHkv6Hmga/op6PmnpBcbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQU1GUGFyc2VyIHtcbiAgY29uc3RydWN0b3IgKCkge1xuICAgIHRoaXMub2Zmc2V0ID0gMFxuICAgIHRoaXMucmVhZE9mZnNldCA9IHRoaXMub2Zmc2V0XG4gIH1cblxuICByZXNvbHZlIChtZXRhLCBzaXplKSB7XG4gICAgaWYgKHNpemUgPCAzKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ25vdCBlbm91Z2ggZGF0YSBmb3IgbWV0YWluZm8nKVxuICAgIH1cbiAgICBjb25zdCBtZXRhRGF0YSA9IHt9XG4gICAgY29uc3QgbmFtZSA9IHRoaXMucGFyc2VWYWx1ZShtZXRhKVxuICAgIGNvbnN0IHZhbHVlID0gdGhpcy5wYXJzZVZhbHVlKG1ldGEsIHNpemUgLSBuYW1lLmJvZHlTaXplKVxuICAgIG1ldGFEYXRhW25hbWUuZGF0YV0gPSB2YWx1ZS5kYXRhXG5cbiAgICB0aGlzLnJlc2V0U3RhdHVzKClcbiAgICByZXR1cm4gbWV0YURhdGFcbiAgfVxuXG4gIHJlc2V0U3RhdHVzICgpIHtcbiAgICB0aGlzLm9mZnNldCA9IDBcbiAgICB0aGlzLnJlYWRPZmZzZXQgPSB0aGlzLm9mZnNldFxuICB9XG5cbiAgcGFyc2VTdHJpbmcgKGJ1ZmZlcikge1xuICAgIGNvbnN0IGR2ID0gbmV3IERhdGFWaWV3KGJ1ZmZlciwgdGhpcy5yZWFkT2Zmc2V0KVxuICAgIGNvbnN0IHN0ckxlbiA9IGR2LmdldFVpbnQxNigwLCAhaXNMZSlcbiAgICBsZXQgc3RyID0gJydcbiAgICBpZiAoc3RyTGVuID4gMCkge1xuICAgICAgc3RyID0gVVRGOC5kZWNvZGUobmV3IFVpbnQ4QXJyYXkoYnVmZmVyLCB0aGlzLnJlYWRPZmZzZXQgKyAyLCBzdHJMZW4pKVxuICAgIH0gZWxzZSB7XG4gICAgICBzdHIgPSAnJ1xuICAgIH1cbiAgICBsZXQgc2l6ZSA9IHN0ckxlbiArIDJcbiAgICB0aGlzLnJlYWRPZmZzZXQgKz0gc2l6ZVxuICAgIHJldHVybiB7XG4gICAgICBkYXRhOiBzdHIsXG4gICAgICBib2R5U2l6ZTogc3RyTGVuICsgMlxuICAgIH1cbiAgfVxuXG4gIHBhcnNlRGF0ZSAoYnVmZmVyLCBzaXplKSB7XG4gICAgY29uc3QgZHYgPSBuZXcgRGF0YVZpZXcoYnVmZmVyLCB0aGlzLnJlYWRPZmZzZXQsIHNpemUpXG4gICAgbGV0IHRzID0gZHYuZ2V0RmxvYXQ2NCgwLCAhaXNMZSlcbiAgICBjb25zdCB0aW1lT2Zmc2V0ID0gZHYuZ2V0SW50MTYoOCwgIWlzTGUpXG4gICAgdHMgKz0gdGltZU9mZnNldCAqIDYwICogMTAwMFxuXG4gICAgdGhpcy5yZWFkT2Zmc2V0ICs9IDEwXG4gICAgcmV0dXJuIHtcbiAgICAgIGRhdGE6IG5ldyBEYXRlKHRzKSxcbiAgICAgIGJvZHlTaXplOiAxMFxuICAgIH1cbiAgfVxuXG4gIHBhcnNlT2JqZWN0IChidWZmZXIsIHNpemUpIHtcbiAgICBjb25zdCBuYW1lID0gdGhpcy5wYXJzZVN0cmluZyhidWZmZXIsIHNpemUpXG4gICAgY29uc3QgdmFsdWUgPSB0aGlzLnBhcnNlVmFsdWUoYnVmZmVyLCBzaXplIC0gbmFtZS5ib2R5U2l6ZSlcbiAgICByZXR1cm4ge1xuICAgICAgZGF0YToge1xuICAgICAgICBuYW1lOiBuYW1lLmRhdGEsXG4gICAgICAgIHZhbHVlOiB2YWx1ZS5kYXRhXG4gICAgICB9LFxuICAgICAgYm9keVNpemU6IG5hbWUuYm9keVNpemUgKyB2YWx1ZS5ib2R5U2l6ZSxcbiAgICAgIGlzT2JqRW5kOiB2YWx1ZS5pc09iakVuZFxuICAgIH1cbiAgfVxuXG4gIHBhcnNlTG9uZ1N0cmluZyAoYnVmZmVyKSB7XG4gICAgY29uc3QgZHYgPSBuZXcgRGF0YVZpZXcoYnVmZmVyLCB0aGlzLnJlYWRPZmZzZXQpXG4gICAgY29uc3Qgc3RyTGVuID0gZHYuZ2V0VWludDMyKDAsICFpc0xlKVxuICAgIGxldCBzdHIgPSAnJ1xuICAgIGlmIChzdHJMZW4gPiAwKSB7XG4gICAgICBzdHIgPSBVVEY4LmRlY29kZShuZXcgVWludDhBcnJheShidWZmZXIsIHRoaXMucmVhZE9mZnNldCArIDIsIHN0ckxlbikpXG4gICAgfSBlbHNlIHtcbiAgICAgIHN0ciA9ICcnXG4gICAgfVxuICAgIC8vIGNvbnN0IHNpemUgPSBzdHJMZW4gKyA0O1xuICAgIHRoaXMucmVhZE9mZnNldCArPSBzdHJMZW4gKyA0XG4gICAgcmV0dXJuIHtcbiAgICAgIGRhdGE6IHN0cixcbiAgICAgIGJvZHlTaXplOiBzdHJMZW4gKyA0XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIOino+aekG1ldGHkuK3nmoTlj5jph49cbiAgICovXG4gIHBhcnNlVmFsdWUgKGRhdGEsIHNpemUpIHtcbiAgICBsZXQgYnVmZmVyID0gbmV3IEFycmF5QnVmZmVyKClcbiAgICBpZiAoZGF0YSBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKSB7XG4gICAgICBidWZmZXIgPSBkYXRhXG4gICAgfSBlbHNlIHtcbiAgICAgIGJ1ZmZlciA9IGRhdGEuYnVmZmVyXG4gICAgfVxuICAgIGNvbnN0IHtcbiAgICAgIE5VTUJFUixcbiAgICAgIEJPT0xFQU4sXG4gICAgICBTVFJJTkcsXG4gICAgICBPQkpFQ1QsXG4gICAgICBNSVhfQVJSQVksXG4gICAgICBPQkpFQ1RfRU5ELFxuICAgICAgU1RSSUNUX0FSUkFZLFxuICAgICAgREFURSxcbiAgICAgIExPTkVfU1RSSU5HXG4gICAgfSA9IERBVEFfVFlQRVNcbiAgICBjb25zdCBkYXRhVmlldyA9IG5ldyBEYXRhVmlldyhidWZmZXIsIHRoaXMucmVhZE9mZnNldCwgc2l6ZSlcbiAgICBsZXQgaXNPYmpFbmQgPSBmYWxzZVxuICAgIGNvbnN0IHR5cGUgPSBkYXRhVmlldy5nZXRVaW50OCgwKVxuICAgIGxldCBvZmZzZXQgPSAxXG4gICAgdGhpcy5yZWFkT2Zmc2V0ICs9IDFcbiAgICBsZXQgdmFsdWUgPSBudWxsXG5cbiAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgIGNhc2UgTlVNQkVSOiB7XG4gICAgICAgIHZhbHVlID0gZGF0YVZpZXcuZ2V0RmxvYXQ2NCgxLCAhaXNMZSlcbiAgICAgICAgdGhpcy5yZWFkT2Zmc2V0ICs9IDhcbiAgICAgICAgb2Zmc2V0ICs9IDhcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICAgIGNhc2UgQk9PTEVBTjoge1xuICAgICAgICBjb25zdCBib29sTnVtID0gZGF0YVZpZXcuZ2V0VWludDgoMSlcbiAgICAgICAgdmFsdWUgPSAhIWJvb2xOdW1cbiAgICAgICAgdGhpcy5yZWFkT2Zmc2V0ICs9IDFcbiAgICAgICAgb2Zmc2V0ICs9IDFcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICAgIGNhc2UgU1RSSU5HOiB7XG4gICAgICAgIGNvbnN0IHN0ciA9IHRoaXMucGFyc2VTdHJpbmcoYnVmZmVyKVxuICAgICAgICB2YWx1ZSA9IHN0ci5kYXRhXG4gICAgICAgIG9mZnNldCArPSBzdHIuYm9keVNpemVcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICAgIGNhc2UgT0JKRUNUOiB7XG4gICAgICAgIHZhbHVlID0ge31cbiAgICAgICAgbGV0IG9iakVuZFNpemUgPSAwXG4gICAgICAgIGlmIChkYXRhVmlldy5nZXRVaW50MzIoc2l6ZSAtIDQsICFpc0xlKSAmIDB4MDBGRkZGRkYpIHtcbiAgICAgICAgICBvYmpFbmRTaXplID0gM1xuICAgICAgICB9XG4gICAgICAgIC8vIHRoaXMucmVhZE9mZnNldCArPSBvZmZzZXQgLSAxO1xuICAgICAgICB3aGlsZSAob2Zmc2V0IDwgc2l6ZSAtIDQpIHtcbiAgICAgICAgICBjb25zdCBhbWZPYmogPSB0aGlzLnBhcnNlT2JqZWN0KGJ1ZmZlciwgc2l6ZSAtIG9mZnNldCAtIG9iakVuZFNpemUpXG4gICAgICAgICAgaWYgKGFtZk9iai5pc09iamVjdEVuZCkgeyBicmVhayB9XG4gICAgICAgICAgdmFsdWVbYW1mT2JqLmRhdGEubmFtZV0gPSBhbWZPYmouZGF0YS52YWx1ZVxuICAgICAgICAgIG9mZnNldCArPSBhbWZPYmouYm9keVNpemVcbiAgICAgICAgfVxuICAgICAgICBpZiAob2Zmc2V0IDw9IHNpemUgLSAzKSB7XG4gICAgICAgICAgY29uc3QgbWFyayA9IGRhdGFWaWV3LmdldFVpbnQzMihvZmZzZXQgLSAxLCAhaXNMZSkgJiAweDAwRkZGRkZGXG4gICAgICAgICAgaWYgKG1hcmsgPT09IDkpIHtcbiAgICAgICAgICAgIHRoaXMucmVhZE9mZnNldCArPSAzXG4gICAgICAgICAgICBvZmZzZXQgKz0gM1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBicmVha1xuICAgICAgfVxuICAgICAgY2FzZSBNSVhfQVJSQVk6IHtcbiAgICAgICAgdmFsdWUgPSB7fVxuICAgICAgICBvZmZzZXQgKz0gNFxuICAgICAgICB0aGlzLnJlYWRPZmZzZXQgKz0gNFxuICAgICAgICBsZXQgb2JqRW5kU2l6ZSA9IDBcbiAgICAgICAgaWYgKChkYXRhVmlldy5nZXRVaW50MzIoc2l6ZSAtIDQsICFpc0xlKSAmIDB4MDBGRkZGRkYpID09PSA5KSB7XG4gICAgICAgICAgb2JqRW5kU2l6ZSA9IDNcbiAgICAgICAgfVxuXG4gICAgICAgIHdoaWxlIChvZmZzZXQgPCBzaXplIC0gOCkge1xuICAgICAgICAgIGNvbnN0IGFtZlZhciA9IHRoaXMucGFyc2VPYmplY3QoYnVmZmVyLCBzaXplIC0gb2Zmc2V0IC0gb2JqRW5kU2l6ZSlcbiAgICAgICAgICBpZiAoYW1mVmFyLmlzT2JqZWN0RW5kKSB7IGJyZWFrIH1cbiAgICAgICAgICB2YWx1ZVthbWZWYXIuZGF0YS5uYW1lXSA9IGFtZlZhci5kYXRhLnZhbHVlXG4gICAgICAgICAgb2Zmc2V0ICs9IGFtZlZhci5ib2R5U2l6ZVxuICAgICAgICB9XG4gICAgICAgIGlmIChvZmZzZXQgPD0gc2l6ZSAtIDMpIHtcbiAgICAgICAgICBjb25zdCBtYXJrZXIgPSBkYXRhVmlldy5nZXRVaW50MzIob2Zmc2V0IC0gMSwgIWlzTGUpICYgMHgwMEZGRkZGRlxuICAgICAgICAgIGlmIChtYXJrZXIgPT09IDkpIHtcbiAgICAgICAgICAgIG9mZnNldCArPSAzXG4gICAgICAgICAgICB0aGlzLnJlYWRPZmZzZXQgKz0gM1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBicmVha1xuICAgICAgfVxuXG4gICAgICBjYXNlIE9CSkVDVF9FTkQ6IHtcbiAgICAgICAgdmFsdWUgPSBudWxsXG4gICAgICAgIGlzT2JqRW5kID0gdHJ1ZVxuICAgICAgICBicmVha1xuICAgICAgfVxuXG4gICAgICBjYXNlIFNUUklDVF9BUlJBWToge1xuICAgICAgICB2YWx1ZSA9IFtdXG4gICAgICAgIGNvbnN0IGFyckxlbmd0aCA9IGRhdGFWaWV3LmdldFVpbnQzMigxLCAhaXNMZSlcbiAgICAgICAgb2Zmc2V0ICs9IDRcbiAgICAgICAgdGhpcy5yZWFkT2Zmc2V0ICs9IDRcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhcnJMZW5ndGg7IGkrKykge1xuICAgICAgICAgIGNvbnN0IHNjcmlwdCA9IHRoaXMucGFyc2VWYWx1ZShidWZmZXIsIHNpemUgLSBvZmZzZXQpXG4gICAgICAgICAgdmFsdWUucHVzaChzY3JpcHQuZGF0YSlcbiAgICAgICAgICBvZmZzZXQgKz0gc2NyaXB0LmJvZHlTaXplXG4gICAgICAgIH1cbiAgICAgICAgYnJlYWtcbiAgICAgIH1cblxuICAgICAgY2FzZSBEQVRFOiB7XG4gICAgICAgIGNvbnN0IGRhdGUgPSB0aGlzLnBhcnNlRGF0ZShidWZmZXIsIHNpemUgLSAxKVxuICAgICAgICB2YWx1ZSA9IGRhdGUuZGF0YVxuICAgICAgICBvZmZzZXQgKz0gZGF0ZS5ib2R5U2l6ZVxuICAgICAgICBicmVha1xuICAgICAgfVxuXG4gICAgICBjYXNlIExPTkVfU1RSSU5HOiB7XG4gICAgICAgIGNvbnN0IGxvbmdTdHIgPSB0aGlzLnBhcnNlTG9uZ1N0cmluZyhidWZmZXIsIHNpemUgLSAxKVxuICAgICAgICB2YWx1ZSA9IGxvbmdTdHIuZGF0YVxuICAgICAgICBvZmZzZXQgKz0gbG9uZ1N0ci5ib2R5U2l6ZVxuICAgICAgICBicmVha1xuICAgICAgfVxuXG4gICAgICBkZWZhdWx0OiB7XG4gICAgICAgIG9mZnNldCA9IHNpemVcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgZGF0YTogdmFsdWUsXG4gICAgICBib2R5U2l6ZTogb2Zmc2V0LFxuICAgICAgaXNPYmpFbmQ6IGlzT2JqRW5kXG4gICAgfVxuICB9XG59XG4iLCJpbXBvcnQgeyBFVkVOVFMsIEF1ZGlvVHJhY2tNZXRhLCBWaWRlb1RyYWNrTWV0YSB9IGZyb20gJ3hncGxheWVyLXV0aWxzJztcbmltcG9ydCB7IFNwc1BhcnNlciB9IGZyb20gJ3hncGxheWVyLWNvZGVjJztcbmltcG9ydCB7IFZpZGVvVHJhY2ssIEF1ZGlvVHJhY2sgfSBmcm9tICd4Z3BsYXllci1idWZmZXInXG5cbmltcG9ydCBBTUZQYXJzZXIgZnJvbSAnLi9hbWYtcGFyc2VyJ1xuXG5jb25zdCBERU1VWF9FVkVOVFMgPSBFVkVOVFMuREVNVVhfRVZFTlRTO1xuXG5jbGFzcyBGbHZEZW11eGVyIHtcbiAgY29uc3RydWN0b3IgKCkge1xuICAgIHRoaXMuX2ZpcnN0RnJhZ21lbnRMb2FkZWQgPSBmYWxzZVxuICAgIHRoaXMuX3RyYWNrTnVtID0gMFxuICAgIHRoaXMuX2hhc1NjcmlwdCA9IGZhbHNlXG4gIH1cblxuICBpbml0ICgpIHtcbiAgICB0aGlzLm9uKERFTVVYX0VWRU5UUy5ERU1VWF9TVEFSVCwgdGhpcy5kb1BhcnNlRmx2LmJpbmQodGhpcykpXG4gIH1cblxuICAvKipcbiAgICogaWYgdGhlIGZsdiBoZWFkIGlzIHZhbGlkXG4gICAqIEBwYXJhbSBkYXRhXG4gICAqIEByZXR1cm5zIHtib29sZWFufVxuICAgKi9cbiAgc3RhdGljIGlzRmx2RmlsZSAoZGF0YSkge1xuICAgIHJldHVybiAhKGRhdGFbMF0gIT09IDB4NDYgfHwgZGF0YVsxXSAhPT0gMHg0QyB8fCBkYXRhWzJdICE9PSAweDU2IHx8IGRhdGFbM10gIT09IDB4MDEpXG4gIH1cblxuICAvKipcbiAgICogSWYgdGhlIHN0cmVhbSBoYXMgYXVkaW8gb3IgdmlkZW8uXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBzdHJlYW1GbGFnIC0gRGF0YSBmcm9tIHRoZSBzdHJlYW0gd2hpY2ggaXMgZGVmaW5lIHdoZXRoZXIgdGhlIGF1ZGlvIC8gdmlkZW8gdHJhY2sgaXMgZXhpc3QuXG4gICAqL1xuICBzdGF0aWMgZ2V0UGxheVR5cGUgKHN0cmVhbUZsYWcpIHtcbiAgICBjb25zdCByZXN1bHQgPSB7XG4gICAgICBoYXNWaWRlbzogZmFsc2UsXG4gICAgICBoYXNBdWRpbzogZmFsc2VcbiAgICB9XG5cbiAgICBpZiAoc3RyZWFtRmxhZyAmIDB4MDEgPiAwKSB7XG4gICAgICByZXN1bHQuaGFzVmlkZW8gPSB0cnVlXG4gICAgfVxuXG4gICAgaWYgKHN0cmVhbUZsYWcgJiAweDA0ID4gMCkge1xuICAgICAgcmVzdWx0Lmhhc0F1ZGlvID0gdHJ1ZVxuICAgIH1cblxuICAgIHJldHVybiByZXN1bHRcbiAgfVxuXG4gIGRvUGFyc2VGbHYgKCkge1xuICAgIGlmICghdGhpcy5fZmlyc3RGcmFnbWVudExvYWRlZCkge1xuICAgICAgaWYgKHRoaXMubG9hZGVyQnVmZmVyLmxlbmd0aCA8IDEzKSB7XG4gICAgICAgIHJldHVyblxuICAgICAgfVxuICAgICAgY29uc3QgaGVhZGVyID0gdGhpcy5sb2FkZXJCdWZmZXIuc2hpZnQoMTMpXG4gICAgICB0aGlzLnBhcnNlRmx2SGVhZGVyKGhlYWRlcilcbiAgICAgIHRoaXMuZG9QYXJzZUZsdigpIC8vIOmAkuW9kuiwg+eUqO+8jOe7p+e7reino+aekGZsdua1gVxuICAgIH0gZWxzZSB7XG4gICAgICBpZiAodGhpcy5sb2FkZXJCdWZmZXIubGVuZ3RoIDwgMTEpIHtcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG4gICAgICBsZXQgY2h1bms7XG4gICAgICBkbyB7XG4gICAgICAgIGNodW5rID0gdGhpcy5fcGFyc2VGbHZUYWcoKVxuICAgICAgfSB3aGlsZSAoY2h1bmspXG5cbiAgICAgIHRoaXMuZW1pdChERU1VWF9FVkVOVFMuREVNVVhfQ09NUExFVEUpXG4gICAgfVxuICB9XG5cbiAgcGFyc2VGbHZIZWFkZXIgKGhlYWRlcikge1xuICAgIGlmICghRmx2RGVtdXhlci5pc0ZsdkZpbGUoaGVhZGVyKSkge1xuICAgICAgdGhpcy5lbWl0KERFTVVYX0VWRU5UUy5ERU1VWF9FUlJPUiwgbmV3IEVycm9yKCdpbnZhbGlkIGZsdiBmaWxlJykpXG4gICAgICB0aGlzLmRvUGFyc2VGbHYoKVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9maXJzdEZyYWdtZW50TG9hZGVkID0gdHJ1ZVxuICAgICAgY29uc3QgcGxheVR5cGUgPSBGbHZEZW11eGVyLmdldFBsYXlUeXBlKGhlYWRlcls0XSlcblxuICAgICAgaWYgKHBsYXlUeXBlLmhhc1ZpZGVvKSB7XG4gICAgICAgIHRoaXMuaW5pdFZpZGVvVHJhY2soKVxuICAgICAgfVxuXG4gICAgICBpZiAocGxheVR5cGUuaGFzQXVkaW8pIHtcbiAgICAgICAgdGhpcy5pbml0QXVkaW9UcmFjaygpXG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMuZG9QYXJzZUZsdigpXG4gIH1cblxuICAvKipcbiAgICogaW5pdCBkZWZhdWx0IHZpZGVvIHRyYWNrIGNvbmZpZ3NcbiAgICovXG4gIGluaXRWaWRlb1RyYWNrICgpIHtcbiAgICB0aGlzLl90cmFja051bSsrXG4gICAgbGV0IHZpZGVvVHJhY2sgPSBuZXcgVmlkZW9UcmFjaygpXG4gICAgdmlkZW9UcmFjay5tZXRhID0gbmV3IFZpZGVvVHJhY2tNZXRhKClcbiAgICB2aWRlb1RyYWNrLmlkID0gdmlkZW9UcmFjay5tZXRhLmlkID0gdGhpcy5fdHJhY2tOdW1cblxuICAgIHRoaXMudHJhY2tzLnZpZGVvVHJhY2sgPSB2aWRlb1RyYWNrXG4gIH1cblxuICAvKipcbiAgICogaW5pdCBkZWZhdWx0IGF1ZGlvIHRyYWNrIGNvbmZpZ3NcbiAgICovXG4gIGluaXRBdWRpb1RyYWNrICgpIHtcbiAgICB0aGlzLl90cmFja051bSsrXG4gICAgbGV0IGF1ZGlvVHJhY2sgPSBuZXcgQXVkaW9UcmFjaygpXG4gICAgYXVkaW9UcmFjay5tZXRhID0gbmV3IEF1ZGlvVHJhY2tNZXRhKClcbiAgICBhdWRpb1RyYWNrLmlkID0gYXVkaW9UcmFjay5tZXRhLmlkID0gdGhpcy5fdHJhY2tOdW1cblxuICAgIHRoaXMudHJhY2tzLmF1ZGlvVHJhY2sgPSBhdWRpb1RyYWNrXG4gIH1cblxuICAvKipcbiAgICogUGFja2FnZSB0aGUgZGF0YSBhcyB0aGUgZm9sbG93aW5nIGRhdGEgc3RydWN0dXJlXG4gICAqIHtcbiAgICogICAgZGF0YTogVWludDhBcnJheS4gdGhlIFN0cmVhbSBkYXRhLlxuICAgKiAgICBpbmZvOiBUaGUgZmlyc3QgYnl0ZSBpbmZvIG9mIHRoZSBUYWcuXG4gICAqICAgIHRhZ1R5cGU6IDjjgIE544CBMThcbiAgICogICAgdGltZVN0YW1wOiB0aGUgdGltZXN0ZW1wXG4gICAqIH1cbiAgICovXG4gIF9wYXJzZUZsdlRhZyAoKSB7XG4gICAgaWYgKHRoaXMubG9hZGVyQnVmZmVyLmxlbmd0aCA8IDExKSB7XG4gICAgICByZXR1cm4gbnVsbFxuICAgIH1cbiAgICBsZXQgY2h1bmsgPSB0aGlzLl9wYXJzZUZsdlRhZ0hlYWRlcigpXG4gICAgaWYgKGNodW5rKSB7XG4gICAgICB0aGlzLl9wcm9jZXNzQ2h1bmsoY2h1bmspXG4gICAgfVxuICAgIHJldHVybiBjaHVua1xuICB9XG5cbiAgLyoqXG4gICAqIFBhcnNlIHRoZSAxMSBieXRlIHRhZyBIZWFkZXJcbiAgICovXG4gIF9wYXJzZUZsdlRhZ0hlYWRlciAoKSB7XG4gICAgbGV0IG9mZnNldCA9IDBcbiAgICBsZXQgY2h1bmsgPSB7fVxuXG4gICAgbGV0IHRhZ1R5cGUgPSB0aGlzLmxvYWRlckJ1ZmZlci50b0ludChvZmZzZXQsIDEpXG4gICAgb2Zmc2V0ICs9IDFcblxuICAgIC8vIDIgYml0IEZNUyByZXNlcnZlZCwgMSBiaXQgZmlsdGVyZWQsIDUgYml0IHRhZyB0eXBlXG4gICAgY2h1bmsuZmlsdGVyZWQgPSAodGFnVHlwZSAmIDMyKSA+Pj4gNVxuICAgIGNodW5rLnRhZ1R5cGUgPSB0YWdUeXBlICYgMzFcblxuICAgIC8vIDMgQnl0ZSBkYXRhc2l6ZVxuICAgIGNodW5rLmRhdGFzaXplID0gdGhpcy5sb2FkZXJCdWZmZXIudG9JbnQob2Zmc2V0LCAzKVxuICAgIG9mZnNldCArPSAzXG5cbiAgICBpZiAoKGNodW5rLnRhZ1R5cGUgIT09IDggJiYgY2h1bmsudGFnVHlwZSAhPT0gOSAmJiBjaHVuay50YWdUeXBlICE9PSAxMSAmJiBjaHVuay50YWdUeXBlICE9PSAxOCkgfHxcbiAgICAgIHRoaXMubG9hZGVyQnVmZmVyLnRvSW50KDgsIDMpICE9PSAwKSB7XG4gICAgICBpZiAodGhpcy5sb2FkZXJCdWZmZXIgJiYgdGhpcy5sb2FkZXJCdWZmZXIubGVuZ3RoID4gMCkge1xuICAgICAgICB0aGlzLmxvYWRlckJ1ZmZlci5zaGlmdCgxKVxuICAgICAgfVxuICAgICAgdGhpcy5sb2dnZXIud2Fybih0aGlzLlRBRywgJ3RhZ1R5cGUgJyArIGNodW5rLnRhZ1R5cGUpXG4gICAgICByZXR1cm4gbnVsbFxuICAgIH1cblxuICAgIGlmICh0aGlzLmxvYWRlckJ1ZmZlci5sZW5ndGggPCBjaHVuay5kYXRhc2l6ZSArIDE1KSB7XG4gICAgICByZXR1cm4gbnVsbFxuICAgIH1cblxuICAgIC8vIHJlYWQgdGhlIGRhdGEuXG4gICAgdGhpcy5sb2FkZXJCdWZmZXIuc2hpZnQoNClcblxuICAgIC8vIDMgQnl0ZSB0aW1lc3RhbXBcbiAgICBsZXQgdGltZXN0YW1wID0gdGhpcy5sb2FkZXJCdWZmZXIudG9JbnQoMCwgMylcbiAgICB0aGlzLmxvYWRlckJ1ZmZlci5zaGlmdCgzKVxuXG4gICAgLy8gMSBCeXRlIHRpbWVzdGFtcEV4dFxuICAgIGxldCB0aW1lc3RhbXBFeHQgPSB0aGlzLmxvYWRlckJ1ZmZlci5zaGlmdCgxKVswXVxuICAgIGlmICh0aW1lc3RhbXBFeHQgPiAwKSB7XG4gICAgICB0aW1lc3RhbXAgKz0gdGltZXN0YW1wRXh0ICogMHgxMDAwMDAwXG4gICAgfVxuXG4gICAgY2h1bmsuZHRzID0gdGltZXN0YW1wXG5cbiAgICAvLyBzdHJlYW1JZFxuICAgIHRoaXMubG9hZGVyQnVmZmVyLnNoaWZ0KDMpXG4gICAgcmV0dXJuIGNodW5rXG4gIH1cblxuICBfcHJvY2Vzc0NodW5rIChjaHVuaykge1xuICAgIHN3aXRjaCAoY2h1bmsudGFnVHlwZSkge1xuICAgICAgY2FzZSAxODpcbiAgICAgICAgdGhpcy5fcGFyc2VTY3JpcHREYXRhKGNodW5rKVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSA4OlxuICAgICAgICB0aGlzLl9wYXJzZUFBQ0RhdGEoY2h1bmspXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlIDk6XG4gICAgICAgIHRoaXMuX3BhcnNlSGV2Y0RhdGEoY2h1bmspXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlIDExOlxuICAgICAgICAvLyBmb3Igc29tZSBDRE4gdGhhdCBkaWQgbm90IHByb2Nlc3MgdGhlIGN1cnJlY3QgUlRNUCBtZXNzYWdlc1xuICAgICAgICB0aGlzLmxvYWRlckJ1ZmZlci5zaGlmdCgzKVxuICAgICAgICBicmVha1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgdGhpcy5sb2FkZXJCdWZmZXIuc2hpZnQoMSlcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogcGFyc2UgZmx2IHNjcmlwdCBkYXRhXG4gICAqIEBwYXJhbSBjaHVua1xuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX3BhcnNlU2NyaXB0RGF0YSAoY2h1bmspIHtcbiAgICBsZXQgYXVkaW9UcmFjayA9IHRoaXMudHJhY2tzLmF1ZGlvVHJhY2tcbiAgICBsZXQgdmlkZW9UcmFjayA9IHRoaXMudHJhY2tzLnZpZGVvVHJhY2tcblxuICAgIGxldCBkYXRhID0gdGhpcy5sb2FkZXJCdWZmZXIuc2hpZnQoY2h1bmsuZGF0YXNpemUpXG5cbiAgICBjb25zdCBpbmZvID0gbmV3IEFNRlBhcnNlcigpLnJlc29sdmUoZGF0YSwgZGF0YS5sZW5ndGgpXG5cbiAgICBjb25zdCBvbk1ldGFEYXRhID0gdGhpcy5fY29udGV4dC5vbk1ldGFEYXRhID0gaW5mbyA/IGluZm8ub25NZXRhRGF0YSA6IHVuZGVmaW5lZFxuXG4gICAgLy8gZmlsbCBtZWRpYUluZm9cbiAgICB0aGlzLl9jb250ZXh0Lm1lZGlhSW5mby5kdXJhdGlvbiA9IG9uTWV0YURhdGEuZHVyYXRpb25cbiAgICB0aGlzLl9jb250ZXh0Lm1lZGlhSW5mby5oYXNWaWRlbyA9IG9uTWV0YURhdGEuaGFzVmlkZW9cbiAgICB0aGlzLl9jb250ZXh0Lm1lZGlhSW5mby5oc2FBdWRpbyA9IG9uTWV0YURhdGEuaGFzQXVkaW9cblxuICAgIGxldCB2YWxpZGF0ZSA9IHRoaXMuX2RhdGFzaXplVmFsaWRhdG9yKGNodW5rLmRhdGFzaXplKVxuICAgIGlmICh2YWxpZGF0ZSkge1xuICAgICAgdGhpcy5lbWl0KERFTVVYX0VWRU5UUy5NRURJQV9JTkZPKVxuICAgICAgdGhpcy5faGFzU2NyaXB0ID0gdHJ1ZVxuICAgIH1cblxuICAgIC8vIEVkaXQgZGVmYXVsdCBtZXRhLlxuICAgIGlmIChhdWRpb1RyYWNrICYmICFhdWRpb1RyYWNrLmhhc1NwZWNpZmljQ29uZmlnKSB7XG4gICAgICBsZXQgbWV0YSA9IGF1ZGlvVHJhY2subWV0YVxuICAgICAgaWYgKG9uTWV0YURhdGEuYXVkaW9zYW1wbGVyYXRlKSB7XG4gICAgICAgIG1ldGEuc2FtcGxlUmF0ZSA9IG9uTWV0YURhdGEuYXVkaW9zYW1wbGVyYXRlXG4gICAgICB9XG5cbiAgICAgIGlmIChvbk1ldGFEYXRhLmF1ZGlvY2hhbm5lbHMpIHtcbiAgICAgICAgbWV0YS5jaGFubmVsQ291bnQgPSBvbk1ldGFEYXRhLmF1ZGlvY2hhbm5lbHNcbiAgICAgIH1cblxuICAgICAgc3dpdGNoIChvbk1ldGFEYXRhLmF1ZGlvc2FtcGxlcmF0ZSkge1xuICAgICAgICBjYXNlIDQ0MTAwOlxuICAgICAgICAgIG1ldGEuc2FtcGxlUmF0ZUluZGV4ID0gNFxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgMjIwNTA6XG4gICAgICAgICAgbWV0YS5zYW1wbGVSYXRlSW5kZXggPSA3XG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAxMTAyNTpcbiAgICAgICAgICBtZXRhLnNhbXBsZVJhdGVJbmRleCA9IDEwXG4gICAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHZpZGVvVHJhY2sgJiYgIXZpZGVvVHJhY2suaGFzU3BlY2lmaWNDb25maWcpIHtcbiAgICAgIGxldCBtZXRhID0gdmlkZW9UcmFjay5tZXRhXG4gICAgICBpZiAodHlwZW9mIG9uTWV0YURhdGEuZnJhbWVyYXRlID09PSAnbnVtYmVyJykge1xuICAgICAgICBsZXQgZnBzTnVtID0gTWF0aC5mbG9vcihvbk1ldGFEYXRhLmZyYW1lcmF0ZSAqIDEwMDApXG4gICAgICAgIGlmIChmcHNOdW0gPiAwKSB7XG4gICAgICAgICAgbGV0IGZwcyA9IGZwc051bSAvIDEwMDBcbiAgICAgICAgICBpZiAoIW1ldGEuZnJhbWVSYXRlKSB7XG4gICAgICAgICAgICBtZXRhLmZyYW1lUmF0ZSA9IHt9XG4gICAgICAgICAgfVxuICAgICAgICAgIG1ldGEuZnJhbWVSYXRlLmZpeGVkID0gdHJ1ZVxuICAgICAgICAgIG1ldGEuZnJhbWVSYXRlLmZwcyA9IGZwc1xuICAgICAgICAgIG1ldGEuZnJhbWVSYXRlLmZwc19udW0gPSBmcHNOdW1cbiAgICAgICAgICBtZXRhLmZyYW1lUmF0ZS5mcHNfZGVuID0gMTAwMFxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgX2FhY1NlcXVlbmNlSGVhZGVyUGFyc2VyIChkYXRhKSB7XG4gICAgbGV0IHJldCA9IHt9XG4gICAgcmV0Lmhhc1NwZWNpZmljQ29uZmlnID0gdHJ1ZVxuICAgIHJldC5vYmplY3RUeXBlID0gZGF0YVsxXSA+Pj4gM1xuICAgIHJldC5zYW1wbGVSYXRlSW5kZXggPSAoKGRhdGFbMV0gJiA3KSA8PCAxKSB8IChkYXRhWzJdID4+PiA3KVxuICAgIHJldC5hdWRpb3NhbXBsZXJhdGUgPSB0aGlzLl9zd2l0Y2hBdWRpb1NhbXBsZVJhdGUocmV0LnNhbXBsZVJhdGVJbmRleClcbiAgICByZXQuY2hhbm5lbENvdW50ID0gKGRhdGFbMl0gJiAxMjApID4+PiAzXG4gICAgcmV0LmZyYW1lTGVuZ3RoID0gKGRhdGFbMl0gJiA0KSA+Pj4gMlxuICAgIHJldC5kZXBlbmRzT25Db3JlQ29kZXIgPSAoZGF0YVsyXSAmIDIpID4+PiAxXG4gICAgcmV0LmV4dGVuc2lvbkZsYWdJbmRleCA9IGRhdGFbMl0gJiAxXG5cbiAgICByZXQuY29kZWMgPSBgbXA0YS40MC4ke3JldC5vYmplY3RUeXBlfWBcbiAgICBsZXQgdXNlckFnZW50ID0gd2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKTtcbiAgICBsZXQgZXh0ZW5zaW9uU2FtcGxpbmdJbmRleDtcblxuICAgIGxldCBjb25maWc7XG4gICAgbGV0IHNhbXBsaW5nSW5kZXggPSByZXQuc2FtcGxlUmF0ZUluZGV4O1xuXG4gICAgaWYgKHVzZXJBZ2VudC5pbmRleE9mKCdmaXJlZm94JykgIT09IC0xKSB7XG4gICAgICAvLyBmaXJlZm94OiB1c2UgU0JSIChIRS1BQUMpIGlmIGZyZXEgbGVzcyB0aGFuIDI0a0h6XG4gICAgICBpZiAocmV0LnNhbXBsZVJhdGVJbmRleCA+PSA2KSB7XG4gICAgICAgIHJldC5vYmplY3RUeXBlID0gNTtcbiAgICAgICAgY29uZmlnID0gbmV3IEFycmF5KDQpO1xuICAgICAgICBleHRlbnNpb25TYW1wbGluZ0luZGV4ID0gc2FtcGxpbmdJbmRleCAtIDM7XG4gICAgICB9IGVsc2UgeyAvLyB1c2UgTEMtQUFDXG4gICAgICAgIHJldC5vYmplY3RUeXBlID0gMjtcbiAgICAgICAgY29uZmlnID0gbmV3IEFycmF5KDIpO1xuICAgICAgICBleHRlbnNpb25TYW1wbGluZ0luZGV4ID0gc2FtcGxpbmdJbmRleDtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHVzZXJBZ2VudC5pbmRleE9mKCdhbmRyb2lkJykgIT09IC0xKSB7XG4gICAgICAvLyBhbmRyb2lkOiBhbHdheXMgdXNlIExDLUFBQ1xuICAgICAgcmV0Lm9iamVjdFR5cGUgPSAyO1xuICAgICAgY29uZmlnID0gbmV3IEFycmF5KDIpO1xuICAgICAgZXh0ZW5zaW9uU2FtcGxpbmdJbmRleCA9IHNhbXBsaW5nSW5kZXg7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIGZvciBvdGhlciBicm93c2VycywgZS5nLiBjaHJvbWUuLi5cbiAgICAgIC8vIEFsd2F5cyB1c2UgSEUtQUFDIHRvIG1ha2UgaXQgZWFzaWVyIHRvIHN3aXRjaCBhYWMgY29kZWMgcHJvZmlsZVxuICAgICAgcmV0Lm9iamVjdFR5cGUgPSA1O1xuICAgICAgZXh0ZW5zaW9uU2FtcGxpbmdJbmRleCA9IHJldC5zYW1wbGVSYXRlSW5kZXg7XG4gICAgICBjb25maWcgPSBuZXcgQXJyYXkoNCk7XG5cbiAgICAgIGlmIChyZXQuc2FtcGxlUmF0ZUluZGV4ID49IDYpIHtcbiAgICAgICAgZXh0ZW5zaW9uU2FtcGxpbmdJbmRleCA9IHJldC5zYW1wbGVSYXRlSW5kZXggLSAzO1xuICAgICAgfSBlbHNlIGlmIChyZXQuY2hhbm5lbENvdW50ID09PSAxKSB7IC8vIE1vbm8gY2hhbm5lbFxuICAgICAgICByZXQub2JqZWN0VHlwZSA9IDI7XG4gICAgICAgIGNvbmZpZyA9IG5ldyBBcnJheSgyKTtcbiAgICAgICAgZXh0ZW5zaW9uU2FtcGxpbmdJbmRleCA9IHJldC5zYW1wbGVSYXRlSW5kZXg7XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uZmlnWzBdID0gcmV0Lm9iamVjdFR5cGUgPDwgMztcbiAgICBjb25maWdbMF0gfD0gKHJldC5zYW1wbGVSYXRlSW5kZXggJiAweDBGKSA+Pj4gMTtcbiAgICBjb25maWdbMV0gPSAocmV0LnNhbXBsZVJhdGVJbmRleCAmIDB4MEYpIDw8IDc7XG4gICAgY29uZmlnWzFdIHw9IChyZXQuY2hhbm5lbENvdW50ICYgMHgwRikgPDwgMztcbiAgICBpZiAocmV0Lm9iamVjdFR5cGUgPT09IDUpIHtcbiAgICAgIGNvbmZpZ1sxXSB8PSAoKGV4dGVuc2lvblNhbXBsaW5nSW5kZXggJiAweDBGKSA+Pj4gMSk7XG4gICAgICBjb25maWdbMl0gPSAoZXh0ZW5zaW9uU2FtcGxpbmdJbmRleCAmIDB4MDEpIDw8IDc7XG4gICAgICAvLyBleHRlbmRlZCBhdWRpbyBvYmplY3QgdHlwZTogZm9yY2UgdG8gMiAoTEMtQUFDKVxuICAgICAgY29uZmlnWzJdIHw9ICgyIDw8IDIpO1xuICAgICAgY29uZmlnWzNdID0gMDtcbiAgICB9XG4gICAgcmV0LmNvbmZpZyA9IGNvbmZpZ1xuICAgIHJldHVybiByZXRcbiAgfVxuXG4gIF9wYXJzZUFBQ0RhdGEgKGNodW5rKSB7XG4gICAgbGV0IHRyYWNrID0gdGhpcy50cmFja3MuYXVkaW9UcmFja1xuICAgIGlmICghdHJhY2spIHtcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGxldCBtZXRhID0gdHJhY2subWV0YVxuXG4gICAgaWYgKCFtZXRhKSB7XG4gICAgICBtZXRhID0gbmV3IEF1ZGlvVHJhY2tNZXRhKClcbiAgICB9XG5cbiAgICBsZXQgaW5mbyA9IHRoaXMubG9hZGVyQnVmZmVyLnNoaWZ0KDEpWzBdXG5cbiAgICBjaHVuay5kYXRhID0gdGhpcy5sb2FkZXJCdWZmZXIuc2hpZnQoY2h1bmsuZGF0YXNpemUgLSAxKVxuXG4gICAgbGV0IGZvcm1hdCA9IChpbmZvICYgMjQwKSA+Pj4gNFxuXG4gICAgdHJhY2suZm9ybWF0ID0gZm9ybWF0XG5cbiAgICBpZiAoZm9ybWF0ICE9PSAxMCkge1xuICAgICAgdGhpcy5lbWl0KERFTVVYX0VWRU5UUy5ERU1VWF9FUlJPUiwgbmV3IEVycm9yKGBpbnZhbGlkIGF1ZGlvIGZvcm1hdDogJHtmb3JtYXR9YCkpXG4gICAgfVxuXG4gICAgaWYgKGZvcm1hdCA9PT0gMTAgJiYgIXRoaXMuX2hhc0F1ZGlvU2VxdWVuY2UpIHtcbiAgICAgIG1ldGEuc2FtcGxlUmF0ZSA9IHRoaXMuX3N3aXRjaEF1ZGlvU2FtcGxpbmdGcmVxdWVuY3koaW5mbylcbiAgICAgIG1ldGEuc2FtcGxlUmF0ZUluZGV4ID0gKGluZm8gJiAxMikgPj4+IDJcbiAgICAgIG1ldGEuZnJhbWVMZW50aCA9IChpbmZvICYgMikgPj4+IDFcbiAgICAgIG1ldGEuY2hhbm5lbENvdW50ID0gaW5mbyAmIDFcbiAgICAgIG1ldGEucmVmU2FtcGxlRHVyYXRpb24gPSBNYXRoLmZsb29yKDEwMjQgLyBtZXRhLmF1ZGlvU2FtcGxlUmF0ZSAqIG1ldGEudGltZXNjYWxlKVxuICAgIH1cblxuICAgIGxldCBhdWRpb1NhbXBsZVJhdGUgPSBtZXRhLmF1ZGlvU2FtcGxlUmF0ZVxuICAgIGxldCBhdWRpb1NhbXBsZVJhdGVJbmRleCA9IG1ldGEuc2FtcGxlUmF0ZUluZGV4XG4gICAgbGV0IHJlZlNhbXBsZUR1cmF0aW9uID0gbWV0YS5yZWZTYW1wbGVEdXJhdGlvblxuXG4gICAgZGVsZXRlIGNodW5rLnRhZ1R5cGVcbiAgICBsZXQgdmFsaWRhdGUgPSB0aGlzLl9kYXRhc2l6ZVZhbGlkYXRvcihjaHVuay5kYXRhc2l6ZSlcblxuICAgIGlmIChjaHVuay5kYXRhWzBdID09PSAwKSB7IC8vIEFBQyBTZXF1ZW5jZSBIZWFkZXJcbiAgICAgIGxldCBhYWNIZWFkZXIgPSB0aGlzLl9hYWNTZXF1ZW5jZUhlYWRlclBhcnNlcihjaHVuay5kYXRhKVxuICAgICAgYXVkaW9TYW1wbGVSYXRlID0gYWFjSGVhZGVyLmF1ZGlvc2FtcGxlcmF0ZSB8fCBtZXRhLmF1ZGlvU2FtcGxlUmF0ZVxuICAgICAgYXVkaW9TYW1wbGVSYXRlSW5kZXggPSBhYWNIZWFkZXIuc2FtcGxlUmF0ZUluZGV4IHx8IG1ldGEuc2FtcGxlUmF0ZUluZGV4XG4gICAgICByZWZTYW1wbGVEdXJhdGlvbiA9IE1hdGguZmxvb3IoMTAyNCAvIGF1ZGlvU2FtcGxlUmF0ZSAqIG1ldGEudGltZXNjYWxlKVxuXG4gICAgICBtZXRhLmNoYW5uZWxDb3VudCA9IGFhY0hlYWRlci5jaGFubmVsQ291bnRcbiAgICAgIG1ldGEuc2FtcGxlUmF0ZSA9IGF1ZGlvU2FtcGxlUmF0ZVxuICAgICAgbWV0YS5zYW1wbGVSYXRlSW5kZXggPSBhdWRpb1NhbXBsZVJhdGVJbmRleFxuICAgICAgbWV0YS5yZWZTYW1wbGVEdXJhdGlvbiA9IHJlZlNhbXBsZUR1cmF0aW9uXG4gICAgICBtZXRhLmR1cmF0aW9uID0gdGhpcy5fY29udGV4dC5tZWRpYUluZm8uZHVyYXRpb24gKiBtZXRhLnRpbWVzY2FsZVxuICAgICAgbWV0YS5jb25maWcgPSBhYWNIZWFkZXIuY29uZmlnXG4gICAgICBtZXRhLm9iamVjdFR5cGUgPSBhYWNIZWFkZXIub2JqZWN0VHlwZTtcblxuICAgICAgY29uc3QgYXVkaW9NZWRpYSA9IHRoaXMuX2NvbnRleHQubWVkaWFJbmZvLmF1ZGlvXG5cbiAgICAgIC8vIGZpbGwgYXVkaW8gbWVkaWEgaW5mb1xuICAgICAgYXVkaW9NZWRpYS5jb2RlYyA9IGFhY0hlYWRlci5jb2RlY1xuICAgICAgYXVkaW9NZWRpYS5jaGFubmVsQ291bnQgPSBhYWNIZWFkZXIuY2hhbm5lbENvdW50XG4gICAgICBhdWRpb01lZGlhLnNhbXBsZVJhdGUgPSBhdWRpb1NhbXBsZVJhdGVcbiAgICAgIGF1ZGlvTWVkaWEuc2FtcGxlUmF0ZUluZGV4ID0gYWFjSGVhZGVyLmF1ZGlvU2FtcGxlUmF0ZUluZGV4XG5cbiAgICAgIGlmICh0aGlzLl9oYXNTY3JpcHQgJiYgIXRoaXMuX2hhc0F1ZGlvU2VxdWVuY2UpIHtcbiAgICAgICAgdGhpcy5lbWl0KERFTVVYX0VWRU5UUy5NRVRBREFUQV9QQVJTRUQsICdhdWRpbycpXG4gICAgICB9IGVsc2UgaWYgKHRoaXMuX2hhc1NjcmlwdCAmJiB0aGlzLl9oYXNBdWRpb1NlcXVlbmNlKSB7XG4gICAgICAgIHRoaXMuZW1pdChERU1VWF9FVkVOVFMuQVVESU9fTUVUQURBVEFfQ0hBTkdFKVxuICAgICAgfVxuICAgICAgO1xuICAgICAgdGhpcy5faGFzQXVkaW9TZXF1ZW5jZSA9IHRydWVcbiAgICB9IGVsc2Uge1xuICAgICAgY2h1bmsuZGF0YSA9IGNodW5rLmRhdGEuc2xpY2UoMSwgY2h1bmsuZGF0YS5sZW5ndGgpXG4gICAgICB0cmFjay5zYW1wbGVzLnB1c2goY2h1bmspXG4gICAgfVxuICAgIGlmICghdmFsaWRhdGUpIHtcbiAgICAgIGNvbnN0IGVycm9yID0gbmV3IEVycm9yKCdUQUcgbGVuZ3RoIGVycm9yIGF0ICcgKyBjaHVuay5kYXRhc2l6ZSlcbiAgICAgIHRoaXMuZW1pdChERU1VWF9FVkVOVFMuREVNVVhfRVJST1IsIGVycm9yLm1lc3NhZ2UpXG4gICAgICB0aGlzLmxvZ2dlci53YXJuKHRoaXMuVEFHLCBlcnJvci5tZXNzYWdlKVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBwYXJzZSBoZXZjL2F2YyB2aWRlbyBkYXRhXG4gICAqIEBwYXJhbSBjaHVua1xuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX3BhcnNlSGV2Y0RhdGEgKGNodW5rKSB7XG4gICAgLy8gaGVhZGVyXG4gICAgbGV0IGluZm8gPSB0aGlzLmxvYWRlckJ1ZmZlci5zaGlmdCgxKVswXVxuICAgIGNodW5rLmZyYW1lVHlwZSA9IChpbmZvICYgMHhmMCkgPj4+IDRcbiAgICBjaHVuay5pc0tleWZyYW1lID0gY2h1bmsuZnJhbWVUeXBlID09PSAxXG4gICAgLy8gbGV0IHRlbXBDb2RlY0lEID0gdGhpcy50cmFja3MudmlkZW9UcmFjay5jb2RlY0lEXG4gICAgbGV0IGNvZGVjSUQgPSBpbmZvICYgMHgwZlxuICAgIHRoaXMudHJhY2tzLnZpZGVvVHJhY2suY29kZWNJRCA9IGNvZGVjSURcblxuICAgIC8vIGhldmPlkoxhdmPnmoRoZWFkZXLop6PmnpDmlrnlvI/kuIDmoLdcbiAgICBjaHVuay5hdmNQYWNrZXRUeXBlID0gdGhpcy5sb2FkZXJCdWZmZXIuc2hpZnQoMSlbMF1cbiAgICBjaHVuay5jdHMgPSB0aGlzLmxvYWRlckJ1ZmZlci50b0ludCgwLCAzKVxuICAgIHRoaXMubG9hZGVyQnVmZmVyLnNoaWZ0KDMpXG5cbiAgICAvLyAxMiBmb3IgaGV2YywgNyBmb3IgYXZjXG4gICAgaWYgKGNvZGVjSUQgPT09IDEyKSB7XG4gICAgICBjb25zdCBkYXRhID0gdGhpcy5sb2FkZXJCdWZmZXIuc2hpZnQoY2h1bmsuZGF0YXNpemUgLSA1KVxuICAgICAgY2h1bmsuZGF0YSA9IGRhdGFcblxuICAgICAgaWYgKE51bWJlci5wYXJzZUludChjaHVuay5hdmNQYWNrZXRUeXBlKSAhPT0gMCkge1xuICAgICAgICBpZiAoIXRoaXMuX2RhdGFzaXplVmFsaWRhdG9yKGNodW5rLmRhdGFzaXplKSkge1xuICAgICAgICAgIHRoaXMubG9nZ2VyLndhcm4odGhpcy5UQUcsIGBpbnZhbGlkIHZpZGVvIHRhZyBkYXRhc2l6ZTogJHtjaHVuay5kYXRhc2l6ZX1gKVxuICAgICAgICB9XG4gICAgICAgIGxldCBuYWx1ID0ge31cbiAgICAgICAgbGV0IHIgPSAwXG4gICAgICAgIG5hbHUuY3RzID0gY2h1bmsuY3RzXG4gICAgICAgIG5hbHUuZHRzID0gY2h1bmsuZHRzXG4gICAgICAgIHdoaWxlIChjaHVuay5kYXRhLmxlbmd0aCA+IHIpIHtcbiAgICAgICAgICBsZXQgc2l6ZXMgPSBjaHVuay5kYXRhLnNsaWNlKE51bWJlci5wYXJzZUludChyKSwgNCArIHIpXG4gICAgICAgICAgbmFsdS5zaXplID0gc2l6ZXNbM11cbiAgICAgICAgICBuYWx1LnNpemUgKz0gc2l6ZXNbMl0gKiAyNTZcbiAgICAgICAgICBuYWx1LnNpemUgKz0gc2l6ZXNbMV0gKiAyNTYgKiAyNTZcbiAgICAgICAgICBuYWx1LnNpemUgKz0gc2l6ZXNbMF0gKiAyNTYgKiAyNTYgKiAyNTZcbiAgICAgICAgICByICs9IDRcbiAgICAgICAgICBuYWx1LmRhdGEgPSBjaHVuay5kYXRhLnNsaWNlKE51bWJlci5wYXJzZUludChyKSwgbmFsdS5zaXplICsgcilcbiAgICAgICAgICByICs9IG5hbHUuc2l6ZVxuICAgICAgICAgIHRoaXMudHJhY2tzLnZpZGVvVHJhY2suc2FtcGxlcy5wdXNoKG5hbHUpXG4gICAgICAgICAgdGhpcy5lbWl0KERFTVVYX0VWRU5UUy5NRVRBREFUQV9QQVJTRUQsICd2aWRlbycpXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoTnVtYmVyLnBhcnNlSW50KGNodW5rLmF2Y1BhY2tldFR5cGUpID09PSAwKSB7XG4gICAgICAgIGlmICghdGhpcy5fZGF0YXNpemVWYWxpZGF0b3IoY2h1bmsuZGF0YXNpemUpKSB7XG4gICAgICAgICAgdGhpcy5sb2dnZXIud2Fybih0aGlzLlRBRywgYGludmFsaWQgdmlkZW8gdGFnIGRhdGFzaXplOiAke2NodW5rLmRhdGFzaXplfWApXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5lbWl0KERFTVVYX0VWRU5UUy5NRVRBREFUQV9QQVJTRUQsICd2aWRlbycpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGNvZGVjSUQgPT09IDcpIHtcbiAgICAgIGxldCBkYXRhID0gdGhpcy5sb2FkZXJCdWZmZXIuc2hpZnQoY2h1bmsuZGF0YXNpemUgLSA1KVxuICAgICAgaWYgKGRhdGFbNF0gPT09IDAgJiYgZGF0YVs1XSA9PT0gMCAmJiBkYXRhWzZdID09PSAwICYmIGRhdGFbN10gPT09IDEpIHtcbiAgICAgICAgbGV0IGF2Y2NsZW5ndGggPSAwXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgNDsgaSsrKSB7XG4gICAgICAgICAgYXZjY2xlbmd0aCA9IGF2Y2NsZW5ndGggKiAyNTYgKyBkYXRhW2ldXG4gICAgICAgIH1cbiAgICAgICAgYXZjY2xlbmd0aCAtPSA0XG4gICAgICAgIGRhdGEgPSBkYXRhLnNsaWNlKDQsIGRhdGEubGVuZ3RoKVxuICAgICAgICBkYXRhWzNdID0gYXZjY2xlbmd0aCAlIDI1NlxuICAgICAgICBhdmNjbGVuZ3RoID0gKGF2Y2NsZW5ndGggLSBkYXRhWzNdKSAvIDI1NlxuICAgICAgICBkYXRhWzJdID0gYXZjY2xlbmd0aCAlIDI1NlxuICAgICAgICBhdmNjbGVuZ3RoID0gKGF2Y2NsZW5ndGggLSBkYXRhWzJdKSAvIDI1NlxuICAgICAgICBkYXRhWzFdID0gYXZjY2xlbmd0aCAlIDI1NlxuICAgICAgICBkYXRhWzBdID0gKGF2Y2NsZW5ndGggLSBkYXRhWzFdKSAvIDI1NlxuICAgICAgfVxuXG4gICAgICBjaHVuay5kYXRhID0gZGF0YVxuICAgICAgLy8gSWYgaXQgaXMgQVZDIHNlcXVlY2UgSGVhZGVyLlxuICAgICAgaWYgKGNodW5rLmF2Y1BhY2tldFR5cGUgPT09IDApIHtcbiAgICAgICAgdGhpcy5fYXZjU2VxdWVuY2VIZWFkZXJQYXJzZXIoY2h1bmsuZGF0YSlcbiAgICAgICAgbGV0IHZhbGlkYXRlID0gdGhpcy5fZGF0YXNpemVWYWxpZGF0b3IoY2h1bmsuZGF0YXNpemUpXG4gICAgICAgIGlmICh2YWxpZGF0ZSkge1xuICAgICAgICAgIGlmICh0aGlzLl9oYXNTY3JpcHQgJiYgIXRoaXMuX2hhc1ZpZGVvU2VxdWVuY2UpIHtcbiAgICAgICAgICAgIHRoaXMuZW1pdChERU1VWF9FVkVOVFMuTUVUQURBVEFfUEFSU0VELCAndmlkZW8nKVxuICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5faGFzU2NyaXB0ICYmIHRoaXMuX2hhc1ZpZGVvU2VxdWVuY2UpIHtcbiAgICAgICAgICAgIHRoaXMuZW1pdChERU1VWF9FVkVOVFMuVklERU9fTUVUQURBVEFfQ0hBTkdFKVxuICAgICAgICAgIH1cbiAgICAgICAgICB0aGlzLl9oYXNWaWRlb1NlcXVlbmNlID0gdHJ1ZVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoIXRoaXMuX2RhdGFzaXplVmFsaWRhdG9yKGNodW5rLmRhdGFzaXplKSkge1xuICAgICAgICAgIHRoaXMubG9nZ2VyLndhcm4odGhpcy5UQUcsIGBpbnZhbGlkIHZpZGVvIHRhZyBkYXRhc2l6ZTogJHtjaHVuay5kYXRhc2l6ZX1gKVxuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnRyYWNrcy52aWRlb1RyYWNrLnNhbXBsZXMucHVzaChjaHVuaylcbiAgICAgICAgLy8gdGhpcy5lbWl0KERFTVVYX0VWRU5UUy5ERU1VWF9DT01QTEVURSlcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5sb2dnZXIud2Fybih0aGlzLlRBRywgYHZpZGVvIGNvZGVpZCBpcyAke2NvZGVjSUR9YClcbiAgICAgIGNodW5rLmRhdGEgPSB0aGlzLmxvYWRlckJ1ZmZlci5zaGlmdChjaHVuay5kYXRhc2l6ZSAtIDEpXG4gICAgICBpZiAoIXRoaXMuX2RhdGFzaXplVmFsaWRhdG9yKGNodW5rLmRhdGFzaXplKSkge1xuICAgICAgICB0aGlzLmxvZ2dlci53YXJuKHRoaXMuVEFHLCBgaW52YWxpZCB2aWRlbyB0YWcgZGF0YXNpemU6ICR7Y2h1bmsuZGF0YXNpemV9YClcbiAgICAgIH1cbiAgICAgIHRoaXMudHJhY2tzLnZpZGVvVHJhY2suc2FtcGxlcy5wdXNoKGNodW5rKVxuICAgICAgdGhpcy5lbWl0KERFTVVYX0VWRU5UUy5ERU1VWF9DT01QTEVURSlcbiAgICB9XG4gICAgZGVsZXRlIGNodW5rLnRhZ1R5cGVcbiAgfVxuXG4gIC8qKlxuICAgKiBwYXJzZSBhdmMgbWV0YWRhdGFcbiAgICogQHBhcmFtIGRhdGFcbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9hdmNTZXF1ZW5jZUhlYWRlclBhcnNlciAoZGF0YSkge1xuICAgIGxldCB0cmFjayA9IHRoaXMudHJhY2tzLnZpZGVvVHJhY2tcblxuICAgIGlmICghdHJhY2spIHtcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGxldCBvZmZzZXQgPSAwXG5cbiAgICBpZiAoIXRyYWNrLm1ldGEpIHtcbiAgICAgIHRyYWNrLm1ldGEgPSBuZXcgVmlkZW9UcmFja01ldGEoKVxuICAgIH1cbiAgICBsZXQgbWV0YSA9IHRyYWNrLm1ldGFcblxuICAgIG1ldGEuY29uZmlndXJhdGlvblZlcnNpb24gPSBkYXRhWzBdXG4gICAgbWV0YS5hdmNQcm9maWxlSW5kaWNhdGlvbiA9IGRhdGFbMV1cbiAgICBtZXRhLnByb2ZpbGVDb21wYXRpYmlsaXR5ID0gZGF0YVsyXVxuICAgIG1ldGEuYXZjTGV2ZWxJbmRpY2F0aW9uID0gZGF0YVszXSAvIDEwXG4gICAgbWV0YS5uYWxVbml0TGVuZ3RoID0gKGRhdGFbNF0gJiAweDAzKSArIDFcblxuICAgIGxldCBudW1PZlNwcyA9IGRhdGFbNV0gJiAweDFmXG4gICAgb2Zmc2V0ID0gNlxuICAgIGxldCBjb25maWcgPSB7fVxuXG4gICAgLy8gcGFyc2UgU1BTXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBudW1PZlNwczsgaSsrKSB7XG4gICAgICBsZXQgc2l6ZSA9IGRhdGFbb2Zmc2V0XSAqIDI1NSArIGRhdGFbb2Zmc2V0ICsgMV1cbiAgICAgIG9mZnNldCArPSAyXG5cbiAgICAgIGxldCBzcHMgPSBuZXcgVWludDhBcnJheShzaXplKVxuICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBzaXplOyBqKyspIHtcbiAgICAgICAgc3BzW2pdID0gZGF0YVtvZmZzZXQgKyBqXVxuICAgICAgfVxuXG4gICAgICAvLyBjb2RlYyBzdHJpbmdcbiAgICAgIGxldCBjb2RlY1N0cmluZyA9ICdhdmMxLidcbiAgICAgIGZvciAobGV0IGogPSAxOyBqIDwgNDsgaisrKSB7XG4gICAgICAgIGxldCBoID0gc3BzW2pdLnRvU3RyaW5nKDE2KVxuICAgICAgICBpZiAoaC5sZW5ndGggPCAyKSB7XG4gICAgICAgICAgaCA9ICcwJyArIGhcbiAgICAgICAgfVxuICAgICAgICBjb2RlY1N0cmluZyArPSBoXG4gICAgICB9XG5cbiAgICAgIG1ldGEuY29kZWMgPSBjb2RlY1N0cmluZ1xuXG4gICAgICBvZmZzZXQgKz0gc2l6ZVxuICAgICAgdGhpcy50cmFja3MudmlkZW9UcmFjay5tZXRhLnNwcyA9IHNwc1xuICAgICAgY29uZmlnID0gU3BzUGFyc2VyLnBhcnNlU1BTKHNwcylcbiAgICB9XG5cbiAgICBsZXQgbnVtT2ZQcHMgPSBkYXRhW29mZnNldF1cblxuICAgIG9mZnNldCsrXG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bU9mUHBzOyBpKyspIHtcbiAgICAgIGxldCBzaXplID0gZGF0YVtvZmZzZXRdICogMjU1ICsgZGF0YVtvZmZzZXQgKyAxXVxuICAgICAgb2Zmc2V0ICs9IDJcbiAgICAgIGxldCBwcHMgPSBuZXcgVWludDhBcnJheShzaXplKVxuICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBzaXplOyBqKyspIHtcbiAgICAgICAgcHBzW2pdID0gZGF0YVtvZmZzZXQgKyBqXVxuICAgICAgfVxuICAgICAgb2Zmc2V0ICs9IHNpemVcbiAgICAgIHRoaXMudHJhY2tzLnZpZGVvVHJhY2subWV0YS5wcHMgPSBwcHNcbiAgICB9XG5cbiAgICBPYmplY3QuYXNzaWduKG1ldGEsIFNwc1BhcnNlci50b1ZpZGVvTWV0YShjb25maWcpKVxuXG4gICAgLy8gZmlsbCB2aWRlbyBtZWRpYSBpbmZvXG4gICAgY29uc3QgdmlkZW9NZWRpYSA9IHRoaXMuX2NvbnRleHQubWVkaWFJbmZvLnZpZGVvXG5cbiAgICB2aWRlb01lZGlhLmNvZGVjID0gbWV0YS5jb2RlY1xuICAgIHZpZGVvTWVkaWEucHJvZmlsZSA9IG1ldGEucHJvZmlsZVxuICAgIHZpZGVvTWVkaWEubGV2ZWwgPSBtZXRhLmxldmVsXG4gICAgdmlkZW9NZWRpYS5jaHJvbWFGb3JtYXQgPSBtZXRhLmNocm9tYUZvcm1hdFxuICAgIHZpZGVvTWVkaWEuZnJhbWVSYXRlID0gbWV0YS5mcmFtZVJhdGVcbiAgICB2aWRlb01lZGlhLnBhclJhdGlvID0gbWV0YS5wYXJSYXRpb1xuICAgIHZpZGVvTWVkaWEud2lkdGggPSB2aWRlb01lZGlhLndpZHRoID09PSBtZXRhLnByZXNlbnRXaWR0aCA/IHZpZGVvTWVkaWEud2lkdGggOiBtZXRhLnByZXNlbnRXaWR0aFxuICAgIHZpZGVvTWVkaWEuaGVpZ2h0ID0gdmlkZW9NZWRpYS5oZWlnaHQgPT09IG1ldGEucHJlc2VudEhlaWdodCA/IHZpZGVvTWVkaWEud2lkdGggOiBtZXRhLnByZXNlbnRIZWlnaHRcblxuICAgIG1ldGEuZHVyYXRpb24gPSB0aGlzLl9jb250ZXh0Lm1lZGlhSW5mby5kdXJhdGlvbiAqIG1ldGEudGltZXNjYWxlXG4gICAgbWV0YS5hdmNjID0gbmV3IFVpbnQ4QXJyYXkoZGF0YS5sZW5ndGgpXG4gICAgbWV0YS5hdmNjLnNldChkYXRhKVxuICAgIHRyYWNrLm1ldGEgPSBtZXRhXG4gIH1cblxuICAvKipcbiAgICogY2hvb3NlIGF1ZGlvIHNhbXBsZSByYXRlXG4gICAqIEBwYXJhbSBzYW1wbGluZ0ZyZXF1ZW5jeUluZGV4XG4gICAqIEByZXR1cm5zIHtudW1iZXJ9XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBfc3dpdGNoQXVkaW9TYW1wbGVSYXRlIChzYW1wbGluZ0ZyZXF1ZW5jeUluZGV4KSB7XG4gICAgbGV0IHNhbXBsaW5nRnJlcXVlbmN5TGlzdCA9IFs5NjAwMCwgODgyMDAsIDY0MDAwLCA0ODAwMCwgNDQxMDAsIDMyMDAwLCAyNDAwMCwgMjIwNTAsIDE2MDAwLCAxMjAwMCwgMTEwMjUsIDgwMDAsIDczNTBdXG4gICAgcmV0dXJuIHNhbXBsaW5nRnJlcXVlbmN5TGlzdFtzYW1wbGluZ0ZyZXF1ZW5jeUluZGV4XVxuICB9XG5cbiAgLyoqXG4gICAqIGNob29zZSBhdWRpbyBzYW1wbGluZyBmcmVxdWVuY2VcbiAgICogQHBhcmFtIGluZm9cbiAgICogQHJldHVybnMge251bWJlcn1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9zd2l0Y2hBdWRpb1NhbXBsaW5nRnJlcXVlbmN5IChpbmZvKSB7XG4gICAgbGV0IHNhbXBsaW5nRnJlcXVlbmN5SW5kZXggPSAoaW5mbyAmIDEyKSA+Pj4gMlxuICAgIGxldCBzYW1wbGluZ0ZyZXF1ZW5jeUxpc3QgPSBbNTUwMCwgMTEwMjUsIDIyMDUwLCA0NDEwMCwgNDgwMDBdXG4gICAgcmV0dXJuIHNhbXBsaW5nRnJlcXVlbmN5TGlzdFtzYW1wbGluZ0ZyZXF1ZW5jeUluZGV4XVxuICB9XG5cbiAgLyoqXG4gICAqIGNob29zZSBhdWRpbyBjaGFubmVsIGNvdW50XG4gICAqIEBwYXJhbSBpbmZvXG4gICAqIEByZXR1cm5zIHtudW1iZXJ9XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBfc3dpdGNoQXVkaW9DaGFubmVsIChpbmZvKSB7XG4gICAgbGV0IHNhbXBsZVRyYWNrTnVtSW5kZXggPSBpbmZvICYgMVxuICAgIGxldCBzYW1wbGVUcmFja051bUxpc3QgPSBbMSwgMl1cbiAgICByZXR1cm4gc2FtcGxlVHJhY2tOdW1MaXN0W3NhbXBsZVRyYWNrTnVtSW5kZXhdXG4gIH1cblxuICAvKipcbiAgICogY2hlY2sgZGF0YXNpemUgaXMgdmFsaWQgdXNlIDQgQnl0ZSBhZnRlciBjdXJyZW50IHRhZ1xuICAgKiBAcGFyYW0gZGF0YXNpemVcbiAgICogQHJldHVybnMge2Jvb2xlYW59XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBfZGF0YXNpemVWYWxpZGF0b3IgKGRhdGFzaXplKSB7XG4gICAgbGV0IGRhdGFzaXplQ29uZmlybSA9IHRoaXMubG9hZGVyQnVmZmVyLnRvSW50KDAsIDQpXG4gICAgdGhpcy5sb2FkZXJCdWZmZXIuc2hpZnQoNClcbiAgICByZXR1cm4gZGF0YXNpemVDb25maXJtID09PSBkYXRhc2l6ZSArIDExXG4gIH1cblxuICBnZXQgbG9hZGVyQnVmZmVyICgpIHtcbiAgICBpZiAodGhpcy5fY29udGV4dC5nZXRJbnN0YW5jZSgnTE9BREVSX0JVRkZFUicpKSB7XG4gICAgICByZXR1cm4gdGhpcy5fY29udGV4dC5nZXRJbnN0YW5jZSgnTE9BREVSX0JVRkZFUicpXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZW1pdChERU1VWF9FVkVOVFMuREVNVVhfRVJST1IsIG5ldyBFcnJvcign5om+5LiN5YiwIGxvYWRlckJ1ZmZlciDlrp7kvosnKSlcbiAgICB9XG4gIH1cblxuICBnZXQgdHJhY2tzICgpIHtcbiAgICByZXR1cm4gdGhpcy5fY29udGV4dC5nZXRJbnN0YW5jZSgnVFJBQ0tTJylcbiAgfVxuXG4gIGdldCBsb2dnZXIgKCkge1xuICAgIHJldHVybiB0aGlzLl9jb250ZXh0LmdldEluc3RhbmNlKCdMT0dHRVInKVxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEZsdkRlbXV4ZXJcbiIsIm1vZHVsZS5leHBvcnRzID0ge1xuICBGZXRjaExvYWRlcjogcmVxdWlyZSgnLi9zcmMvZmV0Y2gtbG9hZGVyJykuZGVmYXVsdFxufTtcbiIsImltcG9ydCB7IEVWRU5UUyB9IGZyb20gJ3hncGxheWVyLXV0aWxzJztcblxuY29uc3QgTE9BREVSX0VWRU5UUyA9IEVWRU5UUy5MT0FERVJfRVZFTlRTO1xuY29uc3QgUkVBRF9TVFJFQU0gPSAwO1xuY29uc3QgUkVBRF9URVhUID0gMTtcbmNvbnN0IFJFQURfSlNPTiA9IDI7XG5jb25zdCBSRUFEX0JVRkZFUiA9IDM7XG5jbGFzcyBGZXRjaExvYWRlciB7XG4gIGNvbnN0cnVjdG9yIChjb25maWdzKSB7XG4gICAgdGhpcy5jb25maWdzID0gT2JqZWN0LmFzc2lnbih7fSwgY29uZmlncyk7XG4gICAgdGhpcy51cmwgPSBudWxsXG4gICAgdGhpcy5zdGF0dXMgPSAwXG4gICAgdGhpcy5lcnJvciA9IG51bGxcbiAgICB0aGlzLl9yZWFkZXIgPSBudWxsO1xuICAgIHRoaXMuX2NhbmNlbGVkID0gZmFsc2U7XG4gICAgdGhpcy5yZWFkdHlwZSA9IHRoaXMuY29uZmlncy5yZWFkdHlwZTtcbiAgICB0aGlzLmJ1ZmZlciA9IHRoaXMuY29uZmlncy5idWZmZXIgfHwgJ0xPQURFUl9CVUZGRVInO1xuICAgIHRoaXMuX2xvYWRlclRhc2tObyA9IDA7XG4gIH1cblxuICBpbml0ICgpIHtcbiAgICB0aGlzLm9uKExPQURFUl9FVkVOVFMuTEFERVJfU1RBUlQsIHRoaXMubG9hZC5iaW5kKHRoaXMpKVxuICB9XG5cbiAgc3RhdGljIGdldCB0eXBlICgpIHtcbiAgICByZXR1cm4gJ2xvYWRlcidcbiAgfVxuXG4gIGxvYWQgKHVybCwgb3B0cykge1xuICAgIGxldCBfdGhpcyA9IHRoaXM7XG4gICAgdGhpcy51cmwgPSB1cmw7XG4gICAgdGhpcy5fY2FuY2VsZWQgPSBmYWxzZTtcblxuICAgIC8vIFRPRE86IEFkZCBSYW5nZXNcbiAgICBsZXQgcGFyYW1zID0gdGhpcy5nZXRQYXJhbXMob3B0cylcbiAgICBfdGhpcy5sb2FkaW5nID0gdHJ1ZVxuICAgIHJldHVybiBmZXRjaCh0aGlzLnVybCwgcGFyYW1zKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgaWYgKHJlc3BvbnNlLm9rKSB7XG4gICAgICAgIF90aGlzLnN0YXR1cyA9IHJlc3BvbnNlLnN0YXR1c1xuICAgICAgICByZXR1cm4gX3RoaXMuX29uRmV0Y2hSZXNwb25zZShyZXNwb25zZSk7XG4gICAgICB9XG4gICAgICBfdGhpcy5lbWl0KExPQURFUl9FVkVOVFMuTE9BREVSX0VSUk9SLCBfdGhpcywgcmVzcG9uc2UpO1xuICAgICAgX3RoaXMubG9hZGluZyA9IGZhbHNlO1xuICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgIHtcbiAgICAgIF90aGlzLmVtaXQoTE9BREVSX0VWRU5UUy5MT0FERVJfRVJST1IsIF90aGlzLCBlcnJvcik7XG4gICAgICBfdGhpcy5sb2FkaW5nID0gZmFsc2U7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3IubWVzc2FnZSlcbiAgICB9KVxuICB9XG5cbiAgX29uRmV0Y2hSZXNwb25zZSAocmVzcG9uc2UpIHtcbiAgICBsZXQgX3RoaXMgPSB0aGlzO1xuICAgIGxldCBidWZmZXIgPSB0aGlzLl9jb250ZXh0LmdldEluc3RhbmNlKHRoaXMuYnVmZmVyKTtcbiAgICB0aGlzLl9sb2FkZXJUYXNrTm8rKztcbiAgICBsZXQgdGFza25vID0gdGhpcy5fbG9hZGVyVGFza05vO1xuICAgIGlmIChyZXNwb25zZS5vayA9PT0gdHJ1ZSkge1xuICAgICAgc3dpdGNoICh0aGlzLnJlYWR0eXBlKSB7XG4gICAgICAgIGNhc2UgUkVBRF9KU09OOlxuICAgICAgICAgIHJlc3BvbnNlLmpzb24oKS50aGVuKChkYXRhKSA9PiB7XG4gICAgICAgICAgICBfdGhpcy5sb2FkaW5nID0gZmFsc2VcbiAgICAgICAgICAgIGlmICghX3RoaXMuX2NhbmNlbGVkKSB7XG4gICAgICAgICAgICAgIGlmIChidWZmZXIpIHtcbiAgICAgICAgICAgICAgICBidWZmZXIucHVzaChkYXRhKTtcbiAgICAgICAgICAgICAgICBfdGhpcy5lbWl0KExPQURFUl9FVkVOVFMuTE9BREVSX0NPTVBMRVRFLCBidWZmZXIpO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIF90aGlzLmVtaXQoTE9BREVSX0VWRU5UUy5MT0FERVJfQ09NUExFVEUsIGRhdGEpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgUkVBRF9URVhUOlxuICAgICAgICAgIHJlc3BvbnNlLnRleHQoKS50aGVuKChkYXRhKSA9PiB7XG4gICAgICAgICAgICBfdGhpcy5sb2FkaW5nID0gZmFsc2VcbiAgICAgICAgICAgIGlmICghX3RoaXMuX2NhbmNlbGVkKSB7XG4gICAgICAgICAgICAgIGlmIChidWZmZXIpIHtcbiAgICAgICAgICAgICAgICBidWZmZXIucHVzaChkYXRhKTtcbiAgICAgICAgICAgICAgICBfdGhpcy5lbWl0KExPQURFUl9FVkVOVFMuTE9BREVSX0NPTVBMRVRFLCBidWZmZXIpO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIF90aGlzLmVtaXQoTE9BREVSX0VWRU5UUy5MT0FERVJfQ09NUExFVEUsIGRhdGEpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgUkVBRF9CVUZGRVI6XG4gICAgICAgICAgcmVzcG9uc2UuYXJyYXlCdWZmZXIoKS50aGVuKChkYXRhKSA9PiB7XG4gICAgICAgICAgICBfdGhpcy5sb2FkaW5nID0gZmFsc2VcbiAgICAgICAgICAgIGlmICghX3RoaXMuX2NhbmNlbGVkKSB7XG4gICAgICAgICAgICAgIGlmIChidWZmZXIpIHtcbiAgICAgICAgICAgICAgICBidWZmZXIucHVzaChuZXcgVWludDhBcnJheShkYXRhKSk7XG4gICAgICAgICAgICAgICAgX3RoaXMuZW1pdChMT0FERVJfRVZFTlRTLkxPQURFUl9DT01QTEVURSwgYnVmZmVyKTtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5lbWl0KExPQURFUl9FVkVOVFMuTE9BREVSX0NPTVBMRVRFLCBkYXRhKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFJFQURfU1RSRUFNOlxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIHJldHVybiB0aGlzLl9vblJlYWRlcihyZXNwb25zZS5ib2R5LmdldFJlYWRlcigpLCB0YXNrbm8pO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIF9vblJlYWRlciAocmVhZGVyLCB0YXNrbm8pIHtcbiAgICBsZXQgYnVmZmVyID0gdGhpcy5fY29udGV4dC5nZXRJbnN0YW5jZSh0aGlzLmJ1ZmZlcik7XG5cbiAgICBpZiAoIWJ1ZmZlcikge1xuICAgICAgdGhpcy5fcmVhZGVyLmNhbmNlbCgpO1xuICAgIH1cblxuICAgIHRoaXMuX3JlYWRlciA9IHJlYWRlclxuICAgIGlmICh0aGlzLmxvYWRpbmcgPT09IGZhbHNlKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBsZXQgX3RoaXMgPSB0aGlzXG4gICAgLy8gcmVhZGVyIHJlYWQgZnVuY3Rpb24gcmV0dXJucyBhIFByb21pc2UuIGdldCBkYXRhIHdoZW4gY2FsbGJhY2sgYW5kIGhhcyB2YWx1ZS5kb25lIHdoZW4gZGlzY29ubmVjdGVkLlxuICAgIC8vIHJlYWTmlrnms5Xov5Tlm57kuIDkuKpQcm9taXNlLiDlm57osIPkuK3lj6/ku6Xojrflj5bliLDmlbDmja7jgILlvZN2YWx1ZS5kb25l5a2Y5Zyo5pe277yM6K+05piO6ZO+5o6l5pat5byA44CCXG4gICAgdGhpcy5fcmVhZGVyICYmIHRoaXMuX3JlYWRlci5yZWFkKCkudGhlbihmdW5jdGlvbiAodmFsKSB7XG4gICAgICBpZiAodmFsLmRvbmUpIHtcbiAgICAgICAgLy8gVE9ETzog5a6M5oiQ5aSE55CGXG4gICAgICAgIF90aGlzLmxvYWRpbmcgPSBmYWxzZVxuICAgICAgICBfdGhpcy5zdGF0dXMgPSAwO1xuICAgICAgICBfdGhpcy5lbWl0KExPQURFUl9FVkVOVFMuTE9BREVSX0NPTVBMRVRFLCBidWZmZXIpXG4gICAgICAgIHJldHVyblxuICAgICAgfVxuXG4gICAgICBpZiAoX3RoaXMuX2NhbmNlbGVkKSB7XG4gICAgICAgIF90aGlzLl9yZWFkZXIuY2FuY2VsKClcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgYnVmZmVyLnB1c2godmFsLnZhbHVlKVxuICAgICAgX3RoaXMuZW1pdChMT0FERVJfRVZFTlRTLkxPQURFUl9EQVRBTE9BREVELCBidWZmZXIpXG4gICAgICByZXR1cm4gX3RoaXMuX29uUmVhZGVyKHJlYWRlciwgdGFza25vKVxuICAgIH0pLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XG4gICAgICBfdGhpcy5lbWl0KExPQURFUl9FVkVOVFMuTE9BREVSX0VSUk9SLCBfdGhpcywgZXJyb3IpO1xuICAgICAgX3RoaXMubG9hZGluZyA9IGZhbHNlO1xuICAgIH0pXG4gIH1cblxuICBnZXRQYXJhbXMgKG9wdHMpIHtcbiAgICBsZXQgb3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oe30sIG9wdHMpXG4gICAgbGV0IGhlYWRlcnMgPSBuZXcgSGVhZGVycygpXG5cbiAgICBsZXQgcGFyYW1zID0ge1xuICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXG4gICAgICBtb2RlOiAnY29ycycsXG4gICAgICBjYWNoZTogJ2RlZmF1bHQnXG4gICAgfVxuXG4gICAgLy8gYWRkIGN1c3Rtb3IgaGVhZGVyc1xuICAgIC8vIOa3u+WKoOiHquWumuS5ieWktFxuICAgIGlmICh0eXBlb2YgdGhpcy5jb25maWdzLmhlYWRlcnMgPT09ICdvYmplY3QnKSB7XG4gICAgICBsZXQgY29uZmlnSGVhZGVycyA9IHRoaXMuY29uZmlncy5oZWFkZXJzXG4gICAgICBmb3IgKGxldCBrZXkgaW4gY29uZmlnSGVhZGVycykge1xuICAgICAgICBpZiAoY29uZmlnSGVhZGVycy5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICAgICAgaGVhZGVycy5hcHBlbmQoa2V5LCBjb25maWdIZWFkZXJzW2tleV0pXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIG9wdGlvbnMuaGVhZGVycyA9PT0gJ29iamVjdCcpIHtcbiAgICAgIGxldCBvcHRIZWFkZXJzID0gb3B0aW9ucy5oZWFkZXJzXG4gICAgICBmb3IgKGxldCBrZXkgaW4gb3B0SGVhZGVycykge1xuICAgICAgICBpZiAob3B0SGVhZGVycy5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICAgICAgaGVhZGVycy5hcHBlbmQoa2V5LCBvcHRIZWFkZXJzW2tleV0pXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAob3B0aW9ucy5jb3JzID09PSBmYWxzZSkge1xuICAgICAgcGFyYW1zLm1vZGUgPSAnc2FtZS1vcmlnaW4nXG4gICAgfVxuXG4gICAgLy8gd2l0aENyZWRlbnRpYWxzIGlzIGRpc2FibGVkIGJ5IGRlZmF1bHRcbiAgICAvLyB3aXRoQ3JlZGVudGlhbHMg5Zyo6buY6K6k5oOF5Ya15LiL5LiN6KKr5L2/55So44CCXG4gICAgaWYgKG9wdGlvbnMud2l0aENyZWRlbnRpYWxzKSB7XG4gICAgICBwYXJhbXMuY3JlZGVudGlhbHMgPSAnaW5jbHVkZSdcbiAgICB9XG5cbiAgICAvLyBUT0RPOiBBZGQgcmFuZ2VzO1xuICAgIHJldHVybiBwYXJhbXM7XG4gIH1cblxuICBjYW5jZWwgKCkge1xuICAgIGlmICh0aGlzLl9yZWFkZXIpIHtcbiAgICAgIHRoaXMuX3JlYWRlci5jYW5jZWwoKVxuICAgICAgdGhpcy5fcmVhZGVyID0gbnVsbFxuICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2VcbiAgICAgIHRoaXMuX2NhbmNlbGVkID0gdHJ1ZTtcbiAgICB9XG4gIH1cblxuICBkZXN0cm95ICgpIHtcbiAgICB0aGlzLmNhbmNlbCgpO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEZldGNoTG9hZGVyXG4iLCJtb2R1bGUuZXhwb3J0cyA9IHtcbiAgTXA0UmVtdXhlcjogcmVxdWlyZSgnLi9zcmMvbXA0JykuZGVmYXVsdFxufTtcbiIsImltcG9ydCB7IEJ1ZmZlciB9IGZyb20gJ3hncGxheWVyLXV0aWxzJztcblxuLy8gY29uc3QgVUlOVDMyX01BWCA9IE1hdGgucG93KDIsIDMyKSAtIDE7XG5jbGFzcyBGbXA0IHtcbiAgc3RhdGljIHNpemUgKHZhbHVlKSB7XG4gICAgcmV0dXJuIEJ1ZmZlci53cml0ZVVpbnQzMih2YWx1ZSlcbiAgfVxuICBzdGF0aWMgaW5pdEJveCAoc2l6ZSwgbmFtZSwgLi4uY29udGVudCkge1xuICAgIGNvbnN0IGJ1ZmZlciA9IG5ldyBCdWZmZXIoKVxuICAgIGJ1ZmZlci53cml0ZShGbXA0LnNpemUoc2l6ZSksIEZtcDQudHlwZShuYW1lKSwgLi4uY29udGVudClcbiAgICByZXR1cm4gYnVmZmVyLmJ1ZmZlclxuICB9XG4gIHN0YXRpYyBleHRlbnNpb24gKHZlcnNpb24sIGZsYWcpIHtcbiAgICByZXR1cm4gbmV3IFVpbnQ4QXJyYXkoW1xuICAgICAgdmVyc2lvbixcbiAgICAgIChmbGFnID4+IDE2KSAmIDB4ZmYsXG4gICAgICAoZmxhZyA+PiA4KSAmIDB4ZmYsXG4gICAgICBmbGFnICYgMHhmZlxuICAgIF0pXG4gIH1cbiAgc3RhdGljIGZ0eXAgKCkge1xuICAgIHJldHVybiBGbXA0LmluaXRCb3goMjQsICdmdHlwJywgbmV3IFVpbnQ4QXJyYXkoW1xuICAgICAgMHg2OSwgMHg3MywgMHg2RiwgMHg2RCwgLy8gaXNvbSxcbiAgICAgIDB4MCwgMHgwLCAweDAwLCAweDAxLCAvLyBtaW5vcl92ZXJzaW9uOiAweDAxXG4gICAgICAweDY5LCAweDczLCAweDZGLCAweDZELCAvLyBpc29tXG4gICAgICAweDYxLCAweDc2LCAweDYzLCAweDMxIC8vIGF2YzFcbiAgICBdKSlcbiAgfVxuICBzdGF0aWMgbW9vdiAoeyB0eXBlLCBtZXRhIH0pIHtcbiAgICBsZXQgc2l6ZSA9IDhcbiAgICBsZXQgbXZoZCA9IEZtcDQubXZoZChtZXRhLmR1cmF0aW9uLCBtZXRhLnRpbWVzY2FsZSlcbiAgICBsZXQgdHJha1xuXG4gICAgaWYgKHR5cGUgPT09ICd2aWRlbycpIHtcbiAgICAgIHRyYWsgPSBGbXA0LnZpZGVvVHJhayhtZXRhKVxuICAgIH0gZWxzZSB7XG4gICAgICB0cmFrID0gRm1wNC5hdWRpb1RyYWsobWV0YSlcbiAgICB9XG5cbiAgICBsZXQgbXZleCA9IEZtcDQubXZleChtZXRhLmR1cmF0aW9uLCBtZXRhLnRpbWVzY2FsZSB8fCAxMDAwLCBtZXRhLmlkKTtcbiAgICBbbXZoZCwgdHJhaywgbXZleF0uZm9yRWFjaChpdGVtID0+IHtcbiAgICAgIHNpemUgKz0gaXRlbS5ieXRlTGVuZ3RoXG4gICAgfSlcbiAgICByZXR1cm4gRm1wNC5pbml0Qm94KHNpemUsICdtb292JywgbXZoZCwgdHJhaywgbXZleClcbiAgfVxuICBzdGF0aWMgbXZoZCAoZHVyYXRpb24sIHRpbWVzY2FsZSA9IDEwMDApIHtcbiAgICAvLyBkdXJhdGlvbiAqPSB0aW1lc2NhbGU7XG4gICAgbGV0IGJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkoW1xuICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgLy8gdmVyc2lvbigwKSArIGZsYWdzICAgICAx5L2N55qEYm9454mI5pysKzPkvY1mbGFncyAgIGJveOeJiOacrO+8jDDmiJYx77yM5LiA6Iis5Li6MOOAgu+8iOS7peS4i+Wtl+iKguaVsOWdh+aMiXZlcnNpb249MO+8iVxuICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgLy8gY3JlYXRpb25fdGltZSAgICDliJvlu7rml7bpl7QgIO+8iOebuOWvueS6jlVUQ+aXtumXtDE5MDQtMDEtMDHpm7bngrnnmoTnp5LmlbDvvIlcbiAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIC8vIG1vZGlmaWNhdGlvbl90aW1lICAg5L+u5pS55pe26Ze0XG5cbiAgICAgIC8qKlxuICAgICAgICAgICAgICogdGltZXNjYWxlOiA0IGJ5dGVz5paH5Lu25aqS5L2T5ZyoMeenkuaXtumXtOWGheeahOWIu+W6puWAvO+8jOWPr+S7peeQhuino+S4ujHnp5Lplb/luqZcbiAgICAgICAgICAgICAqL1xuICAgICAgKHRpbWVzY2FsZSA+Pj4gMjQpICYgMHhGRixcbiAgICAgICh0aW1lc2NhbGUgPj4+IDE2KSAmIDB4RkYsXG4gICAgICAodGltZXNjYWxlID4+PiA4KSAmIDB4RkYsXG4gICAgICAodGltZXNjYWxlKSAmIDB4RkYsXG5cbiAgICAgIC8qKlxuICAgICAgICAgICAgICogZHVyYXRpb246IDQgYnl0ZXPor6V0cmFja+eahOaXtumXtOmVv+W6pu+8jOeUqGR1cmF0aW9u5ZKMdGltZSBzY2FsZeWAvOWPr+S7peiuoeeul3RyYWNr5pe26ZW/77yM5q+U5aaCYXVkaW8gdHJhY2vnmoR0aW1lIHNjYWxlID0gODAwMCxcbiAgICAgICAgICAgICAqIGR1cmF0aW9uID0gNTYwMTI477yM5pe26ZW/5Li6NzAuMDE277yMdmlkZW8gdHJhY2vnmoR0aW1lIHNjYWxlID0gNjAwLCBkdXJhdGlvbiA9IDQyMDAw77yM5pe26ZW/5Li6NzBcbiAgICAgICAgICAgICAqL1xuICAgICAgKGR1cmF0aW9uID4+PiAyNCkgJiAweEZGLFxuICAgICAgKGR1cmF0aW9uID4+PiAxNikgJiAweEZGLFxuICAgICAgKGR1cmF0aW9uID4+PiA4KSAmIDB4RkYsXG4gICAgICAoZHVyYXRpb24pICYgMHhGRixcbiAgICAgIDB4MDAsIDB4MDEsIDB4MDAsIDB4MDAsIC8vIFByZWZlcnJlZCByYXRlOiAxLjAgICDmjqjojZDmkq3mlL7pgJ/njofvvIzpq5gxNuS9jeWSjOS9jjE25L2N5YiG5Yir5Li65bCP5pWw54K55pW05pWw6YOo5YiG5ZKM5bCP5pWw6YOo5YiG77yM5Y2zWzE2LjE2XSDmoLzlvI/vvIzor6XlgLzkuLoxLjDvvIgweDAwMDEwMDAw77yJ6KGo56S65q2j5bi45YmN5ZCR5pKt5pS+XG4gICAgICAvKipcbiAgICAgICAgICAgICAqIFByZWZlcnJlZFZvbHVtZSgxLjAsIDJieXRlcykgKyByZXNlcnZlZCgyYnl0ZXMpXG4gICAgICAgICAgICAgKiDkuI5yYXRl57G75Ly877yMWzguOF0g5qC85byP77yMMS4w77yIMHgwMTAw77yJ6KGo56S65pyA5aSn6Z+z6YePXG4gICAgICAgICAgICAgKi9cbiAgICAgIDB4MDEsIDB4MDAsIDB4MDAsIDB4MDAsXG4gICAgICAweDAwLCAweDAwLCAweDAwLCAweDAwLCAvLyAgcmVzZXJ2ZWQ6IDQgKyA0IGJ5dGVz5L+d55WZ5L2NXG4gICAgICAweDAwLCAweDAwLCAweDAwLCAweDAwLFxuICAgICAgMHgwMCwgMHgwMSwgMHgwMCwgMHgwMCwgLy8gLS0tLWJlZ2luIGNvbXBvc2l0aW9uIG1hdHJpeC0tLS1cbiAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsXG4gICAgICAweDAwLCAweDAwLCAweDAwLCAweDAwLCAvLyDop4bpopHlj5jmjaLnn6npmLUgICDnur/mgKfku6PmlbBcbiAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsXG4gICAgICAweDAwLCAweDAxLCAweDAwLCAweDAwLFxuICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCxcbiAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsXG4gICAgICAweDAwLCAweDAwLCAweDAwLCAweDAwLFxuICAgICAgMHg0MCwgMHgwMCwgMHgwMCwgMHgwMCwgLy8gLS0tLWVuZCBjb21wb3NpdGlvbiBtYXRyaXgtLS0tXG4gICAgICAweDAwLCAweDAwLCAweDAwLCAweDAwLCAvLyAtLS0tYmVnaW4gcHJlX2RlZmluZWQgNiAqIDQgYnl0ZXMtLS0tXG4gICAgICAweDAwLCAweDAwLCAweDAwLCAweDAwLFxuICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgLy8gcHJlLWRlZmluZWQg5L+d55WZ5L2NXG4gICAgICAweDAwLCAweDAwLCAweDAwLCAweDAwLFxuICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCxcbiAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIC8vIC0tLS1lbmQgcHJlX2RlZmluZWQgNiAqIDQgYnl0ZXMtLS0tXG4gICAgICAweEZGLCAweEZGLCAweEZGLCAweEZGIC8vIG5leHRfdHJhY2tfSUQg5LiL5LiA5LiqdHJhY2vkvb/nlKjnmoRpZOWPt1xuICAgIF0pXG4gICAgcmV0dXJuIEZtcDQuaW5pdEJveCg4ICsgYnl0ZXMubGVuZ3RoLCAnbXZoZCcsIG5ldyBVaW50OEFycmF5KGJ5dGVzKSlcbiAgfVxuICBzdGF0aWMgdmlkZW9UcmFrIChkYXRhKSB7XG4gICAgbGV0IHNpemUgPSA4XG5cbiAgICBsZXQgdGtoZCA9IEZtcDQudGtoZCh7XG4gICAgICBpZDogMSxcbiAgICAgIGR1cmF0aW9uOiBkYXRhLmR1cmF0aW9uLFxuICAgICAgdGltZXNjYWxlOiBkYXRhLnRpbWVzY2FsZSB8fCAxMDAwLFxuICAgICAgd2lkdGg6IGRhdGEucHJlc2VudFdpZHRoLFxuICAgICAgaGVpZ2h0OiBkYXRhLnByZXNlbnRIZWlnaHQsXG4gICAgICB0eXBlOiAndmlkZW8nXG4gICAgfSlcbiAgICBsZXQgbWRpYSA9IEZtcDQubWRpYSh7XG4gICAgICB0eXBlOiAndmlkZW8nLFxuICAgICAgdGltZXNjYWxlOiBkYXRhLnRpbWVzY2FsZSB8fCAxMDAwLFxuICAgICAgZHVyYXRpb246IGRhdGEuZHVyYXRpb24sXG4gICAgICBhdmNjOiBkYXRhLmF2Y2MsXG4gICAgICBwYXJSYXRpbzogZGF0YS5wYXJSYXRpbyxcbiAgICAgIHdpZHRoOiBkYXRhLnByZXNlbnRXaWR0aCxcbiAgICAgIGhlaWdodDogZGF0YS5wcmVzZW50SGVpZ2h0XG4gICAgfSk7XG4gICAgW3RraGQsIG1kaWFdLmZvckVhY2goaXRlbSA9PiB7XG4gICAgICBzaXplICs9IGl0ZW0uYnl0ZUxlbmd0aFxuICAgIH0pXG4gICAgcmV0dXJuIEZtcDQuaW5pdEJveChzaXplLCAndHJhaycsIHRraGQsIG1kaWEpXG4gIH1cbiAgc3RhdGljIGF1ZGlvVHJhayAoZGF0YSkge1xuICAgIGxldCBzaXplID0gOFxuICAgIGxldCB0a2hkID0gRm1wNC50a2hkKHtcbiAgICAgIGlkOiAyLFxuICAgICAgZHVyYXRpb246IGRhdGEuZHVyYXRpb24sXG4gICAgICB0aW1lc2NhbGU6IGRhdGEudGltZXNjYWxlIHx8IDEwMDAsXG4gICAgICB3aWR0aDogMCxcbiAgICAgIGhlaWdodDogMCxcbiAgICAgIHR5cGU6ICdhdWRpbydcbiAgICB9KVxuICAgIGxldCBtZGlhID0gRm1wNC5tZGlhKHtcbiAgICAgIHR5cGU6ICdhdWRpbycsXG4gICAgICB0aW1lc2NhbGU6IGRhdGEudGltZXNjYWxlIHx8IDEwMDAsXG4gICAgICBkdXJhdGlvbjogZGF0YS5kdXJhdGlvbixcbiAgICAgIGNoYW5uZWxDb3VudDogZGF0YS5jaGFubmVsQ291bnQsXG4gICAgICBzYW1wbGVyYXRlOiBkYXRhLnNhbXBsZVJhdGUsXG4gICAgICBjb25maWc6IGRhdGEuY29uZmlnXG4gICAgfSk7XG4gICAgW3RraGQsIG1kaWFdLmZvckVhY2goaXRlbSA9PiB7XG4gICAgICBzaXplICs9IGl0ZW0uYnl0ZUxlbmd0aFxuICAgIH0pXG4gICAgcmV0dXJuIEZtcDQuaW5pdEJveChzaXplLCAndHJhaycsIHRraGQsIG1kaWEpXG4gIH1cbiAgc3RhdGljIHRraGQgKGRhdGEpIHtcbiAgICBsZXQgaWQgPSBkYXRhLmlkXG4gICAgbGV0IGR1cmF0aW9uID0gZGF0YS5kdXJhdGlvblxuICAgIGxldCB3aWR0aCA9IGRhdGEud2lkdGhcbiAgICBsZXQgaGVpZ2h0ID0gZGF0YS5oZWlnaHRcbiAgICBsZXQgY29udGVudCA9IG5ldyBVaW50OEFycmF5KFtcbiAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDcsIC8vIHZlcnNpb24oMCkgKyBmbGFncyAx5L2N54mI5pysIGJveOeJiOacrO+8jDDmiJYx77yM5LiA6Iis5Li6MOOAgu+8iOS7peS4i+Wtl+iKguaVsOWdh+aMiXZlcnNpb249MO+8ieaMieS9jeaIluaTjeS9nOe7k+aenOWAvO+8jOmihOWumuS5ieWmguS4i++8mlxuICAgICAgLy8gMHgwMDAwMDEgdHJhY2tfZW5hYmxlZO+8jOWQpuWImeivpXRyYWNr5LiN6KKr5pKt5pS+77ybXG4gICAgICAvLyAweDAwMDAwMiB0cmFja19pbl9tb3ZpZe+8jOihqOekuuivpXRyYWNr5Zyo5pKt5pS+5Lit6KKr5byV55So77ybXG4gICAgICAvLyAweDAwMDAwNCB0cmFja19pbl9wcmV2aWV377yM6KGo56S66K+ldHJhY2vlnKjpooTop4jml7booqvlvJXnlKjjgIJcbiAgICAgIC8vIOS4gOiIrOivpeWAvOS4ujfvvIwxKzIrNCDlpoLmnpzkuIDkuKrlqpLkvZPmiYDmnIl0cmFja+Wdh+acquiuvue9rnRyYWNrX2luX21vdmll5ZKMdHJhY2tfaW5fcHJldmlld++8jOWwhuiiq+eQhuino+S4uuaJgOaciXRyYWNr5Z2H6K6+572u5LqG6L+Z5Lik6aG577yb5a+55LqOaGludCB0cmFja++8jOivpeWAvOS4ujBcbiAgICAgIC8vIGhpbnQgdHJhY2sg6L+Z5Liq54m55q6K55qEdHJhY2vlubbkuI3ljIXlkKvlqpLkvZPmlbDmja7vvIzogIzmmK/ljIXlkKvkuobkuIDkupvlsIblhbbku5bmlbDmja50cmFja+aJk+WMheaIkOa1geWqkuS9k+eahOaMh+ekuuS/oeaBr+OAglxuICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgLy8gY3JlYXRpb25fdGltZeWIm+W7uuaXtumXtO+8iOebuOWvueS6jlVUQ+aXtumXtDE5MDQtMDEtMDHpm7bngrnnmoTnp5LmlbDvvIlcbiAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIC8vIG1vZGlmaWNhdGlvbiB0aW1lIOS/ruaUueaXtumXtFxuICAgICAgKGlkID4+PiAyNCkgJiAweEZGLCAvLyB0cmFja19JRDogNCBieXRlcyBpZOWPt++8jOS4jeiDvemHjeWkjeS4lOS4jeiDveS4ujBcbiAgICAgIChpZCA+Pj4gMTYpICYgMHhGRixcbiAgICAgIChpZCA+Pj4gOCkgJiAweEZGLFxuICAgICAgKGlkKSAmIDB4RkYsXG4gICAgICAweDAwLCAweDAwLCAweDAwLCAweDAwLCAvLyByZXNlcnZlZDogNCBieXRlcyAgICDkv53nlZnkvY1cbiAgICAgIChkdXJhdGlvbiA+Pj4gMjQpICYgMHhGRiwgLy8gZHVyYXRpb246IDQgYnl0ZXMgdHJhY2vnmoTml7bpl7Tplb/luqZcbiAgICAgIChkdXJhdGlvbiA+Pj4gMTYpICYgMHhGRixcbiAgICAgIChkdXJhdGlvbiA+Pj4gOCkgJiAweEZGLFxuICAgICAgKGR1cmF0aW9uKSAmIDB4RkYsXG4gICAgICAweDAwLCAweDAwLCAweDAwLCAweDAwLCAvLyByZXNlcnZlZDogMiAqIDQgYnl0ZXMgICAg5L+d55WZ5L2NXG4gICAgICAweDAwLCAweDAwLCAweDAwLCAweDAwLFxuICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgLy8gbGF5ZXIoMmJ5dGVzKSArIGFsdGVybmF0ZV9ncm91cCgyYnl0ZXMpICDop4bpopHlsYLvvIzpu5jorqTkuLow77yM5YC85bCP55qE5Zyo5LiK5bGCLnRyYWNr5YiG57uE5L+h5oGv77yM6buY6K6k5Li6MOihqOekuuivpXRyYWNr5pyq5LiO5YW25LuWdHJhY2vmnInnvqTnu4TlhbPns7tcbiAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIC8vIHZvbHVtZSgyYnl0ZXMpICsgcmVzZXJ2ZWQoMmJ5dGVzKSAgICBbOC44XSDmoLzlvI/vvIzlpoLmnpzkuLrpn7PpopF0cmFja++8jDEuMO+8iDB4MDEwMO+8ieihqOekuuacgOWkp+mfs+mHj++8m+WQpuWImeS4ujAgICAr5L+d55WZ5L2NXG4gICAgICAweDAwLCAweDAxLCAweDAwLCAweDAwLCAvLyAtLS0tYmVnaW4gY29tcG9zaXRpb24gbWF0cml4LS0tLVxuICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCxcbiAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsXG4gICAgICAweDAwLCAweDAwLCAweDAwLCAweDAwLFxuICAgICAgMHgwMCwgMHgwMSwgMHgwMCwgMHgwMCwgLy8g6KeG6aKR5Y+Y5o2i55+p6Zi1XG4gICAgICAweDAwLCAweDAwLCAweDAwLCAweDAwLFxuICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCxcbiAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsXG4gICAgICAweDQwLCAweDAwLCAweDAwLCAweDAwLCAvLyAtLS0tZW5kIGNvbXBvc2l0aW9uIG1hdHJpeC0tLS1cbiAgICAgICh3aWR0aCA+Pj4gOCkgJiAweEZGLCAvLyAvL+WuveW6plxuICAgICAgKHdpZHRoKSAmIDB4RkYsXG4gICAgICAweDAwLCAweDAwLFxuICAgICAgKGhlaWdodCA+Pj4gOCkgJiAweEZGLCAvLyDpq5jluqZcbiAgICAgIChoZWlnaHQpICYgMHhGRixcbiAgICAgIDB4MDAsIDB4MDBcbiAgICBdKVxuICAgIHJldHVybiBGbXA0LmluaXRCb3goOCArIGNvbnRlbnQuYnl0ZUxlbmd0aCwgJ3RraGQnLCBjb250ZW50KVxuICB9XG4gIHN0YXRpYyBlZHRzIChkYXRhKSB7XG4gICAgbGV0IGJ1ZmZlciA9IG5ldyBCdWZmZXIoKVxuICAgIGxldCBkdXJhdGlvbiA9IGRhdGEuZHVyYXRpb25cbiAgICBsZXQgbWVkaWFUaW1lID0gZGF0YS5tZWRpYVRpbWVcbiAgICBidWZmZXIud3JpdGUoRm1wNC5zaXplKDM2KSwgRm1wNC50eXBlKCdlZHRzJykpXG4gICAgLy8gZWxzdFxuICAgIGJ1ZmZlci53cml0ZShGbXA0LnNpemUoMjgpLCBGbXA0LnR5cGUoJ2Vsc3QnKSlcbiAgICBidWZmZXIud3JpdGUobmV3IFVpbnQ4QXJyYXkoW1xuICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMSwgLy8gZW50cnkgY291bnRcbiAgICAgIChkdXJhdGlvbiA+PiAyNCkgJiAweGZmLCAoZHVyYXRpb24gPj4gMTYpICYgMHhmZiwgKGR1cmF0aW9uID4+IDgpICYgMHhmZiwgZHVyYXRpb24gJiAweGZmLFxuICAgICAgKG1lZGlhVGltZSA+PiAyNCkgJiAweGZmLCAobWVkaWFUaW1lID4+IDE2KSAmIDB4ZmYsIChtZWRpYVRpbWUgPj4gOCkgJiAweGZmLCBtZWRpYVRpbWUgJiAweGZmLFxuICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMSAvLyBtZWRpYSByYXRlXG4gICAgXSkpXG4gICAgcmV0dXJuIGJ1ZmZlci5idWZmZXJcbiAgfVxuICBzdGF0aWMgbWRpYSAoZGF0YSkge1xuICAgIGxldCBzaXplID0gOFxuICAgIGxldCBtZGhkID0gRm1wNC5tZGhkKGRhdGEudGltZXNjYWxlLCBkYXRhLmR1cmF0aW9uKVxuICAgIGxldCBoZGxyID0gRm1wNC5oZGxyKGRhdGEudHlwZSlcbiAgICBsZXQgbWluZiA9IEZtcDQubWluZihkYXRhKTtcbiAgICBbbWRoZCwgaGRsciwgbWluZl0uZm9yRWFjaChpdGVtID0+IHtcbiAgICAgIHNpemUgKz0gaXRlbS5ieXRlTGVuZ3RoXG4gICAgfSlcbiAgICByZXR1cm4gRm1wNC5pbml0Qm94KHNpemUsICdtZGlhJywgbWRoZCwgaGRsciwgbWluZilcbiAgfVxuICBzdGF0aWMgbWRoZCAodGltZXNjYWxlID0gMTAwMCwgZHVyYXRpb24pIHtcbiAgICBsZXQgY29udGVudCA9IG5ldyBVaW50OEFycmF5KFtcbiAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIC8vIGNyZWF0aW9uX3RpbWUgICAg5Yib5bu65pe26Ze0XG4gICAgICAweDAwLCAweDAwLCAweDAwLCAweDAwLCAvLyBtb2RpZmljYXRpb25fdGltZeS/ruaUueaXtumXtFxuICAgICAgKHRpbWVzY2FsZSA+Pj4gMjQpICYgMHhGRiwgLy8gdGltZXNjYWxlOiA0IGJ5dGVzICAgIOaWh+S7tuWqkuS9k+WcqDHnp5Lml7bpl7TlhoXnmoTliLvluqblgLzvvIzlj6/ku6XnkIbop6PkuLox56eS6ZW/5bqmXG4gICAgICAodGltZXNjYWxlID4+PiAxNikgJiAweEZGLFxuICAgICAgKHRpbWVzY2FsZSA+Pj4gOCkgJiAweEZGLFxuICAgICAgKHRpbWVzY2FsZSkgJiAweEZGLFxuICAgICAgKGR1cmF0aW9uID4+PiAyNCkgJiAweEZGLCAvLyBkdXJhdGlvbjogNCBieXRlcyAgdHJhY2vnmoTml7bpl7Tplb/luqZcbiAgICAgIChkdXJhdGlvbiA+Pj4gMTYpICYgMHhGRixcbiAgICAgIChkdXJhdGlvbiA+Pj4gOCkgJiAweEZGLFxuICAgICAgKGR1cmF0aW9uKSAmIDB4RkYsXG4gICAgICAweDU1LCAweEM0LCAvLyBsYW5ndWFnZTogdW5kICh1bmRldGVybWluZWQpIOWqkuS9k+ivreiogOeggeOAguacgOmrmOS9jeS4ujDvvIzlkI7pnaIxNeS9jeS4ujPkuKrlrZfnrKbvvIjop4FJU08gNjM5LTIvVOagh+WHhuS4reWumuS5ie+8iVxuICAgICAgMHgwMCwgMHgwMCAvLyBwcmVfZGVmaW5lZCA9IDBcbiAgICBdKVxuICAgIHJldHVybiBGbXA0LmluaXRCb3goMTIgKyBjb250ZW50LmJ5dGVMZW5ndGgsICdtZGhkJywgRm1wNC5leHRlbnNpb24oMCwgMCksIGNvbnRlbnQpXG4gIH1cbiAgc3RhdGljIGhkbHIgKHR5cGUpIHtcbiAgICBsZXQgdmFsdWUgPSBbMHgwMCwgLy8gdmVyc2lvbiAwXG4gICAgICAweDAwLCAweDAwLCAweDAwLCAvLyBmbGFnc1xuICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgLy8gcHJlX2RlZmluZWRcbiAgICAgIDB4NzYsIDB4NjksIDB4NjQsIDB4NjUsIC8vIGhhbmRsZXJfdHlwZTogJ3ZpZGUnXG4gICAgICAweDAwLCAweDAwLCAweDAwLCAweDAwLCAvLyByZXNlcnZlZFxuICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgLy8gcmVzZXJ2ZWRcbiAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIC8vIHJlc2VydmVkXG4gICAgICAweDU2LCAweDY5LCAweDY0LCAweDY1LFxuICAgICAgMHg2ZiwgMHg0OCwgMHg2MSwgMHg2ZSxcbiAgICAgIDB4NjQsIDB4NmMsIDB4NjUsIDB4NzIsIDB4MDAgLy8gbmFtZTogJ1ZpZGVvSGFuZGxlcidcbiAgICBdXG4gICAgaWYgKHR5cGUgPT09ICdhdWRpbycpIHtcbiAgICAgIHZhbHVlLnNwbGljZSg4LCA0LCAuLi5bMHg3MywgMHg2ZiwgMHg3NSwgMHg2ZV0pXG4gICAgICB2YWx1ZS5zcGxpY2UoMjQsIDEzLCAuLi5bMHg1MywgMHg2ZiwgMHg3NSwgMHg2ZSxcbiAgICAgICAgMHg2NCwgMHg0OCwgMHg2MSwgMHg2ZSxcbiAgICAgICAgMHg2NCwgMHg2YywgMHg2NSwgMHg3MiwgMHgwMF0pXG4gICAgfVxuICAgIHJldHVybiBGbXA0LmluaXRCb3goOCArIHZhbHVlLmxlbmd0aCwgJ2hkbHInLCBuZXcgVWludDhBcnJheSh2YWx1ZSkpXG4gIH1cbiAgc3RhdGljIG1pbmYgKGRhdGEpIHtcbiAgICBsZXQgc2l6ZSA9IDhcbiAgICBsZXQgdm1oZCA9IGRhdGEudHlwZSA9PT0gJ3ZpZGVvJyA/IEZtcDQudm1oZCgpIDogRm1wNC5zbWhkKClcbiAgICBsZXQgZGluZiA9IEZtcDQuZGluZigpXG4gICAgbGV0IHN0YmwgPSBGbXA0LnN0YmwoZGF0YSk7XG4gICAgW3ZtaGQsIGRpbmYsIHN0YmxdLmZvckVhY2goaXRlbSA9PiB7XG4gICAgICBzaXplICs9IGl0ZW0uYnl0ZUxlbmd0aFxuICAgIH0pXG4gICAgcmV0dXJuIEZtcDQuaW5pdEJveChzaXplLCAnbWluZicsIHZtaGQsIGRpbmYsIHN0YmwpXG4gIH1cbiAgc3RhdGljIHZtaGQgKCkge1xuICAgIHJldHVybiBGbXA0LmluaXRCb3goMjAsICd2bWhkJywgbmV3IFVpbnQ4QXJyYXkoW1xuICAgICAgMHgwMCwgLy8gdmVyc2lvblxuICAgICAgMHgwMCwgMHgwMCwgMHgwMSwgLy8gZmxhZ3NcbiAgICAgIDB4MDAsIDB4MDAsIC8vIGdyYXBoaWNzbW9kZVxuICAgICAgMHgwMCwgMHgwMCxcbiAgICAgIDB4MDAsIDB4MDAsXG4gICAgICAweDAwLCAweDAwIC8vIG9wY29sb3JcbiAgICBdKSlcbiAgfVxuICBzdGF0aWMgc21oZCAoKSB7XG4gICAgcmV0dXJuIEZtcDQuaW5pdEJveCgxNiwgJ3NtaGQnLCBuZXcgVWludDhBcnJheShbXG4gICAgICAweDAwLCAvLyB2ZXJzaW9uXG4gICAgICAweDAwLCAweDAwLCAweDAwLCAvLyBmbGFnc1xuICAgICAgMHgwMCwgMHgwMCwgLy8gYmFsYW5jZVxuICAgICAgMHgwMCwgMHgwMCAvLyByZXNlcnZlZFxuICAgIF0pKVxuICB9XG4gIHN0YXRpYyBkaW5mICgpIHtcbiAgICBsZXQgYnVmZmVyID0gbmV3IEJ1ZmZlcigpXG4gICAgbGV0IGRyZWYgPSBbMHgwMCwgLy8gdmVyc2lvbiAwXG4gICAgICAweDAwLCAweDAwLCAweDAwLCAvLyBmbGFnc1xuICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMSwgLy8gZW50cnlfY291bnRcbiAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MGMsIC8vIGVudHJ5X3NpemVcbiAgICAgIDB4NzUsIDB4NzIsIDB4NmMsIDB4MjAsIC8vICd1cmwnIHR5cGVcbiAgICAgIDB4MDAsIC8vIHZlcnNpb24gMFxuICAgICAgMHgwMCwgMHgwMCwgMHgwMSAvLyBlbnRyeV9mbGFnc1xuICAgIF1cbiAgICBidWZmZXIud3JpdGUoRm1wNC5zaXplKDM2KSwgRm1wNC50eXBlKCdkaW5mJyksIEZtcDQuc2l6ZSgyOCksIEZtcDQudHlwZSgnZHJlZicpLCBuZXcgVWludDhBcnJheShkcmVmKSlcbiAgICByZXR1cm4gYnVmZmVyLmJ1ZmZlclxuICB9XG4gIHN0YXRpYyBzdGJsIChkYXRhKSB7XG4gICAgbGV0IHNpemUgPSA4XG4gICAgbGV0IHN0c2QgPSBGbXA0LnN0c2QoZGF0YSlcbiAgICBsZXQgc3R0cyA9IEZtcDQuc3R0cygpXG4gICAgbGV0IHN0c2MgPSBGbXA0LnN0c2MoKVxuICAgIGxldCBzdHN6ID0gRm1wNC5zdHN6KClcbiAgICBsZXQgc3RjbyA9IEZtcDQuc3RjbygpO1xuICAgIFtzdHNkLCBzdHRzLCBzdHNjLCBzdHN6LCBzdGNvXS5mb3JFYWNoKGl0ZW0gPT4ge1xuICAgICAgc2l6ZSArPSBpdGVtLmJ5dGVMZW5ndGhcbiAgICB9KVxuICAgIHJldHVybiBGbXA0LmluaXRCb3goc2l6ZSwgJ3N0YmwnLCBzdHNkLCBzdHRzLCBzdHNjLCBzdHN6LCBzdGNvKVxuICB9XG4gIHN0YXRpYyBzdHNkIChkYXRhKSB7XG4gICAgbGV0IGNvbnRlbnRcbiAgICBpZiAoZGF0YS50eXBlID09PSAnYXVkaW8nKSB7XG4gICAgICAvLyBpZiAoIWRhdGEuaXNBQUMgJiYgZGF0YS5jb2RlYyA9PT0gJ21wNCcpIHtcbiAgICAgIC8vICAgICBjb250ZW50ID0gRk1QNC5tcDMoZGF0YSk7XG4gICAgICAvLyB9IGVsc2Uge1xuICAgICAgLy9cbiAgICAgIC8vIH1cbiAgICAgIC8vIOaUr+aMgW1wNGFcbiAgICAgIGNvbnRlbnQgPSBGbXA0Lm1wNGEoZGF0YSlcbiAgICB9IGVsc2Uge1xuICAgICAgY29udGVudCA9IEZtcDQuYXZjMShkYXRhKVxuICAgIH1cbiAgICByZXR1cm4gRm1wNC5pbml0Qm94KDE2ICsgY29udGVudC5ieXRlTGVuZ3RoLCAnc3RzZCcsIEZtcDQuZXh0ZW5zaW9uKDAsIDApLCBuZXcgVWludDhBcnJheShbMHgwMCwgMHgwMCwgMHgwMCwgMHgwMV0pLCBjb250ZW50KVxuICB9XG4gIHN0YXRpYyBtcDRhIChkYXRhKSB7XG4gICAgbGV0IGNvbnRlbnQgPSBuZXcgVWludDhBcnJheShbXG4gICAgICAweDAwLCAweDAwLCAweDAwLCAvLyByZXNlcnZlZFxuICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgLy8gcmVzZXJ2ZWRcbiAgICAgIDB4MDAsIDB4MDEsIC8vIGRhdGFfcmVmZXJlbmNlX2luZGV4XG4gICAgICAweDAwLCAweDAwLCAweDAwLCAweDAwLFxuICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgLy8gcmVzZXJ2ZWRcbiAgICAgIDB4MDAsIGRhdGEuY2hhbm5lbENvdW50LCAvLyBjaGFubmVsY291bnRcbiAgICAgIDB4MDAsIDB4MTAsIC8vIHNhbXBsZVNpemU6MTZiaXRzXG4gICAgICAweDAwLCAweDAwLCAweDAwLCAweDAwLCAvLyByZXNlcnZlZDJcbiAgICAgIChkYXRhLnNhbXBsZXJhdGUgPj4gOCkgJiAweGZmLFxuICAgICAgZGF0YS5zYW1wbGVyYXRlICYgMHhmZiwgLy9cbiAgICAgIDB4MDAsIDB4MDBcbiAgICBdKVxuICAgIGxldCBlc2RzID0gRm1wNC5lc2RzKGRhdGEuY29uZmlnKVxuICAgIHJldHVybiBGbXA0LmluaXRCb3goOCArIGNvbnRlbnQuYnl0ZUxlbmd0aCArIGVzZHMuYnl0ZUxlbmd0aCwgJ21wNGEnLCBjb250ZW50LCBlc2RzKVxuICB9XG4gIHN0YXRpYyBlc2RzIChjb25maWcgPSBbNDMsIDE0NiwgOCwgMF0pIHtcbiAgICBjb25zdCBjb25maWdsZW4gPSBjb25maWcubGVuZ3RoXG4gICAgbGV0IGJ1ZmZlciA9IG5ldyBCdWZmZXIoKVxuICAgIGxldCBjb250ZW50ID0gbmV3IFVpbnQ4QXJyYXkoW1xuICAgICAgMHgwMCwgLy8gdmVyc2lvbiAwXG4gICAgICAweDAwLCAweDAwLCAweDAwLCAvLyBmbGFnc1xuXG4gICAgICAweDAzLCAvLyBkZXNjcmlwdG9yX3R5cGVcbiAgICAgIDB4MTcgKyBjb25maWdsZW4sIC8vIGxlbmd0aFxuICAgICAgMHgwMCwgMHgwMSwgLy8gZXNfaWRcbiAgICAgIDB4MDAsIC8vIHN0cmVhbV9wcmlvcml0eVxuXG4gICAgICAweDA0LCAvLyBkZXNjcmlwdG9yX3R5cGVcbiAgICAgIDB4MGYgKyBjb25maWdsZW4sIC8vIGxlbmd0aFxuICAgICAgMHg0MCwgLy8gY29kZWMgOiBtcGVnNF9hdWRpb1xuICAgICAgMHgxNSwgLy8gc3RyZWFtX3R5cGVcbiAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIC8vIGJ1ZmZlcl9zaXplXG4gICAgICAweDAwLCAweDAwLCAweDAwLCAweDAwLCAvLyBtYXhCaXRyYXRlXG4gICAgICAweDAwLCAweDAwLCAweDAwLCAweDAwLCAvLyBhdmdCaXRyYXRlXG5cbiAgICAgIDB4MDUgLy8gZGVzY3JpcHRvcl90eXBlXG4gICAgXS5jb25jYXQoW2NvbmZpZ2xlbl0pLmNvbmNhdChjb25maWcpLmNvbmNhdChbMHgwNiwgMHgwMSwgMHgwMl0pKVxuICAgIGJ1ZmZlci53cml0ZShGbXA0LnNpemUoOCArIGNvbnRlbnQuYnl0ZUxlbmd0aCksIEZtcDQudHlwZSgnZXNkcycpLCBjb250ZW50KVxuICAgIHJldHVybiBidWZmZXIuYnVmZmVyXG4gIH1cbiAgc3RhdGljIGF2YzEgKGRhdGEpIHtcbiAgICBsZXQgYnVmZmVyID0gbmV3IEJ1ZmZlcigpXG4gICAgbGV0IHNpemUgPSA0MC8vIDgoYXZjMSkrOChhdmNjKSs4KGJ0cnQpKzE2KHBhc3ApXG4gICAgLy8gbGV0IHNwcyA9IGRhdGEuc3BzXG4gICAgLy8gbGV0IHBwcyA9IGRhdGEucHBzXG4gICAgbGV0IHdpZHRoID0gZGF0YS53aWR0aFxuICAgIGxldCBoZWlnaHQgPSBkYXRhLmhlaWdodFxuICAgIGxldCBoU3BhY2luZyA9IGRhdGEucGFyUmF0aW8uaGVpZ2h0XG4gICAgbGV0IHZTcGFjaW5nID0gZGF0YS5wYXJSYXRpby53aWR0aFxuICAgIC8vIGxldCBhdmNjQnVmZmVyID0gbmV3IEJ1ZmZlcigpXG4gICAgLy8gYXZjY0J1ZmZlci53cml0ZShuZXcgVWludDhBcnJheShbXG4gICAgLy8gICAweDAxLCAvLyB2ZXJzaW9uXG4gICAgLy8gICBzcHNbMV0sIC8vIHByb2ZpbGVcbiAgICAvLyAgIHNwc1syXSwgLy8gcHJvZmlsZSBjb21wYXRpYmxlXG4gICAgLy8gICBzcHNbM10sIC8vIGxldmVsXG4gICAgLy8gICAweGZjIHwgMyxcbiAgICAvLyAgIDB4RTAgfCAxIC8vIOebruWJjeWPquWkhOeQhuS4gOS4qnNwc1xuICAgIC8vIF0uY29uY2F0KFtzcHMubGVuZ3RoID4+PiA4ICYgMHhmZiwgc3BzLmxlbmd0aCAmIDB4ZmZdKSkpXG4gICAgLy8gYXZjY0J1ZmZlci53cml0ZShzcHMsIG5ldyBVaW50OEFycmF5KFsxLCBwcHMubGVuZ3RoID4+PiA4ICYgMHhmZiwgcHBzLmxlbmd0aCAmIDB4ZmZdKSwgcHBzKVxuXG4gICAgbGV0IGF2Y2MgPSBkYXRhLmF2Y2NcbiAgICBsZXQgYXZjMSA9IG5ldyBVaW50OEFycmF5KFtcbiAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIC8vIHJlc2VydmVkXG4gICAgICAweDAwLCAweDAwLCAweDAwLCAvLyByZXNlcnZlZFxuICAgICAgMHgwMCwgMHgwMSwgLy8gZGF0YV9yZWZlcmVuY2VfaW5kZXhcbiAgICAgIDB4MDAsIDB4MDAsIC8vIHByZV9kZWZpbmVkXG4gICAgICAweDAwLCAweDAwLCAvLyByZXNlcnZlZFxuICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCxcbiAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsXG4gICAgICAweDAwLCAweDAwLCAweDAwLCAweDAwLCAvLyBwcmVfZGVmaW5lZFxuICAgICAgKHdpZHRoID4+IDgpICYgMHhmZixcbiAgICAgIHdpZHRoICYgMHhmZiwgLy8gd2lkdGhcbiAgICAgIChoZWlnaHQgPj4gOCkgJiAweGZmLFxuICAgICAgaGVpZ2h0ICYgMHhmZiwgLy8gaGVpZ2h0XG4gICAgICAweDAwLCAweDQ4LCAweDAwLCAweDAwLCAvLyBob3JpenJlc29sdXRpb25cbiAgICAgIDB4MDAsIDB4NDgsIDB4MDAsIDB4MDAsIC8vIHZlcnRyZXNvbHV0aW9uXG4gICAgICAweDAwLCAweDAwLCAweDAwLCAweDAwLCAvLyByZXNlcnZlZFxuICAgICAgMHgwMCwgMHgwMSwgLy8gZnJhbWVfY291bnRcbiAgICAgIDB4MTIsXG4gICAgICAweDY0LCAweDYxLCAweDY5LCAweDZDLCAvLyBkYWlseW1vdGlvbi9obHMuanNcbiAgICAgIDB4NzksIDB4NkQsIDB4NkYsIDB4NzQsXG4gICAgICAweDY5LCAweDZGLCAweDZFLCAweDJGLFxuICAgICAgMHg2OCwgMHg2QywgMHg3MywgMHgyRSxcbiAgICAgIDB4NkEsIDB4NzMsIDB4MDAsIDB4MDAsXG4gICAgICAweDAwLCAweDAwLCAweDAwLCAweDAwLFxuICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCxcbiAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIC8vIGNvbXByZXNzb3JuYW1lXG4gICAgICAweDAwLCAweDE4LCAvLyBkZXB0aCA9IDI0XG4gICAgICAweDExLCAweDExXSkgLy8gcHJlX2RlZmluZWQgPSAtMVxuICAgIGxldCBidHJ0ID0gbmV3IFVpbnQ4QXJyYXkoW1xuICAgICAgMHgwMCwgMHgxYywgMHg5YywgMHg4MCwgLy8gYnVmZmVyU2l6ZURCXG4gICAgICAweDAwLCAweDJkLCAweGM2LCAweGMwLCAvLyBtYXhCaXRyYXRlXG4gICAgICAweDAwLCAweDJkLCAweGM2LCAweGMwIC8vIGF2Z0JpdHJhdGVcbiAgICBdKVxuICAgIGxldCBwYXNwID0gbmV3IFVpbnQ4QXJyYXkoW1xuICAgICAgKGhTcGFjaW5nID4+IDI0KSwgLy8gaFNwYWNpbmdcbiAgICAgIChoU3BhY2luZyA+PiAxNikgJiAweGZmLFxuICAgICAgKGhTcGFjaW5nID4+IDgpICYgMHhmZixcbiAgICAgIGhTcGFjaW5nICYgMHhmZixcbiAgICAgICh2U3BhY2luZyA+PiAyNCksIC8vIHZTcGFjaW5nXG4gICAgICAodlNwYWNpbmcgPj4gMTYpICYgMHhmZixcbiAgICAgICh2U3BhY2luZyA+PiA4KSAmIDB4ZmYsXG4gICAgICB2U3BhY2luZyAmIDB4ZmZcbiAgICBdKVxuXG4gICAgYnVmZmVyLndyaXRlKFxuICAgICAgRm1wNC5zaXplKHNpemUgKyBhdmMxLmJ5dGVMZW5ndGggKyBhdmNjLmJ5dGVMZW5ndGggKyBidHJ0LmJ5dGVMZW5ndGgpLCBGbXA0LnR5cGUoJ2F2YzEnKSwgYXZjMSxcbiAgICAgIEZtcDQuc2l6ZSg4ICsgYXZjYy5ieXRlTGVuZ3RoKSwgRm1wNC50eXBlKCdhdmNDJyksIGF2Y2MsXG4gICAgICBGbXA0LnNpemUoMjApLCBGbXA0LnR5cGUoJ2J0cnQnKSwgYnRydCxcbiAgICAgIEZtcDQuc2l6ZSgxNiksIEZtcDQudHlwZSgncGFzcCcpLCBwYXNwXG4gICAgKVxuICAgIHJldHVybiBidWZmZXIuYnVmZmVyXG4gIH1cbiAgc3RhdGljIHN0dHMgKCkge1xuICAgIGxldCBjb250ZW50ID0gbmV3IFVpbnQ4QXJyYXkoW1xuICAgICAgMHgwMCwgLy8gdmVyc2lvblxuICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgLy8gZmxhZ3NcbiAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAgLy8gZW50cnlfY291bnRcbiAgICBdKVxuICAgIHJldHVybiBGbXA0LmluaXRCb3goMTYsICdzdHRzJywgY29udGVudClcbiAgfVxuICBzdGF0aWMgc3RzYyAoKSB7XG4gICAgbGV0IGNvbnRlbnQgPSBuZXcgVWludDhBcnJheShbXG4gICAgICAweDAwLCAvLyB2ZXJzaW9uXG4gICAgICAweDAwLCAweDAwLCAweDAwLCAvLyBmbGFnc1xuICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCAvLyBlbnRyeV9jb3VudFxuICAgIF0pXG4gICAgcmV0dXJuIEZtcDQuaW5pdEJveCgxNiwgJ3N0c2MnLCBjb250ZW50KVxuICB9XG4gIHN0YXRpYyBzdGNvICgpIHtcbiAgICBsZXQgY29udGVudCA9IG5ldyBVaW50OEFycmF5KFtcbiAgICAgIDB4MDAsIC8vIHZlcnNpb25cbiAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIC8vIGZsYWdzXG4gICAgICAweDAwLCAweDAwLCAweDAwLCAweDAwIC8vIGVudHJ5X2NvdW50XG4gICAgXSlcbiAgICByZXR1cm4gRm1wNC5pbml0Qm94KDE2LCAnc3RjbycsIGNvbnRlbnQpXG4gIH1cbiAgc3RhdGljIHN0c3ogKCkge1xuICAgIGxldCBjb250ZW50ID0gbmV3IFVpbnQ4QXJyYXkoW1xuICAgICAgMHgwMCwgLy8gdmVyc2lvblxuICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgLy8gZmxhZ3NcbiAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIC8vIHNhbXBsZV9zaXplXG4gICAgICAweDAwLCAweDAwLCAweDAwLCAweDAwIC8vIHNhbXBsZV9jb3VudFxuICAgIF0pXG4gICAgcmV0dXJuIEZtcDQuaW5pdEJveCgyMCwgJ3N0c3onLCBjb250ZW50KVxuICB9XG4gIHN0YXRpYyBtdmV4IChkdXJhdGlvbiwgdGltZXNjYWxlID0gMTAwMCwgdHJhY2tJRCkge1xuICAgIGxldCBidWZmZXIgPSBuZXcgQnVmZmVyKClcbiAgICBsZXQgbWVoZCA9IEJ1ZmZlci53cml0ZVVpbnQzMihkdXJhdGlvbilcbiAgICBidWZmZXIud3JpdGUoRm1wNC5zaXplKDU2KSwgRm1wNC50eXBlKCdtdmV4JyksIEZtcDQuc2l6ZSgxNiksIEZtcDQudHlwZSgnbWVoZCcpLCBGbXA0LmV4dGVuc2lvbigwLCAwKSwgbWVoZCwgRm1wNC50cmV4KHRyYWNrSUQpKVxuICAgIHJldHVybiBidWZmZXIuYnVmZmVyXG4gIH1cbiAgc3RhdGljIHRyZXggKGlkKSB7XG4gICAgbGV0IGNvbnRlbnQgPSBuZXcgVWludDhBcnJheShbXG4gICAgICAweDAwLCAvLyB2ZXJzaW9uIDBcbiAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIC8vIGZsYWdzXG4gICAgICAoaWQgPj4gMjQpLFxuICAgICAgKGlkID4+IDE2KSAmIDB4ZmYsXG4gICAgICAoaWQgPj4gOCkgJiAweGZmLFxuICAgICAgKGlkICYgMHhmZiksIC8vIHRyYWNrX0lEXG4gICAgICAweDAwLCAweDAwLCAweDAwLCAweDAxLCAvLyBkZWZhdWx0X3NhbXBsZV9kZXNjcmlwdGlvbl9pbmRleFxuICAgICAgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgLy8gZGVmYXVsdF9zYW1wbGVfZHVyYXRpb25cbiAgICAgIDB4MDAsIDB4MDAsIDB4MDAsIDB4MDAsIC8vIGRlZmF1bHRfc2FtcGxlX3NpemVcbiAgICAgIDB4MDAsIDB4MDEsIDB4MDAsIDB4MDEgLy8gZGVmYXVsdF9zYW1wbGVfZmxhZ3NcbiAgICBdKVxuICAgIHJldHVybiBGbXA0LmluaXRCb3goOCArIGNvbnRlbnQuYnl0ZUxlbmd0aCwgJ3RyZXgnLCBjb250ZW50KVxuICB9XG4gIHN0YXRpYyBtb29mIChkYXRhKSB7XG4gICAgbGV0IHNpemUgPSA4XG4gICAgbGV0IG1maGQgPSBGbXA0Lm1maGQoKVxuICAgIGxldCB0cmFmID0gRm1wNC50cmFmKGRhdGEpO1xuICAgIFttZmhkLCB0cmFmXS5mb3JFYWNoKGl0ZW0gPT4ge1xuICAgICAgc2l6ZSArPSBpdGVtLmJ5dGVMZW5ndGhcbiAgICB9KVxuICAgIHJldHVybiBGbXA0LmluaXRCb3goc2l6ZSwgJ21vb2YnLCBtZmhkLCB0cmFmKVxuICB9XG4gIHN0YXRpYyBtZmhkICgpIHtcbiAgICBsZXQgY29udGVudCA9IEJ1ZmZlci53cml0ZVVpbnQzMihGbXA0LnNlcXVlbmNlKVxuICAgIEZtcDQuc2VxdWVuY2UgKz0gMVxuICAgIHJldHVybiBGbXA0LmluaXRCb3goMTYsICdtZmhkJywgRm1wNC5leHRlbnNpb24oMCwgMCksIGNvbnRlbnQpXG4gIH1cbiAgc3RhdGljIHRyYWYgKGRhdGEpIHtcbiAgICBsZXQgc2l6ZSA9IDhcbiAgICBsZXQgdGZoZCA9IEZtcDQudGZoZChkYXRhLmlkKVxuICAgIGxldCB0ZmR0ID0gRm1wNC50ZmR0KGRhdGEudGltZSlcbiAgICBsZXQgc2R0cCA9IEZtcDQuc2R0cChkYXRhKVxuICAgIGxldCB0cnVuID0gRm1wNC50cnVuKGRhdGEsIHNkdHAuYnl0ZUxlbmd0aCk7XG5cbiAgICBbdGZoZCwgdGZkdCwgdHJ1biwgc2R0cF0uZm9yRWFjaChpdGVtID0+IHtcbiAgICAgIHNpemUgKz0gaXRlbS5ieXRlTGVuZ3RoXG4gICAgfSlcbiAgICByZXR1cm4gRm1wNC5pbml0Qm94KHNpemUsICd0cmFmJywgdGZoZCwgdGZkdCwgdHJ1biwgc2R0cClcbiAgfVxuICBzdGF0aWMgdGZoZCAoaWQpIHtcbiAgICBsZXQgY29udGVudCA9IEJ1ZmZlci53cml0ZVVpbnQzMihpZClcbiAgICByZXR1cm4gRm1wNC5pbml0Qm94KDE2LCAndGZoZCcsIEZtcDQuZXh0ZW5zaW9uKDAsIDApLCBjb250ZW50KVxuICB9XG4gIHN0YXRpYyB0ZmR0ICh0aW1lKSB7XG4gICAgLy8gbGV0IHVwcGVyID0gTWF0aC5mbG9vcih0aW1lIC8gKFVJTlQzMl9NQVggKyAxKSksXG4gICAgLy8gICAgIGxvd2VyID0gTWF0aC5mbG9vcih0aW1lICUgKFVJTlQzMl9NQVggKyAxKSk7XG4gICAgcmV0dXJuIEZtcDQuaW5pdEJveCgxNiwgJ3RmZHQnLCBGbXA0LmV4dGVuc2lvbigwLCAwKSwgQnVmZmVyLndyaXRlVWludDMyKHRpbWUpKVxuICB9XG4gIHN0YXRpYyB0cnVuIChkYXRhLCBzZHRwTGVuZ3RoKSB7XG4gICAgLy8gbGV0IGlkID0gZGF0YS5pZDtcbiAgICAvLyBsZXQgY2VpbCA9IGlkID09PSAxID8gMTYgOiAxMjtcbiAgICBsZXQgYnVmZmVyID0gbmV3IEJ1ZmZlcigpXG4gICAgbGV0IHNhbXBsZUNvdW50ID0gQnVmZmVyLndyaXRlVWludDMyKGRhdGEuc2FtcGxlcy5sZW5ndGgpXG4gICAgLy8gbWRhdC1oZWFkZXIgOFxuICAgIC8vIG1vb2YtaGVhZGVyIDhcbiAgICAvLyBtZmhkIDE2XG4gICAgLy8gdHJhZi1oZWFkZXIgOFxuICAgIC8vIHRoaGQgMTZcbiAgICAvLyB0ZmR0IDIwXG4gICAgLy8gdHJ1bi1oZWFkZXIgMTJcbiAgICAvLyBzYW1wbGVDb3VudCA0XG4gICAgLy8gZGF0YS1vZmZzZXQgNFxuICAgIC8vIHNhbXBsZXMubGVuZ3RoXG4gICAgbGV0IG9mZnNldCA9IEJ1ZmZlci53cml0ZVVpbnQzMig4ICsgOCArIDE2ICsgOCArIDE2ICsgMTYgKyAxMiArIDQgKyA0ICsgMTYgKiBkYXRhLnNhbXBsZXMubGVuZ3RoICsgc2R0cExlbmd0aClcbiAgICBidWZmZXIud3JpdGUoRm1wNC5zaXplKDIwICsgMTYgKiBkYXRhLnNhbXBsZXMubGVuZ3RoKSwgRm1wNC50eXBlKCd0cnVuJyksIG5ldyBVaW50OEFycmF5KFsweDAwLCAweDAwLCAweDBGLCAweDAxXSksIHNhbXBsZUNvdW50LCBvZmZzZXQpXG5cbiAgICAvLyBsZXQgc2l6ZSA9IGJ1ZmZlci5idWZmZXIuYnl0ZUxlbmd0aFxuICAgIC8vIGxldCB3cml0ZU9mZnNldCA9IDBcbiAgICAvLyBkYXRhLnNhbXBsZXMuZm9yRWFjaCgoKSA9PiB7XG4gICAgLy8gICBzaXplICs9IDE2XG4gICAgLy8gfSlcbiAgICAvL1xuICAgIC8vIGxldCB0cnVuQm94ID0gbmV3IFVpbnQ4QXJyYXkoc2l6ZSlcblxuICAgIC8vIHRydW5Cb3guc2V0KGJ1ZmZlci5idWZmZXIsIDApXG5cbiAgICBkYXRhLnNhbXBsZXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgICAgY29uc3QgZmxhZ3MgPSBpdGVtLmZsYWdzXG4gICAgICAvLyBjb25zb2xlLmxvZyhpdGVtLnR5cGUsIGl0ZW0uZHRzLCBpdGVtLmR1cmF0aW9uKVxuXG4gICAgICBidWZmZXIud3JpdGUobmV3IFVpbnQ4QXJyYXkoW1xuICAgICAgICAoaXRlbS5kdXJhdGlvbiA+Pj4gMjQpICYgMHhGRiwgLy8gc2FtcGxlX2R1cmF0aW9uXG4gICAgICAgIChpdGVtLmR1cmF0aW9uID4+PiAxNikgJiAweEZGLFxuICAgICAgICAoaXRlbS5kdXJhdGlvbiA+Pj4gOCkgJiAweEZGLFxuICAgICAgICAoaXRlbS5kdXJhdGlvbikgJiAweEZGLFxuICAgICAgICAoaXRlbS5zaXplID4+PiAyNCkgJiAweEZGLCAvLyBzYW1wbGVfc2l6ZVxuICAgICAgICAoaXRlbS5zaXplID4+PiAxNikgJiAweEZGLFxuICAgICAgICAoaXRlbS5zaXplID4+PiA4KSAmIDB4RkYsXG4gICAgICAgIChpdGVtLnNpemUpICYgMHhGRixcbiAgICAgICAgKGZsYWdzLmlzTGVhZGluZyA8PCAyKSB8IGZsYWdzLmRlcGVuZHNPbiwgLy8gc2FtcGxlX2ZsYWdzXG4gICAgICAgIChmbGFncy5pc0RlcGVuZGVkT24gPDwgNikgfCAoZmxhZ3MuaGFzUmVkdW5kYW5jeSA8PCA0KSB8IGZsYWdzLmlzTm9uU3luYyxcbiAgICAgICAgMHgwMCwgMHgwMCwgLy8gc2FtcGxlX2RlZ3JhZGF0aW9uX3ByaW9yaXR5XG4gICAgICAgIChpdGVtLmN0cyA+Pj4gMjQpICYgMHhGRiwgLy8gc2FtcGxlX2NvbXBvc2l0aW9uX3RpbWVfb2Zmc2V0XG4gICAgICAgIChpdGVtLmN0cyA+Pj4gMTYpICYgMHhGRixcbiAgICAgICAgKGl0ZW0uY3RzID4+PiA4KSAmIDB4RkYsXG4gICAgICAgIChpdGVtLmN0cykgJiAweEZGXG4gICAgICBdKSlcbiAgICAgIC8vIHdyaXRlT2Zmc2V0ICs9IDE2XG4gICAgICAvLyBidWZmZXIud3JpdGUoQnVmZmVyLndyaXRlVWludDMyKDApKTtcbiAgICB9KVxuICAgIHJldHVybiBidWZmZXIuYnVmZmVyXG4gIH1cbiAgc3RhdGljIHNkdHAgKGRhdGEpIHtcbiAgICBsZXQgYnVmZmVyID0gbmV3IEJ1ZmZlcigpXG4gICAgYnVmZmVyLndyaXRlKEZtcDQuc2l6ZSgxMiArIGRhdGEuc2FtcGxlcy5sZW5ndGgpLCBGbXA0LnR5cGUoJ3NkdHAnKSwgRm1wNC5leHRlbnNpb24oMCwgMCkpXG4gICAgZGF0YS5zYW1wbGVzLmZvckVhY2goaXRlbSA9PiB7XG4gICAgICBjb25zdCBmbGFncyA9IGl0ZW0uZmxhZ3NcbiAgICAgIGNvbnN0IG51bSA9IChmbGFncy5pc0xlYWRpbmcgPDwgNikgfCAvLyBpc19sZWFkaW5nOiAyIChiaXQpXG4gICAgICAgIChmbGFncy5kZXBlbmRzT24gPDwgNCkgfCAvLyBzYW1wbGVfZGVwZW5kc19vblxuICAgICAgICAoZmxhZ3MuaXNEZXBlbmRlZE9uIDw8IDIpIHwgLy8gc2FtcGxlX2lzX2RlcGVuZGVkX29uXG4gICAgICAgIChmbGFncy5oYXNSZWR1bmRhbmN5KS8vIHNhbXBsZV9oYXNfcmVkdW5kYW5jeVxuXG4gICAgICBidWZmZXIud3JpdGUobmV3IFVpbnQ4QXJyYXkoW251bV0pKVxuICAgIH0pXG4gICAgcmV0dXJuIGJ1ZmZlci5idWZmZXJcbiAgfVxuICBzdGF0aWMgbWRhdCAoZGF0YSkge1xuICAgIGxldCBidWZmZXIgPSBuZXcgQnVmZmVyKClcbiAgICBsZXQgc2l6ZSA9IDhcbiAgICBkYXRhLnNhbXBsZXMuZm9yRWFjaChpdGVtID0+IHtcbiAgICAgIHNpemUgKz0gaXRlbS5zaXplXG4gICAgfSlcbiAgICBidWZmZXIud3JpdGUoRm1wNC5zaXplKHNpemUpLCBGbXA0LnR5cGUoJ21kYXQnKSlcbiAgICBsZXQgbWRhdEJveCA9IG5ldyBVaW50OEFycmF5KHNpemUpXG4gICAgbGV0IG9mZnNldCA9IDBcbiAgICBtZGF0Qm94LnNldChidWZmZXIuYnVmZmVyLCBvZmZzZXQpXG4gICAgb2Zmc2V0ICs9IDhcbiAgICBkYXRhLnNhbXBsZXMuZm9yRWFjaChpdGVtID0+IHtcbiAgICAgIGl0ZW0uYnVmZmVyLmZvckVhY2goKHVuaXQpID0+IHtcbiAgICAgICAgbWRhdEJveC5zZXQodW5pdCwgb2Zmc2V0KVxuICAgICAgICBvZmZzZXQgKz0gdW5pdC5ieXRlTGVuZ3RoXG4gICAgICAgIC8vIGJ1ZmZlci53cml0ZSh1bml0LmRhdGEpO1xuICAgICAgfSlcbiAgICB9KVxuICAgIHJldHVybiBtZGF0Qm94XG4gIH1cbn1cbkZtcDQudHlwZSA9IChuYW1lKSA9PiB7XG4gIHJldHVybiBuZXcgVWludDhBcnJheShbbmFtZS5jaGFyQ29kZUF0KDApLCBuYW1lLmNoYXJDb2RlQXQoMSksIG5hbWUuY2hhckNvZGVBdCgyKSwgbmFtZS5jaGFyQ29kZUF0KDMpXSlcbn1cbkZtcDQuc2VxdWVuY2UgPSAxXG5cbmV4cG9ydCBkZWZhdWx0IEZtcDRcbiIsImltcG9ydCB7XG4gIEVWRU5UUyxcbiAgc25pZmZlcixcbiAgTWVkaWFTZWdtZW50TGlzdCxcbiAgQnVmZmVyXG59IGZyb20gJ3hncGxheWVyLXV0aWxzJztcbmltcG9ydCBGbXA0IGZyb20gJy4vZm1wNCdcblxuY29uc3QgUkVNVVhfRVZFTlRTID0gRVZFTlRTLlJFTVVYX0VWRU5UU1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNcDRSZW11eGVyIHtcbiAgY29uc3RydWN0b3IgKCkge1xuICAgIHRoaXMuX2R0c0Jhc2UgPSAwXG4gICAgdGhpcy5faXNEdHNCYXNlSW5pdGVkID0gZmFsc2VcblxuICAgIHRoaXMudmlkZW9BbGxEdXJhdGlvbiA9IDBcbiAgICB0aGlzLmF1ZGlvQWxsRHVyYXRpb24gPSAwXG4gIH1cblxuICBpbml0ICgpIHtcbiAgICB0aGlzLm9uKFJFTVVYX0VWRU5UUy5SRU1VWF9NRURJQSwgdGhpcy5yZW11eC5iaW5kKHRoaXMpKVxuICAgIHRoaXMub24oUkVNVVhfRVZFTlRTLlJFTVVYX01FVEFEQVRBLCB0aGlzLm9uTWV0YURhdGFSZWFkeS5iaW5kKHRoaXMpKVxuICB9XG5cbiAgZGVzdHJveSAoKSB7XG4gICAgdGhpcy5fZHRzQmFzZSA9IC0xXG4gICAgdGhpcy5fZHRzQmFzZUluaXRlZCA9IGZhbHNlXG4gIH1cblxuICByZXNldCAoKSB7XG4gICAgdGhpcy5fZHRzQmFzZSA9IDBcbiAgICB0aGlzLl9pc0R0c0Jhc2VJbml0ZWQgPSBmYWxzZVxuICB9XG5cbiAgcmVtdXggKCkge1xuICAgIGNvbnN0IHsgYXVkaW9UcmFjaywgdmlkZW9UcmFjayB9ID0gdGhpcy5fY29udGV4dC5nZXRJbnN0YW5jZSgnVFJBQ0tTJylcbiAgICAhdGhpcy5faXNEdHNCYXNlSW5pdGVkICYmIHRoaXMuY2FsY0R0c0Jhc2UoYXVkaW9UcmFjaywgdmlkZW9UcmFjaylcblxuICAgIHRoaXMuX3JlbXV4VmlkZW8odmlkZW9UcmFjaylcbiAgICB0aGlzLl9yZW11eEF1ZGlvKGF1ZGlvVHJhY2spXG4gIH1cblxuICBzZWVrICgpIHtcblxuICB9XG5cbiAgb25NZXRhRGF0YVJlYWR5ICh0eXBlKSB7XG4gICAgbGV0IGluaXRTZWdtZW50ID0gbmV3IEJ1ZmZlcigpXG4gICAgbGV0IGZ0eXAgPSBGbXA0LmZ0eXAoKVxuICAgIGxldCBtb292XG4gICAgbGV0IHRyYWNrXG5cbiAgICBpZiAodHlwZSA9PT0gJ2F1ZGlvJykge1xuICAgICAgY29uc3QgeyBhdWRpb1RyYWNrIH0gPSB0aGlzLl9jb250ZXh0LmdldEluc3RhbmNlKCdUUkFDS1MnKVxuICAgICAgdHJhY2sgPSBhdWRpb1RyYWNrO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCB7IHZpZGVvVHJhY2sgfSA9IHRoaXMuX2NvbnRleHQuZ2V0SW5zdGFuY2UoJ1RSQUNLUycpXG4gICAgICB0cmFjayA9IHZpZGVvVHJhY2s7XG4gICAgfVxuXG4gICAgbW9vdiA9IEZtcDQubW9vdih7IHR5cGUsIG1ldGE6IHRyYWNrLm1ldGEgfSlcblxuICAgIGluaXRTZWdtZW50LndyaXRlKGZ0eXAsIG1vb3YpXG5cbiAgICBsZXQgcHJlc291cmNlYnVmZmVyID0gdGhpcy5fY29udGV4dC5nZXRJbnN0YW5jZSgnUFJFX1NPVVJDRV9CVUZGRVInKTtcbiAgICBsZXQgc291cmNlID0gcHJlc291cmNlYnVmZmVyLmdldFNvdXJjZSh0eXBlKTtcbiAgICBpZiAoIXNvdXJjZSkge1xuICAgICAgc291cmNlID0gcHJlc291cmNlYnVmZmVyLmNyZWF0ZVNvdXJjZSh0eXBlKTtcbiAgICB9XG5cbiAgICBzb3VyY2UubWltZXR5cGUgPSB0cmFjay5tZXRhLmNvZGVjO1xuICAgIHNvdXJjZS5pbml0ID0gaW5pdFNlZ21lbnQ7XG4gICAgdGhpcy5lbWl0KFJFTVVYX0VWRU5UUy5JTklUX1NFR01FTlQsIHR5cGUpXG4gIH1cblxuICBjYWxjRHRzQmFzZSAoYXVkaW9UcmFjaywgdmlkZW9UcmFjaykge1xuICAgIGlmICghYXVkaW9UcmFjay5zYW1wbGVzLmxlbmd0aCAmJiAhdmlkZW9UcmFjay5zYW1wbGVzLmxlbmd0aCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGxldCBhdWRpb0Jhc2UgPSBJbmZpbml0eVxuICAgIGxldCB2aWRlb0Jhc2UgPSBJbmZpbml0eVxuXG4gICAgaWYgKGF1ZGlvVHJhY2suc2FtcGxlcyAmJiBhdWRpb1RyYWNrLnNhbXBsZXMubGVuZ3RoKSB7XG4gICAgICBhdWRpb0Jhc2UgPSBhdWRpb1RyYWNrLnNhbXBsZXNbMF0uZHRzXG4gICAgfVxuICAgIGlmICh2aWRlb1RyYWNrLnNhbXBsZXMgJiYgdmlkZW9UcmFjay5zYW1wbGVzLmxlbmd0aCkge1xuICAgICAgdmlkZW9CYXNlID0gdmlkZW9UcmFjay5zYW1wbGVzWzBdLmR0c1xuICAgIH1cblxuICAgIHRoaXMuX2R0c0Jhc2UgPSBNYXRoLm1pbihhdWRpb0Jhc2UsIHZpZGVvQmFzZSlcbiAgICB0aGlzLl9pc0R0c0Jhc2VJbml0ZWQgPSB0cnVlXG4gIH1cblxuICBfcmVtdXhWaWRlbyAodmlkZW9UcmFjaykge1xuICAgIGNvbnN0IHRyYWNrID0gdmlkZW9UcmFja1xuXG4gICAgaWYgKCF2aWRlb1RyYWNrLnNhbXBsZXMgfHwgIXZpZGVvVHJhY2suc2FtcGxlcy5sZW5ndGgpIHtcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGxldCB7c2FtcGxlc30gPSB0cmFja1xuICAgIGxldCBmaXJzdER0cyA9IC0xXG5cbiAgICBjb25zdCBtcDRTYW1wbGVzID0gW11cbiAgICBjb25zdCBtZGF0Qm94ID0ge1xuICAgICAgc2FtcGxlczogW11cbiAgICB9XG5cbiAgICB3aGlsZSAoc2FtcGxlcy5sZW5ndGgpIHtcbiAgICAgIGNvbnN0IGF2Y1NhbXBsZSA9IHNhbXBsZXMuc2hpZnQoKVxuICAgICAgY29uc3QgeyBpc0tleWZyYW1lIH0gPSBhdmNTYW1wbGVcbiAgICAgIGxldCBkdHMgPSBhdmNTYW1wbGUuZHRzIC0gdGhpcy5fZHRzQmFzZVxuXG4gICAgICBpZiAoZmlyc3REdHMgPT09IC0xKSB7XG4gICAgICAgIGZpcnN0RHRzID0gZHRzXG4gICAgICB9XG5cbiAgICAgIGxldCBjdHNcbiAgICAgIGxldCBwdHNcbiAgICAgIGlmIChhdmNTYW1wbGUucHRzKSB7XG4gICAgICAgIHB0cyA9IGF2Y1NhbXBsZS5wdHMgLSB0aGlzLl9kdHNCYXNlXG4gICAgICAgIGN0cyA9IHB0cyAtIGR0c1xuICAgICAgfVxuICAgICAgaWYgKGF2Y1NhbXBsZS5jdHMpIHtcbiAgICAgICAgcHRzID0gYXZjU2FtcGxlLmN0cyArIGR0c1xuICAgICAgICBjdHMgPSBhdmNTYW1wbGUuY3RzXG4gICAgICB9XG5cbiAgICAgIGxldCBtZGF0U2FtcGxlID0ge1xuICAgICAgICBidWZmZXI6IFtdLFxuICAgICAgICBzaXplOiAwXG4gICAgICB9XG4gICAgICBtZGF0Qm94LnNhbXBsZXMucHVzaChtZGF0U2FtcGxlKVxuICAgICAgbWRhdFNhbXBsZS5idWZmZXIucHVzaChhdmNTYW1wbGUuZGF0YSlcbiAgICAgIG1kYXRTYW1wbGUuc2l6ZSArPSBhdmNTYW1wbGUuZGF0YS5ieXRlTGVuZ3RoXG5cbiAgICAgIGxldCBzYW1wbGVEdXJhdGlvbiA9IDBcbiAgICAgIGlmIChzYW1wbGVzLmxlbmd0aCA+PSAxKSB7XG4gICAgICAgIGNvbnN0IG5leHREdHMgPSBzYW1wbGVzWzBdLmR0cyAtIHRoaXMuX2R0c0Jhc2VcbiAgICAgICAgc2FtcGxlRHVyYXRpb24gPSBuZXh0RHRzIC0gZHRzXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAobXA0U2FtcGxlcy5sZW5ndGggPj0gMSkgeyAvLyBsYXN0ZXN0IHNhbXBsZSwgdXNlIHNlY29uZCBsYXN0IGR1cmF0aW9uXG4gICAgICAgICAgc2FtcGxlRHVyYXRpb24gPSBtcDRTYW1wbGVzW21wNFNhbXBsZXMubGVuZ3RoIC0gMV0uZHVyYXRpb25cbiAgICAgICAgfSBlbHNlIHsgLy8gdGhlIG9ubHkgb25lIHNhbXBsZSwgdXNlIHJlZmVyZW5jZSBkdXJhdGlvblxuICAgICAgICAgIHNhbXBsZUR1cmF0aW9uID0gdGhpcy52aWRlb01ldGEucmVmU2FtcGxlRHVyYXRpb25cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdGhpcy52aWRlb0FsbER1cmF0aW9uICs9IHNhbXBsZUR1cmF0aW9uXG4gICAgICBtcDRTYW1wbGVzLnB1c2goe1xuICAgICAgICBkdHMsXG4gICAgICAgIGN0cyxcbiAgICAgICAgcHRzLFxuICAgICAgICBkYXRhOiBhdmNTYW1wbGUuZGF0YSxcbiAgICAgICAgc2l6ZTogYXZjU2FtcGxlLmRhdGEuYnl0ZUxlbmd0aCxcbiAgICAgICAgaXNLZXlmcmFtZSxcbiAgICAgICAgZHVyYXRpb246IHNhbXBsZUR1cmF0aW9uLFxuICAgICAgICBmbGFnczoge1xuICAgICAgICAgIGlzTGVhZGluZzogMCxcbiAgICAgICAgICBkZXBlbmRzT246IGlzS2V5ZnJhbWUgPyAyIDogMSxcbiAgICAgICAgICBpc0RlcGVuZGVkT246IGlzS2V5ZnJhbWUgPyAxIDogMCxcbiAgICAgICAgICBoYXNSZWR1bmRhbmN5OiAwLFxuICAgICAgICAgIGlzTm9uU3luYzogaXNLZXlmcmFtZSA/IDAgOiAxXG4gICAgICAgIH0sXG4gICAgICAgIG9yaWdpbkR0czogZHRzLFxuICAgICAgICB0eXBlOiAndmlkZW8nXG4gICAgICB9KVxuICAgIH1cblxuICAgIGxldCBtb29mTWRhdCA9IG5ldyBCdWZmZXIoKVxuXG4gICAgY29uc3QgbW9vZiA9IEZtcDQubW9vZih7XG4gICAgICBpZDogdHJhY2subWV0YS5pZCxcbiAgICAgIHRpbWU6IGZpcnN0RHRzLFxuICAgICAgc2FtcGxlczogbXA0U2FtcGxlc1xuICAgIH0pXG4gICAgY29uc3QgbWRhdCA9IEZtcDQubWRhdChtZGF0Qm94KVxuICAgIG1vb2ZNZGF0LndyaXRlKG1vb2YsIG1kYXQpXG5cbiAgICB0cmFjay5zYW1wbGVzID0gW11cbiAgICB0cmFjay5sZW5ndGggPSAwXG5cbiAgICBsZXQgcHJlc291cmNlYnVmZmVyID0gdGhpcy5fY29udGV4dC5nZXRJbnN0YW5jZSgnUFJFX1NPVVJDRV9CVUZGRVInKTtcbiAgICBsZXQgc291cmNlID0gcHJlc291cmNlYnVmZmVyLmdldFNvdXJjZSgndmlkZW8nKTtcbiAgICBpZiAoIXNvdXJjZSkge1xuICAgICAgc291cmNlID0gcHJlc291cmNlYnVmZmVyLmNyZWF0ZVNvdXJjZSgndmlkZW8nKTtcbiAgICB9XG5cbiAgICBzb3VyY2UuZGF0YS5wdXNoKG1vb2ZNZGF0KTtcblxuICAgIHRoaXMuZW1pdChSRU1VWF9FVkVOVFMuTUVESUFfU0VHTUVOVCwgJ3ZpZGVvJylcbiAgfVxuXG4gIF9yZW11eEF1ZGlvICh0cmFjaykge1xuICAgIGNvbnN0IHtzYW1wbGVzfSA9IHRyYWNrXG4gICAgbGV0IGZpcnN0RHRzID0gLTFcbiAgICBsZXQgbXA0U2FtcGxlcyA9IFtdXG5cbiAgICBjb25zdCBtZGF0Qm94ID0ge1xuICAgICAgc2FtcGxlczogW11cbiAgICB9XG4gICAgaWYgKCFzYW1wbGVzIHx8ICFzYW1wbGVzLmxlbmd0aCkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIGxldCBpc0ZpcnN0RHRzSW5pdGVkID0gZmFsc2VcbiAgICB3aGlsZSAoc2FtcGxlcy5sZW5ndGgpIHtcbiAgICAgIGxldCBzYW1wbGUgPSBzYW1wbGVzLnNoaWZ0KClcbiAgICAgIGNvbnN0IHsgZGF0YSB9ID0gc2FtcGxlXG4gICAgICBsZXQgZHRzID0gc2FtcGxlLmR0cyAtIHRoaXMuX2R0c0Jhc2VcbiAgICAgIGNvbnN0IG9yaWdpbkR0cyA9IGR0c1xuICAgICAgaWYgKCFpc0ZpcnN0RHRzSW5pdGVkKSB7XG4gICAgICAgIGZpcnN0RHRzID0gZHRzXG4gICAgICAgIGlzRmlyc3REdHNJbml0ZWQgPSB0cnVlXG4gICAgICB9XG5cbiAgICAgIGxldCBzYW1wbGVEdXJhdGlvbiA9IDBcblxuICAgICAgaWYgKHRoaXMuYXVkaW9NZXRhLnJlZlNhbXBsZUR1cmF0aW9uRml4ZWQpIHtcbiAgICAgICAgc2FtcGxlRHVyYXRpb24gPSB0aGlzLmF1ZGlvTWV0YS5yZWZTYW1wbGVEdXJhdGlvbkZpeGVkXG4gICAgICB9IGVsc2UgaWYgKHNhbXBsZXMubGVuZ3RoID49IDEpIHtcbiAgICAgICAgY29uc3QgbmV4dER0cyA9IHNhbXBsZXNbMF0uZHRzIC0gdGhpcy5fZHRzQmFzZTtcbiAgICAgICAgc2FtcGxlRHVyYXRpb24gPSBuZXh0RHRzIC0gZHRzXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAobXA0U2FtcGxlcy5sZW5ndGggPj0gMSkgeyAvLyB1c2Ugc2Vjb25kIGxhc3Qgc2FtcGxlIGR1cmF0aW9uXG4gICAgICAgICAgc2FtcGxlRHVyYXRpb24gPSBtcDRTYW1wbGVzW21wNFNhbXBsZXMubGVuZ3RoIC0gMV0uZHVyYXRpb25cbiAgICAgICAgfSBlbHNlIHsgLy8gdGhlIG9ubHkgb25lIHNhbXBsZSwgdXNlIHJlZmVyZW5jZSBzYW1wbGUgZHVyYXRpb25cbiAgICAgICAgICBzYW1wbGVEdXJhdGlvbiA9IHRoaXMuYXVkaW9NZXRhLnJlZlNhbXBsZUR1cmF0aW9uXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gY29uc29sZS5sb2coJ3JlbXV4IGF1ZGlvICcsIGR0cylcbiAgICAgIHRoaXMuYXVkaW9BbGxEdXJhdGlvbiArPSBzYW1wbGVEdXJhdGlvblxuICAgICAgY29uc3QgbXA0U2FtcGxlID0ge1xuICAgICAgICBkdHMsXG4gICAgICAgIHB0czogZHRzLFxuICAgICAgICBjdHM6IDAsXG4gICAgICAgIHNpemU6IGRhdGEuYnl0ZUxlbmd0aCxcbiAgICAgICAgZHVyYXRpb246IHNhbXBsZS5kdXJhdGlvbiA/IHNhbXBsZS5kdXJhdGlvbiA6IHNhbXBsZUR1cmF0aW9uLFxuICAgICAgICBmbGFnczoge1xuICAgICAgICAgIGlzTGVhZGluZzogMCxcbiAgICAgICAgICBkZXBlbmRzT246IDIsXG4gICAgICAgICAgaXNEZXBlbmRlZE9uOiAxLFxuICAgICAgICAgIGhhc1JlZHVuZGFuY3k6IDAsXG4gICAgICAgICAgaXNOb25TeW5jOiAwXG4gICAgICAgIH0sXG4gICAgICAgIGlzS2V5ZnJhbWU6IHRydWUsXG4gICAgICAgIG9yaWdpbkR0cyxcbiAgICAgICAgdHlwZTogJ2F1ZGlvJ1xuICAgICAgfVxuXG4gICAgICBsZXQgbWRhdFNhbXBsZSA9IHtcbiAgICAgICAgYnVmZmVyOiBbXSxcbiAgICAgICAgc2l6ZTogMFxuICAgICAgfVxuICAgICAgbWRhdFNhbXBsZS5idWZmZXIucHVzaChkYXRhKVxuICAgICAgbWRhdFNhbXBsZS5zaXplICs9IGRhdGEuYnl0ZUxlbmd0aFxuXG4gICAgICBtZGF0Qm94LnNhbXBsZXMucHVzaChtZGF0U2FtcGxlKVxuXG4gICAgICBtcDRTYW1wbGVzLnB1c2gobXA0U2FtcGxlKVxuICAgIH1cblxuICAgIGNvbnN0IG1vb2ZNZGF0ID0gbmV3IEJ1ZmZlcigpXG4gICAgY29uc3QgbW9vZiA9IEZtcDQubW9vZih7XG4gICAgICBpZDogdHJhY2subWV0YS5pZCxcbiAgICAgIHRpbWU6IGZpcnN0RHRzLFxuICAgICAgc2FtcGxlczogbXA0U2FtcGxlc1xuICAgIH0pXG4gICAgY29uc3QgbWRhdCA9IEZtcDQubWRhdChtZGF0Qm94KVxuICAgIG1vb2ZNZGF0LndyaXRlKG1vb2YsIG1kYXQpXG5cbiAgICB0cmFjay5zYW1wbGVzID0gW11cbiAgICB0cmFjay5sZW5ndGggPSAwXG5cbiAgICBsZXQgcHJlc291cmNlYnVmZmVyID0gdGhpcy5fY29udGV4dC5nZXRJbnN0YW5jZSgnUFJFX1NPVVJDRV9CVUZGRVInKTtcbiAgICBsZXQgc291cmNlID0gcHJlc291cmNlYnVmZmVyLmdldFNvdXJjZSgnYXVkaW8nKTtcbiAgICBpZiAoIXNvdXJjZSkge1xuICAgICAgc291cmNlID0gcHJlc291cmNlYnVmZmVyLmNyZWF0ZVNvdXJjZSgnYXVkaW8nKTtcbiAgICB9XG4gICAgc291cmNlLmRhdGEucHVzaChtb29mTWRhdCk7XG4gICAgdGhpcy5lbWl0KFJFTVVYX0VWRU5UUy5NRURJQV9TRUdNRU5ULCAnYXVkaW8nLCBtb29mTWRhdClcbiAgfVxuXG4gIGluaXRTaWxlbnRBdWRpbyAoZHRzLCBkdXJhdGlvbikge1xuICAgIGNvbnN0IHVuaXQgPSBNcDRSZW11eGVyLmdldFNpbGVudEZyYW1lKHRoaXMuYXVkaW9NZXRhLmNoYW5uZWxDb3VudClcbiAgICByZXR1cm4ge1xuICAgICAgZHRzLFxuICAgICAgcHRzOiBkdHMsXG4gICAgICBjdHM6IDAsXG4gICAgICBkdXJhdGlvbixcbiAgICAgIHVuaXQsXG4gICAgICBzaXplOiB1bml0LmJ5dGVMZW5ndGgsXG4gICAgICBvcmlnaW5EdHM6IGR0cyxcbiAgICAgIHR5cGU6ICd2aWRlbydcbiAgICB9XG4gIH1cblxuICBnZXQgdmlkZW9NZXRhICgpIHtcbiAgICByZXR1cm4gdGhpcy5fY29udGV4dC5nZXRJbnN0YW5jZSgnVFJBQ0tTJykudmlkZW9UcmFjay5tZXRhXG4gIH1cbiAgZ2V0IGF1ZGlvTWV0YSAoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2NvbnRleHQuZ2V0SW5zdGFuY2UoJ1RSQUNLUycpLmF1ZGlvVHJhY2subWV0YVxuICB9XG5cbiAgc3RhdGljIGdldFNpbGVudEZyYW1lIChjaGFubmVsQ291bnQpIHtcbiAgICBpZiAoY2hhbm5lbENvdW50ID09PSAxKSB7XG4gICAgICByZXR1cm4gbmV3IFVpbnQ4QXJyYXkoWzB4MDAsIDB4YzgsIDB4MDAsIDB4ODAsIDB4MjMsIDB4ODBdKVxuICAgIH0gZWxzZSBpZiAoY2hhbm5lbENvdW50ID09PSAyKSB7XG4gICAgICByZXR1cm4gbmV3IFVpbnQ4QXJyYXkoWzB4MjEsIDB4MDAsIDB4NDksIDB4OTAsIDB4MDIsIDB4MTksIDB4MDAsIDB4MjMsIDB4ODBdKVxuICAgIH0gZWxzZSBpZiAoY2hhbm5lbENvdW50ID09PSAzKSB7XG4gICAgICByZXR1cm4gbmV3IFVpbnQ4QXJyYXkoWzB4MDAsIDB4YzgsIDB4MDAsIDB4ODAsIDB4MjAsIDB4ODQsIDB4MDEsIDB4MjYsIDB4NDAsIDB4MDgsIDB4NjQsIDB4MDAsIDB4OGVdKVxuICAgIH0gZWxzZSBpZiAoY2hhbm5lbENvdW50ID09PSA0KSB7XG4gICAgICByZXR1cm4gbmV3IFVpbnQ4QXJyYXkoWzB4MDAsIDB4YzgsIDB4MDAsIDB4ODAsIDB4MjAsIDB4ODQsIDB4MDEsIDB4MjYsIDB4NDAsIDB4MDgsIDB4NjQsIDB4MDAsIDB4ODAsIDB4MmMsIDB4ODAsIDB4MDgsIDB4MDIsIDB4MzhdKVxuICAgIH0gZWxzZSBpZiAoY2hhbm5lbENvdW50ID09PSA1KSB7XG4gICAgICByZXR1cm4gbmV3IFVpbnQ4QXJyYXkoWzB4MDAsIDB4YzgsIDB4MDAsIDB4ODAsIDB4MjAsIDB4ODQsIDB4MDEsIDB4MjYsIDB4NDAsIDB4MDgsIDB4NjQsIDB4MDAsIDB4ODIsIDB4MzAsIDB4MDQsIDB4OTksIDB4MDAsIDB4MjEsIDB4OTAsIDB4MDIsIDB4MzhdKVxuICAgIH0gZWxzZSBpZiAoY2hhbm5lbENvdW50ID09PSA2KSB7XG4gICAgICByZXR1cm4gbmV3IFVpbnQ4QXJyYXkoWzB4MDAsIDB4YzgsIDB4MDAsIDB4ODAsIDB4MjAsIDB4ODQsIDB4MDEsIDB4MjYsIDB4NDAsIDB4MDgsIDB4NjQsIDB4MDAsIDB4ODIsIDB4MzAsIDB4MDQsIDB4OTksIDB4MDAsIDB4MjEsIDB4OTAsIDB4MDIsIDB4MDAsIDB4YjIsIDB4MDAsIDB4MjAsIDB4MDgsIDB4ZTBdKVxuICAgIH1cbiAgICByZXR1cm4gbnVsbFxuICB9XG59XG4iLCJtb2R1bGUuZXhwb3J0cyA9IHtcbiAgQ29udGV4dDogcmVxdWlyZSgnLi9zcmMvY29udGV4dCcpLmRlZmF1bHQsXG5cbiAgLy8gTW9kdWxlcyBmcm9tIGNvbnN0YW50c1xuICBFVkVOVFM6IHJlcXVpcmUoJy4vc3JjL2NvbnN0YW50cy9ldmVudHMnKS5kZWZhdWx0LFxuICBXT1JLRVJfQ09NTUFORFM6IHJlcXVpcmUoJy4vc3JjL2NvbnN0YW50cy93b3JrZXItY29tbWFuZHMnKS5kZWZhdWx0LFxuXG4gIC8vIE1vZHVsZXMgZnJvbSBlbnZcbiAgc25pZmZlcjogcmVxdWlyZSgnLi9zcmMvZW52L3NuaWZmZXInKS5kZWZhdWx0LFxuICBpc0xlOiByZXF1aXJlKCcuL3NyYy9lbnYvaXNsZScpLmRlZmF1bHQsXG4gIFVURjg6IHJlcXVpcmUoJy4vc3JjL2Vudi91dGY4JykuZGVmYXVsdCxcblxuICAvLyBNb2RlbHNcbiAgTWVkaWFJbmZvOiByZXF1aXJlKCcuL3NyYy9tb2RlbHMvbWVkaWEtaW5mbycpLmRlZmF1bHQsXG4gIE1lZGlhU2FtcGxlOiByZXF1aXJlKCcuL3NyYy9tb2RlbHMvbWVkaWEtc2FtcGxlJykuZGVmYXVsdCxcbiAgTWVkaWFTZWdtZW50OiByZXF1aXJlKCcuL3NyYy9tb2RlbHMvbWVkaWEtc2VnbWVudCcpLmRlZmF1bHQsXG4gIE1lZGlhU2VnbWVudExpc3Q6IHJlcXVpcmUoJy4vc3JjL21vZGVscy9tZWRpYS1zZWdtZW50LWxpc3QnKS5kZWZhdWx0LFxuICBBdWRpb1RyYWNrTWV0YTogcmVxdWlyZSgnLi9zcmMvbW9kZWxzL3RyYWNrLW1ldGEnKS5BdWRpb1RyYWNrTWV0YSxcbiAgVmlkZW9UcmFja01ldGE6IHJlcXVpcmUoJy4vc3JjL21vZGVscy90cmFjay1tZXRhJykuVmlkZW9UcmFja01ldGEsXG4gIEF1ZGlvVHJhY2tTYW1wbGU6IHJlcXVpcmUoJy4vc3JjL21vZGVscy90cmFjay1zYW1wbGUnKS5BdWRpb1RyYWNrU2FtcGxlLFxuICBWaWRlb1RyYWNrU2FtcGxlOiByZXF1aXJlKCcuL3NyYy9tb2RlbHMvdHJhY2stc2FtcGxlJykuVmlkZW9UcmFja1NhbXBsZSxcblxuICAvLyBNb2R1bGVzIGZyb20gbXNlXG4gIE1zZTogcmVxdWlyZSgnLi9zcmMvbXNlL2luZGV4JykuZGVmYXVsdCxcblxuICAvLyBNb2R1bGVzIGZyb20gd3JpdGVcbiAgU3RyZWFtOiByZXF1aXJlKCcuL3NyYy93cml0ZS9zdHJlYW0nKS5kZWZhdWx0LFxuICBCdWZmZXI6IHJlcXVpcmUoJy4vc3JjL3dyaXRlL2J1ZmZlcicpLmRlZmF1bHQsXG5cbiAgTW9iaWxlVmlkZW86IHJlcXVpcmUoJy4vc3JjL21vYmlsZS9tb2JpbGUtdmlkZW8nKVxufTtcbiIsIlwidXNlIHN0cmljdFwiO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuXG5leHBvcnRzLmRlZmF1bHQgPSBmdW5jdGlvbiAoUmVzdWx0Q29uc3RydWN0b3IpIHtcbiAgdmFyIHRvdGFsTGVuZ3RoID0gMDtcblxuICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJyYXlzID0gQXJyYXkoX2xlbiA+IDEgPyBfbGVuIC0gMSA6IDApLCBfa2V5ID0gMTsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgIGFycmF5c1tfa2V5IC0gMV0gPSBhcmd1bWVudHNbX2tleV07XG4gIH1cblxuICB2YXIgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiA9IHRydWU7XG4gIHZhciBfZGlkSXRlcmF0b3JFcnJvciA9IGZhbHNlO1xuICB2YXIgX2l0ZXJhdG9yRXJyb3IgPSB1bmRlZmluZWQ7XG5cbiAgdHJ5IHtcbiAgICBmb3IgKHZhciBfaXRlcmF0b3IgPSBhcnJheXNbU3ltYm9sLml0ZXJhdG9yXSgpLCBfc3RlcDsgIShfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uID0gKF9zdGVwID0gX2l0ZXJhdG9yLm5leHQoKSkuZG9uZSk7IF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24gPSB0cnVlKSB7XG4gICAgICB2YXIgYXJyID0gX3N0ZXAudmFsdWU7XG5cbiAgICAgIHRvdGFsTGVuZ3RoICs9IGFyci5sZW5ndGg7XG4gICAgfVxuICB9IGNhdGNoIChlcnIpIHtcbiAgICBfZGlkSXRlcmF0b3JFcnJvciA9IHRydWU7XG4gICAgX2l0ZXJhdG9yRXJyb3IgPSBlcnI7XG4gIH0gZmluYWxseSB7XG4gICAgdHJ5IHtcbiAgICAgIGlmICghX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiAmJiBfaXRlcmF0b3IucmV0dXJuKSB7XG4gICAgICAgIF9pdGVyYXRvci5yZXR1cm4oKTtcbiAgICAgIH1cbiAgICB9IGZpbmFsbHkge1xuICAgICAgaWYgKF9kaWRJdGVyYXRvckVycm9yKSB7XG4gICAgICAgIHRocm93IF9pdGVyYXRvckVycm9yO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHZhciByZXN1bHQgPSBuZXcgUmVzdWx0Q29uc3RydWN0b3IodG90YWxMZW5ndGgpO1xuICB2YXIgb2Zmc2V0ID0gMDtcbiAgdmFyIF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24yID0gdHJ1ZTtcbiAgdmFyIF9kaWRJdGVyYXRvckVycm9yMiA9IGZhbHNlO1xuICB2YXIgX2l0ZXJhdG9yRXJyb3IyID0gdW5kZWZpbmVkO1xuXG4gIHRyeSB7XG4gICAgZm9yICh2YXIgX2l0ZXJhdG9yMiA9IGFycmF5c1tTeW1ib2wuaXRlcmF0b3JdKCksIF9zdGVwMjsgIShfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uMiA9IChfc3RlcDIgPSBfaXRlcmF0b3IyLm5leHQoKSkuZG9uZSk7IF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24yID0gdHJ1ZSkge1xuICAgICAgdmFyIF9hcnIgPSBfc3RlcDIudmFsdWU7XG5cbiAgICAgIHJlc3VsdC5zZXQoX2Fyciwgb2Zmc2V0KTtcbiAgICAgIG9mZnNldCArPSBfYXJyLmxlbmd0aDtcbiAgICB9XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIF9kaWRJdGVyYXRvckVycm9yMiA9IHRydWU7XG4gICAgX2l0ZXJhdG9yRXJyb3IyID0gZXJyO1xuICB9IGZpbmFsbHkge1xuICAgIHRyeSB7XG4gICAgICBpZiAoIV9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24yICYmIF9pdGVyYXRvcjIucmV0dXJuKSB7XG4gICAgICAgIF9pdGVyYXRvcjIucmV0dXJuKCk7XG4gICAgICB9XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIGlmIChfZGlkSXRlcmF0b3JFcnJvcjIpIHtcbiAgICAgICAgdGhyb3cgX2l0ZXJhdG9yRXJyb3IyO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiByZXN1bHQ7XG59OyIsIid1c2Ugc3RyaWN0JztcblxudmFyIF9jb25jYXQgPSByZXF1aXJlKCcuL2NvbmNhdCcpO1xuXG52YXIgX2NvbmNhdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jb25jYXQpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5tb2R1bGUuZXhwb3J0cyA9IF9jb25jYXQyLmRlZmF1bHQ7IiwiZnVuY3Rpb24gd2VicGFja0Jvb3RzdHJhcEZ1bmMgKG1vZHVsZXMpIHtcbi8qKioqKiovICAvLyBUaGUgbW9kdWxlIGNhY2hlXG4vKioqKioqLyAgdmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuLyoqKioqKi8gIC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4vKioqKioqLyAgZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4vKioqKioqLyAgICAvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbi8qKioqKiovICAgIGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKVxuLyoqKioqKi8gICAgICByZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcblxuLyoqKioqKi8gICAgLy8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbi8qKioqKiovICAgIHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbi8qKioqKiovICAgICAgaTogbW9kdWxlSWQsXG4vKioqKioqLyAgICAgIGw6IGZhbHNlLFxuLyoqKioqKi8gICAgICBleHBvcnRzOiB7fVxuLyoqKioqKi8gICAgfTtcblxuLyoqKioqKi8gICAgLy8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4vKioqKioqLyAgICBtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuLyoqKioqKi8gICAgLy8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuLyoqKioqKi8gICAgbW9kdWxlLmwgPSB0cnVlO1xuXG4vKioqKioqLyAgICAvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuLyoqKioqKi8gICAgcmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuLyoqKioqKi8gIH1cblxuLyoqKioqKi8gIC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4vKioqKioqLyAgX193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuLyoqKioqKi8gIC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4vKioqKioqLyAgX193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuLyoqKioqKi8gIC8vIGlkZW50aXR5IGZ1bmN0aW9uIGZvciBjYWxsaW5nIGhhcm1vbnkgaW1wb3J0cyB3aXRoIHRoZSBjb3JyZWN0IGNvbnRleHRcbi8qKioqKiovICBfX3dlYnBhY2tfcmVxdWlyZV9fLmkgPSBmdW5jdGlvbih2YWx1ZSkgeyByZXR1cm4gdmFsdWU7IH07XG5cbi8qKioqKiovICAvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbi8qKioqKiovICBfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbi8qKioqKiovICAgIGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbi8qKioqKiovICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHtcbi8qKioqKiovICAgICAgICBjb25maWd1cmFibGU6IGZhbHNlLFxuLyoqKioqKi8gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4vKioqKioqLyAgICAgICAgZ2V0OiBnZXR0ZXJcbi8qKioqKiovICAgICAgfSk7XG4vKioqKioqLyAgICB9XG4vKioqKioqLyAgfTtcblxuLyoqKioqKi8gIC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbi8qKioqKiovICBfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4vKioqKioqLyAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuLyoqKioqKi8gIH07XG5cbi8qKioqKiovICAvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuLyoqKioqKi8gIF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuLyoqKioqKi8gICAgdmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4vKioqKioqLyAgICAgIGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4vKioqKioqLyAgICAgIGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4vKioqKioqLyAgICBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4vKioqKioqLyAgICByZXR1cm4gZ2V0dGVyO1xuLyoqKioqKi8gIH07XG5cbi8qKioqKiovICAvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbi8qKioqKiovICBfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbi8qKioqKiovICAvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuLyoqKioqKi8gIF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiL1wiO1xuXG4vKioqKioqLyAgLy8gb24gZXJyb3IgZnVuY3Rpb24gZm9yIGFzeW5jIGxvYWRpbmdcbi8qKioqKiovICBfX3dlYnBhY2tfcmVxdWlyZV9fLm9lID0gZnVuY3Rpb24oZXJyKSB7IGNvbnNvbGUuZXJyb3IoZXJyKTsgdGhyb3cgZXJyOyB9O1xuXG4gIHZhciBmID0gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSBFTlRSWV9NT0RVTEUpXG4gIHJldHVybiBmLmRlZmF1bHQgfHwgZiAvLyB0cnkgdG8gY2FsbCBkZWZhdWx0IGlmIGRlZmluZWQgdG8gYWxzbyBzdXBwb3J0IGJhYmVsIGVzbW9kdWxlIGV4cG9ydHNcbn1cblxudmFyIG1vZHVsZU5hbWVSZXFFeHAgPSAnW1xcXFwufFxcXFwtfFxcXFwrfFxcXFx3fFxcL3xAXSsnXG52YXIgZGVwZW5kZW5jeVJlZ0V4cCA9ICdcXFxcKFxcXFxzKihcXC9cXFxcKi4qP1xcXFwqXFwvKT9cXFxccyouKj8oJyArIG1vZHVsZU5hbWVSZXFFeHAgKyAnKS4qP1xcXFwpJyAvLyBhZGRpdGlvbmFsIGNoYXJzIHdoZW4gb3V0cHV0LnBhdGhpbmZvIGlzIHRydWVcblxuLy8gaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL2EvMjU5MzY2MS8xMzA0NDJcbmZ1bmN0aW9uIHF1b3RlUmVnRXhwIChzdHIpIHtcbiAgcmV0dXJuIChzdHIgKyAnJykucmVwbGFjZSgvWy4/KiteJFtcXF1cXFxcKCl7fXwtXS9nLCAnXFxcXCQmJylcbn1cblxuZnVuY3Rpb24gaXNOdW1lcmljKG4pIHtcbiAgcmV0dXJuICFpc05hTigxICogbik7IC8vIDEgKiBuIGNvbnZlcnRzIGludGVnZXJzLCBpbnRlZ2VycyBhcyBzdHJpbmcgKFwiMTIzXCIpLCAxZTMgYW5kIFwiMWUzXCIgdG8gaW50ZWdlcnMgYW5kIHN0cmluZ3MgdG8gTmFOXG59XG5cbmZ1bmN0aW9uIGdldE1vZHVsZURlcGVuZGVuY2llcyAoc291cmNlcywgbW9kdWxlLCBxdWV1ZU5hbWUpIHtcbiAgdmFyIHJldHZhbCA9IHt9XG4gIHJldHZhbFtxdWV1ZU5hbWVdID0gW11cblxuICB2YXIgZm5TdHJpbmcgPSBtb2R1bGUudG9TdHJpbmcoKVxuICB2YXIgd3JhcHBlclNpZ25hdHVyZSA9IGZuU3RyaW5nLm1hdGNoKC9eZnVuY3Rpb25cXHM/XFx3KlxcKFxcdyssXFxzKlxcdyssXFxzKihcXHcrKVxcKS8pXG4gIGlmICghd3JhcHBlclNpZ25hdHVyZSkgcmV0dXJuIHJldHZhbFxuICB2YXIgd2VicGFja1JlcXVpcmVOYW1lID0gd3JhcHBlclNpZ25hdHVyZVsxXVxuXG4gIC8vIG1haW4gYnVuZGxlIGRlcHNcbiAgdmFyIHJlID0gbmV3IFJlZ0V4cCgnKFxcXFxcXFxcbnxcXFxcVyknICsgcXVvdGVSZWdFeHAod2VicGFja1JlcXVpcmVOYW1lKSArIGRlcGVuZGVuY3lSZWdFeHAsICdnJylcbiAgdmFyIG1hdGNoXG4gIHdoaWxlICgobWF0Y2ggPSByZS5leGVjKGZuU3RyaW5nKSkpIHtcbiAgICBpZiAobWF0Y2hbM10gPT09ICdkbGwtcmVmZXJlbmNlJykgY29udGludWVcbiAgICByZXR2YWxbcXVldWVOYW1lXS5wdXNoKG1hdGNoWzNdKVxuICB9XG5cbiAgLy8gZGxsIGRlcHNcbiAgcmUgPSBuZXcgUmVnRXhwKCdcXFxcKCcgKyBxdW90ZVJlZ0V4cCh3ZWJwYWNrUmVxdWlyZU5hbWUpICsgJ1xcXFwoXCIoZGxsLXJlZmVyZW5jZVxcXFxzKCcgKyBtb2R1bGVOYW1lUmVxRXhwICsgJykpXCJcXFxcKVxcXFwpJyArIGRlcGVuZGVuY3lSZWdFeHAsICdnJylcbiAgd2hpbGUgKChtYXRjaCA9IHJlLmV4ZWMoZm5TdHJpbmcpKSkge1xuICAgIGlmICghc291cmNlc1ttYXRjaFsyXV0pIHtcbiAgICAgIHJldHZhbFtxdWV1ZU5hbWVdLnB1c2gobWF0Y2hbMV0pXG4gICAgICBzb3VyY2VzW21hdGNoWzJdXSA9IF9fd2VicGFja19yZXF1aXJlX18obWF0Y2hbMV0pLm1cbiAgICB9XG4gICAgcmV0dmFsW21hdGNoWzJdXSA9IHJldHZhbFttYXRjaFsyXV0gfHwgW11cbiAgICByZXR2YWxbbWF0Y2hbMl1dLnB1c2gobWF0Y2hbNF0pXG4gIH1cblxuICAvLyBjb252ZXJ0IDFlMyBiYWNrIHRvIDEwMDAgLSB0aGlzIGNhbiBiZSBpbXBvcnRhbnQgYWZ0ZXIgdWdsaWZ5LWpzIGNvbnZlcnRlZCAxMDAwIHRvIDFlM1xuICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKHJldHZhbCk7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7IGkrKykge1xuICAgIGZvciAodmFyIGogPSAwOyBqIDwgcmV0dmFsW2tleXNbaV1dLmxlbmd0aDsgaisrKSB7XG4gICAgICBpZiAoaXNOdW1lcmljKHJldHZhbFtrZXlzW2ldXVtqXSkpIHtcbiAgICAgICAgcmV0dmFsW2tleXNbaV1dW2pdID0gMSAqIHJldHZhbFtrZXlzW2ldXVtqXTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gcmV0dmFsXG59XG5cbmZ1bmN0aW9uIGhhc1ZhbHVlc0luUXVldWVzIChxdWV1ZXMpIHtcbiAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhxdWV1ZXMpXG4gIHJldHVybiBrZXlzLnJlZHVjZShmdW5jdGlvbiAoaGFzVmFsdWVzLCBrZXkpIHtcbiAgICByZXR1cm4gaGFzVmFsdWVzIHx8IHF1ZXVlc1trZXldLmxlbmd0aCA+IDBcbiAgfSwgZmFsc2UpXG59XG5cbmZ1bmN0aW9uIGdldFJlcXVpcmVkTW9kdWxlcyAoc291cmNlcywgbW9kdWxlSWQpIHtcbiAgdmFyIG1vZHVsZXNRdWV1ZSA9IHtcbiAgICBtYWluOiBbbW9kdWxlSWRdXG4gIH1cbiAgdmFyIHJlcXVpcmVkTW9kdWxlcyA9IHtcbiAgICBtYWluOiBbXVxuICB9XG4gIHZhciBzZWVuTW9kdWxlcyA9IHtcbiAgICBtYWluOiB7fVxuICB9XG5cbiAgd2hpbGUgKGhhc1ZhbHVlc0luUXVldWVzKG1vZHVsZXNRdWV1ZSkpIHtcbiAgICB2YXIgcXVldWVzID0gT2JqZWN0LmtleXMobW9kdWxlc1F1ZXVlKVxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcXVldWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgcXVldWVOYW1lID0gcXVldWVzW2ldXG4gICAgICB2YXIgcXVldWUgPSBtb2R1bGVzUXVldWVbcXVldWVOYW1lXVxuICAgICAgdmFyIG1vZHVsZVRvQ2hlY2sgPSBxdWV1ZS5wb3AoKVxuICAgICAgc2Vlbk1vZHVsZXNbcXVldWVOYW1lXSA9IHNlZW5Nb2R1bGVzW3F1ZXVlTmFtZV0gfHwge31cbiAgICAgIGlmIChzZWVuTW9kdWxlc1txdWV1ZU5hbWVdW21vZHVsZVRvQ2hlY2tdIHx8ICFzb3VyY2VzW3F1ZXVlTmFtZV1bbW9kdWxlVG9DaGVja10pIGNvbnRpbnVlXG4gICAgICBzZWVuTW9kdWxlc1txdWV1ZU5hbWVdW21vZHVsZVRvQ2hlY2tdID0gdHJ1ZVxuICAgICAgcmVxdWlyZWRNb2R1bGVzW3F1ZXVlTmFtZV0gPSByZXF1aXJlZE1vZHVsZXNbcXVldWVOYW1lXSB8fCBbXVxuICAgICAgcmVxdWlyZWRNb2R1bGVzW3F1ZXVlTmFtZV0ucHVzaChtb2R1bGVUb0NoZWNrKVxuICAgICAgdmFyIG5ld01vZHVsZXMgPSBnZXRNb2R1bGVEZXBlbmRlbmNpZXMoc291cmNlcywgc291cmNlc1txdWV1ZU5hbWVdW21vZHVsZVRvQ2hlY2tdLCBxdWV1ZU5hbWUpXG4gICAgICB2YXIgbmV3TW9kdWxlc0tleXMgPSBPYmplY3Qua2V5cyhuZXdNb2R1bGVzKVxuICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBuZXdNb2R1bGVzS2V5cy5sZW5ndGg7IGorKykge1xuICAgICAgICBtb2R1bGVzUXVldWVbbmV3TW9kdWxlc0tleXNbal1dID0gbW9kdWxlc1F1ZXVlW25ld01vZHVsZXNLZXlzW2pdXSB8fCBbXVxuICAgICAgICBtb2R1bGVzUXVldWVbbmV3TW9kdWxlc0tleXNbal1dID0gbW9kdWxlc1F1ZXVlW25ld01vZHVsZXNLZXlzW2pdXS5jb25jYXQobmV3TW9kdWxlc1tuZXdNb2R1bGVzS2V5c1tqXV0pXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHJlcXVpcmVkTW9kdWxlc1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChtb2R1bGVJZCwgb3B0aW9ucykge1xuICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fVxuICB2YXIgc291cmNlcyA9IHtcbiAgICBtYWluOiBfX3dlYnBhY2tfbW9kdWxlc19fXG4gIH1cblxuICB2YXIgcmVxdWlyZWRNb2R1bGVzID0gb3B0aW9ucy5hbGwgPyB7IG1haW46IE9iamVjdC5rZXlzKHNvdXJjZXMubWFpbikgfSA6IGdldFJlcXVpcmVkTW9kdWxlcyhzb3VyY2VzLCBtb2R1bGVJZClcblxuICB2YXIgc3JjID0gJydcblxuICBPYmplY3Qua2V5cyhyZXF1aXJlZE1vZHVsZXMpLmZpbHRlcihmdW5jdGlvbiAobSkgeyByZXR1cm4gbSAhPT0gJ21haW4nIH0pLmZvckVhY2goZnVuY3Rpb24gKG1vZHVsZSkge1xuICAgIHZhciBlbnRyeU1vZHVsZSA9IDBcbiAgICB3aGlsZSAocmVxdWlyZWRNb2R1bGVzW21vZHVsZV1bZW50cnlNb2R1bGVdKSB7XG4gICAgICBlbnRyeU1vZHVsZSsrXG4gICAgfVxuICAgIHJlcXVpcmVkTW9kdWxlc1ttb2R1bGVdLnB1c2goZW50cnlNb2R1bGUpXG4gICAgc291cmNlc1ttb2R1bGVdW2VudHJ5TW9kdWxlXSA9ICcoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7IG1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXzsgfSknXG4gICAgc3JjID0gc3JjICsgJ3ZhciAnICsgbW9kdWxlICsgJyA9ICgnICsgd2VicGFja0Jvb3RzdHJhcEZ1bmMudG9TdHJpbmcoKS5yZXBsYWNlKCdFTlRSWV9NT0RVTEUnLCBKU09OLnN0cmluZ2lmeShlbnRyeU1vZHVsZSkpICsgJykoeycgKyByZXF1aXJlZE1vZHVsZXNbbW9kdWxlXS5tYXAoZnVuY3Rpb24gKGlkKSB7IHJldHVybiAnJyArIEpTT04uc3RyaW5naWZ5KGlkKSArICc6ICcgKyBzb3VyY2VzW21vZHVsZV1baWRdLnRvU3RyaW5nKCkgfSkuam9pbignLCcpICsgJ30pO1xcbidcbiAgfSlcblxuICBzcmMgPSBzcmMgKyAnbmV3ICgoJyArIHdlYnBhY2tCb290c3RyYXBGdW5jLnRvU3RyaW5nKCkucmVwbGFjZSgnRU5UUllfTU9EVUxFJywgSlNPTi5zdHJpbmdpZnkobW9kdWxlSWQpKSArICcpKHsnICsgcmVxdWlyZWRNb2R1bGVzLm1haW4ubWFwKGZ1bmN0aW9uIChpZCkgeyByZXR1cm4gJycgKyBKU09OLnN0cmluZ2lmeShpZCkgKyAnOiAnICsgc291cmNlcy5tYWluW2lkXS50b1N0cmluZygpIH0pLmpvaW4oJywnKSArICd9KSkoc2VsZik7J1xuXG4gIHZhciBibG9iID0gbmV3IHdpbmRvdy5CbG9iKFtzcmNdLCB7IHR5cGU6ICd0ZXh0L2phdmFzY3JpcHQnIH0pXG4gIGlmIChvcHRpb25zLmJhcmUpIHsgcmV0dXJuIGJsb2IgfVxuXG4gIHZhciBVUkwgPSB3aW5kb3cuVVJMIHx8IHdpbmRvdy53ZWJraXRVUkwgfHwgd2luZG93Lm1velVSTCB8fCB3aW5kb3cubXNVUkxcblxuICB2YXIgd29ya2VyVXJsID0gVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKVxuICB2YXIgd29ya2VyID0gbmV3IHdpbmRvdy5Xb3JrZXIod29ya2VyVXJsKVxuICB3b3JrZXIub2JqZWN0VVJMID0gd29ya2VyVXJsXG5cbiAgcmV0dXJuIHdvcmtlclxufVxuIiwiY29uc3QgTE9BREVSX0VWRU5UUyA9IHtcbiAgTEFERVJfU1RBUlQ6ICdMT0FERVJfU1RBUlQnLFxuICBMT0FERVJfREFUQUxPQURFRDogJ0xPQURFUl9EQVRBTE9BREVEJyxcbiAgTE9BREVSX0NPTVBMRVRFOiAnTE9BREVSX0NPTVBMRVRFJyxcbiAgTE9BREVSX0VSUk9SOiAnTE9BREVSX0VSUk9SJ1xufVxuXG5jb25zdCBERU1VWF9FVkVOVFMgPSB7XG4gIERFTVVYX1NUQVJUOiAnREVNVVhfU1RBUlQnLFxuICBERU1VWF9DT01QTEVURTogJ0RFTVVYX0NPTVBMRVRFJyxcbiAgREVNVVhfRVJST1I6ICdERU1VWF9FUlJPUicsXG4gIE1FVEFEQVRBX1BBUlNFRDogJ01FVEFEQVRBX1BBUlNFRCcsXG4gIFZJREVPX01FVEFEQVRBX0NIQU5HRTogJ1ZJREVPX01FVEFEQVRBX0NIQU5HRScsXG4gIEFVRElPX01FVEFEQVRBX0NIQU5HRTogJ0FVRElPX01FVEFEQVRBX0NIQU5HRScsXG4gIE1FRElBX0lORk86ICdNRURJQV9JTkZPJ1xufVxuXG5jb25zdCBSRU1VWF9FVkVOVFMgPSB7XG4gIFJFTVVYX01FVEFEQVRBOiAnUkVNVVhfTUVUQURBVEEnLFxuICBSRU1VWF9NRURJQTogJ1JFTVVYX01FRElBJyxcbiAgTUVESUFfU0VHTUVOVDogJ01FRElBX1NFR01FTlQnLFxuICBSRU1VWF9FUlJPUjogJ1JFTVVYX0VSUk9SJyxcbiAgSU5JVF9TRUdNRU5UOiAnSU5JVF9TRUdNRU5UJ1xufVxuXG5jb25zdCBNU0VfRVZFTlRTID0ge1xuICBTT1VSQ0VfVVBEQVRFX0VORDogJ1NPVVJDRV9VUERBVEVfRU5EJ1xufVxuXG4vLyBobHPkuJPmnIlldmVudHNcbmNvbnN0IEhMU19FVkVOVFMgPSB7XG4gIFJFVFJZX1RJTUVfRVhDRUVERUQ6ICdSRVRSWV9USU1FX0VYQ0VFREVEJ1xufVxuXG5jb25zdCBBTExFVkVOVFMgPSBPYmplY3QuYXNzaWduKHt9LCBMT0FERVJfRVZFTlRTLCBERU1VWF9FVkVOVFMsIFJFTVVYX0VWRU5UUywgTVNFX0VWRU5UUywgSExTX0VWRU5UUylcblxuY29uc3QgRmx2QWxsb3dlZEV2ZW50cyA9IFtdXG5jb25zdCBIbHNBbGxvd2VkRXZlbnRzID0gW11cblxuZm9yIChsZXQga2V5IGluIEFMTEVWRU5UUykge1xuICBpZiAoQUxMRVZFTlRTLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICBGbHZBbGxvd2VkRXZlbnRzLnB1c2goQUxMRVZFTlRTW2tleV0pXG4gIH1cbn1cblxuZm9yIChsZXQga2V5IGluIEFMTEVWRU5UUykge1xuICBpZiAoQUxMRVZFTlRTLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICBIbHNBbGxvd2VkRXZlbnRzLnB1c2goQUxMRVZFTlRTW2tleV0pXG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQge1xuICBBTExFVkVOVFMsXG4gIEhMU19FVkVOVFMsXG4gIFJFTVVYX0VWRU5UUyxcbiAgREVNVVhfRVZFTlRTLFxuICBNU0VfRVZFTlRTLFxuICBMT0FERVJfRVZFTlRTLFxuICBGbHZBbGxvd2VkRXZlbnRzLFxuICBIbHNBbGxvd2VkRXZlbnRzXG59O1xuIiwiZXhwb3J0IGNvbnN0IENPTlRFWFRfQ09NT01BTkRTID0ge1xuICBPTjogJ29uJyxcbiAgT05DRTogJ29uY2UnLFxuICBPRkY6ICdvZmYnLFxuICBFTUlUOiAnZW1pdCcsXG4gIERFU1RST1k6ICdkZXN0cm95J1xufVxuIiwiaW1wb3J0IE1lZGlhSW5mbyBmcm9tICcuL21vZGVscy9tZWRpYS1pbmZvJ1xuaW1wb3J0IHsgRXZlbnRFbWl0dGVyIH0gZnJvbSAnZXZlbnRzJ1xuXG5jb25zdCBESVJFQ1RfRU1JVF9GTEFHID0gJ19fVE9fXydcblxuY2xhc3MgQ29udGV4dCB7XG4gIGNvbnN0cnVjdG9yIChhbGxvd2VkRXZlbnRzID0gW10pIHtcbiAgICB0aGlzLl9lbWl0dGVyID0gbmV3IEV2ZW50RW1pdHRlcigpXG4gICAgdGhpcy5faW5zdGFuY2VNYXAgPSB7fSAvLyDmiYDmnInnmoTop6PnoIHmtYHnqIvlrp7kvotcbiAgICB0aGlzLl9jbHNNYXAgPSB7fSAvLyDmnoTpgKDlh73mlbDnmoRtYXBcbiAgICB0aGlzLl9pbml0ZWQgPSBmYWxzZVxuICAgIHRoaXMubWVkaWFJbmZvID0gbmV3IE1lZGlhSW5mbygpXG4gICAgdGhpcy5hbGxvd2VkRXZlbnRzID0gYWxsb3dlZEV2ZW50c1xuICAgIHRoaXMuX2hvb2tzID0ge30gLy8g5rOo5YaM5Zyo5LqL5Lu25YmNL+WQjueahOmSqeWtkO+8jOS+i+WmgiBiZWZvcmUoJ0RFTVVYX0NPTVBMRVRFJylcbiAgfVxuXG4gIC8qKlxuICAgKiDku47kuIrkuIvmlofkuK3ojrflj5bop6PnoIHmtYHnqIvlrp7kvovvvIzlpoLmnpzmsqHmnInlrp7kvovvvIzmnoTpgKDkuIDkuKpcbiAgICogQHBhcmFtIHRhZ1xuICAgKiBAcGFyYW0gYXJnc1xuICAgKiBAcmV0dXJucyB7Kn1cbiAgICovXG4gIGdldEluc3RhbmNlICh0YWcpIHtcbiAgICBpZiAodGhpcy5faW5zdGFuY2VNYXBbdGFnXSkge1xuICAgICAgcmV0dXJuIHRoaXMuX2luc3RhbmNlTWFwW3RhZ11cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gdGhyb3cgbmV3IEVycm9yKGAke3RhZ33lrp7kvovlsJrmnKrliJ3lp4vljJZgKVxuICAgICAgcmV0dXJuIG51bGxcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICog5Yid5aeL5YyW5YW35L2T5a6e5L6LXG4gICAqIEBwYXJhbSB0YWdcbiAgICogQHBhcmFtIGFyZ3NcbiAgICovXG4gIGluaXRJbnN0YW5jZSAodGFnLCAuLi5hcmdzKSB7XG4gICAgaWYgKHRoaXMuX2Nsc01hcFt0YWddKSB7XG4gICAgICBjb25zdCBuZXdJbnN0YW5jZSA9IG5ldyB0aGlzLl9jbHNNYXBbdGFnXSguLi5hcmdzKVxuICAgICAgdGhpcy5faW5zdGFuY2VNYXBbdGFnXSA9IG5ld0luc3RhbmNlXG4gICAgICBpZiAobmV3SW5zdGFuY2UuaW5pdCkge1xuICAgICAgICBuZXdJbnN0YW5jZS5pbml0KCkgLy8gVE9ETzogbGlmZWNpcmNsZVxuICAgICAgfVxuICAgICAgcmV0dXJuIG5ld0luc3RhbmNlXG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgJHt0YWd95pyq5ZyoY29udGV4dOS4reazqOWGjGApXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIOmBv+WFjeWkp+mHj+eahGluaXRJbnN0YW5jZeiwg+eUqO+8jOWIneWni+WMluaJgOacieeahOe7hOS7tlxuICAgKiBAcGFyYW0gY29uZmlnXG4gICAqL1xuICBpbml0IChjb25maWcpIHtcbiAgICBpZiAodGhpcy5faW5pdGVkKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgZm9yIChsZXQgdGFnIGluIHRoaXMuX2Nsc01hcCkge1xuICAgICAgLy8gaWYgbm90IGluaXRlZCwgaW5pdCBhbiBpbnN0YW5jZVxuICAgICAgaWYgKHRoaXMuX2Nsc01hcC5oYXNPd25Qcm9wZXJ0eSh0YWcpICYmICF0aGlzLl9pbnN0YW5jZU1hcFt0YWddKSB7XG4gICAgICAgIHRoaXMuaW5pdEluc3RhbmNlKHRhZywgY29uZmlnKVxuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLl9pbml0ZWQgPSB0cnVlXG4gIH1cblxuICAvKipcbiAgICog5rOo5YaM5LiA5Liq5LiK5LiL5paH5rWB56iL77yM5o+Q5L6b5a6J5YWo55qE5LqL5Lu25Y+R6YCB5py65Yi2XG4gICAqIEBwYXJhbSB0YWdcbiAgICogQHBhcmFtIGNsc1xuICAgKi9cbiAgcmVnaXN0cnkgKHRhZywgY2xzKSB7XG4gICAgY29uc3QgZW1pdHRlciA9IHRoaXMuX2VtaXR0ZXJcbiAgICBjb25zdCBjaGVja01lc3NhZ2VOYW1lID0gdGhpcy5faXNNZXNzYWdlTmFtZVZhbGlkLmJpbmQodGhpcylcbiAgICBjb25zdCBzZWxmID0gdGhpc1xuICAgIGNvbnN0IGVuaGFuY2VkID0gY2xhc3MgZXh0ZW5kcyBjbHMge1xuICAgICAgY29uc3RydWN0b3IgKC4uLmFyZ3MpIHtcbiAgICAgICAgc3VwZXIoLi4uYXJncylcbiAgICAgICAgdGhpcy5saXN0ZW5lcnMgPSB7fVxuICAgICAgICB0aGlzLm9uY2VMaXN0ZW5lcnMgPSB7fVxuICAgICAgICB0aGlzLlRBRyA9IHRhZ1xuICAgICAgICB0aGlzLl9jb250ZXh0ID0gc2VsZlxuICAgICAgfVxuXG4gICAgICBvbiAobWVzc2FnZU5hbWUsIGNhbGxiYWNrKSB7XG4gICAgICAgIGNoZWNrTWVzc2FnZU5hbWUobWVzc2FnZU5hbWUpXG5cbiAgICAgICAgaWYgKHRoaXMubGlzdGVuZXJzW21lc3NhZ2VOYW1lXSkge1xuICAgICAgICAgIHRoaXMubGlzdGVuZXJzW21lc3NhZ2VOYW1lXS5wdXNoKGNhbGxiYWNrKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMubGlzdGVuZXJzW21lc3NhZ2VOYW1lXSA9IFtjYWxsYmFja11cbiAgICAgICAgfVxuXG4gICAgICAgIGVtaXR0ZXIub24oYCR7bWVzc2FnZU5hbWV9JHtESVJFQ1RfRU1JVF9GTEFHfSR7dGFnfWAsIGNhbGxiYWNrKSAvLyDlu7rnq4vlrprlkJHpgJrkv6Hnm5HlkKxcbiAgICAgICAgcmV0dXJuIGVtaXR0ZXIub24obWVzc2FnZU5hbWUsIGNhbGxiYWNrKVxuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIOWcqOafkOS4quS6i+S7tuinpuWPkeWJjeaJp+ihjFxuICAgICAgICogQHBhcmFtIG1lc3NhZ2VOYW1lXG4gICAgICAgKiBAcGFyYW0gY2FsbGJhY2tcbiAgICAgICAqL1xuICAgICAgYmVmb3JlIChtZXNzYWdlTmFtZSwgY2FsbGJhY2spIHtcbiAgICAgICAgY2hlY2tNZXNzYWdlTmFtZShtZXNzYWdlTmFtZSlcbiAgICAgICAgaWYgKHNlbGYuX2hvb2tzW21lc3NhZ2VOYW1lXSkge1xuICAgICAgICAgIHNlbGYuX2hvb2tzW21lc3NhZ2VOYW1lXS5wdXNoKGNhbGxiYWNrKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHNlbGYuX2hvb2tzW21lc3NhZ2VOYW1lXSA9IFtjYWxsYmFja11cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBvbmNlIChtZXNzYWdlTmFtZSwgY2FsbGJhY2spIHtcbiAgICAgICAgY2hlY2tNZXNzYWdlTmFtZShtZXNzYWdlTmFtZSlcblxuICAgICAgICBpZiAodGhpcy5vbmNlTGlzdGVuZXJzW21lc3NhZ2VOYW1lXSkge1xuICAgICAgICAgIHRoaXMub25jZUxpc3RlbmVyc1ttZXNzYWdlTmFtZV0ucHVzaChjYWxsYmFjaylcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLm9uY2VMaXN0ZW5lcnNbbWVzc2FnZU5hbWVdID0gW2NhbGxiYWNrXVxuICAgICAgICB9XG5cbiAgICAgICAgZW1pdHRlci5vbmNlKGAke21lc3NhZ2VOYW1lfSR7RElSRUNUX0VNSVRfRkxBR30ke3RhZ31gLCBjYWxsYmFjaylcbiAgICAgICAgcmV0dXJuIGVtaXR0ZXIub25jZShtZXNzYWdlTmFtZSwgY2FsbGJhY2spXG4gICAgICB9XG5cbiAgICAgIGVtaXQgKG1lc3NhZ2VOYW1lLCAuLi5hcmdzKSB7XG4gICAgICAgIGNoZWNrTWVzc2FnZU5hbWUobWVzc2FnZU5hbWUpXG5cbiAgICAgICAgY29uc3QgYmVmb3JlTGlzdCA9IHNlbGYuX2hvb2tzW21lc3NhZ2VOYW1lXVxuICAgICAgICBpZiAoYmVmb3JlTGlzdCkge1xuICAgICAgICAgIGZvciAobGV0IGkgPSAwLCBsZW4gPSBiZWZvcmVMaXN0Lmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICBjb25zdCBjYWxsYmFjayA9IGJlZm9yZUxpc3RbaV1cbiAgICAgICAgICAgIGNhbGxiYWNrKClcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGVtaXR0ZXIuZW1pdChtZXNzYWdlTmFtZSwgLi4uYXJncylcbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiDlrprlkJHlj5HpgIHnu5nmn5DkuKrnu4Tku7bljZXkvovnmoTmtojmga9cbiAgICAgICAqIEBwYXJhbSBtZXNzYWdlTmFtZVxuICAgICAgICogQHBhcmFtIGFyZ3NcbiAgICAgICAqL1xuICAgICAgZW1pdFRvICh0YWcsIG1lc3NhZ2VOYW1lLCAuLi5hcmdzKSB7XG4gICAgICAgIGNoZWNrTWVzc2FnZU5hbWUobWVzc2FnZU5hbWUpXG5cbiAgICAgICAgcmV0dXJuIGVtaXR0ZXIuZW1pdChgJHttZXNzYWdlTmFtZX0ke0RJUkVDVF9FTUlUX0ZMQUd9JHt0YWd9YCwgLi4uYXJncylcbiAgICAgIH1cblxuICAgICAgb2ZmIChtZXNzYWdlTmFtZSwgY2FsbGJhY2spIHtcbiAgICAgICAgY2hlY2tNZXNzYWdlTmFtZShtZXNzYWdlTmFtZSlcbiAgICAgICAgcmV0dXJuIGVtaXR0ZXIub2ZmKG1lc3NhZ2VOYW1lLCBjYWxsYmFjaylcbiAgICAgIH1cblxuICAgICAgcmVtb3ZlTGlzdGVuZXJzICgpIHtcbiAgICAgICAgY29uc3QgaGFzT3duID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5iaW5kKHRoaXMubGlzdGVuZXJzKVxuXG4gICAgICAgIGZvciAobGV0IG1lc3NhZ2VOYW1lIGluIHRoaXMubGlzdGVuZXJzKSB7XG4gICAgICAgICAgaWYgKGhhc093bihtZXNzYWdlTmFtZSkpIHtcbiAgICAgICAgICAgIGNvbnN0IGNhbGxiYWNrcyA9IHRoaXMubGlzdGVuZXJzW21lc3NhZ2VOYW1lXSB8fCBbXVxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjYWxsYmFja3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgY29uc3QgY2FsbGJhY2sgPSBjYWxsYmFja3NbaV1cbiAgICAgICAgICAgICAgZW1pdHRlci5vZmYobWVzc2FnZU5hbWUsIGNhbGxiYWNrKVxuICAgICAgICAgICAgICBlbWl0dGVyLm9mZihgJHttZXNzYWdlTmFtZX0ke0RJUkVDVF9FTUlUX0ZMQUd9JHt0YWd9YCwgY2FsbGJhY2spXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgZm9yIChsZXQgbWVzc2FnZU5hbWUgaW4gdGhpcy5vbmNlTGlzdGVuZXJzKSB7XG4gICAgICAgICAgaWYgKGhhc093bihtZXNzYWdlTmFtZSkpIHtcbiAgICAgICAgICAgIGNvbnN0IGNhbGxiYWNrcyA9IHRoaXMub25jZUxpc3RlbmVyc1ttZXNzYWdlTmFtZV0gfHwgW11cbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY2FsbGJhY2tzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgIGNvbnN0IGNhbGxiYWNrID0gY2FsbGJhY2tzW2ldXG4gICAgICAgICAgICAgIGVtaXR0ZXIub2ZmKG1lc3NhZ2VOYW1lLCBjYWxsYmFjaylcbiAgICAgICAgICAgICAgZW1pdHRlci5vZmYoYCR7bWVzc2FnZU5hbWV9JHtESVJFQ1RfRU1JVF9GTEFHfSR7dGFnfWAsIGNhbGxiYWNrKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIOWcqOe7hOS7tumUgOavgeaXtu+8jOm7mOiupOWwhuWug+azqOWGjOeahOS6i+S7tuWFqOmDqOWNuOi9ve+8jOehruS/neS4jeS8mumAoOaIkOWGheWtmOazhOa8j1xuICAgICAgICovXG4gICAgICBkZXN0cm95ICgpIHtcbiAgICAgICAgLy8gc3RlcDEgdW5saXN0ZW4gZXZlbnRzXG4gICAgICAgIHRoaXMucmVtb3ZlTGlzdGVuZXJzKClcblxuICAgICAgICAvLyBzdGVwMiByZWxlYXNlIGZyb20gY29udGV4dFxuICAgICAgICBkZWxldGUgc2VsZi5faW5zdGFuY2VNYXBbdGFnXVxuICAgICAgICBpZiAoc3VwZXIuZGVzdHJveSkge1xuICAgICAgICAgIHN1cGVyLmRlc3Ryb3koKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMuX2Nsc01hcFt0YWddID0gZW5oYW5jZWRcblxuICAgIC8qKlxuICAgICAqIGdldCBpbnN0YW5jZSBpbW1lZGlhdGVseVxuICAgICAqIGUuZyBjb25zdCBpbnN0YW5jZSA9IGNvbnRleHQucmVnaXN0cnkodGFnLCBDbHMpKGNvbmZpZylcbiAgICAgKiAqL1xuICAgIHJldHVybiAoLi4uYXJncykgPT4ge1xuICAgICAgcmV0dXJuIHRoaXMuaW5pdEluc3RhbmNlKHRhZywgLi4uYXJncylcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICog5a+55a2Y5Zyo55qE5a6e5L6L6L+b6KGMXG4gICAqL1xuICBkZXN0cm95SW5zdGFuY2VzICgpIHtcbiAgICBPYmplY3Qua2V5cyh0aGlzLl9pbnN0YW5jZU1hcCkuZm9yRWFjaCgodGFnKSA9PiB7XG4gICAgICBpZiAodGhpcy5faW5zdGFuY2VNYXBbdGFnXS5kZXN0cm95KSB7XG4gICAgICAgIHRoaXMuX2luc3RhbmNlTWFwW3RhZ10uZGVzdHJveSgpXG4gICAgICB9XG4gICAgfSlcbiAgfVxuXG4gIC8qKlxuICAgKiDnvJbop6PnoIHmtYHnqIvml6DpnIDlhbPms6jkuovku7bnmoTop6Pnu5FcbiAgICovXG4gIGRlc3Ryb3kgKCkge1xuICAgIHRoaXMuX2VtaXR0ZXIgPSBudWxsXG4gICAgdGhpcy5hbGxvd2VkRXZlbnRzID0gW11cbiAgICB0aGlzLl9jbHNNYXAgPSBudWxsXG4gICAgdGhpcy5fY29udGV4dCA9IG51bGxcbiAgICB0aGlzLmRlc3Ryb3lJbnN0YW5jZXMoKVxuICB9XG5cbiAgLyoqXG4gICAqIOWvueS/oemBk+i/m+ihjOaUtuaLolxuICAgKiBAcGFyYW0gbWVzc2FnZU5hbWVcbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9pc01lc3NhZ2VOYW1lVmFsaWQgKG1lc3NhZ2VOYW1lKSB7XG4gICAgaWYgKCF0aGlzLmFsbG93ZWRFdmVudHMuaW5kZXhPZihtZXNzYWdlTmFtZSkgPCAwKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYHVucmVnaXN0ZXJlZCBtZXNzYWdlIG5hbWU6ICR7bWVzc2FnZU5hbWV9YClcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgQ29udGV4dFxuIiwiY29uc3QgbGUgPSAoZnVuY3Rpb24gKCkge1xuICBjb25zdCBidWYgPSBuZXcgQXJyYXlCdWZmZXIoMik7XG4gIChuZXcgRGF0YVZpZXcoYnVmKSkuc2V0SW50MTYoMCwgMjU2LCB0cnVlKSAvLyBsaXR0bGUtZW5kaWFuIHdyaXRlXG4gIHJldHVybiAobmV3IEludDE2QXJyYXkoYnVmKSlbMF0gPT09IDI1NiAvLyBwbGF0Zm9ybS1zcGVjIHJlYWQsIGlmIGVxdWFsIHRoZW4gTEVcbn0pKClcblxuZXhwb3J0IGRlZmF1bHQgbGVcbiIsImNvbnN0IGxlID0gKGZ1bmN0aW9uICgpIHtcbiAgY29uc3QgYnVmID0gbmV3IEFycmF5QnVmZmVyKDIpO1xuICAobmV3IERhdGFWaWV3KGJ1ZikpLnNldEludDE2KDAsIDI1NiwgdHJ1ZSkgLy8gbGl0dGxlLWVuZGlhbiB3cml0ZVxuICByZXR1cm4gKG5ldyBJbnQxNkFycmF5KGJ1ZikpWzBdID09PSAyNTYgLy8gcGxhdGZvcm0tc3BlYyByZWFkLCBpZiBlcXVhbCB0aGVuIExFXG59KSgpXG5cbmNvbnN0IHNuaWZmZXIgPSB7XG4gIGdldCBkZXZpY2UgKCkge1xuICAgIGxldCByID0gc25pZmZlci5vcztcbiAgICByZXR1cm4gci5pc1BjID8gJ3BjJyA6IHIuaXNUYWJsZXQgPyAndGFibGV0JyA6ICdtb2JpbGUnO1xuICB9LFxuICBnZXQgYnJvd3NlciAoKSB7XG4gICAgbGV0IHVhID0gbmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpO1xuICAgIGxldCByZWcgPSB7XG4gICAgICBpZTogL3J2OihbXFxkLl0rKVxcKSBsaWtlIGdlY2tvLyxcbiAgICAgIGZpcmZveDogL2ZpcmVmb3hcXC8oW1xcZC5dKykvLFxuICAgICAgY2hyb21lOiAvY2hyb21lXFwvKFtcXGQuXSspLyxcbiAgICAgIG9wZXJhOiAvb3BlcmEuKFtcXGQuXSspLyxcbiAgICAgIHNhZmFyaTogL3ZlcnNpb25cXC8oW1xcZC5dKykuKnNhZmFyaS9cbiAgICB9O1xuICAgIHJldHVybiBbXS5jb25jYXQoT2JqZWN0LmtleXMocmVnKS5maWx0ZXIoa2V5ID0+IHJlZ1trZXldLnRlc3QodWEpKSlbMF07XG4gIH0sXG4gIGdldCBvcyAoKSB7XG4gICAgbGV0IHVhID0gbmF2aWdhdG9yLnVzZXJBZ2VudFxuICAgIGxldCBpc1dpbmRvd3NQaG9uZSA9IC8oPzpXaW5kb3dzIFBob25lKS8udGVzdCh1YSlcbiAgICBsZXQgaXNTeW1iaWFuID0gLyg/OlN5bWJpYW5PUykvLnRlc3QodWEpIHx8IGlzV2luZG93c1Bob25lO1xuICAgIGxldCBpc0FuZHJvaWQgPSAvKD86QW5kcm9pZCkvLnRlc3QodWEpO1xuICAgIGxldCBpc0ZpcmVGb3ggPSAvKD86RmlyZWZveCkvLnRlc3QodWEpO1xuICAgIGxldCBpc1RhYmxldCA9IC8oPzppUGFkfFBsYXlCb29rKS8udGVzdCh1YSkgfHwgKGlzQW5kcm9pZCAmJiAhLyg/Ok1vYmlsZSkvLnRlc3QodWEpKSB8fCAoaXNGaXJlRm94ICYmIC8oPzpUYWJsZXQpLy50ZXN0KHVhKSk7XG4gICAgbGV0IGlzUGhvbmUgPSAvKD86aVBob25lKS8udGVzdCh1YSkgJiYgIWlzVGFibGV0O1xuICAgIGxldCBpc1BjID0gIWlzUGhvbmUgJiYgIWlzQW5kcm9pZCAmJiAhaXNTeW1iaWFuO1xuICAgIHJldHVybiB7XG4gICAgICBpc1RhYmxldCxcbiAgICAgIGlzUGhvbmUsXG4gICAgICBpc0FuZHJvaWQsXG4gICAgICBpc1BjLFxuICAgICAgaXNTeW1iaWFuLFxuICAgICAgaXNXaW5kb3dzUGhvbmUsXG4gICAgICBpc0ZpcmVGb3hcbiAgICB9O1xuICB9LFxuXG4gIGdldCBpc0xlICgpIHtcbiAgICByZXR1cm4gbGVcbiAgfVxufTtcblxuZXhwb3J0IGRlZmF1bHQgc25pZmZlcjtcbiIsImNsYXNzIFVURjgge1xuICBzdGF0aWMgZGVjb2RlICh1aW50OGFycmF5KSB7XG4gICAgY29uc3Qgb3V0ID0gW107XG4gICAgY29uc3QgaW5wdXQgPSB1aW50OGFycmF5O1xuICAgIGxldCBpID0gMDtcbiAgICBjb25zdCBsZW5ndGggPSB1aW50OGFycmF5Lmxlbmd0aDtcblxuICAgIHdoaWxlIChpIDwgbGVuZ3RoKSB7XG4gICAgICBpZiAoaW5wdXRbaV0gPCAweDgwKSB7XG4gICAgICAgIG91dC5wdXNoKFN0cmluZy5mcm9tQ2hhckNvZGUoaW5wdXRbaV0pKTtcbiAgICAgICAgKytpO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH0gZWxzZSBpZiAoaW5wdXRbaV0gPCAweEMwKSB7XG4gICAgICAgIC8vIGZhbGx0aHJvdWdoXG4gICAgICB9IGVsc2UgaWYgKGlucHV0W2ldIDwgMHhFMCkge1xuICAgICAgICBpZiAoVVRGOC5fY2hlY2tDb250aW51YXRpb24oaW5wdXQsIGksIDEpKSB7XG4gICAgICAgICAgY29uc3QgdWNzNCA9IChpbnB1dFtpXSAmIDB4MUYpIDw8IDYgfCAoaW5wdXRbaSArIDFdICYgMHgzRik7XG4gICAgICAgICAgaWYgKHVjczQgPj0gMHg4MCkge1xuICAgICAgICAgICAgb3V0LnB1c2goU3RyaW5nLmZyb21DaGFyQ29kZSh1Y3M0ICYgMHhGRkZGKSk7XG4gICAgICAgICAgICBpICs9IDI7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoaW5wdXRbaV0gPCAweEYwKSB7XG4gICAgICAgIGlmIChVVEY4Ll9jaGVja0NvbnRpbnVhdGlvbihpbnB1dCwgaSwgMikpIHtcbiAgICAgICAgICBjb25zdCB1Y3M0ID0gKGlucHV0W2ldICYgMHhGKSA8PCAxMiB8IChpbnB1dFtpICsgMV0gJiAweDNGKSA8PCA2IHwgaW5wdXRbaSArIDJdICYgMHgzRjtcbiAgICAgICAgICBpZiAodWNzNCA+PSAweDgwMCAmJiAodWNzNCAmIDB4RjgwMCkgIT09IDB4RDgwMCkge1xuICAgICAgICAgICAgb3V0LnB1c2goU3RyaW5nLmZyb21DaGFyQ29kZSh1Y3M0ICYgMHhGRkZGKSk7XG4gICAgICAgICAgICBpICs9IDM7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoaW5wdXRbaV0gPCAweEY4KSB7XG4gICAgICAgIGlmIChVVEY4Ll9jaGVja0NvbnRpbnVhdGlvbihpbnB1dCwgaSwgMykpIHtcbiAgICAgICAgICBsZXQgdWNzNCA9IChpbnB1dFtpXSAmIDB4NykgPDwgMTggfCAoaW5wdXRbaSArIDFdICYgMHgzRikgPDwgMTIgfFxuICAgICAgICAgICAgICAgICAgICAoaW5wdXRbaSArIDJdICYgMHgzRikgPDwgNiB8IChpbnB1dFtpICsgM10gJiAweDNGKTtcbiAgICAgICAgICBpZiAodWNzNCA+IDB4MTAwMDAgJiYgdWNzNCA8IDB4MTEwMDAwKSB7XG4gICAgICAgICAgICB1Y3M0IC09IDB4MTAwMDA7XG4gICAgICAgICAgICBvdXQucHVzaChTdHJpbmcuZnJvbUNoYXJDb2RlKCh1Y3M0ID4+PiAxMCkgfCAweEQ4MDApKTtcbiAgICAgICAgICAgIG91dC5wdXNoKFN0cmluZy5mcm9tQ2hhckNvZGUoKHVjczQgJiAweDNGRikgfCAweERDMDApKTtcbiAgICAgICAgICAgIGkgKz0gNDtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgb3V0LnB1c2goU3RyaW5nLmZyb21DaGFyQ29kZSgweEZGRkQpKTtcbiAgICAgICsraTtcbiAgICB9XG5cbiAgICByZXR1cm4gb3V0LmpvaW4oJycpO1xuICB9XG5cbiAgc3RhdGljIF9jaGVja0NvbnRpbnVhdGlvbiAodWludDhhcnJheSwgc3RhcnQsIGNoZWNrTGVuZ3RoKSB7XG4gICAgbGV0IGFycmF5ID0gdWludDhhcnJheTtcbiAgICBpZiAoc3RhcnQgKyBjaGVja0xlbmd0aCA8IGFycmF5Lmxlbmd0aCkge1xuICAgICAgd2hpbGUgKGNoZWNrTGVuZ3RoLS0pIHtcbiAgICAgICAgaWYgKChhcnJheVsrK3N0YXJ0XSAmIDB4QzApICE9PSAweDgwKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBVVEY4O1xuIiwiY2xhc3MgQXVkaW9DdHgge1xuICBjb25zdHJ1Y3RvciAoY29uZmlnKSB7XG4gICAgdGhpcy5jb25maWcgPSBPYmplY3QuYXNzaWduKHt9LCBjb25maWcpO1xuICAgIGxldCBBdWRpb0NvbnRleHQgPSAgd2luZG93LkF1ZGlvQ29udGV4dCB8fCB3aW5kb3cud2Via2l0QXVkaW9Db250ZXh0O1xuICAgIHRoaXMuY29udGV4dCA9IG5ldyBBdWRpb0NvbnRleHQoKTtcbiAgICB0aGlzLmdhaW5Ob2RlID0gdGhpcy5jb250ZXh0LmNyZWF0ZUdhaW4oKTtcbiAgICB0aGlzLmdhaW5Ob2RlLmNvbm5lY3QodGhpcy5jb250ZXh0LmRlc3RpbmF0aW9uKTtcbiAgICB0aGlzLm1ldGEgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5zYW1wbGVzID0gW107XG4gICAgdGhpcy5wcmVsb2FkVGltZSA9IHRoaXMuY29uZmlnLnByZWxvYWRUaW1lIHx8IDM7XG4gICAgdGhpcy5kdXJhdGlvbiA9IDA7XG5cbiAgICB0aGlzLl9jdXJyZW50QnVmZmVyID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuX25leHRCdWZmZXIgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5fbGFzdHB0cyA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLl9wcmVEZWNvZGUgPSBbXTtcbiAgICB0aGlzLl9jdXJyZW50VGltZSA9IDA7XG4gICAgdGhpcy5fZGVjb2RpbmcgPSBmYWxzZTtcbiAgICBcbiAgICAvLyDorrDlvZXlpJbpg6jkvKDovpPnmoTnirbmgIFcbiAgICB0aGlzLl9wbGF5ZWQgPSBmYWxzZTtcbiAgfVxuXG4gIGdldCBjdXJyZW50VGltZSgpIHtcbiAgICByZXR1cm4gdGhpcy5fY3VycmVudFRpbWU7XG4gIH1cblxuICBkZWNvZGVBdWRpbyAoYXVkaW9UcmFjaykge1xuICAgIGxldCB7c2FtcGxlc30gPSBhdWRpb1RyYWNrO1xuICAgIGxldCBkYXRhID0gc2FtcGxlcztcbiAgICBhdWRpb1RyYWNrLnNhbXBsZXMgPSBbXTtcbiAgICB0aGlzLnNldEF1ZGlvRGF0YShkYXRhKTsgXG4gIH1cbiAgc2V0QXVkaW9EYXRhIChkYXRhKSB7XG4gICAgZm9yKGxldCBpID0gMDtpIDwgZGF0YS5sZW5ndGg7IGkrKykge1xuICAgICAgZGF0YVtpXS5wdHMgPSAoZGF0YVtpXS5wdHMgPT09IHVuZGVmaW5lZCkgPyBkYXRhW2ldLmR0cyA6IGRhdGFbaV0ucHRzO1xuICAgICAgdGhpcy5fcHJlRGVjb2RlLnB1c2goZGF0YVtpXSk7XG4gICAgfVxuICAgIGlmKHRoaXMuX3ByZURlY29kZS5sZW5ndGggPiAwKSB7XG4gICAgICBpZih0aGlzLl9sYXN0cHRzID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdGhpcy5fbGFzdHB0cyA9IHRoaXMuX3ByZURlY29kZVswXS5wdHM7XG4gICAgICB9XG4gICAgICBpZigodGhpcy5fcHJlRGVjb2RlW3RoaXMuX3ByZURlY29kZS5sZW5ndGggLSAxXS5wdHMgLSB0aGlzLl9sYXN0cHRzKSAvIDEwMDAgPiB0aGlzLnByZWxvYWRUaW1lKSB7XG4gICAgICAgIHRoaXMuZGVjb2RlQUFDKCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZGVjb2RlQUFDKCkge1xuICAgIGlmKHRoaXMuX2RlY29kaW5nKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuX2RlY29kaW5nID0gdHJ1ZTtcbiAgICBsZXQgZGF0YSA9IHRoaXMuX3ByZURlY29kZTtcbiAgICBsZXQgc2FtcGxlcyA9IFtdO1xuICAgIGxldCBfdGhpcyA9IHRoaXM7XG4gICAgbGV0IHNhbXBsZSA9IGRhdGEuc2hpZnQoKTtcbiAgICB3aGlsZShzYW1wbGUpIHtcbiAgICAgIGxldCBzYW1wbGVEYXRhID0gQXVkaW9DdHguZ2V0QUFDRGF0YSh0aGlzLm1ldGEsIHNhbXBsZSlcbiAgICAgIHNhbXBsZXMucHVzaChzYW1wbGVEYXRhKTtcbiAgICAgIHRoaXMuX2xhc3RwdHMgPSBzYW1wbGUucHRzO1xuICAgICAgc2FtcGxlID0gZGF0YS5zaGlmdCgpXG4gICAgfVxuICAgIGxldCBidWZmZXIgPSBBdWRpb0N0eC5jb21iaWxlRGF0YShzYW1wbGVzKTtcbiAgICB0cnkge1xuICAgICAgdGhpcy5jb250ZXh0LmRlY29kZUF1ZGlvRGF0YShidWZmZXIuYnVmZmVyLCBmdW5jdGlvbihidWZmZXIpIHtcbiAgICAgICAgbGV0IGF1ZGlvU291cmNlID0gX3RoaXMuY29udGV4dC5jcmVhdGVCdWZmZXJTb3VyY2UoKTtcbiAgICAgICAgYXVkaW9Tb3VyY2UuYnVmZmVyID0gYnVmZmVyO1xuICAgICAgICBhdWRpb1NvdXJjZS5vbmVuZGVkID0gX3RoaXMub25Tb3VyY2VFbmRlZC5iaW5kKF90aGlzKTtcbiAgICAgICAgX3RoaXMuc2FtcGxlcy5wdXNoKHtcbiAgICAgICAgICB0aW1lOiBfdGhpcy5kdXJhdGlvbixcbiAgICAgICAgICBkdXJhdGlvbjogYnVmZmVyLmR1cmF0aW9uLFxuICAgICAgICAgIGRhdGE6IGF1ZGlvU291cmNlXG4gICAgICAgIH0pXG5cbiAgICAgICAgX3RoaXMuZHVyYXRpb24gKz0gYnVmZmVyLmR1cmF0aW9uO1xuXG4gICAgICAgIGlmKCFfdGhpcy5fY3VycmVudEJ1ZmZlcikge1xuICAgICAgICAgIF90aGlzLl9jdXJyZW50QnVmZmVyID0gX3RoaXMuZ2V0VGltZUJ1ZmZlcihfdGhpcy5jdXJyZW50VGltZSk7XG5cbiAgICAgICAgICBpZihfdGhpcy5fcGxheWVkKSB7XG4gICAgICAgICAgICBfdGhpcy5wbGF5KCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYoIV90aGlzLl9uZXh0QnVmZmVyICYmIF90aGlzLl9jdXJyZW50QnVmZmVyKSB7XG4gICAgICAgICAgX3RoaXMuX25leHRCdWZmZXIgPSBfdGhpcy5nZXRUaW1lQnVmZmVyKF90aGlzLmN1cnJlbnRUaW1lICsgX3RoaXMuX2N1cnJlbnRCdWZmZXIuZHVyYXRpb24pO1xuICAgICAgICB9XG4gICAgICAgIF90aGlzLl9kZWNvZGluZyA9IGZhbHNlO1xuXG4gICAgICAgIGlmKChfdGhpcy5fcHJlRGVjb2RlLmxlbmd0aCA+IDAgJiYgX3RoaXMuX3ByZURlY29kZVtfdGhpcy5fcHJlRGVjb2RlLmxlbmd0aCAtIDFdLnB0cyAtIF90aGlzLl9sYXN0cHRzKSAvIDEwMDAgPj0gX3RoaXMucHJlbG9hZFRpbWUpIHtcbiAgICAgICAgICBfdGhpcy5kZWNvZGVBQUMoKTtcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICB9IGNhdGNoKGVycikge1xuICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xuICAgIH1cbiAgfVxuXG4gIG9uU291cmNlRW5kZWQoKSB7XG4gICAgaWYoIXRoaXMuX25leHRCdWZmZXIgfHwgIXRoaXMuX3BsYXllZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBsZXQgYXVkaW9Tb3VyY2UgPSB0aGlzLl9uZXh0QnVmZmVyLmRhdGE7XG4gICAgYXVkaW9Tb3VyY2Uuc3RhcnQoKTtcbiAgICBhdWRpb1NvdXJjZS5jb25uZWN0KHRoaXMuZ2Fpbk5vZGUpO1xuICAgIHRoaXMuX2N1cnJlbnRCdWZmZXIgPSB0aGlzLl9uZXh0QnVmZmVyO1xuICAgIHRoaXMuX2N1cnJlbnRUaW1lID0gdGhpcy5fY3VycmVudEJ1ZmZlci50aW1lO1xuICAgIHRoaXMuX25leHRCdWZmZXIgPSB0aGlzLmdldFRpbWVCdWZmZXIodGhpcy5jdXJyZW50VGltZSk7XG4gICAgaWYodGhpcy5fY3VycmVudEJ1ZmZlcikge1xuICAgICAgdGhpcy5fbmV4dEJ1ZmZlciA9IHRoaXMuZ2V0VGltZUJ1ZmZlcih0aGlzLmN1cnJlbnRUaW1lICsgdGhpcy5fY3VycmVudEJ1ZmZlci5kdXJhdGlvbik7XG4gICAgfVxuICB9XG5cbiAgcGxheSgpIHtcbiAgICB0aGlzLl9wbGF5ZWQgPSB0cnVlO1xuICAgIGlmKCF0aGlzLl9jdXJyZW50QnVmZmVyKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGxldCBhdWRpb1NvdXJjZSA9IHRoaXMuX2N1cnJlbnRCdWZmZXIuZGF0YTtcbiAgICBhdWRpb1NvdXJjZS5jb25uZWN0KHRoaXMuZ2Fpbk5vZGUpO1xuICAgIGF1ZGlvU291cmNlLnN0YXJ0KCk7XG4gIH1cblxuICBnZXRUaW1lQnVmZmVyKHRpbWUpIHtcbiAgICBsZXQgcmV0O1xuICAgIGZvcihsZXQgaSA9IDA7IGkgPCB0aGlzLnNhbXBsZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGxldCBzYW1wbGUgPSB0aGlzLnNhbXBsZXNbaV1cbiAgICAgIGlmKHNhbXBsZS50aW1lIDw9IHRpbWUgJiYgKHNhbXBsZS50aW1lICsgc2FtcGxlLmR1cmF0aW9uKSA+IHRpbWUpIHtcbiAgICAgICAgcmV0ID0gc2FtcGxlO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJldDtcbiAgfVxuXG4gIHNldEF1ZGlvTWV0YURhdGEobWV0YSkge1xuICAgIHRoaXMubWV0YSA9IG1ldGE7XG4gIH1cblxuICBzdGF0aWMgZ2V0QUFDRGF0YShtZXRhLCBzYW1wbGUpIHtcbiAgICBsZXQgYnVmZmVyID0gbmV3IFVpbnQ4QXJyYXkoc2FtcGxlLmRhdGEuYnl0ZUxlbmd0aCArIDcpO1xuICAgIGxldCBhZHRzID0gQXVkaW9DdHguZ2V0QWR0cyhtZXRhLCBzYW1wbGUuZGF0YSk7XG4gICAgYnVmZmVyLnNldChhZHRzKTtcbiAgICBidWZmZXIuc2V0KHNhbXBsZS5kYXRhLCA3KTtcbiAgICByZXR1cm4gYnVmZmVyO1xuICB9XG5cbiAgc3RhdGljIGNvbWJpbGVEYXRhKHNhbXBsZXMpIHtcbiAgICAvLyBnZXQgbGVuZ3RoXG4gICAgbGV0IGxlbmd0aCA9IDA7XG4gICAgZm9yKGxldCBpID0gMCxrID0gc2FtcGxlcy5sZW5ndGg7IGkgPCBrOyBpKyspIHtcbiAgICAgIGxlbmd0aCArPSBzYW1wbGVzW2ldLmJ5dGVMZW5ndGg7XG4gICAgfVxuICAgIFxuICAgIGxldCByZXQgPSBuZXcgVWludDhBcnJheShsZW5ndGgpO1xuICAgIGxldCBvZmZzZXQgPSAwO1xuICAgIC8vIGNvbWJpbGUgZGF0YTtcbiAgICBmb3IobGV0IGkgPSAwLGsgPSBzYW1wbGVzLmxlbmd0aDsgaSA8IGs7IGkrKykge1xuICAgICAgcmV0LnNldChzYW1wbGVzW2ldLCBvZmZzZXQpO1xuICAgICAgb2Zmc2V0ICs9IHNhbXBsZXNbaV0uYnl0ZUxlbmd0aDtcbiAgICB9XG4gICAgcmV0dXJuIHJldDtcbiAgfVxuXG4gIHN0YXRpYyBnZXRBZHRzKG1ldGEsIGRhdGEpIHtcbiAgICBsZXQgYWR0cyA9IG5ldyBVaW50OEFycmF5KDcpO1xuICAgIFxuICAgIC8vIOiuvue9ruWQjOatpeS9jSAweGZmZiAxMmJpdCBcbiAgICBhZHRzWzBdID0gMHhmZjtcbiAgICBhZHRzWzFdID0gMHhmMDtcblxuICAgIC8vIE9iamVjdCBkYXRhICjmsqHku4DkuYjkurrnlKhNUEVHLTLkuobvvIxITFPlkoxGTFbkuZ/lhajmmK9NUEVHLTTvvIzov5nph4znm7TmjqUwKSAgMWJpdCBcbiAgICAvLyBMZXZlbCBhbHdheXMgMDAgMmJpdCBcbiAgICAvLyBDUkMgYWx3YXlzIDEgMWJpdCBcbiAgICBhZHRzWzFdID0gYWR0c1sxXSB8IDB4MDE7XG5cbiAgICAvLyBwcm9maWxlIDJiaXRcbiAgICBhZHRzWzJdID0gMHhjMCAmICgobWV0YS5vYmplY3RUeXBlLTEpIDw8IDYpO1xuXG4gICAgLy9zYW1wbGVGcmVxdWVuY3lJbmRleFxuICAgIGFkdHNbMl0gPSBhZHRzWzJdIHwgKDB4M2MgJiAobWV0YS5zYW1wbGVSYXRlSW5kZXggPDwgMikpXG5cbiAgICAvL3ByaXZhdGUgYml0IDAgMWJpdFxuICAgIC8vIGNoYW5lbCBjb25maWd1cmF0aW9uIDNiaXRcbiAgICBhZHRzWzJdID0gYWR0c1syXSB8ICgweDAxICYgbWV0YS5jaGFubmVsQ291bnQgPj4gMik7XG4gICAgYWR0c1szXSA9IDB4YzAgJiAobWV0YS5jaGFubmVsQ291bnQgPDwgNik7XG5cbiAgICAvLyBvcmlnaW5hbF9jb3B5OiAwIDFiaXRcbiAgICAvLyBob21lOiAwIDFiaXRcblxuICAgIC8vIGFkdHNfdmFyaWFibGVfaGVhZGVyKClcbiAgICAvLyBjb3B5cmlnaHRlZF9pZF9iaXQgMCAxYml0XG4gICAgLy8gY29weXJpZ2h0ZWRfaWRfc3RhcnQgMCAxYml0XG5cbiAgICAvLyBhYWNfZnJhbWVfbGVuZ3RoIDEzYml0O1xuICAgIGxldCBhYWNmcmFtZWxlbmd0aCA9IGRhdGEuYnl0ZUxlbmd0aCArIDc7XG5cbiAgICBhZHRzWzNdID0gYWR0c1szXSB8ICgweDAzICYgYWFjZnJhbWVsZW5ndGggPj4gMTEpO1xuICAgIGFkdHNbNF0gPSAweGZmICYgKGFhY2ZyYW1lbGVuZ3RoID4+IDMpO1xuICAgIGFkdHNbNV0gPSAweGUwICYgKGFhY2ZyYW1lbGVuZ3RoIDw8IDUpO1xuXG4gICAgLy8gYWR0c19idWZmZXJfZnVsbG5lc3MgMHg3ZmYgMTFiaXRcbiAgICBhZHRzWzVdID0gYWR0c1s1XSB8IDB4MWZcbiAgICBhZHRzWzZdID0gMHhmYztcblxuICAgIC8vIG51bWJlcl9vZl9yYXdfZGF0YV9ibG9ja3NfaW5fZnJhbWUgMCAyYml0O1xuICAgIHJldHVybiBhZHRzO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEF1ZGlvQ3R4O1xuIiwiaW1wb3J0IFZpZGVvQ3R4IGZyb20gJy4vdmlkZW8tY29udGV4dCc7XG5pbXBvcnQgQXVkaW9DdHggZnJvbSAnLi9hdWRpby1jb250ZXh0JztcbmltcG9ydCB7IGdldFRpY2tlciB9IGZyb20gJy4vdGlja2VyJztcblxuLyoqXG4gKiDpn7PnlLvlkIzmraXosIPlkozlmahcbiAqL1xuY2xhc3MgQVZSZWNvbmNpbGVyIHtcbiAgY29uc3RydWN0b3IgKHByb3BzKSB7XG4gICAgdGhpcy5hQ3R4ID0gcHJvcHMuYUN0eDtcbiAgICB0aGlzLnZDdHggPSBwcm9wcy52Q3R4O1xuICAgIHRoaXMuX3RpY2tlciA9IG51bGw7XG4gICAgdGhpcy5vblRpY2sgPSB0aGlzLm9uVGljay5iaW5kKHRoaXMpXG5cbiAgICB0aGlzLmluaXQoKVxuICB9XG5cbiAgaW5pdCAoKSB7XG4gICAgdGhpcy5fdGlja2VyID0gbmV3IChnZXRUaWNrZXIoKSkoeyBpbnRlcnZhbDogMTAwIH0pO1xuICAgIHRoaXMuX3RpY2tlci5uZXh0VGljayh0aGlzLm9uVGljaylcbiAgfVxuXG4gIG9uVGljayAoKSB7XG4gICAgdGhpcy5fdGlja2VyLm5leHRUaWNrKHRoaXMub25UaWNrKVxuICB9XG5cbiAgZG9SZWNvbmNpbGUgKCkge1xuICAgIGNvbnN0IHZDdXJUaW1lID0gdGhpcy52Q3R4LmN1cnJlbnRUaW1lO1xuICAgIGNvbnN0IGFDdXJUaW1lID0gdGhpcy5hQ3R4LmN1cnJlbnRUaW1lO1xuICAgIGNvbnN0IGdhcCA9IHZDdXJUaW1lIC0gYUN1clRpbWU7XG4gICAgaWYgKGdhcCA+IDAuMSkgeyAvLyBhdWRpbyBkZWxheWVkIGZvciBtb3JlIHRoYW4gMTAwbXNcbiAgICAgIHRoaXMudkN0eC5wYXVzZSgpXG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgdGhpcy52Q3R4LnBsYXkoKVxuICAgICAgfSwgZ2FwICogMTAwMClcbiAgICB9IGVsc2UgaWYgKGdhcCA8IC0wLjAyKSB7XG4gICAgICB0aGlzLnZDdHguY3VycmVudFRpbWVcbiAgICB9XG4gIH1cbn1cblxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVuZGVmXG5jbGFzcyBNb2JpbGVWaWRlbyBleHRlbmRzIEhUTUxFbGVtZW50IHtcbiAgY29uc3RydWN0b3IgKGNvbmZpZykge1xuICAgIHN1cGVyKCk7XG4gICAgbGV0IF90aGlzID0gdGhpcztcbiAgICB0aGlzLnZDdHggPSBuZXcgVmlkZW9DdHgoKTtcbiAgICB0aGlzLmFDdHggPSBuZXcgQXVkaW9DdHgoY29uZmlnKTtcblxuICAgIHRoaXMudkN0eC5vbmNhbnBsYXkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICBfdGhpcy5hcHBlbmRDaGlsZChfdGhpcy52Q3R4LmNhbnZhcyk7XG4gICAgICBjb25zb2xlLmxvZygnY2FucGxheScsIF90aGlzKTtcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bmRlZlxuICAgICAgX3RoaXMuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoJ2NhbnBsYXknKSk7XG4gICAgfVxuICAgIHRoaXMuaGlzdG9yeVRpbWUgPSAwO1xuICB9XG5cbiAgZGVzdHJveSAoKSB7XG5cbiAgfVxuXG4gIG9uRGVtdXhDb21wbGV0ZSAodmlkZW9UcmFjaywgYXVkaW9UcmFjaykge1xuICAgIHRoaXMuYUN0eC5kZWNvZGVBdWRpbyhhdWRpb1RyYWNrKTtcbiAgICB0aGlzLnZDdHguZGVjb2RlVmlkZW8odmlkZW9UcmFjayk7XG4gIH1cblxuICBzZXRBdWRpb01ldGEgKG1ldGEpIHtcbiAgICB0aGlzLmFDdHguc2V0QXVkaW9NZXRhRGF0YShtZXRhKTtcbiAgfVxuXG4gIHNldFZpZGVvTWV0YSAobWV0YSkge1xuICAgIHRoaXMudkN0eC5zZXRWaWRlb01ldGFEYXRhKG1ldGEpO1xuICB9XG5cbiAgZ2V0IGN1cnJlbnRUaW1lICgpIHtcblxuICB9XG5cbiAgcGxheSAoKSB7XG4gICAgdGhpcy5hQ3R4LnBsYXkoKTtcbiAgICB0aGlzLnZDdHgucGxheSgpO1xuICB9XG59XG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW5kZWZcbmN1c3RvbUVsZW1lbnRzLmRlZmluZSgnbW9iaWxlLXZpZGVvJywgTW9iaWxlVmlkZW8pO1xuIiwiY2xhc3MgU291cmNlQnVmZmVyIHtcbiAgY29uc3RydWN0b3IgKGNvbmZpZykge1xuICAgIHRoaXMuY29uZmlnID0gT2JqZWN0LmFzc2lnbih7fSwgY29uZmlnKTtcbiAgICB0aGlzLnR5cGUgPSB0aGlzLmNvbmZpZy50eXBlO1xuICAgIHRoaXMuYnVmZmVyID0gW107XG4gICAgdGhpcy5jdXJyZW50R29wID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuX2xhc3RHZXQgPSB1bmRlZmluZWQ7XG4gIH1cblxuICBwdXNoIChmcmFtZSkge1xuICAgIGlmICh0aGlzLnR5cGUgPT09ICd2aWRlbycpIHtcbiAgICAgIGlmIChmcmFtZS5pc0tleWZyYW1lKSB7XG4gICAgICAgIGxldCBjdXJyZW50R29wID0ge1xuICAgICAgICAgIHNhbXBsZXM6IFtdLFxuICAgICAgICAgIHN0YXJ0OiBmcmFtZS5kdHMsXG4gICAgICAgICAgZW5kOiBmcmFtZS5kdHMsXG4gICAgICAgICAgbmV4dEdvcDogdW5kZWZpbmVkXG4gICAgICAgIH07XG4gICAgICAgIGlmICh0aGlzLmN1cnJlbnRHb3ApIHtcbiAgICAgICAgICB0aGlzLmN1cnJlbnRHb3AubmV4dEdvcCA9IGN1cnJlbnRHb3A7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jdXJyZW50R29wID0gY3VycmVudEdvcDtcbiAgICAgICAgdGhpcy5idWZmZXIucHVzaCh0aGlzLmN1cnJlbnRHb3ApO1xuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5jdXJyZW50R29wKSB7XG4gICAgICAgIHRoaXMuY3VycmVudEdvcC5zYW1wbGVzLnB1c2goZnJhbWUpO1xuXG4gICAgICAgIGlmIChmcmFtZS5kdHMgPCB0aGlzLmN1cnJlbnRHb3Auc3RhcnQpIHtcbiAgICAgICAgICB0aGlzLmN1cnJlbnRHb3Auc3RhcnQgPSBmcmFtZS5kdHM7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZnJhbWUuZHRzID4gdGhpcy5jdXJyZW50R29wLmVuZCkge1xuICAgICAgICAgIHRoaXMuY3VycmVudEdvcC5lbmQgPSBmcmFtZS5kdHM7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBnZXQgKHRpbWUpIHtcbiAgICBpZiAodGhpcy50eXBlID09PSAndmlkZW8nKSB7XG4gICAgICBpZiAodGhpcy5idWZmZXIubGVuZ3RoIDwgMSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGlmICh0aW1lID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgbGV0IHNhbXBsZSA9IHRoaXMuX2dldE5leHQoKTtcbiAgICAgICAgcmV0dXJuIHNhbXBsZTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBfZ2V0TmV4dCAoKSB7XG4gICAgaWYgKCF0aGlzLl9sYXN0R2V0KSB7XG4gICAgICBsZXQgZ29wID0gdGhpcy5idWZmZXJbMF07XG4gICAgICBpZiAoZ29wLnNhbXBsZXMubGVuZ3RoIDwgMSkge1xuICAgICAgICByZXR1cm5cbiAgICAgIH1cblxuICAgICAgdGhpcy5fbGFzdEdldCA9IHtcbiAgICAgICAgZ29wLFxuICAgICAgICBpbmRleDogMFxuICAgICAgfVxuICAgICAgcmV0dXJuIGdvcC5zYW1wbGVzWzBdO1xuICAgIH0gZWxzZSB7XG4gICAgICBsZXQgZ29wID0gdGhpcy5fbGFzdEdldC5nb3A7XG4gICAgICBsZXQgc2FtcGxlID0gZ29wLnNhbXBsZXNbdGhpcy5fbGFzdEdldC5pbmRleCArIDFdO1xuICAgICAgaWYgKHNhbXBsZSkge1xuICAgICAgICB0aGlzLl9sYXN0R2V0LmluZGV4ID0gdGhpcy5fbGFzdEdldC5pbmRleCArIDE7XG4gICAgICAgIHJldHVybiBzYW1wbGU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBnb3AgPSBnb3AubmV4dEdvcDtcbiAgICAgICAgaWYgKCFnb3AgfHwgZ29wLnNhbXBsZXMubGVuZ3RoIDwgMSkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBzYW1wbGUgPSBnb3Auc2FtcGxlc1swXTtcbiAgICAgICAgdGhpcy5fbGFzdEdldCA9IHtcbiAgICAgICAgICBnb3AsXG4gICAgICAgICAgaW5kZXg6IDBcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc2FtcGxlO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJlbW92ZSAoc3RhcnQsIGVuZCkge1xuICAgIGlmICh0aGlzLmJ1ZmZlci5sZW5ndGggPCAwKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgbGV0IGkgPSAwO1xuICAgIGxldCBnb3AgPSB0aGlzLmJ1ZmZlclswXTtcbiAgICB3aGlsZSAoZ29wKSB7XG4gICAgICBpZiAoZ29wLmVuZCA8IGVuZCAmJiBnb3Auc3RhcnQgPj0gc3RhcnQpIHtcbiAgICAgICAgZGVsZXRlIHRoaXMuYnVmZmVyW2ldO1xuICAgICAgICBnb3AgPSB0aGlzLmJ1ZmZlcltpXTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGkgKz0gMTtcbiAgICAgICAgZ29wID0gdGhpcy5idWZmZXJbaV07XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFNvdXJjZUJ1ZmZlcjtcbiIsIi8qKlxuICogQGF1dGhvciBmdXl1aGFvQGJ5dGVkYW5jZS5jb21cbiAqL1xuXG5jbGFzcyBUaWNrZXIge1xuICBjb25zdHJ1Y3RvciAob3B0aW9ucykge1xuICAgIHRoaXMub3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oe30sIG9wdGlvbnMgfHwge30sIHtcbiAgICAgIGludGVydmFsOiA0MFxuICAgIH0pXG5cbiAgICB0aGlzLmNhbGxiYWNrcyA9IFtdXG4gIH1cblxuICBuZXh0VGljayguLi5jYWxsYmFja3MpIHtcbiAgICB0aGlzLmNhbGxiYWNrcyA9IGNhbGxiYWNrc1xuICB9XG5cbiAgb25UaWNrICgpIHtcbiAgICBmb3IgKGxldCBpID0gMCwgbGVuID0gdGhpcy5jYWxsYmFja3MubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgIGNvbnN0IGNhbGxiYWNrID0gdGhpcy5jYWxsYmFja3NbaV1cbiAgICAgIGNhbGxiYWNrKClcbiAgICB9XG4gIH1cblxuICBzZXRJbnRlcnZhbCAoaW50ZXJ2YWwpIHtcbiAgICB0aGlzLm9wdGlvbnMuaW50ZXJ2YWwgPSBpbnRlcnZhbFxuICB9XG59XG5cbi8qKlxuICogdGlja2VyIHVzZSByZXF1ZXN0QW5pbWF0aW9uRnJhbWVcbiAqL1xuY2xhc3MgUmFmVGlja2VyIGV4dGVuZHMgVGlja2VyIHtcbiAgY29uc3RydWN0b3IgKHByb3BzKSB7XG4gICAgc3VwZXIocHJvcHMpO1xuICAgIHRoaXMucHJldiA9IG51bGw7XG4gICAgdGhpcy50aW1lcklkID0gbnVsbFxuICAgIHRoaXMuX3N1YlRpbWVySWQgPSBudWxsXG4gIH1cblxuICBuZXhUaWNrICguLi5jYWxsYmFja3MpIHtcbiAgICBzdXBlci5uZXh0VGljayguLi5jYWxsYmFja3MpXG4gICAgY29uc3QgdGlja0Z1bmMgPSBSYWZUaWNrZXIuZ2V0VGlja0Z1bmMoKVxuICAgIHRpY2tGdW5jKHRoaXMudGljay5iaW5kKHRoaXMpKVxuICB9XG5cbiAgdGljayAodGltZXN0YW1wKSB7XG4gICAgaWYgKCF0aGlzLnByZXYpIHtcbiAgICAgIHRoaXMucHJldiA9IHRpbWVzdGFtcFxuICAgIH1cblxuICAgIGNvbnN0IHsgaW50ZXJ2YWwgfSA9IHRoaXMub3B0aW9ucztcbiAgICBjb25zdCB7IGdldFRpY2tGdW5jIH0gPSBSYWZUaWNrZXI7XG5cbiAgICBjb25zdCB0aWNrRnVuYyA9IGdldFRpY2tGdW5jKClcbiAgICBjb25zdCByZXN0ID0gKHRoaXMucHJldiArIGludGVydmFsKSAtIHRpbWVzdGFtcFxuXG4gICAgY29uc3QgbmV4dFRpY2sgPSAoKSA9PiB7XG4gICAgICB0aGlzLnRpbWVySWQgPSB0aWNrRnVuYyh0aGlzLnRpY2suYmluZCh0aGlzKSlcbiAgICB9XG5cbiAgICBjb25zdCBydW5DYWxsYmFjayA9ICgpID0+IHtcbiAgICAgIHRoaXMucHJldiA9IG51bGw7XG4gICAgICB0aGlzLm9uVGljaygpXG4gICAgfVxuXG4gICAgaWYgKHJlc3QgPD0gMCkge1xuICAgICAgaWYgKHRoaXMuX3N1YlRpbWVySWQpIHtcbiAgICAgICAgd2luZG93LmNsZWFyVGltZW91dCh0aGlzLl9zdWJUaW1lcklkKTtcbiAgICAgICAgdGhpcy5fc3ViVGltZXJJZCA9IG51bGxcbiAgICAgIH1cbiAgICAgIHJ1bkNhbGxiYWNrKClcbiAgICB9IGVsc2UgaWYgKHJlc3QgPD0gMTApIHtcbiAgICAgIHRoaXMuX3N1YlRpbWVySWQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgcnVuQ2FsbGJhY2soKVxuICAgICAgfSwgcmVzdClcbiAgICB9IGVsc2Uge1xuICAgICAgbmV4dFRpY2soKVxuICAgIH1cbiAgfVxuXG4gIHN0b3AgKCkge1xuICAgIGlmICh0aGlzLnRpbWVySWQpIHtcbiAgICAgIGNvbnN0IGNhbmNlbEZ1bmMgPSBSYWZUaWNrZXIuZ2V0Q2FuY2VsRnVuYygpXG5cbiAgICAgIGNhbmNlbEZ1bmModGhpcy50aW1lcklkKVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBnZXRUaWNrRnVuYyAoKSB7XG4gICAgcmV0dXJuIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUgfHwgd2luZG93LndlYmtpdFJlcXVlc3RBbmltYXRpb25GcmFtZVxuICB9XG5cbiAgc3RhdGljIGdldENhbmNlbEZ1bmMgKCkge1xuICAgIHJldHVybiB3aW5kb3cuY2FuY2VsQW5pbWF0aW9uRnJhbWUgfHwgd2luZG93LndlYmtpdENhbmNlbEFuaW1hdGlvbkZyYW1lXG4gIH1cblxuICBzdGF0aWMgaXNTdXBwb3J0ZWQgKCkge1xuICAgIHJldHVybiBSYWZUaWNrZXIuZ2V0VGlja0Z1bmMoKSAhPT0gdW5kZWZpbmVkXG4gIH1cbn1cblxuLyoqXG4gKiB1c2Ugc2V0VGltZW91dCBmb3IgYnJvd3NlcnMgd2l0aG91dCByYWYgc3VwcG9ydFxuICovXG5jbGFzcyBUaW1lb3V0VGlja2VyIGV4dGVuZHMgVGlja2VyIHtcbiAgY29uc3RydWN0b3IoY29uZmlnKSB7XG4gICAgc3VwZXIoY29uZmlnKVxuICAgIHRoaXMudGltZW91dElkID0gbnVsbFxuXG4gIH1cblxuICBuZXh0VGljayAoLi4uY2FsbGJhY2tzKSB7XG4gICAgc3VwZXIubmV4dFRpY2soLi4uY2FsbGJhY2tzKVxuICAgIHRoaXMudGltZW91dElkID0gd2luZG93LnNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgdGhpcy5vblRpY2soKTtcbiAgICB9LCB0aGlzLm9wdGlvbnMuaW50ZXJ2YWwpXG4gIH1cblxuICBzdG9wICgpIHtcbiAgICBpZiAodGhpcy50aW1lb3V0SWQpIHtcbiAgICAgIHdpbmRvdy5jbGVhclRpbWVvdXQodGhpcy50aW1lb3V0SWQpXG4gICAgfVxuICB9XG5cbn1cblxuLyoqXG4gKiDov5Tlm55UaWNrZXLmnoTpgKDlh73mlbBcbiAqIEByZXR1cm5zIHtUaWNrZXJ9XG4gKi9cbmV4cG9ydCBjb25zdCBnZXRUaWNrZXIgPSAoKSA9PiB7XG4gIGlmIChSYWZUaWNrZXIuaXNTdXBwb3J0ZWQoKSkge1xuICAgIHJldHVybiBSYWZUaWNrZXJcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gVGltZW91dFRpY2tlclxuICB9XG59XG4iLCJpbXBvcnQgV29ya2VyaWZ5IGZyb20gJ3dlYndvcmtpZnktd2VicGFjaydcbmltcG9ydCBTdHJlYW0gZnJvbSAnLi4vd3JpdGUvc3RyZWFtJztcbmltcG9ydCBOYWx1bml0IGZyb20gJy4uLy4uLy4uL3hncGxheWVyLWNvZGVjL3NyYy9oMjY0L25hbHVuaXQnO1xuaW1wb3J0IFlVVkNhbnZhcyBmcm9tICcuL3l1di1jYW52YXMnO1xuaW1wb3J0IFNvdXJjZUJ1ZmZlciBmcm9tICcuL3NvdXJjZWJ1ZmZlcic7XG5jbGFzcyBWaWRlb0NhbnZhcyB7XG4gIGNvbnN0cnVjdG9yIChjb25maWcpIHtcbiAgICB0aGlzLmNvbmZpZyA9IE9iamVjdC5hc3NpZ24oe30sIGNvbmZpZyk7XG4gICAgdGhpcy5jYW52YXMgPSB0aGlzLmNvbmZpZy5jYW52YXMgPyB0aGlzLmNvbmZpZy5jYW52YXMgOiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcbiAgICB0aGlzLnNvdXJjZSA9IG5ldyBTb3VyY2VCdWZmZXIoe3R5cGU6ICd2aWRlbyd9KTtcbiAgICB0aGlzLnByZWxvYWRUaW1lID0gdGhpcy5jb25maWcucHJlbG9hZFRpbWUgfHwgMztcbiAgICB0aGlzLm9uY2FucGxheSA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLm1ldGEgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5yZWFkeVN0YXR1cyA9IDA7XG4gICAgdGhpcy5wYXVzZWQgPSB0cnVlO1xuICAgIHRoaXMuY291bnQgPSAwO1xuICAgIHRoaXMuY3VycmVudFRpbWUgPSAwO1xuICAgIHRoaXMubGFzdFBsYXllZCA9IDA7XG5cbiAgICB0aGlzLl9kZWNvZGVySW5pdGVkID0gZmFsc2U7XG4gICAgdGhpcy5fYXZjY3B1c2hlZCA9IGZhbHNlO1xuICAgIHRoaXMuX2RlY29kZWRGcmFtZXMgPSB7fTtcbiAgICB0aGlzLl9sYXN0U2FtcGxlRHRzID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuX2Jhc2VEdHMgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5pbml0V2FzbVdvcmtlcigpO1xuICB9XG5cbiAgcGxheSAoKSB7XG4gICAgdGhpcy5wYXVzZWQgPSBmYWxzZTtcbiAgICB0aGlzLl9vblRpbWVyKCk7XG4gIH1cblxuICBwYXVzZSAoKSB7XG4gICAgdGhpcy5wYXVzZWQgPSB0cnVlO1xuICB9XG5cbiAgc2VlayAodGltZSkge1xuICAgIHRoaXMuY3VycmVudFRpbWUgPSB0aW1lO1xuICB9XG5cbiAgaW5pdFdhc21Xb3JrZXIgKCkge1xuICAgIGxldCBfdGhpcyA9IHRoaXM7XG4gICAgdGhpcy53YXNtd29ya2VyID0gV29ya2VyaWZ5KHJlcXVpcmUucmVzb2x2ZSgnLi93b3JrZXIuanMnKSk7XG4gICAgdGhpcy53YXNtd29ya2VyLnBvc3RNZXNzYWdlKHtcbiAgICAgIG1zZzogJ2luaXQnXG4gICAgfSlcbiAgICB0aGlzLndhc213b3JrZXIuYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIG1zZyA9PiB7XG4gICAgICBzd2l0Y2ggKG1zZy5kYXRhLm1zZykge1xuICAgICAgICBjYXNlICdERUNPREVSX1JFQURZJzpcbiAgICAgICAgICBfdGhpcy5fZGVjb2RlckluaXRlZCA9IHRydWU7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ0RFQ09ERUQnOlxuICAgICAgICAgIHRoaXMuX29uRGVjb2RlZChtc2cuZGF0YSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBzZXRWaWRlb01ldGFEYXRhIChtZXRhKSB7XG4gICAgdGhpcy5tZXRhID0gbWV0YTtcbiAgICBpZiAoIXRoaXMuX2RlY29kZXJJbml0ZWQpIHtcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICB0aGlzLl9hdmNjcHVzaGVkID0gdHJ1ZTtcbiAgICBsZXQgZGF0YSA9IG5ldyBVaW50OEFycmF5KG1ldGEuc3BzLmJ5dGVMZW5ndGggKyA0KTtcbiAgICBkYXRhLnNldChbMCwgMCwgMCwgMV0pXG4gICAgZGF0YS5zZXQobWV0YS5zcHMsIDQpO1xuICAgIHRoaXMud2FzbXdvcmtlci5wb3N0TWVzc2FnZSh7XG4gICAgICBtc2c6ICdkZWNvZGUnLFxuICAgICAgZGF0YTogZGF0YVxuICAgIH0pXG5cbiAgICBkYXRhID0gbmV3IFVpbnQ4QXJyYXkobWV0YS5wcHMuYnl0ZUxlbmd0aCArIDQpO1xuICAgIGRhdGEuc2V0KFswLCAwLCAwLCAxXSlcbiAgICBkYXRhLnNldChtZXRhLnBwcywgNCk7XG4gICAgdGhpcy53YXNtd29ya2VyLnBvc3RNZXNzYWdlKHtcbiAgICAgIG1zZzogJ2RlY29kZScsXG4gICAgICBkYXRhOiBkYXRhXG4gICAgfSlcblxuICAgIGlmICghdGhpcy55dXZDYW52YXMpIHtcbiAgICAgIGxldCBjb25maWcgPSBPYmplY3QuYXNzaWduKHttZXRhLCBjYW52YXM6IHRoaXMuY2FudmFzfSwgdGhpcy5jb25maWcpO1xuICAgICAgdGhpcy55dXZDYW52YXMgPSBuZXcgWVVWQ2FudmFzKGNvbmZpZyk7XG4gICAgfVxuICAgIHRoaXMucmVhZHlTdGF0dXMgPSAxO1xuICB9XG5cbiAgZGVjb2RlVmlkZW8gKHZpZGVvVHJhY2spIHtcbiAgICBpZiAoIXRoaXMuX2RlY29kZXJJbml0ZWQpIHtcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGlmICghdGhpcy5fYXZjY3B1c2hlZCkge1xuICAgICAgdGhpcy5zZXRWaWRlb01ldGFEYXRhKHRoaXMubWV0YSk7XG4gICAgfVxuICAgIGxldCB7IHNhbXBsZXMgfSA9IHZpZGVvVHJhY2s7XG4gICAgbGV0IHNhbXBsZSA9IHNhbXBsZXMuc2hpZnQoKTtcblxuICAgIHdoaWxlIChzYW1wbGUpIHtcbiAgICAgIGlmICghdGhpcy5fYmFzZUR0cykge1xuICAgICAgICB0aGlzLl9iYXNlRHRzID0gc2FtcGxlLmR0cztcbiAgICAgIH1cbiAgICAgIHRoaXMuc291cmNlLnB1c2goc2FtcGxlKTtcbiAgICAgIHNhbXBsZSA9IHNhbXBsZXMuc2hpZnQoKTtcbiAgICB9XG5cbiAgICB0aGlzLl9wcmVsb2FkKCk7XG4gIH1cblxuICBfcHJlbG9hZCAoKSB7XG4gICAgaWYgKCF0aGlzLl9sYXN0U2FtcGxlRHRzIHx8IHRoaXMuX2xhc3RTYW1wbGVEdHMgLSB0aGlzLl9iYXNlRHRzIDwgdGhpcy5jdXJyZW50VGltZSArIHRoaXMucHJlbG9hZFRpbWUgKiAxMDAwKSB7XG4gICAgICBsZXQgc2FtcGxlID0gdGhpcy5zb3VyY2UuZ2V0KCk7XG4gICAgICBpZiAoc2FtcGxlKSB7XG4gICAgICAgIHRoaXMuX2xhc3RTYW1wbGVEdHMgPSBzYW1wbGUuZHRzO1xuICAgICAgICB0aGlzLl9hbmFseXNlTmFsKHNhbXBsZSk7XG4gICAgICB9XG5cbiAgICAgIHdoaWxlIChzYW1wbGUgJiYgdGhpcy5fbGFzdFNhbXBsZUR0cyAtIHRoaXMuX2Jhc2VEdHMgPCB0aGlzLmN1cnJlbnRUaW1lICsgdGhpcy5wcmVsb2FkVGltZSAqIDEwMDApIHtcbiAgICAgICAgc2FtcGxlID0gdGhpcy5zb3VyY2UuZ2V0KCk7XG4gICAgICAgIGlmIChzYW1wbGUpIHtcbiAgICAgICAgICB0aGlzLl9hbmFseXNlTmFsKHNhbXBsZSk7XG4gICAgICAgICAgdGhpcy5fbGFzdFNhbXBsZUR0cyA9IHNhbXBsZS5kdHM7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBfYW5hbHlzZU5hbCAoc2FtcGxlKSB7XG4gICAgbGV0IG5hbHMgPSBOYWx1bml0LmdldEF2Y2NOYWxzKG5ldyBTdHJlYW0oc2FtcGxlLmRhdGEuYnVmZmVyKSk7XG5cbiAgICBsZXQgbGVuZ3RoID0gMDtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG5hbHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGxldCBuYWwgPSBuYWxzW2ldO1xuICAgICAgbGVuZ3RoICs9IG5hbC5ib2R5LmJ5dGVMZW5ndGggKyA0O1xuICAgIH1cbiAgICBsZXQgb2Zmc2V0ID0gMDtcbiAgICBsZXQgZGF0YSA9IG5ldyBVaW50OEFycmF5KGxlbmd0aCk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBuYWxzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBsZXQgbmFsID0gbmFsc1tpXTtcbiAgICAgIGRhdGEuc2V0KFswLCAwLCAwLCAxXSwgb2Zmc2V0KTtcbiAgICAgIG9mZnNldCArPSA0O1xuICAgICAgZGF0YS5zZXQobmV3IFVpbnQ4QXJyYXkobmFsLmJvZHkpLCBvZmZzZXQpO1xuICAgICAgb2Zmc2V0ICs9IG5hbC5ib2R5LmJ5dGVMZW5ndGg7XG4gICAgfVxuICAgIHRoaXMud2FzbXdvcmtlci5wb3N0TWVzc2FnZSh7XG4gICAgICBtc2c6ICdkZWNvZGUnLFxuICAgICAgZGF0YTogZGF0YSxcbiAgICAgIGluZm86IHtcbiAgICAgICAgZHRzOiBzYW1wbGUuZHRzLFxuICAgICAgICBwdHM6IHNhbXBsZS5wdHMgPyBzYW1wbGUucHRzIDogc2FtcGxlLmR0cyArIHNhbXBsZS5jdHMsXG4gICAgICAgIGtleTogc2FtcGxlLmlzS2V5ZnJhbWVcbiAgICAgIH1cbiAgICB9KVxuICB9XG5cbiAgX29uRGVjb2RlZCAoZGF0YSkge1xuICAgIGxldCB7ZHRzfSA9IGRhdGEuaW5mb1xuICAgIHRoaXMuX2RlY29kZWRGcmFtZXNbZHRzXSA9IGRhdGE7XG4gIH1cblxuICBfb25UaW1lciAoKSB7XG4gICAgaWYgKHRoaXMucGF1c2VkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGxldCBuZXh0VGltZSA9IDEwMDAgLyA2MDtcbiAgICBpZiAodGhpcy5tZXRhKSB7XG4gICAgICBpZiAodGhpcy5tZXRhLmZyYW1lUmF0ZSAmJiB0aGlzLm1ldGEuZnJhbWVSYXRlLmZpeGVkICYmIHRoaXMubWV0YS5mcmFtZVJhdGUuZnBzKSB7XG4gICAgICAgIG5leHRUaW1lID0gTWF0aC5jZWlsKDEwMDAgLyB0aGlzLm1ldGEuZnJhbWVSYXRlLmZwcyk7XG4gICAgICB9XG4gICAgICBsZXQgZnJhbWVUaW1lcyA9IE9iamVjdC5rZXlzKHRoaXMuX2RlY29kZWRGcmFtZXMpO1xuICAgICAgaWYgKGZyYW1lVGltZXMubGVuZ3RoID4gMCkge1xuICAgICAgICB0aGlzLmN1cnJlbnRUaW1lICs9IG5leHRUaW1lO1xuICAgICAgICBsZXQgZnJhbWVUaW1lID0gLTE7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZnJhbWVUaW1lcy5sZW5ndGggJiYgZnJhbWVUaW1lc1tpXSAtIHRoaXMuX2Jhc2VEdHMgPD0gdGhpcy5jdXJyZW50VGltZTsgaSsrKSB7XG4gICAgICAgICAgZnJhbWVUaW1lID0gZnJhbWVUaW1lc1tpXTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgZnJhbWUgPSB0aGlzLl9kZWNvZGVkRnJhbWVzW2ZyYW1lVGltZV07XG4gICAgICAgIGlmIChmcmFtZSkge1xuICAgICAgICAgIGlmICh0aGlzLm9uY2FucGxheSAmJiB0aGlzLnJlYWR5U3RhdHVzIDwgNCkge1xuICAgICAgICAgICAgdGhpcy5vbmNhbnBsYXkoKTtcbiAgICAgICAgICAgIHRoaXMucmVhZHlTdGF0dXMgPSA0O1xuICAgICAgICAgIH1cbiAgICAgICAgICBjb25zdCBiZWZvcmUgPSBEYXRlLm5vdygpO1xuICAgICAgICAgIHRoaXMueXV2Q2FudmFzLnJlbmRlcihmcmFtZS5idWZmZXIsIGZyYW1lLndpZHRoLCBmcmFtZS5oZWlnaHQpO1xuICAgICAgICAgIGNvbnNvbGUubG9nKGAke2ZyYW1lVGltZX3muLLmn5Pml7bplb9gLCBEYXRlLm5vdygpIC0gYmVmb3JlKVxuICAgICAgICAgIGRlbGV0ZSB0aGlzLl9kZWNvZGVkRnJhbWVzW2ZyYW1lVGltZV07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgc2V0VGltZW91dCh0aGlzLl9vblRpbWVyLmJpbmQodGhpcyksIG5leHRUaW1lKTtcbiAgfVxuXG4gIF9jbGVhbkJ1ZmZlciAoKSB7XG4gICAgdGhpcy5zb3VyY2UucmVtb3ZlKDAsIHRoaXMuY3VycmVudFRpbWUpO1xuICB9XG5cbiAgZ2V0IGZwcyAoKSB7XG5cbiAgfVxufVxuZXhwb3J0IGRlZmF1bHQgVmlkZW9DYW52YXM7XG4iLCJjb25zdCBNQVhfU1RSRUFNX0JVRkZFUl9MRU5HVEggPSAxMDI0ICogMTAyNDtcbnZhciBEZWNvZGVyID0gZnVuY3Rpb24gKHNlbGYpIHtcbiAgdGhpcy5pbml0ZWQgPSBmYWxzZTtcbiAgdGhpcy5zZWxmID0gc2VsZjtcbiAgdGhpcy5pbmZvbGlzdCA9IHt9O1xuICBzZWxmLnBhcl9icm9hZHdheU9uQnJvYWR3YXlJbml0ZWQgPSB0aGlzLmJyb2Fkd2F5T25Ccm9hZHdheUluaXRlZC5iaW5kKHRoaXMpO1xuICBzZWxmLnBhcl9icm9hZHdheU9uUGljdHVyZURlY29kZWQgPSB0aGlzLmJyb2Fkd2F5T25QaWN0dXJlRGVjb2RlZC5iaW5kKHRoaXMpO1xufVxuXG5EZWNvZGVyLnByb3RvdHlwZS50b1U4QXJyYXkgPSBmdW5jdGlvbiAocHRyLCBsZW5ndGgpIHtcbiAgcmV0dXJuIHRoaXMuc2VsZi5IRUFQVTguc3ViYXJyYXkocHRyLCBwdHIgKyBsZW5ndGgpO1xufVxuXG5EZWNvZGVyLnByb3RvdHlwZS5pbml0ID0gZnVuY3Rpb24gKCkge1xuICBNb2R1bGUuX2Jyb2Fkd2F5SW5pdCgpO1xuICB0aGlzLnN0cmVhbUJ1ZmZlciA9IHRoaXMudG9VOEFycmF5KE1vZHVsZS5fYnJvYWR3YXlDcmVhdGVTdHJlYW0oTUFYX1NUUkVBTV9CVUZGRVJfTEVOR1RIKSwgTUFYX1NUUkVBTV9CVUZGRVJfTEVOR1RIKTtcbn1cblxuRGVjb2Rlci5wcm90b3R5cGUuYnJvYWR3YXlPblBpY3R1cmVEZWNvZGVkID0gZnVuY3Rpb24gKG9mZnNldCwgd2lkdGgsIGhlaWdodCwgaW5mb2lkKSB7XG4gIGxldCBpbmZvID0gT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5pbmZvbGlzdFtpbmZvaWRdKTtcbiAgbGV0IGRhdGEgPSB0aGlzLnRvVThBcnJheShvZmZzZXQsICh3aWR0aCAqIGhlaWdodCAqIDMpIC8gMik7XG4gIHRoaXMuaW5mb2xpc3RbaW5mb2lkXSA9IG51bGw7XG4gIGxldCBkYXRldGVtcCA9IG5ldyBVaW50OEFycmF5KGRhdGEubGVuZ3RoKTtcbiAgZGF0ZXRlbXAuc2V0KGRhdGEpO1xuICBsZXQgYnVmZmVyID0gZGF0ZXRlbXAuYnVmZmVyO1xuICB0aGlzLnNlbGYucG9zdE1lc3NhZ2Uoe1xuICAgIG1zZzogJ0RFQ09ERUQnLFxuICAgIHdpZHRoLFxuICAgIGhlaWdodCxcbiAgICBpbmZvLFxuICAgIGJ1ZmZlclxuICB9LCBbYnVmZmVyXSk7XG59XG5cbkRlY29kZXIucHJvdG90eXBlLmJyb2Fkd2F5T25Ccm9hZHdheUluaXRlZCA9IGZ1bmN0aW9uICgpIHtcbiAgdGhpcy5pbml0ZWQgPSB0cnVlO1xuICB0aGlzLnNlbGYucG9zdE1lc3NhZ2Uoe21zZzogJ0RFQ09ERVJfUkVBRFknfSk7XG59XG5cbkRlY29kZXIucHJvdG90eXBlLmRlY29kZSA9IGZ1bmN0aW9uIChkYXRhLCBpbmZvKSB7XG4gIGxldCB0aW1lID0gcGFyc2VJbnQobmV3IERhdGUoKS5nZXRUaW1lKCkpO1xuICBsZXQgaW5mb2lkID0gdGltZSAtIChNYXRoLmZsb29yKHRpbWUgLyAxMGU5KSAqIDEwZTkpO1xuICB0aGlzLmluZm9saXN0W2luZm9pZF0gPSBpbmZvO1xuICB0aGlzLnN0cmVhbUJ1ZmZlci5zZXQoZGF0YSk7XG4gIE1vZHVsZS5fYnJvYWR3YXlQbGF5U3RyZWFtKGRhdGEubGVuZ3RoLCBpbmZvaWQpO1xufVxuXG52YXIgZGVjb2RlcjtcblxuZnVuY3Rpb24gb25Qb3N0UnVuICgpIHtcbiAgZGVjb2RlciA9IG5ldyBEZWNvZGVyKHRoaXMpO1xuICBkZWNvZGVyLmluaXQoKTtcbn1cblxuZnVuY3Rpb24gaW5pdCAoKSB7XG4gIHNlbGYuaW1wb3J0U2NyaXB0cygnaHR0cDovLzEwLjk1LjQ5LjQxOjkwOTAvZXhhbXBsZXMvZmx2L2RlY29kZXIuanMnKTtcbiAgYWRkT25Qb3N0UnVuKG9uUG9zdFJ1bi5iaW5kKHNlbGYpKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoc2VsZikge1xuICBzZWxmLmFkZEV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCBmdW5jdGlvbiAoZSkge1xuICAgIHZhciBkYXRhID0gZS5kYXRhO1xuICAgIGlmICghZGF0YS5tc2cpIHtcbiAgICAgIHNlbGYucG9zdE1lc3NhZ2Uoe1xuICAgICAgICBtc2c6ICdFUlJPUjppbnZhbGlkIG1lc3NhZ2UnXG4gICAgICB9KVxuICAgIH0gZWxzZSB7XG4gICAgICBzd2l0Y2ggKGRhdGEubXNnKSB7XG4gICAgICAgIGNhc2UgJ2luaXQnOlxuICAgICAgICAgIGluaXQoc2VsZilcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnZGVjb2RlJzpcbiAgICAgICAgICBkZWNvZGVyLmRlY29kZShkYXRhLmRhdGEsIGRhdGEuaW5mbyk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICB9LCBmYWxzZSk7XG59XG4iLCJjbGFzcyBZVVZDYW52YXMge1xuICBjb25zdHJ1Y3RvciAoY29uZmlncykge1xuICAgIHRoaXMuY29uZmlncyA9IE9iamVjdC5hc3NpZ24oe30sIGNvbmZpZ3MpO1xuICAgIHRoaXMuY2FudmFzID0gdGhpcy5jb25maWdzLmNhbnZhcztcbiAgICB0aGlzLm1ldGEgPSBPYmplY3QuYXNzaWduKHt9LCB0aGlzLmNvbmZpZ3MubWV0YSk7XG4gICAgdGhpcy5jaHJvbWEgPSB0aGlzLm1ldGEuY2hyb21hRm9ybWF0O1xuICAgIHRoaXMuaGVpZ2h0ID0gdGhpcy5tZXRhLnByZXNlbnRIZWlnaHQ7XG4gICAgdGhpcy53aWR0aCA9IHRoaXMubWV0YS5wcmVzZW50V2lkdGg7XG4gICAgdGhpcy5jYW52YXMud2lkdGggPSB0aGlzLndpZHRoO1xuICAgIHRoaXMuY2FudmFzLmhlaWdodCA9IHRoaXMuaGVpZ2h0O1xuICAgIHRoaXMuY2FudmFzLnN0eWxlLndpZHRoID0gJzEwMCUnO1xuICAgIHRoaXMuY2FudmFzLnN0eWxlLmhlaWdodCA9ICcxMDAlJztcbiAgICB0aGlzLl9pbml0Q29udGV4dEdMKCk7XG4gICAgaWYgKHRoaXMuY29udGV4dEdMKSB7XG4gICAgICB0aGlzLl9pbml0UHJvZ3JhbSgpO1xuICAgICAgdGhpcy5faW5pdEJ1ZmZlcnMoKTtcbiAgICAgIHRoaXMuX2luaXRUZXh0dXJlcygpO1xuICAgIH07XG4gIH1cblxuICBfaW5pdENvbnRleHRHTCAoKSB7XG4gICAgdmFyIGNhbnZhcyA9IHRoaXMuY2FudmFzO1xuICAgIHZhciBnbCA9IG51bGw7XG5cbiAgICB2YXIgdmFsaWRDb250ZXh0TmFtZXMgPSBbJ3dlYmdsJywgJ2V4cGVyaW1lbnRhbC13ZWJnbCcsICdtb3otd2ViZ2wnLCAnd2Via2l0LTNkJ107XG4gICAgdmFyIG5hbWVJbmRleCA9IDA7XG5cbiAgICB3aGlsZSAoIWdsICYmIG5hbWVJbmRleCA8IHZhbGlkQ29udGV4dE5hbWVzLmxlbmd0aCkge1xuICAgICAgdmFyIGNvbnRleHROYW1lID0gdmFsaWRDb250ZXh0TmFtZXNbbmFtZUluZGV4XTtcblxuICAgICAgdHJ5IHtcbiAgICAgICAgaWYgKHRoaXMuY29udGV4dE9wdGlvbnMpIHtcbiAgICAgICAgICBnbCA9IGNhbnZhcy5nZXRDb250ZXh0KGNvbnRleHROYW1lLCB0aGlzLmNvbnRleHRPcHRpb25zKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBnbCA9IGNhbnZhcy5nZXRDb250ZXh0KGNvbnRleHROYW1lKTtcbiAgICAgICAgfTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgZ2wgPSBudWxsO1xuICAgICAgfVxuXG4gICAgICBpZiAoIWdsIHx8IHR5cGVvZiBnbC5nZXRQYXJhbWV0ZXIgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgZ2wgPSBudWxsO1xuICAgICAgfVxuXG4gICAgICArK25hbWVJbmRleDtcbiAgICB9O1xuXG4gICAgdGhpcy5jb250ZXh0R0wgPSBnbDtcbiAgfTtcblxuICBfaW5pdFByb2dyYW0gKCkge1xuICAgIHZhciBnbCA9IHRoaXMuY29udGV4dEdMO1xuXG4gICAgLy8gdmVydGV4IHNoYWRlciBpcyB0aGUgc2FtZSBmb3IgYWxsIHR5cGVzXG4gICAgdmFyIHZlcnRleFNoYWRlclNjcmlwdDtcbiAgICB2YXIgZnJhZ21lbnRTaGFkZXJTY3JpcHQ7XG4gICAgaWYgKHRoaXMuY2hyb21hID09PSA0MjApIHtcbiAgICAgIHZlcnRleFNoYWRlclNjcmlwdCA9IFtcbiAgICAgICAgJ2F0dHJpYnV0ZSB2ZWM0IHZlcnRleFBvczsnLFxuICAgICAgICAnYXR0cmlidXRlIHZlYzQgdGV4dHVyZVBvczsnLFxuICAgICAgICAnYXR0cmlidXRlIHZlYzQgdVRleHR1cmVQb3M7JyxcbiAgICAgICAgJ2F0dHJpYnV0ZSB2ZWM0IHZUZXh0dXJlUG9zOycsXG4gICAgICAgICd2YXJ5aW5nIHZlYzIgdGV4dHVyZUNvb3JkOycsXG4gICAgICAgICd2YXJ5aW5nIHZlYzIgdVRleHR1cmVDb29yZDsnLFxuICAgICAgICAndmFyeWluZyB2ZWMyIHZUZXh0dXJlQ29vcmQ7JyxcblxuICAgICAgICAndm9pZCBtYWluKCknLFxuICAgICAgICAneycsXG4gICAgICAgICcgIGdsX1Bvc2l0aW9uID0gdmVydGV4UG9zOycsXG4gICAgICAgICcgIHRleHR1cmVDb29yZCA9IHRleHR1cmVQb3MueHk7JyxcbiAgICAgICAgJyAgdVRleHR1cmVDb29yZCA9IHVUZXh0dXJlUG9zLnh5OycsXG4gICAgICAgICcgIHZUZXh0dXJlQ29vcmQgPSB2VGV4dHVyZVBvcy54eTsnLFxuICAgICAgICAnfSdcbiAgICAgIF0uam9pbignXFxuJyk7XG5cbiAgICAgIGZyYWdtZW50U2hhZGVyU2NyaXB0ID0gW1xuICAgICAgICAncHJlY2lzaW9uIGhpZ2hwIGZsb2F0OycsXG4gICAgICAgICd2YXJ5aW5nIGhpZ2hwIHZlYzIgdGV4dHVyZUNvb3JkOycsXG4gICAgICAgICd2YXJ5aW5nIGhpZ2hwIHZlYzIgdVRleHR1cmVDb29yZDsnLFxuICAgICAgICAndmFyeWluZyBoaWdocCB2ZWMyIHZUZXh0dXJlQ29vcmQ7JyxcbiAgICAgICAgJ3VuaWZvcm0gc2FtcGxlcjJEIHlTYW1wbGVyOycsXG4gICAgICAgICd1bmlmb3JtIHNhbXBsZXIyRCB1U2FtcGxlcjsnLFxuICAgICAgICAndW5pZm9ybSBzYW1wbGVyMkQgdlNhbXBsZXI7JyxcbiAgICAgICAgJ3VuaWZvcm0gbWF0NCBZVVYyUkdCOycsXG5cbiAgICAgICAgJ3ZvaWQgbWFpbih2b2lkKSB7JyxcbiAgICAgICAgJyAgaGlnaHAgZmxvYXQgeSA9IHRleHR1cmUyRCh5U2FtcGxlciwgIHRleHR1cmVDb29yZCkucjsnLFxuICAgICAgICAnICBoaWdocCBmbG9hdCB1ID0gdGV4dHVyZTJEKHVTYW1wbGVyLCAgdVRleHR1cmVDb29yZCkucjsnLFxuICAgICAgICAnICBoaWdocCBmbG9hdCB2ID0gdGV4dHVyZTJEKHZTYW1wbGVyLCAgdlRleHR1cmVDb29yZCkucjsnLFxuICAgICAgICAnICBnbF9GcmFnQ29sb3IgPSB2ZWM0KHksIHUsIHYsIDEpICogWVVWMlJHQjsnLFxuICAgICAgICAnfSdcbiAgICAgIF0uam9pbignXFxuJyk7XG4gICAgfSBlbHNlIGlmICh0aGlzLmNocm9tYSA9PT0gNDIyKSB7XG4gICAgICB2ZXJ0ZXhTaGFkZXJTY3JpcHQgPSBbXG4gICAgICAgICdhdHRyaWJ1dGUgdmVjNCB2ZXJ0ZXhQb3M7JyxcbiAgICAgICAgJ2F0dHJpYnV0ZSB2ZWM0IHRleHR1cmVQb3M7JyxcbiAgICAgICAgJ3ZhcnlpbmcgdmVjMiB0ZXh0dXJlQ29vcmQ7JyxcblxuICAgICAgICAndm9pZCBtYWluKCknLFxuICAgICAgICAneycsXG4gICAgICAgICcgIGdsX1Bvc2l0aW9uID0gdmVydGV4UG9zOycsXG4gICAgICAgICcgIHRleHR1cmVDb29yZCA9IHRleHR1cmVQb3MueHk7JyxcbiAgICAgICAgJ30nXG4gICAgICBdLmpvaW4oJ1xcbicpO1xuXG4gICAgICBmcmFnbWVudFNoYWRlclNjcmlwdCA9IFtcbiAgICAgICAgJ3ByZWNpc2lvbiBoaWdocCBmbG9hdDsnLFxuICAgICAgICAndmFyeWluZyBoaWdocCB2ZWMyIHRleHR1cmVDb29yZDsnLFxuICAgICAgICAndW5pZm9ybSBzYW1wbGVyMkQgc2FtcGxlcjsnLFxuICAgICAgICAndW5pZm9ybSBoaWdocCB2ZWMyIHJlc29sdXRpb247JyxcbiAgICAgICAgJ3VuaWZvcm0gbWF0NCBZVVYyUkdCOycsXG5cbiAgICAgICAgJ3ZvaWQgbWFpbih2b2lkKSB7JyxcblxuICAgICAgICAnICBoaWdocCBmbG9hdCB0ZXhQaXhYID0gMS4wIC8gcmVzb2x1dGlvbi54OycsXG4gICAgICAgICcgIGhpZ2hwIGZsb2F0IGxvZ1BpeFggPSAyLjAgLyByZXNvbHV0aW9uLng7JywgLy8gaGFsZiB0aGUgcmVzb2x1dGlvbiBvZiB0aGUgdGV4dHVyZVxuICAgICAgICAnICBoaWdocCBmbG9hdCBsb2dIYWxmUGl4WCA9IDQuMCAvIHJlc29sdXRpb24ueDsnLCAvLyBoYWxmIG9mIHRoZSBsb2dpY2FsIHJlc29sdXRpb24gc28gZXZlcnkgNHRoIHBpeGVsXG4gICAgICAgICcgIGhpZ2hwIGZsb2F0IHN0ZXBzID0gZmxvb3IodGV4dHVyZUNvb3JkLnggLyBsb2dQaXhYKTsnLFxuICAgICAgICAnICBoaWdocCBmbG9hdCB1dlN0ZXBzID0gZmxvb3IodGV4dHVyZUNvb3JkLnggLyBsb2dIYWxmUGl4WCk7JyxcbiAgICAgICAgJyAgaGlnaHAgZmxvYXQgeSA9IHRleHR1cmUyRChzYW1wbGVyLCB2ZWMyKChsb2dQaXhYICogc3RlcHMpICsgdGV4UGl4WCwgdGV4dHVyZUNvb3JkLnkpKS5yOycsXG4gICAgICAgICcgIGhpZ2hwIGZsb2F0IHUgPSB0ZXh0dXJlMkQoc2FtcGxlciwgdmVjMigobG9nSGFsZlBpeFggKiB1dlN0ZXBzKSwgdGV4dHVyZUNvb3JkLnkpKS5yOycsXG4gICAgICAgICcgIGhpZ2hwIGZsb2F0IHYgPSB0ZXh0dXJlMkQoc2FtcGxlciwgdmVjMigobG9nSGFsZlBpeFggKiB1dlN0ZXBzKSArIHRleFBpeFggKyB0ZXhQaXhYLCB0ZXh0dXJlQ29vcmQueSkpLnI7JyxcblxuICAgICAgICAvLyAnICBoaWdocCBmbG9hdCB5ID0gdGV4dHVyZTJEKHNhbXBsZXIsICB0ZXh0dXJlQ29vcmQpLnI7JyxcbiAgICAgICAgLy8gJyAgZ2xfRnJhZ0NvbG9yID0gdmVjNCh5LCB1LCB2LCAxKSAqIFlVVjJSR0I7JyxcbiAgICAgICAgJyAgZ2xfRnJhZ0NvbG9yID0gdmVjNCh5LCB1LCB2LCAxLjApICogWVVWMlJHQjsnLFxuICAgICAgICAnfSdcbiAgICAgIF0uam9pbignXFxuJyk7XG4gICAgfTtcblxuICAgIHZhciBZVVYyUkdCID0gW1xuICAgICAgMS4xNjQzOCwgMC4wMDAwMCwgMS41OTYwMywgLTAuODcwNzksXG4gICAgICAxLjE2NDM4LCAtMC4zOTE3NiwgLTAuODEyOTcsIDAuNTI5NTksXG4gICAgICAxLjE2NDM4LCAyLjAxNzIzLCAwLjAwMDAwLCAtMS4wODEzOSxcbiAgICAgIDAsIDAsIDAsIDFcbiAgICBdO1xuICAgIHZhciB2ZXJ0ZXhTaGFkZXIgPSBnbC5jcmVhdGVTaGFkZXIoZ2wuVkVSVEVYX1NIQURFUik7XG4gICAgZ2wuc2hhZGVyU291cmNlKHZlcnRleFNoYWRlciwgdmVydGV4U2hhZGVyU2NyaXB0KTtcbiAgICBnbC5jb21waWxlU2hhZGVyKHZlcnRleFNoYWRlcik7XG4gICAgaWYgKCFnbC5nZXRTaGFkZXJQYXJhbWV0ZXIodmVydGV4U2hhZGVyLCBnbC5DT01QSUxFX1NUQVRVUykpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdWZXJ0ZXggc2hhZGVyIGZhaWxlZCB0byBjb21waWxlOiAnICsgZ2wuZ2V0U2hhZGVySW5mb0xvZyh2ZXJ0ZXhTaGFkZXIpKTtcbiAgICB9XG5cbiAgICB2YXIgZnJhZ21lbnRTaGFkZXIgPSBnbC5jcmVhdGVTaGFkZXIoZ2wuRlJBR01FTlRfU0hBREVSKTtcbiAgICBnbC5zaGFkZXJTb3VyY2UoZnJhZ21lbnRTaGFkZXIsIGZyYWdtZW50U2hhZGVyU2NyaXB0KTtcbiAgICBnbC5jb21waWxlU2hhZGVyKGZyYWdtZW50U2hhZGVyKTtcbiAgICBpZiAoIWdsLmdldFNoYWRlclBhcmFtZXRlcihmcmFnbWVudFNoYWRlciwgZ2wuQ09NUElMRV9TVEFUVVMpKSB7XG4gICAgICBjb25zb2xlLmxvZygnRnJhZ21lbnQgc2hhZGVyIGZhaWxlZCB0byBjb21waWxlOiAnICsgZ2wuZ2V0U2hhZGVySW5mb0xvZyhmcmFnbWVudFNoYWRlcikpO1xuICAgIH1cblxuICAgIHZhciBwcm9ncmFtID0gZ2wuY3JlYXRlUHJvZ3JhbSgpO1xuICAgIGdsLmF0dGFjaFNoYWRlcihwcm9ncmFtLCB2ZXJ0ZXhTaGFkZXIpO1xuICAgIGdsLmF0dGFjaFNoYWRlcihwcm9ncmFtLCBmcmFnbWVudFNoYWRlcik7XG4gICAgZ2wubGlua1Byb2dyYW0ocHJvZ3JhbSk7XG4gICAgaWYgKCFnbC5nZXRQcm9ncmFtUGFyYW1ldGVyKHByb2dyYW0sIGdsLkxJTktfU1RBVFVTKSkge1xuICAgICAgY29uc29sZS5sb2coJ1Byb2dyYW0gZmFpbGVkIHRvIGNvbXBpbGU6ICcgKyBnbC5nZXRQcm9ncmFtSW5mb0xvZyhwcm9ncmFtKSk7XG4gICAgfVxuXG4gICAgZ2wudXNlUHJvZ3JhbShwcm9ncmFtKTtcblxuICAgIHZhciBZVVYyUkdCUmVmID0gZ2wuZ2V0VW5pZm9ybUxvY2F0aW9uKHByb2dyYW0sICdZVVYyUkdCJyk7XG4gICAgZ2wudW5pZm9ybU1hdHJpeDRmdihZVVYyUkdCUmVmLCBmYWxzZSwgWVVWMlJHQik7XG5cbiAgICB0aGlzLnNoYWRlclByb2dyYW0gPSBwcm9ncmFtO1xuICB9XG5cbiAgX2luaXRCdWZmZXJzICgpIHtcbiAgICB2YXIgZ2wgPSB0aGlzLmNvbnRleHRHTDtcbiAgICB2YXIgcHJvZ3JhbSA9IHRoaXMuc2hhZGVyUHJvZ3JhbTtcblxuICAgIHZhciB2ZXJ0ZXhQb3NCdWZmZXIgPSBnbC5jcmVhdGVCdWZmZXIoKTtcbiAgICBnbC5iaW5kQnVmZmVyKGdsLkFSUkFZX0JVRkZFUiwgdmVydGV4UG9zQnVmZmVyKTtcbiAgICBnbC5idWZmZXJEYXRhKGdsLkFSUkFZX0JVRkZFUiwgbmV3IEZsb2F0MzJBcnJheShbMSwgMSwgLTEsIDEsIDEsIC0xLCAtMSwgLTFdKSwgZ2wuU1RBVElDX0RSQVcpO1xuXG4gICAgdmFyIHZlcnRleFBvc1JlZiA9IGdsLmdldEF0dHJpYkxvY2F0aW9uKHByb2dyYW0sICd2ZXJ0ZXhQb3MnKTtcbiAgICBnbC5lbmFibGVWZXJ0ZXhBdHRyaWJBcnJheSh2ZXJ0ZXhQb3NSZWYpO1xuICAgIGdsLnZlcnRleEF0dHJpYlBvaW50ZXIodmVydGV4UG9zUmVmLCAyLCBnbC5GTE9BVCwgZmFsc2UsIDAsIDApO1xuXG4gICAgdmFyIHRleHR1cmVQb3NCdWZmZXIgPSBnbC5jcmVhdGVCdWZmZXIoKTtcbiAgICBnbC5iaW5kQnVmZmVyKGdsLkFSUkFZX0JVRkZFUiwgdGV4dHVyZVBvc0J1ZmZlcik7XG4gICAgZ2wuYnVmZmVyRGF0YShnbC5BUlJBWV9CVUZGRVIsIG5ldyBGbG9hdDMyQXJyYXkoWzEsIDAsIDAsIDAsIDEsIDEsIDAsIDFdKSwgZ2wuU1RBVElDX0RSQVcpO1xuXG4gICAgdmFyIHRleHR1cmVQb3NSZWYgPSBnbC5nZXRBdHRyaWJMb2NhdGlvbihwcm9ncmFtLCAndGV4dHVyZVBvcycpO1xuICAgIGdsLmVuYWJsZVZlcnRleEF0dHJpYkFycmF5KHRleHR1cmVQb3NSZWYpO1xuICAgIGdsLnZlcnRleEF0dHJpYlBvaW50ZXIodGV4dHVyZVBvc1JlZiwgMiwgZ2wuRkxPQVQsIGZhbHNlLCAwLCAwKTtcblxuICAgIHRoaXMudGV4dHVyZVBvc0J1ZmZlciA9IHRleHR1cmVQb3NCdWZmZXI7XG5cbiAgICBpZiAodGhpcy5jaHJvbWEgPT09IDQyMCkge1xuICAgICAgdmFyIHVUZXh0dXJlUG9zQnVmZmVyID0gZ2wuY3JlYXRlQnVmZmVyKCk7XG4gICAgICBnbC5iaW5kQnVmZmVyKGdsLkFSUkFZX0JVRkZFUiwgdVRleHR1cmVQb3NCdWZmZXIpO1xuICAgICAgZ2wuYnVmZmVyRGF0YShnbC5BUlJBWV9CVUZGRVIsIG5ldyBGbG9hdDMyQXJyYXkoWzEsIDAsIDAsIDAsIDEsIDEsIDAsIDFdKSwgZ2wuU1RBVElDX0RSQVcpO1xuXG4gICAgICB2YXIgdVRleHR1cmVQb3NSZWYgPSBnbC5nZXRBdHRyaWJMb2NhdGlvbihwcm9ncmFtLCAndVRleHR1cmVQb3MnKTtcbiAgICAgIGdsLmVuYWJsZVZlcnRleEF0dHJpYkFycmF5KHVUZXh0dXJlUG9zUmVmKTtcbiAgICAgIGdsLnZlcnRleEF0dHJpYlBvaW50ZXIodVRleHR1cmVQb3NSZWYsIDIsIGdsLkZMT0FULCBmYWxzZSwgMCwgMCk7XG5cbiAgICAgIHRoaXMudVRleHR1cmVQb3NCdWZmZXIgPSB1VGV4dHVyZVBvc0J1ZmZlcjtcblxuICAgICAgdmFyIHZUZXh0dXJlUG9zQnVmZmVyID0gZ2wuY3JlYXRlQnVmZmVyKCk7XG4gICAgICBnbC5iaW5kQnVmZmVyKGdsLkFSUkFZX0JVRkZFUiwgdlRleHR1cmVQb3NCdWZmZXIpO1xuICAgICAgZ2wuYnVmZmVyRGF0YShnbC5BUlJBWV9CVUZGRVIsIG5ldyBGbG9hdDMyQXJyYXkoWzEsIDAsIDAsIDAsIDEsIDEsIDAsIDFdKSwgZ2wuU1RBVElDX0RSQVcpO1xuXG4gICAgICB2YXIgdlRleHR1cmVQb3NSZWYgPSBnbC5nZXRBdHRyaWJMb2NhdGlvbihwcm9ncmFtLCAndlRleHR1cmVQb3MnKTtcbiAgICAgIGdsLmVuYWJsZVZlcnRleEF0dHJpYkFycmF5KHZUZXh0dXJlUG9zUmVmKTtcbiAgICAgIGdsLnZlcnRleEF0dHJpYlBvaW50ZXIodlRleHR1cmVQb3NSZWYsIDIsIGdsLkZMT0FULCBmYWxzZSwgMCwgMCk7XG5cbiAgICAgIHRoaXMudlRleHR1cmVQb3NCdWZmZXIgPSB2VGV4dHVyZVBvc0J1ZmZlcjtcbiAgICB9O1xuICB9O1xuXG4gIF9pbml0VGV4dHVyZXMgKCkge1xuICAgIHZhciBnbCA9IHRoaXMuY29udGV4dEdMO1xuICAgIHZhciBwcm9ncmFtID0gdGhpcy5zaGFkZXJQcm9ncmFtO1xuXG4gICAgaWYgKHRoaXMuY2hyb21hID09PSA0MjApIHtcbiAgICAgIHZhciB5VGV4dHVyZVJlZiA9IHRoaXMuX2luaXRUZXh0dXJlKCk7XG4gICAgICB2YXIgeVNhbXBsZXJSZWYgPSBnbC5nZXRVbmlmb3JtTG9jYXRpb24ocHJvZ3JhbSwgJ3lTYW1wbGVyJyk7XG4gICAgICBnbC51bmlmb3JtMWkoeVNhbXBsZXJSZWYsIDApO1xuICAgICAgdGhpcy55VGV4dHVyZVJlZiA9IHlUZXh0dXJlUmVmO1xuXG4gICAgICB2YXIgdVRleHR1cmVSZWYgPSB0aGlzLl9pbml0VGV4dHVyZSgpO1xuICAgICAgdmFyIHVTYW1wbGVyUmVmID0gZ2wuZ2V0VW5pZm9ybUxvY2F0aW9uKHByb2dyYW0sICd1U2FtcGxlcicpO1xuICAgICAgZ2wudW5pZm9ybTFpKHVTYW1wbGVyUmVmLCAxKTtcbiAgICAgIHRoaXMudVRleHR1cmVSZWYgPSB1VGV4dHVyZVJlZjtcblxuICAgICAgdmFyIHZUZXh0dXJlUmVmID0gdGhpcy5faW5pdFRleHR1cmUoKTtcbiAgICAgIHZhciB2U2FtcGxlclJlZiA9IGdsLmdldFVuaWZvcm1Mb2NhdGlvbihwcm9ncmFtLCAndlNhbXBsZXInKTtcbiAgICAgIGdsLnVuaWZvcm0xaSh2U2FtcGxlclJlZiwgMik7XG4gICAgICB0aGlzLnZUZXh0dXJlUmVmID0gdlRleHR1cmVSZWY7XG4gICAgfSBlbHNlIGlmICh0aGlzLmNocm9tYSA9PT0gNDIyKSB7XG4gICAgICAvLyBvbmx5IG9uZSB0ZXh0dXJlIGZvciA0MjJcbiAgICAgIHZhciB0ZXh0dXJlUmVmID0gdGhpcy5faW5pdFRleHR1cmUoKTtcbiAgICAgIHZhciBzYW1wbGVyUmVmID0gZ2wuZ2V0VW5pZm9ybUxvY2F0aW9uKHByb2dyYW0sICdzYW1wbGVyJyk7XG4gICAgICBnbC51bmlmb3JtMWkoc2FtcGxlclJlZiwgMCk7XG4gICAgICB0aGlzLnRleHR1cmVSZWYgPSB0ZXh0dXJlUmVmO1xuICAgIH07XG4gIH1cblxuICBfaW5pdFRleHR1cmUgKCkge1xuICAgIHZhciBnbCA9IHRoaXMuY29udGV4dEdMO1xuXG4gICAgdmFyIHRleHR1cmVSZWYgPSBnbC5jcmVhdGVUZXh0dXJlKCk7XG4gICAgZ2wuYmluZFRleHR1cmUoZ2wuVEVYVFVSRV8yRCwgdGV4dHVyZVJlZik7XG4gICAgZ2wudGV4UGFyYW1ldGVyaShnbC5URVhUVVJFXzJELCBnbC5URVhUVVJFX01BR19GSUxURVIsIGdsLk5FQVJFU1QpO1xuICAgIGdsLnRleFBhcmFtZXRlcmkoZ2wuVEVYVFVSRV8yRCwgZ2wuVEVYVFVSRV9NSU5fRklMVEVSLCBnbC5ORUFSRVNUKTtcbiAgICBnbC50ZXhQYXJhbWV0ZXJpKGdsLlRFWFRVUkVfMkQsIGdsLlRFWFRVUkVfV1JBUF9TLCBnbC5DTEFNUF9UT19FREdFKTtcbiAgICBnbC50ZXhQYXJhbWV0ZXJpKGdsLlRFWFRVUkVfMkQsIGdsLlRFWFRVUkVfV1JBUF9ULCBnbC5DTEFNUF9UT19FREdFKTtcbiAgICBnbC5iaW5kVGV4dHVyZShnbC5URVhUVVJFXzJELCBudWxsKTtcblxuICAgIHJldHVybiB0ZXh0dXJlUmVmO1xuICB9XG5cbiAgX2RyYXdQaWN0dXJlR0wgKGRhdGEsIHdpZHRoLCBoZWlnaHQpIHtcbiAgICBpZiAodGhpcy5jaHJvbWEgPT09IDQyMCkge1xuICAgICAgbGV0IG5XaWR0aCA9IHdpZHRoO1xuICAgICAgdmFyIHlsZW4gPSB3aWR0aCAqIGhlaWdodDtcbiAgICAgIHZhciB1dmxlbiA9ICh3aWR0aCAvIDIpICogKGhlaWdodCAvIDIpO1xuICAgICAgZGF0YSA9IG5ldyBVaW50OEFycmF5KGRhdGEpO1xuICAgICAgbGV0IHJlbmRlckRhdGEgPSB7XG4gICAgICAgIHlEYXRhOiBkYXRhLnN1YmFycmF5KDAsIHlsZW4pLFxuICAgICAgICB1RGF0YTogZGF0YS5zdWJhcnJheSh5bGVuLCB5bGVuICsgdXZsZW4pLFxuICAgICAgICB2RGF0YTogZGF0YS5zdWJhcnJheSh5bGVuICsgdXZsZW4sIHlsZW4gKyB1dmxlbiArIHV2bGVuKVxuICAgICAgfVxuICAgICAgaWYgKHdpZHRoICUgNCA+IDApIHtcbiAgICAgICAgbldpZHRoID0gd2lkdGggKyA0IC0gKHdpZHRoICUgNCk7XG4gICAgICAgIGxldCB5QXJyYXkgPSBuZXcgVWludDhBcnJheShuV2lkdGggKiBoZWlnaHQpO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGhlaWdodDsgaSsrKSB7XG4gICAgICAgICAgeUFycmF5LnNldChyZW5kZXJEYXRhLnlEYXRhLnN1YmFycmF5KGkgKiB3aWR0aCwgKGkgKyAxKSAqIHdpZHRoKSwgaSAqIG5XaWR0aCk7XG4gICAgICAgIH1cbiAgICAgICAgcmVuZGVyRGF0YS55RGF0YSA9IHlBcnJheTtcbiAgICAgIH1cblxuICAgICAgaWYgKCh3aWR0aCAvIDIpICUgNCA+IDApIHtcbiAgICAgICAgbldpZHRoID0gKHdpZHRoIC8gMikgKyA0IC0gKCh3aWR0aCAvIDIpICUgNCk7XG4gICAgICAgIGxldCB1QXJyYXkgPSBuZXcgVWludDhBcnJheShuV2lkdGggKiBoZWlnaHQgLyAyKTtcbiAgICAgICAgbGV0IHZBcnJheSA9IG5ldyBVaW50OEFycmF5KG5XaWR0aCAqIGhlaWdodCAvIDIpO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGhlaWdodCAvIDI7IGkrKykge1xuICAgICAgICAgIHVBcnJheS5zZXQocmVuZGVyRGF0YS51RGF0YS5zdWJhcnJheShpICogd2lkdGggLyAyLCAoaSArIDEpICogd2lkdGggLyAyKSwgaSAqIG5XaWR0aCk7XG4gICAgICAgICAgdkFycmF5LnNldChyZW5kZXJEYXRhLnZEYXRhLnN1YmFycmF5KGkgKiB3aWR0aCAvIDIsIChpICsgMSkgKiB3aWR0aCAvIDIpLCBpICogbldpZHRoKTtcbiAgICAgICAgfVxuICAgICAgICByZW5kZXJEYXRhLnVEYXRhID0gdUFycmF5O1xuICAgICAgICByZW5kZXJEYXRhLnZEYXRhID0gdkFycmF5O1xuICAgICAgfVxuICAgICAgdGhpcy5fZHJhd1BpY3R1cmVHTDQyMChyZW5kZXJEYXRhLCB3aWR0aCwgaGVpZ2h0KTtcbiAgICB9IGVsc2UgaWYgKHRoaXMuY2hyb21hID09PSA0MjIpIHtcbiAgICAgIGRhdGEgPSBuZXcgVWludDhBcnJheShkYXRhKTtcbiAgICAgIHRoaXMuX2RyYXdQaWN0dXJlR0w0MjIod2lkdGgsIGhlaWdodCwgZGF0YSk7XG4gICAgfVxuICB9XG5cbiAgX2RyYXdQaWN0dXJlR0w0MjIgKGRhdGEsIHdpZHRoLCBoZWlnaHQpIHtcbiAgICB2YXIgZ2wgPSB0aGlzLmNvbnRleHRHTDtcbiAgICB2YXIgdGV4dHVyZVBvc0J1ZmZlciA9IHRoaXMudGV4dHVyZVBvc0J1ZmZlcjtcblxuICAgIHZhciB0ZXh0dXJlUmVmID0gdGhpcy50ZXh0dXJlUmVmO1xuXG4gICAgdmFyIGRhdGFQZXJSb3cgPSB3aWR0aCAqIDI7XG4gICAgdmFyIHJvd0NudCA9IGhlaWdodDtcblxuICAgIGdsLnZpZXdwb3J0KDAsIDAsIHdpZHRoLCBoZWlnaHQpO1xuXG4gICAgdmFyIHRUb3AgPSAwO1xuICAgIHZhciB0TGVmdCA9IDA7XG4gICAgdmFyIHRCb3R0b20gPSBoZWlnaHQgLyByb3dDbnQ7XG4gICAgdmFyIHRSaWdodCA9IHdpZHRoIC8gKGRhdGFQZXJSb3cgLyAyKTtcbiAgICB2YXIgdGV4dHVyZVBvc1ZhbHVlcyA9IG5ldyBGbG9hdDMyQXJyYXkoW3RSaWdodCwgdFRvcCwgdExlZnQsIHRUb3AsIHRSaWdodCwgdEJvdHRvbSwgdExlZnQsIHRCb3R0b21dKTtcblxuICAgIGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCB0ZXh0dXJlUG9zQnVmZmVyKTtcbiAgICBnbC5idWZmZXJEYXRhKGdsLkFSUkFZX0JVRkZFUiwgdGV4dHVyZVBvc1ZhbHVlcywgZ2wuRFlOQU1JQ19EUkFXKTtcblxuICAgIGdsLnVuaWZvcm0yZihnbC5nZXRVbmlmb3JtTG9jYXRpb24odGhpcy5zaGFkZXJQcm9ncmFtLCAncmVzb2x1dGlvbicpLCBkYXRhUGVyUm93LCBoZWlnaHQpO1xuXG4gICAgZ2wuYWN0aXZlVGV4dHVyZShnbC5URVhUVVJFMCk7XG4gICAgZ2wuYmluZFRleHR1cmUoZ2wuVEVYVFVSRV8yRCwgdGV4dHVyZVJlZik7XG4gICAgZ2wudGV4SW1hZ2UyRChnbC5URVhUVVJFXzJELCAwLCBnbC5MVU1JTkFOQ0UsIGRhdGFQZXJSb3csIHJvd0NudCwgMCwgZ2wuTFVNSU5BTkNFLCBnbC5VTlNJR05FRF9CWVRFLCBkYXRhKTtcblxuICAgIGdsLmRyYXdBcnJheXMoZ2wuVFJJQU5HTEVfU1RSSVAsIDAsIDQpO1xuICB9XG5cbiAgX2RyYXdQaWN0dXJlR0w0MjAgKGRhdGEsIHdpZHRoLCBoZWlnaHQpIHtcbiAgICB2YXIgZ2wgPSB0aGlzLmNvbnRleHRHTDtcbiAgICB2YXIgdGV4dHVyZVBvc0J1ZmZlciA9IHRoaXMudGV4dHVyZVBvc0J1ZmZlcjtcbiAgICB2YXIgdVRleHR1cmVQb3NCdWZmZXIgPSB0aGlzLnVUZXh0dXJlUG9zQnVmZmVyO1xuICAgIHZhciB2VGV4dHVyZVBvc0J1ZmZlciA9IHRoaXMudlRleHR1cmVQb3NCdWZmZXI7XG5cbiAgICB2YXIgeVRleHR1cmVSZWYgPSB0aGlzLnlUZXh0dXJlUmVmO1xuICAgIHZhciB1VGV4dHVyZVJlZiA9IHRoaXMudVRleHR1cmVSZWY7XG4gICAgdmFyIHZUZXh0dXJlUmVmID0gdGhpcy52VGV4dHVyZVJlZjtcblxuICAgIHZhciB5RGF0YSA9IGRhdGEueURhdGE7XG4gICAgdmFyIHVEYXRhID0gZGF0YS51RGF0YTtcbiAgICB2YXIgdkRhdGEgPSBkYXRhLnZEYXRhO1xuXG4gICAgdmFyIHlEYXRhUGVyUm93ID0gd2lkdGg7XG4gICAgdmFyIHlSb3dDbnQgPSBoZWlnaHQ7XG5cbiAgICB2YXIgdURhdGFQZXJSb3cgPSB3aWR0aCAvIDI7XG4gICAgdmFyIHVSb3dDbnQgPSBoZWlnaHQgLyAyO1xuXG4gICAgdmFyIHZEYXRhUGVyUm93ID0gdURhdGFQZXJSb3c7XG4gICAgdmFyIHZSb3dDbnQgPSB1Um93Q250O1xuICAgIGdsLnZpZXdwb3J0KDAsIDAsIHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0KTtcblxuICAgIHZhciB0VG9wID0gMDtcbiAgICB2YXIgdExlZnQgPSAwO1xuICAgIHZhciB0Qm90dG9tID0gaGVpZ2h0IC8geVJvd0NudDtcbiAgICB2YXIgdFJpZ2h0ID0gd2lkdGggLyB5RGF0YVBlclJvdztcbiAgICB2YXIgdGV4dHVyZVBvc1ZhbHVlcyA9IG5ldyBGbG9hdDMyQXJyYXkoW3RSaWdodCwgdFRvcCwgdExlZnQsIHRUb3AsIHRSaWdodCwgdEJvdHRvbSwgdExlZnQsIHRCb3R0b21dKTtcblxuICAgIGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCB0ZXh0dXJlUG9zQnVmZmVyKTtcbiAgICBnbC5idWZmZXJEYXRhKGdsLkFSUkFZX0JVRkZFUiwgdGV4dHVyZVBvc1ZhbHVlcywgZ2wuRFlOQU1JQ19EUkFXKTtcblxuXG4gICAgdEJvdHRvbSA9IChoZWlnaHQgLyAyKSAvIHVSb3dDbnQ7XG4gICAgdFJpZ2h0ID0gKHdpZHRoIC8gMikgLyB1RGF0YVBlclJvdztcbiAgICB2YXIgdVRleHR1cmVQb3NWYWx1ZXMgPSBuZXcgRmxvYXQzMkFycmF5KFt0UmlnaHQsIHRUb3AsIHRMZWZ0LCB0VG9wLCB0UmlnaHQsIHRCb3R0b20sIHRMZWZ0LCB0Qm90dG9tXSk7XG5cbiAgICBnbC5iaW5kQnVmZmVyKGdsLkFSUkFZX0JVRkZFUiwgdVRleHR1cmVQb3NCdWZmZXIpO1xuICAgIGdsLmJ1ZmZlckRhdGEoZ2wuQVJSQVlfQlVGRkVSLCB1VGV4dHVyZVBvc1ZhbHVlcywgZ2wuRFlOQU1JQ19EUkFXKTtcblxuICAgIHRCb3R0b20gPSAoaGVpZ2h0IC8gMikgLyB2Um93Q250O1xuICAgIHRSaWdodCA9ICh3aWR0aCAvIDIpIC8gdkRhdGFQZXJSb3c7XG5cbiAgICB2YXIgdlRleHR1cmVQb3NWYWx1ZXMgPSBuZXcgRmxvYXQzMkFycmF5KFt0UmlnaHQsIHRUb3AsIHRMZWZ0LCB0VG9wLCB0UmlnaHQsIHRCb3R0b20sIHRMZWZ0LCB0Qm90dG9tXSk7XG5cbiAgICBnbC5iaW5kQnVmZmVyKGdsLkFSUkFZX0JVRkZFUiwgdlRleHR1cmVQb3NCdWZmZXIpO1xuICAgIGdsLmJ1ZmZlckRhdGEoZ2wuQVJSQVlfQlVGRkVSLCB2VGV4dHVyZVBvc1ZhbHVlcywgZ2wuRFlOQU1JQ19EUkFXKTtcbiAgICBcbiAgICBnbC5hY3RpdmVUZXh0dXJlKGdsLlRFWFRVUkUwKTtcbiAgICBnbC5iaW5kVGV4dHVyZShnbC5URVhUVVJFXzJELCB5VGV4dHVyZVJlZik7XG4gICAgZ2wudGV4SW1hZ2UyRChnbC5URVhUVVJFXzJELCAwLCBnbC5MVU1JTkFOQ0UsIHlEYXRhUGVyUm93LCB5Um93Q250LCAwLCBnbC5MVU1JTkFOQ0UsIGdsLlVOU0lHTkVEX0JZVEUsIHlEYXRhKTtcblxuICAgIGdsLmFjdGl2ZVRleHR1cmUoZ2wuVEVYVFVSRTEpO1xuICAgIGdsLmJpbmRUZXh0dXJlKGdsLlRFWFRVUkVfMkQsIHVUZXh0dXJlUmVmKTtcbiAgICBnbC50ZXhJbWFnZTJEKGdsLlRFWFRVUkVfMkQsIDAsIGdsLkxVTUlOQU5DRSwgdURhdGFQZXJSb3csIHVSb3dDbnQsIDAsIGdsLkxVTUlOQU5DRSwgZ2wuVU5TSUdORURfQllURSwgdURhdGEpO1xuXG4gICAgZ2wuYWN0aXZlVGV4dHVyZShnbC5URVhUVVJFMik7XG4gICAgZ2wuYmluZFRleHR1cmUoZ2wuVEVYVFVSRV8yRCwgdlRleHR1cmVSZWYpO1xuICAgIGdsLnRleEltYWdlMkQoZ2wuVEVYVFVSRV8yRCwgMCwgZ2wuTFVNSU5BTkNFLCB2RGF0YVBlclJvdywgdlJvd0NudCwgMCwgZ2wuTFVNSU5BTkNFLCBnbC5VTlNJR05FRF9CWVRFLCB2RGF0YSk7XG5cbiAgICBnbC5kcmF3QXJyYXlzKGdsLlRSSUFOR0xFX1NUUklQLCAwLCA0KTtcbiAgfVxuXG4gIF9kcmF3UGljdHVyZVJHQiAoZGF0YSkge1xuXG4gIH1cblxuICByZW5kZXIgKGRhdGEsIHdpZHRoLCBoZWlnaHQpIHtcbiAgICB2YXIgZ2wgPSB0aGlzLmNvbnRleHRHTDtcbiAgICBpZiAoZ2wpIHtcbiAgICAgIHRoaXMuX2RyYXdQaWN0dXJlR0woZGF0YSwgd2lkdGgsIGhlaWdodCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2RyYXdQaWN0dXJlUkdCKGRhdGEpO1xuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBZVVZDYW52YXM7XG4iLCJjb25zdCBpc09iamVjdEZpbGxlZCA9IChvYmopID0+IHtcbiAgZm9yIChsZXQga2V5IGluIG9iaikge1xuICAgIGlmIChvYmouaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgaWYgKG9ialtrZXldID09PSBudWxsKSB7XG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgfVxuICAgIH1cbiAgfVxuICByZXR1cm4gdHJ1ZVxufVxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNZWRpYUluZm8ge1xuICBjb25zdHJ1Y3RvciAoKSB7XG4gICAgdGhpcy5taW1lVHlwZSA9IG51bGxcbiAgICB0aGlzLmR1cmF0aW9uID0gbnVsbFxuXG4gICAgdGhpcy5oYXNWaWRlbyA9IG51bGxcbiAgICB0aGlzLnZpZGVvID0ge1xuICAgICAgY29kZWM6IG51bGwsXG4gICAgICB3aWR0aDogbnVsbCxcbiAgICAgIGhlaWdodDogbnVsbCxcbiAgICAgIHByb2ZpbGU6IG51bGwsXG4gICAgICBsZXZlbDogbnVsbCxcbiAgICAgIGZyYW1lUmF0ZToge1xuICAgICAgICBmaXhlZDogdHJ1ZSxcbiAgICAgICAgZnBzOiAyNSxcbiAgICAgICAgZnBzX251bTogMjUwMDAsXG4gICAgICAgIGZwc19kZW46IDEwMDBcbiAgICAgIH0sXG4gICAgICBjaHJvbWFGb3JtYXQ6IG51bGwsXG4gICAgICBwYXJSYXRpbzoge1xuICAgICAgICB3aWR0aDogMSxcbiAgICAgICAgaGVpZ2h0OiAxXG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5oYXNBdWRpbyA9IG51bGxcblxuICAgIHRoaXMuYXVkaW8gPSB7XG4gICAgICBjb2RlYzogbnVsbCxcbiAgICAgIHNhbXBsZVJhdGU6IG51bGwsXG4gICAgICBzYW1wbGVSYXRlSW5kZXg6IG51bGwsXG4gICAgICBjaGFubmVsQ291bnQ6IG51bGxcbiAgICB9XG4gIH1cblxuICBpc0NvbXBsZXRlICgpIHtcbiAgICByZXR1cm4gTWVkaWFJbmZvLmlzQmFzZUluZm9SZWFkeSh0aGlzKSAmJiBNZWRpYUluZm8uaXNWaWRlb1JlYWR5KHRoaXMpICYmIE1lZGlhSW5mby5pc0F1ZGlvUmVhZHkodGhpcylcbiAgfVxuXG4gIHN0YXRpYyBpc0Jhc2VJbmZvUmVhZHkgKG1lZGlhSW5mbykge1xuICAgIHJldHVybiBpc09iamVjdEZpbGxlZChtZWRpYUluZm8pXG4gIH1cblxuICBzdGF0aWMgaXNWaWRlb1JlYWR5IChtZWRpYUluZm8pIHtcbiAgICBpZiAoIW1lZGlhSW5mby5oYXNWaWRlbykge1xuICAgICAgcmV0dXJuIHRydWVcbiAgICB9XG5cbiAgICByZXR1cm4gaXNPYmplY3RGaWxsZWQobWVkaWFJbmZvLnZpZGVvKVxuICB9XG5cbiAgc3RhdGljIGlzQXVkaW9SZWFkeSAobWVkaWFJbmZvKSB7XG4gICAgaWYgKCFtZWRpYUluZm8uaGFzQXVkaW8pIHtcbiAgICAgIHJldHVybiB0cnVlXG4gICAgfVxuXG4gICAgcmV0dXJuIGlzT2JqZWN0RmlsbGVkKG1lZGlhSW5mby52aWRlbylcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgTWVkaWFTYW1wbGUge1xuICBjb25zdHJ1Y3RvciAoaW5mbykge1xuICAgIGxldCBfZGVmYXVsdCA9IE1lZGlhU2FtcGxlLmdldERlZmF1bHRJbmYoKVxuXG4gICAgaWYgKCFpbmZvIHx8IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChpbmZvKSAhPT0gJ1tvYmplY3QgT2JqZWN0XScpIHtcbiAgICAgIHJldHVybiBfZGVmYXVsdFxuICAgIH1cbiAgICBsZXQgc2FtcGxlID0gT2JqZWN0LmFzc2lnbih7fSwgX2RlZmF1bHQsIGluZm8pXG5cbiAgICBPYmplY3QuZW50cmllcyhzYW1wbGUpLmZvckVhY2goKFtrLCB2XSkgPT4ge1xuICAgICAgdGhpc1trXSA9IHZcbiAgICB9KVxuICB9XG5cbiAgc3RhdGljIGdldERlZmF1bHRJbmYgKCkge1xuICAgIHJldHVybiB7XG4gICAgICBkdHM6IG51bGwsXG4gICAgICBwdHM6IG51bGwsXG4gICAgICBkdXJhdGlvbjogbnVsbCxcbiAgICAgIHBvc2l0aW9uOiBudWxsLFxuICAgICAgaXNSQVA6IGZhbHNlLCAvLyBpcyBSYW5kb20gYWNjZXNzIHBvaW50XG4gICAgICBvcmlnaW5EdHM6IG51bGxcbiAgICB9XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIE1lZGlhU2VnbWVudExpc3Qge1xuXG4gICAgY29uc3RydWN0b3IgKHR5cGUpIHtcbiAgICAgICAgdGhpcy5fdHlwZSA9IHR5cGU7XG4gICAgICAgIHRoaXMuX2xpc3QgPSBbXTtcbiAgICAgICAgdGhpcy5fbGFzdEFwcGVuZExvY2F0aW9uID0gLTE7IC8vIGNhY2hlZCBsYXN0IGluc2VydCBsb2NhdGlvblxuICAgIH1cblxuICAgIGdldCB0eXBlICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3R5cGU7XG4gICAgfVxuXG4gICAgZ2V0IGxlbmd0aCAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9saXN0Lmxlbmd0aDtcbiAgICB9XG5cbiAgICBpc0VtcHR5ICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2xpc3QubGVuZ3RoID09PSAwO1xuICAgIH1cblxuICAgIGNsZWFyICgpIHtcbiAgICAgICAgdGhpcy5fbGlzdCA9IFtdO1xuICAgICAgICB0aGlzLl9sYXN0QXBwZW5kTG9jYXRpb24gPSAtMTtcbiAgICB9XG5cbiAgICBfc2VhcmNoTmVhcmVzdFNlZ21lbnRCZWZvcmUgKGJlZ2luRHRzKSB7XG4gICAgICAgIGxldCBsaXN0ID0gdGhpcy5fbGlzdDtcbiAgICAgICAgaWYgKGxpc3QubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gLTI7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGxhc3QgPSBsaXN0Lmxlbmd0aCAtIDE7XG4gICAgICAgIGxldCBtaWQgPSAwO1xuICAgICAgICBsZXQgbGJvdW5kID0gMDtcbiAgICAgICAgbGV0IHVib3VuZCA9IGxhc3Q7XG5cbiAgICAgICAgbGV0IGlkeCA9IDA7XG5cbiAgICAgICAgaWYgKGJlZ2luRHRzIDwgbGlzdFswXS5vcmlnaW5EdHMpIHtcbiAgICAgICAgICAgIGlkeCA9IC0xO1xuICAgICAgICAgICAgcmV0dXJuIGlkeDtcbiAgICAgICAgfVxuXG4gICAgICAgIHdoaWxlIChsYm91bmQgPD0gdWJvdW5kKSB7XG4gICAgICAgICAgICBtaWQgPSBsYm91bmQgKyBNYXRoLmZsb29yKCh1Ym91bmQgLSBsYm91bmQpIC8gMik7XG4gICAgICAgICAgICBpZiAobWlkID09PSBsYXN0IHx8IChiZWdpbkR0cyA+IGxpc3RbbWlkXS5sYXN0U2FtcGxlLm9yaWdpbkR0c1xuICAgICAgICAgICAgICAgICAgICAmJiAoYmVnaW5EdHMgPCBsaXN0W21pZCArIDFdLm9yaWdpbkR0cykpKSB7XG4gICAgICAgICAgICAgICAgaWR4ID0gbWlkO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChsaXN0W21pZF0ub3JpZ2luRHRzIDwgYmVnaW5EdHMpIHtcbiAgICAgICAgICAgICAgICBsYm91bmQgPSBtaWQgKyAxO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB1Ym91bmQgPSBtaWQgLSAxO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBpZHg7XG4gICAgfVxuXG4gICAgX3NlYXJjaE5lYXJlc3RTZWdtZW50QWZ0ZXIgKGJlZ2luRHRzKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9zZWFyY2hOZWFyZXN0U2VnbWVudEJlZm9yZShiZWdpbkR0cykgKyAxO1xuICAgIH1cblxuICAgIGFwcGVuZCAoc2VnbWVudCkge1xuICAgICAgICBsZXQgbGlzdCA9IHRoaXMuX2xpc3Q7XG4gICAgICAgIGxldCBsYXN0QXBwZW5kSWR4ID0gdGhpcy5fbGFzdEFwcGVuZExvY2F0aW9uO1xuICAgICAgICBsZXQgaW5zZXJ0SWR4ID0gMDtcblxuICAgICAgICBpZiAobGFzdEFwcGVuZElkeCAhPT0gLTEgJiYgbGFzdEFwcGVuZElkeCA8IGxpc3QubGVuZ3RoXG4gICAgICAgICAgICAmJiBzZWdtZW50Lm9yaWdpblN0YXJ0RHRzID49IGxpc3RbbGFzdEFwcGVuZElkeF0ubGFzdFNhbXBsZS5vcmlnaW5EdHNcbiAgICAgICAgICAgICYmICgobGFzdEFwcGVuZElkeCA9PT0gbGlzdC5sZW5ndGggLSAxKVxuICAgICAgICAgICAgICAgIHx8IChsYXN0QXBwZW5kSWR4IDwgbGlzdC5sZW5ndGggLSAxXG4gICAgICAgICAgICAgICAgICAgICYmIHNlZ21lbnQub3JpZ2luU3RhcnREdHMgPCBsaXN0W2xhc3RBcHBlbmRJZHggKyAxXS5vcmlnaW5TdGFydER0cykpKSB7XG4gICAgICAgICAgICBpbnNlcnRJZHggPSBsYXN0QXBwZW5kSWR4ICsgMTsgLy8gdXNlIGNhY2hlZCBsb2NhdGlvbiBpZHhcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmIChsaXN0Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBpbnNlcnRJZHggPSB0aGlzLl9zZWFyY2hOZWFyZXN0U2VnbWVudEJlZm9yZShzZWdtZW50Lm9yaWdpblN0YXJ0RHRzKSArIDE7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl9sYXN0QXBwZW5kTG9jYXRpb24gPSBpbnNlcnRJZHg7XG4gICAgICAgIHRoaXMuX2xpc3Quc3BsaWNlKGluc2VydElkeCwgMCwgc2VnbWVudCk7XG4gICAgfVxuXG4gICAgZ2V0TGFzdFNlZ21lbnRCZWZvcmUgKGJlZ2luRHRzKSB7XG4gICAgICAgIGxldCBpZHggPSB0aGlzLl9zZWFyY2hOZWFyZXN0U2VnbWVudEJlZm9yZShiZWdpbkR0cyk7XG4gICAgICAgIGlmIChpZHggPj0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2xpc3RbaWR4XTtcbiAgICAgICAgfSBlbHNlIHsgLy8gLTFcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZ2V0TGFzdFNhbXBsZUJlZm9yZSAoYmVnaW5EdHMpIHtcbiAgICAgICAgbGV0IHNlZ21lbnQgPSB0aGlzLmdldExhc3RTZWdtZW50QmVmb3JlKGJlZ2luRHRzKTtcbiAgICAgICAgaWYgKHNlZ21lbnQgIT09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybiBzZWdtZW50Lmxhc3RTYW1wbGU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGdldExhc3RSQVBCZWZvcmUgKGJlZ2luRHRzKSB7XG4gICAgICAgIGxldCBzZWdtZW50SWR4ID0gdGhpcy5fc2VhcmNoTmVhcmVzdFNlZ21lbnRCZWZvcmUoYmVnaW5EdHMpO1xuICAgICAgICBsZXQgcmFuZG9tQWNjZXNzUG9pbnRzID0gdGhpcy5fbGlzdFtzZWdtZW50SWR4XS5yYW5kb21BY2Nlc3NQb2ludHM7XG4gICAgICAgIHdoaWxlIChyYW5kb21BY2Nlc3NQb2ludHMubGVuZ3RoID09PSAwICYmIHNlZ21lbnRJZHggPiAwKSB7XG4gICAgICAgICAgICBzZWdtZW50SWR4LS07XG4gICAgICAgICAgICByYW5kb21BY2Nlc3NQb2ludHMgPSB0aGlzLl9saXN0W3NlZ21lbnRJZHhdLnJhbmRvbUFjY2Vzc1BvaW50cztcbiAgICAgICAgfVxuICAgICAgICBpZiAocmFuZG9tQWNjZXNzUG9pbnRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHJldHVybiByYW5kb21BY2Nlc3NQb2ludHNbcmFuZG9tQWNjZXNzUG9pbnRzLmxlbmd0aCAtIDFdO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICB9XG5cbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBNZWRpYVNlZ21lbnQge1xuICAgIGNvbnN0cnVjdG9yICgpIHtcbiAgICAgICAgdGhpcy5zdGFydER0cyA9IC0xO1xuICAgICAgICB0aGlzLmVuZER0cyA9IC0xO1xuICAgICAgICB0aGlzLnN0YXJ0UHRzID0gLTE7XG4gICAgICAgIHRoaXMuZW5kUHRzID0gLTE7XG4gICAgICAgIHRoaXMub3JpZ2luU3RhcnREdHMgPSAtMTtcbiAgICAgICAgdGhpcy5vcmlnaW5FbmREdHMgPSAtMTtcbiAgICAgICAgdGhpcy5yYW5kb21BY2Nlc3NQb2ludHMgPSBbXTtcbiAgICAgICAgdGhpcy5maXJzdFNhbXBsZSA9IG51bGw7XG4gICAgICAgIHRoaXMubGFzdFNhbXBsZSA9IG51bGw7XG4gICAgfVxuXG4gICAgYWRkUkFQIChzYW1wbGUpIHtcbiAgICAgICAgc2FtcGxlLmlzUkFQID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5yYW5kb21BY2Nlc3NQb2ludHMucHVzaChzYW1wbGUpO1xuICAgIH1cbn0iLCJleHBvcnQgY2xhc3MgQXVkaW9UcmFja01ldGEge1xuICBjb25zdHJ1Y3RvciAobWV0YSkge1xuICAgIGNvbnN0IF9kZWZhdWx0ID0ge1xuICAgICAgc2FtcGxlUmF0ZTogNDgwMDAsXG4gICAgICBjaGFubmVsQ291bnQ6IDIsXG4gICAgICBjb2RlYzogJ21wNGEuNDAuMicsXG4gICAgICBjb25maWc6IFs0MSwgNDAxLCAxMzYsIDBdLFxuICAgICAgZHVyYXRpb246IDAsXG4gICAgICBpZDogMixcbiAgICAgIHJlZlNhbXBsZUR1cmF0aW9uOiAyMSxcbiAgICAgIHNhbXBsZVJhdGVJbmRleDogMyxcbiAgICAgIHRpbWVzY2FsZTogMTAwMCxcbiAgICAgIHR5cGU6ICdhdWRpbydcbiAgICB9XG4gICAgaWYgKG1ldGEpIHtcbiAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKHt9LCBfZGVmYXVsdCwgbWV0YSlcbiAgICB9XG4gICAgcmV0dXJuIF9kZWZhdWx0XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIFZpZGVvVHJhY2tNZXRhIHtcbiAgY29uc3RydWN0b3IgKG1ldGEpIHtcbiAgICBjb25zdCBfZGVmYXVsdCA9IHtcbiAgICAgIGF2Y2M6IG51bGwsXG4gICAgICBzcHM6IG5ldyBVaW50OEFycmF5KDApLFxuICAgICAgcHBzOiBuZXcgVWludDhBcnJheSgwKSxcbiAgICAgIGNocm9tYUZvcm1hdDogNDIwLFxuICAgICAgY29kZWM6ICdhdmMxLjY0MDAyMCcsXG4gICAgICBjb2RlY0hlaWdodDogNzIwLFxuICAgICAgY29kZWNXaWR0aDogMTI4MCxcbiAgICAgIGR1cmF0aW9uOiAwLFxuICAgICAgZnJhbWVSYXRlOiB7XG4gICAgICAgIGZpeGVkOiB0cnVlLFxuICAgICAgICBmcHM6IDI1LFxuICAgICAgICBmcHNfbnVtOiAyNTAwMCxcbiAgICAgICAgZnBzX2RlbjogMTAwMFxuICAgICAgfSxcbiAgICAgIGlkOiAxLFxuICAgICAgbGV2ZWw6ICczLjInLFxuICAgICAgcHJlc2VudEhlaWdodDogNzIwLFxuICAgICAgcHJlc2VudFdpZHRoOiAxMjgwLFxuICAgICAgcHJvZmlsZTogJ0hpZ2gnLFxuICAgICAgcmVmU2FtcGxlRHVyYXRpb246IDQwLFxuICAgICAgcGFyUmF0aW86IHtcbiAgICAgICAgaGVpZ2h0OiAxLFxuICAgICAgICB3aWR0aDogMVxuICAgICAgfSxcbiAgICAgIHRpbWVzY2FsZTogMTAwMCxcbiAgICAgIHR5cGU6ICd2aWRlbydcbiAgICB9XG5cbiAgICBpZiAobWV0YSkge1xuICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oe30sIF9kZWZhdWx0LCBtZXRhKVxuICAgIH1cbiAgICByZXR1cm4gX2RlZmF1bHRcbiAgfVxufVxuIiwiZXhwb3J0IGNsYXNzIEF1ZGlvVHJhY2tTYW1wbGUge1xuICBjb25zdHJ1Y3RvciAoaW5mbykge1xuICAgIGxldCBfZGVmYXVsdCA9IEF1ZGlvVHJhY2tTYW1wbGUuZ2V0RGVmYXVsdCgpXG4gICAgaWYgKCFpbmZvKSB7XG4gICAgICByZXR1cm4gX2RlZmF1bHRcbiAgICB9XG4gICAgbGV0IHNhbXBsZSA9IE9iamVjdC5hc3NpZ24oe30sIF9kZWZhdWx0LCBpbmZvKVxuXG4gICAgcmV0dXJuIHNhbXBsZVxuICB9XG5cbiAgc3RhdGljIGdldERlZmF1bHQgKCkge1xuICAgIHJldHVybiB7XG4gICAgICBkdHM6IG51bGwsXG4gICAgICBwdHM6IG51bGwsXG4gICAgICBkYXRhOiBuZXcgVWludDhBcnJheSgpXG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBWaWRlb1RyYWNrU2FtcGxlIHtcbiAgY29uc3RydWN0b3IgKGluZm8pIHtcbiAgICBsZXQgX2RlZmF1bHQgPSBWaWRlb1RyYWNrU2FtcGxlLmdldERlZmF1bHQoKVxuXG4gICAgaWYgKCFpbmZvKSB7XG4gICAgICByZXR1cm4gX2RlZmF1bHRcbiAgICB9XG4gICAgbGV0IHNhbXBsZSA9IE9iamVjdC5hc3NpZ24oe30sIF9kZWZhdWx0LCBpbmZvKVxuXG4gICAgcmV0dXJuIHNhbXBsZVxuICB9XG5cbiAgc3RhdGljIGdldERlZmF1bHQgKCkge1xuICAgIHJldHVybiB7XG4gICAgICBkdHM6IG51bGwsXG4gICAgICBwdHM6IG51bGwsXG4gICAgICBpc0tleWZyYW1lOiBmYWxzZSwgLy8gaXMgUmFuZG9tIGFjY2VzcyBwb2ludFxuICAgICAgb3JpZ2luRHRzOiBudWxsLFxuICAgICAgZGF0YTogbmV3IFVpbnQ4QXJyYXkoKVxuICAgIH1cbiAgfVxufVxuIiwiY2xhc3MgTVNFIHtcbiAgY29uc3RydWN0b3IgKGNvbmZpZ3MpIHtcbiAgICB0aGlzLmNvbmZpZ3MgPSBPYmplY3QuYXNzaWduKHt9LCBjb25maWdzKTtcbiAgICB0aGlzLmNvbnRhaW5lciA9IHRoaXMuY29uZmlncy5jb250YWluZXI7XG4gICAgdGhpcy5tZWRpYVNvdXJjZSA9IG51bGw7XG4gICAgdGhpcy5zb3VyY2VCdWZmZXJzID0ge307XG4gICAgdGhpcy5wcmVsb2FkVGltZSA9IHRoaXMuY29uZmlncy5wcmVsb2FkVGltZSB8fCAxO1xuICB9XG5cbiAgaW5pdCAoKSB7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVuZGVmXG4gICAgdGhpcy5tZWRpYVNvdXJjZSA9IG5ldyBzZWxmLk1lZGlhU291cmNlKCk7XG4gICAgdGhpcy5tZWRpYVNvdXJjZS5hZGRFdmVudExpc3RlbmVyKCdzb3VyY2VvcGVuJywgdGhpcy5vblNvdXJjZU9wZW4uYmluZCh0aGlzKSk7XG4gICAgdGhpcy5jb250YWluZXIuc3JjID0gVVJMLmNyZWF0ZU9iamVjdFVSTCh0aGlzLm1lZGlhU291cmNlKTtcbiAgICB0aGlzLnVybCA9IHRoaXMuY29udGFpbmVyLnNyYztcbiAgICB0aGlzLmNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCd0aW1ldXBkYXRlJywgdGhpcy5vblRpbWVVcGRhdGUuYmluZCh0aGlzKSk7XG4gICAgdGhpcy5jb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignd2FpdGluZycsIHRoaXMub25XYWl0aW5nLmJpbmQodGhpcykpO1xuICB9XG5cbiAgb25UaW1lVXBkYXRlICgpIHtcbiAgICB0aGlzLmVtaXQoJ1RJTUVfVVBEQVRFJywgdGhpcy5jb250YWluZXIpO1xuICB9XG4gICBcbiAgb25XYWl0aW5nICgpIHtcbiAgICB0aGlzLmVtaXQoJ1dBSVRJTkcnLCB0aGlzLmNvbnRhaW5lcik7XG4gIH1cblxuICBvblNvdXJjZU9wZW4gKCkge1xuICAgIHRoaXMuYWRkU291cmNlQnVmZmVycygpO1xuICB9XG5cbiAgb25VcGRhdGVFbmQgKCkge1xuICAgIHRoaXMuZW1pdCgnU09VUkNFX1VQREFURV9FTkQnKTtcbiAgICB0aGlzLmRvQXBwZW5kKClcbiAgfVxuICBhZGRTb3VyY2VCdWZmZXJzICgpIHtcbiAgICBpZiAodGhpcy5tZWRpYVNvdXJjZS5yZWFkeVN0YXRlICE9PSAnb3BlbicpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgbGV0IHNvdXJjZXMgPSB0aGlzLl9jb250ZXh0LmdldEluc3RhbmNlKCdQUkVfU09VUkNFX0JVRkZFUicpO1xuICAgIGxldCB0cmFja3MgPSB0aGlzLl9jb250ZXh0LmdldEluc3RhbmNlKCdUUkFDS1MnKTtcbiAgICBsZXQgdHJhY2s7XG5cbiAgICBzb3VyY2VzID0gc291cmNlcy5zb3VyY2VzO1xuICAgIGxldCBhZGQgPSBmYWxzZTtcbiAgICBmb3IgKGxldCBpID0gMCwgayA9IE9iamVjdC5rZXlzKHNvdXJjZXMpLmxlbmd0aDsgaSA8IGs7IGkrKykge1xuICAgICAgbGV0IHR5cGUgPSBPYmplY3Qua2V5cyhzb3VyY2VzKVtpXTtcbiAgICAgIGlmICh0eXBlID09PSAnYXVkaW8nKSB7XG4gICAgICAgIHRyYWNrID0gdHJhY2tzLmF1ZGlvVHJhY2s7XG4gICAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICd2aWRlbycpIHtcbiAgICAgICAgdHJhY2sgPSB0cmFja3MudmlkZW9UcmFjaztcbiAgICAgIH1cbiAgICAgIGlmICh0cmFjaykge1xuICAgICAgICBsZXQgZHVyID0gdHlwZSA9PT0gJ2F1ZGlvJyA/IDIxIDogNDA7XG4gICAgICAgIGlmICh0cmFjay5tZXRhICYmIHRyYWNrLm1ldGEucmVmU2FtcGxlRHVyYXRpb24pIGR1ciA9IHRyYWNrLm1ldGEucmVmU2FtcGxlRHVyYXRpb247XG4gICAgICAgIGlmIChzb3VyY2VzW3R5cGVdLmRhdGEubGVuZ3RoID49ICh0aGlzLnByZWxvYWRUaW1lIC8gZHVyKSkge1xuICAgICAgICAgIGFkZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoYWRkKSB7XG4gICAgICBpZiAoT2JqZWN0LmtleXModGhpcy5zb3VyY2VCdWZmZXJzKS5sZW5ndGggPiAwKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGZvciAobGV0IGkgPSAwLCBrID0gT2JqZWN0LmtleXMoc291cmNlcykubGVuZ3RoOyBpIDwgazsgaSsrKSB7XG4gICAgICAgIGxldCB0eXBlID0gT2JqZWN0LmtleXMoc291cmNlcylbaV07XG4gICAgICAgIGxldCBzb3VyY2UgPSBzb3VyY2VzW3R5cGVdXG4gICAgICAgIGxldCBtaW1lID0gKHR5cGUgPT09ICd2aWRlbycpID8gJ3ZpZGVvL21wNDtjb2RlY3M9JyArIHNvdXJjZS5taW1ldHlwZSA6ICdhdWRpby9tcDQ7Y29kZWNzPScgKyBzb3VyY2UubWltZXR5cGVcbiAgICAgICAgbGV0IHNvdXJjZUJ1ZmZlciA9IHRoaXMubWVkaWFTb3VyY2UuYWRkU291cmNlQnVmZmVyKG1pbWUpO1xuICAgICAgICB0aGlzLnNvdXJjZUJ1ZmZlcnNbdHlwZV0gPSBzb3VyY2VCdWZmZXI7XG4gICAgICAgIHNvdXJjZUJ1ZmZlci5hZGRFdmVudExpc3RlbmVyKCd1cGRhdGVlbmQnLCB0aGlzLm9uVXBkYXRlRW5kLmJpbmQodGhpcykpO1xuICAgICAgICB0aGlzLmRvQXBwZW5kKCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZG9BcHBlbmQgKCkge1xuICAgIGxldCBzb3VyY2VzID0gdGhpcy5fY29udGV4dC5nZXRJbnN0YW5jZSgnUFJFX1NPVVJDRV9CVUZGRVInKTtcbiAgICBpZiAoc291cmNlcykge1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBPYmplY3Qua2V5cyh0aGlzLnNvdXJjZUJ1ZmZlcnMpLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGxldCB0eXBlID0gT2JqZWN0LmtleXModGhpcy5zb3VyY2VCdWZmZXJzKVtpXVxuICAgICAgICBsZXQgc291cmNlQnVmZmVyID0gdGhpcy5zb3VyY2VCdWZmZXJzW3R5cGVdO1xuICAgICAgICBpZiAoIXNvdXJjZUJ1ZmZlci51cGRhdGluZykge1xuICAgICAgICAgIGxldCBzb3VyY2UgPSBzb3VyY2VzLnNvdXJjZXNbdHlwZV07XG4gICAgICAgICAgaWYgKHNvdXJjZSAmJiAhc291cmNlLmluaXRlZCkge1xuICAgICAgICAgICAgc291cmNlQnVmZmVyLmFwcGVuZEJ1ZmZlcihzb3VyY2UuaW5pdC5idWZmZXIuYnVmZmVyKTtcbiAgICAgICAgICAgIHNvdXJjZS5pbml0ZWQgPSB0cnVlO1xuICAgICAgICAgIH0gZWxzZSBpZiAoc291cmNlKSB7XG4gICAgICAgICAgICBsZXQgZGF0YSA9IHNvdXJjZS5kYXRhLnNoaWZ0KClcbiAgICAgICAgICAgIGlmIChkYXRhKSB7XG4gICAgICAgICAgICAgIHNvdXJjZUJ1ZmZlci5hcHBlbmRCdWZmZXIoZGF0YS5idWZmZXIuYnVmZmVyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBlbmRPZlN0cmVhbSAoKSB7XG4gICAgaWYgKHRoaXMubWVkaWFTb3VyY2UucmVhZHlTdGF0ZSA9PT0gJ29wZW4nKSB7XG4gICAgICB0aGlzLm1lZGlhU291cmNlLmVuZE9mU3RyZWFtKClcbiAgICB9XG4gIH1cblxuICByZW1vdmUgKGVuZCkge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgT2JqZWN0LmtleXModGhpcy5zb3VyY2VCdWZmZXJzKS5sZW5ndGg7IGkrKykge1xuICAgICAgbGV0IGJ1ZmZlciA9IHRoaXMuc291cmNlQnVmZmVyc1tPYmplY3Qua2V5cyh0aGlzLnNvdXJjZUJ1ZmZlcnMpW2ldXTtcbiAgICAgIGlmICghYnVmZmVyLnVwZGF0aW5nKSB7XG4gICAgICAgIGJ1ZmZlci5yZW1vdmUoMCwgZW5kKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBkZXN0cm95ICgpIHtcbiAgICB0aGlzLmNvbnRhaW5lci5yZW1vdmVFdmVudExpc3RlbmVyKCd0aW1ldXBkYXRlJywgdGhpcy5vblRpbWVVcGRhdGUpO1xuICAgIHRoaXMuY29udGFpbmVyLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3dhaXRpbmcnLCB0aGlzLm9uV2FpdGluZyk7XG4gICAgdGhpcy5tZWRpYVNvdXJjZS5yZW1vdmVFdmVudExpc3RlbmVyKCdzb3VyY2VvcGVuJywgdGhpcy5vblNvdXJjZU9wZW4pO1xuICAgIHRoaXMuY29uZmlncyA9IHt9O1xuICAgIHRoaXMuY29udGFpbmVyID0gbnVsbDtcbiAgICB0aGlzLm1lZGlhU291cmNlID0gbnVsbDtcbiAgICB0aGlzLnNvdXJjZUJ1ZmZlcnMgPSB7fTtcbiAgICB0aGlzLnByZWxvYWRUaW1lID0gMTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IE9iamVjdC5rZXlzKHRoaXMuc291cmNlQnVmZmVycykubGVuZ3RoOyBpKyspIHtcbiAgICAgIGxldCBidWZmZXIgPSB0aGlzLnNvdXJjZUJ1ZmZlcnNbT2JqZWN0LmtleXModGhpcy5zb3VyY2VCdWZmZXJzKVtpXV07XG4gICAgICBidWZmZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcigndXBkYXRlZW5kJywgdGhpcy5vblVwZGF0ZUVuZCk7XG4gICAgICB0aGlzLm1lZGlhU291cmNlLnJlbW92ZVNvdXJjZUJ1ZmZlcihidWZmZXIpO1xuICAgICAgZGVsZXRlIHRoaXMuc291cmNlQnVmZmVyc1tPYmplY3Qua2V5cyh0aGlzLnNvdXJjZUJ1ZmZlcnMpW2ldXTtcbiAgICB9XG4gIH1cbn1cbmV4cG9ydCBkZWZhdWx0IE1TRTtcbiIsImltcG9ydCBDb25jYXQgZnJvbSAnY29uY2F0LXR5cGVkLWFycmF5J1xuXG5jbGFzcyBCdWZmZXIge1xuICBjb25zdHJ1Y3RvciAoYnVmZmVyKSB7XG4gICAgdGhpcy5idWZmZXIgPSBidWZmZXIgfHwgbmV3IFVpbnQ4QXJyYXkoMClcbiAgfVxuXG4gIHdyaXRlICguLi5idWZmZXIpIHtcbiAgICBidWZmZXIuZm9yRWFjaChpdGVtID0+IHtcbiAgICAgIHRoaXMuYnVmZmVyID0gQ29uY2F0KFVpbnQ4QXJyYXksIHRoaXMuYnVmZmVyLCBpdGVtKVxuICAgIH0pXG4gIH1cblxuICBzdGF0aWMgd3JpdGVVaW50MzIgKHZhbHVlKSB7XG4gICAgcmV0dXJuIG5ldyBVaW50OEFycmF5KFtcbiAgICAgIHZhbHVlID4+IDI0LFxuICAgICAgKHZhbHVlID4+IDE2KSAmIDB4ZmYsXG4gICAgICAodmFsdWUgPj4gOCkgJiAweGZmLFxuICAgICAgdmFsdWUgJiAweGZmXG4gICAgXSlcbiAgfVxuXG4gIHN0YXRpYyByZWFkQXNJbnQgKGFycikge1xuICAgIGxldCB0ZW1wID0gJydcblxuICAgIGZ1bmN0aW9uIHBhZFN0YXJ0NEhleCAoaGV4TnVtKSB7XG4gICAgICBsZXQgaGV4U3RyID0gaGV4TnVtLnRvU3RyaW5nKDE2KVxuICAgICAgcmV0dXJuIGhleFN0ci5wYWRTdGFydCgyLCAnMCcpXG4gICAgfVxuXG4gICAgYXJyLmZvckVhY2gobnVtID0+IHtcbiAgICAgIHRlbXAgKz0gcGFkU3RhcnQ0SGV4KG51bSlcbiAgICB9KVxuICAgIHJldHVybiBwYXJzZUludCh0ZW1wLCAxNilcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBCdWZmZXJcbiIsImNsYXNzIFN0cmVhbSB7XG4gIGNvbnN0cnVjdG9yIChidWZmZXIpIHtcbiAgICBpZiAoYnVmZmVyIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpIHtcbiAgICAgIHRoaXMuYnVmZmVyID0gYnVmZmVyO1xuICAgICAgdGhpcy5kYXRhdmlldyA9IG5ldyBEYXRhVmlldyhidWZmZXIpO1xuICAgICAgdGhpcy5kYXRhdmlldy5wb3NpdGlvbiA9IDA7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignZGF0YSBpcyBpbnZhbGlkJyk7XG4gICAgfVxuICB9XG5cbiAgZ2V0IGxlbmd0aCAoKSB7XG4gICAgcmV0dXJuIHRoaXMuYnVmZmVyLmJ5dGVMZW5ndGg7XG4gIH1cblxuICBzZXQgcG9zaXRpb24gKHZhbHVlKSB7XG4gICAgdGhpcy5kYXRhdmlldy5wb3NpdGlvbiA9IHZhbHVlO1xuICB9XG5cbiAgZ2V0IHBvc2l0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5kYXRhdmlldy5wb3NpdGlvbjtcbiAgfVxuXG4gIGJhY2sgKGNvdW50KSB7XG4gICAgdGhpcy5wb3NpdGlvbiAtPSBjb3VudDtcbiAgfVxuXG4gIHNraXAgKGNvdW50KSB7XG4gICAgbGV0IGxvb3AgPSBNYXRoLmZsb29yKGNvdW50IC8gNCk7XG4gICAgbGV0IGxhc3QgPSBjb3VudCAlIDQ7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsb29wOyBpKyspIHtcbiAgICAgIFN0cmVhbS5yZWFkQnl0ZSh0aGlzLmRhdGF2aWV3LCA0KTtcbiAgICB9XG4gICAgaWYgKGxhc3QgPiAwKSB7XG4gICAgICBTdHJlYW0ucmVhZEJ5dGUodGhpcy5kYXRhdmlldywgbGFzdCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFtyZWFkQnl0ZSDku45EYXRhVmlld+S4reivu+WPluaVsOaNrl1cbiAgICogQHBhcmFtICB7RGF0YVZpZXd9IGJ1ZmZlciBbRGF0YVZpZXflrp7kvotdXG4gICAqIEBwYXJhbSAge051bWJlcn0gc2l6ZSAgIFvor7vlj5blrZfoioLmlbBdXG4gICAqIEByZXR1cm4ge051bWJlcn0gICAgICAgIFvmlbTmlbBdXG4gICAqL1xuICBzdGF0aWMgcmVhZEJ5dGUgKGJ1ZmZlciwgc2l6ZSwgc2lnbikge1xuICAgIGxldCByZXM7XG4gICAgc3dpdGNoIChzaXplKSB7XG4gICAgICBjYXNlIDE6XG4gICAgICAgIGlmIChzaWduKSB7XG4gICAgICAgICAgcmVzID0gYnVmZmVyLmdldEludDgoYnVmZmVyLnBvc2l0aW9uKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXMgPSBidWZmZXIuZ2V0VWludDgoYnVmZmVyLnBvc2l0aW9uKTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgMjpcbiAgICAgICAgaWYgKHNpZ24pIHtcbiAgICAgICAgICByZXMgPSBidWZmZXIuZ2V0SW50MTYoYnVmZmVyLnBvc2l0aW9uKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXMgPSBidWZmZXIuZ2V0VWludDE2KGJ1ZmZlci5wb3NpdGlvbik7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIDM6XG4gICAgICAgIGlmIChzaWduKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdub3Qgc3VwcG9ydGVkIGZvciByZWFkQnl0ZSAzJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmVzID0gYnVmZmVyLmdldFVpbnQ4KGJ1ZmZlci5wb3NpdGlvbikgPDwgMTY7XG4gICAgICAgICAgcmVzIHw9IGJ1ZmZlci5nZXRVaW50OChidWZmZXIucG9zaXRpb24gKyAxKSA8PCA4O1xuICAgICAgICAgIHJlcyB8PSBidWZmZXIuZ2V0VWludDgoYnVmZmVyLnBvc2l0aW9uICsgMik7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIDQ6XG4gICAgICAgIGlmIChzaWduKSB7XG4gICAgICAgICAgcmVzID0gYnVmZmVyLmdldEludDMyKGJ1ZmZlci5wb3NpdGlvbik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmVzID0gYnVmZmVyLmdldFVpbnQzMihidWZmZXIucG9zaXRpb24pO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSA4OlxuICAgICAgICBpZiAoc2lnbikge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignbm90IHN1cHBvcnRlZCBmb3IgcmVhZEJvZHkgOCcpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJlcyA9IGJ1ZmZlci5nZXRVaW50MzIoYnVmZmVyLnBvc2l0aW9uKSA8PCAzMjtcbiAgICAgICAgICByZXMgfD0gYnVmZmVyLmdldFVpbnQzMihidWZmZXIucG9zaXRpb24gKyA0KTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJlcyA9ICcnO1xuICAgIH1cbiAgICBidWZmZXIucG9zaXRpb24gKz0gc2l6ZTtcbiAgICByZXR1cm4gcmVzO1xuICB9XG5cbiAgcmVhZFVpbnQ4ICgpIHtcbiAgICByZXR1cm4gU3RyZWFtLnJlYWRCeXRlKHRoaXMuZGF0YXZpZXcsIDEpO1xuICB9XG5cbiAgcmVhZFVpbnQxNiAoKSB7XG4gICAgcmV0dXJuIFN0cmVhbS5yZWFkQnl0ZSh0aGlzLmRhdGF2aWV3LCAyKTtcbiAgfVxuXG4gIHJlYWRVaW50MjQgKCkge1xuICAgIHJldHVybiBTdHJlYW0ucmVhZEJ5dGUodGhpcy5kYXRhdmlldywgMyk7XG4gIH1cblxuICByZWFkVWludDMyICgpIHtcbiAgICByZXR1cm4gU3RyZWFtLnJlYWRCeXRlKHRoaXMuZGF0YXZpZXcsIDQpO1xuICB9XG5cbiAgcmVhZFVpbnQ2NCAoKSB7XG4gICAgcmV0dXJuIFN0cmVhbS5yZWFkQnl0ZSh0aGlzLmRhdGF2aWV3LCA4KTtcbiAgfVxuXG4gIHJlYWRJbnQ4ICgpIHtcbiAgICByZXR1cm4gU3RyZWFtLnJlYWRCeXRlKHRoaXMuZGF0YXZpZXcsIDEsIHRydWUpO1xuICB9XG4gIHJlYWRJbnQxNiAoKSB7XG4gICAgcmV0dXJuIFN0cmVhbS5yZWFkQnl0ZSh0aGlzLmRhdGF2aWV3LCAyLCB0cnVlKTtcbiAgfVxuXG4gIHJlYWRJbnQzMiAoKSB7XG4gICAgcmV0dXJuIFN0cmVhbS5yZWFkQnl0ZSh0aGlzLmRhdGF2aWV3LCA0LCB0cnVlKTtcbiAgfVxuXG4gIHdyaXRlVWludDMyICh2YWx1ZSkge1xuICAgIHJldHVybiBuZXcgVWludDhBcnJheShbXG4gICAgICB2YWx1ZSA+Pj4gMjQgJiAweGZmLFxuICAgICAgdmFsdWUgPj4+IDE2ICYgMHhmZixcbiAgICAgIHZhbHVlID4+PiA4ICYgMHhmZixcbiAgICAgIHZhbHVlICYgMHhmZlxuICAgIF0pO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFN0cmVhbTtcbiIsImltcG9ydCBGbHZEZW11eGVyIGZyb20gJy4uLy4uL3hncGxheWVyLWRlbXV4L3NyYy9mbHYnXG5pbXBvcnQgUmVtdXhlciBmcm9tICd4Z3BsYXllci1yZW11eCdcbmltcG9ydCB7IEZldGNoTG9hZGVyIH0gZnJvbSAneGdwbGF5ZXItbG9hZGVyJ1xuaW1wb3J0IHsgVHJhY2tzLCBYZ0J1ZmZlciwgUHJlU291cmNlIH0gZnJvbSAneGdwbGF5ZXItYnVmZmVyJ1xuaW1wb3J0IHsgTXNlLCBFVkVOVFMgfSBmcm9tICd4Z3BsYXllci11dGlscydcbmltcG9ydCB7IENvbXBhdGliaWxpdHkgfSBmcm9tICd4Z3BsYXllci1jb2RlYydcbmltcG9ydCBQbGF5ZXIgZnJvbSAneGdwbGF5ZXInXG5cbmNvbnN0IFJFTVVYX0VWRU5UUyA9IEVWRU5UUy5SRU1VWF9FVkVOVFM7XG5jb25zdCBERU1VWF9FVkVOVFMgPSBFVkVOVFMuREVNVVhfRVZFTlRTO1xuY29uc3QgTE9BREVSX0VWRU5UUyA9IEVWRU5UUy5MT0FERVJfRVZFTlRTXG5cbmNvbnN0IFRhZyA9ICdGTFZDb250cm9sbGVyJ1xuXG5jbGFzcyBMb2dnZXIge1xuICB3YXJuICgpIHt9XG59XG5cbmNsYXNzIEZsdkNvbnRyb2xsZXIge1xuICBjb25zdHJ1Y3RvciAocGxheWVyKSB7XG4gICAgdGhpcy5UQUcgPSBUYWdcbiAgICB0aGlzLl9wbGF5ZXIgPSBwbGF5ZXJcblxuICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICBpbml0U2VnbWVudEFycml2ZWQ6IGZhbHNlLFxuICAgICAgcmFuZ2U6IHtcbiAgICAgICAgc3RhcnQ6IDAsXG4gICAgICAgIGVuZDogJydcbiAgICAgIH0sXG4gICAgICByYW5nZVN1cHBvcnQ6IHRydWVcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgZmluZEZpbGVQb3NpdGlvbiAodGltZSwga2V5ZnJhbWVzKSB7XG4gICAgZm9yIChsZXQgaSA9IDAsIGxlbiA9IGtleWZyYW1lcy50aW1lcy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgY29uc3QgY3VycmVudEtleWZyYW1lVGltZSA9IGtleWZyYW1lcy50aW1lc1tpXVxuICAgICAgY29uc3QgbmV4dEtleWZyYW1lVGltZSA9IGkgKyAxIDwgbGVuID8ga2V5ZnJhbWVzLnRpbWVzW2kgKyAxXSA6IE51bWJlci5NQVhfU0FGRV9JTlRFR0VSXG5cbiAgICAgIGlmIChjdXJyZW50S2V5ZnJhbWVUaW1lIDw9IHRpbWUgJiYgdGltZSA8PSBuZXh0S2V5ZnJhbWVUaW1lKSB7XG4gICAgICAgIHJldHVybiBrZXlmcmFtZXMuZmlsZXBvc2l0aW9uc1tpXVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiAnJ1xuICB9XG5cbiAgaW5pdCAoKSB7XG4gICAgdGhpcy5fY29udGV4dC5yZWdpc3RyeSgnRkVUQ0hfTE9BREVSJywgRmV0Y2hMb2FkZXIpXG4gICAgdGhpcy5fY29udGV4dC5yZWdpc3RyeSgnTE9BREVSX0JVRkZFUicsIFhnQnVmZmVyKVxuXG4gICAgdGhpcy5fY29udGV4dC5yZWdpc3RyeSgnRkxWX0RFTVVYRVInLCBGbHZEZW11eGVyKVxuICAgIHRoaXMuX2NvbnRleHQucmVnaXN0cnkoJ1RSQUNLUycsIFRyYWNrcylcblxuICAgIHRoaXMuX2NvbnRleHQucmVnaXN0cnkoJ01QNF9SRU1VWEVSJywgUmVtdXhlci5NcDRSZW11eGVyKVxuICAgIHRoaXMuX2NvbnRleHQucmVnaXN0cnkoJ1BSRV9TT1VSQ0VfQlVGRkVSJywgUHJlU291cmNlKVxuXG4gICAgdGhpcy5fY29udGV4dC5yZWdpc3RyeSgnQ09NUEFUSUJJTElUWScsIENvbXBhdGliaWxpdHkpXG5cbiAgICB0aGlzLl9jb250ZXh0LnJlZ2lzdHJ5KCdMT0dHRVInLCBMb2dnZXIpXG4gICAgdGhpcy5tc2UgPSB0aGlzLl9jb250ZXh0LnJlZ2lzdHJ5KCdNU0UnLCBNc2UpKHsgY29udGFpbmVyOiB0aGlzLl9wbGF5ZXIudmlkZW8gfSlcblxuICAgIHRoaXMuaW5pdExpc3RlbmVycygpXG5cbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIHRoaXMubG9hZE1ldGEoKVxuICAgIH0sIDApXG4gIH1cblxuICBpbml0TGlzdGVuZXJzICgpIHtcbiAgICB0aGlzLm9uKExPQURFUl9FVkVOVFMuTE9BREVSX0RBVEFMT0FERUQsIHRoaXMuX2hhbmRsZUxvYWRlckRhdGFMb2FkZWQuYmluZCh0aGlzKSlcblxuICAgIHRoaXMub24oREVNVVhfRVZFTlRTLk1FRElBX0lORk8sIHRoaXMuX2hhbmRsZU1lZGlhSW5mby5iaW5kKHRoaXMpKVxuICAgIHRoaXMub24oREVNVVhfRVZFTlRTLk1FVEFEQVRBX1BBUlNFRCwgdGhpcy5faGFuZGxlTWV0YWRhdGFQYXJzZWQuYmluZCh0aGlzKSlcbiAgICB0aGlzLm9uKERFTVVYX0VWRU5UUy5ERU1VWF9DT01QTEVURSwgdGhpcy5faGFuZGxlRGVtdXhDb21wbGV0ZS5iaW5kKHRoaXMpKVxuICAgIHRoaXMub24oREVNVVhfRVZFTlRTLkRFTVVYX0VSUk9SLCB0aGlzLl9oYW5kbGVEZW11eEVycm9yLmJpbmQodGhpcykpXG5cbiAgICB0aGlzLm9uKFJFTVVYX0VWRU5UUy5JTklUX1NFR01FTlQsIHRoaXMuX2hhbmRsZUFwcGVuZEluaXRTZWdtZW50LmJpbmQodGhpcykpXG4gICAgdGhpcy5vbihSRU1VWF9FVkVOVFMuTUVESUFfU0VHTUVOVCwgdGhpcy5faGFuZGxlTWVkaWFTZWdtZW50LmJpbmQodGhpcykpXG4gIH1cblxuICBfaGFuZGxlTWVkaWFJbmZvICgpIHtcbiAgICBpZiAoIXRoaXMuX2NvbnRleHQub25NZXRhRGF0YSkge1xuICAgICAgdGhpcy5lbWl0KERFTVVYX0VWRU5UUy5ERU1VWF9FUlJPUiwgbmV3IEVycm9yKCdmYWlsZWQgdG8gZ2V0IG1lZGlhaW5mbycpKVxuICAgIH1cbiAgICBjb25zdCBidWZmZXIgPSB0aGlzLl9jb250ZXh0LmdldEluc3RhbmNlKCdMT0FERVJfQlVGRkVSJylcbiAgICBjb25zdCBsb2FkZXIgPSB0aGlzLl9jb250ZXh0LmdldEluc3RhbmNlKCdGRVRDSF9MT0FERVInKVxuICAgIGlmICh0aGlzLmlzU2Vla2FibGUpIHtcbiAgICAgIGxvYWRlci5jYW5jZWwoKVxuICAgICAgLy8g5Yid5aeL5YyW54K55pKt55qEcmFuZ2VcbiAgICAgIHRoaXMuc3RhdGUucmFuZ2UgPSB7XG4gICAgICAgIHN0YXJ0OiAwLFxuICAgICAgICBlbmQ6IGJ1ZmZlci5oaXN0b3J5TGVuIC0gMVxuICAgICAgfVxuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIHRoaXMubG9hZE5leHQoMClcbiAgICAgIH0pXG4gICAgfVxuICB9XG5cbiAgX2hhbmRsZUxvYWRlckRhdGFMb2FkZWQgKCkge1xuICAgIHRoaXMuZW1pdFRvKCdGTFZfREVNVVhFUicsIERFTVVYX0VWRU5UUy5ERU1VWF9TVEFSVClcbiAgfVxuXG4gIF9oYW5kbGVNZXRhZGF0YVBhcnNlZCAodHlwZSkge1xuICAgIHRoaXMuZW1pdChSRU1VWF9FVkVOVFMuUkVNVVhfTUVUQURBVEEsIHR5cGUpXG4gIH1cblxuICBfaGFuZGxlRGVtdXhDb21wbGV0ZSAoKSB7XG4gICAgdGhpcy5lbWl0KFJFTVVYX0VWRU5UUy5SRU1VWF9NRURJQSlcbiAgfVxuXG4gIF9oYW5kbGVBcHBlbmRJbml0U2VnbWVudCAoKSB7XG4gICAgdGhpcy5zdGF0ZS5pbml0U2VnbWVudEFycml2ZWQgPSB0cnVlXG4gICAgdGhpcy5tc2UuYWRkU291cmNlQnVmZmVycygpXG4gIH1cblxuICBfaGFuZGxlTWVkaWFTZWdtZW50ICgpIHtcbiAgICB0aGlzLm1zZS5hZGRTb3VyY2VCdWZmZXJzKClcbiAgICB0aGlzLm1zZS5kb0FwcGVuZCgpO1xuICB9XG5cbiAgX2hhbmRsZURlbXV4RXJyb3IoKSB7XG4gICAgdGhpcy5fcGxheWVyLmVtaXQoJ2Vycm9yJywgbmV3IFBsYXllci5FcnJvcnMoJ3BhcnNlJywgdGhpcy5fcGxheWVyLmNvbmZpZy51cmwpKVxuICB9XG5cbiAgc2VlayAodGltZSkge1xuICAgIGlmICghdGhpcy5fY29udGV4dC5vbk1ldGFEYXRhKSB7XG4gICAgICB0aGlzLmxvYWRNZXRhKClcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBpZiAoIXRoaXMuaXNTZWVrYWJsZSkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgY29uc3QgYnVmZmVyID0gdGhpcy5fY29udGV4dC5nZXRJbnN0YW5jZSgnTE9BREVSX0JVRkZFUicpXG4gICAgYnVmZmVyLmNsZWFyKClcblxuICAgIGNvbnN0IHsgcHJlbG9hZFRpbWUgPSAxNSB9ID0gdGhpcy5fcGxheWVyLmNvbmZpZ1xuICAgIGNvbnN0IHJhbmdlID0gdGhpcy5nZXRTZWVrUmFuZ2UodGltZSwgcHJlbG9hZFRpbWUpXG4gICAgdGhpcy5zdGF0ZS5yYW5nZSA9IHJhbmdlXG4gICAgdGhpcy5sb2FkRGF0YSgpXG4gIH1cblxuICBsb2FkTmV4dCAoY3VyVGltZSkge1xuICAgIGlmICghdGhpcy5fY29udGV4dC5vbk1ldGFEYXRhKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBpZiAodGhpcy5sb2FkZXIubG9hZGluZykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICh0aGlzLmdldE5leHRSYW5nZShjdXJUaW1lKSkge1xuICAgICAgdGhpcy5sb2FkRGF0YSgpXG4gICAgfVxuICB9XG5cbiAgbG9hZERhdGEgKCkge1xuICAgIGNvbnN0IHsgc3RhcnQsIGVuZCB9ID0gdGhpcy5zdGF0ZS5yYW5nZVxuICAgIHRoaXMuZW1pdChMT0FERVJfRVZFTlRTLkxBREVSX1NUQVJULCB0aGlzLl9wbGF5ZXIuY29uZmlnLnVybCwge1xuICAgICAgaGVhZGVyczoge1xuICAgICAgICBtZXRob2Q6ICdnZXQnLFxuICAgICAgICBSYW5nZTogYGJ5dGVzPSR7c3RhcnR9LSR7ZW5kfWBcbiAgICAgIH1cbiAgICB9KVxuICB9XG5cbiAgbG9hZE1ldGEgKCkge1xuICAgIHRoaXMubG9hZGVyLmxvYWQodGhpcy5fcGxheWVyLmNvbmZpZy51cmwsIHtcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgUmFuZ2U6ICdieXRlcz0wLSdcbiAgICAgIH1cbiAgICB9KS5jYXRjaCgoKSA9PiB7XG4gICAgICAvLyDlnKjlsJ3or5Xojrflj5bop4bpopHmlbDmja7lpLHotKXml7bvvIzlsJ3or5Xkvb/nlKjnm7Tmkq3mlrnlvI/liqDovb3mlbTkuKrop4bpopFcbiAgICAgIHRoaXMuc3RhdGUucmFuZ2VTdXBwb3J0ID0gZmFsc2VcbiAgICAgIHRoaXMubG9hZEZhbGxiYWNrKClcbiAgICB9KVxuXG4gIH1cblxuICBsb2FkRmFsbGJhY2sgKCkge1xuICAgIHRoaXMubG9hZGVyLmxvYWQodGhpcy5fcGxheWVyLmNvbmZpZy51cmwpLmNhdGNoKCgpID0+IHtcbiAgICAgIC8vIOWcqOWwneivleiOt+WPluinhumikeaVsOaNruWksei0peaXtu+8jOWwneivleS9v+eUqOebtOaSreaWueW8j+WKoOi9veaVtOS4quinhumikVxuICAgICAgdGhpcy5fcGxheWVyLmVtaXQoJ2Vycm9yJywgbmV3IFBsYXllci5FcnJvcnMoJ25ldHdvcmsnLCB0aGlzLl9wbGF5ZXIuY29uZmlnLnVybCkpXG4gICAgfSlcbiAgfVxuXG4gIGdldFNlZWtSYW5nZSAodGltZSwgcHJlbG9hZFRpbWUpIHtcbiAgICBjb25zdCB7IGtleWZyYW1lcyB9ID0gdGhpcy5fY29udGV4dC5vbk1ldGFEYXRhXG4gICAgY29uc3QgZHVyYXRpb24gPSB0aGlzLl9jb250ZXh0Lm1lZGlhSW5mby5kdXJhdGlvblxuICAgIGNvbnN0IHNlZWtTdGFydFRpbWUgPSB0aW1lXG4gICAgY29uc3Qgc2Vla0VuZFRpbWUgPSB0aW1lICsgcHJlbG9hZFRpbWVcblxuICAgIGNvbnN0IHNlZWtTdGFydEZpbGVQb3MgPSBGbHZDb250cm9sbGVyLmZpbmRGaWxlUG9zaXRpb24oc2Vla1N0YXJ0VGltZSwga2V5ZnJhbWVzKVxuXG4gICAgaWYgKHNlZWtFbmRUaW1lID49IGR1cmF0aW9uIHx8IHNlZWtTdGFydFRpbWUgPj0gZHVyYXRpb24pIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN0YXJ0OiBzZWVrU3RhcnRGaWxlUG9zLFxuICAgICAgICBlbmQ6ICcnXG4gICAgICB9XG4gICAgfVxuICAgIGNvbnN0IHNlZWtFbmRGaWxlUG9zID0gRmx2Q29udHJvbGxlci5maW5kRmlsZVBvc2l0aW9uKHNlZWtFbmRUaW1lLCBrZXlmcmFtZXMpXG5cbiAgICByZXR1cm4ge1xuICAgICAgc3RhcnQ6IHNlZWtTdGFydEZpbGVQb3MsXG4gICAgICBlbmQ6IHNlZWtFbmRGaWxlUG9zXG4gICAgfVxuICB9XG5cbiAgZ2V0TmV4dFJhbmdlICh0aW1lKSB7XG4gICAgaWYgKHRoaXMuc3RhdGUucmFuZ2UuZW5kID09PSAnJykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IHsgZW5kIH0gPSB0aGlzLmdldFNlZWtSYW5nZSh0aW1lLCB0aGlzLmNvbmZpZy5wcmVsb2FkVGltZSB8fCAxNSlcbiAgICBpZiAoZW5kIDw9IHRoaXMuc3RhdGUucmFuZ2UuZW5kICYmIGVuZCAhPT0gJycpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLnN0YXRlLnJhbmdlID0ge1xuICAgICAgc3RhcnQ6IHRoaXMuc3RhdGUucmFuZ2UuZW5kICsgMSxcbiAgICAgIGVuZFxuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIGRlc3Ryb3kgKCkge1xuICAgIHRoaXMuX3BsYXllciA9IG51bGxcbiAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgaW5pdFNlZ21lbnRBcnJpdmVkOiBmYWxzZSxcbiAgICAgIHJhbmdlOiB7XG4gICAgICAgIHN0YXJ0OiAwLFxuICAgICAgICBlbmQ6ICcnXG4gICAgICB9LFxuICAgICAgcmFuZ2VTdXBwb3J0OiB0cnVlXG4gICAgfVxuICB9XG5cbiAgZ2V0IGlzU2Vla2FibGUgKCkge1xuICAgIGlmICghdGhpcy5zdGF0ZS5yYW5nZVN1cHBvcnQpIHtcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cblxuICAgIGlmICghdGhpcy5fY29udGV4dCB8fCAhdGhpcy5fY29udGV4dC5tZWRpYUluZm8uaXNDb21wbGV0ZSgpKSB7XG4gICAgICByZXR1cm4gdHJ1ZVxuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fY29udGV4dC5tZWRpYUluZm8ua2V5ZnJhbWVzICE9PSBudWxsICYmIHRoaXMuX2NvbnRleHQubWVkaWFJbmZvLmtleWZyYW1lcyAhPT0gdW5kZWZpbmVkXG4gIH1cblxuICBnZXQgY29uZmlnICgpIHtcbiAgICByZXR1cm4gdGhpcy5fcGxheWVyLmNvbmZpZ1xuICB9XG5cbiAgZ2V0IGxvYWRlciAoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2NvbnRleHQuZ2V0SW5zdGFuY2UoJ0ZFVENIX0xPQURFUicpXG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgRmx2Q29udHJvbGxlclxuIiwiaW1wb3J0IFBsYXllciBmcm9tICd4Z3BsYXllcidcbmltcG9ydCB7IENvbnRleHQsIEVWRU5UUyB9IGZyb20gJ3hncGxheWVyLXV0aWxzJztcbmltcG9ydCBGTFYgZnJvbSAnLi9mbHYtdm9kJ1xuXG5jb25zdCBmbHZBbGxvd2VkRXZlbnRzID0gRVZFTlRTLkZsdkFsbG93ZWRFdmVudHM7XG5cbmNvbnN0IGlzRW5kZWQgPSAocGxheWVyLCBmbHYpID0+IHtcbiAgaWYgKCFwbGF5ZXIuY29uZmlnLmlzTGl2ZSkge1xuICAgIGlmIChwbGF5ZXIuZHVyYXRpb24gLSBwbGF5ZXIuY3VycmVudFRpbWUgPCAyKSB7XG4gICAgICBjb25zdCByYW5nZSA9IHBsYXllci5nZXRCdWZmZXJlZFJhbmdlKClcbiAgICAgIGlmIChwbGF5ZXIuY3VycmVudFRpbWUgLSByYW5nZVsxXSA8IDAuMSkge1xuICAgICAgICBwbGF5ZXIuZW1pdCgnZW5kZWQnKVxuICAgICAgICBmbHYubXNlLmVuZE9mU3RyZWFtKClcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuY2xhc3MgRmx2UGxheWVyIGV4dGVuZHMgUGxheWVyIHtcbiAgY29uc3RydWN0b3IgKGNvbmZpZykge1xuICAgIHN1cGVyKGNvbmZpZylcbiAgICB0aGlzLmNvbnRleHQgPSBuZXcgQ29udGV4dChmbHZBbGxvd2VkRXZlbnRzKVxuICAgIHRoaXMuaW5pdEV2ZW50cygpXG4gICAgLy8gY29uc3QgcHJlbG9hZFRpbWUgPSBwbGF5ZXIuY29uZmlnLnByZWxvYWRUaW1lIHx8IDE1XG4gIH1cblxuICBzdGFydCAoKSB7XG4gICAgY29uc3QgZmx2ID0gdGhpcy5jb250ZXh0LnJlZ2lzdHJ5KCdGTFZfQ09OVFJPTExFUicsIEZMVikodGhpcylcbiAgICB0aGlzLmZsdiA9IGZsdlxuICAgIHRoaXMuY29udGV4dC5pbml0KClcbiAgICBzdXBlci5zdGFydChmbHYubXNlLnVybClcbiAgfVxuXG4gIGluaXRFdmVudHMgKCkge1xuICAgIHRoaXMub24oJ3RpbWV1cGRhdGUnLCB0aGlzLmhhbmRsZVRpbWVVcGRhdGUuYmluZCh0aGlzKSlcblxuICAgIHRoaXMub24oJ3NlZWtpbmcnLCB0aGlzLmhhbmRsZVNlZWsuYmluZCh0aGlzKSlcblxuICAgIHRoaXMub25jZSgnZGVzdHJveScsIHRoaXMuX2Rlc3Ryb3kuYmluZCh0aGlzKSlcbiAgfVxuXG4gIGhhbmRsZVRpbWVVcGRhdGUgKCkge1xuICAgIHRoaXMubG9hZERhdGEoKVxuICAgIGlzRW5kZWQodGhpcywgdGhpcy5mbHYpXG4gIH1cblxuICBoYW5kbGVTZWVrICgpIHtcbiAgICBjb25zdCB0aW1lID0gdGhpcy5jdXJyZW50VGltZVxuICAgIGNvbnN0IHJhbmdlID0gdGhpcy5nZXRCdWZmZXJlZFJhbmdlKClcbiAgICBpZiAodGltZSA+IHJhbmdlWzFdIHx8IHRpbWUgPCByYW5nZVswXSkge1xuICAgICAgdGhpcy5mbHYuc2Vlayh0aGlzLmN1cnJlbnRUaW1lKVxuICAgIH1cbiAgfVxuXG4gIF9kZXN0cm95ICgpIHtcbiAgICB0aGlzLmNvbnRleHQuZGVzdHJveSgpXG4gICAgdGhpcy5jb250ZXh0ID0gbnVsbFxuICAgIHRoaXMuZmx2ID0gbnVsbFxuICB9XG5cbiAgbG9hZERhdGEgKHRpbWUgPSB0aGlzLmN1cnJlbnRUaW1lKSB7XG4gICAgY29uc3QgcmFuZ2UgPSB0aGlzLmdldEJ1ZmZlcmVkUmFuZ2UoKVxuICAgIGlmIChyYW5nZVsxXSAtIHRpbWUgPCAodGhpcy5jb25maWcucHJlbG9hZFRpbWUgfHwgMTUpIC0gNSkge1xuICAgICAgdGhpcy5mbHYubG9hZE5leHQocmFuZ2VbMV0gKyAxKVxuICAgIH1cbiAgfVxuXG4gIGdldCBzcmMgKCkge1xuICAgIHJldHVybiB0aGlzLmN1cnJlbnRTcmNcbiAgfVxuXG4gIHNldCBzcmMgKHVybCkge1xuICAgIHRoaXMucGxheWVyLmNvbmZpZy51cmwgPSB1cmxcbiAgICBpZiAoIXRoaXMucGF1c2VkKSB7XG4gICAgICB0aGlzLnBhdXNlKClcbiAgICAgIHRoaXMub25jZSgncGF1c2UnLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuc3RhcnQodXJsKVxuICAgICAgfSlcbiAgICAgIHRoaXMub25jZSgnY2FucGxheScsICgpID0+IHtcbiAgICAgICAgdGhpcy5wbGF5KClcbiAgICAgIH0pXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuc3RhcnQodXJsKVxuICAgIH1cbiAgICB0aGlzLm9uY2UoJ2NhbnBsYXknLCAoKSA9PiB7XG4gICAgICB0aGlzLmN1cnJlbnRUaW1lID0gMFxuICAgIH0pXG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBGbHZQbGF5ZXJcbiIsIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV94Z3BsYXllcl9fOyIsImltcG9ydCBGbHZMaXZlUGxheWVyIGZyb20gJ3hncGxheWVyLWZsdi1saXZlJ1xuaW1wb3J0IEZsdlZvZFBsYXllciBmcm9tICd4Z3BsYXllci1mbHYtdm9kJ1xuXG5jbGFzcyBGbHZQbGF5ZXJ7XG4gIGNvbnN0cnVjdG9yIChjb25maWcpIHtcbiAgICBpZiAoY29uZmlnLmlzTGl2ZSkge1xuICAgICAgcmV0dXJuIG5ldyBGbHZMaXZlUGxheWVyKGNvbmZpZylcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIG5ldyBGbHZWb2RQbGF5ZXIoY29uZmlnKVxuICAgIH1cbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IEZsdlBsYXllclxuIiwibW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFX3hncGxheWVyX187Il0sInNvdXJjZVJvb3QiOiIifQ==