{"version":3,"file":"index.js","sources":["../src/glutil.js","../src/filter.js","../src/filter/basic.js","../src/fmt/yuyv422.js","../src/fmt/rgb32.js","../src/fmt/rgb24.js","../src/fmt/nv12.js","../src/fmt/yuv420.js","../src/fmt/rgba.js","../src/fmt/rgb.js","../src/index.js"],"sourcesContent":["class GLUtil {\n  static createTexture (gl, filter, data, width, height) {\n    let textureRef = gl.createTexture();\n    gl.bindTexture(gl.TEXTURE_2D, textureRef);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, filter);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, filter);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n    if (data instanceof Uint8Array) {\n      gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, width, height, 0, gl.RGBA, gl.UNSIGNED_BYTE, data);\n    } else if (data instanceof HTMLVideoElement) {\n      gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, data);\n    } else if (data instanceof HTMLImageElement) {\n      gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, data);\n    } else if (data instanceof ImageData) {\n      gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, data);\n    }\n    gl.bindTexture(gl.TEXTURE_2D, null);\n    return textureRef;\n  }\n\n  static createBuffer (gl, data) {\n    let buffer = gl.createBuffer();\n    gl.bindBuffer(gl.ARRAY_BUFFER, buffer);\n    gl.bufferData(gl.ARRAY_BUFFER, data, gl.STATIC_DRAW);\n    return buffer;\n  }\n\n  static createShader (gl, type, source) {\n    var shader = gl.createShader(type);\n    gl.shaderSource(shader, source);\n\n    gl.compileShader(shader);\n    if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {\n      throw new Error(gl.getShaderInfoLog(shader));\n    }\n\n    return shader;\n  }\n\n  static createProgram (gl, vertexSource, fragmentSource) {\n    var program = gl.createProgram();\n\n    var vertexShader = GLUtil.createShader(gl, gl.VERTEX_SHADER, vertexSource);\n    var fragmentShader = GLUtil.createShader(gl, gl.FRAGMENT_SHADER, fragmentSource);\n\n    gl.attachShader(program, vertexShader);\n    gl.attachShader(program, fragmentShader);\n\n    gl.linkProgram(program);\n    if (!gl.getProgramParameter(program, gl.LINK_STATUS)) {\n      throw new Error(gl.getProgramInfoLog(program));\n    }\n\n    var wrapper = {program: program};\n\n    var numAttributes = gl.getProgramParameter(program, gl.ACTIVE_ATTRIBUTES);\n    for (var i = 0; i < numAttributes; i++) {\n      var attribute = gl.getActiveAttrib(program, i);\n      wrapper[attribute.name] = gl.getAttribLocation(program, attribute.name);\n    }\n    var numUniforms = gl.getProgramParameter(program, gl.ACTIVE_UNIFORMS);\n    for (var i$1 = 0; i$1 < numUniforms; i$1++) {\n      var uniform = gl.getActiveUniform(program, i$1);\n      wrapper[uniform.name] = gl.getUniformLocation(program, uniform.name);\n    }\n\n    return wrapper;\n  }\n\n  static bindAttribute (gl, buffer, attribute, numComponents) {\n    gl.bindBuffer(gl.ARRAY_BUFFER, buffer);\n    gl.enableVertexAttribArray(attribute);\n    gl.vertexAttribPointer(attribute, numComponents, gl.FLOAT, false, 0, 0);\n  }\n}\n\nexport default GLUtil;\n","class Filter {\n  constructor() {\n    this.inputTextures = []\n  }\n}\n\nexport default Filter;\n","import Filter from '../filter';\nimport GLUtil from '../glutil';\nclass Basic extends Filter {\n  constructor (config) {\n    super();\n    this.vShader = [\n      'attribute vec4 vertexPos;',\n      'attribute vec2 texturePos;',\n      'varying vec2 textureCoord;',\n      'void main()',\n      '{',\n      '  gl_Position = vertexPos;',\n      '  textureCoord = texturePos;',\n      '}'].join('\\n');\n    this.fShader = [\n      'precision highp float;',\n      'varying highp vec2 textureCoord;',\n      'uniform highp float opacity;',\n      'uniform sampler2D sampler;',\n      'uniform highp float flipx;',\n      'uniform highp float flipy;',\n      'void main(void) {',\n      '  float cordx = textureCoord.x;',\n      '  if(flipx > 0.5) {',\n      '     cordx = 1.0 - textureCoord.x;',\n      '  }',\n      '  float cordy = 1.0 - textureCoord.y;',\n      '  if(flipy > 0.5) {',\n      '    cordy = textureCoord.y;',\n      '  }',\n      '  vec4 color = texture2D(sampler,vec2(cordx, cordy));',\n      '  gl_FragColor = vec4(color[0],color[1],color[2],opacity);',\n      '}'].join('\\n');\n    \n    this.opacity = config.opacity === undefined ? 1 : config.opacity;\n    this.flip = config.flip;\n  }\n\n  init (render) {\n    this.rend = render;\n    this.canvas = render.canvas;\n    let gl = this.gl = render.gl;\n    this.pw = GLUtil.createProgram(gl, this.vShader, this.fShader);\n    this.program = this.pw.program;\n    gl.useProgram(this.program);\n\n    // vertexPos\n    let vertexPosBuffer = GLUtil.createBuffer(gl, new Float32Array([1, 1, -1, 1, 1, -1, -1, -1]));\n    GLUtil.bindAttribute(gl, vertexPosBuffer, this.pw.vertexPos, 2);\n\n    // texturePos\n    let texturePosBuffer = GLUtil.createBuffer(gl, new Float32Array([1, 0, 0, 0, 1, 1, 0, 1]));\n    GLUtil.bindAttribute(gl, texturePosBuffer, this.pw.texturePos, 2);\n\n    GLUtil.createTexture(gl, gl.LINEAR);\n    gl.uniform1i(this.pw.sampler, 0);\n    \n    gl.uniform1f(this.pw.opacity, this.opacity);\n\n    let flipx = 0;\n    let flipy = 0;\n\n    if (this.flip === 'x' || this.flip === 'xy') {\n      flipx = 1;\n    }\n\n    if (this.flip === 'y' || this.flip === 'xy') {\n      flipy = 1;\n    }\n\n    gl.uniform1f(this.pw.flipx, flipx);\n    gl.uniform1f(this.pw.flipy, flipy);\n  }\n\n  setFlip (flip) {\n    let flipx = 0;\n    let flipy = 0;\n    this.flip = flip;\n    if (this.flip === 'x' || this.flip === 'xy') {\n      flipx = 1;\n    }\n\n    if (this.flip === 'y' || this.flip === 'xy') {\n      flipy = 1;\n    }\n\n    this.gl.uniform1f(this.pw.flipx, flipx);\n    this.gl.uniform1f(this.pw.flipy, flipy);\n  }\n\n  render (texture, width, height) {\n    let gl = this.gl;\n    let program = this.program;\n    gl.useProgram(program);\n    gl.activeTexture(gl.TEXTURE0);\n    gl.bindTexture(gl.TEXTURE_2D, texture);\n    gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);\n  }\n}\n\nexport default Basic;\n","import Filter from '../filter';\nimport GLUtil from '../glutil';\nclass Yuyv422 extends Filter {\n  constructor (config) {\n    super();\n    this.vShader = ['attribute vec4 vertexPos;',\n      'attribute vec2 texturePos;',\n      'varying vec2 textureCoord;',\n      'void main()',\n      '{',\n      '  gl_Position = vertexPos;',\n      '  textureCoord = texturePos;',\n      '}'].join('\\n');\n    this.fShader = ['precision highp float;',\n      'varying highp vec2 textureCoord;',\n      'uniform sampler2D sampler;',\n      'uniform vec2 outerSize;',\n      'uniform mat4 yuv2rgb;',\n      'void main(void) {',\n      '  float cx = 1.0 / outerSize.x;',\n      '  float odd = floor(mod(textureCoord.x * outerSize.x, 2.0));',\n      '  float x = textureCoord.x + 0.5 * cx - odd * cx;',\n      '  vec4 color = texture2D(sampler, vec2(x, textureCoord.y));',\n      '  float ydata = odd < 0.5?color[0]:color[2];',\n      '  float udata = color[1];',\n      '  float vdata = color[3];',\n      '  gl_FragColor = vec4(ydata, udata, vdata, 1) * yuv2rgb;',\n      '}'].join('\\n');\n  }\n\n  init (render) {\n    this.rend = render;\n    this.canvas = render.canvas;\n    let gl = this.gl = render.gl;\n    this.pw = GLUtil.createProgram(gl, this.vShader, this.fShader);\n    this.program = this.pw.program;\n    gl.useProgram(this.program);\n    // vertexPos\n    let vertexPosBuffer = GLUtil.createBuffer(gl, new Float32Array([1, 1, -1, 1, 1, -1, -1, -1]));\n    GLUtil.bindAttribute(gl, vertexPosBuffer, this.pw.vertexPos, 2);\n\n    // texturePos\n    this.texturePosBuffer = GLUtil.createBuffer(gl, new Float32Array([1, 0, 0, 0, 1, 1, 0, 1]));\n    GLUtil.bindAttribute(gl, this.texturePosBuffer, this.pw.texturePos, 2);\n\n    let textureRef = GLUtil.createTexture(gl, gl.LINEAR);\n    gl.uniform1i(this.pw.sampler, 0);\n\n    this.inputTextures.push(textureRef);\n\n    let yuv2rgb = [\n      1.16438, 0.00000, 1.59603, -0.87079,\n      1.16438, -0.39176, -0.81297, 0.52959,\n      1.16438, 2.01723, 0.00000, -1.08139,\n      0, 0, 0, 1\n    ];\n    gl.uniformMatrix4fv(this.pw.yuv2rgb, false, yuv2rgb);\n  }\n\n  render (data, width, height) {\n    data = data[0];\n    let gl = this.gl;\n    let program = this.program;\n    let textureRef = this.inputTextures[0];\n\n    if (this.width !== width || this.height !== height) {\n      this.width = width;\n      this.height = height;\n      this.outputTexuture = GLUtil.createTexture(gl, gl.LINEAR, new Uint8Array(width * height * 4), width, height);\n    }\n\n    if (!this.outputTexuture) {\n      this.outputTexuture = GLUtil.createTexture(gl, gl.LINEAR, new Uint8Array(width * height * 4), width, height);\n    }\n\n    gl.bindFramebuffer(gl.FRAMEBUFFER, this.rend.fb);\n    gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, this.outputTexuture, 0);\n\n    gl.useProgram(program);\n    gl.viewport(0, 0, this.canvas.width, this.canvas.height);\n\n    gl.uniform2fv(this.pw.outerSize, [width, height]);\n\n    gl.pixelStorei(gl.UNPACK_ALIGNMENT, 1);\n    gl.activeTexture(gl.TEXTURE0);\n    gl.bindTexture(gl.TEXTURE_2D, textureRef);\n    gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, width / 2, height, 0, gl.RGBA, gl.UNSIGNED_BYTE, data);\n    gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);\n\n    return {\n      texture: this.outputTexuture,\n      width,\n      height\n    };\n  }\n}\n\nexport default Yuyv422;\n","import Filter from '../filter';\nimport GLUtil from '../glutil';\nclass Rgb32 extends Filter {\n  constructor (config) {\n    super();\n    this.vShader = [\n      'attribute vec4 vertexPos;',\n      'attribute vec2 texturePos;',\n      'varying vec2 textureCoord;',\n      'void main()',\n      '{',\n      '  gl_Position = vertexPos;',\n      '  textureCoord = texturePos;',\n      '}'].join('\\n');\n    this.fShader = [\n      'precision highp float;',\n      'varying highp vec2 textureCoord;',\n      'uniform sampler2D sampler;',\n      'void main(void) {',\n      '  vec4 color = texture2D(sampler, textureCoord);',\n      '  gl_FragColor = vec4(color[2],color[1],color[0],color[3]);',\n      '}'].join('\\n'); \n  }\n\n  init (render) {\n    this.rend = render;\n    this.canvas = render.canvas;\n    let gl = this.gl = render.gl;\n    this.pw = GLUtil.createProgram(gl, this.vShader, this.fShader);\n    this.program = this.pw.program;\n\n    gl.useProgram(this.program);\n    // vertexPos\n    let vertexPosBuffer = GLUtil.createBuffer(gl, new Float32Array([1, 1, -1, 1, 1, -1, -1, -1]));\n    GLUtil.bindAttribute(gl, vertexPosBuffer, this.pw.vertexPos, 2);\n\n    // texturePos\n    this.texturePosBuffer = GLUtil.createBuffer(gl, new Float32Array([1, 0, 0, 0, 1, 1, 0, 1]));\n    GLUtil.bindAttribute(gl, this.texturePosBuffer, this.pw.texturePos, 2);\n\n    let textureRef = GLUtil.createTexture(gl, gl.LINEAR);\n    gl.uniform1i(this.pw.sampler, 0);\n\n    this.inputTextures.push(textureRef);\n  }\n\n  render (data, width, height) {\n    data = data[0];\n    let gl = this.gl;\n    let program = this.program;\n    let textureRef = this.inputTextures[0];\n\n    if (this.width !== width || this.height !== height) {\n      this.width = width;\n      this.height = height;\n      this.outputTexuture = GLUtil.createTexture(gl, gl.LINEAR, new Uint8Array(width * height * 4), width, height);\n    }\n\n    if (!this.outputTexuture) {\n      this.outputTexuture = GLUtil.createTexture(gl, gl.LINEAR, new Uint8Array(width * height * 4), width, height);\n    }\n\n    gl.bindFramebuffer(gl.FRAMEBUFFER, this.rend.fb);\n    gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, this.outputTexuture, 0);\n\n    gl.useProgram(program);\n    gl.viewport(0, 0, this.canvas.width, this.canvas.height);\n\n    gl.activeTexture(gl.TEXTURE0);\n    gl.bindTexture(gl.TEXTURE_2D, textureRef);\n    gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, width, height, 0, gl.RGBA, gl.UNSIGNED_BYTE, data);\n    gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);\n\n    return {\n      texture: this.outputTexuture,\n      width,\n      height\n    };\n  }\n}\n\nexport default Rgb32;\n","import Filter from '../filter';\nimport GLUtil from '../glutil';\nclass Rgb24 extends Filter {\n  constructor (config) {\n    super();\n    this.vShader = [\n      'attribute vec4 vertexPos;',\n      'attribute vec2 texturePos;',\n      'varying vec2 textureCoord;',\n      'void main()',\n      '{',\n      '  gl_Position = vertexPos;',\n      '  textureCoord = texturePos;',\n      '}'].join('\\n');\n    this.fShader = [\n      'precision highp float;',\n      'varying highp vec2 textureCoord;',\n      'uniform sampler2D sampler;',\n      'uniform vec2 outerSize;',\n      'uniform mat4 YUV2RGB;',\n      'void main(void) {',\n      '  float my = floor(mod(textureCoord.y * outerSize.y, 4.0));',\n      '  float cy = 1.0 / outerSize.y;',\n\n      '  float mx = floor(mod(outerSize.x, 4.0));',\n      '  float cx = 1.0 / outerSize.x;',\n      '  float width =  outerSize.x + mx;',\n      '  float x = textureCoord.x + (mx * cx * textureCoord.y * outerSize.y);',\n      '  x = cx * mod(x * outerSize.x, width);',\n      '  float bdata, gdata, rdata;',\n\n      '  vec4 color = texture2D(sampler, vec2(x, textureCoord.y));',\n      '  rdata = color[0];',\n      '  gdata = color[1];',\n      '  bdata = color[2];',\n      '  gl_FragColor = vec4(bdata, gdata, rdata, 1);',\n      '}'].join('\\n'); \n  }\n\n  init (render) {\n    this.rend = render;\n    this.canvas = render.canvas;\n    let gl = this.gl = render.gl;\n    this.pw = GLUtil.createProgram(gl, this.vShader, this.fShader);\n    this.program = this.pw.program;\n    gl.useProgram(this.program);\n    // vertexPos\n    let vertexPosBuffer = GLUtil.createBuffer(gl, new Float32Array([1, 1, -1, 1, 1, -1, -1, -1]));\n    GLUtil.bindAttribute(gl, vertexPosBuffer, this.pw.vertexPos, 2);\n\n    // texturePos\n    this.texturePosBuffer = GLUtil.createBuffer(gl, new Float32Array([1, 0, 0, 0, 1, 1, 0, 1]));\n    GLUtil.bindAttribute(gl, this.texturePosBuffer, this.pw.texturePos, 2);\n\n    let textureRef = GLUtil.createTexture(gl, gl.LINEAR);\n    gl.uniform1i(this.pw.sampler, 0);\n    this.inputTextures.push(textureRef);\n  }\n\n  render (data, width, height) {\n    data = data[0];\n    let gl = this.gl;\n    let program = this.program;\n    let textureRef = this.inputTextures[0];\n\n    if (this.width !== width || this.height !== height) {\n      this.width = width;\n      this.height = height;\n      this.outputTexuture = GLUtil.createTexture(gl, gl.LINEAR, new Uint8Array(width * height * 4), width, height);\n    }\n\n    if (!this.outputTexuture) {\n      this.outputTexuture = GLUtil.createTexture(gl, gl.LINEAR, new Uint8Array(width * height * 4), width, height);\n    }\n\n    gl.bindFramebuffer(gl.FRAMEBUFFER, this.rend.fb);\n    gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, this.outputTexuture, 0);\n\n    gl.useProgram(program);\n    gl.viewport(0, 0, this.canvas.width, this.canvas.height);\n\n    let outerSizeRef = gl.getUniformLocation(program, 'outerSize');\n    gl.uniform2fv(outerSizeRef, [width, height]);\n\n    gl.activeTexture(gl.TEXTURE0);\n    gl.bindTexture(gl.TEXTURE_2D, textureRef);\n    let inputx = width - (width % 4);\n    gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGB, inputx, height, 0, gl.RGB, gl.UNSIGNED_BYTE, data);\n    gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);\n\n    return {\n      texture: this.outputTexuture,\n      width,\n      height\n    };\n  }\n}\n\nexport default Rgb24;\n","import Filter from '../filter';\nimport GLUtil from '../glutil';\nclass Nv12 extends Filter {\n  constructor (config) {\n    super();\n    this.vShader = [\n      'attribute vec4 vertexPos;',\n      'attribute vec2 yTexturePos;',\n      'attribute vec2 uvTexturePos;',\n      'varying vec2 yTextureCoord;',\n      'varying vec2 uvTextureCoord;',\n      'void main()',\n      '{',\n      '  gl_Position = vertexPos;',\n      '  yTextureCoord = yTexturePos;',\n      '  uvTextureCoord = uvTexturePos;',\n      '}'].join('\\n');\n    this.fShader = ['precision highp float;',\n      'varying highp vec2 yTextureCoord;',\n      'varying highp vec2 uvTextureCoord;',\n      'uniform sampler2D ySampler;',\n      'uniform sampler2D uvSampler;',\n      'uniform mat4 yuv2rgb;',\n      'void main(void) {',\n      '  vec4 colory = texture2D(ySampler, yTextureCoord);',\n      '  vec4 coloruv = texture2D(uvSampler, vec2(yTextureCoord.x / 2.0, yTextureCoord.y));',\n      '  gl_FragColor = vec4(colory[0], coloruv[0], coloruv[1], 1) * yuv2rgb;',\n      '}'].join('\\n');\n  }\n\n  init (render) {\n    this.rend = render;\n    this.canvas = render.canvas;\n    let gl = this.gl = render.gl;\n    this.pw = GLUtil.createProgram(gl, this.vShader, this.fShader);\n    this.program = this.pw.program;\n    gl.useProgram(this.program);\n    // vertexPos\n    let vertexPosBuffer = GLUtil.createBuffer(gl, new Float32Array([1, 1, -1, 1, 1, -1, -1, -1]));\n    GLUtil.bindAttribute(gl, vertexPosBuffer, this.pw.vertexPos, 2);\n\n    // texturePos\n    let yTexturePosBuffer = GLUtil.createBuffer(gl, new Float32Array([1, 0, 0, 0, 1, 1, 0, 1]));\n    GLUtil.bindAttribute(gl, yTexturePosBuffer, this.pw.yTexturePos, 2);\n\n    let uvTexturePosBuffer = GLUtil.createBuffer(gl, new Float32Array([1, 0, 0, 0, 1, 1, 0, 1]));\n    GLUtil.bindAttribute(gl, uvTexturePosBuffer, this.pw.uvTexturePos, 2);\n\n    let yTextureRef = GLUtil.createTexture(gl, gl.LINEAR);\n    gl.uniform1i(this.pw.ySampler, 0);\n\n    this.inputTextures.push(yTextureRef);\n\n    let uvTextureRef = GLUtil.createTexture(gl, gl.LINEAR);\n    gl.uniform1i(this.pw.uvSampler, 1);\n\n    this.inputTextures.push(uvTextureRef);\n\n    let yuv2rgb = [\n      1.16438, 0.00000, 1.59603, -0.87079,\n      1.16438, -0.39176, -0.81297, 0.52959,\n      1.16438, 2.01723, 0.00000, -1.08139,\n      0, 0, 0, 1\n    ];\n    gl.uniformMatrix4fv(this.pw.yuv2rgb, false, yuv2rgb);\n  }\n\n  render (data, width, height) {\n    let ydata = data[0];\n    let uvdata = data[1];\n    let gl = this.gl;\n    let program = this.program;\n    let yTextureRef = this.inputTextures[0];\n    let uvTextureRef = this.inputTextures[1];\n\n    if (this.width !== width || this.height !== height) {\n      this.width = width;\n      this.height = height;\n      this.outputTexuture = GLUtil.createTexture(gl, gl.LINEAR, new Uint8Array(width * height * 4), width, height);\n    }\n\n    if (!this.outputTexuture) {\n      this.outputTexuture = GLUtil.createTexture(gl, gl.LINEAR, new Uint8Array(width * height * 4), width, height);\n    }\n\n    gl.bindFramebuffer(gl.FRAMEBUFFER, this.rend.fb);\n    gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, this.outputTexuture, 0);\n\n    gl.useProgram(program);\n\n    gl.pixelStorei(gl.UNPACK_ALIGNMENT, 1);\n    gl.activeTexture(gl.TEXTURE0);\n    gl.bindTexture(gl.TEXTURE_2D, yTextureRef);\n    gl.texImage2D(gl.TEXTURE_2D, 0, gl.LUMINANCE, width, height, 0, gl.LUMINANCE, gl.UNSIGNED_BYTE, ydata);\n\n    gl.activeTexture(gl.TEXTURE1);\n    gl.bindTexture(gl.TEXTURE_2D, uvTextureRef);\n    gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, width / 2, height / 4, 0, gl.RGBA, gl.UNSIGNED_BYTE, uvdata);\n\n    gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);\n    return {\n      texture: this.outputTexuture,\n      width,\n      height\n    };\n  }\n}\n\nexport default Nv12;\n","import Filter from '../filter';\nimport GLUtil from '../glutil';\nclass Yuv420 extends Filter {\n  constructor (render, config) {\n    super();\n    this.vShader = ['attribute vec4 vertexPos;',\n      'attribute vec2 yTexturePos;',\n      'attribute vec2 uTexturePos;',\n      'attribute vec2 vTexturePos;',\n      'varying vec2 yTextureCoord;',\n      'varying vec2 uTextureCoord;',\n      'varying vec2 vTextureCoord;',\n      'void main()',\n      '{',\n      '  gl_Position = vertexPos;',\n      '  yTextureCoord = yTexturePos;',\n      '  uTextureCoord = uTexturePos;',\n      '  vTextureCoord = vTexturePos;',\n      '}'].join('\\n');\n    this.fShader = [\n      'precision highp float;',\n      'varying highp vec2 yTextureCoord;',\n      'varying highp vec2 uTextureCoord;',\n      'varying highp vec2 vTextureCoord;',\n      'uniform sampler2D ySampler;',\n      'uniform sampler2D uSampler;',\n      'uniform sampler2D vSampler;',\n      'uniform mat4 yuv2rgb;',\n\n      'void main(void) {',\n      '  highp float y = texture2D(ySampler,  yTextureCoord).r;',\n      '  highp float u = texture2D(uSampler,  uTextureCoord).r;',\n      '  highp float v = texture2D(vSampler,  vTextureCoord).r;',\n      '  gl_FragColor = vec4(y, u, v, 1) * yuv2rgb;',\n      '}'\n    ].join('\\n');\n  }\n\n  init (render) {\n    this.rend = render;\n    this.canvas = render.canvas;\n    let gl = this.gl = render.gl;\n    this.pw = GLUtil.createProgram(gl, this.vShader, this.fShader);\n    this.program = this.pw.program;\n    gl.useProgram(this.program);\n    // vertexPos\n    let vertexPosBuffer = GLUtil.createBuffer(gl, new Float32Array([1, 1, -1, 1, 1, -1, -1, -1]));\n    GLUtil.bindAttribute(gl, vertexPosBuffer, this.pw.vertexPos, 2);\n\n    // texturePos\n    let yTexturePosBuffer = GLUtil.createBuffer(gl, new Float32Array([1, 0, 0, 0, 1, 1, 0, 1]));\n    GLUtil.bindAttribute(gl, yTexturePosBuffer, this.pw.yTexturePos, 2);\n\n    let uTexturePosBuffer = GLUtil.createBuffer(gl, new Float32Array([1, 0, 0, 0, 1, 1, 0, 1]));\n    GLUtil.bindAttribute(gl, uTexturePosBuffer, this.pw.uTexturePos, 2);\n\n    let vTexturePosBuffer = GLUtil.createBuffer(gl, new Float32Array([1, 0, 0, 0, 1, 1, 0, 1]));\n    GLUtil.bindAttribute(gl, vTexturePosBuffer, this.pw.vTexturePos, 2);\n\n    let yTextureRef = GLUtil.createTexture(gl, gl.LINEAR);\n    gl.uniform1i(this.pw.ySampler, 0);\n\n    this.inputTextures.push(yTextureRef);\n\n    let uTextureRef = GLUtil.createTexture(gl, gl.LINEAR);\n    gl.uniform1i(this.pw.uSampler, 1);\n\n    this.inputTextures.push(uTextureRef);\n\n    let vTextureRef = GLUtil.createTexture(gl, gl.LINEAR);\n    gl.uniform1i(this.pw.vSampler, 2);\n\n    this.inputTextures.push(vTextureRef);\n\n    let yuv2rgb = [\n      1.16438, 0.00000, 1.59603, -0.87079,\n      1.16438, -0.39176, -0.81297, 0.52959,\n      1.16438, 2.01723, 0.00000, -1.08139,\n      0, 0, 0, 1\n    ];\n    gl.uniformMatrix4fv(this.pw.yuv2rgb, false, yuv2rgb);\n  }\n\n  render (data, width, height) {\n    let ydata = data[0];\n    let udata = data[1];\n    let vdata = data[2];\n    let gl = this.gl;\n    let program = this.program;\n    let yTextureRef = this.inputTextures[0];\n    let uTextureRef = this.inputTextures[1];\n    let vTextureRef = this.inputTextures[2];\n\n    if (this.width !== width || this.height !== height) {\n      this.width = width;\n      this.height = height;\n      this.outputTexuture = GLUtil.createTexture(gl, gl.LINEAR, new Uint8Array(width * height * 4), width, height);\n    }\n\n    if (!this.outputTexuture) {\n      this.outputTexuture = GLUtil.createTexture(gl, gl.LINEAR, new Uint8Array(width * height * 4), width, height);\n    }\n\n    gl.bindFramebuffer(gl.FRAMEBUFFER, this.rend.fb);\n    gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, this.outputTexuture, 0);\n\n    gl.useProgram(program);\n    gl.viewport(0, 0, this.canvas.width, this.canvas.height);\n\n    gl.pixelStorei(gl.UNPACK_ALIGNMENT, 1);\n    gl.activeTexture(gl.TEXTURE0);\n    gl.bindTexture(gl.TEXTURE_2D, yTextureRef);\n    gl.texImage2D(gl.TEXTURE_2D, 0, gl.LUMINANCE, width, height, 0, gl.LUMINANCE, gl.UNSIGNED_BYTE, ydata);\n\n    gl.activeTexture(gl.TEXTURE1);\n    gl.bindTexture(gl.TEXTURE_2D, uTextureRef);\n    gl.texImage2D(gl.TEXTURE_2D, 0, gl.LUMINANCE, width / 2, height / 2, 0, gl.LUMINANCE, gl.UNSIGNED_BYTE, udata);\n\n    gl.activeTexture(gl.TEXTURE2);\n    gl.bindTexture(gl.TEXTURE_2D, vTextureRef);\n    gl.texImage2D(gl.TEXTURE_2D, 0, gl.LUMINANCE, width / 2, height / 2, 0, gl.LUMINANCE, gl.UNSIGNED_BYTE, vdata);\n\n    gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);\n\n    return {\n      texture: this.outputTexuture,\n      width: width,\n      height: height\n    };\n  }\n}\n\nexport default Yuv420;\n","import Filter from '../filter';\nimport GLUtil from '../glutil';\nclass Rgba extends Filter {\n  constructor (config) {\n    super();\n    this.vShader = [\n      'attribute vec4 vertexPos;',\n      'attribute vec2 texturePos;',\n      'varying vec2 textureCoord;',\n      'void main()',\n      '{',\n      '  gl_Position = vertexPos;',\n      '  textureCoord = texturePos;',\n      '}'].join('\\n');\n    this.fShader = [\n      'precision highp float;',\n      'varying highp vec2 textureCoord;',\n      'uniform sampler2D sampler;',\n      'void main(void) {',\n      '  vec4 color = texture2D(sampler, textureCoord);',\n      '  gl_FragColor = vec4(color[0],color[1],color[2],color[3]);',\n      '}'].join('\\n');\n  }\n\n  init (render) {\n    this.rend = render;\n    this.canvas = render.canvas;\n    let gl = this.gl = render.gl;\n    this.pw = GLUtil.createProgram(gl, this.vShader, this.fShader);\n    this.program = this.pw.program;\n\n    gl.useProgram(this.program);\n    // vertexPos\n    let vertexPosBuffer = GLUtil.createBuffer(gl, new Float32Array([1, 1, -1, 1, 1, -1, -1, -1]));\n    GLUtil.bindAttribute(gl, vertexPosBuffer, this.pw.vertexPos, 2);\n\n    // texturePos\n    this.texturePosBuffer = GLUtil.createBuffer(gl, new Float32Array([1, 0, 0, 0, 1, 1, 0, 1]));\n    GLUtil.bindAttribute(gl, this.texturePosBuffer, this.pw.texturePos, 2);\n\n    let textureRef = GLUtil.createTexture(gl, gl.LINEAR);\n    gl.uniform1i(this.pw.sampler, 0);\n\n    this.inputTextures.push(textureRef);\n  }\n\n  render (data, width, height) {\n    if (data instanceof ImageData) {\n      data = data.data;\n    } else {\n      data = data[0];\n    }\n\n    let gl = this.gl;\n    let program = this.program;\n    let textureRef = this.inputTextures[0];\n\n    if (this.width !== width || this.height !== height) {\n      this.width = width;\n      this.height = height;\n      this.outputTexuture = GLUtil.createTexture(gl, gl.LINEAR, new Uint8Array(width * height * 4), width, height);\n    }\n\n    if (!this.outputTexuture) {\n      this.outputTexuture = GLUtil.createTexture(gl, gl.LINEAR, new Uint8Array(width * height * 4), width, height);\n    }\n\n    gl.bindFramebuffer(gl.FRAMEBUFFER, this.rend.fb);\n    gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, this.outputTexuture, 0);\n\n    gl.useProgram(program);\n    gl.viewport(0, 0, this.canvas.width, this.canvas.height);\n\n    gl.activeTexture(gl.TEXTURE0);\n    gl.bindTexture(gl.TEXTURE_2D, textureRef);\n    gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, width, height, 0, gl.RGBA, gl.UNSIGNED_BYTE, data);\n    gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);\n\n    return {\n      texture: this.outputTexuture,\n      width,\n      height\n    };\n  }\n}\n\nexport default Rgba;\n","import Filter from '../filter';\nimport GLUtil from '../glutil';\nclass Rgb extends Filter {\n  constructor (config) {\n    super();\n    this.vShader = [\n      'attribute vec4 vertexPos;',\n      'attribute vec2 texturePos;',\n      'varying vec2 textureCoord;',\n      'void main()',\n      '{',\n      '  gl_Position = vertexPos;',\n      '  textureCoord = texturePos;',\n      '}'].join('\\n');\n    this.fShader = [\n      'precision highp float;',\n      'varying highp vec2 textureCoord;',\n      'uniform sampler2D sampler;',\n      'uniform vec2 outerSize;',\n      'uniform mat4 YUV2RGB;',\n      'void main(void) {',\n      '  float my = floor(mod(textureCoord.y * outerSize.y, 4.0));',\n      '  float cy = 1.0 / outerSize.y;',\n\n      '  float mx = floor(mod(outerSize.x, 4.0));',\n      '  float cx = 1.0 / outerSize.x;',\n      '  float width =  outerSize.x + mx;',\n      '  float x = textureCoord.x + (mx * cx * textureCoord.y * outerSize.y);',\n      '  x = cx * mod(x * outerSize.x, width);',\n      '  float bdata, gdata, rdata;',\n\n      '  vec4 color = texture2D(sampler, vec2(x, textureCoord.y));',\n      '  rdata = color[0];',\n      '  gdata = color[1];',\n      '  bdata = color[2];',\n      '  gl_FragColor = vec4(rdata, gdata, bdata, 1);',\n      '}'].join('\\n');\n  }\n\n  init (render) {\n    this.rend = render;\n    this.canvas = render.canvas;\n    let gl = this.gl = render.gl;\n    this.pw = GLUtil.createProgram(gl, this.vShader, this.fShader);\n    this.program = this.pw.program;\n    gl.useProgram(this.program);\n    // vertexPos\n    let vertexPosBuffer = GLUtil.createBuffer(gl, new Float32Array([1, 1, -1, 1, 1, -1, -1, -1]));\n    GLUtil.bindAttribute(gl, vertexPosBuffer, this.pw.vertexPos, 2);\n\n    // texturePos\n    this.texturePosBuffer = GLUtil.createBuffer(gl, new Float32Array([1, 0, 0, 0, 1, 1, 0, 1]));\n    GLUtil.bindAttribute(gl, this.texturePosBuffer, this.pw.texturePos, 2);\n\n    let textureRef = GLUtil.createTexture(gl, gl.LINEAR);\n    gl.uniform1i(this.pw.sampler, 0);\n    this.inputTextures.push(textureRef);\n  }\n\n  render (data, width, height) {\n    data = data[0];\n    let gl = this.gl;\n    let program = this.program;\n    let textureRef = this.inputTextures[0];\n\n    if (this.width !== width || this.height !== height) {\n      this.width = width;\n      this.height = height;\n      this.outputTexuture = GLUtil.createTexture(gl, gl.LINEAR, new Uint8Array(width * height * 4), width, height);\n    }\n\n    if (!this.outputTexuture) {\n      this.outputTexuture = GLUtil.createTexture(gl, gl.LINEAR, new Uint8Array(width * height * 4), width, height);\n    }\n\n    gl.bindFramebuffer(gl.FRAMEBUFFER, this.rend.fb);\n    gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, this.outputTexuture, 0);\n\n    gl.useProgram(program);\n    gl.viewport(0, 0, this.canvas.width, this.canvas.height);\n\n    let outerSizeRef = gl.getUniformLocation(program, 'outerSize');\n    gl.uniform2fv(outerSizeRef, [width, height]);\n\n    gl.activeTexture(gl.TEXTURE0);\n    gl.bindTexture(gl.TEXTURE_2D, textureRef);\n    let inputx = width - (width % 4);\n    gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGB, inputx, height, 0, gl.RGB, gl.UNSIGNED_BYTE, data);\n    gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);\n\n    return {\n      texture: this.outputTexuture,\n      width,\n      height\n    };\n  }\n}\n\nexport default Rgb;\n","import GLUtil from './glutil';\nimport Basic from './filter/basic';\n\nimport Yuyv422 from './fmt/yuyv422';\nimport Rgb32 from './fmt/rgb32';\nimport Rgb24 from './fmt/rgb24';\nimport Nv12 from './fmt/nv12';\nimport Yuv420 from './fmt/yuv420';\nimport Rgba from './fmt/rgba';\nimport Rgb from './fmt/rgb';\n\nclass Render {\n  constructor (config) {\n    this.canvas = config.canvas;\n    // input\n    if (config.video) {\n      this.video = config.video;\n      config.flip = 'y';\n    } else if (config.image) {\n      this.image = config.image;\n    } else {\n      this._initFmt(config)\n    }\n\n    this.filters = [];\n\n    this.basicFilter = new Basic({\n      opacity: config.opacity !== undefined ? config.opacity : 1,\n      flip: config.flip || undefined\n    });\n\n    if (config.filters) {\n      for (let i = 0; i < config.filters.length; i++) {\n        this.filters.push(config.filters[i]);\n      }\n    }\n    this._init();\n  }\n\n  _initFmt (config) {\n    switch (config.format) {\n      case 'YUY2':\n        this.fmt = new Yuyv422(this);\n        break;\n      case 'RGBA':\n        this.fmt = new Rgba(this);\n        break;\n      case 'RGB':\n        this.fmt = new Rgb(this);\n        break;\n      case 'RGB32':\n        this.fmt = new Rgb32(this);\n        break;\n      case 'RGB24':\n        this.fmt = new Rgb24(this);\n        break;\n      case 'NV12':\n        this.fmt = new Nv12(this);\n        break;\n      case 'YUV420':\n        this.fmt = new Yuv420(this);\n        break;\n      default:\n        break;\n    }\n  }\n\n  _initImage () {\n\n  }\n\n  _init () {\n    this._initContextGL();\n\n    if (!this.gl) {\n      throw new Error(`fail to init gl`)\n    }\n\n    let gl = this.gl;\n    this.fb = gl.createFramebuffer();\n\n    if (this.fmt) {\n      this.fmt.init(this);\n    } else if (this.video) {\n      const width = this.video.videoWidth;\n      const height = this.video.videoHeight;\n      let emptyPixels = new Uint8Array(width * height * 4);\n      this.videoTexture = GLUtil.createTexture(gl, gl.LINEAR, emptyPixels, width, height);\n    }\n    this.basicFilter.init(this)\n\n    for (let i = 0; i < this.filters.length; i++) {\n      let filter = this.filters[i];\n      filter.init(this);\n    }\n  }\n\n  _initContextGL () {\n    let canvas = this.canvas;\n    let gl = null;\n\n    let validContextNames = ['webgl', 'experimental-webgl', 'moz-webgl', 'webkit-3d'];\n    let nameIndex = 0;\n\n    while (!gl && nameIndex < validContextNames.length) {\n      let contextName = validContextNames[nameIndex];\n\n      try {\n        gl = canvas.getContext(contextName);\n      } catch (e) {\n        gl = null;\n      }\n\n      if (!gl || typeof gl.getParameter !== 'function') {\n        gl = null;\n      }\n\n      ++nameIndex;\n    };\n\n    this.gl = gl;\n  };\n\n  _drawPicture (data, iWidth, iHeight) {\n    let { texture, width, height } = this.fmt.render(data, iWidth, iHeight);\n    this._applyFilters(texture, width, height);\n  }\n\n  _drawVideo () {\n    let gl = this.gl;\n    gl.bindTexture(gl.TEXTURE_2D, this.videoTexture);\n    // gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, true);\n    gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, this.video);\n    this._applyFilters(this.videoTexture, this.video.videoWidth, this.video.videoHeight)\n  }\n\n  _applyFilters (texture, width, height) {\n    let gl = this.gl;\n\n    for (let i = 0; i < this.filters.length; i++) {\n      let filter = this.filters[i];\n      let data = filter.render(texture, width, height);\n      texture = data.texture;\n      width = data.width;\n      height = data.height;\n    }\n\n    gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n    if (this.width !== width || this.height !== height) {\n      this.width = this.canvas.width = width;\n      this.height = this.canvas.height = height;\n    }\n    this.basicFilter.render(texture, width, height);\n  }\n\n  render (data, width, height) {\n    if (this.fmt) {\n      if (this.width !== width || this.height !== height) {\n        this.width = this.canvas.width = width;\n        this.height = this.canvas.height = height;\n      }\n\n      this.gl.viewport(0, 0, this.canvas.width, this.canvas.height);\n      this._drawPicture(data, width, height)\n    } else if (this.video) {\n      this.gl.viewport(0, 0, this.canvas.width, this.canvas.height);\n      this._drawVideo();\n    }\n  }\n}\n\nexport default Render;\n"],"names":["GLUtil","gl","filter","data","width","height","textureRef","createTexture","bindTexture","TEXTURE_2D","texParameteri","TEXTURE_MAG_FILTER","TEXTURE_MIN_FILTER","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","Uint8Array","texImage2D","RGBA","UNSIGNED_BYTE","HTMLVideoElement","HTMLImageElement","ImageData","buffer","createBuffer","bindBuffer","ARRAY_BUFFER","bufferData","STATIC_DRAW","type","source","shader","createShader","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","Error","getShaderInfoLog","vertexSource","fragmentSource","program","createProgram","vertexShader","VERTEX_SHADER","fragmentShader","FRAGMENT_SHADER","attachShader","linkProgram","getProgramParameter","LINK_STATUS","getProgramInfoLog","wrapper","numAttributes","ACTIVE_ATTRIBUTES","i","attribute","getActiveAttrib","name","getAttribLocation","numUniforms","ACTIVE_UNIFORMS","i$1","uniform","getActiveUniform","getUniformLocation","numComponents","enableVertexAttribArray","vertexAttribPointer","FLOAT","Filter","inputTextures","Basic","config","vShader","join","fShader","opacity","undefined","flip","render","rend","canvas","pw","useProgram","vertexPosBuffer","Float32Array","bindAttribute","vertexPos","texturePosBuffer","texturePos","LINEAR","uniform1i","sampler","uniform1f","flipx","flipy","texture","activeTexture","TEXTURE0","drawArrays","TRIANGLE_STRIP","Yuyv422","push","yuv2rgb","uniformMatrix4fv","outputTexuture","bindFramebuffer","FRAMEBUFFER","fb","framebufferTexture2D","COLOR_ATTACHMENT0","viewport","uniform2fv","outerSize","pixelStorei","UNPACK_ALIGNMENT","Rgb32","Rgb24","outerSizeRef","inputx","RGB","Nv12","yTexturePosBuffer","yTexturePos","uvTexturePosBuffer","uvTexturePos","yTextureRef","ySampler","uvTextureRef","uvSampler","ydata","uvdata","LUMINANCE","TEXTURE1","Yuv420","uTexturePosBuffer","uTexturePos","vTexturePosBuffer","vTexturePos","uTextureRef","uSampler","vTextureRef","vSampler","udata","vdata","TEXTURE2","Rgba","Rgb","Render","video","image","_initFmt","filters","basicFilter","length","_init","format","fmt","_initContextGL","createFramebuffer","init","videoWidth","videoHeight","emptyPixels","videoTexture","validContextNames","nameIndex","contextName","getContext","e","getParameter","iWidth","iHeight","_applyFilters","_drawPicture","_drawVideo"],"mappings":"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"}