{"version":3,"file":"index.min.js","sources":["../src/helpers/ticker.js","../../../node_modules/rollup-plugin-bundle-worker/src/workerhelper.js","../../../node_modules/rollup-plugin-node-builtins/src/es6/events.js","../src/polyfills/custom-elements.min.js","../src/polyfills/native-element.js","../src/core/worker.js","../src/core/backupWorker.js","../src/core/yuv-canvas.js","../src/models/sourcebuffer.js","../src/models/time-ranges.js","../src/core/video-context.js","../src/core/audio-context.js","../src/helpers/reconciler.js","../src/helpers/tickworker.js","../src/helpers/worker-ticker.js","../src/index.js"],"sourcesContent":["/**\n * @author fuyuhao@bytedance.com\n */\n\n export const DEFAULT_FPS = 30\n\n export function  validateFPS(fps){\n  if(fps < 20 || fps > 80){\n    return false\n  }\n  return true\n}\nexport default class Ticker {\n  constructor (options) {\n    this.options = Object.assign({}, options || {})\n    if(!this.options.interval || !validateFPS(1000 / this.options.interval)){\n      this.options.interval = 1000 / 30;\n    }\n    this.callbacks = []\n  }\n\n  start (...callbacks) {\n    this.callbacks = callbacks\n  }\n\n  onTick () {\n    for (let i = 0, len = this.callbacks.length; i < len; i++) {\n      const callback = this.callbacks[i]\n      callback()\n    }\n  }\n\n  setInterval (interval) {\n    if(!validateFPS(1000 / interval)){\n      interval = 1000 / 30\n    }\n    this.options.interval = interval\n    return this;\n  }\n}\n\n/**\n * ticker use requestAnimationFrame\n */\nexport class RafTicker extends Ticker {\n  constructor (props) {\n    super(props);\n    this.prev = null;\n    this.timerId = null\n    this._subTimerId = null\n\n    this._tickFunc = RafTicker.getTickFunc()\n    this.tick = this.tick.bind(this)\n  }\n\n  start (...callbacks) {\n    super.start(...callbacks)\n    this.tick()\n  }\n\n  tick () {\n    this.nextTick();\n    this.onTick()\n  }\n\n  nextTick () {\n    const { _tickFunc } = this;\n    this.timerId = _tickFunc(this.tick)\n  }\n\n  stop () {\n    if (this.timerId) {\n      const cancelFunc = RafTicker.getCancelFunc()\n\n      cancelFunc(this.timerId)\n    }\n  }\n\n  resume () {\n    this.nextTick();\n  }\n\n  static getTickFunc () {\n    return window.requestAnimationFrame || window.webkitRequestAnimationFrame\n  }\n\n  static getCancelFunc () {\n    return window.cancelAnimationFrame || window.webkitCancelAnimationFrame\n  }\n\n  static isSupported () {\n    return RafTicker.getTickFunc() !== undefined\n  }\n}\n\n/**\n * use setTimeout for browsers without raf support\n */\nexport class TimeoutTicker extends Ticker {\n  constructor (config) {\n    super(config)\n    this.timeoutId = null\n  }\n\n  start (...callbacks) {\n    super.start(...callbacks)\n    this.tick()\n  }\n\n  tick () {\n    this.nextTick();\n    this.onTick()\n  }\n\n  nextTick () {\n    this.timeoutId = window.setTimeout(() => {\n      this.stop();\n      this.tick();\n    }, this.options.interval)\n  }\n\n  stop () {\n    if (this.timeoutId) {\n      window.clearTimeout(this.timeoutId)\n    }\n  }\n}\n\n/**\n * 返回Ticker构造函数\n * @returns {Ticker}\n * 使用TimeoutTicker 1.可控制间隔 2.防止页面切换降频\n */\nexport const getTicker = () => {\n  if (RafTicker.isSupported()) {\n    return RafTicker\n  } else {\n    return TimeoutTicker\n  }\n}\n","var TARGET = typeof Symbol === 'undefined' ? '__target' : Symbol(),\n    SCRIPT_TYPE = 'application/javascript',\n    BlobBuilder = window.BlobBuilder || window.WebKitBlobBuilder || window.MozBlobBuilder || window.MSBlobBuilder,\n    URL = window.URL || window.webkitURL,\n    Worker = window.Worker;\n\n/**\n * Returns a wrapper around Web Worker code that is constructible.\n *\n * @function shimWorker\n *\n * @param { String }    filename    The name of the file\n * @param { Function }  fn          Function wrapping the code of the worker\n */\nexport default function shimWorker (filename, fn) {\n    return function ShimWorker (forceFallback) {\n        var o = this;\n\n        if (!fn) {\n            return new Worker(filename);\n        }\n        else if (Worker && !forceFallback) {\n            // Convert the function's inner code to a string to construct the worker\n            var source = `${ fn }`.replace(/^function.+?{/, '').slice(0, -1),\n                objURL = createSourceObject(source);\n\n            this[TARGET] = new Worker(objURL);\n            URL.revokeObjectURL(objURL);\n            return this[TARGET];\n        }\n        else {\n            var selfShim = {\n                    postMessage: m => {\n                        if (o.onmessage) {\n                            setTimeout(() => o.onmessage({ data: m, target: selfShim }));\n                        }\n                    }\n                };\n\n            fn.call(selfShim);\n            this.postMessage = m => {\n                setTimeout(() => selfShim.onmessage({ data: m, target: o }));\n            };\n            this.isThisThread = true;\n        }\n    };\n};\n\n// Test Worker capabilities\nif (Worker) {\n    var testWorker,\n        objURL = createSourceObject('self.onmessage = function () {}'),\n        testArray = new Uint8Array(1);\n\n    try {\n        // No workers via blobs in Edge 12 and IE 11 and lower :(\n        if (/(?:Trident|Edge)\\/(?:[567]|12)/i.test(navigator.userAgent)) {\n            throw new Error('Not available');\n        }\n        testWorker = new Worker(objURL);\n\n        // Native browser on some Samsung devices throws for transferables, let's detect it\n        testWorker.postMessage(testArray, [testArray.buffer]);\n    }\n    catch (e) {\n        Worker = null;\n    }\n    finally {\n        URL.revokeObjectURL(objURL);\n        if (testWorker) {\n            testWorker.terminate();\n        }\n    }\n}\n\nfunction createSourceObject(str) {\n    try {\n        return URL.createObjectURL(new Blob([str], { type: SCRIPT_TYPE }));\n    }\n    catch (e) {\n        var blob = new BlobBuilder();\n        blob.append(str);\n        return URL.createObjectURL(blob.getBlob(type));\n    }\n}\n","'use strict';\n\nvar domain;\n\n// This constructor is used to store event handlers. Instantiating this is\n// faster than explicitly calling `Object.create(null)` to get a \"clean\" empty\n// object (tested with v8 v4.9).\nfunction EventHandlers() {}\nEventHandlers.prototype = Object.create(null);\n\nfunction EventEmitter() {\n  EventEmitter.init.call(this);\n}\nexport default EventEmitter;\nexport {EventEmitter};\n\n// nodejs oddity\n// require('events') === require('events').EventEmitter\nEventEmitter.EventEmitter = EventEmitter\n\nEventEmitter.usingDomains = false;\n\nEventEmitter.prototype.domain = undefined;\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nEventEmitter.defaultMaxListeners = 10;\n\nEventEmitter.init = function() {\n  this.domain = null;\n  if (EventEmitter.usingDomains) {\n    // if there is an active domain, then attach to it.\n    if (domain.active && !(this instanceof domain.Domain)) {\n      this.domain = domain.active;\n    }\n  }\n\n  if (!this._events || this._events === Object.getPrototypeOf(this)._events) {\n    this._events = new EventHandlers();\n    this._eventsCount = 0;\n  }\n\n  this._maxListeners = this._maxListeners || undefined;\n};\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function setMaxListeners(n) {\n  if (typeof n !== 'number' || n < 0 || isNaN(n))\n    throw new TypeError('\"n\" argument must be a positive number');\n  this._maxListeners = n;\n  return this;\n};\n\nfunction $getMaxListeners(that) {\n  if (that._maxListeners === undefined)\n    return EventEmitter.defaultMaxListeners;\n  return that._maxListeners;\n}\n\nEventEmitter.prototype.getMaxListeners = function getMaxListeners() {\n  return $getMaxListeners(this);\n};\n\n// These standalone emit* functions are used to optimize calling of event\n// handlers for fast cases because emit() itself often has a variable number of\n// arguments and can be deoptimized because of that. These functions always have\n// the same number of arguments and thus do not get deoptimized, so the code\n// inside them can execute faster.\nfunction emitNone(handler, isFn, self) {\n  if (isFn)\n    handler.call(self);\n  else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      listeners[i].call(self);\n  }\n}\nfunction emitOne(handler, isFn, self, arg1) {\n  if (isFn)\n    handler.call(self, arg1);\n  else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      listeners[i].call(self, arg1);\n  }\n}\nfunction emitTwo(handler, isFn, self, arg1, arg2) {\n  if (isFn)\n    handler.call(self, arg1, arg2);\n  else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      listeners[i].call(self, arg1, arg2);\n  }\n}\nfunction emitThree(handler, isFn, self, arg1, arg2, arg3) {\n  if (isFn)\n    handler.call(self, arg1, arg2, arg3);\n  else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      listeners[i].call(self, arg1, arg2, arg3);\n  }\n}\n\nfunction emitMany(handler, isFn, self, args) {\n  if (isFn)\n    handler.apply(self, args);\n  else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      listeners[i].apply(self, args);\n  }\n}\n\nEventEmitter.prototype.emit = function emit(type) {\n  var er, handler, len, args, i, events, domain;\n  var needDomainExit = false;\n  var doError = (type === 'error');\n\n  events = this._events;\n  if (events)\n    doError = (doError && events.error == null);\n  else if (!doError)\n    return false;\n\n  domain = this.domain;\n\n  // If there is no 'error' event listener then throw.\n  if (doError) {\n    er = arguments[1];\n    if (domain) {\n      if (!er)\n        er = new Error('Uncaught, unspecified \"error\" event');\n      er.domainEmitter = this;\n      er.domain = domain;\n      er.domainThrown = false;\n      domain.emit('error', er);\n    } else if (er instanceof Error) {\n      throw er; // Unhandled 'error' event\n    } else {\n      // At least give some kind of context to the user\n      var err = new Error('Uncaught, unspecified \"error\" event. (' + er + ')');\n      err.context = er;\n      throw err;\n    }\n    return false;\n  }\n\n  handler = events[type];\n\n  if (!handler)\n    return false;\n\n  var isFn = typeof handler === 'function';\n  len = arguments.length;\n  switch (len) {\n    // fast cases\n    case 1:\n      emitNone(handler, isFn, this);\n      break;\n    case 2:\n      emitOne(handler, isFn, this, arguments[1]);\n      break;\n    case 3:\n      emitTwo(handler, isFn, this, arguments[1], arguments[2]);\n      break;\n    case 4:\n      emitThree(handler, isFn, this, arguments[1], arguments[2], arguments[3]);\n      break;\n    // slower\n    default:\n      args = new Array(len - 1);\n      for (i = 1; i < len; i++)\n        args[i - 1] = arguments[i];\n      emitMany(handler, isFn, this, args);\n  }\n\n  if (needDomainExit)\n    domain.exit();\n\n  return true;\n};\n\nfunction _addListener(target, type, listener, prepend) {\n  var m;\n  var events;\n  var existing;\n\n  if (typeof listener !== 'function')\n    throw new TypeError('\"listener\" argument must be a function');\n\n  events = target._events;\n  if (!events) {\n    events = target._events = new EventHandlers();\n    target._eventsCount = 0;\n  } else {\n    // To avoid recursion in the case that type === \"newListener\"! Before\n    // adding it to the listeners, first emit \"newListener\".\n    if (events.newListener) {\n      target.emit('newListener', type,\n                  listener.listener ? listener.listener : listener);\n\n      // Re-assign `events` because a newListener handler could have caused the\n      // this._events to be assigned to a new object\n      events = target._events;\n    }\n    existing = events[type];\n  }\n\n  if (!existing) {\n    // Optimize the case of one listener. Don't need the extra array object.\n    existing = events[type] = listener;\n    ++target._eventsCount;\n  } else {\n    if (typeof existing === 'function') {\n      // Adding the second element, need to change to array.\n      existing = events[type] = prepend ? [listener, existing] :\n                                          [existing, listener];\n    } else {\n      // If we've already got an array, just append.\n      if (prepend) {\n        existing.unshift(listener);\n      } else {\n        existing.push(listener);\n      }\n    }\n\n    // Check for listener leak\n    if (!existing.warned) {\n      m = $getMaxListeners(target);\n      if (m && m > 0 && existing.length > m) {\n        existing.warned = true;\n        var w = new Error('Possible EventEmitter memory leak detected. ' +\n                            existing.length + ' ' + type + ' listeners added. ' +\n                            'Use emitter.setMaxListeners() to increase limit');\n        w.name = 'MaxListenersExceededWarning';\n        w.emitter = target;\n        w.type = type;\n        w.count = existing.length;\n        emitWarning(w);\n      }\n    }\n  }\n\n  return target;\n}\nfunction emitWarning(e) {\n  typeof console.warn === 'function' ? console.warn(e) : console.log(e);\n}\nEventEmitter.prototype.addListener = function addListener(type, listener) {\n  return _addListener(this, type, listener, false);\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.prependListener =\n    function prependListener(type, listener) {\n      return _addListener(this, type, listener, true);\n    };\n\nfunction _onceWrap(target, type, listener) {\n  var fired = false;\n  function g() {\n    target.removeListener(type, g);\n    if (!fired) {\n      fired = true;\n      listener.apply(target, arguments);\n    }\n  }\n  g.listener = listener;\n  return g;\n}\n\nEventEmitter.prototype.once = function once(type, listener) {\n  if (typeof listener !== 'function')\n    throw new TypeError('\"listener\" argument must be a function');\n  this.on(type, _onceWrap(this, type, listener));\n  return this;\n};\n\nEventEmitter.prototype.prependOnceListener =\n    function prependOnceListener(type, listener) {\n      if (typeof listener !== 'function')\n        throw new TypeError('\"listener\" argument must be a function');\n      this.prependListener(type, _onceWrap(this, type, listener));\n      return this;\n    };\n\n// emits a 'removeListener' event iff the listener was removed\nEventEmitter.prototype.removeListener =\n    function removeListener(type, listener) {\n      var list, events, position, i, originalListener;\n\n      if (typeof listener !== 'function')\n        throw new TypeError('\"listener\" argument must be a function');\n\n      events = this._events;\n      if (!events)\n        return this;\n\n      list = events[type];\n      if (!list)\n        return this;\n\n      if (list === listener || (list.listener && list.listener === listener)) {\n        if (--this._eventsCount === 0)\n          this._events = new EventHandlers();\n        else {\n          delete events[type];\n          if (events.removeListener)\n            this.emit('removeListener', type, list.listener || listener);\n        }\n      } else if (typeof list !== 'function') {\n        position = -1;\n\n        for (i = list.length; i-- > 0;) {\n          if (list[i] === listener ||\n              (list[i].listener && list[i].listener === listener)) {\n            originalListener = list[i].listener;\n            position = i;\n            break;\n          }\n        }\n\n        if (position < 0)\n          return this;\n\n        if (list.length === 1) {\n          list[0] = undefined;\n          if (--this._eventsCount === 0) {\n            this._events = new EventHandlers();\n            return this;\n          } else {\n            delete events[type];\n          }\n        } else {\n          spliceOne(list, position);\n        }\n\n        if (events.removeListener)\n          this.emit('removeListener', type, originalListener || listener);\n      }\n\n      return this;\n    };\n\nEventEmitter.prototype.removeAllListeners =\n    function removeAllListeners(type) {\n      var listeners, events;\n\n      events = this._events;\n      if (!events)\n        return this;\n\n      // not listening for removeListener, no need to emit\n      if (!events.removeListener) {\n        if (arguments.length === 0) {\n          this._events = new EventHandlers();\n          this._eventsCount = 0;\n        } else if (events[type]) {\n          if (--this._eventsCount === 0)\n            this._events = new EventHandlers();\n          else\n            delete events[type];\n        }\n        return this;\n      }\n\n      // emit removeListener for all listeners on all events\n      if (arguments.length === 0) {\n        var keys = Object.keys(events);\n        for (var i = 0, key; i < keys.length; ++i) {\n          key = keys[i];\n          if (key === 'removeListener') continue;\n          this.removeAllListeners(key);\n        }\n        this.removeAllListeners('removeListener');\n        this._events = new EventHandlers();\n        this._eventsCount = 0;\n        return this;\n      }\n\n      listeners = events[type];\n\n      if (typeof listeners === 'function') {\n        this.removeListener(type, listeners);\n      } else if (listeners) {\n        // LIFO order\n        do {\n          this.removeListener(type, listeners[listeners.length - 1]);\n        } while (listeners[0]);\n      }\n\n      return this;\n    };\n\nEventEmitter.prototype.listeners = function listeners(type) {\n  var evlistener;\n  var ret;\n  var events = this._events;\n\n  if (!events)\n    ret = [];\n  else {\n    evlistener = events[type];\n    if (!evlistener)\n      ret = [];\n    else if (typeof evlistener === 'function')\n      ret = [evlistener.listener || evlistener];\n    else\n      ret = unwrapListeners(evlistener);\n  }\n\n  return ret;\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  if (typeof emitter.listenerCount === 'function') {\n    return emitter.listenerCount(type);\n  } else {\n    return listenerCount.call(emitter, type);\n  }\n};\n\nEventEmitter.prototype.listenerCount = listenerCount;\nfunction listenerCount(type) {\n  var events = this._events;\n\n  if (events) {\n    var evlistener = events[type];\n\n    if (typeof evlistener === 'function') {\n      return 1;\n    } else if (evlistener) {\n      return evlistener.length;\n    }\n  }\n\n  return 0;\n}\n\nEventEmitter.prototype.eventNames = function eventNames() {\n  return this._eventsCount > 0 ? Reflect.ownKeys(this._events) : [];\n};\n\n// About 1.5x faster than the two-arg version of Array#splice().\nfunction spliceOne(list, index) {\n  for (var i = index, k = i + 1, n = list.length; k < n; i += 1, k += 1)\n    list[i] = list[k];\n  list.pop();\n}\n\nfunction arrayClone(arr, i) {\n  var copy = new Array(i);\n  while (i--)\n    copy[i] = arr[i];\n  return copy;\n}\n\nfunction unwrapListeners(arr) {\n  var ret = new Array(arr.length);\n  for (var i = 0; i < ret.length; ++i) {\n    ret[i] = arr[i].listener || arr[i];\n  }\n  return ret;\n}\n","(function(){\n  /*\n\n   Copyright (c) 2016 The Polymer Project Authors. All rights reserved.\n   This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\n   The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\n   The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\n   Code distributed by Google as part of the polymer project is also\n   subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n  */\n  'use strict';var n=window.Document.prototype.createElement,p=window.Document.prototype.createElementNS,aa=window.Document.prototype.importNode,ba=window.Document.prototype.prepend,ca=window.Document.prototype.append,da=window.DocumentFragment.prototype.prepend,ea=window.DocumentFragment.prototype.append,q=window.Node.prototype.cloneNode,r=window.Node.prototype.appendChild,t=window.Node.prototype.insertBefore,u=window.Node.prototype.removeChild,v=window.Node.prototype.replaceChild,x=Object.getOwnPropertyDescriptor(window.Node.prototype,\n    \"textContent\"),y=window.Element.prototype.attachShadow,z=Object.getOwnPropertyDescriptor(window.Element.prototype,\"innerHTML\"),A=window.Element.prototype.getAttribute,B=window.Element.prototype.setAttribute,C=window.Element.prototype.removeAttribute,D=window.Element.prototype.getAttributeNS,E=window.Element.prototype.setAttributeNS,F=window.Element.prototype.removeAttributeNS,G=window.Element.prototype.insertAdjacentElement,fa=window.Element.prototype.insertAdjacentHTML,ha=window.Element.prototype.prepend,\n    ia=window.Element.prototype.append,ja=window.Element.prototype.before,ka=window.Element.prototype.after,la=window.Element.prototype.replaceWith,ma=window.Element.prototype.remove,na=window.HTMLElement,H=Object.getOwnPropertyDescriptor(window.HTMLElement.prototype,\"innerHTML\"),oa=window.HTMLElement.prototype.insertAdjacentElement,pa=window.HTMLElement.prototype.insertAdjacentHTML;var qa=new Set;\"annotation-xml color-profile font-face font-face-src font-face-uri font-face-format font-face-name missing-glyph\".split(\" \").forEach(function(a){return qa.add(a)});function ra(a){var b=qa.has(a);a=/^[a-z][.0-9_a-z]*-[\\-.0-9_a-z]*$/.test(a);return!b&&a}var sa=document.contains?document.contains.bind(document):document.documentElement.contains.bind(document.documentElement);\n  function I(a){var b=a.isConnected;if(void 0!==b)return b;if(sa(a))return!0;for(;a&&!(a.__CE_isImportDocument||a instanceof Document);)a=a.parentNode||(window.ShadowRoot&&a instanceof ShadowRoot?a.host:void 0);return!(!a||!(a.__CE_isImportDocument||a instanceof Document))}function J(a){var b=a.children;if(b)return Array.prototype.slice.call(b);b=[];for(a=a.firstChild;a;a=a.nextSibling)a.nodeType===Node.ELEMENT_NODE&&b.push(a);return b}\n  function K(a,b){for(;b&&b!==a&&!b.nextSibling;)b=b.parentNode;return b&&b!==a?b.nextSibling:null}\n  function L(a,b,c){for(var f=a;f;){if(f.nodeType===Node.ELEMENT_NODE){var d=f;b(d);var e=d.localName;if(\"link\"===e&&\"import\"===d.getAttribute(\"rel\")){f=d.import;void 0===c&&(c=new Set);if(f instanceof Node&&!c.has(f))for(c.add(f),f=f.firstChild;f;f=f.nextSibling)L(f,b,c);f=K(a,d);continue}else if(\"template\"===e){f=K(a,d);continue}if(d=d.__CE_shadowRoot)for(d=d.firstChild;d;d=d.nextSibling)L(d,b,c)}f=f.firstChild?f.firstChild:K(a,f)}}function M(a,b,c){a[b]=c};function ta(a){var b=document;this.c=a;this.a=b;this.b=void 0;N(this.c,this.a);\"loading\"===this.a.readyState&&(this.b=new MutationObserver(this.f.bind(this)),this.b.observe(this.a,{childList:!0,subtree:!0}))}function ua(a){a.b&&a.b.disconnect()}ta.prototype.f=function(a){var b=this.a.readyState;\"interactive\"!==b&&\"complete\"!==b||ua(this);for(b=0;b<a.length;b++)for(var c=a[b].addedNodes,f=0;f<c.length;f++)N(this.c,c[f])};function va(){var a=this;this.b=this.a=void 0;this.c=new Promise(function(b){a.b=b;a.a&&b(a.a)})}function wa(a){if(a.a)throw Error(\"Already resolved.\");a.a=void 0;a.b&&a.b(void 0)};function O(a){this.f=new Map;this.g=new Map;this.l=new Map;this.i=!1;this.b=a;this.j=new Map;this.c=function(b){return b()};this.a=!1;this.h=[];this.m=a.f?new ta(a):void 0}O.prototype.o=function(a,b){var c=this;if(!(b instanceof Function))throw new TypeError(\"Custom element constructor getters must be functions.\");xa(this,a);this.f.set(a,b);this.h.push(a);this.a||(this.a=!0,this.c(function(){return ya(c)}))};\n  O.prototype.define=function(a,b){var c=this;if(!(b instanceof Function))throw new TypeError(\"Custom element constructors must be functions.\");xa(this,a);za(this,a,b);this.h.push(a);this.a||(this.a=!0,this.c(function(){return ya(c)}))};function xa(a,b){if(!ra(b))throw new SyntaxError(\"The element name '\"+b+\"' is not valid.\");if(P(a,b))throw Error(\"A custom element with name '\"+b+\"' has already been defined.\");if(a.i)throw Error(\"A custom element is already being defined.\");}\n  function za(a,b,c){a.i=!0;var f;try{var d=function(m){var w=e[m];if(void 0!==w&&!(w instanceof Function))throw Error(\"The '\"+m+\"' callback must be a function.\");return w},e=c.prototype;if(!(e instanceof Object))throw new TypeError(\"The custom element constructor's prototype is not an object.\");var g=d(\"connectedCallback\");var h=d(\"disconnectedCallback\");var k=d(\"adoptedCallback\");var l=(f=d(\"attributeChangedCallback\"))&&c.observedAttributes||[]}catch(m){throw m;}finally{a.i=!1}c={localName:b,constructorFunction:c,\n    connectedCallback:g,disconnectedCallback:h,adoptedCallback:k,attributeChangedCallback:f,observedAttributes:l,constructionStack:[]};a.g.set(b,c);a.l.set(c.constructorFunction,c);return c}O.prototype.upgrade=function(a){N(this.b,a)};\n  function ya(a){if(!1!==a.a){a.a=!1;for(var b=[],c=a.h,f=new Map,d=0;d<c.length;d++)f.set(c[d],[]);N(a.b,document,{upgrade:function(k){if(void 0===k.__CE_state){var l=k.localName,m=f.get(l);m?m.push(k):a.g.has(l)&&b.push(k)}}});for(d=0;d<b.length;d++)Q(a.b,b[d]);for(d=0;d<c.length;d++){for(var e=c[d],g=f.get(e),h=0;h<g.length;h++)Q(a.b,g[h]);(e=a.j.get(e))&&wa(e)}c.length=0}}O.prototype.get=function(a){if(a=P(this,a))return a.constructorFunction};\n  O.prototype.whenDefined=function(a){if(!ra(a))return Promise.reject(new SyntaxError(\"'\"+a+\"' is not a valid custom element name.\"));var b=this.j.get(a);if(b)return b.c;b=new va;this.j.set(a,b);var c=this.g.has(a)||this.f.has(a);a=-1===this.h.indexOf(a);c&&a&&wa(b);return b.c};O.prototype.polyfillWrapFlushCallback=function(a){this.m&&ua(this.m);var b=this.c;this.c=function(c){return a(function(){return b(c)})}};\n  function P(a,b){var c=a.g.get(b);if(c)return c;if(c=a.f.get(b)){a.f.delete(b);try{return za(a,b,c())}catch(f){R(f)}}}window.CustomElementRegistry=O;O.prototype.define=O.prototype.define;O.prototype.upgrade=O.prototype.upgrade;O.prototype.get=O.prototype.get;O.prototype.whenDefined=O.prototype.whenDefined;O.prototype.polyfillDefineLazy=O.prototype.o;O.prototype.polyfillWrapFlushCallback=O.prototype.polyfillWrapFlushCallback;function S(){var a=T&&T.noDocumentConstructionObserver,b=T&&T.shadyDomFastWalk;this.b=[];this.c=[];this.a=!1;this.shadyDomFastWalk=b;this.f=!a}function U(a,b,c,f){var d=window.ShadyDOM;if(a.shadyDomFastWalk&&d&&d.inUse){if(b.nodeType===Node.ELEMENT_NODE&&c(b),b.querySelectorAll)for(a=d.nativeMethods.querySelectorAll.call(b,\"*\"),b=0;b<a.length;b++)c(a[b])}else L(b,c,f)}function Aa(a,b){a.a=!0;a.b.push(b)}function Ba(a,b){a.a=!0;a.c.push(b)}function V(a,b){a.a&&U(a,b,function(c){return W(a,c)})}\n  function W(a,b){if(a.a&&!b.__CE_patched){b.__CE_patched=!0;for(var c=0;c<a.b.length;c++)a.b[c](b);for(c=0;c<a.c.length;c++)a.c[c](b)}}function X(a,b){var c=[];U(a,b,function(d){return c.push(d)});for(b=0;b<c.length;b++){var f=c[b];1===f.__CE_state?a.connectedCallback(f):Q(a,f)}}function Y(a,b){var c=[];U(a,b,function(d){return c.push(d)});for(b=0;b<c.length;b++){var f=c[b];1===f.__CE_state&&a.disconnectedCallback(f)}}\n  function N(a,b,c){c=void 0===c?{}:c;var f=c.s,d=c.upgrade||function(g){return Q(a,g)},e=[];U(a,b,function(g){a.a&&W(a,g);if(\"link\"===g.localName&&\"import\"===g.getAttribute(\"rel\")){var h=g.import;h instanceof Node&&(h.__CE_isImportDocument=!0,h.__CE_registry=document.__CE_registry);h&&\"complete\"===h.readyState?h.__CE_documentLoadHandled=!0:g.addEventListener(\"load\",function(){var k=g.import;if(!k.__CE_documentLoadHandled){k.__CE_documentLoadHandled=!0;var l=new Set;f&&(f.forEach(function(m){return l.add(m)}),\n    l.delete(k));N(a,k,{s:l,upgrade:d})}})}else e.push(g)},f);for(b=0;b<e.length;b++)d(e[b])}\n  function Q(a,b){try{var c=b.ownerDocument,f=c.__CE_registry;var d=f&&(c.defaultView||c.__CE_isImportDocument)?P(f,b.localName):void 0;if(d&&void 0===b.__CE_state){d.constructionStack.push(b);try{try{if(new d.constructorFunction!==b)throw Error(\"The custom element constructor did not produce the element being upgraded.\");}finally{d.constructionStack.pop()}}catch(k){throw b.__CE_state=2,k;}b.__CE_state=1;b.__CE_definition=d;if(d.attributeChangedCallback&&b.hasAttributes()){var e=d.observedAttributes;\n    for(d=0;d<e.length;d++){var g=e[d],h=b.getAttribute(g);null!==h&&a.attributeChangedCallback(b,g,null,h,null)}}I(b)&&a.connectedCallback(b)}}catch(k){R(k)}}S.prototype.connectedCallback=function(a){var b=a.__CE_definition;if(b.connectedCallback)try{b.connectedCallback.call(a)}catch(c){R(c)}};S.prototype.disconnectedCallback=function(a){var b=a.__CE_definition;if(b.disconnectedCallback)try{b.disconnectedCallback.call(a)}catch(c){R(c)}};\n  S.prototype.attributeChangedCallback=function(a,b,c,f,d){var e=a.__CE_definition;if(e.attributeChangedCallback&&-1<e.observedAttributes.indexOf(b))try{e.attributeChangedCallback.call(a,b,c,f,d)}catch(g){R(g)}};\n  function Ca(a,b,c,f){var d=b.__CE_registry;if(d&&(null===f||\"http://www.w3.org/1999/xhtml\"===f)&&(d=P(d,c)))try{var e=new d.constructorFunction;if(void 0===e.__CE_state||void 0===e.__CE_definition)throw Error(\"Failed to construct '\"+c+\"': The returned value was not constructed with the HTMLElement constructor.\");if(\"http://www.w3.org/1999/xhtml\"!==e.namespaceURI)throw Error(\"Failed to construct '\"+c+\"': The constructed element's namespace must be the HTML namespace.\");if(e.hasAttributes())throw Error(\"Failed to construct '\"+\n    c+\"': The constructed element must not have any attributes.\");if(null!==e.firstChild)throw Error(\"Failed to construct '\"+c+\"': The constructed element must not have any children.\");if(null!==e.parentNode)throw Error(\"Failed to construct '\"+c+\"': The constructed element must not have a parent node.\");if(e.ownerDocument!==b)throw Error(\"Failed to construct '\"+c+\"': The constructed element's owner document is incorrect.\");if(e.localName!==c)throw Error(\"Failed to construct '\"+c+\"': The constructed element's local name is incorrect.\");\n    return e}catch(g){return R(g),b=null===f?n.call(b,c):p.call(b,f,c),Object.setPrototypeOf(b,HTMLUnknownElement.prototype),b.__CE_state=2,b.__CE_definition=void 0,W(a,b),b}b=null===f?n.call(b,c):p.call(b,f,c);W(a,b);return b}\n  function R(a){var b=a.message,c=a.sourceURL||a.fileName||\"\",f=a.line||a.lineNumber||0,d=a.column||a.columnNumber||0,e=void 0;void 0===ErrorEvent.prototype.initErrorEvent?e=new ErrorEvent(\"error\",{cancelable:!0,message:b,filename:c,lineno:f,colno:d,error:a}):(e=document.createEvent(\"ErrorEvent\"),e.initErrorEvent(\"error\",!1,!0,b,c,f),e.preventDefault=function(){Object.defineProperty(this,\"defaultPrevented\",{configurable:!0,get:function(){return!0}})});void 0===e.error&&Object.defineProperty(e,\"error\",\n    {configurable:!0,enumerable:!0,get:function(){return a}});window.dispatchEvent(e);e.defaultPrevented||console.error(a)};var Da=new function(){};function Ea(a){window.HTMLElement=function(){function b(){var c=this.constructor;var f=document.__CE_registry.l.get(c);if(!f)throw Error(\"Failed to construct a custom element: The constructor was not registered with `customElements`.\");var d=f.constructionStack;if(0===d.length)return d=n.call(document,f.localName),Object.setPrototypeOf(d,c.prototype),d.__CE_state=1,d.__CE_definition=f,W(a,d),d;var e=d.length-1,g=d[e];if(g===Da)throw Error(\"Failed to construct '\"+f.localName+\"': This element was already constructed.\");\n    d[e]=Da;Object.setPrototypeOf(g,c.prototype);W(a,g);return g}b.prototype=na.prototype;Object.defineProperty(b.prototype,\"constructor\",{writable:!0,configurable:!0,enumerable:!1,value:b});return b}()};function Z(a,b,c){function f(d){return function(e){for(var g=[],h=0;h<arguments.length;++h)g[h]=arguments[h];h=[];for(var k=[],l=0;l<g.length;l++){var m=g[l];m instanceof Element&&I(m)&&k.push(m);if(m instanceof DocumentFragment)for(m=m.firstChild;m;m=m.nextSibling)h.push(m);else h.push(m)}d.apply(this,g);for(g=0;g<k.length;g++)Y(a,k[g]);if(I(this))for(g=0;g<h.length;g++)k=h[g],k instanceof Element&&X(a,k)}}void 0!==c.prepend&&M(b,\"prepend\",f(c.prepend));void 0!==c.append&&M(b,\"append\",f(c.append))}\n  ;function Fa(a){M(Document.prototype,\"createElement\",function(b){return Ca(a,this,b,null)});M(Document.prototype,\"importNode\",function(b,c){b=aa.call(this,b,!!c);this.__CE_registry?N(a,b):V(a,b);return b});M(Document.prototype,\"createElementNS\",function(b,c){return Ca(a,this,c,b)});Z(a,Document.prototype,{prepend:ba,append:ca})};function Ga(a){function b(c,f){Object.defineProperty(c,\"textContent\",{enumerable:f.enumerable,configurable:!0,get:f.get,set:function(d){if(this.nodeType===Node.TEXT_NODE)f.set.call(this,d);else{var e=void 0;if(this.firstChild){var g=this.childNodes,h=g.length;if(0<h&&I(this)){e=Array(h);for(var k=0;k<h;k++)e[k]=g[k]}}f.set.call(this,d);if(e)for(d=0;d<e.length;d++)Y(a,e[d])}}})}M(Node.prototype,\"insertBefore\",function(c,f){if(c instanceof DocumentFragment){var d=J(c);c=t.call(this,c,f);if(I(this))for(f=\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        0;f<d.length;f++)X(a,d[f]);return c}d=c instanceof Element&&I(c);f=t.call(this,c,f);d&&Y(a,c);I(this)&&X(a,c);return f});M(Node.prototype,\"appendChild\",function(c){if(c instanceof DocumentFragment){var f=J(c);c=r.call(this,c);if(I(this))for(var d=0;d<f.length;d++)X(a,f[d]);return c}f=c instanceof Element&&I(c);d=r.call(this,c);f&&Y(a,c);I(this)&&X(a,c);return d});M(Node.prototype,\"cloneNode\",function(c){c=q.call(this,!!c);this.ownerDocument.__CE_registry?N(a,c):V(a,c);return c});M(Node.prototype,\n    \"removeChild\",function(c){var f=c instanceof Element&&I(c),d=u.call(this,c);f&&Y(a,c);return d});M(Node.prototype,\"replaceChild\",function(c,f){if(c instanceof DocumentFragment){var d=J(c);c=v.call(this,c,f);if(I(this))for(Y(a,f),f=0;f<d.length;f++)X(a,d[f]);return c}d=c instanceof Element&&I(c);var e=v.call(this,c,f),g=I(this);g&&Y(a,f);d&&Y(a,c);g&&X(a,c);return e});x&&x.get?b(Node.prototype,x):Aa(a,function(c){b(c,{enumerable:!0,configurable:!0,get:function(){for(var f=[],d=this.firstChild;d;d=\n      d.nextSibling)d.nodeType!==Node.COMMENT_NODE&&f.push(d.textContent);return f.join(\"\")},set:function(f){for(;this.firstChild;)u.call(this,this.firstChild);null!=f&&\"\"!==f&&r.call(this,document.createTextNode(f))}})})};function Ha(a){function b(f){return function(d){for(var e=[],g=0;g<arguments.length;++g)e[g]=arguments[g];g=[];for(var h=[],k=0;k<e.length;k++){var l=e[k];l instanceof Element&&I(l)&&h.push(l);if(l instanceof DocumentFragment)for(l=l.firstChild;l;l=l.nextSibling)g.push(l);else g.push(l)}f.apply(this,e);for(e=0;e<h.length;e++)Y(a,h[e]);if(I(this))for(e=0;e<g.length;e++)h=g[e],h instanceof Element&&X(a,h)}}var c=Element.prototype;void 0!==ja&&M(c,\"before\",b(ja));void 0!==ka&&M(c,\"after\",b(ka));void 0!==\n  la&&M(c,\"replaceWith\",function(f){for(var d=[],e=0;e<arguments.length;++e)d[e]=arguments[e];e=[];for(var g=[],h=0;h<d.length;h++){var k=d[h];k instanceof Element&&I(k)&&g.push(k);if(k instanceof DocumentFragment)for(k=k.firstChild;k;k=k.nextSibling)e.push(k);else e.push(k)}h=I(this);la.apply(this,d);for(d=0;d<g.length;d++)Y(a,g[d]);if(h)for(Y(a,this),d=0;d<e.length;d++)g=e[d],g instanceof Element&&X(a,g)});void 0!==ma&&M(c,\"remove\",function(){var f=I(this);ma.call(this);f&&Y(a,this)})};function Ia(a){function b(d,e){Object.defineProperty(d,\"innerHTML\",{enumerable:e.enumerable,configurable:!0,get:e.get,set:function(g){var h=this,k=void 0;I(this)&&(k=[],U(a,this,function(w){w!==h&&k.push(w)}));e.set.call(this,g);if(k)for(var l=0;l<k.length;l++){var m=k[l];1===m.__CE_state&&a.disconnectedCallback(m)}this.ownerDocument.__CE_registry?N(a,this):V(a,this);return g}})}function c(d,e){M(d,\"insertAdjacentElement\",function(g,h){var k=I(h);g=e.call(this,g,h);k&&Y(a,h);I(g)&&X(a,h);return g})}\n    function f(d,e){function g(h,k){for(var l=[];h!==k;h=h.nextSibling)l.push(h);for(k=0;k<l.length;k++)N(a,l[k])}M(d,\"insertAdjacentHTML\",function(h,k){h=h.toLowerCase();if(\"beforebegin\"===h){var l=this.previousSibling;e.call(this,h,k);g(l||this.parentNode.firstChild,this)}else if(\"afterbegin\"===h)l=this.firstChild,e.call(this,h,k),g(this.firstChild,l);else if(\"beforeend\"===h)l=this.lastChild,e.call(this,h,k),g(l||this.firstChild,null);else if(\"afterend\"===h)l=this.nextSibling,e.call(this,h,k),g(this.nextSibling,\n      l);else throw new SyntaxError(\"The value provided (\"+String(h)+\") is not one of 'beforebegin', 'afterbegin', 'beforeend', or 'afterend'.\");})}y&&M(Element.prototype,\"attachShadow\",function(d){d=y.call(this,d);if(a.a&&!d.__CE_patched){d.__CE_patched=!0;for(var e=0;e<a.b.length;e++)a.b[e](d)}return this.__CE_shadowRoot=d});z&&z.get?b(Element.prototype,z):H&&H.get?b(HTMLElement.prototype,H):Ba(a,function(d){b(d,{enumerable:!0,configurable:!0,get:function(){return q.call(this,!0).innerHTML},set:function(e){var g=\n        \"template\"===this.localName,h=g?this.content:this,k=p.call(document,this.namespaceURI,this.localName);for(k.innerHTML=e;0<h.childNodes.length;)u.call(h,h.childNodes[0]);for(e=g?k.content:k;0<e.childNodes.length;)r.call(h,e.childNodes[0])}})});M(Element.prototype,\"setAttribute\",function(d,e){if(1!==this.__CE_state)return B.call(this,d,e);var g=A.call(this,d);B.call(this,d,e);e=A.call(this,d);a.attributeChangedCallback(this,d,g,e,null)});M(Element.prototype,\"setAttributeNS\",function(d,e,g){if(1!==this.__CE_state)return E.call(this,\n      d,e,g);var h=D.call(this,d,e);E.call(this,d,e,g);g=D.call(this,d,e);a.attributeChangedCallback(this,e,h,g,d)});M(Element.prototype,\"removeAttribute\",function(d){if(1!==this.__CE_state)return C.call(this,d);var e=A.call(this,d);C.call(this,d);null!==e&&a.attributeChangedCallback(this,d,e,null,null)});M(Element.prototype,\"removeAttributeNS\",function(d,e){if(1!==this.__CE_state)return F.call(this,d,e);var g=D.call(this,d,e);F.call(this,d,e);var h=D.call(this,d,e);g!==h&&a.attributeChangedCallback(this,\n      e,g,h,d)});oa?c(HTMLElement.prototype,oa):G&&c(Element.prototype,G);pa?f(HTMLElement.prototype,pa):fa&&f(Element.prototype,fa);Z(a,Element.prototype,{prepend:ha,append:ia});Ha(a)};var T=window.customElements;function Ja(){var a=new S;Ea(a);Fa(a);Z(a,DocumentFragment.prototype,{prepend:da,append:ea});Ga(a);Ia(a);a=new O(a);document.__CE_registry=a;Object.defineProperty(window,\"customElements\",{configurable:!0,enumerable:!0,value:a})}T&&!T.forcePolyfill&&\"function\"==typeof T.define&&\"function\"==typeof T.get||Ja();window.__CE_installPolyfill=Ja;\n}).call(self);\n\n//# sourceMappingURL=custom-elements.min.js.map\n","/**\n * @license\n * Copyright (c) 2016 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n */\n\n/**\n * This shim allows elements written in, or compiled to, ES5 to work on native\n * implementations of Custom Elements v1. It sets new.target to the value of\n * this.constructor so that the native HTMLElement constructor can access the\n * current under-construction element's definition.\n */\n(function() {\n  if (\n    // No Reflect, no classes, no need for shim because native custom elements\n  // require ES2015 classes or Reflect.\n    window.Reflect === undefined ||\n    window.customElements === undefined ||\n    // The webcomponentsjs custom elements polyfill doesn't require\n    // ES2015-compatible construction (`super()` or `Reflect.construct`).\n    window.customElements.polyfillWrapFlushCallback\n  ) {\n    return;\n  }\n  const BuiltInHTMLElement = HTMLElement;\n  /**\n   * With jscompiler's RECOMMENDED_FLAGS the function name will be optimized away.\n   * However, if we declare the function as a property on an object literal, and\n   * use quotes for the property name, then closure will leave that much intact,\n   * which is enough for the JS VM to correctly set Function.prototype.name.\n   */\n  const wrapperForTheName = {\n    'HTMLElement': /** @this {!Object} */ function HTMLElement() {\n      return Reflect.construct(\n        BuiltInHTMLElement, [], /** @type {!Function} */ (this.constructor));\n    }\n  };\n  window.HTMLElement = wrapperForTheName['HTMLElement'];\n  HTMLElement.prototype = BuiltInHTMLElement.prototype;\n  HTMLElement.prototype.constructor = HTMLElement;\n  Object.setPrototypeOf(HTMLElement, BuiltInHTMLElement);\n})();\n","import shimWorker from 'rollup-plugin-bundle-worker';\nexport default new shimWorker(\"./worker.js\", function (window, document) {\nvar self = this;\nfunction shimImportScripts(src) {\n  return new Promise(function (resolve, reject) {\n    var s;\n    s = _shimWorkerDocument.createElement('script');\n    s.src = src;\n    s.onload = resolve;\n    s.onerror = reject;\n    _shimWorkerDocument.head.appendChild(s);\n  });\n}\n\nconst MAX_STREAM_BUFFER_LENGTH = 1024 * 1024;\nvar Decoder = function (self) {\n  this.inited = false;\n  this.self = self;\n  this.meta = this.self.meta;\n  this.infolist = {};\n  if (self.importScripts) {\n    self.par_broadwayOnBroadwayInited = this.broadwayOnBroadwayInited.bind(this);\n    self.par_broadwayOnPictureDecoded = this.broadwayOnPictureDecoded.bind(this);\n  } else {\n    _shimWorkerWindow.par_broadwayOnBroadwayInited = this.broadwayOnBroadwayInited.bind(this);\n    _shimWorkerWindow.par_broadwayOnPictureDecoded = this.broadwayOnPictureDecoded.bind(this);\n  }\n\n}\n\nDecoder.prototype.toU8Array = function (ptr, length) {\n  return Module.HEAPU8.subarray(ptr, ptr + length);\n}\n\nDecoder.prototype.init = function () {\n  Module._broadwayInit();\n  this.streamBuffer = this.toU8Array(Module._broadwayCreateStream(MAX_STREAM_BUFFER_LENGTH), MAX_STREAM_BUFFER_LENGTH);\n}\n\nDecoder.prototype.broadwayOnPictureDecoded = function (offset, width, height, yLinesize, uvLinesize, infoid) {\n  let info = Object.assign({}, this.infolist[infoid]);\n  let yRowcount = height;\n  let uvRowcount = height / 2;\n  if (this.meta && (this.meta.chromaFormat === 444 || this.meta.chromaFormat === 422)) {\n    uvRowcount = height;\n  }\n  let data = this.toU8Array(offset, (yLinesize * yRowcount) + 2 * (uvLinesize * uvRowcount));\n  this.infolist[infoid] = null;\n  let datetemp = new Uint8Array(data.length);\n  datetemp.set(data);\n  let buffer = datetemp.buffer;\n  if (info) {\n    this.self.postMessage({\n      msg: 'LOG',\n      log: `sample ${info.dts} decoded startAt${info.decodeTime} cost: ${ Date.now() - info.decodeTime}`\n    })\n  }\n\n  this.self.postMessage({\n    msg: 'DECODED',\n    width,\n    height,\n    yLinesize,\n    uvLinesize,\n    info,\n    buffer\n  }, [buffer]);\n}\n\nDecoder.prototype.broadwayOnBroadwayInited = function () {\n  this.inited = true;\n  this.self.postMessage({\n    msg: 'LOG',\n    log: 'decoder inited'\n  })\n  this.self.postMessage({msg: 'DECODER_READY'});\n}\n\nDecoder.prototype.decode = function (data, info) {\n  let time = parseInt(new Date().getTime());\n  let infoid = time - (Math.floor(time / 10e8) * 10e8);\n  this.infolist[infoid] = info;\n  this.streamBuffer.set(data);\n  if (info) {\n    // self.postMessage({\n    //   msg: 'LOG',\n    //   log: 'decode sample ' + info.dts + ' cost ' + Date.now()\n    // })\n  }\n  Module._broadwayPlayStream(data.length, infoid);\n}\n\nDecoder.prototype.destroy = function () {\n  Module._broadwayExit();\n}\n\nDecoder.prototype.updateMeta = function(meta){\n  this.meta = meta\n}\n\nvar decoder;\n\nfunction onPostRun () {\n  self.postMessage({\n    msg: 'LOG',\n    log: 'do post run'\n  })\n  decoder = new Decoder(this);\n  decoder.init();\n}\n\nfunction init (meta) {\n  if (!decoder) {\n    if (!self.importScripts) {\n      shimImportScripts('https://sf1-vcloudcdn.pstatp.com/obj/media-fe/decoder/h264/decoder_1583333072685.js').then(() => {\n        console.log(Module)\n        console.log(addOnPostRun)\n        addOnPostRun(onPostRun.bind(self));\n      })\n    } else {\n      self.postMessage({\n        msg: 'LOG',\n        log: 'do import script '\n      })\n      try {\n        self.importScripts('https://sf1-vcloudcdn.pstatp.com/obj/media-fe/decoder/h264/decoder_worker_1583333072685.js');\n        throw new Error('error')\n      } catch (e) {\n        self.postMessage({\n          msg: 'INIT_FAILED'\n        })\n      }\n      addOnPostRun(onPostRun.bind(self));\n      self.postMessage({\n        msg: 'LOG',\n        log: 'import script done' + Module.toString()\n      })\n      setTimeout(() => {\n        if (!decoder) {\n          onPostRun.call(this);\n        }\n      }, 5000)\n    }\n  }\n}\n\nself.onmessage = function (e) {\n  var data = e.data;\n  if (!data.msg) {\n    self.postMessage({\n      msg: 'ERROR:invalid message'\n    })\n  } else {\n    switch (data.msg) {\n      case 'init':\n        self.meta = data.meta;\n        self.postMessage({\n          msg: 'LOG',\n          log: 'worker inited'\n        })\n        init()\n        break;\n      case 'updatemeta':\n        self.meta = data.meta;\n        decoder.updateMeta(data.meta)\n        break;\n      case 'decode':\n        decoder.decode(data.data, data.info);\n        break;\n      case 'destory':\n        decoder.destroy();\n        break\n      default:\n        break;\n    }\n  }\n}\n\n\n});","import shimWorker from 'rollup-plugin-bundle-worker';\nexport default new shimWorker(\"./backupWorker.js\", function (window, document) {\nvar self = this;\nfunction shimImportScripts(src) {\n  return new Promise(function (resolve, reject) {\n    var s;\n    s = _shimWorkerDocument.createElement('script');\n    s.src = src;\n    s.onload = resolve;\n    s.onerror = reject;\n    _shimWorkerDocument.head.appendChild(s);\n  });\n}\n\nconst MAX_STREAM_BUFFER_LENGTH = 1024 * 1024;\nvar Decoder = function (self) {\n  this.inited = false;\n  this.self = self;\n  this.meta = this.self.meta;\n  this.infolist = {};\n  if (self.importScripts) {\n    self.par_broadwayOnBroadwayInited = this.broadwayOnBroadwayInited.bind(this);\n    self.par_broadwayOnPictureDecoded = this.broadwayOnPictureDecoded.bind(this);\n  } else {\n    _shimWorkerWindow.par_broadwayOnBroadwayInited = this.broadwayOnBroadwayInited.bind(this);\n    _shimWorkerWindow.par_broadwayOnPictureDecoded = this.broadwayOnPictureDecoded.bind(this);\n  }\n\n}\n\nDecoder.prototype.toU8Array = function (ptr, length) {\n  return Module.HEAPU8.subarray(ptr, ptr + length);\n}\n\nDecoder.prototype.init = function () {\n  Module._broadwayInit();\n  this.streamBuffer = this.toU8Array(Module._broadwayCreateStream(MAX_STREAM_BUFFER_LENGTH), MAX_STREAM_BUFFER_LENGTH);\n}\n\nDecoder.prototype.broadwayOnPictureDecoded = function (offset, width, height, yLinesize, uvLinesize, infoid) {\n  let info = Object.assign({}, this.infolist[infoid]);\n  let yRowcount = height;\n  let uvRowcount = height / 2;\n  if (!uvLinesize) {\n    uvLinesize = yLinesize / 2;\n  }\n  if (this.meta && (this.meta.chromaFormat === 444 || this.meta.chromaFormat === 422)) {\n    uvRowcount = height;\n  }\n  let data = this.toU8Array(offset, (yLinesize * yRowcount) + 2 * (uvLinesize * uvRowcount));\n  this.infolist[infoid] = null;\n  let datetemp = new Uint8Array(data.length);\n  datetemp.set(data);\n  let buffer = datetemp.buffer;\n  if (info) {\n    this.self.postMessage({\n      msg: 'LOG',\n      log: `sample ${info.dts} decoded startAt${info.decodeTime} cost: ${ Date.now() - info.decodeTime}`\n    })\n  }\n\n  this.self.postMessage({\n    msg: 'DECODED',\n    width,\n    height,\n    yLinesize,\n    uvLinesize,\n    info,\n    buffer\n  }, [buffer]);\n}\n\nDecoder.prototype.broadwayOnBroadwayInited = function () {\n  this.inited = true;\n  this.self.postMessage({\n    msg: 'LOG',\n    log: 'decoder inited'\n  })\n  this.self.postMessage({msg: 'DECODER_READY'});\n}\n\nDecoder.prototype.decode = function (data, info) {\n  let time = parseInt(new Date().getTime());\n  let infoid = time - (Math.floor(time / 10e8) * 10e8);\n  this.infolist[infoid] = info;\n  this.streamBuffer.set(data);\n  Module._broadwayPlayStream(data.length, infoid);\n}\n\nDecoder.prototype.destroy = function () {\n  Module._broadwayExit();\n}\n\nDecoder.prototype.updateMeta = function(meta){\n  this.meta = meta\n}\n\nvar decoder;\n\nfunction onPostRun () {\n  decoder = new Decoder(this);\n  decoder.init();\n  self.postMessage({\n    msg: 'LOG',\n    log: 'decoder inited'\n  })\n  decoder.broadwayOnBroadwayInited();\n}\n\nfunction init (meta) {\n  if (!decoder) {\n    if (!self.importScripts) {\n      shimImportScripts('https://sf1-vcloudcdn.pstatp.com/obj/media-fe/decoder/h264/decoder_asm_1589261792455.js').then(() => {\n        self.postMessage({\n          msg: 'LOG',\n          log: Module\n        })\n        onPostRun.call(self)\n      })\n    } else {\n      self.importScripts('https://sf1-vcloudcdn.pstatp.com/obj/media-fe/decoder/h264/decoder_asm_1589261792455.js');\n      self.postMessage({\n        msg: 'LOG',\n        log: Module.toString()\n      })\n      onPostRun.call(self)\n    }\n  }\n}\n\nself.onmessage = function (e) {\n  var data = e.data;\n  if (!data.msg) {\n    self.postMessage({\n      msg: 'ERROR:invalid message'\n    })\n  } else {\n    switch (data.msg) {\n      case 'init':\n        self.meta = data.meta;\n        self.postMessage({\n          msg: 'LOG',\n          log: 'worker inited'\n        })\n        init()\n        break;\n      case 'updatemeta':\n        self.meta = data.meta;\n        decoder.updateMeta(data.meta)\n        break;\n      case 'decode':\n        decoder.decode(data.data, data.info);\n        break;\n      case 'destory':\n        decoder.destroy();\n        break\n      default:\n        break;\n    }\n  }\n}\n\n\n});","class YUVCanvas {\n  constructor (configs) {\n    this.configs = Object.assign({}, configs);\n    this.canvas = this.configs.canvas;\n    this.meta = Object.assign({}, this.configs.meta);\n    this._initMeta()\n    // this.canvas.style.width = configs.style.width;\n    // this.canvas.style.height = configs.style.height;\n    this._initContextGL();\n    if (this.contextGL) {\n      this._initProgram();\n      this._initBuffers();\n      this._initTextures();\n    };\n  }\n\n  _initMeta(){\n    this.chroma = this.meta.chromaFormat;\n    this.height = this.meta.presentHeight;\n    this.width = this.meta.presentWidth;\n    this.canvas.width = this.meta.presentWidth;\n    this.canvas.height = this.meta.presentHeight;\n  }\n\n  _initContextGL () {\n    var canvas = this.canvas;\n    var gl = null;\n\n    var validContextNames = ['webgl', 'experimental-webgl', 'moz-webgl', 'webkit-3d'];\n    var nameIndex = 0;\n\n    while (!gl && nameIndex < validContextNames.length) {\n      var contextName = validContextNames[nameIndex];\n\n      try {\n        if (this.contextOptions) {\n          gl = canvas.getContext(contextName, this.contextOptions);\n        } else {\n          gl = canvas.getContext(contextName);\n        };\n      } catch (e) {\n        gl = null;\n      }\n\n      if (!gl || typeof gl.getParameter !== 'function') {\n        gl = null;\n      }\n\n      ++nameIndex;\n    };\n\n    this.contextGL = gl;\n  };\n\n  _initProgram () {\n    var gl = this.contextGL;\n\n    // vertex shader is the same for all types\n    var vertexShaderScript;\n    var fragmentShaderScript;\n    vertexShaderScript = [\n      'attribute vec4 vertexPos;',\n      'attribute vec4 texturePos;',\n      'attribute vec4 uTexturePos;',\n      'attribute vec4 vTexturePos;',\n      'varying vec2 textureCoord;',\n      'varying vec2 uTextureCoord;',\n      'varying vec2 vTextureCoord;',\n\n      'void main()',\n      '{',\n      '  gl_Position = vertexPos;',\n      '  textureCoord = texturePos.xy;',\n      '  uTextureCoord = uTexturePos.xy;',\n      '  vTextureCoord = vTexturePos.xy;',\n      '}'\n    ].join('\\n');\n\n    fragmentShaderScript = [\n      'precision highp float;',\n      'varying highp vec2 textureCoord;',\n      'varying highp vec2 uTextureCoord;',\n      'varying highp vec2 vTextureCoord;',\n      'uniform sampler2D ySampler;',\n      'uniform sampler2D uSampler;',\n      'uniform sampler2D vSampler;',\n      'uniform mat4 YUV2RGB;',\n\n      'void main(void) {',\n      '  highp float y = texture2D(ySampler,  textureCoord).r;',\n      '  highp float u = texture2D(uSampler,  uTextureCoord).r;',\n      '  highp float v = texture2D(vSampler,  vTextureCoord).r;',\n      '  gl_FragColor = vec4(y, u, v, 1) * YUV2RGB;',\n      '}'\n    ].join('\\n');\n\n    var YUV2RGB = [\n      1.16438, 0.00000, 1.59603, -0.87079,\n      1.16438, -0.39176, -0.81297, 0.52959,\n      1.16438, 2.01723, 0.00000, -1.08139,\n      0, 0, 0, 1\n    ];\n    var vertexShader = gl.createShader(gl.VERTEX_SHADER);\n    gl.shaderSource(vertexShader, vertexShaderScript);\n    gl.compileShader(vertexShader);\n    if (!gl.getShaderParameter(vertexShader, gl.COMPILE_STATUS)) {\n      console.log('Vertex shader failed to compile: ' + gl.getShaderInfoLog(vertexShader));\n    }\n\n    var fragmentShader = gl.createShader(gl.FRAGMENT_SHADER);\n    gl.shaderSource(fragmentShader, fragmentShaderScript);\n    gl.compileShader(fragmentShader);\n    if (!gl.getShaderParameter(fragmentShader, gl.COMPILE_STATUS)) {\n      console.log('Fragment shader failed to compile: ' + gl.getShaderInfoLog(fragmentShader));\n    }\n\n    var program = gl.createProgram();\n    gl.attachShader(program, vertexShader);\n    gl.attachShader(program, fragmentShader);\n    gl.linkProgram(program);\n    if (!gl.getProgramParameter(program, gl.LINK_STATUS)) {\n      console.log('Program failed to compile: ' + gl.getProgramInfoLog(program));\n    }\n\n    gl.useProgram(program);\n\n    var YUV2RGBRef = gl.getUniformLocation(program, 'YUV2RGB');\n    gl.uniformMatrix4fv(YUV2RGBRef, false, YUV2RGB);\n\n    this.shaderProgram = program;\n  }\n\n  _initBuffers () {\n    var gl = this.contextGL;\n    var program = this.shaderProgram;\n\n    var vertexPosBuffer = gl.createBuffer();\n    gl.bindBuffer(gl.ARRAY_BUFFER, vertexPosBuffer);\n    gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([1, 1, -1, 1, 1, -1, -1, -1]), gl.STATIC_DRAW);\n\n    var vertexPosRef = gl.getAttribLocation(program, 'vertexPos');\n    gl.enableVertexAttribArray(vertexPosRef);\n    gl.vertexAttribPointer(vertexPosRef, 2, gl.FLOAT, false, 0, 0);\n\n    var texturePosBuffer = gl.createBuffer();\n    gl.bindBuffer(gl.ARRAY_BUFFER, texturePosBuffer);\n    gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([1, 0, 0, 0, 1, 1, 0, 1]), gl.STATIC_DRAW);\n\n    var texturePosRef = gl.getAttribLocation(program, 'texturePos');\n    gl.enableVertexAttribArray(texturePosRef);\n    gl.vertexAttribPointer(texturePosRef, 2, gl.FLOAT, false, 0, 0);\n\n    this.texturePosBuffer = texturePosBuffer;\n\n    var uTexturePosBuffer = gl.createBuffer();\n    gl.bindBuffer(gl.ARRAY_BUFFER, uTexturePosBuffer);\n    gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([1, 0, 0, 0, 1, 1, 0, 1]), gl.STATIC_DRAW);\n\n    var uTexturePosRef = gl.getAttribLocation(program, 'uTexturePos');\n    gl.enableVertexAttribArray(uTexturePosRef);\n    gl.vertexAttribPointer(uTexturePosRef, 2, gl.FLOAT, false, 0, 0);\n\n    this.uTexturePosBuffer = uTexturePosBuffer;\n\n    var vTexturePosBuffer = gl.createBuffer();\n    gl.bindBuffer(gl.ARRAY_BUFFER, vTexturePosBuffer);\n    gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([1, 0, 0, 0, 1, 1, 0, 1]), gl.STATIC_DRAW);\n\n    var vTexturePosRef = gl.getAttribLocation(program, 'vTexturePos');\n    gl.enableVertexAttribArray(vTexturePosRef);\n    gl.vertexAttribPointer(vTexturePosRef, 2, gl.FLOAT, false, 0, 0);\n\n    this.vTexturePosBuffer = vTexturePosBuffer;\n  };\n\n  _initTextures () {\n    var gl = this.contextGL;\n    var program = this.shaderProgram;\n    var yTextureRef = this._initTexture();\n    var ySamplerRef = gl.getUniformLocation(program, 'ySampler');\n    gl.uniform1i(ySamplerRef, 0);\n    this.yTextureRef = yTextureRef;\n\n    var uTextureRef = this._initTexture();\n    var uSamplerRef = gl.getUniformLocation(program, 'uSampler');\n    gl.uniform1i(uSamplerRef, 1);\n    this.uTextureRef = uTextureRef;\n\n    var vTextureRef = this._initTexture();\n    var vSamplerRef = gl.getUniformLocation(program, 'vSampler');\n    gl.uniform1i(vSamplerRef, 2);\n    this.vTextureRef = vTextureRef;\n  }\n\n  _initTexture () {\n    var gl = this.contextGL;\n\n    var textureRef = gl.createTexture();\n    gl.bindTexture(gl.TEXTURE_2D, textureRef);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n    gl.bindTexture(gl.TEXTURE_2D, null);\n\n    return textureRef;\n  }\n\n  _drawPictureGL (data, width, height, yLinesize, uvLinesize) {\n    var ylen = yLinesize * height;\n    var uvlen = uvLinesize * height / 2;\n    if (this.chroma === 444 || this.chroma === 422) {\n      uvlen *= 2;\n    }\n    data = new Uint8Array(data);\n    let renderData = {\n      yData: data.subarray(0, ylen),\n      uData: data.subarray(ylen, ylen + uvlen),\n      vData: data.subarray(ylen + uvlen, ylen + uvlen + uvlen)\n    }\n    this._drawPictureGL420(renderData, width, height, yLinesize, uvLinesize);\n  }\n\n  _drawPictureGL420 (data, width, height, yLinesize, uvLinesize) {\n    var gl = this.contextGL;\n    var texturePosBuffer = this.texturePosBuffer;\n    var uTexturePosBuffer = this.uTexturePosBuffer;\n    var vTexturePosBuffer = this.vTexturePosBuffer;\n\n    var yTextureRef = this.yTextureRef;\n    var uTextureRef = this.uTextureRef;\n    var vTextureRef = this.vTextureRef;\n\n    var yData = data.yData;\n    var uData = data.uData;\n    var vData = data.vData;\n\n    var yDataPerRow = yLinesize;\n    var yRowCnt = height;\n\n    var uDataPerRow = uvLinesize;\n    var uRowCnt = height / 2;\n\n    if (this.chroma === 422 || this.chroma === 444) {\n      uRowCnt = height;\n    }\n\n    var vDataPerRow = uvLinesize;\n    var vRowCnt = uRowCnt;\n\n    let ratiow = this.canvas.width / this.width;\n    let ratioh = this.canvas.height / this.height;\n    let left = 0;\n    let top = 0;\n    let w = this.canvas.width;\n    let h = this.canvas.height;\n    if (ratiow < ratioh) {\n      h = (this.height * this.canvas.width / this.width);\n      top = parseInt((this.canvas.height - (this.height * this.canvas.width / this.width)) / 2);\n    } else {\n      w = (this.width * this.canvas.height / this.height);\n      left = parseInt((this.canvas.width - (this.width * this.canvas.height / this.height)) / 2);\n    }\n    gl.viewport(left, top, w, h);\n\n    var texturePosValues = new Float32Array([1, 0, 0, 0, 1, 1, 0, 1]);\n    gl.bindBuffer(gl.ARRAY_BUFFER, texturePosBuffer);\n    gl.bufferData(gl.ARRAY_BUFFER, texturePosValues, gl.DYNAMIC_DRAW);\n\n    var uTexturePosValues = new Float32Array([1, 0, 0, 0, 1, 1, 0, 1]);\n    gl.bindBuffer(gl.ARRAY_BUFFER, uTexturePosBuffer);\n    gl.bufferData(gl.ARRAY_BUFFER, uTexturePosValues, gl.DYNAMIC_DRAW);\n\n    var vTexturePosValues = new Float32Array([1, 0, 0, 0, 1, 1, 0, 1]);\n    gl.bindBuffer(gl.ARRAY_BUFFER, vTexturePosBuffer);\n    gl.bufferData(gl.ARRAY_BUFFER, vTexturePosValues, gl.DYNAMIC_DRAW);\n\n    gl.activeTexture(gl.TEXTURE0);\n    gl.bindTexture(gl.TEXTURE_2D, yTextureRef);\n    gl.texImage2D(gl.TEXTURE_2D, 0, gl.LUMINANCE, yDataPerRow, yRowCnt, 0, gl.LUMINANCE, gl.UNSIGNED_BYTE, yData);\n\n    gl.activeTexture(gl.TEXTURE1);\n    gl.bindTexture(gl.TEXTURE_2D, uTextureRef);\n    gl.texImage2D(gl.TEXTURE_2D, 0, gl.LUMINANCE, uDataPerRow, uRowCnt, 0, gl.LUMINANCE, gl.UNSIGNED_BYTE, uData);\n\n    gl.activeTexture(gl.TEXTURE2);\n    gl.bindTexture(gl.TEXTURE_2D, vTextureRef);\n    gl.texImage2D(gl.TEXTURE_2D, 0, gl.LUMINANCE, vDataPerRow, vRowCnt, 0, gl.LUMINANCE, gl.UNSIGNED_BYTE, vData);\n\n    gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);\n  }\n\n  _drawPictureRGB (data) {\n\n  }\n\n  render (data, width, height, yLinesize, uvLinesize) {\n    var gl = this.contextGL;\n    // console.log(data, width, height, yLinesize, uvLinesize)\n    if (gl) {\n      this._drawPictureGL(data, width, height, yLinesize, uvLinesize);\n    } else {\n      this._drawPictureRGB(data);\n    }\n  }\n\n  resetMeta(meta){\n    this.meta =  Object.assign({}, meta);\n    this._initMeta()\n  }\n}\n\nexport default YUVCanvas;\n","class SourceBuffer {\n  constructor (config) {\n    this.config = Object.assign({}, config);\n    this.type = this.config.type;\n    this.reset();\n  }\n\n  reset(){\n    this.buffer = [];\n    this.currentGop = undefined;\n    this._lastGet = undefined;\n  }\n\n  push (frame) {\n    // if (this.type === 'video') {\n    //   if (frame.isKeyframe) {\n    //     let currentGop = {\n    //       samples: [],\n    //       start: frame.dts,\n    //       end: frame.dts,\n    //       nextGop: undefined\n    //     };\n    //     if (this.currentGop) {\n    //       this.currentGop.nextGop = currentGop;\n    //     }\n    //     this.currentGop = currentGop;\n    //     this.buffer.push(this.currentGop);\n    //   }\n    //\n    //   if (this.currentGop) {\n    //     this.currentGop.samples.push(frame);\n    //\n    //     if (frame.dts < this.currentGop.start) {\n    //       this.currentGop.start = frame.dts;\n    //     }\n    //\n    //     if (frame.dts > this.currentGop.end) {\n    //       this.currentGop.end = frame.dts;\n    //     }\n    //   }\n    // }\n    this.buffer.push(frame)\n  }\n\n  get (time) {\n    return this.buffer.shift()\n  }\n\n  _getNext () {\n    if (!this._lastGet) {\n      let gop = this.buffer[0];\n      if (gop.samples.length < 1) {\n        return\n      }\n\n      this._lastGet = {\n        gop,\n        index: 0\n      }\n      return gop.samples[0];\n    } else {\n      let gop = this._lastGet.gop;\n      let sample = gop.samples[this._lastGet.index + 1];\n      if (sample) {\n        this._lastGet.index = this._lastGet.index + 1;\n        return sample;\n      } else {\n        gop = gop.nextGop;\n        if (!gop || gop.samples.length < 1) {\n          return;\n        }\n        sample = gop.samples[0];\n        this._lastGet = {\n          gop,\n          index: 0\n        }\n        return sample;\n      }\n    }\n  }\n\n  remove (start, end) {\n    if (this.buffer.length < 0) {\n      return;\n    }\n\n    let i = 0;\n    let gop = this.buffer[0];\n    while (gop) {\n      if (gop.end < end && gop.start >= start) {\n        this.buffer.splice(i, 1)\n        gop = this.buffer[i];\n      } else {\n        i += 1;\n        gop = this.buffer[i];\n      }\n    }\n  }\n}\n\nexport default SourceBuffer;\n","export default class TimeRanges {\n  constructor (ranges) {\n    this.ranges = ranges || [];\n  }\n\n  start (idx) {\n    return this.ranges[idx] ? this.ranges[idx].start : 0\n  }\n\n  end (idx) {\n    return this.ranges[idx] ? this.ranges[idx].end : 0\n  }\n\n  add (range) {\n    this.ranges.push(range)\n  }\n\n  get length () {\n    return this.ranges.length\n  }\n}\n","// import Workerify from 'webworkify-webpack'\n// eslint-disable-next-line import/no-webpack-loader-syntax\nimport VideoWorker from 'worker!./worker.js';\nimport BackupVideoWorker from 'worker!./backupWorker.js';\nimport Render from './yuv-canvas'\nimport SourceBuffer from '../models/sourcebuffer';\nimport TimeRanges from '../models/time-ranges';\n// import BackUpCodec from './backup-codec';\nimport EventEmitter from 'events';\n\n\n\nconst asmSupported = () => {\n  try {\n    (function MyAsmModule () {\n      'use asm';\n    })();\n    return true;\n  } catch (err) {\n    // will never show...\n    return false;\n  }\n};\n\nconst HAVE_NOTHING = 0;\nconst HAVE_METADATA = 1;\nconst HAVE_CURRENT_DATA = 2;\nconst HAVE_FUTURE_DATA = 3;\nconst HAVE_ENOUGH_DATA = 4;\n\nconst NOT_SEEK = 1;\nconst SEEKING = 2;\nconst SEEKED = 4;\n\nexport const VIDEO_CANVAS_EVENTS = {\n  VIDEO_EVENTS: 'VIDEO_EVENTS'\n}\n\nclass VideoCanvas extends EventEmitter {\n  constructor (config) {\n    super();\n    this.config = Object.assign({}, config);\n    this.canvas = this.config.canvas ? this.config.canvas : document.createElement('canvas');\n    this.source = new SourceBuffer({type: 'video'});\n    this.onFirstFrame = undefined;\n    this.oncanplay = undefined;\n    this.initParameters()\n    this.canvas.style.maxWidth = '100%';\n    this.canvas.style.maxHeight = '100%';\n    this.canvas.style.top = 0;\n    this.canvas.style.bottom = 0;\n    this.canvas.style.left = 0;\n    this.canvas.style.right = 0;\n    this.canvas.style.margin = 'auto';\n    this.canvas.style.position = 'absolute';\n    this.handleMessage = this.handleMessage.bind(this);\n    this.useBackupTimer = null;\n  }\n\n  initParameters () {\n    this.meta = undefined;\n    this.readyStatus = HAVE_NOTHING;\n    this.paused = true;\n    this.currentTime = 0;\n    this._seekState = NOT_SEEK;\n    this._avccpushed = false;\n    this._decodedFrames = {};\n    this._lastSampleDts = undefined;\n    this._baseDts = undefined;\n    this._lastRenderTime = null\n    this.playFinish = null\n    this._seekState = NOT_SEEK;\n  }\n\n  reset () {\n    this.initParameters()\n    this.source.reset();\n  }\n\n  pause () {\n    this.paused = true;\n  }\n\n  initWasmWorker () {\n    // eslint-disable-next-line no-undef\n    window._shimWorkerDocument = document;\n    window._shimWorkerWindow = window;\n    this.initWorker(false)\n    this.setBackUpWorker();\n  }\n\n  setBackUpWorker () {\n    if (this.useBackupTimer) {\n      return;\n    }\n    this.useBackupTimer = setTimeout(() => {\n      window.clearTimeout(this.useBackupTimer);\n      this.useBackupTimer = null;\n      if (this._decoderInited || !asmSupported()) {\n        return;\n      }\n      this.initWorker(true)\n    }, 5000)\n  }\n\n  initWorker (isBackup) {\n    const VideoWorkerCls = isBackup ? BackupVideoWorker : VideoWorker;\n    this.wasmworker = new VideoWorkerCls(false);\n    this.wasmworker.onmessage = (e) => {\n      if (e.data.msg === 'INIT_FAILED') {\n        this.destroyWorker();\n        this.wasmworker = new VideoWorkerCls(true);\n        this.wasmworker.postMessage({\n          msg: 'init',\n          meta: this.meta\n        });\n      } else {\n        this.handleMessage(e)\n      }\n    };\n    this.wasmworker.postMessage({\n      msg: 'init',\n      meta: this.meta\n    });\n  }\n\n  setVideoMetaData (meta) {\n    this.meta = meta;\n    if (!this._decoderInited) {\n      this.initWasmWorker();\n      return\n    }\n    this.wasmworker.postMessage({\n      msg: 'updatemeta',\n      meta: this.meta\n    })\n    this.pushAvcc(meta)\n  }\n\n  pushAvcc (meta) {\n    this._avccpushed = true;\n    let data = new Uint8Array(meta.sps.byteLength + 4);\n    data.set([0, 0, 0, 1])\n    data.set(meta.sps, 4);\n    this.wasmworker.postMessage({\n      msg: 'decode',\n      data: data\n    })\n\n    data = new Uint8Array(meta.pps.byteLength + 4);\n    data.set([0, 0, 0, 1])\n    data.set(meta.pps, 4);\n    this.wasmworker.postMessage({\n      msg: 'decode',\n      data: data\n    })\n\n    if (!this.yuvCanvas) {\n      let config = Object.assign({meta, canvas: this.canvas}, this.config);\n      this.yuvCanvas = new Render(config);\n    } else {\n      this.yuvCanvas.resetMeta(meta);\n    }\n    this.readyStatus = HAVE_METADATA;\n  }\n  decodeVideo (videoTrack) {\n    if (!this._decoderInited) {\n      return\n    }\n    if (!this._avccpushed) {\n      this.pushAvcc(this.meta);\n    }\n    let { samples } = videoTrack;\n    let sample = samples.shift();\n\n    while (sample) {\n      if (!this._baseDts) {\n        this._baseDts = sample.dts;\n      }\n      this.source.push(sample);\n      sample = samples.shift();\n    }\n\n    this.preload();\n  }\n\n  preload () {\n    if (!this._lastSampleDts || this._lastSampleDts - this._baseDts < this.currentTime + this.config.preloadTime * 1000) {\n      let sample = this.source.get();\n      if (sample) {\n        this._lastSampleDts = sample.dts;\n        this._analyseNal(sample);\n      }\n\n      while (sample && this._lastSampleDts - this._baseDts < this.currentTime + this.config.preloadTime * 2000) {\n        sample = this.source.get();\n        // console.log(sample)\n        if (sample) {\n          this._analyseNal(sample);\n          this._lastSampleDts = sample.dts;\n        }\n      }\n    }\n  }\n\n  _analyseNal (sample) {\n    // console.log('送入解码', sample.dts,data)\n    this.wasmworker.postMessage({\n      msg: 'decode',\n      data: sample.data,\n      info: {\n        decodeTime: Date.now(),\n        dts: sample.dts,\n        pts: sample.pts ? sample.pts : sample.dts + sample.cts,\n        key: sample.isKeyframe\n      }\n    })\n  }\n\n  decodeVideoBuffer (buffer) {\n    if (!this._decoderInited) {\n      this.initWasmWorker();\n      return\n    }\n    this.wasmworker.postMessage({\n      msg: 'decode',\n      data: buffer\n    })\n  }\n\n  _onDecoded (data) {\n    if (!data.info) {\n      return;\n    }\n    let {dts} = data.info;\n    this._decodedFrames[dts] = data;\n    let decodedFrameLen = Object.keys(this._decodedFrames).length;\n    if (this.readyStatus == HAVE_METADATA && decodedFrameLen > 0) {\n      this.readyStatus = HAVE_CURRENT_DATA\n      this.emit(VIDEO_CANVAS_EVENTS.VIDEO_EVENTS, 'loadeddata')\n    }\n    if (this._seekState == SEEKED) {\n      this.readyStatus = HAVE_CURRENT_DATA\n      this._seekState = NOT_SEEK\n    }\n    if (decodedFrameLen > 10) {\n      if (this.playFinish) {\n        this.playFinish()\n      }\n      if (this.readyStatus == HAVE_CURRENT_DATA) {\n        this.readyStatus = HAVE_FUTURE_DATA\n        this.emit(VIDEO_CANVAS_EVENTS.VIDEO_EVENTS, 'canplay')\n      }\n      if (this.oncanplay) {\n        this.oncanplay();\n      }\n      // 2s的时间\n      if (this.readyStatus == HAVE_FUTURE_DATA && decodedFrameLen > 2 * (this.meta.frameRate.fps || 60)) {\n        this.readyStatus = HAVE_ENOUGH_DATA;\n        this.emit(VIDEO_CANVAS_EVENTS.VIDEO_EVENTS, 'canplaythrough')\n      }\n    } else {\n      this.readyStatus = HAVE_CURRENT_DATA\n    }\n  }\n\n  play () {\n    this.paused = false;\n    if (!this.paused) {\n      return Promise.resolve();\n    }\n    return new Promise((resolve) => {\n      this.playFinish = resolve\n    }).then(() => {\n      this.playFinish = null\n    })\n  }\n\n  _onTimer (currentTime) {\n    // console.log(currentTime)\n    if (this.paused) {\n      return false;\n    }\n\n    if (this.meta) {\n      let frameTimes = Object.keys(this._decodedFrames);\n      // console.log(frameTimes)\n      if (frameTimes.length > 0) {\n        this.currentTime = currentTime;\n        let frameTime = -1;\n        for (let i = 0; i < frameTimes.length && Number.parseInt(frameTimes[i]) - this._baseDts <= this.currentTime; i++) {\n          frameTime = Number.parseInt(frameTimes[Math.max(i - 1, 0)]);\n        }\n        let frame = this._decodedFrames[frameTime];\n        // console.log('source', this.source)\n        // console.log('frametime,', frameTime)\n        if (frame) {\n          // console.log('render frame ', frameTime, Date.now())\n          // let buf = []\n          // if (this.meta.chromaFormat === 420) {\n          //\n          //   let buf0 = frame.buffer.slice(0, frame.yLinesize * frame.height);\n          //   let buf1 = frame.buffer.slice(frame.yLinesize * frame.height, frame.yLinesize * frame.height * 1.25);\n          //   let buf2 = frame.buffer.slice(frame.yLinesize * frame.height * 1.25, frame.yLinesize * frame.height * 1.5);\n          //   buf = [new Uint8Array(buf0), new Uint8Array(buf1), new Uint8Array(buf2)];\n          // }\n          if (this._seekState == SEEKING) {\n            this._seekState = SEEKED\n            this.emit(VIDEO_CANVAS_EVENTS.VIDEO_EVENTS, 'seeked')\n          }\n          frameTimes.forEach((time) => {\n            if (Number.parseInt(time) <= frameTime) {\n              delete this._decodedFrames[time]\n            }\n          })\n          this.yuvCanvas.render(frame.buffer, frame.width, frame.height, frame.yLinesize, frame.uvLinesize);\n\n          return true;\n        } else {\n          if (frameTimes.length && Number(frameTimes[0]) > currentTime) {\n            return true;\n          }\n          return false;\n        }\n      }\n    }\n    this._lastRenderTime = Date.now()\n  }\n\n  cleanBuffer () {\n    if (this.currentTime > 1) {\n      this.source.remove(0, this.currentTime - 1);\n    }\n    let frameTimes = Object.keys(this._decodedFrames);\n\n    for (let i = 0; i < frameTimes.length; i++) {\n      if (Number.parseInt(frameTimes[i]) < this.currentTime) {\n        delete this._decodedFrames[frameTimes[i]];\n      }\n    }\n  }\n\n  destroy () {\n    this.destroyWorker()\n    this.canvas = null\n    this._decodedFrames = {};\n    this.source = null\n    this._decoderInited = false;\n    this._isSeeking = false;\n  }\n\n  destroyWorker () {\n    if (this.wasmworker) {\n      this.wasmworker.removeEventListener('message', this.handleMessage)\n      this.wasmworker.postMessage({msg: 'destroy'})\n    }\n    window._shimWorkerDocument = null;\n    window._shimWorkerWindow = null;\n    this.wasmworker = null;\n  }\n\n  handleMessage (msg) {\n    switch (msg.data.msg) {\n      case 'DECODER_READY':\n        console.log('wasm worker ready')\n        this._decoderInited = true;\n        this.pushAvcc(this.meta)\n        break;\n      case 'DECODED':\n        this._onDecoded(msg.data);\n        break;\n      case 'LOG':\n        console.log(msg.data.log);\n      case 'INIT_FAILED':\n        this.destroyWorker();\n        break;\n      default:\n        console.error('invalid messaeg', msg);\n    }\n  }\n\n  setVideoSeeking () {\n    this._seekState = SEEKING\n    this.emit(VIDEO_CANVAS_EVENTS.VIDEO_EVENTS, 'seeking')\n  }\n\n  get buffered () {\n    const ranges = []\n    let currentRange = {\n      start: null,\n      end: null\n    }\n    const decodedTimes = Object.keys(this._decodedFrames);\n    if (decodedTimes.length) {\n      currentRange.start = Number.parseInt(decodedTimes[0])\n      currentRange.end = Number.parseInt(decodedTimes[decodedTimes.length - 1])\n    }\n\n    if (currentRange.start !== null && currentRange.end !== null) {\n      currentRange.start = (currentRange.start - this._baseDts) / 1000\n      currentRange.end = (currentRange.end - this._baseDts) / 1000\n      ranges.push(currentRange)\n    }\n\n    return new TimeRanges(ranges)\n  }\n\n  get videoWidth () {\n    return this.canvas.width;\n  }\n\n  get videoHeight () {\n    return this.canvas.height;\n  }\n\n  get seeking () {\n    return this._seekState == SEEKING\n  }\n\n  get readyState () {\n    return this.readyStatus\n  }\n}\nexport default VideoCanvas;\n","import EventEmitter from 'events'\nclass AudioCtx extends EventEmitter {\n  constructor (config) {\n    super();\n    this.config = Object.assign({}, config);\n    let AudioContext = window.AudioContext || window.webkitAudioContext;\n    this.context = new AudioContext();\n    this.gainNode = this.context.createGain();\n    this.gainNode.connect(this.context.destination);\n    this.meta = undefined;\n    this.samples = [];\n    this.preloadTime = this.config.preloadTime || 3;\n    this.duration = 0;\n\n    this._currentBuffer = undefined;\n    this._nextBuffer = undefined;\n    this._lastpts = undefined;\n    this._preDecode = [];\n    this._currentTime = 0;\n    this._decoding = false;\n    this._volume = Number.parseFloat(this.config.volume) === this.config.volume ? this.config.volume : 0.6\n    this.gainNode.gain.value = this._volume\n    // 记录外部传输的状态\n    this._played = false;\n    this.paused = true;\n    this.loadFinish = null; // pending play task\n    this.waitNextID = null; // audio source end and next source not loaded\n    this.destroyed = false;\n  }\n\n  get currentTime () {\n    return this._currentTime;\n  }\n\n  decodeAudio (audioTrack) {\n    let {samples, meta} = audioTrack;\n    let data = samples;\n    audioTrack.samples = [];\n    if (meta) {\n      this.setAudioData(data);\n    }\n  }\n  setAudioData (data) {\n    for (let i = 0; i < data.length; i++) {\n      data[i].pts = (data[i].pts === undefined) ? data[i].dts : data[i].pts;\n      this._preDecode.push(data[i]);\n    }\n    this.preload()\n  }\n\n  preload () {\n    if (this._preDecode.length > 0) {\n      if (this._lastpts === undefined) {\n        this._lastpts = this._preDecode[0].pts;\n      }\n      if ((this._preDecode[this._preDecode.length - 1].pts - this._lastpts) / 1000 > this.preloadTime) {\n        this.decodeAAC();\n      }\n    }\n  }\n\n  decodeAAC () {\n    if (this._decoding) {\n      return;\n    }\n    this._decoding = true;\n    let data = this._preDecode;\n    let samples = [];\n    let _this = this;\n    let sample = data.shift();\n    while (sample) {\n      let sampleData = AudioCtx.getAACData(this.meta, sample)\n      samples.push(sampleData);\n      this._lastpts = sample.pts;\n      sample = data.shift()\n    }\n    let buffer = AudioCtx.combileData(samples);\n    try {\n      this.context.decodeAudioData(buffer.buffer, function (buffer) {\n        let audioSource = _this.context.createBufferSource();\n        audioSource.buffer = buffer;\n        // audioSource.onended = _this.onSourceEnded.bind(_this);\n        _this.samples.push({\n          time: _this.duration,\n          duration: buffer.duration,\n          data: audioSource\n        })\n\n        _this.duration += buffer.duration;\n\n        if (!_this._currentBuffer) {\n          _this._currentBuffer = _this.getTimeBuffer(_this.currentTime);\n        }\n\n        if (!_this._nextBuffer && _this._currentBuffer) {\n          _this._nextBuffer = _this.getTimeBuffer(_this.currentTime + _this._currentBuffer.duration);\n        }\n        _this._decoding = false;\n\n        if ((_this._preDecode.length > 0 && _this._preDecode[_this._preDecode.length - 1].pts - _this._lastpts) / 1000 >= _this.preloadTime) {\n          _this.decodeAAC();\n        }\n\n        if (_this.loadFinish) {\n          _this.loadFinish()\n        }\n      }, (e) => {\n        console.error(e)\n      })\n    } catch (err) {\n      console.error(err);\n    }\n  }\n\n  onSourceEnded () {\n    if (this.destroyed) {\n      return;\n    }\n    if (!this._nextBuffer || !this._played) {\n      this.waitNextID = setTimeout(() => {\n        this.onSourceEnded();\n      }, 200);\n      return;\n    }\n    let audioSource = this._nextBuffer.data;\n    audioSource.start();\n    audioSource.connect(this.gainNode);\n    let _this = this;\n    setTimeout(() => {\n      _this.onSourceEnded.call(this);\n    }, audioSource.buffer.duration * 1000 - 3);\n    this._currentBuffer = this._nextBuffer;\n    this._currentTime = this._currentBuffer.time;\n    this._nextBuffer = this.getTimeBuffer(this.currentTime);\n    if (this._currentBuffer) {\n      this._nextBuffer = this.getTimeBuffer(this.currentTime + this._currentBuffer.duration);\n    }\n    this.emit('AUDIO_SOURCE_END')\n  }\n\n  play () {\n    if (this.loadFinish) {\n      return;\n    }\n\n    this._played = true;\n\n    let _this = this;\n    const playStart = () => {\n      let audioSource = this._currentBuffer.data;\n      try {\n        audioSource.start();\n      } catch (e) {\n        // NOTHING\n      }\n      audioSource.connect(this.gainNode);\n      this.paused = false;\n      if (this.context.state !== 'running' && this.playFailed) {\n        this.context.resume().then(() => {\n          if (this.context.state === 'running' && this.playFinish) {\n            this.playFinish();\n          }\n        })\n        setTimeout(() => {\n          this.playFailed(new Error('audio context suspended'));\n        })\n      } else if (this.playFinish) {\n        this.playFinish();\n      }\n      setTimeout(() => {\n        _this.onSourceEnded.call(this);\n      }, audioSource.buffer.duration * 1000 - 10);\n    }\n\n    if (!this._currentBuffer) {\n      return new Promise((resolve, reject) => {\n        this.loadFinish = playStart;\n        this.playFinish = resolve;\n        this.playFailed = reject;\n      }).then(() => {\n        this.loadFinish = null;\n        this.playFinish = null;\n        this.playFailed = null;\n        playStart()\n      });\n    } else {\n      return new Promise((resolve, reject) => {\n        this.playFinish = resolve;\n        this.playFailed = reject;\n        playStart();\n      })\n    }\n  }\n\n  pause () {\n    const audioCtx = this.context;\n    if (audioCtx.state === 'running') {\n      audioCtx.suspend()\n    }\n    this._currentBuffer = undefined;\n    this._nextBuffer = undefined;\n    this._lastpts = undefined;\n    // this.duration = 0;\n    this.samples = []\n    this.paused = true;\n  }\n\n  getTimeBuffer (time) {\n    let ret;\n    for (let i = 0; i < this.samples.length; i++) {\n      let sample = this.samples[i]\n      if (sample.time <= time && (sample.time + sample.duration) > time) {\n        ret = sample;\n        break;\n      }\n    }\n    return ret;\n  }\n\n  setAudioMetaData (meta) {\n    this.meta = meta;\n  }\n\n  destroy () {\n    if (this.waitNextID) {\n      window.clearTimeout(this.waitNextID)\n    }\n    this._preDecode = [];\n    this.paused = true;\n    this.context.close();\n    this.destroyed = true;\n  }\n\n  set muted (val) {\n    if (val) {\n      this.gainNode.gain.value = 0\n    } else {\n      this.gainNode.gain.value = this._volume\n    }\n    if (this.context.state === 'suspended' && !this.paused) {\n      this.context.resume()\n    }\n  }\n\n  get volume () {\n    if (this.context.state === 'suspended' || this.muted) {\n      return 0;\n    }\n    return this._volume\n  }\n\n  set volume (val) {\n    if (val < 0) {\n      this._volume = 0;\n      this.gainNode.gain.value = 0\n      return;\n    } else if (val > 1) {\n      this._volume = 1;\n      this.gainNode.gain.value = 1\n      return;\n    }\n\n    this._volume = val;\n    this.gainNode.gain.value = val\n  }\n\n  mute () {\n    this.gainNode.gain.value = 0\n  }\n\n  static getAACData (meta, sample) {\n    let buffer = new Uint8Array(sample.data.byteLength + 7);\n    let adts = AudioCtx.getAdts(meta, sample.data);\n    buffer.set(adts);\n    buffer.set(sample.data, 7);\n    return buffer;\n  }\n\n  static combileData (samples) {\n    // get length\n    let length = 0;\n    for (let i = 0, k = samples.length; i < k; i++) {\n      length += samples[i].byteLength;\n    }\n\n    let ret = new Uint8Array(length);\n    let offset = 0;\n    // combile data;\n    for (let i = 0, k = samples.length; i < k; i++) {\n      ret.set(samples[i], offset);\n      offset += samples[i].byteLength;\n    }\n    return ret;\n  }\n\n  static getAdts (meta, data) {\n    let adts = new Uint8Array(7);\n\n    // 设置同步位 0xfff 12bit\n    adts[0] = 0xff;\n    adts[1] = 0xf0;\n\n    // Object data (没什么人用MPEG-2了，HLS和FLV也全是MPEG-4，这里直接0)  1bit\n    // Level always 00 2bit\n    // CRC always 1 1bit\n    adts[1] = adts[1] | 0x01;\n\n    // profile 2bit\n    adts[2] = 0xc0 & ((meta.objectType - 1) << 6);\n\n    // sampleFrequencyIndex\n    adts[2] = adts[2] | (0x3c & (meta.sampleRateIndex << 2))\n\n    // private bit 0 1bit\n    // chanel configuration 3bit\n    adts[2] = adts[2] | (0x01 & meta.channelCount >> 2);\n    adts[3] = 0xc0 & (meta.channelCount << 6);\n\n    // original_copy: 0 1bit\n    // home: 0 1bit\n\n    // adts_variable_header()\n    // copyrighted_id_bit 0 1bit\n    // copyrighted_id_start 0 1bit\n\n    // aac_frame_length 13bit;\n    let aacframelength = data.byteLength + 7;\n\n    adts[3] = adts[3] | (0x03 & aacframelength >> 11);\n    adts[4] = 0xff & (aacframelength >> 3);\n    adts[5] = 0xe0 & (aacframelength << 5);\n\n    // adts_buffer_fullness 0x7ff 11bit\n    adts[5] = adts[5] | 0x1f\n    adts[6] = 0xfc;\n\n    // number_of_raw_data_blocks_in_frame 0 2bit;\n    return adts;\n  }\n}\n\nexport default AudioCtx;\n","/**\n * 音画同步调和器\n */\nclass AVReconciler {\n  constructor (props) {\n    this.aCtx = props.aCtx;\n    this.vCtx = props.vCtx;\n    this.video = props.video\n    this.timeoutId = null\n    this.start = null\n  }\n\n  doReconcile () {\n\n    const vCurTime = (this.vCtx.currentTime || 0);\n    let aCurTime;\n    if (this.video.noAudio) {\n      aCurTime = vCurTime;\n    } else {\n      aCurTime = (this.aCtx.currentTime * 1000 || 0);\n    }\n\n    const gap = vCurTime - aCurTime;\n    if (this.timeoutId) {\n      return;\n    }\n    if (gap > 200) { // audio delayed for more than 100ms\n      this.video.start += gap\n      this.vCtx.pause()\n      this.timeoutId = setTimeout(() => {\n        this.vCtx.play()\n        this.timeoutId = null\n      }, gap)\n    } else if (gap < -120) {\n      this.video.start += gap\n    }\n  }\n\n  destroy () {\n    this.start = null\n    this.aCtx = null\n    this.vCtx = null\n    if(this.timeoutId){\n      clearTimeout(this.timeoutId)\n    }\n  }\n}\n\nexport default AVReconciler;\n","import shimWorker from 'rollup-plugin-bundle-worker';\nexport default new shimWorker(\"./tickworker.js\", function (window, document) {\nvar self = this;\n\nvar interval;\nself.addEventListener('message', function(e){\n    let msg = e.data.msg\n    switch (msg) {\n        case 'start':\n            clearInterval(interval);\n            interval = setInterval(function(){\n                self.postMessage('tick');\n            }, e.data.interval);\n            break;\n        case 'stop':\n            clearInterval(interval);\n            break;\n    };\n}, false);\n\n});","import Ticker from './ticker';\nimport Worker from 'worker!./tickworker.js';\n\nexport default class WorkerTicker extends Ticker {\n  constructor (config) {\n    super(config);\n    this.timeoutId = null;\n    this.worker = new Worker();\n    this.handleMessage = this.handleMessage.bind(this);\n    this.worker.addEventListener('message', this.handleMessage);\n  }\n\n  handleMessage () {\n    this.onTick();\n  }\n\n  start (...callbacks) {\n    super.start(...callbacks);\n    this.onTick();\n    this.worker.postMessage({\n      msg: 'start',\n      interval: this.options.interval,\n    });\n  }\n\n  stop () {\n    this.worker.postMessage({\n      msg: 'stop'\n    });\n    this.worker.removeEventListener('message', this.handleMessage);\n    this.worker = null;\n    this.handleMessage = () => {};\n    this.callbacks = [];\n  }\n\n  setInterval (interval) {\n    super.setInterval(interval);\n    this.onTick();\n    this.worker.postMessage({\n      msg: 'start',\n      interval: this.config.interval,\n    });\n  }\n}\n","import './polyfills/custom-elements.min';\nimport './polyfills/native-element';\nimport { getTicker, DEFAULT_FPS, validateFPS } from './helpers/ticker';\nimport VideoCtx, {VIDEO_CANVAS_EVENTS} from './core/video-context';\nimport AudioCtx from './core/audio-context';\nimport AVReconciler from './helpers/reconciler';\nimport WorkerTicker from './helpers/worker-ticker'\n// eslint-disable-next-line no-undef\nclass MobileVideo extends HTMLElement {\n  constructor () {\n    super();\n    this._canvas = document.createElement('canvas')\n    this.handleAudioSourceEnd = this.handleAudioSourceEnd.bind(this)\n    this.played = false;\n    this.pendingPlayTask = null\n    this._waiting = false;\n    this._paused = true;\n    this.videoMetaInited = false;\n    this.audioMetaInited = false;\n    this.handleVCtxInnerEvent = this.handleVCtxInnerEvent.bind(this)\n    this._err = null\n    this._lastTimeupdateStamp = 0\n    this._volumeEventStamp = 0\n    this._hasDispatch = false\n    this._fps = DEFAULT_FPS\n  }\n\n  init () {\n    this._destroyed = false\n    if (this.vCtx) {\n      this.vCtx.destroy();\n    }\n    this.vCtx = new VideoCtx(Object.assign({\n      canvas: this._canvas,\n      preloadTime: this.preloadTime\n    }, { style: { width: this.width, height: this.height } }));\n\n    // this._innerDispatchEvent('waiting')\n    this.vCtx.oncanplay = () => {\n      if (!this.played) {\n        if (!this.contains(this._canvas)) {\n          this.appendChild(this._canvas);\n          // if (this.autoplay) {\n          //   this._innerDispatchEvent('play')\n          // }\n        }\n      }\n    }\n    this.vCtx.on(VIDEO_CANVAS_EVENTS.VIDEO_EVENTS, this.handleVCtxInnerEvent)\n  }\n\n  _initAudio () {\n    let attrVolume = this.getAttribute('volume')\n    const volume = this.muted ? 0 : Number.parseFloat(attrVolume)\n    if (!this.noAudio) {\n      this.aCtx = new AudioCtx({\n        volume\n      });\n    }\n    this.ticker = new WorkerTicker({interval: 1000 / this._fps})\n    // this.ticker = new (getTicker({interval: 1000 / this._fps}))()\n    this.reconciler = new AVReconciler({\n      vCtx: this.vCtx,\n      aCtx: this.aCtx,\n      video: this\n    })\n    if (!this.noAudio) {\n      this.aCtx.on('AUDIO_SOURCE_END', this.handleAudioSourceEnd)\n    }\n  }\n\n  handleVCtxInnerEvent (eventName) {\n    this._innerDispatchEvent(eventName)\n  }\n\n  handleAudioSourceEnd () {\n    this.reconciler.doReconcile()\n    this.vCtx.cleanBuffer();\n    this.aCtx.preload();\n    this.vCtx.preload();\n  }\n\n  _cleanBuffer () {\n    this.vCtx.cleanBuffer()\n  }\n\n  _destroyAudio () {\n    this.audioMetaInited = false;\n    if (!this.noAudio && this.aCtx) {\n      this.aCtx.removeListener('AUDIO_SOURCE_END', this.handleAudioSourceEnd)\n      this.aCtx.destroy()\n    }\n    this.start = null;\n    this.aCtx = null;\n    this.ticker.stop()\n    this.ticker = null;\n    this.pendingPlayTask = null;\n    this.played = false;\n    this._hasDispatch = false;\n  }\n\n  _destroyVideo () {\n    this.videoMetaInited = false;\n    this.vCtx.removeAllListeners();\n    this.vCtx.destroy()\n    this.vCtx = null;\n  }\n\n  destroy () {\n    if (this._destroyed) {\n      return\n    }\n\n    this.reconciler.destroy()\n    this._destroyed = true\n    this._destroyVideo()\n    this._destroyAudio()\n  }\n\n  onDemuxComplete (videoTrack, audioTrack) {\n    if (!this.noAudio) {\n      this.aCtx.decodeAudio(audioTrack);\n    }\n    this.vCtx.decodeVideo(videoTrack);\n  }\n\n  decodeVideoBuffer (buffer) {\n    this.vCtx.decodeVideoBuffer(buffer)\n  }\n\n  setAudioMeta (meta) {\n    if (this.noAudio) {\n      return;\n    }\n    this.aCtx.setAudioMetaData(meta);\n    this.audioMetaInited = true;\n  }\n\n  setVideoMeta (meta) {\n    this.vCtx.setVideoMetaData(meta);\n    this.videoMetaInited = true;\n  }\n\n  handleMediaInfo () {\n    this._innerDispatchEvent('durationchange');\n    this._innerDispatchEvent('loadedmetadata');\n    this._innerDispatchEvent('seeking');\n    this._innerDispatchEvent('seeked');\n  }\n\n  handleEnded () {\n    this._innerDispatchEvent('ended');\n  }\n\n  handleErr (code, message) {\n    this._err = {}\n    this._err.code = code\n    this._err.message = message\n    this._innerDispatchEvent('error')\n  }\n\n  _innerDispatchEvent (type) {\n    this.dispatchEvent(new Event(type))\n  }\n\n  disconnectedCallback () {\n    this.destroy()\n  }\n\n  connectedCallback () {\n    // console.log('connected callback', this.noAudio)\n    this._currentTime = 0;\n    this.start = undefined;\n    this.init()\n    this._initAudio();\n    this.vCtx.reset()\n  }\n\n  get width () {\n    return this.getAttribute('width') || this.videoWidth\n  }\n\n  set width (val) {\n    this.style.display = 'inline-block'\n    const pxVal = typeof val === 'number' ? `${val}px` : val\n    this.setAttribute('width', pxVal)\n    this.style.width = pxVal\n    this._canvas.width = val;\n  }\n\n  get height () {\n    return this.getAttribute('height')\n  }\n\n  set height (val) {\n    this.style.display = 'inline-block'\n    const pxVal = typeof val === 'number' ? `${val}px` : val\n    this.setAttribute('height', pxVal)\n    this.style.height = pxVal\n    this._canvas.height = val;\n  }\n\n  get videoWidth () {\n    if (this.vCtx && this.vCtx.videoWidth) {\n      return this.vCtx.videoWidth\n    }\n    return 0\n  }\n\n  get videoHeight () {\n    if (this.vCtx && this.vCtx.videoHeight) {\n      return this.vCtx.videoHeight\n    }\n    return 0\n  }\n\n  get src () {\n    return this.getAttribute('src');\n  }\n\n  set src (val) {\n    this.setAttribute('src', val);\n  }\n\n  get readyState () {\n    return this.videoMetaInited ? this.vCtx.readyState : 0\n  }\n\n  get seeking () {\n    return this.videoMetaInited ? this.vCtx.seeking : false\n  }\n\n  get currentTime () {\n    return this.videoMetaInited ? this.vCtx.currentTime / 1000 : 0\n  }\n\n  set currentTime (val) {\n    const nVal = Number.parseFloat(val)\n    if (!isNaN(nVal)) {\n      if (this.start && this.currentTime) {\n        this.vCtx.setVideoSeeking()\n        const gap = this.currentTime - nVal;\n        this.start += (gap * 1000)\n      }\n    }\n    return nVal;\n  }\n\n  get duration () {\n    return this.audioMetaInited ? this.aCtx.duration : 0\n  }\n\n  get paused () {\n    return this._paused\n  }\n\n  get playbackRate () {\n    if (this.hasAttribute('playbackRate')) {\n      return this.getAttribute('playbackRate')\n    } else {\n      return 1.0\n    }\n  }\n\n  set playbackRate (val) {\n    this.setAttribute('playbackrate', val);\n    if (!this.noAudio) {\n      this.aCtx.playbackRate = val;\n    }\n    this.vCtx.playbackRate = val;\n\n    this._innerDispatchEvent('ratechange')\n  }\n\n  get ended () {\n    if (this.audioMetaInited) {\n      return this.aCtx.ended;\n    }\n    return false;\n  }\n\n  get autoplay () {\n    if (this.hasAttribute('autoplay')) {\n      return this.getAttribute('autoplay') == 'true'\n    } else {\n      return false\n    }\n  }\n  set autoplay (value) {\n    this.setAttribute('autoplay', value)\n  }\n  play () {\n    if (this.pendingPlayTask) {\n      return;\n    }\n\n    if (this.played) {\n      this.connectedCallback()\n    }\n\n    if (!this.autoplay && !this._hasDispatch) {\n      this._innerDispatchEvent('waiting')\n      this._hasDispatch = true\n      this._waiting = true\n    }\n\n    this._paused = false\n    this._innerDispatchEvent('play')\n    let audioPlayTask = null\n\n    if (this.noAudio) {\n      audioPlayTask = Promise.resolve()\n    } else {\n      audioPlayTask = this.aCtx.play()\n    }\n    this.pendingPlayTask = Promise.all([\n      this.vCtx.play(),\n      audioPlayTask.then(() => {\n        if (this.aCtx) {\n          this.aCtx.muted = true\n        }\n      })\n    ]).then(() => {\n      if (this.aCtx) {\n        this.aCtx.muted = false\n      }\n      this.ticker.start(() => {\n        this.vCtx.preload()\n        if (!this.start) {\n          this.start = Date.now()\n          this._lastTimeupdateStamp = this.start\n        }\n        const prevTime = this._currentTime;\n\n        this._currentTime = Date.now() - this.start\n\n        // console.log(this._currentTime, ' ', this.start)\n        const rendered = this.vCtx._onTimer(this._currentTime)\n        if (rendered) {\n          if (this._waiting) {\n            this._innerDispatchEvent('playing')\n            this._waiting = false;\n          }\n          let now = Date.now()\n          if (now - this._lastTimeupdateStamp >= 250) { // debounce\n            this._lastTimeupdateStamp = now\n            this._innerDispatchEvent('timeupdate')\n          }\n        } else {\n          this._currentTime = prevTime;\n          this.start += (Date.now() - this.start - prevTime);\n          if (!this._waiting && !this.paused) {\n            this._waiting = true;\n            this._innerDispatchEvent('waiting')\n          }\n        }\n      });\n      this.pendingPlayTask = null\n      this.played = true;\n      // this._innerDispatchEvent('playing')\n    }).catch((e) => {\n      this.pendingPlayTask = null\n      this._paused = true;\n      console.error(e);\n      throw e;\n    })\n    return this.pendingPlayTask;\n  }\n\n  pause () {\n    this._paused = true;\n    if (!this.noAudio) {\n      this.aCtx.pause();\n      this.aCtx.destroy();\n    }\n\n    this.vCtx.pause();\n\n    this.ticker.stop()\n\n    Promise.resolve().then(() => {\n      this._innerDispatchEvent('pause')\n    })\n  }\n\n  load () {\n    // no-op for now\n  }\n\n  get volume () {\n    if (this.noAudio) {\n      return 0;\n    }\n    return this.aCtx ? this.aCtx.volume : 0;\n  }\n\n  set volume (vol) {\n    if (this.noAudio) {\n      return;\n    }\n    this.setAttribute('volume', vol);\n    this.aCtx.volume = vol\n    if (vol > 0 && this.muted) {\n      this.aCtx.mute()\n    }\n    this.onValueChange()\n  }\n\n  onValueChange () {\n    let now = Date.now()\n    if (now - this._volumeEventStamp < 200) {\n      return\n    }\n    this._volumeEventStamp = now\n    this._innerDispatchEvent('volumechange')\n  }\n\n  get muted () {\n    const attrMuted = this.getAttribute('muted') === 'true'\n    if (attrMuted !== undefined) {\n      return attrMuted;\n    } else if (this.getAttribute('volume')) {\n      return Number.parseInt(this.getAttribute('volume')) === 0\n    } else {\n      return false\n    }\n  }\n\n  set muted (val) {\n    if (this.noAudio) {\n      return;\n    }\n    this.setAttribute('muted', val);\n    if (!val) {\n      this.aCtx.muted = false\n    } else {\n      this.aCtx.muted = true\n    }\n    this.onValueChange()\n  }\n\n  get error () {\n    return this._err || this.vCtx.error || (this.noAudio ? null : this.aCtx.error);\n  }\n\n  get buffered () {\n    return this.vCtx.buffered\n  }\n\n  get noAudio () {\n    return this.getAttribute('noaudio') === 'true'\n  }\n\n  get networkState () {\n    return 0\n  }\n\n  get fps () {\n    return this._fps\n  }\n\n  set fps (val) {\n    if (!validateFPS(val)) {\n      val = DEFAULT_FPS\n    }\n    this._fps = val\n    if (this.ticker) {\n      this.ticker.setInterval(1000 / val)\n    }\n  }\n\n  get preloadTime () {\n    const attrPreloadTime = this.getAttribute('preloadtime');\n    if (attrPreloadTime) {\n      const preloadTime = Number.parseFloat(attrPreloadTime);\n      if (preloadTime > 0 && !Number.isNaN(preloadTime)) {\n        return preloadTime;\n      }\n    }\n    return Infinity;\n  }\n\n  set preloadTime (val) {\n    if (val && Number(val) > 0) {\n      this.setAttribute('preloadtime', val);\n      this.vCtx.config.preloadTime = this.preloadTime;\n    }\n  }\n}\n// eslint-disable-next-line no-undef\ncustomElements.define('mobile-video', MobileVideo);\n"],"names":["validateFPS","fps","shimWorker","filename","fn","forceFallback","o","this","Worker","objURL","createSourceObject","replace","slice","TARGET","revokeObjectURL","selfShim","m","onmessage","data","target","call","postMessage","isThisThread","str","URL","createObjectURL","Blob","type","SCRIPT_TYPE","e","blob","BlobBuilder","append","getBlob","EventHandlers","EventEmitter","init","$getMaxListeners","that","undefined","_maxListeners","defaultMaxListeners","emitNone","handler","isFn","self","len","length","listeners","arrayClone","i","emitOne","arg1","emitTwo","arg2","emitThree","arg3","emitMany","args","apply","_addListener","listener","prepend","events","existing","TypeError","_events","newListener","emit","_eventsCount","unshift","push","warned","w","Error","name","emitter","count","emitWarning","console","warn","log","_onceWrap","g","removeListener","fired","arguments","listenerCount","evlistener","spliceOne","list","index","k","n","pop","arr","copy","Array","unwrapListeners","ret","ra","a","b","qa","has","test","I","isConnected","sa","__CE_isImportDocument","Document","parentNode","window","ShadowRoot","host","J","children","prototype","firstChild","nextSibling","nodeType","Node","ELEMENT_NODE","K","L","c","f","d","localName","getAttribute","import","Set","add","__CE_shadowRoot","M","ta","document","N","readyState","MutationObserver","bind","observe","childList","subtree","ua","disconnect","va","Promise","wa","O","Map","l","j","h","xa","SyntaxError","P","za","Function","Object","observedAttributes","constructorFunction","disconnectedCallback","adoptedCallback","attributeChangedCallback","constructionStack","set","ya","upgrade","__CE_state","get","delete","S","T","noDocumentConstructionObserver","shadyDomFastWalk","U","ShadyDOM","inUse","querySelectorAll","nativeMethods","Aa","Ba","V","W","__CE_patched","X","connectedCallback","Q","Y","s","__CE_registry","__CE_documentLoadHandled","addEventListener","forEach","ownerDocument","defaultView","__CE_definition","hasAttributes","Ca","namespaceURI","R","p","setPrototypeOf","HTMLUnknownElement","message","sourceURL","fileName","line","lineNumber","column","columnNumber","ErrorEvent","initErrorEvent","cancelable","lineno","colno","error","createEvent","preventDefault","defineProperty","configurable","enumerable","dispatchEvent","defaultPrevented","Ea","HTMLElement","constructor","Da","na","writable","value","Z","Element","DocumentFragment","Fa","aa","ba","ca","Ga","TEXT_NODE","childNodes","t","r","q","u","v","x","COMMENT_NODE","textContent","join","createTextNode","Ha","ja","ka","la","ma","Ia","toLowerCase","previousSibling","lastChild","String","y","z","H","innerHTML","content","B","A","E","D","C","F","oa","G","pa","fa","ha","ia","Ja","da","ea","createElement","createElementNS","importNode","cloneNode","appendChild","insertBefore","removeChild","replaceChild","getOwnPropertyDescriptor","attachShadow","setAttribute","removeAttribute","getAttributeNS","setAttributeNS","removeAttributeNS","insertAdjacentElement","insertAdjacentHTML","before","after","replaceWith","remove","split","contains","documentElement","addedNodes","define","whenDefined","reject","indexOf","polyfillWrapFlushCallback","CustomElementRegistry","polyfillDefineLazy","customElements","forcePolyfill","__CE_installPolyfill","Reflect","BuiltInHTMLElement","wrapperForTheName","construct","DEFAULT_FPS","Ticker","options","assign","interval","callbacks","props","prev","timerId","_subTimerId","_tickFunc","RafTicker","getTickFunc","tick","_this","nextTick","onTick","getCancelFunc","requestAnimationFrame","webkitRequestAnimationFrame","cancelAnimationFrame","webkitCancelAnimationFrame","config","timeoutId","setTimeout","stop","clearTimeout","Symbol","WebKitBlobBuilder","MozBlobBuilder","MSBlobBuilder","webkitURL","testWorker","testArray","Uint8Array","navigator","userAgent","buffer","terminate","shimImportScripts","src","resolve","_shimWorkerDocument","onload","onerror","head","onPostRun","Decoder","meta","decoder","importScripts","Module","toString","then","addOnPostRun","inited","infolist","par_broadwayOnBroadwayInited","broadwayOnBroadwayInited","par_broadwayOnPictureDecoded","broadwayOnPictureDecoded","toU8Array","ptr","HEAPU8","subarray","_broadwayInit","streamBuffer","_broadwayCreateStream","offset","width","height","yLinesize","uvLinesize","infoid","info","yRowcount","uvRowcount","chromaFormat","datetemp","dts","decodeTime","Date","now","msg","decode","time","parseInt","getTime","Math","floor","_broadwayPlayStream","destroy","_broadwayExit","updateMeta","YUVCanvas","configs","canvas","_initMeta","_initContextGL","contextGL","_initProgram","_initBuffers","_initTextures","chroma","presentHeight","presentWidth","gl","validContextNames","nameIndex","contextName","contextOptions","getContext","getParameter","vertexShaderScript","fragmentShaderScript","YUV2RGB","vertexShader","createShader","VERTEX_SHADER","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","getShaderInfoLog","fragmentShader","FRAGMENT_SHADER","program","createProgram","attachShader","linkProgram","getProgramParameter","LINK_STATUS","getProgramInfoLog","useProgram","YUV2RGBRef","getUniformLocation","uniformMatrix4fv","shaderProgram","vertexPosBuffer","createBuffer","bindBuffer","ARRAY_BUFFER","bufferData","Float32Array","STATIC_DRAW","vertexPosRef","getAttribLocation","enableVertexAttribArray","vertexAttribPointer","FLOAT","texturePosBuffer","texturePosRef","uTexturePosBuffer","uTexturePosRef","vTexturePosBuffer","vTexturePosRef","yTextureRef","_initTexture","ySamplerRef","uniform1i","uTextureRef","uSamplerRef","vTextureRef","vSamplerRef","textureRef","createTexture","bindTexture","TEXTURE_2D","texParameteri","TEXTURE_MAG_FILTER","NEAREST","TEXTURE_MIN_FILTER","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","ylen","uvlen","renderData","_drawPictureGL420","yData","uData","vData","yDataPerRow","yRowCnt","uDataPerRow","uRowCnt","vDataPerRow","vRowCnt","ratiow","ratioh","left","top","viewport","texturePosValues","DYNAMIC_DRAW","uTexturePosValues","vTexturePosValues","activeTexture","TEXTURE0","texImage2D","LUMINANCE","UNSIGNED_BYTE","TEXTURE1","TEXTURE2","drawArrays","TRIANGLE_STRIP","_drawPictureGL","_drawPictureRGB","SourceBuffer","reset","currentGop","_lastGet","frame","shift","gop","sample","samples","nextGop","start","end","splice","TimeRanges","ranges","idx","range","create","usingDomains","domain","active","getPrototypeOf","setMaxListeners","isNaN","getMaxListeners","er","doError","err","context","domainEmitter","domainThrown","addListener","on","prependListener","once","prependOnceListener","position","originalListener","removeAllListeners","key","keys","eventNames","ownKeys","asmSupported","VIDEO_CANVAS_EVENTS","VideoCanvas","source","onFirstFrame","oncanplay","initParameters","style","maxWidth","maxHeight","bottom","right","margin","handleMessage","useBackupTimer","readyStatus","paused","currentTime","_seekState","_avccpushed","_decodedFrames","_lastSampleDts","_baseDts","_lastRenderTime","playFinish","_shimWorkerWindow","initWorker","setBackUpWorker","_this2","_decoderInited","isBackup","VideoWorkerCls","BackupVideoWorker","VideoWorker","wasmworker","destroyWorker","_this3","initWasmWorker","pushAvcc","sps","byteLength","pps","yuvCanvas","resetMeta","Render","videoTrack","preload","preloadTime","_analyseNal","pts","cts","isKeyframe","decodedFrameLen","VIDEO_EVENTS","frameRate","frameTimes","frameTime","Number","max","_this5","render","_isSeeking","removeEventListener","_onDecoded","currentRange","decodedTimes","AudioCtx","AudioContext","webkitAudioContext","gainNode","createGain","connect","destination","duration","_currentBuffer","_nextBuffer","_lastpts","_preDecode","_currentTime","_decoding","_volume","parseFloat","volume","gain","_played","loadFinish","waitNextID","destroyed","audioTrack","setAudioData","decodeAAC","sampleData","getAACData","combileData","decodeAudioData","audioSource","createBufferSource","getTimeBuffer","onSourceEnded","playStart","_this4","state","playFailed","resume","audioCtx","suspend","close","val","muted","adts","getAdts","objectType","sampleRateIndex","channelCount","aacframelength","AVReconciler","aCtx","vCtx","video","vCurTime","aCurTime","gap","noAudio","pause","play","setInterval","WorkerTicker","worker","MobileVideo","_canvas","handleAudioSourceEnd","played","pendingPlayTask","_waiting","_paused","videoMetaInited","audioMetaInited","handleVCtxInnerEvent","_err","_lastTimeupdateStamp","_volumeEventStamp","_hasDispatch","_fps","_destroyed","VideoCtx","attrVolume","ticker","reconciler","eventName","_innerDispatchEvent","doReconcile","cleanBuffer","_destroyVideo","_destroyAudio","decodeAudio","decodeVideo","decodeVideoBuffer","setAudioMetaData","setVideoMetaData","code","Event","_initAudio","autoplay","audioPlayTask","all","prevTime","_onTimer","catch","videoWidth","display","pxVal","videoHeight","seeking","nVal","setVideoSeeking","hasAttribute","playbackRate","ended","vol","mute","onValueChange","attrMuted","buffered","attrPreloadTime","Infinity"],"mappings":"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"}