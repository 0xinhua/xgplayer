{"version":3,"file":"index.js","sources":["../src/polyfills/custom-elements.min.js","../src/polyfills/native-element.js","../src/helpers/ticker.js","../../../node_modules/rollup-plugin-bundle-worker/src/workerhelper.js","../src/core/worker.js","../src/core/backupWorker.js","../src/core/yuv-canvas.js","../src/models/sourcebuffer.js","../src/models/time-ranges.js","../../../node_modules/rollup-plugin-node-builtins/src/es6/events.js","../src/core/video-context.js","../src/core/audio-context.js","../src/helpers/reconciler.js","../src/helpers/tickworker.js","../src/helpers/worker-ticker.js","../src/index.js"],"sourcesContent":["(function(){\n  /*\n\n   Copyright (c) 2016 The Polymer Project Authors. All rights reserved.\n   This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\n   The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\n   The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\n   Code distributed by Google as part of the polymer project is also\n   subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n  */\n  'use strict';var n=window.Document.prototype.createElement,p=window.Document.prototype.createElementNS,aa=window.Document.prototype.importNode,ba=window.Document.prototype.prepend,ca=window.Document.prototype.append,da=window.DocumentFragment.prototype.prepend,ea=window.DocumentFragment.prototype.append,q=window.Node.prototype.cloneNode,r=window.Node.prototype.appendChild,t=window.Node.prototype.insertBefore,u=window.Node.prototype.removeChild,v=window.Node.prototype.replaceChild,x=Object.getOwnPropertyDescriptor(window.Node.prototype,\n    \"textContent\"),y=window.Element.prototype.attachShadow,z=Object.getOwnPropertyDescriptor(window.Element.prototype,\"innerHTML\"),A=window.Element.prototype.getAttribute,B=window.Element.prototype.setAttribute,C=window.Element.prototype.removeAttribute,D=window.Element.prototype.getAttributeNS,E=window.Element.prototype.setAttributeNS,F=window.Element.prototype.removeAttributeNS,G=window.Element.prototype.insertAdjacentElement,fa=window.Element.prototype.insertAdjacentHTML,ha=window.Element.prototype.prepend,\n    ia=window.Element.prototype.append,ja=window.Element.prototype.before,ka=window.Element.prototype.after,la=window.Element.prototype.replaceWith,ma=window.Element.prototype.remove,na=window.HTMLElement,H=Object.getOwnPropertyDescriptor(window.HTMLElement.prototype,\"innerHTML\"),oa=window.HTMLElement.prototype.insertAdjacentElement,pa=window.HTMLElement.prototype.insertAdjacentHTML;var qa=new Set;\"annotation-xml color-profile font-face font-face-src font-face-uri font-face-format font-face-name missing-glyph\".split(\" \").forEach(function(a){return qa.add(a)});function ra(a){var b=qa.has(a);a=/^[a-z][.0-9_a-z]*-[\\-.0-9_a-z]*$/.test(a);return!b&&a}var sa=document.contains?document.contains.bind(document):document.documentElement.contains.bind(document.documentElement);\n  function I(a){var b=a.isConnected;if(void 0!==b)return b;if(sa(a))return!0;for(;a&&!(a.__CE_isImportDocument||a instanceof Document);)a=a.parentNode||(window.ShadowRoot&&a instanceof ShadowRoot?a.host:void 0);return!(!a||!(a.__CE_isImportDocument||a instanceof Document))}function J(a){var b=a.children;if(b)return Array.prototype.slice.call(b);b=[];for(a=a.firstChild;a;a=a.nextSibling)a.nodeType===Node.ELEMENT_NODE&&b.push(a);return b}\n  function K(a,b){for(;b&&b!==a&&!b.nextSibling;)b=b.parentNode;return b&&b!==a?b.nextSibling:null}\n  function L(a,b,c){for(var f=a;f;){if(f.nodeType===Node.ELEMENT_NODE){var d=f;b(d);var e=d.localName;if(\"link\"===e&&\"import\"===d.getAttribute(\"rel\")){f=d.import;void 0===c&&(c=new Set);if(f instanceof Node&&!c.has(f))for(c.add(f),f=f.firstChild;f;f=f.nextSibling)L(f,b,c);f=K(a,d);continue}else if(\"template\"===e){f=K(a,d);continue}if(d=d.__CE_shadowRoot)for(d=d.firstChild;d;d=d.nextSibling)L(d,b,c)}f=f.firstChild?f.firstChild:K(a,f)}}function M(a,b,c){a[b]=c};function ta(a){var b=document;this.c=a;this.a=b;this.b=void 0;N(this.c,this.a);\"loading\"===this.a.readyState&&(this.b=new MutationObserver(this.f.bind(this)),this.b.observe(this.a,{childList:!0,subtree:!0}))}function ua(a){a.b&&a.b.disconnect()}ta.prototype.f=function(a){var b=this.a.readyState;\"interactive\"!==b&&\"complete\"!==b||ua(this);for(b=0;b<a.length;b++)for(var c=a[b].addedNodes,f=0;f<c.length;f++)N(this.c,c[f])};function va(){var a=this;this.b=this.a=void 0;this.c=new Promise(function(b){a.b=b;a.a&&b(a.a)})}function wa(a){if(a.a)throw Error(\"Already resolved.\");a.a=void 0;a.b&&a.b(void 0)};function O(a){this.f=new Map;this.g=new Map;this.l=new Map;this.i=!1;this.b=a;this.j=new Map;this.c=function(b){return b()};this.a=!1;this.h=[];this.m=a.f?new ta(a):void 0}O.prototype.o=function(a,b){var c=this;if(!(b instanceof Function))throw new TypeError(\"Custom element constructor getters must be functions.\");xa(this,a);this.f.set(a,b);this.h.push(a);this.a||(this.a=!0,this.c(function(){return ya(c)}))};\n  O.prototype.define=function(a,b){var c=this;if(!(b instanceof Function))throw new TypeError(\"Custom element constructors must be functions.\");xa(this,a);za(this,a,b);this.h.push(a);this.a||(this.a=!0,this.c(function(){return ya(c)}))};function xa(a,b){if(!ra(b))throw new SyntaxError(\"The element name '\"+b+\"' is not valid.\");if(P(a,b))throw Error(\"A custom element with name '\"+b+\"' has already been defined.\");if(a.i)throw Error(\"A custom element is already being defined.\");}\n  function za(a,b,c){a.i=!0;var f;try{var d=function(m){var w=e[m];if(void 0!==w&&!(w instanceof Function))throw Error(\"The '\"+m+\"' callback must be a function.\");return w},e=c.prototype;if(!(e instanceof Object))throw new TypeError(\"The custom element constructor's prototype is not an object.\");var g=d(\"connectedCallback\");var h=d(\"disconnectedCallback\");var k=d(\"adoptedCallback\");var l=(f=d(\"attributeChangedCallback\"))&&c.observedAttributes||[]}catch(m){throw m;}finally{a.i=!1}c={localName:b,constructorFunction:c,\n    connectedCallback:g,disconnectedCallback:h,adoptedCallback:k,attributeChangedCallback:f,observedAttributes:l,constructionStack:[]};a.g.set(b,c);a.l.set(c.constructorFunction,c);return c}O.prototype.upgrade=function(a){N(this.b,a)};\n  function ya(a){if(!1!==a.a){a.a=!1;for(var b=[],c=a.h,f=new Map,d=0;d<c.length;d++)f.set(c[d],[]);N(a.b,document,{upgrade:function(k){if(void 0===k.__CE_state){var l=k.localName,m=f.get(l);m?m.push(k):a.g.has(l)&&b.push(k)}}});for(d=0;d<b.length;d++)Q(a.b,b[d]);for(d=0;d<c.length;d++){for(var e=c[d],g=f.get(e),h=0;h<g.length;h++)Q(a.b,g[h]);(e=a.j.get(e))&&wa(e)}c.length=0}}O.prototype.get=function(a){if(a=P(this,a))return a.constructorFunction};\n  O.prototype.whenDefined=function(a){if(!ra(a))return Promise.reject(new SyntaxError(\"'\"+a+\"' is not a valid custom element name.\"));var b=this.j.get(a);if(b)return b.c;b=new va;this.j.set(a,b);var c=this.g.has(a)||this.f.has(a);a=-1===this.h.indexOf(a);c&&a&&wa(b);return b.c};O.prototype.polyfillWrapFlushCallback=function(a){this.m&&ua(this.m);var b=this.c;this.c=function(c){return a(function(){return b(c)})}};\n  function P(a,b){var c=a.g.get(b);if(c)return c;if(c=a.f.get(b)){a.f.delete(b);try{return za(a,b,c())}catch(f){R(f)}}}window.CustomElementRegistry=O;O.prototype.define=O.prototype.define;O.prototype.upgrade=O.prototype.upgrade;O.prototype.get=O.prototype.get;O.prototype.whenDefined=O.prototype.whenDefined;O.prototype.polyfillDefineLazy=O.prototype.o;O.prototype.polyfillWrapFlushCallback=O.prototype.polyfillWrapFlushCallback;function S(){var a=T&&T.noDocumentConstructionObserver,b=T&&T.shadyDomFastWalk;this.b=[];this.c=[];this.a=!1;this.shadyDomFastWalk=b;this.f=!a}function U(a,b,c,f){var d=window.ShadyDOM;if(a.shadyDomFastWalk&&d&&d.inUse){if(b.nodeType===Node.ELEMENT_NODE&&c(b),b.querySelectorAll)for(a=d.nativeMethods.querySelectorAll.call(b,\"*\"),b=0;b<a.length;b++)c(a[b])}else L(b,c,f)}function Aa(a,b){a.a=!0;a.b.push(b)}function Ba(a,b){a.a=!0;a.c.push(b)}function V(a,b){a.a&&U(a,b,function(c){return W(a,c)})}\n  function W(a,b){if(a.a&&!b.__CE_patched){b.__CE_patched=!0;for(var c=0;c<a.b.length;c++)a.b[c](b);for(c=0;c<a.c.length;c++)a.c[c](b)}}function X(a,b){var c=[];U(a,b,function(d){return c.push(d)});for(b=0;b<c.length;b++){var f=c[b];1===f.__CE_state?a.connectedCallback(f):Q(a,f)}}function Y(a,b){var c=[];U(a,b,function(d){return c.push(d)});for(b=0;b<c.length;b++){var f=c[b];1===f.__CE_state&&a.disconnectedCallback(f)}}\n  function N(a,b,c){c=void 0===c?{}:c;var f=c.s,d=c.upgrade||function(g){return Q(a,g)},e=[];U(a,b,function(g){a.a&&W(a,g);if(\"link\"===g.localName&&\"import\"===g.getAttribute(\"rel\")){var h=g.import;h instanceof Node&&(h.__CE_isImportDocument=!0,h.__CE_registry=document.__CE_registry);h&&\"complete\"===h.readyState?h.__CE_documentLoadHandled=!0:g.addEventListener(\"load\",function(){var k=g.import;if(!k.__CE_documentLoadHandled){k.__CE_documentLoadHandled=!0;var l=new Set;f&&(f.forEach(function(m){return l.add(m)}),\n    l.delete(k));N(a,k,{s:l,upgrade:d})}})}else e.push(g)},f);for(b=0;b<e.length;b++)d(e[b])}\n  function Q(a,b){try{var c=b.ownerDocument,f=c.__CE_registry;var d=f&&(c.defaultView||c.__CE_isImportDocument)?P(f,b.localName):void 0;if(d&&void 0===b.__CE_state){d.constructionStack.push(b);try{try{if(new d.constructorFunction!==b)throw Error(\"The custom element constructor did not produce the element being upgraded.\");}finally{d.constructionStack.pop()}}catch(k){throw b.__CE_state=2,k;}b.__CE_state=1;b.__CE_definition=d;if(d.attributeChangedCallback&&b.hasAttributes()){var e=d.observedAttributes;\n    for(d=0;d<e.length;d++){var g=e[d],h=b.getAttribute(g);null!==h&&a.attributeChangedCallback(b,g,null,h,null)}}I(b)&&a.connectedCallback(b)}}catch(k){R(k)}}S.prototype.connectedCallback=function(a){var b=a.__CE_definition;if(b.connectedCallback)try{b.connectedCallback.call(a)}catch(c){R(c)}};S.prototype.disconnectedCallback=function(a){var b=a.__CE_definition;if(b.disconnectedCallback)try{b.disconnectedCallback.call(a)}catch(c){R(c)}};\n  S.prototype.attributeChangedCallback=function(a,b,c,f,d){var e=a.__CE_definition;if(e.attributeChangedCallback&&-1<e.observedAttributes.indexOf(b))try{e.attributeChangedCallback.call(a,b,c,f,d)}catch(g){R(g)}};\n  function Ca(a,b,c,f){var d=b.__CE_registry;if(d&&(null===f||\"http://www.w3.org/1999/xhtml\"===f)&&(d=P(d,c)))try{var e=new d.constructorFunction;if(void 0===e.__CE_state||void 0===e.__CE_definition)throw Error(\"Failed to construct '\"+c+\"': The returned value was not constructed with the HTMLElement constructor.\");if(\"http://www.w3.org/1999/xhtml\"!==e.namespaceURI)throw Error(\"Failed to construct '\"+c+\"': The constructed element's namespace must be the HTML namespace.\");if(e.hasAttributes())throw Error(\"Failed to construct '\"+\n    c+\"': The constructed element must not have any attributes.\");if(null!==e.firstChild)throw Error(\"Failed to construct '\"+c+\"': The constructed element must not have any children.\");if(null!==e.parentNode)throw Error(\"Failed to construct '\"+c+\"': The constructed element must not have a parent node.\");if(e.ownerDocument!==b)throw Error(\"Failed to construct '\"+c+\"': The constructed element's owner document is incorrect.\");if(e.localName!==c)throw Error(\"Failed to construct '\"+c+\"': The constructed element's local name is incorrect.\");\n    return e}catch(g){return R(g),b=null===f?n.call(b,c):p.call(b,f,c),Object.setPrototypeOf(b,HTMLUnknownElement.prototype),b.__CE_state=2,b.__CE_definition=void 0,W(a,b),b}b=null===f?n.call(b,c):p.call(b,f,c);W(a,b);return b}\n  function R(a){var b=a.message,c=a.sourceURL||a.fileName||\"\",f=a.line||a.lineNumber||0,d=a.column||a.columnNumber||0,e=void 0;void 0===ErrorEvent.prototype.initErrorEvent?e=new ErrorEvent(\"error\",{cancelable:!0,message:b,filename:c,lineno:f,colno:d,error:a}):(e=document.createEvent(\"ErrorEvent\"),e.initErrorEvent(\"error\",!1,!0,b,c,f),e.preventDefault=function(){Object.defineProperty(this,\"defaultPrevented\",{configurable:!0,get:function(){return!0}})});void 0===e.error&&Object.defineProperty(e,\"error\",\n    {configurable:!0,enumerable:!0,get:function(){return a}});window.dispatchEvent(e);e.defaultPrevented||console.error(a)};var Da=new function(){};function Ea(a){window.HTMLElement=function(){function b(){var c=this.constructor;var f=document.__CE_registry.l.get(c);if(!f)throw Error(\"Failed to construct a custom element: The constructor was not registered with `customElements`.\");var d=f.constructionStack;if(0===d.length)return d=n.call(document,f.localName),Object.setPrototypeOf(d,c.prototype),d.__CE_state=1,d.__CE_definition=f,W(a,d),d;var e=d.length-1,g=d[e];if(g===Da)throw Error(\"Failed to construct '\"+f.localName+\"': This element was already constructed.\");\n    d[e]=Da;Object.setPrototypeOf(g,c.prototype);W(a,g);return g}b.prototype=na.prototype;Object.defineProperty(b.prototype,\"constructor\",{writable:!0,configurable:!0,enumerable:!1,value:b});return b}()};function Z(a,b,c){function f(d){return function(e){for(var g=[],h=0;h<arguments.length;++h)g[h]=arguments[h];h=[];for(var k=[],l=0;l<g.length;l++){var m=g[l];m instanceof Element&&I(m)&&k.push(m);if(m instanceof DocumentFragment)for(m=m.firstChild;m;m=m.nextSibling)h.push(m);else h.push(m)}d.apply(this,g);for(g=0;g<k.length;g++)Y(a,k[g]);if(I(this))for(g=0;g<h.length;g++)k=h[g],k instanceof Element&&X(a,k)}}void 0!==c.prepend&&M(b,\"prepend\",f(c.prepend));void 0!==c.append&&M(b,\"append\",f(c.append))}\n  ;function Fa(a){M(Document.prototype,\"createElement\",function(b){return Ca(a,this,b,null)});M(Document.prototype,\"importNode\",function(b,c){b=aa.call(this,b,!!c);this.__CE_registry?N(a,b):V(a,b);return b});M(Document.prototype,\"createElementNS\",function(b,c){return Ca(a,this,c,b)});Z(a,Document.prototype,{prepend:ba,append:ca})};function Ga(a){function b(c,f){Object.defineProperty(c,\"textContent\",{enumerable:f.enumerable,configurable:!0,get:f.get,set:function(d){if(this.nodeType===Node.TEXT_NODE)f.set.call(this,d);else{var e=void 0;if(this.firstChild){var g=this.childNodes,h=g.length;if(0<h&&I(this)){e=Array(h);for(var k=0;k<h;k++)e[k]=g[k]}}f.set.call(this,d);if(e)for(d=0;d<e.length;d++)Y(a,e[d])}}})}M(Node.prototype,\"insertBefore\",function(c,f){if(c instanceof DocumentFragment){var d=J(c);c=t.call(this,c,f);if(I(this))for(f=\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        0;f<d.length;f++)X(a,d[f]);return c}d=c instanceof Element&&I(c);f=t.call(this,c,f);d&&Y(a,c);I(this)&&X(a,c);return f});M(Node.prototype,\"appendChild\",function(c){if(c instanceof DocumentFragment){var f=J(c);c=r.call(this,c);if(I(this))for(var d=0;d<f.length;d++)X(a,f[d]);return c}f=c instanceof Element&&I(c);d=r.call(this,c);f&&Y(a,c);I(this)&&X(a,c);return d});M(Node.prototype,\"cloneNode\",function(c){c=q.call(this,!!c);this.ownerDocument.__CE_registry?N(a,c):V(a,c);return c});M(Node.prototype,\n    \"removeChild\",function(c){var f=c instanceof Element&&I(c),d=u.call(this,c);f&&Y(a,c);return d});M(Node.prototype,\"replaceChild\",function(c,f){if(c instanceof DocumentFragment){var d=J(c);c=v.call(this,c,f);if(I(this))for(Y(a,f),f=0;f<d.length;f++)X(a,d[f]);return c}d=c instanceof Element&&I(c);var e=v.call(this,c,f),g=I(this);g&&Y(a,f);d&&Y(a,c);g&&X(a,c);return e});x&&x.get?b(Node.prototype,x):Aa(a,function(c){b(c,{enumerable:!0,configurable:!0,get:function(){for(var f=[],d=this.firstChild;d;d=\n      d.nextSibling)d.nodeType!==Node.COMMENT_NODE&&f.push(d.textContent);return f.join(\"\")},set:function(f){for(;this.firstChild;)u.call(this,this.firstChild);null!=f&&\"\"!==f&&r.call(this,document.createTextNode(f))}})})};function Ha(a){function b(f){return function(d){for(var e=[],g=0;g<arguments.length;++g)e[g]=arguments[g];g=[];for(var h=[],k=0;k<e.length;k++){var l=e[k];l instanceof Element&&I(l)&&h.push(l);if(l instanceof DocumentFragment)for(l=l.firstChild;l;l=l.nextSibling)g.push(l);else g.push(l)}f.apply(this,e);for(e=0;e<h.length;e++)Y(a,h[e]);if(I(this))for(e=0;e<g.length;e++)h=g[e],h instanceof Element&&X(a,h)}}var c=Element.prototype;void 0!==ja&&M(c,\"before\",b(ja));void 0!==ka&&M(c,\"after\",b(ka));void 0!==\n  la&&M(c,\"replaceWith\",function(f){for(var d=[],e=0;e<arguments.length;++e)d[e]=arguments[e];e=[];for(var g=[],h=0;h<d.length;h++){var k=d[h];k instanceof Element&&I(k)&&g.push(k);if(k instanceof DocumentFragment)for(k=k.firstChild;k;k=k.nextSibling)e.push(k);else e.push(k)}h=I(this);la.apply(this,d);for(d=0;d<g.length;d++)Y(a,g[d]);if(h)for(Y(a,this),d=0;d<e.length;d++)g=e[d],g instanceof Element&&X(a,g)});void 0!==ma&&M(c,\"remove\",function(){var f=I(this);ma.call(this);f&&Y(a,this)})};function Ia(a){function b(d,e){Object.defineProperty(d,\"innerHTML\",{enumerable:e.enumerable,configurable:!0,get:e.get,set:function(g){var h=this,k=void 0;I(this)&&(k=[],U(a,this,function(w){w!==h&&k.push(w)}));e.set.call(this,g);if(k)for(var l=0;l<k.length;l++){var m=k[l];1===m.__CE_state&&a.disconnectedCallback(m)}this.ownerDocument.__CE_registry?N(a,this):V(a,this);return g}})}function c(d,e){M(d,\"insertAdjacentElement\",function(g,h){var k=I(h);g=e.call(this,g,h);k&&Y(a,h);I(g)&&X(a,h);return g})}\n    function f(d,e){function g(h,k){for(var l=[];h!==k;h=h.nextSibling)l.push(h);for(k=0;k<l.length;k++)N(a,l[k])}M(d,\"insertAdjacentHTML\",function(h,k){h=h.toLowerCase();if(\"beforebegin\"===h){var l=this.previousSibling;e.call(this,h,k);g(l||this.parentNode.firstChild,this)}else if(\"afterbegin\"===h)l=this.firstChild,e.call(this,h,k),g(this.firstChild,l);else if(\"beforeend\"===h)l=this.lastChild,e.call(this,h,k),g(l||this.firstChild,null);else if(\"afterend\"===h)l=this.nextSibling,e.call(this,h,k),g(this.nextSibling,\n      l);else throw new SyntaxError(\"The value provided (\"+String(h)+\") is not one of 'beforebegin', 'afterbegin', 'beforeend', or 'afterend'.\");})}y&&M(Element.prototype,\"attachShadow\",function(d){d=y.call(this,d);if(a.a&&!d.__CE_patched){d.__CE_patched=!0;for(var e=0;e<a.b.length;e++)a.b[e](d)}return this.__CE_shadowRoot=d});z&&z.get?b(Element.prototype,z):H&&H.get?b(HTMLElement.prototype,H):Ba(a,function(d){b(d,{enumerable:!0,configurable:!0,get:function(){return q.call(this,!0).innerHTML},set:function(e){var g=\n        \"template\"===this.localName,h=g?this.content:this,k=p.call(document,this.namespaceURI,this.localName);for(k.innerHTML=e;0<h.childNodes.length;)u.call(h,h.childNodes[0]);for(e=g?k.content:k;0<e.childNodes.length;)r.call(h,e.childNodes[0])}})});M(Element.prototype,\"setAttribute\",function(d,e){if(1!==this.__CE_state)return B.call(this,d,e);var g=A.call(this,d);B.call(this,d,e);e=A.call(this,d);a.attributeChangedCallback(this,d,g,e,null)});M(Element.prototype,\"setAttributeNS\",function(d,e,g){if(1!==this.__CE_state)return E.call(this,\n      d,e,g);var h=D.call(this,d,e);E.call(this,d,e,g);g=D.call(this,d,e);a.attributeChangedCallback(this,e,h,g,d)});M(Element.prototype,\"removeAttribute\",function(d){if(1!==this.__CE_state)return C.call(this,d);var e=A.call(this,d);C.call(this,d);null!==e&&a.attributeChangedCallback(this,d,e,null,null)});M(Element.prototype,\"removeAttributeNS\",function(d,e){if(1!==this.__CE_state)return F.call(this,d,e);var g=D.call(this,d,e);F.call(this,d,e);var h=D.call(this,d,e);g!==h&&a.attributeChangedCallback(this,\n      e,g,h,d)});oa?c(HTMLElement.prototype,oa):G&&c(Element.prototype,G);pa?f(HTMLElement.prototype,pa):fa&&f(Element.prototype,fa);Z(a,Element.prototype,{prepend:ha,append:ia});Ha(a)};var T=window.customElements;function Ja(){var a=new S;Ea(a);Fa(a);Z(a,DocumentFragment.prototype,{prepend:da,append:ea});Ga(a);Ia(a);a=new O(a);document.__CE_registry=a;Object.defineProperty(window,\"customElements\",{configurable:!0,enumerable:!0,value:a})}T&&!T.forcePolyfill&&\"function\"==typeof T.define&&\"function\"==typeof T.get||Ja();window.__CE_installPolyfill=Ja;\n}).call(self);\n\n//# sourceMappingURL=custom-elements.min.js.map\n","/**\n * @license\n * Copyright (c) 2016 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n */\n\n/**\n * This shim allows elements written in, or compiled to, ES5 to work on native\n * implementations of Custom Elements v1. It sets new.target to the value of\n * this.constructor so that the native HTMLElement constructor can access the\n * current under-construction element's definition.\n */\n(function() {\n  if (\n    // No Reflect, no classes, no need for shim because native custom elements\n  // require ES2015 classes or Reflect.\n    window.Reflect === undefined ||\n    window.customElements === undefined ||\n    // The webcomponentsjs custom elements polyfill doesn't require\n    // ES2015-compatible construction (`super()` or `Reflect.construct`).\n    window.customElements.polyfillWrapFlushCallback\n  ) {\n    return;\n  }\n  const BuiltInHTMLElement = HTMLElement;\n  /**\n   * With jscompiler's RECOMMENDED_FLAGS the function name will be optimized away.\n   * However, if we declare the function as a property on an object literal, and\n   * use quotes for the property name, then closure will leave that much intact,\n   * which is enough for the JS VM to correctly set Function.prototype.name.\n   */\n  const wrapperForTheName = {\n    'HTMLElement': /** @this {!Object} */ function HTMLElement() {\n      return Reflect.construct(\n        BuiltInHTMLElement, [], /** @type {!Function} */ (this.constructor));\n    }\n  };\n  window.HTMLElement = wrapperForTheName['HTMLElement'];\n  HTMLElement.prototype = BuiltInHTMLElement.prototype;\n  HTMLElement.prototype.constructor = HTMLElement;\n  Object.setPrototypeOf(HTMLElement, BuiltInHTMLElement);\n})();\n","/**\n * @author fuyuhao@bytedance.com\n */\n\n export const DEFAULT_FPS = 30\n\n export function  validateFPS(fps){\n  if(fps < 20 || fps > 80){\n    return false\n  }\n  return true\n}\nexport default class Ticker {\n  constructor (options) {\n    this.options = Object.assign({}, options || {})\n    if(!this.options.interval || !validateFPS(1000 / this.options.interval)){\n      this.options.interval = 1000 / 30;\n    }\n    this.callbacks = []\n  }\n\n  start (...callbacks) {\n    this.callbacks = callbacks\n  }\n\n  onTick () {\n    for (let i = 0, len = this.callbacks.length; i < len; i++) {\n      const callback = this.callbacks[i]\n      callback()\n    }\n  }\n\n  setInterval (interval) {\n    if(!validateFPS(1000 / interval)){\n      interval = 1000 / 30\n    }\n    this.options.interval = interval\n    return this;\n  }\n}\n\n/**\n * ticker use requestAnimationFrame\n */\nexport class RafTicker extends Ticker {\n  constructor (props) {\n    super(props);\n    this.prev = null;\n    this.timerId = null\n    this._subTimerId = null\n\n    this._tickFunc = RafTicker.getTickFunc()\n    this.tick = this.tick.bind(this)\n  }\n\n  start (...callbacks) {\n    super.start(...callbacks)\n    this.tick()\n  }\n\n  tick () {\n    this.nextTick();\n    this.onTick()\n  }\n\n  nextTick () {\n    const { _tickFunc } = this;\n    this.timerId = _tickFunc(this.tick)\n  }\n\n  stop () {\n    if (this.timerId) {\n      const cancelFunc = RafTicker.getCancelFunc()\n\n      cancelFunc(this.timerId)\n    }\n  }\n\n  resume () {\n    this.nextTick();\n  }\n\n  static getTickFunc () {\n    return window.requestAnimationFrame || window.webkitRequestAnimationFrame\n  }\n\n  static getCancelFunc () {\n    return window.cancelAnimationFrame || window.webkitCancelAnimationFrame\n  }\n\n  static isSupported () {\n    return RafTicker.getTickFunc() !== undefined\n  }\n}\n\n/**\n * use setTimeout for browsers without raf support\n */\nexport class TimeoutTicker extends Ticker {\n  constructor (config) {\n    super(config)\n    this.timeoutId = null\n  }\n\n  start (...callbacks) {\n    super.start(...callbacks)\n    this.tick()\n  }\n\n  tick () {\n    this.nextTick();\n    this.onTick()\n  }\n\n  nextTick () {\n    this.timeoutId = window.setTimeout(() => {\n      this.stop();\n      this.tick();\n    }, this.options.interval)\n  }\n\n  stop () {\n    if (this.timeoutId) {\n      window.clearTimeout(this.timeoutId)\n    }\n  }\n}\n\n/**\n * 返回Ticker构造函数\n * @returns {Ticker}\n * 使用TimeoutTicker 1.可控制间隔 2.防止页面切换降频\n */\nexport const getTicker = () => {\n  if (RafTicker.isSupported()) {\n    return RafTicker\n  } else {\n    return TimeoutTicker\n  }\n}\n","var TARGET = typeof Symbol === 'undefined' ? '__target' : Symbol(),\n    SCRIPT_TYPE = 'application/javascript',\n    BlobBuilder = window.BlobBuilder || window.WebKitBlobBuilder || window.MozBlobBuilder || window.MSBlobBuilder,\n    URL = window.URL || window.webkitURL,\n    Worker = window.Worker;\n\n/**\n * Returns a wrapper around Web Worker code that is constructible.\n *\n * @function shimWorker\n *\n * @param { String }    filename    The name of the file\n * @param { Function }  fn          Function wrapping the code of the worker\n */\nexport default function shimWorker (filename, fn) {\n    return function ShimWorker (forceFallback) {\n        var o = this;\n\n        if (!fn) {\n            return new Worker(filename);\n        }\n        else if (Worker && !forceFallback) {\n            // Convert the function's inner code to a string to construct the worker\n            var source = `${ fn }`.replace(/^function.+?{/, '').slice(0, -1),\n                objURL = createSourceObject(source);\n\n            this[TARGET] = new Worker(objURL);\n            URL.revokeObjectURL(objURL);\n            return this[TARGET];\n        }\n        else {\n            var selfShim = {\n                    postMessage: m => {\n                        if (o.onmessage) {\n                            setTimeout(() => o.onmessage({ data: m, target: selfShim }));\n                        }\n                    }\n                };\n\n            fn.call(selfShim);\n            this.postMessage = m => {\n                setTimeout(() => selfShim.onmessage({ data: m, target: o }));\n            };\n            this.isThisThread = true;\n        }\n    };\n};\n\n// Test Worker capabilities\nif (Worker) {\n    var testWorker,\n        objURL = createSourceObject('self.onmessage = function () {}'),\n        testArray = new Uint8Array(1);\n\n    try {\n        // No workers via blobs in Edge 12 and IE 11 and lower :(\n        if (/(?:Trident|Edge)\\/(?:[567]|12)/i.test(navigator.userAgent)) {\n            throw new Error('Not available');\n        }\n        testWorker = new Worker(objURL);\n\n        // Native browser on some Samsung devices throws for transferables, let's detect it\n        testWorker.postMessage(testArray, [testArray.buffer]);\n    }\n    catch (e) {\n        Worker = null;\n    }\n    finally {\n        URL.revokeObjectURL(objURL);\n        if (testWorker) {\n            testWorker.terminate();\n        }\n    }\n}\n\nfunction createSourceObject(str) {\n    try {\n        return URL.createObjectURL(new Blob([str], { type: SCRIPT_TYPE }));\n    }\n    catch (e) {\n        var blob = new BlobBuilder();\n        blob.append(str);\n        return URL.createObjectURL(blob.getBlob(type));\n    }\n}\n","import shimWorker from 'rollup-plugin-bundle-worker';\nexport default new shimWorker(\"./worker.js\", function (window, document) {\nvar self = this;\nfunction shimImportScripts(src) {\n  return new Promise(function (resolve, reject) {\n    var s;\n    s = _shimWorkerDocument.createElement('script');\n    s.src = src;\n    s.onload = resolve;\n    s.onerror = reject;\n    _shimWorkerDocument.head.appendChild(s);\n  });\n}\n\nconst MAX_STREAM_BUFFER_LENGTH = 1024 * 1024;\nvar Decoder = function (self) {\n  this.inited = false;\n  this.self = self;\n  this.meta = this.self.meta;\n  this.infolist = {};\n  if (self.importScripts) {\n    self.par_broadwayOnBroadwayInited = this.broadwayOnBroadwayInited.bind(this);\n    self.par_broadwayOnPictureDecoded = this.broadwayOnPictureDecoded.bind(this);\n  } else {\n    _shimWorkerWindow.par_broadwayOnBroadwayInited = this.broadwayOnBroadwayInited.bind(this);\n    _shimWorkerWindow.par_broadwayOnPictureDecoded = this.broadwayOnPictureDecoded.bind(this);\n  }\n\n}\n\nDecoder.prototype.toU8Array = function (ptr, length) {\n  return Module.HEAPU8.subarray(ptr, ptr + length);\n}\n\nDecoder.prototype.init = function () {\n  Module._broadwayInit();\n  this.streamBuffer = this.toU8Array(Module._broadwayCreateStream(MAX_STREAM_BUFFER_LENGTH), MAX_STREAM_BUFFER_LENGTH);\n}\n\nDecoder.prototype.broadwayOnPictureDecoded = function (offset, width, height, yLinesize, uvLinesize, infoid) {\n  let info = Object.assign({}, this.infolist[infoid]);\n  let yRowcount = height;\n  let uvRowcount = height / 2;\n  if (this.meta && (this.meta.chromaFormat === 444 || this.meta.chromaFormat === 422)) {\n    uvRowcount = height;\n  }\n  let data = this.toU8Array(offset, (yLinesize * yRowcount) + 2 * (uvLinesize * uvRowcount));\n  this.infolist[infoid] = null;\n  let datetemp = new Uint8Array(data.length);\n  datetemp.set(data);\n  let buffer = datetemp.buffer;\n  if (info) {\n    this.self.postMessage({\n      msg: 'LOG',\n      log: `sample ${info.dts} decoded startAt${info.decodeTime} cost: ${ Date.now() - info.decodeTime}`\n    })\n  }\n\n  this.self.postMessage({\n    msg: 'DECODED',\n    width,\n    height,\n    yLinesize,\n    uvLinesize,\n    info,\n    buffer\n  }, [buffer]);\n}\n\nDecoder.prototype.broadwayOnBroadwayInited = function () {\n  this.inited = true;\n  this.self.postMessage({\n    msg: 'LOG',\n    log: 'decoder inited'\n  })\n  this.self.postMessage({msg: 'DECODER_READY'});\n}\n\nDecoder.prototype.decode = function (data, info) {\n  let time = parseInt(new Date().getTime());\n  let infoid = time - (Math.floor(time / 10e8) * 10e8);\n  this.infolist[infoid] = info;\n  this.streamBuffer.set(data);\n  if (info) {\n    // self.postMessage({\n    //   msg: 'LOG',\n    //   log: 'decode sample ' + info.dts + ' cost ' + Date.now()\n    // })\n  }\n  Module._broadwayPlayStream(data.length, infoid);\n}\n\nDecoder.prototype.destroy = function () {\n  Module._broadwayExit();\n}\n\nDecoder.prototype.updateMeta = function(meta){\n  this.meta = meta\n}\n\nvar decoder;\n\nfunction onPostRun () {\n  self.postMessage({\n    msg: 'LOG',\n    log: 'do post run'\n  })\n  decoder = new Decoder(this);\n  decoder.init();\n}\n\nfunction init (meta) {\n  if (!decoder) {\n    if (!self.importScripts) {\n      shimImportScripts('https://sf1-vcloudcdn.pstatp.com/obj/media-fe/decoder/h264/decoder_1583333072685.js').then(() => {\n        console.log(Module)\n        console.log(addOnPostRun)\n        addOnPostRun(onPostRun.bind(self));\n      })\n    } else {\n      self.postMessage({\n        msg: 'LOG',\n        log: 'do import script '\n      })\n      try {\n        self.importScripts('https://sf1-vcloudcdn.pstatp.com/obj/media-fe/decoder/h264/decoder_worker_1583333072685.js');\n      } catch (e) {\n        self.postMessage({\n          msg: 'LOG',\n          log: 'import script error' + e.message\n        })\n      }\n      addOnPostRun(onPostRun.bind(self));\n      self.postMessage({\n        msg: 'LOG',\n        log: 'import script done' + Module.toString()\n      })\n      setTimeout(() => {\n        if (!decoder) {\n          onPostRun.call(this);\n        }\n      }, 5000)\n    }\n  }\n}\n\nself.onmessage = function (e) {\n  var data = e.data;\n  if (!data.msg) {\n    self.postMessage({\n      msg: 'ERROR:invalid message'\n    })\n  } else {\n    switch (data.msg) {\n      case 'init':\n        self.meta = data.meta;\n        self.postMessage({\n          msg: 'LOG',\n          log: 'worker inited'\n        })\n        init()\n        break;\n      case 'updatemeta':\n        self.meta = data.meta;\n        decoder.updateMeta(data.meta)\n        break;\n      case 'decode':\n        decoder.decode(data.data, data.info);\n        break;\n      case 'destory':\n        decoder.destroy();\n        break\n      default:\n        break;\n    }\n  }\n}\n\n\n});","import shimWorker from 'rollup-plugin-bundle-worker';\nexport default new shimWorker(\"./backupWorker.js\", function (window, document) {\nvar self = this;\nfunction shimImportScripts(src) {\n  return new Promise(function (resolve, reject) {\n    var s;\n    s = _shimWorkerDocument.createElement('script');\n    s.src = src;\n    s.onload = resolve;\n    s.onerror = reject;\n    _shimWorkerDocument.head.appendChild(s);\n  });\n}\n\nconst MAX_STREAM_BUFFER_LENGTH = 1024 * 1024;\nvar Decoder = function (self) {\n  this.inited = false;\n  this.self = self;\n  this.meta = this.self.meta;\n  this.infolist = {};\n  if (self.importScripts) {\n    self.par_broadwayOnBroadwayInited = this.broadwayOnBroadwayInited.bind(this);\n    self.par_broadwayOnPictureDecoded = this.broadwayOnPictureDecoded.bind(this);\n  } else {\n    _shimWorkerWindow.par_broadwayOnBroadwayInited = this.broadwayOnBroadwayInited.bind(this);\n    _shimWorkerWindow.par_broadwayOnPictureDecoded = this.broadwayOnPictureDecoded.bind(this);\n  }\n\n}\n\nDecoder.prototype.toU8Array = function (ptr, length) {\n  return Module.HEAPU8.subarray(ptr, ptr + length);\n}\n\nDecoder.prototype.init = function () {\n  Module._broadwayInit();\n  this.streamBuffer = this.toU8Array(Module._broadwayCreateStream(MAX_STREAM_BUFFER_LENGTH), MAX_STREAM_BUFFER_LENGTH);\n}\n\nDecoder.prototype.broadwayOnPictureDecoded = function (offset, width, height, yLinesize, uvLinesize, infoid) {\n  let info = Object.assign({}, this.infolist[infoid]);\n  let yRowcount = height;\n  let uvRowcount = height / 2;\n  if (!uvLinesize) {\n    uvLinesize = yLinesize / 2;\n  }\n  if (this.meta && (this.meta.chromaFormat === 444 || this.meta.chromaFormat === 422)) {\n    uvRowcount = height;\n  }\n  let data = this.toU8Array(offset, (yLinesize * yRowcount) + 2 * (uvLinesize * uvRowcount));\n  this.infolist[infoid] = null;\n  let datetemp = new Uint8Array(data.length);\n  datetemp.set(data);\n  let buffer = datetemp.buffer;\n  if (info) {\n    this.self.postMessage({\n      msg: 'LOG',\n      log: `sample ${info.dts} decoded startAt${info.decodeTime} cost: ${ Date.now() - info.decodeTime}`\n    })\n  }\n\n  this.self.postMessage({\n    msg: 'DECODED',\n    width,\n    height,\n    yLinesize,\n    uvLinesize,\n    info,\n    buffer\n  }, [buffer]);\n}\n\nDecoder.prototype.broadwayOnBroadwayInited = function () {\n  this.inited = true;\n  this.self.postMessage({\n    msg: 'LOG',\n    log: 'decoder inited'\n  })\n  this.self.postMessage({msg: 'DECODER_READY'});\n}\n\nDecoder.prototype.decode = function (data, info) {\n  let time = parseInt(new Date().getTime());\n  let infoid = time - (Math.floor(time / 10e8) * 10e8);\n  this.infolist[infoid] = info;\n  this.streamBuffer.set(data);\n  Module._broadwayPlayStream(data.length, infoid);\n}\n\nDecoder.prototype.destroy = function () {\n  Module._broadwayExit();\n}\n\nDecoder.prototype.updateMeta = function(meta){\n  this.meta = meta\n}\n\nvar decoder;\n\nfunction onPostRun () {\n  decoder = new Decoder(this);\n  decoder.init();\n  self.postMessage({\n    msg: 'LOG',\n    log: 'decoder inited'\n  })\n  decoder.broadwayOnBroadwayInited();\n}\n\nfunction init (meta) {\n  if (!decoder) {\n    if (!self.importScripts) {\n      shimImportScripts('https://sf1-vcloudcdn.pstatp.com/obj/media-fe/decoder/h264/decoder_asm_1589261792455.js').then(() => {\n        self.postMessage({\n          msg: 'LOG',\n          log: Module\n        })\n        onPostRun.call(self)\n      })\n    } else {\n      self.importScripts('https://sf1-vcloudcdn.pstatp.com/obj/media-fe/decoder/h264/decoder_asm_1589261792455.js');\n      self.postMessage({\n        msg: 'LOG',\n        log: Module.toString()\n      })\n      onPostRun.call(self)\n    }\n  }\n}\n\nself.onmessage = function (e) {\n  var data = e.data;\n  if (!data.msg) {\n    self.postMessage({\n      msg: 'ERROR:invalid message'\n    })\n  } else {\n    switch (data.msg) {\n      case 'init':\n        self.meta = data.meta;\n        self.postMessage({\n          msg: 'LOG',\n          log: 'worker inited'\n        })\n        init()\n        break;\n      case 'updatemeta':\n        self.meta = data.meta;\n        decoder.updateMeta(data.meta)\n        break;\n      case 'decode':\n        decoder.decode(data.data, data.info);\n        break;\n      case 'destory':\n        decoder.destroy();\n        break\n      default:\n        break;\n    }\n  }\n}\n\n\n});","class YUVCanvas {\n  constructor (configs) {\n    this.configs = Object.assign({}, configs);\n    this.canvas = this.configs.canvas;\n    this.meta = Object.assign({}, this.configs.meta);\n    this._initMeta()\n    // this.canvas.style.width = configs.style.width;\n    // this.canvas.style.height = configs.style.height;\n    this._initContextGL();\n    if (this.contextGL) {\n      this._initProgram();\n      this._initBuffers();\n      this._initTextures();\n    };\n  }\n\n  _initMeta(){\n    this.chroma = this.meta.chromaFormat;\n    this.height = this.meta.presentHeight;\n    this.width = this.meta.presentWidth;\n    this.canvas.width = this.meta.presentWidth;\n    this.canvas.height = this.meta.presentHeight;\n  }\n\n  _initContextGL () {\n    var canvas = this.canvas;\n    var gl = null;\n\n    var validContextNames = ['webgl', 'experimental-webgl', 'moz-webgl', 'webkit-3d'];\n    var nameIndex = 0;\n\n    while (!gl && nameIndex < validContextNames.length) {\n      var contextName = validContextNames[nameIndex];\n\n      try {\n        if (this.contextOptions) {\n          gl = canvas.getContext(contextName, this.contextOptions);\n        } else {\n          gl = canvas.getContext(contextName);\n        };\n      } catch (e) {\n        gl = null;\n      }\n\n      if (!gl || typeof gl.getParameter !== 'function') {\n        gl = null;\n      }\n\n      ++nameIndex;\n    };\n\n    this.contextGL = gl;\n  };\n\n  _initProgram () {\n    var gl = this.contextGL;\n\n    // vertex shader is the same for all types\n    var vertexShaderScript;\n    var fragmentShaderScript;\n    vertexShaderScript = [\n      'attribute vec4 vertexPos;',\n      'attribute vec4 texturePos;',\n      'attribute vec4 uTexturePos;',\n      'attribute vec4 vTexturePos;',\n      'varying vec2 textureCoord;',\n      'varying vec2 uTextureCoord;',\n      'varying vec2 vTextureCoord;',\n\n      'void main()',\n      '{',\n      '  gl_Position = vertexPos;',\n      '  textureCoord = texturePos.xy;',\n      '  uTextureCoord = uTexturePos.xy;',\n      '  vTextureCoord = vTexturePos.xy;',\n      '}'\n    ].join('\\n');\n\n    fragmentShaderScript = [\n      'precision highp float;',\n      'varying highp vec2 textureCoord;',\n      'varying highp vec2 uTextureCoord;',\n      'varying highp vec2 vTextureCoord;',\n      'uniform sampler2D ySampler;',\n      'uniform sampler2D uSampler;',\n      'uniform sampler2D vSampler;',\n      'uniform mat4 YUV2RGB;',\n\n      'void main(void) {',\n      '  highp float y = texture2D(ySampler,  textureCoord).r;',\n      '  highp float u = texture2D(uSampler,  uTextureCoord).r;',\n      '  highp float v = texture2D(vSampler,  vTextureCoord).r;',\n      '  gl_FragColor = vec4(y, u, v, 1) * YUV2RGB;',\n      '}'\n    ].join('\\n');\n\n    var YUV2RGB = [\n      1.16438, 0.00000, 1.59603, -0.87079,\n      1.16438, -0.39176, -0.81297, 0.52959,\n      1.16438, 2.01723, 0.00000, -1.08139,\n      0, 0, 0, 1\n    ];\n    var vertexShader = gl.createShader(gl.VERTEX_SHADER);\n    gl.shaderSource(vertexShader, vertexShaderScript);\n    gl.compileShader(vertexShader);\n    if (!gl.getShaderParameter(vertexShader, gl.COMPILE_STATUS)) {\n      console.log('Vertex shader failed to compile: ' + gl.getShaderInfoLog(vertexShader));\n    }\n\n    var fragmentShader = gl.createShader(gl.FRAGMENT_SHADER);\n    gl.shaderSource(fragmentShader, fragmentShaderScript);\n    gl.compileShader(fragmentShader);\n    if (!gl.getShaderParameter(fragmentShader, gl.COMPILE_STATUS)) {\n      console.log('Fragment shader failed to compile: ' + gl.getShaderInfoLog(fragmentShader));\n    }\n\n    var program = gl.createProgram();\n    gl.attachShader(program, vertexShader);\n    gl.attachShader(program, fragmentShader);\n    gl.linkProgram(program);\n    if (!gl.getProgramParameter(program, gl.LINK_STATUS)) {\n      console.log('Program failed to compile: ' + gl.getProgramInfoLog(program));\n    }\n\n    gl.useProgram(program);\n\n    var YUV2RGBRef = gl.getUniformLocation(program, 'YUV2RGB');\n    gl.uniformMatrix4fv(YUV2RGBRef, false, YUV2RGB);\n\n    this.shaderProgram = program;\n  }\n\n  _initBuffers () {\n    var gl = this.contextGL;\n    var program = this.shaderProgram;\n\n    var vertexPosBuffer = gl.createBuffer();\n    gl.bindBuffer(gl.ARRAY_BUFFER, vertexPosBuffer);\n    gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([1, 1, -1, 1, 1, -1, -1, -1]), gl.STATIC_DRAW);\n\n    var vertexPosRef = gl.getAttribLocation(program, 'vertexPos');\n    gl.enableVertexAttribArray(vertexPosRef);\n    gl.vertexAttribPointer(vertexPosRef, 2, gl.FLOAT, false, 0, 0);\n\n    var texturePosBuffer = gl.createBuffer();\n    gl.bindBuffer(gl.ARRAY_BUFFER, texturePosBuffer);\n    gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([1, 0, 0, 0, 1, 1, 0, 1]), gl.STATIC_DRAW);\n\n    var texturePosRef = gl.getAttribLocation(program, 'texturePos');\n    gl.enableVertexAttribArray(texturePosRef);\n    gl.vertexAttribPointer(texturePosRef, 2, gl.FLOAT, false, 0, 0);\n\n    this.texturePosBuffer = texturePosBuffer;\n\n    var uTexturePosBuffer = gl.createBuffer();\n    gl.bindBuffer(gl.ARRAY_BUFFER, uTexturePosBuffer);\n    gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([1, 0, 0, 0, 1, 1, 0, 1]), gl.STATIC_DRAW);\n\n    var uTexturePosRef = gl.getAttribLocation(program, 'uTexturePos');\n    gl.enableVertexAttribArray(uTexturePosRef);\n    gl.vertexAttribPointer(uTexturePosRef, 2, gl.FLOAT, false, 0, 0);\n\n    this.uTexturePosBuffer = uTexturePosBuffer;\n\n    var vTexturePosBuffer = gl.createBuffer();\n    gl.bindBuffer(gl.ARRAY_BUFFER, vTexturePosBuffer);\n    gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([1, 0, 0, 0, 1, 1, 0, 1]), gl.STATIC_DRAW);\n\n    var vTexturePosRef = gl.getAttribLocation(program, 'vTexturePos');\n    gl.enableVertexAttribArray(vTexturePosRef);\n    gl.vertexAttribPointer(vTexturePosRef, 2, gl.FLOAT, false, 0, 0);\n\n    this.vTexturePosBuffer = vTexturePosBuffer;\n  };\n\n  _initTextures () {\n    var gl = this.contextGL;\n    var program = this.shaderProgram;\n    var yTextureRef = this._initTexture();\n    var ySamplerRef = gl.getUniformLocation(program, 'ySampler');\n    gl.uniform1i(ySamplerRef, 0);\n    this.yTextureRef = yTextureRef;\n\n    var uTextureRef = this._initTexture();\n    var uSamplerRef = gl.getUniformLocation(program, 'uSampler');\n    gl.uniform1i(uSamplerRef, 1);\n    this.uTextureRef = uTextureRef;\n\n    var vTextureRef = this._initTexture();\n    var vSamplerRef = gl.getUniformLocation(program, 'vSampler');\n    gl.uniform1i(vSamplerRef, 2);\n    this.vTextureRef = vTextureRef;\n  }\n\n  _initTexture () {\n    var gl = this.contextGL;\n\n    var textureRef = gl.createTexture();\n    gl.bindTexture(gl.TEXTURE_2D, textureRef);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n    gl.bindTexture(gl.TEXTURE_2D, null);\n\n    return textureRef;\n  }\n\n  _drawPictureGL (data, width, height, yLinesize, uvLinesize) {\n    var ylen = yLinesize * height;\n    var uvlen = uvLinesize * height / 2;\n    if (this.chroma === 444 || this.chroma === 422) {\n      uvlen *= 2;\n    }\n    data = new Uint8Array(data);\n    let renderData = {\n      yData: data.subarray(0, ylen),\n      uData: data.subarray(ylen, ylen + uvlen),\n      vData: data.subarray(ylen + uvlen, ylen + uvlen + uvlen)\n    }\n    this._drawPictureGL420(renderData, width, height, yLinesize, uvLinesize);\n  }\n\n  _drawPictureGL420 (data, width, height, yLinesize, uvLinesize) {\n    var gl = this.contextGL;\n    var texturePosBuffer = this.texturePosBuffer;\n    var uTexturePosBuffer = this.uTexturePosBuffer;\n    var vTexturePosBuffer = this.vTexturePosBuffer;\n\n    var yTextureRef = this.yTextureRef;\n    var uTextureRef = this.uTextureRef;\n    var vTextureRef = this.vTextureRef;\n\n    var yData = data.yData;\n    var uData = data.uData;\n    var vData = data.vData;\n\n    var yDataPerRow = yLinesize;\n    var yRowCnt = height;\n\n    var uDataPerRow = uvLinesize;\n    var uRowCnt = height / 2;\n\n    if (this.chroma === 422 || this.chroma === 444) {\n      uRowCnt = height;\n    }\n\n    var vDataPerRow = uvLinesize;\n    var vRowCnt = uRowCnt;\n\n    let ratiow = this.canvas.width / this.width;\n    let ratioh = this.canvas.height / this.height;\n    let left = 0;\n    let top = 0;\n    let w = this.canvas.width;\n    let h = this.canvas.height;\n    if (ratiow < ratioh) {\n      h = (this.height * this.canvas.width / this.width);\n      top = parseInt((this.canvas.height - (this.height * this.canvas.width / this.width)) / 2);\n    } else {\n      w = (this.width * this.canvas.height / this.height);\n      left = parseInt((this.canvas.width - (this.width * this.canvas.height / this.height)) / 2);\n    }\n    gl.viewport(left, top, w, h);\n\n    var texturePosValues = new Float32Array([1, 0, 0, 0, 1, 1, 0, 1]);\n    gl.bindBuffer(gl.ARRAY_BUFFER, texturePosBuffer);\n    gl.bufferData(gl.ARRAY_BUFFER, texturePosValues, gl.DYNAMIC_DRAW);\n\n    var uTexturePosValues = new Float32Array([1, 0, 0, 0, 1, 1, 0, 1]);\n    gl.bindBuffer(gl.ARRAY_BUFFER, uTexturePosBuffer);\n    gl.bufferData(gl.ARRAY_BUFFER, uTexturePosValues, gl.DYNAMIC_DRAW);\n\n    var vTexturePosValues = new Float32Array([1, 0, 0, 0, 1, 1, 0, 1]);\n    gl.bindBuffer(gl.ARRAY_BUFFER, vTexturePosBuffer);\n    gl.bufferData(gl.ARRAY_BUFFER, vTexturePosValues, gl.DYNAMIC_DRAW);\n\n    gl.activeTexture(gl.TEXTURE0);\n    gl.bindTexture(gl.TEXTURE_2D, yTextureRef);\n    gl.texImage2D(gl.TEXTURE_2D, 0, gl.LUMINANCE, yDataPerRow, yRowCnt, 0, gl.LUMINANCE, gl.UNSIGNED_BYTE, yData);\n\n    gl.activeTexture(gl.TEXTURE1);\n    gl.bindTexture(gl.TEXTURE_2D, uTextureRef);\n    gl.texImage2D(gl.TEXTURE_2D, 0, gl.LUMINANCE, uDataPerRow, uRowCnt, 0, gl.LUMINANCE, gl.UNSIGNED_BYTE, uData);\n\n    gl.activeTexture(gl.TEXTURE2);\n    gl.bindTexture(gl.TEXTURE_2D, vTextureRef);\n    gl.texImage2D(gl.TEXTURE_2D, 0, gl.LUMINANCE, vDataPerRow, vRowCnt, 0, gl.LUMINANCE, gl.UNSIGNED_BYTE, vData);\n\n    gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);\n  }\n\n  _drawPictureRGB (data) {\n\n  }\n\n  render (data, width, height, yLinesize, uvLinesize) {\n    var gl = this.contextGL;\n    // console.log(data, width, height, yLinesize, uvLinesize)\n    if (gl) {\n      this._drawPictureGL(data, width, height, yLinesize, uvLinesize);\n    } else {\n      this._drawPictureRGB(data);\n    }\n  }\n\n  resetMeta(meta){\n    this.meta =  Object.assign({}, meta);\n    this._initMeta()\n  }\n}\n\nexport default YUVCanvas;\n","class SourceBuffer {\n  constructor (config) {\n    this.config = Object.assign({}, config);\n    this.type = this.config.type;\n    this.reset();\n  }\n\n  reset(){\n    this.buffer = [];\n    this.currentGop = undefined;\n    this._lastGet = undefined;\n  }\n\n  push (frame) {\n    // if (this.type === 'video') {\n    //   if (frame.isKeyframe) {\n    //     let currentGop = {\n    //       samples: [],\n    //       start: frame.dts,\n    //       end: frame.dts,\n    //       nextGop: undefined\n    //     };\n    //     if (this.currentGop) {\n    //       this.currentGop.nextGop = currentGop;\n    //     }\n    //     this.currentGop = currentGop;\n    //     this.buffer.push(this.currentGop);\n    //   }\n    //\n    //   if (this.currentGop) {\n    //     this.currentGop.samples.push(frame);\n    //\n    //     if (frame.dts < this.currentGop.start) {\n    //       this.currentGop.start = frame.dts;\n    //     }\n    //\n    //     if (frame.dts > this.currentGop.end) {\n    //       this.currentGop.end = frame.dts;\n    //     }\n    //   }\n    // }\n    this.buffer.push(frame)\n  }\n\n  get (time) {\n    return this.buffer.shift()\n  }\n\n  _getNext () {\n    if (!this._lastGet) {\n      let gop = this.buffer[0];\n      if (gop.samples.length < 1) {\n        return\n      }\n\n      this._lastGet = {\n        gop,\n        index: 0\n      }\n      return gop.samples[0];\n    } else {\n      let gop = this._lastGet.gop;\n      let sample = gop.samples[this._lastGet.index + 1];\n      if (sample) {\n        this._lastGet.index = this._lastGet.index + 1;\n        return sample;\n      } else {\n        gop = gop.nextGop;\n        if (!gop || gop.samples.length < 1) {\n          return;\n        }\n        sample = gop.samples[0];\n        this._lastGet = {\n          gop,\n          index: 0\n        }\n        return sample;\n      }\n    }\n  }\n\n  remove (start, end) {\n    if (this.buffer.length < 0) {\n      return;\n    }\n\n    let i = 0;\n    let gop = this.buffer[0];\n    while (gop) {\n      if (gop.end < end && gop.start >= start) {\n        this.buffer.splice(i, 1)\n        gop = this.buffer[i];\n      } else {\n        i += 1;\n        gop = this.buffer[i];\n      }\n    }\n  }\n}\n\nexport default SourceBuffer;\n","export default class TimeRanges {\n  constructor (ranges) {\n    this.ranges = ranges || [];\n  }\n\n  start (idx) {\n    return this.ranges[idx] ? this.ranges[idx].start : 0\n  }\n\n  end (idx) {\n    return this.ranges[idx] ? this.ranges[idx].end : 0\n  }\n\n  add (range) {\n    this.ranges.push(range)\n  }\n\n  get length () {\n    return this.ranges.length\n  }\n}\n","'use strict';\n\nvar domain;\n\n// This constructor is used to store event handlers. Instantiating this is\n// faster than explicitly calling `Object.create(null)` to get a \"clean\" empty\n// object (tested with v8 v4.9).\nfunction EventHandlers() {}\nEventHandlers.prototype = Object.create(null);\n\nfunction EventEmitter() {\n  EventEmitter.init.call(this);\n}\nexport default EventEmitter;\nexport {EventEmitter};\n\n// nodejs oddity\n// require('events') === require('events').EventEmitter\nEventEmitter.EventEmitter = EventEmitter\n\nEventEmitter.usingDomains = false;\n\nEventEmitter.prototype.domain = undefined;\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nEventEmitter.defaultMaxListeners = 10;\n\nEventEmitter.init = function() {\n  this.domain = null;\n  if (EventEmitter.usingDomains) {\n    // if there is an active domain, then attach to it.\n    if (domain.active && !(this instanceof domain.Domain)) {\n      this.domain = domain.active;\n    }\n  }\n\n  if (!this._events || this._events === Object.getPrototypeOf(this)._events) {\n    this._events = new EventHandlers();\n    this._eventsCount = 0;\n  }\n\n  this._maxListeners = this._maxListeners || undefined;\n};\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function setMaxListeners(n) {\n  if (typeof n !== 'number' || n < 0 || isNaN(n))\n    throw new TypeError('\"n\" argument must be a positive number');\n  this._maxListeners = n;\n  return this;\n};\n\nfunction $getMaxListeners(that) {\n  if (that._maxListeners === undefined)\n    return EventEmitter.defaultMaxListeners;\n  return that._maxListeners;\n}\n\nEventEmitter.prototype.getMaxListeners = function getMaxListeners() {\n  return $getMaxListeners(this);\n};\n\n// These standalone emit* functions are used to optimize calling of event\n// handlers for fast cases because emit() itself often has a variable number of\n// arguments and can be deoptimized because of that. These functions always have\n// the same number of arguments and thus do not get deoptimized, so the code\n// inside them can execute faster.\nfunction emitNone(handler, isFn, self) {\n  if (isFn)\n    handler.call(self);\n  else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      listeners[i].call(self);\n  }\n}\nfunction emitOne(handler, isFn, self, arg1) {\n  if (isFn)\n    handler.call(self, arg1);\n  else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      listeners[i].call(self, arg1);\n  }\n}\nfunction emitTwo(handler, isFn, self, arg1, arg2) {\n  if (isFn)\n    handler.call(self, arg1, arg2);\n  else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      listeners[i].call(self, arg1, arg2);\n  }\n}\nfunction emitThree(handler, isFn, self, arg1, arg2, arg3) {\n  if (isFn)\n    handler.call(self, arg1, arg2, arg3);\n  else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      listeners[i].call(self, arg1, arg2, arg3);\n  }\n}\n\nfunction emitMany(handler, isFn, self, args) {\n  if (isFn)\n    handler.apply(self, args);\n  else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      listeners[i].apply(self, args);\n  }\n}\n\nEventEmitter.prototype.emit = function emit(type) {\n  var er, handler, len, args, i, events, domain;\n  var needDomainExit = false;\n  var doError = (type === 'error');\n\n  events = this._events;\n  if (events)\n    doError = (doError && events.error == null);\n  else if (!doError)\n    return false;\n\n  domain = this.domain;\n\n  // If there is no 'error' event listener then throw.\n  if (doError) {\n    er = arguments[1];\n    if (domain) {\n      if (!er)\n        er = new Error('Uncaught, unspecified \"error\" event');\n      er.domainEmitter = this;\n      er.domain = domain;\n      er.domainThrown = false;\n      domain.emit('error', er);\n    } else if (er instanceof Error) {\n      throw er; // Unhandled 'error' event\n    } else {\n      // At least give some kind of context to the user\n      var err = new Error('Uncaught, unspecified \"error\" event. (' + er + ')');\n      err.context = er;\n      throw err;\n    }\n    return false;\n  }\n\n  handler = events[type];\n\n  if (!handler)\n    return false;\n\n  var isFn = typeof handler === 'function';\n  len = arguments.length;\n  switch (len) {\n    // fast cases\n    case 1:\n      emitNone(handler, isFn, this);\n      break;\n    case 2:\n      emitOne(handler, isFn, this, arguments[1]);\n      break;\n    case 3:\n      emitTwo(handler, isFn, this, arguments[1], arguments[2]);\n      break;\n    case 4:\n      emitThree(handler, isFn, this, arguments[1], arguments[2], arguments[3]);\n      break;\n    // slower\n    default:\n      args = new Array(len - 1);\n      for (i = 1; i < len; i++)\n        args[i - 1] = arguments[i];\n      emitMany(handler, isFn, this, args);\n  }\n\n  if (needDomainExit)\n    domain.exit();\n\n  return true;\n};\n\nfunction _addListener(target, type, listener, prepend) {\n  var m;\n  var events;\n  var existing;\n\n  if (typeof listener !== 'function')\n    throw new TypeError('\"listener\" argument must be a function');\n\n  events = target._events;\n  if (!events) {\n    events = target._events = new EventHandlers();\n    target._eventsCount = 0;\n  } else {\n    // To avoid recursion in the case that type === \"newListener\"! Before\n    // adding it to the listeners, first emit \"newListener\".\n    if (events.newListener) {\n      target.emit('newListener', type,\n                  listener.listener ? listener.listener : listener);\n\n      // Re-assign `events` because a newListener handler could have caused the\n      // this._events to be assigned to a new object\n      events = target._events;\n    }\n    existing = events[type];\n  }\n\n  if (!existing) {\n    // Optimize the case of one listener. Don't need the extra array object.\n    existing = events[type] = listener;\n    ++target._eventsCount;\n  } else {\n    if (typeof existing === 'function') {\n      // Adding the second element, need to change to array.\n      existing = events[type] = prepend ? [listener, existing] :\n                                          [existing, listener];\n    } else {\n      // If we've already got an array, just append.\n      if (prepend) {\n        existing.unshift(listener);\n      } else {\n        existing.push(listener);\n      }\n    }\n\n    // Check for listener leak\n    if (!existing.warned) {\n      m = $getMaxListeners(target);\n      if (m && m > 0 && existing.length > m) {\n        existing.warned = true;\n        var w = new Error('Possible EventEmitter memory leak detected. ' +\n                            existing.length + ' ' + type + ' listeners added. ' +\n                            'Use emitter.setMaxListeners() to increase limit');\n        w.name = 'MaxListenersExceededWarning';\n        w.emitter = target;\n        w.type = type;\n        w.count = existing.length;\n        emitWarning(w);\n      }\n    }\n  }\n\n  return target;\n}\nfunction emitWarning(e) {\n  typeof console.warn === 'function' ? console.warn(e) : console.log(e);\n}\nEventEmitter.prototype.addListener = function addListener(type, listener) {\n  return _addListener(this, type, listener, false);\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.prependListener =\n    function prependListener(type, listener) {\n      return _addListener(this, type, listener, true);\n    };\n\nfunction _onceWrap(target, type, listener) {\n  var fired = false;\n  function g() {\n    target.removeListener(type, g);\n    if (!fired) {\n      fired = true;\n      listener.apply(target, arguments);\n    }\n  }\n  g.listener = listener;\n  return g;\n}\n\nEventEmitter.prototype.once = function once(type, listener) {\n  if (typeof listener !== 'function')\n    throw new TypeError('\"listener\" argument must be a function');\n  this.on(type, _onceWrap(this, type, listener));\n  return this;\n};\n\nEventEmitter.prototype.prependOnceListener =\n    function prependOnceListener(type, listener) {\n      if (typeof listener !== 'function')\n        throw new TypeError('\"listener\" argument must be a function');\n      this.prependListener(type, _onceWrap(this, type, listener));\n      return this;\n    };\n\n// emits a 'removeListener' event iff the listener was removed\nEventEmitter.prototype.removeListener =\n    function removeListener(type, listener) {\n      var list, events, position, i, originalListener;\n\n      if (typeof listener !== 'function')\n        throw new TypeError('\"listener\" argument must be a function');\n\n      events = this._events;\n      if (!events)\n        return this;\n\n      list = events[type];\n      if (!list)\n        return this;\n\n      if (list === listener || (list.listener && list.listener === listener)) {\n        if (--this._eventsCount === 0)\n          this._events = new EventHandlers();\n        else {\n          delete events[type];\n          if (events.removeListener)\n            this.emit('removeListener', type, list.listener || listener);\n        }\n      } else if (typeof list !== 'function') {\n        position = -1;\n\n        for (i = list.length; i-- > 0;) {\n          if (list[i] === listener ||\n              (list[i].listener && list[i].listener === listener)) {\n            originalListener = list[i].listener;\n            position = i;\n            break;\n          }\n        }\n\n        if (position < 0)\n          return this;\n\n        if (list.length === 1) {\n          list[0] = undefined;\n          if (--this._eventsCount === 0) {\n            this._events = new EventHandlers();\n            return this;\n          } else {\n            delete events[type];\n          }\n        } else {\n          spliceOne(list, position);\n        }\n\n        if (events.removeListener)\n          this.emit('removeListener', type, originalListener || listener);\n      }\n\n      return this;\n    };\n\nEventEmitter.prototype.removeAllListeners =\n    function removeAllListeners(type) {\n      var listeners, events;\n\n      events = this._events;\n      if (!events)\n        return this;\n\n      // not listening for removeListener, no need to emit\n      if (!events.removeListener) {\n        if (arguments.length === 0) {\n          this._events = new EventHandlers();\n          this._eventsCount = 0;\n        } else if (events[type]) {\n          if (--this._eventsCount === 0)\n            this._events = new EventHandlers();\n          else\n            delete events[type];\n        }\n        return this;\n      }\n\n      // emit removeListener for all listeners on all events\n      if (arguments.length === 0) {\n        var keys = Object.keys(events);\n        for (var i = 0, key; i < keys.length; ++i) {\n          key = keys[i];\n          if (key === 'removeListener') continue;\n          this.removeAllListeners(key);\n        }\n        this.removeAllListeners('removeListener');\n        this._events = new EventHandlers();\n        this._eventsCount = 0;\n        return this;\n      }\n\n      listeners = events[type];\n\n      if (typeof listeners === 'function') {\n        this.removeListener(type, listeners);\n      } else if (listeners) {\n        // LIFO order\n        do {\n          this.removeListener(type, listeners[listeners.length - 1]);\n        } while (listeners[0]);\n      }\n\n      return this;\n    };\n\nEventEmitter.prototype.listeners = function listeners(type) {\n  var evlistener;\n  var ret;\n  var events = this._events;\n\n  if (!events)\n    ret = [];\n  else {\n    evlistener = events[type];\n    if (!evlistener)\n      ret = [];\n    else if (typeof evlistener === 'function')\n      ret = [evlistener.listener || evlistener];\n    else\n      ret = unwrapListeners(evlistener);\n  }\n\n  return ret;\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  if (typeof emitter.listenerCount === 'function') {\n    return emitter.listenerCount(type);\n  } else {\n    return listenerCount.call(emitter, type);\n  }\n};\n\nEventEmitter.prototype.listenerCount = listenerCount;\nfunction listenerCount(type) {\n  var events = this._events;\n\n  if (events) {\n    var evlistener = events[type];\n\n    if (typeof evlistener === 'function') {\n      return 1;\n    } else if (evlistener) {\n      return evlistener.length;\n    }\n  }\n\n  return 0;\n}\n\nEventEmitter.prototype.eventNames = function eventNames() {\n  return this._eventsCount > 0 ? Reflect.ownKeys(this._events) : [];\n};\n\n// About 1.5x faster than the two-arg version of Array#splice().\nfunction spliceOne(list, index) {\n  for (var i = index, k = i + 1, n = list.length; k < n; i += 1, k += 1)\n    list[i] = list[k];\n  list.pop();\n}\n\nfunction arrayClone(arr, i) {\n  var copy = new Array(i);\n  while (i--)\n    copy[i] = arr[i];\n  return copy;\n}\n\nfunction unwrapListeners(arr) {\n  var ret = new Array(arr.length);\n  for (var i = 0; i < ret.length; ++i) {\n    ret[i] = arr[i].listener || arr[i];\n  }\n  return ret;\n}\n","// import Workerify from 'webworkify-webpack'\n// eslint-disable-next-line import/no-webpack-loader-syntax\nimport VideoWorker from 'worker!./worker.js';\nimport BackupVideoWorker from 'worker!./backupWorker.js';\nimport Render from './yuv-canvas'\nimport SourceBuffer from '../models/sourcebuffer';\nimport TimeRanges from '../models/time-ranges';\n// import BackUpCodec from './backup-codec';\nimport EventEmitter from 'events';\n\n\n\nconst asmSupported = () => {\n  try {\n    (function MyAsmModule () {\n      'use asm';\n    })();\n    return true;\n  } catch (err) {\n    // will never show...\n    return false;\n  }\n};\n\nconst HAVE_NOTHING = 0;\nconst HAVE_METADATA = 1;\nconst HAVE_CURRENT_DATA = 2;\nconst HAVE_FUTURE_DATA = 3;\nconst HAVE_ENOUGH_DATA = 4;\n\nconst NOT_SEEK = 1;\nconst SEEKING = 2;\nconst SEEKED = 4;\n\nexport const VIDEO_CANVAS_EVENTS = {\n  VIDEO_EVENTS: 'VIDEO_EVENTS'\n}\n\nclass VideoCanvas extends EventEmitter {\n  constructor (config) {\n    super();\n    this.config = Object.assign({}, config);\n    this.canvas = this.config.canvas ? this.config.canvas : document.createElement('canvas');\n    this.source = new SourceBuffer({type: 'video'});\n    this.onFirstFrame = undefined;\n    this.oncanplay = undefined;\n    this.initParameters()\n    this.canvas.style.maxWidth = '100%';\n    this.canvas.style.maxHeight = '100%';\n    this.canvas.style.top = 0;\n    this.canvas.style.bottom = 0;\n    this.canvas.style.left = 0;\n    this.canvas.style.right = 0;\n    this.canvas.style.margin = 'auto';\n    this.canvas.style.position = 'absolute';\n    this.handleMessage = this.handleMessage.bind(this);\n    this.useBackupTimer = null;\n  }\n\n  initParameters () {\n    this.meta = undefined;\n    this.readyStatus = HAVE_NOTHING;\n    this.paused = true;\n    this.currentTime = 0;\n    this._seekState = NOT_SEEK;\n    this._avccpushed = false;\n    this._decodedFrames = {};\n    this._lastSampleDts = undefined;\n    this._baseDts = undefined;\n    this._lastRenderTime = null\n    this.playFinish = null\n    this._seekState = NOT_SEEK;\n  }\n\n  reset () {\n    this.initParameters()\n    this.source.reset();\n  }\n\n  pause () {\n    this.paused = true;\n  }\n\n  initWasmWorker () {\n    // eslint-disable-next-line no-undef\n    this.wasmworker = new VideoWorker(false);\n    window._shimWorkerDocument = document;\n    window._shimWorkerWindow = window;\n    // this.wasmworker = new Worker('./worker.js');\n    this.wasmworker.onmessage = this.handleMessage;\n    this.wasmworker.postMessage({\n      msg: 'init',\n      meta: this.meta\n    })\n    this.setBackUpWorker();\n  }\n\n  setBackUpWorker () {\n    if (this.useBackupTimer) {\n      return;\n    }\n    this.useBackupTimer = setTimeout(() => {\n      window.clearTimeout(this.useBackupTimer);\n      this.useBackupTimer = null;\n      if (this._decoderInited || !asmSupported()) {\n        return;\n      }\n\n      // this.destroyWorker()\n      this.wasmworker = new BackupVideoWorker(false);\n      this.wasmworker.onmessage = this.handleMessage;\n      this.wasmworker.postMessage({\n        msg: 'init',\n        meta: this.meta\n      });\n      // this._decoderInited = true;\n    }, 10000)\n  }\n\n  setVideoMetaData (meta) {\n    this.meta = meta;\n    if (!this._decoderInited) {\n      this.initWasmWorker();\n      return\n    }\n    this.wasmworker.postMessage({\n      msg: 'updatemeta',\n      meta: this.meta\n    })\n    this.pushAvcc(meta)\n  }\n\n  pushAvcc (meta) {\n    this._avccpushed = true;\n    let data = new Uint8Array(meta.sps.byteLength + 4);\n    data.set([0, 0, 0, 1])\n    data.set(meta.sps, 4);\n    this.wasmworker.postMessage({\n      msg: 'decode',\n      data: data\n    })\n\n    data = new Uint8Array(meta.pps.byteLength + 4);\n    data.set([0, 0, 0, 1])\n    data.set(meta.pps, 4);\n    this.wasmworker.postMessage({\n      msg: 'decode',\n      data: data\n    })\n\n    if (!this.yuvCanvas) {\n      let config = Object.assign({meta, canvas: this.canvas}, this.config);\n      this.yuvCanvas = new Render(config);\n    } else {\n      this.yuvCanvas.resetMeta(meta);\n    }\n    this.readyStatus = HAVE_METADATA;\n  }\n  decodeVideo (videoTrack) {\n    if (!this._decoderInited) {\n      return\n    }\n    if (!this._avccpushed) {\n      this.pushAvcc(this.meta);\n    }\n    let { samples } = videoTrack;\n    let sample = samples.shift();\n\n    while (sample) {\n      if (!this._baseDts) {\n        this._baseDts = sample.dts;\n      }\n      this.source.push(sample);\n      sample = samples.shift();\n    }\n\n    this.preload();\n  }\n\n  preload () {\n    if (!this._lastSampleDts || this._lastSampleDts - this._baseDts < this.currentTime + this.config.preloadTime * 1000) {\n      let sample = this.source.get();\n      if (sample) {\n        this._lastSampleDts = sample.dts;\n        this._analyseNal(sample);\n      }\n\n      while (sample && this._lastSampleDts - this._baseDts < this.currentTime + this.config.preloadTime * 2000) {\n        sample = this.source.get();\n        // console.log(sample)\n        if (sample) {\n          this._analyseNal(sample);\n          this._lastSampleDts = sample.dts;\n        }\n      }\n    }\n  }\n\n  _analyseNal (sample) {\n    // console.log('送入解码', sample.dts,data)\n    this.wasmworker.postMessage({\n      msg: 'decode',\n      data: sample.data,\n      info: {\n        decodeTime: Date.now(),\n        dts: sample.dts,\n        pts: sample.pts ? sample.pts : sample.dts + sample.cts,\n        key: sample.isKeyframe\n      }\n    })\n  }\n\n  decodeVideoBuffer (buffer) {\n    if (!this._decoderInited) {\n      this.initWasmWorker();\n      return\n    }\n    this.wasmworker.postMessage({\n      msg: 'decode',\n      data: buffer\n    })\n  }\n\n  _onDecoded (data) {\n    if (!data.info) {\n      return;\n    }\n    let {dts} = data.info;\n    this._decodedFrames[dts] = data;\n    let decodedFrameLen = Object.keys(this._decodedFrames).length;\n    if (this.readyStatus == HAVE_METADATA && decodedFrameLen > 0) {\n      this.readyStatus = HAVE_CURRENT_DATA\n      this.emit(VIDEO_CANVAS_EVENTS.VIDEO_EVENTS, 'loadeddata')\n    }\n    if (this._seekState == SEEKED) {\n      this.readyStatus = HAVE_CURRENT_DATA\n      this._seekState = NOT_SEEK\n    }\n    if (decodedFrameLen > 10) {\n      if (this.playFinish) {\n        this.playFinish()\n      }\n      if (this.readyStatus == HAVE_CURRENT_DATA) {\n        this.readyStatus = HAVE_FUTURE_DATA\n        this.emit(VIDEO_CANVAS_EVENTS.VIDEO_EVENTS, 'canplay')\n      }\n      if (this.oncanplay) {\n        this.oncanplay();\n      }\n      // 2s的时间\n      if (this.readyStatus == HAVE_FUTURE_DATA && decodedFrameLen > 2 * (this.meta.frameRate.fps || 60)) {\n        this.readyStatus = HAVE_ENOUGH_DATA;\n        this.emit(VIDEO_CANVAS_EVENTS.VIDEO_EVENTS, 'canplaythrough')\n      }\n    } else {\n      this.readyStatus = HAVE_CURRENT_DATA\n    }\n  }\n\n  play () {\n    this.paused = false;\n    if (!this.paused) {\n      return Promise.resolve();\n    }\n    return new Promise((resolve) => {\n      this.playFinish = resolve\n    }).then(() => {\n      this.playFinish = null\n    })\n  }\n\n  _onTimer (currentTime) {\n    // console.log(currentTime)\n    if (this.paused) {\n      return false;\n    }\n\n    if (this.meta) {\n      let frameTimes = Object.keys(this._decodedFrames);\n      // console.log(frameTimes)\n      if (frameTimes.length > 0) {\n        this.currentTime = currentTime;\n        let frameTime = -1;\n        for (let i = 0; i < frameTimes.length && Number.parseInt(frameTimes[i]) - this._baseDts <= this.currentTime; i++) {\n          frameTime = Number.parseInt(frameTimes[Math.max(i - 1, 0)]);\n        }\n        let frame = this._decodedFrames[frameTime];\n        // console.log('source', this.source)\n        // console.log('frametime,', frameTime)\n        if (frame) {\n          // console.log('render frame ', frameTime, Date.now())\n          // let buf = []\n          // if (this.meta.chromaFormat === 420) {\n          //\n          //   let buf0 = frame.buffer.slice(0, frame.yLinesize * frame.height);\n          //   let buf1 = frame.buffer.slice(frame.yLinesize * frame.height, frame.yLinesize * frame.height * 1.25);\n          //   let buf2 = frame.buffer.slice(frame.yLinesize * frame.height * 1.25, frame.yLinesize * frame.height * 1.5);\n          //   buf = [new Uint8Array(buf0), new Uint8Array(buf1), new Uint8Array(buf2)];\n          // }\n          if (this._seekState == SEEKING) {\n            this._seekState = SEEKED\n            this.emit(VIDEO_CANVAS_EVENTS.VIDEO_EVENTS, 'seeked')\n          }\n          frameTimes.forEach((time) => {\n            if (Number.parseInt(time) <= frameTime) {\n              delete this._decodedFrames[time]\n            }\n          })\n          this.yuvCanvas.render(frame.buffer, frame.width, frame.height, frame.yLinesize, frame.uvLinesize);\n\n          return true;\n        } else {\n          if (frameTimes.length && Number(frameTimes[0]) > currentTime) {\n            return true;\n          }\n          return false;\n        }\n      }\n    }\n    this._lastRenderTime = Date.now()\n  }\n\n  cleanBuffer () {\n    if (this.currentTime > 1) {\n      this.source.remove(0, this.currentTime - 1);\n    }\n    let frameTimes = Object.keys(this._decodedFrames);\n\n    for (let i = 0; i < frameTimes.length; i++) {\n      if (Number.parseInt(frameTimes[i]) < this.currentTime) {\n        delete this._decodedFrames[frameTimes[i]];\n      }\n    }\n  }\n\n  destroy () {\n    this.destroyWorker()\n    this.canvas = null\n    this._decodedFrames = {};\n    this.source = null\n    this._decoderInited = false;\n    this._isSeeking = false;\n  }\n\n  destroyWorker () {\n    if (this.wasmworker) {\n      this.wasmworker.removeEventListener('message', this.handleMessage)\n      this.wasmworker.postMessage({msg: 'destroy'})\n    }\n    window._shimWorkerDocument = null;\n    window._shimWorkerWindow = null;\n    this.wasmworker = null;\n  }\n\n  handleMessage (msg) {\n    switch (msg.data.msg) {\n      case 'DECODER_READY':\n        console.log('wasm worker ready')\n        this._decoderInited = true;\n        this.pushAvcc(this.meta)\n        break;\n      case 'DECODED':\n        this._onDecoded(msg.data);\n        break;\n      case 'LOG':\n        console.log(msg.data.log);\n        break;\n      default:\n        console.error('invalid messaeg', msg);\n    }\n  }\n\n  setVideoSeeking () {\n    this._seekState = SEEKING\n    this.emit(VIDEO_CANVAS_EVENTS.VIDEO_EVENTS, 'seeking')\n  }\n\n  get buffered () {\n    const ranges = []\n    let currentRange = {\n      start: null,\n      end: null\n    }\n    const decodedTimes = Object.keys(this._decodedFrames);\n    if (decodedTimes.length) {\n      currentRange.start = Number.parseInt(decodedTimes[0])\n      currentRange.end = Number.parseInt(decodedTimes[decodedTimes.length - 1])\n    }\n\n    if (currentRange.start !== null && currentRange.end !== null) {\n      currentRange.start = (currentRange.start - this._baseDts) / 1000\n      currentRange.end = (currentRange.end - this._baseDts) / 1000\n      ranges.push(currentRange)\n    }\n\n    return new TimeRanges(ranges)\n  }\n\n  get videoWidth () {\n    return this.canvas.width;\n  }\n\n  get videoHeight () {\n    return this.canvas.height;\n  }\n\n  get seeking () {\n    return this._seekState == SEEKING\n  }\n\n  get readyState () {\n    return this.readyStatus\n  }\n}\nexport default VideoCanvas;\n","import EventEmitter from 'events'\nclass AudioCtx extends EventEmitter {\n  constructor (config) {\n    super();\n    this.config = Object.assign({}, config);\n    let AudioContext = window.AudioContext || window.webkitAudioContext;\n    this.context = new AudioContext();\n    this.gainNode = this.context.createGain();\n    this.gainNode.connect(this.context.destination);\n    this.meta = undefined;\n    this.samples = [];\n    this.preloadTime = this.config.preloadTime || 3;\n    this.duration = 0;\n\n    this._currentBuffer = undefined;\n    this._nextBuffer = undefined;\n    this._lastpts = undefined;\n    this._preDecode = [];\n    this._currentTime = 0;\n    this._decoding = false;\n    this._volume = Number.parseFloat(this.config.volume) === this.config.volume ? this.config.volume : 0.6\n    this.gainNode.gain.value = this._volume\n    // 记录外部传输的状态\n    this._played = false;\n    this.paused = true;\n    this.loadFinish = null; // pending play task\n    this.waitNextID = null; // audio source end and next source not loaded\n    this.destroyed = false;\n  }\n\n  get currentTime () {\n    return this._currentTime;\n  }\n\n  decodeAudio (audioTrack) {\n    let {samples, meta} = audioTrack;\n    let data = samples;\n    audioTrack.samples = [];\n    if (meta) {\n      this.setAudioData(data);\n    }\n  }\n  setAudioData (data) {\n    for (let i = 0; i < data.length; i++) {\n      data[i].pts = (data[i].pts === undefined) ? data[i].dts : data[i].pts;\n      this._preDecode.push(data[i]);\n    }\n    this.preload()\n  }\n\n  preload () {\n    if (this._preDecode.length > 0) {\n      if (this._lastpts === undefined) {\n        this._lastpts = this._preDecode[0].pts;\n      }\n      if ((this._preDecode[this._preDecode.length - 1].pts - this._lastpts) / 1000 > this.preloadTime) {\n        this.decodeAAC();\n      }\n    }\n  }\n\n  decodeAAC () {\n    if (this._decoding) {\n      return;\n    }\n    this._decoding = true;\n    let data = this._preDecode;\n    let samples = [];\n    let _this = this;\n    let sample = data.shift();\n    while (sample) {\n      let sampleData = AudioCtx.getAACData(this.meta, sample)\n      samples.push(sampleData);\n      this._lastpts = sample.pts;\n      sample = data.shift()\n    }\n    let buffer = AudioCtx.combileData(samples);\n    try {\n      this.context.decodeAudioData(buffer.buffer, function (buffer) {\n        let audioSource = _this.context.createBufferSource();\n        audioSource.buffer = buffer;\n        // audioSource.onended = _this.onSourceEnded.bind(_this);\n        _this.samples.push({\n          time: _this.duration,\n          duration: buffer.duration,\n          data: audioSource\n        })\n\n        _this.duration += buffer.duration;\n\n        if (!_this._currentBuffer) {\n          _this._currentBuffer = _this.getTimeBuffer(_this.currentTime);\n        }\n\n        if (!_this._nextBuffer && _this._currentBuffer) {\n          _this._nextBuffer = _this.getTimeBuffer(_this.currentTime + _this._currentBuffer.duration);\n        }\n        _this._decoding = false;\n\n        if ((_this._preDecode.length > 0 && _this._preDecode[_this._preDecode.length - 1].pts - _this._lastpts) / 1000 >= _this.preloadTime) {\n          _this.decodeAAC();\n        }\n\n        if (_this.loadFinish) {\n          _this.loadFinish()\n        }\n      }, (e) => {\n        console.error(e)\n      })\n    } catch (err) {\n      console.error(err);\n    }\n  }\n\n  onSourceEnded () {\n    if (this.destroyed) {\n      return;\n    }\n    if (!this._nextBuffer || !this._played) {\n      this.waitNextID = setTimeout(() => {\n        this.onSourceEnded();\n      }, 200);\n      return;\n    }\n    let audioSource = this._nextBuffer.data;\n    audioSource.start();\n    audioSource.connect(this.gainNode);\n    let _this = this;\n    setTimeout(() => {\n      _this.onSourceEnded.call(this);\n    }, audioSource.buffer.duration * 1000 - 3);\n    this._currentBuffer = this._nextBuffer;\n    this._currentTime = this._currentBuffer.time;\n    this._nextBuffer = this.getTimeBuffer(this.currentTime);\n    if (this._currentBuffer) {\n      this._nextBuffer = this.getTimeBuffer(this.currentTime + this._currentBuffer.duration);\n    }\n    this.emit('AUDIO_SOURCE_END')\n  }\n\n  play () {\n    if (this.loadFinish) {\n      return;\n    }\n\n    this._played = true;\n\n    let _this = this;\n    const playStart = () => {\n      let audioSource = this._currentBuffer.data;\n      try {\n        audioSource.start();\n      } catch (e) {\n        // NOTHING\n      }\n      audioSource.connect(this.gainNode);\n      this.paused = false;\n      if (this.context.state !== 'running' && this.playFailed) {\n        this.context.resume().then(() => {\n          if (this.context.state === 'running' && this.playFinish) {\n            this.playFinish();\n          }\n        })\n        setTimeout(() => {\n          this.playFailed(new Error('audio context suspended'));\n        })\n      } else if (this.playFinish) {\n        this.playFinish();\n      }\n      setTimeout(() => {\n        _this.onSourceEnded.call(this);\n      }, audioSource.buffer.duration * 1000 - 10);\n    }\n\n    if (!this._currentBuffer) {\n      return new Promise((resolve, reject) => {\n        this.loadFinish = playStart;\n        this.playFinish = resolve;\n        this.playFailed = reject;\n      }).then(() => {\n        this.loadFinish = null;\n        this.playFinish = null;\n        this.playFailed = null;\n        playStart()\n      });\n    } else {\n      return new Promise((resolve, reject) => {\n        this.playFinish = resolve;\n        this.playFailed = reject;\n        playStart();\n      })\n    }\n  }\n\n  pause () {\n    const audioCtx = this.context;\n    if (audioCtx.state === 'running') {\n      audioCtx.suspend()\n    }\n    this._currentBuffer = undefined;\n    this._nextBuffer = undefined;\n    this._lastpts = undefined;\n    // this.duration = 0;\n    this.samples = []\n    this.paused = true;\n  }\n\n  getTimeBuffer (time) {\n    let ret;\n    for (let i = 0; i < this.samples.length; i++) {\n      let sample = this.samples[i]\n      if (sample.time <= time && (sample.time + sample.duration) > time) {\n        ret = sample;\n        break;\n      }\n    }\n    return ret;\n  }\n\n  setAudioMetaData (meta) {\n    this.meta = meta;\n  }\n\n  destroy () {\n    if (this.waitNextID) {\n      window.clearTimeout(this.waitNextID)\n    }\n    this._preDecode = [];\n    this.paused = true;\n    this.context.close();\n    this.destroyed = true;\n  }\n\n  set muted (val) {\n    if (val) {\n      this.gainNode.gain.value = 0\n    } else {\n      this.gainNode.gain.value = this._volume\n    }\n    if (this.context.state === 'suspended' && !this.paused) {\n      this.context.resume()\n    }\n  }\n\n  get volume () {\n    if (this.context.state === 'suspended' || this.muted) {\n      return 0;\n    }\n    return this._volume\n  }\n\n  set volume (val) {\n    if (val < 0) {\n      this._volume = 0;\n      this.gainNode.gain.value = 0\n      return;\n    } else if (val > 1) {\n      this._volume = 1;\n      this.gainNode.gain.value = 1\n      return;\n    }\n\n    this._volume = val;\n    this.gainNode.gain.value = val\n  }\n\n  mute () {\n    this.gainNode.gain.value = 0\n  }\n\n  static getAACData (meta, sample) {\n    let buffer = new Uint8Array(sample.data.byteLength + 7);\n    let adts = AudioCtx.getAdts(meta, sample.data);\n    buffer.set(adts);\n    buffer.set(sample.data, 7);\n    return buffer;\n  }\n\n  static combileData (samples) {\n    // get length\n    let length = 0;\n    for (let i = 0, k = samples.length; i < k; i++) {\n      length += samples[i].byteLength;\n    }\n\n    let ret = new Uint8Array(length);\n    let offset = 0;\n    // combile data;\n    for (let i = 0, k = samples.length; i < k; i++) {\n      ret.set(samples[i], offset);\n      offset += samples[i].byteLength;\n    }\n    return ret;\n  }\n\n  static getAdts (meta, data) {\n    let adts = new Uint8Array(7);\n\n    // 设置同步位 0xfff 12bit\n    adts[0] = 0xff;\n    adts[1] = 0xf0;\n\n    // Object data (没什么人用MPEG-2了，HLS和FLV也全是MPEG-4，这里直接0)  1bit\n    // Level always 00 2bit\n    // CRC always 1 1bit\n    adts[1] = adts[1] | 0x01;\n\n    // profile 2bit\n    adts[2] = 0xc0 & ((meta.objectType - 1) << 6);\n\n    // sampleFrequencyIndex\n    adts[2] = adts[2] | (0x3c & (meta.sampleRateIndex << 2))\n\n    // private bit 0 1bit\n    // chanel configuration 3bit\n    adts[2] = adts[2] | (0x01 & meta.channelCount >> 2);\n    adts[3] = 0xc0 & (meta.channelCount << 6);\n\n    // original_copy: 0 1bit\n    // home: 0 1bit\n\n    // adts_variable_header()\n    // copyrighted_id_bit 0 1bit\n    // copyrighted_id_start 0 1bit\n\n    // aac_frame_length 13bit;\n    let aacframelength = data.byteLength + 7;\n\n    adts[3] = adts[3] | (0x03 & aacframelength >> 11);\n    adts[4] = 0xff & (aacframelength >> 3);\n    adts[5] = 0xe0 & (aacframelength << 5);\n\n    // adts_buffer_fullness 0x7ff 11bit\n    adts[5] = adts[5] | 0x1f\n    adts[6] = 0xfc;\n\n    // number_of_raw_data_blocks_in_frame 0 2bit;\n    return adts;\n  }\n}\n\nexport default AudioCtx;\n","/**\n * 音画同步调和器\n */\nclass AVReconciler {\n  constructor (props) {\n    this.aCtx = props.aCtx;\n    this.vCtx = props.vCtx;\n    this.video = props.video\n    this.timeoutId = null\n    this.start = null\n  }\n\n  doReconcile () {\n\n    const vCurTime = (this.vCtx.currentTime || 0);\n    let aCurTime;\n    if (this.video.noAudio) {\n      aCurTime = vCurTime;\n    } else {\n      aCurTime = (this.aCtx.currentTime * 1000 || 0);\n    }\n\n    const gap = vCurTime - aCurTime;\n    if (this.timeoutId) {\n      return;\n    }\n    if (gap > 200) { // audio delayed for more than 100ms\n      this.video.start += gap\n      this.vCtx.pause()\n      this.timeoutId = setTimeout(() => {\n        this.vCtx.play()\n        this.timeoutId = null\n      }, gap)\n    } else if (gap < -120) {\n      this.video.start += gap\n    }\n  }\n\n  destroy () {\n    this.start = null\n    this.aCtx = null\n    this.vCtx = null\n    if(this.timeoutId){\n      clearTimeout(this.timeoutId)\n    }\n  }\n}\n\nexport default AVReconciler;\n","import shimWorker from 'rollup-plugin-bundle-worker';\nexport default new shimWorker(\"./tickworker.js\", function (window, document) {\nvar self = this;\n\nvar interval;\nself.addEventListener('message', function(e){\n    let msg = e.data.msg\n    switch (msg) {\n        case 'start':\n            clearInterval(interval);\n            interval = setInterval(function(){\n                self.postMessage('tick');\n            }, e.data.interval);\n            break;\n        case 'stop':\n            clearInterval(interval);\n            break;\n    };\n}, false);\n\n});","import Ticker from './ticker';\nimport Worker from 'worker!./tickworker.js';\n\nexport default class WorkerTicker extends Ticker {\n  constructor (config) {\n    super(config);\n    this.timeoutId = null;\n    this.worker = new Worker();\n    this.handleMessage = this.handleMessage.bind(this);\n    this.worker.addEventListener('message', this.handleMessage);\n  }\n\n  handleMessage () {\n    this.onTick();\n  }\n\n  start (...callbacks) {\n    super.start(...callbacks);\n    this.onTick();\n    this.worker.postMessage({\n      msg: 'start',\n      interval: this.options.interval,\n    });\n  }\n\n  stop () {\n    this.worker.postMessage({\n      msg: 'stop'\n    });\n    this.worker.removeEventListener('message', this.handleMessage);\n    this.worker = null;\n    this.handleMessage = () => {};\n    this.callbacks = [];\n  }\n\n  setInterval (interval) {\n    super.setInterval(interval);\n    this.onTick();\n    this.worker.postMessage({\n      msg: 'start',\n      interval: this.config.interval,\n    });\n  }\n}\n","import './polyfills/custom-elements.min';\nimport './polyfills/native-element';\nimport { getTicker, DEFAULT_FPS, validateFPS } from './helpers/ticker';\nimport VideoCtx, {VIDEO_CANVAS_EVENTS} from './core/video-context';\nimport AudioCtx from './core/audio-context';\nimport AVReconciler from './helpers/reconciler';\nimport WorkerTicker from './helpers/worker-ticker'\n// eslint-disable-next-line no-undef\nclass MobileVideo extends HTMLElement {\n  constructor () {\n    super();\n    this._canvas = document.createElement('canvas')\n    this.handleAudioSourceEnd = this.handleAudioSourceEnd.bind(this)\n    this.played = false;\n    this.pendingPlayTask = null\n    this._waiting = false;\n    this._paused = true;\n    this.videoMetaInited = false;\n    this.audioMetaInited = false;\n    this.handleVCtxInnerEvent = this.handleVCtxInnerEvent.bind(this)\n    this._err = null\n    this._lastTimeupdateStamp = 0\n    this._volumeEventStamp = 0\n    this._hasDispatch = false\n    this._fps = DEFAULT_FPS\n  }\n\n  init () {\n    this._destroyed = false\n    if (this.vCtx) {\n      this.vCtx.destroy();\n    }\n    this.vCtx = new VideoCtx(Object.assign({\n      canvas: this._canvas,\n      preloadTime: this.preloadTime\n    }, { style: { width: this.width, height: this.height } }));\n\n    // this._innerDispatchEvent('waiting')\n    this.vCtx.oncanplay = () => {\n      if (!this.played) {\n        if (!this.contains(this._canvas)) {\n          this.appendChild(this._canvas);\n          // if (this.autoplay) {\n          //   this._innerDispatchEvent('play')\n          // }\n        }\n      }\n    }\n    this.vCtx.on(VIDEO_CANVAS_EVENTS.VIDEO_EVENTS, this.handleVCtxInnerEvent)\n  }\n\n  _initAudio () {\n    let attrVolume = this.getAttribute('volume')\n    const volume = this.muted ? 0 : Number.parseFloat(attrVolume)\n    if (!this.noAudio) {\n      this.aCtx = new AudioCtx({\n        volume\n      });\n    }\n    this.ticker = new WorkerTicker({interval: 1000 / this._fps})\n    // this.ticker = new (getTicker({interval: 1000 / this._fps}))()\n    this.reconciler = new AVReconciler({\n      vCtx: this.vCtx,\n      aCtx: this.aCtx,\n      video: this\n    })\n    if (!this.noAudio) {\n      this.aCtx.on('AUDIO_SOURCE_END', this.handleAudioSourceEnd)\n    }\n  }\n\n  handleVCtxInnerEvent (eventName) {\n    this._innerDispatchEvent(eventName)\n  }\n\n  handleAudioSourceEnd () {\n    this.reconciler.doReconcile()\n    this.vCtx.cleanBuffer();\n    this.aCtx.preload();\n    this.vCtx.preload();\n  }\n\n  _cleanBuffer () {\n    this.vCtx.cleanBuffer()\n  }\n\n  _destroyAudio () {\n    this.audioMetaInited = false;\n    if (!this.noAudio && this.aCtx) {\n      this.aCtx.removeListener('AUDIO_SOURCE_END', this.handleAudioSourceEnd)\n      this.aCtx.destroy()\n    }\n    this.start = null;\n    this.aCtx = null;\n    this.ticker.stop()\n    this.ticker = null;\n    this.pendingPlayTask = null;\n    this.played = false;\n    this._hasDispatch = false;\n  }\n\n  _destroyVideo () {\n    this.videoMetaInited = false;\n    this.vCtx.removeAllListeners();\n    this.vCtx.destroy()\n    this.vCtx = null;\n  }\n\n  destroy () {\n    if (this._destroyed) {\n      return\n    }\n\n    this.reconciler.destroy()\n    this._destroyed = true\n    this._destroyVideo()\n    this._destroyAudio()\n  }\n\n  onDemuxComplete (videoTrack, audioTrack) {\n    if (!this.noAudio) {\n      this.aCtx.decodeAudio(audioTrack);\n    }\n    this.vCtx.decodeVideo(videoTrack);\n  }\n\n  decodeVideoBuffer (buffer) {\n    this.vCtx.decodeVideoBuffer(buffer)\n  }\n\n  setAudioMeta (meta) {\n    if (this.noAudio) {\n      return;\n    }\n    this.aCtx.setAudioMetaData(meta);\n    this.audioMetaInited = true;\n  }\n\n  setVideoMeta (meta) {\n    this.vCtx.setVideoMetaData(meta);\n    this.videoMetaInited = true;\n  }\n\n  handleMediaInfo () {\n    this._innerDispatchEvent('durationchange');\n    this._innerDispatchEvent('loadedmetadata');\n    this._innerDispatchEvent('seeking');\n    this._innerDispatchEvent('seeked');\n  }\n\n  handleEnded () {\n    this._innerDispatchEvent('ended');\n  }\n\n  handleErr (code, message) {\n    this._err = {}\n    this._err.code = code\n    this._err.message = message\n    this._innerDispatchEvent('error')\n  }\n\n  _innerDispatchEvent (type) {\n    this.dispatchEvent(new Event(type))\n  }\n\n  disconnectedCallback () {\n    this.destroy()\n  }\n\n  connectedCallback () {\n    // console.log('connected callback', this.noAudio)\n    this._currentTime = 0;\n    this.start = undefined;\n    this.init()\n    this._initAudio();\n    this.vCtx.reset()\n  }\n\n  get width () {\n    return this.getAttribute('width') || this.videoWidth\n  }\n\n  set width (val) {\n    this.style.display = 'inline-block'\n    const pxVal = typeof val === 'number' ? `${val}px` : val\n    this.setAttribute('width', pxVal)\n    this.style.width = pxVal\n    this._canvas.width = val;\n  }\n\n  get height () {\n    return this.getAttribute('height')\n  }\n\n  set height (val) {\n    this.style.display = 'inline-block'\n    const pxVal = typeof val === 'number' ? `${val}px` : val\n    this.setAttribute('height', pxVal)\n    this.style.height = pxVal\n    this._canvas.height = val;\n  }\n\n  get videoWidth () {\n    if (this.vCtx && this.vCtx.videoWidth) {\n      return this.vCtx.videoWidth\n    }\n    return 0\n  }\n\n  get videoHeight () {\n    if (this.vCtx && this.vCtx.videoHeight) {\n      return this.vCtx.videoHeight\n    }\n    return 0\n  }\n\n  get src () {\n    return this.getAttribute('src');\n  }\n\n  set src (val) {\n    this.setAttribute('src', val);\n  }\n\n  get readyState () {\n    return this.videoMetaInited ? this.vCtx.readyState : 0\n  }\n\n  get seeking () {\n    return this.videoMetaInited ? this.vCtx.seeking : false\n  }\n\n  get currentTime () {\n    return this.videoMetaInited ? this.vCtx.currentTime / 1000 : 0\n  }\n\n  set currentTime (val) {\n    const nVal = Number.parseFloat(val)\n    if (!isNaN(nVal)) {\n      if (this.start && this.currentTime) {\n        this.vCtx.setVideoSeeking()\n        const gap = this.currentTime - nVal;\n        this.start += (gap * 1000)\n      }\n    }\n    return nVal;\n  }\n\n  get duration () {\n    return this.audioMetaInited ? this.aCtx.duration : 0\n  }\n\n  get paused () {\n    return this._paused\n  }\n\n  get playbackRate () {\n    if (this.hasAttribute('playbackRate')) {\n      return this.getAttribute('playbackRate')\n    } else {\n      return 1.0\n    }\n  }\n\n  set playbackRate (val) {\n    this.setAttribute('playbackrate', val);\n    if (!this.noAudio) {\n      this.aCtx.playbackRate = val;\n    }\n    this.vCtx.playbackRate = val;\n\n    this._innerDispatchEvent('ratechange')\n  }\n\n  get ended () {\n    if (this.audioMetaInited) {\n      return this.aCtx.ended;\n    }\n    return false;\n  }\n\n  get autoplay () {\n    if (this.hasAttribute('autoplay')) {\n      return this.getAttribute('autoplay') == 'true'\n    } else {\n      return false\n    }\n  }\n  set autoplay (value) {\n    this.setAttribute('autoplay', value)\n  }\n  play () {\n    if (this.pendingPlayTask) {\n      return;\n    }\n\n    if (this.played) {\n      this.connectedCallback()\n    }\n\n    if (!this.autoplay && !this._hasDispatch) {\n      this._innerDispatchEvent('waiting')\n      this._hasDispatch = true\n      this._waiting = true\n    }\n\n    this._paused = false\n    this._innerDispatchEvent('play')\n    let audioPlayTask = null\n\n    if (this.noAudio) {\n      audioPlayTask = Promise.resolve()\n    } else {\n      audioPlayTask = this.aCtx.play()\n    }\n    this.pendingPlayTask = Promise.all([\n      this.vCtx.play(),\n      audioPlayTask.then(() => {\n        if (this.aCtx) {\n          this.aCtx.muted = true\n        }\n      })\n    ]).then(() => {\n      if (this.aCtx) {\n        this.aCtx.muted = false\n      }\n      this.ticker.start(() => {\n        this.vCtx.preload()\n        if (!this.start) {\n          this.start = Date.now()\n          this._lastTimeupdateStamp = this.start\n        }\n        const prevTime = this._currentTime;\n\n        this._currentTime = Date.now() - this.start\n\n        // console.log(this._currentTime, ' ', this.start)\n        const rendered = this.vCtx._onTimer(this._currentTime)\n        if (rendered) {\n          if (this._waiting) {\n            this._innerDispatchEvent('playing')\n            this._waiting = false;\n          }\n          let now = Date.now()\n          if (now - this._lastTimeupdateStamp >= 250) { // debounce\n            this._lastTimeupdateStamp = now\n            this._innerDispatchEvent('timeupdate')\n          }\n        } else {\n          this._currentTime = prevTime;\n          this.start += (Date.now() - this.start - prevTime);\n          if (!this._waiting && !this.paused) {\n            this._waiting = true;\n            this._innerDispatchEvent('waiting')\n          }\n        }\n      });\n      this.pendingPlayTask = null\n      this.played = true;\n      // this._innerDispatchEvent('playing')\n    }).catch((e) => {\n      this.pendingPlayTask = null\n      this._paused = true;\n      console.error(e);\n      throw e;\n    })\n    return this.pendingPlayTask;\n  }\n\n  pause () {\n    this._paused = true;\n    if (!this.noAudio) {\n      this.aCtx.pause();\n      this.aCtx.destroy();\n    }\n\n    this.vCtx.pause();\n\n    this.ticker.stop()\n\n    Promise.resolve().then(() => {\n      this._innerDispatchEvent('pause')\n    })\n  }\n\n  load () {\n    // no-op for now\n  }\n\n  get volume () {\n    if (this.noAudio) {\n      return 0;\n    }\n    return this.aCtx ? this.aCtx.volume : 0;\n  }\n\n  set volume (vol) {\n    if (this.noAudio) {\n      return;\n    }\n    this.setAttribute('volume', vol);\n    this.aCtx.volume = vol\n    if (vol > 0 && this.muted) {\n      this.aCtx.mute()\n    }\n    this.onValueChange()\n  }\n\n  onValueChange () {\n    let now = Date.now()\n    if (now - this._volumeEventStamp < 200) {\n      return\n    }\n    this._volumeEventStamp = now\n    this._innerDispatchEvent('volumechange')\n  }\n\n  get muted () {\n    const attrMuted = this.getAttribute('muted') === 'true'\n    if (attrMuted !== undefined) {\n      return attrMuted;\n    } else if (this.getAttribute('volume')) {\n      return Number.parseInt(this.getAttribute('volume')) === 0\n    } else {\n      return false\n    }\n  }\n\n  set muted (val) {\n    if (this.noAudio) {\n      return;\n    }\n    this.setAttribute('muted', val);\n    if (!val) {\n      this.aCtx.muted = false\n    } else {\n      this.aCtx.muted = true\n    }\n    this.onValueChange()\n  }\n\n  get error () {\n    return this._err || this.vCtx.error || (this.noAudio ? null : this.aCtx.error);\n  }\n\n  get buffered () {\n    return this.vCtx.buffered\n  }\n\n  get noAudio () {\n    return this.getAttribute('noaudio') === 'true'\n  }\n\n  get networkState () {\n    return 0\n  }\n\n  get fps () {\n    return this._fps\n  }\n\n  set fps (val) {\n    if (!validateFPS(val)) {\n      val = DEFAULT_FPS\n    }\n    this._fps = val\n    if (this.ticker) {\n      this.ticker.setInterval(1000 / val)\n    }\n  }\n\n  get preloadTime () {\n    const attrPreloadTime = this.getAttribute('preloadtime');\n    if (attrPreloadTime) {\n      const preloadTime = Number.parseFloat(attrPreloadTime);\n      if (preloadTime > 0 && !Number.isNaN(preloadTime)) {\n        return preloadTime;\n      }\n    }\n    return Infinity;\n  }\n\n  set preloadTime (val) {\n    if (val && Number(val) > 0) {\n      this.setAttribute('preloadtime', val);\n      this.vCtx.config.preloadTime = this.preloadTime;\n    }\n  }\n}\n// eslint-disable-next-line no-undef\ncustomElements.define('mobile-video', MobileVideo);\n"],"names":["n","window","Document","prototype","createElement","p","createElementNS","aa","importNode","ba","prepend","ca","append","da","DocumentFragment","ea","q","Node","cloneNode","r","appendChild","t","insertBefore","u","removeChild","v","replaceChild","x","Object","getOwnPropertyDescriptor","y","Element","attachShadow","z","A","getAttribute","B","setAttribute","C","removeAttribute","D","getAttributeNS","E","setAttributeNS","F","removeAttributeNS","G","insertAdjacentElement","fa","insertAdjacentHTML","ha","ia","ja","before","ka","after","la","replaceWith","ma","remove","na","HTMLElement","H","oa","pa","qa","Set","split","forEach","a","add","ra","b","has","test","sa","document","contains","bind","documentElement","I","isConnected","__CE_isImportDocument","parentNode","ShadowRoot","host","J","children","Array","slice","call","firstChild","nextSibling","nodeType","ELEMENT_NODE","push","K","L","c","f","d","e","localName","import","__CE_shadowRoot","M","ta","N","readyState","MutationObserver","observe","childList","subtree","ua","disconnect","length","addedNodes","va","Promise","wa","Error","O","Map","g","l","i","j","h","m","o","Function","TypeError","xa","set","ya","define","za","SyntaxError","P","w","k","observedAttributes","constructorFunction","connectedCallback","disconnectedCallback","adoptedCallback","attributeChangedCallback","constructionStack","upgrade","__CE_state","get","Q","whenDefined","reject","indexOf","polyfillWrapFlushCallback","delete","R","CustomElementRegistry","polyfillDefineLazy","S","T","noDocumentConstructionObserver","shadyDomFastWalk","U","ShadyDOM","inUse","querySelectorAll","nativeMethods","Aa","Ba","V","W","__CE_patched","X","Y","s","__CE_registry","__CE_documentLoadHandled","addEventListener","ownerDocument","defaultView","pop","__CE_definition","hasAttributes","Ca","namespaceURI","setPrototypeOf","HTMLUnknownElement","message","sourceURL","fileName","line","lineNumber","column","columnNumber","ErrorEvent","initErrorEvent","cancelable","filename","lineno","colno","error","createEvent","preventDefault","defineProperty","configurable","enumerable","dispatchEvent","defaultPrevented","console","Da","Ea","constructor","writable","value","Z","arguments","apply","Fa","Ga","TEXT_NODE","childNodes","COMMENT_NODE","textContent","join","createTextNode","Ha","Ia","toLowerCase","previousSibling","lastChild","String","innerHTML","content","customElements","Ja","forcePolyfill","__CE_installPolyfill","self","Reflect","undefined","BuiltInHTMLElement","wrapperForTheName","construct","DEFAULT_FPS","validateFPS","fps","Ticker","options","assign","interval","callbacks","len","callback","RafTicker","props","prev","timerId","_subTimerId","_tickFunc","getTickFunc","tick","nextTick","onTick","cancelFunc","getCancelFunc","requestAnimationFrame","webkitRequestAnimationFrame","cancelAnimationFrame","webkitCancelAnimationFrame","TimeoutTicker","config","timeoutId","setTimeout","stop","clearTimeout","TARGET","Symbol","SCRIPT_TYPE","BlobBuilder","WebKitBlobBuilder","MozBlobBuilder","MSBlobBuilder","URL","webkitURL","Worker","shimWorker","fn","ShimWorker","forceFallback","source","replace","objURL","createSourceObject","revokeObjectURL","selfShim","postMessage","onmessage","data","target","isThisThread","testWorker","testArray","Uint8Array","navigator","userAgent","buffer","terminate","str","createObjectURL","Blob","type","blob","getBlob","shimImportScripts","src","resolve","_shimWorkerDocument","onload","onerror","head","MAX_STREAM_BUFFER_LENGTH","Decoder","inited","meta","infolist","importScripts","par_broadwayOnBroadwayInited","broadwayOnBroadwayInited","par_broadwayOnPictureDecoded","broadwayOnPictureDecoded","_shimWorkerWindow","toU8Array","ptr","Module","HEAPU8","subarray","init","_broadwayInit","streamBuffer","_broadwayCreateStream","offset","width","height","yLinesize","uvLinesize","infoid","info","yRowcount","uvRowcount","chromaFormat","datetemp","msg","log","dts","decodeTime","Date","now","decode","time","parseInt","getTime","Math","floor","_broadwayPlayStream","destroy","_broadwayExit","updateMeta","decoder","onPostRun","then","addOnPostRun","toString","YUVCanvas","configs","canvas","_initMeta","_initContextGL","contextGL","_initProgram","_initBuffers","_initTextures","chroma","presentHeight","presentWidth","gl","validContextNames","nameIndex","contextName","contextOptions","getContext","getParameter","vertexShaderScript","fragmentShaderScript","YUV2RGB","vertexShader","createShader","VERTEX_SHADER","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","getShaderInfoLog","fragmentShader","FRAGMENT_SHADER","program","createProgram","attachShader","linkProgram","getProgramParameter","LINK_STATUS","getProgramInfoLog","useProgram","YUV2RGBRef","getUniformLocation","uniformMatrix4fv","shaderProgram","vertexPosBuffer","createBuffer","bindBuffer","ARRAY_BUFFER","bufferData","Float32Array","STATIC_DRAW","vertexPosRef","getAttribLocation","enableVertexAttribArray","vertexAttribPointer","FLOAT","texturePosBuffer","texturePosRef","uTexturePosBuffer","uTexturePosRef","vTexturePosBuffer","vTexturePosRef","yTextureRef","_initTexture","ySamplerRef","uniform1i","uTextureRef","uSamplerRef","vTextureRef","vSamplerRef","textureRef","createTexture","bindTexture","TEXTURE_2D","texParameteri","TEXTURE_MAG_FILTER","NEAREST","TEXTURE_MIN_FILTER","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","ylen","uvlen","renderData","yData","uData","vData","_drawPictureGL420","yDataPerRow","yRowCnt","uDataPerRow","uRowCnt","vDataPerRow","vRowCnt","ratiow","ratioh","left","top","viewport","texturePosValues","DYNAMIC_DRAW","uTexturePosValues","vTexturePosValues","activeTexture","TEXTURE0","texImage2D","LUMINANCE","UNSIGNED_BYTE","TEXTURE1","TEXTURE2","drawArrays","TRIANGLE_STRIP","_drawPictureGL","_drawPictureRGB","SourceBuffer","reset","currentGop","_lastGet","frame","shift","gop","samples","index","sample","nextGop","start","end","splice","TimeRanges","ranges","idx","range","domain","EventHandlers","create","EventEmitter","usingDomains","_events","_maxListeners","defaultMaxListeners","active","getPrototypeOf","_eventsCount","setMaxListeners","isNaN","$getMaxListeners","that","getMaxListeners","emitNone","handler","isFn","listeners","arrayClone","emitOne","arg1","emitTwo","arg2","emitThree","arg3","emitMany","args","emit","er","events","doError","domainEmitter","domainThrown","err","context","_addListener","listener","existing","newListener","unshift","warned","name","emitter","count","emitWarning","warn","addListener","on","prependListener","_onceWrap","fired","removeListener","once","prependOnceListener","list","position","originalListener","spliceOne","removeAllListeners","keys","key","evlistener","ret","unwrapListeners","listenerCount","eventNames","ownKeys","arr","copy","asmSupported","MyAsmModule","HAVE_NOTHING","HAVE_METADATA","HAVE_CURRENT_DATA","HAVE_FUTURE_DATA","HAVE_ENOUGH_DATA","NOT_SEEK","SEEKING","SEEKED","VIDEO_CANVAS_EVENTS","VIDEO_EVENTS","VideoCanvas","onFirstFrame","oncanplay","initParameters","style","maxWidth","maxHeight","bottom","right","margin","handleMessage","useBackupTimer","readyStatus","paused","currentTime","_seekState","_avccpushed","_decodedFrames","_lastSampleDts","_baseDts","_lastRenderTime","playFinish","wasmworker","VideoWorker","setBackUpWorker","_decoderInited","BackupVideoWorker","initWasmWorker","pushAvcc","sps","byteLength","pps","yuvCanvas","Render","resetMeta","videoTrack","preload","preloadTime","_analyseNal","pts","cts","isKeyframe","decodedFrameLen","frameRate","frameTimes","frameTime","Number","max","render","destroyWorker","_isSeeking","removeEventListener","_onDecoded","currentRange","decodedTimes","AudioCtx","AudioContext","webkitAudioContext","gainNode","createGain","connect","destination","duration","_currentBuffer","_nextBuffer","_lastpts","_preDecode","_currentTime","_decoding","_volume","parseFloat","volume","gain","_played","loadFinish","waitNextID","destroyed","audioTrack","setAudioData","decodeAAC","_this","sampleData","getAACData","combileData","decodeAudioData","audioSource","createBufferSource","getTimeBuffer","onSourceEnded","playStart","state","playFailed","resume","audioCtx","suspend","close","val","muted","adts","getAdts","objectType","sampleRateIndex","channelCount","aacframelength","AVReconciler","aCtx","vCtx","video","vCurTime","aCurTime","noAudio","gap","pause","play","clearInterval","setInterval","WorkerTicker","worker","MobileVideo","_canvas","handleAudioSourceEnd","played","pendingPlayTask","_waiting","_paused","videoMetaInited","audioMetaInited","handleVCtxInnerEvent","_err","_lastTimeupdateStamp","_volumeEventStamp","_hasDispatch","_fps","_destroyed","VideoCtx","attrVolume","ticker","reconciler","eventName","_innerDispatchEvent","doReconcile","cleanBuffer","_destroyVideo","_destroyAudio","decodeAudio","decodeVideo","decodeVideoBuffer","setAudioMetaData","setVideoMetaData","code","Event","_initAudio","autoplay","audioPlayTask","all","prevTime","rendered","_onTimer","catch","videoWidth","display","pxVal","videoHeight","seeking","nVal","setVideoSeeking","hasAttribute","playbackRate","ended","vol","mute","onValueChange","attrMuted","buffered","attrPreloadTime","Infinity"],"mappings":"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"}